(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();function LS(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var rg={exports:{}},gc={};var F_;function US(){if(F_)return gc;F_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var d in o)d!=="key"&&(c[d]=o[d])}else c=o;return o=c.ref,{$$typeof:i,type:r,key:u,ref:o!==void 0?o:null,props:c}}return gc.Fragment=e,gc.jsx=t,gc.jsxs=t,gc}var G_;function zS(){return G_||(G_=1,rg.exports=US()),rg.exports}var _=zS(),ag={exports:{}},Be={};var $_;function BS(){if($_)return Be;$_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function I(V){return V===null||typeof V!="object"?null:(V=T&&V[T]||V["@@iterator"],typeof V=="function"?V:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,k={};function j(V,$,oe){this.props=V,this.context=$,this.refs=k,this.updater=oe||P}j.prototype.isReactComponent={},j.prototype.setState=function(V,$){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,$,"setState")},j.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function Q(){}Q.prototype=j.prototype;function G(V,$,oe){this.props=V,this.context=$,this.refs=k,this.updater=oe||P}var he=G.prototype=new Q;he.constructor=G,H(he,j.prototype),he.isPureReactComponent=!0;var F=Array.isArray;function U(){}var S={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function R(V,$,oe){var ce=oe.ref;return{$$typeof:i,type:V,key:$,ref:ce!==void 0?ce:null,props:oe}}function M(V,$){return R(V.type,$,V.props)}function C(V){return typeof V=="object"&&V!==null&&V.$$typeof===i}function O(V){var $={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(oe){return $[oe]})}var D=/\/+/g;function Ee(V,$){return typeof V=="object"&&V!==null&&V.key!=null?O(""+V.key):$.toString(36)}function ge(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(U,U):(V.status="pending",V.then(function($){V.status==="pending"&&(V.status="fulfilled",V.value=$)},function($){V.status==="pending"&&(V.status="rejected",V.reason=$)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function q(V,$,oe,ce,_e){var we=typeof V;(we==="undefined"||we==="boolean")&&(V=null);var Oe=!1;if(V===null)Oe=!0;else switch(we){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(V.$$typeof){case i:case e:Oe=!0;break;case v:return Oe=V._init,q(Oe(V._payload),$,oe,ce,_e)}}if(Oe)return _e=_e(V),Oe=ce===""?"."+Ee(V,0):ce,F(_e)?(oe="",Oe!=null&&(oe=Oe.replace(D,"$&/")+"/"),q(_e,$,oe,"",function($t){return $t})):_e!=null&&(C(_e)&&(_e=M(_e,oe+(_e.key==null||V&&V.key===_e.key?"":(""+_e.key).replace(D,"$&/")+"/")+Oe)),$.push(_e)),1;Oe=0;var ht=ce===""?".":ce+":";if(F(V))for(var ft=0;ft<V.length;ft++)ce=V[ft],we=ht+Ee(ce,ft),Oe+=q(ce,$,oe,we,_e);else if(ft=I(V),typeof ft=="function")for(V=ft.call(V),ft=0;!(ce=V.next()).done;)ce=ce.value,we=ht+Ee(ce,ft++),Oe+=q(ce,$,oe,we,_e);else if(we==="object"){if(typeof V.then=="function")return q(ge(V),$,oe,ce,_e);throw $=String(V),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function se(V,$,oe){if(V==null)return V;var ce=[],_e=0;return q(V,ce,"","",function(we){return $.call(oe,we,_e++)}),ce}function re(V){if(V._status===-1){var $=V._result;$=$(),$.then(function(oe){(V._status===0||V._status===-1)&&(V._status=1,V._result=oe)},function(oe){(V._status===0||V._status===-1)&&(V._status=2,V._result=oe)}),V._status===-1&&(V._status=0,V._result=$)}if(V._status===1)return V._result.default;throw V._result}var pe=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},ve={map:se,forEach:function(V,$,oe){se(V,function(){$.apply(this,arguments)},oe)},count:function(V){var $=0;return se(V,function(){$++}),$},toArray:function(V){return se(V,function($){return $})||[]},only:function(V){if(!C(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Be.Activity=E,Be.Children=ve,Be.Component=j,Be.Fragment=t,Be.Profiler=o,Be.PureComponent=G,Be.StrictMode=r,Be.Suspense=g,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Be.__COMPILER_RUNTIME={__proto__:null,c:function(V){return S.H.useMemoCache(V)}},Be.cache=function(V){return function(){return V.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(V,$,oe){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ce=H({},V.props),_e=V.key;if($!=null)for(we in $.key!==void 0&&(_e=""+$.key),$)!x.call($,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&$.ref===void 0||(ce[we]=$[we]);var we=arguments.length-2;if(we===1)ce.children=oe;else if(1<we){for(var Oe=Array(we),ht=0;ht<we;ht++)Oe[ht]=arguments[ht+2];ce.children=Oe}return R(V.type,_e,ce)},Be.createContext=function(V){return V={$$typeof:u,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:c,_context:V},V},Be.createElement=function(V,$,oe){var ce,_e={},we=null;if($!=null)for(ce in $.key!==void 0&&(we=""+$.key),$)x.call($,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(_e[ce]=$[ce]);var Oe=arguments.length-2;if(Oe===1)_e.children=oe;else if(1<Oe){for(var ht=Array(Oe),ft=0;ft<Oe;ft++)ht[ft]=arguments[ft+2];_e.children=ht}if(V&&V.defaultProps)for(ce in Oe=V.defaultProps,Oe)_e[ce]===void 0&&(_e[ce]=Oe[ce]);return R(V,we,_e)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(V){return{$$typeof:d,render:V}},Be.isValidElement=C,Be.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:re}},Be.memo=function(V,$){return{$$typeof:p,type:V,compare:$===void 0?null:$}},Be.startTransition=function(V){var $=S.T,oe={};S.T=oe;try{var ce=V(),_e=S.S;_e!==null&&_e(oe,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(U,pe)}catch(we){pe(we)}finally{$!==null&&oe.types!==null&&($.types=oe.types),S.T=$}},Be.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Be.use=function(V){return S.H.use(V)},Be.useActionState=function(V,$,oe){return S.H.useActionState(V,$,oe)},Be.useCallback=function(V,$){return S.H.useCallback(V,$)},Be.useContext=function(V){return S.H.useContext(V)},Be.useDebugValue=function(){},Be.useDeferredValue=function(V,$){return S.H.useDeferredValue(V,$)},Be.useEffect=function(V,$){return S.H.useEffect(V,$)},Be.useEffectEvent=function(V){return S.H.useEffectEvent(V)},Be.useId=function(){return S.H.useId()},Be.useImperativeHandle=function(V,$,oe){return S.H.useImperativeHandle(V,$,oe)},Be.useInsertionEffect=function(V,$){return S.H.useInsertionEffect(V,$)},Be.useLayoutEffect=function(V,$){return S.H.useLayoutEffect(V,$)},Be.useMemo=function(V,$){return S.H.useMemo(V,$)},Be.useOptimistic=function(V,$){return S.H.useOptimistic(V,$)},Be.useReducer=function(V,$,oe){return S.H.useReducer(V,$,oe)},Be.useRef=function(V){return S.H.useRef(V)},Be.useState=function(V){return S.H.useState(V)},Be.useSyncExternalStore=function(V,$,oe){return S.H.useSyncExternalStore(V,$,oe)},Be.useTransition=function(){return S.H.useTransition()},Be.version="19.2.3",Be}var K_;function pp(){return K_||(K_=1,ag.exports=BS()),ag.exports}var z=pp();const Ze=LS(z);var og={exports:{}},pc={},lg={exports:{}},cg={};var Q_;function qS(){return Q_||(Q_=1,(function(i){function e(q,se){var re=q.length;q.push(se);e:for(;0<re;){var pe=re-1>>>1,ve=q[pe];if(0<o(ve,se))q[pe]=se,q[re]=ve,re=pe;else break e}}function t(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var se=q[0],re=q.pop();if(re!==se){q[0]=re;e:for(var pe=0,ve=q.length,V=ve>>>1;pe<V;){var $=2*(pe+1)-1,oe=q[$],ce=$+1,_e=q[ce];if(0>o(oe,re))ce<ve&&0>o(_e,oe)?(q[pe]=_e,q[ce]=re,pe=ce):(q[pe]=oe,q[$]=re,pe=$);else if(ce<ve&&0>o(_e,re))q[pe]=_e,q[ce]=re,pe=ce;else break e}}return se}function o(q,se){var re=q.sortIndex-se.sortIndex;return re!==0?re:q.id-se.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var u=Date,d=u.now();i.unstable_now=function(){return u.now()-d}}var g=[],p=[],v=1,E=null,T=3,I=!1,P=!1,H=!1,k=!1,j=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function he(q){for(var se=t(p);se!==null;){if(se.callback===null)r(p);else if(se.startTime<=q)r(p),se.sortIndex=se.expirationTime,e(g,se);else break;se=t(p)}}function F(q){if(H=!1,he(q),!P)if(t(g)!==null)P=!0,U||(U=!0,O());else{var se=t(p);se!==null&&ge(F,se.startTime-q)}}var U=!1,S=-1,x=5,R=-1;function M(){return k?!0:!(i.unstable_now()-R<x)}function C(){if(k=!1,U){var q=i.unstable_now();R=q;var se=!0;try{e:{P=!1,H&&(H=!1,Q(S),S=-1),I=!0;var re=T;try{t:{for(he(q),E=t(g);E!==null&&!(E.expirationTime>q&&M());){var pe=E.callback;if(typeof pe=="function"){E.callback=null,T=E.priorityLevel;var ve=pe(E.expirationTime<=q);if(q=i.unstable_now(),typeof ve=="function"){E.callback=ve,he(q),se=!0;break t}E===t(g)&&r(g),he(q)}else r(g);E=t(g)}if(E!==null)se=!0;else{var V=t(p);V!==null&&ge(F,V.startTime-q),se=!1}}break e}finally{E=null,T=re,I=!1}se=void 0}}finally{se?O():U=!1}}}var O;if(typeof G=="function")O=function(){G(C)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Ee=D.port2;D.port1.onmessage=C,O=function(){Ee.postMessage(null)}}else O=function(){j(C,0)};function ge(q,se){S=j(function(){q(i.unstable_now())},se)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(q){q.callback=null},i.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<q?Math.floor(1e3/q):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(q){switch(T){case 1:case 2:case 3:var se=3;break;default:se=T}var re=T;T=se;try{return q()}finally{T=re}},i.unstable_requestPaint=function(){k=!0},i.unstable_runWithPriority=function(q,se){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var re=T;T=q;try{return se()}finally{T=re}},i.unstable_scheduleCallback=function(q,se,re){var pe=i.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?pe+re:pe):re=pe,q){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=re+ve,q={id:v++,callback:se,priorityLevel:q,startTime:re,expirationTime:ve,sortIndex:-1},re>pe?(q.sortIndex=re,e(p,q),t(g)===null&&q===t(p)&&(H?(Q(S),S=-1):H=!0,ge(F,re-pe))):(q.sortIndex=ve,e(g,q),P||I||(P=!0,U||(U=!0,O()))),q},i.unstable_shouldYield=M,i.unstable_wrapCallback=function(q){var se=T;return function(){var re=T;T=se;try{return q.apply(this,arguments)}finally{T=re}}}})(cg)),cg}var Y_;function HS(){return Y_||(Y_=1,lg.exports=qS()),lg.exports}var ug={exports:{}},Bn={};var X_;function FS(){if(X_)return Bn;X_=1;var i=pp();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:p,implementation:v}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Bn.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return c(g,p,null,v)},Bn.flushSync=function(g){var p=u.T,v=r.p;try{if(u.T=null,r.p=2,g)return g()}finally{u.T=p,r.p=v,r.d.f()}},Bn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},Bn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Bn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,E=d(v,p.crossOrigin),T=typeof p.integrity=="string"?p.integrity:void 0,I=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:I}):v==="script"&&r.d.X(g,{crossOrigin:E,integrity:T,fetchPriority:I,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Bn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=d(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},Bn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=d(v,p.crossOrigin);r.d.L(g,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Bn.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=d(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},Bn.requestFormReset=function(g){r.d.r(g)},Bn.unstable_batchedUpdates=function(g,p){return g(p)},Bn.useFormState=function(g,p,v){return u.H.useFormState(g,p,v)},Bn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Bn.version="19.2.3",Bn}var W_;function rE(){if(W_)return ug.exports;W_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ug.exports=FS(),ug.exports}var J_;function GS(){if(J_)return pc;J_=1;var i=HS(),e=pp(),t=rE();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function u(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function g(n){if(c(n)!==n)throw Error(r(188))}function p(n){var s=n.alternate;if(!s){if(s=c(n),s===null)throw Error(r(188));return s!==n?null:n}for(var a=n,l=s;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return g(f),n;if(m===l)return g(f),s;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=m;else{for(var b=!1,A=f.child;A;){if(A===a){b=!0,a=f,l=m;break}if(A===l){b=!0,l=f,a=m;break}A=A.sibling}if(!b){for(A=m.child;A;){if(A===a){b=!0,a=m,l=f;break}if(A===l){b=!0,l=m,a=f;break}A=A.sibling}if(!b)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:s}function v(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=v(n),s!==null)return s;n=n.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),Q=Symbol.for("react.consumer"),G=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function O(n){return n===null||typeof n!="object"?null:(n=C&&n[C]||n["@@iterator"],typeof n=="function"?n:null)}var D=Symbol.for("react.client.reference");function Ee(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===D?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case H:return"Fragment";case j:return"Profiler";case k:return"StrictMode";case F:return"Suspense";case U:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case P:return"Portal";case G:return n.displayName||"Context";case Q:return(n._context.displayName||"Context")+".Consumer";case he:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case S:return s=n.displayName||null,s!==null?s:Ee(n.type)||"Memo";case x:s=n._payload,n=n._init;try{return Ee(n(s))}catch{}}return null}var ge=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},pe=[],ve=-1;function V(n){return{current:n}}function $(n){0>ve||(n.current=pe[ve],pe[ve]=null,ve--)}function oe(n,s){ve++,pe[ve]=n.current,n.current=s}var ce=V(null),_e=V(null),we=V(null),Oe=V(null);function ht(n,s){switch(oe(we,s),oe(_e,n),oe(ce,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?d_(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=d_(s),n=m_(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}$(ce),oe(ce,n)}function ft(){$(ce),$(_e),$(we)}function $t(n){n.memoizedState!==null&&oe(Oe,n);var s=ce.current,a=m_(s,n.type);s!==a&&(oe(_e,n),oe(ce,a))}function xi(n){_e.current===n&&($(ce),$(_e)),Oe.current===n&&($(Oe),hc._currentValue=re)}var Ln,qi;function en(n){if(Ln===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Ln=s&&s[1]||"",qi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ln+n+qi}var fi=!1;function Un(n,s){if(!n||fi)return"";fi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ae){var ee=ae}Reflect.construct(n,[],de)}else{try{de.call()}catch(ae){ee=ae}n.call(de.prototype)}}else{try{throw Error()}catch(ae){ee=ae}(de=n())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ae){if(ae&&ee&&typeof ae.stack=="string")return[ae.stack,ee.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),b=m[0],A=m[1];if(b&&A){var L=b.split(`
`),J=A.split(`
`);for(f=l=0;l<L.length&&!L[l].includes("DetermineComponentFrameRoot");)l++;for(;f<J.length&&!J[f].includes("DetermineComponentFrameRoot");)f++;if(l===L.length||f===J.length)for(l=L.length-1,f=J.length-1;1<=l&&0<=f&&L[l]!==J[f];)f--;for(;1<=l&&0<=f;l--,f--)if(L[l]!==J[f]){if(l!==1||f!==1)do if(l--,f--,0>f||L[l]!==J[f]){var le=`
`+L[l].replace(" at new "," at ");return n.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",n.displayName)),le}while(1<=l&&0<=f);break}}}finally{fi=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?en(a):""}function os(n,s){switch(n.tag){case 26:case 27:case 5:return en(n.type);case 16:return en("Lazy");case 13:return n.child!==s&&s!==null?en("Suspense Fallback"):en("Suspense");case 19:return en("SuspenseList");case 0:case 15:return Un(n.type,!1);case 11:return Un(n.type.render,!1);case 1:return Un(n.type,!0);case 31:return en("Activity");default:return""}}function Hi(n){try{var s="",a=null;do s+=os(n,a),a=n,n=n.return;while(n);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var St=Object.prototype.hasOwnProperty,dt=i.unstable_scheduleCallback,$n=i.unstable_cancelCallback,ls=i.unstable_shouldYield,cs=i.unstable_requestPaint,tn=i.unstable_now,Fi=i.unstable_getCurrentPriorityLevel,Cs=i.unstable_ImmediatePriority,Kn=i.unstable_UserBlockingPriority,Cn=i.unstable_NormalPriority,Gi=i.unstable_LowPriority,Ns=i.unstable_IdlePriority,Qn=i.log,Is=i.unstable_setDisableYieldValue,Yn=null,Kt=null;function bn(n){if(typeof Qn=="function"&&Is(n),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(Yn,n)}catch{}}var At=Math.clz32?Math.clz32:ar,Ds=Math.log,$i=Math.LN2;function ar(n){return n>>>=0,n===0?32:31-(Ds(n)/$i|0)|0}var ni=256,Ki=262144,Ge=4194304;function Rt(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ct(n,s,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,m=n.suspendedLanes,b=n.pingedLanes;n=n.warmLanes;var A=l&134217727;return A!==0?(l=A&~m,l!==0?f=Rt(l):(b&=A,b!==0?f=Rt(b):a||(a=A&~n,a!==0&&(f=Rt(a))))):(A=l&~m,A!==0?f=Rt(A):b!==0?f=Rt(b):a||(a=l&~n,a!==0&&(f=Rt(a)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:f}function Bt(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function En(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nn(){var n=Ge;return Ge<<=1,(Ge&62914560)===0&&(Ge=4194304),n}function Lt(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function te(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function pt(n,s,a,l,f,m){var b=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var A=n.entanglements,L=n.expirationTimes,J=n.hiddenUpdates;for(a=b&~a;0<a;){var le=31-At(a),de=1<<le;A[le]=0,L[le]=-1;var ee=J[le];if(ee!==null)for(J[le]=null,le=0;le<ee.length;le++){var ae=ee[le];ae!==null&&(ae.lane&=-536870913)}a&=~de}l!==0&&yt(n,l,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(b&~s))}function yt(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var l=31-At(s);n.entangledLanes|=s,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function Qt(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var l=31-At(a),f=1<<l;f&s|n[l]&s&&(n[l]|=s),a&=~f}}function ye(n,s){var a=s&-s;return a=(a&42)!==0?1:mn(a),(a&(n.suspendedLanes|s))!==0?0:a}function mn(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function st(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ot(){var n=se.p;return n!==0?n:(n=window.event,n===void 0?32:j_(n.type))}function gn(n,s){var a=se.p;try{return se.p=n,s()}finally{se.p=a}}var vt=Math.random().toString(36).slice(2),Ut="__reactFiber$"+vt,Yt="__reactProps$"+vt,Ae="__reactContainer$"+vt,or="__reactEvents$"+vt,io="__reactListeners$"+vt,so="__reactHandles$"+vt,ma="__reactResources$"+vt,Si="__reactMarker$"+vt;function lr(n){delete n[Ut],delete n[Yt],delete n[or],delete n[io],delete n[so]}function Ai(n){var s=n[Ut];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Ae]||a[Ut]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=E_(n);n!==null;){if(a=n[Ut])return a;n=E_(n)}return s}n=a,a=n.parentNode}return null}function Xn(n){if(n=n[Ut]||n[Ae]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function zn(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function Ri(n){var s=n[ma];return s||(s=n[ma]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function qt(n){n[Si]=!0}var ga=new Set,cr={};function ii(n,s){Ci(n,s),Ci(n+"Capture",s)}function Ci(n,s){for(cr[n]=s,n=0;n<s.length;n++)ga.add(s[n])}var pa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ur={},ya={};function sn(n){return St.call(ya,n)?!0:St.call(ur,n)?!1:pa.test(n)?ya[n]=!0:(ur[n]=!0,!1)}function Y(n,s,a){if(sn(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function ne(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function Z(n,s,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+l)}}function xe(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ie(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function tt(n,s,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(b){a=""+b,m.call(this,b)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(b){a=""+b},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function $e(n){if(!n._valueTracker){var s=Ie(n)?"checked":"value";n._valueTracker=tt(n,s,""+n[s])}}function Ni(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return n&&(l=Ie(n)?n.checked?"true":"false":n.value),n=l,n!==a?(s.setValue(n),!0):!1}function us(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var va=/[\n"\\]/g;function si(n){return n.replace(va,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ro(n,s,a,l,f,m,b,A){n.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.type=b:n.removeAttribute("type"),s!=null?b==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+xe(s)):n.value!==""+xe(s)&&(n.value=""+xe(s)):b!=="submit"&&b!=="reset"||n.removeAttribute("value"),s!=null?xl(n,b,xe(s)):a!=null?xl(n,b,xe(a)):l!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+xe(A):n.removeAttribute("name")}function yu(n,s,a,l,f,m,b,A){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){$e(n);return}a=a!=null?""+xe(a):"",s=s!=null?""+xe(s):a,A||s===n.value||(n.value=s),n.defaultValue=s}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=A?n.checked:!!l,n.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.name=b),$e(n)}function xl(n,s,a){s==="number"&&us(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function hr(n,s,a,l){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+xe(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function vu(n,s,a){if(s!=null&&(s=""+xe(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+xe(a):""}function fr(n,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(ge(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=xe(s),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),$e(n)}function ri(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var _u=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sl(n,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":l?n.setProperty(s,a):typeof a!="number"||a===0||_u.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function Al(n,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in s)l=s[f],s.hasOwnProperty(f)&&a[f]!==l&&Sl(n,f,l)}else for(var m in s)s.hasOwnProperty(m)&&Sl(n,m,s[m])}function ao(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function oo(n){return dr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Qi(){}var Rl=null;function Ii(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var mr=null,hs=null;function _a(n){var s=Xn(n);if(s&&(n=s.stateNode)){var a=n[Yt]||null;e:switch(n=s.stateNode,s.type){case"input":if(ro(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+si(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==n&&l.form===n.form){var f=l[Yt]||null;if(!f)throw Error(r(90));ro(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===n.form&&Ni(l)}break e;case"textarea":vu(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&hr(n,!!a.multiple,s,!1)}}}var lo=!1;function gr(n,s,a){if(lo)return n(s,a);lo=!0;try{var l=n(s);return l}finally{if(lo=!1,(mr!==null||hs!==null)&&(dh(),mr&&(s=mr,n=hs,hs=mr=null,_a(s),n)))for(s=0;s<n.length;s++)_a(n[s])}}function Yi(n,s){var a=n.stateNode;if(a===null)return null;var l=a[Yt]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var Di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ba=!1;if(Di)try{var _t={};Object.defineProperty(_t,"passive",{get:function(){ba=!0}}),window.addEventListener("test",_t,_t),window.removeEventListener("test",_t,_t)}catch{ba=!1}var fs=null,Cl=null,Ea=null;function Nl(){if(Ea)return Ea;var n,s=Cl,a=s.length,l,f="value"in fs?fs.value:fs.textContent,m=f.length;for(n=0;n<a&&s[n]===f[n];n++);var b=a-n;for(l=1;l<=b&&s[a-l]===f[m-l];l++);return Ea=f.slice(n,1<l?1-l:void 0)}function wa(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function ks(){return!0}function Xi(){return!1}function Nn(n){function s(a,l,f,m,b){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ks:Xi,this.isPropagationStopped=Xi,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ks)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ks)},persist:function(){},isPersistent:ks}),s}var Os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ds=Nn(Os),pr=E({},Os,{view:0,detail:0}),Il=Nn(pr),yr,co,ms,uo=E({},pr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ms&&(ms&&n.type==="mousemove"?(yr=n.screenX-ms.screenX,co=n.screenY-ms.screenY):co=yr=0,ms=n),yr)},movementY:function(n){return"movementY"in n?n.movementY:co}}),Dl=Nn(uo),Ta=E({},uo,{dataTransfer:0}),Eu=Nn(Ta),wu=E({},pr,{relatedTarget:0}),xa=Nn(wu),kl=E({},Os,{animationName:0,elapsedTime:0,pseudoElement:0}),Tu=Nn(kl),ho=E({},Os,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),xu=Nn(ho),Su=E({},Os,{data:0}),gs=Nn(Su),Au={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ru={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nu(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Cu[n])?!!s[n]:!1}function vr(){return Nu}var Wn=E({},pr,{key:function(n){if(n.key){var s=Au[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=wa(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ru[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vr,charCode:function(n){return n.type==="keypress"?wa(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?wa(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Iu=Nn(Wn),Du=E({},uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ms=Nn(Du),h=E({},pr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vr}),y=Nn(h),w=E({},Os,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=Nn(w),X=E({},uo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ie=Nn(X),be=E({},Os,{newState:0,oldState:0}),qe=Nn(be),Xt=[9,13,27,32],ct=Di&&"CompositionEvent"in window,Mt=null;Di&&"documentMode"in document&&(Mt=document.documentMode);var ki=Di&&"TextEvent"in window&&!Mt,ps=Di&&(!ct||Mt&&8<Mt&&11>=Mt),Wi=" ",Ji=!1;function Sa(n,s){switch(n){case"keyup":return Xt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var mo=!1;function lx(n,s){switch(n){case"compositionend":return fo(s);case"keypress":return s.which!==32?null:(Ji=!0,Wi);case"textInput":return n=s.data,n===Wi&&Ji?null:n;default:return null}}function cx(n,s){if(mo)return n==="compositionend"||!ct&&Sa(n,s)?(n=Nl(),Ea=Cl=fs=null,mo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ps&&s.locale!=="ko"?null:s.data;default:return null}}var ux={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x0(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!ux[n.type]:s==="textarea"}function S0(n,s,a,l){mr?hs?hs.push(l):hs=[l]:mr=l,s=bh(s,"onChange"),0<s.length&&(a=new ds("onChange","change",null,a,l),n.push({event:a,listeners:s}))}var Ol=null,Ml=null;function hx(n){o_(n,0)}function ku(n){var s=zn(n);if(Ni(s))return n}function A0(n,s){if(n==="change")return s}var R0=!1;if(Di){var fd;if(Di){var dd="oninput"in document;if(!dd){var C0=document.createElement("div");C0.setAttribute("oninput","return;"),dd=typeof C0.oninput=="function"}fd=dd}else fd=!1;R0=fd&&(!document.documentMode||9<document.documentMode)}function N0(){Ol&&(Ol.detachEvent("onpropertychange",I0),Ml=Ol=null)}function I0(n){if(n.propertyName==="value"&&ku(Ml)){var s=[];S0(s,Ml,n,Ii(n)),gr(hx,s)}}function fx(n,s,a){n==="focusin"?(N0(),Ol=s,Ml=a,Ol.attachEvent("onpropertychange",I0)):n==="focusout"&&N0()}function dx(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ku(Ml)}function mx(n,s){if(n==="click")return ku(s)}function gx(n,s){if(n==="input"||n==="change")return ku(s)}function px(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var di=typeof Object.is=="function"?Object.is:px;function Vl(n,s){if(di(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!St.call(s,f)||!di(n[f],s[f]))return!1}return!0}function D0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function k0(n,s){var a=D0(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=s&&l>=s)return{node:a,offset:s-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=D0(a)}}function O0(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?O0(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function M0(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=us(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=us(n.document)}return s}function md(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var yx=Di&&"documentMode"in document&&11>=document.documentMode,go=null,gd=null,Pl=null,pd=!1;function V0(n,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;pd||go==null||go!==us(l)||(l=go,"selectionStart"in l&&md(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Pl&&Vl(Pl,l)||(Pl=l,l=bh(gd,"onSelect"),0<l.length&&(s=new ds("onSelect","select",null,s,a),n.push({event:s,listeners:l}),s.target=go)))}function Aa(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var po={animationend:Aa("Animation","AnimationEnd"),animationiteration:Aa("Animation","AnimationIteration"),animationstart:Aa("Animation","AnimationStart"),transitionrun:Aa("Transition","TransitionRun"),transitionstart:Aa("Transition","TransitionStart"),transitioncancel:Aa("Transition","TransitionCancel"),transitionend:Aa("Transition","TransitionEnd")},yd={},P0={};Di&&(P0=document.createElement("div").style,"AnimationEvent"in window||(delete po.animationend.animation,delete po.animationiteration.animation,delete po.animationstart.animation),"TransitionEvent"in window||delete po.transitionend.transition);function Ra(n){if(yd[n])return yd[n];if(!po[n])return n;var s=po[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in P0)return yd[n]=s[a];return n}var j0=Ra("animationend"),L0=Ra("animationiteration"),U0=Ra("animationstart"),vx=Ra("transitionrun"),_x=Ra("transitionstart"),bx=Ra("transitioncancel"),z0=Ra("transitionend"),B0=new Map,vd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vd.push("scrollEnd");function Zi(n,s){B0.set(n,s),ii(s,[n])}var Ou=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Oi=[],yo=0,_d=0;function Mu(){for(var n=yo,s=_d=yo=0;s<n;){var a=Oi[s];Oi[s++]=null;var l=Oi[s];Oi[s++]=null;var f=Oi[s];Oi[s++]=null;var m=Oi[s];if(Oi[s++]=null,l!==null&&f!==null){var b=l.pending;b===null?f.next=f:(f.next=b.next,b.next=f),l.pending=f}m!==0&&q0(a,f,m)}}function Vu(n,s,a,l){Oi[yo++]=n,Oi[yo++]=s,Oi[yo++]=a,Oi[yo++]=l,_d|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function bd(n,s,a,l){return Vu(n,s,a,l),Pu(n)}function Ca(n,s){return Vu(n,null,null,s),Pu(n)}function q0(n,s,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,m=n.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&s!==null&&(f=31-At(a),n=m.hiddenUpdates,l=n[f],l===null?n[f]=[s]:l.push(s),s.lane=a|536870912),m):null}function Pu(n){if(50<sc)throw sc=0,Nm=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var vo={};function Ex(n,s,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(n,s,a,l){return new Ex(n,s,a,l)}function Ed(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Vs(n,s){var a=n.alternate;return a===null?(a=mi(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function H0(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function ju(n,s,a,l,f,m){var b=0;if(l=n,typeof n=="function")Ed(n)&&(b=1);else if(typeof n=="string")b=AS(n,a,ce.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=mi(31,a,s,f),n.elementType=R,n.lanes=m,n;case H:return Na(a.children,f,m,s);case k:b=8,f|=24;break;case j:return n=mi(12,a,s,f|2),n.elementType=j,n.lanes=m,n;case F:return n=mi(13,a,s,f),n.elementType=F,n.lanes=m,n;case U:return n=mi(19,a,s,f),n.elementType=U,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case G:b=10;break e;case Q:b=9;break e;case he:b=11;break e;case S:b=14;break e;case x:b=16,l=null;break e}b=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return s=mi(b,a,s,f),s.elementType=n,s.type=l,s.lanes=m,s}function Na(n,s,a,l){return n=mi(7,n,l,s),n.lanes=a,n}function wd(n,s,a){return n=mi(6,n,null,s),n.lanes=a,n}function F0(n){var s=mi(18,null,null,0);return s.stateNode=n,s}function Td(n,s,a){return s=mi(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var G0=new WeakMap;function Mi(n,s){if(typeof n=="object"&&n!==null){var a=G0.get(n);return a!==void 0?a:(s={value:n,source:s,stack:Hi(s)},G0.set(n,s),s)}return{value:n,source:s,stack:Hi(s)}}var _o=[],bo=0,Lu=null,jl=0,Vi=[],Pi=0,_r=null,ys=1,vs="";function Ps(n,s){_o[bo++]=jl,_o[bo++]=Lu,Lu=n,jl=s}function $0(n,s,a){Vi[Pi++]=ys,Vi[Pi++]=vs,Vi[Pi++]=_r,_r=n;var l=ys;n=vs;var f=32-At(l)-1;l&=~(1<<f),a+=1;var m=32-At(s)+f;if(30<m){var b=f-f%5;m=(l&(1<<b)-1).toString(32),l>>=b,f-=b,ys=1<<32-At(s)+f|a<<f|l,vs=m+n}else ys=1<<m|a<<f|l,vs=n}function xd(n){n.return!==null&&(Ps(n,1),$0(n,1,0))}function Sd(n){for(;n===Lu;)Lu=_o[--bo],_o[bo]=null,jl=_o[--bo],_o[bo]=null;for(;n===_r;)_r=Vi[--Pi],Vi[Pi]=null,vs=Vi[--Pi],Vi[Pi]=null,ys=Vi[--Pi],Vi[Pi]=null}function K0(n,s){Vi[Pi++]=ys,Vi[Pi++]=vs,Vi[Pi++]=_r,ys=s.id,vs=s.overflow,_r=n}var In=null,It=null,nt=!1,br=null,ji=!1,Ad=Error(r(519));function Er(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ll(Mi(s,n)),Ad}function Q0(n){var s=n.stateNode,a=n.type,l=n.memoizedProps;switch(s[Ut]=n,s[Yt]=l,a){case"dialog":Qe("cancel",s),Qe("close",s);break;case"iframe":case"object":case"embed":Qe("load",s);break;case"video":case"audio":for(a=0;a<ac.length;a++)Qe(ac[a],s);break;case"source":Qe("error",s);break;case"img":case"image":case"link":Qe("error",s),Qe("load",s);break;case"details":Qe("toggle",s);break;case"input":Qe("invalid",s),yu(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Qe("invalid",s);break;case"textarea":Qe("invalid",s),fr(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||h_(s.textContent,a)?(l.popover!=null&&(Qe("beforetoggle",s),Qe("toggle",s)),l.onScroll!=null&&Qe("scroll",s),l.onScrollEnd!=null&&Qe("scrollend",s),l.onClick!=null&&(s.onclick=Qi),s=!0):s=!1,s||Er(n,!0)}function Y0(n){for(In=n.return;In;)switch(In.tag){case 5:case 31:case 13:ji=!1;return;case 27:case 3:ji=!0;return;default:In=In.return}}function Eo(n){if(n!==In)return!1;if(!nt)return Y0(n),nt=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Fm(n.type,n.memoizedProps)),a=!a),a&&It&&Er(n),Y0(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));It=b_(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));It=b_(n)}else s===27?(s=It,Vr(n.type)?(n=Ym,Ym=null,It=n):It=s):It=In?Ui(n.stateNode.nextSibling):null;return!0}function Ia(){It=In=null,nt=!1}function Rd(){var n=br;return n!==null&&(ci===null?ci=n:ci.push.apply(ci,n),br=null),n}function Ll(n){br===null?br=[n]:br.push(n)}var Cd=V(null),Da=null,js=null;function wr(n,s,a){oe(Cd,s._currentValue),s._currentValue=a}function Ls(n){n._currentValue=Cd.current,$(Cd)}function Nd(n,s,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),n===a)break;n=n.return}}function Id(n,s,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var b=f.child;m=m.firstContext;e:for(;m!==null;){var A=m;m=f;for(var L=0;L<s.length;L++)if(A.context===s[L]){m.lanes|=a,A=m.alternate,A!==null&&(A.lanes|=a),Nd(m.return,a,n),l||(b=null);break e}m=A.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(r(341));b.lanes|=a,m=b.alternate,m!==null&&(m.lanes|=a),Nd(b,a,n),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===n){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function wo(n,s,a,l){n=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(r(387));if(b=b.memoizedProps,b!==null){var A=f.type;di(f.pendingProps.value,b.value)||(n!==null?n.push(A):n=[A])}}else if(f===Oe.current){if(b=f.alternate,b===null)throw Error(r(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(hc):n=[hc])}f=f.return}n!==null&&Id(s,n,a,l),s.flags|=262144}function Uu(n){for(n=n.firstContext;n!==null;){if(!di(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ka(n){Da=n,js=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Dn(n){return X0(Da,n)}function zu(n,s){return Da===null&&ka(n),X0(n,s)}function X0(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},js===null){if(n===null)throw Error(r(308));js=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else js=js.next=s;return a}var wx=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},Tx=i.unstable_scheduleCallback,xx=i.unstable_NormalPriority,rn={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dd(){return{controller:new wx,data:new Map,refCount:0}}function Ul(n){n.refCount--,n.refCount===0&&Tx(xx,function(){n.controller.abort()})}var zl=null,kd=0,To=0,xo=null;function Sx(n,s){if(zl===null){var a=zl=[];kd=0,To=Vm(),xo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return kd++,s.then(W0,W0),s}function W0(){if(--kd===0&&zl!==null){xo!==null&&(xo.status="fulfilled");var n=zl;zl=null,To=0,xo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function Ax(n,s){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var J0=q.S;q.S=function(n,s){Vv=tn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Sx(n,s),J0!==null&&J0(n,s)};var Oa=V(null);function Od(){var n=Oa.current;return n!==null?n:xt.pooledCache}function Bu(n,s){s===null?oe(Oa,Oa.current):oe(Oa,s.pool)}function Z0(){var n=Od();return n===null?null:{parent:rn._currentValue,pool:n}}var So=Error(r(460)),Md=Error(r(474)),qu=Error(r(542)),Hu={then:function(){}};function ey(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ty(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(Qi,Qi),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,iy(n),n;default:if(typeof s.status=="string")s.then(Qi,Qi);else{if(n=xt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(l){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=l}},function(l){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,iy(n),n}throw Va=s,So}}function Ma(n){try{var s=n._init;return s(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Va=a,So):a}}var Va=null;function ny(){if(Va===null)throw Error(r(459));var n=Va;return Va=null,n}function iy(n){if(n===So||n===qu)throw Error(r(483))}var Ao=null,Bl=0;function Fu(n){var s=Bl;return Bl+=1,Ao===null&&(Ao=[]),ty(Ao,n,s)}function ql(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Gu(n,s){throw s.$$typeof===T?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function sy(n){function s(K,B){if(n){var W=K.deletions;W===null?(K.deletions=[B],K.flags|=16):W.push(B)}}function a(K,B){if(!n)return null;for(;B!==null;)s(K,B),B=B.sibling;return null}function l(K){for(var B=new Map;K!==null;)K.key!==null?B.set(K.key,K):B.set(K.index,K),K=K.sibling;return B}function f(K,B){return K=Vs(K,B),K.index=0,K.sibling=null,K}function m(K,B,W){return K.index=W,n?(W=K.alternate,W!==null?(W=W.index,W<B?(K.flags|=67108866,B):W):(K.flags|=67108866,B)):(K.flags|=1048576,B)}function b(K){return n&&K.alternate===null&&(K.flags|=67108866),K}function A(K,B,W,ue){return B===null||B.tag!==6?(B=wd(W,K.mode,ue),B.return=K,B):(B=f(B,W),B.return=K,B)}function L(K,B,W,ue){var ke=W.type;return ke===H?le(K,B,W.props.children,ue,W.key):B!==null&&(B.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===x&&Ma(ke)===B.type)?(B=f(B,W.props),ql(B,W),B.return=K,B):(B=ju(W.type,W.key,W.props,null,K.mode,ue),ql(B,W),B.return=K,B)}function J(K,B,W,ue){return B===null||B.tag!==4||B.stateNode.containerInfo!==W.containerInfo||B.stateNode.implementation!==W.implementation?(B=Td(W,K.mode,ue),B.return=K,B):(B=f(B,W.children||[]),B.return=K,B)}function le(K,B,W,ue,ke){return B===null||B.tag!==7?(B=Na(W,K.mode,ue,ke),B.return=K,B):(B=f(B,W),B.return=K,B)}function de(K,B,W){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=wd(""+B,K.mode,W),B.return=K,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case I:return W=ju(B.type,B.key,B.props,null,K.mode,W),ql(W,B),W.return=K,W;case P:return B=Td(B,K.mode,W),B.return=K,B;case x:return B=Ma(B),de(K,B,W)}if(ge(B)||O(B))return B=Na(B,K.mode,W,null),B.return=K,B;if(typeof B.then=="function")return de(K,Fu(B),W);if(B.$$typeof===G)return de(K,zu(K,B),W);Gu(K,B)}return null}function ee(K,B,W,ue){var ke=B!==null?B.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return ke!==null?null:A(K,B,""+W,ue);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case I:return W.key===ke?L(K,B,W,ue):null;case P:return W.key===ke?J(K,B,W,ue):null;case x:return W=Ma(W),ee(K,B,W,ue)}if(ge(W)||O(W))return ke!==null?null:le(K,B,W,ue,null);if(typeof W.then=="function")return ee(K,B,Fu(W),ue);if(W.$$typeof===G)return ee(K,B,zu(K,W),ue);Gu(K,W)}return null}function ae(K,B,W,ue,ke){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return K=K.get(W)||null,A(B,K,""+ue,ke);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case I:return K=K.get(ue.key===null?W:ue.key)||null,L(B,K,ue,ke);case P:return K=K.get(ue.key===null?W:ue.key)||null,J(B,K,ue,ke);case x:return ue=Ma(ue),ae(K,B,W,ue,ke)}if(ge(ue)||O(ue))return K=K.get(W)||null,le(B,K,ue,ke,null);if(typeof ue.then=="function")return ae(K,B,W,Fu(ue),ke);if(ue.$$typeof===G)return ae(K,B,W,zu(B,ue),ke);Gu(B,ue)}return null}function Re(K,B,W,ue){for(var ke=null,ot=null,Ce=B,Fe=B=0,Xe=null;Ce!==null&&Fe<W.length;Fe++){Ce.index>Fe?(Xe=Ce,Ce=null):Xe=Ce.sibling;var lt=ee(K,Ce,W[Fe],ue);if(lt===null){Ce===null&&(Ce=Xe);break}n&&Ce&&lt.alternate===null&&s(K,Ce),B=m(lt,B,Fe),ot===null?ke=lt:ot.sibling=lt,ot=lt,Ce=Xe}if(Fe===W.length)return a(K,Ce),nt&&Ps(K,Fe),ke;if(Ce===null){for(;Fe<W.length;Fe++)Ce=de(K,W[Fe],ue),Ce!==null&&(B=m(Ce,B,Fe),ot===null?ke=Ce:ot.sibling=Ce,ot=Ce);return nt&&Ps(K,Fe),ke}for(Ce=l(Ce);Fe<W.length;Fe++)Xe=ae(Ce,K,Fe,W[Fe],ue),Xe!==null&&(n&&Xe.alternate!==null&&Ce.delete(Xe.key===null?Fe:Xe.key),B=m(Xe,B,Fe),ot===null?ke=Xe:ot.sibling=Xe,ot=Xe);return n&&Ce.forEach(function(zr){return s(K,zr)}),nt&&Ps(K,Fe),ke}function Ve(K,B,W,ue){if(W==null)throw Error(r(151));for(var ke=null,ot=null,Ce=B,Fe=B=0,Xe=null,lt=W.next();Ce!==null&&!lt.done;Fe++,lt=W.next()){Ce.index>Fe?(Xe=Ce,Ce=null):Xe=Ce.sibling;var zr=ee(K,Ce,lt.value,ue);if(zr===null){Ce===null&&(Ce=Xe);break}n&&Ce&&zr.alternate===null&&s(K,Ce),B=m(zr,B,Fe),ot===null?ke=zr:ot.sibling=zr,ot=zr,Ce=Xe}if(lt.done)return a(K,Ce),nt&&Ps(K,Fe),ke;if(Ce===null){for(;!lt.done;Fe++,lt=W.next())lt=de(K,lt.value,ue),lt!==null&&(B=m(lt,B,Fe),ot===null?ke=lt:ot.sibling=lt,ot=lt);return nt&&Ps(K,Fe),ke}for(Ce=l(Ce);!lt.done;Fe++,lt=W.next())lt=ae(Ce,K,Fe,lt.value,ue),lt!==null&&(n&&lt.alternate!==null&&Ce.delete(lt.key===null?Fe:lt.key),B=m(lt,B,Fe),ot===null?ke=lt:ot.sibling=lt,ot=lt);return n&&Ce.forEach(function(jS){return s(K,jS)}),nt&&Ps(K,Fe),ke}function wt(K,B,W,ue){if(typeof W=="object"&&W!==null&&W.type===H&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case I:e:{for(var ke=W.key;B!==null;){if(B.key===ke){if(ke=W.type,ke===H){if(B.tag===7){a(K,B.sibling),ue=f(B,W.props.children),ue.return=K,K=ue;break e}}else if(B.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===x&&Ma(ke)===B.type){a(K,B.sibling),ue=f(B,W.props),ql(ue,W),ue.return=K,K=ue;break e}a(K,B);break}else s(K,B);B=B.sibling}W.type===H?(ue=Na(W.props.children,K.mode,ue,W.key),ue.return=K,K=ue):(ue=ju(W.type,W.key,W.props,null,K.mode,ue),ql(ue,W),ue.return=K,K=ue)}return b(K);case P:e:{for(ke=W.key;B!==null;){if(B.key===ke)if(B.tag===4&&B.stateNode.containerInfo===W.containerInfo&&B.stateNode.implementation===W.implementation){a(K,B.sibling),ue=f(B,W.children||[]),ue.return=K,K=ue;break e}else{a(K,B);break}else s(K,B);B=B.sibling}ue=Td(W,K.mode,ue),ue.return=K,K=ue}return b(K);case x:return W=Ma(W),wt(K,B,W,ue)}if(ge(W))return Re(K,B,W,ue);if(O(W)){if(ke=O(W),typeof ke!="function")throw Error(r(150));return W=ke.call(W),Ve(K,B,W,ue)}if(typeof W.then=="function")return wt(K,B,Fu(W),ue);if(W.$$typeof===G)return wt(K,B,zu(K,W),ue);Gu(K,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,B!==null&&B.tag===6?(a(K,B.sibling),ue=f(B,W),ue.return=K,K=ue):(a(K,B),ue=wd(W,K.mode,ue),ue.return=K,K=ue),b(K)):a(K,B)}return function(K,B,W,ue){try{Bl=0;var ke=wt(K,B,W,ue);return Ao=null,ke}catch(Ce){if(Ce===So||Ce===qu)throw Ce;var ot=mi(29,Ce,null,K.mode);return ot.lanes=ue,ot.return=K,ot}}}var Pa=sy(!0),ry=sy(!1),Tr=!1;function Vd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pd(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function xr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Sr(n,s,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(ut&2)!==0){var f=l.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),l.pending=s,s=Pu(n),q0(n,null,a),s}return Vu(n,l,s,a),Pu(n)}function Hl(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,Qt(n,a)}}function jd(n,s){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=b:m=m.next=b,a=a.next}while(a!==null);m===null?f=m=s:m=m.next=s}else f=m=s;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var Ld=!1;function Fl(){if(Ld){var n=xo;if(n!==null)throw n}}function Gl(n,s,a,l){Ld=!1;var f=n.updateQueue;Tr=!1;var m=f.firstBaseUpdate,b=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var L=A,J=L.next;L.next=null,b===null?m=J:b.next=J,b=L;var le=n.alternate;le!==null&&(le=le.updateQueue,A=le.lastBaseUpdate,A!==b&&(A===null?le.firstBaseUpdate=J:A.next=J,le.lastBaseUpdate=L))}if(m!==null){var de=f.baseState;b=0,le=J=L=null,A=m;do{var ee=A.lane&-536870913,ae=ee!==A.lane;if(ae?(Ye&ee)===ee:(l&ee)===ee){ee!==0&&ee===To&&(Ld=!0),le!==null&&(le=le.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Re=n,Ve=A;ee=s;var wt=a;switch(Ve.tag){case 1:if(Re=Ve.payload,typeof Re=="function"){de=Re.call(wt,de,ee);break e}de=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Ve.payload,ee=typeof Re=="function"?Re.call(wt,de,ee):Re,ee==null)break e;de=E({},de,ee);break e;case 2:Tr=!0}}ee=A.callback,ee!==null&&(n.flags|=64,ae&&(n.flags|=8192),ae=f.callbacks,ae===null?f.callbacks=[ee]:ae.push(ee))}else ae={lane:ee,tag:A.tag,payload:A.payload,callback:A.callback,next:null},le===null?(J=le=ae,L=de):le=le.next=ae,b|=ee;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;ae=A,A=ae.next,ae.next=null,f.lastBaseUpdate=ae,f.shared.pending=null}}while(!0);le===null&&(L=de),f.baseState=L,f.firstBaseUpdate=J,f.lastBaseUpdate=le,m===null&&(f.shared.lanes=0),Ir|=b,n.lanes=b,n.memoizedState=de}}function ay(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function oy(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)ay(a[n],s)}var Ro=V(null),$u=V(0);function ly(n,s){n=Ks,oe($u,n),oe(Ro,s),Ks=n|s.baseLanes}function Ud(){oe($u,Ks),oe(Ro,Ro.current)}function zd(){Ks=$u.current,$(Ro),$($u)}var gi=V(null),Li=null;function Ar(n){var s=n.alternate;oe(Wt,Wt.current&1),oe(gi,n),Li===null&&(s===null||Ro.current!==null||s.memoizedState!==null)&&(Li=n)}function Bd(n){oe(Wt,Wt.current),oe(gi,n),Li===null&&(Li=n)}function cy(n){n.tag===22?(oe(Wt,Wt.current),oe(gi,n),Li===null&&(Li=n)):Rr()}function Rr(){oe(Wt,Wt.current),oe(gi,gi.current)}function pi(n){$(gi),Li===n&&(Li=null),$(Wt)}var Wt=V(0);function Ku(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Km(a)||Qm(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Us=0,He=null,bt=null,an=null,Qu=!1,Co=!1,ja=!1,Yu=0,$l=0,No=null,Rx=0;function Ht(){throw Error(r(321))}function qd(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!di(n[a],s[a]))return!1;return!0}function Hd(n,s,a,l,f,m){return Us=m,He=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,q.H=n===null||n.memoizedState===null?$y:sm,ja=!1,m=a(l,f),ja=!1,Co&&(m=hy(s,a,l,f)),uy(n),m}function uy(n){q.H=Yl;var s=bt!==null&&bt.next!==null;if(Us=0,an=bt=He=null,Qu=!1,$l=0,No=null,s)throw Error(r(300));n===null||on||(n=n.dependencies,n!==null&&Uu(n)&&(on=!0))}function hy(n,s,a,l){He=n;var f=0;do{if(Co&&(No=null),$l=0,Co=!1,25<=f)throw Error(r(301));if(f+=1,an=bt=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}q.H=Ky,m=s(a,l)}while(Co);return m}function Cx(){var n=q.H,s=n.useState()[0];return s=typeof s.then=="function"?Kl(s):s,n=n.useState()[0],(bt!==null?bt.memoizedState:null)!==n&&(He.flags|=1024),s}function Fd(){var n=Yu!==0;return Yu=0,n}function Gd(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function $d(n){if(Qu){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Qu=!1}Us=0,an=bt=He=null,Co=!1,$l=Yu=0,No=null}function Jn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?He.memoizedState=an=n:an=an.next=n,an}function Jt(){if(bt===null){var n=He.alternate;n=n!==null?n.memoizedState:null}else n=bt.next;var s=an===null?He.memoizedState:an.next;if(s!==null)an=s,bt=n;else{if(n===null)throw He.alternate===null?Error(r(467)):Error(r(310));bt=n,n={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},an===null?He.memoizedState=an=n:an=an.next=n}return an}function Xu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kl(n){var s=$l;return $l+=1,No===null&&(No=[]),n=ty(No,n,s),s=He,(an===null?s.memoizedState:an.next)===null&&(s=s.alternate,q.H=s===null||s.memoizedState===null?$y:sm),n}function Wu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Kl(n);if(n.$$typeof===G)return Dn(n)}throw Error(r(438,String(n)))}function Kd(n){var s=null,a=He.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=He.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Xu(),He.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),l=0;l<n;l++)a[l]=M;return s.index++,a}function zs(n,s){return typeof s=="function"?s(n):s}function Ju(n){var s=Jt();return Qd(s,bt,n)}function Qd(n,s,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,m=l.pending;if(m!==null){if(f!==null){var b=f.next;f.next=m.next,m.next=b}s.baseQueue=f=m,l.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{s=f.next;var A=b=null,L=null,J=s,le=!1;do{var de=J.lane&-536870913;if(de!==J.lane?(Ye&de)===de:(Us&de)===de){var ee=J.revertLane;if(ee===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),de===To&&(le=!0);else if((Us&ee)===ee){J=J.next,ee===To&&(le=!0);continue}else de={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},L===null?(A=L=de,b=m):L=L.next=de,He.lanes|=ee,Ir|=ee;de=J.action,ja&&a(m,de),m=J.hasEagerState?J.eagerState:a(m,de)}else ee={lane:de,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},L===null?(A=L=ee,b=m):L=L.next=ee,He.lanes|=de,Ir|=de;J=J.next}while(J!==null&&J!==s);if(L===null?b=m:L.next=A,!di(m,n.memoizedState)&&(on=!0,le&&(a=xo,a!==null)))throw a;n.memoizedState=m,n.baseState=b,n.baseQueue=L,l.lastRenderedState=m}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function Yd(n){var s=Jt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,m=s.memoizedState;if(f!==null){a.pending=null;var b=f=f.next;do m=n(m,b.action),b=b.next;while(b!==f);di(m,s.memoizedState)||(on=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,l]}function fy(n,s,a){var l=He,f=Jt(),m=nt;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=s();var b=!di((bt||f).memoizedState,a);if(b&&(f.memoizedState=a,on=!0),f=f.queue,Jd(gy.bind(null,l,f,n),[n]),f.getSnapshot!==s||b||an!==null&&an.memoizedState.tag&1){if(l.flags|=2048,Io(9,{destroy:void 0},my.bind(null,l,f,a,s),null),xt===null)throw Error(r(349));m||(Us&127)!==0||dy(l,s,a)}return a}function dy(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=He.updateQueue,s===null?(s=Xu(),He.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function my(n,s,a,l){s.value=a,s.getSnapshot=l,py(s)&&yy(n)}function gy(n,s,a){return a(function(){py(s)&&yy(n)})}function py(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!di(n,a)}catch{return!0}}function yy(n){var s=Ca(n,2);s!==null&&ui(s,n,2)}function Xd(n){var s=Jn();if(typeof n=="function"){var a=n;if(n=a(),ja){bn(!0);try{a()}finally{bn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:n},s}function vy(n,s,a,l){return n.baseState=a,Qd(n,bt,typeof l=="function"?l:zs)}function Nx(n,s,a,l,f){if(th(n))throw Error(r(485));if(n=s.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};q.T!==null?a(!0):m.isTransition=!1,l(m),a=s.pending,a===null?(m.next=s.pending=m,_y(s,m)):(m.next=a.next,s.pending=a.next=m)}}function _y(n,s){var a=s.action,l=s.payload,f=n.state;if(s.isTransition){var m=q.T,b={};q.T=b;try{var A=a(f,l),L=q.S;L!==null&&L(b,A),by(n,s,A)}catch(J){Wd(n,s,J)}finally{m!==null&&b.types!==null&&(m.types=b.types),q.T=m}}else try{m=a(f,l),by(n,s,m)}catch(J){Wd(n,s,J)}}function by(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Ey(n,s,l)},function(l){return Wd(n,s,l)}):Ey(n,s,a)}function Ey(n,s,a){s.status="fulfilled",s.value=a,wy(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,_y(n,a)))}function Wd(n,s,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,wy(s),s=s.next;while(s!==l)}n.action=null}function wy(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Ty(n,s){return s}function xy(n,s){if(nt){var a=xt.formState;if(a!==null){e:{var l=He;if(nt){if(It){t:{for(var f=It,m=ji;f.nodeType!==8;){if(!m){f=null;break t}if(f=Ui(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){It=Ui(f.nextSibling),l=f.data==="F!";break e}}Er(l)}l=!1}l&&(s=a[0])}}return a=Jn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ty,lastRenderedState:s},a.queue=l,a=Hy.bind(null,He,l),l.dispatch=a,l=Xd(!1),m=im.bind(null,He,!1,l.queue),l=Jn(),f={state:s,dispatch:null,action:n,pending:null},l.queue=f,a=Nx.bind(null,He,f,m,a),f.dispatch=a,l.memoizedState=n,[s,a,!1]}function Sy(n){var s=Jt();return Ay(s,bt,n)}function Ay(n,s,a){if(s=Qd(n,s,Ty)[0],n=Ju(zs)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Kl(s)}catch(b){throw b===So?qu:b}else l=s;s=Jt();var f=s.queue,m=f.dispatch;return a!==s.memoizedState&&(He.flags|=2048,Io(9,{destroy:void 0},Ix.bind(null,f,a),null)),[l,m,n]}function Ix(n,s){n.action=s}function Ry(n){var s=Jt(),a=bt;if(a!==null)return Ay(s,a,n);Jt(),s=s.memoizedState,a=Jt();var l=a.queue.dispatch;return a.memoizedState=n,[s,l,!1]}function Io(n,s,a,l){return n={tag:n,create:a,deps:l,inst:s,next:null},s=He.updateQueue,s===null&&(s=Xu(),He.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,s.lastEffect=n),n}function Cy(){return Jt().memoizedState}function Zu(n,s,a,l){var f=Jn();He.flags|=n,f.memoizedState=Io(1|s,{destroy:void 0},a,l===void 0?null:l)}function eh(n,s,a,l){var f=Jt();l=l===void 0?null:l;var m=f.memoizedState.inst;bt!==null&&l!==null&&qd(l,bt.memoizedState.deps)?f.memoizedState=Io(s,m,a,l):(He.flags|=n,f.memoizedState=Io(1|s,m,a,l))}function Ny(n,s){Zu(8390656,8,n,s)}function Jd(n,s){eh(2048,8,n,s)}function Dx(n){He.flags|=4;var s=He.updateQueue;if(s===null)s=Xu(),He.updateQueue=s,s.events=[n];else{var a=s.events;a===null?s.events=[n]:a.push(n)}}function Iy(n){var s=Jt().memoizedState;return Dx({ref:s,nextImpl:n}),function(){if((ut&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function Dy(n,s){return eh(4,2,n,s)}function ky(n,s){return eh(4,4,n,s)}function Oy(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function My(n,s,a){a=a!=null?a.concat([n]):null,eh(4,4,Oy.bind(null,s,n),a)}function Zd(){}function Vy(n,s){var a=Jt();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&qd(s,l[1])?l[0]:(a.memoizedState=[n,s],n)}function Py(n,s){var a=Jt();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&qd(s,l[1]))return l[0];if(l=n(),ja){bn(!0);try{n()}finally{bn(!1)}}return a.memoizedState=[l,s],l}function em(n,s,a){return a===void 0||(Us&1073741824)!==0&&(Ye&261930)===0?n.memoizedState=s:(n.memoizedState=a,n=jv(),He.lanes|=n,Ir|=n,a)}function jy(n,s,a,l){return di(a,s)?a:Ro.current!==null?(n=em(n,a,l),di(n,s)||(on=!0),n):(Us&42)===0||(Us&1073741824)!==0&&(Ye&261930)===0?(on=!0,n.memoizedState=a):(n=jv(),He.lanes|=n,Ir|=n,s)}function Ly(n,s,a,l,f){var m=se.p;se.p=m!==0&&8>m?m:8;var b=q.T,A={};q.T=A,im(n,!1,s,a);try{var L=f(),J=q.S;if(J!==null&&J(A,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var le=Ax(L,l);Ql(n,s,le,_i(n))}else Ql(n,s,l,_i(n))}catch(de){Ql(n,s,{then:function(){},status:"rejected",reason:de},_i())}finally{se.p=m,b!==null&&A.types!==null&&(b.types=A.types),q.T=b}}function kx(){}function tm(n,s,a,l){if(n.tag!==5)throw Error(r(476));var f=Uy(n).queue;Ly(n,f,s,re,a===null?kx:function(){return zy(n),a(l)})}function Uy(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:re},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function zy(n){var s=Uy(n);s.next===null&&(s=n.alternate.memoizedState),Ql(n,s.next.queue,{},_i())}function nm(){return Dn(hc)}function By(){return Jt().memoizedState}function qy(){return Jt().memoizedState}function Ox(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=_i();n=xr(a);var l=Sr(s,n,a);l!==null&&(ui(l,s,a),Hl(l,s,a)),s={cache:Dd()},n.payload=s;return}s=s.return}}function Mx(n,s,a){var l=_i();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},th(n)?Fy(s,a):(a=bd(n,s,a,l),a!==null&&(ui(a,n,l),Gy(a,s,l)))}function Hy(n,s,a){var l=_i();Ql(n,s,a,l)}function Ql(n,s,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(th(n))Fy(s,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var b=s.lastRenderedState,A=m(b,a);if(f.hasEagerState=!0,f.eagerState=A,di(A,b))return Vu(n,s,f,0),xt===null&&Mu(),!1}catch{}if(a=bd(n,s,f,l),a!==null)return ui(a,n,l),Gy(a,s,l),!0}return!1}function im(n,s,a,l){if(l={lane:2,revertLane:Vm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},th(n)){if(s)throw Error(r(479))}else s=bd(n,a,l,2),s!==null&&ui(s,n,2)}function th(n){var s=n.alternate;return n===He||s!==null&&s===He}function Fy(n,s){Co=Qu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Gy(n,s,a){if((a&4194048)!==0){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,Qt(n,a)}}var Yl={readContext:Dn,use:Wu,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht};Yl.useEffectEvent=Ht;var $y={readContext:Dn,use:Wu,useCallback:function(n,s){return Jn().memoizedState=[n,s===void 0?null:s],n},useContext:Dn,useEffect:Ny,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,Zu(4194308,4,Oy.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Zu(4194308,4,n,s)},useInsertionEffect:function(n,s){Zu(4,2,n,s)},useMemo:function(n,s){var a=Jn();s=s===void 0?null:s;var l=n();if(ja){bn(!0);try{n()}finally{bn(!1)}}return a.memoizedState=[l,s],l},useReducer:function(n,s,a){var l=Jn();if(a!==void 0){var f=a(s);if(ja){bn(!0);try{a(s)}finally{bn(!1)}}}else f=s;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=Mx.bind(null,He,n),[l.memoizedState,n]},useRef:function(n){var s=Jn();return n={current:n},s.memoizedState=n},useState:function(n){n=Xd(n);var s=n.queue,a=Hy.bind(null,He,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:Zd,useDeferredValue:function(n,s){var a=Jn();return em(a,n,s)},useTransition:function(){var n=Xd(!1);return n=Ly.bind(null,He,n.queue,!0,!1),Jn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var l=He,f=Jn();if(nt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),xt===null)throw Error(r(349));(Ye&127)!==0||dy(l,s,a)}f.memoizedState=a;var m={value:a,getSnapshot:s};return f.queue=m,Ny(gy.bind(null,l,m,n),[n]),l.flags|=2048,Io(9,{destroy:void 0},my.bind(null,l,m,a,s),null),a},useId:function(){var n=Jn(),s=xt.identifierPrefix;if(nt){var a=vs,l=ys;a=(l&~(1<<32-At(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Yu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=Rx++,s="_"+s+"r_"+a.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:nm,useFormState:xy,useActionState:xy,useOptimistic:function(n){var s=Jn();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=im.bind(null,He,!0,a),a.dispatch=s,[n,s]},useMemoCache:Kd,useCacheRefresh:function(){return Jn().memoizedState=Ox.bind(null,He)},useEffectEvent:function(n){var s=Jn(),a={impl:n};return s.memoizedState=a,function(){if((ut&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},sm={readContext:Dn,use:Wu,useCallback:Vy,useContext:Dn,useEffect:Jd,useImperativeHandle:My,useInsertionEffect:Dy,useLayoutEffect:ky,useMemo:Py,useReducer:Ju,useRef:Cy,useState:function(){return Ju(zs)},useDebugValue:Zd,useDeferredValue:function(n,s){var a=Jt();return jy(a,bt.memoizedState,n,s)},useTransition:function(){var n=Ju(zs)[0],s=Jt().memoizedState;return[typeof n=="boolean"?n:Kl(n),s]},useSyncExternalStore:fy,useId:By,useHostTransitionStatus:nm,useFormState:Sy,useActionState:Sy,useOptimistic:function(n,s){var a=Jt();return vy(a,bt,n,s)},useMemoCache:Kd,useCacheRefresh:qy};sm.useEffectEvent=Iy;var Ky={readContext:Dn,use:Wu,useCallback:Vy,useContext:Dn,useEffect:Jd,useImperativeHandle:My,useInsertionEffect:Dy,useLayoutEffect:ky,useMemo:Py,useReducer:Yd,useRef:Cy,useState:function(){return Yd(zs)},useDebugValue:Zd,useDeferredValue:function(n,s){var a=Jt();return bt===null?em(a,n,s):jy(a,bt.memoizedState,n,s)},useTransition:function(){var n=Yd(zs)[0],s=Jt().memoizedState;return[typeof n=="boolean"?n:Kl(n),s]},useSyncExternalStore:fy,useId:By,useHostTransitionStatus:nm,useFormState:Ry,useActionState:Ry,useOptimistic:function(n,s){var a=Jt();return bt!==null?vy(a,bt,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Kd,useCacheRefresh:qy};Ky.useEffectEvent=Iy;function rm(n,s,a,l){s=n.memoizedState,a=a(l,s),a=a==null?s:E({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var am={enqueueSetState:function(n,s,a){n=n._reactInternals;var l=_i(),f=xr(l);f.payload=s,a!=null&&(f.callback=a),s=Sr(n,f,l),s!==null&&(ui(s,n,l),Hl(s,n,l))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var l=_i(),f=xr(l);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=Sr(n,f,l),s!==null&&(ui(s,n,l),Hl(s,n,l))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=_i(),l=xr(a);l.tag=2,s!=null&&(l.callback=s),s=Sr(n,l,a),s!==null&&(ui(s,n,a),Hl(s,n,a))}};function Qy(n,s,a,l,f,m,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,m,b):s.prototype&&s.prototype.isPureReactComponent?!Vl(a,l)||!Vl(f,m):!0}function Yy(n,s,a,l){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==n&&am.enqueueReplaceState(s,s.state,null)}function La(n,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(n=n.defaultProps){a===s&&(a=E({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function Xy(n){Ou(n)}function Wy(n){console.error(n)}function Jy(n){Ou(n)}function nh(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Zy(n,s,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function om(n,s,a){return a=xr(a),a.tag=3,a.payload={element:null},a.callback=function(){nh(n,s)},a}function ev(n){return n=xr(n),n.tag=3,n}function tv(n,s,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;n.payload=function(){return f(m)},n.callback=function(){Zy(s,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(n.callback=function(){Zy(s,a,l),typeof f!="function"&&(Dr===null?Dr=new Set([this]):Dr.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function Vx(n,s,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&wo(s,a,f,!0),a=gi.current,a!==null){switch(a.tag){case 31:case 13:return Li===null?mh():a.alternate===null&&Ft===0&&(Ft=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Hu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),km(n,l,f)),!1;case 22:return a.flags|=65536,l===Hu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),km(n,l,f)),!1}throw Error(r(435,a.tag))}return km(n,l,f),mh(),!1}if(nt)return s=gi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,l!==Ad&&(n=Error(r(422),{cause:l}),Ll(Mi(n,a)))):(l!==Ad&&(s=Error(r(423),{cause:l}),Ll(Mi(s,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Mi(l,a),f=om(n.stateNode,l,f),jd(n,f),Ft!==4&&(Ft=2)),!1;var m=Error(r(520),{cause:l});if(m=Mi(m,a),ic===null?ic=[m]:ic.push(m),Ft!==4&&(Ft=2),s===null)return!0;l=Mi(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=om(a.stateNode,l,n),jd(a,n),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Dr===null||!Dr.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=ev(f),tv(f,n,a,l),jd(a,f),!1}a=a.return}while(a!==null);return!1}var lm=Error(r(461)),on=!1;function kn(n,s,a,l){s.child=n===null?ry(s,null,a,l):Pa(s,n.child,a,l)}function nv(n,s,a,l,f){a=a.render;var m=s.ref;if("ref"in l){var b={};for(var A in l)A!=="ref"&&(b[A]=l[A])}else b=l;return ka(s),l=Hd(n,s,a,b,m,f),A=Fd(),n!==null&&!on?(Gd(n,s,f),Bs(n,s,f)):(nt&&A&&xd(s),s.flags|=1,kn(n,s,l,f),s.child)}function iv(n,s,a,l,f){if(n===null){var m=a.type;return typeof m=="function"&&!Ed(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,sv(n,s,m,l,f)):(n=ju(a.type,null,l,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!pm(n,f)){var b=m.memoizedProps;if(a=a.compare,a=a!==null?a:Vl,a(b,l)&&n.ref===s.ref)return Bs(n,s,f)}return s.flags|=1,n=Vs(m,l),n.ref=s.ref,n.return=s,s.child=n}function sv(n,s,a,l,f){if(n!==null){var m=n.memoizedProps;if(Vl(m,l)&&n.ref===s.ref)if(on=!1,s.pendingProps=l=m,pm(n,f))(n.flags&131072)!==0&&(on=!0);else return s.lanes=n.lanes,Bs(n,s,f)}return cm(n,s,a,l,f)}function rv(n,s,a,l){var f=l.children,m=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,n!==null){for(l=s.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~m}else l=0,s.child=null;return av(n,s,m,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Bu(s,m!==null?m.cachePool:null),m!==null?ly(s,m):Ud(),cy(s);else return l=s.lanes=536870912,av(n,s,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(Bu(s,m.cachePool),ly(s,m),Rr(),s.memoizedState=null):(n!==null&&Bu(s,null),Ud(),Rr());return kn(n,s,f,a),s.child}function Xl(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function av(n,s,a,l,f){var m=Od();return m=m===null?null:{parent:rn._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},n!==null&&Bu(s,null),Ud(),cy(s),n!==null&&wo(n,s,l,!0),s.childLanes=f,null}function ih(n,s){return s=rh({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function ov(n,s,a){return Pa(s,n.child,null,a),n=ih(s,s.pendingProps),n.flags|=2,pi(s),s.memoizedState=null,n}function Px(n,s,a){var l=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(nt){if(l.mode==="hidden")return n=ih(s,l),s.lanes=536870912,Xl(null,n);if(Bd(s),(n=It)?(n=__(n,ji),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:_r!==null?{id:ys,overflow:vs}:null,retryLane:536870912,hydrationErrors:null},a=F0(n),a.return=s,s.child=a,In=s,It=null)):n=null,n===null)throw Er(s);return s.lanes=536870912,null}return ih(s,l)}var m=n.memoizedState;if(m!==null){var b=m.dehydrated;if(Bd(s),f)if(s.flags&256)s.flags&=-257,s=ov(n,s,a);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(on||wo(n,s,a,!1),f=(a&n.childLanes)!==0,on||f){if(l=xt,l!==null&&(b=ye(l,a),b!==0&&b!==m.retryLane))throw m.retryLane=b,Ca(n,b),ui(l,n,b),lm;mh(),s=ov(n,s,a)}else n=m.treeContext,It=Ui(b.nextSibling),In=s,nt=!0,br=null,ji=!1,n!==null&&K0(s,n),s=ih(s,l),s.flags|=4096;return s}return n=Vs(n.child,{mode:l.mode,children:l.children}),n.ref=s.ref,s.child=n,n.return=s,n}function sh(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function cm(n,s,a,l,f){return ka(s),a=Hd(n,s,a,l,void 0,f),l=Fd(),n!==null&&!on?(Gd(n,s,f),Bs(n,s,f)):(nt&&l&&xd(s),s.flags|=1,kn(n,s,a,f),s.child)}function lv(n,s,a,l,f,m){return ka(s),s.updateQueue=null,a=hy(s,l,a,f),uy(n),l=Fd(),n!==null&&!on?(Gd(n,s,m),Bs(n,s,m)):(nt&&l&&xd(s),s.flags|=1,kn(n,s,a,m),s.child)}function cv(n,s,a,l,f){if(ka(s),s.stateNode===null){var m=vo,b=a.contextType;typeof b=="object"&&b!==null&&(m=Dn(b)),m=new a(l,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=am,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=l,m.state=s.memoizedState,m.refs={},Vd(s),b=a.contextType,m.context=typeof b=="object"&&b!==null?Dn(b):vo,m.state=s.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(rm(s,a,b,l),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&am.enqueueReplaceState(m,m.state,null),Gl(s,l,m,f),Fl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(n===null){m=s.stateNode;var A=s.memoizedProps,L=La(a,A);m.props=L;var J=m.context,le=a.contextType;b=vo,typeof le=="object"&&le!==null&&(b=Dn(le));var de=a.getDerivedStateFromProps;le=typeof de=="function"||typeof m.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,le||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A||J!==b)&&Yy(s,m,l,b),Tr=!1;var ee=s.memoizedState;m.state=ee,Gl(s,l,m,f),Fl(),J=s.memoizedState,A||ee!==J||Tr?(typeof de=="function"&&(rm(s,a,de,l),J=s.memoizedState),(L=Tr||Qy(s,a,L,l,ee,J,b))?(le||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=J),m.props=l,m.state=J,m.context=b,l=L):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{m=s.stateNode,Pd(n,s),b=s.memoizedProps,le=La(a,b),m.props=le,de=s.pendingProps,ee=m.context,J=a.contextType,L=vo,typeof J=="object"&&J!==null&&(L=Dn(J)),A=a.getDerivedStateFromProps,(J=typeof A=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==de||ee!==L)&&Yy(s,m,l,L),Tr=!1,ee=s.memoizedState,m.state=ee,Gl(s,l,m,f),Fl();var ae=s.memoizedState;b!==de||ee!==ae||Tr||n!==null&&n.dependencies!==null&&Uu(n.dependencies)?(typeof A=="function"&&(rm(s,a,A,l),ae=s.memoizedState),(le=Tr||Qy(s,a,le,l,ee,ae,L)||n!==null&&n.dependencies!==null&&Uu(n.dependencies))?(J||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,ae,L),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,ae,L)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===n.memoizedProps&&ee===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&ee===n.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=ae),m.props=l,m.state=ae,m.context=L,l=le):(typeof m.componentDidUpdate!="function"||b===n.memoizedProps&&ee===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&ee===n.memoizedState||(s.flags|=1024),l=!1)}return m=l,sh(n,s),l=(s.flags&128)!==0,m||l?(m=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&l?(s.child=Pa(s,n.child,null,f),s.child=Pa(s,null,a,f)):kn(n,s,a,f),s.memoizedState=m.state,n=s.child):n=Bs(n,s,f),n}function uv(n,s,a,l){return Ia(),s.flags|=256,kn(n,s,a,l),s.child}var um={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hm(n){return{baseLanes:n,cachePool:Z0()}}function fm(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=vi),n}function hv(n,s,a){var l=s.pendingProps,f=!1,m=(s.flags&128)!==0,b;if((b=m)||(b=n!==null&&n.memoizedState===null?!1:(Wt.current&2)!==0),b&&(f=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,n===null){if(nt){if(f?Ar(s):Rr(),(n=It)?(n=__(n,ji),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:_r!==null?{id:ys,overflow:vs}:null,retryLane:536870912,hydrationErrors:null},a=F0(n),a.return=s,s.child=a,In=s,It=null)):n=null,n===null)throw Er(s);return Qm(n)?s.lanes=32:s.lanes=536870912,null}var A=l.children;return l=l.fallback,f?(Rr(),f=s.mode,A=rh({mode:"hidden",children:A},f),l=Na(l,f,a,null),A.return=s,l.return=s,A.sibling=l,s.child=A,l=s.child,l.memoizedState=hm(a),l.childLanes=fm(n,b,a),s.memoizedState=um,Xl(null,l)):(Ar(s),dm(s,A))}var L=n.memoizedState;if(L!==null&&(A=L.dehydrated,A!==null)){if(m)s.flags&256?(Ar(s),s.flags&=-257,s=mm(n,s,a)):s.memoizedState!==null?(Rr(),s.child=n.child,s.flags|=128,s=null):(Rr(),A=l.fallback,f=s.mode,l=rh({mode:"visible",children:l.children},f),A=Na(A,f,a,null),A.flags|=2,l.return=s,A.return=s,l.sibling=A,s.child=l,Pa(s,n.child,null,a),l=s.child,l.memoizedState=hm(a),l.childLanes=fm(n,b,a),s.memoizedState=um,s=Xl(null,l));else if(Ar(s),Qm(A)){if(b=A.nextSibling&&A.nextSibling.dataset,b)var J=b.dgst;b=J,l=Error(r(419)),l.stack="",l.digest=b,Ll({value:l,source:null,stack:null}),s=mm(n,s,a)}else if(on||wo(n,s,a,!1),b=(a&n.childLanes)!==0,on||b){if(b=xt,b!==null&&(l=ye(b,a),l!==0&&l!==L.retryLane))throw L.retryLane=l,Ca(n,l),ui(b,n,l),lm;Km(A)||mh(),s=mm(n,s,a)}else Km(A)?(s.flags|=192,s.child=n.child,s=null):(n=L.treeContext,It=Ui(A.nextSibling),In=s,nt=!0,br=null,ji=!1,n!==null&&K0(s,n),s=dm(s,l.children),s.flags|=4096);return s}return f?(Rr(),A=l.fallback,f=s.mode,L=n.child,J=L.sibling,l=Vs(L,{mode:"hidden",children:l.children}),l.subtreeFlags=L.subtreeFlags&65011712,J!==null?A=Vs(J,A):(A=Na(A,f,a,null),A.flags|=2),A.return=s,l.return=s,l.sibling=A,s.child=l,Xl(null,l),l=s.child,A=n.child.memoizedState,A===null?A=hm(a):(f=A.cachePool,f!==null?(L=rn._currentValue,f=f.parent!==L?{parent:L,pool:L}:f):f=Z0(),A={baseLanes:A.baseLanes|a,cachePool:f}),l.memoizedState=A,l.childLanes=fm(n,b,a),s.memoizedState=um,Xl(n.child,l)):(Ar(s),a=n.child,n=a.sibling,a=Vs(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,n!==null&&(b=s.deletions,b===null?(s.deletions=[n],s.flags|=16):b.push(n)),s.child=a,s.memoizedState=null,a)}function dm(n,s){return s=rh({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function rh(n,s){return n=mi(22,n,null,s),n.lanes=0,n}function mm(n,s,a){return Pa(s,n.child,null,a),n=dm(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function fv(n,s,a){n.lanes|=s;var l=n.alternate;l!==null&&(l.lanes|=s),Nd(n.return,s,a)}function gm(n,s,a,l,f,m){var b=n.memoizedState;b===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:m}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=l,b.tail=a,b.tailMode=f,b.treeForkCount=m)}function dv(n,s,a){var l=s.pendingProps,f=l.revealOrder,m=l.tail;l=l.children;var b=Wt.current,A=(b&2)!==0;if(A?(b=b&1|2,s.flags|=128):b&=1,oe(Wt,b),kn(n,s,l,a),l=nt?jl:0,!A&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&fv(n,a,s);else if(n.tag===19)fv(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&Ku(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),gm(s,!1,f,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Ku(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}gm(s,!0,a,null,m,l);break;case"together":gm(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function Bs(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Ir|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(wo(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,a=Vs(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Vs(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function pm(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Uu(n)))}function jx(n,s,a){switch(s.tag){case 3:ht(s,s.stateNode.containerInfo),wr(s,rn,n.memoizedState.cache),Ia();break;case 27:case 5:$t(s);break;case 4:ht(s,s.stateNode.containerInfo);break;case 10:wr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Bd(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Ar(s),s.flags|=128,null):(a&s.child.childLanes)!==0?hv(n,s,a):(Ar(s),n=Bs(n,s,a),n!==null?n.sibling:null);Ar(s);break;case 19:var f=(n.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(wo(n,s,a,!1),l=(a&s.childLanes)!==0),f){if(l)return dv(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),oe(Wt,Wt.current),l)break;return null;case 22:return s.lanes=0,rv(n,s,a,s.pendingProps);case 24:wr(s,rn,n.memoizedState.cache)}return Bs(n,s,a)}function mv(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)on=!0;else{if(!pm(n,a)&&(s.flags&128)===0)return on=!1,jx(n,s,a);on=(n.flags&131072)!==0}else on=!1,nt&&(s.flags&1048576)!==0&&$0(s,jl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(n=Ma(s.elementType),s.type=n,typeof n=="function")Ed(n)?(l=La(n,l),s.tag=1,s=cv(null,s,n,l,a)):(s.tag=0,s=cm(null,s,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===he){s.tag=11,s=nv(null,s,n,l,a);break e}else if(f===S){s.tag=14,s=iv(null,s,n,l,a);break e}}throw s=Ee(n)||n,Error(r(306,s,""))}}return s;case 0:return cm(n,s,s.type,s.pendingProps,a);case 1:return l=s.type,f=La(l,s.pendingProps),cv(n,s,l,f,a);case 3:e:{if(ht(s,s.stateNode.containerInfo),n===null)throw Error(r(387));l=s.pendingProps;var m=s.memoizedState;f=m.element,Pd(n,s),Gl(s,l,null,a);var b=s.memoizedState;if(l=b.cache,wr(s,rn,l),l!==m.cache&&Id(s,[rn],a,!0),Fl(),l=b.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=uv(n,s,l,a);break e}else if(l!==f){f=Mi(Error(r(424)),s),Ll(f),s=uv(n,s,l,a);break e}else for(n=s.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,It=Ui(n.firstChild),In=s,nt=!0,br=null,ji=!0,a=ry(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ia(),l===f){s=Bs(n,s,a);break e}kn(n,s,l,a)}s=s.child}return s;case 26:return sh(n,s),n===null?(a=S_(s.type,null,s.pendingProps,null))?s.memoizedState=a:nt||(a=s.type,n=s.pendingProps,l=Eh(we.current).createElement(a),l[Ut]=s,l[Yt]=n,On(l,a,n),qt(l),s.stateNode=l):s.memoizedState=S_(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return $t(s),n===null&&nt&&(l=s.stateNode=w_(s.type,s.pendingProps,we.current),In=s,ji=!0,f=It,Vr(s.type)?(Ym=f,It=Ui(l.firstChild)):It=f),kn(n,s,s.pendingProps.children,a),sh(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&nt&&((f=l=It)&&(l=dS(l,s.type,s.pendingProps,ji),l!==null?(s.stateNode=l,In=s,It=Ui(l.firstChild),ji=!1,f=!0):f=!1),f||Er(s)),$t(s),f=s.type,m=s.pendingProps,b=n!==null?n.memoizedProps:null,l=m.children,Fm(f,m)?l=null:b!==null&&Fm(f,b)&&(s.flags|=32),s.memoizedState!==null&&(f=Hd(n,s,Cx,null,null,a),hc._currentValue=f),sh(n,s),kn(n,s,l,a),s.child;case 6:return n===null&&nt&&((n=a=It)&&(a=mS(a,s.pendingProps,ji),a!==null?(s.stateNode=a,In=s,It=null,n=!0):n=!1),n||Er(s)),null;case 13:return hv(n,s,a);case 4:return ht(s,s.stateNode.containerInfo),l=s.pendingProps,n===null?s.child=Pa(s,null,l,a):kn(n,s,l,a),s.child;case 11:return nv(n,s,s.type,s.pendingProps,a);case 7:return kn(n,s,s.pendingProps,a),s.child;case 8:return kn(n,s,s.pendingProps.children,a),s.child;case 12:return kn(n,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,wr(s,s.type,l.value),kn(n,s,l.children,a),s.child;case 9:return f=s.type._context,l=s.pendingProps.children,ka(s),f=Dn(f),l=l(f),s.flags|=1,kn(n,s,l,a),s.child;case 14:return iv(n,s,s.type,s.pendingProps,a);case 15:return sv(n,s,s.type,s.pendingProps,a);case 19:return dv(n,s,a);case 31:return Px(n,s,a);case 22:return rv(n,s,a,s.pendingProps);case 24:return ka(s),l=Dn(rn),n===null?(f=Od(),f===null&&(f=xt,m=Dd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),s.memoizedState={parent:l,cache:f},Vd(s),wr(s,rn,f)):((n.lanes&a)!==0&&(Pd(n,s),Gl(s,null,null,a),Fl()),f=n.memoizedState,m=s.memoizedState,f.parent!==l?(f={parent:l,cache:l},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),wr(s,rn,l)):(l=m.cache,wr(s,rn,l),l!==f.cache&&Id(s,[rn],a,!0))),kn(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function qs(n){n.flags|=4}function ym(n,s,a,l,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Bv())n.flags|=8192;else throw Va=Hu,Md}else n.flags&=-16777217}function gv(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!I_(s))if(Bv())n.flags|=8192;else throw Va=Hu,Md}function ah(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?nn():536870912,n.lanes|=s,Mo|=s)}function Wl(n,s){if(!nt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function Dt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,s}function Lx(n,s,a){var l=s.pendingProps;switch(Sd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(s),null;case 1:return Dt(s),null;case 3:return a=s.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Ls(rn),ft(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Eo(s)?qs(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Rd())),Dt(s),null;case 26:var f=s.type,m=s.memoizedState;return n===null?(qs(s),m!==null?(Dt(s),gv(s,m)):(Dt(s),ym(s,f,null,l,a))):m?m!==n.memoizedState?(qs(s),Dt(s),gv(s,m)):(Dt(s),s.flags&=-16777217):(n=n.memoizedProps,n!==l&&qs(s),Dt(s),ym(s,f,n,l,a)),null;case 27:if(xi(s),a=we.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&qs(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return Dt(s),null}n=ce.current,Eo(s)?Q0(s):(n=w_(f,l,a),s.stateNode=n,qs(s))}return Dt(s),null;case 5:if(xi(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&qs(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return Dt(s),null}if(m=ce.current,Eo(s))Q0(s);else{var b=Eh(we.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?b.createElement("select",{is:l.is}):b.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?b.createElement(f,{is:l.is}):b.createElement(f)}}m[Ut]=s,m[Yt]=l;e:for(b=s.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===s)break e;for(;b.sibling===null;){if(b.return===null||b.return===s)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}s.stateNode=m;e:switch(On(m,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&qs(s)}}return Dt(s),ym(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,a),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==l&&qs(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(n=we.current,Eo(s)){if(n=s.stateNode,a=s.memoizedProps,l=null,f=In,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Ut]=s,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||h_(n.nodeValue,a)),n||Er(s,!0)}else n=Eh(n).createTextNode(l),n[Ut]=s,s.stateNode=n}return Dt(s),null;case 31:if(a=s.memoizedState,n===null||n.memoizedState!==null){if(l=Eo(s),a!==null){if(n===null){if(!l)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Ut]=s}else Ia(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Dt(s),n=!1}else a=Rd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return s.flags&256?(pi(s),s):(pi(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Dt(s),null;case 13:if(l=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Eo(s),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ut]=s}else Ia(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Dt(s),f=!1}else f=Rd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(pi(s),s):(pi(s),null)}return pi(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=s.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)),a!==n&&a&&(s.child.flags|=8192),ah(s,s.updateQueue),Dt(s),null);case 4:return ft(),n===null&&Um(s.stateNode.containerInfo),Dt(s),null;case 10:return Ls(s.type),Dt(s),null;case 19:if($(Wt),l=s.memoizedState,l===null)return Dt(s),null;if(f=(s.flags&128)!==0,m=l.rendering,m===null)if(f)Wl(l,!1);else{if(Ft!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=Ku(n),m!==null){for(s.flags|=128,Wl(l,!1),n=m.updateQueue,s.updateQueue=n,ah(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)H0(a,n),a=a.sibling;return oe(Wt,Wt.current&1|2),nt&&Ps(s,l.treeForkCount),s.child}n=n.sibling}l.tail!==null&&tn()>hh&&(s.flags|=128,f=!0,Wl(l,!1),s.lanes=4194304)}else{if(!f)if(n=Ku(m),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,ah(s,n),Wl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!nt)return Dt(s),null}else 2*tn()-l.renderingStartTime>hh&&a!==536870912&&(s.flags|=128,f=!0,Wl(l,!1),s.lanes=4194304);l.isBackwards?(m.sibling=s.child,s.child=m):(n=l.last,n!==null?n.sibling=m:s.child=m,l.last=m)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=tn(),n.sibling=null,a=Wt.current,oe(Wt,f?a&1|2:a&1),nt&&Ps(s,l.treeForkCount),n):(Dt(s),null);case 22:case 23:return pi(s),zd(),l=s.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(Dt(s),s.subtreeFlags&6&&(s.flags|=8192)):Dt(s),a=s.updateQueue,a!==null&&ah(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),n!==null&&$(Oa),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Ls(rn),Dt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Ux(n,s){switch(Sd(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Ls(rn),ft(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return xi(s),null;case 31:if(s.memoizedState!==null){if(pi(s),s.alternate===null)throw Error(r(340));Ia()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(pi(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ia()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return $(Wt),null;case 4:return ft(),null;case 10:return Ls(s.type),null;case 22:case 23:return pi(s),zd(),n!==null&&$(Oa),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Ls(rn),null;case 25:return null;default:return null}}function pv(n,s){switch(Sd(s),s.tag){case 3:Ls(rn),ft();break;case 26:case 27:case 5:xi(s);break;case 4:ft();break;case 31:s.memoizedState!==null&&pi(s);break;case 13:pi(s);break;case 19:$(Wt);break;case 10:Ls(s.type);break;case 22:case 23:pi(s),zd(),n!==null&&$(Oa);break;case 24:Ls(rn)}}function Jl(n,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var m=a.create,b=a.inst;l=m(),b.destroy=l}a=a.next}while(a!==f)}}catch(A){gt(s,s.return,A)}}function Cr(n,s,a){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&n)===n){var b=l.inst,A=b.destroy;if(A!==void 0){b.destroy=void 0,f=s;var L=a,J=A;try{J()}catch(le){gt(f,L,le)}}}l=l.next}while(l!==m)}}catch(le){gt(s,s.return,le)}}function yv(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{oy(s,a)}catch(l){gt(n,n.return,l)}}}function vv(n,s,a){a.props=La(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){gt(n,s,l)}}function Zl(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){gt(n,s,f)}}function _s(n,s){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){gt(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){gt(n,s,f)}else a.current=null}function _v(n){var s=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){gt(n,n.return,f)}}function vm(n,s,a){try{var l=n.stateNode;oS(l,n.type,a,s),l[Yt]=s}catch(f){gt(n,n.return,f)}}function bv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Vr(n.type)||n.tag===4}function _m(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||bv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Vr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function bm(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Qi));else if(l!==4&&(l===27&&Vr(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(bm(n,s,a),n=n.sibling;n!==null;)bm(n,s,a),n=n.sibling}function oh(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(l!==4&&(l===27&&Vr(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(oh(n,s,a),n=n.sibling;n!==null;)oh(n,s,a),n=n.sibling}function Ev(n){var s=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);On(s,l,a),s[Ut]=n,s[Yt]=a}catch(m){gt(n,n.return,m)}}var Hs=!1,ln=!1,Em=!1,wv=typeof WeakSet=="function"?WeakSet:Set,wn=null;function zx(n,s){if(n=n.containerInfo,qm=Ch,n=M0(n),md(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var b=0,A=-1,L=-1,J=0,le=0,de=n,ee=null;t:for(;;){for(var ae;de!==a||f!==0&&de.nodeType!==3||(A=b+f),de!==m||l!==0&&de.nodeType!==3||(L=b+l),de.nodeType===3&&(b+=de.nodeValue.length),(ae=de.firstChild)!==null;)ee=de,de=ae;for(;;){if(de===n)break t;if(ee===a&&++J===f&&(A=b),ee===m&&++le===l&&(L=b),(ae=de.nextSibling)!==null)break;de=ee,ee=de.parentNode}de=ae}a=A===-1||L===-1?null:{start:A,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(Hm={focusedElem:n,selectionRange:a},Ch=!1,wn=s;wn!==null;)if(s=wn,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,wn=n;else for(;wn!==null;){switch(s=wn,m=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,a=s,f=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Re=La(a.type,f);n=l.getSnapshotBeforeUpdate(Re,m),l.__reactInternalSnapshotBeforeUpdate=n}catch(Ve){gt(a,a.return,Ve)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)$m(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":$m(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,wn=n;break}wn=s.return}}function Tv(n,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Gs(n,a),l&4&&Jl(5,a);break;case 1:if(Gs(n,a),l&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(b){gt(a,a.return,b)}else{var f=La(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(b){gt(a,a.return,b)}}l&64&&yv(a),l&512&&Zl(a,a.return);break;case 3:if(Gs(n,a),l&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{oy(n,s)}catch(b){gt(a,a.return,b)}}break;case 27:s===null&&l&4&&Ev(a);case 26:case 5:Gs(n,a),s===null&&l&4&&_v(a),l&512&&Zl(a,a.return);break;case 12:Gs(n,a);break;case 31:Gs(n,a),l&4&&Av(n,a);break;case 13:Gs(n,a),l&4&&Rv(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=Yx.bind(null,a),gS(n,a))));break;case 22:if(l=a.memoizedState!==null||Hs,!l){s=s!==null&&s.memoizedState!==null||ln,f=Hs;var m=ln;Hs=l,(ln=s)&&!m?$s(n,a,(a.subtreeFlags&8772)!==0):Gs(n,a),Hs=f,ln=m}break;case 30:break;default:Gs(n,a)}}function xv(n){var s=n.alternate;s!==null&&(n.alternate=null,xv(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&lr(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Vt=null,ai=!1;function Fs(n,s,a){for(a=a.child;a!==null;)Sv(n,s,a),a=a.sibling}function Sv(n,s,a){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Yn,a)}catch{}switch(a.tag){case 26:ln||_s(a,s),Fs(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ln||_s(a,s);var l=Vt,f=ai;Vr(a.type)&&(Vt=a.stateNode,ai=!1),Fs(n,s,a),lc(a.stateNode),Vt=l,ai=f;break;case 5:ln||_s(a,s);case 6:if(l=Vt,f=ai,Vt=null,Fs(n,s,a),Vt=l,ai=f,Vt!==null)if(ai)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(a.stateNode)}catch(m){gt(a,s,m)}else try{Vt.removeChild(a.stateNode)}catch(m){gt(a,s,m)}break;case 18:Vt!==null&&(ai?(n=Vt,y_(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),qo(n)):y_(Vt,a.stateNode));break;case 4:l=Vt,f=ai,Vt=a.stateNode.containerInfo,ai=!0,Fs(n,s,a),Vt=l,ai=f;break;case 0:case 11:case 14:case 15:Cr(2,a,s),ln||Cr(4,a,s),Fs(n,s,a);break;case 1:ln||(_s(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&vv(a,s,l)),Fs(n,s,a);break;case 21:Fs(n,s,a);break;case 22:ln=(l=ln)||a.memoizedState!==null,Fs(n,s,a),ln=l;break;default:Fs(n,s,a)}}function Av(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{qo(n)}catch(a){gt(s,s.return,a)}}}function Rv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{qo(n)}catch(a){gt(s,s.return,a)}}function Bx(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new wv),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new wv),s;default:throw Error(r(435,n.tag))}}function lh(n,s){var a=Bx(n);s.forEach(function(l){if(!a.has(l)){a.add(l);var f=Xx.bind(null,n,l);l.then(f,f)}})}function oi(n,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],m=n,b=s,A=b;e:for(;A!==null;){switch(A.tag){case 27:if(Vr(A.type)){Vt=A.stateNode,ai=!1;break e}break;case 5:Vt=A.stateNode,ai=!1;break e;case 3:case 4:Vt=A.stateNode.containerInfo,ai=!0;break e}A=A.return}if(Vt===null)throw Error(r(160));Sv(m,b,f),Vt=null,ai=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Cv(s,n),s=s.sibling}var es=null;function Cv(n,s){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:oi(s,n),li(n),l&4&&(Cr(3,n,n.return),Jl(3,n),Cr(5,n,n.return));break;case 1:oi(s,n),li(n),l&512&&(ln||a===null||_s(a,a.return)),l&64&&Hs&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=es;if(oi(s,n),li(n),l&512&&(ln||a===null||_s(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Si]||m[Ut]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),On(m,l,a),m[Ut]=n,qt(m),l=m;break e;case"link":var b=C_("link","href",f).get(l+(a.href||""));if(b){for(var A=0;A<b.length;A++)if(m=b[A],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(A,1);break t}}m=f.createElement(l),On(m,l,a),f.head.appendChild(m);break;case"meta":if(b=C_("meta","content",f).get(l+(a.content||""))){for(A=0;A<b.length;A++)if(m=b[A],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(A,1);break t}}m=f.createElement(l),On(m,l,a),f.head.appendChild(m);break;default:throw Error(r(468,l))}m[Ut]=n,qt(m),l=m}n.stateNode=l}else N_(f,n.type,n.stateNode);else n.stateNode=R_(f,l,n.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?N_(f,n.type,n.stateNode):R_(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&vm(n,n.memoizedProps,a.memoizedProps)}break;case 27:oi(s,n),li(n),l&512&&(ln||a===null||_s(a,a.return)),a!==null&&l&4&&vm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(oi(s,n),li(n),l&512&&(ln||a===null||_s(a,a.return)),n.flags&32){f=n.stateNode;try{ri(f,"")}catch(Re){gt(n,n.return,Re)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,vm(n,f,a!==null?a.memoizedProps:f)),l&1024&&(Em=!0);break;case 6:if(oi(s,n),li(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(Re){gt(n,n.return,Re)}}break;case 3:if(xh=null,f=es,es=wh(s.containerInfo),oi(s,n),es=f,li(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{qo(s.containerInfo)}catch(Re){gt(n,n.return,Re)}Em&&(Em=!1,Nv(n));break;case 4:l=es,es=wh(n.stateNode.containerInfo),oi(s,n),li(n),es=l;break;case 12:oi(s,n),li(n);break;case 31:oi(s,n),li(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,lh(n,l)));break;case 13:oi(s,n),li(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(uh=tn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,lh(n,l)));break;case 22:f=n.memoizedState!==null;var L=a!==null&&a.memoizedState!==null,J=Hs,le=ln;if(Hs=J||f,ln=le||L,oi(s,n),ln=le,Hs=J,li(n),l&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||L||Hs||ln||Ua(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){L=a=s;try{if(m=L.stateNode,f)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{A=L.stateNode;var de=L.memoizedProps.style,ee=de!=null&&de.hasOwnProperty("display")?de.display:null;A.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Re){gt(L,L.return,Re)}}}else if(s.tag===6){if(a===null){L=s;try{L.stateNode.nodeValue=f?"":L.memoizedProps}catch(Re){gt(L,L.return,Re)}}}else if(s.tag===18){if(a===null){L=s;try{var ae=L.stateNode;f?v_(ae,!0):v_(L.stateNode,!1)}catch(Re){gt(L,L.return,Re)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,lh(n,a))));break;case 19:oi(s,n),li(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,lh(n,l)));break;case 30:break;case 21:break;default:oi(s,n),li(n)}}function li(n){var s=n.flags;if(s&2){try{for(var a,l=n.return;l!==null;){if(bv(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,m=_m(n);oh(n,m,f);break;case 5:var b=a.stateNode;a.flags&32&&(ri(b,""),a.flags&=-33);var A=_m(n);oh(n,A,b);break;case 3:case 4:var L=a.stateNode.containerInfo,J=_m(n);bm(n,J,L);break;default:throw Error(r(161))}}catch(le){gt(n,n.return,le)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Nv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Nv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Gs(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Tv(n,s.alternate,s),s=s.sibling}function Ua(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Cr(4,s,s.return),Ua(s);break;case 1:_s(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&vv(s,s.return,a),Ua(s);break;case 27:lc(s.stateNode);case 26:case 5:_s(s,s.return),Ua(s);break;case 22:s.memoizedState===null&&Ua(s);break;case 30:Ua(s);break;default:Ua(s)}n=n.sibling}}function $s(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,f=n,m=s,b=m.flags;switch(m.tag){case 0:case 11:case 15:$s(f,m,a),Jl(4,m);break;case 1:if($s(f,m,a),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(J){gt(l,l.return,J)}if(l=m,f=l.updateQueue,f!==null){var A=l.stateNode;try{var L=f.shared.hiddenCallbacks;if(L!==null)for(f.shared.hiddenCallbacks=null,f=0;f<L.length;f++)ay(L[f],A)}catch(J){gt(l,l.return,J)}}a&&b&64&&yv(m),Zl(m,m.return);break;case 27:Ev(m);case 26:case 5:$s(f,m,a),a&&l===null&&b&4&&_v(m),Zl(m,m.return);break;case 12:$s(f,m,a);break;case 31:$s(f,m,a),a&&b&4&&Av(f,m);break;case 13:$s(f,m,a),a&&b&4&&Rv(f,m);break;case 22:m.memoizedState===null&&$s(f,m,a),Zl(m,m.return);break;case 30:break;default:$s(f,m,a)}s=s.sibling}}function wm(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Ul(a))}function Tm(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ul(n))}function ts(n,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Iv(n,s,a,l),s=s.sibling}function Iv(n,s,a,l){var f=s.flags;switch(s.tag){case 0:case 11:case 15:ts(n,s,a,l),f&2048&&Jl(9,s);break;case 1:ts(n,s,a,l);break;case 3:ts(n,s,a,l),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ul(n)));break;case 12:if(f&2048){ts(n,s,a,l),n=s.stateNode;try{var m=s.memoizedProps,b=m.id,A=m.onPostCommit;typeof A=="function"&&A(b,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(L){gt(s,s.return,L)}}else ts(n,s,a,l);break;case 31:ts(n,s,a,l);break;case 13:ts(n,s,a,l);break;case 23:break;case 22:m=s.stateNode,b=s.alternate,s.memoizedState!==null?m._visibility&2?ts(n,s,a,l):ec(n,s):m._visibility&2?ts(n,s,a,l):(m._visibility|=2,Do(n,s,a,l,(s.subtreeFlags&10256)!==0||!1)),f&2048&&wm(b,s);break;case 24:ts(n,s,a,l),f&2048&&Tm(s.alternate,s);break;default:ts(n,s,a,l)}}function Do(n,s,a,l,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=n,b=s,A=a,L=l,J=b.flags;switch(b.tag){case 0:case 11:case 15:Do(m,b,A,L,f),Jl(8,b);break;case 23:break;case 22:var le=b.stateNode;b.memoizedState!==null?le._visibility&2?Do(m,b,A,L,f):ec(m,b):(le._visibility|=2,Do(m,b,A,L,f)),f&&J&2048&&wm(b.alternate,b);break;case 24:Do(m,b,A,L,f),f&&J&2048&&Tm(b.alternate,b);break;default:Do(m,b,A,L,f)}s=s.sibling}}function ec(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,l=s,f=l.flags;switch(l.tag){case 22:ec(a,l),f&2048&&wm(l.alternate,l);break;case 24:ec(a,l),f&2048&&Tm(l.alternate,l);break;default:ec(a,l)}s=s.sibling}}var tc=8192;function ko(n,s,a){if(n.subtreeFlags&tc)for(n=n.child;n!==null;)Dv(n,s,a),n=n.sibling}function Dv(n,s,a){switch(n.tag){case 26:ko(n,s,a),n.flags&tc&&n.memoizedState!==null&&RS(a,es,n.memoizedState,n.memoizedProps);break;case 5:ko(n,s,a);break;case 3:case 4:var l=es;es=wh(n.stateNode.containerInfo),ko(n,s,a),es=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=tc,tc=16777216,ko(n,s,a),tc=l):ko(n,s,a));break;default:ko(n,s,a)}}function kv(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function nc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];wn=l,Mv(l,n)}kv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ov(n),n=n.sibling}function Ov(n){switch(n.tag){case 0:case 11:case 15:nc(n),n.flags&2048&&Cr(9,n,n.return);break;case 3:nc(n);break;case 12:nc(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,ch(n)):nc(n);break;default:nc(n)}}function ch(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];wn=l,Mv(l,n)}kv(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Cr(8,s,s.return),ch(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,ch(s));break;default:ch(s)}n=n.sibling}}function Mv(n,s){for(;wn!==null;){var a=wn;switch(a.tag){case 0:case 11:case 15:Cr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ul(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,wn=l;else e:for(a=n;wn!==null;){l=wn;var f=l.sibling,m=l.return;if(xv(l),l===a){wn=null;break e}if(f!==null){f.return=m,wn=f;break e}wn=m}}}var qx={getCacheForType:function(n){var s=Dn(rn),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a},cacheSignal:function(){return Dn(rn).controller.signal}},Hx=typeof WeakMap=="function"?WeakMap:Map,ut=0,xt=null,Ke=null,Ye=0,mt=0,yi=null,Nr=!1,Oo=!1,xm=!1,Ks=0,Ft=0,Ir=0,za=0,Sm=0,vi=0,Mo=0,ic=null,ci=null,Am=!1,uh=0,Vv=0,hh=1/0,fh=null,Dr=null,pn=0,kr=null,Vo=null,Qs=0,Rm=0,Cm=null,Pv=null,sc=0,Nm=null;function _i(){return(ut&2)!==0&&Ye!==0?Ye&-Ye:q.T!==null?Vm():Ot()}function jv(){if(vi===0)if((Ye&536870912)===0||nt){var n=Ki;Ki<<=1,(Ki&3932160)===0&&(Ki=262144),vi=n}else vi=536870912;return n=gi.current,n!==null&&(n.flags|=32),vi}function ui(n,s,a){(n===xt&&(mt===2||mt===9)||n.cancelPendingCommit!==null)&&(Po(n,0),Or(n,Ye,vi,!1)),te(n,a),((ut&2)===0||n!==xt)&&(n===xt&&((ut&2)===0&&(za|=a),Ft===4&&Or(n,Ye,vi,!1)),bs(n))}function Lv(n,s,a){if((ut&6)!==0)throw Error(r(327));var l=!a&&(s&127)===0&&(s&n.expiredLanes)===0||Bt(n,s),f=l?$x(n,s):Dm(n,s,!0),m=l;do{if(f===0){Oo&&!l&&Or(n,s,0,!1);break}else{if(a=n.current.alternate,m&&!Fx(a)){f=Dm(n,s,!1),m=!1;continue}if(f===2){if(m=s,n.errorRecoveryDisabledLanes&m)var b=0;else b=n.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;e:{var A=n;f=ic;var L=A.current.memoizedState.isDehydrated;if(L&&(Po(A,b).flags|=256),b=Dm(A,b,!1),b!==2){if(xm&&!L){A.errorRecoveryDisabledLanes|=m,za|=m,f=4;break e}m=ci,ci=f,m!==null&&(ci===null?ci=m:ci.push.apply(ci,m))}f=b}if(m=!1,f!==2)continue}}if(f===1){Po(n,0),Or(n,s,0,!0);break}e:{switch(l=n,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Or(l,s,vi,!Nr);break e;case 2:ci=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=uh+300-tn(),10<f)){if(Or(l,s,vi,!Nr),Ct(l,0,!0)!==0)break e;Qs=s,l.timeoutHandle=g_(Uv.bind(null,l,a,ci,fh,Am,s,vi,za,Mo,Nr,m,"Throttled",-0,0),f);break e}Uv(l,a,ci,fh,Am,s,vi,za,Mo,Nr,m,null,-0,0)}}break}while(!0);bs(n)}function Uv(n,s,a,l,f,m,b,A,L,J,le,de,ee,ae){if(n.timeoutHandle=-1,de=s.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qi},Dv(s,m,de);var Re=(m&62914560)===m?uh-tn():(m&4194048)===m?Vv-tn():0;if(Re=CS(de,Re),Re!==null){Qs=m,n.cancelPendingCommit=Re(Kv.bind(null,n,s,m,a,l,f,b,A,L,le,de,null,ee,ae)),Or(n,m,b,!J);return}}Kv(n,s,m,a,l,f,b,A,L)}function Fx(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],m=f.getSnapshot;f=f.value;try{if(!di(m(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Or(n,s,a,l){s&=~Sm,s&=~za,n.suspendedLanes|=s,n.pingedLanes&=~s,l&&(n.warmLanes|=s),l=n.expirationTimes;for(var f=s;0<f;){var m=31-At(f),b=1<<m;l[m]=-1,f&=~b}a!==0&&yt(n,a,s)}function dh(){return(ut&6)===0?(rc(0),!1):!0}function Im(){if(Ke!==null){if(mt===0)var n=Ke.return;else n=Ke,js=Da=null,$d(n),Ao=null,Bl=0,n=Ke;for(;n!==null;)pv(n.alternate,n),n=n.return;Ke=null}}function Po(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,uS(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Qs=0,Im(),xt=n,Ke=a=Vs(n.current,null),Ye=s,mt=0,yi=null,Nr=!1,Oo=Bt(n,s),xm=!1,Mo=vi=Sm=za=Ir=Ft=0,ci=ic=null,Am=!1,(s&8)!==0&&(s|=s&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=s;0<l;){var f=31-At(l),m=1<<f;s|=n[f],l&=~m}return Ks=s,Mu(),a}function zv(n,s){He=null,q.H=Yl,s===So||s===qu?(s=ny(),mt=3):s===Md?(s=ny(),mt=4):mt=s===lm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,yi=s,Ke===null&&(Ft=1,nh(n,Mi(s,n.current)))}function Bv(){var n=gi.current;return n===null?!0:(Ye&4194048)===Ye?Li===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?n===Li:!1}function qv(){var n=q.H;return q.H=Yl,n===null?Yl:n}function Hv(){var n=q.A;return q.A=qx,n}function mh(){Ft=4,Nr||(Ye&4194048)!==Ye&&gi.current!==null||(Oo=!0),(Ir&134217727)===0&&(za&134217727)===0||xt===null||Or(xt,Ye,vi,!1)}function Dm(n,s,a){var l=ut;ut|=2;var f=qv(),m=Hv();(xt!==n||Ye!==s)&&(fh=null,Po(n,s)),s=!1;var b=Ft;e:do try{if(mt!==0&&Ke!==null){var A=Ke,L=yi;switch(mt){case 8:Im(),b=6;break e;case 3:case 2:case 9:case 6:gi.current===null&&(s=!0);var J=mt;if(mt=0,yi=null,jo(n,A,L,J),a&&Oo){b=0;break e}break;default:J=mt,mt=0,yi=null,jo(n,A,L,J)}}Gx(),b=Ft;break}catch(le){zv(n,le)}while(!0);return s&&n.shellSuspendCounter++,js=Da=null,ut=l,q.H=f,q.A=m,Ke===null&&(xt=null,Ye=0,Mu()),b}function Gx(){for(;Ke!==null;)Fv(Ke)}function $x(n,s){var a=ut;ut|=2;var l=qv(),f=Hv();xt!==n||Ye!==s?(fh=null,hh=tn()+500,Po(n,s)):Oo=Bt(n,s);e:do try{if(mt!==0&&Ke!==null){s=Ke;var m=yi;t:switch(mt){case 1:mt=0,yi=null,jo(n,s,m,1);break;case 2:case 9:if(ey(m)){mt=0,yi=null,Gv(s);break}s=function(){mt!==2&&mt!==9||xt!==n||(mt=7),bs(n)},m.then(s,s);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:ey(m)?(mt=0,yi=null,Gv(s)):(mt=0,yi=null,jo(n,s,m,7));break;case 5:var b=null;switch(Ke.tag){case 26:b=Ke.memoizedState;case 5:case 27:var A=Ke;if(b?I_(b):A.stateNode.complete){mt=0,yi=null;var L=A.sibling;if(L!==null)Ke=L;else{var J=A.return;J!==null?(Ke=J,gh(J)):Ke=null}break t}}mt=0,yi=null,jo(n,s,m,5);break;case 6:mt=0,yi=null,jo(n,s,m,6);break;case 8:Im(),Ft=6;break e;default:throw Error(r(462))}}Kx();break}catch(le){zv(n,le)}while(!0);return js=Da=null,q.H=l,q.A=f,ut=a,Ke!==null?0:(xt=null,Ye=0,Mu(),Ft)}function Kx(){for(;Ke!==null&&!ls();)Fv(Ke)}function Fv(n){var s=mv(n.alternate,n,Ks);n.memoizedProps=n.pendingProps,s===null?gh(n):Ke=s}function Gv(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=lv(a,s,s.pendingProps,s.type,void 0,Ye);break;case 11:s=lv(a,s,s.pendingProps,s.type.render,s.ref,Ye);break;case 5:$d(s);default:pv(a,s),s=Ke=H0(s,Ks),s=mv(a,s,Ks)}n.memoizedProps=n.pendingProps,s===null?gh(n):Ke=s}function jo(n,s,a,l){js=Da=null,$d(s),Ao=null,Bl=0;var f=s.return;try{if(Vx(n,f,s,a,Ye)){Ft=1,nh(n,Mi(a,n.current)),Ke=null;return}}catch(m){if(f!==null)throw Ke=f,m;Ft=1,nh(n,Mi(a,n.current)),Ke=null;return}s.flags&32768?(nt||l===1?n=!0:Oo||(Ye&536870912)!==0?n=!1:(Nr=n=!0,(l===2||l===9||l===3||l===6)&&(l=gi.current,l!==null&&l.tag===13&&(l.flags|=16384))),$v(s,n)):gh(s)}function gh(n){var s=n;do{if((s.flags&32768)!==0){$v(s,Nr);return}n=s.return;var a=Lx(s.alternate,s,Ks);if(a!==null){Ke=a;return}if(s=s.sibling,s!==null){Ke=s;return}Ke=s=n}while(s!==null);Ft===0&&(Ft=5)}function $v(n,s){do{var a=Ux(n.alternate,n);if(a!==null){a.flags&=32767,Ke=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){Ke=n;return}Ke=n=a}while(n!==null);Ft=6,Ke=null}function Kv(n,s,a,l,f,m,b,A,L){n.cancelPendingCommit=null;do ph();while(pn!==0);if((ut&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=_d,pt(n,a,m,b,A,L),n===xt&&(Ke=xt=null,Ye=0),Vo=s,kr=n,Qs=a,Rm=m,Cm=f,Pv=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Wx(Cn,function(){return Jv(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=q.T,q.T=null,f=se.p,se.p=2,b=ut,ut|=4;try{zx(n,s,a)}finally{ut=b,se.p=f,q.T=l}}pn=1,Qv(),Yv(),Xv()}}function Qv(){if(pn===1){pn=0;var n=kr,s=Vo,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=q.T,q.T=null;var l=se.p;se.p=2;var f=ut;ut|=4;try{Cv(s,n);var m=Hm,b=M0(n.containerInfo),A=m.focusedElem,L=m.selectionRange;if(b!==A&&A&&A.ownerDocument&&O0(A.ownerDocument.documentElement,A)){if(L!==null&&md(A)){var J=L.start,le=L.end;if(le===void 0&&(le=J),"selectionStart"in A)A.selectionStart=J,A.selectionEnd=Math.min(le,A.value.length);else{var de=A.ownerDocument||document,ee=de&&de.defaultView||window;if(ee.getSelection){var ae=ee.getSelection(),Re=A.textContent.length,Ve=Math.min(L.start,Re),wt=L.end===void 0?Ve:Math.min(L.end,Re);!ae.extend&&Ve>wt&&(b=wt,wt=Ve,Ve=b);var K=k0(A,Ve),B=k0(A,wt);if(K&&B&&(ae.rangeCount!==1||ae.anchorNode!==K.node||ae.anchorOffset!==K.offset||ae.focusNode!==B.node||ae.focusOffset!==B.offset)){var W=de.createRange();W.setStart(K.node,K.offset),ae.removeAllRanges(),Ve>wt?(ae.addRange(W),ae.extend(B.node,B.offset)):(W.setEnd(B.node,B.offset),ae.addRange(W))}}}}for(de=[],ae=A;ae=ae.parentNode;)ae.nodeType===1&&de.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<de.length;A++){var ue=de[A];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Ch=!!qm,Hm=qm=null}finally{ut=f,se.p=l,q.T=a}}n.current=s,pn=2}}function Yv(){if(pn===2){pn=0;var n=kr,s=Vo,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=q.T,q.T=null;var l=se.p;se.p=2;var f=ut;ut|=4;try{Tv(n,s.alternate,s)}finally{ut=f,se.p=l,q.T=a}}pn=3}}function Xv(){if(pn===4||pn===3){pn=0,cs();var n=kr,s=Vo,a=Qs,l=Pv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?pn=5:(pn=0,Vo=kr=null,Wv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Dr=null),st(a),s=s.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Yn,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=q.T,f=se.p,se.p=2,q.T=null;try{for(var m=n.onRecoverableError,b=0;b<l.length;b++){var A=l[b];m(A.value,{componentStack:A.stack})}}finally{q.T=s,se.p=f}}(Qs&3)!==0&&ph(),bs(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===Nm?sc++:(sc=0,Nm=n):sc=0,rc(0)}}function Wv(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Ul(s)))}function ph(){return Qv(),Yv(),Xv(),Jv()}function Jv(){if(pn!==5)return!1;var n=kr,s=Rm;Rm=0;var a=st(Qs),l=q.T,f=se.p;try{se.p=32>a?32:a,q.T=null,a=Cm,Cm=null;var m=kr,b=Qs;if(pn=0,Vo=kr=null,Qs=0,(ut&6)!==0)throw Error(r(331));var A=ut;if(ut|=4,Ov(m.current),Iv(m,m.current,b,a),ut=A,rc(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Yn,m)}catch{}return!0}finally{se.p=f,q.T=l,Wv(n,s)}}function Zv(n,s,a){s=Mi(a,s),s=om(n.stateNode,s,2),n=Sr(n,s,2),n!==null&&(te(n,2),bs(n))}function gt(n,s,a){if(n.tag===3)Zv(n,n,a);else for(;s!==null;){if(s.tag===3){Zv(s,n,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Dr===null||!Dr.has(l))){n=Mi(a,n),a=ev(2),l=Sr(s,a,2),l!==null&&(tv(a,l,s,n),te(l,2),bs(l));break}}s=s.return}}function km(n,s,a){var l=n.pingCache;if(l===null){l=n.pingCache=new Hx;var f=new Set;l.set(s,f)}else f=l.get(s),f===void 0&&(f=new Set,l.set(s,f));f.has(a)||(xm=!0,f.add(a),n=Qx.bind(null,n,s,a),s.then(n,n))}function Qx(n,s,a){var l=n.pingCache;l!==null&&l.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,xt===n&&(Ye&a)===a&&(Ft===4||Ft===3&&(Ye&62914560)===Ye&&300>tn()-uh?(ut&2)===0&&Po(n,0):Sm|=a,Mo===Ye&&(Mo=0)),bs(n)}function e_(n,s){s===0&&(s=nn()),n=Ca(n,s),n!==null&&(te(n,s),bs(n))}function Yx(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),e_(n,a)}function Xx(n,s){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),e_(n,a)}function Wx(n,s){return dt(n,s)}var yh=null,Lo=null,Om=!1,vh=!1,Mm=!1,Mr=0;function bs(n){n!==Lo&&n.next===null&&(Lo===null?yh=Lo=n:Lo=Lo.next=n),vh=!0,Om||(Om=!0,Zx())}function rc(n,s){if(!Mm&&vh){Mm=!0;do for(var a=!1,l=yh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var b=l.suspendedLanes,A=l.pingedLanes;m=(1<<31-At(42|n)+1)-1,m&=f&~(b&~A),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,s_(l,m))}else m=Ye,m=Ct(l,l===xt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Bt(l,m)||(a=!0,s_(l,m));l=l.next}while(a);Mm=!1}}function Jx(){t_()}function t_(){vh=Om=!1;var n=0;Mr!==0&&cS()&&(n=Mr);for(var s=tn(),a=null,l=yh;l!==null;){var f=l.next,m=n_(l,s);m===0?(l.next=null,a===null?yh=f:a.next=f,f===null&&(Lo=a)):(a=l,(n!==0||(m&3)!==0)&&(vh=!0)),l=f}pn!==0&&pn!==5||rc(n),Mr!==0&&(Mr=0)}function n_(n,s){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var b=31-At(m),A=1<<b,L=f[b];L===-1?((A&a)===0||(A&l)!==0)&&(f[b]=En(A,s)):L<=s&&(n.expiredLanes|=A),m&=~A}if(s=xt,a=Ye,a=Ct(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===s&&(mt===2||mt===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&$n(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Bt(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(l!==null&&$n(l),st(a)){case 2:case 8:a=Kn;break;case 32:a=Cn;break;case 268435456:a=Ns;break;default:a=Cn}return l=i_.bind(null,n),a=dt(a,l),n.callbackPriority=s,n.callbackNode=a,s}return l!==null&&l!==null&&$n(l),n.callbackPriority=2,n.callbackNode=null,2}function i_(n,s){if(pn!==0&&pn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(ph()&&n.callbackNode!==a)return null;var l=Ye;return l=Ct(n,n===xt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(Lv(n,l,s),n_(n,tn()),n.callbackNode!=null&&n.callbackNode===a?i_.bind(null,n):null)}function s_(n,s){if(ph())return null;Lv(n,s,!0)}function Zx(){hS(function(){(ut&6)!==0?dt(Cs,Jx):t_()})}function Vm(){if(Mr===0){var n=To;n===0&&(n=ni,ni<<=1,(ni&261888)===0&&(ni=256)),Mr=n}return Mr}function r_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:oo(""+n)}function a_(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function eS(n,s,a,l,f){if(s==="submit"&&a&&a.stateNode===f){var m=r_((f[Yt]||null).action),b=l.submitter;b&&(s=(s=b[Yt]||null)?r_(s.formAction):b.getAttribute("formAction"),s!==null&&(m=s,b=null));var A=new ds("action","action",null,l,f);n.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Mr!==0){var L=b?a_(f,b):new FormData(f);tm(a,{pending:!0,data:L,method:f.method,action:m},null,L)}}else typeof m=="function"&&(A.preventDefault(),L=b?a_(f,b):new FormData(f),tm(a,{pending:!0,data:L,method:f.method,action:m},m,L))},currentTarget:f}]})}}for(var Pm=0;Pm<vd.length;Pm++){var jm=vd[Pm],tS=jm.toLowerCase(),nS=jm[0].toUpperCase()+jm.slice(1);Zi(tS,"on"+nS)}Zi(j0,"onAnimationEnd"),Zi(L0,"onAnimationIteration"),Zi(U0,"onAnimationStart"),Zi("dblclick","onDoubleClick"),Zi("focusin","onFocus"),Zi("focusout","onBlur"),Zi(vx,"onTransitionRun"),Zi(_x,"onTransitionStart"),Zi(bx,"onTransitionCancel"),Zi(z0,"onTransitionEnd"),Ci("onMouseEnter",["mouseout","mouseover"]),Ci("onMouseLeave",["mouseout","mouseover"]),Ci("onPointerEnter",["pointerout","pointerover"]),Ci("onPointerLeave",["pointerout","pointerover"]),ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ac));function o_(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var m=void 0;if(s)for(var b=l.length-1;0<=b;b--){var A=l[b],L=A.instance,J=A.currentTarget;if(A=A.listener,L!==m&&f.isPropagationStopped())break e;m=A,f.currentTarget=J;try{m(f)}catch(le){Ou(le)}f.currentTarget=null,m=L}else for(b=0;b<l.length;b++){if(A=l[b],L=A.instance,J=A.currentTarget,A=A.listener,L!==m&&f.isPropagationStopped())break e;m=A,f.currentTarget=J;try{m(f)}catch(le){Ou(le)}f.currentTarget=null,m=L}}}}function Qe(n,s){var a=s[or];a===void 0&&(a=s[or]=new Set);var l=n+"__bubble";a.has(l)||(l_(s,n,2,!1),a.add(l))}function Lm(n,s,a){var l=0;s&&(l|=4),l_(a,n,l,s)}var _h="_reactListening"+Math.random().toString(36).slice(2);function Um(n){if(!n[_h]){n[_h]=!0,ga.forEach(function(a){a!=="selectionchange"&&(iS.has(a)||Lm(a,!1,n),Lm(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[_h]||(s[_h]=!0,Lm("selectionchange",!1,s))}}function l_(n,s,a,l){switch(j_(s)){case 2:var f=DS;break;case 8:f=kS;break;default:f=eg}a=f.bind(null,s,a,n),f=void 0,!ba||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function zm(n,s,a,l,f){var m=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var A=l.stateNode.containerInfo;if(A===f)break;if(b===4)for(b=l.return;b!==null;){var L=b.tag;if((L===3||L===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;A!==null;){if(b=Ai(A),b===null)return;if(L=b.tag,L===5||L===6||L===26||L===27){l=m=b;continue e}A=A.parentNode}}l=l.return}gr(function(){var J=m,le=Ii(a),de=[];e:{var ee=B0.get(n);if(ee!==void 0){var ae=ds,Re=n;switch(n){case"keypress":if(wa(a)===0)break e;case"keydown":case"keyup":ae=Iu;break;case"focusin":Re="focus",ae=xa;break;case"focusout":Re="blur",ae=xa;break;case"beforeblur":case"afterblur":ae=xa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Dl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Eu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=y;break;case j0:case L0:case U0:ae=Tu;break;case z0:ae=N;break;case"scroll":case"scrollend":ae=Il;break;case"wheel":ae=ie;break;case"copy":case"cut":case"paste":ae=xu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Ms;break;case"toggle":case"beforetoggle":ae=qe}var Ve=(s&4)!==0,wt=!Ve&&(n==="scroll"||n==="scrollend"),K=Ve?ee!==null?ee+"Capture":null:ee;Ve=[];for(var B=J,W;B!==null;){var ue=B;if(W=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||W===null||K===null||(ue=Yi(B,K),ue!=null&&Ve.push(oc(B,ue,W))),wt)break;B=B.return}0<Ve.length&&(ee=new ae(ee,Re,null,a,le),de.push({event:ee,listeners:Ve}))}}if((s&7)===0){e:{if(ee=n==="mouseover"||n==="pointerover",ae=n==="mouseout"||n==="pointerout",ee&&a!==Rl&&(Re=a.relatedTarget||a.fromElement)&&(Ai(Re)||Re[Ae]))break e;if((ae||ee)&&(ee=le.window===le?le:(ee=le.ownerDocument)?ee.defaultView||ee.parentWindow:window,ae?(Re=a.relatedTarget||a.toElement,ae=J,Re=Re?Ai(Re):null,Re!==null&&(wt=c(Re),Ve=Re.tag,Re!==wt||Ve!==5&&Ve!==27&&Ve!==6)&&(Re=null)):(ae=null,Re=J),ae!==Re)){if(Ve=Dl,ue="onMouseLeave",K="onMouseEnter",B="mouse",(n==="pointerout"||n==="pointerover")&&(Ve=Ms,ue="onPointerLeave",K="onPointerEnter",B="pointer"),wt=ae==null?ee:zn(ae),W=Re==null?ee:zn(Re),ee=new Ve(ue,B+"leave",ae,a,le),ee.target=wt,ee.relatedTarget=W,ue=null,Ai(le)===J&&(Ve=new Ve(K,B+"enter",Re,a,le),Ve.target=W,Ve.relatedTarget=wt,ue=Ve),wt=ue,ae&&Re)t:{for(Ve=sS,K=ae,B=Re,W=0,ue=K;ue;ue=Ve(ue))W++;ue=0;for(var ke=B;ke;ke=Ve(ke))ue++;for(;0<W-ue;)K=Ve(K),W--;for(;0<ue-W;)B=Ve(B),ue--;for(;W--;){if(K===B||B!==null&&K===B.alternate){Ve=K;break t}K=Ve(K),B=Ve(B)}Ve=null}else Ve=null;ae!==null&&c_(de,ee,ae,Ve,!1),Re!==null&&wt!==null&&c_(de,wt,Re,Ve,!0)}}e:{if(ee=J?zn(J):window,ae=ee.nodeName&&ee.nodeName.toLowerCase(),ae==="select"||ae==="input"&&ee.type==="file")var ot=A0;else if(x0(ee))if(R0)ot=gx;else{ot=dx;var Ce=fx}else ae=ee.nodeName,!ae||ae.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?J&&ao(J.elementType)&&(ot=A0):ot=mx;if(ot&&(ot=ot(n,J))){S0(de,ot,a,le);break e}Ce&&Ce(n,ee,J),n==="focusout"&&J&&ee.type==="number"&&J.memoizedProps.value!=null&&xl(ee,"number",ee.value)}switch(Ce=J?zn(J):window,n){case"focusin":(x0(Ce)||Ce.contentEditable==="true")&&(go=Ce,gd=J,Pl=null);break;case"focusout":Pl=gd=go=null;break;case"mousedown":pd=!0;break;case"contextmenu":case"mouseup":case"dragend":pd=!1,V0(de,a,le);break;case"selectionchange":if(yx)break;case"keydown":case"keyup":V0(de,a,le)}var Fe;if(ct)e:{switch(n){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else mo?Sa(n,a)&&(Xe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Xe="onCompositionStart");Xe&&(ps&&a.locale!=="ko"&&(mo||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&mo&&(Fe=Nl()):(fs=le,Cl="value"in fs?fs.value:fs.textContent,mo=!0)),Ce=bh(J,Xe),0<Ce.length&&(Xe=new gs(Xe,n,null,a,le),de.push({event:Xe,listeners:Ce}),Fe?Xe.data=Fe:(Fe=fo(a),Fe!==null&&(Xe.data=Fe)))),(Fe=ki?lx(n,a):cx(n,a))&&(Xe=bh(J,"onBeforeInput"),0<Xe.length&&(Ce=new gs("onBeforeInput","beforeinput",null,a,le),de.push({event:Ce,listeners:Xe}),Ce.data=Fe)),eS(de,n,J,a,le)}o_(de,s)})}function oc(n,s,a){return{instance:n,listener:s,currentTarget:a}}function bh(n,s){for(var a=s+"Capture",l=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Yi(n,a),f!=null&&l.unshift(oc(n,f,m)),f=Yi(n,s),f!=null&&l.push(oc(n,f,m))),n.tag===3)return l;n=n.return}return[]}function sS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function c_(n,s,a,l,f){for(var m=s._reactName,b=[];a!==null&&a!==l;){var A=a,L=A.alternate,J=A.stateNode;if(A=A.tag,L!==null&&L===l)break;A!==5&&A!==26&&A!==27||J===null||(L=J,f?(J=Yi(a,m),J!=null&&b.unshift(oc(a,J,L))):f||(J=Yi(a,m),J!=null&&b.push(oc(a,J,L)))),a=a.return}b.length!==0&&n.push({event:s,listeners:b})}var rS=/\r\n?/g,aS=/\u0000|\uFFFD/g;function u_(n){return(typeof n=="string"?n:""+n).replace(rS,`
`).replace(aS,"")}function h_(n,s){return s=u_(s),u_(n)===s}function Et(n,s,a,l,f,m){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||ri(n,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&ri(n,""+l);break;case"className":ne(n,"class",l);break;case"tabIndex":ne(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ne(n,a,l);break;case"style":Al(n,l,m);break;case"data":if(s!=="object"){ne(n,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=oo(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&Et(n,s,"name",f.name,f,null),Et(n,s,"formEncType",f.formEncType,f,null),Et(n,s,"formMethod",f.formMethod,f,null),Et(n,s,"formTarget",f.formTarget,f,null)):(Et(n,s,"encType",f.encType,f,null),Et(n,s,"method",f.method,f,null),Et(n,s,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=oo(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Qi);break;case"onScroll":l!=null&&Qe("scroll",n);break;case"onScrollEnd":l!=null&&Qe("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=oo(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Qe("beforetoggle",n),Qe("toggle",n),Y(n,"popover",l);break;case"xlinkActuate":Z(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Z(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Z(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Z(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Z(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Z(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Z(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Z(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Z(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Y(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=bu.get(a)||a,Y(n,a,l))}}function Bm(n,s,a,l,f,m){switch(a){case"style":Al(n,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?ri(n,l):(typeof l=="number"||typeof l=="bigint")&&ri(n,""+l);break;case"onScroll":l!=null&&Qe("scroll",n);break;case"onScrollEnd":l!=null&&Qe("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Qi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),m=n[Yt]||null,m=m!=null?m[a]:null,typeof m=="function"&&n.removeEventListener(s,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Y(n,a,l)}}}function On(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",n),Qe("load",n);var l=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var b=a[m];if(b!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Et(n,s,m,b,a,null)}}f&&Et(n,s,"srcSet",a.srcSet,a,null),l&&Et(n,s,"src",a.src,a,null);return;case"input":Qe("invalid",n);var A=m=b=f=null,L=null,J=null;for(l in a)if(a.hasOwnProperty(l)){var le=a[l];if(le!=null)switch(l){case"name":f=le;break;case"type":b=le;break;case"checked":L=le;break;case"defaultChecked":J=le;break;case"value":m=le;break;case"defaultValue":A=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,s));break;default:Et(n,s,l,le,a,null)}}yu(n,m,A,L,J,b,f,!1);return;case"select":Qe("invalid",n),l=b=m=null;for(f in a)if(a.hasOwnProperty(f)&&(A=a[f],A!=null))switch(f){case"value":m=A;break;case"defaultValue":b=A;break;case"multiple":l=A;default:Et(n,s,f,A,a,null)}s=m,a=b,n.multiple=!!l,s!=null?hr(n,!!l,s,!1):a!=null&&hr(n,!!l,a,!0);return;case"textarea":Qe("invalid",n),m=f=l=null;for(b in a)if(a.hasOwnProperty(b)&&(A=a[b],A!=null))switch(b){case"value":l=A;break;case"defaultValue":f=A;break;case"children":m=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:Et(n,s,b,A,a,null)}fr(n,l,f,m);return;case"option":for(L in a)a.hasOwnProperty(L)&&(l=a[L],l!=null)&&(L==="selected"?n.selected=l&&typeof l!="function"&&typeof l!="symbol":Et(n,s,L,l,a,null));return;case"dialog":Qe("beforetoggle",n),Qe("toggle",n),Qe("cancel",n),Qe("close",n);break;case"iframe":case"object":Qe("load",n);break;case"video":case"audio":for(l=0;l<ac.length;l++)Qe(ac[l],n);break;case"image":Qe("error",n),Qe("load",n);break;case"details":Qe("toggle",n);break;case"embed":case"source":case"link":Qe("error",n),Qe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in a)if(a.hasOwnProperty(J)&&(l=a[J],l!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Et(n,s,J,l,a,null)}return;default:if(ao(s)){for(le in a)a.hasOwnProperty(le)&&(l=a[le],l!==void 0&&Bm(n,s,le,l,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(l=a[A],l!=null&&Et(n,s,A,l,a,null))}function oS(n,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,b=null,A=null,L=null,J=null,le=null;for(ae in a){var de=a[ae];if(a.hasOwnProperty(ae)&&de!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":L=de;default:l.hasOwnProperty(ae)||Et(n,s,ae,null,l,de)}}for(var ee in l){var ae=l[ee];if(de=a[ee],l.hasOwnProperty(ee)&&(ae!=null||de!=null))switch(ee){case"type":m=ae;break;case"name":f=ae;break;case"checked":J=ae;break;case"defaultChecked":le=ae;break;case"value":b=ae;break;case"defaultValue":A=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,s));break;default:ae!==de&&Et(n,s,ee,ae,l,de)}}ro(n,b,A,L,J,le,m,f);return;case"select":ae=b=A=ee=null;for(m in a)if(L=a[m],a.hasOwnProperty(m)&&L!=null)switch(m){case"value":break;case"multiple":ae=L;default:l.hasOwnProperty(m)||Et(n,s,m,null,l,L)}for(f in l)if(m=l[f],L=a[f],l.hasOwnProperty(f)&&(m!=null||L!=null))switch(f){case"value":ee=m;break;case"defaultValue":A=m;break;case"multiple":b=m;default:m!==L&&Et(n,s,f,m,l,L)}s=A,a=b,l=ae,ee!=null?hr(n,!!a,ee,!1):!!l!=!!a&&(s!=null?hr(n,!!a,s,!0):hr(n,!!a,a?[]:"",!1));return;case"textarea":ae=ee=null;for(A in a)if(f=a[A],a.hasOwnProperty(A)&&f!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Et(n,s,A,null,l,f)}for(b in l)if(f=l[b],m=a[b],l.hasOwnProperty(b)&&(f!=null||m!=null))switch(b){case"value":ee=f;break;case"defaultValue":ae=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&Et(n,s,b,f,l,m)}vu(n,ee,ae);return;case"option":for(var Re in a)ee=a[Re],a.hasOwnProperty(Re)&&ee!=null&&!l.hasOwnProperty(Re)&&(Re==="selected"?n.selected=!1:Et(n,s,Re,null,l,ee));for(L in l)ee=l[L],ae=a[L],l.hasOwnProperty(L)&&ee!==ae&&(ee!=null||ae!=null)&&(L==="selected"?n.selected=ee&&typeof ee!="function"&&typeof ee!="symbol":Et(n,s,L,ee,l,ae));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in a)ee=a[Ve],a.hasOwnProperty(Ve)&&ee!=null&&!l.hasOwnProperty(Ve)&&Et(n,s,Ve,null,l,ee);for(J in l)if(ee=l[J],ae=a[J],l.hasOwnProperty(J)&&ee!==ae&&(ee!=null||ae!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,s));break;default:Et(n,s,J,ee,l,ae)}return;default:if(ao(s)){for(var wt in a)ee=a[wt],a.hasOwnProperty(wt)&&ee!==void 0&&!l.hasOwnProperty(wt)&&Bm(n,s,wt,void 0,l,ee);for(le in l)ee=l[le],ae=a[le],!l.hasOwnProperty(le)||ee===ae||ee===void 0&&ae===void 0||Bm(n,s,le,ee,l,ae);return}}for(var K in a)ee=a[K],a.hasOwnProperty(K)&&ee!=null&&!l.hasOwnProperty(K)&&Et(n,s,K,null,l,ee);for(de in l)ee=l[de],ae=a[de],!l.hasOwnProperty(de)||ee===ae||ee==null&&ae==null||Et(n,s,de,ee,l,ae)}function f_(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],m=f.transferSize,b=f.initiatorType,A=f.duration;if(m&&A&&f_(b)){for(b=0,A=f.responseEnd,l+=1;l<a.length;l++){var L=a[l],J=L.startTime;if(J>A)break;var le=L.transferSize,de=L.initiatorType;le&&f_(de)&&(L=L.responseEnd,b+=le*(L<A?1:(A-J)/(L-J)))}if(--l,s+=8*(m+b)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var qm=null,Hm=null;function Eh(n){return n.nodeType===9?n:n.ownerDocument}function d_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function m_(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Fm(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Gm=null;function cS(){var n=window.event;return n&&n.type==="popstate"?n===Gm?!1:(Gm=n,!0):(Gm=null,!1)}var g_=typeof setTimeout=="function"?setTimeout:void 0,uS=typeof clearTimeout=="function"?clearTimeout:void 0,p_=typeof Promise=="function"?Promise:void 0,hS=typeof queueMicrotask=="function"?queueMicrotask:typeof p_<"u"?function(n){return p_.resolve(null).then(n).catch(fS)}:g_;function fS(n){setTimeout(function(){throw n})}function Vr(n){return n==="head"}function y_(n,s){var a=s,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),qo(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")lc(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,lc(a);for(var m=a.firstChild;m;){var b=m.nextSibling,A=m.nodeName;m[Si]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=b}}else a==="body"&&lc(n.ownerDocument.body);a=f}while(a);qo(s)}function v_(n,s){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function $m(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":$m(a),lr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function dS(n,s,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Si])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Ui(n.nextSibling),n===null)break}return null}function mS(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Ui(n.nextSibling),n===null))return null;return n}function __(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Ui(n.nextSibling),n===null))return null;return n}function Km(n){return n.data==="$?"||n.data==="$~"}function Qm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function gS(n,s){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Ui(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Ym=null;function b_(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(s===0)return Ui(n.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}n=n.nextSibling}return null}function E_(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return n;s--}else a!=="/$"&&a!=="/&"||s++}n=n.previousSibling}return null}function w_(n,s,a){switch(s=Eh(a),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function lc(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);lr(n)}var zi=new Map,T_=new Set;function wh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ys=se.d;se.d={f:pS,r:yS,D:vS,C:_S,L:bS,m:ES,X:TS,S:wS,M:xS};function pS(){var n=Ys.f(),s=dh();return n||s}function yS(n){var s=Xn(n);s!==null&&s.tag===5&&s.type==="form"?zy(s):Ys.r(n)}var Uo=typeof document>"u"?null:document;function x_(n,s,a){var l=Uo;if(l&&typeof s=="string"&&s){var f=si(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),T_.has(f)||(T_.add(f),n={rel:n,crossOrigin:a,href:s},l.querySelector(f)===null&&(s=l.createElement("link"),On(s,"link",n),qt(s),l.head.appendChild(s)))}}function vS(n){Ys.D(n),x_("dns-prefetch",n,null)}function _S(n,s){Ys.C(n,s),x_("preconnect",n,s)}function bS(n,s,a){Ys.L(n,s,a);var l=Uo;if(l&&n&&s){var f='link[rel="preload"][as="'+si(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+si(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+si(a.imageSizes)+'"]')):f+='[href="'+si(n)+'"]';var m=f;switch(s){case"style":m=zo(n);break;case"script":m=Bo(n)}zi.has(m)||(n=E({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),zi.set(m,n),l.querySelector(f)!==null||s==="style"&&l.querySelector(cc(m))||s==="script"&&l.querySelector(uc(m))||(s=l.createElement("link"),On(s,"link",n),qt(s),l.head.appendChild(s)))}}function ES(n,s){Ys.m(n,s);var a=Uo;if(a&&n){var l=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+si(l)+'"][href="'+si(n)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Bo(n)}if(!zi.has(m)&&(n=E({rel:"modulepreload",href:n},s),zi.set(m,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(uc(m)))return}l=a.createElement("link"),On(l,"link",n),qt(l),a.head.appendChild(l)}}}function wS(n,s,a){Ys.S(n,s,a);var l=Uo;if(l&&n){var f=Ri(l).hoistableStyles,m=zo(n);s=s||"default";var b=f.get(m);if(!b){var A={loading:0,preload:null};if(b=l.querySelector(cc(m)))A.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":s},a),(a=zi.get(m))&&Xm(n,a);var L=b=l.createElement("link");qt(L),On(L,"link",n),L._p=new Promise(function(J,le){L.onload=J,L.onerror=le}),L.addEventListener("load",function(){A.loading|=1}),L.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Th(b,s,l)}b={type:"stylesheet",instance:b,count:1,state:A},f.set(m,b)}}}function TS(n,s){Ys.X(n,s);var a=Uo;if(a&&n){var l=Ri(a).hoistableScripts,f=Bo(n),m=l.get(f);m||(m=a.querySelector(uc(f)),m||(n=E({src:n,async:!0},s),(s=zi.get(f))&&Wm(n,s),m=a.createElement("script"),qt(m),On(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function xS(n,s){Ys.M(n,s);var a=Uo;if(a&&n){var l=Ri(a).hoistableScripts,f=Bo(n),m=l.get(f);m||(m=a.querySelector(uc(f)),m||(n=E({src:n,async:!0,type:"module"},s),(s=zi.get(f))&&Wm(n,s),m=a.createElement("script"),qt(m),On(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function S_(n,s,a,l){var f=(f=we.current)?wh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=zo(a.href),a=Ri(f).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=zo(a.href);var m=Ri(f).hoistableStyles,b=m.get(n);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,b),(m=f.querySelector(cc(n)))&&!m._p&&(b.instance=m,b.state.loading=5),zi.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},zi.set(n,a),m||SS(f,n,a,b.state))),s&&l===null)throw Error(r(528,""));return b}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Bo(a),a=Ri(f).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function zo(n){return'href="'+si(n)+'"'}function cc(n){return'link[rel="stylesheet"]['+n+"]"}function A_(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function SS(n,s,a,l){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=n.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),On(s,"link",a),qt(s),n.head.appendChild(s))}function Bo(n){return'[src="'+si(n)+'"]'}function uc(n){return"script[async]"+n}function R_(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=n.querySelector('style[data-href~="'+si(a.href)+'"]');if(l)return s.instance=l,qt(l),l;var f=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),qt(l),On(l,"style",f),Th(l,a.precedence,n),s.instance=l;case"stylesheet":f=zo(a.href);var m=n.querySelector(cc(f));if(m)return s.state.loading|=4,s.instance=m,qt(m),m;l=A_(a),(f=zi.get(f))&&Xm(l,f),m=(n.ownerDocument||n).createElement("link"),qt(m);var b=m;return b._p=new Promise(function(A,L){b.onload=A,b.onerror=L}),On(m,"link",l),s.state.loading|=4,Th(m,a.precedence,n),s.instance=m;case"script":return m=Bo(a.src),(f=n.querySelector(uc(m)))?(s.instance=f,qt(f),f):(l=a,(f=zi.get(m))&&(l=E({},a),Wm(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),qt(f),On(f,"link",l),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Th(l,a.precedence,n));return s.instance}function Th(n,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,b=0;b<l.length;b++){var A=l[b];if(A.dataset.precedence===s)m=A;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function Xm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Wm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var xh=null;function C_(n,s,a){if(xh===null){var l=new Map,f=xh=new Map;f.set(a,l)}else f=xh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var m=a[f];if(!(m[Si]||m[Ut]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(s)||"";b=n+b;var A=l.get(b);A?A.push(m):l.set(b,[m])}}return l}function N_(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function AS(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(n=s.disabled,typeof s.precedence=="string"&&n==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function I_(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function RS(n,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=zo(l.href),m=s.querySelector(cc(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=Sh.bind(n),s.then(n,n)),a.state.loading|=4,a.instance=m,qt(m);return}m=s.ownerDocument||s,l=A_(l),(f=zi.get(f))&&Xm(l,f),m=m.createElement("link"),qt(m);var b=m;b._p=new Promise(function(A,L){b.onload=A,b.onerror=L}),On(m,"link",l),a.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Sh.bind(n),s.addEventListener("load",a),s.addEventListener("error",a))}}var Jm=0;function CS(n,s){return n.stylesheets&&n.count===0&&Rh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&Rh(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+s);0<n.imgBytes&&Jm===0&&(Jm=62500*lS());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Rh(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>Jm?50:800)+s);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Sh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Ah=null;function Rh(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Ah=new Map,s.forEach(NS,n),Ah=null,Sh.call(n))}function NS(n,s){if(!(s.state.loading&4)){var a=Ah.get(n);if(a)var l=a.get(null);else{a=new Map,Ah.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var b=f[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}f=s.instance,b=f.getAttribute("data-precedence"),m=a.get(b)||l,m===l&&a.set(null,f),a.set(b,f),this.count++,l=Sh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var hc={$$typeof:G,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function IS(n,s,a,l,f,m,b,A,L){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Lt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lt(0),this.hiddenUpdates=Lt(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function D_(n,s,a,l,f,m,b,A,L,J,le,de){return n=new IS(n,s,a,b,L,J,le,de,A),s=1,m===!0&&(s|=24),m=mi(3,null,null,s),n.current=m,m.stateNode=n,s=Dd(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:s},Vd(m),n}function k_(n){return n?(n=vo,n):vo}function O_(n,s,a,l,f,m){f=k_(f),l.context===null?l.context=f:l.pendingContext=f,l=xr(s),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Sr(n,l,s),a!==null&&(ui(a,n,s),Hl(a,n,s))}function M_(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Zm(n,s){M_(n,s),(n=n.alternate)&&M_(n,s)}function V_(n){if(n.tag===13||n.tag===31){var s=Ca(n,67108864);s!==null&&ui(s,n,67108864),Zm(n,67108864)}}function P_(n){if(n.tag===13||n.tag===31){var s=_i();s=mn(s);var a=Ca(n,s);a!==null&&ui(a,n,s),Zm(n,s)}}var Ch=!0;function DS(n,s,a,l){var f=q.T;q.T=null;var m=se.p;try{se.p=2,eg(n,s,a,l)}finally{se.p=m,q.T=f}}function kS(n,s,a,l){var f=q.T;q.T=null;var m=se.p;try{se.p=8,eg(n,s,a,l)}finally{se.p=m,q.T=f}}function eg(n,s,a,l){if(Ch){var f=tg(l);if(f===null)zm(n,s,l,Nh,a),L_(n,l);else if(MS(f,n,s,a,l))l.stopPropagation();else if(L_(n,l),s&4&&-1<OS.indexOf(n)){for(;f!==null;){var m=Xn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=Rt(m.pendingLanes);if(b!==0){var A=m;for(A.pendingLanes|=2,A.entangledLanes|=2;b;){var L=1<<31-At(b);A.entanglements[1]|=L,b&=~L}bs(m),(ut&6)===0&&(hh=tn()+500,rc(0))}}break;case 31:case 13:A=Ca(m,2),A!==null&&ui(A,m,2),dh(),Zm(m,2)}if(m=tg(l),m===null&&zm(n,s,l,Nh,a),m===f)break;f=m}f!==null&&l.stopPropagation()}else zm(n,s,l,null,a)}}function tg(n){return n=Ii(n),ng(n)}var Nh=null;function ng(n){if(Nh=null,n=Ai(n),n!==null){var s=c(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=u(s),n!==null)return n;n=null}else if(a===31){if(n=d(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Nh=n,null}function j_(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fi()){case Cs:return 2;case Kn:return 8;case Cn:case Gi:return 32;case Ns:return 268435456;default:return 32}default:return 32}}var ig=!1,Pr=null,jr=null,Lr=null,fc=new Map,dc=new Map,Ur=[],OS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function L_(n,s){switch(n){case"focusin":case"focusout":Pr=null;break;case"dragenter":case"dragleave":jr=null;break;case"mouseover":case"mouseout":Lr=null;break;case"pointerover":case"pointerout":fc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":dc.delete(s.pointerId)}}function mc(n,s,a,l,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Xn(s),s!==null&&V_(s)),n):(n.eventSystemFlags|=l,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function MS(n,s,a,l,f){switch(s){case"focusin":return Pr=mc(Pr,n,s,a,l,f),!0;case"dragenter":return jr=mc(jr,n,s,a,l,f),!0;case"mouseover":return Lr=mc(Lr,n,s,a,l,f),!0;case"pointerover":var m=f.pointerId;return fc.set(m,mc(fc.get(m)||null,n,s,a,l,f)),!0;case"gotpointercapture":return m=f.pointerId,dc.set(m,mc(dc.get(m)||null,n,s,a,l,f)),!0}return!1}function U_(n){var s=Ai(n.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){n.blockedOn=s,gn(n.priority,function(){P_(a)});return}}else if(s===31){if(s=d(a),s!==null){n.blockedOn=s,gn(n.priority,function(){P_(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ih(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=tg(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Rl=l,a.target.dispatchEvent(l),Rl=null}else return s=Xn(a),s!==null&&V_(s),n.blockedOn=a,!1;s.shift()}return!0}function z_(n,s,a){Ih(n)&&a.delete(s)}function VS(){ig=!1,Pr!==null&&Ih(Pr)&&(Pr=null),jr!==null&&Ih(jr)&&(jr=null),Lr!==null&&Ih(Lr)&&(Lr=null),fc.forEach(z_),dc.forEach(z_)}function Dh(n,s){n.blockedOn===s&&(n.blockedOn=null,ig||(ig=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,VS)))}var kh=null;function B_(n){kh!==n&&(kh=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){kh===n&&(kh=null);for(var s=0;s<n.length;s+=3){var a=n[s],l=n[s+1],f=n[s+2];if(typeof l!="function"){if(ng(l||a)===null)continue;break}var m=Xn(a);m!==null&&(n.splice(s,3),s-=3,tm(m,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function qo(n){function s(L){return Dh(L,n)}Pr!==null&&Dh(Pr,n),jr!==null&&Dh(jr,n),Lr!==null&&Dh(Lr,n),fc.forEach(s),dc.forEach(s);for(var a=0;a<Ur.length;a++){var l=Ur[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Ur.length&&(a=Ur[0],a.blockedOn===null);)U_(a),a.blockedOn===null&&Ur.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],m=a[l+1],b=f[Yt]||null;if(typeof m=="function")b||B_(a);else if(b){var A=null;if(m&&m.hasAttribute("formAction")){if(f=m,b=m[Yt]||null)A=b.formAction;else if(ng(f)!==null)continue}else A=b.action;typeof A=="function"?a[l+1]=A:(a.splice(l,3),l-=3),B_(a)}}}function q_(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function sg(n){this._internalRoot=n}Oh.prototype.render=sg.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=_i();O_(a,l,n,s,null,null)},Oh.prototype.unmount=sg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;O_(n.current,2,null,n,null,null),dh(),s[Ae]=null}};function Oh(n){this._internalRoot=n}Oh.prototype.unstable_scheduleHydration=function(n){if(n){var s=Ot();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Ur.length&&s!==0&&s<Ur[a].priority;a++);Ur.splice(a,0,n),a===0&&U_(n)}};var H_=e.version;if(H_!=="19.2.3")throw Error(r(527,H_,"19.2.3"));se.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(s),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var PS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mh.isDisabled&&Mh.supportsFiber)try{Yn=Mh.inject(PS),Kt=Mh}catch{}}return pc.createRoot=function(n,s){if(!o(n))throw Error(r(299));var a=!1,l="",f=Xy,m=Wy,b=Jy;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError)),s=D_(n,1,!1,null,null,a,l,null,f,m,b,q_),n[Ae]=s.current,Um(n),new sg(s)},pc.hydrateRoot=function(n,s,a){if(!o(n))throw Error(r(299));var l=!1,f="",m=Xy,b=Wy,A=Jy,L=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.formState!==void 0&&(L=a.formState)),s=D_(n,1,!0,s,a??null,l,f,L,m,b,A,q_),s.context=k_(null),a=s.current,l=_i(),l=mn(l),f=xr(l),f.callback=null,Sr(a,f,l),a=l,s.current.lanes=a,te(s,a),bs(s),n[Ae]=s.current,Um(n),new Oh(s)},pc.version="19.2.3",pc}var Z_;function $S(){if(Z_)return og.exports;Z_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),og.exports=GS(),og.exports}var KS=$S();const QS=()=>_.jsxs("div",{className:"fixed inset-0 -z-50 overflow-hidden pointer-events-none bg-[#020617]",children:[_.jsx("div",{className:"bg-blob opacity-20 w-[800px] h-[800px] -top-96 -left-96 bg-indigo-600 blur-[120px]"}),_.jsx("div",{className:"bg-blob opacity-30 w-[600px] h-[600px] top-1/2 -right-48 bg-pink-600 blur-[100px]",style:{animationDelay:"-5s",animationDuration:"25s"}}),_.jsx("div",{className:"bg-blob opacity-10 w-[500px] h-[500px] bottom-0 left-1/4 bg-cyan-400 blur-[80px]",style:{animationDelay:"-12s",animationDuration:"18s"}}),_.jsx("div",{className:"absolute inset-0 bg-radial-at-t from-transparent via-slate-950/40 to-slate-950"}),_.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"})]});const YS=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),XS=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),eb=i=>{const e=XS(i);return e.charAt(0).toUpperCase()+e.slice(1)},aE=(...i)=>i.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),WS=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var JS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ZS=z.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:c,iconNode:u,...d},g)=>z.createElement("svg",{ref:g,...JS,width:e,height:e,stroke:i,strokeWidth:r?Number(t)*24/Number(e):t,className:aE("lucide",o),...!c&&!WS(d)&&{"aria-hidden":"true"},...d},[...u.map(([p,v])=>z.createElement(p,v)),...Array.isArray(c)?c:[c]]));const dn=(i,e)=>{const t=z.forwardRef(({className:r,...o},c)=>z.createElement(ZS,{ref:c,iconNode:e,className:aE(`lucide-${YS(eb(i))}`,`lucide-${i}`,r),...o}));return t.displayName=eb(i),t};const eA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ha=dn("arrow-left",eA);const tA=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],of=dn("bot",tA);const nA=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],iA=dn("check",nA);const sA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],rA=dn("circle-x",sA);const aA=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],yp=dn("copy",aA);const oA=[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]],lA=dn("dices",oA);const cA=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],oE=dn("flag",cA);const uA=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],hA=dn("house",uA);const fA=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],dA=dn("layout-grid",fA);const mA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],lE=dn("loader-circle",mA);const gA=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],tb=dn("log-in",gA);const pA=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],yA=dn("log-out",pA);const vA=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],_A=dn("play",vA);const bA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],nb=dn("plus",bA);const EA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],vp=dn("rotate-ccw",EA);const wA=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],cE=dn("share-2",wA);const TA=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Vg=dn("trophy",TA);const xA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Fa=dn("user",xA);const SA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Vf=dn("users",SA);const AA=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],uE=dn("zap",AA),RA=()=>{};var ib={};const hE=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},CA=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const o=i[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[t++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[t++],u=i[t++],d=i[t++],g=((o&7)<<18|(c&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const c=i[t++],u=i[t++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|u&63)}}return e.join("")},fE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const c=i[o],u=o+1<i.length,d=u?i[o+1]:0,g=o+2<i.length,p=g?i[o+2]:0,v=c>>2,E=(c&3)<<4|d>>4;let T=(d&15)<<2|p>>6,I=p&63;g||(I=64,u||(T=64)),r.push(t[v],t[E],t[T],t[I])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(hE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):CA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const c=t[i.charAt(o++)],d=o<i.length?t[i.charAt(o)]:0;++o;const p=o<i.length?t[i.charAt(o)]:64;++o;const E=o<i.length?t[i.charAt(o)]:64;if(++o,c==null||d==null||p==null||E==null)throw new NA;const T=c<<2|d>>4;if(r.push(T),p!==64){const I=d<<4&240|p>>2;if(r.push(I),E!==64){const P=p<<6&192|E;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class NA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IA=function(i){const e=hE(i);return fE.encodeByteArray(e,!0)},lf=function(i){return IA(i).replace(/\./g,"")},dE=function(i){try{return fE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function DA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const kA=()=>DA().__FIREBASE_DEFAULTS__,OA=()=>{if(typeof process>"u"||typeof ib>"u")return;const i=ib.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},MA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&dE(i[1]);return e&&JSON.parse(e)},Pf=()=>{try{return RA()||kA()||OA()||MA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},mE=i=>Pf()?.emulatorHosts?.[i],VA=i=>{const e=mE(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},gE=()=>Pf()?.config,pE=i=>Pf()?.[`_${i}`];class PA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function dl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yE(i){return(await fetch(i,{credentials:"include"})).ok}function jA(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[lf(JSON.stringify(t)),lf(JSON.stringify(u)),""].join(".")}const Ac={};function LA(){const i={prod:[],emulator:[]};for(const e of Object.keys(Ac))Ac[e]?i.emulator.push(e):i.prod.push(e);return i}function UA(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let sb=!1;function vE(i,e){if(typeof window>"u"||typeof document>"u"||!dl(window.location.host)||Ac[i]===e||Ac[i]||sb)return;Ac[i]=e;function t(T){return`__firebase__banner__${T}`}const r="__firebase__banner",c=LA().prod.length>0;function u(){const T=document.getElementById(r);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,I){T.setAttribute("width","24"),T.setAttribute("id",I),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{sb=!0,u()},T}function v(T,I){T.setAttribute("id",I),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=UA(r),I=t("text"),P=document.getElementById(I)||document.createElement("span"),H=t("learnmore"),k=document.getElementById(H)||document.createElement("a"),j=t("preprendIcon"),Q=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const G=T.element;d(G),v(k,H);const he=p();g(Q,j),G.append(Q,P,k,he),document.body.appendChild(G)}c?(P.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gn())}function BA(){const i=Pf()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HA(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function FA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GA(){const i=Gn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function $A(){return!BA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function KA(){try{return typeof indexedDB=="object"}catch{return!1}}function QA(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const YA="FirebaseError";class rr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=YA,Object.setPrototypeOf(this,rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wc.prototype.create)}}class Wc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],u=c?XA(c,r):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new rr(o,d,r)}}function XA(i,e){return i.replace(WA,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const WA=/\{\$([^}]+)}/g;function JA(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Qa(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const c=i[o],u=e[o];if(rb(c)&&rb(u)){if(!Qa(c,u))return!1}else if(c!==u)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function rb(i){return i!==null&&typeof i=="object"}function Jc(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ZA(i,e){const t=new e2(i,e);return t.subscribe.bind(t)}class e2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");t2(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=hg),o.error===void 0&&(o.error=hg),o.complete===void 0&&(o.complete=hg);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function t2(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function hg(){}function Rn(i){return i&&i._delegate?i._delegate:i}class Ya{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const qa="[DEFAULT]";class n2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new PA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(s2(e))try{this.getOrInitializeService({instanceIdentifier:qa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=qa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qa){return this.instances.has(e)}getOptions(e=qa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[c,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(c);r===d&&u.resolve(o)}return o}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&e(c,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:i2(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qa){return this.component?this.component.multipleInstances?e:qa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function i2(i){return i===qa?void 0:i}function s2(i){return i.instantiationMode==="EAGER"}class r2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new n2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var We;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(We||(We={}));const a2={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},o2=We.INFO,l2={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},c2=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=l2[e];if(o)console[o](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _p{constructor(e){this.name=e,this._logLevel=o2,this._logHandler=c2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?a2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const u2=(i,e)=>e.some(t=>i instanceof t);let ab,ob;function h2(){return ab||(ab=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function f2(){return ob||(ob=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _E=new WeakMap,Pg=new WeakMap,bE=new WeakMap,fg=new WeakMap,bp=new WeakMap;function d2(i){const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",u)},c=()=>{t(Wr(i.result)),o()},u=()=>{r(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&_E.set(t,i)}).catch(()=>{}),bp.set(e,i),e}function m2(i){if(Pg.has(i))return;const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",u),i.removeEventListener("abort",u)},c=()=>{t(),o()},u=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",u),i.addEventListener("abort",u)});Pg.set(i,e)}let jg={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Pg.get(i);if(e==="objectStoreNames")return i.objectStoreNames||bE.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Wr(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function g2(i){jg=i(jg)}function p2(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(dg(this),e,...t);return bE.set(r,e.sort?e.sort():[e]),Wr(r)}:f2().includes(i)?function(...e){return i.apply(dg(this),e),Wr(_E.get(this))}:function(...e){return Wr(i.apply(dg(this),e))}}function y2(i){return typeof i=="function"?p2(i):(i instanceof IDBTransaction&&m2(i),u2(i,h2())?new Proxy(i,jg):i)}function Wr(i){if(i instanceof IDBRequest)return d2(i);if(fg.has(i))return fg.get(i);const e=y2(i);return e!==i&&(fg.set(i,e),bp.set(e,i)),e}const dg=i=>bp.get(i);function v2(i,e,{blocked:t,upgrade:r,blocking:o,terminated:c}={}){const u=indexedDB.open(i,e),d=Wr(u);return r&&u.addEventListener("upgradeneeded",g=>{r(Wr(u.result),g.oldVersion,g.newVersion,Wr(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),d.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const _2=["get","getKey","getAll","getAllKeys","count"],b2=["put","add","delete","clear"],mg=new Map;function lb(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(mg.get(e))return mg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=b2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||_2.includes(t)))return;const c=async function(u,...d){const g=this.transaction(u,o?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),o&&g.done]))[0]};return mg.set(e,c),c}g2(i=>({...i,get:(e,t,r)=>lb(e,t)||i.get(e,t,r),has:(e,t)=>!!lb(e,t)||i.has(e,t)}));class E2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(w2(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function w2(i){return i.getComponent()?.type==="VERSION"}const Lg="@firebase/app",cb="0.14.6";const Zs=new _p("@firebase/app"),T2="@firebase/app-compat",x2="@firebase/analytics-compat",S2="@firebase/analytics",A2="@firebase/app-check-compat",R2="@firebase/app-check",C2="@firebase/auth",N2="@firebase/auth-compat",I2="@firebase/database",D2="@firebase/data-connect",k2="@firebase/database-compat",O2="@firebase/functions",M2="@firebase/functions-compat",V2="@firebase/installations",P2="@firebase/installations-compat",j2="@firebase/messaging",L2="@firebase/messaging-compat",U2="@firebase/performance",z2="@firebase/performance-compat",B2="@firebase/remote-config",q2="@firebase/remote-config-compat",H2="@firebase/storage",F2="@firebase/storage-compat",G2="@firebase/firestore",$2="@firebase/ai",K2="@firebase/firestore-compat",Q2="firebase",Y2="12.6.0";const Ug="[DEFAULT]",X2={[Lg]:"fire-core",[T2]:"fire-core-compat",[S2]:"fire-analytics",[x2]:"fire-analytics-compat",[R2]:"fire-app-check",[A2]:"fire-app-check-compat",[C2]:"fire-auth",[N2]:"fire-auth-compat",[I2]:"fire-rtdb",[D2]:"fire-data-connect",[k2]:"fire-rtdb-compat",[O2]:"fire-fn",[M2]:"fire-fn-compat",[V2]:"fire-iid",[P2]:"fire-iid-compat",[j2]:"fire-fcm",[L2]:"fire-fcm-compat",[U2]:"fire-perf",[z2]:"fire-perf-compat",[B2]:"fire-rc",[q2]:"fire-rc-compat",[H2]:"fire-gcs",[F2]:"fire-gcs-compat",[G2]:"fire-fst",[K2]:"fire-fst-compat",[$2]:"fire-vertex","fire-js":"fire-js",[Q2]:"fire-js-all"};const Lc=new Map,W2=new Map,zg=new Map;function ub(i,e){try{i.container.addComponent(e)}catch(t){Zs.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function il(i){const e=i.name;if(zg.has(e))return Zs.debug(`There were multiple attempts to register component ${e}.`),!1;zg.set(e,i);for(const t of Lc.values())ub(t,i);for(const t of W2.values())ub(t,i);return!0}function Ep(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function is(i){return i==null?!1:i.settings!==void 0}const J2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jr=new Wc("app","Firebase",J2);class Z2{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ya("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jr.create("app-deleted",{appName:this._name})}}const ml=Y2;function EE(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r={name:Ug,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Jr.create("bad-app-name",{appName:String(o)});if(t||(t=gE()),!t)throw Jr.create("no-options");const c=Lc.get(o);if(c){if(Qa(t,c.options)&&Qa(r,c.config))return c;throw Jr.create("duplicate-app",{appName:o})}const u=new r2(o);for(const g of zg.values())u.addComponent(g);const d=new Z2(t,r,u);return Lc.set(o,d),d}function wE(i=Ug){const e=Lc.get(i);if(!e&&i===Ug&&gE())return EE();if(!e)throw Jr.create("no-app",{appName:i});return e}function hb(){return Array.from(Lc.values())}function Zr(i,e,t){let r=X2[i]??i;t&&(r+=`-${t}`);const o=r.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${r}" with version "${e}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zs.warn(u.join(" "));return}il(new Ya(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const eR="firebase-heartbeat-database",tR=1,Uc="firebase-heartbeat-store";let gg=null;function TE(){return gg||(gg=v2(eR,tR,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Uc)}catch(t){console.warn(t)}}}}).catch(i=>{throw Jr.create("idb-open",{originalErrorMessage:i.message})})),gg}async function nR(i){try{const t=(await TE()).transaction(Uc),r=await t.objectStore(Uc).get(xE(i));return await t.done,r}catch(e){if(e instanceof rr)Zs.warn(e.message);else{const t=Jr.create("idb-get",{originalErrorMessage:e?.message});Zs.warn(t.message)}}}async function fb(i,e){try{const r=(await TE()).transaction(Uc,"readwrite");await r.objectStore(Uc).put(e,xE(i)),await r.done}catch(t){if(t instanceof rr)Zs.warn(t.message);else{const r=Jr.create("idb-set",{originalErrorMessage:t?.message});Zs.warn(r.message)}}}function xE(i){return`${i.name}!${i.options.appId}`}const iR=1024,sR=30;class rR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new oR(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=db();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>sR){const o=lR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Zs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=db(),{heartbeatsToSend:t,unsentEntries:r}=aR(this._heartbeatsCache.heartbeats),o=lf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Zs.warn(e),""}}}function db(){return new Date().toISOString().substring(0,10)}function aR(i,e=iR){const t=[];let r=i.slice();for(const o of i){const c=t.find(u=>u.agent===o.agent);if(c){if(c.dates.push(o.date),mb(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),mb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class oR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return KA()?QA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await nR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return fb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return fb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function mb(i){return lf(JSON.stringify({version:2,heartbeats:i})).length}function lR(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}function cR(i){il(new Ya("platform-logger",e=>new E2(e),"PRIVATE")),il(new Ya("heartbeat",e=>new rR(e),"PRIVATE")),Zr(Lg,cb,i),Zr(Lg,cb,"esm2020"),Zr("fire-js","")}cR("");var gb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ea,SE;(function(){var i;function e(S,x){function R(){}R.prototype=x.prototype,S.F=x.prototype,S.prototype=new R,S.prototype.constructor=S,S.D=function(M,C,O){for(var D=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)D[Ee-2]=arguments[Ee];return x.prototype[C].apply(M,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(S,x,R){R||(R=0);const M=Array(16);if(typeof x=="string")for(var C=0;C<16;++C)M[C]=x.charCodeAt(R++)|x.charCodeAt(R++)<<8|x.charCodeAt(R++)<<16|x.charCodeAt(R++)<<24;else for(C=0;C<16;++C)M[C]=x[R++]|x[R++]<<8|x[R++]<<16|x[R++]<<24;x=S.g[0],R=S.g[1],C=S.g[2];let O=S.g[3],D;D=x+(O^R&(C^O))+M[0]+3614090360&4294967295,x=R+(D<<7&4294967295|D>>>25),D=O+(C^x&(R^C))+M[1]+3905402710&4294967295,O=x+(D<<12&4294967295|D>>>20),D=C+(R^O&(x^R))+M[2]+606105819&4294967295,C=O+(D<<17&4294967295|D>>>15),D=R+(x^C&(O^x))+M[3]+3250441966&4294967295,R=C+(D<<22&4294967295|D>>>10),D=x+(O^R&(C^O))+M[4]+4118548399&4294967295,x=R+(D<<7&4294967295|D>>>25),D=O+(C^x&(R^C))+M[5]+1200080426&4294967295,O=x+(D<<12&4294967295|D>>>20),D=C+(R^O&(x^R))+M[6]+2821735955&4294967295,C=O+(D<<17&4294967295|D>>>15),D=R+(x^C&(O^x))+M[7]+4249261313&4294967295,R=C+(D<<22&4294967295|D>>>10),D=x+(O^R&(C^O))+M[8]+1770035416&4294967295,x=R+(D<<7&4294967295|D>>>25),D=O+(C^x&(R^C))+M[9]+2336552879&4294967295,O=x+(D<<12&4294967295|D>>>20),D=C+(R^O&(x^R))+M[10]+4294925233&4294967295,C=O+(D<<17&4294967295|D>>>15),D=R+(x^C&(O^x))+M[11]+2304563134&4294967295,R=C+(D<<22&4294967295|D>>>10),D=x+(O^R&(C^O))+M[12]+1804603682&4294967295,x=R+(D<<7&4294967295|D>>>25),D=O+(C^x&(R^C))+M[13]+4254626195&4294967295,O=x+(D<<12&4294967295|D>>>20),D=C+(R^O&(x^R))+M[14]+2792965006&4294967295,C=O+(D<<17&4294967295|D>>>15),D=R+(x^C&(O^x))+M[15]+1236535329&4294967295,R=C+(D<<22&4294967295|D>>>10),D=x+(C^O&(R^C))+M[1]+4129170786&4294967295,x=R+(D<<5&4294967295|D>>>27),D=O+(R^C&(x^R))+M[6]+3225465664&4294967295,O=x+(D<<9&4294967295|D>>>23),D=C+(x^R&(O^x))+M[11]+643717713&4294967295,C=O+(D<<14&4294967295|D>>>18),D=R+(O^x&(C^O))+M[0]+3921069994&4294967295,R=C+(D<<20&4294967295|D>>>12),D=x+(C^O&(R^C))+M[5]+3593408605&4294967295,x=R+(D<<5&4294967295|D>>>27),D=O+(R^C&(x^R))+M[10]+38016083&4294967295,O=x+(D<<9&4294967295|D>>>23),D=C+(x^R&(O^x))+M[15]+3634488961&4294967295,C=O+(D<<14&4294967295|D>>>18),D=R+(O^x&(C^O))+M[4]+3889429448&4294967295,R=C+(D<<20&4294967295|D>>>12),D=x+(C^O&(R^C))+M[9]+568446438&4294967295,x=R+(D<<5&4294967295|D>>>27),D=O+(R^C&(x^R))+M[14]+3275163606&4294967295,O=x+(D<<9&4294967295|D>>>23),D=C+(x^R&(O^x))+M[3]+4107603335&4294967295,C=O+(D<<14&4294967295|D>>>18),D=R+(O^x&(C^O))+M[8]+1163531501&4294967295,R=C+(D<<20&4294967295|D>>>12),D=x+(C^O&(R^C))+M[13]+2850285829&4294967295,x=R+(D<<5&4294967295|D>>>27),D=O+(R^C&(x^R))+M[2]+4243563512&4294967295,O=x+(D<<9&4294967295|D>>>23),D=C+(x^R&(O^x))+M[7]+1735328473&4294967295,C=O+(D<<14&4294967295|D>>>18),D=R+(O^x&(C^O))+M[12]+2368359562&4294967295,R=C+(D<<20&4294967295|D>>>12),D=x+(R^C^O)+M[5]+4294588738&4294967295,x=R+(D<<4&4294967295|D>>>28),D=O+(x^R^C)+M[8]+2272392833&4294967295,O=x+(D<<11&4294967295|D>>>21),D=C+(O^x^R)+M[11]+1839030562&4294967295,C=O+(D<<16&4294967295|D>>>16),D=R+(C^O^x)+M[14]+4259657740&4294967295,R=C+(D<<23&4294967295|D>>>9),D=x+(R^C^O)+M[1]+2763975236&4294967295,x=R+(D<<4&4294967295|D>>>28),D=O+(x^R^C)+M[4]+1272893353&4294967295,O=x+(D<<11&4294967295|D>>>21),D=C+(O^x^R)+M[7]+4139469664&4294967295,C=O+(D<<16&4294967295|D>>>16),D=R+(C^O^x)+M[10]+3200236656&4294967295,R=C+(D<<23&4294967295|D>>>9),D=x+(R^C^O)+M[13]+681279174&4294967295,x=R+(D<<4&4294967295|D>>>28),D=O+(x^R^C)+M[0]+3936430074&4294967295,O=x+(D<<11&4294967295|D>>>21),D=C+(O^x^R)+M[3]+3572445317&4294967295,C=O+(D<<16&4294967295|D>>>16),D=R+(C^O^x)+M[6]+76029189&4294967295,R=C+(D<<23&4294967295|D>>>9),D=x+(R^C^O)+M[9]+3654602809&4294967295,x=R+(D<<4&4294967295|D>>>28),D=O+(x^R^C)+M[12]+3873151461&4294967295,O=x+(D<<11&4294967295|D>>>21),D=C+(O^x^R)+M[15]+530742520&4294967295,C=O+(D<<16&4294967295|D>>>16),D=R+(C^O^x)+M[2]+3299628645&4294967295,R=C+(D<<23&4294967295|D>>>9),D=x+(C^(R|~O))+M[0]+4096336452&4294967295,x=R+(D<<6&4294967295|D>>>26),D=O+(R^(x|~C))+M[7]+1126891415&4294967295,O=x+(D<<10&4294967295|D>>>22),D=C+(x^(O|~R))+M[14]+2878612391&4294967295,C=O+(D<<15&4294967295|D>>>17),D=R+(O^(C|~x))+M[5]+4237533241&4294967295,R=C+(D<<21&4294967295|D>>>11),D=x+(C^(R|~O))+M[12]+1700485571&4294967295,x=R+(D<<6&4294967295|D>>>26),D=O+(R^(x|~C))+M[3]+2399980690&4294967295,O=x+(D<<10&4294967295|D>>>22),D=C+(x^(O|~R))+M[10]+4293915773&4294967295,C=O+(D<<15&4294967295|D>>>17),D=R+(O^(C|~x))+M[1]+2240044497&4294967295,R=C+(D<<21&4294967295|D>>>11),D=x+(C^(R|~O))+M[8]+1873313359&4294967295,x=R+(D<<6&4294967295|D>>>26),D=O+(R^(x|~C))+M[15]+4264355552&4294967295,O=x+(D<<10&4294967295|D>>>22),D=C+(x^(O|~R))+M[6]+2734768916&4294967295,C=O+(D<<15&4294967295|D>>>17),D=R+(O^(C|~x))+M[13]+1309151649&4294967295,R=C+(D<<21&4294967295|D>>>11),D=x+(C^(R|~O))+M[4]+4149444226&4294967295,x=R+(D<<6&4294967295|D>>>26),D=O+(R^(x|~C))+M[11]+3174756917&4294967295,O=x+(D<<10&4294967295|D>>>22),D=C+(x^(O|~R))+M[2]+718787259&4294967295,C=O+(D<<15&4294967295|D>>>17),D=R+(O^(C|~x))+M[9]+3951481745&4294967295,S.g[0]=S.g[0]+x&4294967295,S.g[1]=S.g[1]+(C+(D<<21&4294967295|D>>>11))&4294967295,S.g[2]=S.g[2]+C&4294967295,S.g[3]=S.g[3]+O&4294967295}r.prototype.v=function(S,x){x===void 0&&(x=S.length);const R=x-this.blockSize,M=this.C;let C=this.h,O=0;for(;O<x;){if(C==0)for(;O<=R;)o(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<x;)if(M[C++]=S.charCodeAt(O++),C==this.blockSize){o(this,M),C=0;break}}else for(;O<x;)if(M[C++]=S[O++],C==this.blockSize){o(this,M),C=0;break}}this.h=C,this.o+=x},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var x=1;x<S.length-8;++x)S[x]=0;x=this.o*8;for(var R=S.length-8;R<S.length;++R)S[R]=x&255,x/=256;for(this.v(S),S=Array(16),x=0,R=0;R<4;++R)for(let M=0;M<32;M+=8)S[x++]=this.g[R]>>>M&255;return S};function c(S,x){var R=d;return Object.prototype.hasOwnProperty.call(R,S)?R[S]:R[S]=x(S)}function u(S,x){this.h=x;const R=[];let M=!0;for(let C=S.length-1;C>=0;C--){const O=S[C]|0;M&&O==x||(R[C]=O,M=!1)}this.g=R}var d={};function g(S){return-128<=S&&S<128?c(S,function(x){return new u([x|0],x<0?-1:0)}):new u([S|0],S<0?-1:0)}function p(S){if(isNaN(S)||!isFinite(S))return E;if(S<0)return k(p(-S));const x=[];let R=1;for(let M=0;S>=R;M++)x[M]=S/R|0,R*=4294967296;return new u(x,0)}function v(S,x){if(S.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(S.charAt(0)=="-")return k(v(S.substring(1),x));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=p(Math.pow(x,8));let M=E;for(let O=0;O<S.length;O+=8){var C=Math.min(8,S.length-O);const D=parseInt(S.substring(O,O+C),x);C<8?(C=p(Math.pow(x,C)),M=M.j(C).add(p(D))):(M=M.j(R),M=M.add(p(D)))}return M}var E=g(0),T=g(1),I=g(16777216);i=u.prototype,i.m=function(){if(H(this))return-k(this).m();let S=0,x=1;for(let R=0;R<this.g.length;R++){const M=this.i(R);S+=(M>=0?M:4294967296+M)*x,x*=4294967296}return S},i.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(P(this))return"0";if(H(this))return"-"+k(this).toString(S);const x=p(Math.pow(S,6));var R=this;let M="";for(;;){const C=he(R,x).g;R=j(R,C.j(x));let O=((R.g.length>0?R.g[0]:R.h)>>>0).toString(S);if(R=C,P(R))return O+M;for(;O.length<6;)O="0"+O;M=O+M}},i.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function P(S){if(S.h!=0)return!1;for(let x=0;x<S.g.length;x++)if(S.g[x]!=0)return!1;return!0}function H(S){return S.h==-1}i.l=function(S){return S=j(this,S),H(S)?-1:P(S)?0:1};function k(S){const x=S.g.length,R=[];for(let M=0;M<x;M++)R[M]=~S.g[M];return new u(R,~S.h).add(T)}i.abs=function(){return H(this)?k(this):this},i.add=function(S){const x=Math.max(this.g.length,S.g.length),R=[];let M=0;for(let C=0;C<=x;C++){let O=M+(this.i(C)&65535)+(S.i(C)&65535),D=(O>>>16)+(this.i(C)>>>16)+(S.i(C)>>>16);M=D>>>16,O&=65535,D&=65535,R[C]=D<<16|O}return new u(R,R[R.length-1]&-2147483648?-1:0)};function j(S,x){return S.add(k(x))}i.j=function(S){if(P(this)||P(S))return E;if(H(this))return H(S)?k(this).j(k(S)):k(k(this).j(S));if(H(S))return k(this.j(k(S)));if(this.l(I)<0&&S.l(I)<0)return p(this.m()*S.m());const x=this.g.length+S.g.length,R=[];for(var M=0;M<2*x;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(let C=0;C<S.g.length;C++){const O=this.i(M)>>>16,D=this.i(M)&65535,Ee=S.i(C)>>>16,ge=S.i(C)&65535;R[2*M+2*C]+=D*ge,Q(R,2*M+2*C),R[2*M+2*C+1]+=O*ge,Q(R,2*M+2*C+1),R[2*M+2*C+1]+=D*Ee,Q(R,2*M+2*C+1),R[2*M+2*C+2]+=O*Ee,Q(R,2*M+2*C+2)}for(S=0;S<x;S++)R[S]=R[2*S+1]<<16|R[2*S];for(S=x;S<2*x;S++)R[S]=0;return new u(R,0)};function Q(S,x){for(;(S[x]&65535)!=S[x];)S[x+1]+=S[x]>>>16,S[x]&=65535,x++}function G(S,x){this.g=S,this.h=x}function he(S,x){if(P(x))throw Error("division by zero");if(P(S))return new G(E,E);if(H(S))return x=he(k(S),x),new G(k(x.g),k(x.h));if(H(x))return x=he(S,k(x)),new G(k(x.g),x.h);if(S.g.length>30){if(H(S)||H(x))throw Error("slowDivide_ only works with positive integers.");for(var R=T,M=x;M.l(S)<=0;)R=F(R),M=F(M);var C=U(R,1),O=U(M,1);for(M=U(M,2),R=U(R,2);!P(M);){var D=O.add(M);D.l(S)<=0&&(C=C.add(R),O=D),M=U(M,1),R=U(R,1)}return x=j(S,C.j(x)),new G(C,x)}for(C=E;S.l(x)>=0;){for(R=Math.max(1,Math.floor(S.m()/x.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),O=p(R),D=O.j(x);H(D)||D.l(S)>0;)R-=M,O=p(R),D=O.j(x);P(O)&&(O=T),C=C.add(O),S=j(S,D)}return new G(C,S)}i.B=function(S){return he(this,S).h},i.and=function(S){const x=Math.max(this.g.length,S.g.length),R=[];for(let M=0;M<x;M++)R[M]=this.i(M)&S.i(M);return new u(R,this.h&S.h)},i.or=function(S){const x=Math.max(this.g.length,S.g.length),R=[];for(let M=0;M<x;M++)R[M]=this.i(M)|S.i(M);return new u(R,this.h|S.h)},i.xor=function(S){const x=Math.max(this.g.length,S.g.length),R=[];for(let M=0;M<x;M++)R[M]=this.i(M)^S.i(M);return new u(R,this.h^S.h)};function F(S){const x=S.g.length+1,R=[];for(let M=0;M<x;M++)R[M]=S.i(M)<<1|S.i(M-1)>>>31;return new u(R,S.h)}function U(S,x){const R=x>>5;x%=32;const M=S.g.length-R,C=[];for(let O=0;O<M;O++)C[O]=x>0?S.i(O+R)>>>x|S.i(O+R+1)<<32-x:S.i(O+R);return new u(C,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,SE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=v,ea=u}).apply(typeof gb<"u"?gb:typeof self<"u"?self:typeof window<"u"?window:{});var Vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var AE,vc,RE,Gh,Bg,CE,NE,IE;(function(){var i,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vh=="object"&&Vh];for(var y=0;y<h.length;++y){var w=h[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function o(h,y){if(y)e:{var w=r;h=h.split(".");for(var N=0;N<h.length-1;N++){var X=h[N];if(!(X in w))break e;w=w[X]}h=h[h.length-1],N=w[h],y=y(N),y!=N&&y!=null&&e(w,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var w=[],N;for(N in y)Object.prototype.hasOwnProperty.call(y,N)&&w.push([N,y[N]]);return w}});var c=c||{},u=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,w){return h.call.apply(h.bind,arguments)}function p(h,y,w){return p=g,p.apply(null,arguments)}function v(h,y){var w=Array.prototype.slice.call(arguments,1);return function(){var N=w.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function E(h,y){function w(){}w.prototype=y.prototype,h.Z=y.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(N,X,ie){for(var be=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)be[qe-2]=arguments[qe];return y.prototype[X].apply(N,be)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function I(h){const y=h.length;if(y>0){const w=Array(y);for(let N=0;N<y;N++)w[N]=h[N];return w}return[]}function P(h,y){for(let N=1;N<arguments.length;N++){const X=arguments[N];var w=typeof X;if(w=w!="object"?w:X?Array.isArray(X)?"array":w:"null",w=="array"||w=="object"&&typeof X.length=="number"){w=h.length||0;const ie=X.length||0;h.length=w+ie;for(let be=0;be<ie;be++)h[w+be]=X[be]}else h.push(X)}}class H{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function k(h){u.setTimeout(()=>{throw h},0)}function j(){var h=S;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Q{constructor(){this.h=this.g=null}add(y,w){const N=G.get();N.set(y,w),this.h?this.h.next=N:this.g=N,this.h=N}}var G=new H(()=>new he,h=>h.reset());class he{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let F,U=!1,S=new Q,x=()=>{const h=Promise.resolve(void 0);F=()=>{h.then(R)}};function R(){for(var h;h=j();){try{h.h.call(h.g)}catch(w){k(w)}var y=G;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}U=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};u.addEventListener("test",w,y),u.removeEventListener("test",w,y)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function Ee(h,y){C.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(Ee,C),Ee.prototype.init=function(h,y){const w=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(w=="mouseover"?y=h.fromElement:w=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ee.Z.h.call(this)},Ee.prototype.h=function(){Ee.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ge="closure_listenable_"+(Math.random()*1e6|0),q=0;function se(h,y,w,N,X){this.listener=h,this.proxy=null,this.src=y,this.type=w,this.capture=!!N,this.ha=X,this.key=++q,this.da=this.fa=!1}function re(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function pe(h,y,w){for(const N in h)y.call(w,h[N],N,h)}function ve(h,y){for(const w in h)y.call(void 0,h[w],w,h)}function V(h){const y={};for(const w in h)y[w]=h[w];return y}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(h,y){let w,N;for(let X=1;X<arguments.length;X++){N=arguments[X];for(w in N)h[w]=N[w];for(let ie=0;ie<$.length;ie++)w=$[ie],Object.prototype.hasOwnProperty.call(N,w)&&(h[w]=N[w])}}function ce(h){this.src=h,this.g={},this.h=0}ce.prototype.add=function(h,y,w,N,X){const ie=h.toString();h=this.g[ie],h||(h=this.g[ie]=[],this.h++);const be=we(h,y,N,X);return be>-1?(y=h[be],w||(y.fa=!1)):(y=new se(y,this.src,ie,!!N,X),y.fa=w,h.push(y)),y};function _e(h,y){const w=y.type;if(w in h.g){var N=h.g[w],X=Array.prototype.indexOf.call(N,y,void 0),ie;(ie=X>=0)&&Array.prototype.splice.call(N,X,1),ie&&(re(y),h.g[w].length==0&&(delete h.g[w],h.h--))}}function we(h,y,w,N){for(let X=0;X<h.length;++X){const ie=h[X];if(!ie.da&&ie.listener==y&&ie.capture==!!w&&ie.ha==N)return X}return-1}var Oe="closure_lm_"+(Math.random()*1e6|0),ht={};function ft(h,y,w,N,X){if(Array.isArray(y)){for(let ie=0;ie<y.length;ie++)ft(h,y[ie],w,N,X);return null}return w=Hi(w),h&&h[ge]?h.J(y,w,d(N)?!!N.capture:!1,X):$t(h,y,w,!1,N,X)}function $t(h,y,w,N,X,ie){if(!y)throw Error("Invalid event type");const be=d(X)?!!X.capture:!!X;let qe=Un(h);if(qe||(h[Oe]=qe=new ce(h)),w=qe.add(y,w,N,be,ie),w.proxy)return w;if(N=xi(),w.proxy=N,N.src=h,N.listener=w,h.addEventListener)O||(X=be),X===void 0&&(X=!1),h.addEventListener(y.toString(),N,X);else if(h.attachEvent)h.attachEvent(en(y.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return w}function xi(){function h(w){return y.call(h.src,h.listener,w)}const y=fi;return h}function Ln(h,y,w,N,X){if(Array.isArray(y))for(var ie=0;ie<y.length;ie++)Ln(h,y[ie],w,N,X);else N=d(N)?!!N.capture:!!N,w=Hi(w),h&&h[ge]?(h=h.i,ie=String(y).toString(),ie in h.g&&(y=h.g[ie],w=we(y,w,N,X),w>-1&&(re(y[w]),Array.prototype.splice.call(y,w,1),y.length==0&&(delete h.g[ie],h.h--)))):h&&(h=Un(h))&&(y=h.g[y.toString()],h=-1,y&&(h=we(y,w,N,X)),(w=h>-1?y[h]:null)&&qi(w))}function qi(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[ge])_e(y.i,h);else{var w=h.type,N=h.proxy;y.removeEventListener?y.removeEventListener(w,N,h.capture):y.detachEvent?y.detachEvent(en(w),N):y.addListener&&y.removeListener&&y.removeListener(N),(w=Un(y))?(_e(w,h),w.h==0&&(w.src=null,y[Oe]=null)):re(h)}}}function en(h){return h in ht?ht[h]:ht[h]="on"+h}function fi(h,y){if(h.da)h=!0;else{y=new Ee(y,this);const w=h.listener,N=h.ha||h.src;h.fa&&qi(h),h=w.call(N,y)}return h}function Un(h){return h=h[Oe],h instanceof ce?h:null}var os="__closure_events_fn_"+(Math.random()*1e9>>>0);function Hi(h){return typeof h=="function"?h:(h[os]||(h[os]=function(y){return h.handleEvent(y)}),h[os])}function St(){M.call(this),this.i=new ce(this),this.M=this,this.G=null}E(St,M),St.prototype[ge]=!0,St.prototype.removeEventListener=function(h,y,w,N){Ln(this,h,y,w,N)};function dt(h,y){var w,N=h.G;if(N)for(w=[];N;N=N.G)w.push(N);if(h=h.M,N=y.type||y,typeof y=="string")y=new C(y,h);else if(y instanceof C)y.target=y.target||h;else{var X=y;y=new C(N,h),oe(y,X)}X=!0;let ie,be;if(w)for(be=w.length-1;be>=0;be--)ie=y.g=w[be],X=$n(ie,N,!0,y)&&X;if(ie=y.g=h,X=$n(ie,N,!0,y)&&X,X=$n(ie,N,!1,y)&&X,w)for(be=0;be<w.length;be++)ie=y.g=w[be],X=$n(ie,N,!1,y)&&X}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const w=h.g[y];for(let N=0;N<w.length;N++)re(w[N]);delete h.g[y],h.h--}}this.G=null},St.prototype.J=function(h,y,w,N){return this.i.add(String(h),y,!1,w,N)},St.prototype.K=function(h,y,w,N){return this.i.add(String(h),y,!0,w,N)};function $n(h,y,w,N){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let X=!0;for(let ie=0;ie<y.length;++ie){const be=y[ie];if(be&&!be.da&&be.capture==w){const qe=be.listener,Xt=be.ha||be.src;be.fa&&_e(h.i,be),X=qe.call(Xt,N)!==!1&&X}}return X&&!N.defaultPrevented}function ls(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:u.setTimeout(h,y||0)}function cs(h){h.g=ls(()=>{h.g=null,h.i&&(h.i=!1,cs(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class tn extends M{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:cs(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fi(h){M.call(this),this.h=h,this.g={}}E(Fi,M);var Cs=[];function Kn(h){pe(h.g,function(y,w){this.g.hasOwnProperty(w)&&qi(y)},h),h.g={}}Fi.prototype.N=function(){Fi.Z.N.call(this),Kn(this)},Fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cn=u.JSON.stringify,Gi=u.JSON.parse,Ns=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function Qn(){}function Is(){}var Yn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kt(){C.call(this,"d")}E(Kt,C);function bn(){C.call(this,"c")}E(bn,C);var At={},Ds=null;function $i(){return Ds=Ds||new St}At.Ia="serverreachability";function ar(h){C.call(this,At.Ia,h)}E(ar,C);function ni(h){const y=$i();dt(y,new ar(y))}At.STAT_EVENT="statevent";function Ki(h,y){C.call(this,At.STAT_EVENT,h),this.stat=y}E(Ki,C);function Ge(h){const y=$i();dt(y,new Ki(y,h))}At.Ja="timingevent";function Rt(h,y){C.call(this,At.Ja,h),this.size=y}E(Rt,C);function Ct(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},y)}function Bt(){this.g=!0}Bt.prototype.ua=function(){this.g=!1};function En(h,y,w,N,X,ie){h.info(function(){if(h.g)if(ie){var be="",qe=ie.split("&");for(let ct=0;ct<qe.length;ct++){var Xt=qe[ct].split("=");if(Xt.length>1){const Mt=Xt[0];Xt=Xt[1];const ki=Mt.split("_");be=ki.length>=2&&ki[1]=="type"?be+(Mt+"="+Xt+"&"):be+(Mt+"=redacted&")}}}else be=null;else be=ie;return"XMLHTTP REQ ("+N+") [attempt "+X+"]: "+y+`
`+w+`
`+be})}function nn(h,y,w,N,X,ie,be){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+X+"]: "+y+`
`+w+`
`+ie+" "+be})}function Lt(h,y,w,N){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+pt(h,w)+(N?" "+N:"")})}function te(h,y){h.info(function(){return"TIMEOUT: "+y})}Bt.prototype.info=function(){};function pt(h,y){if(!h.g)return y;if(!y)return null;try{const ie=JSON.parse(y);if(ie){for(h=0;h<ie.length;h++)if(Array.isArray(ie[h])){var w=ie[h];if(!(w.length<2)){var N=w[1];if(Array.isArray(N)&&!(N.length<1)){var X=N[0];if(X!="noop"&&X!="stop"&&X!="close")for(let be=1;be<N.length;be++)N[be]=""}}}}return Cn(ie)}catch{return y}}var yt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Qt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ye;function mn(){}E(mn,Qn),mn.prototype.g=function(){return new XMLHttpRequest},ye=new mn;function st(h){return encodeURIComponent(String(h))}function Ot(h){var y=1;h=h.split(":");const w=[];for(;y>0&&h.length;)w.push(h.shift()),y--;return h.length&&w.push(h.join(":")),w}function gn(h,y,w,N){this.j=h,this.i=y,this.l=w,this.S=N||1,this.V=new Fi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new vt}function vt(){this.i=null,this.g="",this.h=!1}var Ut={},Yt={};function Ae(h,y,w){h.M=1,h.A=Ni(Z(y)),h.u=w,h.R=!0,or(h,null)}function or(h,y){h.F=Date.now(),Si(h),h.B=Z(h.A);var w=h.B,N=h.S;Array.isArray(N)||(N=[String(N)]),ao(w.i,"t",N),h.C=0,w=h.j.L,h.h=new vt,h.g=Cu(h.j,w?y:null,!h.u),h.P>0&&(h.O=new tn(p(h.Y,h,h.g),h.P)),y=h.V,w=h.g,N=h.ba;var X="readystatechange";Array.isArray(X)||(X&&(Cs[0]=X.toString()),X=Cs);for(let ie=0;ie<X.length;ie++){const be=ft(w,X[ie],N||y.handleEvent,!1,y.h||y);if(!be)break;y.g[be.key]=be}y=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),ni(),En(h.i,h.v,h.B,h.l,h.S,h.u)}gn.prototype.ba=function(h){h=h.target;const y=this.O;y&&Xi(h)==3?y.j():this.Y(h)},gn.prototype.Y=function(h){try{if(h==this.g)e:{const qe=Xi(this.g),Xt=this.g.ya(),ct=this.g.ca();if(!(qe<3)&&(qe!=3||this.g&&(this.h.h||this.g.la()||Nn(this.g)))){this.K||qe!=4||Xt==7||(Xt==8||ct<=0?ni(3):ni(2)),Ai(this);var y=this.g.ca();this.X=y;var w=io(this);if(this.o=y==200,nn(this.i,this.v,this.B,this.l,this.S,qe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var N,X=this.g;if((N=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(N)){var ie=N;break t}}ie=null}if(h=ie)Lt(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ri(this,h);else{this.o=!1,this.m=3,Ge(12),zn(this),Xn(this);break e}}if(this.R){h=!0;let Mt;for(;!this.K&&this.C<w.length;)if(Mt=ma(this,w),Mt==Yt){qe==4&&(this.m=4,Ge(14),h=!1),Lt(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==Ut){this.m=4,Ge(15),Lt(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else Lt(this.i,this.l,Mt,null),Ri(this,Mt);if(so(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qe!=4||w.length!=0||this.h.h||(this.m=1,Ge(16),h=!1),this.o=this.o&&h,!h)Lt(this.i,this.l,w,"[Invalid Chunked Response]"),zn(this),Xn(this);else if(w.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),kl(be),be.P=!0,Ge(11))}}else Lt(this.i,this.l,w,null),Ri(this,w);qe==4&&zn(this),this.o&&!this.K&&(qe==4?xu(this.j,this):(this.o=!1,Si(this)))}else Os(this.g),y==400&&w.indexOf("Unknown SID")>0?(this.m=3,Ge(12)):(this.m=0,Ge(13)),zn(this),Xn(this)}}}catch{}};function io(h){if(!so(h))return h.g.la();const y=Nn(h.g);if(y==="")return"";let w="";const N=y.length,X=Xi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return zn(h),Xn(h),"";h.h.i=new u.TextDecoder}for(let ie=0;ie<N;ie++)h.h.h=!0,w+=h.h.i.decode(y[ie],{stream:!(X&&ie==N-1)});return y.length=0,h.h.g+=w,h.C=0,h.h.g}function so(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function ma(h,y){var w=h.C,N=y.indexOf(`
`,w);return N==-1?Yt:(w=Number(y.substring(w,N)),isNaN(w)?Ut:(N+=1,N+w>y.length?Yt:(y=y.slice(N,N+w),h.C=N+w,y)))}gn.prototype.cancel=function(){this.K=!0,zn(this)};function Si(h){h.T=Date.now()+h.H,lr(h,h.H)}function lr(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ct(p(h.aa,h),y)}function Ai(h){h.D&&(u.clearTimeout(h.D),h.D=null)}gn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(te(this.i,this.B),this.M!=2&&(ni(),Ge(17)),zn(this),this.m=2,Xn(this)):lr(this,this.T-h)};function Xn(h){h.j.I==0||h.K||xu(h.j,h)}function zn(h){Ai(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Kn(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Ri(h,y){try{var w=h.j;if(w.I!=0&&(w.g==h||Ci(w.h,h))){if(!h.L&&Ci(w.h,h)&&w.I==3){try{var N=w.Ba.g.parse(y)}catch{N=null}if(Array.isArray(N)&&N.length==3){var X=N;if(X[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)ho(w),yr(w);else break e;xa(w),Ge(18)}}else w.xa=X[1],0<w.xa-w.K&&X[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Ct(p(w.Va,w),6e3));ii(w.h)<=1&&w.ta&&(w.ta=void 0)}else gs(w,11)}else if((h.L||w.g==h)&&ho(w),!D(y))for(X=w.Ba.g.parse(y),y=0;y<X.length;y++){let ct=X[y];const Mt=ct[0];if(!(Mt<=w.K))if(w.K=Mt,ct=ct[1],w.I==2)if(ct[0]=="c"){w.M=ct[1],w.ba=ct[2];const ki=ct[3];ki!=null&&(w.ka=ki,w.j.info("VER="+w.ka));const ps=ct[4];ps!=null&&(w.za=ps,w.j.info("SVER="+w.za));const Wi=ct[5];Wi!=null&&typeof Wi=="number"&&Wi>0&&(N=1.5*Wi,w.O=N,w.j.info("backChannelRequestTimeoutMs_="+N)),N=w;const Ji=h.g;if(Ji){const Sa=Ji.g?Ji.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sa){var ie=N.h;ie.g||Sa.indexOf("spdy")==-1&&Sa.indexOf("quic")==-1&&Sa.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(pa(ie,ie.h),ie.h=null))}if(N.G){const fo=Ji.g?Ji.g.getResponseHeader("X-HTTP-Session-Id"):null;fo&&(N.wa=fo,$e(N.J,N.G,fo))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),N=w;var be=h;if(N.na=Ru(N,N.L?N.ba:null,N.W),be.L){ur(N.h,be);var qe=be,Xt=N.O;Xt&&(qe.H=Xt),qe.D&&(Ai(qe),Si(qe)),N.g=be}else wu(N);w.i.length>0&&ms(w)}else ct[0]!="stop"&&ct[0]!="close"||gs(w,7);else w.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?gs(w,7):Il(w):ct[0]!="noop"&&w.l&&w.l.qa(ct),w.A=0)}}ni(4)}catch{}}var qt=class{constructor(h,y){this.g=h,this.map=y}};function ga(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function cr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ii(h){return h.h?1:h.g?h.g.size:0}function Ci(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function pa(h,y){h.g?h.g.add(y):h.h=y}function ur(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}ga.prototype.cancel=function(){if(this.i=ya(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ya(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const w of h.g.values())y=y.concat(w.G);return y}return I(h.i)}var sn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Y(h,y){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const N=h[w].indexOf("=");let X,ie=null;N>=0?(X=h[w].substring(0,N),ie=h[w].substring(N+1)):X=h[w],y(X,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function ne(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof ne?(this.l=h.l,xe(this,h.j),this.o=h.o,this.g=h.g,Ie(this,h.u),this.h=h.h,tt(this,bu(h.i)),this.m=h.m):h&&(y=String(h).match(sn))?(this.l=!1,xe(this,y[1]||"",!0),this.o=us(y[2]||""),this.g=us(y[3]||"",!0),Ie(this,y[4]),this.h=us(y[5]||"",!0),tt(this,y[6]||"",!0),this.m=us(y[7]||"")):(this.l=!1,this.i=new fr(null,this.l))}ne.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(va(y,ro,!0),":");var w=this.g;return(w||y=="file")&&(h.push("//"),(y=this.o)&&h.push(va(y,ro,!0),"@"),h.push(st(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(va(w,w.charAt(0)=="/"?xl:yu,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",va(w,vu)),h.join("")},ne.prototype.resolve=function(h){const y=Z(this);let w=!!h.j;w?xe(y,h.j):w=!!h.o,w?y.o=h.o:w=!!h.g,w?y.g=h.g:w=h.u!=null;var N=h.h;if(w)Ie(y,h.u);else if(w=!!h.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var X=y.h.lastIndexOf("/");X!=-1&&(N=y.h.slice(0,X+1)+N)}if(X=N,X==".."||X==".")N="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){N=X.lastIndexOf("/",0)==0,X=X.split("/");const ie=[];for(let be=0;be<X.length;){const qe=X[be++];qe=="."?N&&be==X.length&&ie.push(""):qe==".."?((ie.length>1||ie.length==1&&ie[0]!="")&&ie.pop(),N&&be==X.length&&ie.push("")):(ie.push(qe),N=!0)}N=ie.join("/")}else N=X}return w?y.h=N:w=h.i.toString()!=="",w?tt(y,bu(h.i)):w=!!h.m,w&&(y.m=h.m),y};function Z(h){return new ne(h)}function xe(h,y,w){h.j=w?us(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ie(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function tt(h,y,w){y instanceof fr?(h.i=y,oo(h.i,h.l)):(w||(y=va(y,hr)),h.i=new fr(y,h.l))}function $e(h,y,w){h.i.set(y,w)}function Ni(h){return $e(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function us(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function va(h,y,w){return typeof h=="string"?(h=encodeURI(h).replace(y,si),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function si(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ro=/[#\/\?@]/g,yu=/[#\?:]/g,xl=/[#\?]/g,hr=/[#\?@]/g,vu=/#/g;function fr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function ri(h){h.g||(h.g=new Map,h.h=0,h.i&&Y(h.i,function(y,w){h.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}i=fr.prototype,i.add=function(h,y){ri(this),this.i=null,h=dr(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(y),this.h+=1,this};function _u(h,y){ri(h),y=dr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Sl(h,y){return ri(h),y=dr(h,y),h.g.has(y)}i.forEach=function(h,y){ri(this),this.g.forEach(function(w,N){w.forEach(function(X){h.call(y,X,N,this)},this)},this)};function Al(h,y){ri(h);let w=[];if(typeof y=="string")Sl(h,y)&&(w=w.concat(h.g.get(dr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)w=w.concat(h[y]);return w}i.set=function(h,y){return ri(this),this.i=null,h=dr(this,h),Sl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=Al(this,h),h.length>0?String(h[0]):y):y};function ao(h,y,w){_u(h,y),w.length>0&&(h.i=null,h.g.set(dr(h,y),I(w)),h.h+=w.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let N=0;N<y.length;N++){var w=y[N];const X=st(w);w=Al(this,w);for(let ie=0;ie<w.length;ie++){let be=X;w[ie]!==""&&(be+="="+st(w[ie])),h.push(be)}}return this.i=h.join("&")};function bu(h){const y=new fr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function dr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function oo(h,y){y&&!h.j&&(ri(h),h.i=null,h.g.forEach(function(w,N){const X=N.toLowerCase();N!=X&&(_u(this,N),ao(this,X,w))},h)),h.j=y}function Qi(h,y){const w=new Bt;if(u.Image){const N=new Image;N.onload=v(Ii,w,"TestLoadImage: loaded",!0,y,N),N.onerror=v(Ii,w,"TestLoadImage: error",!1,y,N),N.onabort=v(Ii,w,"TestLoadImage: abort",!1,y,N),N.ontimeout=v(Ii,w,"TestLoadImage: timeout",!1,y,N),u.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else y(!1)}function Rl(h,y){const w=new Bt,N=new AbortController,X=setTimeout(()=>{N.abort(),Ii(w,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:N.signal}).then(ie=>{clearTimeout(X),ie.ok?Ii(w,"TestPingServer: ok",!0,y):Ii(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(X),Ii(w,"TestPingServer: error",!1,y)})}function Ii(h,y,w,N,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),N(w)}catch{}}function mr(){this.g=new Ns}function hs(h){this.i=h.Sb||null,this.h=h.ab||!1}E(hs,Qn),hs.prototype.g=function(){return new _a(this.i,this.h)};function _a(h,y){St.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(_a,St),i=_a.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Yi(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||u).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gr(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Yi(this)),this.g&&(this.readyState=3,Yi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;lo(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function lo(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?gr(this):Yi(this),this.readyState==3&&lo(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,gr(this))},i.Na=function(h){this.g&&(this.response=h,gr(this))},i.ga=function(){this.g&&gr(this)};function gr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Yi(h)}i.setRequestHeader=function(h,y){this.A.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=y.next();return h.join(`\r
`)};function Yi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(_a.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Di(h){let y="";return pe(h,function(w,N){y+=N,y+=":",y+=w,y+=`\r
`}),y}function ba(h,y,w){e:{for(N in w){var N=!1;break e}N=!0}N||(w=Di(w),typeof h=="string"?w!=null&&st(w):$e(h,y,w))}function _t(h){St.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(_t,St);var fs=/^https?$/i,Cl=["POST","PUT"];i=_t.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,y,w,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ye.g(),this.g.onreadystatechange=T(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(ie){Ea(this,ie);return}if(h=w||"",w=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var X in N)w.set(X,N[X]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const ie of N.keys())w.set(ie,N.get(ie));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(w.keys()).find(ie=>ie.toLowerCase()=="content-type"),X=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(Cl,y,void 0)>=0)||N||X||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,be]of w)this.g.setRequestHeader(ie,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ie){Ea(this,ie)}};function Ea(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Nl(h),ks(h)}function Nl(h){h.A||(h.A=!0,dt(h,"complete"),dt(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,dt(this,"complete"),dt(this,"abort"),ks(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ks(this,!0)),_t.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?wa(this):this.Xa())},i.Xa=function(){wa(this)};function wa(h){if(h.h&&typeof c<"u"){if(h.v&&Xi(h)==4)setTimeout(h.Ca.bind(h),0);else if(dt(h,"readystatechange"),Xi(h)==4){h.h=!1;try{const ie=h.ca();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var N;if(N=ie===0){let be=String(h.D).match(sn)[1]||null;!be&&u.self&&u.self.location&&(be=u.self.location.protocol.slice(0,-1)),N=!fs.test(be?be.toLowerCase():"")}w=N}if(w)dt(h,"complete"),dt(h,"success");else{h.o=6;try{var X=Xi(h)>2?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.ca()+"]",Nl(h)}}finally{ks(h)}}}}function ks(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,y||dt(h,"ready");try{w.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Xi(h){return h.g?h.g.readyState:0}i.ca=function(){try{return Xi(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Gi(y)}};function Nn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Os(h){const y={};h=(h.g&&Xi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(D(h[N]))continue;var w=Ot(h[N]);const X=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ie=y[X]||[];y[X]=ie,ie.push(w)}ve(y,function(N){return N.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ds(h,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||y}function pr(h){this.za=0,this.i=[],this.j=new Bt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ds("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ds("baseRetryDelayMs",5e3,h),this.Za=ds("retryDelaySeedMs",1e4,h),this.Ta=ds("forwardChannelMaxRetries",2,h),this.va=ds("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ga(h&&h.concurrentRequestLimit),this.Ba=new mr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=pr.prototype,i.ka=8,i.I=1,i.connect=function(h,y,w,N){Ge(0),this.W=h,this.H=y||{},w&&N!==void 0&&(this.H.OSID=w,this.H.OAID=N),this.F=this.X,this.J=Ru(this,null,this.W),ms(this)};function Il(h){if(co(h),h.I==3){var y=h.V++,w=Z(h.J);if($e(w,"SID",h.M),$e(w,"RID",y),$e(w,"TYPE","terminate"),Ta(h,w),y=new gn(h,h.j,y),y.M=2,y.A=Ni(Z(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(y.A.toString(),"")}catch{}!w&&u.Image&&(new Image().src=y.A,w=!0),w||(y.g=Cu(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Si(y)}Au(h)}function yr(h){h.g&&(kl(h),h.g.cancel(),h.g=null)}function co(h){yr(h),h.v&&(u.clearTimeout(h.v),h.v=null),ho(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function ms(h){if(!cr(h.h)&&!h.m){h.m=!0;var y=h.Ea;F||x(),U||(F(),U=!0),S.add(y,h),h.D=0}}function uo(h,y){return ii(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ct(p(h.Ea,h,y),Su(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const X=new gn(this,this.j,h);let ie=this.o;if(this.U&&(ie?(ie=V(ie),oe(ie,this.U)):ie=this.U),this.u!==null||this.R||(X.J=ie,ie=null),this.S)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var N=this.i[w];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(y+=N,y>4096){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=Eu(this,X,y),w=Z(this.J),$e(w,"RID",h),$e(w,"CVER",22),this.G&&$e(w,"X-HTTP-Session-Id",this.G),Ta(this,w),ie&&(this.R?y="headers="+st(Di(ie))+"&"+y:this.u&&ba(w,this.u,ie)),pa(this.h,X),this.Ra&&$e(w,"TYPE","init"),this.S?($e(w,"$req",y),$e(w,"SID","null"),X.U=!0,Ae(X,w,null)):Ae(X,w,y),this.I=2}}else this.I==3&&(h?Dl(this,h):this.i.length==0||cr(this.h)||Dl(this))};function Dl(h,y){var w;y?w=y.l:w=h.V++;const N=Z(h.J);$e(N,"SID",h.M),$e(N,"RID",w),$e(N,"AID",h.K),Ta(h,N),h.u&&h.o&&ba(N,h.u,h.o),w=new gn(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Eu(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),pa(h.h,w),Ae(w,N,y)}function Ta(h,y){h.H&&pe(h.H,function(w,N){$e(y,N,w)}),h.l&&pe({},function(w,N){$e(y,N,w)})}function Eu(h,y,w){w=Math.min(h.i.length,w);const N=h.l?p(h.l.Ka,h.l,h):null;e:{var X=h.i;let qe=-1;for(;;){const Xt=["count="+w];qe==-1?w>0?(qe=X[0].g,Xt.push("ofs="+qe)):qe=0:Xt.push("ofs="+qe);let ct=!0;for(let Mt=0;Mt<w;Mt++){var ie=X[Mt].g;const ki=X[Mt].map;if(ie-=qe,ie<0)qe=Math.max(0,X[Mt].g-100),ct=!1;else try{ie="req"+ie+"_"||"";try{var be=ki instanceof Map?ki:Object.entries(ki);for(const[ps,Wi]of be){let Ji=Wi;d(Wi)&&(Ji=Cn(Wi)),Xt.push(ie+ps+"="+encodeURIComponent(Ji))}}catch(ps){throw Xt.push(ie+"type="+encodeURIComponent("_badmap")),ps}}catch{N&&N(ki)}}if(ct){be=Xt.join("&");break e}}be=void 0}return h=h.i.splice(0,w),y.G=h,be}function wu(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;F||x(),U||(F(),U=!0),S.add(y,h),h.A=0}}function xa(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ct(p(h.Da,h),Su(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,Tu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ct(p(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ge(10),yr(this),Tu(this))};function kl(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function Tu(h){h.g=new gn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Z(h.na);$e(y,"RID","rpc"),$e(y,"SID",h.M),$e(y,"AID",h.K),$e(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&$e(y,"TO",h.ia),$e(y,"TYPE","xmlhttp"),Ta(h,y),h.u&&h.o&&ba(y,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=Ni(Z(y)),w.u=null,w.R=!0,or(w,h)}i.Va=function(){this.C!=null&&(this.C=null,yr(this),xa(this),Ge(19))};function ho(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function xu(h,y){var w=null;if(h.g==y){ho(h),kl(h),h.g=null;var N=2}else if(Ci(h.h,y))w=y.G,ur(h.h,y),N=1;else return;if(h.I!=0){if(y.o)if(N==1){w=y.u?y.u.length:0,y=Date.now()-y.F;var X=h.D;N=$i(),dt(N,new Rt(N,w)),ms(h)}else wu(h);else if(X=y.m,X==3||X==0&&y.X>0||!(N==1&&uo(h,y)||N==2&&xa(h)))switch(w&&w.length>0&&(y=h.h,y.i=y.i.concat(w)),X){case 1:gs(h,5);break;case 4:gs(h,10);break;case 3:gs(h,6);break;default:gs(h,2)}}}function Su(h,y){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*y}function gs(h,y){if(h.j.info("Error code "+y),y==2){var w=p(h.bb,h),N=h.Ua;const X=!N;N=new ne(N||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||xe(N,"https"),Ni(N),X?Qi(N.toString(),w):Rl(N.toString(),w)}else Ge(2);h.I=0,h.l&&h.l.pa(y),Au(h),co(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ge(2)):(this.j.info("Failed to ping google.com"),Ge(1))};function Au(h){if(h.I=0,h.ja=[],h.l){const y=ya(h.h);(y.length!=0||h.i.length!=0)&&(P(h.ja,y),P(h.ja,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.oa()}}function Ru(h,y,w){var N=w instanceof ne?Z(w):new ne(w);if(N.g!="")y&&(N.g=y+"."+N.g),Ie(N,N.u);else{var X=u.location;N=X.protocol,y=y?y+"."+X.hostname:X.hostname,X=+X.port;const ie=new ne(null);N&&xe(ie,N),y&&(ie.g=y),X&&Ie(ie,X),w&&(ie.h=w),N=ie}return w=h.G,y=h.wa,w&&y&&$e(N,w,y),$e(N,"VER",h.ka),Ta(h,N),N}function Cu(h,y,w){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new _t(new hs({ab:w})):new _t(h.ma),y.Fa(h.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nu(){}i=Nu.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function vr(){}vr.prototype.g=function(h,y){return new Wn(h,y)};function Wn(h,y){St.call(this),this.g=new pr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!D(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!D(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Ms(this)}E(Wn,St),Wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Wn.prototype.close=function(){Il(this.g)},Wn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=Cn(h),h=w);y.i.push(new qt(y.Ya++,h)),y.I==3&&ms(y)},Wn.prototype.N=function(){this.g.l=null,delete this.j,Il(this.g),delete this.g,Wn.Z.N.call(this)};function Iu(h){Kt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const w in y){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(Iu,Kt);function Du(){bn.call(this),this.status=1}E(Du,bn);function Ms(h){this.g=h}E(Ms,Nu),Ms.prototype.ra=function(){dt(this.g,"a")},Ms.prototype.qa=function(h){dt(this.g,new Iu(h))},Ms.prototype.pa=function(h){dt(this.g,new Du)},Ms.prototype.oa=function(){dt(this.g,"b")},vr.prototype.createWebChannel=vr.prototype.g,Wn.prototype.send=Wn.prototype.o,Wn.prototype.open=Wn.prototype.m,Wn.prototype.close=Wn.prototype.close,IE=function(){return new vr},NE=function(){return $i()},CE=At,Bg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},yt.NO_ERROR=0,yt.TIMEOUT=8,yt.HTTP_ERROR=6,Gh=yt,Qt.COMPLETE="complete",RE=Qt,Is.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",St.prototype.listen=St.prototype.J,vc=Is,_t.prototype.listenOnce=_t.prototype.K,_t.prototype.getLastError=_t.prototype.Ha,_t.prototype.getLastErrorCode=_t.prototype.ya,_t.prototype.getStatus=_t.prototype.ca,_t.prototype.getResponseJson=_t.prototype.La,_t.prototype.getResponseText=_t.prototype.la,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Fa,AE=_t}).apply(typeof Vh<"u"?Vh:typeof self<"u"?self:typeof window<"u"?window:{});const pb="@firebase/firestore",yb="4.9.3";class Fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fn.UNAUTHENTICATED=new Fn(null),Fn.GOOGLE_CREDENTIALS=new Fn("google-credentials-uid"),Fn.FIRST_PARTY=new Fn("first-party-uid"),Fn.MOCK_USER=new Fn("mock-user");let gl="12.7.0";const Xa=new _p("@firebase/firestore");function Ho(){return Xa.logLevel}function Se(i,...e){if(Xa.logLevel<=We.DEBUG){const t=e.map(wp);Xa.debug(`Firestore (${gl}): ${i}`,...t)}}function er(i,...e){if(Xa.logLevel<=We.ERROR){const t=e.map(wp);Xa.error(`Firestore (${gl}): ${i}`,...t)}}function sl(i,...e){if(Xa.logLevel<=We.WARN){const t=e.map(wp);Xa.warn(`Firestore (${gl}): ${i}`,...t)}}function wp(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}function Me(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,DE(i,r,t)}function DE(i,e,t){let r=`FIRESTORE (${gl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw er(r),new Error(r)}function at(i,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,i||DE(e,o,r)}function ze(i,e){return i}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends rr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ta{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class kE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Fn.UNAUTHENTICATED)))}shutdown(){}}class hR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class fR{constructor(e){this.t=e,this.currentUser=Fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){at(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let c=new ta;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ta,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},d=g=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ta)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(at(typeof r.accessToken=="string",31837,{l:r}),new kE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string",2055,{h:e}),new Fn(e)}}class dR{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class mR{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new dR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,is(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){at(this.o===void 0,3512);const r=c=>{c.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,Se("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const o=c=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new vb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(at(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function pR(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}class Tp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=pR(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<t&&(r+=e.charAt(o[c]%62))}return r}}function Je(i,e){return i<e?-1:i>e?1:0}function qg(i,e){const t=Math.min(i.length,e.length);for(let r=0;r<t;r++){const o=i.charAt(r),c=e.charAt(r);if(o!==c)return pg(o)===pg(c)?Je(o,c):pg(o)?1:-1}return Je(i.length,e.length)}const yR=55296,vR=57343;function pg(i){const e=i.charCodeAt(0);return e>=yR&&e<=vR}function rl(i,e,t){return i.length===e.length&&i.every(((r,o)=>t(r,e[o])))}const _b="__name__";class Es{constructor(e,t,r){t===void 0?t=0:t>e.length&&Me(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Me(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Es.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Es?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const c=Es.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return Je(e.length,t.length)}static compareSegments(e,t){const r=Es.isNumericId(e),o=Es.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?Es.extractNumericId(e).compare(Es.extractNumericId(t)):qg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ea.fromString(e.substring(4,e.length-2))}}class Tt extends Es{construct(e,t,r){return new Tt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new Tt(t)}static emptyPath(){return new Tt([])}}const _R=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pn extends Es{construct(e,t,r){return new Pn(e,t,r)}static isValidIdentifier(e){return _R.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_b}static keyField(){return new Pn([_b])}static fromServerFormat(e){const t=[];let r="",o=0;const c=()=>{if(r.length===0)throw new Te(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new Te(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Te(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(r+=d,o++):(c(),o++)}if(c(),u)throw new Te(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pn(t)}static emptyPath(){return new Pn([])}}class De{constructor(e){this.path=e}static fromPath(e){return new De(Tt.fromString(e))}static fromName(e){return new De(Tt.fromString(e).popFirst(5))}static empty(){return new De(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new Tt(e.slice()))}}function OE(i,e,t){if(!t)throw new Te(fe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function bR(i,e,t,r){if(e===!0&&r===!0)throw new Te(fe.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function bb(i){if(!De.isDocumentKey(i))throw new Te(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Eb(i){if(De.isDocumentKey(i))throw new Te(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ME(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function jf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Me(12329,{type:typeof i})}function Js(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Te(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jf(i);throw new Te(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function fn(i,e){const t={typeString:i};return e&&(t.value=e),t}function Zc(i,e){if(!ME(i))throw new Te(fe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const u=i[r];if(o&&typeof u!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&u!==c.value){t=`Expected '${r}' field to equal '${c.value}'`;break}}if(t)throw new Te(fe.INVALID_ARGUMENT,t);return!0}const wb=-62135596800,Tb=1e6;class kt{static now(){return kt.fromMillis(Date.now())}static fromDate(e){return kt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Tb);return new kt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<wb)throw new Te(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tb}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:kt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zc(e,kt._jsonSchema))return new kt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-wb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}kt._jsonSchemaVersion="firestore/timestamp/1.0",kt._jsonSchema={type:fn("string",kt._jsonSchemaVersion),seconds:fn("number"),nanoseconds:fn("number")};class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new kt(0,0))}static max(){return new Pe(new kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const zc=-1;function ER(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Pe.fromTimestamp(r===1e9?new kt(t+1,0):new kt(t,r));return new ra(o,De.empty(),e)}function wR(i){return new ra(i.readTime,i.key,zc)}class ra{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ra(Pe.min(),De.empty(),zc)}static max(){return new ra(Pe.max(),De.empty(),zc)}}function TR(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=De.comparator(i.documentKey,e.documentKey),t!==0?t:Je(i.largestBatchId,e.largestBatchId))}const xR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function pl(i){if(i.code!==fe.FAILED_PRECONDITION||i.message!==xR)throw i;Se("LocalStore","Unexpectedly lost primary lease")}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me(((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):me.reject(t)}static resolve(e){return new me(((t,r)=>{t(e)}))}static reject(e){return new me(((t,r)=>{r(e)}))}static waitFor(e){return new me(((t,r)=>{let o=0,c=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++c,u&&c===o&&t()}),(g=>r(g)))})),u=!0,c===o&&t()}))}static or(e){let t=me.resolve(!1);for(const r of e)t=t.next((o=>o?me.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,c)=>{r.push(t.call(this,o,c))})),this.waitFor(r)}static mapArray(e,t){return new me(((r,o)=>{const c=e.length,u=new Array(c);let d=0;for(let g=0;g<c;g++){const p=g;t(e[p]).next((v=>{u[p]=v,++d,d===c&&r(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new me(((r,o)=>{const c=()=>{e()===!0?t().next((()=>{c()}),o):r()};c()}))}}function AR(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function yl(i){return i.name==="IndexedDbTransactionError"}class Lf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Lf.ce=-1;const xp=-1;function eu(i){return i==null}function cf(i){return i===0&&1/i==-1/0}function RR(i){return typeof i=="number"&&Number.isInteger(i)&&!cf(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const VE="";function CR(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=xb(e)),e=NR(i.get(t),e);return xb(e)}function NR(i,e){let t=e;const r=i.length;for(let o=0;o<r;o++){const c=i.charAt(o);switch(c){case"\0":t+="";break;case VE:t+="";break;default:t+=c}}return t}function xb(i){return i+VE+""}function Sb(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function fa(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function PE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class zt{constructor(e,t){this.comparator=e,this.root=t||Vn.EMPTY}insert(e,t){return new zt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vn.BLACK,null,null))}remove(e){return new zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ph(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ph(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ph(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ph(this.root,e,this.comparator,!0)}}class Ph{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vn{constructor(e,t,r,o,c){this.key=e,this.value=t,this.color=r??Vn.RED,this.left=o??Vn.EMPTY,this.right=c??Vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,c){return new Vn(e??this.key,t??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,r),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Vn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}Vn.EMPTY=null,Vn.RED=!0,Vn.BLACK=!1;Vn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,t,r,o,c){return this}insert(e,t,r){return new Vn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _n{constructor(e){this.comparator=e,this.data=new zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ab(this.data.getIterator())}getIteratorFrom(e){return new Ab(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new _n(this.comparator);return t.data=e,t}}class Ab{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class wi{constructor(e){this.fields=e,e.sort(Pn.comparator)}static empty(){return new wi([])}unionWith(e){let t=new _n(Pn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new wi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class jE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class jn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new jE("Invalid base64 string: "+c):c}})(e);return new jn(t)}static fromUint8Array(e){const t=(function(o){let c="";for(let u=0;u<o.length;++u)c+=String.fromCharCode(o[u]);return c})(e);return new jn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jn.EMPTY_BYTE_STRING=new jn("");const IR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function aa(i){if(at(!!i,39018),typeof i=="string"){let e=0;const t=IR.exec(i);if(at(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Zt(i.seconds),nanos:Zt(i.nanos)}}function Zt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function oa(i){return typeof i=="string"?jn.fromBase64String(i):jn.fromUint8Array(i)}const LE="server_timestamp",UE="__type__",zE="__previous_value__",BE="__local_write_time__";function Sp(i){return(i?.mapValue?.fields||{})[UE]?.stringValue===LE}function Uf(i){const e=i.mapValue.fields[zE];return Sp(e)?Uf(e):e}function Bc(i){const e=aa(i.mapValue.fields[BE].timestampValue);return new kt(e.seconds,e.nanos)}class DR{constructor(e,t,r,o,c,u,d,g,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=v}}const uf="(default)";class qc{constructor(e,t){this.projectId=e,this.database=t||uf}static empty(){return new qc("","")}get isDefaultDatabase(){return this.database===uf}isEqual(e){return e instanceof qc&&e.projectId===this.projectId&&e.database===this.database}}const qE="__type__",kR="__max__",jh={mapValue:{}},HE="__vector__",hf="value";function la(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Sp(i)?4:MR(i)?9007199254740991:OR(i)?10:11:Me(28295,{value:i})}function Rs(i,e){if(i===e)return!0;const t=la(i);if(t!==la(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Bc(i).isEqual(Bc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const u=aa(o.timestampValue),d=aa(c.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return oa(o.bytesValue).isEqual(oa(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return Zt(o.geoPointValue.latitude)===Zt(c.geoPointValue.latitude)&&Zt(o.geoPointValue.longitude)===Zt(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Zt(o.integerValue)===Zt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const u=Zt(o.doubleValue),d=Zt(c.doubleValue);return u===d?cf(u)===cf(d):isNaN(u)&&isNaN(d)}return!1})(i,e);case 9:return rl(i.arrayValue.values||[],e.arrayValue.values||[],Rs);case 10:case 11:return(function(o,c){const u=o.mapValue.fields||{},d=c.mapValue.fields||{};if(Sb(u)!==Sb(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(d[g]===void 0||!Rs(u[g],d[g])))return!1;return!0})(i,e);default:return Me(52216,{left:i})}}function Hc(i,e){return(i.values||[]).find((t=>Rs(t,e)))!==void 0}function al(i,e){if(i===e)return 0;const t=la(i),r=la(e);if(t!==r)return Je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(i.booleanValue,e.booleanValue);case 2:return(function(c,u){const d=Zt(c.integerValue||c.doubleValue),g=Zt(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(i,e);case 3:return Rb(i.timestampValue,e.timestampValue);case 4:return Rb(Bc(i),Bc(e));case 5:return qg(i.stringValue,e.stringValue);case 6:return(function(c,u){const d=oa(c),g=oa(u);return d.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(c,u){const d=c.split("/"),g=u.split("/");for(let p=0;p<d.length&&p<g.length;p++){const v=Je(d[p],g[p]);if(v!==0)return v}return Je(d.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,u){const d=Je(Zt(c.latitude),Zt(u.latitude));return d!==0?d:Je(Zt(c.longitude),Zt(u.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Cb(i.arrayValue,e.arrayValue);case 10:return(function(c,u){const d=c.fields||{},g=u.fields||{},p=d[hf]?.arrayValue,v=g[hf]?.arrayValue,E=Je(p?.values?.length||0,v?.values?.length||0);return E!==0?E:Cb(p,v)})(i.mapValue,e.mapValue);case 11:return(function(c,u){if(c===jh.mapValue&&u===jh.mapValue)return 0;if(c===jh.mapValue)return 1;if(u===jh.mapValue)return-1;const d=c.fields||{},g=Object.keys(d),p=u.fields||{},v=Object.keys(p);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const T=qg(g[E],v[E]);if(T!==0)return T;const I=al(d[g[E]],p[v[E]]);if(I!==0)return I}return Je(g.length,v.length)})(i.mapValue,e.mapValue);default:throw Me(23264,{he:t})}}function Rb(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Je(i,e);const t=aa(i),r=aa(e),o=Je(t.seconds,r.seconds);return o!==0?o:Je(t.nanos,r.nanos)}function Cb(i,e){const t=i.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const c=al(t[o],r[o]);if(c)return c}return Je(t.length,r.length)}function ol(i){return Hg(i)}function Hg(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=aa(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return oa(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return De.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",o=!0;for(const c of t.values||[])o?o=!1:r+=",",r+=Hg(c);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const u of r)c?c=!1:o+=",",o+=`${u}:${Hg(t.fields[u])}`;return o+"}"})(i.mapValue):Me(61005,{value:i})}function $h(i){switch(la(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uf(i);return e?16+$h(e):16;case 5:return 2*i.stringValue.length;case 6:return oa(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,c)=>o+$h(c)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return fa(r.fields,((c,u)=>{o+=c.length+$h(u)})),o})(i.mapValue);default:throw Me(13486,{value:i})}}function Nb(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Fg(i){return!!i&&"integerValue"in i}function Ap(i){return!!i&&"arrayValue"in i}function Ib(i){return!!i&&"nullValue"in i}function Db(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Kh(i){return!!i&&"mapValue"in i}function OR(i){return(i?.mapValue?.fields||{})[qE]?.stringValue===HE}function Rc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return fa(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Rc(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rc(i.arrayValue.values[t]);return e}return{...i}}function MR(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===kR}class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Kh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rc(t)}setAll(e){let t=Pn.emptyPath(),r={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,r,o),r={},o=[],t=d.popLast()}u?r[d.lastSegment()]=Rc(u):o.push(d.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,r,o)}delete(e){const t=this.field(e.popLast());Kh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Rs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Kh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){fa(t,((o,c)=>e[o]=c));for(const o of r)delete e[o]}clone(){return new Zn(Rc(this.value))}}function FE(i){const e=[];return fa(i.fields,((t,r)=>{const o=new Pn([t]);if(Kh(r)){const c=FE(r.mapValue).fields;if(c.length===0)e.push(o);else for(const u of c)e.push(o.child(u))}else e.push(o)})),new wi(e)}class An{constructor(e,t,r,o,c,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=c,this.data=u,this.documentState=d}static newInvalidDocument(e){return new An(e,0,Pe.min(),Pe.min(),Pe.min(),Zn.empty(),0)}static newFoundDocument(e,t,r,o){return new An(e,1,t,Pe.min(),r,o,0)}static newNoDocument(e,t){return new An(e,2,t,Pe.min(),Pe.min(),Zn.empty(),0)}static newUnknownDocument(e,t){return new An(e,3,t,Pe.min(),Pe.min(),Zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ff{constructor(e,t){this.position=e,this.inclusive=t}}function kb(i,e,t){let r=0;for(let o=0;o<i.position.length;o++){const c=e[o],u=i.position[o];if(c.field.isKeyField()?r=De.comparator(De.fromName(u.referenceValue),t.key):r=al(u,t.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ob(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Rs(i.position[t],e.position[t]))return!1;return!0}class df{constructor(e,t="asc"){this.field=e,this.dir=t}}function VR(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class GE{}class hn extends GE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new jR(e,t,r):t==="array-contains"?new zR(e,r):t==="in"?new BR(e,r):t==="not-in"?new qR(e,r):t==="array-contains-any"?new HR(e,r):new hn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new LR(e,r):new UR(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(al(t,this.value)):t!==null&&la(this.value)===la(t)&&this.matchesComparison(al(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rs extends GE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new rs(e,t)}matches(e){return $E(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $E(i){return i.op==="and"}function KE(i){return PR(i)&&$E(i)}function PR(i){for(const e of i.filters)if(e instanceof rs)return!1;return!0}function Gg(i){if(i instanceof hn)return i.field.canonicalString()+i.op.toString()+ol(i.value);if(KE(i))return i.filters.map((e=>Gg(e))).join(",");{const e=i.filters.map((t=>Gg(t))).join(",");return`${i.op}(${e})`}}function QE(i,e){return i instanceof hn?(function(r,o){return o instanceof hn&&r.op===o.op&&r.field.isEqual(o.field)&&Rs(r.value,o.value)})(i,e):i instanceof rs?(function(r,o){return o instanceof rs&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((c,u,d)=>c&&QE(u,o.filters[d])),!0):!1})(i,e):void Me(19439)}function YE(i){return i instanceof hn?(function(t){return`${t.field.canonicalString()} ${t.op} ${ol(t.value)}`})(i):i instanceof rs?(function(t){return t.op.toString()+" {"+t.getFilters().map(YE).join(" ,")+"}"})(i):"Filter"}class jR extends hn{constructor(e,t,r){super(e,t,r),this.key=De.fromName(r.referenceValue)}matches(e){const t=De.comparator(e.key,this.key);return this.matchesComparison(t)}}class LR extends hn{constructor(e,t){super(e,"in",t),this.keys=XE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class UR extends hn{constructor(e,t){super(e,"not-in",t),this.keys=XE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function XE(i,e){return(e.arrayValue?.values||[]).map((t=>De.fromName(t.referenceValue)))}class zR extends hn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ap(t)&&Hc(t.arrayValue,this.value)}}class BR extends hn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Hc(this.value.arrayValue,t)}}class qR extends hn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Hc(this.value.arrayValue,t)}}class HR extends hn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ap(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Hc(this.value.arrayValue,r)))}}class FR{constructor(e,t=null,r=[],o=[],c=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=u,this.endAt=d,this.Te=null}}function Mb(i,e=null,t=[],r=[],o=null,c=null,u=null){return new FR(i,e,t,r,o,c,u)}function Rp(i){const e=ze(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Gg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),eu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>ol(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>ol(r))).join(",")),e.Te=t}return e.Te}function Cp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!VR(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!QE(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Ob(i.startAt,e.startAt)&&Ob(i.endAt,e.endAt)}function $g(i){return De.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class tu{constructor(e,t=null,r=[],o=[],c=null,u="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=u,this.startAt=d,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function GR(i,e,t,r,o,c,u,d){return new tu(i,e,t,r,o,c,u,d)}function Np(i){return new tu(i)}function Vb(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function WE(i){return i.collectionGroup!==null}function Cc(i){const e=ze(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new _n(Pn.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new df(c,r))})),t.has(Pn.keyField().canonicalString())||e.Ie.push(new df(Pn.keyField(),r))}return e.Ie}function ws(i){const e=ze(i);return e.Ee||(e.Ee=$R(e,Cc(i))),e.Ee}function $R(i,e){if(i.limitType==="F")return Mb(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new df(o.field,c)}));const t=i.endAt?new ff(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new ff(i.startAt.position,i.startAt.inclusive):null;return Mb(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function Kg(i,e){const t=i.filters.concat([e]);return new tu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Qg(i,e,t){return new tu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function zf(i,e){return Cp(ws(i),ws(e))&&i.limitType===e.limitType}function JE(i){return`${Rp(ws(i))}|lt:${i.limitType}`}function Fo(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>YE(o))).join(", ")}]`),eu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>ol(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>ol(o))).join(",")),`Target(${r})`})(ws(i))}; limitType=${i.limitType})`}function Bf(i,e){return e.isFoundDocument()&&(function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):De.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(i,e)&&(function(r,o){for(const c of Cc(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(u,d,g){const p=kb(u,d,g);return u.inclusive?p<=0:p<0})(r.startAt,Cc(r),o)||r.endAt&&!(function(u,d,g){const p=kb(u,d,g);return u.inclusive?p>=0:p>0})(r.endAt,Cc(r),o))})(i,e)}function KR(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function ZE(i){return(e,t)=>{let r=!1;for(const o of Cc(i)){const c=QR(o,e,t);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function QR(i,e,t){const r=i.field.isKeyField()?De.comparator(e.key,t.key):(function(c,u,d){const g=u.data.field(c),p=d.data.field(c);return g!==null&&p!==null?al(g,p):Me(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Me(19790,{direction:i.dir})}}class to{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){fa(this.inner,((t,r)=>{for(const[o,c]of r)e(o,c)}))}isEmpty(){return PE(this.inner)}size(){return this.innerSize}}const YR=new zt(De.comparator);function tr(){return YR}const ew=new zt(De.comparator);function _c(...i){let e=ew;for(const t of i)e=e.insert(t.key,t);return e}function tw(i){let e=ew;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ga(){return Nc()}function nw(){return Nc()}function Nc(){return new to((i=>i.toString()),((i,e)=>i.isEqual(e)))}const XR=new zt(De.comparator),WR=new _n(De.comparator);function et(...i){let e=WR;for(const t of i)e=e.add(t);return e}const JR=new _n(Je);function ZR(){return JR}function Ip(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cf(e)?"-0":e}}function iw(i){return{integerValue:""+i}}function eC(i,e){return RR(e)?iw(e):Ip(i,e)}class qf{constructor(){this._=void 0}}function tC(i,e,t){return i instanceof mf?(function(o,c){const u={fields:{[UE]:{stringValue:LE},[BE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Sp(c)&&(c=Uf(c)),c&&(u.fields[zE]=c),{mapValue:u}})(t,e):i instanceof Fc?rw(i,e):i instanceof Gc?aw(i,e):(function(o,c){const u=sw(o,c),d=Pb(u)+Pb(o.Ae);return Fg(u)&&Fg(o.Ae)?iw(d):Ip(o.serializer,d)})(i,e)}function nC(i,e,t){return i instanceof Fc?rw(i,e):i instanceof Gc?aw(i,e):t}function sw(i,e){return i instanceof gf?(function(r){return Fg(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class mf extends qf{}class Fc extends qf{constructor(e){super(),this.elements=e}}function rw(i,e){const t=ow(e);for(const r of i.elements)t.some((o=>Rs(o,r)))||t.push(r);return{arrayValue:{values:t}}}class Gc extends qf{constructor(e){super(),this.elements=e}}function aw(i,e){let t=ow(e);for(const r of i.elements)t=t.filter((o=>!Rs(o,r)));return{arrayValue:{values:t}}}class gf extends qf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Pb(i){return Zt(i.integerValue||i.doubleValue)}function ow(i){return Ap(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function iC(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof Fc&&o instanceof Fc||r instanceof Gc&&o instanceof Gc?rl(r.elements,o.elements,Rs):r instanceof gf&&o instanceof gf?Rs(r.Ae,o.Ae):r instanceof mf&&o instanceof mf})(i.transform,e.transform)}class sC{constructor(e,t){this.version=e,this.transformResults=t}}class ei{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ei}static exists(e){return new ei(void 0,e)}static updateTime(e){return new ei(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Hf{}function lw(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Dp(i.key,ei.none()):new nu(i.key,i.data,ei.none());{const t=i.data,r=Zn.empty();let o=new _n(Pn.comparator);for(let c of e.fields)if(!o.has(c)){let u=t.field(c);u===null&&c.length>1&&(c=c.popLast(),u=t.field(c)),u===null?r.delete(c):r.set(c,u),o=o.add(c)}return new da(i.key,r,new wi(o.toArray()),ei.none())}}function rC(i,e,t){i instanceof nu?(function(o,c,u){const d=o.value.clone(),g=Lb(o.fieldTransforms,c,u.transformResults);d.setAll(g),c.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(i,e,t):i instanceof da?(function(o,c,u){if(!Qh(o.precondition,c))return void c.convertToUnknownDocument(u.version);const d=Lb(o.fieldTransforms,c,u.transformResults),g=c.data;g.setAll(cw(o)),g.setAll(d),c.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(i,e,t):(function(o,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Ic(i,e,t,r){return i instanceof nu?(function(c,u,d,g){if(!Qh(c.precondition,u))return d;const p=c.value.clone(),v=Ub(c.fieldTransforms,g,u);return p.setAll(v),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(i,e,t,r):i instanceof da?(function(c,u,d,g){if(!Qh(c.precondition,u))return d;const p=Ub(c.fieldTransforms,g,u),v=u.data;return v.setAll(cw(c)),v.setAll(p),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((E=>E.field)))})(i,e,t,r):(function(c,u,d){return Qh(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(i,e,t)}function aC(i,e){let t=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),c=sw(r.transform,o||null);c!=null&&(t===null&&(t=Zn.empty()),t.set(r.field,c))}return t||null}function jb(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&rl(r,o,((c,u)=>iC(c,u)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class nu extends Hf{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class da extends Hf{constructor(e,t,r,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function cw(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function Lb(i,e,t){const r=new Map;at(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let o=0;o<t.length;o++){const c=i[o],u=c.transform,d=e.data.field(c.field);r.set(c.field,nC(u,d,t[o]))}return r}function Ub(i,e,t){const r=new Map;for(const o of i){const c=o.transform,u=t.data.field(o.field);r.set(o.field,tC(c,u,e))}return r}class Dp extends Hf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uw extends Hf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class oC{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&rC(c,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ic(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ic(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=nw();return this.mutations.forEach((o=>{const c=e.get(o.key),u=c.overlayedDocument;let d=this.applyToLocalView(u,c.mutatedFields);d=t.has(o.key)?null:d;const g=lw(u,d);g!==null&&r.set(o.key,g),u.isValidDocument()||u.convertToNoDocument(Pe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),et())}isEqual(e){return this.batchId===e.batchId&&rl(this.mutations,e.mutations,((t,r)=>jb(t,r)))&&rl(this.baseMutations,e.baseMutations,((t,r)=>jb(t,r)))}}class kp{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){at(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return XR})();const c=e.mutations;for(let u=0;u<c.length;u++)o=o.insert(c[u].key,r[u].version);return new kp(e,t,r,o)}}class lC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class cC{constructor(e,t){this.count=e,this.unchangedNames=t}}var un,rt;function hw(i){switch(i){case fe.OK:return Me(64938);case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return Me(15467,{code:i})}}function fw(i){if(i===void 0)return er("GRPC error has no .code"),fe.UNKNOWN;switch(i){case un.OK:return fe.OK;case un.CANCELLED:return fe.CANCELLED;case un.UNKNOWN:return fe.UNKNOWN;case un.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case un.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case un.INTERNAL:return fe.INTERNAL;case un.UNAVAILABLE:return fe.UNAVAILABLE;case un.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case un.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case un.NOT_FOUND:return fe.NOT_FOUND;case un.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case un.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case un.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case un.ABORTED:return fe.ABORTED;case un.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case un.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case un.DATA_LOSS:return fe.DATA_LOSS;default:return Me(39323,{code:i})}}(rt=un||(un={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";function uC(){return new TextEncoder}const hC=new ea([4294967295,4294967295],0);function zb(i){const e=uC().encode(i),t=new SE;return t.update(e),new Uint8Array(t.digest())}function Bb(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ea([t,r],0),new ea([o,c],0)]}class Op{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new bc(`Invalid padding: ${t}`);if(r<0)throw new bc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new bc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ea.fromNumber(this.ge)}ye(e,t,r){let o=e.add(t.multiply(ea.fromNumber(r)));return o.compare(hC)===1&&(o=new ea([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=zb(e),[r,o]=Bb(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(r,o,c);if(!this.we(u))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new Op(c,o,t);return r.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=zb(e),[r,o]=Bb(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(r,o,c);this.Se(u)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class bc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ff{constructor(e,t,r,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,iu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ff(Pe.min(),o,new zt(Je),tr(),et())}}class iu{constructor(e,t,r,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new iu(r,t,et(),et(),et())}}class Yh{constructor(e,t,r,o){this.be=e,this.removedTargetIds=t,this.key=r,this.De=o}}class dw{constructor(e,t){this.targetId=e,this.Ce=t}}class mw{constructor(e,t,r=jn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class qb{constructor(){this.ve=0,this.Fe=Hb(),this.Me=jn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=et(),t=et(),r=et();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Me(38017,{changeType:c})}})),new iu(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Hb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,at(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class fC{constructor(e){this.Ge=e,this.ze=new Map,this.je=tr(),this.Je=Lh(),this.He=Lh(),this.Ye=new zt(Je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Me(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,r=e.Ce.count,o=this.ot(t);if(o){const c=o.target;if($g(c))if(r===0){const u=new De(c.path);this.et(t,u,An.newNoDocument(u,Pe.min()))}else at(r===1,20013,{expectedCount:r});else{const u=this._t(t);if(u!==r){const d=this.ut(e),g=d?this.ct(d,e,u):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=t;let u,d;try{u=oa(r).toUint8Array()}catch(g){if(g instanceof jE)return sl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new Op(u,o,c)}catch(g){return sl(g instanceof bc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let o=0;return r.forEach((c=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(d)||(this.et(t,c,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((c,u)=>{const d=this.ot(u);if(d){if(c.current&&$g(d.target)){const g=new De(d.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,An.newNoDocument(g,e))}c.Be&&(t.set(u,c.ke()),c.qe())}}));let r=et();this.He.forEach(((c,u)=>{let d=!0;u.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const o=new Ff(e,t,this.Ye,this.je,r);return this.je=tr(),this.Je=Lh(),this.He=Lh(),this.Ye=new zt(Je),o}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new qb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new _n(Je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new _n(Je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Se("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new qb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Lh(){return new zt(De.comparator)}function Hb(){return new zt(De.comparator)}const dC={asc:"ASCENDING",desc:"DESCENDING"},mC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gC={and:"AND",or:"OR"};class pC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yg(i,e){return i.useProto3Json||eu(e)?e:{value:e}}function pf(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gw(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function yC(i,e){return pf(i,e.toTimestamp())}function Ti(i){return at(!!i,49232),Pe.fromTimestamp((function(t){const r=aa(t);return new kt(r.seconds,r.nanos)})(i))}function Mp(i,e){return Xg(i,e).canonicalString()}function Xg(i,e){const t=(function(o){return new Tt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?t:t.child(e)}function pw(i){const e=Tt.fromString(i);return at(ww(e),10190,{key:e.toString()}),e}function yf(i,e){return Mp(i.databaseId,e.path)}function Dc(i,e){const t=pw(e);if(t.get(1)!==i.databaseId.projectId)throw new Te(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Te(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new De(vw(t))}function yw(i,e){return Mp(i.databaseId,e)}function vC(i){const e=pw(i);return e.length===4?Tt.emptyPath():vw(e)}function Wg(i){return new Tt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function vw(i){return at(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Fb(i,e,t){return{name:yf(i,e),fields:t.value.mapValue.fields}}function _C(i,e){return"found"in e?(function(r,o){at(!!o.found,43571),o.found.name,o.found.updateTime;const c=Dc(r,o.found.name),u=Ti(o.found.updateTime),d=o.found.createTime?Ti(o.found.createTime):Pe.min(),g=new Zn({mapValue:{fields:o.found.fields}});return An.newFoundDocument(c,u,d,g)})(i,e):"missing"in e?(function(r,o){at(!!o.missing,3894),at(!!o.readTime,22933);const c=Dc(r,o.missing),u=Ti(o.readTime);return An.newNoDocument(c,u)})(i,e):Me(7234,{result:e})}function bC(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Me(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(p,v){return p.useProto3Json?(at(v===void 0||typeof v=="string",58123),jn.fromBase64String(v||"")):(at(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),jn.fromUint8Array(v||new Uint8Array))})(i,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(p){const v=p.code===void 0?fe.UNKNOWN:fw(p.code);return new Te(v,p.message||"")})(u);t=new mw(r,o,c,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Dc(i,r.document.name),c=Ti(r.document.updateTime),u=r.document.createTime?Ti(r.document.createTime):Pe.min(),d=new Zn({mapValue:{fields:r.document.fields}}),g=An.newFoundDocument(o,c,u,d),p=r.targetIds||[],v=r.removedTargetIds||[];t=new Yh(p,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Dc(i,r.document),c=r.readTime?Ti(r.readTime):Pe.min(),u=An.newNoDocument(o,c),d=r.removedTargetIds||[];t=new Yh([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Dc(i,r.document),c=r.removedTargetIds||[];t=new Yh([],c,o,null)}else{if(!("filter"in e))return Me(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,u=new cC(o,c),d=r.targetId;t=new dw(d,u)}}return t}function _w(i,e){let t;if(e instanceof nu)t={update:Fb(i,e.key,e.value)};else if(e instanceof Dp)t={delete:yf(i,e.key)};else if(e instanceof da)t={update:Fb(i,e.key,e.data),updateMask:NC(e.fieldMask)};else{if(!(e instanceof uw))return Me(16599,{Vt:e.type});t={verify:yf(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(c,u){const d=u.transform;if(d instanceof mf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Fc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Gc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof gf)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Me(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:yC(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Me(27497)})(i,e.precondition)),t}function EC(i,e){return i&&i.length>0?(at(e!==void 0,14353),i.map((t=>(function(o,c){let u=o.updateTime?Ti(o.updateTime):Ti(c);return u.isEqual(Pe.min())&&(u=Ti(c)),new sC(u,o.transformResults||[])})(t,e)))):[]}function wC(i,e){return{documents:[yw(i,e.path)]}}function TC(i,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=yw(i,o);const c=(function(p){if(p.length!==0)return Ew(rs.create(p,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const u=(function(p){if(p.length!==0)return p.map((v=>(function(T){return{field:Go(T.field),direction:AC(T.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Yg(i,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function xC(i){let e=vC(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){at(r===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let c=[];t.where&&(c=(function(E){const T=bw(E);return T instanceof rs&&KE(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((T=>(function(P){return new df($o(P.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(T)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let T;return T=typeof E=="object"?E.value:E,eu(T)?null:T})(t.limit));let g=null;t.startAt&&(g=(function(E){const T=!!E.before,I=E.values||[];return new ff(I,T)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const T=!E.before,I=E.values||[];return new ff(I,T)})(t.endAt)),GR(e,o,u,c,d,"F",g,p)}function SC(i,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function bw(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=$o(t.unaryFilter.field);return hn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=$o(t.unaryFilter.field);return hn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=$o(t.unaryFilter.field);return hn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=$o(t.unaryFilter.field);return hn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}})(i):i.fieldFilter!==void 0?(function(t){return hn.create($o(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return rs.create(t.compositeFilter.filters.map((r=>bw(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Me(1026)}})(t.compositeFilter.op))})(i):Me(30097,{filter:i})}function AC(i){return dC[i]}function RC(i){return mC[i]}function CC(i){return gC[i]}function Go(i){return{fieldPath:i.canonicalString()}}function $o(i){return Pn.fromServerFormat(i.fieldPath)}function Ew(i){return i instanceof hn?(function(t){if(t.op==="=="){if(Db(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NAN"}};if(Ib(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Db(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NOT_NAN"}};if(Ib(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Go(t.field),op:RC(t.op),value:t.value}}})(i):i instanceof rs?(function(t){const r=t.getFilters().map((o=>Ew(o)));return r.length===1?r[0]:{compositeFilter:{op:CC(t.op),filters:r}}})(i):Me(54877,{filter:i})}function NC(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function ww(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class Xr{constructor(e,t,r,o,c=Pe.min(),u=Pe.min(),d=jn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new Xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class IC{constructor(e){this.yt=e}}function DC(i){const e=xC({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Qg(e,e.limit,"L"):e}class kC{constructor(){this.Cn=new OC}addToCollectionParentIndex(e,t){return this.Cn.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(ra.min())}getMinOffsetFromCollectionGroup(e,t){return me.resolve(ra.min())}updateCollectionGroup(e,t,r){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class OC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new _n(Tt.comparator),c=!o.has(r);return this.index[t]=o.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new _n(Tt.comparator)).toArray()}}const Gb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Tw=41943040;class hi{static withCacheSize(e){return new hi(e,hi.DEFAULT_COLLECTION_PERCENTILE,hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}hi.DEFAULT_COLLECTION_PERCENTILE=10,hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hi.DEFAULT=new hi(Tw,hi.DEFAULT_COLLECTION_PERCENTILE,hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hi.DISABLED=new hi(-1,0,0);class ll{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ll(0)}static cr(){return new ll(-1)}}const $b="LruGarbageCollector",MC=1048576;function Kb([i,e],[t,r]){const o=Je(i,t);return o===0?Je(e,r):o}class VC{constructor(e){this.Ir=e,this.buffer=new _n(Kb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Kb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class PC{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Se($b,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){yl(t)?Se($b,"Ignoring IndexedDB error during garbage collection: ",t):await pl(t)}await this.Vr(3e5)}))}}class jC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return me.resolve(Lf.ce);const r=new VC(t);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(Gb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,o,c,u,d,g,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,u=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(r=E,d=Date.now(),this.removeTargets(e,r,t)))).next((E=>(c=E,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(p=Date.now(),Ho()<=We.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${c} targets in `+(g-d)+`ms
	Removed ${E} documents in `+(p-g)+`ms
Total Duration: ${p-v}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:E}))))}}function LC(i,e){return new jC(i,e)}class UC{constructor(){this.changes=new to((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?me.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class BC{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&Ic(r.mutation,o,wi.empty(),kt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,et()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=et()){const o=Ga();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((c=>{let u=_c();return c.forEach(((d,g)=>{u=u.insert(d,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=Ga();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,et())))}populateOverlays(e,t,r){const o=[];return r.forEach((c=>{t.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,r,o){let c=tr();const u=Nc(),d=(function(){return Nc()})();return t.forEach(((g,p)=>{const v=r.get(p.key);o.has(p.key)&&(v===void 0||v.mutation instanceof da)?c=c.insert(p.key,p):v!==void 0?(u.set(p.key,v.mutation.getFieldMask()),Ic(v.mutation,p,v.mutation.getFieldMask(),kt.now())):u.set(p.key,wi.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((p,v)=>u.set(p,v))),t.forEach(((p,v)=>d.set(p,new zC(v,u.get(p)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=Nc();let o=new zt(((u,d)=>u-d)),c=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let v=r.get(g)||wi.empty();v=d.applyToLocalView(p,v),r.set(g,v);const E=(o.get(d.batchId)||et()).add(g);o=o.insert(d.batchId,E)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),p=g.key,v=g.value,E=nw();v.forEach((T=>{if(!c.has(T)){const I=lw(t.get(T),r.get(T));I!==null&&E.set(T,I),c=c.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,E))}return me.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(u){return De.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):WE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((c=>{const u=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-c.size):me.resolve(Ga());let d=zc,g=c;return u.next((p=>me.forEach(p,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),c.get(v)?me.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{g=g.insert(v,T)}))))).next((()=>this.populateOverlays(e,p,c))).next((()=>this.computeViews(e,g,p,et()))).next((v=>({batchId:d,changes:tw(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new De(t)).next((r=>{let o=_c();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const c=t.collectionGroup;let u=_c();return this.indexManager.getCollectionParents(e,c).next((d=>me.forEach(d,(g=>{const p=(function(E,T){return new tu(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,p,r,o).next((v=>{v.forEach(((E,T)=>{u=u.insert(E,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,c,o)))).next((u=>{c.forEach(((g,p)=>{const v=p.getKey();u.get(v)===null&&(u=u.insert(v,An.newInvalidDocument(v)))}));let d=_c();return u.forEach(((g,p)=>{const v=c.get(g);v!==void 0&&Ic(v.mutation,p,wi.empty(),kt.now()),Bf(t,p)&&(d=d.insert(g,p))})),d}))}}class qC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return me.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Ti(o.createTime)}})(t)),me.resolve()}getNamedQuery(e,t){return me.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:DC(o.bundledQuery),readTime:Ti(o.readTime)}})(t)),me.resolve()}}class HC{constructor(){this.overlays=new zt(De.comparator),this.qr=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ga();return me.forEach(t,(o=>this.getOverlay(e,o).next((c=>{c!==null&&r.set(o,c)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,c)=>{this.St(e,t,c)})),me.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),me.resolve()}getOverlaysForCollection(e,t,r){const o=Ga(),c=t.length+1,u=new De(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const g=d.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===c&&g.largestBatchId>r&&o.set(g.getKey(),g)}return me.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let c=new zt(((p,v)=>p-v));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let v=c.get(p.largestBatchId);v===null&&(v=Ga(),c=c.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const d=Ga(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,v)=>d.set(p,v))),!(d.size()>=o)););return me.resolve(d)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new lC(t,r));let c=this.qr.get(t);c===void 0&&(c=et(),this.qr.set(t,c)),this.qr.set(t,c.add(r.key))}}class FC{constructor(){this.sessionToken=jn.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,me.resolve()}}class Vp{constructor(){this.Qr=new _n(xn.$r),this.Ur=new _n(xn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new xn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new xn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new De(new Tt([])),r=new xn(t,e),o=new xn(t,e+1),c=[];return this.Ur.forEachInRange([r,o],(u=>{this.Gr(u),c.push(u.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new De(new Tt([])),r=new xn(t,e),o=new xn(t,e+1);let c=et();return this.Ur.forEachInRange([r,o],(u=>{c=c.add(u.key)})),c}containsKey(e){const t=new xn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class xn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return De.comparator(e.key,t.key)||Je(e.Yr,t.Yr)}static Kr(e,t){return Je(e.Yr,t.Yr)||De.comparator(e.key,t.key)}}class GC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new _n(xn.$r)}checkEmpty(e){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new oC(c,t,r,o);this.mutationQueue.push(u);for(const d of o)this.Zr=this.Zr.add(new xn(d.key,c)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return me.resolve(u)}lookupMutationBatch(e,t){return me.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ei(r),c=o<0?0:o;return me.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?xp:this.tr-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new xn(t,0),o=new xn(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,o],(u=>{const d=this.Xr(u.Yr);c.push(d)})),me.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(Je);return t.forEach((o=>{const c=new xn(o,0),u=new xn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,u],(d=>{r=r.add(d.Yr)}))})),me.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let c=r;De.isDocumentKey(c)||(c=c.child(""));const u=new xn(new De(c),0);let d=new _n(Je);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(d=d.add(g.Yr)),!0)}),u),me.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){at(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return me.forEach(t.mutations,(o=>{const c=new xn(o.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new xn(t,0),o=this.Zr.firstAfterOrEqual(r);return me.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,me.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class $C{constructor(e){this.ri=e,this.docs=(function(){return new zt(De.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),c=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return me.resolve(r?r.document.mutableCopy():An.newInvalidDocument(t))}getEntries(e,t){let r=tr();return t.forEach((o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():An.newInvalidDocument(o))})),me.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let c=tr();const u=t.path,d=new De(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:p,value:{document:v}}=g.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||TR(wR(v),r)<=0||(o.has(v.key)||Bf(t,v))&&(c=c.insert(v.key,v.mutableCopy()))}return me.resolve(c)}getAllFromCollectionGroup(e,t,r,o){Me(9500)}ii(e,t){return me.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new KC(this)}getSize(e){return me.resolve(this.size)}}class KC extends UC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),me.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class QC{constructor(e){this.persistence=e,this.si=new to((t=>Rp(t)),Cp),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.oi=0,this._i=new Vp,this.targetCount=0,this.ai=ll.ur()}forEachTarget(e,t){return this.si.forEach(((r,o)=>t(o))),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),me.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ll(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Pr(t),me.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,r){let o=0;const c=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.si.delete(u),c.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),me.waitFor(c).next((()=>o))}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return me.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),me.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach((u=>{c.push(o.markPotentiallyOrphaned(e,u))})),me.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),me.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return me.resolve(r)}containsKey(e,t){return me.resolve(this._i.containsKey(t))}}class xw{constructor(e,t){this.ui={},this.overlays={},this.ci=new Lf(0),this.li=!1,this.li=!0,this.hi=new FC,this.referenceDelegate=e(this),this.Pi=new QC(this),this.indexManager=new kC,this.remoteDocumentCache=(function(o){return new $C(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new IC(t),this.Ii=new qC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new GC(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Se("MemoryPersistence","Starting transaction:",e);const o=new YC(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,t){return me.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class YC extends SR{constructor(e){super(),this.currentSequenceNumber=e}}class Pp{constructor(e){this.persistence=e,this.Ri=new Vp,this.Vi=null}static mi(e){return new Pp(e)}get fi(){if(this.Vi)return this.Vi;throw Me(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),me.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),me.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.fi,(r=>{const o=De.fromPath(r);return this.gi(e,o).next((c=>{c||t.removeEntry(o,Pe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return me.or([()=>me.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class vf{constructor(e,t){this.persistence=e,this.pi=new to((r=>CR(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=LC(this,t)}static mi(e,t){return new vf(e,t)}Ei(){}di(e){return me.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return me.forEach(this.pi,((r,o)=>this.br(e,r,o).next((c=>c?me.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((d=>{d||(r++,c.removeEntry(u,Pe.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),me.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),me.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),me.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),me.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=$h(e.data.value)),t}br(e,t,r){return me.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return me.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class jp{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=o}static As(e,t){let r=et(),o=et();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new jp(e,t.fromCache,r,o)}}class XC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class WC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return $A()?8:AR(Gn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,o){const c={result:null};return this.ys(e,t).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ws(e,t,o,r).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new XC;return this.Ss(e,t,u).next((d=>{if(c.result=d,this.Vs)return this.bs(e,t,u,d.size)}))})).next((()=>c.result))}bs(e,t,r,o){return r.documentReadCount<this.fs?(Ho()<=We.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",Fo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),me.resolve()):(Ho()<=We.DEBUG&&Se("QueryEngine","Query:",Fo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(Ho()<=We.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",Fo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ws(t))):me.resolve())}ys(e,t){if(Vb(t))return me.resolve(null);let r=ws(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Qg(t,null,"F"),r=ws(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const u=et(...c);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,r).next((g=>{const p=this.Ds(t,d);return this.Cs(t,p,u,g.readTime)?this.ys(e,Qg(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,r,o){return Vb(t)||o.isEqual(Pe.min())?me.resolve(null):this.ps.getDocuments(e,r).next((c=>{const u=this.Ds(t,c);return this.Cs(t,u,r,o)?me.resolve(null):(Ho()<=We.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Fo(t)),this.vs(e,u,t,ER(o,zc)).next((d=>d)))}))}Ds(e,t){let r=new _n(ZE(e));return t.forEach(((o,c)=>{Bf(e,c)&&(r=r.add(c))})),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,t,r){return Ho()<=We.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",Fo(t)),this.ps.getDocumentsMatchingQuery(e,t,ra.min(),r)}vs(e,t,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((c=>(t.forEach((u=>{c=c.insert(u.key,u)})),c)))}}const Lp="LocalStore",JC=3e8;class ZC{constructor(e,t,r,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new zt(Je),this.xs=new to((c=>Rp(c)),Cp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function eN(i,e,t,r){return new ZC(i,e,t,r)}async function Sw(i,e){const t=ze(i);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((c=>(o=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((c=>{const u=[],d=[];let g=et();for(const p of o){u.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}for(const p of c){d.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(r,g).next((p=>({Ls:p,removedBatchIds:u,addedBatchIds:d})))}))}))}function tN(i,e){const t=ze(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,g,p,v){const E=p.batch,T=E.keys();let I=me.resolve();return T.forEach((P=>{I=I.next((()=>v.getEntry(g,P))).next((H=>{const k=p.docVersions.get(P);at(k!==null,48541),H.version.compareTo(k)<0&&(E.applyToRemoteDocument(H,p),H.isValidDocument()&&(H.setReadTime(p.commitVersion),v.addEntry(H)))}))})),I.next((()=>d.mutationQueue.removeMutationBatch(g,E)))})(t,r,e,c).next((()=>c.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let g=et();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(g=g.add(d.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function Aw(i){const e=ze(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function nN(i,e){const t=ze(i),r=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((v,E)=>{const T=o.get(E);if(!T)return;d.push(t.Pi.removeMatchingKeys(c,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(c,v.addedDocuments,E))));let I=T.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(jn.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,r)),o=o.insert(E,I),(function(H,k,j){return H.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=JC?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(T,I,v)&&d.push(t.Pi.updateTargetData(c,I))}));let g=tr(),p=et();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(c,v))})),d.push(iN(c,u,e.documentUpdates).next((v=>{g=v.ks,p=v.qs}))),!r.isEqual(Pe.min())){const v=t.Pi.getLastRemoteSnapshotVersion(c).next((E=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));d.push(v)}return me.waitFor(d).next((()=>u.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,p))).next((()=>g))})).then((c=>(t.Ms=o,c)))}function iN(i,e,t){let r=et(),o=et();return t.forEach((c=>r=r.add(c))),e.getEntries(i,r).next((c=>{let u=tr();return t.forEach(((d,g)=>{const p=c.get(d);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(d)),g.isNoDocument()&&g.version.isEqual(Pe.min())?(e.removeEntry(d,g.readTime),u=u.insert(d,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),u=u.insert(d,g)):Se(Lp,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",g.version)})),{ks:u,qs:o}}))}function sN(i,e){const t=ze(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=xp),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function rN(i,e){const t=ze(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.Pi.getTargetData(r,e).next((c=>c?(o=c,me.resolve(o)):t.Pi.allocateTargetId(r).next((u=>(o=new Xr(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Jg(i,e,t){const r=ze(i),o=r.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",c,(u=>r.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!yl(u))throw u;Se(Lp,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function Qb(i,e,t){const r=ze(i);let o=Pe.min(),c=et();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,p,v){const E=ze(g),T=E.xs.get(v);return T!==void 0?me.resolve(E.Ms.get(T)):E.Pi.getTargetData(p,v)})(r,u,ws(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(u,d.targetId).next((g=>{c=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(u,e,t?o:Pe.min(),t?c:et()))).next((d=>(aN(r,KR(e),d),{documents:d,Qs:c})))))}function aN(i,e,t){let r=i.Os.get(e)||Pe.min();t.forEach(((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),i.Os.set(e,r)}class Yb{constructor(){this.activeTargetIds=ZR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oN{constructor(){this.Mo=new Yb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Yb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class lN{Oo(e){}shutdown(){}}const Xb="ConnectivityMonitor";class Wb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Se(Xb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Se(Xb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Uh=null;function Zg(){return Uh===null?Uh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uh++,"0x"+Uh.toString(16)}const yg="RestConnection",cN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class uN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===uf?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,t,r,o,c){const u=Zg(),d=this.zo(e,t.toUriEncodedString());Se(yg,`Sending RPC '${e}' ${u}:`,d,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:p}=new URL(d),v=dl(p);return this.Jo(e,d,g,r,v).then((E=>(Se(yg,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw sl(yg,`RPC '${e}' ${u} failed with error: `,E,"url: ",d,"request:",r),E}))}Ho(e,t,r,o,c,u){return this.Go(e,t,r,o,c)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+gl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,c)=>e[c]=o)),r&&r.headers.forEach(((o,c)=>e[c]=o))}zo(e,t){const r=cN[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class hN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const qn="WebChannelConnection";class fN extends uN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,c){const u=Zg();return new Promise(((d,g)=>{const p=new AE;p.setWithCredentials(!0),p.listenOnce(RE.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Gh.NO_ERROR:const E=p.getResponseJson();Se(qn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case Gh.TIMEOUT:Se(qn,`RPC '${e}' ${u} timed out`),g(new Te(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Gh.HTTP_ERROR:const T=p.getStatus();if(Se(qn,`RPC '${e}' ${u} failed with status:`,T,"response text:",p.getResponseText()),T>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const P=I?.error;if(P&&P.status&&P.message){const H=(function(j){const Q=j.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(Q)>=0?Q:fe.UNKNOWN})(P.status);g(new Te(H,P.message))}else g(new Te(fe.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new Te(fe.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Se(qn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);Se(qn,`RPC '${e}' ${u} sending request:`,o),p.send(t,"POST",v,r,15)}))}T_(e,t,r){const o=Zg(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=IE(),d=NE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const v=c.join("");Se(qn,`Creating RPC '${e}' stream ${o}: ${v}`,g);const E=u.createWebChannel(v,g);this.I_(E);let T=!1,I=!1;const P=new hN({Yo:k=>{I?Se(qn,`Not sending because RPC '${e}' stream ${o} is closed:`,k):(T||(Se(qn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),T=!0),Se(qn,`RPC '${e}' stream ${o} sending:`,k),E.send(k))},Zo:()=>E.close()}),H=(k,j,Q)=>{k.listen(j,(G=>{try{Q(G)}catch(he){setTimeout((()=>{throw he}),0)}}))};return H(E,vc.EventType.OPEN,(()=>{I||(Se(qn,`RPC '${e}' stream ${o} transport opened.`),P.o_())})),H(E,vc.EventType.CLOSE,(()=>{I||(I=!0,Se(qn,`RPC '${e}' stream ${o} transport closed`),P.a_(),this.E_(E))})),H(E,vc.EventType.ERROR,(k=>{I||(I=!0,sl(qn,`RPC '${e}' stream ${o} transport errored. Name:`,k.name,"Message:",k.message),P.a_(new Te(fe.UNAVAILABLE,"The operation could not be completed")))})),H(E,vc.EventType.MESSAGE,(k=>{if(!I){const j=k.data[0];at(!!j,16349);const Q=j,G=Q?.error||Q[0]?.error;if(G){Se(qn,`RPC '${e}' stream ${o} received error:`,G);const he=G.status;let F=(function(x){const R=un[x];if(R!==void 0)return fw(R)})(he),U=G.message;F===void 0&&(F=fe.INTERNAL,U="Unknown error status: "+he+" with message "+G.message),I=!0,P.a_(new Te(F,U)),E.close()}else Se(qn,`RPC '${e}' stream ${o} received:`,j),P.u_(j)}})),H(d,CE.STAT_EVENT,(k=>{k.stat===Bg.PROXY?Se(qn,`RPC '${e}' stream ${o} detected buffering proxy`):k.stat===Bg.NOPROXY&&Se(qn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{P.__()}),0),P}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function vg(){return typeof document<"u"?document:null}function Gf(i){return new pC(i,!0)}class Up{constructor(e,t,r=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-r);o>0&&Se("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Jb="PersistentStream";class Rw{constructor(e,t,r,o,c,u,d,g){this.Mi=e,this.S_=r,this.b_=o,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Up(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(er(t.toString()),er("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===t&&this.G_(r,o)}),(r=>{e((()=>{const o=new Te(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Se(Jb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Se(Jb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class dN extends Rw{constructor(e,t,r,o,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,u),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=bC(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Pe.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?Pe.min():u.readTime?Ti(u.readTime):Pe.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Wg(this.serializer),t.addTarget=(function(c,u){let d;const g=u.target;if(d=$g(g)?{documents:wC(c,g)}:{query:TC(c,g).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=gw(c,u.resumeToken);const p=Yg(c,u.expectedCount);p!==null&&(d.expectedCount=p)}else if(u.snapshotVersion.compareTo(Pe.min())>0){d.readTime=pf(c,u.snapshotVersion.toTimestamp());const p=Yg(c,u.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const r=SC(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Wg(this.serializer),t.removeTarget=e,this.q_(t)}}class mN extends Rw{constructor(e,t,r,o,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,u),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return at(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,at(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){at(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=EC(e.writeResults,e.commitTime),r=Ti(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Wg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>_w(this.serializer,r)))};this.q_(t)}}class gN{}class pN extends gN{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Te(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Go(e,Xg(t,r),o,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Te(fe.UNKNOWN,c.toString())}))}Ho(e,t,r,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,Xg(t,r),o,u,d,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Te(fe.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class yN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(er(t),this.aa=!1):Se("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Wa="RemoteStore";class vN{constructor(e,t,r,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((u=>{r.enqueueAndForget((async()=>{no(this)&&(Se(Wa,"Restarting streams for network reachability change."),await(async function(g){const p=ze(g);p.Ea.add(4),await su(p),p.Ra.set("Unknown"),p.Ea.delete(4),await $f(p)})(this))}))})),this.Ra=new yN(r,o)}}async function $f(i){if(no(i))for(const e of i.da)await e(!0)}async function su(i){for(const e of i.da)await e(!1)}function Cw(i,e){const t=ze(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Hp(t)?qp(t):vl(t).O_()&&Bp(t,e))}function zp(i,e){const t=ze(i),r=vl(t);t.Ia.delete(e),r.O_()&&Nw(t,e),t.Ia.size===0&&(r.O_()?r.L_():no(t)&&t.Ra.set("Unknown"))}function Bp(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vl(i).Y_(e)}function Nw(i,e){i.Va.Ue(e),vl(i).Z_(e)}function qp(i){i.Va=new fC({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),vl(i).start(),i.Ra.ua()}function Hp(i){return no(i)&&!vl(i).x_()&&i.Ia.size>0}function no(i){return ze(i).Ea.size===0}function Iw(i){i.Va=void 0}async function _N(i){i.Ra.set("Online")}async function bN(i){i.Ia.forEach(((e,t)=>{Bp(i,e)}))}async function EN(i,e){Iw(i),Hp(i)?(i.Ra.ha(e),qp(i)):i.Ra.set("Unknown")}async function wN(i,e,t){if(i.Ra.set("Online"),e instanceof mw&&e.state===2&&e.cause)try{await(async function(o,c){const u=c.cause;for(const d of c.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ia.delete(d),o.Va.removeTarget(d))})(i,e)}catch(r){Se(Wa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _f(i,r)}else if(e instanceof Yh?i.Va.Ze(e):e instanceof dw?i.Va.st(e):i.Va.tt(e),!t.isEqual(Pe.min()))try{const r=await Aw(i.localStore);t.compareTo(r)>=0&&await(function(c,u){const d=c.Va.Tt(u);return d.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const v=c.Ia.get(p);v&&c.Ia.set(p,v.withResumeToken(g.resumeToken,u))}})),d.targetMismatches.forEach(((g,p)=>{const v=c.Ia.get(g);if(!v)return;c.Ia.set(g,v.withResumeToken(jn.EMPTY_BYTE_STRING,v.snapshotVersion)),Nw(c,g);const E=new Xr(v.target,g,p,v.sequenceNumber);Bp(c,E)})),c.remoteSyncer.applyRemoteEvent(d)})(i,t)}catch(r){Se(Wa,"Failed to raise snapshot:",r),await _f(i,r)}}async function _f(i,e,t){if(!yl(e))throw e;i.Ea.add(1),await su(i),i.Ra.set("Offline"),t||(t=()=>Aw(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Se(Wa,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await $f(i)}))}function Dw(i,e){return e().catch((t=>_f(i,t,e)))}async function Kf(i){const e=ze(i),t=ca(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xp;for(;TN(e);)try{const o=await sN(e.localStore,r);if(o===null){e.Ta.length===0&&t.L_();break}r=o.batchId,xN(e,o)}catch(o){await _f(e,o)}kw(e)&&Ow(e)}function TN(i){return no(i)&&i.Ta.length<10}function xN(i,e){i.Ta.push(e);const t=ca(i);t.O_()&&t.X_&&t.ea(e.mutations)}function kw(i){return no(i)&&!ca(i).x_()&&i.Ta.length>0}function Ow(i){ca(i).start()}async function SN(i){ca(i).ra()}async function AN(i){const e=ca(i);for(const t of i.Ta)e.ea(t.mutations)}async function RN(i,e,t){const r=i.Ta.shift(),o=kp.from(r,e,t);await Dw(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Kf(i)}async function CN(i,e){e&&ca(i).X_&&await(async function(r,o){if((function(u){return hw(u)&&u!==fe.ABORTED})(o.code)){const c=r.Ta.shift();ca(r).B_(),await Dw(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Kf(r)}})(i,e),kw(i)&&Ow(i)}async function Zb(i,e){const t=ze(i);t.asyncQueue.verifyOperationInProgress(),Se(Wa,"RemoteStore received new credentials");const r=no(t);t.Ea.add(3),await su(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await $f(t)}async function NN(i,e){const t=ze(i);e?(t.Ea.delete(2),await $f(t)):e||(t.Ea.add(2),await su(t),t.Ra.set("Unknown"))}function vl(i){return i.ma||(i.ma=(function(t,r,o){const c=ze(t);return c.sa(),new dN(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:_N.bind(null,i),t_:bN.bind(null,i),r_:EN.bind(null,i),H_:wN.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Hp(i)?qp(i):i.Ra.set("Unknown")):(await i.ma.stop(),Iw(i))}))),i.ma}function ca(i){return i.fa||(i.fa=(function(t,r,o){const c=ze(t);return c.sa(),new mN(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:SN.bind(null,i),r_:CN.bind(null,i),ta:AN.bind(null,i),na:RN.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Kf(i)):(await i.fa.stop(),i.Ta.length>0&&(Se(Wa,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class Fp{constructor(e,t,r,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new ta,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,c){const u=Date.now()+r,d=new Fp(e,t,u,o,c);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gp(i,e){if(er("AsyncQueue",`${e}: ${i}`),yl(i))return new Te(fe.UNAVAILABLE,`${e}: ${i}`);throw i}class Yo{static emptySet(e){return new Yo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||De.comparator(t.key,r.key):(t,r)=>De.comparator(t.key,r.key),this.keyedMap=_c(),this.sortedSet=new zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Yo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class e1{constructor(){this.ga=new zt(De.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Me(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class cl{constructor(e,t,r,o,c,u,d,g,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,o,c){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new cl(e,t,Yo.emptySet(t),u,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class IN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class DN{constructor(){this.queries=t1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=ze(t),c=o.queries;o.queries=t1(),c.forEach(((u,d)=>{for(const g of d.Sa)g.onError(r)}))})(this,new Te(fe.ABORTED,"Firestore shutting down"))}}function t1(){return new to((i=>JE(i)),zf)}async function kN(i,e){const t=ze(i);let r=3;const o=e.query;let c=t.queries.get(o);c?!c.ba()&&e.Da()&&(r=2):(c=new IN,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await t.onListen(o,!0);break;case 1:c.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=Gp(u,`Initialization of query '${Fo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&$p(t)}async function ON(i,e){const t=ze(i),r=e.query;let o=3;const c=t.queries.get(r);if(c){const u=c.Sa.indexOf(e);u>=0&&(c.Sa.splice(u,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function MN(i,e){const t=ze(i);let r=!1;for(const o of e){const c=o.query,u=t.queries.get(c);if(u){for(const d of u.Sa)d.Fa(o)&&(r=!0);u.wa=o}}r&&$p(t)}function VN(i,e,t){const r=ze(i),o=r.queries.get(e);if(o)for(const c of o.Sa)c.onError(t);r.queries.delete(e)}function $p(i){i.Ca.forEach((e=>{e.next()}))}var ep,n1;(n1=ep||(ep={})).Ma="default",n1.Cache="cache";class PN{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new cl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ep.Cache}}class Mw{constructor(e){this.key=e}}class Vw{constructor(e){this.key=e}}class jN{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=et(),this.mutatedKeys=et(),this.eu=ZE(e),this.tu=new Yo(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new e1,o=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const T=o.get(v),I=Bf(this.query,E)?E:null,P=!!T&&this.mutatedKeys.has(T.key),H=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let k=!1;T&&I?T.data.isEqual(I.data)?P!==H&&(r.track({type:3,doc:I}),k=!0):this.su(T,I)||(r.track({type:2,doc:I}),k=!0,(g&&this.eu(I,g)>0||p&&this.eu(I,p)<0)&&(d=!0)):!T&&I?(r.track({type:0,doc:I}),k=!0):T&&!I&&(r.track({type:1,doc:T}),k=!0,(g||p)&&(d=!0)),k&&(I?(u=u.add(I),c=H?c.add(v):c.delete(v)):(u=u.delete(v),c=c.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),c=c.delete(v.key),r.track({type:1,doc:v})}return{tu:u,iu:r,Cs:d,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,E)=>(function(I,P){const H=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Rt:k})}};return H(I)-H(P)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(r),o=o??!1;const d=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,u.length!==0||p?{snapshot:new cl(this.query,e.tu,c,u,e.mutatedKeys,g===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new e1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=et(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new Vw(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new Mw(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=et();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return cl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Kp="SyncEngine";class LN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class UN{constructor(e){this.key=e,this.hu=!1}}class zN{constructor(e,t,r,o,c,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new to((d=>JE(d)),zf),this.Iu=new Map,this.Eu=new Set,this.du=new zt(De.comparator),this.Au=new Map,this.Ru=new Vp,this.Vu={},this.mu=new Map,this.fu=ll.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function BN(i,e,t=!0){const r=Bw(i);let o;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await Pw(r,e,t,!0),o}async function qN(i,e){const t=Bw(i);await Pw(t,e,!0,!1)}async function Pw(i,e,t,r){const o=await rN(i.localStore,ws(e)),c=o.targetId,u=i.sharedClientState.addLocalQueryTarget(c,t);let d;return r&&(d=await HN(i,e,c,u==="current",o.resumeToken)),i.isPrimaryClient&&t&&Cw(i.remoteStore,o),d}async function HN(i,e,t,r,o){i.pu=(E,T,I)=>(async function(H,k,j,Q){let G=k.view.ru(j);G.Cs&&(G=await Qb(H.localStore,k.query,!1).then((({documents:S})=>k.view.ru(S,G))));const he=Q&&Q.targetChanges.get(k.targetId),F=Q&&Q.targetMismatches.get(k.targetId)!=null,U=k.view.applyChanges(G,H.isPrimaryClient,he,F);return s1(H,k.targetId,U.au),U.snapshot})(i,E,T,I);const c=await Qb(i.localStore,e,!0),u=new jN(e,c.Qs),d=u.ru(c.documents),g=iu.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",o),p=u.applyChanges(d,i.isPrimaryClient,g);s1(i,t,p.au);const v=new LN(e,t,u);return i.Tu.set(e,v),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),p.snapshot}async function FN(i,e,t){const r=ze(i),o=r.Tu.get(e),c=r.Iu.get(o.targetId);if(c.length>1)return r.Iu.set(o.targetId,c.filter((u=>!zf(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Jg(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&zp(r.remoteStore,o.targetId),tp(r,o.targetId)})).catch(pl)):(tp(r,o.targetId),await Jg(r.localStore,o.targetId,!0))}async function GN(i,e){const t=ze(i),r=t.Tu.get(e),o=t.Iu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),zp(t.remoteStore,r.targetId))}async function $N(i,e,t){const r=ZN(i);try{const o=await(function(u,d){const g=ze(u),p=kt.now(),v=d.reduce(((I,P)=>I.add(P.key)),et());let E,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let P=tr(),H=et();return g.Ns.getEntries(I,v).next((k=>{P=k,P.forEach(((j,Q)=>{Q.isValidDocument()||(H=H.add(j))}))})).next((()=>g.localDocuments.getOverlayedDocuments(I,P))).next((k=>{E=k;const j=[];for(const Q of d){const G=aC(Q,E.get(Q.key).overlayedDocument);G!=null&&j.push(new da(Q.key,G,FE(G.value.mapValue),ei.exists(!0)))}return g.mutationQueue.addMutationBatch(I,p,j,d)})).next((k=>{T=k;const j=k.applyToLocalDocumentSet(E,H);return g.documentOverlayCache.saveOverlays(I,k.batchId,j)}))})).then((()=>({batchId:T.batchId,changes:tw(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(u,d,g){let p=u.Vu[u.currentUser.toKey()];p||(p=new zt(Je)),p=p.insert(d,g),u.Vu[u.currentUser.toKey()]=p})(r,o.batchId,t),await ru(r,o.changes),await Kf(r.remoteStore)}catch(o){const c=Gp(o,"Failed to persist write");t.reject(c)}}async function jw(i,e){const t=ze(i);try{const r=await nN(t.localStore,e);e.targetChanges.forEach(((o,c)=>{const u=t.Au.get(c);u&&(at(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?at(u.hu,14607):o.removedDocuments.size>0&&(at(u.hu,42227),u.hu=!1))})),await ru(t,r,e)}catch(r){await pl(r)}}function i1(i,e,t){const r=ze(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Tu.forEach(((c,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const g=ze(u);g.onlineState=d;let p=!1;g.queries.forEach(((v,E)=>{for(const T of E.Sa)T.va(d)&&(p=!0)})),p&&$p(g)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KN(i,e,t){const r=ze(i);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Au.get(e),c=o&&o.key;if(c){let u=new zt(De.comparator);u=u.insert(c,An.newNoDocument(c,Pe.min()));const d=et().add(c),g=new Ff(Pe.min(),new Map,new zt(Je),u,d);await jw(r,g),r.du=r.du.remove(c),r.Au.delete(e),Qp(r)}else await Jg(r.localStore,e,!1).then((()=>tp(r,e,t))).catch(pl)}async function QN(i,e){const t=ze(i),r=e.batch.batchId;try{const o=await tN(t.localStore,e);Uw(t,r,null),Lw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ru(t,o)}catch(o){await pl(o)}}async function YN(i,e,t){const r=ze(i);try{const o=await(function(u,d){const g=ze(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return g.mutationQueue.lookupMutationBatch(p,d).next((E=>(at(E!==null,37113),v=E.keys(),g.mutationQueue.removeMutationBatch(p,E)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,v,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>g.localDocuments.getDocuments(p,v)))}))})(r.localStore,e);Uw(r,e,t),Lw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ru(r,o)}catch(o){await pl(o)}}function Lw(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function Uw(i,e,t){const r=ze(i);let o=r.Vu[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function tp(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),t&&i.Pu.yu(r,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||zw(i,r)}))}function zw(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(zp(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),Qp(i))}function s1(i,e,t){for(const r of t)r instanceof Mw?(i.Ru.addReference(r.key,e),XN(i,r)):r instanceof Vw?(Se(Kp,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||zw(i,r.key)):Me(19791,{wu:r})}function XN(i,e){const t=e.key,r=t.path.canonicalString();i.du.get(t)||i.Eu.has(r)||(Se(Kp,"New document in limbo: "+t),i.Eu.add(r),Qp(i))}function Qp(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new De(Tt.fromString(e)),r=i.fu.next();i.Au.set(r,new UN(t)),i.du=i.du.insert(t,r),Cw(i.remoteStore,new Xr(ws(Np(t.path)),r,"TargetPurposeLimboResolution",Lf.ce))}}async function ru(i,e,t){const r=ze(i),o=[],c=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,g)=>{u.push(r.pu(g,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const v=p?!p.fromCache:t?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(p){o.push(p);const v=jp.As(g.targetId,p);c.push(v)}})))})),await Promise.all(u),r.Pu.H_(o),await(async function(g,p){const v=ze(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>me.forEach(p,(T=>me.forEach(T.Es,(I=>v.persistence.referenceDelegate.addReference(E,T.targetId,I))).next((()=>me.forEach(T.ds,(I=>v.persistence.referenceDelegate.removeReference(E,T.targetId,I)))))))))}catch(E){if(!yl(E))throw E;Se(Lp,"Failed to update sequence numbers: "+E)}for(const E of p){const T=E.targetId;if(!E.fromCache){const I=v.Ms.get(T),P=I.snapshotVersion,H=I.withLastLimboFreeSnapshotVersion(P);v.Ms=v.Ms.insert(T,H)}}})(r.localStore,c))}async function WN(i,e){const t=ze(i);if(!t.currentUser.isEqual(e)){Se(Kp,"User change. New user:",e.toKey());const r=await Sw(t.localStore,e);t.currentUser=e,(function(c,u){c.mu.forEach((d=>{d.forEach((g=>{g.reject(new Te(fe.CANCELLED,u))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ru(t,r.Ls)}}function JN(i,e){const t=ze(i),r=t.Au.get(e);if(r&&r.hu)return et().add(r.key);{let o=et();const c=t.Iu.get(e);if(!c)return o;for(const u of c){const d=t.Tu.get(u);o=o.unionWith(d.view.nu)}return o}}function Bw(i){const e=ze(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=jw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KN.bind(null,e),e.Pu.H_=MN.bind(null,e.eventManager),e.Pu.yu=VN.bind(null,e.eventManager),e}function ZN(i){const e=ze(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YN.bind(null,e),e}class bf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return eN(this.persistence,new WC,e.initialUser,this.serializer)}Cu(e){return new xw(Pp.mi,this.serializer)}Du(e){return new oN}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bf.provider={build:()=>new bf};class eI extends bf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){at(this.persistence.referenceDelegate instanceof vf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new PC(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?hi.withCacheSize(this.cacheSizeBytes):hi.DEFAULT;return new xw((r=>vf.mi(r,t)),this.serializer)}}class np{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>i1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WN.bind(null,this.syncEngine),await NN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new DN})()}createDatastore(e){const t=Gf(e.databaseInfo.databaseId),r=(function(c){return new fN(c)})(e.databaseInfo);return(function(c,u,d,g){return new pN(c,u,d,g)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,c,u,d){return new vN(r,o,c,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>i1(this.syncEngine,t,0)),(function(){return Wb.v()?new Wb:new lN})())}createSyncEngine(e,t){return(function(o,c,u,d,g,p,v){const E=new zN(o,c,u,d,g,p);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=ze(t);Se(Wa,"RemoteStore shutting down."),r.Ea.add(5),await su(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}np.provider={build:()=>new np};class tI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):er("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class nI{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Te(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,c){const u=ze(o),d={documents:c.map((E=>yf(u.serializer,E)))},g=await u.Ho("BatchGetDocuments",u.serializer.databaseId,Tt.emptyPath(),d,c.length),p=new Map;g.forEach((E=>{const T=_C(u.serializer,E);p.set(T.key.toString(),T)}));const v=[];return c.forEach((E=>{const T=p.get(E.toString());at(!!T,55234,{key:E}),v.push(T)})),v})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Dp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const o=De.fromPath(r);this.mutations.push(new uw(o,this.precondition(o)))})),await(async function(r,o){const c=ze(r),u={writes:o.map((d=>_w(c.serializer,d)))};await c.Go("Commit",c.serializer.databaseId,Tt.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Me(50498,{Gu:e.constructor.name});t=Pe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Te(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Pe.min())?ei.exists(!1):ei.updateTime(t):ei.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Pe.min()))throw new Te(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ei.updateTime(t)}return ei.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class iI{constructor(e,t,r,o,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=c,this.zu=r.maxAttempts,this.M_=new Up(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new nI(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((o=>{this.Yu(o)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!eu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!hw(t)}return!1}}const ua="FirestoreClient";class sI{constructor(e,t,r,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Fn.UNAUTHENTICATED,this.clientId=Tp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async u=>{Se(ua,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(Se(ua,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ta;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Gp(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function _g(i,e){i.asyncQueue.verifyOperationInProgress(),Se(ua,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await Sw(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function r1(i,e){i.asyncQueue.verifyOperationInProgress();const t=await rI(i);Se(ua,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>Zb(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>Zb(e.remoteStore,o))),i._onlineComponents=e}async function rI(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Se(ua,"Using user provided OfflineComponentProvider");try{await _g(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===fe.FAILED_PRECONDITION||o.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;sl("Error using user provided cache. Falling back to memory cache: "+t),await _g(i,new bf)}}else Se(ua,"Using default OfflineComponentProvider"),await _g(i,new eI(void 0));return i._offlineComponents}async function Yp(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Se(ua,"Using user provided OnlineComponentProvider"),await r1(i,i._uninitializedComponentsProvider._online)):(Se(ua,"Using default OnlineComponentProvider"),await r1(i,new np))),i._onlineComponents}function aI(i){return Yp(i).then((e=>e.syncEngine))}function oI(i){return Yp(i).then((e=>e.datastore))}async function a1(i){const e=await Yp(i),t=e.eventManager;return t.onListen=BN.bind(null,e.syncEngine),t.onUnlisten=FN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=qN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=GN.bind(null,e.syncEngine),t}function qw(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const o1=new Map;const Hw="firestore.googleapis.com",l1=!0;class c1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Te(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Hw,this.ssl=l1}else this.host=e.host,this.ssl=e.ssl??l1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Tw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<MC)throw new Te(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qw(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Te(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Te(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Te(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qf{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new c1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new c1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new uR;switch(r.type){case"firstParty":return new mR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Te(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=o1.get(t);r&&(Se("ComponentProvider","Removing Datastore"),o1.delete(t),r.terminate())})(this),Promise.resolve()}}function lI(i,e,t,r={}){i=Js(i,Qf);const o=dl(e),c=i._getSettings(),u={...c,emulatorOptions:i._getEmulatorOptions()},d=`${e}:${t}`;o&&(yE(`https://${d}`),vE("Firestore",!0)),c.host!==Hw&&c.host!==d&&sl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:d,ssl:o,emulatorOptions:r};if(!Qa(g,u)&&(i._setSettings(g),r.mockUserToken)){let p,v;if(typeof r.mockUserToken=="string")p=r.mockUserToken,v=Fn.MOCK_USER;else{p=jA(r.mockUserToken,i._app?.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Te(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Fn(E)}i._authCredentials=new hR(new kE(p,v))}}class _l{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _l(this.firestore,e,this._query)}}class Gt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new na(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Zc(t,Gt._jsonSchema))return new Gt(e,r||null,new De(Tt.fromString(t.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:fn("string",Gt._jsonSchemaVersion),referencePath:fn("string")};class na extends _l{constructor(e,t,r){super(e,t,Np(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new De(e))}withConverter(e){return new na(this.firestore,e,this._path)}}function Pt(i,e,...t){if(i=Rn(i),OE("collection","path",e),i instanceof Qf){const r=Tt.fromString(e,...t);return Eb(r),new na(i,null,r)}{if(!(i instanceof Gt||i instanceof na))throw new Te(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Tt.fromString(e,...t));return Eb(r),new na(i.firestore,null,r)}}function jt(i,e,...t){if(i=Rn(i),arguments.length===1&&(e=Tp.newId()),OE("doc","path",e),i instanceof Qf){const r=Tt.fromString(e,...t);return bb(r),new Gt(i,null,new De(r))}{if(!(i instanceof Gt||i instanceof na))throw new Te(fe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Tt.fromString(e,...t));return bb(r),new Gt(i.firestore,i instanceof na?i.converter:null,new De(r))}}const u1="AsyncQueue";class h1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Up(this,"async_queue_retry"),this._c=()=>{const r=vg();r&&Se(u1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=vg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=vg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ta;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!yl(e))throw e;Se(u1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,er("INTERNAL UNHANDLED ERROR: ",f1(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Fp.createAndSchedule(this,e,t,r,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Me(47125,{Pc:f1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function f1(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}function d1(i){return(function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const c of r)if(c in o&&typeof o[c]=="function")return!0;return!1})(i,["next","error","complete"])}class ul extends Qf{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new h1,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new h1(e),this._firestoreClient=void 0,await e}}}function cI(i,e){const t=typeof i=="object"?i:wE(),r=typeof i=="string"?i:uf,o=Ep(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=VA("firestore");c&&lI(o,...c)}return o}function Xp(i){if(i._terminated)throw new Te(fe.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||uI(i),i._firestoreClient}function uI(i){const e=i._freezeSettings(),t=(function(o,c,u,d){return new DR(o,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,qw(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new sI(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(i._componentsProvider))}class Ei{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ei(jn.fromBase64String(e))}catch(t){throw new Te(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ei(jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ei._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zc(e,Ei._jsonSchema))return Ei.fromBase64String(e.bytes)}}Ei._jsonSchemaVersion="firestore/bytes/1.0",Ei._jsonSchema={type:fn("string",Ei._jsonSchemaVersion),bytes:fn("string")};class au{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Te(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Wp{constructor(e){this._methodName=e}}class Ts{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ts._jsonSchemaVersion}}static fromJSON(e){if(Zc(e,Ts._jsonSchema))return new Ts(e.latitude,e.longitude)}}Ts._jsonSchemaVersion="firestore/geoPoint/1.0",Ts._jsonSchema={type:fn("string",Ts._jsonSchemaVersion),latitude:fn("number"),longitude:fn("number")};class xs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:xs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zc(e,xs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new xs(e.vectorValues);throw new Te(fe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xs._jsonSchemaVersion="firestore/vectorValue/1.0",xs._jsonSchema={type:fn("string",xs._jsonSchemaVersion),vectorValues:fn("object")};const hI=/^__.*__$/;class fI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new da(e,this.data,this.fieldMask,t,this.fieldTransforms):new nu(e,this.data,t,this.fieldTransforms)}}class Fw{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new da(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Gw(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ac:i})}}class Jp{constructor(e,t,r,o,c,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Jp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ef(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Gw(this.Ac)&&hI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class dI{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Gf(e)}Cc(e,t,r,o=!1){return new Jp({Ac:e,methodName:t,Dc:r,path:Pn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yf(i){const e=i._freezeSettings(),t=Gf(i._databaseId);return new dI(i._databaseId,!!e.ignoreUndefinedProperties,t)}function $w(i,e,t,r,o,c={}){const u=i.Cc(c.merge||c.mergeFields?2:0,e,t,o);Zp("Data must be an object, but it was:",u,r);const d=Yw(r,u);let g,p;if(c.merge)g=new wi(u.fieldMask),p=u.fieldTransforms;else if(c.mergeFields){const v=[];for(const E of c.mergeFields){const T=ip(e,E,t);if(!u.contains(T))throw new Te(fe.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Ww(v,T)||v.push(T)}g=new wi(v),p=u.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,p=u.fieldTransforms;return new fI(new Zn(d),g,p)}class Xf extends Wp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xf}}function Kw(i,e,t,r){const o=i.Cc(1,e,t);Zp("Data must be an object, but it was:",o,r);const c=[],u=Zn.empty();fa(r,((g,p)=>{const v=e0(e,g,t);p=Rn(p);const E=o.yc(v);if(p instanceof Xf)c.push(v);else{const T=ou(p,E);T!=null&&(c.push(v),u.set(v,T))}}));const d=new wi(c);return new Fw(u,d,o.fieldTransforms)}function Qw(i,e,t,r,o,c){const u=i.Cc(1,e,t),d=[ip(e,r,t)],g=[o];if(c.length%2!=0)throw new Te(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<c.length;T+=2)d.push(ip(e,c[T])),g.push(c[T+1]);const p=[],v=Zn.empty();for(let T=d.length-1;T>=0;--T)if(!Ww(p,d[T])){const I=d[T];let P=g[T];P=Rn(P);const H=u.yc(I);if(P instanceof Xf)p.push(I);else{const k=ou(P,H);k!=null&&(p.push(I),v.set(I,k))}}const E=new wi(p);return new Fw(v,E,u.fieldTransforms)}function mI(i,e,t,r=!1){return ou(t,i.Cc(r?4:3,e))}function ou(i,e){if(Xw(i=Rn(i)))return Zp("Unsupported field value:",e,i),Yw(i,e);if(i instanceof Wp)return(function(r,o){if(!Gw(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const c=[];let u=0;for(const d of r){let g=ou(d,o.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),u++}return{arrayValue:{values:c}}})(i,e)}return(function(r,o){if((r=Rn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return eC(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=kt.fromDate(r);return{timestampValue:pf(o.serializer,c)}}if(r instanceof kt){const c=new kt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pf(o.serializer,c)}}if(r instanceof Ts)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ei)return{bytesValue:gw(o.serializer,r._byteString)};if(r instanceof Gt){const c=o.databaseId,u=r.firestore._databaseId;if(!u.isEqual(c))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Mp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof xs)return(function(u,d){return{mapValue:{fields:{[qE]:{stringValue:HE},[hf]:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw d.Sc("VectorValues must only contain numeric values.");return Ip(d.serializer,p)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${jf(r)}`)})(i,e)}function Yw(i,e){const t={};return PE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fa(i,((r,o)=>{const c=ou(o,e.mc(r));c!=null&&(t[r]=c)})),{mapValue:{fields:t}}}function Xw(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof kt||i instanceof Ts||i instanceof Ei||i instanceof Gt||i instanceof Wp||i instanceof xs)}function Zp(i,e,t){if(!Xw(t)||!ME(t)){const r=jf(t);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function ip(i,e,t){if((e=Rn(e))instanceof au)return e._internalPath;if(typeof e=="string")return e0(i,e);throw Ef("Field path arguments must be of type string or ",i,!1,void 0,t)}const gI=new RegExp("[~\\*/\\[\\]]");function e0(i,e,t){if(e.search(gI)>=0)throw Ef(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new au(...e.split("."))._internalPath}catch{throw Ef(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Ef(i,e,t,r,o){const c=r&&!r.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(c||u)&&(g+=" (found",c&&(g+=` in field ${r}`),u&&(g+=` in document ${o}`),g+=")"),new Te(fe.INVALID_ARGUMENT,d+i+g)}function Ww(i,e){return i.some((t=>t.isEqual(e)))}class wf{constructor(e,t,r,o,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(t0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class pI extends wf{data(){return super.data()}}function t0(i,e){return typeof e=="string"?e0(i,e):e instanceof au?e._internalPath:e._delegate._internalPath}function yI(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Te(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class n0{}class vI extends n0{}function _I(i,e,...t){let r=[];e instanceof n0&&r.push(e),r=r.concat(t),(function(c){const u=c.filter((g=>g instanceof i0)).length,d=c.filter((g=>g instanceof Wf)).length;if(u>1||u>0&&d>0)throw new Te(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)i=o._apply(i);return i}class Wf extends vI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Wf(e,t,r)}_apply(e){const t=this._parse(e);return Jw(e._query,t),new _l(e.firestore,e.converter,Kg(e._query,t))}_parse(e){const t=Yf(e.firestore);return(function(c,u,d,g,p,v,E){let T;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Te(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){g1(E,v);const P=[];for(const H of E)P.push(m1(g,c,H));T={arrayValue:{values:P}}}else T=m1(g,c,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||g1(E,v),T=mI(d,u,E,v==="in"||v==="not-in");return hn.create(p,v,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function bI(i,e,t){const r=e,o=t0("where",i);return Wf._create(o,r,t)}class i0 extends n0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new i0(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:rs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,c){let u=o;const d=c.getFlattenedFilters();for(const g of d)Jw(u,g),u=Kg(u,g)})(e._query,t),new _l(e.firestore,e.converter,Kg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function m1(i,e,t){if(typeof(t=Rn(t))=="string"){if(t==="")throw new Te(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WE(e)&&t.indexOf("/")!==-1)throw new Te(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Tt.fromString(t));if(!De.isDocumentKey(r))throw new Te(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nb(i,new De(r))}if(t instanceof Gt)return Nb(i,t._key);throw new Te(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jf(t)}.`)}function g1(i,e){if(!Array.isArray(i)||i.length===0)throw new Te(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Jw(i,e){const t=(function(o,c){for(const u of o)for(const d of u.getFlattenedFilters())if(c.indexOf(d.op)>=0)return d.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Te(fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Te(fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Zw{convertValue(e,t="none"){switch(la(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return fa(e,((o,c)=>{r[o]=this.convertValue(c,t)})),r}convertVectorValue(e){const t=e.fields?.[hf].arrayValue?.values?.map((r=>Zt(r.doubleValue)));return new xs(t)}convertGeoPoint(e){return new Ts(Zt(e.latitude),Zt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Uf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Bc(e));default:return null}}convertTimestamp(e){const t=aa(e);return new kt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Tt.fromString(e);at(ww(r),9688,{name:e});const o=new qc(r.get(1),r.get(3)),c=new De(r.popFirst(5));return o.isEqual(t)||er(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function eT(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class EI extends Zw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ei(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}class Ko{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ia extends wf{constructor(e,t,r,o,c,u){super(e,t,r,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Xh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(t0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(fe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ia._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ia._jsonSchemaVersion="firestore/documentSnapshot/1.0",ia._jsonSchema={type:fn("string",ia._jsonSchemaVersion),bundleSource:fn("string","DocumentSnapshot"),bundleName:fn("string"),bundle:fn("string")};class Xh extends ia{data(e={}){return super.data(e)}}class Xo{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ko(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Xh(this._firestore,this._userDataWriter,r.key,r,new Ko(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const g=new Xh(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Ko(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>c||d.type!==3)).map((d=>{const g=new Xh(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Ko(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,v=-1;return d.type!==0&&(p=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:wI(d.type),doc:g,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(fe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Tp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wI(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:i})}}Xo._jsonSchemaVersion="firestore/querySnapshot/1.0",Xo._jsonSchema={type:fn("string",Xo._jsonSchemaVersion),bundleSource:fn("string","QuerySnapshot"),bundleName:fn("string"),bundle:fn("string")};class s0 extends Zw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ei(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}function Jf(i,e,t){i=Js(i,Gt);const r=Js(i.firestore,ul),o=eT(i.converter,e,t);return tT(r,[$w(Yf(r),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,ei.none())])}function Wo(i,e,t,...r){i=Js(i,Gt);const o=Js(i.firestore,ul),c=Yf(o);let u;return u=typeof(e=Rn(e))=="string"||e instanceof au?Qw(c,"updateDoc",i._key,e,t,r):Kw(c,"updateDoc",i._key,e),tT(o,[u.toMutation(i._key,ei.exists(!0))])}function Zf(i,...e){i=Rn(i);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||d1(e[r])||(t=e[r++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(d1(e[r])){const g=e[r];e[r]=g.next?.bind(g),e[r+1]=g.error?.bind(g),e[r+2]=g.complete?.bind(g)}let c,u,d;if(i instanceof Gt)u=Js(i.firestore,ul),d=Np(i._key.path),c={next:g=>{e[r]&&e[r](TI(u,i,g))},error:e[r+1],complete:e[r+2]};else{const g=Js(i,_l);u=Js(g.firestore,ul),d=g._query;const p=new s0(u);c={next:v=>{e[r]&&e[r](new Xo(u,p,g,v))},error:e[r+1],complete:e[r+2]},yI(i._query)}return(function(p,v,E,T){const I=new tI(T),P=new PN(v,I,E);return p.asyncQueue.enqueueAndForget((async()=>kN(await a1(p),P))),()=>{I.Nu(),p.asyncQueue.enqueueAndForget((async()=>ON(await a1(p),P)))}})(Xp(u),d,o,c)}function tT(i,e){return(function(r,o){const c=new ta;return r.asyncQueue.enqueueAndForget((async()=>$N(await aI(r),o,c))),c.promise})(Xp(i),e)}function TI(i,e,t){const r=t.docs.get(e._key),o=new s0(i);return new ia(i,o,e._key,r,new Ko(t.hasPendingWrites,t.fromCache),e.converter)}const xI={maxAttempts:5};function Ec(i,e){if((i=Rn(i)).firestore!==e)throw new Te(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class SI{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Yf(e)}get(e){const t=Ec(e,this._firestore),r=new EI(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return Me(24041);const c=o[0];if(c.isFoundDocument())return new wf(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new wf(this._firestore,r,t._key,null,t.converter);throw Me(18433,{doc:c})}))}set(e,t,r){const o=Ec(e,this._firestore),c=eT(o.converter,t,r),u=$w(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,r);return this._transaction.set(o._key,u),this}update(e,t,r,...o){const c=Ec(e,this._firestore);let u;return u=typeof(t=Rn(t))=="string"||t instanceof au?Qw(this._dataReader,"Transaction.update",c._key,t,r,o):Kw(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,u),this}delete(e){const t=Ec(e,this._firestore);return this._transaction.delete(t._key),this}}class AI extends SI{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ec(e,this._firestore),r=new s0(this._firestore);return super.get(e).then((o=>new ia(this._firestore,r,t._key,o._document,new Ko(!1,!1),t.converter)))}}function ns(i,e,t){i=Js(i,ul);const r={...xI,...t};return(function(c){if(c.maxAttempts<1)throw new Te(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(c,u,d){const g=new ta;return c.asyncQueue.enqueueAndForget((async()=>{const p=await oI(c);new iI(c.asyncQueue,p,d,u,g).ju()})),g.promise})(Xp(i),(o=>e(new AI(i,o))),r)}(function(e,t=!0){(function(o){gl=o})(ml),il(new Ya("firestore",((r,{instanceIdentifier:o,options:c})=>{const u=r.getProvider("app").getImmediate(),d=new ul(new fR(r.getProvider("auth-internal")),new gR(u,r.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Te(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qc(p.options.projectId,v)})(u,o),u);return c={useFetchStreams:t,...c},d._setSettings(c),d}),"PUBLIC").setMultipleInstances(!0)),Zr(pb,yb,e),Zr(pb,yb,"esm2020")})();function nT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RI=nT,iT=new Wc("auth","Firebase",nT());const Tf=new _p("@firebase/auth");function CI(i,...e){Tf.logLevel<=We.WARN&&Tf.warn(`Auth (${ml}): ${i}`,...e)}function Wh(i,...e){Tf.logLevel<=We.ERROR&&Tf.error(`Auth (${ml}): ${i}`,...e)}function nr(i,...e){throw r0(i,...e)}function Ss(i,...e){return r0(i,...e)}function sT(i,e,t){const r={...RI(),[e]:t};return new Wc("auth","Firebase",r).create(e,{appName:i.name})}function sa(i){return sT(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function r0(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return iT.create(i,...e)}function Le(i,e,...t){if(!i)throw r0(e,...t)}function Xs(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Wh(e),new Error(e)}function ir(i,e){i||Xs(e)}function sp(){return typeof self<"u"&&self.location?.href||""}function NI(){return p1()==="http:"||p1()==="https:"}function p1(){return typeof self<"u"&&self.location?.protocol||null}function II(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NI()||HA()||"connection"in navigator)?navigator.onLine:!0}function DI(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class lu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ir(t>e,"Short delay should be less than long delay!"),this.isMobile=zA()||FA()}get(){return II()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function a0(i,e){ir(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class rT{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const kI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const OI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],MI=new lu(3e4,6e4);function ed(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function bl(i,e,t,r,o={}){return aT(i,o,async()=>{let c={},u={};r&&(e==="GET"?u=r:c={body:JSON.stringify(r)});const d=Jc({key:i.config.apiKey,...u}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const p={method:e,headers:g,...c};return qA()||(p.referrerPolicy="no-referrer"),i.emulatorConfig&&dl(i.emulatorConfig.host)&&(p.credentials="include"),rT.fetch()(await lT(i,i.config.apiHost,t,d),p)})}async function aT(i,e,t){i._canInitEmulator=!1;const r={...kI,...e};try{const o=new VI(i),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw zh(i,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const d=c.ok?u.errorMessage:u.error.message,[g,p]=d.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw zh(i,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw zh(i,"email-already-in-use",u);if(g==="USER_DISABLED")throw zh(i,"user-disabled",u);const v=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw sT(i,v,p);nr(i,v)}}catch(o){if(o instanceof rr)throw o;nr(i,"network-request-failed",{message:String(o)})}}async function oT(i,e,t,r,o={}){const c=await bl(i,e,t,r,o);return"mfaPendingCredential"in c&&nr(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function lT(i,e,t,r){const o=`${e}${t}?${r}`,c=i,u=c.config.emulator?a0(i.config,o):`${i.config.apiScheme}://${o}`;return OI.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}class VI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ss(this.auth,"network-request-failed")),MI.get())})}}function zh(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=Ss(i,e,r);return o.customData._tokenResponse=t,o}async function PI(i,e){return bl(i,"POST","/v1/accounts:delete",e)}async function xf(i,e){return bl(i,"POST","/v1/accounts:lookup",e)}function kc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jI(i,e=!1){const t=Rn(i),r=await t.getIdToken(e),o=o0(r);Le(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,u=c?.sign_in_provider;return{claims:o,token:r,authTime:kc(bg(o.auth_time)),issuedAtTime:kc(bg(o.iat)),expirationTime:kc(bg(o.exp)),signInProvider:u||null,signInSecondFactor:c?.sign_in_second_factor||null}}function bg(i){return Number(i)*1e3}function o0(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Wh("JWT malformed, contained fewer than 3 sections"),null;try{const o=dE(t);return o?JSON.parse(o):(Wh("Failed to decode base64 JWT payload"),null)}catch(o){return Wh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function y1(i){const e=o0(i);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function $c(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof rr&&LI(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function LI({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class UI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class rp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=kc(this.lastLoginAt),this.creationTime=kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Sf(i){const e=i.auth,t=await i.getIdToken(),r=await $c(i,xf(e,{idToken:t}));Le(r?.users.length,e,"internal-error");const o=r.users[0];i._notifyReloadListener(o);const c=o.providerUserInfo?.length?cT(o.providerUserInfo):[],u=BI(i.providerData,c),d=i.isAnonymous,g=!(i.email&&o.passwordHash)&&!u?.length,p=d?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new rp(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(i,v)}async function zI(i){const e=Rn(i);await Sf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BI(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function cT(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function qI(i,e){const t=await aT(i,{},async()=>{const r=Jc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,u=await lT(i,o,"/v1/token",`key=${c}`),d=await i._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:d,body:r};return i.emulatorConfig&&dl(i.emulatorConfig.host)&&(g.credentials="include"),rT.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function HI(i,e){return bl(i,"POST","/v2/accounts:revokeToken",ed(i,e))}class Jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):y1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const t=y1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:c}=await qI(e,t);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:c}=t,u=new Jo;return r&&(Le(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),o&&(Le(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),c&&(Le(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jo,this.toJSON())}_performRefresh(){return Xs("not implemented")}}function Br(i,e){Le(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ss{constructor({uid:e,auth:t,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new UI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new rp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await $c(this,this.stsTokenManager.getToken(this.auth,e));return Le(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return jI(this,e)}reload(){return zI(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ss({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Sf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(is(this.auth.app))return Promise.reject(sa(this.auth));const e=await this.getIdToken();return await $c(this,PI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:I,providerData:P,stsTokenManager:H}=t;Le(E&&H,e,"internal-error");const k=Jo.fromJSON(this.name,H);Le(typeof E=="string",e,"internal-error"),Br(r,e.name),Br(o,e.name),Le(typeof T=="boolean",e,"internal-error"),Le(typeof I=="boolean",e,"internal-error"),Br(c,e.name),Br(u,e.name),Br(d,e.name),Br(g,e.name),Br(p,e.name),Br(v,e.name);const j=new ss({uid:E,auth:e,email:o,emailVerified:T,displayName:r,isAnonymous:I,photoURL:u,phoneNumber:c,tenantId:d,stsTokenManager:k,createdAt:p,lastLoginAt:v});return P&&Array.isArray(P)&&(j.providerData=P.map(Q=>({...Q}))),g&&(j._redirectEventId=g),j}static async _fromIdTokenResponse(e,t,r=!1){const o=new Jo;o.updateFromServerResponse(t);const c=new ss({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Sf(c),c}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Le(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?cT(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!c?.length,d=new Jo;d.updateFromIdToken(r);const g=new ss({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new rp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,p),g}}const v1=new Map;function Ws(i){ir(i instanceof Function,"Expected a class definition");let e=v1.get(i);return e?(ir(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,v1.set(i,e),e)}class uT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}uT.type="NONE";const _1=uT;function Jh(i,e,t){return`firebase:${i}:${e}:${t}`}class Zo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=Jh(this.userKey,o.apiKey,c),this.fullPersistenceKey=Jh("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await xf(this.auth,{idToken:e}).catch(()=>{});return t?ss._fromGetAccountInfoResponse(this.auth,t,e):null}return ss._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Zo(Ws(_1),e,r);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let c=o[0]||Ws(_1);const u=Jh(r,e.config.apiKey,e.name);let d=null;for(const p of t)try{const v=await p._get(u);if(v){let E;if(typeof v=="string"){const T=await xf(e,{idToken:v}).catch(()=>{});if(!T)break;E=await ss._fromGetAccountInfoResponse(e,T,v)}else E=ss._fromJSON(e,v);p!==c&&(d=E),c=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Zo(c,e,r):(c=g[0],d&&await c._set(u,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==c)try{await p._remove(u)}catch{}})),new Zo(c,e,r))}}function b1(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pT(e))return"Blackberry";if(yT(e))return"Webos";if(fT(e))return"Safari";if((e.includes("chrome/")||dT(e))&&!e.includes("edge/"))return"Chrome";if(gT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if(r?.length===2)return r[1]}return"Other"}function hT(i=Gn()){return/firefox\//i.test(i)}function fT(i=Gn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dT(i=Gn()){return/crios\//i.test(i)}function mT(i=Gn()){return/iemobile/i.test(i)}function gT(i=Gn()){return/android/i.test(i)}function pT(i=Gn()){return/blackberry/i.test(i)}function yT(i=Gn()){return/webos/i.test(i)}function l0(i=Gn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function FI(i=Gn()){return l0(i)&&!!window.navigator?.standalone}function GI(){return GA()&&document.documentMode===10}function vT(i=Gn()){return l0(i)||gT(i)||yT(i)||pT(i)||/windows phone/i.test(i)||mT(i)}function _T(i,e=[]){let t;switch(i){case"Browser":t=b1(Gn());break;case"Worker":t=`${b1(Gn())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ml}/${r}`}class $I{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=c=>new Promise((u,d)=>{try{const g=e(c);u(g)}catch(g){d(g)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function KI(i,e={}){return bl(i,"GET","/v2/passwordPolicy",ed(i,e))}const QI=6;class YI{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??QI,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class XI{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new E1(this),this.idTokenSubscription=new E1(this),this.beforeStateQueue=new $I(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ws(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Zo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await xf(this,{idToken:e}),r=await ss._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(is(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,u=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!c||c===u)&&d?.user&&(r=d.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Sf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(is(this.app))return Promise.reject(sa(this));const t=e?Rn(e):null;return t&&Le(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return is(this.app)?Promise.reject(sa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return is(this.app)?Promise.reject(sa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ws(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KI(this),t=new YI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await HI(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ws(e)||this._popupRedirectResolver;Le(t,this,"argument-error"),this.redirectPersistenceManager=await Zo.create(this,[Ws(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(d,this,"internal-error"),d.then(()=>{u||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,r,o);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_T(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(is(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&CI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function td(i){return Rn(i)}class E1{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZA(t=>this.observer=t)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let c0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WI(i){c0=i}function JI(i){return c0.loadJS(i)}function ZI(){return c0.gapiScript}function eD(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function tD(i,e){const t=Ep(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(Qa(c,e??{}))return o;nr(o,"already-initialized")}return t.initialize({options:e})}function nD(i,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ws);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function iD(i,e,t){const r=td(i);Le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=bT(e),{host:u,port:d}=sD(e),g=d===null?"":`:${d}`,p={url:`${c}//${u}${g}/`},v=Object.freeze({host:u,port:d,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Le(Qa(p,r.config.emulator)&&Qa(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,dl(u)?(yE(`${c}//${u}${g}`),vE("Auth",!0)):rD()}function bT(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function sD(i){const e=bT(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:w1(r.substr(c.length+1))}}else{const[c,u]=r.split(":");return{host:c,port:w1(u)}}}function w1(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function rD(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class ET{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xs("not implemented")}_getIdTokenResponse(e){return Xs("not implemented")}_linkToIdToken(e,t){return Xs("not implemented")}_getReauthenticationResolver(e){return Xs("not implemented")}}async function el(i,e){return oT(i,"POST","/v1/accounts:signInWithIdp",ed(i,e))}const aD="http://localhost";class Ja extends ET{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ja(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):nr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...c}=t;if(!r||!o)return null;const u=new Ja(r,o);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return el(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,el(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,el(e,t)}buildRequest(){const e={requestUri:aD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Jc(t)}return e}}class wT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class cu extends wT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class $r extends cu{constructor(){super("facebook.com")}static credential(e){return Ja._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.FACEBOOK_SIGN_IN_METHOD="facebook.com";$r.PROVIDER_ID="facebook.com";class Kr extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ja._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Kr.credential(t,r)}catch{return null}}}Kr.GOOGLE_SIGN_IN_METHOD="google.com";Kr.PROVIDER_ID="google.com";class Qr extends cu{constructor(){super("github.com")}static credential(e){return Ja._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qr.credential(e.oauthAccessToken)}catch{return null}}}Qr.GITHUB_SIGN_IN_METHOD="github.com";Qr.PROVIDER_ID="github.com";class Yr extends cu{constructor(){super("twitter.com")}static credential(e,t){return Ja._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Yr.credential(t,r)}catch{return null}}}Yr.TWITTER_SIGN_IN_METHOD="twitter.com";Yr.PROVIDER_ID="twitter.com";async function oD(i,e){return oT(i,"POST","/v1/accounts:signUp",ed(i,e))}class ha{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const c=await ss._fromIdTokenResponse(e,r,o),u=T1(r);return new ha({user:c,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=T1(r);return new ha({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function T1(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}async function Za(i){if(is(i.app))return Promise.reject(sa(i));const e=td(i);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new ha({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await oD(e,{returnSecureToken:!0}),r=await ha._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class Af extends rr{constructor(e,t,r,o){super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Af.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new Af(e,t,r,o)}}function TT(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Af._fromErrorAndOperation(i,c,e,r):c})}async function lD(i,e,t=!1){const r=await $c(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return ha._forOperation(i,"link",r)}async function cD(i,e,t=!1){const{auth:r}=i;if(is(r.app))return Promise.reject(sa(r));const o="reauthenticate";try{const c=await $c(i,TT(r,o,e,i),t);Le(c.idToken,r,"internal-error");const u=o0(c.idToken);Le(u,r,"internal-error");const{sub:d}=u;return Le(i.uid===d,r,"user-mismatch"),ha._forOperation(i,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&nr(r,"user-mismatch"),c}}async function uD(i,e,t=!1){if(is(i.app))return Promise.reject(sa(i));const r="signIn",o=await TT(i,r,e),c=await ha._fromIdTokenResponse(i,r,o);return t||await i._updateCurrentUser(c.user),c}function hD(i,e,t,r){return Rn(i).onIdTokenChanged(e,t,r)}function fD(i,e,t){return Rn(i).beforeAuthStateChanged(e,t)}const Rf="__sak";class xT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Rf,"1"),this.storage.removeItem(Rf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const dD=1e3,mD=10;class ST extends xT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,g)=>{this.notifyListeners(u,g)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},c=this.storage.getItem(r);GI()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,mD):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},dD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ST.type="LOCAL";const gD=ST;class AT extends xT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}AT.type="SESSION";const RT=AT;function pD(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class nd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new nd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:c}=t.data,u=this.handlersMap[o];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const d=Array.from(u).map(async p=>p(t.origin,c)),g=await pD(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nd.receivers=[];function u0(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}class yD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,u;return new Promise((d,g)=>{const p=u0("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},r);u={messageChannel:o,onMessage(E){const T=E;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(v),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),d(T.data.response);break;default:clearTimeout(v),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function As(){return window}function vD(i){As().location.href=i}function CT(){return typeof As().WorkerGlobalScope<"u"&&typeof As().importScripts=="function"}async function _D(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bD(){return navigator?.serviceWorker?.controller||null}function ED(){return CT()?self:null}const NT="firebaseLocalStorageDb",wD=1,Cf="firebaseLocalStorage",IT="fbase_key";class uu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function id(i,e){return i.transaction([Cf],e?"readwrite":"readonly").objectStore(Cf)}function TD(){const i=indexedDB.deleteDatabase(NT);return new uu(i).toPromise()}function ap(){const i=indexedDB.open(NT,wD);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Cf,{keyPath:IT})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Cf)?e(r):(r.close(),await TD(),e(await ap()))})})}async function x1(i,e,t){const r=id(i,!0).put({[IT]:e,value:t});return new uu(r).toPromise()}async function xD(i,e){const t=id(i,!1).get(e),r=await new uu(t).toPromise();return r===void 0?null:r.value}function S1(i,e){const t=id(i,!0).delete(e);return new uu(t).toPromise()}const SD=800,AD=3;class DT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ap(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>AD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nd._getInstance(ED()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _D(),!this.activeServiceWorker)return;this.sender=new yD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ap();return await x1(e,Rf,"1"),await S1(e,Rf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>x1(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>xD(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>S1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=id(o,!1).getAll();return new uu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}DT.type="LOCAL";const RD=DT;new lu(3e4,6e4);function CD(i,e){return e?Ws(e):(Le(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class h0 extends ET{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return el(e,this._buildIdpRequest())}_linkToIdToken(e,t){return el(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return el(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ND(i){return uD(i.auth,new h0(i),i.bypassAuthState)}function ID(i){const{auth:e,user:t}=i;return Le(t,e,"internal-error"),cD(t,new h0(i),i.bypassAuthState)}async function DD(i){const{auth:e,user:t}=i;return Le(t,e,"internal-error"),lD(t,new h0(i),i.bypassAuthState)}class kT{constructor(e,t,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:c,error:u,type:d}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ND;case"linkViaPopup":case"linkViaRedirect":return DD;case"reauthViaPopup":case"reauthViaRedirect":return ID;default:nr(this.auth,"internal-error")}}resolve(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const kD=new lu(2e3,1e4);class Qo extends kT{constructor(e,t,r,o,c){super(e,t,o,c),this.provider=r,this.authWindow=null,this.pollId=null,Qo.currentPopupAction&&Qo.currentPopupAction.cancel(),Qo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){ir(this.filter.length===1,"Popup operations only handle one event");const e=u0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ss(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ss(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ss(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kD.get())};e()}}Qo.currentPopupAction=null;const OD="pendingRedirect",Zh=new Map;class MD extends kT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Zh.get(this.auth._key());if(!e){try{const r=await VD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Zh.set(this.auth._key(),e)}return this.bypassAuthState||Zh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VD(i,e){const t=LD(e),r=jD(i);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function PD(i,e){Zh.set(i._key(),e)}function jD(i){return Ws(i._redirectPersistence)}function LD(i){return Jh(OD,i.config.apiKey,i.name)}async function UD(i,e,t=!1){if(is(i.app))return Promise.reject(sa(i));const r=td(i),o=CD(r,e),u=await new MD(r,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}const zD=600*1e3;class BD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!OT(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ss(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zD&&this.cachedEventUids.clear(),this.cachedEventUids.has(A1(e))}saveEventToCache(e){this.cachedEventUids.add(A1(e)),this.lastProcessedEventTime=Date.now()}}function A1(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function OT({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function qD(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return OT(i);default:return!1}}async function HD(i,e={}){return bl(i,"GET","/v1/projects",e)}const FD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GD=/^https?/;async function $D(i){if(i.config.emulator)return;const{authorizedDomains:e}=await HD(i);for(const t of e)try{if(KD(t))return}catch{}nr(i,"unauthorized-domain")}function KD(i){const e=sp(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const u=new URL(i);return u.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!GD.test(t))return!1;if(FD.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const QD=new lu(3e4,6e4);function R1(){const i=As().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function YD(i){return new Promise((e,t)=>{function r(){R1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{R1(),t(Ss(i,"network-request-failed"))},timeout:QD.get()})}if(As().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(As().gapi?.load)r();else{const o=eD("iframefcb");return As()[o]=()=>{gapi.load?r():t(Ss(i,"network-request-failed"))},JI(`${ZI()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw ef=null,e})}let ef=null;function XD(i){return ef=ef||YD(i),ef}const WD=new lu(5e3,15e3),JD="__/auth/iframe",ZD="emulator/auth/iframe",ek={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nk(i){const e=i.config;Le(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?a0(e,ZD):`https://${i.config.authDomain}/${JD}`,r={apiKey:e.apiKey,appName:i.name,v:ml},o=tk.get(i.config.apiHost);o&&(r.eid=o);const c=i._getFrameworks();return c.length&&(r.fw=c.join(",")),`${t}?${Jc(r).slice(1)}`}async function ik(i){const e=await XD(i),t=As().gapi;return Le(t,i,"internal-error"),e.open({where:document.body,url:nk(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ek,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const u=Ss(i,"network-request-failed"),d=As().setTimeout(()=>{c(u)},WD.get());function g(){As().clearTimeout(d),o(r)}r.ping(g).then(g,()=>{c(u)})}))}const sk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rk=500,ak=600,ok="_blank",lk="http://localhost";class C1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ck(i,e,t,r=rk,o=ak){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const g={...sk,width:r.toString(),height:o.toString(),top:c,left:u},p=Gn().toLowerCase();t&&(d=dT(p)?ok:t),hT(p)&&(e=e||lk,g.scrollbars="yes");const v=Object.entries(g).reduce((T,[I,P])=>`${T}${I}=${P},`,"");if(FI(p)&&d!=="_self")return uk(e||"",d),new C1(null);const E=window.open(e||"",d,v);Le(E,i,"popup-blocked");try{E.focus()}catch{}return new C1(E)}function uk(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const hk="__/auth/handler",fk="emulator/auth/handler",dk=encodeURIComponent("fac");async function N1(i,e,t,r,o,c){Le(i.config.authDomain,i,"auth-domain-config-required"),Le(i.config.apiKey,i,"invalid-api-key");const u={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:ml,eventId:o};if(e instanceof wT){e.setDefaultLanguage(i.languageCode),u.providerId=e.providerId||"",JA(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))u[v]=E}if(e instanceof cu){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(u.scopes=v.join(","))}i.tenantId&&(u.tid=i.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const g=await i._getAppCheckToken(),p=g?`#${dk}=${encodeURIComponent(g)}`:"";return`${mk(i)}?${Jc(d).slice(1)}${p}`}function mk({config:i}){return i.emulator?a0(i,fk):`https://${i.authDomain}/${hk}`}const Eg="webStorageSupport";class gk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RT,this._completeRedirectFn=UD,this._overrideRedirectResult=PD}async _openPopup(e,t,r,o){ir(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await N1(e,t,r,sp(),o);return ck(e,c,u0())}async _openRedirect(e,t,r,o){await this._originValidation(e);const c=await N1(e,t,r,sp(),o);return vD(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(ir(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await ik(e),r=new BD(e);return t.register("authEvent",o=>(Le(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Eg,{type:Eg},o=>{const c=o?.[0]?.[Eg];c!==void 0&&t(!!c),nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$D(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vT()||fT()||l0()}}const pk=gk;var I1="@firebase/auth",D1="1.12.0";class yk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function vk(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _k(i){il(new Ya("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;Le(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:u,authDomain:d,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_T(i)},p=new XI(r,o,c,g);return nD(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),il(new Ya("auth-internal",e=>{const t=td(e.getProvider("auth").getImmediate());return(r=>new yk(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zr(I1,D1,vk(i)),Zr(I1,D1,"esm2020")}const bk=300,Ek=pE("authIdTokenMaxAge")||bk;let k1=null;const wk=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Ek)return;const o=t?.token;k1!==o&&(k1=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function eo(i=wE()){const e=Ep(i,"auth");if(e.isInitialized())return e.getImmediate();const t=tD(i,{popupRedirectResolver:pk,persistence:[RD,gD,RT]}),r=pE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const u=wk(c.toString());fD(t,u,()=>u(t.currentUser)),hD(t,d=>u(d))}}const o=mE("auth");return o&&iD(t,`http://${o}`),t}function Tk(){return document.getElementsByTagName("head")?.[0]??document}WI({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const c=Ss("internal-error");c.customData=o,t(c)},r.type="text/javascript",r.charset="UTF-8",Tk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_k("Browser");var xk="firebase",Sk="12.7.0";Zr(xk,Sk,"app");const O1={apiKey:"AIzaSyB3ncjSdbTdaUqac5QvHon-Id5mCo3pByM",authDomain:"dragmate-af04d.firebaseapp.com",projectId:"dragmate-af04d",storageBucket:"dragmate-af04d.firebasestorage.app",messagingSenderId:"370425129874",appId:"1:370425129874:web:4c5c526a593e8fa45a6f4b"};let wg=null,Ne=null,tf=null,Nt=!1;try{Object.values(O1).every(Boolean)?(wg=hb().length?hb()[0]:EE(O1),Ne=cI(wg),tf=eo(wg),Nt=!0,console.log(" Firebase initialized for DragMate")):console.warn(" DEMO MODE: Firebase env vars missing. Global features will run in local/demo mode only.")}catch(i){console.error(" Firebase initialization failed:",i)}const M1=3e4;async function Ak(i){return i?i.currentUser?i.currentUser:(await Za(i)).user??null:null}async function V1(i,e){const t=jt(i,"presence",e.uid);await Jf(t,{lastSeen:new Date,status:"online"},{merge:!0})}function Rk(){const[i,e]=z.useState({count:null,loading:!0,error:null,isOnline:!1,isSupported:Nt&&!!Ne&&!!tf});return z.useEffect(()=>{if(!Nt||!Ne||!tf){e(g=>({...g,loading:!1,isSupported:!1}));return}const t=Ne,r=tf;let o=!1,c=null,u=null;return(async()=>{try{const g=await Ak(r);if(!g||o)return;await V1(t,g),e(E=>({...E,isOnline:!0,isSupported:!0})),c=window.setInterval(()=>{V1(t,g).catch(E=>{console.error("Failed to update presence",E)})},M1/2);const p=new Date(Date.now()-M1),v=_I(Pt(t,"presence"),bI("lastSeen",">=",p));u=Zf(v,E=>{o||e(T=>({...T,count:E.size,loading:!1,error:null}))},E=>{console.error("Presence subscription error",E),!o&&e(T=>({...T,loading:!1,error:E.message??"Failed to subscribe to presence"}))})}catch(g){if(console.error("Presence initialization failed",g),o)return;e(p=>({...p,loading:!1,error:g?.message??"Presence initialization failed",isSupported:!1}))}})(),()=>{o=!0,c!==null&&window.clearInterval(c),u&&u()}},[]),i}const Ck=({onCreateRoom:i,onJoinRoom:e,onStartLocal:t,isAuthLoading:r,onSelectGame:o,selectedGame:c,onCreateOkeyRoom:u,onJoinOkeyRoom:d,onStartOkeyGame:g,okeyRoom:p,okeyUserId:v})=>{const[E,T]=z.useState("game-select"),[I,P]=z.useState(""),[H,k]=z.useState(!1),[j,Q]=z.useState(""),[G,he]=z.useState(!1),[F,U]=z.useState(""),[S,x]=z.useState(!1),{count:R,loading:M,isSupported:C}=Rk(),O=async()=>{k(!0);try{await i()}finally{k(!1)}},D=async()=>{if(console.log("handleCreateOkeyRoom called, playerName:",j,"onCreateOkeyRoom:",!!u),!j.trim()||!u){console.log("Early return - playerName empty or onCreateOkeyRoom missing");return}k(!0);try{console.log("Calling onCreateOkeyRoom...");const oe=await u(j.trim());console.log("Room created, roomId:",oe),oe&&T("okey-waiting")}catch(oe){console.error("Error in handleCreateOkeyRoom:",oe)}finally{k(!1)}},Ee=async()=>{if(!(!j.trim()||!F.trim()||!d)){he(!0);try{await d(F.trim().toUpperCase(),j.trim())&&T("okey-waiting")}finally{he(!1)}}},ge=()=>{p?.roomId&&(navigator.clipboard.writeText(p.roomId),x(!0),setTimeout(()=>x(!1),2e3))},q=p?.hostUserId===v,se=()=>_.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-500",children:[_.jsx("h2",{className:"text-2xl font-bold text-white text-center",children:"Choose Your Game"}),_.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[_.jsx("button",{onClick:()=>{o("chess"),T("mode-select")},className:"group relative w-full aspect-square sm:aspect-[4/5] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-indigo-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-indigo-500/20 overflow-hidden text-left p-4 sm:p-6 flex flex-col justify-between",children:_.jsxs("div",{children:[_.jsx(Vg,{className:"w-8 h-8 sm:w-10 sm:h-10 text-indigo-400 mb-2 sm:mb-3 group-hover:scale-110 transition-transform"}),_.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white",children:"CHESS"}),_.jsx("p",{className:"text-slate-400 text-xs sm:text-sm font-medium mt-1",children:"Classic strategy."})]})}),_.jsxs("button",{onClick:()=>{o("backgammon"),T("mode-select")},className:"group relative w-full aspect-square sm:aspect-[4/5] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-emerald-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-emerald-500/20 overflow-hidden text-left p-4 sm:p-6 flex flex-col justify-between",children:[_.jsx("div",{className:"absolute top-0 right-0 p-1.5 sm:p-2 bg-emerald-500/10 text-emerald-300 rounded-bl-2xl text-[8px] sm:text-[10px] font-black uppercase tracking-widest border-b border-l border-emerald-500/20",children:"New"}),_.jsxs("div",{children:[_.jsx(lA,{className:"w-8 h-8 sm:w-10 sm:h-10 text-emerald-400 mb-2 sm:mb-3 group-hover:scale-110 transition-transform"}),_.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white",children:"TAVLA"}),_.jsx("p",{className:"text-slate-400 text-xs sm:text-sm font-medium mt-1",children:"Persian legacy."})]})]}),_.jsxs("button",{onClick:()=>{o("okey"),T("mode-select")},className:"group relative w-full aspect-square sm:aspect-[4/5] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-amber-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-amber-500/20 overflow-hidden text-left p-4 sm:p-6 flex flex-col justify-between",children:[_.jsx("div",{className:"absolute top-0 right-0 p-1.5 sm:p-2 bg-amber-500/10 text-amber-300 rounded-bl-2xl text-[8px] sm:text-[10px] font-black uppercase tracking-widest border-b border-l border-amber-500/20",children:"Top"}),_.jsxs("div",{children:[_.jsx(dA,{className:"w-8 h-8 sm:w-10 sm:h-10 text-amber-400 mb-2 sm:mb-3 group-hover:scale-110 transition-transform"}),_.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white",children:"OKEY"}),_.jsx("p",{className:"text-slate-400 text-xs sm:text-sm font-medium mt-1",children:"Turkish Rummy."})]})]})]})]}),re=()=>_.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-right-8 duration-500",children:[_.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[_.jsx("button",{onClick:()=>T("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:_.jsx(Ha,{size:20})}),_.jsx("h2",{className:"text-2xl font-bold text-white",children:"Select Threat Level"})]}),_.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[_.jsx("button",{onClick:()=>t("Easy"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-green-500/50 hover:bg-slate-800 transition-all",children:_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("div",{className:"p-3 rounded-full bg-green-500/10 text-green-400",children:_.jsx(Fa,{size:20})}),_.jsxs("div",{className:"text-left",children:[_.jsx("div",{className:"text-lg font-bold text-white",children:"Easy"}),_.jsx("div",{className:"text-xs text-slate-500",children:"Casual play"})]})]})}),_.jsx("button",{onClick:()=>t("Normal"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-indigo-500/50 hover:bg-slate-800 transition-all",children:_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("div",{className:"p-3 rounded-full bg-indigo-500/10 text-indigo-400",children:_.jsx(Fa,{size:20})}),_.jsxs("div",{className:"text-left",children:[_.jsx("div",{className:"text-lg font-bold text-white",children:"Normal"}),_.jsx("div",{className:"text-xs text-slate-500",children:"Balanced opponent"})]})]})}),_.jsx("button",{onClick:()=>t("Hard"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-red-500/50 hover:bg-slate-800 transition-all",children:_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("div",{className:"p-3 rounded-full bg-red-500/10 text-red-400",children:_.jsx(Vg,{size:20})}),_.jsxs("div",{className:"text-left",children:[_.jsx("div",{className:"text-lg font-bold text-white",children:"Hard"}),_.jsx("div",{className:"text-xs text-slate-500",children:"Ruthless tactics"})]})]})})]})]}),pe=()=>_.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-right-8 duration-500",children:[_.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[_.jsx("button",{onClick:()=>T("game-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:_.jsx(Ha,{size:20})}),_.jsx("h2",{className:"text-2xl font-bold text-white",children:"Select Mode"})]}),_.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[_.jsxs("button",{onClick:()=>T("difficulty-select"),className:"group flex flex-col items-center justify-center gap-4 p-8 bg-slate-800/50 rounded-2xl border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all",children:[_.jsx("div",{className:"p-4 rounded-full bg-emerald-500/10 text-emerald-400 group-hover:scale-110 transition-transform",children:_.jsx(Fa,{size:32})}),_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"text-xl font-bold text-white",children:"Single Player"}),_.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"Vs Computer"})]})]}),_.jsxs("button",{onClick:()=>T(c==="okey"?"okey-name":"connection"),className:"group flex flex-col items-center justify-center gap-4 p-8 bg-slate-800/50 rounded-2xl border border-slate-700 hover:border-indigo-500/50 hover:bg-slate-800 transition-all",children:[_.jsx("div",{className:"p-4 rounded-full bg-indigo-500/10 text-indigo-400 group-hover:scale-110 transition-transform",children:_.jsx(Vf,{size:32})}),_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"text-xl font-bold text-white",children:"Multiplayer"}),_.jsx("div",{className:"text-sm text-slate-500 mt-1",children:c==="okey"?"1-4 Players":"Online PvP"})]})]})]})]}),ve=()=>_.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500",children:[_.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[_.jsx("button",{onClick:()=>T("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:_.jsx(Ha,{size:20})}),_.jsx("h2",{className:"text-2xl font-bold text-white",children:"Multiplayer"})]}),_.jsxs("div",{className:"space-y-6",children:[_.jsxs("button",{onClick:O,disabled:H||r,className:"w-full btn-premium flex items-center justify-center gap-3 sm:gap-4 text-lg py-4 group disabled:opacity-50 disabled:cursor-not-allowed",children:[H||r?_.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"}):_.jsx(nb,{size:24,className:"transition-transform group-hover:rotate-90"}),_.jsx("span",{children:r?"Initializing...":H?"Creating Arena...":"Create New Room"})]}),_.jsxs("div",{className:"relative flex items-center gap-6",children:[_.jsx("div",{className:"flex-1 h-px bg-slate-800"}),_.jsx("span",{className:"text-slate-600 text-xs font-black uppercase tracking-[0.2em]",children:"OR JOIN"}),_.jsx("div",{className:"flex-1 h-px bg-slate-800"})]}),_.jsxs("div",{className:"flex gap-3",children:[_.jsx("input",{type:"text",placeholder:"Enter Room ID",value:I,onChange:oe=>P(oe.target.value),className:"flex-1 bg-slate-900/40 border border-slate-800/50 rounded-xl px-4 py-4 text-lg placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all"}),_.jsx("button",{onClick:()=>e(I),disabled:!I.trim()||r,className:"bg-slate-800 hover:bg-slate-700 text-white disabled:opacity-50 px-6 rounded-xl transition-all font-bold shadow-lg",children:_.jsx(tb,{size:24})})]})]})]}),V=()=>_.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500",children:[_.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[_.jsx("button",{onClick:()=>T("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:_.jsx(Ha,{size:20})}),_.jsx("h2",{className:"text-2xl font-bold text-white",children:"Okey Multiplayer"})]}),_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{className:"text-sm font-medium text-slate-400",children:"Your Name"}),_.jsx("input",{type:"text",placeholder:"Enter your name...",value:j,onChange:oe=>Q(oe.target.value),maxLength:20,className:"w-full bg-slate-900/40 border border-slate-800/50 rounded-xl px-4 py-4 text-lg placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-amber-500/30 transition-all"})]}),_.jsxs("button",{onClick:D,disabled:!j.trim()||H||r,className:"w-full bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-bold flex items-center justify-center gap-3 text-lg py-4 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg shadow-amber-500/20",children:[H?_.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"}):_.jsx(nb,{size:24}),_.jsx("span",{children:H?"Creating Room...":"Create New Room"})]}),_.jsxs("div",{className:"relative flex items-center gap-6",children:[_.jsx("div",{className:"flex-1 h-px bg-slate-800"}),_.jsx("span",{className:"text-slate-600 text-xs font-black uppercase tracking-[0.2em]",children:"OR JOIN"}),_.jsx("div",{className:"flex-1 h-px bg-slate-800"})]}),_.jsxs("div",{className:"flex gap-3",children:[_.jsx("input",{type:"text",placeholder:"Room ID",value:F,onChange:oe=>U(oe.target.value.toUpperCase()),maxLength:10,className:"flex-1 bg-slate-900/40 border border-slate-800/50 rounded-xl px-4 py-4 text-lg placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-amber-500/30 transition-all uppercase"}),_.jsx("button",{onClick:Ee,disabled:!j.trim()||!F.trim()||G||r,className:"bg-slate-800 hover:bg-slate-700 text-white disabled:opacity-50 px-6 rounded-xl transition-all font-bold shadow-lg",children:G?_.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"}):_.jsx(tb,{size:24})})]}),_.jsx("p",{className:"text-xs text-slate-600 text-center",children:"Create a room and share the ID with friends. Empty slots will be filled with AI."})]})]}),$=()=>{if(!p)return _.jsx("div",{className:"flex items-center justify-center py-20",children:_.jsx("div",{className:"w-8 h-8 border-2 border-amber-500/20 border-t-amber-500 rounded-full animate-spin"})});const oe=p.players.filter(ce=>ce.odaUserId&&!ce.adIsAI).length;return _.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500",children:[_.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[_.jsx("button",{onClick:()=>T("okey-name"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:_.jsx(Ha,{size:20})}),_.jsx("h2",{className:"text-2xl font-bold text-white",children:"Waiting Room"})]}),_.jsx("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-bold",children:"Room ID"}),_.jsx("p",{className:"text-2xl font-black text-amber-400 tracking-widest",children:p.roomId})]}),_.jsx("button",{onClick:ge,className:"p-3 bg-slate-700/50 hover:bg-slate-700 rounded-lg transition-colors",children:S?_.jsx(iA,{size:20,className:"text-green-400"}):_.jsx(yp,{size:20,className:"text-slate-400"})})]})}),_.jsxs("div",{className:"space-y-3",children:[_.jsxs("p",{className:"text-sm font-medium text-slate-400",children:["Players (",oe,"/4)"]}),_.jsx("div",{className:"grid grid-cols-2 gap-3",children:p.players.map((ce,_e)=>{const we=ce.odaUserId===v,Oe=!ce.odaUserId,ht=ce.odaUserId===p.hostUserId;return _.jsx("div",{className:`p-4 rounded-xl border transition-all ${Oe?"bg-slate-900/30 border-slate-800 border-dashed":we?"bg-amber-500/10 border-amber-500/50":"bg-slate-800/50 border-slate-700"}`,children:_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:`p-2 rounded-full ${Oe?"bg-slate-800":we?"bg-amber-500/20":"bg-slate-700"}`,children:Oe?_.jsx(of,{size:18,className:"text-slate-600"}):_.jsx(Fa,{size:18,className:we?"text-amber-400":"text-slate-400"})}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsx("p",{className:`font-bold truncate ${Oe?"text-slate-600":we?"text-amber-400":"text-white"}`,children:Oe?"Waiting...":ce.adPlayerName}),_.jsx("p",{className:"text-xs text-slate-500",children:ht?" Host":Oe?"Will be AI":`Seat ${_e+1}`})]})]})},_e)})})]}),q&&_.jsxs("button",{onClick:g,className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-bold flex items-center justify-center gap-3 text-lg py-4 rounded-xl transition-all shadow-lg shadow-green-500/20",children:[_.jsx(_A,{size:24}),_.jsx("span",{children:"Start Game"})]}),!q&&_.jsx("div",{className:"text-center py-4",children:_.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[_.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full animate-pulse"}),_.jsx("span",{className:"text-sm",children:"Waiting for host to start..."})]})}),_.jsx("p",{className:"text-xs text-slate-600 text-center",children:"Share the Room ID with friends. Empty seats will be filled with AI players."})]})};return _.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[85vh] gap-8 lg:gap-12 relative overflow-hidden px-4",children:[_.jsx("div",{className:"text-center space-y-4 lg:space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-1000",children:_.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-8xl font-black tracking-normal pb-4 bg-clip-text text-transparent bg-linear-to-b from-white via-indigo-100 to-indigo-400",children:"DragMate"})}),_.jsxs("div",{className:"liquid-glass p-6 sm:p-8 w-full max-w-xl min-h-[400px] flex flex-col justify-center",children:[E==="game-select"&&se(),E==="mode-select"&&pe(),E==="difficulty-select"&&re(),E==="connection"&&ve(),E==="okey-name"&&V(),E==="okey-waiting"&&$()]}),_.jsx("div",{className:"flex items-center gap-10 text-slate-600 font-bold uppercase tracking-widest text-[10px] animate-in fade-in duration-1000 delay-500",children:_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${C?"bg-green-500":"bg-slate-600"}`}),C?`${M?"...":(R??0).toLocaleString()} Online`:"Demo Mode"]})})]})};function Nk(i){return i!==null?{comment:i,variations:[]}:{variations:[]}}function Ik(i,e,t,r,o){const c={move:i,variations:o};return e&&(c.suffix=e),t&&(c.nag=t),r!==null&&(c.comment=r),c}function Dk(...i){const[e,...t]=i;let r=e;for(const o of t)o!==null&&(r.variations=[o,...o.variations],o.variations=[],r=o);return e}function kk(i,e){if(e.marker&&e.marker.comment){let t=e.root;for(;;){const r=t.variations[0];if(!r){t.comment=e.marker.comment;break}t=r}}return{headers:i,root:e.root,result:(e.marker&&e.marker.result)??void 0}}function Ok(i,e){function t(){this.constructor=i}t.prototype=e.prototype,i.prototype=new t}function hl(i,e,t,r){var o=Error.call(this,i);return Object.setPrototypeOf&&Object.setPrototypeOf(o,hl.prototype),o.expected=e,o.found=t,o.location=r,o.name="SyntaxError",o}Ok(hl,Error);function Tg(i,e,t){return t=t||" ",i.length>e?i:(e-=i.length,t+=t.repeat(e),i+t.slice(0,e))}hl.prototype.format=function(i){var e="Error: "+this.message;if(this.location){var t=null,r;for(r=0;r<i.length;r++)if(i[r].source===this.location.source){t=i[r].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,c=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(o):o,u=this.location.source+":"+c.line+":"+c.column;if(t){var d=this.location.end,g=Tg("",c.line.toString().length," "),p=t[o.line-1],v=o.line===d.line?d.column:p.length+1,E=v-o.column||1;e+=`
 --> `+u+`
`+g+` |
`+c.line+" | "+p+`
`+g+" | "+Tg("",o.column-1," ")+Tg("",E,"^")}else e+=`
 at `+u}return e};hl.buildMessage=function(i,e){var t={literal:function(p){return'"'+o(p.text)+'"'},class:function(p){var v=p.parts.map(function(E){return Array.isArray(E)?c(E[0])+"-"+c(E[1]):c(E)});return"["+(p.inverted?"^":"")+v.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(p){return p.description}};function r(p){return p.charCodeAt(0).toString(16).toUpperCase()}function o(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+r(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+r(v)})}function c(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+r(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+r(v)})}function u(p){return t[p.type](p)}function d(p){var v=p.map(u),E,T;if(v.sort(),v.length>0){for(E=1,T=1;E<v.length;E++)v[E-1]!==v[E]&&(v[T]=v[E],T++);v.length=T}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}function g(p){return p?'"'+o(p)+'"':"end of input"}return"Expected "+d(i)+" but "+g(e)+" found."};function Mk(i,e){e=e!==void 0?e:{};var t={},r=e.grammarSource,o={pgn:io},c=io,u="[",d='"',g="]",p=".",v="O-O-O",E="O-O",T="0-0-0",I="0-0",P="$",H="{",k="}",j=";",Q="(",G=")",he="1-0",F="0-1",U="1/2-1/2",S="*",x=/^[a-zA-Z]/,R=/^[^"]/,M=/^[0-9]/,C=/^[.]/,O=/^[a-zA-Z1-8\-=]/,D=/^[+#]/,Ee=/^[!?]/,ge=/^[^}]/,q=/^[^\r\n]/,se=/^[ \t\r\n]/,re=vt("tag pair"),pe=st("[",!1),ve=st('"',!1),V=st("]",!1),$=vt("tag name"),oe=Ot([["a","z"],["A","Z"]],!1,!1),ce=vt("tag value"),_e=Ot(['"'],!0,!1),we=vt("move number"),Oe=Ot([["0","9"]],!1,!1),ht=st(".",!1),ft=Ot(["."],!1,!1),$t=vt("standard algebraic notation"),xi=st("O-O-O",!1),Ln=st("O-O",!1),qi=st("0-0-0",!1),en=st("0-0",!1),fi=Ot([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),Un=Ot(["+","#"],!1,!1),os=vt("suffix annotation"),Hi=Ot(["!","?"],!1,!1),St=vt("NAG"),dt=st("$",!1),$n=vt("brace comment"),ls=st("{",!1),cs=Ot(["}"],!0,!1),tn=st("}",!1),Fi=vt("rest of line comment"),Cs=st(";",!1),Kn=Ot(["\r",`
`],!0,!1),Cn=vt("variation"),Gi=st("(",!1),Ns=st(")",!1),Qn=vt("game termination marker"),Is=st("1-0",!1),Yn=st("0-1",!1),Kt=st("1/2-1/2",!1),bn=st("*",!1),At=vt("whitespace"),Ds=Ot([" ","	","\r",`
`],!1,!1),$i=function(Y,ne){return kk(Y,ne)},ar=function(Y){return Object.fromEntries(Y)},ni=function(Y,ne){return[Y,ne]},Ki=function(Y,ne){return{root:Y,marker:ne}},Ge=function(Y,ne){return Dk(Nk(Y),...ne.flat())},Rt=function(Y,ne,Z,xe,Ie){return Ik(Y,ne,Z,xe,Ie)},Ct=function(Y){return Y},Bt=function(Y){return Y.replace(/[\r\n]+/g," ")},En=function(Y){return Y.trim()},nn=function(Y){return Y},Lt=function(Y,ne){return{result:Y,comment:ne}},te=e.peg$currPos|0,pt=[{line:1,column:1}],yt=te,Qt=e.peg$maxFailExpected||[],ye=e.peg$silentFails|0,mn;if(e.startRule){if(!(e.startRule in o))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');c=o[e.startRule]}function st(Y,ne){return{type:"literal",text:Y,ignoreCase:ne}}function Ot(Y,ne,Z){return{type:"class",parts:Y,inverted:ne,ignoreCase:Z}}function gn(){return{type:"end"}}function vt(Y){return{type:"other",description:Y}}function Ut(Y){var ne=pt[Y],Z;if(ne)return ne;if(Y>=pt.length)Z=pt.length-1;else for(Z=Y;!pt[--Z];);for(ne=pt[Z],ne={line:ne.line,column:ne.column};Z<Y;)i.charCodeAt(Z)===10?(ne.line++,ne.column=1):ne.column++,Z++;return pt[Y]=ne,ne}function Yt(Y,ne,Z){var xe=Ut(Y),Ie=Ut(ne),tt={source:r,start:{offset:Y,line:xe.line,column:xe.column},end:{offset:ne,line:Ie.line,column:Ie.column}};return tt}function Ae(Y){te<yt||(te>yt&&(yt=te,Qt=[]),Qt.push(Y))}function or(Y,ne,Z){return new hl(hl.buildMessage(Y,ne),Y,ne,Z)}function io(){var Y,ne,Z;return Y=te,ne=so(),Z=Ai(),Y=$i(ne,Z),Y}function so(){var Y,ne,Z;for(Y=te,ne=[],Z=ma();Z!==t;)ne.push(Z),Z=ma();return Z=sn(),Y=ar(ne),Y}function ma(){var Y,ne,Z,xe,Ie,tt,$e;return ye++,Y=te,sn(),i.charCodeAt(te)===91?(ne=u,te++):(ne=t,ye===0&&Ae(pe)),ne!==t?(sn(),Z=Si(),Z!==t?(sn(),i.charCodeAt(te)===34?(xe=d,te++):(xe=t,ye===0&&Ae(ve)),xe!==t?(Ie=lr(),i.charCodeAt(te)===34?(tt=d,te++):(tt=t,ye===0&&Ae(ve)),tt!==t?(sn(),i.charCodeAt(te)===93?($e=g,te++):($e=t,ye===0&&Ae(V)),$e!==t?Y=ni(Z,Ie):(te=Y,Y=t)):(te=Y,Y=t)):(te=Y,Y=t)):(te=Y,Y=t)):(te=Y,Y=t),ye--,Y===t&&ye===0&&Ae(re),Y}function Si(){var Y,ne,Z;if(ye++,Y=te,ne=[],Z=i.charAt(te),x.test(Z)?te++:(Z=t,ye===0&&Ae(oe)),Z!==t)for(;Z!==t;)ne.push(Z),Z=i.charAt(te),x.test(Z)?te++:(Z=t,ye===0&&Ae(oe));else ne=t;return ne!==t?Y=i.substring(Y,te):Y=ne,ye--,Y===t&&(ne=t,ye===0&&Ae($)),Y}function lr(){var Y,ne,Z;for(ye++,Y=te,ne=[],Z=i.charAt(te),R.test(Z)?te++:(Z=t,ye===0&&Ae(_e));Z!==t;)ne.push(Z),Z=i.charAt(te),R.test(Z)?te++:(Z=t,ye===0&&Ae(_e));return Y=i.substring(Y,te),ye--,ne=t,ye===0&&Ae(ce),Y}function Ai(){var Y,ne,Z;return Y=te,ne=Xn(),sn(),Z=ya(),Z===t&&(Z=null),sn(),Y=Ki(ne,Z),Y}function Xn(){var Y,ne,Z,xe;for(Y=te,ne=ii(),ne===t&&(ne=null),Z=[],xe=zn();xe!==t;)Z.push(xe),xe=zn();return Y=Ge(ne,Z),Y}function zn(){var Y,ne,Z,xe,Ie,tt,$e,Ni;if(Y=te,sn(),Ri(),sn(),ne=qt(),ne!==t){for(Z=ga(),Z===t&&(Z=null),xe=[],Ie=cr();Ie!==t;)xe.push(Ie),Ie=cr();for(Ie=sn(),tt=ii(),tt===t&&(tt=null),$e=[],Ni=ur();Ni!==t;)$e.push(Ni),Ni=ur();Y=Rt(ne,Z,xe,tt,$e)}else te=Y,Y=t;return Y}function Ri(){var Y,ne,Z,xe,Ie,tt;for(ye++,Y=te,ne=[],Z=i.charAt(te),M.test(Z)?te++:(Z=t,ye===0&&Ae(Oe));Z!==t;)ne.push(Z),Z=i.charAt(te),M.test(Z)?te++:(Z=t,ye===0&&Ae(Oe));if(i.charCodeAt(te)===46?(Z=p,te++):(Z=t,ye===0&&Ae(ht)),Z!==t){for(xe=sn(),Ie=[],tt=i.charAt(te),C.test(tt)?te++:(tt=t,ye===0&&Ae(ft));tt!==t;)Ie.push(tt),tt=i.charAt(te),C.test(tt)?te++:(tt=t,ye===0&&Ae(ft));ne=[ne,Z,xe,Ie],Y=ne}else te=Y,Y=t;return ye--,Y===t&&(ne=t,ye===0&&Ae(we)),Y}function qt(){var Y,ne,Z,xe,Ie,tt;if(ye++,Y=te,ne=te,i.substr(te,5)===v?(Z=v,te+=5):(Z=t,ye===0&&Ae(xi)),Z===t&&(i.substr(te,3)===E?(Z=E,te+=3):(Z=t,ye===0&&Ae(Ln)),Z===t&&(i.substr(te,5)===T?(Z=T,te+=5):(Z=t,ye===0&&Ae(qi)),Z===t&&(i.substr(te,3)===I?(Z=I,te+=3):(Z=t,ye===0&&Ae(en)),Z===t))))if(Z=te,xe=i.charAt(te),x.test(xe)?te++:(xe=t,ye===0&&Ae(oe)),xe!==t){if(Ie=[],tt=i.charAt(te),O.test(tt)?te++:(tt=t,ye===0&&Ae(fi)),tt!==t)for(;tt!==t;)Ie.push(tt),tt=i.charAt(te),O.test(tt)?te++:(tt=t,ye===0&&Ae(fi));else Ie=t;Ie!==t?(xe=[xe,Ie],Z=xe):(te=Z,Z=t)}else te=Z,Z=t;return Z!==t?(xe=i.charAt(te),D.test(xe)?te++:(xe=t,ye===0&&Ae(Un)),xe===t&&(xe=null),Z=[Z,xe],ne=Z):(te=ne,ne=t),ne!==t?Y=i.substring(Y,te):Y=ne,ye--,Y===t&&(ne=t,ye===0&&Ae($t)),Y}function ga(){var Y,ne,Z;for(ye++,Y=te,ne=[],Z=i.charAt(te),Ee.test(Z)?te++:(Z=t,ye===0&&Ae(Hi));Z!==t;)ne.push(Z),ne.length>=2?Z=t:(Z=i.charAt(te),Ee.test(Z)?te++:(Z=t,ye===0&&Ae(Hi)));return ne.length<1?(te=Y,Y=t):Y=ne,ye--,Y===t&&(ne=t,ye===0&&Ae(os)),Y}function cr(){var Y,ne,Z,xe,Ie;if(ye++,Y=te,sn(),i.charCodeAt(te)===36?(ne=P,te++):(ne=t,ye===0&&Ae(dt)),ne!==t){if(Z=te,xe=[],Ie=i.charAt(te),M.test(Ie)?te++:(Ie=t,ye===0&&Ae(Oe)),Ie!==t)for(;Ie!==t;)xe.push(Ie),Ie=i.charAt(te),M.test(Ie)?te++:(Ie=t,ye===0&&Ae(Oe));else xe=t;xe!==t?Z=i.substring(Z,te):Z=xe,Z!==t?Y=Ct(Z):(te=Y,Y=t)}else te=Y,Y=t;return ye--,Y===t&&ye===0&&Ae(St),Y}function ii(){var Y;return Y=Ci(),Y===t&&(Y=pa()),Y}function Ci(){var Y,ne,Z,xe,Ie;if(ye++,Y=te,i.charCodeAt(te)===123?(ne=H,te++):(ne=t,ye===0&&Ae(ls)),ne!==t){for(Z=te,xe=[],Ie=i.charAt(te),ge.test(Ie)?te++:(Ie=t,ye===0&&Ae(cs));Ie!==t;)xe.push(Ie),Ie=i.charAt(te),ge.test(Ie)?te++:(Ie=t,ye===0&&Ae(cs));Z=i.substring(Z,te),i.charCodeAt(te)===125?(xe=k,te++):(xe=t,ye===0&&Ae(tn)),xe!==t?Y=Bt(Z):(te=Y,Y=t)}else te=Y,Y=t;return ye--,Y===t&&(ne=t,ye===0&&Ae($n)),Y}function pa(){var Y,ne,Z,xe,Ie;if(ye++,Y=te,i.charCodeAt(te)===59?(ne=j,te++):(ne=t,ye===0&&Ae(Cs)),ne!==t){for(Z=te,xe=[],Ie=i.charAt(te),q.test(Ie)?te++:(Ie=t,ye===0&&Ae(Kn));Ie!==t;)xe.push(Ie),Ie=i.charAt(te),q.test(Ie)?te++:(Ie=t,ye===0&&Ae(Kn));Z=i.substring(Z,te),Y=En(Z)}else te=Y,Y=t;return ye--,Y===t&&(ne=t,ye===0&&Ae(Fi)),Y}function ur(){var Y,ne,Z,xe;return ye++,Y=te,sn(),i.charCodeAt(te)===40?(ne=Q,te++):(ne=t,ye===0&&Ae(Gi)),ne!==t?(Z=Xn(),Z!==t?(sn(),i.charCodeAt(te)===41?(xe=G,te++):(xe=t,ye===0&&Ae(Ns)),xe!==t?Y=nn(Z):(te=Y,Y=t)):(te=Y,Y=t)):(te=Y,Y=t),ye--,Y===t&&ye===0&&Ae(Cn),Y}function ya(){var Y,ne,Z;return ye++,Y=te,i.substr(te,3)===he?(ne=he,te+=3):(ne=t,ye===0&&Ae(Is)),ne===t&&(i.substr(te,3)===F?(ne=F,te+=3):(ne=t,ye===0&&Ae(Yn)),ne===t&&(i.substr(te,7)===U?(ne=U,te+=7):(ne=t,ye===0&&Ae(Kt)),ne===t&&(i.charCodeAt(te)===42?(ne=S,te++):(ne=t,ye===0&&Ae(bn))))),ne!==t?(sn(),Z=ii(),Z===t&&(Z=null),Y=Lt(ne,Z)):(te=Y,Y=t),ye--,Y===t&&(ne=t,ye===0&&Ae(Qn)),Y}function sn(){var Y,ne;for(ye++,Y=[],ne=i.charAt(te),se.test(ne)?te++:(ne=t,ye===0&&Ae(Ds));ne!==t;)Y.push(ne),ne=i.charAt(te),se.test(ne)?te++:(ne=t,ye===0&&Ae(Ds));return ye--,ne=t,ye===0&&Ae(At),Y}if(mn=c(),e.peg$library)return{peg$result:mn,peg$currPos:te,peg$FAILED:t,peg$maxFailExpected:Qt,peg$maxFailPos:yt};if(mn!==t&&te===i.length)return mn;throw mn!==t&&te<i.length&&Ae(gn()),or(Qt,yt<i.length?i.charAt(yt):null,yt<i.length?Yt(yt,yt+1):Yt(yt,yt))}const nf=0xffffffffffffffffn;function xg(i,e){return(i<<e|i>>64n-e)&0xffffffffffffffffn}function P1(i,e){return i*e&nf}function Vk(i){return function(){let e=BigInt(i&nf),t=BigInt(i>>64n&nf);const r=P1(xg(P1(e,5n),7n),9n);return t^=e,e=(xg(e,24n)^t^t<<16n)&nf,t=xg(t,37n),i=t<<64n|e,r}}const sd=Vk(0xa187eb39cdcaed8f31c4b365b102e01en),Pk=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>sd()))),jk=Array.from({length:8},()=>sd()),Lk=Array.from({length:16},()=>sd()),Sg=sd(),Hn="w",bi="b",cn="p",op="n",sf="b",wc="r",Fr="q",yn="k",Ag="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Bh{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(e,t){const{color:r,piece:o,from:c,to:u,flags:d,captured:g,promotion:p}=t,v=Tn(c),E=Tn(u);this.color=r,this.piece=o,this.from=v,this.to=E,this.san=e._moveToSan(t,e._moves({legal:!0})),this.lan=v+E,this.before=e.fen(),e._makeMove(t),this.after=e.fen(),e._undoMove(),this.flags="";for(const T in Ue)Ue[T]&d&&(this.flags+=Ba[T]);g&&(this.captured=g),p&&(this.promotion=p,this.lan+=p)}isCapture(){return this.flags.indexOf(Ba.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(Ba.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(Ba.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(Ba.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(Ba.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(Ba.BIG_PAWN)>-1}}const Mn=-1,Ba={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},Ue={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},lp={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},Uk={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},zk={...lp,...Uk},je={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Rg={b:[16,32,17,15],w:[-16,-32,-17,-15]},j1={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},Bk=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],qk=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],Hk={p:1,n:2,b:4,r:8,q:16,k:32},Fk="pnbrqkPNBRQK",L1=[op,sf,wc,Fr],Gk=7,$k=6,Kk=1,Qk=0,qh={[yn]:Ue.KSIDE_CASTLE,[Fr]:Ue.QSIDE_CASTLE},qr={w:[{square:je.a1,flag:Ue.QSIDE_CASTLE},{square:je.h1,flag:Ue.KSIDE_CASTLE}],b:[{square:je.a8,flag:Ue.QSIDE_CASTLE},{square:je.h8,flag:Ue.KSIDE_CASTLE}]},Yk={b:Kk,w:$k},Cg="--";function $a(i){return i>>4}function Kc(i){return i&15}function MT(i){return"0123456789".indexOf(i)!==-1}function Tn(i){const e=Kc(i),t=$a(i);return"abcdefgh".substring(e,e+1)+"87654321".substring(t,t+1)}function yc(i){return i===Hn?bi:Hn}function Xk(i){const e=i.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const t=parseInt(e[5],10);if(isNaN(t)||t<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(e[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const o=e[0].split("/");if(o.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let u=0;u<o.length;u++){let d=0,g=!1;for(let p=0;p<o[u].length;p++)if(MT(o[u][p])){if(g)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};d+=parseInt(o[u][p],10),g=!0}else{if(!/^[prnbqkPRNBQK]$/.test(o[u][p]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};d+=1,g=!1}if(d!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const c=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:u,regex:d}of c){if(!d.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${u} king`};if((e[0].match(d)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${u} kings`}}return Array.from(o[0]+o[7]).some(u=>u.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function Wk(i,e){const t=i.from,r=i.to,o=i.piece;let c=0,u=0,d=0;for(let g=0,p=e.length;g<p;g++){const v=e[g].from,E=e[g].to,T=e[g].piece;o===T&&t!==v&&r===E&&(c++,$a(t)===$a(v)&&u++,Kc(t)===Kc(v)&&d++)}return c>0?u>0&&d>0?Tn(t):d>0?Tn(t).charAt(1):Tn(t).charAt(0):""}function Hr(i,e,t,r,o,c=void 0,u=Ue.NORMAL){const d=$a(r);if(o===cn&&(d===Gk||d===Qk))for(let g=0;g<L1.length;g++){const p=L1[g];i.push({color:e,from:t,to:r,piece:o,captured:c,promotion:p,flags:u|Ue.PROMOTION})}else i.push({color:e,from:t,to:r,piece:o,captured:c,flags:u})}function U1(i){let e=i.charAt(0);return e>="a"&&e<="h"?i.match(/[a-h]\d.*[a-h]\d/)?void 0:cn:(e=e.toLowerCase(),e==="o"?yn:e)}function Ng(i){return i.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class f0{_board=new Array(128);_turn=Hn;_header={};_kings={w:Mn,b:Mn};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_hash=0n;_positionCount=new Map;constructor(e=Ag,{skipValidation:t=!1}={}){this.load(e,{skipValidation:t})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:Mn,b:Mn},this._turn=Hn,this._castling={w:0,b:0},this._epSquare=Mn,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...zk},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:t=!1,preserveHeaders:r=!1}={}){let o=e.split(/\s+/);if(o.length>=2&&o.length<6){const d=["-","-","0","1"];e=o.concat(d.slice(-(6-o.length))).join(" ")}if(o=e.split(/\s+/),!t){const{ok:d,error:g}=Xk(e);if(!d)throw new Error(g)}const c=o[0];let u=0;this.clear({preserveHeaders:r});for(let d=0;d<c.length;d++){const g=c.charAt(d);if(g==="/")u+=8;else if(MT(g))u+=parseInt(g,10);else{const p=g<"a"?Hn:bi;this._put({type:g.toLowerCase(),color:p},Tn(u)),u++}}this._turn=o[1],o[2].indexOf("K")>-1&&(this._castling.w|=Ue.KSIDE_CASTLE),o[2].indexOf("Q")>-1&&(this._castling.w|=Ue.QSIDE_CASTLE),o[2].indexOf("k")>-1&&(this._castling.b|=Ue.KSIDE_CASTLE),o[2].indexOf("q")>-1&&(this._castling.b|=Ue.QSIDE_CASTLE),this._epSquare=o[3]==="-"?Mn:je[o[3]],this._halfMoves=parseInt(o[4],10),this._moveNumber=parseInt(o[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){let t=0,r="";for(let u=je.a8;u<=je.h1;u++){if(this._board[u]){t>0&&(r+=t,t=0);const{color:d,type:g}=this._board[u];r+=d===Hn?g.toUpperCase():g.toLowerCase()}else t++;u+1&136&&(t>0&&(r+=t),u!==je.h1&&(r+="/"),t=0,u+=8)}let o="";this._castling[Hn]&Ue.KSIDE_CASTLE&&(o+="K"),this._castling[Hn]&Ue.QSIDE_CASTLE&&(o+="Q"),this._castling[bi]&Ue.KSIDE_CASTLE&&(o+="k"),this._castling[bi]&Ue.QSIDE_CASTLE&&(o+="q"),o=o||"-";let c="-";if(this._epSquare!==Mn)if(e)c=Tn(this._epSquare);else{const u=this._epSquare+(this._turn===Hn?16:-16),d=[u+1,u-1];for(const g of d){if(g&136)continue;const p=this._turn;if(this._board[g]?.color===p&&this._board[g]?.type===cn){this._makeMove({color:p,from:g,to:this._epSquare,piece:cn,captured:cn,flags:Ue.EP_CAPTURE});const v=!this._isKingAttacked(p);if(this._undoMove(),v){c=Tn(this._epSquare);break}}}}return[r,this._turn,o,c,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;const{color:t,type:r}=this._board[e],o={w:0,b:1}[t],c={p:0,n:1,b:2,r:3,q:4,k:5}[r];return Pk[o][c][e]}_epKey(){return this._epSquare===Mn?0n:jk[this._epSquare&7]}_castlingKey(){const e=this._castling.w>>5|this._castling.b>>3;return Lk[e]}_computeHash(){let e=0n;for(let t=je.a8;t<=je.h1;t++){if(t&136){t+=7;continue}this._board[t]&&(e^=this._pieceKey(t))}return e^=this._epKey(),e^=this._castlingKey(),this._turn==="b"&&(e^=Sg),e}_updateSetup(e){this._history.length>0||(e!==Ag?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(Ag)}get(e){return this._board[je[e]]}findPiece(e){const t=[];for(let r=je.a8;r<=je.h1;r++){if(r&136){r+=7;continue}!this._board[r]||this._board[r]?.color!==e.color||this._board[r].color===e.color&&this._board[r].type===e.type&&t.push(Tn(r))}return t}put({type:e,color:t},r){return this._put({type:e,color:t},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(e,t){this._hash^=this._pieceKey(e),this._board[e]=t,this._hash^=this._pieceKey(e)}_put({type:e,color:t},r){if(Fk.indexOf(e.toLowerCase())===-1||!(r in je))return!1;const o=je[r];if(e==yn&&!(this._kings[t]==Mn||this._kings[t]==o))return!1;const c=this._board[o];return c&&c.type===yn&&(this._kings[c.color]=Mn),this._set(o,{type:e,color:t}),e===yn&&(this._kings[t]=o),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){const t=this.get(e);return this._clear(je[e]),t&&t.type===yn&&(this._kings[t.color]=Mn),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){this._hash^=this._castlingKey();const e=this._board[je.e1]?.type===yn&&this._board[je.e1]?.color===Hn,t=this._board[je.e8]?.type===yn&&this._board[je.e8]?.color===bi;(!e||this._board[je.a1]?.type!==wc||this._board[je.a1]?.color!==Hn)&&(this._castling.w&=-65),(!e||this._board[je.h1]?.type!==wc||this._board[je.h1]?.color!==Hn)&&(this._castling.w&=-33),(!t||this._board[je.a8]?.type!==wc||this._board[je.a8]?.color!==bi)&&(this._castling.b&=-65),(!t||this._board[je.h8]?.type!==wc||this._board[je.h8]?.color!==bi)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){if(this._epSquare===Mn)return;const e=this._epSquare+(this._turn===Hn?-16:16),t=this._epSquare+(this._turn===Hn?16:-16),r=[t+1,t-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||this._board[t]?.color!==yc(this._turn)||this._board[t]?.type!==cn){this._hash^=this._epKey(),this._epSquare=Mn;return}const o=c=>!(c&136)&&this._board[c]?.color===this._turn&&this._board[c]?.type===cn;r.some(o)||(this._hash^=this._epKey(),this._epSquare=Mn)}_attacked(e,t,r){const o=[];for(let c=je.a8;c<=je.h1;c++){if(c&136){c+=7;continue}if(this._board[c]===void 0||this._board[c].color!==e)continue;const u=this._board[c],d=c-t;if(d===0)continue;const g=d+119;if(Bk[g]&Hk[u.type]){if(u.type===cn){if(d>0&&u.color===Hn||d<=0&&u.color===bi)if(r)o.push(Tn(c));else return!0;continue}if(u.type==="n"||u.type==="k")if(r){o.push(Tn(c));continue}else return!0;const p=qk[g];let v=c+p,E=!1;for(;v!==t;){if(this._board[v]!=null){E=!0;break}v+=p}if(!E)if(r){o.push(Tn(c));continue}else return!0}}return r?o:!1}attackers(e,t){return t?this._attacked(t,je[e],!0):this._attacked(this._turn,je[e],!0)}_isKingAttacked(e){const t=this._kings[e];return t===-1?!1:this._attacked(yc(e),t)}hash(){return this._hash.toString(16)}isAttacked(e,t){return this._attacked(t,je[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},t=[];let r=0,o=0;for(let c=je.a8;c<=je.h1;c++){if(o=(o+1)%2,c&136){c+=7;continue}const u=this._board[c];u&&(e[u.type]=u.type in e?e[u.type]+1:1,u.type===sf&&t.push(o),r++)}if(r===2)return!0;if(r===3&&(e[sf]===1||e[op]===1))return!0;if(r===e[sf]+2){let c=0;const u=t.length;for(let d=0;d<u;d++)c+=t[d];if(c===0||c===u)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:t=void 0,piece:r=void 0}={}){const o=this._moves({square:t,piece:r});return e?o.map(c=>new Bh(this,c)):o.map(c=>this._moveToSan(c,o))}_moves({legal:e=!0,piece:t=void 0,square:r=void 0}={}){const o=r?r.toLowerCase():void 0,c=t?.toLowerCase(),u=[],d=this._turn,g=yc(d);let p=je.a8,v=je.h1,E=!1;if(o)if(o in je)p=v=je[o],E=!0;else return[];for(let I=p;I<=v;I++){if(I&136){I+=7;continue}if(!this._board[I]||this._board[I].color===g)continue;const{type:P}=this._board[I];let H;if(P===cn){if(c&&c!==P)continue;H=I+Rg[d][0],this._board[H]||(Hr(u,d,I,H,cn),H=I+Rg[d][1],Yk[d]===$a(I)&&!this._board[H]&&Hr(u,d,I,H,cn,void 0,Ue.BIG_PAWN));for(let k=2;k<4;k++)H=I+Rg[d][k],!(H&136)&&(this._board[H]?.color===g?Hr(u,d,I,H,cn,this._board[H].type,Ue.CAPTURE):H===this._epSquare&&Hr(u,d,I,H,cn,cn,Ue.EP_CAPTURE))}else{if(c&&c!==P)continue;for(let k=0,j=j1[P].length;k<j;k++){const Q=j1[P][k];for(H=I;H+=Q,!(H&136);){if(!this._board[H])Hr(u,d,I,H,P);else{if(this._board[H].color===d)break;Hr(u,d,I,H,P,this._board[H].type,Ue.CAPTURE);break}if(P===op||P===yn)break}}}}if((c===void 0||c===yn)&&(!E||v===this._kings[d])){if(this._castling[d]&Ue.KSIDE_CASTLE){const I=this._kings[d],P=I+2;!this._board[I+1]&&!this._board[P]&&!this._attacked(g,this._kings[d])&&!this._attacked(g,I+1)&&!this._attacked(g,P)&&Hr(u,d,this._kings[d],P,yn,void 0,Ue.KSIDE_CASTLE)}if(this._castling[d]&Ue.QSIDE_CASTLE){const I=this._kings[d],P=I-2;!this._board[I-1]&&!this._board[I-2]&&!this._board[I-3]&&!this._attacked(g,this._kings[d])&&!this._attacked(g,I-1)&&!this._attacked(g,P)&&Hr(u,d,this._kings[d],P,yn,void 0,Ue.QSIDE_CASTLE)}}if(!e||this._kings[d]===-1)return u;const T=[];for(let I=0,P=u.length;I<P;I++)this._makeMove(u[I]),this._isKingAttacked(d)||T.push(u[I]),this._undoMove();return T}move(e,{strict:t=!1}={}){let r=null;if(typeof e=="string")r=this._moveFromSan(e,t);else if(e===null)r=this._moveFromSan(Cg,t);else if(typeof e=="object"){const c=this._moves();for(let u=0,d=c.length;u<d;u++)if(e.from===Tn(c[u].from)&&e.to===Tn(c[u].to)&&(!("promotion"in c[u])||e.promotion===c[u].promotion)){r=c[u];break}}if(!r)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&r.flags&Ue.NULL_MOVE)throw new Error("Null move not allowed when in check");const o=new Bh(this,r);return this._makeMove(r),this._incPositionCount(),o}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,t){this._hash^=this._pieceKey(e),this._board[t]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(t)}_makeMove(e){const t=this._turn,r=yc(t);if(this._push(e),e.flags&Ue.NULL_MOVE){t===bi&&this._moveNumber++,this._halfMoves++,this._turn=r,this._epSquare=Mn;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&Ue.EP_CAPTURE&&(this._turn===bi?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:t})),this._board[e.to].type===yn){if(this._kings[t]=e.to,e.flags&Ue.KSIDE_CASTLE){const o=e.to-1,c=e.to+1;this._movePiece(c,o)}else if(e.flags&Ue.QSIDE_CASTLE){const o=e.to+1,c=e.to-2;this._movePiece(c,o)}this._castling[t]=0}if(this._castling[t]){for(let o=0,c=qr[t].length;o<c;o++)if(e.from===qr[t][o].square&&this._castling[t]&qr[t][o].flag){this._castling[t]^=qr[t][o].flag;break}}if(this._castling[r]){for(let o=0,c=qr[r].length;o<c;o++)if(e.to===qr[r][o].square&&this._castling[r]&qr[r][o].flag){this._castling[r]^=qr[r][o].flag;break}}if(this._hash^=this._castlingKey(),e.flags&Ue.BIG_PAWN){let o;t===bi?o=e.to-16:o=e.to+16,!(e.to-1&136)&&this._board[e.to-1]?.type===cn&&this._board[e.to-1]?.color===r||!(e.to+1&136)&&this._board[e.to+1]?.type===cn&&this._board[e.to+1]?.color===r?(this._epSquare=o,this._hash^=this._epKey()):this._epSquare=Mn}else this._epSquare=Mn;e.piece===cn?this._halfMoves=0:e.flags&(Ue.CAPTURE|Ue.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===bi&&this._moveNumber++,this._turn=r,this._hash^=Sg}undo(){const e=this._hash,t=this._undoMove();if(t){const r=new Bh(this,t);return this._decPositionCount(e),r}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=Sg;const r=this._turn,o=yc(r);if(t.flags&Ue.NULL_MOVE)return t;if(this._movePiece(t.to,t.from),t.piece&&(this._clear(t.from),this._set(t.from,{type:t.piece,color:r})),t.captured)if(t.flags&Ue.EP_CAPTURE){let c;r===bi?c=t.to-16:c=t.to+16,this._set(c,{type:cn,color:o})}else this._set(t.to,{type:t.captured,color:o});if(t.flags&(Ue.KSIDE_CASTLE|Ue.QSIDE_CASTLE)){let c,u;t.flags&Ue.KSIDE_CASTLE?(c=t.to+1,u=t.to-1):(c=t.to-2,u=t.to+1),this._movePiece(u,c)}return t}pgn({newline:e=`
`,maxWidth:t=0}={}){const r=[];let o=!1;for(const T in this._header)this._header[T]&&r.push(`[${T} "${this._header[T]}"]`+e),o=!0;o&&this._history.length&&r.push(e);const c=T=>{const I=this._comments[this.fen()];if(typeof I<"u"){const P=T.length>0?" ":"";T=`${T}${P}{${I}}`}return T},u=[];for(;this._history.length>0;)u.push(this._undoMove());const d=[];let g="";for(u.length===0&&d.push(c(""));u.length>0;){g=c(g);const T=u.pop();if(!T)break;if(!this._history.length&&T.color==="b"){const I=`${this._moveNumber}. ...`;g=g?`${g} ${I}`:I}else T.color==="w"&&(g.length&&d.push(g),g=this._moveNumber+".");g=g+" "+this._moveToSan(T,this._moves({legal:!0})),this._makeMove(T)}if(g.length&&d.push(c(g)),d.push(this._header.Result||"*"),t===0)return r.join("")+d.join(" ");const p=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},v=function(T,I){for(const P of I.split(" "))if(P){if(T+P.length>t){for(;p();)T--;r.push(e),T=0}r.push(P),T+=P.length,r.push(" "),T++}return p()&&T--,T};let E=0;for(let T=0;T<d.length;T++){if(E+d[T].length>t&&d[T].includes("{")){E=v(E,d[T]);continue}E+d[T].length>t&&T!==0?(r[r.length-1]===" "&&r.pop(),r.push(e),E=0):T!==0&&(r.push(" "),E++),r.push(d[T]),E+=d[T].length}return r.join("")}header(...e){for(let t=0;t<e.length;t+=2)typeof e[t]=="string"&&typeof e[t+1]=="string"&&(this._header[e[t]]=e[t+1]);return this._header}setHeader(e,t){return this._header[e]=t??lp[e]??null,this.getHeaders()}removeHeader(e){return e in this._header?(this._header[e]=lp[e]||null,!0):!1}getHeaders(){const e={};for(const[t,r]of Object.entries(this._header))r!==null&&(e[t]=r);return e}loadPgn(e,{strict:t=!1,newlineChar:r=`\r?
`}={}){r!==`\r?
`&&(e=e.replace(new RegExp(r,"g"),`
`));const o=Mk(e);this.reset();const c=o.headers;let u="";for(const p in c)p.toLowerCase()==="fen"&&(u=c[p]),this.header(p,c[p]);if(!t)u&&this.load(u,{preserveHeaders:!0});else if(c.SetUp==="1"){if(!("FEN"in c))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(c.FEN,{preserveHeaders:!0})}let d=o.root;for(;d;){if(d.move){const p=this._moveFromSan(d.move,t);if(p==null)throw new Error(`Invalid move in PGN: ${d.move}`);this._makeMove(p),this._incPositionCount()}d.comment!==void 0&&(this._comments[this.fen()]=d.comment),d=d.variations[0]}const g=o.result;g&&Object.keys(this._header).length&&this._header.Result!==g&&this.setHeader("Result",g)}_moveToSan(e,t){let r="";if(e.flags&Ue.KSIDE_CASTLE)r="O-O";else if(e.flags&Ue.QSIDE_CASTLE)r="O-O-O";else{if(e.flags&Ue.NULL_MOVE)return Cg;if(e.piece!==cn){const o=Wk(e,t);r+=e.piece.toUpperCase()+o}e.flags&(Ue.CAPTURE|Ue.EP_CAPTURE)&&(e.piece===cn&&(r+=Tn(e.from)[0]),r+="x"),r+=Tn(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,t=!1){let r=Ng(e);if(t||(r==="0-0"?r="O-O":r==="0-0-0"&&(r="O-O-O")),r==Cg)return{color:this._turn,from:0,to:0,piece:"k",flags:Ue.NULL_MOVE};let o=U1(r),c=this._moves({legal:!0,piece:o});for(let T=0,I=c.length;T<I;T++)if(r===Ng(this._moveToSan(c[T],c)))return c[T];if(t)return null;let u,d,g,p,v,E=!1;if(d=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),d?(u=d[1],g=d[2],p=d[3],v=d[4],g.length==1&&(E=!0)):(d=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),d&&(u=d[1],g=d[2],p=d[3],v=d[4],g.length==1&&(E=!0))),o=U1(r),c=this._moves({legal:!0,piece:u||o}),!p)return null;for(let T=0,I=c.length;T<I;T++)if(g){if((!u||u.toLowerCase()==c[T].piece)&&je[g]==c[T].from&&je[p]==c[T].to&&(!v||v.toLowerCase()==c[T].promotion))return c[T];if(E){const P=Tn(c[T].from);if((!u||u.toLowerCase()==c[T].piece)&&je[p]==c[T].to&&(g==P[0]||g==P[1])&&(!v||v.toLowerCase()==c[T].promotion))return c[T]}}else if(r===Ng(this._moveToSan(c[T],c)).replace("x",""))return c[T];return null}ascii(){let e=`   +------------------------+
`;for(let t=je.a8;t<=je.h1;t++){if(Kc(t)===0&&(e+=" "+"87654321"[$a(t)]+" |"),this._board[t]){const r=this._board[t].type,c=this._board[t].color===Hn?r.toUpperCase():r.toLowerCase();e+=" "+c+" "}else e+=" . ";t+1&136&&(e+=`|
`,t+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const t=this._moves({legal:!1});let r=0;const o=this._turn;for(let c=0,u=t.length;c<u;c++)this._makeMove(t[c]),this._isKingAttacked(o)||(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}setTurn(e){return this._turn==e?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const e=[];let t=[];for(let r=je.a8;r<=je.h1;r++)this._board[r]==null?t.push(null):t.push({square:Tn(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(t),t=[],r+=8);return e}squareColor(e){if(e in je){const t=je[e];return($a(t)+Kc(t))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const t=[],r=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){const o=t.pop();if(!o)break;e?r.push(new Bh(this,o)):r.push(this._moveToSan(o,this._moves())),this._makeMove(o)}return r}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){const t=this._positionCount.get(e)??0;t===1?this._positionCount.delete(e):this._positionCount.set(e,t-1)}_pruneComments(){const e=[],t={},r=o=>{o in this._comments&&(t[o]=this._comments[o])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){const o=e.pop();if(!o)break;this._makeMove(o),r(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(const o of[yn,Fr])t[o]!==void 0&&(t[o]?this._castling[e]|=qh[o]:this._castling[e]&=~qh[o]);this._updateCastlingRights();const r=this.getCastlingRights(e);return(t[yn]===void 0||t[yn]===r[yn])&&(t[Fr]===void 0||t[Fr]===r[Fr])}getCastlingRights(e){return{[yn]:(this._castling[e]&qh[yn])!==0,[Fr]:(this._castling[e]&qh[Fr])!==0}}moveNumber(){return this._moveNumber}}var Tc=rE();const rd=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function El(i){const e=Object.prototype.toString.call(i);return e==="[object Window]"||e==="[object global]"}function d0(i){return"nodeType"in i}function ti(i){var e,t;return i?El(i)?i:d0(i)&&(e=(t=i.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function m0(i){const{Document:e}=ti(i);return i instanceof e}function hu(i){return El(i)?!1:i instanceof ti(i).HTMLElement}function VT(i){return i instanceof ti(i).SVGElement}function wl(i){return i?El(i)?i.document:d0(i)?m0(i)?i:hu(i)||VT(i)?i.ownerDocument:document:document:document}const sr=rd?z.useLayoutEffect:z.useEffect;function ad(i){const e=z.useRef(i);return sr(()=>{e.current=i}),z.useCallback(function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}function Jk(){const i=z.useRef(null),e=z.useCallback((r,o)=>{i.current=setInterval(r,o)},[]),t=z.useCallback(()=>{i.current!==null&&(clearInterval(i.current),i.current=null)},[]);return[e,t]}function Qc(i,e){e===void 0&&(e=[i]);const t=z.useRef(i);return sr(()=>{t.current!==i&&(t.current=i)},e),t}function fu(i,e){const t=z.useRef();return z.useMemo(()=>{const r=i(t.current);return t.current=r,r},[...e])}function Nf(i){const e=ad(i),t=z.useRef(null),r=z.useCallback(o=>{o!==t.current&&e?.(o,t.current),t.current=o},[]);return[t,r]}function If(i){const e=z.useRef();return z.useEffect(()=>{e.current=i},[i]),e.current}let Ig={};function od(i,e){return z.useMemo(()=>{if(e)return e;const t=Ig[i]==null?0:Ig[i]+1;return Ig[i]=t,i+"-"+t},[i,e])}function PT(i){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return r.reduce((c,u)=>{const d=Object.entries(u);for(const[g,p]of d){const v=c[g];v!=null&&(c[g]=v+i*p)}return c},{...e})}}const tl=PT(1),Yc=PT(-1);function Zk(i){return"clientX"in i&&"clientY"in i}function g0(i){if(!i)return!1;const{KeyboardEvent:e}=ti(i.target);return e&&i instanceof e}function e4(i){if(!i)return!1;const{TouchEvent:e}=ti(i.target);return e&&i instanceof e}function Df(i){if(e4(i)){if(i.touches&&i.touches.length){const{clientX:e,clientY:t}=i.touches[0];return{x:e,y:t}}else if(i.changedTouches&&i.changedTouches.length){const{clientX:e,clientY:t}=i.changedTouches[0];return{x:e,y:t}}}return Zk(i)?{x:i.clientX,y:i.clientY}:null}const fl=Object.freeze({Translate:{toString(i){if(!i)return;const{x:e,y:t}=i;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(i){if(!i)return;const{scaleX:e,scaleY:t}=i;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(i){if(i)return[fl.Translate.toString(i),fl.Scale.toString(i)].join(" ")}},Transition:{toString(i){let{property:e,duration:t,easing:r}=i;return e+" "+t+"ms "+r}}}),z1="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function t4(i){return i.matches(z1)?i:i.querySelector(z1)}const n4={display:"none"};function i4(i){let{id:e,value:t}=i;return Ze.createElement("div",{id:e,style:n4},t)}function s4(i){let{id:e,announcement:t,ariaLiveType:r="assertive"}=i;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ze.createElement("div",{id:e,style:o,role:"status","aria-live":r,"aria-atomic":!0},t)}function r4(){const[i,e]=z.useState("");return{announce:z.useCallback(r=>{r!=null&&e(r)},[]),announcement:i}}const jT=z.createContext(null);function a4(i){const e=z.useContext(jT);z.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(i)},[i,e])}function o4(){const[i]=z.useState(()=>new Set),e=z.useCallback(r=>(i.add(r),()=>i.delete(r)),[i]);return[z.useCallback(r=>{let{type:o,event:c}=r;i.forEach(u=>{var d;return(d=u[o])==null?void 0:d.call(u,c)})},[i]),e]}const l4={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},c4={onDragStart(i){let{active:e}=i;return"Picked up draggable item "+e.id+"."},onDragOver(i){let{active:e,over:t}=i;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(i){let{active:e,over:t}=i;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(i){let{active:e}=i;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function u4(i){let{announcements:e=c4,container:t,hiddenTextDescribedById:r,screenReaderInstructions:o=l4}=i;const{announce:c,announcement:u}=r4(),d=od("DndLiveRegion"),[g,p]=z.useState(!1);if(z.useEffect(()=>{p(!0)},[]),a4(z.useMemo(()=>({onDragStart(E){let{active:T}=E;c(e.onDragStart({active:T}))},onDragMove(E){let{active:T,over:I}=E;e.onDragMove&&c(e.onDragMove({active:T,over:I}))},onDragOver(E){let{active:T,over:I}=E;c(e.onDragOver({active:T,over:I}))},onDragEnd(E){let{active:T,over:I}=E;c(e.onDragEnd({active:T,over:I}))},onDragCancel(E){let{active:T,over:I}=E;c(e.onDragCancel({active:T,over:I}))}}),[c,e])),!g)return null;const v=Ze.createElement(Ze.Fragment,null,Ze.createElement(i4,{id:r,value:o.draggable}),Ze.createElement(s4,{id:d,announcement:u}));return t?Tc.createPortal(v,t):v}var vn;(function(i){i.DragStart="dragStart",i.DragMove="dragMove",i.DragEnd="dragEnd",i.DragCancel="dragCancel",i.DragOver="dragOver",i.RegisterDroppable="registerDroppable",i.SetDroppableDisabled="setDroppableDisabled",i.UnregisterDroppable="unregisterDroppable"})(vn||(vn={}));function kf(){}function Ka(i,e){return z.useMemo(()=>({sensor:i,options:e??{}}),[i,e])}function p0(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return z.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const as=Object.freeze({x:0,y:0});function LT(i,e){return Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2))}function h4(i,e){const t=Df(i);if(!t)return"0 0";const r={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function UT(i,e){let{data:{value:t}}=i,{data:{value:r}}=e;return t-r}function f4(i,e){let{data:{value:t}}=i,{data:{value:r}}=e;return r-t}function B1(i){let{left:e,top:t,height:r,width:o}=i;return[{x:e,y:t},{x:e+o,y:t},{x:e,y:t+r},{x:e+o,y:t+r}]}function zT(i,e){if(!i||i.length===0)return null;const[t]=i;return t[e]}function q1(i,e,t){return e===void 0&&(e=i.left),t===void 0&&(t=i.top),{x:e+i.width*.5,y:t+i.height*.5}}const d4=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=i;const o=q1(e,e.left,e.top),c=[];for(const u of r){const{id:d}=u,g=t.get(d);if(g){const p=LT(q1(g),o);c.push({id:d,data:{droppableContainer:u,value:p}})}}return c.sort(UT)},m4=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=i;const o=B1(e),c=[];for(const u of r){const{id:d}=u,g=t.get(d);if(g){const p=B1(g),v=o.reduce((T,I,P)=>T+LT(p[P],I),0),E=Number((v/4).toFixed(4));c.push({id:d,data:{droppableContainer:u,value:E}})}}return c.sort(UT)};function g4(i,e){const t=Math.max(e.top,i.top),r=Math.max(e.left,i.left),o=Math.min(e.left+e.width,i.left+i.width),c=Math.min(e.top+e.height,i.top+i.height),u=o-r,d=c-t;if(r<o&&t<c){const g=e.width*e.height,p=i.width*i.height,v=u*d,E=v/(g+p-v);return Number(E.toFixed(4))}return 0}const p4=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=i;const o=[];for(const c of r){const{id:u}=c,d=t.get(u);if(d){const g=g4(d,e);g>0&&o.push({id:u,data:{droppableContainer:c,value:g}})}}return o.sort(f4)};function y4(i,e,t){return{...i,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function BT(i,e){return i&&e?{x:i.left-e.left,y:i.top-e.top}:as}function v4(i){return function(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),c=1;c<r;c++)o[c-1]=arguments[c];return o.reduce((u,d)=>({...u,top:u.top+i*d.y,bottom:u.bottom+i*d.y,left:u.left+i*d.x,right:u.right+i*d.x}),{...t})}}const _4=v4(1);function qT(i){if(i.startsWith("matrix3d(")){const e=i.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(i.startsWith("matrix(")){const e=i.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function b4(i,e,t){const r=qT(e);if(!r)return i;const{scaleX:o,scaleY:c,x:u,y:d}=r,g=i.left-u-(1-o)*parseFloat(t),p=i.top-d-(1-c)*parseFloat(t.slice(t.indexOf(" ")+1)),v=o?i.width/o:i.width,E=c?i.height/c:i.height;return{width:v,height:E,top:p,right:g+v,bottom:p+E,left:g}}const E4={ignoreTransform:!1};function du(i,e){e===void 0&&(e=E4);let t=i.getBoundingClientRect();if(e.ignoreTransform){const{transform:p,transformOrigin:v}=ti(i).getComputedStyle(i);p&&(t=b4(t,p,v))}const{top:r,left:o,width:c,height:u,bottom:d,right:g}=t;return{top:r,left:o,width:c,height:u,bottom:d,right:g}}function H1(i){return du(i,{ignoreTransform:!0})}function w4(i){const e=i.innerWidth,t=i.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function T4(i,e){return e===void 0&&(e=ti(i).getComputedStyle(i)),e.position==="fixed"}function x4(i,e){e===void 0&&(e=ti(i).getComputedStyle(i));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const c=e[o];return typeof c=="string"?t.test(c):!1})}function ld(i,e){const t=[];function r(o){if(e!=null&&t.length>=e||!o)return t;if(m0(o)&&o.scrollingElement!=null&&!t.includes(o.scrollingElement))return t.push(o.scrollingElement),t;if(!hu(o)||VT(o)||t.includes(o))return t;const c=ti(i).getComputedStyle(o);return o!==i&&x4(o,c)&&t.push(o),T4(o,c)?t:r(o.parentNode)}return i?r(i):t}function HT(i){const[e]=ld(i,1);return e??null}function Dg(i){return!rd||!i?null:El(i)?i:d0(i)?m0(i)||i===wl(i).scrollingElement?window:hu(i)?i:null:null}function FT(i){return El(i)?i.scrollX:i.scrollLeft}function GT(i){return El(i)?i.scrollY:i.scrollTop}function cp(i){return{x:FT(i),y:GT(i)}}var Sn;(function(i){i[i.Forward=1]="Forward",i[i.Backward=-1]="Backward"})(Sn||(Sn={}));function $T(i){return!rd||!i?!1:i===document.scrollingElement}function KT(i){const e={x:0,y:0},t=$T(i)?{height:window.innerHeight,width:window.innerWidth}:{height:i.clientHeight,width:i.clientWidth},r={x:i.scrollWidth-t.width,y:i.scrollHeight-t.height},o=i.scrollTop<=e.y,c=i.scrollLeft<=e.x,u=i.scrollTop>=r.y,d=i.scrollLeft>=r.x;return{isTop:o,isLeft:c,isBottom:u,isRight:d,maxScroll:r,minScroll:e}}const S4={x:.2,y:.2};function A4(i,e,t,r,o){let{top:c,left:u,right:d,bottom:g}=t;r===void 0&&(r=10),o===void 0&&(o=S4);const{isTop:p,isBottom:v,isLeft:E,isRight:T}=KT(i),I={x:0,y:0},P={x:0,y:0},H={height:e.height*o.y,width:e.width*o.x};return!p&&c<=e.top+H.height?(I.y=Sn.Backward,P.y=r*Math.abs((e.top+H.height-c)/H.height)):!v&&g>=e.bottom-H.height&&(I.y=Sn.Forward,P.y=r*Math.abs((e.bottom-H.height-g)/H.height)),!T&&d>=e.right-H.width?(I.x=Sn.Forward,P.x=r*Math.abs((e.right-H.width-d)/H.width)):!E&&u<=e.left+H.width&&(I.x=Sn.Backward,P.x=r*Math.abs((e.left+H.width-u)/H.width)),{direction:I,speed:P}}function R4(i){if(i===document.scrollingElement){const{innerWidth:c,innerHeight:u}=window;return{top:0,left:0,right:c,bottom:u,width:c,height:u}}const{top:e,left:t,right:r,bottom:o}=i.getBoundingClientRect();return{top:e,left:t,right:r,bottom:o,width:i.clientWidth,height:i.clientHeight}}function QT(i){return i.reduce((e,t)=>tl(e,cp(t)),as)}function C4(i){return i.reduce((e,t)=>e+FT(t),0)}function N4(i){return i.reduce((e,t)=>e+GT(t),0)}function YT(i,e){if(e===void 0&&(e=du),!i)return;const{top:t,left:r,bottom:o,right:c}=e(i);HT(i)&&(o<=0||c<=0||t>=window.innerHeight||r>=window.innerWidth)&&i.scrollIntoView({block:"center",inline:"center"})}const I4=[["x",["left","right"],C4],["y",["top","bottom"],N4]];class y0{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=ld(t),o=QT(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[c,u,d]of I4)for(const g of u)Object.defineProperty(this,g,{get:()=>{const p=d(r),v=o[c]-p;return this.rect[g]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Oc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...t)})},this.target=e}add(e,t,r){var o;(o=this.target)==null||o.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function D4(i){const{EventTarget:e}=ti(i);return i instanceof e?i:wl(i)}function kg(i,e){const t=Math.abs(i.x),r=Math.abs(i.y);return typeof e=="number"?Math.sqrt(t**2+r**2)>e:"x"in e&&"y"in e?t>e.x&&r>e.y:"x"in e?t>e.x:"y"in e?r>e.y:!1}var Bi;(function(i){i.Click="click",i.DragStart="dragstart",i.Keydown="keydown",i.ContextMenu="contextmenu",i.Resize="resize",i.SelectionChange="selectionchange",i.VisibilityChange="visibilitychange"})(Bi||(Bi={}));function F1(i){i.preventDefault()}function k4(i){i.stopPropagation()}var it;(function(i){i.Space="Space",i.Down="ArrowDown",i.Right="ArrowRight",i.Left="ArrowLeft",i.Up="ArrowUp",i.Esc="Escape",i.Enter="Enter",i.Tab="Tab"})(it||(it={}));const XT={start:[it.Space,it.Enter],cancel:[it.Esc],end:[it.Space,it.Enter,it.Tab]},O4=(i,e)=>{let{currentCoordinates:t}=e;switch(i.code){case it.Right:return{...t,x:t.x+25};case it.Left:return{...t,x:t.x-25};case it.Down:return{...t,y:t.y+25};case it.Up:return{...t,y:t.y-25}}};class v0{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Oc(wl(t)),this.windowListeners=new Oc(ti(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Bi.Resize,this.handleCancel),this.windowListeners.add(Bi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Bi.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&YT(r),t(as)}handleKeyDown(e){if(g0(e)){const{active:t,context:r,options:o}=this.props,{keyboardCodes:c=XT,coordinateGetter:u=O4,scrollBehavior:d="smooth"}=o,{code:g}=e;if(c.end.includes(g)){this.handleEnd(e);return}if(c.cancel.includes(g)){this.handleCancel(e);return}const{collisionRect:p}=r.current,v=p?{x:p.left,y:p.top}:as;this.referenceCoordinates||(this.referenceCoordinates=v);const E=u(e,{active:t,context:r.current,currentCoordinates:v});if(E){const T=Yc(E,v),I={x:0,y:0},{scrollableAncestors:P}=r.current;for(const H of P){const k=e.code,{isTop:j,isRight:Q,isLeft:G,isBottom:he,maxScroll:F,minScroll:U}=KT(H),S=R4(H),x={x:Math.min(k===it.Right?S.right-S.width/2:S.right,Math.max(k===it.Right?S.left:S.left+S.width/2,E.x)),y:Math.min(k===it.Down?S.bottom-S.height/2:S.bottom,Math.max(k===it.Down?S.top:S.top+S.height/2,E.y))},R=k===it.Right&&!Q||k===it.Left&&!G,M=k===it.Down&&!he||k===it.Up&&!j;if(R&&x.x!==E.x){const C=H.scrollLeft+T.x,O=k===it.Right&&C<=F.x||k===it.Left&&C>=U.x;if(O&&!T.y){H.scrollTo({left:C,behavior:d});return}O?I.x=H.scrollLeft-C:I.x=k===it.Right?H.scrollLeft-F.x:H.scrollLeft-U.x,I.x&&H.scrollBy({left:-I.x,behavior:d});break}else if(M&&x.y!==E.y){const C=H.scrollTop+T.y,O=k===it.Down&&C<=F.y||k===it.Up&&C>=U.y;if(O&&!T.x){H.scrollTo({top:C,behavior:d});return}O?I.y=H.scrollTop-C:I.y=k===it.Down?H.scrollTop-F.y:H.scrollTop-U.y,I.y&&H.scrollBy({top:-I.y,behavior:d});break}}this.handleMove(e,tl(Yc(E,this.referenceCoordinates),I))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}v0.activators=[{eventName:"onKeyDown",handler:(i,e,t)=>{let{keyboardCodes:r=XT,onActivation:o}=e,{active:c}=t;const{code:u}=i.nativeEvent;if(r.start.includes(u)){const d=c.activatorNode.current;return d&&i.target!==d?!1:(i.preventDefault(),o?.({event:i.nativeEvent}),!0)}return!1}}];function G1(i){return!!(i&&"distance"in i)}function $1(i){return!!(i&&"delay"in i)}class _0{constructor(e,t,r){var o;r===void 0&&(r=D4(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:c}=e,{target:u}=c;this.props=e,this.events=t,this.document=wl(u),this.documentListeners=new Oc(this.document),this.listeners=new Oc(r),this.windowListeners=new Oc(ti(u)),this.initialCoordinates=(o=Df(c))!=null?o:as,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Bi.Resize,this.handleCancel),this.windowListeners.add(Bi.DragStart,F1),this.windowListeners.add(Bi.VisibilityChange,this.handleCancel),this.windowListeners.add(Bi.ContextMenu,F1),this.documentListeners.add(Bi.Keydown,this.handleKeydown),t){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if($1(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(G1(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:o}=this.props;o(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Bi.Click,k4,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Bi.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:o,props:c}=this,{onMove:u,options:{activationConstraint:d}}=c;if(!o)return;const g=(t=Df(e))!=null?t:as,p=Yc(o,g);if(!r&&d){if(G1(d)){if(d.tolerance!=null&&kg(p,d.tolerance))return this.handleCancel();if(kg(p,d.distance))return this.handleStart()}if($1(d)&&kg(p,d.tolerance))return this.handleCancel();this.handlePending(d,p);return}e.cancelable&&e.preventDefault(),u(g)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===it.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const M4={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class cd extends _0{constructor(e){const{event:t}=e,r=wl(t.target);super(e,M4,r)}}cd.activators=[{eventName:"onPointerDown",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:r}=e;return!t.isPrimary||t.button!==0?!1:(r?.({event:t}),!0)}}];const V4={move:{name:"mousemove"},end:{name:"mouseup"}};var up;(function(i){i[i.RightClick=2]="RightClick"})(up||(up={}));class b0 extends _0{constructor(e){super(e,V4,wl(e.event.target))}}b0.activators=[{eventName:"onMouseDown",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:r}=e;return t.button===up.RightClick?!1:(r?.({event:t}),!0)}}];const Og={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class E0 extends _0{constructor(e){super(e,Og)}static setup(){return window.addEventListener(Og.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Og.move.name,e)};function e(){}}}E0.activators=[{eventName:"onTouchStart",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:r}=e;const{touches:o}=t;return o.length>1?!1:(r?.({event:t}),!0)}}];var Mc;(function(i){i[i.Pointer=0]="Pointer",i[i.DraggableRect=1]="DraggableRect"})(Mc||(Mc={}));var Of;(function(i){i[i.TreeOrder=0]="TreeOrder",i[i.ReversedTreeOrder=1]="ReversedTreeOrder"})(Of||(Of={}));function P4(i){let{acceleration:e,activator:t=Mc.Pointer,canScroll:r,draggingRect:o,enabled:c,interval:u=5,order:d=Of.TreeOrder,pointerCoordinates:g,scrollableAncestors:p,scrollableAncestorRects:v,delta:E,threshold:T}=i;const I=L4({delta:E,disabled:!c}),[P,H]=Jk(),k=z.useRef({x:0,y:0}),j=z.useRef({x:0,y:0}),Q=z.useMemo(()=>{switch(t){case Mc.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case Mc.DraggableRect:return o}},[t,o,g]),G=z.useRef(null),he=z.useCallback(()=>{const U=G.current;if(!U)return;const S=k.current.x*j.current.x,x=k.current.y*j.current.y;U.scrollBy(S,x)},[]),F=z.useMemo(()=>d===Of.TreeOrder?[...p].reverse():p,[d,p]);z.useEffect(()=>{if(!c||!p.length||!Q){H();return}for(const U of F){if(r?.(U)===!1)continue;const S=p.indexOf(U),x=v[S];if(!x)continue;const{direction:R,speed:M}=A4(U,x,Q,e,T);for(const C of["x","y"])I[C][R[C]]||(M[C]=0,R[C]=0);if(M.x>0||M.y>0){H(),G.current=U,P(he,u),k.current=M,j.current=R;return}}k.current={x:0,y:0},j.current={x:0,y:0},H()},[e,he,r,H,c,u,JSON.stringify(Q),JSON.stringify(I),P,p,F,v,JSON.stringify(T)])}const j4={x:{[Sn.Backward]:!1,[Sn.Forward]:!1},y:{[Sn.Backward]:!1,[Sn.Forward]:!1}};function L4(i){let{delta:e,disabled:t}=i;const r=If(e);return fu(o=>{if(t||!r||!o)return j4;const c={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Sn.Backward]:o.x[Sn.Backward]||c.x===-1,[Sn.Forward]:o.x[Sn.Forward]||c.x===1},y:{[Sn.Backward]:o.y[Sn.Backward]||c.y===-1,[Sn.Forward]:o.y[Sn.Forward]||c.y===1}}},[t,e,r])}function U4(i,e){const t=e!=null?i.get(e):void 0,r=t?t.node.current:null;return fu(o=>{var c;return e==null?null:(c=r??o)!=null?c:null},[r,e])}function z4(i,e){return z.useMemo(()=>i.reduce((t,r)=>{const{sensor:o}=r,c=o.activators.map(u=>({eventName:u.eventName,handler:e(u.handler,r)}));return[...t,...c]},[]),[i,e])}var Xc;(function(i){i[i.Always=0]="Always",i[i.BeforeDragging=1]="BeforeDragging",i[i.WhileDragging=2]="WhileDragging"})(Xc||(Xc={}));var hp;(function(i){i.Optimized="optimized"})(hp||(hp={}));const K1=new Map;function B4(i,e){let{dragging:t,dependencies:r,config:o}=e;const[c,u]=z.useState(null),{frequency:d,measure:g,strategy:p}=o,v=z.useRef(i),E=k(),T=Qc(E),I=z.useCallback(function(j){j===void 0&&(j=[]),!T.current&&u(Q=>Q===null?j:Q.concat(j.filter(G=>!Q.includes(G))))},[T]),P=z.useRef(null),H=fu(j=>{if(E&&!t)return K1;if(!j||j===K1||v.current!==i||c!=null){const Q=new Map;for(let G of i){if(!G)continue;if(c&&c.length>0&&!c.includes(G.id)&&G.rect.current){Q.set(G.id,G.rect.current);continue}const he=G.node.current,F=he?new y0(g(he),he):null;G.rect.current=F,F&&Q.set(G.id,F)}return Q}return j},[i,c,t,E,g]);return z.useEffect(()=>{v.current=i},[i]),z.useEffect(()=>{E||I()},[t,E]),z.useEffect(()=>{c&&c.length>0&&u(null)},[JSON.stringify(c)]),z.useEffect(()=>{E||typeof d!="number"||P.current!==null||(P.current=setTimeout(()=>{I(),P.current=null},d))},[d,E,I,...r]),{droppableRects:H,measureDroppableContainers:I,measuringScheduled:c!=null};function k(){switch(p){case Xc.Always:return!1;case Xc.BeforeDragging:return t;default:return!t}}}function w0(i,e){return fu(t=>i?t||(typeof e=="function"?e(i):i):null,[e,i])}function q4(i,e){return w0(i,e)}function H4(i){let{callback:e,disabled:t}=i;const r=ad(e),o=z.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:c}=window;return new c(r)},[r,t]);return z.useEffect(()=>()=>o?.disconnect(),[o]),o}function ud(i){let{callback:e,disabled:t}=i;const r=ad(e),o=z.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:c}=window;return new c(r)},[t]);return z.useEffect(()=>()=>o?.disconnect(),[o]),o}function F4(i){return new y0(du(i),i)}function Q1(i,e,t){e===void 0&&(e=F4);const[r,o]=z.useState(null);function c(){o(g=>{if(!i)return null;if(i.isConnected===!1){var p;return(p=g??t)!=null?p:null}const v=e(i);return JSON.stringify(g)===JSON.stringify(v)?g:v})}const u=H4({callback(g){if(i)for(const p of g){const{type:v,target:E}=p;if(v==="childList"&&E instanceof HTMLElement&&E.contains(i)){c();break}}}}),d=ud({callback:c});return sr(()=>{c(),i?(d?.observe(i),u?.observe(document.body,{childList:!0,subtree:!0})):(d?.disconnect(),u?.disconnect())},[i]),r}function G4(i){const e=w0(i);return BT(i,e)}const Y1=[];function $4(i){const e=z.useRef(i),t=fu(r=>i?r&&r!==Y1&&i&&e.current&&i.parentNode===e.current.parentNode?r:ld(i):Y1,[i]);return z.useEffect(()=>{e.current=i},[i]),t}function K4(i){const[e,t]=z.useState(null),r=z.useRef(i),o=z.useCallback(c=>{const u=Dg(c.target);u&&t(d=>d?(d.set(u,cp(u)),new Map(d)):null)},[]);return z.useEffect(()=>{const c=r.current;if(i!==c){u(c);const d=i.map(g=>{const p=Dg(g);return p?(p.addEventListener("scroll",o,{passive:!0}),[p,cp(p)]):null}).filter(g=>g!=null);t(d.length?new Map(d):null),r.current=i}return()=>{u(i),u(c)};function u(d){d.forEach(g=>{const p=Dg(g);p?.removeEventListener("scroll",o)})}},[o,i]),z.useMemo(()=>i.length?e?Array.from(e.values()).reduce((c,u)=>tl(c,u),as):QT(i):as,[i,e])}function X1(i,e){e===void 0&&(e=[]);const t=z.useRef(null);return z.useEffect(()=>{t.current=null},e),z.useEffect(()=>{const r=i!==as;r&&!t.current&&(t.current=i),!r&&t.current&&(t.current=null)},[i]),t.current?Yc(i,t.current):as}function Q4(i){z.useEffect(()=>{if(!rd)return;const e=i.map(t=>{let{sensor:r}=t;return r.setup==null?void 0:r.setup()});return()=>{for(const t of e)t?.()}},i.map(e=>{let{sensor:t}=e;return t}))}function Y4(i,e){return z.useMemo(()=>i.reduce((t,r)=>{let{eventName:o,handler:c}=r;return t[o]=u=>{c(u,e)},t},{}),[i,e])}function WT(i){return z.useMemo(()=>i?w4(i):null,[i])}const W1=[];function X4(i,e){e===void 0&&(e=du);const[t]=i,r=WT(t?ti(t):null),[o,c]=z.useState(W1);function u(){c(()=>i.length?i.map(g=>$T(g)?r:new y0(e(g),g)):W1)}const d=ud({callback:u});return sr(()=>{d?.disconnect(),u(),i.forEach(g=>d?.observe(g))},[i]),o}function JT(i){if(!i)return null;if(i.children.length>1)return i;const e=i.children[0];return hu(e)?e:i}function W4(i){let{measure:e}=i;const[t,r]=z.useState(null),o=z.useCallback(p=>{for(const{target:v}of p)if(hu(v)){r(E=>{const T=e(v);return E?{...E,width:T.width,height:T.height}:T});break}},[e]),c=ud({callback:o}),u=z.useCallback(p=>{const v=JT(p);c?.disconnect(),v&&c?.observe(v),r(v?e(v):null)},[e,c]),[d,g]=Nf(u);return z.useMemo(()=>({nodeRef:d,rect:t,setRef:g}),[t,d,g])}const J4=[{sensor:cd,options:{}},{sensor:v0,options:{}}],Z4={current:{}},rf={draggable:{measure:H1},droppable:{measure:H1,strategy:Xc.WhileDragging,frequency:hp.Optimized},dragOverlay:{measure:du}};class Vc extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return(t=(r=this.get(e))==null?void 0:r.node.current)!=null?t:void 0}}const eO={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Vc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:kf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:rf,measureDroppableContainers:kf,windowRect:null,measuringScheduled:!1},ZT={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:kf,draggableNodes:new Map,over:null,measureDroppableContainers:kf},mu=z.createContext(ZT),ex=z.createContext(eO);function tO(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Vc}}}function nO(i,e){switch(e.type){case vn.DragStart:return{...i,draggable:{...i.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case vn.DragMove:return i.draggable.active==null?i:{...i,draggable:{...i.draggable,translate:{x:e.coordinates.x-i.draggable.initialCoordinates.x,y:e.coordinates.y-i.draggable.initialCoordinates.y}}};case vn.DragEnd:case vn.DragCancel:return{...i,draggable:{...i.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case vn.RegisterDroppable:{const{element:t}=e,{id:r}=t,o=new Vc(i.droppable.containers);return o.set(r,t),{...i,droppable:{...i.droppable,containers:o}}}case vn.SetDroppableDisabled:{const{id:t,key:r,disabled:o}=e,c=i.droppable.containers.get(t);if(!c||r!==c.key)return i;const u=new Vc(i.droppable.containers);return u.set(t,{...c,disabled:o}),{...i,droppable:{...i.droppable,containers:u}}}case vn.UnregisterDroppable:{const{id:t,key:r}=e,o=i.droppable.containers.get(t);if(!o||r!==o.key)return i;const c=new Vc(i.droppable.containers);return c.delete(t),{...i,droppable:{...i.droppable,containers:c}}}default:return i}}function iO(i){let{disabled:e}=i;const{active:t,activatorEvent:r,draggableNodes:o}=z.useContext(mu),c=If(r),u=If(t?.id);return z.useEffect(()=>{if(!e&&!r&&c&&u!=null){if(!g0(c)||document.activeElement===c.target)return;const d=o.get(u);if(!d)return;const{activatorNode:g,node:p}=d;if(!g.current&&!p.current)return;requestAnimationFrame(()=>{for(const v of[g.current,p.current]){if(!v)continue;const E=t4(v);if(E){E.focus();break}}})}},[r,e,o,u,c]),null}function tx(i,e){let{transform:t,...r}=e;return i!=null&&i.length?i.reduce((o,c)=>c({transform:o,...r}),t):t}function sO(i){return z.useMemo(()=>({draggable:{...rf.draggable,...i?.draggable},droppable:{...rf.droppable,...i?.droppable},dragOverlay:{...rf.dragOverlay,...i?.dragOverlay}}),[i?.draggable,i?.droppable,i?.dragOverlay])}function rO(i){let{activeNode:e,measure:t,initialRect:r,config:o=!0}=i;const c=z.useRef(!1),{x:u,y:d}=typeof o=="boolean"?{x:o,y:o}:o;sr(()=>{if(!u&&!d||!e){c.current=!1;return}if(c.current||!r)return;const p=e?.node.current;if(!p||p.isConnected===!1)return;const v=t(p),E=BT(v,r);if(u||(E.x=0),d||(E.y=0),c.current=!0,Math.abs(E.x)>0||Math.abs(E.y)>0){const T=HT(p);T&&T.scrollBy({top:E.y,left:E.x})}},[e,u,d,r,t])}const hd=z.createContext({...as,scaleX:1,scaleY:1});var Gr;(function(i){i[i.Uninitialized=0]="Uninitialized",i[i.Initializing=1]="Initializing",i[i.Initialized=2]="Initialized"})(Gr||(Gr={}));const T0=z.memo(function(e){var t,r,o,c;let{id:u,accessibility:d,autoScroll:g=!0,children:p,sensors:v=J4,collisionDetection:E=p4,measuring:T,modifiers:I,...P}=e;const H=z.useReducer(nO,void 0,tO),[k,j]=H,[Q,G]=o4(),[he,F]=z.useState(Gr.Uninitialized),U=he===Gr.Initialized,{draggable:{active:S,nodes:x,translate:R},droppable:{containers:M}}=k,C=S!=null?x.get(S):null,O=z.useRef({initial:null,translated:null}),D=z.useMemo(()=>{var Ge;return S!=null?{id:S,data:(Ge=C?.data)!=null?Ge:Z4,rect:O}:null},[S,C]),Ee=z.useRef(null),[ge,q]=z.useState(null),[se,re]=z.useState(null),pe=Qc(P,Object.values(P)),ve=od("DndDescribedBy",u),V=z.useMemo(()=>M.getEnabled(),[M]),$=sO(T),{droppableRects:oe,measureDroppableContainers:ce,measuringScheduled:_e}=B4(V,{dragging:U,dependencies:[R.x,R.y],config:$.droppable}),we=U4(x,S),Oe=z.useMemo(()=>se?Df(se):null,[se]),ht=Ki(),ft=q4(we,$.draggable.measure);rO({activeNode:S!=null?x.get(S):null,config:ht.layoutShiftCompensation,initialRect:ft,measure:$.draggable.measure});const $t=Q1(we,$.draggable.measure,ft),xi=Q1(we?we.parentElement:null),Ln=z.useRef({activatorEvent:null,active:null,activeNode:we,collisionRect:null,collisions:null,droppableRects:oe,draggableNodes:x,draggingNode:null,draggingNodeRect:null,droppableContainers:M,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),qi=M.getNodeFor((t=Ln.current.over)==null?void 0:t.id),en=W4({measure:$.dragOverlay.measure}),fi=(r=en.nodeRef.current)!=null?r:we,Un=U?(o=en.rect)!=null?o:$t:null,os=!!(en.nodeRef.current&&en.rect),Hi=G4(os?null:$t),St=WT(fi?ti(fi):null),dt=$4(U?qi??we:null),$n=X4(dt),ls=tx(I,{transform:{x:R.x-Hi.x,y:R.y-Hi.y,scaleX:1,scaleY:1},activatorEvent:se,active:D,activeNodeRect:$t,containerNodeRect:xi,draggingNodeRect:Un,over:Ln.current.over,overlayNodeRect:en.rect,scrollableAncestors:dt,scrollableAncestorRects:$n,windowRect:St}),cs=Oe?tl(Oe,R):null,tn=K4(dt),Fi=X1(tn),Cs=X1(tn,[$t]),Kn=tl(ls,Fi),Cn=Un?_4(Un,ls):null,Gi=D&&Cn?E({active:D,collisionRect:Cn,droppableRects:oe,droppableContainers:V,pointerCoordinates:cs}):null,Ns=zT(Gi,"id"),[Qn,Is]=z.useState(null),Yn=os?ls:tl(ls,Cs),Kt=y4(Yn,(c=Qn?.rect)!=null?c:null,$t),bn=z.useRef(null),At=z.useCallback((Ge,Rt)=>{let{sensor:Ct,options:Bt}=Rt;if(Ee.current==null)return;const En=x.get(Ee.current);if(!En)return;const nn=Ge.nativeEvent,Lt=new Ct({active:Ee.current,activeNode:En,event:nn,options:Bt,context:Ln,onAbort(pt){if(!x.get(pt))return;const{onDragAbort:Qt}=pe.current,ye={id:pt};Qt?.(ye),Q({type:"onDragAbort",event:ye})},onPending(pt,yt,Qt,ye){if(!x.get(pt))return;const{onDragPending:st}=pe.current,Ot={id:pt,constraint:yt,initialCoordinates:Qt,offset:ye};st?.(Ot),Q({type:"onDragPending",event:Ot})},onStart(pt){const yt=Ee.current;if(yt==null)return;const Qt=x.get(yt);if(!Qt)return;const{onDragStart:ye}=pe.current,mn={activatorEvent:nn,active:{id:yt,data:Qt.data,rect:O}};Tc.unstable_batchedUpdates(()=>{ye?.(mn),F(Gr.Initializing),j({type:vn.DragStart,initialCoordinates:pt,active:yt}),Q({type:"onDragStart",event:mn}),q(bn.current),re(nn)})},onMove(pt){j({type:vn.DragMove,coordinates:pt})},onEnd:te(vn.DragEnd),onCancel:te(vn.DragCancel)});bn.current=Lt;function te(pt){return async function(){const{active:Qt,collisions:ye,over:mn,scrollAdjustedTranslate:st}=Ln.current;let Ot=null;if(Qt&&st){const{cancelDrop:gn}=pe.current;Ot={activatorEvent:nn,active:Qt,collisions:ye,delta:st,over:mn},pt===vn.DragEnd&&typeof gn=="function"&&await Promise.resolve(gn(Ot))&&(pt=vn.DragCancel)}Ee.current=null,Tc.unstable_batchedUpdates(()=>{j({type:pt}),F(Gr.Uninitialized),Is(null),q(null),re(null),bn.current=null;const gn=pt===vn.DragEnd?"onDragEnd":"onDragCancel";if(Ot){const vt=pe.current[gn];vt?.(Ot),Q({type:gn,event:Ot})}})}}},[x]),Ds=z.useCallback((Ge,Rt)=>(Ct,Bt)=>{const En=Ct.nativeEvent,nn=x.get(Bt);if(Ee.current!==null||!nn||En.dndKit||En.defaultPrevented)return;const Lt={active:nn};Ge(Ct,Rt.options,Lt)===!0&&(En.dndKit={capturedBy:Rt.sensor},Ee.current=Bt,At(Ct,Rt))},[x,At]),$i=z4(v,Ds);Q4(v),sr(()=>{$t&&he===Gr.Initializing&&F(Gr.Initialized)},[$t,he]),z.useEffect(()=>{const{onDragMove:Ge}=pe.current,{active:Rt,activatorEvent:Ct,collisions:Bt,over:En}=Ln.current;if(!Rt||!Ct)return;const nn={active:Rt,activatorEvent:Ct,collisions:Bt,delta:{x:Kn.x,y:Kn.y},over:En};Tc.unstable_batchedUpdates(()=>{Ge?.(nn),Q({type:"onDragMove",event:nn})})},[Kn.x,Kn.y]),z.useEffect(()=>{const{active:Ge,activatorEvent:Rt,collisions:Ct,droppableContainers:Bt,scrollAdjustedTranslate:En}=Ln.current;if(!Ge||Ee.current==null||!Rt||!En)return;const{onDragOver:nn}=pe.current,Lt=Bt.get(Ns),te=Lt&&Lt.rect.current?{id:Lt.id,rect:Lt.rect.current,data:Lt.data,disabled:Lt.disabled}:null,pt={active:Ge,activatorEvent:Rt,collisions:Ct,delta:{x:En.x,y:En.y},over:te};Tc.unstable_batchedUpdates(()=>{Is(te),nn?.(pt),Q({type:"onDragOver",event:pt})})},[Ns]),sr(()=>{Ln.current={activatorEvent:se,active:D,activeNode:we,collisionRect:Cn,collisions:Gi,droppableRects:oe,draggableNodes:x,draggingNode:fi,draggingNodeRect:Un,droppableContainers:M,over:Qn,scrollableAncestors:dt,scrollAdjustedTranslate:Kn},O.current={initial:Un,translated:Cn}},[D,we,Gi,Cn,x,fi,Un,oe,M,Qn,dt,Kn]),P4({...ht,delta:R,draggingRect:Cn,pointerCoordinates:cs,scrollableAncestors:dt,scrollableAncestorRects:$n});const ar=z.useMemo(()=>({active:D,activeNode:we,activeNodeRect:$t,activatorEvent:se,collisions:Gi,containerNodeRect:xi,dragOverlay:en,draggableNodes:x,droppableContainers:M,droppableRects:oe,over:Qn,measureDroppableContainers:ce,scrollableAncestors:dt,scrollableAncestorRects:$n,measuringConfiguration:$,measuringScheduled:_e,windowRect:St}),[D,we,$t,se,Gi,xi,en,x,M,oe,Qn,ce,dt,$n,$,_e,St]),ni=z.useMemo(()=>({activatorEvent:se,activators:$i,active:D,activeNodeRect:$t,ariaDescribedById:{draggable:ve},dispatch:j,draggableNodes:x,over:Qn,measureDroppableContainers:ce}),[se,$i,D,$t,j,ve,x,Qn,ce]);return Ze.createElement(jT.Provider,{value:G},Ze.createElement(mu.Provider,{value:ni},Ze.createElement(ex.Provider,{value:ar},Ze.createElement(hd.Provider,{value:Kt},p)),Ze.createElement(iO,{disabled:d?.restoreFocus===!1})),Ze.createElement(u4,{...d,hiddenTextDescribedById:ve}));function Ki(){const Ge=ge?.autoScrollEnabled===!1,Rt=typeof g=="object"?g.enabled===!1:g===!1,Ct=U&&!Ge&&!Rt;return typeof g=="object"?{...g,enabled:Ct}:{enabled:Ct}}}),aO=z.createContext(null),J1="button",oO="Draggable";function gu(i){let{id:e,data:t,disabled:r=!1,attributes:o}=i;const c=od(oO),{activators:u,activatorEvent:d,active:g,activeNodeRect:p,ariaDescribedById:v,draggableNodes:E,over:T}=z.useContext(mu),{role:I=J1,roleDescription:P="draggable",tabIndex:H=0}=o??{},k=g?.id===e,j=z.useContext(k?hd:aO),[Q,G]=Nf(),[he,F]=Nf(),U=Y4(u,e),S=Qc(t);sr(()=>(E.set(e,{id:e,key:c,node:Q,activatorNode:he,data:S}),()=>{const R=E.get(e);R&&R.key===c&&E.delete(e)}),[E,e]);const x=z.useMemo(()=>({role:I,tabIndex:H,"aria-disabled":r,"aria-pressed":k&&I===J1?!0:void 0,"aria-roledescription":P,"aria-describedby":v.draggable}),[r,I,H,k,P,v.draggable]);return{active:g,activatorEvent:d,activeNodeRect:p,attributes:x,isDragging:k,listeners:r?void 0:U,node:Q,over:T,setNodeRef:G,setActivatorNodeRef:F,transform:j}}function lO(){return z.useContext(ex)}const cO="Droppable",uO={timeout:25};function Tl(i){let{data:e,disabled:t=!1,id:r,resizeObserverConfig:o}=i;const c=od(cO),{active:u,dispatch:d,over:g,measureDroppableContainers:p}=z.useContext(mu),v=z.useRef({disabled:t}),E=z.useRef(!1),T=z.useRef(null),I=z.useRef(null),{disabled:P,updateMeasurementsFor:H,timeout:k}={...uO,...o},j=Qc(H??r),Q=z.useCallback(()=>{if(!E.current){E.current=!0;return}I.current!=null&&clearTimeout(I.current),I.current=setTimeout(()=>{p(Array.isArray(j.current)?j.current:[j.current]),I.current=null},k)},[k]),G=ud({callback:Q,disabled:P||!u}),he=z.useCallback((x,R)=>{G&&(R&&(G.unobserve(R),E.current=!1),x&&G.observe(x))},[G]),[F,U]=Nf(he),S=Qc(e);return z.useEffect(()=>{!G||!F.current||(G.disconnect(),E.current=!1,G.observe(F.current))},[F,G]),z.useEffect(()=>(d({type:vn.RegisterDroppable,element:{id:r,key:c,disabled:t,node:F,rect:T,data:S}}),()=>d({type:vn.UnregisterDroppable,key:c,id:r})),[r]),z.useEffect(()=>{t!==v.current.disabled&&(d({type:vn.SetDroppableDisabled,id:r,key:c,disabled:t}),v.current.disabled=t)},[r,c,t,d]),{active:u,rect:T,isOver:g?.id===r,node:F,over:g,setNodeRef:U}}function hO(i){let{animation:e,children:t}=i;const[r,o]=z.useState(null),[c,u]=z.useState(null),d=If(t);return!t&&!r&&d&&o(d),sr(()=>{if(!c)return;const g=r?.key,p=r?.props.id;if(g==null||p==null){o(null);return}Promise.resolve(e(p,c)).then(()=>{o(null)})},[e,r,c]),Ze.createElement(Ze.Fragment,null,t,r?z.cloneElement(r,{ref:u}):null)}const fO={x:0,y:0,scaleX:1,scaleY:1};function dO(i){let{children:e}=i;return Ze.createElement(mu.Provider,{value:ZT},Ze.createElement(hd.Provider,{value:fO},e))}const mO={position:"fixed",touchAction:"none"},gO=i=>g0(i)?"transform 250ms ease":void 0,pO=z.forwardRef((i,e)=>{let{as:t,activatorEvent:r,adjustScale:o,children:c,className:u,rect:d,style:g,transform:p,transition:v=gO}=i;if(!d)return null;const E=o?p:{...p,scaleX:1,scaleY:1},T={...mO,width:d.width,height:d.height,top:d.top,left:d.left,transform:fl.Transform.toString(E),transformOrigin:o&&r?h4(r,d):void 0,transition:typeof v=="function"?v(r):v,...g};return Ze.createElement(t,{className:u,style:T,ref:e},c)}),yO=i=>e=>{let{active:t,dragOverlay:r}=e;const o={},{styles:c,className:u}=i;if(c!=null&&c.active)for(const[d,g]of Object.entries(c.active))g!==void 0&&(o[d]=t.node.style.getPropertyValue(d),t.node.style.setProperty(d,g));if(c!=null&&c.dragOverlay)for(const[d,g]of Object.entries(c.dragOverlay))g!==void 0&&r.node.style.setProperty(d,g);return u!=null&&u.active&&t.node.classList.add(u.active),u!=null&&u.dragOverlay&&r.node.classList.add(u.dragOverlay),function(){for(const[g,p]of Object.entries(o))t.node.style.setProperty(g,p);u!=null&&u.active&&t.node.classList.remove(u.active)}},vO=i=>{let{transform:{initial:e,final:t}}=i;return[{transform:fl.Transform.toString(e)},{transform:fl.Transform.toString(t)}]},_O={duration:250,easing:"ease",keyframes:vO,sideEffects:yO({styles:{active:{opacity:"0"}}})};function bO(i){let{config:e,draggableNodes:t,droppableContainers:r,measuringConfiguration:o}=i;return ad((c,u)=>{if(e===null)return;const d=t.get(c);if(!d)return;const g=d.node.current;if(!g)return;const p=JT(u);if(!p)return;const{transform:v}=ti(u).getComputedStyle(u),E=qT(v);if(!E)return;const T=typeof e=="function"?e:EO(e);return YT(g,o.draggable.measure),T({active:{id:c,data:d.data,node:g,rect:o.draggable.measure(g)},draggableNodes:t,dragOverlay:{node:u,rect:o.dragOverlay.measure(p)},droppableContainers:r,measuringConfiguration:o,transform:E})})}function EO(i){const{duration:e,easing:t,sideEffects:r,keyframes:o}={..._O,...i};return c=>{let{active:u,dragOverlay:d,transform:g,...p}=c;if(!e)return;const v={x:d.rect.left-u.rect.left,y:d.rect.top-u.rect.top},E={scaleX:g.scaleX!==1?u.rect.width*g.scaleX/d.rect.width:1,scaleY:g.scaleY!==1?u.rect.height*g.scaleY/d.rect.height:1},T={x:g.x-v.x,y:g.y-v.y,...E},I=o({...p,active:u,dragOverlay:d,transform:{initial:g,final:T}}),[P]=I,H=I[I.length-1];if(JSON.stringify(P)===JSON.stringify(H))return;const k=r?.({active:u,dragOverlay:d,...p}),j=d.node.animate(I,{duration:e,easing:t,fill:"forwards"});return new Promise(Q=>{j.onfinish=()=>{k?.(),Q()}})}}let Z1=0;function wO(i){return z.useMemo(()=>{if(i!=null)return Z1++,Z1},[i])}const nx=Ze.memo(i=>{let{adjustScale:e=!1,children:t,dropAnimation:r,style:o,transition:c,modifiers:u,wrapperElement:d="div",className:g,zIndex:p=999}=i;const{activatorEvent:v,active:E,activeNodeRect:T,containerNodeRect:I,draggableNodes:P,droppableContainers:H,dragOverlay:k,over:j,measuringConfiguration:Q,scrollableAncestors:G,scrollableAncestorRects:he,windowRect:F}=lO(),U=z.useContext(hd),S=wO(E?.id),x=tx(u,{activatorEvent:v,active:E,activeNodeRect:T,containerNodeRect:I,draggingNodeRect:k.rect,over:j,overlayNodeRect:k.rect,scrollableAncestors:G,scrollableAncestorRects:he,transform:U,windowRect:F}),R=w0(T),M=bO({config:r,draggableNodes:P,droppableContainers:H,measuringConfiguration:Q}),C=R?k.setRef:void 0;return Ze.createElement(dO,null,Ze.createElement(hO,{animation:M},E&&S?Ze.createElement(pO,{key:S,id:E.id,ref:C,as:d,activatorEvent:v,adjustScale:e,className:g,transition:c,rect:R,style:{zIndex:p,...o},transform:x},t):null))}),nl=i=>new f0(i),TO=(i,e,t,r)=>{try{return i.move({from:e,to:t,promotion:r||"q"})}catch{return null}},xO=({id:i,isLight:e,isHighlighted:t=!1,isActive:r=!1,children:o})=>{const{isOver:c,setNodeRef:u}=Tl({id:i});return _.jsxs("div",{ref:u,className:`chess-square ${r?"z-50 relative":"overflow-hidden"} ${c?"bg-indigo-500/60 shadow-[inset_0_0_20px_rgba(255,255,255,0.2)] z-10":t?e?"bg-indigo-400/50 shadow-inner":"bg-indigo-600/50 shadow-inner":e?"bg-[#cbd5e1] text-slate-700 shadow-[inset_0_1px_4px_rgba(255,255,255,0.3)]":"bg-[#334155] text-slate-400 shadow-[inset_0_2px_4px_rgba(0,0,0,0.3)]"}`,children:[_.jsx("div",{className:`absolute top-1 left-1 text-[10px] font-black uppercase tracking-tighter opacity-20 pointer-events-none ${e?"text-slate-900":"text-slate-100"}`,children:i}),_.jsx("div",{className:"relative w-full h-full overflow-visible z-10",children:o})]})},SO={w:{p:"",r:"",n:"",b:"",q:"",k:""},b:{p:"",r:"",n:"",b:"",q:"",k:""}},AO=({id:i,type:e,color:t,isDraggable:r=!0})=>{const{attributes:o,listeners:c,setNodeRef:u,transform:d,isDragging:g}=gu({id:i,disabled:!r,data:{type:e,color:t}}),p={transform:fl.Translate.toString(d),transition:g?"none":"transform 120ms ease-out",zIndex:g?9999:20};return _.jsx("div",{ref:u,style:p,...c,...o,className:`chess-piece transition-transform duration-120 ease-out ${g?"scale-112 drop-shadow-2xl z-[9999]":"hover:scale-103 z-20"} ${r?"cursor-grab active:cursor-grabbing":"grayscale-[0.2] opacity-90 cursor-default"} text-slate-950 drop-shadow-sm`,children:_.jsx("div",{className:`
        flex items-center justify-center w-full h-full 
        ${t==="w"?"drop-shadow-[0_2px_0_rgba(255,255,255,0.8)]":"drop-shadow-[0_2px_0_rgba(0,0,0,0.5)]"}
      `,children:SO[t][e]})})},RO=({onMove:i,initialFen:e,playerColor:t="w",isGameOver:r=!1})=>{const[o,c]=z.useState(()=>nl(e)),[u,d]=z.useState([]),[g,p]=z.useState(null);Ze.useEffect(()=>{e&&e!==o.fen()&&c(nl(e))},[e]);const v=p0(Ka(E0,{activationConstraint:{delay:80,tolerance:8}}),Ka(cd),Ka(b0)),E=z.useCallback(P=>{const{active:H,over:k}=P;if(d([]),p(null),!k)return;const j=H.id,Q=k.id,G=nl(o.fen());TO(G,j,Q)&&(c(G),i&&i(G.fen()))},[o,i]),T=z.useCallback(P=>{p(P);const H=P,k=o.get(H);if(r||!k||k.color!==t||o.turn()!==t){d([]);return}const j=o.moves({square:H,verbose:!0}).map(Q=>Q.to);d(j)},[o,t]),I=()=>{const P=[],H=["a","b","c","d","e","f","g","h"],k=["8","7","6","5","4","3","2","1"],j=t==="w"?k:[...k].reverse(),Q=t==="w"?H:[...H].reverse();for(const G of j)for(const he of Q){const F=`${he}${G}`,U=o.get(F),S=(H.indexOf(he)+k.indexOf(G))%2===0,x=!!U&&U.color===t&&o.turn()===t&&!r,R=u.includes(F),M=F===g;P.push(_.jsx(xO,{id:F,isLight:S,isHighlighted:R,isActive:M,children:U&&_.jsx(AO,{id:F,type:U.type,color:U.color,isDraggable:x})},F))}return P};return _.jsx(T0,{sensors:v,onDragEnd:E,onDragStart:P=>T(P.active.id),children:_.jsx("div",{className:"p-3 lg:p-4 bg-slate-800 rounded-[2rem] lg:rounded-[2.5rem] shadow-[0_0_50px_-12px_rgba(99,102,241,0.25)] border-4 border-slate-700/50 ring-4 ring-slate-900/50",style:{touchAction:"none"},children:_.jsx("div",{className:"grid grid-cols-8 gap-0 rounded-2xl lg:rounded-3xl overflow-hidden border border-slate-700/30 shadow-inner",style:{width:"min(92vw, 720px)",height:"min(92vw, 720px)",gridTemplateColumns:"repeat(8, 1fr)"},children:I()})})})},CO=()=>Math.random().toString(36).substring(2,8).toUpperCase(),eE="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",ix=i=>{const[e,t]=z.useState(null),[r,o]=z.useState(null),[c,u]=z.useState(!0),[d,g]=z.useState(!0);z.useEffect(()=>{const k=eo();Za(k).then(j=>{o(j.user.uid)}).catch(j=>{console.error("Auth failed",j)}).finally(()=>g(!1))},[]);const p=async()=>{if(r)return r;const k=eo(),j=await Za(k);return o(j.user.uid),j.user.uid};return z.useEffect(()=>{if(!Nt||!Ne){console.warn("Firebase not configured; room sync disabled."),u(!1);return}if(!i){t(null),u(!1);return}u(!0);const k=jt(Pt(Ne,"rooms"),i),j=Zf(k,Q=>{Q.exists()?t(Q.data()):t(null),u(!1)},Q=>{console.error("Room subscription error",Q),t(null),u(!1)});return()=>j()},[i]),{room:e,userId:r,loading:c,isAuthLoading:d,createRoom:async()=>{if(!Nt||!Ne)throw new Error("Firebase not configured");const k=await p(),j=CO(),Q=jt(Pt(Ne,"rooms"),j);return await Jf(Q,{fen:eE,whitePlayer:k,blackPlayer:"",turn:"w",status:"active",winner:"",resultReason:""}),j},joinRoom:async k=>{if(!Nt||!Ne)throw new Error("Firebase not configured");const j=await p(),Q=jt(Pt(Ne,"rooms"),k);await ns(Ne,async G=>{const he=await G.get(Q);if(!he.exists())throw new Error("Room not found");const U={...he.data()};U.whitePlayer?!U.blackPlayer&&U.whitePlayer!==j&&(U.blackPlayer=j):U.whitePlayer=j,G.update(Q,U)})},updateMove:async k=>{if(!Nt||!Ne||!i)return;const j=jt(Pt(Ne,"rooms"),i);await ns(Ne,async Q=>{const G=await Q.get(j);if(!G.exists())return;const he=G.data();if(he.status&&he.status!=="active")return;const F=new f0(k),U=F.turn();let S="active",x="",R="";F.isCheckmate()?(S="checkmate",x=U==="w"?"b":"w",R="checkmate"):F.isStalemate&&F.isStalemate()?(S="stalemate",x="",R="stalemate"):F.isDraw()&&(S="draw",x="",R="draw"),Q.update(j,{fen:k,turn:U,status:S,winner:x,resultReason:R})})},resignGame:async k=>{if(!Nt||!Ne||!i)return;const j=jt(Pt(Ne,"rooms"),i);await Wo(j,{status:"resigned",winner:k==="w"?"b":"w",resultReason:"resigned"})},resetGame:async()=>{if(!Nt||!Ne||!i)return;const k=jt(Pt(Ne,"rooms"),i);await Wo(k,{fen:eE,turn:"w",status:"active",winner:"",resultReason:""})},leaveRoom:async()=>{if(!(!Nt||!Ne)&&i)try{const k=await p(),j=jt(Pt(Ne,"rooms"),i);await ns(Ne,async Q=>{const G=await Q.get(j);if(!G.exists())return;const F={...G.data()};F.whitePlayer===k?F.whitePlayer="":F.blackPlayer===k&&(F.blackPlayer=""),Q.update(j,F)})}catch(k){console.error("Error leaving room:",k)}}}},NO={p:10,n:30,b:30,r:50,q:90,k:900},tE=[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,-.5,-1,0,0,-1,-.5,.5],[.5,1,1,-2,-2,1,1,.5],[0,0,0,0,0,0,0,0]],nE=[[-5,-4,-3,-3,-3,-3,-4,-5],[-4,-2,0,0,0,0,-2,-4],[-3,0,1,1.5,1.5,1,0,-3],[-3,.5,1.5,2,2,1.5,.5,-3],[-3,0,1.5,2,2,1.5,0,-3],[-3,.5,1,1.5,1.5,1,.5,-3],[-4,-2,0,.5,.5,0,-2,-4],[-5,-4,-3,-3,-3,-3,-4,-5]],IO=i=>{let e=0;const t=i.board();for(let r=0;r<8;r++)for(let o=0;o<8;o++){const c=t[r][o];if(c){const u=NO[c.type];let d=0;c.type==="p"&&(d=c.color==="w"?tE[r][o]:tE[7-r][o]),c.type==="n"&&(d=c.color==="w"?nE[r][o]:nE[7-r][o]),c.color==="w"?e+=u+d*.1:e-=u+d*.1}}return e},fp=(i,e,t,r,o)=>{if(e===0||i.isGameOver())return-IO(i);const c=i.moves();if(o){let u=-1/0;for(const d of c){i.move(d);const g=fp(i,e-1,t,r,!1);if(i.undo(),u=Math.max(u,g),t=Math.max(t,g),r<=t)break}return u}else{let u=1/0;for(const d of c){i.move(d);const g=fp(i,e-1,t,r,!0);if(i.undo(),u=Math.min(u,g),r=Math.min(r,g),r<=t)break}return u}},DO=(i,e="Normal")=>{const t=i.moves();if(t.length===0)return null;if(e==="Easy"&&Math.random()>.2)return t[Math.floor(Math.random()*t.length)];let r=null,o=1/0;t.sort((u,d)=>{const g=u.includes("x")?1:0;return(d.includes("x")?1:0)-g});const c=e==="Easy"?1:e==="Hard"?3:2;for(const u of t){i.move(u);const d=fp(i,c,-1/0,1/0,!0);i.undo(),d<o&&(o=d,r=u)}return r||t[0]},kO=({roomId:i="",mode:e="online",aiDifficulty:t="Normal",onExit:r})=>{const o=ix(e==="online"?i:null),[c,u]=z.useState(()=>nl()),[d,g]=z.useState(c.fen()),[p,v]=z.useState("active"),[E,T]=z.useState(""),I=e==="local",P=I?{fen:d,turn:c.turn(),whitePlayer:"local-white",blackPlayer:"local-black",status:p,winner:E}:o.room,H=I?!1:o.loading,k=ce=>{const _e=nl(ce);u(_e),g(ce),_e.isCheckmate()?(v("checkmate"),T(_e.turn()==="w"?"b":"w")):_e.isDraw()?v("draw"):_e.isStalemate&&_e.isStalemate()&&v("stalemate")};z.useEffect(()=>{if(I&&c.turn()==="b"&&p==="active"){const ce=setTimeout(()=>{const _e=DO(c,t);_e&&(c.move(_e),k(c.fen()))},500);return()=>clearTimeout(ce)}},[d,I,p,t]);const j=()=>{const ce=nl();u(ce),g(ce.fen()),v("active"),T(""),S(0),R(0),C(0)},Q=I?k:o.updateMove,G=I?ce=>{v("active"),T(ce==="w"?"b":"w"),alert(`${ce==="w"?"White":"Black"} resigned.`)}:o.resignGame,he=I?j:o.resetGame,F=I?P?.turn==="w"?"local-white":"local-black":o.userId,[U,S]=Ze.useState(0),[x,R]=Ze.useState(0),[M,C]=Ze.useState(0);if(Ze.useEffect(()=>{!I&&i&&o.joinRoom&&o.joinRoom(i)},[i,I]),Ze.useEffect(()=>{if(!P||P.status&&P.status!=="active")return;const ce=window.setInterval(()=>{S(_e=>_e+1),R(_e=>_e+(P.turn==="w"?1:0)),C(_e=>_e+(P.turn==="b"?1:0))},1e3);return()=>window.clearInterval(ce)},[P?.turn,P?.status]),H)return _.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-6 animate-pulse",children:[_.jsx("div",{className:"relative shadow-2xl shadow-indigo-500/20 rounded-full p-4",children:_.jsx(lE,{className:"w-16 h-16 text-indigo-500 animate-spin"})}),_.jsxs("div",{className:"text-center space-y-2",children:[_.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest",children:"Entering Arena"}),_.jsx("p",{className:"text-slate-500 font-medium",children:"Synchronizing with the global lattice..."})]})]});if(!P)return _.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[_.jsxs("div",{className:"text-center space-y-4",children:[_.jsx("h2",{className:"text-5xl font-black text-white italic",children:"Room Dissolved"}),_.jsx("p",{className:"text-slate-400 text-lg",children:"The arena you seek no longer exists or the link is expired."})]}),_.jsx("button",{onClick:r,className:"btn-premium px-10 py-4 text-xl",children:"Return to Lobby"})]});const O=P.whitePlayer===F||I,D=P.blackPlayer===F,Ee=I||F===P.whitePlayer?"w":F===P.blackPlayer?"b":"w",ge=P.turn===Ee,q=new f0(P.fen),se={isCheck:q.isCheck(),isCheckmate:q.isCheckmate(),isDraw:q.isDraw(),isStalemate:typeof q.isStalemate=="function"?q.isStalemate():!1,turn:q.turn()},re=P.status??"active",pe=P.winner??"",ve=re!=="active",V=ce=>{const _e=Math.floor(ce/60).toString().padStart(2,"0"),we=(ce%60).toString().padStart(2,"0");return`${_e}:${we}`},$=re==="checkmate"?`Checkmate  ${pe==="w"?"White":"Black"} wins`:re==="stalemate"?"Stalemate  Draw":re==="draw"?"Draw":re==="resigned"?`Resigned  ${pe==="w"?"White":"Black"} wins`:se.isCheck?`${se.turn==="w"?"White":"Black"} is in check`:ge?"Your Turn":"Waiting...",oe=()=>{navigator.clipboard.writeText(i),alert("Room ID copied to clipboard!")};return _.jsxs("div",{className:"flex flex-col items-center gap-8 lg:gap-12 py-6 lg:py-10 w-full animate-in fade-in duration-700",children:[_.jsxs("header",{className:"w-full max-w-6xl flex items-center justify-between px-4 lg:px-6",children:[_.jsxs("button",{onClick:()=>{!I&&o.leaveRoom&&o.leaveRoom(),r()},className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all font-bold uppercase tracking-widest text-xs",children:[_.jsx("div",{className:"p-2 rounded-xl bg-slate-900 border border-slate-800 group-hover:border-slate-700 group-hover:-translate-x-1 transition-transform",children:_.jsx(Ha,{size:18})}),"Back"]}),!I&&_.jsx("div",{className:"flex items-center gap-4",children:_.jsxs("div",{className:"liquid-glass px-6 py-3 flex items-center gap-6",children:[_.jsxs("div",{className:"flex flex-col gap-0.5",children:[_.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-slate-500 font-black",children:"Arena ID"}),_.jsx("code",{className:"text-indigo-300 font-mono font-bold",children:i})]}),_.jsx("div",{className:"h-8 w-px bg-slate-800"}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("button",{onClick:oe,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:_.jsx(yp,{size:18})}),_.jsx("button",{className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:_.jsx(cE,{size:18})})]})]})}),I&&_.jsx("div",{className:"px-6 py-3 liquid-glass text-indigo-300 font-bold uppercase tracking-widest text-xs",children:"Single Player Mode"})]}),_.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-6 lg:gap-16 w-full max-w-7xl px-4 lg:px-6",children:[_.jsxs("div",{className:"relative group w-full flex justify-center max-w-full overflow-visible",children:[_.jsx("div",{className:"absolute -inset-4 bg-linear-to-r from-indigo-500 to-pink-500 rounded-[2.5rem] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"}),_.jsx(RO,{initialFen:P.fen,onMove:Q,playerColor:Ee,isGameOver:ve})]}),_.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-6 lg:gap-8 mt-0 lg:mt-0",children:[_.jsxs("div",{className:"liquid-glass p-5 lg:p-8 space-y-6 lg:space-y-8 border-l-4 border-l-indigo-500",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:"Game Status"}),_.jsxs("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-2 ${re==="active"?ge?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-slate-800 text-slate-500":"bg-indigo-500/10 text-indigo-300 border border-indigo-500/30"}`,children:[_.jsx("span",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${re==="active"?"bg-green-500":"bg-indigo-400"}`}),I?P.turn==="w"?" White Turn":" Black Turn":$]})]}),re==="active"&&se.isCheck&&_.jsxs("div",{className:"p-3 rounded-2xl bg-amber-500/10 border border-amber-500/30 text-amber-200 text-[10px] lg:text-xs font-black uppercase tracking-widest",children:["CHECK! ",se.turn==="w"?"White":"Black"," to move."]}),ve&&_.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/10 border border-indigo-500/30 text-indigo-100 text-sm lg:text-base font-bold",children:$}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 p-4 rounded-2xl bg-slate-900/60 border border-slate-800/80 text-[10px] lg:text-xs font-bold uppercase tracking-widest",children:[_.jsxs("div",{className:"space-y-1",children:[_.jsx("div",{className:"text-slate-500",children:"Time"}),_.jsx("div",{className:"text-white text-base",children:V(U)})]}),_.jsxs("div",{className:"space-y-1",children:[_.jsx("div",{className:"text-slate-500",children:"White"}),_.jsx("div",{className:"text-emerald-300 text-base",children:V(x)})]}),_.jsxs("div",{className:"space-y-1",children:[_.jsx("div",{className:"text-slate-500",children:"Black"}),_.jsx("div",{className:"text-sky-300 text-base",children:V(M)})]})]}),!I&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"flex items-center gap-3 lg:gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[_.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${O?"bg-white text-slate-950":"bg-slate-800 text-slate-400"}`,children:"W"}),_.jsxs("div",{className:"flex-1",children:[_.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"White Player"}),_.jsx("div",{className:"text-xs text-slate-500 font-medium",children:P.whitePlayer===F?"Connected (You)":P.whitePlayer?"Opponent Ready":"Awaiting Entry..."})]})]}),_.jsxs("div",{className:"flex items-center gap-3 lg:gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[_.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${D?"bg-indigo-500 text-white":"bg-slate-800 text-slate-400"}`,children:"B"}),_.jsxs("div",{className:"flex-1",children:[_.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"Black Player"}),_.jsx("div",{className:"text-xs text-slate-500 font-medium",children:P.blackPlayer===F?"Connected (You)":P.blackPlayer?"Opponent Ready":"Awaiting Entry..."})]})]})]})]}),_.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[_.jsxs("button",{disabled:ve,onClick:()=>G(Ee),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-slate-800 bg-slate-900/60 text-slate-200 font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:border-red-500/50 hover:text-red-200 transition",children:[_.jsx(oE,{size:18}),"Resign"]}),_.jsxs("button",{disabled:!ve&&!I,onClick:()=>he(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 text-indigo-100 font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:bg-indigo-500/20 transition",children:[_.jsx(vp,{size:18}),"Rematch"]})]})]}),!I&&_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[_.jsx(Vf,{size:20,className:"mx-auto text-slate-600"}),_.jsx("div",{className:"text-xl font-black text-white italic",children:P.whitePlayer&&P.blackPlayer?"2/2":P.whitePlayer||P.blackPlayer?"1/2":"0/2"}),_.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Connected"})]}),_.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[_.jsx(uE,{size:20,className:"mx-auto text-indigo-400"}),_.jsx("div",{className:"text-xl font-black text-white italic",children:"24ms"}),_.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Latency"})]})]})]})]}),_.jsxs("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10 flex flex-col items-center gap-1",children:[_.jsx("span",{children:"Transparent Strategy Arena"}),_.jsx("span",{className:"text-slate-700 text-[8px]",children:"v1.2.0"})]})]})},OO=[2,0,0,0,0,-5,0,-3,0,0,0,5,-5,0,0,0,3,0,5,0,0,0,0,-2],xc=()=>{const i=Math.floor(Math.random()*6)+1,e=Math.floor(Math.random()*6)+1;return i===e?[i,i,i,i]:[i,e]},Pc=()=>{const i=xc();return{board:[...OO],bar:{white:0,black:0},off:{white:0,black:0},turn:"white",dice:i,movesLeft:[...i],validMoves:[],winner:null}},MO=(i,e)=>{const t=i.board;if(e==="white"){if(i.bar.white>0)return!1;for(let r=0;r<18;r++)if(t[r]>0)return!1;return!0}else{if(i.bar.black>0)return!1;for(let r=6;r<24;r++)if(t[r]<0)return!1;return!0}},dp=i=>{if(i.winner)return[];const e=o=>{const c=[],{turn:u,board:d,bar:g,movesLeft:p}=o,v=Array.from(new Set(p));if(p.length===0)return[];const E=u==="white",T=E?1:-1;if((E?g.white:g.black)>0){for(const P of v){const H=E?P-1:24-P,k=d[H];(E?k<-1:k>1)||c.push({from:"bar",to:H,roll:P,isHit:E?k===-1:k===1})}return c}for(let P=0;P<24;P++){const H=d[P];if(!(E&&H<=0)&&!(!E&&H>=0))for(const k of v){const j=P+T*k;if(MO(o,u)){if(E&&j===24){c.push({from:P,to:"off",roll:k});continue}if(!E&&j===-1){c.push({from:P,to:"off",roll:k});continue}if(E&&j>24){let F=!0;for(let U=18;U<P;U++)d[U]>0&&(F=!1);F&&c.push({from:P,to:"off",roll:k})}if(!E&&j<-1){let F=!0;for(let U=5;U>P;U--)d[U]<0&&(F=!1);F&&c.push({from:P,to:"off",roll:k})}}if(j<0||j>23)continue;const G=d[j];(E?G<-1:G>1)||c.push({from:P,to:j,roll:k,isHit:E?G===-1:G===1})}}return c},t=e(i),r=[...t];if(i.movesLeft.length>1)for(const o of t){const c=pu(i,o),u=e(c);if(o.to!=="off"){const d=u.filter(g=>g.from===o.to);for(const g of d)r.push({from:o.from,to:g.to,roll:o.roll+g.roll,isHit:g.isHit,subMoves:[o,g]})}}return r},pu=(i,e)=>{const t={...i,board:[...i.board],bar:{...i.bar},off:{...i.off},movesLeft:[...i.movesLeft]},r=i.turn==="white";if(e.subMoves&&e.subMoves.length>0){let c=i;for(const u of e.subMoves)c=pu(c,u);return c}if(e.from==="bar"?r?t.bar.white--:t.bar.black--:t.board[e.from]-=r?1:-1,e.to==="off")r?t.off.white++:t.off.black++;else{const c=e.to;e.isHit&&(r?t.bar.black++:t.bar.white++,t.board[c]=0),t.board[c]+=r?1:-1}const o=t.movesLeft.indexOf(e.roll);return o>-1&&t.movesLeft.splice(o,1),r&&t.off.white===15&&(t.winner="white"),!r&&t.off.black===15&&(t.winner="black"),t},VO=()=>Math.random().toString(36).substring(2,8).toUpperCase(),sx=i=>{const[e,t]=z.useState(null),[r,o]=z.useState(null),[c,u]=z.useState(!0),[d,g]=z.useState(!0);z.useEffect(()=>{const k=eo();Za(k).then(j=>{o(j.user.uid)}).catch(j=>{console.error("Auth failed",j)}).finally(()=>g(!1))},[]);const p=async()=>{if(r)return r;const k=eo(),j=await Za(k);return o(j.user.uid),j.user.uid};return z.useEffect(()=>{if(!Nt||!Ne){u(!1);return}if(!i){t(null),u(!1);return}u(!0);const k=jt(Pt(Ne,"rooms_bg"),i),j=Zf(k,Q=>{Q.exists()?t(Q.data()):t(null),u(!1)},Q=>{console.error("Room subscription error",Q),t(null),u(!1)});return()=>j()},[i]),{room:e,userId:r,loading:c,isAuthLoading:d,createRoom:async()=>{if(!Nt||!Ne)throw new Error("Firebase not configured");const k=await p(),j=VO(),Q=jt(Pt(Ne,"rooms_bg"),j),G=Pc(),he={board:G.board,bar:G.bar,off:G.off,turn:G.turn,dice:G.dice,movesLeft:G.movesLeft,whitePlayer:k,blackPlayer:"",winner:"",status:"active"};return await Jf(Q,he),j},joinRoom:async k=>{if(!Nt||!Ne)throw new Error("Firebase not configured");const j=await p(),Q=jt(Pt(Ne,"rooms_bg"),k);await ns(Ne,async G=>{const he=await G.get(Q);if(!he.exists())throw new Error("Room not found");const U={...he.data()};U.whitePlayer?!U.blackPlayer&&U.whitePlayer!==j&&(U.blackPlayer=j):U.whitePlayer=j,G.update(Q,U)})},updateGameState:async k=>{if(!Nt||!Ne||!i)return;const j=jt(Pt(Ne,"rooms_bg"),i);let Q="active",G="";k.winner&&(Q="finished",G=k.winner),await Wo(j,{board:k.board,bar:k.bar,off:k.off,turn:k.turn,dice:k.dice,movesLeft:k.movesLeft,winner:G,status:Q})},resignGame:async k=>{if(!Nt||!Ne||!i)return;const j=jt(Pt(Ne,"rooms_bg"),i);await Wo(j,{status:"resigned",winner:k==="white"?"black":"white"})},resetGame:async()=>{if(!Nt||!Ne||!i)return;const k=Pc(),j=jt(Pt(Ne,"rooms_bg"),i);await Wo(j,{board:k.board,bar:k.bar,off:k.off,turn:k.turn,dice:k.dice,movesLeft:k.movesLeft,status:"active",winner:""})},leaveRoom:async()=>{if(!(!Nt||!Ne)&&i)try{const k=await p(),j=jt(Pt(Ne,"rooms_bg"),i);await ns(Ne,async Q=>{const G=await Q.get(j);if(!G.exists())return;const F={...G.data()};F.whitePlayer===k?F.whitePlayer="":F.blackPlayer===k&&(F.blackPlayer=""),Q.update(j,F)})}catch(k){console.error("Error leaving room:",k)}}}},Sc=30,PO=(i,e)=>{const t=i.filter(c=>c!==null);if(t.length!==14)return!1;const r=[],o=[];return t.forEach(c=>{!c.isFakeOkey&&e&&c.color===e.color&&c.value===e.value?r.push(c):c.isFakeOkey?o.push({...c,value:e?.value||1,color:e?.color||"red",isFakeOkey:!1}):o.push(c)}),o.sort((c,u)=>c.color!==u.color?c.color.localeCompare(u.color):c.value-u.value),af(o,r.length)},af=(i,e)=>{if(i.length===0)return!0;const t=i[0],r=i.filter(d=>d.color===t.color);for(let d=3;d<=13;d++){const g=[];let p=!0;for(let I=0;I<d;I++){const P=t.value+I;if(P>13){p=!1;break}g.push(P)}if(!p)break;const v=[];let E=0,T=[...r];for(const I of g){const P=T.findIndex(H=>H.value===I);P!==-1?(v.push(T[P]),T.splice(P,1)):E++}if(E<=e){const I=v.map(H=>H.id),P=i.filter(H=>!I.includes(H.id));if(af(P,e-E))return!0}}if(t.value===1)for(let d=3;d<=4;d++){const g=[];for(let T=13-(d-2);T<=13;T++)g.push(T);g.push(1);const p=[];let v=0,E=[...r];for(const T of g){const I=E.findIndex(P=>P.value===T);I!==-1?(p.push(E[I]),E.splice(I,1)):v++}if(v<=e){const T=p.map(P=>P.id),I=i.filter(P=>!T.includes(P.id));if(af(I,e-v))return!0}}const o=i.filter(d=>d.value===t.value),c=[],u=new Set;for(const d of o)u.has(d.color)||(u.add(d.color),c.push(d));for(let d=3;d<=4;d++){const g=c.slice(0,Math.min(d,c.length)),p=d-g.length;if(p>=0&&p<=e){const v=g.map(T=>T.id),E=i.filter(T=>!v.includes(T.id));if(af(E,e-p))return!0}}return!1},jO=["red","black","blue","yellow"],LO=()=>{const i=[];let e=1;return jO.forEach(t=>{for(let r=1;r<=13;r++)i.push({id:`t-${e++}`,value:r,color:t}),i.push({id:`t-${e++}`,value:r,color:t})}),i.push({id:`t-${e++}`,value:0,color:null,isFakeOkey:!0}),i.push({id:`t-${e++}`,value:0,color:null,isFakeOkey:!0}),i},UO=i=>{const e=[...i];for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e},zO=i=>i.isFakeOkey||!i.color?{id:"virtual-okey",value:1,color:"red"}:{id:"virtual-okey",value:i.value===13?1:i.value+1,color:i.color},mp=()=>{let i=UO(LO());const e=i.pop(),t=zO(e),r=Array(4).fill(null).map(()=>({tiles:Array(Sc).fill(null)}));for(let o=0;o<15;o++)r[0].tiles[o]=i.pop();for(let o=1;o<4;o++)for(let c=0;c<14;c++)r[o].tiles[c]=i.pop();return{phase:"playing",players:r,centerStack:i,discardPiles:[[],[],[],[]],indicatorTile:e,okeyTile:t,currentTurn:0,winner:null}},BO=i=>({pile0:i[0]||[],pile1:i[1]||[],pile2:i[2]||[],pile3:i[3]||[]}),qO=()=>Math.random().toString(36).substring(2,8).toUpperCase(),rx=i=>{const[e,t]=z.useState(null),[r,o]=z.useState(null),[c,u]=z.useState(!0),[d,g]=z.useState(!0),[p,v]=z.useState(null);z.useEffect(()=>{const C=eo();Za(C).then(O=>{o(O.user.uid)}).catch(O=>{console.error("Auth failed",O),v("Authentication failed")}).finally(()=>g(!1))},[]);const E=async()=>{if(r)return r;const C=eo(),O=await Za(C);return o(O.user.uid),O.user.uid};z.useEffect(()=>{if(!Nt||!Ne){console.warn("Firebase not configured; room sync disabled."),u(!1);return}if(!i){t(null),u(!1);return}u(!0);const C=jt(Pt(Ne,"okeyRooms"),i),O=Zf(C,D=>{D.exists()?(t(D.data()),v(null)):(t(null),v("Room not found")),u(!1)},D=>{console.error("Room subscription error",D),t(null),v("Failed to connect to room"),u(!1)});return()=>O()},[i]);const T=z.useCallback(()=>!e||!r?-1:e.players.findIndex(C=>C.odaUserId===r),[e,r]),I=z.useCallback(()=>!e||!r?!1:e.hostUserId===r,[e,r]),P=async C=>{if(!Nt||!Ne)throw new Error("Firebase not configured");const O=await E(),D=qO(),Ee=jt(Pt(Ne,"okeyRooms"),D),ge=Array(4).fill(null).map((se,re)=>({odaSlotu:re,odaUserId:"",adPlayerName:"",adIsAI:!1,tiles:Array(Sc).fill(null)}));ge[0]={odaSlotu:0,odaUserId:O,adPlayerName:C,adIsAI:!1,tiles:Array(Sc).fill(null)};const q={roomId:D,phase:"waiting",players:ge,centerStack:[],discardPiles:{pile0:[],pile1:[],pile2:[],pile3:[]},indicatorTile:null,okeyTile:null,currentTurn:0,winner:null,hostUserId:O,createdAt:Date.now()};return await Jf(Ee,q),D},H=async(C,O)=>{if(!Nt||!Ne)throw new Error("Firebase not configured");const D=await E(),Ee=jt(Pt(Ne,"okeyRooms"),C);try{return await ns(Ne,async ge=>{const q=await ge.get(Ee);if(!q.exists())throw new Error("Room not found");const se=q.data();if(se.phase!=="waiting")throw new Error("Game already started");const re=se.players.findIndex(V=>V.odaUserId===D);if(re!==-1){const V=[...se.players];V[re]={...V[re],adPlayerName:O},ge.update(Ee,{players:V});return}const pe=se.players.findIndex(V=>!V.odaUserId);if(pe===-1)throw new Error("Room is full");const ve=[...se.players];ve[pe]={odaSlotu:pe,odaUserId:D,adPlayerName:O,adIsAI:!1,tiles:Array(Sc).fill(null)},ge.update(Ee,{players:ve})}),!0}catch(ge){return v(ge.message),!1}},k=async()=>{if(!(!Nt||!Ne||!i))try{const C=await E(),O=jt(Pt(Ne,"okeyRooms"),i);await ns(Ne,async D=>{const Ee=await D.get(O);if(!Ee.exists())return;const ge=Ee.data(),q=ge.players.findIndex(re=>re.odaUserId===C);if(q===-1)return;const se=[...ge.players];se[q]={odaSlotu:q,odaUserId:"",adPlayerName:"",adIsAI:!1,tiles:Array(Sc).fill(null)},D.update(O,{players:se})})}catch(C){console.error("Error leaving room:",C)}},j=async()=>{if(!(!Nt||!Ne||!i)){if(!I()){v("Only host can start the game");return}try{const C=jt(Pt(Ne,"okeyRooms"),i);await ns(Ne,async O=>{const D=await O.get(C);if(!D.exists())return;const Ee=D.data(),ge=mp(),se={phase:"playing",players:Ee.players.map((re,pe)=>re.odaUserId?{...re,tiles:ge.players[pe].tiles}:{odaSlotu:pe,odaUserId:`AI_${pe}`,adPlayerName:`Bot ${pe+1}`,adIsAI:!0,tiles:ge.players[pe].tiles}),centerStack:ge.centerStack,discardPiles:BO(ge.discardPiles),indicatorTile:ge.indicatorTile,okeyTile:ge.okeyTile,currentTurn:0,winner:null};O.update(C,se)})}catch(C){console.error("Error starting game:",C),v("Failed to start game")}}},Q=async C=>{if(!(!Nt||!Ne||!i))try{const O=jt(Pt(Ne,"okeyRooms"),i);await Wo(O,C)}catch(O){console.error("Error updating game state:",O),v("Failed to update game")}};return{room:e,userId:r,loading:c,isAuthLoading:d,error:p,getMySlot:T,isHost:I,createRoom:P,joinRoom:H,leaveRoom:k,startGame:j,updateGameState:Q,drawFromCenter:async C=>{if(!Nt||!Ne||!i)return;const O=T();if(O!==-1)try{const D=jt(Pt(Ne,"okeyRooms"),i);await ns(Ne,async Ee=>{const ge=await Ee.get(D);if(!ge.exists())return;const q=ge.data();if(q.currentTurn!==O||q.players[O].tiles.filter(ce=>ce!==null).length>=15)return;const re=[...q.centerStack],pe=re.pop();if(!pe)return;const ve=[...q.players],V=[...ve[O].tiles];let $=-1;if(C!==void 0&&C>=0&&C<V.length)if(V[C]===null)$=C;else for(let ce=1;ce<V.length;ce++){const _e=C+ce,we=C-ce;if(_e<V.length&&V[_e]===null){$=_e;break}if(we>=0&&V[we]===null){$=we;break}}$===-1&&($=V.findIndex(ce=>ce===null)),$!==-1&&(V[$]=pe),ve[O]={...ve[O],tiles:V};const oe=re.length===0?"stackEmpty":q.phase;Ee.update(D,{players:ve,centerStack:re,phase:oe})})}catch(D){console.error("Error drawing from center:",D),v("Failed to draw tile")}},drawFromDiscard:async C=>{if(!Nt||!Ne||!i)return;const O=T();if(O!==-1)try{const D=jt(Pt(Ne,"okeyRooms"),i);await ns(Ne,async Ee=>{const ge=await Ee.get(D);if(!ge.exists())return;const q=ge.data();if(q.currentTurn!==O||q.players[O].tiles.filter(we=>we!==null).length>=15)return;const pe=`pile${(O+3)%4}`,ve=q.discardPiles[pe];if(!ve||ve.length===0)return;const V=ve[ve.length-1],$={...q.discardPiles,[pe]:ve.slice(0,-1)},oe=[...q.players],ce=[...oe[O].tiles];let _e=-1;if(C!==void 0&&C>=0&&C<ce.length)if(ce[C]===null)_e=C;else for(let we=1;we<ce.length;we++){const Oe=C+we,ht=C-we;if(Oe<ce.length&&ce[Oe]===null){_e=Oe;break}if(ht>=0&&ce[ht]===null){_e=ht;break}}_e===-1&&(_e=ce.findIndex(we=>we===null)),_e!==-1&&(ce[_e]=V),oe[O]={...oe[O],tiles:ce},Ee.update(D,{players:oe,discardPiles:$})})}catch(D){console.error("Error drawing from discard:",D),v("Failed to draw from discard")}},discardTile:async C=>{if(!Nt||!Ne||!i)return;const O=T();if(O!==-1)try{const D=jt(Pt(Ne,"okeyRooms"),i);await ns(Ne,async Ee=>{const ge=await Ee.get(D);if(!ge.exists())return;const q=ge.data();if(q.currentTurn!==O||q.players[O].tiles.filter(_e=>_e!==null).length!==15)return;const re=q.players[O].tiles[C];if(!re)return;const pe=[...q.players],ve=[...pe[O].tiles];ve[C]=null,pe[O]={...pe[O],tiles:ve};const V=`pile${O}`,$=q.discardPiles[V]||[],oe={...q.discardPiles,[V]:[...$,re]},ce=(q.currentTurn+1)%4;Ee.update(D,{players:pe,discardPiles:oe,currentTurn:ce})})}catch(D){console.error("Error discarding tile:",D),v("Failed to discard tile")}},moveTileInRack:async(C,O)=>{if(!e||!i)return;const D=T();if(D===-1)return;const Ee=[...e.players],ge=[...Ee[D].tiles],q=ge[C];ge[C]=ge[O],ge[O]=q,Ee[D]={...Ee[D],tiles:ge},await Q({players:Ee})},autoSortTiles:async()=>{if(!e||!i)return;const C=T();if(C===-1)return;const O=[...e.players],Ee=[...O[C].tiles].filter($=>$!==null),ge=Ee.filter($=>$.isFakeOkey||!$.color),q=Ee.filter($=>!$.isFakeOkey&&$.color),se=["red","blue","black","yellow"],re={red:[],blue:[],black:[],yellow:[]};q.forEach($=>{$.color&&re[$.color].push($)}),se.forEach($=>{re[$].sort((oe,ce)=>oe.value-ce.value)});const pe=new Array(30).fill(null);let ve=0,V=15;re.red.forEach($=>{ve<15&&(pe[ve++]=$)}),re.red.length>0&&ve<15&&ve++,re.blue.forEach($=>{ve<15&&(pe[ve++]=$)}),re.black.forEach($=>{V<30&&(pe[V++]=$)}),re.black.length>0&&V<30&&V++,re.yellow.forEach($=>{V<30&&(pe[V++]=$)}),re.yellow.length>0&&V<30&&V++,ge.forEach($=>{V<30&&(pe[V++]=$)}),O[C]={...O[C],tiles:pe},await Q({players:O})},resetGame:async()=>{I()&&await j()},reshuffleDiscards:async()=>{if(!e||!i||!I())return;const C=[...e.discardPiles.pile0||[],...e.discardPiles.pile1||[],...e.discardPiles.pile2||[],...e.discardPiles.pile3||[]];if(C.length===0){await Q({phase:"roundOver",winner:null});return}const O=[...C].sort(()=>Math.random()-.5);await Q({centerStack:O,discardPiles:{pile0:[],pile1:[],pile2:[],pile3:[]},phase:"playing"})},endInTie:async()=>{!e||!i||!I()||await Q({phase:"roundOver",winner:null})}}},ax=({color:i,style:e,className:t=""})=>{const r=i==="white"?"bg-slate-200 shadow-[inset_0_-4px_4px_rgba(0,0,0,0.2),0_4px_6px_rgba(0,0,0,0.3)] border-slate-300":"bg-slate-900 shadow-[inset_0_-4px_4px_rgba(0,0,0,0.5),0_4px_6px_rgba(0,0,0,0.4)] border-slate-700",o=i==="white"?"border-slate-300":"border-slate-700";return _.jsx("div",{style:e,className:`w-full h-full rounded-full border-4 ${r} relative flex items-center justify-center ${t}`,children:_.jsx("div",{className:`w-[70%] h-[70%] rounded-full border-2 ${o} opacity-30`})})},gp=({id:i,color:e,isDraggable:t=!1,style:r})=>{const{attributes:o,listeners:c,setNodeRef:u,isDragging:d}=gu({id:i,disabled:!t}),g={opacity:d?0:1,touchAction:"none",...r};return _.jsx("div",{ref:u,style:g,...c,...o,className:"w-full aspect-square relative cursor-grab active:cursor-grabbing",children:_.jsx(ax,{color:e})})},HO=({index:i,count:e,isTop:t,isHighlighted:r,playerColor:o,canDragFrom:c,isHitTarget:u})=>{const{setNodeRef:d,isOver:g}=Tl({id:i.toString()}),p=i%2===1,v=g||r?"bg-indigo-500/20 ring-2 ring-indigo-400/50":"",E=Math.abs(e),T=e>0?"white":"black",I=5,P=Math.min(E,I),H=E>I,k=()=>E<=3?"-my-0.5":E<=5?"-my-1":"-my-1.5",j=[];for(let G=0;G<P;G++){const he=G===P-1,F=c&&he&&T===o;j.push(_.jsx("div",{className:`w-[80%] max-w-[40px] ${k()} z-10 relative`,children:_.jsx(gp,{id:`checker-${i}-${G}`,color:T,isDraggable:F})},`${i}-${G}`))}const Q=H?_.jsx("div",{className:`absolute ${t?"bottom-1":"top-1"} left-1/2 -translate-x-1/2 z-20 
                px-1.5 py-0.5 rounded-full text-[10px] font-bold shadow-lg
                ${T==="white"?"bg-slate-100 text-slate-800 border border-slate-300":"bg-slate-800 text-slate-100 border border-slate-600"}`,children:E}):null;return _.jsxs("div",{ref:d,className:`relative flex-1 h-full flex ${t?"flex-col items-center justify-start":"flex-col-reverse items-center justify-start"} ${v} transition-colors rounded-sm`,children:[_.jsx("div",{className:"absolute inset-0 pointer-events-none w-full h-full opacity-60",style:{clipPath:t?"polygon(0 0, 50% 100%, 100% 0)":"polygon(0 100%, 50% 0, 100% 100%)",backgroundColor:p?"#334155":"#818cf8",opacity:p?.4:.15}}),_.jsx("div",{className:`z-10 w-full h-full flex ${t?"flex-col pt-2":"flex-col-reverse pb-2"} items-center overflow-hidden`,children:j}),Q,u&&_.jsxs("div",{className:`absolute ${t?"top-6":"bottom-6"} left-1/2 -translate-x-1/2 z-50 pointer-events-none`,children:[_.jsx("style",{children:`
                        @keyframes shatter-left {
                            0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
                            100% { transform: translate(-20px, -10px) rotate(-15deg); opacity: 0; }
                        }
                        @keyframes shatter-right {
                            0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
                            100% { transform: translate(20px, -10px) rotate(15deg); opacity: 0; }
                        }
                        @keyframes impact-flash {
                            0% { transform: scale(0.5); opacity: 0; }
                            10% { transform: scale(1.2); opacity: 1; }
                            100% { transform: scale(0); opacity: 0; }
                        }
                        `}),_.jsx("div",{className:"relative w-10 h-10 md:w-12 md:h-12",children:(()=>{const G=e>0?"black":"white",he=G==="white"?"bg-slate-200 border-slate-300 shadow-sm":"bg-slate-900 border-slate-700 shadow-xl",F=G==="white"?"border-slate-300":"border-slate-700";return _.jsxs(_.Fragment,{children:[_.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${he} overflow-hidden`,style:{clipPath:"polygon(0% 0%, 55% 0%, 45% 100%, 0% 100%)",animation:"shatter-left 0.6s ease-out forwards"},children:_.jsx("div",{className:`absolute inset-2 rounded-full border-2 ${F} opacity-30`})}),_.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${he} overflow-hidden`,style:{clipPath:"polygon(55% 0%, 100% 0%, 100% 100%, 45% 100%)",animation:"shatter-right 0.6s ease-out forwards"},children:_.jsx("div",{className:`absolute inset-2 rounded-full border-2 ${F} opacity-30`})}),_.jsx("div",{className:"absolute inset-0 bg-white rounded-full mix-blend-overlay",style:{animation:"impact-flash 0.4s ease-out forwards"}})]})})()})]}),_.jsx("span",{className:`absolute ${t?"top-0":"bottom-0"} text-[8px] text-slate-600 font-mono opacity-50`,children:i+1})]})},FO={1:[4],2:[0,8],3:[0,4,8],4:[0,2,6,8],5:[0,2,4,6,8],6:[0,2,3,5,6,8]},GO=({value:i,isRolling:e,color:t})=>{const[r,o]=z.useState(i);z.useEffect(()=>{let d;return e?d=setInterval(()=>{o(Math.floor(Math.random()*6)+1)},100):o(i),()=>clearInterval(d)},[e,i]);const c=t==="white"?"bg-white text-slate-900 border-slate-200 shadow-lg":"bg-slate-900 text-white border-slate-700 shadow-xl",u=t==="white"?"bg-slate-900":"bg-white";return _.jsxs("div",{className:`
                w-10 h-10 md:w-12 md:h-12 rounded-lg flex items-center justify-center border-2 
                transition-all duration-300 relative
                ${c}
                ${e?"animate-bounce scale-110 rotate-12":"hover:scale-105"}
            `,style:{perspective:"1000px",transformStyle:"preserve-3d"},children:[_.jsx("div",{className:"grid grid-cols-3 grid-rows-3 gap-1 w-[70%] h-[70%]",children:Array.from({length:9}).map((d,g)=>_.jsx("div",{className:"flex items-center justify-center",children:FO[r].includes(g)&&_.jsx("div",{className:`w-1.5 h-1.5 md:w-2 md:h-2 rounded-full ${u} shadow-sm`})},g))}),_.jsx("div",{className:"absolute inset-0 bg-linear-to-br from-white/20 to-transparent pointer-events-none rounded-lg"})]})},$O=({gameState:i,playerColor:e,onMove:t,validMoves:r})=>{const{board:o,bar:c,off:u,turn:d}=i,[g,p]=z.useState(null),[v,E]=z.useState([]),[T,I]=z.useState(null),[P,H]=z.useState(!1),k=Ze.useRef(i.dice),j=p0(Ka(b0,{activationConstraint:{distance:8}}),Ka(E0,{activationConstraint:{delay:100,tolerance:5}})),Q=U=>{const{active:S}=U,x=S.id;let R=-1;if(x.startsWith("bar"))R="bar";else if(x.startsWith("checker-")){const O=x.split("-");R=parseInt(O[1])}else R=parseInt(x);p(x);const C=r.filter(O=>R==="bar"?O.from==="bar":O.from===R).map(O=>O.to==="off"?99:O.to);E(C)},G=Ze.useRef(i.board);Ze.useEffect(()=>{const U=G.current,S=i.board;for(let x=0;x<24;x++){const R=U[x],M=S[x];R===-1&&M>=1&&(I(x),setTimeout(()=>I(null),800)),R===1&&M<=-1&&(I(x),setTimeout(()=>I(null),800))}G.current=i.board},[i.board]),Ze.useEffect(()=>{if(JSON.stringify(k.current)!==JSON.stringify(i.dice)){H(!0);const U=setTimeout(()=>H(!1),800);return k.current=i.dice,()=>clearTimeout(U)}},[i.dice]);const he=U=>{const{active:S,over:x}=U;if(p(null),E([]),!x)return;const R=S.id;let M=-1;if(R.startsWith("bar"))M="bar";else if(R.startsWith("checker-")){const D=R.split("-");M=parseInt(D[1])}else M=parseInt(R);let C=-1;x.id==="off"?C="off":C=parseInt(x.id);const O=r.find(D=>D.from===M&&D.to===C);if(O){const D=pu(i,O);t(D)}},F=(U,S,x)=>{const R=[];if(U<S)for(let M=U;M<=S;M++)R.push(M);else for(let M=U;M>=S;M--)R.push(M);return _.jsx("div",{className:`flex-1 flex ${x?"border-b-2":"border-t-2"} border-slate-700/30`,children:R.map(M=>_.jsx(HO,{index:M,count:o[M],isTop:x,isHighlighted:v.includes(M),playerColor:e,canDragFrom:e===d&&(e==="white"&&c.white===0||e==="black"&&c.black===0),isHitTarget:T===M},M))})};return _.jsxs(T0,{sensors:j,onDragStart:Q,onDragEnd:he,children:[_.jsxs("div",{className:"flex flex-col md:flex-row w-full max-w-full md:max-w-7xl mx-auto gap-2 md:gap-4 items-stretch p-1 md:p-4",children:[_.jsxs("div",{className:"relative flex-1 aspect-square md:aspect-[4/3] bg-slate-800/80 rounded-xl border-4 md:border-[12px] border-slate-900 shadow-2xl flex flex-col overflow-hidden",children:[_.jsxs("div",{className:"flex-1 flex",children:[F(e==="white"?11:12,e==="white"?6:17,!0),_.jsxs("div",{className:"w-12 md:w-20 bg-slate-900/50 border-x-4 border-slate-900 flex flex-col items-center justify-center gap-1 py-2",children:[Array.from({length:c.white}).map((U,S)=>_.jsx("div",{className:"w-10 md:w-12",children:_.jsx(gp,{id:`bar-white-${S}`,color:"white",isDraggable:e==="white"&&d==="white"&&S===c.white-1})},`bar-w-${S}`)),Array.from({length:c.black}).map((U,S)=>_.jsx("div",{className:"w-10 md:w-12",children:_.jsx(gp,{id:`bar-black-${S}`,color:"black",isDraggable:e==="black"&&d==="black"&&S===c.black-1})},`bar-b-${S}`))]}),F(e==="white"?5:18,e==="white"?0:23,!0)]}),_.jsxs("div",{className:"flex-1 flex",children:[F(e==="white"?12:11,e==="white"?17:6,!1),_.jsx("div",{className:"w-12 md:w-20 bg-slate-900/50 border-x-4 border-slate-900 flex flex-col-reverse items-center justify-start gap-1 py-2"}),F(e==="white"?18:5,e==="white"?23:0,!1)]}),_.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center z-50",children:_.jsx("div",{className:"flex gap-4",children:(()=>{const U={};return i.dice.map((S,x)=>{const R=i.movesLeft.filter(C=>C===S).length;U[S]=(U[S]||0)+1;const M=U[S]>R;return _.jsx("div",{className:`transition-opacity duration-300 ${M?"opacity-30 grayscale":"opacity-100"}`,children:_.jsx(GO,{value:S,isRolling:P,color:d==="white"?"white":"black"})},x)})})()})})]}),_.jsxs("div",{className:"w-full h-20 md:w-32 md:h-auto bg-slate-900/40 rounded-xl border-4 border-slate-800 flex flex-row md:flex-col relative overflow-hidden shrink-0",children:[_.jsx("div",{className:"absolute inset-y-0 left-1/2 -translate-x-1/2 w-[2px] bg-slate-800/50 hidden md:block"}),_.jsx("div",{className:"absolute inset-x-0 top-1/2 -translate-y-1/2 h-[2px] bg-slate-800/50 md:hidden"}),_.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 md:-rotate-90 text-slate-700 font-bold text-xs md:text-sm tracking-[0.5em] pointer-events-none whitespace-nowrap opacity-50 z-0",children:"COLLECT"}),_.jsx("div",{className:"flex-1 w-full p-2 flex flex-col gap-1 z-10 border-r md:border-r-0 md:border-b border-slate-800/50",children:_.jsx(iE,{playerColor:e==="white"?"black":"white",count:e==="white"?u.black:u.white,isTop:!0})}),_.jsx("div",{className:"flex-1 w-full p-2 flex flex-col-reverse gap-1 z-10",children:_.jsx(iE,{playerColor:e==="white"?"white":"black",count:e==="white"?u.white:u.black,isTop:!1})}),_.jsx("div",{className:`absolute inset-0 z-20 ${g?"pointer-events-auto":"pointer-events-none"}`,children:_.jsx(KO,{isHighlighted:v.includes(99)})})]})]}),_.jsx(nx,{children:g?_.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 cursor-grabbing",children:_.jsx(ax,{color:(function(){if(g.startsWith("bar-white"))return"white";if(g.startsWith("bar-black"))return"black";if(g.startsWith("checker-")){const U=g.split("-"),S=parseInt(U[1]);return o[S]>0?"white":"black"}return"white"})()})}):null})]})},KO=({isHighlighted:i})=>{const{setNodeRef:e,isOver:t}=Tl({id:"off"}),r=t||i;return _.jsx("div",{ref:e,className:`w-full h-full flex items-center justify-center transition-all duration-300 ${r?"bg-indigo-500/30 backdrop-blur-sm border-2 border-dashed border-indigo-400":""}`,children:r&&_.jsx("div",{className:"text-indigo-200 font-bold text-xs rotate-90 whitespace-nowrap animate-pulse",children:"COLLECT"})})},iE=({playerColor:i,count:e,isTop:t})=>_.jsxs("div",{className:`w-full flex ${t?"flex-col":"flex-col-reverse"} gap-[2px] transition-colors rounded-lg p-1`,children:[e>0&&_.jsx("div",{className:`text-[10px] text-center mb-1 font-bold ${i==="white"?"text-slate-400":"text-slate-600"}`,children:e}),Array.from({length:Math.min(e,15)}).map((r,o)=>_.jsx("div",{className:`h-2 w-full rounded-sm opacity-80 ${i==="white"?"bg-slate-200 shadow-sm":"bg-slate-900 border border-slate-700 shadow-sm"}`},o))]}),QO=(i,e="Normal")=>{const t=dp(i);if(t.length===0)return null;if(e==="Easy"){const c=Math.floor(Math.random()*t.length);return t[c]}let r=t[0],o=-1/0;for(const c of t){const u=YO(i,c,e);u>o&&(o=u,r=c)}return r},YO=(i,e,t)=>{let r=0;e.isHit&&(r+=100),e.to==="off"&&(r+=200);const o=pu({...i},e),c=i.turn==="white";if(typeof e.to=="number"){const u=o.board[e.to];c&&u===2&&(r+=50),!c&&u===-2&&(r+=50)}if(typeof e.to=="number"){const u=o.board[e.to];Math.abs(u)===1&&(r-=30)}if(typeof e.from=="number"){const u=o.board[e.from];Math.abs(u)===1&&(r-=40)}return t==="Hard"&&typeof e.to=="number"&&(c?e.to>=18:e.to<=5)&&Math.abs(o.board[e.to])>1&&(r+=30),r+=Math.random()*5,r},XO=({roomId:i="",mode:e="online",aiDifficulty:t="Normal",onExit:r})=>{const o=sx(e==="online"?i:null),[c,u]=z.useState(()=>Pc()),[d,g]=z.useState(null),p=e==="local",v=Ze.useMemo(()=>p?c:d||(o.room?{...o.room,validMoves:[]}:null),[p,c,o.room,d]);z.useEffect(()=>{if(!o.room||!d)return;const F=o.room.turn===d.turn,U=JSON.stringify(o.room.board)===JSON.stringify(d.board),S=o.room.movesLeft.length===d.movesLeft.length;F&&U&&S?g(null):F||g(null)},[o.room,d]);const E=Ze.useMemo(()=>v?dp(v):[],[v]),T=p?v?.turn==="white"?"local-white":"local-black":o.userId,I=p||o.room?.whitePlayer===T?"white":"black",P=I===v?.turn;z.useEffect(()=>{!p&&i&&o.joinRoom&&o.joinRoom(i)},[i,p]);const H=()=>{navigator.clipboard.writeText(i),alert("Room ID copied to clipboard!")},k=o.room?.whitePlayer===T||p,j=o.room?.blackPlayer===T,Q=!!v?.winner,G=F=>{let U={...F};U.movesLeft.length===0?(U.turn=U.turn==="white"?"black":"white",U.dice=xc(),U.movesLeft=[...U.dice]):dp(U).length===0&&(U.turn=U.turn==="white"?"black":"white",U.dice=xc(),U.movesLeft=[...U.dice]),p?u(U):(g(U),o.updateGameState(U))};if(z.useEffect(()=>{if(v&&v.movesLeft.length>0&&E.length===0&&!v.winner){const F=setTimeout(()=>{let U={...v};U.turn=U.turn==="white"?"black":"white",U.dice=xc(),U.movesLeft=[...U.dice],p?u(U):(g(U),o.updateGameState(U))},1500);return()=>clearTimeout(F)}},[v?.movesLeft,E.length,v?.winner,v?.turn,p,v]),z.useEffect(()=>{if(v&&p&&v.turn==="black"&&!v.winner){const F=setTimeout(()=>{const U=QO(v,t);if(U){const S=pu(v,U);G(S)}else{let S={...v};S.turn="white",S.dice=xc(),S.movesLeft=[...S.dice],u(S)}},1500);return()=>clearTimeout(F)}},[v,p,t]),!p&&o.loading)return _.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-6 animate-pulse",children:[_.jsx("div",{className:"relative shadow-2xl shadow-indigo-500/20 rounded-full p-4",children:_.jsx(lE,{className:"w-16 h-16 text-indigo-500 animate-spin"})}),_.jsxs("div",{className:"text-center space-y-2",children:[_.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest",children:"Entering Arena"}),_.jsx("p",{className:"text-slate-500 font-medium",children:"Synchronizing with the global lattice..."})]})]});if(!v)return _.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[_.jsxs("div",{className:"text-center space-y-4",children:[_.jsx("h2",{className:"text-5xl font-black text-white italic",children:"Room Dissolved"}),_.jsx("p",{className:"text-slate-400 text-lg",children:"The arena you seek no longer exists or the link is expired."})]}),_.jsx("button",{onClick:r,className:"btn-premium px-10 py-4 text-xl",children:"Return to Lobby"})]});const he=v.winner?`${v.winner==="white"?"White":"Black"} Wins!`:P?"Your Turn":"Waiting...";return _.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center gap-8 lg:gap-12 py-6 lg:py-10 w-full animate-in fade-in duration-700",children:[_.jsxs("header",{className:"w-full max-w-6xl flex items-center justify-between px-4 lg:px-6",children:[_.jsxs("button",{onClick:()=>{!p&&o.leaveRoom&&o.leaveRoom(),r()},className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all font-bold uppercase tracking-widest text-xs",children:[_.jsx("div",{className:"p-2 rounded-xl bg-slate-900 border border-slate-800 group-hover:border-slate-700 group-hover:-translate-x-1 transition-transform",children:_.jsx(Ha,{size:18})}),"Back"]}),!p&&_.jsx("div",{className:"flex items-center gap-4",children:_.jsxs("div",{className:"liquid-glass px-6 py-3 flex items-center gap-6",children:[_.jsxs("div",{className:"flex flex-col gap-0.5",children:[_.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-slate-500 font-black",children:"Arena ID"}),_.jsx("code",{className:"text-indigo-300 font-mono font-bold",children:i})]}),_.jsx("div",{className:"h-8 w-px bg-slate-800"}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("button",{onClick:H,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:_.jsx(yp,{size:18})}),_.jsx("button",{className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:_.jsx(cE,{size:18})})]})]})}),p&&_.jsx("div",{className:"px-6 py-3 liquid-glass text-indigo-300 font-bold uppercase tracking-widest text-xs",children:"Single Player Mode"})]}),_.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-6 lg:gap-16 w-full max-w-7xl px-0 lg:px-6",children:[_.jsxs("div",{className:"relative group w-full flex justify-center max-w-full overflow-visible",children:[_.jsx("div",{className:"absolute -inset-4 bg-linear-to-r from-indigo-500 to-pink-500 rounded-[2.5rem] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"}),_.jsx($O,{gameState:v,playerColor:I,onMove:G,onRollDice:()=>{},validMoves:E}),Q&&_.jsx(JO,{winner:v.winner,playerColor:I,onRematch:()=>{const F=Pc();g(null),p?u(F):o.resetGame()},onExit:()=>{!p&&o.leaveRoom&&o.leaveRoom(),r()}})]}),_.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-3 lg:gap-8 mt-0 lg:mt-0",children:[_.jsxs("div",{className:"liquid-glass p-3 lg:p-8 space-y-3 lg:space-y-8 border-l-4 border-l-indigo-500",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:"Game Status"}),_.jsxs("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-2 ${v.winner?"bg-indigo-500/10 text-indigo-300 border border-indigo-500/30":P?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-slate-800 text-slate-500"}`,children:[_.jsx("span",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${v.winner?"bg-indigo-400":"bg-green-500"}`}),p?v.turn==="white"?" White Turn":" Black Turn":he]})]}),Q&&_.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/10 border border-indigo-500/30 text-indigo-100 text-sm lg:text-base font-bold",children:he}),_.jsxs("div",{className:"space-y-2 lg:space-y-4",children:[_.jsx(WO,{gameState:v}),!p&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"flex items-center gap-2 lg:gap-4 p-2 lg:p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[_.jsx("div",{className:`w-8 h-8 lg:w-12 lg:h-12 rounded-xl flex items-center justify-center text-lg lg:text-xl font-bold ${k?"bg-white text-slate-950":"bg-slate-800 text-slate-400"}`,children:"W"}),_.jsxs("div",{className:"flex-1",children:[_.jsx("div",{className:"text-xs lg:text-sm font-bold text-white uppercase tracking-wide",children:"White Player"}),_.jsx("div",{className:"text-[10px] lg:text-xs text-slate-500 font-medium",children:o.room?.whitePlayer===T?"Connected (You)":o.room?.whitePlayer?"Opponent Ready":"Awaiting Entry..."})]})]}),_.jsxs("div",{className:"flex items-center gap-2 lg:gap-4 p-2 lg:p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[_.jsx("div",{className:`w-8 h-8 lg:w-12 lg:h-12 rounded-xl flex items-center justify-center text-lg lg:text-xl font-bold ${j?"bg-indigo-500 text-white":"bg-slate-800 text-slate-400"}`,children:"B"}),_.jsxs("div",{className:"flex-1",children:[_.jsx("div",{className:"text-xs lg:text-sm font-bold text-white uppercase tracking-wide",children:"Black Player"}),_.jsx("div",{className:"text-[10px] lg:text-xs text-slate-500 font-medium",children:o.room?.blackPlayer===T?"Connected (You)":o.room?.blackPlayer?"Opponent Ready":"Awaiting Entry..."})]})]})]})]}),_.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 lg:gap-3",children:[_.jsxs("button",{disabled:Q,onClick:()=>{if(p){const F={...v};F.winner=I==="white"?"black":"white",u(F)}else o.resignGame(I)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 lg:px-4 lg:py-3 rounded-xl border border-slate-800 bg-slate-900/60 text-slate-200 text-sm lg:text-base font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:border-red-500/50 hover:text-red-200 transition",children:[_.jsx(oE,{size:16,className:"lg:w-[18px] lg:h-[18px]"}),"Resign"]}),_.jsxs("button",{disabled:!Q&&!p,onClick:()=>{const F=Pc();g(null),p?u(F):o.resetGame()},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 lg:px-4 lg:py-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 text-indigo-100 text-sm lg:text-base font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:bg-indigo-500/20 transition",children:[_.jsx(vp,{size:16,className:"lg:w-[18px] lg:h-[18px]"}),"Rematch"]})]})]}),!p&&_.jsxs("div",{className:"hidden lg:grid grid-cols-2 gap-4",children:[_.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[_.jsx(Vf,{size:20,className:"mx-auto text-slate-600"}),_.jsx("div",{className:"text-xl font-black text-white italic",children:o.room?.whitePlayer&&o.room?.blackPlayer?"2/2":o.room?.whitePlayer||o.room?.blackPlayer?"1/2":"0/2"}),_.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Connected"})]}),_.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[_.jsx(uE,{size:20,className:"mx-auto text-indigo-400"}),_.jsx("div",{className:"text-xl font-black text-white italic",children:"24ms"}),_.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Latency"})]})]})]})]}),_.jsxs("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10 flex flex-col items-center gap-1",children:[_.jsx("span",{children:"Transparent Strategy Arena"}),_.jsx("span",{className:"text-slate-700 text-[8px]",children:"v1.1.0"})]})]})},WO=({gameState:i})=>{const[e,t]=z.useState(0),[r,o]=z.useState(0),[c,u]=z.useState(0),d=Ze.useRef(i?.winner);z.useEffect(()=>{d.current&&!i?.winner&&(t(0),o(0),u(0)),d.current=i?.winner},[i?.winner]),z.useEffect(()=>{if(!i||i.winner)return;const p=window.setInterval(()=>{t(v=>v+1),o(v=>v+(i.turn==="white"?1:0)),u(v=>v+(i.turn==="black"?1:0))},1e3);return()=>window.clearInterval(p)},[i?.turn,i?.winner]);const g=p=>{const v=Math.floor(p/60).toString().padStart(2,"0"),E=(p%60).toString().padStart(2,"0");return`${v}:${E}`};return _.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-3 p-2 md:p-4 rounded-2xl bg-slate-900/60 border border-slate-800/80 text-[10px] lg:text-xs font-bold uppercase tracking-widest",children:[_.jsxs("div",{className:"space-y-1",children:[_.jsx("div",{className:"text-slate-500",children:"Time"}),_.jsx("div",{className:"text-white text-base",children:g(e)})]}),_.jsxs("div",{className:"space-y-1",children:[_.jsx("div",{className:"text-slate-500",children:"White"}),_.jsx("div",{className:"text-emerald-300 text-base",children:g(r)})]}),_.jsxs("div",{className:"space-y-1",children:[_.jsx("div",{className:"text-slate-500",children:"Black"}),_.jsx("div",{className:"text-sky-300 text-base",children:g(c)})]})]})},JO=({winner:i,playerColor:e,onRematch:t,onExit:r})=>{const o=i===e;return _.jsxs("div",{className:"absolute inset-0 z-50 rounded-[2rem] bg-slate-900/80 backdrop-blur-md flex flex-col items-center justify-center p-6 text-center animate-in fade-in zoom-in duration-500",children:[_.jsx("div",{className:`p-6 rounded-full mb-6 ${o?"bg-amber-500/20 text-amber-400 shadow-[0_0_50px_-12px_rgba(245,158,11,0.5)]":"bg-red-500/20 text-red-400 shadow-[0_0_50px_-12px_rgba(239,68,68,0.5)]"}`,children:o?_.jsx(Vg,{size:64,className:"animate-bounce"}):_.jsx(rA,{size:64})}),_.jsx("h2",{className:`text-4xl md:text-5xl font-black uppercase tracking-widest mb-2 ${o?"text-transparent bg-clip-text bg-linear-to-b from-amber-300 to-amber-600":"text-slate-200"}`,children:o?"Victory!":"Defeat"}),_.jsx("p",{className:"text-slate-400 font-bold text-lg mb-8 uppercase tracking-widest",children:o?"You conquered the board.":"Better luck next time."}),_.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[_.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center gap-3 px-6 py-4 rounded-xl bg-indigo-500 hover:bg-indigo-400 text-white font-black uppercase tracking-widest transition-all hover:scale-105 active:scale-95 shadow-lg shadow-indigo-500/30",children:[_.jsx(vp,{size:20}),"Rematch"]}),_.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center gap-3 px-6 py-4 rounded-xl bg-slate-800 hover:bg-slate-700 text-slate-300 font-bold uppercase tracking-widest transition-all hover:scale-105 active:scale-95",children:[_.jsx(hA,{size:20}),"Return to Lobby"]})]})]})},ZO=i=>{const[e,t]=z.useState(null),[r,o]=z.useState(!1);z.useEffect(()=>{if(!i)try{const k=mp();console.log("Okey Game Initialized",k),t(k)}catch(k){console.error("Failed to initialize Okey game",k)}},[i]);const c=z.useCallback(k=>{t(j=>{if(!j)return null;if(j.currentTurn!==0||j.players[0].tiles.filter(x=>x!==null).length>=15)return j;const G=[...j.centerStack],he=G.pop();if(!he)return j;const F=[...j.players],U=[...F[0].tiles];let S=-1;if(k!==void 0&&k>=0&&k<U.length)if(U[k]===null)S=k;else for(let x=1;x<U.length;x++){const R=k+x,M=k-x;if(R<U.length&&U[R]===null){S=R;break}if(M>=0&&U[M]===null){S=M;break}}return S===-1&&(S=U.findIndex(x=>x===null)),S!==-1&&(U[S]=he),F[0]={...F[0],tiles:U},G.length===0?{...j,players:F,centerStack:G,phase:"stackEmpty"}:{...j,players:F,centerStack:G}})},[]),u=z.useCallback(k=>{t(j=>{if(!j||j.currentTurn!==0||j.players[0].tiles.filter(M=>M!==null).length>=15)return j;const G=3;if(j.discardPiles[G].length===0)return j;const F=[...j.discardPiles],U=F[G][F[G].length-1];F[G]=F[G].slice(0,-1);const S=[...j.players],x=[...S[0].tiles];let R=-1;if(k!==void 0&&k>=0&&k<x.length)if(x[k]===null)R=k;else for(let M=1;M<x.length;M++){const C=k+M,O=k-M;if(C<x.length&&x[C]===null){R=C;break}if(O>=0&&x[O]===null){R=O;break}}return R===-1&&(R=x.findIndex(M=>M===null)),R!==-1&&(x[R]=U),S[0]={...S[0],tiles:x},{...j,players:S,discardPiles:F}})},[]),d=z.useCallback(k=>{t(j=>{if(!j||j.currentTurn!==0)return j;const Q=[...j.players[0].tiles];if(!Q[k])return j;const he=[...Q];return he[k]=null,PO(he,j.okeyTile)?{...j,phase:"roundOver",winner:0}:(alert("Eliniz okey deil! Ltfen talar per yapn."),j)})},[]),g=z.useCallback(()=>{t(mp())},[]),p=z.useCallback(()=>{t(k=>{if(!k)return null;const j=[];if(k.discardPiles.forEach(G=>{j.push(...G)}),j.length===0)return{...k,phase:"roundOver",winner:null};const Q=[...j].sort(()=>Math.random()-.5);return{...k,centerStack:Q,discardPiles:[[],[],[],[]],phase:"playing"}})},[]),v=z.useCallback(()=>{t(k=>k?{...k,phase:"roundOver",winner:null}:null)},[]),E=z.useCallback((k,j)=>{t(Q=>{if(!Q)return null;const G=[...Q.players],he=[...G[0].tiles],F=he[k];return he[k]=he[j],he[j]=F,G[0]={...G[0],tiles:he},{...Q,players:G}})},[]),T=z.useCallback(k=>{t(j=>{if(!j||j.currentTurn!==0)return j;if(j.players[0].tiles.filter(x=>x!==null).length!==15)return console.log("Discard blocked: Must have 15 tiles to discard."),j;const G=[...j.players],he=[...j.players[0].tiles],F=he[k];if(!F)return j;he[k]=null,G[0]={...G[0],tiles:he};const U=[...j.discardPiles];U[0]=[...U[0],F];const S=(j.currentTurn+1)%4;return{...j,players:G,discardPiles:U,currentTurn:S}})},[]);z.useEffect(()=>{if(e&&e.currentTurn!==0&&e.phase==="playing"){const k=setTimeout(()=>{t(j=>{if(!j||j.currentTurn===0)return j;const Q=j.currentTurn,G=[...j.players],he=(Q+1)%4,F=[...j.centerStack],U=F.pop();if(U){const S=[...G[Q].tiles],x=S.findIndex(D=>D===null);x!==-1&&(S[x]=U);const R=S.findIndex(D=>D!==null),M=S[R];S[R]=null,G[Q]={...G[Q],tiles:S};const C=[...j.discardPiles];C[Q]=[...C[Q],M];const O=F.length===0?"stackEmpty":"playing";return{...j,centerStack:F,players:G,discardPiles:C,currentTurn:he,phase:O}}return{...j,currentTurn:he}})},1500);return()=>clearTimeout(k)}},[e?.currentTurn,e?.phase]);const I=async()=>(o(!0),await new Promise(k=>setTimeout(k,1e3)),o(!1),"okey-room-"+Math.random().toString(36).substr(2,6)),P=async k=>{o(!0),await new Promise(j=>setTimeout(j,1e3)),o(!1)},H=z.useCallback(()=>{t(k=>{if(!k)return null;const j=k.players[0],Q=j.tiles.filter(ge=>ge!==null),G=[...Q.filter(ge=>ge.isFakeOkey)],he=Q.filter(ge=>!ge.isFakeOkey&&k.okeyTile&&ge.color===k.okeyTile.color&&ge.value===k.okeyTile.value),U=[...Q.filter(ge=>!ge.isFakeOkey&&!(k.okeyTile&&ge.color===k.okeyTile.color&&ge.value===k.okeyTile.value)),...he],S=[],x=[...U],R=["red","blue","black","yellow"],M=(ge,q,se)=>({...ge,displayValue:q,displayColor:se,isJokerPlaceholder:!0});R.forEach(ge=>{let q=x.filter(re=>re.color===ge).sort((re,pe)=>re.value-pe.value),se=0;for(;se<q.length;){let re=[q[se]],pe=q[se].value+1,ve=se+1;for(;ve<q.length;)if(q[ve].value===pe)re.push(q[ve]),pe++,ve++;else if(q[ve].value<pe)ve++;else break;if(re[re.length-1].value===13){const V=q.find($=>$.value===1);V&&!re.find($=>$.id===V.id)&&re.push(V)}re.length>=3?(S.push([...re]),re.forEach(V=>{const $=x.findIndex(oe=>oe.id===V.id);$!==-1&&x.splice($,1)}),q=x.filter(V=>V.color===ge).sort((V,$)=>V.value-$.value),se=0):se++}});for(let ge=1;ge<=13;ge++){const q=x.filter(re=>re.value===ge),se=Array.from(new Set(q.map(re=>re.color)));if(se.length>=3){const re=se.map(pe=>q.find(ve=>ve.color===pe));S.push(re),re.forEach(pe=>{const ve=x.findIndex(V=>V.id===pe.id);ve!==-1&&x.splice(ve,1)})}}R.forEach(ge=>{if(G.length===0)return;const q=x.filter(se=>se.color===ge).sort((se,re)=>se.value-re.value);for(let se=0;se<q.length-1&&G.length>0;se++){const re=q[se],pe=q[se+1];if(pe.value===re.value+1){const ve=G.shift();if(pe.value<13){const V=M(ve,pe.value+1,ge);S.push([re,pe,V])}else if(re.value>1){const V=M(ve,re.value-1,ge);S.push([V,re,pe])}else{const V=M(ve,3,ge);S.push([re,pe,V])}[re,pe].forEach(V=>{const $=x.findIndex(oe=>oe.id===V.id);$!==-1&&x.splice($,1)}),se=-1}else if(pe.value===re.value+2&&G.length>0){const ve=G.shift(),V=M(ve,re.value+1,ge);S.push([re,V,pe]),[re,pe].forEach($=>{const oe=x.findIndex(ce=>ce.id===$.id);oe!==-1&&x.splice(oe,1)}),se=-1}}});for(let ge=1;ge<=13&&G.length>0;ge++){const q=x.filter(re=>re.value===ge),se=Array.from(new Set(q.map(re=>re.color)));if(se.length===2){const re=G.shift(),pe=R.find($=>!se.includes($)),ve=M(re,ge,pe),V=[...se.map($=>q.find(oe=>oe.color===$)),ve];S.push(V),V.forEach($=>{if(!$.isJokerPlaceholder){const oe=x.findIndex(ce=>ce.id===$.id);oe!==-1&&x.splice(oe,1)}})}}let C=new Array(30).fill(null),O=0;G.forEach(ge=>{C[O++]=ge}),G.length>0&&O++,S.forEach(ge=>{ge.forEach(q=>{C[O++]=q}),O++});let D=15;for(;C[D]!==null&&D<30;)D++;x.forEach(ge=>{D<30&&(C[D++]=ge)});const Ee=[...k.players];return Ee[0]={...j,tiles:C},{...k,players:Ee}})},[e?.okeyTile]);return{gameState:e,moveTileInRack:E,drawFromCenter:c,drawFromDiscard:u,finishGame:d,resetGame:g,discardTile:T,autoSortTiles:H,reshuffleDiscards:p,endInTie:v,createRoom:I,joinRoom:P,isAuthLoading:r}},jc=Ze.memo(({tile:i,okeyTile:e,isJoker:t,className:r="",dragging:o=!1,size:c="md"})=>{const u=T=>{switch(T){case"red":return"text-[#d32f2f]";case"black":return"text-[#212121]";case"blue":return"text-[#1976d2]";case"yellow":return"text-[#ffa000]";default:return"text-slate-400"}},d=c==="sm"?"w-10 h-13":c==="lg"?"w-16 h-22":"w-14 h-19",g=c==="sm"?"text-2xl":c==="lg"?"text-5xl":"text-4xl",p=e&&i.color===e.color&&i.value===e.value&&!i.isFakeOkey,v=()=>i.isFakeOkey?_.jsx("div",{className:"flex flex-col items-center justify-center",children:_.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-emerald-500/30 flex items-center justify-center",children:_.jsx("div",{className:"w-4 h-4 rounded-full bg-emerald-500/20"})})}):_.jsxs("div",{className:"flex flex-col items-center justify-center leading-none",children:[_.jsx("span",{className:`${g} font-bold ${u(i.color)} tracking-tighter`,children:i.value}),_.jsx("div",{className:`w-2 h-2 rounded-full mt-1 ${i.color==="red"?"bg-red-500":i.color==="blue"?"bg-blue-500":i.color==="yellow"?"bg-yellow-500":"bg-black"} shadow-sm`}),p&&_.jsx("div",{className:"absolute top-1 right-1",children:_.jsx("div",{className:"text-[10px] drop-shadow-sm",children:""})})]}),E=o?{opacity:.95,transform:"scale(1.1) rotate(-2deg)",zIndex:50,willChange:"transform",cursor:"grabbing",boxShadow:"0 8px 20px rgba(0,0,0,0.3)"}:{};return _.jsxs("div",{className:`
        relative ${d}
        bg-[#fffdfa]
        rounded-md
        flex items-center justify-center
        select-none
        border border-[#e5e3de]
        ${o?"":"shadow-[0_2px_0_#d1cfca,0_4px_8px_rgba(0,0,0,0.2)] cursor-grab hover:-translate-y-1 transition-transform duration-150"}
        ${t?"ring-4 ring-green-400/80 ring-offset-2":""}
        ${r}
      `,style:E,children:[_.jsx("div",{className:"absolute inset-[2px] rounded-[3px] bg-gradient-to-br from-white to-transparent opacity-50 pointer-events-none"}),_.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center w-full h-full pb-0.5",children:v()})]})}),sE=Ze.memo(({tile:i,isJoker:e,index:t,okeyTile:r})=>{const o=`slot-${t}`,{setNodeRef:c,isOver:u}=Tl({id:o}),{attributes:d,listeners:g,setNodeRef:p,isDragging:v}=gu({id:o,disabled:!i});return _.jsxs("div",{ref:c,className:`
                relative w-13 h-17 rounded-lg shadow-inner flex items-center justify-center
                ${u?"bg-green-500/30 ring-4 ring-green-400 scale-110 z-20 shadow-2xl transition-transform duration-150":"bg-black/15 border border-black/10"}
            `,children:[i&&_.jsx("div",{ref:p,...d,...g,className:`relative z-10 touch-none ${v?"opacity-20":""}`,style:{willChange:v?"transform":"auto"},children:_.jsx(jc,{tile:i,okeyTile:r,isJoker:e,dragging:v})}),!i&&!u&&_.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-black/5"})]})}),eM=({tiles:i,isCurrentPlayer:e,okeyTile:t})=>{if(!e){const r=i.filter(o=>o!==null);return _.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[_.jsx("div",{className:"flex justify-center items-center gap-1 bg-[#2a1b0e] p-2 rounded border border-[#3d2a1a] shadow-2xl",children:Array.from({length:Math.min(r.length,11)}).map((o,c)=>_.jsx("div",{className:"w-6 h-8 bg-[#f5f5f5] rounded-sm transform -skew-x-2 border-b-2 border-slate-400 shadow-sm"},c))}),_.jsx("div",{className:"flex justify-center items-center gap-1 bg-[#2a1b0e] p-2 rounded border border-[#3d2a1a] shadow-2xl -mt-1 scale-95 opacity-80",children:Array.from({length:Math.max(0,r.length-11)}).map((o,c)=>_.jsx("div",{className:"w-6 h-8 bg-[#f5f5f5] rounded-sm transform -skew-x-1 border-b-2 border-slate-400 shadow-sm"},c))})]})}return _.jsxs("div",{className:"relative w-full max-w-none mx-auto flex flex-col items-center select-none",children:[_.jsxs("div",{className:"relative w-[85%] bg-[#8d5b3e] rounded-sm shadow-[0_20px_40px_rgba(0,0,0,0.6)] border-b-8 border-[#3d251e] p-4 flex flex-col gap-1",children:[_.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/wood-pattern.png')] opacity-20 pointer-events-none mix-blend-overlay scale-x-150"}),_.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-black/30 pointer-events-none"}),_.jsx("div",{className:"relative flex justify-center gap-1 pb-2 min-h-[5.5rem] border-b-4 border-black/20 z-10",children:i.slice(0,15).map((r,o)=>{const c=t&&r&&r.color===t.color&&r.value===t.value;return _.jsx(sE,{index:o,tile:r,okeyTile:t,isJoker:c||!1},o)})}),_.jsx("div",{className:"relative flex justify-center gap-1 pt-2 min-h-[5.5rem] z-10",children:i.slice(15,30).map((r,o)=>{const c=o+15,u=t&&r&&r.color===t.color&&r.value===t.value;return _.jsx(sE,{index:c,tile:r,okeyTile:t,isJoker:u||!1},c)})})]}),_.jsx("div",{className:"mt-4 px-6 py-1 bg-amber-500/20 rounded-full border border-amber-500/30 text-[10px] font-black text-amber-500 uppercase tracking-widest animate-pulse",children:"Talar Srkleyerek Dzenleyebilirsiniz"})]})};function Mf(i){if(!i)return!1;const e=i.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const tM=[it.Down,it.Right,it.Up,it.Left],nM=(i,e)=>{let{context:{active:t,collisionRect:r,droppableRects:o,droppableContainers:c,over:u,scrollableAncestors:d}}=e;if(tM.includes(i.code)){if(i.preventDefault(),!t||!r)return;const g=[];c.getEnabled().forEach(E=>{if(!E||E!=null&&E.disabled)return;const T=o.get(E.id);if(T)switch(i.code){case it.Down:r.top<T.top&&g.push(E);break;case it.Up:r.top>T.top&&g.push(E);break;case it.Left:r.left>T.left&&g.push(E);break;case it.Right:r.left<T.left&&g.push(E);break}});const p=m4({collisionRect:r,droppableRects:o,droppableContainers:g});let v=zT(p,"id");if(v===u?.id&&p.length>1&&(v=p[1].id),v!=null){const E=c.get(t.id),T=c.get(v),I=T?o.get(T.id):null,P=T?.node.current;if(P&&I&&E&&T){const k=ld(P).some((U,S)=>d[S]!==U),j=ox(E,T),Q=iM(E,T),G=k||!j?{x:0,y:0}:{x:Q?r.width-I.width:0,y:Q?r.height-I.height:0},he={x:I.left,y:I.top};return G.x&&G.y?he:Yc(he,G)}}}};function ox(i,e){return!Mf(i)||!Mf(e)?!1:i.data.current.sortable.containerId===e.data.current.sortable.containerId}function iM(i,e){return!Mf(i)||!Mf(e)||!ox(i,e)?!1:i.data.current.sortable.index<e.data.current.sortable.index}const Mg=[{name:"Siz",isAI:!1,isYou:!0},{name:"Bot 1",isAI:!0,isYou:!1},{name:"Bot 2",isAI:!0,isYou:!1},{name:"Bot 3",isAI:!0,isYou:!1}],Hh=({playerId:i,currentTurn:e,className:t="",isDragging:r=!1,playerInfo:o,tileCount:c=14})=>{const u=e===i;return _.jsx("div",{className:`transition-all duration-300 ${u&&!r?"scale-110":"opacity-90"} ${t}`,children:_.jsxs("div",{className:`
                relative flex items-center min-w-[160px] h-9 px-4 bg-[#ede0d4] rounded-sm border-2 shadow-xl transition-all
                ${u?r?"border-green-500 bg-white shadow-green-500/20":"border-green-500 bg-white ring-8 ring-green-500/20":"border-[#8d5b3e]"}
            `,children:[_.jsx("div",{className:`mr-2 ${u?"text-green-600":"text-[#8d5b3e]"}`,children:o.isAI?_.jsx(of,{size:14}):o.isYou?_.jsx(Fa,{size:14,className:"text-amber-600"}):_.jsx(Fa,{size:14})}),_.jsxs("div",{className:`flex-1 font-bold text-xs text-center uppercase tracking-tight ${u?"text-green-700":"text-[#3d251e]"}`,children:[u&&_.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-green-500 mr-2 animate-ping"}),o.name,o.isYou&&!o.isAI&&_.jsx("span",{className:"ml-1 text-[9px] text-amber-600",children:"(Sen)"})]}),i!==0&&_.jsxs("div",{className:`absolute -bottom-5 left-1/2 -translate-x-1/2 px-2 py-0.5 rounded text-white text-[9px] font-bold shadow-md flex items-center gap-1 ${u?"bg-green-600":"bg-[#3d251e]"}`,children:[o.isAI&&_.jsx(of,{size:10}),"TA: ",c]})]})})},Fh=({playerId:i,position:e,discardPiles:t,currentTurn:r,userTileCount:o,onDrawDiscard:c,isDraggingRackTile:u,mySlot:d=0})=>{const g=i===d&&r===d&&o===15&&u,p=(d+3)%4,v=i===p&&r===d&&o===14,{setNodeRef:E,isOver:T}=Tl({id:`discard-${i}`,disabled:!g}),I=t[i][t[i].length-1],{attributes:P,listeners:H,setNodeRef:k,isDragging:j}=gu({id:`pick-discard-${i}`,disabled:!v||!I}),Q={top:"absolute top-[22%] left-1/2 -translate-x-1/2",bottom:"absolute bottom-[36%] right-[12%]",left:"absolute left-[12%] top-[35%]",right:"absolute right-[12%] top-[35%]"};return _.jsxs("div",{ref:E,onClick:()=>v&&c(),className:`
                ${Q[e]} w-16 h-24 rounded-lg transition-all duration-200 flex items-center justify-center z-20
                ${T?"bg-green-400/30 scale-110 ring-4 ring-green-400 shadow-xl":""}
                ${g&&!T?"bg-green-500/10 ring-2 ring-green-400/50":""}
                ${v?"cursor-grab active:cursor-grabbing hover:ring-2 hover:ring-amber-400 bg-amber-400/10":""}
            `,children:[I?_.jsx("div",{ref:k,...P,...H,className:`rotate-2 shadow-lg transform ${v&&!j?"hover:scale-105":""} ${j?"opacity-20":""}`,children:_.jsx(jc,{tile:I,size:"sm"})}):_.jsx("div",{className:"w-12 h-18 border-2 border-white/10 border-dashed rounded-lg flex items-center justify-center",children:_.jsx("div",{className:"w-2 h-2 rounded-full bg-white/10"})}),g&&_.jsx("div",{className:"absolute -inset-2 border-2 border-dashed border-green-400 rounded-xl animate-pulse pointer-events-none",children:_.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 text-[8px] font-black text-green-400 uppercase tracking-wider whitespace-nowrap bg-black/70 px-2 py-1 rounded",children:"BURAYA AT"})}),v&&I&&!j&&_.jsx("div",{className:"absolute -top-7 left-1/2 -translate-x-1/2 bg-amber-500 text-white text-[8px] font-black px-2 py-1 rounded animate-bounce whitespace-nowrap z-50",children:"EK"})]})},sM=({currentTurn:i,userTileCount:e,centerStackCount:t,onDraw:r,mySlot:o=0})=>{const c=i===o&&e<15,{attributes:u,listeners:d,setNodeRef:g,isDragging:p}=gu({id:"draw-pile",disabled:!c});return _.jsx("div",{className:"relative group",children:_.jsxs("div",{ref:g,...u,...d,onClick:()=>c&&r(),className:`
                    relative w-16 h-20 bg-[#fffdfa] rounded-sm shadow-2xl flex items-center justify-center transition-all
                    ${c?"hover:-translate-y-2 cursor-grab active:cursor-grabbing ring-4 ring-green-500 bg-white":"cursor-wait opacity-60"}
                    ${p?"opacity-20":""}
                `,children:[_.jsx("div",{className:`absolute inset-0 bg-[#e5e3de] border border-[#ccc] rounded-sm transform translate-x-1 translate-y-1 -z-10 shadow-lg ${c?"bg-green-100":""}`}),_.jsx("div",{className:`absolute inset-0 bg-[#d1cfca] border border-[#bbb] rounded-sm transform translate-x-2 translate-y-2 -z-20 shadow-lg ${c?"bg-green-200":""}`}),_.jsx("div",{className:"text-[#3d251e] font-bold text-2xl",children:t}),c&&!p&&_.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-green-500 text-white text-[10px] font-black px-3 py-1 rounded-full animate-bounce shadow-lg whitespace-nowrap flex items-center gap-1 z-50",children:"TA EK"})]})})},rM=({isDraggingRackTile:i,canFinish:e})=>{const{setNodeRef:t,isOver:r}=Tl({id:"finish-zone",disabled:!e});return _.jsx("div",{ref:t,className:`
                absolute -inset-4 rounded-2xl transition-all duration-300 pointer-events-none
                ${e&&i?"border-4 border-dashed border-amber-400 animate-[pulse_1.5s_infinite] bg-amber-400/10":""}
                ${r?"bg-amber-400/30 scale-110":""}
            `})},aM=({gameState:i,onDraw:e,onDrawDiscard:t,onMoveTile:r,onDiscard:o,onAutoSort:c,onFinish:u,onReset:d,onReshuffle:g,onEndTie:p,onExit:v,playerInfo:E=Mg,mySlot:T=0,isOnline:I=!1})=>{const[P,H]=z.useState(null),k=p0(Ka(cd,{activationConstraint:{distance:3}}),Ka(v0,{coordinateGetter:nM})),j=z.useCallback(x=>H(x.active.id),[]),Q=z.useCallback(x=>{H(null);const{active:R,over:M}=x;if(!M)return;const C=R.id,O=M.id;O===`discard-${T}`&&C.startsWith("slot-")?o(parseInt(C.split("-")[1])):O==="finish-zone"&&C.startsWith("slot-")?u(parseInt(C.split("-")[1])):C==="draw-pile"&&O.startsWith("slot-")?e(parseInt(O.split("-")[1])):C.startsWith("pick-discard-")&&O.startsWith("slot-")?t(parseInt(O.split("-")[1])):C!==O&&C.startsWith("slot-")&&O.startsWith("slot-")&&r(parseInt(C.split("-")[1]),parseInt(O.split("-")[1]))},[T,o,u,e,t,r]);if(!i)return _.jsx("div",{className:"text-white text-center p-10 font-bold",children:"YKLENYOR..."});const G=()=>{if(!P)return null;if(P==="draw-pile")return _.jsx("div",{className:"w-16 h-20 bg-white rounded shadow-2xl opacity-80"});if(P.startsWith("pick-discard-")){const x=(T+3)%4,R=i.discardPiles[x][i.discardPiles[x].length-1];return R?_.jsx(jc,{tile:R,size:"sm",okeyTile:i.okeyTile}):null}if(P.startsWith("slot-")){const x=i.players[T].tiles[parseInt(P.split("-")[1])];return x?_.jsx(jc,{tile:x,okeyTile:i.okeyTile}):null}return null},he=x=>i.players[x].tiles.filter(R=>R!==null).length,F=x=>(x+T)%4,U=he(T),S=x=>{const R=F(x);return E[R]||Mg[R]};return _.jsx(T0,{sensors:k,collisionDetection:d4,onDragStart:j,onDragEnd:Q,children:_.jsxs("div",{className:"relative w-full aspect-[16/10] bg-[#357a38] overflow-hidden mx-auto font-sans shadow-2xl rounded-lg border-x-[12px] border-y-[6px] border-[#3d251e]",children:[_.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/dark-matter.png')] opacity-30 pointer-events-none"}),_.jsx(Hh,{playerId:F(2),currentTurn:i.currentTurn,isDragging:!!P,className:"absolute top-4 left-1/2 -translate-x-1/2 z-30",playerInfo:S(2),tileCount:he(F(2))}),_.jsx(Hh,{playerId:F(3),currentTurn:i.currentTurn,isDragging:!!P,className:"absolute left-4 top-1/2 -translate-y-1/2 -rotate-90 origin-center z-30",playerInfo:S(3),tileCount:he(F(3))}),_.jsx(Hh,{playerId:F(1),currentTurn:i.currentTurn,isDragging:!!P,className:"absolute right-4 top-1/2 -translate-y-1/2 rotate-90 origin-center z-30",playerInfo:S(1),tileCount:he(F(1))}),_.jsx(Fh,{playerId:F(2),position:"top",...i,userTileCount:U,onDrawDiscard:t,isDraggingRackTile:P?.startsWith("slot-"),mySlot:T}),_.jsx(Fh,{playerId:F(3),position:"left",...i,userTileCount:U,onDrawDiscard:t,isDraggingRackTile:P?.startsWith("slot-"),mySlot:T}),_.jsx(Fh,{playerId:F(1),position:"right",...i,userTileCount:U,onDrawDiscard:t,isDraggingRackTile:P?.startsWith("slot-"),mySlot:T}),_.jsx(Fh,{playerId:T,position:"bottom",...i,userTileCount:U,onDrawDiscard:t,isDraggingRackTile:P?.startsWith("slot-"),mySlot:T}),_.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center gap-12",children:[_.jsxs("div",{className:"relative",children:[_.jsx(jc,{tile:i.indicatorTile,size:"md",okeyTile:i.okeyTile}),_.jsx(rM,{isDraggingRackTile:P?.startsWith("slot-")||!1,canFinish:i.currentTurn===T&&U===15})]}),_.jsx(sM,{...i,userTileCount:U,centerStackCount:i.centerStack.length,onDraw:e,mySlot:T})]}),_.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-40 p-2 flex flex-col items-center gap-3",children:[_.jsxs("div",{className:"flex items-center gap-6",children:[_.jsx(Hh,{playerId:T,currentTurn:i.currentTurn,isDragging:!!P,playerInfo:E[T]||Mg[0]}),_.jsx("button",{onClick:c,className:"px-8 py-2 bg-[#ede0d4] text-[#3d251e] border-2 border-[#8d5b3e] rounded shadow-lg text-[11px] font-black uppercase tracking-widest transition-all hover:scale-105 active:scale-95",children:"Dzenle"})]}),_.jsx(eM,{tiles:i.players[T].tiles,playerId:T,isCurrentPlayer:!0,okeyTile:i.okeyTile})]}),I&&i.currentTurn!==T&&_.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 pointer-events-none",children:_.jsx("div",{className:"bg-black/60 backdrop-blur-sm px-6 py-3 rounded-xl",children:_.jsxs("p",{className:"text-white text-sm font-bold flex items-center gap-2",children:[_.jsx("span",{className:"w-2 h-2 bg-amber-500 rounded-full animate-pulse"}),E[i.currentTurn]?.name||`Player ${i.currentTurn+1}`,"'in sras..."]})})}),i.phase==="roundOver"&&_.jsxs("div",{className:"absolute inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-500",children:[i.winner===T&&_.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(30)].map((x,R)=>_.jsx("div",{className:"absolute w-3 h-3 rounded-sm animate-bounce",style:{left:`${Math.random()*100}%`,top:`-${Math.random()*20}%`,backgroundColor:["#ffd700","#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#ffeaa7"][R%6],animationDelay:`${Math.random()*2}s`,animationDuration:`${2+Math.random()*2}s`,transform:`rotate(${Math.random()*360}deg)`}},R))}),_.jsxs("div",{className:`
                            relative p-10 rounded-3xl shadow-2xl flex flex-col items-center gap-6 
                            transform transition-all duration-500 animate-in zoom-in-95
                            ${i.winner===null?"bg-gradient-to-br from-slate-100 to-slate-200 border-4 border-slate-400":i.winner===T?"bg-gradient-to-br from-amber-100 via-yellow-100 to-amber-200 border-4 border-amber-400 ring-8 ring-amber-300/50":"bg-gradient-to-br from-slate-100 to-red-100 border-4 border-red-300"}
                        `,children:[_.jsx("div",{className:`text-7xl ${i.winner===T?"animate-bounce":""}`,children:i.winner===null?"":i.winner===T?"":""}),_.jsx("h2",{className:`text-4xl font-black uppercase tracking-tight ${i.winner===null?"text-slate-700":i.winner===T?"text-amber-600":"text-slate-700"}`,children:i.winner===null?"BERABERE!":i.winner===T?"KAZANDINIZ!":"KAYBETTNZ"}),_.jsx("p",{className:"text-lg font-bold text-slate-600 text-center max-w-xs",children:i.winner===null?"Kimse kazanamad. Talar tkendi!":i.winner===T?"Tebrikler! Harika bir oyun oynadnz! ":`${E[i.winner]?.name||`Player ${i.winner+1}`} oyunu kazand.`}),_.jsxs("div",{className:"flex gap-4 mt-4",children:[_.jsx("button",{onClick:d,className:"px-10 py-4 bg-gradient-to-br from-emerald-500 to-emerald-600 hover:from-emerald-400 hover:to-emerald-500 text-white font-black rounded-xl shadow-lg transition-all hover:scale-105 active:scale-95 uppercase tracking-wide",children:" Tekrar Oyna"}),_.jsx("button",{onClick:v,className:"px-10 py-4 bg-gradient-to-br from-slate-600 to-slate-700 hover:from-slate-500 hover:to-slate-600 text-white font-black rounded-xl shadow-lg transition-all hover:scale-105 active:scale-95 uppercase tracking-wide",children:" k"})]})]})]}),i.phase==="stackEmpty"&&_.jsx("div",{className:"absolute inset-0 z-[110] flex items-center justify-center bg-black/70 backdrop-blur-md fade-in",children:_.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 p-8 rounded-2xl shadow-2xl border-4 border-amber-500 max-w-md text-center flex flex-col gap-6",children:[_.jsx("div",{className:"text-5xl",children:""}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-2xl font-black text-amber-900 uppercase",children:"ORTADA TA BTT!"}),_.jsx("p",{className:"text-amber-800 font-medium mt-2",children:"Iskartadaki talar kartrp devam m edelim, yoksa oyunu bitirelim mi?"})]}),_.jsxs("div",{className:"flex flex-col gap-3",children:[_.jsx("button",{onClick:g,className:"w-full py-4 bg-amber-600 hover:bg-amber-500 text-white font-black uppercase tracking-widest rounded-xl shadow-lg transition-all hover:scale-105 active:scale-95",children:"Talar Kartr (Devam Et)"}),_.jsx("button",{onClick:p,className:"w-full py-4 bg-slate-700 hover:bg-slate-600 text-white font-black uppercase tracking-widest rounded-xl shadow-lg transition-all hover:scale-105 active:scale-95",children:"Oyunu Bitir (Berabere)"})]})]})}),_.jsx(nx,{dropAnimation:null,style:{cursor:"grabbing",touchAction:"none"},modifiers:[],children:_.jsx("div",{style:{willChange:"transform",transform:"translateZ(0)",pointerEvents:"none",filter:"drop-shadow(0 8px 16px rgba(0,0,0,0.25))"},children:G()})})]})})},oM=i=>[i.pile0||[],i.pile1||[],i.pile2||[],i.pile3||[]],lM=i=>({phase:i.phase==="waiting"?"dealing":i.phase,players:i.players.map(e=>({tiles:e.tiles})),centerStack:i.centerStack,discardPiles:oM(i.discardPiles),indicatorTile:i.indicatorTile,okeyTile:i.okeyTile,currentTurn:i.currentTurn,winner:i.winner}),cM=({roomId:i,mode:e,aiDifficulty:t,onExit:r})=>{const o=ZO(e==="local"?i:null),c=rx(e==="online"?i:null),u=e==="online",d=c.room,g=c.getMySlot(),p=c.isHost(),v=u?d?lM(d):null:o.gameState,E=z.useCallback(async()=>{if(!d||!p||d.phase!=="playing"||!d.players[d.currentTurn]?.adIsAI)return;const S=[...d.centerStack],x=S.pop();if(!x)return;const R=[...d.players],M=[...R[d.currentTurn].tiles],C=M.findIndex(pe=>pe===null);C!==-1&&(M[C]=x);const O=M.findIndex(pe=>pe!==null),D=M[O];M[O]=null,R[d.currentTurn]={...R[d.currentTurn],tiles:M};const Ee=`pile${d.currentTurn}`,ge=d.discardPiles[Ee]||[],q={...d.discardPiles,[Ee]:D?[...ge,D]:ge},se=(d.currentTurn+1)%4,re=S.length===0?"stackEmpty":"playing";await c.updateGameState({centerStack:S,players:R,discardPiles:q,currentTurn:se,phase:re})},[d,p,c]);z.useEffect(()=>{if(!u||!d||!p||d.phase!=="playing"||!d.players[d.currentTurn]?.adIsAI)return;const S=setTimeout(()=>{E()},1500);return()=>clearTimeout(S)},[u,d?.currentTurn,d?.phase,p,E]);const T=z.useCallback(U=>{u?c.drawFromCenter(U):o.drawFromCenter(U)},[u,c,o]),I=z.useCallback(U=>{u?c.drawFromDiscard(U):o.drawFromDiscard(U)},[u,c,o]),P=z.useCallback((U,S)=>{u?c.moveTileInRack(U,S):o.moveTileInRack(U,S)},[u,c,o]),H=z.useCallback(U=>{u?c.discardTile(U):o.discardTile(U)},[u,c,o]),k=z.useCallback(U=>{u||o.finishGame(U)},[u,o]),j=z.useCallback(()=>{u?c.resetGame():o.resetGame()},[u,c,o]),Q=z.useCallback(()=>{u?c.reshuffleDiscards():o.reshuffleDiscards()},[u,c,o]),G=z.useCallback(()=>{u?c.endInTie():o.endInTie()},[u,c,o]),he=z.useCallback(()=>{u?c.autoSortTiles():o.autoSortTiles()},[u,c,o]),F=U=>{if(u&&d){const x=d.players[U];return{name:x.adPlayerName||`Player ${U+1}`,isAI:x.adIsAI,isYou:x.odaUserId===c.userId}}return{name:["Siz","Bot 1","Bot 2","Bot 3"][U],isAI:U!==0,isYou:U===0}};return _.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[85vh] fade-in animate-in duration-700",children:[_.jsxs("div",{className:"w-full max-w-6xl mb-6 flex justify-between items-center text-white px-4",children:[_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("button",{onClick:r,className:"p-3 bg-slate-800/80 hover:bg-red-500/20 text-slate-400 hover:text-red-400 rounded-xl transition-all border border-slate-700 hover:border-red-500/50",title:"Leave Game",children:_.jsx(yA,{size:20})}),_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-black tracking-tight",children:"Okey Arena"}),_.jsxs("div",{className:"text-xs font-medium text-emerald-400 flex items-center gap-2",children:[_.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),e==="online"?`Room: ${i}`:`Local  ${t} AI`]})]})]}),u&&d&&_.jsx("div",{className:"flex items-center gap-2",children:d.players.map((U,S)=>_.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${d.currentTurn===S?"bg-amber-500/20 border border-amber-500/50 text-amber-400":"bg-slate-800/50 border border-slate-700 text-slate-400"}`,children:[U.adIsAI?_.jsx(of,{size:14}):U.odaUserId===c.userId?_.jsx(Fa,{size:14,className:"text-emerald-400"}):_.jsx(Vf,{size:14}),_.jsx("span",{className:"truncate max-w-[60px]",children:U.adPlayerName||(U.adIsAI?`Bot ${S+1}`:"Empty")})]},S))})]}),_.jsx(aM,{gameState:v,onDraw:T,onDrawDiscard:I,onMoveTile:P,onDiscard:H,onAutoSort:he,onFinish:k,onReset:j,onReshuffle:Q,onEndTie:G,onExit:r,playerInfo:u&&d?d.players.map((U,S)=>F(S)):void 0,mySlot:u?g:0,isOnline:u}),_.jsxs("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10 flex flex-col items-center gap-1",children:[_.jsx("span",{children:"Transparent Strategy Arena"}),_.jsx("span",{className:"text-slate-700 text-[8px]",children:"v0.1.0"})]})]})};function uM(){const[i,e]=z.useState("menu"),[t,r]=z.useState("chess"),[o,c]=z.useState(null),[u,d]=z.useState("Normal"),g=ix(null),p=sx(null),v=rx(o),E=t==="chess"?g.isAuthLoading:t==="backgammon"?p.isAuthLoading:v.isAuthLoading;z.useEffect(()=>{v.room?.phase==="playing"&&i==="okey-lobby"&&e("online")},[v.room?.phase,i]);const T=async()=>{try{if(t==="chess"){const F=await g.createRoom();F&&(c(F),e("online"))}else if(t==="backgammon"){const F=await p.createRoom();F&&(c(F),e("online"))}}catch(F){console.error("Failed to create room:",F)}},I=async F=>{if(F.trim())try{t==="chess"?(await g.joinRoom(F),c(F),e("online")):t==="backgammon"&&(await p.joinRoom(F),c(F),e("online"))}catch(U){console.error("Failed to join room:",U),alert("Room not found or could not join")}},P=async F=>{try{console.log("Creating Okey room for player:",F);const U=await v.createRoom(F);return console.log("Okey room created with ID:",U),c(U),e("okey-lobby"),U}catch(U){return console.error("Failed to create Okey room:",U),alert("Oda oluturulamad: "+(U instanceof Error?U.message:"Bilinmeyen hata")),null}},H=async(F,U)=>{try{const S=await v.joinRoom(F,U);return S&&(c(F),e("okey-lobby")),S}catch(S){return console.error("Failed to join Okey room:",S),!1}},k=async()=>{try{await v.startGame()}catch(F){console.error("Failed to start Okey game:",F)}},j=F=>{r(F)},Q=F=>{d(F),e("local"),c(null)},G=async()=>{t==="okey"&&o&&await v.leaveRoom(),c(null),e("menu")},he=i==="menu"||i==="okey-lobby";return _.jsxs("main",{className:"relative min-h-screen w-full flex flex-col items-center overflow-x-hidden",children:[_.jsx(QS,{}),_.jsx("div",{className:"container mx-auto px-4 py-8 max-w-7xl w-full overflow-visible",children:he?_.jsx(Ck,{onCreateRoom:T,onJoinRoom:I,onStartLocal:Q,isAuthLoading:E,onSelectGame:j,selectedGame:t,onCreateOkeyRoom:P,onJoinOkeyRoom:H,onStartOkeyGame:k,okeyRoom:v.room,okeyUserId:v.userId}):t==="chess"?_.jsx(kO,{roomId:o||"",mode:i==="online"?"online":"local",aiDifficulty:u,onExit:G}):t==="backgammon"?_.jsx(XO,{roomId:o||"",mode:i==="online"?"online":"local",aiDifficulty:u,onExit:G}):_.jsx(cM,{roomId:o||"",mode:i==="online"?"online":"local",aiDifficulty:u,onExit:G})}),_.jsx("footer",{className:"mt-auto py-8 text-slate-500 text-sm",children:"DragMate  Premium Multiplayer Board Gaming"})]})}KS.createRoot(document.getElementById("root")).render(_.jsx(z.StrictMode,{children:_.jsx(uM,{})}));
