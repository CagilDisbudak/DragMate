(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function _A(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Fm={exports:{}},ou={};var Nv;function vA(){if(Nv)return ou;Nv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:c,ref:o!==void 0?o:null,props:u}}return ou.Fragment=e,ou.jsx=t,ou.jsxs=t,ou}var Dv;function bA(){return Dv||(Dv=1,Fm.exports=vA()),Fm.exports}var S=bA(),Gm={exports:{}},Pe={};var Ov;function EA(){if(Ov)return Pe;Ov=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),w=Symbol.iterator;function I(P){return P===null||typeof P!="object"?null:(P=w&&P[w]||P["@@iterator"],typeof P=="function"?P:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,D={};function F(P,se,me){this.props=P,this.context=se,this.refs=D,this.updater=me||k}F.prototype.isReactComponent={},F.prototype.setState=function(P,se){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,se,"setState")},F.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function ne(){}ne.prototype=F.prototype;function Z(P,se,me){this.props=P,this.context=se,this.refs=D,this.updater=me||k}var ce=Z.prototype=new ne;ce.constructor=Z,j(ce,F.prototype),ce.isPureReactComponent=!0;var ie=Array.isArray;function W(){}var x={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function C(P,se,me){var de=me.ref;return{$$typeof:s,type:P,key:se,ref:de!==void 0?de:null,props:me}}function V(P,se){return C(P.type,se,P.props)}function M(P){return typeof P=="object"&&P!==null&&P.$$typeof===s}function U(P){var se={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(me){return se[me]})}var N=/\/+/g;function qe(P,se){return typeof P=="object"&&P!==null&&P.key!=null?U(""+P.key):se.toString(36)}function dt(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(W,W):(P.status="pending",P.then(function(se){P.status==="pending"&&(P.status="fulfilled",P.value=se)},function(se){P.status==="pending"&&(P.status="rejected",P.reason=se)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function te(P,se,me,de,_e){var Ae=typeof P;(Ae==="undefined"||Ae==="boolean")&&(P=null);var Le=!1;if(P===null)Le=!0;else switch(Ae){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(P.$$typeof){case s:case e:Le=!0;break;case v:return Le=P._init,te(Le(P._payload),se,me,de,_e)}}if(Le)return _e=_e(P),Le=de===""?"."+qe(P,0):de,ie(_e)?(me="",Le!=null&&(me=Le.replace(N,"$&/")+"/"),te(_e,se,me,"",function(Ht){return Ht})):_e!=null&&(M(_e)&&(_e=V(_e,me+(_e.key==null||P&&P.key===_e.key?"":(""+_e.key).replace(N,"$&/")+"/")+Le)),se.push(_e)),1;Le=0;var Dt=de===""?".":de+":";if(ie(P))for(var ut=0;ut<P.length;ut++)de=P[ut],Ae=Dt+qe(de,ut),Le+=te(de,se,me,Ae,_e);else if(ut=I(P),typeof ut=="function")for(P=ut.call(P),ut=0;!(de=P.next()).done;)de=de.value,Ae=Dt+qe(de,ut++),Le+=te(de,se,me,Ae,_e);else if(Ae==="object"){if(typeof P.then=="function")return te(dt(P),se,me,de,_e);throw se=String(P),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Le}function he(P,se,me){if(P==null)return P;var de=[],_e=0;return te(P,de,"","",function(Ae){return se.call(me,Ae,_e++)}),de}function be(P){if(P._status===-1){var se=P._result;se=se(),se.then(function(me){(P._status===0||P._status===-1)&&(P._status=1,P._result=me)},function(me){(P._status===0||P._status===-1)&&(P._status=2,P._result=me)}),P._status===-1&&(P._status=0,P._result=se)}if(P._status===1)return P._result.default;throw P._result}var Me=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},ze={map:he,forEach:function(P,se,me){he(P,function(){se.apply(this,arguments)},me)},count:function(P){var se=0;return he(P,function(){se++}),se},toArray:function(P){return he(P,function(se){return se})||[]},only:function(P){if(!M(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Pe.Activity=E,Pe.Children=ze,Pe.Component=F,Pe.Fragment=t,Pe.Profiler=o,Pe.PureComponent=Z,Pe.StrictMode=r,Pe.Suspense=g,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(P){return x.H.useMemoCache(P)}},Pe.cache=function(P){return function(){return P.apply(null,arguments)}},Pe.cacheSignal=function(){return null},Pe.cloneElement=function(P,se,me){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var de=j({},P.props),_e=P.key;if(se!=null)for(Ae in se.key!==void 0&&(_e=""+se.key),se)!R.call(se,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&se.ref===void 0||(de[Ae]=se[Ae]);var Ae=arguments.length-2;if(Ae===1)de.children=me;else if(1<Ae){for(var Le=Array(Ae),Dt=0;Dt<Ae;Dt++)Le[Dt]=arguments[Dt+2];de.children=Le}return C(P.type,_e,de)},Pe.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},Pe.createElement=function(P,se,me){var de,_e={},Ae=null;if(se!=null)for(de in se.key!==void 0&&(Ae=""+se.key),se)R.call(se,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(_e[de]=se[de]);var Le=arguments.length-2;if(Le===1)_e.children=me;else if(1<Le){for(var Dt=Array(Le),ut=0;ut<Le;ut++)Dt[ut]=arguments[ut+2];_e.children=Dt}if(P&&P.defaultProps)for(de in Le=P.defaultProps,Le)_e[de]===void 0&&(_e[de]=Le[de]);return C(P,Ae,_e)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(P){return{$$typeof:m,render:P}},Pe.isValidElement=M,Pe.lazy=function(P){return{$$typeof:v,_payload:{_status:-1,_result:P},_init:be}},Pe.memo=function(P,se){return{$$typeof:p,type:P,compare:se===void 0?null:se}},Pe.startTransition=function(P){var se=x.T,me={};x.T=me;try{var de=P(),_e=x.S;_e!==null&&_e(me,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(W,Me)}catch(Ae){Me(Ae)}finally{se!==null&&me.types!==null&&(se.types=me.types),x.T=se}},Pe.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},Pe.use=function(P){return x.H.use(P)},Pe.useActionState=function(P,se,me){return x.H.useActionState(P,se,me)},Pe.useCallback=function(P,se){return x.H.useCallback(P,se)},Pe.useContext=function(P){return x.H.useContext(P)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(P,se){return x.H.useDeferredValue(P,se)},Pe.useEffect=function(P,se){return x.H.useEffect(P,se)},Pe.useEffectEvent=function(P){return x.H.useEffectEvent(P)},Pe.useId=function(){return x.H.useId()},Pe.useImperativeHandle=function(P,se,me){return x.H.useImperativeHandle(P,se,me)},Pe.useInsertionEffect=function(P,se){return x.H.useInsertionEffect(P,se)},Pe.useLayoutEffect=function(P,se){return x.H.useLayoutEffect(P,se)},Pe.useMemo=function(P,se){return x.H.useMemo(P,se)},Pe.useOptimistic=function(P,se){return x.H.useOptimistic(P,se)},Pe.useReducer=function(P,se,me){return x.H.useReducer(P,se,me)},Pe.useRef=function(P){return x.H.useRef(P)},Pe.useState=function(P){return x.H.useState(P)},Pe.useSyncExternalStore=function(P,se,me){return x.H.useSyncExternalStore(P,se,me)},Pe.useTransition=function(){return x.H.useTransition()},Pe.version="19.2.3",Pe}var Mv;function ep(){return Mv||(Mv=1,Gm.exports=EA()),Gm.exports}var q=ep();const at=_A(q);var Km={exports:{}},lu={},$m={exports:{}},Qm={};var kv;function TA(){return kv||(kv=1,(function(s){function e(te,he){var be=te.length;te.push(he);e:for(;0<be;){var Me=be-1>>>1,ze=te[Me];if(0<o(ze,he))te[Me]=he,te[be]=ze,be=Me;else break e}}function t(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var he=te[0],be=te.pop();if(be!==he){te[0]=be;e:for(var Me=0,ze=te.length,P=ze>>>1;Me<P;){var se=2*(Me+1)-1,me=te[se],de=se+1,_e=te[de];if(0>o(me,be))de<ze&&0>o(_e,me)?(te[Me]=_e,te[de]=be,Me=de):(te[Me]=me,te[se]=be,Me=se);else if(de<ze&&0>o(_e,be))te[Me]=_e,te[de]=be,Me=de;else break e}}return he}function o(te,he){var be=te.sortIndex-he.sortIndex;return be!==0?be:te.id-he.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();s.unstable_now=function(){return c.now()-m}}var g=[],p=[],v=1,E=null,w=3,I=!1,k=!1,j=!1,D=!1,F=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function ce(te){for(var he=t(p);he!==null;){if(he.callback===null)r(p);else if(he.startTime<=te)r(p),he.sortIndex=he.expirationTime,e(g,he);else break;he=t(p)}}function ie(te){if(j=!1,ce(te),!k)if(t(g)!==null)k=!0,W||(W=!0,U());else{var he=t(p);he!==null&&dt(ie,he.startTime-te)}}var W=!1,x=-1,R=5,C=-1;function V(){return D?!0:!(s.unstable_now()-C<R)}function M(){if(D=!1,W){var te=s.unstable_now();C=te;var he=!0;try{e:{k=!1,j&&(j=!1,ne(x),x=-1),I=!0;var be=w;try{t:{for(ce(te),E=t(g);E!==null&&!(E.expirationTime>te&&V());){var Me=E.callback;if(typeof Me=="function"){E.callback=null,w=E.priorityLevel;var ze=Me(E.expirationTime<=te);if(te=s.unstable_now(),typeof ze=="function"){E.callback=ze,ce(te),he=!0;break t}E===t(g)&&r(g),ce(te)}else r(g);E=t(g)}if(E!==null)he=!0;else{var P=t(p);P!==null&&dt(ie,P.startTime-te),he=!1}}break e}finally{E=null,w=be,I=!1}he=void 0}}finally{he?U():W=!1}}}var U;if(typeof Z=="function")U=function(){Z(M)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,qe=N.port2;N.port1.onmessage=M,U=function(){qe.postMessage(null)}}else U=function(){F(M,0)};function dt(te,he){x=F(function(){te(s.unstable_now())},he)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(te){te.callback=null},s.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<te?Math.floor(1e3/te):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(te){switch(w){case 1:case 2:case 3:var he=3;break;default:he=w}var be=w;w=he;try{return te()}finally{w=be}},s.unstable_requestPaint=function(){D=!0},s.unstable_runWithPriority=function(te,he){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var be=w;w=te;try{return he()}finally{w=be}},s.unstable_scheduleCallback=function(te,he,be){var Me=s.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Me+be:Me):be=Me,te){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=be+ze,te={id:v++,callback:he,priorityLevel:te,startTime:be,expirationTime:ze,sortIndex:-1},be>Me?(te.sortIndex=be,e(p,te),t(g)===null&&te===t(p)&&(j?(ne(x),x=-1):j=!0,dt(ie,be-Me))):(te.sortIndex=ze,e(g,te),k||I||(k=!0,W||(W=!0,U()))),te},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(te){var he=w;return function(){var be=w;w=he;try{return te.apply(this,arguments)}finally{w=be}}}})(Qm)),Qm}var Vv;function wA(){return Vv||(Vv=1,$m.exports=TA()),$m.exports}var Ym={exports:{}},Un={};var Pv;function SA(){if(Pv)return Un;Pv=1;var s=ep();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:p,implementation:v}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Un.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(g,p,null,v)},Un.flushSync=function(g){var p=c.T,v=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=p,r.p=v,r.d.f()}},Un.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},Un.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Un.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,E=m(v,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,I=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:w,fetchPriority:I}):v==="script"&&r.d.X(g,{crossOrigin:E,integrity:w,fetchPriority:I,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Un.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=m(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},Un.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=m(v,p.crossOrigin);r.d.L(g,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Un.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=m(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},Un.requestFormReset=function(g){r.d.r(g)},Un.unstable_batchedUpdates=function(g,p){return g(p)},Un.useFormState=function(g,p,v){return c.H.useFormState(g,p,v)},Un.useFormStatus=function(){return c.H.useHostTransitionStatus()},Un.version="19.2.3",Un}var Lv;function zE(){if(Lv)return Ym.exports;Lv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Ym.exports=SA(),Ym.exports}var Uv;function AA(){if(Uv)return lu;Uv=1;var s=wA(),e=ep(),t=zE();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(r(188))}function p(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),n;if(d===l)return g(f),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,T=f.child;T;){if(T===a){_=!0,a=f,l=d;break}if(T===l){_=!0,l=f,a=d;break}T=T.sibling}if(!_){for(T=d.child;T;){if(T===a){_=!0,a=d,l=f;break}if(T===l){_=!0,l=d,a=f;break}T=T.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function v(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=v(n),i!==null)return i;n=n.sibling}return null}var E=Object.assign,w=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var N=Symbol.for("react.client.reference");function qe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===N?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case j:return"Fragment";case F:return"Profiler";case D:return"StrictMode";case ie:return"Suspense";case W:return"SuspenseList";case C:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case k:return"Portal";case Z:return n.displayName||"Context";case ne:return(n._context.displayName||"Context")+".Consumer";case ce:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case x:return i=n.displayName||null,i!==null?i:qe(n.type)||"Memo";case R:i=n._payload,n=n._init;try{return qe(n(i))}catch{}}return null}var dt=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},Me=[],ze=-1;function P(n){return{current:n}}function se(n){0>ze||(n.current=Me[ze],Me[ze]=null,ze--)}function me(n,i){ze++,Me[ze]=n.current,n.current=i}var de=P(null),_e=P(null),Ae=P(null),Le=P(null);function Dt(n,i){switch(me(Ae,i),me(_e,n),me(de,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?W_(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=W_(i),n=ev(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}se(de),me(de,n)}function ut(){se(de),se(_e),se(Ae)}function Ht(n){n.memoizedState!==null&&me(Le,n);var i=de.current,a=ev(i,n.type);i!==a&&(me(_e,n),me(de,a))}function Si(n){_e.current===n&&(se(de),se(_e)),Le.current===n&&(se(Le),iu._currentValue=be)}var Vn,qi;function Jt(n){if(Vn===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Vn=i&&i[1]||"",qi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vn+n+qi}var fi=!1;function Pn(n,i){if(!n||fi)return"";fi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ee){var Q=ee}Reflect.construct(n,[],le)}else{try{le.call()}catch(ee){Q=ee}n.call(le.prototype)}}else{try{throw Error()}catch(ee){Q=ee}(le=n())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ee){if(ee&&Q&&typeof ee.stack=="string")return[ee.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],T=d[1];if(_&&T){var O=_.split(`
`),K=T.split(`
`);for(f=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;f<K.length&&!K[f].includes("DetermineComponentFrameRoot");)f++;if(l===O.length||f===K.length)for(l=O.length-1,f=K.length-1;1<=l&&0<=f&&O[l]!==K[f];)f--;for(;1<=l&&0<=f;l--,f--)if(O[l]!==K[f]){if(l!==1||f!==1)do if(l--,f--,0>f||O[l]!==K[f]){var re=`
`+O[l].replace(" at new "," at ");return n.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",n.displayName)),re}while(1<=l&&0<=f);break}}}finally{fi=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Jt(a):""}function as(n,i){switch(n.tag){case 26:case 27:case 5:return Jt(n.type);case 16:return Jt("Lazy");case 13:return n.child!==i&&i!==null?Jt("Suspense Fallback"):Jt("Suspense");case 19:return Jt("SuspenseList");case 0:case 15:return Pn(n.type,!1);case 11:return Pn(n.type.render,!1);case 1:return Pn(n.type,!0);case 31:return Jt("Activity");default:return""}}function Hi(n){try{var i="",a=null;do i+=as(n,a),a=n,n=n.return;while(n);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var St=Object.prototype.hasOwnProperty,ct=s.unstable_scheduleCallback,Hn=s.unstable_cancelCallback,os=s.unstable_shouldYield,ls=s.unstable_requestPaint,Zt=s.unstable_now,Fi=s.unstable_getCurrentPriorityLevel,Rs=s.unstable_ImmediatePriority,Fn=s.unstable_UserBlockingPriority,Sn=s.unstable_NormalPriority,Gi=s.unstable_LowPriority,Cs=s.unstable_IdlePriority,Gn=s.log,Is=s.unstable_setDisableYieldValue,Kn=null,Ft=null;function pn(n){if(typeof Gn=="function"&&Is(n),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(Kn,n)}catch{}}var At=Math.clz32?Math.clz32:rr,Ns=Math.log,Ki=Math.LN2;function rr(n){return n>>>=0,n===0?32:31-(Ns(n)/Ki|0)|0}var ti=256,$i=262144,He=4194304;function xt(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Rt(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?f=xt(l):(_&=T,_!==0?f=xt(_):a||(a=T&~n,a!==0&&(f=xt(a))))):(T=l&~d,T!==0?f=xt(T):_!==0?f=xt(_):a||(a=l&~n,a!==0&&(f=xt(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function Ut(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function yn(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wt(){var n=He;return He<<=1,(He&62914560)===0&&(He=4194304),n}function Vt(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Y(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function mt(n,i,a,l,f,d){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var T=n.entanglements,O=n.expirationTimes,K=n.hiddenUpdates;for(a=_&~a;0<a;){var re=31-At(a),le=1<<re;T[re]=0,O[re]=-1;var Q=K[re];if(Q!==null)for(K[re]=null,re=0;re<Q.length;re++){var ee=Q[re];ee!==null&&(ee.lane&=-536870913)}a&=~le}l!==0&&gt(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(_&~i))}function gt(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-At(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function Gt(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-At(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function fe(n,i){var a=i&-i;return a=(a&42)!==0?1:cn(a),(a&(n.suspendedLanes|i))!==0?0:a}function cn(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function tt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ot(){var n=he.p;return n!==0?n:(n=window.event,n===void 0?32:wv(n.type))}function hn(n,i){var a=he.p;try{return he.p=n,i()}finally{he.p=a}}var pt=Math.random().toString(36).slice(2),Pt="__reactFiber$"+pt,Kt="__reactProps$"+pt,Ee="__reactContainer$"+pt,ar="__reactEvents$"+pt,Ja="__reactListeners$"+pt,Za="__reactHandles$"+pt,da="__reactResources$"+pt,Ai="__reactMarker$"+pt;function or(n){delete n[Pt],delete n[Kt],delete n[ar],delete n[Ja],delete n[Za]}function xi(n){var i=n[Pt];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Ee]||a[Pt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=ov(n);n!==null;){if(a=n[Pt])return a;n=ov(n)}return i}n=a,a=n.parentNode}return null}function $n(n){if(n=n[Pt]||n[Ee]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function Ln(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function Ri(n){var i=n[da];return i||(i=n[da]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function jt(n){n[Ai]=!0}var ma=new Set,lr={};function ni(n,i){Ci(n,i),Ci(n+"Capture",i)}function Ci(n,i){for(lr[n]=i,n=0;n<i.length;n++)ma.add(i[n])}var ga=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ur={},pa={};function en(n){return St.call(pa,n)?!0:St.call(ur,n)?!1:ga.test(n)?pa[n]=!0:(ur[n]=!0,!1)}function B(n,i,a){if(en(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function X(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function $(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}function ye(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Se(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function We(n,i,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Fe(n){if(!n._valueTracker){var i=Se(n)?"checked":"value";n._valueTracker=We(n,i,""+n[i])}}function Ii(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=Se(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function us(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ya=/[\n"\\]/g;function ii(n){return n.replace(ya,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Wa(n,i,a,l,f,d,_,T){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),i!=null?_==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+ye(i)):n.value!==""+ye(i)&&(n.value=""+ye(i)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),i!=null?pl(n,_,ye(i)):a!=null?pl(n,_,ye(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+ye(T):n.removeAttribute("name")}function hc(n,i,a,l,f,d,_,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Fe(n);return}a=a!=null?""+ye(a):"",i=i!=null?""+ye(i):a,T||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=T?n.checked:!!l,n.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Fe(n)}function pl(n,i,a){i==="number"&&us(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function cr(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+ye(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function fc(n,i,a){if(i!=null&&(i=""+ye(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+ye(a):""}function hr(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(dt(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=ye(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),Fe(n)}function si(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var dc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yl(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||dc.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function _l(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&yl(n,f,l)}else for(var d in i)i.hasOwnProperty(d)&&yl(n,d,i[d])}function eo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function to(n){return fr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Qi(){}var vl=null;function Ni(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var dr=null,cs=null;function _a(n){var i=$n(n);if(i&&(n=i.stateNode)){var a=n[Kt]||null;e:switch(n=i.stateNode,i.type){case"input":if(Wa(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ii(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[Kt]||null;if(!f)throw Error(r(90));Wa(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&Ii(l)}break e;case"textarea":fc(n,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&cr(n,!!a.multiple,i,!1)}}}var no=!1;function mr(n,i,a){if(no)return n(i,a);no=!0;try{var l=n(i);return l}finally{if(no=!1,(dr!==null||cs!==null)&&(oh(),dr&&(i=dr,n=cs,cs=dr=null,_a(i),n)))for(i=0;i<n.length;i++)_a(n[i])}}function Yi(n,i){var a=n.stateNode;if(a===null)return null;var l=a[Kt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),va=!1;if(Di)try{var yt={};Object.defineProperty(yt,"passive",{get:function(){va=!0}}),window.addEventListener("test",yt,yt),window.removeEventListener("test",yt,yt)}catch{va=!1}var hs=null,bl=null,ba=null;function El(){if(ba)return ba;var n,i=bl,a=i.length,l,f="value"in hs?hs.value:hs.textContent,d=f.length;for(n=0;n<a&&i[n]===f[n];n++);var _=a-n;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return ba=f.slice(n,1<l?1-l:void 0)}function Ea(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Ds(){return!0}function Xi(){return!1}function An(n){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(a=n[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ds:Xi,this.isPropagationStopped=Xi,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ds)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ds)},persist:function(){},isPersistent:Ds}),i}var Os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fs=An(Os),gr=E({},Os,{view:0,detail:0}),Tl=An(gr),pr,io,ds,so=E({},gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ds&&(ds&&n.type==="mousemove"?(pr=n.screenX-ds.screenX,io=n.screenY-ds.screenY):io=pr=0,ds=n),pr)},movementY:function(n){return"movementY"in n?n.movementY:io}}),wl=An(so),Ta=E({},so,{dataTransfer:0}),gc=An(Ta),pc=E({},gr,{relatedTarget:0}),wa=An(pc),Sl=E({},Os,{animationName:0,elapsedTime:0,pseudoElement:0}),yc=An(Sl),ro=E({},Os,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),_c=An(ro),vc=E({},Os,{data:0}),ms=An(vc),bc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ec={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Tc[n])?!!i[n]:!1}function yr(){return wc}var Qn=E({},gr,{key:function(n){if(n.key){var i=bc[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ea(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ec[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yr,charCode:function(n){return n.type==="keypress"?Ea(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ea(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Sc=An(Qn),Ac=E({},so,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ms=An(Ac),h=E({},gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yr}),y=An(h),b=E({},Os,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=An(b),H=E({},so,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),J=An(H),ge=E({},Os,{newState:0,oldState:0}),Ue=An(ge),$t=[9,13,27,32],ot=Di&&"CompositionEvent"in window,Mt=null;Di&&"documentMode"in document&&(Mt=document.documentMode);var Oi=Di&&"TextEvent"in window&&!Mt,gs=Di&&(!ot||Mt&&8<Mt&&11>=Mt),Ji=" ",Zi=!1;function Sa(n,i){switch(n){case"keyup":return $t.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ao(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var oo=!1;function qw(n,i){switch(n){case"compositionend":return ao(i);case"keypress":return i.which!==32?null:(Zi=!0,Ji);case"textInput":return n=i.data,n===Ji&&Zi?null:n;default:return null}}function Hw(n,i){if(oo)return n==="compositionend"||!ot&&Sa(n,i)?(n=El(),ba=bl=hs=null,oo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return gs&&i.locale!=="ko"?null:i.data;default:return null}}var Fw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c0(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Fw[n.type]:i==="textarea"}function h0(n,i,a,l){dr?cs?cs.push(l):cs=[l]:dr=l,i=mh(i,"onChange"),0<i.length&&(a=new fs("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var Al=null,xl=null;function Gw(n){$_(n,0)}function xc(n){var i=Ln(n);if(Ii(i))return n}function f0(n,i){if(n==="change")return i}var d0=!1;if(Di){var Jf;if(Di){var Zf="oninput"in document;if(!Zf){var m0=document.createElement("div");m0.setAttribute("oninput","return;"),Zf=typeof m0.oninput=="function"}Jf=Zf}else Jf=!1;d0=Jf&&(!document.documentMode||9<document.documentMode)}function g0(){Al&&(Al.detachEvent("onpropertychange",p0),xl=Al=null)}function p0(n){if(n.propertyName==="value"&&xc(xl)){var i=[];h0(i,xl,n,Ni(n)),mr(Gw,i)}}function Kw(n,i,a){n==="focusin"?(g0(),Al=i,xl=a,Al.attachEvent("onpropertychange",p0)):n==="focusout"&&g0()}function $w(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return xc(xl)}function Qw(n,i){if(n==="click")return xc(i)}function Yw(n,i){if(n==="input"||n==="change")return xc(i)}function Xw(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var di=typeof Object.is=="function"?Object.is:Xw;function Rl(n,i){if(di(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!St.call(i,f)||!di(n[f],i[f]))return!1}return!0}function y0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function _0(n,i){var a=y0(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=y0(a)}}function v0(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?v0(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function b0(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=us(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=us(n.document)}return i}function Wf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var Jw=Di&&"documentMode"in document&&11>=document.documentMode,lo=null,ed=null,Cl=null,td=!1;function E0(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;td||lo==null||lo!==us(l)||(l=lo,"selectionStart"in l&&Wf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Cl&&Rl(Cl,l)||(Cl=l,l=mh(ed,"onSelect"),0<l.length&&(i=new fs("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=lo)))}function Aa(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var uo={animationend:Aa("Animation","AnimationEnd"),animationiteration:Aa("Animation","AnimationIteration"),animationstart:Aa("Animation","AnimationStart"),transitionrun:Aa("Transition","TransitionRun"),transitionstart:Aa("Transition","TransitionStart"),transitioncancel:Aa("Transition","TransitionCancel"),transitionend:Aa("Transition","TransitionEnd")},nd={},T0={};Di&&(T0=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function xa(n){if(nd[n])return nd[n];if(!uo[n])return n;var i=uo[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in T0)return nd[n]=i[a];return n}var w0=xa("animationend"),S0=xa("animationiteration"),A0=xa("animationstart"),Zw=xa("transitionrun"),Ww=xa("transitionstart"),eS=xa("transitioncancel"),x0=xa("transitionend"),R0=new Map,id="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");id.push("scrollEnd");function Wi(n,i){R0.set(n,i),ni(i,[n])}var Rc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Mi=[],co=0,sd=0;function Cc(){for(var n=co,i=sd=co=0;i<n;){var a=Mi[i];Mi[i++]=null;var l=Mi[i];Mi[i++]=null;var f=Mi[i];Mi[i++]=null;var d=Mi[i];if(Mi[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&C0(a,f,d)}}function Ic(n,i,a,l){Mi[co++]=n,Mi[co++]=i,Mi[co++]=a,Mi[co++]=l,sd|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function rd(n,i,a,l){return Ic(n,i,a,l),Nc(n)}function Ra(n,i){return Ic(n,null,null,i),Nc(n)}function C0(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&i!==null&&(f=31-At(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function Nc(n){if(50<Xl)throw Xl=0,mm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var ho={};function tS(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(n,i,a,l){return new tS(n,i,a,l)}function ad(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ks(n,i){var a=n.alternate;return a===null?(a=mi(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function I0(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Dc(n,i,a,l,f,d){var _=0;if(l=n,typeof n=="function")ad(n)&&(_=1);else if(typeof n=="string")_=aA(n,a,de.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case C:return n=mi(31,a,i,f),n.elementType=C,n.lanes=d,n;case j:return Ca(a.children,f,d,i);case D:_=8,f|=24;break;case F:return n=mi(12,a,i,f|2),n.elementType=F,n.lanes=d,n;case ie:return n=mi(13,a,i,f),n.elementType=ie,n.lanes=d,n;case W:return n=mi(19,a,i,f),n.elementType=W,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Z:_=10;break e;case ne:_=9;break e;case ce:_=11;break e;case x:_=14;break e;case R:_=16,l=null;break e}_=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return i=mi(_,a,i,f),i.elementType=n,i.type=l,i.lanes=d,i}function Ca(n,i,a,l){return n=mi(7,n,l,i),n.lanes=a,n}function od(n,i,a){return n=mi(6,n,null,i),n.lanes=a,n}function N0(n){var i=mi(18,null,null,0);return i.stateNode=n,i}function ld(n,i,a){return i=mi(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var D0=new WeakMap;function ki(n,i){if(typeof n=="object"&&n!==null){var a=D0.get(n);return a!==void 0?a:(i={value:n,source:i,stack:Hi(i)},D0.set(n,i),i)}return{value:n,source:i,stack:Hi(i)}}var fo=[],mo=0,Oc=null,Il=0,Vi=[],Pi=0,_r=null,ps=1,ys="";function Vs(n,i){fo[mo++]=Il,fo[mo++]=Oc,Oc=n,Il=i}function O0(n,i,a){Vi[Pi++]=ps,Vi[Pi++]=ys,Vi[Pi++]=_r,_r=n;var l=ps;n=ys;var f=32-At(l)-1;l&=~(1<<f),a+=1;var d=32-At(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,ps=1<<32-At(i)+f|a<<f|l,ys=d+n}else ps=1<<d|a<<f|l,ys=n}function ud(n){n.return!==null&&(Vs(n,1),O0(n,1,0))}function cd(n){for(;n===Oc;)Oc=fo[--mo],fo[mo]=null,Il=fo[--mo],fo[mo]=null;for(;n===_r;)_r=Vi[--Pi],Vi[Pi]=null,ys=Vi[--Pi],Vi[Pi]=null,ps=Vi[--Pi],Vi[Pi]=null}function M0(n,i){Vi[Pi++]=ps,Vi[Pi++]=ys,Vi[Pi++]=_r,ps=i.id,ys=i.overflow,_r=n}var xn=null,Ct=null,et=!1,vr=null,Li=!1,hd=Error(r(519));function br(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Nl(ki(i,n)),hd}function k0(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[Pt]=n,i[Kt]=l,a){case"dialog":Ke("cancel",i),Ke("close",i);break;case"iframe":case"object":case"embed":Ke("load",i);break;case"video":case"audio":for(a=0;a<Zl.length;a++)Ke(Zl[a],i);break;case"source":Ke("error",i);break;case"img":case"image":case"link":Ke("error",i),Ke("load",i);break;case"details":Ke("toggle",i);break;case"input":Ke("invalid",i),hc(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ke("invalid",i);break;case"textarea":Ke("invalid",i),hr(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||J_(i.textContent,a)?(l.popover!=null&&(Ke("beforetoggle",i),Ke("toggle",i)),l.onScroll!=null&&Ke("scroll",i),l.onScrollEnd!=null&&Ke("scrollend",i),l.onClick!=null&&(i.onclick=Qi),i=!0):i=!1,i||br(n,!0)}function V0(n){for(xn=n.return;xn;)switch(xn.tag){case 5:case 31:case 13:Li=!1;return;case 27:case 3:Li=!0;return;default:xn=xn.return}}function go(n){if(n!==xn)return!1;if(!et)return V0(n),et=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Im(n.type,n.memoizedProps)),a=!a),a&&Ct&&br(n),V0(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Ct=av(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Ct=av(n)}else i===27?(i=Ct,kr(n.type)?(n=km,km=null,Ct=n):Ct=i):Ct=xn?ji(n.stateNode.nextSibling):null;return!0}function Ia(){Ct=xn=null,et=!1}function fd(){var n=vr;return n!==null&&(li===null?li=n:li.push.apply(li,n),vr=null),n}function Nl(n){vr===null?vr=[n]:vr.push(n)}var dd=P(null),Na=null,Ps=null;function Er(n,i,a){me(dd,i._currentValue),i._currentValue=a}function Ls(n){n._currentValue=dd.current,se(dd)}function md(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function gd(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=f;for(var O=0;O<i.length;O++)if(T.context===i[O]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),md(d.return,a,n),l||(_=null);break e}d=T.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),md(_,a,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function po(n,i,a,l){n=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var T=f.type;di(f.pendingProps.value,_.value)||(n!==null?n.push(T):n=[T])}}else if(f===Le.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(iu):n=[iu])}f=f.return}n!==null&&gd(i,n,a,l),i.flags|=262144}function Mc(n){for(n=n.firstContext;n!==null;){if(!di(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Da(n){Na=n,Ps=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Rn(n){return P0(Na,n)}function kc(n,i){return Na===null&&Da(n),P0(n,i)}function P0(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Ps===null){if(n===null)throw Error(r(308));Ps=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Ps=Ps.next=i;return a}var nS=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},iS=s.unstable_scheduleCallback,sS=s.unstable_NormalPriority,tn={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pd(){return{controller:new nS,data:new Map,refCount:0}}function Dl(n){n.refCount--,n.refCount===0&&iS(sS,function(){n.controller.abort()})}var Ol=null,yd=0,yo=0,_o=null;function rS(n,i){if(Ol===null){var a=Ol=[];yd=0,yo=bm(),_o={status:"pending",value:void 0,then:function(l){a.push(l)}}}return yd++,i.then(L0,L0),i}function L0(){if(--yd===0&&Ol!==null){_o!==null&&(_o.status="fulfilled");var n=Ol;Ol=null,yo=0,_o=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function aS(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var U0=te.S;te.S=function(n,i){E_=Zt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&rS(n,i),U0!==null&&U0(n,i)};var Oa=P(null);function _d(){var n=Oa.current;return n!==null?n:Tt.pooledCache}function Vc(n,i){i===null?me(Oa,Oa.current):me(Oa,i.pool)}function j0(){var n=_d();return n===null?null:{parent:tn._currentValue,pool:n}}var vo=Error(r(460)),vd=Error(r(474)),Pc=Error(r(542)),Lc={then:function(){}};function z0(n){return n=n.status,n==="fulfilled"||n==="rejected"}function B0(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(Qi,Qi),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,H0(n),n;default:if(typeof i.status=="string")i.then(Qi,Qi);else{if(n=Tt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,H0(n),n}throw ka=i,vo}}function Ma(n){try{var i=n._init;return i(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ka=a,vo):a}}var ka=null;function q0(){if(ka===null)throw Error(r(459));var n=ka;return ka=null,n}function H0(n){if(n===vo||n===Pc)throw Error(r(483))}var bo=null,Ml=0;function Uc(n){var i=Ml;return Ml+=1,bo===null&&(bo=[]),B0(bo,n,i)}function kl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function jc(n,i){throw i.$$typeof===w?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function F0(n){function i(z,L){if(n){var G=z.deletions;G===null?(z.deletions=[L],z.flags|=16):G.push(L)}}function a(z,L){if(!n)return null;for(;L!==null;)i(z,L),L=L.sibling;return null}function l(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function f(z,L){return z=ks(z,L),z.index=0,z.sibling=null,z}function d(z,L,G){return z.index=G,n?(G=z.alternate,G!==null?(G=G.index,G<L?(z.flags|=67108866,L):G):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function _(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function T(z,L,G,ae){return L===null||L.tag!==6?(L=od(G,z.mode,ae),L.return=z,L):(L=f(L,G),L.return=z,L)}function O(z,L,G,ae){var Re=G.type;return Re===j?re(z,L,G.props.children,ae,G.key):L!==null&&(L.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===R&&Ma(Re)===L.type)?(L=f(L,G.props),kl(L,G),L.return=z,L):(L=Dc(G.type,G.key,G.props,null,z.mode,ae),kl(L,G),L.return=z,L)}function K(z,L,G,ae){return L===null||L.tag!==4||L.stateNode.containerInfo!==G.containerInfo||L.stateNode.implementation!==G.implementation?(L=ld(G,z.mode,ae),L.return=z,L):(L=f(L,G.children||[]),L.return=z,L)}function re(z,L,G,ae,Re){return L===null||L.tag!==7?(L=Ca(G,z.mode,ae,Re),L.return=z,L):(L=f(L,G),L.return=z,L)}function le(z,L,G){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=od(""+L,z.mode,G),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case I:return G=Dc(L.type,L.key,L.props,null,z.mode,G),kl(G,L),G.return=z,G;case k:return L=ld(L,z.mode,G),L.return=z,L;case R:return L=Ma(L),le(z,L,G)}if(dt(L)||U(L))return L=Ca(L,z.mode,G,null),L.return=z,L;if(typeof L.then=="function")return le(z,Uc(L),G);if(L.$$typeof===Z)return le(z,kc(z,L),G);jc(z,L)}return null}function Q(z,L,G,ae){var Re=L!==null?L.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Re!==null?null:T(z,L,""+G,ae);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case I:return G.key===Re?O(z,L,G,ae):null;case k:return G.key===Re?K(z,L,G,ae):null;case R:return G=Ma(G),Q(z,L,G,ae)}if(dt(G)||U(G))return Re!==null?null:re(z,L,G,ae,null);if(typeof G.then=="function")return Q(z,L,Uc(G),ae);if(G.$$typeof===Z)return Q(z,L,kc(z,G),ae);jc(z,G)}return null}function ee(z,L,G,ae,Re){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return z=z.get(G)||null,T(L,z,""+ae,Re);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case I:return z=z.get(ae.key===null?G:ae.key)||null,O(L,z,ae,Re);case k:return z=z.get(ae.key===null?G:ae.key)||null,K(L,z,ae,Re);case R:return ae=Ma(ae),ee(z,L,G,ae,Re)}if(dt(ae)||U(ae))return z=z.get(G)||null,re(L,z,ae,Re,null);if(typeof ae.then=="function")return ee(z,L,G,Uc(ae),Re);if(ae.$$typeof===Z)return ee(z,L,G,kc(L,ae),Re);jc(L,ae)}return null}function Te(z,L,G,ae){for(var Re=null,st=null,we=L,Be=L=0,Ye=null;we!==null&&Be<G.length;Be++){we.index>Be?(Ye=we,we=null):Ye=we.sibling;var rt=Q(z,we,G[Be],ae);if(rt===null){we===null&&(we=Ye);break}n&&we&&rt.alternate===null&&i(z,we),L=d(rt,L,Be),st===null?Re=rt:st.sibling=rt,st=rt,we=Ye}if(Be===G.length)return a(z,we),et&&Vs(z,Be),Re;if(we===null){for(;Be<G.length;Be++)we=le(z,G[Be],ae),we!==null&&(L=d(we,L,Be),st===null?Re=we:st.sibling=we,st=we);return et&&Vs(z,Be),Re}for(we=l(we);Be<G.length;Be++)Ye=ee(we,z,Be,G[Be],ae),Ye!==null&&(n&&Ye.alternate!==null&&we.delete(Ye.key===null?Be:Ye.key),L=d(Ye,L,Be),st===null?Re=Ye:st.sibling=Ye,st=Ye);return n&&we.forEach(function(jr){return i(z,jr)}),et&&Vs(z,Be),Re}function Ie(z,L,G,ae){if(G==null)throw Error(r(151));for(var Re=null,st=null,we=L,Be=L=0,Ye=null,rt=G.next();we!==null&&!rt.done;Be++,rt=G.next()){we.index>Be?(Ye=we,we=null):Ye=we.sibling;var jr=Q(z,we,rt.value,ae);if(jr===null){we===null&&(we=Ye);break}n&&we&&jr.alternate===null&&i(z,we),L=d(jr,L,Be),st===null?Re=jr:st.sibling=jr,st=jr,we=Ye}if(rt.done)return a(z,we),et&&Vs(z,Be),Re;if(we===null){for(;!rt.done;Be++,rt=G.next())rt=le(z,rt.value,ae),rt!==null&&(L=d(rt,L,Be),st===null?Re=rt:st.sibling=rt,st=rt);return et&&Vs(z,Be),Re}for(we=l(we);!rt.done;Be++,rt=G.next())rt=ee(we,z,Be,rt.value,ae),rt!==null&&(n&&rt.alternate!==null&&we.delete(rt.key===null?Be:rt.key),L=d(rt,L,Be),st===null?Re=rt:st.sibling=rt,st=rt);return n&&we.forEach(function(yA){return i(z,yA)}),et&&Vs(z,Be),Re}function bt(z,L,G,ae){if(typeof G=="object"&&G!==null&&G.type===j&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case I:e:{for(var Re=G.key;L!==null;){if(L.key===Re){if(Re=G.type,Re===j){if(L.tag===7){a(z,L.sibling),ae=f(L,G.props.children),ae.return=z,z=ae;break e}}else if(L.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===R&&Ma(Re)===L.type){a(z,L.sibling),ae=f(L,G.props),kl(ae,G),ae.return=z,z=ae;break e}a(z,L);break}else i(z,L);L=L.sibling}G.type===j?(ae=Ca(G.props.children,z.mode,ae,G.key),ae.return=z,z=ae):(ae=Dc(G.type,G.key,G.props,null,z.mode,ae),kl(ae,G),ae.return=z,z=ae)}return _(z);case k:e:{for(Re=G.key;L!==null;){if(L.key===Re)if(L.tag===4&&L.stateNode.containerInfo===G.containerInfo&&L.stateNode.implementation===G.implementation){a(z,L.sibling),ae=f(L,G.children||[]),ae.return=z,z=ae;break e}else{a(z,L);break}else i(z,L);L=L.sibling}ae=ld(G,z.mode,ae),ae.return=z,z=ae}return _(z);case R:return G=Ma(G),bt(z,L,G,ae)}if(dt(G))return Te(z,L,G,ae);if(U(G)){if(Re=U(G),typeof Re!="function")throw Error(r(150));return G=Re.call(G),Ie(z,L,G,ae)}if(typeof G.then=="function")return bt(z,L,Uc(G),ae);if(G.$$typeof===Z)return bt(z,L,kc(z,G),ae);jc(z,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,L!==null&&L.tag===6?(a(z,L.sibling),ae=f(L,G),ae.return=z,z=ae):(a(z,L),ae=od(G,z.mode,ae),ae.return=z,z=ae),_(z)):a(z,L)}return function(z,L,G,ae){try{Ml=0;var Re=bt(z,L,G,ae);return bo=null,Re}catch(we){if(we===vo||we===Pc)throw we;var st=mi(29,we,null,z.mode);return st.lanes=ae,st.return=z,st}}}var Va=F0(!0),G0=F0(!1),Tr=!1;function bd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ed(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function wr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Sr(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(lt&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Nc(n),C0(n,null,a),i}return Ic(n,l,i,a),Nc(n)}function Vl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,Gt(n,a)}}function Td(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var wd=!1;function Pl(){if(wd){var n=_o;if(n!==null)throw n}}function Ll(n,i,a,l){wd=!1;var f=n.updateQueue;Tr=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var O=T,K=O.next;O.next=null,_===null?d=K:_.next=K,_=O;var re=n.alternate;re!==null&&(re=re.updateQueue,T=re.lastBaseUpdate,T!==_&&(T===null?re.firstBaseUpdate=K:T.next=K,re.lastBaseUpdate=O))}if(d!==null){var le=f.baseState;_=0,re=K=O=null,T=d;do{var Q=T.lane&-536870913,ee=Q!==T.lane;if(ee?(Qe&Q)===Q:(l&Q)===Q){Q!==0&&Q===yo&&(wd=!0),re!==null&&(re=re.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Te=n,Ie=T;Q=i;var bt=a;switch(Ie.tag){case 1:if(Te=Ie.payload,typeof Te=="function"){le=Te.call(bt,le,Q);break e}le=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ie.payload,Q=typeof Te=="function"?Te.call(bt,le,Q):Te,Q==null)break e;le=E({},le,Q);break e;case 2:Tr=!0}}Q=T.callback,Q!==null&&(n.flags|=64,ee&&(n.flags|=8192),ee=f.callbacks,ee===null?f.callbacks=[Q]:ee.push(Q))}else ee={lane:Q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},re===null?(K=re=ee,O=le):re=re.next=ee,_|=Q;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;ee=T,T=ee.next,ee.next=null,f.lastBaseUpdate=ee,f.shared.pending=null}}while(!0);re===null&&(O=le),f.baseState=O,f.firstBaseUpdate=K,f.lastBaseUpdate=re,d===null&&(f.shared.lanes=0),Ir|=_,n.lanes=_,n.memoizedState=le}}function K0(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function $0(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)K0(a[n],i)}var Eo=P(null),zc=P(0);function Q0(n,i){n=Ks,me(zc,n),me(Eo,i),Ks=n|i.baseLanes}function Sd(){me(zc,Ks),me(Eo,Eo.current)}function Ad(){Ks=zc.current,se(Eo),se(zc)}var gi=P(null),Ui=null;function Ar(n){var i=n.alternate;me(Qt,Qt.current&1),me(gi,n),Ui===null&&(i===null||Eo.current!==null||i.memoizedState!==null)&&(Ui=n)}function xd(n){me(Qt,Qt.current),me(gi,n),Ui===null&&(Ui=n)}function Y0(n){n.tag===22?(me(Qt,Qt.current),me(gi,n),Ui===null&&(Ui=n)):xr()}function xr(){me(Qt,Qt.current),me(gi,gi.current)}function pi(n){se(gi),Ui===n&&(Ui=null),se(Qt)}var Qt=P(0);function Bc(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Om(a)||Mm(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Us=0,je=null,_t=null,nn=null,qc=!1,To=!1,Pa=!1,Hc=0,Ul=0,wo=null,oS=0;function zt(){throw Error(r(321))}function Rd(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!di(n[a],i[a]))return!1;return!0}function Cd(n,i,a,l,f,d){return Us=d,je=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,te.H=n===null||n.memoizedState===null?Oy:Hd,Pa=!1,d=a(l,f),Pa=!1,To&&(d=J0(i,a,l,f)),X0(n),d}function X0(n){te.H=Bl;var i=_t!==null&&_t.next!==null;if(Us=0,nn=_t=je=null,qc=!1,Ul=0,wo=null,i)throw Error(r(300));n===null||sn||(n=n.dependencies,n!==null&&Mc(n)&&(sn=!0))}function J0(n,i,a,l){je=n;var f=0;do{if(To&&(wo=null),Ul=0,To=!1,25<=f)throw Error(r(301));if(f+=1,nn=_t=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}te.H=My,d=i(a,l)}while(To);return d}function lS(){var n=te.H,i=n.useState()[0];return i=typeof i.then=="function"?jl(i):i,n=n.useState()[0],(_t!==null?_t.memoizedState:null)!==n&&(je.flags|=1024),i}function Id(){var n=Hc!==0;return Hc=0,n}function Nd(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function Dd(n){if(qc){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}qc=!1}Us=0,nn=_t=je=null,To=!1,Ul=Hc=0,wo=null}function Yn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?je.memoizedState=nn=n:nn=nn.next=n,nn}function Yt(){if(_t===null){var n=je.alternate;n=n!==null?n.memoizedState:null}else n=_t.next;var i=nn===null?je.memoizedState:nn.next;if(i!==null)nn=i,_t=n;else{if(n===null)throw je.alternate===null?Error(r(467)):Error(r(310));_t=n,n={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},nn===null?je.memoizedState=nn=n:nn=nn.next=n}return nn}function Fc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jl(n){var i=Ul;return Ul+=1,wo===null&&(wo=[]),n=B0(wo,n,i),i=je,(nn===null?i.memoizedState:nn.next)===null&&(i=i.alternate,te.H=i===null||i.memoizedState===null?Oy:Hd),n}function Gc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return jl(n);if(n.$$typeof===Z)return Rn(n)}throw Error(r(438,String(n)))}function Od(n){var i=null,a=je.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=je.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Fc(),je.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=V;return i.index++,a}function js(n,i){return typeof i=="function"?i(n):i}function Kc(n){var i=Yt();return Md(i,_t,n)}function Md(n,i,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{i=f.next;var T=_=null,O=null,K=i,re=!1;do{var le=K.lane&-536870913;if(le!==K.lane?(Qe&le)===le:(Us&le)===le){var Q=K.revertLane;if(Q===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),le===yo&&(re=!0);else if((Us&Q)===Q){K=K.next,Q===yo&&(re=!0);continue}else le={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},O===null?(T=O=le,_=d):O=O.next=le,je.lanes|=Q,Ir|=Q;le=K.action,Pa&&a(d,le),d=K.hasEagerState?K.eagerState:a(d,le)}else Q={lane:le,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},O===null?(T=O=Q,_=d):O=O.next=Q,je.lanes|=le,Ir|=le;K=K.next}while(K!==null&&K!==i);if(O===null?_=d:O.next=T,!di(d,n.memoizedState)&&(sn=!0,re&&(a=_o,a!==null)))throw a;n.memoizedState=d,n.baseState=_,n.baseQueue=O,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function kd(n){var i=Yt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);di(d,i.memoizedState)||(sn=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Z0(n,i,a){var l=je,f=Yt(),d=et;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!di((_t||f).memoizedState,a);if(_&&(f.memoizedState=a,sn=!0),f=f.queue,Ld(ty.bind(null,l,f,n),[n]),f.getSnapshot!==i||_||nn!==null&&nn.memoizedState.tag&1){if(l.flags|=2048,So(9,{destroy:void 0},ey.bind(null,l,f,a,i),null),Tt===null)throw Error(r(349));d||(Us&127)!==0||W0(l,i,a)}return a}function W0(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=je.updateQueue,i===null?(i=Fc(),je.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function ey(n,i,a,l){i.value=a,i.getSnapshot=l,ny(i)&&iy(n)}function ty(n,i,a){return a(function(){ny(i)&&iy(n)})}function ny(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!di(n,a)}catch{return!0}}function iy(n){var i=Ra(n,2);i!==null&&ui(i,n,2)}function Vd(n){var i=Yn();if(typeof n=="function"){var a=n;if(n=a(),Pa){pn(!0);try{a()}finally{pn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:n},i}function sy(n,i,a,l){return n.baseState=a,Md(n,_t,typeof l=="function"?l:js)}function uS(n,i,a,l,f){if(Yc(n))throw Error(r(485));if(n=i.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};te.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,ry(i,d)):(d.next=a.next,i.pending=a.next=d)}}function ry(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var d=te.T,_={};te.T=_;try{var T=a(f,l),O=te.S;O!==null&&O(_,T),ay(n,i,T)}catch(K){Pd(n,i,K)}finally{d!==null&&_.types!==null&&(d.types=_.types),te.T=d}}else try{d=a(f,l),ay(n,i,d)}catch(K){Pd(n,i,K)}}function ay(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){oy(n,i,l)},function(l){return Pd(n,i,l)}):oy(n,i,a)}function oy(n,i,a){i.status="fulfilled",i.value=a,ly(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,ry(n,a)))}function Pd(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,ly(i),i=i.next;while(i!==l)}n.action=null}function ly(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function uy(n,i){return i}function cy(n,i){if(et){var a=Tt.formState;if(a!==null){e:{var l=je;if(et){if(Ct){t:{for(var f=Ct,d=Li;f.nodeType!==8;){if(!d){f=null;break t}if(f=ji(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){Ct=ji(f.nextSibling),l=f.data==="F!";break e}}br(l)}l=!1}l&&(i=a[0])}}return a=Yn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uy,lastRenderedState:i},a.queue=l,a=Iy.bind(null,je,l),l.dispatch=a,l=Vd(!1),d=qd.bind(null,je,!1,l.queue),l=Yn(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=uS.bind(null,je,f,d,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function hy(n){var i=Yt();return fy(i,_t,n)}function fy(n,i,a){if(i=Md(n,i,uy)[0],n=Kc(js)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=jl(i)}catch(_){throw _===vo?Pc:_}else l=i;i=Yt();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(je.flags|=2048,So(9,{destroy:void 0},cS.bind(null,f,a),null)),[l,d,n]}function cS(n,i){n.action=i}function dy(n){var i=Yt(),a=_t;if(a!==null)return fy(i,a,n);Yt(),i=i.memoizedState,a=Yt();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function So(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=je.updateQueue,i===null&&(i=Fc(),je.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function my(){return Yt().memoizedState}function $c(n,i,a,l){var f=Yn();je.flags|=n,f.memoizedState=So(1|i,{destroy:void 0},a,l===void 0?null:l)}function Qc(n,i,a,l){var f=Yt();l=l===void 0?null:l;var d=f.memoizedState.inst;_t!==null&&l!==null&&Rd(l,_t.memoizedState.deps)?f.memoizedState=So(i,d,a,l):(je.flags|=n,f.memoizedState=So(1|i,d,a,l))}function gy(n,i){$c(8390656,8,n,i)}function Ld(n,i){Qc(2048,8,n,i)}function hS(n){je.flags|=4;var i=je.updateQueue;if(i===null)i=Fc(),je.updateQueue=i,i.events=[n];else{var a=i.events;a===null?i.events=[n]:a.push(n)}}function py(n){var i=Yt().memoizedState;return hS({ref:i,nextImpl:n}),function(){if((lt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function yy(n,i){return Qc(4,2,n,i)}function _y(n,i){return Qc(4,4,n,i)}function vy(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function by(n,i,a){a=a!=null?a.concat([n]):null,Qc(4,4,vy.bind(null,i,n),a)}function Ud(){}function Ey(n,i){var a=Yt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Rd(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function Ty(n,i){var a=Yt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Rd(i,l[1]))return l[0];if(l=n(),Pa){pn(!0);try{n()}finally{pn(!1)}}return a.memoizedState=[l,i],l}function jd(n,i,a){return a===void 0||(Us&1073741824)!==0&&(Qe&261930)===0?n.memoizedState=i:(n.memoizedState=a,n=w_(),je.lanes|=n,Ir|=n,a)}function wy(n,i,a,l){return di(a,i)?a:Eo.current!==null?(n=jd(n,a,l),di(n,i)||(sn=!0),n):(Us&42)===0||(Us&1073741824)!==0&&(Qe&261930)===0?(sn=!0,n.memoizedState=a):(n=w_(),je.lanes|=n,Ir|=n,i)}function Sy(n,i,a,l,f){var d=he.p;he.p=d!==0&&8>d?d:8;var _=te.T,T={};te.T=T,qd(n,!1,i,a);try{var O=f(),K=te.S;if(K!==null&&K(T,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var re=aS(O,l);zl(n,i,re,vi(n))}else zl(n,i,l,vi(n))}catch(le){zl(n,i,{then:function(){},status:"rejected",reason:le},vi())}finally{he.p=d,_!==null&&T.types!==null&&(_.types=T.types),te.T=_}}function fS(){}function zd(n,i,a,l){if(n.tag!==5)throw Error(r(476));var f=Ay(n).queue;Sy(n,f,i,be,a===null?fS:function(){return xy(n),a(l)})}function Ay(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:be},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function xy(n){var i=Ay(n);i.next===null&&(i=n.alternate.memoizedState),zl(n,i.next.queue,{},vi())}function Bd(){return Rn(iu)}function Ry(){return Yt().memoizedState}function Cy(){return Yt().memoizedState}function dS(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=vi();n=wr(a);var l=Sr(i,n,a);l!==null&&(ui(l,i,a),Vl(l,i,a)),i={cache:pd()},n.payload=i;return}i=i.return}}function mS(n,i,a){var l=vi();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Yc(n)?Ny(i,a):(a=rd(n,i,a,l),a!==null&&(ui(a,n,l),Dy(a,i,l)))}function Iy(n,i,a){var l=vi();zl(n,i,a,l)}function zl(n,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Yc(n))Ny(i,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,T=d(_,a);if(f.hasEagerState=!0,f.eagerState=T,di(T,_))return Ic(n,i,f,0),Tt===null&&Cc(),!1}catch{}if(a=rd(n,i,f,l),a!==null)return ui(a,n,l),Dy(a,i,l),!0}return!1}function qd(n,i,a,l){if(l={lane:2,revertLane:bm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Yc(n)){if(i)throw Error(r(479))}else i=rd(n,a,l,2),i!==null&&ui(i,n,2)}function Yc(n){var i=n.alternate;return n===je||i!==null&&i===je}function Ny(n,i){To=qc=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Dy(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,Gt(n,a)}}var Bl={readContext:Rn,use:Gc,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useLayoutEffect:zt,useInsertionEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useSyncExternalStore:zt,useId:zt,useHostTransitionStatus:zt,useFormState:zt,useActionState:zt,useOptimistic:zt,useMemoCache:zt,useCacheRefresh:zt};Bl.useEffectEvent=zt;var Oy={readContext:Rn,use:Gc,useCallback:function(n,i){return Yn().memoizedState=[n,i===void 0?null:i],n},useContext:Rn,useEffect:gy,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,$c(4194308,4,vy.bind(null,i,n),a)},useLayoutEffect:function(n,i){return $c(4194308,4,n,i)},useInsertionEffect:function(n,i){$c(4,2,n,i)},useMemo:function(n,i){var a=Yn();i=i===void 0?null:i;var l=n();if(Pa){pn(!0);try{n()}finally{pn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=Yn();if(a!==void 0){var f=a(i);if(Pa){pn(!0);try{a(i)}finally{pn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=mS.bind(null,je,n),[l.memoizedState,n]},useRef:function(n){var i=Yn();return n={current:n},i.memoizedState=n},useState:function(n){n=Vd(n);var i=n.queue,a=Iy.bind(null,je,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:Ud,useDeferredValue:function(n,i){var a=Yn();return jd(a,n,i)},useTransition:function(){var n=Vd(!1);return n=Sy.bind(null,je,n.queue,!0,!1),Yn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=je,f=Yn();if(et){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),Tt===null)throw Error(r(349));(Qe&127)!==0||W0(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,gy(ty.bind(null,l,d,n),[n]),l.flags|=2048,So(9,{destroy:void 0},ey.bind(null,l,d,a,i),null),a},useId:function(){var n=Yn(),i=Tt.identifierPrefix;if(et){var a=ys,l=ps;a=(l&~(1<<32-At(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Hc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=oS++,i="_"+i+"r_"+a.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:Bd,useFormState:cy,useActionState:cy,useOptimistic:function(n){var i=Yn();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=qd.bind(null,je,!0,a),a.dispatch=i,[n,i]},useMemoCache:Od,useCacheRefresh:function(){return Yn().memoizedState=dS.bind(null,je)},useEffectEvent:function(n){var i=Yn(),a={impl:n};return i.memoizedState=a,function(){if((lt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Hd={readContext:Rn,use:Gc,useCallback:Ey,useContext:Rn,useEffect:Ld,useImperativeHandle:by,useInsertionEffect:yy,useLayoutEffect:_y,useMemo:Ty,useReducer:Kc,useRef:my,useState:function(){return Kc(js)},useDebugValue:Ud,useDeferredValue:function(n,i){var a=Yt();return wy(a,_t.memoizedState,n,i)},useTransition:function(){var n=Kc(js)[0],i=Yt().memoizedState;return[typeof n=="boolean"?n:jl(n),i]},useSyncExternalStore:Z0,useId:Ry,useHostTransitionStatus:Bd,useFormState:hy,useActionState:hy,useOptimistic:function(n,i){var a=Yt();return sy(a,_t,n,i)},useMemoCache:Od,useCacheRefresh:Cy};Hd.useEffectEvent=py;var My={readContext:Rn,use:Gc,useCallback:Ey,useContext:Rn,useEffect:Ld,useImperativeHandle:by,useInsertionEffect:yy,useLayoutEffect:_y,useMemo:Ty,useReducer:kd,useRef:my,useState:function(){return kd(js)},useDebugValue:Ud,useDeferredValue:function(n,i){var a=Yt();return _t===null?jd(a,n,i):wy(a,_t.memoizedState,n,i)},useTransition:function(){var n=kd(js)[0],i=Yt().memoizedState;return[typeof n=="boolean"?n:jl(n),i]},useSyncExternalStore:Z0,useId:Ry,useHostTransitionStatus:Bd,useFormState:dy,useActionState:dy,useOptimistic:function(n,i){var a=Yt();return _t!==null?sy(a,_t,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Od,useCacheRefresh:Cy};My.useEffectEvent=py;function Fd(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:E({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Gd={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=vi(),f=wr(l);f.payload=i,a!=null&&(f.callback=a),i=Sr(n,f,l),i!==null&&(ui(i,n,l),Vl(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=vi(),f=wr(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Sr(n,f,l),i!==null&&(ui(i,n,l),Vl(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=vi(),l=wr(a);l.tag=2,i!=null&&(l.callback=i),i=Sr(n,l,a),i!==null&&(ui(i,n,a),Vl(i,n,a))}};function ky(n,i,a,l,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!Rl(a,l)||!Rl(f,d):!0}function Vy(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&Gd.enqueueReplaceState(i,i.state,null)}function La(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=E({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function Py(n){Rc(n)}function Ly(n){console.error(n)}function Uy(n){Rc(n)}function Xc(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function jy(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Kd(n,i,a){return a=wr(a),a.tag=3,a.payload={element:null},a.callback=function(){Xc(n,i)},a}function zy(n){return n=wr(n),n.tag=3,n}function By(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){jy(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){jy(i,a,l),typeof f!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function gS(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&po(i,a,f,!0),a=gi.current,a!==null){switch(a.tag){case 31:case 13:return Ui===null?lh():a.alternate===null&&Bt===0&&(Bt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Lc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),ym(n,l,f)),!1;case 22:return a.flags|=65536,l===Lc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),ym(n,l,f)),!1}throw Error(r(435,a.tag))}return ym(n,l,f),lh(),!1}if(et)return i=gi.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==hd&&(n=Error(r(422),{cause:l}),Nl(ki(n,a)))):(l!==hd&&(i=Error(r(423),{cause:l}),Nl(ki(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=ki(l,a),f=Kd(n.stateNode,l,f),Td(n,f),Bt!==4&&(Bt=2)),!1;var d=Error(r(520),{cause:l});if(d=ki(d,a),Yl===null?Yl=[d]:Yl.push(d),Bt!==4&&(Bt=2),i===null)return!0;l=ki(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=Kd(a.stateNode,l,n),Td(a,n),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Nr===null||!Nr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=zy(f),By(f,n,a,l),Td(a,f),!1}a=a.return}while(a!==null);return!1}var $d=Error(r(461)),sn=!1;function Cn(n,i,a,l){i.child=n===null?G0(i,null,a,l):Va(i,n.child,a,l)}function qy(n,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var T in l)T!=="ref"&&(_[T]=l[T])}else _=l;return Da(i),l=Cd(n,i,a,_,d,f),T=Id(),n!==null&&!sn?(Nd(n,i,f),zs(n,i,f)):(et&&T&&ud(i),i.flags|=1,Cn(n,i,l,f),i.child)}function Hy(n,i,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!ad(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Fy(n,i,d,l,f)):(n=Dc(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(d=n.child,!tm(n,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Rl,a(_,l)&&n.ref===i.ref)return zs(n,i,f)}return i.flags|=1,n=ks(d,l),n.ref=i.ref,n.return=i,i.child=n}function Fy(n,i,a,l,f){if(n!==null){var d=n.memoizedProps;if(Rl(d,l)&&n.ref===i.ref)if(sn=!1,i.pendingProps=l=d,tm(n,f))(n.flags&131072)!==0&&(sn=!0);else return i.lanes=n.lanes,zs(n,i,f)}return Qd(n,i,a,l,f)}function Gy(n,i,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=i.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return Ky(n,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Vc(i,d!==null?d.cachePool:null),d!==null?Q0(i,d):Sd(),Y0(i);else return l=i.lanes=536870912,Ky(n,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Vc(i,d.cachePool),Q0(i,d),xr(),i.memoizedState=null):(n!==null&&Vc(i,null),Sd(),xr());return Cn(n,i,f,a),i.child}function ql(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Ky(n,i,a,l,f){var d=_d();return d=d===null?null:{parent:tn._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},n!==null&&Vc(i,null),Sd(),Y0(i),n!==null&&po(n,i,l,!0),i.childLanes=f,null}function Jc(n,i){return i=Wc({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function $y(n,i,a){return Va(i,n.child,null,a),n=Jc(i,i.pendingProps),n.flags|=2,pi(i),i.memoizedState=null,n}function pS(n,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(et){if(l.mode==="hidden")return n=Jc(i,l),i.lanes=536870912,ql(null,n);if(xd(i),(n=Ct)?(n=rv(n,Li),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:_r!==null?{id:ps,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},a=N0(n),a.return=i,i.child=a,xn=i,Ct=null)):n=null,n===null)throw br(i);return i.lanes=536870912,null}return Jc(i,l)}var d=n.memoizedState;if(d!==null){var _=d.dehydrated;if(xd(i),f)if(i.flags&256)i.flags&=-257,i=$y(n,i,a);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(sn||po(n,i,a,!1),f=(a&n.childLanes)!==0,sn||f){if(l=Tt,l!==null&&(_=fe(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Ra(n,_),ui(l,n,_),$d;lh(),i=$y(n,i,a)}else n=d.treeContext,Ct=ji(_.nextSibling),xn=i,et=!0,vr=null,Li=!1,n!==null&&M0(i,n),i=Jc(i,l),i.flags|=4096;return i}return n=ks(n.child,{mode:l.mode,children:l.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Zc(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function Qd(n,i,a,l,f){return Da(i),a=Cd(n,i,a,l,void 0,f),l=Id(),n!==null&&!sn?(Nd(n,i,f),zs(n,i,f)):(et&&l&&ud(i),i.flags|=1,Cn(n,i,a,f),i.child)}function Qy(n,i,a,l,f,d){return Da(i),i.updateQueue=null,a=J0(i,l,a,f),X0(n),l=Id(),n!==null&&!sn?(Nd(n,i,d),zs(n,i,d)):(et&&l&&ud(i),i.flags|=1,Cn(n,i,a,d),i.child)}function Yy(n,i,a,l,f){if(Da(i),i.stateNode===null){var d=ho,_=a.contextType;typeof _=="object"&&_!==null&&(d=Rn(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Gd,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},bd(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?Rn(_):ho,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Fd(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Gd.enqueueReplaceState(d,d.state,null),Ll(i,l,d,f),Pl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){d=i.stateNode;var T=i.memoizedProps,O=La(a,T);d.props=O;var K=d.context,re=a.contextType;_=ho,typeof re=="object"&&re!==null&&(_=Rn(re));var le=a.getDerivedStateFromProps;re=typeof le=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,re||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||K!==_)&&Vy(i,d,l,_),Tr=!1;var Q=i.memoizedState;d.state=Q,Ll(i,l,d,f),Pl(),K=i.memoizedState,T||Q!==K||Tr?(typeof le=="function"&&(Fd(i,a,le,l),K=i.memoizedState),(O=Tr||ky(i,a,O,l,Q,K,_))?(re||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=K),d.props=l,d.state=K,d.context=_,l=O):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Ed(n,i),_=i.memoizedProps,re=La(a,_),d.props=re,le=i.pendingProps,Q=d.context,K=a.contextType,O=ho,typeof K=="object"&&K!==null&&(O=Rn(K)),T=a.getDerivedStateFromProps,(K=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==le||Q!==O)&&Vy(i,d,l,O),Tr=!1,Q=i.memoizedState,d.state=Q,Ll(i,l,d,f),Pl();var ee=i.memoizedState;_!==le||Q!==ee||Tr||n!==null&&n.dependencies!==null&&Mc(n.dependencies)?(typeof T=="function"&&(Fd(i,a,T,l),ee=i.memoizedState),(re=Tr||ky(i,a,re,l,Q,ee,O)||n!==null&&n.dependencies!==null&&Mc(n.dependencies))?(K||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,ee,O),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,ee,O)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=ee),d.props=l,d.state=ee,d.context=O,l=re):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(i.flags|=1024),l=!1)}return d=l,Zc(n,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,n!==null&&l?(i.child=Va(i,n.child,null,f),i.child=Va(i,null,a,f)):Cn(n,i,a,f),i.memoizedState=d.state,n=i.child):n=zs(n,i,f),n}function Xy(n,i,a,l){return Ia(),i.flags|=256,Cn(n,i,a,l),i.child}var Yd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xd(n){return{baseLanes:n,cachePool:j0()}}function Jd(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=_i),n}function Jy(n,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=n!==null&&n.memoizedState===null?!1:(Qt.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,n===null){if(et){if(f?Ar(i):xr(),(n=Ct)?(n=rv(n,Li),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:_r!==null?{id:ps,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},a=N0(n),a.return=i,i.child=a,xn=i,Ct=null)):n=null,n===null)throw br(i);return Mm(n)?i.lanes=32:i.lanes=536870912,null}var T=l.children;return l=l.fallback,f?(xr(),f=i.mode,T=Wc({mode:"hidden",children:T},f),l=Ca(l,f,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,l=i.child,l.memoizedState=Xd(a),l.childLanes=Jd(n,_,a),i.memoizedState=Yd,ql(null,l)):(Ar(i),Zd(i,T))}var O=n.memoizedState;if(O!==null&&(T=O.dehydrated,T!==null)){if(d)i.flags&256?(Ar(i),i.flags&=-257,i=Wd(n,i,a)):i.memoizedState!==null?(xr(),i.child=n.child,i.flags|=128,i=null):(xr(),T=l.fallback,f=i.mode,l=Wc({mode:"visible",children:l.children},f),T=Ca(T,f,a,null),T.flags|=2,l.return=i,T.return=i,l.sibling=T,i.child=l,Va(i,n.child,null,a),l=i.child,l.memoizedState=Xd(a),l.childLanes=Jd(n,_,a),i.memoizedState=Yd,i=ql(null,l));else if(Ar(i),Mm(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var K=_.dgst;_=K,l=Error(r(419)),l.stack="",l.digest=_,Nl({value:l,source:null,stack:null}),i=Wd(n,i,a)}else if(sn||po(n,i,a,!1),_=(a&n.childLanes)!==0,sn||_){if(_=Tt,_!==null&&(l=fe(_,a),l!==0&&l!==O.retryLane))throw O.retryLane=l,Ra(n,l),ui(_,n,l),$d;Om(T)||lh(),i=Wd(n,i,a)}else Om(T)?(i.flags|=192,i.child=n.child,i=null):(n=O.treeContext,Ct=ji(T.nextSibling),xn=i,et=!0,vr=null,Li=!1,n!==null&&M0(i,n),i=Zd(i,l.children),i.flags|=4096);return i}return f?(xr(),T=l.fallback,f=i.mode,O=n.child,K=O.sibling,l=ks(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,K!==null?T=ks(K,T):(T=Ca(T,f,a,null),T.flags|=2),T.return=i,l.return=i,l.sibling=T,i.child=l,ql(null,l),l=i.child,T=n.child.memoizedState,T===null?T=Xd(a):(f=T.cachePool,f!==null?(O=tn._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=j0(),T={baseLanes:T.baseLanes|a,cachePool:f}),l.memoizedState=T,l.childLanes=Jd(n,_,a),i.memoizedState=Yd,ql(n.child,l)):(Ar(i),a=n.child,n=a.sibling,a=ks(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(_=i.deletions,_===null?(i.deletions=[n],i.flags|=16):_.push(n)),i.child=a,i.memoizedState=null,a)}function Zd(n,i){return i=Wc({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Wc(n,i){return n=mi(22,n,null,i),n.lanes=0,n}function Wd(n,i,a){return Va(i,n.child,null,a),n=Zd(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Zy(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),md(n.return,i,a)}function em(n,i,a,l,f,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function Wy(n,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=Qt.current,T=(_&2)!==0;if(T?(_=_&1|2,i.flags|=128):_&=1,me(Qt,_),Cn(n,i,l,a),l=et?Il:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Zy(n,a,i);else if(n.tag===19)Zy(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&Bc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),em(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Bc(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}em(i,!0,a,null,d,l);break;case"together":em(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function zs(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Ir|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(po(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=ks(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=ks(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function tm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Mc(n)))}function yS(n,i,a){switch(i.tag){case 3:Dt(i,i.stateNode.containerInfo),Er(i,tn,n.memoizedState.cache),Ia();break;case 27:case 5:Ht(i);break;case 4:Dt(i,i.stateNode.containerInfo);break;case 10:Er(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,xd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Ar(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Jy(n,i,a):(Ar(i),n=zs(n,i,a),n!==null?n.sibling:null);Ar(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(po(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return Wy(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),me(Qt,Qt.current),l)break;return null;case 22:return i.lanes=0,Gy(n,i,a,i.pendingProps);case 24:Er(i,tn,n.memoizedState.cache)}return zs(n,i,a)}function e_(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)sn=!0;else{if(!tm(n,a)&&(i.flags&128)===0)return sn=!1,yS(n,i,a);sn=(n.flags&131072)!==0}else sn=!1,et&&(i.flags&1048576)!==0&&O0(i,Il,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(n=Ma(i.elementType),i.type=n,typeof n=="function")ad(n)?(l=La(n,l),i.tag=1,i=Yy(null,i,n,l,a)):(i.tag=0,i=Qd(null,i,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===ce){i.tag=11,i=qy(null,i,n,l,a);break e}else if(f===x){i.tag=14,i=Hy(null,i,n,l,a);break e}}throw i=qe(n)||n,Error(r(306,i,""))}}return i;case 0:return Qd(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=La(l,i.pendingProps),Yy(n,i,l,f,a);case 3:e:{if(Dt(i,i.stateNode.containerInfo),n===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,Ed(n,i),Ll(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Er(i,tn,l),l!==d.cache&&gd(i,[tn],a,!0),Pl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Xy(n,i,l,a);break e}else if(l!==f){f=ki(Error(r(424)),i),Nl(f),i=Xy(n,i,l,a);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Ct=ji(n.firstChild),xn=i,et=!0,vr=null,Li=!0,a=G0(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ia(),l===f){i=zs(n,i,a);break e}Cn(n,i,l,a)}i=i.child}return i;case 26:return Zc(n,i),n===null?(a=hv(i.type,null,i.pendingProps,null))?i.memoizedState=a:et||(a=i.type,n=i.pendingProps,l=gh(Ae.current).createElement(a),l[Pt]=i,l[Kt]=n,In(l,a,n),jt(l),i.stateNode=l):i.memoizedState=hv(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Ht(i),n===null&&et&&(l=i.stateNode=lv(i.type,i.pendingProps,Ae.current),xn=i,Li=!0,f=Ct,kr(i.type)?(km=f,Ct=ji(l.firstChild)):Ct=f),Cn(n,i,i.pendingProps.children,a),Zc(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&et&&((f=l=Ct)&&(l=$S(l,i.type,i.pendingProps,Li),l!==null?(i.stateNode=l,xn=i,Ct=ji(l.firstChild),Li=!1,f=!0):f=!1),f||br(i)),Ht(i),f=i.type,d=i.pendingProps,_=n!==null?n.memoizedProps:null,l=d.children,Im(f,d)?l=null:_!==null&&Im(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=Cd(n,i,lS,null,null,a),iu._currentValue=f),Zc(n,i),Cn(n,i,l,a),i.child;case 6:return n===null&&et&&((n=a=Ct)&&(a=QS(a,i.pendingProps,Li),a!==null?(i.stateNode=a,xn=i,Ct=null,n=!0):n=!1),n||br(i)),null;case 13:return Jy(n,i,a);case 4:return Dt(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=Va(i,null,l,a):Cn(n,i,l,a),i.child;case 11:return qy(n,i,i.type,i.pendingProps,a);case 7:return Cn(n,i,i.pendingProps,a),i.child;case 8:return Cn(n,i,i.pendingProps.children,a),i.child;case 12:return Cn(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Er(i,i.type,l.value),Cn(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Da(i),f=Rn(f),l=l(f),i.flags|=1,Cn(n,i,l,a),i.child;case 14:return Hy(n,i,i.type,i.pendingProps,a);case 15:return Fy(n,i,i.type,i.pendingProps,a);case 19:return Wy(n,i,a);case 31:return pS(n,i,a);case 22:return Gy(n,i,a,i.pendingProps);case 24:return Da(i),l=Rn(tn),n===null?(f=_d(),f===null&&(f=Tt,d=pd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},bd(i),Er(i,tn,f)):((n.lanes&a)!==0&&(Ed(n,i),Ll(i,null,null,a),Pl()),f=n.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Er(i,tn,l)):(l=d.cache,Er(i,tn,l),l!==f.cache&&gd(i,[tn],a,!0))),Cn(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Bs(n){n.flags|=4}function nm(n,i,a,l,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(R_())n.flags|=8192;else throw ka=Lc,vd}else n.flags&=-16777217}function t_(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!pv(i))if(R_())n.flags|=8192;else throw ka=Lc,vd}function eh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Wt():536870912,n.lanes|=i,Co|=i)}function Hl(n,i){if(!et)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function It(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function _S(n,i,a){var l=i.pendingProps;switch(cd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(i),null;case 1:return It(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Ls(tn),ut(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(go(i)?Bs(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,fd())),It(i),null;case 26:var f=i.type,d=i.memoizedState;return n===null?(Bs(i),d!==null?(It(i),t_(i,d)):(It(i),nm(i,f,null,l,a))):d?d!==n.memoizedState?(Bs(i),It(i),t_(i,d)):(It(i),i.flags&=-16777217):(n=n.memoizedProps,n!==l&&Bs(i),It(i),nm(i,f,n,l,a)),null;case 27:if(Si(i),a=Ae.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&Bs(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return It(i),null}n=de.current,go(i)?k0(i):(n=lv(f,l,a),i.stateNode=n,Bs(i))}return It(i),null;case 5:if(Si(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&Bs(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return It(i),null}if(d=de.current,go(i))k0(i);else{var _=gh(Ae.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[Pt]=i,d[Kt]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;e:switch(In(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Bs(i)}}return It(i),nm(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,a),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&Bs(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(n=Ae.current,go(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=xn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Pt]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||J_(n.nodeValue,a)),n||br(i,!0)}else n=gh(n).createTextNode(l),n[Pt]=i,i.stateNode=n}return It(i),null;case 31:if(a=i.memoizedState,n===null||n.memoizedState!==null){if(l=go(i),a!==null){if(n===null){if(!l)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Pt]=i}else Ia(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;It(i),n=!1}else a=fd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return i.flags&256?(pi(i),i):(pi(i),null);if((i.flags&128)!==0)throw Error(r(558))}return It(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=go(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Pt]=i}else Ia(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;It(i),f=!1}else f=fd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(pi(i),i):(pi(i),null)}return pi(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(i.child.flags|=8192),eh(i,i.updateQueue),It(i),null);case 4:return ut(),n===null&&Sm(i.stateNode.containerInfo),It(i),null;case 10:return Ls(i.type),It(i),null;case 19:if(se(Qt),l=i.memoizedState,l===null)return It(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)Hl(l,!1);else{if(Bt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(d=Bc(n),d!==null){for(i.flags|=128,Hl(l,!1),n=d.updateQueue,i.updateQueue=n,eh(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)I0(a,n),a=a.sibling;return me(Qt,Qt.current&1|2),et&&Vs(i,l.treeForkCount),i.child}n=n.sibling}l.tail!==null&&Zt()>rh&&(i.flags|=128,f=!0,Hl(l,!1),i.lanes=4194304)}else{if(!f)if(n=Bc(d),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,eh(i,n),Hl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!et)return It(i),null}else 2*Zt()-l.renderingStartTime>rh&&a!==536870912&&(i.flags|=128,f=!0,Hl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(n=l.last,n!==null?n.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=Zt(),n.sibling=null,a=Qt.current,me(Qt,f?a&1|2:a&1),et&&Vs(i,l.treeForkCount),n):(It(i),null);case 22:case 23:return pi(i),Ad(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(It(i),i.subtreeFlags&6&&(i.flags|=8192)):It(i),a=i.updateQueue,a!==null&&eh(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&se(Oa),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Ls(tn),It(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function vS(n,i){switch(cd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Ls(tn),ut(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Si(i),null;case 31:if(i.memoizedState!==null){if(pi(i),i.alternate===null)throw Error(r(340));Ia()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(pi(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Ia()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return se(Qt),null;case 4:return ut(),null;case 10:return Ls(i.type),null;case 22:case 23:return pi(i),Ad(),n!==null&&se(Oa),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Ls(tn),null;case 25:return null;default:return null}}function n_(n,i){switch(cd(i),i.tag){case 3:Ls(tn),ut();break;case 26:case 27:case 5:Si(i);break;case 4:ut();break;case 31:i.memoizedState!==null&&pi(i);break;case 13:pi(i);break;case 19:se(Qt);break;case 10:Ls(i.type);break;case 22:case 23:pi(i),Ad(),n!==null&&se(Oa);break;case 24:Ls(tn)}}function Fl(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(T){ft(i,i.return,T)}}function Rr(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var _=l.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,f=i;var O=a,K=T;try{K()}catch(re){ft(f,O,re)}}}l=l.next}while(l!==d)}}catch(re){ft(i,i.return,re)}}function i_(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{$0(i,a)}catch(l){ft(n,n.return,l)}}}function s_(n,i,a){a.props=La(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){ft(n,i,l)}}function Gl(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){ft(n,i,f)}}function _s(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){ft(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ft(n,i,f)}else a.current=null}function r_(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){ft(n,n.return,f)}}function im(n,i,a){try{var l=n.stateNode;BS(l,n.type,a,i),l[Kt]=i}catch(f){ft(n,n.return,f)}}function a_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&kr(n.type)||n.tag===4}function sm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||a_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&kr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rm(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Qi));else if(l!==4&&(l===27&&kr(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(rm(n,i,a),n=n.sibling;n!==null;)rm(n,i,a),n=n.sibling}function th(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&kr(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(th(n,i,a),n=n.sibling;n!==null;)th(n,i,a),n=n.sibling}function o_(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);In(i,l,a),i[Pt]=n,i[Kt]=a}catch(d){ft(n,n.return,d)}}var qs=!1,rn=!1,am=!1,l_=typeof WeakSet=="function"?WeakSet:Set,_n=null;function bS(n,i){if(n=n.containerInfo,Rm=Th,n=b0(n),Wf(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,T=-1,O=-1,K=0,re=0,le=n,Q=null;t:for(;;){for(var ee;le!==a||f!==0&&le.nodeType!==3||(T=_+f),le!==d||l!==0&&le.nodeType!==3||(O=_+l),le.nodeType===3&&(_+=le.nodeValue.length),(ee=le.firstChild)!==null;)Q=le,le=ee;for(;;){if(le===n)break t;if(Q===a&&++K===f&&(T=_),Q===d&&++re===l&&(O=_),(ee=le.nextSibling)!==null)break;le=Q,Q=le.parentNode}le=ee}a=T===-1||O===-1?null:{start:T,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Cm={focusedElem:n,selectionRange:a},Th=!1,_n=i;_n!==null;)if(i=_n,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,_n=n;else for(;_n!==null;){switch(i=_n,d=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Te=La(a.type,f);n=l.getSnapshotBeforeUpdate(Te,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(Ie){ft(a,a.return,Ie)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)Dm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Dm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,_n=n;break}_n=i.return}}function u_(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Fs(n,a),l&4&&Fl(5,a);break;case 1:if(Fs(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(_){ft(a,a.return,_)}else{var f=La(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(_){ft(a,a.return,_)}}l&64&&i_(a),l&512&&Gl(a,a.return);break;case 3:if(Fs(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{$0(n,i)}catch(_){ft(a,a.return,_)}}break;case 27:i===null&&l&4&&o_(a);case 26:case 5:Fs(n,a),i===null&&l&4&&r_(a),l&512&&Gl(a,a.return);break;case 12:Fs(n,a);break;case 31:Fs(n,a),l&4&&f_(n,a);break;case 13:Fs(n,a),l&4&&d_(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=IS.bind(null,a),YS(n,a))));break;case 22:if(l=a.memoizedState!==null||qs,!l){i=i!==null&&i.memoizedState!==null||rn,f=qs;var d=rn;qs=l,(rn=i)&&!d?Gs(n,a,(a.subtreeFlags&8772)!==0):Fs(n,a),qs=f,rn=d}break;case 30:break;default:Fs(n,a)}}function c_(n){var i=n.alternate;i!==null&&(n.alternate=null,c_(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&or(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var kt=null,ri=!1;function Hs(n,i,a){for(a=a.child;a!==null;)h_(n,i,a),a=a.sibling}function h_(n,i,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Kn,a)}catch{}switch(a.tag){case 26:rn||_s(a,i),Hs(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:rn||_s(a,i);var l=kt,f=ri;kr(a.type)&&(kt=a.stateNode,ri=!1),Hs(n,i,a),eu(a.stateNode),kt=l,ri=f;break;case 5:rn||_s(a,i);case 6:if(l=kt,f=ri,kt=null,Hs(n,i,a),kt=l,ri=f,kt!==null)if(ri)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(a.stateNode)}catch(d){ft(a,i,d)}else try{kt.removeChild(a.stateNode)}catch(d){ft(a,i,d)}break;case 18:kt!==null&&(ri?(n=kt,iv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Po(n)):iv(kt,a.stateNode));break;case 4:l=kt,f=ri,kt=a.stateNode.containerInfo,ri=!0,Hs(n,i,a),kt=l,ri=f;break;case 0:case 11:case 14:case 15:Rr(2,a,i),rn||Rr(4,a,i),Hs(n,i,a);break;case 1:rn||(_s(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&s_(a,i,l)),Hs(n,i,a);break;case 21:Hs(n,i,a);break;case 22:rn=(l=rn)||a.memoizedState!==null,Hs(n,i,a),rn=l;break;default:Hs(n,i,a)}}function f_(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Po(n)}catch(a){ft(i,i.return,a)}}}function d_(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Po(n)}catch(a){ft(i,i.return,a)}}function ES(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new l_),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new l_),i;default:throw Error(r(435,n.tag))}}function nh(n,i){var a=ES(n);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=NS.bind(null,n,l);l.then(f,f)}})}function ai(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,_=i,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(kr(T.type)){kt=T.stateNode,ri=!1;break e}break;case 5:kt=T.stateNode,ri=!1;break e;case 3:case 4:kt=T.stateNode.containerInfo,ri=!0;break e}T=T.return}if(kt===null)throw Error(r(160));h_(d,_,f),kt=null,ri=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)m_(i,n),i=i.sibling}var es=null;function m_(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:ai(i,n),oi(n),l&4&&(Rr(3,n,n.return),Fl(3,n),Rr(5,n,n.return));break;case 1:ai(i,n),oi(n),l&512&&(rn||a===null||_s(a,a.return)),l&64&&qs&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=es;if(ai(i,n),oi(n),l&512&&(rn||a===null||_s(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Ai]||d[Pt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),In(d,l,a),d[Pt]=n,jt(d),l=d;break e;case"link":var _=mv("link","href",f).get(l+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(d=_[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break t}}d=f.createElement(l),In(d,l,a),f.head.appendChild(d);break;case"meta":if(_=mv("meta","content",f).get(l+(a.content||""))){for(T=0;T<_.length;T++)if(d=_[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break t}}d=f.createElement(l),In(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[Pt]=n,jt(d),l=d}n.stateNode=l}else gv(f,n.type,n.stateNode);else n.stateNode=dv(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?gv(f,n.type,n.stateNode):dv(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&im(n,n.memoizedProps,a.memoizedProps)}break;case 27:ai(i,n),oi(n),l&512&&(rn||a===null||_s(a,a.return)),a!==null&&l&4&&im(n,n.memoizedProps,a.memoizedProps);break;case 5:if(ai(i,n),oi(n),l&512&&(rn||a===null||_s(a,a.return)),n.flags&32){f=n.stateNode;try{si(f,"")}catch(Te){ft(n,n.return,Te)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,im(n,f,a!==null?a.memoizedProps:f)),l&1024&&(am=!0);break;case 6:if(ai(i,n),oi(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(Te){ft(n,n.return,Te)}}break;case 3:if(_h=null,f=es,es=ph(i.containerInfo),ai(i,n),es=f,oi(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Po(i.containerInfo)}catch(Te){ft(n,n.return,Te)}am&&(am=!1,g_(n));break;case 4:l=es,es=ph(n.stateNode.containerInfo),ai(i,n),oi(n),es=l;break;case 12:ai(i,n),oi(n);break;case 31:ai(i,n),oi(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,nh(n,l)));break;case 13:ai(i,n),oi(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(sh=Zt()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,nh(n,l)));break;case 22:f=n.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,K=qs,re=rn;if(qs=K||f,rn=re||O,ai(i,n),rn=re,qs=K,oi(n),l&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||O||qs||rn||Ua(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){O=a=i;try{if(d=O.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=O.stateNode;var le=O.memoizedProps.style,Q=le!=null&&le.hasOwnProperty("display")?le.display:null;T.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Te){ft(O,O.return,Te)}}}else if(i.tag===6){if(a===null){O=i;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(Te){ft(O,O.return,Te)}}}else if(i.tag===18){if(a===null){O=i;try{var ee=O.stateNode;f?sv(ee,!0):sv(O.stateNode,!1)}catch(Te){ft(O,O.return,Te)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,nh(n,a))));break;case 19:ai(i,n),oi(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,nh(n,l)));break;case 30:break;case 21:break;default:ai(i,n),oi(n)}}function oi(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(a_(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=sm(n);th(n,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(si(_,""),a.flags&=-33);var T=sm(n);th(n,T,_);break;case 3:case 4:var O=a.stateNode.containerInfo,K=sm(n);rm(n,K,O);break;default:throw Error(r(161))}}catch(re){ft(n,n.return,re)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function g_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;g_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Fs(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)u_(n,i.alternate,i),i=i.sibling}function Ua(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Rr(4,i,i.return),Ua(i);break;case 1:_s(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&s_(i,i.return,a),Ua(i);break;case 27:eu(i.stateNode);case 26:case 5:_s(i,i.return),Ua(i);break;case 22:i.memoizedState===null&&Ua(i);break;case 30:Ua(i);break;default:Ua(i)}n=n.sibling}}function Gs(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:Gs(f,d,a),Fl(4,d);break;case 1:if(Gs(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(K){ft(l,l.return,K)}if(l=d,f=l.updateQueue,f!==null){var T=l.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)K0(O[f],T)}catch(K){ft(l,l.return,K)}}a&&_&64&&i_(d),Gl(d,d.return);break;case 27:o_(d);case 26:case 5:Gs(f,d,a),a&&l===null&&_&4&&r_(d),Gl(d,d.return);break;case 12:Gs(f,d,a);break;case 31:Gs(f,d,a),a&&_&4&&f_(f,d);break;case 13:Gs(f,d,a),a&&_&4&&d_(f,d);break;case 22:d.memoizedState===null&&Gs(f,d,a),Gl(d,d.return);break;case 30:break;default:Gs(f,d,a)}i=i.sibling}}function om(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Dl(a))}function lm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Dl(n))}function ts(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)p_(n,i,a,l),i=i.sibling}function p_(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:ts(n,i,a,l),f&2048&&Fl(9,i);break;case 1:ts(n,i,a,l);break;case 3:ts(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Dl(n)));break;case 12:if(f&2048){ts(n,i,a,l),n=i.stateNode;try{var d=i.memoizedProps,_=d.id,T=d.onPostCommit;typeof T=="function"&&T(_,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){ft(i,i.return,O)}}else ts(n,i,a,l);break;case 31:ts(n,i,a,l);break;case 13:ts(n,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?ts(n,i,a,l):Kl(n,i):d._visibility&2?ts(n,i,a,l):(d._visibility|=2,Ao(n,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&om(_,i);break;case 24:ts(n,i,a,l),f&2048&&lm(i.alternate,i);break;default:ts(n,i,a,l)}}function Ao(n,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=n,_=i,T=a,O=l,K=_.flags;switch(_.tag){case 0:case 11:case 15:Ao(d,_,T,O,f),Fl(8,_);break;case 23:break;case 22:var re=_.stateNode;_.memoizedState!==null?re._visibility&2?Ao(d,_,T,O,f):Kl(d,_):(re._visibility|=2,Ao(d,_,T,O,f)),f&&K&2048&&om(_.alternate,_);break;case 24:Ao(d,_,T,O,f),f&&K&2048&&lm(_.alternate,_);break;default:Ao(d,_,T,O,f)}i=i.sibling}}function Kl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:Kl(a,l),f&2048&&om(l.alternate,l);break;case 24:Kl(a,l),f&2048&&lm(l.alternate,l);break;default:Kl(a,l)}i=i.sibling}}var $l=8192;function xo(n,i,a){if(n.subtreeFlags&$l)for(n=n.child;n!==null;)y_(n,i,a),n=n.sibling}function y_(n,i,a){switch(n.tag){case 26:xo(n,i,a),n.flags&$l&&n.memoizedState!==null&&oA(a,es,n.memoizedState,n.memoizedProps);break;case 5:xo(n,i,a);break;case 3:case 4:var l=es;es=ph(n.stateNode.containerInfo),xo(n,i,a),es=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=$l,$l=16777216,xo(n,i,a),$l=l):xo(n,i,a));break;default:xo(n,i,a)}}function __(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Ql(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];_n=l,b_(l,n)}__(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)v_(n),n=n.sibling}function v_(n){switch(n.tag){case 0:case 11:case 15:Ql(n),n.flags&2048&&Rr(9,n,n.return);break;case 3:Ql(n);break;case 12:Ql(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,ih(n)):Ql(n);break;default:Ql(n)}}function ih(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];_n=l,b_(l,n)}__(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Rr(8,i,i.return),ih(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,ih(i));break;default:ih(i)}n=n.sibling}}function b_(n,i){for(;_n!==null;){var a=_n;switch(a.tag){case 0:case 11:case 15:Rr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Dl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,_n=l;else e:for(a=n;_n!==null;){l=_n;var f=l.sibling,d=l.return;if(c_(l),l===a){_n=null;break e}if(f!==null){f.return=d,_n=f;break e}_n=d}}}var TS={getCacheForType:function(n){var i=Rn(tn),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a},cacheSignal:function(){return Rn(tn).controller.signal}},wS=typeof WeakMap=="function"?WeakMap:Map,lt=0,Tt=null,Ge=null,Qe=0,ht=0,yi=null,Cr=!1,Ro=!1,um=!1,Ks=0,Bt=0,Ir=0,ja=0,cm=0,_i=0,Co=0,Yl=null,li=null,hm=!1,sh=0,E_=0,rh=1/0,ah=null,Nr=null,fn=0,Dr=null,Io=null,$s=0,fm=0,dm=null,T_=null,Xl=0,mm=null;function vi(){return(lt&2)!==0&&Qe!==0?Qe&-Qe:te.T!==null?bm():Ot()}function w_(){if(_i===0)if((Qe&536870912)===0||et){var n=$i;$i<<=1,($i&3932160)===0&&($i=262144),_i=n}else _i=536870912;return n=gi.current,n!==null&&(n.flags|=32),_i}function ui(n,i,a){(n===Tt&&(ht===2||ht===9)||n.cancelPendingCommit!==null)&&(No(n,0),Or(n,Qe,_i,!1)),Y(n,a),((lt&2)===0||n!==Tt)&&(n===Tt&&((lt&2)===0&&(ja|=a),Bt===4&&Or(n,Qe,_i,!1)),vs(n))}function S_(n,i,a){if((lt&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&n.expiredLanes)===0||Ut(n,i),f=l?xS(n,i):pm(n,i,!0),d=l;do{if(f===0){Ro&&!l&&Or(n,i,0,!1);break}else{if(a=n.current.alternate,d&&!SS(a)){f=pm(n,i,!1),d=!1;continue}if(f===2){if(d=i,n.errorRecoveryDisabledLanes&d)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var T=n;f=Yl;var O=T.current.memoizedState.isDehydrated;if(O&&(No(T,_).flags|=256),_=pm(T,_,!1),_!==2){if(um&&!O){T.errorRecoveryDisabledLanes|=d,ja|=d,f=4;break e}d=li,li=f,d!==null&&(li===null?li=d:li.push.apply(li,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){No(n,0),Or(n,i,0,!0);break}e:{switch(l=n,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Or(l,i,_i,!Cr);break e;case 2:li=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=sh+300-Zt(),10<f)){if(Or(l,i,_i,!Cr),Rt(l,0,!0)!==0)break e;$s=i,l.timeoutHandle=tv(A_.bind(null,l,a,li,ah,hm,i,_i,ja,Co,Cr,d,"Throttled",-0,0),f);break e}A_(l,a,li,ah,hm,i,_i,ja,Co,Cr,d,null,-0,0)}}break}while(!0);vs(n)}function A_(n,i,a,l,f,d,_,T,O,K,re,le,Q,ee){if(n.timeoutHandle=-1,le=i.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qi},y_(i,d,le);var Te=(d&62914560)===d?sh-Zt():(d&4194048)===d?E_-Zt():0;if(Te=lA(le,Te),Te!==null){$s=d,n.cancelPendingCommit=Te(M_.bind(null,n,i,d,a,l,f,_,T,O,re,le,null,Q,ee)),Or(n,d,_,!K);return}}M_(n,i,d,a,l,f,_,T,O)}function SS(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!di(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Or(n,i,a,l){i&=~cm,i&=~ja,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var d=31-At(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&gt(n,a,i)}function oh(){return(lt&6)===0?(Jl(0),!1):!0}function gm(){if(Ge!==null){if(ht===0)var n=Ge.return;else n=Ge,Ps=Na=null,Dd(n),bo=null,Ml=0,n=Ge;for(;n!==null;)n_(n.alternate,n),n=n.return;Ge=null}}function No(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,FS(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),$s=0,gm(),Tt=n,Ge=a=ks(n.current,null),Qe=i,ht=0,yi=null,Cr=!1,Ro=Ut(n,i),um=!1,Co=_i=cm=ja=Ir=Bt=0,li=Yl=null,hm=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-At(l),d=1<<f;i|=n[f],l&=~d}return Ks=i,Cc(),a}function x_(n,i){je=null,te.H=Bl,i===vo||i===Pc?(i=q0(),ht=3):i===vd?(i=q0(),ht=4):ht=i===$d?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,yi=i,Ge===null&&(Bt=1,Xc(n,ki(i,n.current)))}function R_(){var n=gi.current;return n===null?!0:(Qe&4194048)===Qe?Ui===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?n===Ui:!1}function C_(){var n=te.H;return te.H=Bl,n===null?Bl:n}function I_(){var n=te.A;return te.A=TS,n}function lh(){Bt=4,Cr||(Qe&4194048)!==Qe&&gi.current!==null||(Ro=!0),(Ir&134217727)===0&&(ja&134217727)===0||Tt===null||Or(Tt,Qe,_i,!1)}function pm(n,i,a){var l=lt;lt|=2;var f=C_(),d=I_();(Tt!==n||Qe!==i)&&(ah=null,No(n,i)),i=!1;var _=Bt;e:do try{if(ht!==0&&Ge!==null){var T=Ge,O=yi;switch(ht){case 8:gm(),_=6;break e;case 3:case 2:case 9:case 6:gi.current===null&&(i=!0);var K=ht;if(ht=0,yi=null,Do(n,T,O,K),a&&Ro){_=0;break e}break;default:K=ht,ht=0,yi=null,Do(n,T,O,K)}}AS(),_=Bt;break}catch(re){x_(n,re)}while(!0);return i&&n.shellSuspendCounter++,Ps=Na=null,lt=l,te.H=f,te.A=d,Ge===null&&(Tt=null,Qe=0,Cc()),_}function AS(){for(;Ge!==null;)N_(Ge)}function xS(n,i){var a=lt;lt|=2;var l=C_(),f=I_();Tt!==n||Qe!==i?(ah=null,rh=Zt()+500,No(n,i)):Ro=Ut(n,i);e:do try{if(ht!==0&&Ge!==null){i=Ge;var d=yi;t:switch(ht){case 1:ht=0,yi=null,Do(n,i,d,1);break;case 2:case 9:if(z0(d)){ht=0,yi=null,D_(i);break}i=function(){ht!==2&&ht!==9||Tt!==n||(ht=7),vs(n)},d.then(i,i);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:z0(d)?(ht=0,yi=null,D_(i)):(ht=0,yi=null,Do(n,i,d,7));break;case 5:var _=null;switch(Ge.tag){case 26:_=Ge.memoizedState;case 5:case 27:var T=Ge;if(_?pv(_):T.stateNode.complete){ht=0,yi=null;var O=T.sibling;if(O!==null)Ge=O;else{var K=T.return;K!==null?(Ge=K,uh(K)):Ge=null}break t}}ht=0,yi=null,Do(n,i,d,5);break;case 6:ht=0,yi=null,Do(n,i,d,6);break;case 8:gm(),Bt=6;break e;default:throw Error(r(462))}}RS();break}catch(re){x_(n,re)}while(!0);return Ps=Na=null,te.H=l,te.A=f,lt=a,Ge!==null?0:(Tt=null,Qe=0,Cc(),Bt)}function RS(){for(;Ge!==null&&!os();)N_(Ge)}function N_(n){var i=e_(n.alternate,n,Ks);n.memoizedProps=n.pendingProps,i===null?uh(n):Ge=i}function D_(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=Qy(a,i,i.pendingProps,i.type,void 0,Qe);break;case 11:i=Qy(a,i,i.pendingProps,i.type.render,i.ref,Qe);break;case 5:Dd(i);default:n_(a,i),i=Ge=I0(i,Ks),i=e_(a,i,Ks)}n.memoizedProps=n.pendingProps,i===null?uh(n):Ge=i}function Do(n,i,a,l){Ps=Na=null,Dd(i),bo=null,Ml=0;var f=i.return;try{if(gS(n,f,i,a,Qe)){Bt=1,Xc(n,ki(a,n.current)),Ge=null;return}}catch(d){if(f!==null)throw Ge=f,d;Bt=1,Xc(n,ki(a,n.current)),Ge=null;return}i.flags&32768?(et||l===1?n=!0:Ro||(Qe&536870912)!==0?n=!1:(Cr=n=!0,(l===2||l===9||l===3||l===6)&&(l=gi.current,l!==null&&l.tag===13&&(l.flags|=16384))),O_(i,n)):uh(i)}function uh(n){var i=n;do{if((i.flags&32768)!==0){O_(i,Cr);return}n=i.return;var a=_S(i.alternate,i,Ks);if(a!==null){Ge=a;return}if(i=i.sibling,i!==null){Ge=i;return}Ge=i=n}while(i!==null);Bt===0&&(Bt=5)}function O_(n,i){do{var a=vS(n.alternate,n);if(a!==null){a.flags&=32767,Ge=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Ge=n;return}Ge=n=a}while(n!==null);Bt=6,Ge=null}function M_(n,i,a,l,f,d,_,T,O){n.cancelPendingCommit=null;do ch();while(fn!==0);if((lt&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=sd,mt(n,a,d,_,T,O),n===Tt&&(Ge=Tt=null,Qe=0),Io=i,Dr=n,$s=a,fm=d,dm=f,T_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,DS(Sn,function(){return U_(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=te.T,te.T=null,f=he.p,he.p=2,_=lt,lt|=4;try{bS(n,i,a)}finally{lt=_,he.p=f,te.T=l}}fn=1,k_(),V_(),P_()}}function k_(){if(fn===1){fn=0;var n=Dr,i=Io,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=te.T,te.T=null;var l=he.p;he.p=2;var f=lt;lt|=4;try{m_(i,n);var d=Cm,_=b0(n.containerInfo),T=d.focusedElem,O=d.selectionRange;if(_!==T&&T&&T.ownerDocument&&v0(T.ownerDocument.documentElement,T)){if(O!==null&&Wf(T)){var K=O.start,re=O.end;if(re===void 0&&(re=K),"selectionStart"in T)T.selectionStart=K,T.selectionEnd=Math.min(re,T.value.length);else{var le=T.ownerDocument||document,Q=le&&le.defaultView||window;if(Q.getSelection){var ee=Q.getSelection(),Te=T.textContent.length,Ie=Math.min(O.start,Te),bt=O.end===void 0?Ie:Math.min(O.end,Te);!ee.extend&&Ie>bt&&(_=bt,bt=Ie,Ie=_);var z=_0(T,Ie),L=_0(T,bt);if(z&&L&&(ee.rangeCount!==1||ee.anchorNode!==z.node||ee.anchorOffset!==z.offset||ee.focusNode!==L.node||ee.focusOffset!==L.offset)){var G=le.createRange();G.setStart(z.node,z.offset),ee.removeAllRanges(),Ie>bt?(ee.addRange(G),ee.extend(L.node,L.offset)):(G.setEnd(L.node,L.offset),ee.addRange(G))}}}}for(le=[],ee=T;ee=ee.parentNode;)ee.nodeType===1&&le.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<le.length;T++){var ae=le[T];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Th=!!Rm,Cm=Rm=null}finally{lt=f,he.p=l,te.T=a}}n.current=i,fn=2}}function V_(){if(fn===2){fn=0;var n=Dr,i=Io,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=te.T,te.T=null;var l=he.p;he.p=2;var f=lt;lt|=4;try{u_(n,i.alternate,i)}finally{lt=f,he.p=l,te.T=a}}fn=3}}function P_(){if(fn===4||fn===3){fn=0,ls();var n=Dr,i=Io,a=$s,l=T_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?fn=5:(fn=0,Io=Dr=null,L_(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Nr=null),tt(a),i=i.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Kn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=te.T,f=he.p,he.p=2,te.T=null;try{for(var d=n.onRecoverableError,_=0;_<l.length;_++){var T=l[_];d(T.value,{componentStack:T.stack})}}finally{te.T=i,he.p=f}}($s&3)!==0&&ch(),vs(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===mm?Xl++:(Xl=0,mm=n):Xl=0,Jl(0)}}function L_(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Dl(i)))}function ch(){return k_(),V_(),P_(),U_()}function U_(){if(fn!==5)return!1;var n=Dr,i=fm;fm=0;var a=tt($s),l=te.T,f=he.p;try{he.p=32>a?32:a,te.T=null,a=dm,dm=null;var d=Dr,_=$s;if(fn=0,Io=Dr=null,$s=0,(lt&6)!==0)throw Error(r(331));var T=lt;if(lt|=4,v_(d.current),p_(d,d.current,_,a),lt=T,Jl(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Kn,d)}catch{}return!0}finally{he.p=f,te.T=l,L_(n,i)}}function j_(n,i,a){i=ki(a,i),i=Kd(n.stateNode,i,2),n=Sr(n,i,2),n!==null&&(Y(n,2),vs(n))}function ft(n,i,a){if(n.tag===3)j_(n,n,a);else for(;i!==null;){if(i.tag===3){j_(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Nr===null||!Nr.has(l))){n=ki(a,n),a=zy(2),l=Sr(i,a,2),l!==null&&(By(a,l,i,n),Y(l,2),vs(l));break}}i=i.return}}function ym(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new wS;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(um=!0,f.add(a),n=CS.bind(null,n,i,a),i.then(n,n))}function CS(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,Tt===n&&(Qe&a)===a&&(Bt===4||Bt===3&&(Qe&62914560)===Qe&&300>Zt()-sh?(lt&2)===0&&No(n,0):cm|=a,Co===Qe&&(Co=0)),vs(n)}function z_(n,i){i===0&&(i=Wt()),n=Ra(n,i),n!==null&&(Y(n,i),vs(n))}function IS(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),z_(n,a)}function NS(n,i){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),z_(n,a)}function DS(n,i){return ct(n,i)}var hh=null,Oo=null,_m=!1,fh=!1,vm=!1,Mr=0;function vs(n){n!==Oo&&n.next===null&&(Oo===null?hh=Oo=n:Oo=Oo.next=n),fh=!0,_m||(_m=!0,MS())}function Jl(n,i){if(!vm&&fh){vm=!0;do for(var a=!1,l=hh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-At(42|n)+1)-1,d&=f&~(_&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,F_(l,d))}else d=Qe,d=Rt(l,l===Tt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Ut(l,d)||(a=!0,F_(l,d));l=l.next}while(a);vm=!1}}function OS(){B_()}function B_(){fh=_m=!1;var n=0;Mr!==0&&HS()&&(n=Mr);for(var i=Zt(),a=null,l=hh;l!==null;){var f=l.next,d=q_(l,i);d===0?(l.next=null,a===null?hh=f:a.next=f,f===null&&(Oo=a)):(a=l,(n!==0||(d&3)!==0)&&(fh=!0)),l=f}fn!==0&&fn!==5||Jl(n),Mr!==0&&(Mr=0)}function q_(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var _=31-At(d),T=1<<_,O=f[_];O===-1?((T&a)===0||(T&l)!==0)&&(f[_]=yn(T,i)):O<=i&&(n.expiredLanes|=T),d&=~T}if(i=Tt,a=Qe,a=Rt(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&(ht===2||ht===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Hn(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Ut(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&Hn(l),tt(a)){case 2:case 8:a=Fn;break;case 32:a=Sn;break;case 268435456:a=Cs;break;default:a=Sn}return l=H_.bind(null,n),a=ct(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&Hn(l),n.callbackPriority=2,n.callbackNode=null,2}function H_(n,i){if(fn!==0&&fn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(ch()&&n.callbackNode!==a)return null;var l=Qe;return l=Rt(n,n===Tt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(S_(n,l,i),q_(n,Zt()),n.callbackNode!=null&&n.callbackNode===a?H_.bind(null,n):null)}function F_(n,i){if(ch())return null;S_(n,i,!0)}function MS(){GS(function(){(lt&6)!==0?ct(Rs,OS):B_()})}function bm(){if(Mr===0){var n=yo;n===0&&(n=ti,ti<<=1,(ti&261888)===0&&(ti=256)),Mr=n}return Mr}function G_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:to(""+n)}function K_(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function kS(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=G_((f[Kt]||null).action),_=l.submitter;_&&(i=(i=_[Kt]||null)?G_(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var T=new fs("action","action",null,l,f);n.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Mr!==0){var O=_?K_(f,_):new FormData(f);zd(a,{pending:!0,data:O,method:f.method,action:d},null,O)}}else typeof d=="function"&&(T.preventDefault(),O=_?K_(f,_):new FormData(f),zd(a,{pending:!0,data:O,method:f.method,action:d},d,O))},currentTarget:f}]})}}for(var Em=0;Em<id.length;Em++){var Tm=id[Em],VS=Tm.toLowerCase(),PS=Tm[0].toUpperCase()+Tm.slice(1);Wi(VS,"on"+PS)}Wi(w0,"onAnimationEnd"),Wi(S0,"onAnimationIteration"),Wi(A0,"onAnimationStart"),Wi("dblclick","onDoubleClick"),Wi("focusin","onFocus"),Wi("focusout","onBlur"),Wi(Zw,"onTransitionRun"),Wi(Ww,"onTransitionStart"),Wi(eS,"onTransitionCancel"),Wi(x0,"onTransitionEnd"),Ci("onMouseEnter",["mouseout","mouseover"]),Ci("onMouseLeave",["mouseout","mouseover"]),Ci("onPointerEnter",["pointerout","pointerover"]),Ci("onPointerLeave",["pointerout","pointerover"]),ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zl));function $_(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var T=l[_],O=T.instance,K=T.currentTarget;if(T=T.listener,O!==d&&f.isPropagationStopped())break e;d=T,f.currentTarget=K;try{d(f)}catch(re){Rc(re)}f.currentTarget=null,d=O}else for(_=0;_<l.length;_++){if(T=l[_],O=T.instance,K=T.currentTarget,T=T.listener,O!==d&&f.isPropagationStopped())break e;d=T,f.currentTarget=K;try{d(f)}catch(re){Rc(re)}f.currentTarget=null,d=O}}}}function Ke(n,i){var a=i[ar];a===void 0&&(a=i[ar]=new Set);var l=n+"__bubble";a.has(l)||(Q_(i,n,2,!1),a.add(l))}function wm(n,i,a){var l=0;i&&(l|=4),Q_(a,n,l,i)}var dh="_reactListening"+Math.random().toString(36).slice(2);function Sm(n){if(!n[dh]){n[dh]=!0,ma.forEach(function(a){a!=="selectionchange"&&(LS.has(a)||wm(a,!1,n),wm(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[dh]||(i[dh]=!0,wm("selectionchange",!1,i))}}function Q_(n,i,a,l){switch(wv(i)){case 2:var f=hA;break;case 8:f=fA;break;default:f=jm}a=f.bind(null,i,a,n),f=void 0,!va||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Am(n,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var T=l.stateNode.containerInfo;if(T===f)break;if(_===4)for(_=l.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;T!==null;){if(_=xi(T),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){l=d=_;continue e}T=T.parentNode}}l=l.return}mr(function(){var K=d,re=Ni(a),le=[];e:{var Q=R0.get(n);if(Q!==void 0){var ee=fs,Te=n;switch(n){case"keypress":if(Ea(a)===0)break e;case"keydown":case"keyup":ee=Sc;break;case"focusin":Te="focus",ee=wa;break;case"focusout":Te="blur",ee=wa;break;case"beforeblur":case"afterblur":ee=wa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=wl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=gc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=y;break;case w0:case S0:case A0:ee=yc;break;case x0:ee=A;break;case"scroll":case"scrollend":ee=Tl;break;case"wheel":ee=J;break;case"copy":case"cut":case"paste":ee=_c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Ms;break;case"toggle":case"beforetoggle":ee=Ue}var Ie=(i&4)!==0,bt=!Ie&&(n==="scroll"||n==="scrollend"),z=Ie?Q!==null?Q+"Capture":null:Q;Ie=[];for(var L=K,G;L!==null;){var ae=L;if(G=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||G===null||z===null||(ae=Yi(L,z),ae!=null&&Ie.push(Wl(L,ae,G))),bt)break;L=L.return}0<Ie.length&&(Q=new ee(Q,Te,null,a,re),le.push({event:Q,listeners:Ie}))}}if((i&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",ee=n==="mouseout"||n==="pointerout",Q&&a!==vl&&(Te=a.relatedTarget||a.fromElement)&&(xi(Te)||Te[Ee]))break e;if((ee||Q)&&(Q=re.window===re?re:(Q=re.ownerDocument)?Q.defaultView||Q.parentWindow:window,ee?(Te=a.relatedTarget||a.toElement,ee=K,Te=Te?xi(Te):null,Te!==null&&(bt=u(Te),Ie=Te.tag,Te!==bt||Ie!==5&&Ie!==27&&Ie!==6)&&(Te=null)):(ee=null,Te=K),ee!==Te)){if(Ie=wl,ae="onMouseLeave",z="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(Ie=Ms,ae="onPointerLeave",z="onPointerEnter",L="pointer"),bt=ee==null?Q:Ln(ee),G=Te==null?Q:Ln(Te),Q=new Ie(ae,L+"leave",ee,a,re),Q.target=bt,Q.relatedTarget=G,ae=null,xi(re)===K&&(Ie=new Ie(z,L+"enter",Te,a,re),Ie.target=G,Ie.relatedTarget=bt,ae=Ie),bt=ae,ee&&Te)t:{for(Ie=US,z=ee,L=Te,G=0,ae=z;ae;ae=Ie(ae))G++;ae=0;for(var Re=L;Re;Re=Ie(Re))ae++;for(;0<G-ae;)z=Ie(z),G--;for(;0<ae-G;)L=Ie(L),ae--;for(;G--;){if(z===L||L!==null&&z===L.alternate){Ie=z;break t}z=Ie(z),L=Ie(L)}Ie=null}else Ie=null;ee!==null&&Y_(le,Q,ee,Ie,!1),Te!==null&&bt!==null&&Y_(le,bt,Te,Ie,!0)}}e:{if(Q=K?Ln(K):window,ee=Q.nodeName&&Q.nodeName.toLowerCase(),ee==="select"||ee==="input"&&Q.type==="file")var st=f0;else if(c0(Q))if(d0)st=Yw;else{st=$w;var we=Kw}else ee=Q.nodeName,!ee||ee.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?K&&eo(K.elementType)&&(st=f0):st=Qw;if(st&&(st=st(n,K))){h0(le,st,a,re);break e}we&&we(n,Q,K),n==="focusout"&&K&&Q.type==="number"&&K.memoizedProps.value!=null&&pl(Q,"number",Q.value)}switch(we=K?Ln(K):window,n){case"focusin":(c0(we)||we.contentEditable==="true")&&(lo=we,ed=K,Cl=null);break;case"focusout":Cl=ed=lo=null;break;case"mousedown":td=!0;break;case"contextmenu":case"mouseup":case"dragend":td=!1,E0(le,a,re);break;case"selectionchange":if(Jw)break;case"keydown":case"keyup":E0(le,a,re)}var Be;if(ot)e:{switch(n){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else oo?Sa(n,a)&&(Ye="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ye="onCompositionStart");Ye&&(gs&&a.locale!=="ko"&&(oo||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&oo&&(Be=El()):(hs=re,bl="value"in hs?hs.value:hs.textContent,oo=!0)),we=mh(K,Ye),0<we.length&&(Ye=new ms(Ye,n,null,a,re),le.push({event:Ye,listeners:we}),Be?Ye.data=Be:(Be=ao(a),Be!==null&&(Ye.data=Be)))),(Be=Oi?qw(n,a):Hw(n,a))&&(Ye=mh(K,"onBeforeInput"),0<Ye.length&&(we=new ms("onBeforeInput","beforeinput",null,a,re),le.push({event:we,listeners:Ye}),we.data=Be)),kS(le,n,K,a,re)}$_(le,i)})}function Wl(n,i,a){return{instance:n,listener:i,currentTarget:a}}function mh(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Yi(n,a),f!=null&&l.unshift(Wl(n,f,d)),f=Yi(n,i),f!=null&&l.push(Wl(n,f,d))),n.tag===3)return l;n=n.return}return[]}function US(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Y_(n,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var T=a,O=T.alternate,K=T.stateNode;if(T=T.tag,O!==null&&O===l)break;T!==5&&T!==26&&T!==27||K===null||(O=K,f?(K=Yi(a,d),K!=null&&_.unshift(Wl(a,K,O))):f||(K=Yi(a,d),K!=null&&_.push(Wl(a,K,O)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var jS=/\r\n?/g,zS=/\u0000|\uFFFD/g;function X_(n){return(typeof n=="string"?n:""+n).replace(jS,`
`).replace(zS,"")}function J_(n,i){return i=X_(i),X_(n)===i}function vt(n,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||si(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&si(n,""+l);break;case"className":X(n,"class",l);break;case"tabIndex":X(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":X(n,a,l);break;case"style":_l(n,l,d);break;case"data":if(i!=="object"){X(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=to(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&vt(n,i,"name",f.name,f,null),vt(n,i,"formEncType",f.formEncType,f,null),vt(n,i,"formMethod",f.formMethod,f,null),vt(n,i,"formTarget",f.formTarget,f,null)):(vt(n,i,"encType",f.encType,f,null),vt(n,i,"method",f.method,f,null),vt(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=to(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Qi);break;case"onScroll":l!=null&&Ke("scroll",n);break;case"onScrollEnd":l!=null&&Ke("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=to(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Ke("beforetoggle",n),Ke("toggle",n),B(n,"popover",l);break;case"xlinkActuate":$(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":$(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":$(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":$(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":$(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":$(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":$(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":$(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":$(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":B(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=mc.get(a)||a,B(n,a,l))}}function xm(n,i,a,l,f,d){switch(a){case"style":_l(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?si(n,l):(typeof l=="number"||typeof l=="bigint")&&si(n,""+l);break;case"onScroll":l!=null&&Ke("scroll",n);break;case"onScrollEnd":l!=null&&Ke("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Qi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=n[Kt]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):B(n,a,l)}}}function In(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",n),Ke("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:vt(n,i,d,_,a,null)}}f&&vt(n,i,"srcSet",a.srcSet,a,null),l&&vt(n,i,"src",a.src,a,null);return;case"input":Ke("invalid",n);var T=d=_=f=null,O=null,K=null;for(l in a)if(a.hasOwnProperty(l)){var re=a[l];if(re!=null)switch(l){case"name":f=re;break;case"type":_=re;break;case"checked":O=re;break;case"defaultChecked":K=re;break;case"value":d=re;break;case"defaultValue":T=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,i));break;default:vt(n,i,l,re,a,null)}}hc(n,d,T,O,K,_,f,!1);return;case"select":Ke("invalid",n),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(T=a[f],T!=null))switch(f){case"value":d=T;break;case"defaultValue":_=T;break;case"multiple":l=T;default:vt(n,i,f,T,a,null)}i=d,a=_,n.multiple=!!l,i!=null?cr(n,!!l,i,!1):a!=null&&cr(n,!!l,a,!0);return;case"textarea":Ke("invalid",n),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":l=T;break;case"defaultValue":f=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:vt(n,i,_,T,a,null)}hr(n,l,f,d);return;case"option":for(O in a)a.hasOwnProperty(O)&&(l=a[O],l!=null)&&(O==="selected"?n.selected=l&&typeof l!="function"&&typeof l!="symbol":vt(n,i,O,l,a,null));return;case"dialog":Ke("beforetoggle",n),Ke("toggle",n),Ke("cancel",n),Ke("close",n);break;case"iframe":case"object":Ke("load",n);break;case"video":case"audio":for(l=0;l<Zl.length;l++)Ke(Zl[l],n);break;case"image":Ke("error",n),Ke("load",n);break;case"details":Ke("toggle",n);break;case"embed":case"source":case"link":Ke("error",n),Ke("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(l=a[K],l!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:vt(n,i,K,l,a,null)}return;default:if(eo(i)){for(re in a)a.hasOwnProperty(re)&&(l=a[re],l!==void 0&&xm(n,i,re,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&vt(n,i,T,l,a,null))}function BS(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,T=null,O=null,K=null,re=null;for(ee in a){var le=a[ee];if(a.hasOwnProperty(ee)&&le!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":O=le;default:l.hasOwnProperty(ee)||vt(n,i,ee,null,l,le)}}for(var Q in l){var ee=l[Q];if(le=a[Q],l.hasOwnProperty(Q)&&(ee!=null||le!=null))switch(Q){case"type":d=ee;break;case"name":f=ee;break;case"checked":K=ee;break;case"defaultChecked":re=ee;break;case"value":_=ee;break;case"defaultValue":T=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,i));break;default:ee!==le&&vt(n,i,Q,ee,l,le)}}Wa(n,_,T,O,K,re,d,f);return;case"select":ee=_=T=Q=null;for(d in a)if(O=a[d],a.hasOwnProperty(d)&&O!=null)switch(d){case"value":break;case"multiple":ee=O;default:l.hasOwnProperty(d)||vt(n,i,d,null,l,O)}for(f in l)if(d=l[f],O=a[f],l.hasOwnProperty(f)&&(d!=null||O!=null))switch(f){case"value":Q=d;break;case"defaultValue":T=d;break;case"multiple":_=d;default:d!==O&&vt(n,i,f,d,l,O)}i=T,a=_,l=ee,Q!=null?cr(n,!!a,Q,!1):!!l!=!!a&&(i!=null?cr(n,!!a,i,!0):cr(n,!!a,a?[]:"",!1));return;case"textarea":ee=Q=null;for(T in a)if(f=a[T],a.hasOwnProperty(T)&&f!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:vt(n,i,T,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":Q=f;break;case"defaultValue":ee=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&vt(n,i,_,f,l,d)}fc(n,Q,ee);return;case"option":for(var Te in a)Q=a[Te],a.hasOwnProperty(Te)&&Q!=null&&!l.hasOwnProperty(Te)&&(Te==="selected"?n.selected=!1:vt(n,i,Te,null,l,Q));for(O in l)Q=l[O],ee=a[O],l.hasOwnProperty(O)&&Q!==ee&&(Q!=null||ee!=null)&&(O==="selected"?n.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":vt(n,i,O,Q,l,ee));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in a)Q=a[Ie],a.hasOwnProperty(Ie)&&Q!=null&&!l.hasOwnProperty(Ie)&&vt(n,i,Ie,null,l,Q);for(K in l)if(Q=l[K],ee=a[K],l.hasOwnProperty(K)&&Q!==ee&&(Q!=null||ee!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,i));break;default:vt(n,i,K,Q,l,ee)}return;default:if(eo(i)){for(var bt in a)Q=a[bt],a.hasOwnProperty(bt)&&Q!==void 0&&!l.hasOwnProperty(bt)&&xm(n,i,bt,void 0,l,Q);for(re in l)Q=l[re],ee=a[re],!l.hasOwnProperty(re)||Q===ee||Q===void 0&&ee===void 0||xm(n,i,re,Q,l,ee);return}}for(var z in a)Q=a[z],a.hasOwnProperty(z)&&Q!=null&&!l.hasOwnProperty(z)&&vt(n,i,z,null,l,Q);for(le in l)Q=l[le],ee=a[le],!l.hasOwnProperty(le)||Q===ee||Q==null&&ee==null||vt(n,i,le,Q,l,ee)}function Z_(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,T=f.duration;if(d&&T&&Z_(_)){for(_=0,T=f.responseEnd,l+=1;l<a.length;l++){var O=a[l],K=O.startTime;if(K>T)break;var re=O.transferSize,le=O.initiatorType;re&&Z_(le)&&(O=O.responseEnd,_+=re*(O<T?1:(T-K)/(O-K)))}if(--l,i+=8*(d+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Rm=null,Cm=null;function gh(n){return n.nodeType===9?n:n.ownerDocument}function W_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ev(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Im(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Nm=null;function HS(){var n=window.event;return n&&n.type==="popstate"?n===Nm?!1:(Nm=n,!0):(Nm=null,!1)}var tv=typeof setTimeout=="function"?setTimeout:void 0,FS=typeof clearTimeout=="function"?clearTimeout:void 0,nv=typeof Promise=="function"?Promise:void 0,GS=typeof queueMicrotask=="function"?queueMicrotask:typeof nv<"u"?function(n){return nv.resolve(null).then(n).catch(KS)}:tv;function KS(n){setTimeout(function(){throw n})}function kr(n){return n==="head"}function iv(n,i){var a=i,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),Po(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")eu(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,eu(a);for(var d=a.firstChild;d;){var _=d.nextSibling,T=d.nodeName;d[Ai]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&eu(n.ownerDocument.body);a=f}while(a);Po(i)}function sv(n,i){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function Dm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Dm(a),or(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function $S(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Ai])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=ji(n.nextSibling),n===null)break}return null}function QS(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=ji(n.nextSibling),n===null))return null;return n}function rv(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=ji(n.nextSibling),n===null))return null;return n}function Om(n){return n.data==="$?"||n.data==="$~"}function Mm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function YS(n,i){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function ji(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var km=null;function av(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(i===0)return ji(n.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}n=n.nextSibling}return null}function ov(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return n;i--}else a!=="/$"&&a!=="/&"||i++}n=n.previousSibling}return null}function lv(n,i,a){switch(i=gh(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function eu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);or(n)}var zi=new Map,uv=new Set;function ph(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Qs=he.d;he.d={f:XS,r:JS,D:ZS,C:WS,L:eA,m:tA,X:iA,S:nA,M:sA};function XS(){var n=Qs.f(),i=oh();return n||i}function JS(n){var i=$n(n);i!==null&&i.tag===5&&i.type==="form"?xy(i):Qs.r(n)}var Mo=typeof document>"u"?null:document;function cv(n,i,a){var l=Mo;if(l&&typeof i=="string"&&i){var f=ii(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),uv.has(f)||(uv.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),In(i,"link",n),jt(i),l.head.appendChild(i)))}}function ZS(n){Qs.D(n),cv("dns-prefetch",n,null)}function WS(n,i){Qs.C(n,i),cv("preconnect",n,i)}function eA(n,i,a){Qs.L(n,i,a);var l=Mo;if(l&&n&&i){var f='link[rel="preload"][as="'+ii(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+ii(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+ii(a.imageSizes)+'"]')):f+='[href="'+ii(n)+'"]';var d=f;switch(i){case"style":d=ko(n);break;case"script":d=Vo(n)}zi.has(d)||(n=E({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),zi.set(d,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(tu(d))||i==="script"&&l.querySelector(nu(d))||(i=l.createElement("link"),In(i,"link",n),jt(i),l.head.appendChild(i)))}}function tA(n,i){Qs.m(n,i);var a=Mo;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+ii(l)+'"][href="'+ii(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Vo(n)}if(!zi.has(d)&&(n=E({rel:"modulepreload",href:n},i),zi.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(nu(d)))return}l=a.createElement("link"),In(l,"link",n),jt(l),a.head.appendChild(l)}}}function nA(n,i,a){Qs.S(n,i,a);var l=Mo;if(l&&n){var f=Ri(l).hoistableStyles,d=ko(n);i=i||"default";var _=f.get(d);if(!_){var T={loading:0,preload:null};if(_=l.querySelector(tu(d)))T.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":i},a),(a=zi.get(d))&&Vm(n,a);var O=_=l.createElement("link");jt(O),In(O,"link",n),O._p=new Promise(function(K,re){O.onload=K,O.onerror=re}),O.addEventListener("load",function(){T.loading|=1}),O.addEventListener("error",function(){T.loading|=2}),T.loading|=4,yh(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:T},f.set(d,_)}}}function iA(n,i){Qs.X(n,i);var a=Mo;if(a&&n){var l=Ri(a).hoistableScripts,f=Vo(n),d=l.get(f);d||(d=a.querySelector(nu(f)),d||(n=E({src:n,async:!0},i),(i=zi.get(f))&&Pm(n,i),d=a.createElement("script"),jt(d),In(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function sA(n,i){Qs.M(n,i);var a=Mo;if(a&&n){var l=Ri(a).hoistableScripts,f=Vo(n),d=l.get(f);d||(d=a.querySelector(nu(f)),d||(n=E({src:n,async:!0,type:"module"},i),(i=zi.get(f))&&Pm(n,i),d=a.createElement("script"),jt(d),In(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function hv(n,i,a,l){var f=(f=Ae.current)?ph(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=ko(a.href),a=Ri(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=ko(a.href);var d=Ri(f).hoistableStyles,_=d.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,_),(d=f.querySelector(tu(n)))&&!d._p&&(_.instance=d,_.state.loading=5),zi.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},zi.set(n,a),d||rA(f,n,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Vo(a),a=Ri(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function ko(n){return'href="'+ii(n)+'"'}function tu(n){return'link[rel="stylesheet"]['+n+"]"}function fv(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function rA(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),In(i,"link",a),jt(i),n.head.appendChild(i))}function Vo(n){return'[src="'+ii(n)+'"]'}function nu(n){return"script[async]"+n}function dv(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+ii(a.href)+'"]');if(l)return i.instance=l,jt(l),l;var f=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),jt(l),In(l,"style",f),yh(l,a.precedence,n),i.instance=l;case"stylesheet":f=ko(a.href);var d=n.querySelector(tu(f));if(d)return i.state.loading|=4,i.instance=d,jt(d),d;l=fv(a),(f=zi.get(f))&&Vm(l,f),d=(n.ownerDocument||n).createElement("link"),jt(d);var _=d;return _._p=new Promise(function(T,O){_.onload=T,_.onerror=O}),In(d,"link",l),i.state.loading|=4,yh(d,a.precedence,n),i.instance=d;case"script":return d=Vo(a.src),(f=n.querySelector(nu(d)))?(i.instance=f,jt(f),f):(l=a,(f=zi.get(d))&&(l=E({},a),Pm(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),jt(f),In(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,yh(l,a.precedence,n));return i.instance}function yh(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var T=l[_];if(T.dataset.precedence===i)d=T;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function Vm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Pm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var _h=null;function mv(n,i,a){if(_h===null){var l=new Map,f=_h=new Map;f.set(a,l)}else f=_h,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[Ai]||d[Pt]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=n+_;var T=l.get(_);T?T.push(d):l.set(_,[d])}}return l}function gv(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function aA(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function pv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function oA(n,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=ko(l.href),d=i.querySelector(tu(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=vh.bind(n),i.then(n,n)),a.state.loading|=4,a.instance=d,jt(d);return}d=i.ownerDocument||i,l=fv(l),(f=zi.get(f))&&Vm(l,f),d=d.createElement("link"),jt(d);var _=d;_._p=new Promise(function(T,O){_.onload=T,_.onerror=O}),In(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=vh.bind(n),i.addEventListener("load",a),i.addEventListener("error",a))}}var Lm=0;function lA(n,i){return n.stylesheets&&n.count===0&&Eh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&Eh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+i);0<n.imgBytes&&Lm===0&&(Lm=62500*qS());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Eh(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>Lm?50:800)+i);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function vh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Eh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var bh=null;function Eh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,bh=new Map,i.forEach(uA,n),bh=null,vh.call(n))}function uA(n,i){if(!(i.state.loading&4)){var a=bh.get(n);if(a)var l=a.get(null);else{a=new Map,bh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=vh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var iu={$$typeof:Z,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function cA(n,i,a,l,f,d,_,T,O){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vt(0),this.hiddenUpdates=Vt(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function yv(n,i,a,l,f,d,_,T,O,K,re,le){return n=new cA(n,i,a,_,O,K,re,le,T),i=1,d===!0&&(i|=24),d=mi(3,null,null,i),n.current=d,d.stateNode=n,i=pd(),i.refCount++,n.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},bd(d),n}function _v(n){return n?(n=ho,n):ho}function vv(n,i,a,l,f,d){f=_v(f),l.context===null?l.context=f:l.pendingContext=f,l=wr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Sr(n,l,i),a!==null&&(ui(a,n,i),Vl(a,n,i))}function bv(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Um(n,i){bv(n,i),(n=n.alternate)&&bv(n,i)}function Ev(n){if(n.tag===13||n.tag===31){var i=Ra(n,67108864);i!==null&&ui(i,n,67108864),Um(n,67108864)}}function Tv(n){if(n.tag===13||n.tag===31){var i=vi();i=cn(i);var a=Ra(n,i);a!==null&&ui(a,n,i),Um(n,i)}}var Th=!0;function hA(n,i,a,l){var f=te.T;te.T=null;var d=he.p;try{he.p=2,jm(n,i,a,l)}finally{he.p=d,te.T=f}}function fA(n,i,a,l){var f=te.T;te.T=null;var d=he.p;try{he.p=8,jm(n,i,a,l)}finally{he.p=d,te.T=f}}function jm(n,i,a,l){if(Th){var f=zm(l);if(f===null)Am(n,i,l,wh,a),Sv(n,l);else if(mA(f,n,i,a,l))l.stopPropagation();else if(Sv(n,l),i&4&&-1<dA.indexOf(n)){for(;f!==null;){var d=$n(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=xt(d.pendingLanes);if(_!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var O=1<<31-At(_);T.entanglements[1]|=O,_&=~O}vs(d),(lt&6)===0&&(rh=Zt()+500,Jl(0))}}break;case 31:case 13:T=Ra(d,2),T!==null&&ui(T,d,2),oh(),Um(d,2)}if(d=zm(l),d===null&&Am(n,i,l,wh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Am(n,i,l,null,a)}}function zm(n){return n=Ni(n),Bm(n)}var wh=null;function Bm(n){if(wh=null,n=xi(n),n!==null){var i=u(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=c(i),n!==null)return n;n=null}else if(a===31){if(n=m(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return wh=n,null}function wv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fi()){case Rs:return 2;case Fn:return 8;case Sn:case Gi:return 32;case Cs:return 268435456;default:return 32}default:return 32}}var qm=!1,Vr=null,Pr=null,Lr=null,su=new Map,ru=new Map,Ur=[],dA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sv(n,i){switch(n){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":Pr=null;break;case"mouseover":case"mouseout":Lr=null;break;case"pointerover":case"pointerout":su.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ru.delete(i.pointerId)}}function au(n,i,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=$n(i),i!==null&&Ev(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function mA(n,i,a,l,f){switch(i){case"focusin":return Vr=au(Vr,n,i,a,l,f),!0;case"dragenter":return Pr=au(Pr,n,i,a,l,f),!0;case"mouseover":return Lr=au(Lr,n,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return su.set(d,au(su.get(d)||null,n,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,ru.set(d,au(ru.get(d)||null,n,i,a,l,f)),!0}return!1}function Av(n){var i=xi(n.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){n.blockedOn=i,hn(n.priority,function(){Tv(a)});return}}else if(i===31){if(i=m(a),i!==null){n.blockedOn=i,hn(n.priority,function(){Tv(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Sh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=zm(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);vl=l,a.target.dispatchEvent(l),vl=null}else return i=$n(a),i!==null&&Ev(i),n.blockedOn=a,!1;i.shift()}return!0}function xv(n,i,a){Sh(n)&&a.delete(i)}function gA(){qm=!1,Vr!==null&&Sh(Vr)&&(Vr=null),Pr!==null&&Sh(Pr)&&(Pr=null),Lr!==null&&Sh(Lr)&&(Lr=null),su.forEach(xv),ru.forEach(xv)}function Ah(n,i){n.blockedOn===i&&(n.blockedOn=null,qm||(qm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,gA)))}var xh=null;function Rv(n){xh!==n&&(xh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){xh===n&&(xh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(Bm(l||a)===null)continue;break}var d=$n(a);d!==null&&(n.splice(i,3),i-=3,zd(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Po(n){function i(O){return Ah(O,n)}Vr!==null&&Ah(Vr,n),Pr!==null&&Ah(Pr,n),Lr!==null&&Ah(Lr,n),su.forEach(i),ru.forEach(i);for(var a=0;a<Ur.length;a++){var l=Ur[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Ur.length&&(a=Ur[0],a.blockedOn===null);)Av(a),a.blockedOn===null&&Ur.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[Kt]||null;if(typeof d=="function")_||Rv(a);else if(_){var T=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[Kt]||null)T=_.formAction;else if(Bm(f)!==null)continue}else T=_.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),Rv(a)}}}function Cv(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Hm(n){this._internalRoot=n}Rh.prototype.render=Hm.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=vi();vv(a,l,n,i,null,null)},Rh.prototype.unmount=Hm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;vv(n.current,2,null,n,null,null),oh(),i[Ee]=null}};function Rh(n){this._internalRoot=n}Rh.prototype.unstable_scheduleHydration=function(n){if(n){var i=Ot();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Ur.length&&i!==0&&i<Ur[a].priority;a++);Ur.splice(a,0,n),a===0&&Av(n)}};var Iv=e.version;if(Iv!=="19.2.3")throw Error(r(527,Iv,"19.2.3"));he.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(i),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var pA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ch.isDisabled&&Ch.supportsFiber)try{Kn=Ch.inject(pA),Ft=Ch}catch{}}return lu.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,l="",f=Py,d=Ly,_=Uy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=yv(n,1,!1,null,null,a,l,null,f,d,_,Cv),n[Ee]=i.current,Sm(n),new Hm(i)},lu.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var l=!1,f="",d=Py,_=Ly,T=Uy,O=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),i=yv(n,1,!0,i,a??null,l,f,O,d,_,T,Cv),i.context=_v(null),a=i.current,l=vi(),l=cn(l),f=wr(l),f.callback=null,Sr(a,f,l),a=l,i.current.lanes=a,Y(i,a),vs(i),n[Ee]=i.current,Sm(n),new Rh(i)},lu.version="19.2.3",lu}var jv;function xA(){if(jv)return Km.exports;jv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Km.exports=AA(),Km.exports}var RA=xA();const CA=()=>S.jsxs("div",{className:"fixed inset-0 -z-50 overflow-hidden pointer-events-none bg-[#020617]",children:[S.jsx("div",{className:"bg-blob opacity-20 w-[800px] h-[800px] -top-96 -left-96 bg-indigo-600 blur-[120px]"}),S.jsx("div",{className:"bg-blob opacity-30 w-[600px] h-[600px] top-1/2 -right-48 bg-pink-600 blur-[100px]",style:{animationDelay:"-5s",animationDuration:"25s"}}),S.jsx("div",{className:"bg-blob opacity-10 w-[500px] h-[500px] bottom-0 left-1/4 bg-cyan-400 blur-[80px]",style:{animationDelay:"-12s",animationDuration:"18s"}}),S.jsx("div",{className:"absolute inset-0 bg-radial-at-t from-transparent via-slate-950/40 to-slate-950"}),S.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"})]});const IA=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),NA=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),zv=s=>{const e=NA(s);return e.charAt(0).toUpperCase()+e.slice(1)},BE=(...s)=>s.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),DA=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var OA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const MA=q.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:c,...m},g)=>q.createElement("svg",{ref:g,...OA,width:e,height:e,stroke:s,strokeWidth:r?Number(t)*24/Number(e):t,className:BE("lucide",o),...!u&&!DA(m)&&{"aria-hidden":"true"},...m},[...c.map(([p,v])=>q.createElement(p,v)),...Array.isArray(u)?u:[u]]));const hi=(s,e)=>{const t=q.forwardRef(({className:r,...o},u)=>q.createElement(MA,{ref:u,iconNode:e,className:BE(`lucide-${IA(zv(s))}`,`lucide-${s}`,r),...o}));return t.displayName=zv(s),t};const kA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],yu=hi("arrow-left",kA);const VA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],PA=hi("circle-x",VA);const LA=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],qE=hi("copy",LA);const UA=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],HE=hi("flag",UA);const jA=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],zA=hi("house",jA);const BA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],FE=hi("loader-circle",BA);const qA=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],HA=hi("log-in",qA);const FA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],GA=hi("plus",FA);const KA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],tp=hi("rotate-ccw",KA);const $A=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],GE=hi("share-2",$A);const QA=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],bg=hi("trophy",QA);const YA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Xm=hi("user",YA);const XA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],np=hi("users",XA);const JA=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],KE=hi("zap",JA),ZA=()=>{};var Bv={};const $E=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},WA=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const o=s[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[t++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[t++],c=s[t++],m=s[t++],g=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],c=s[t++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return e.join("")},QE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],c=o+1<s.length,m=c?s[o+1]:0,g=o+2<s.length,p=g?s[o+2]:0,v=u>>2,E=(u&3)<<4|m>>4;let w=(m&15)<<2|p>>6,I=p&63;g||(I=64,c||(w=64)),r.push(t[v],t[E],t[w],t[I])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray($E(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):WA(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const p=o<s.length?t[s.charAt(o)]:64;++o;const E=o<s.length?t[s.charAt(o)]:64;if(++o,u==null||m==null||p==null||E==null)throw new ex;const w=u<<2|m>>4;if(r.push(w),p!==64){const I=m<<4&240|p>>2;if(r.push(I),E!==64){const k=p<<6&192|E;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class ex extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tx=function(s){const e=$E(s);return QE.encodeByteArray(e,!0)},Jh=function(s){return tx(s).replace(/\./g,"")},YE=function(s){try{return QE.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ix=()=>nx().__FIREBASE_DEFAULTS__,sx=()=>{if(typeof process>"u"||typeof Bv>"u")return;const s=Bv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},rx=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&YE(s[1]);return e&&JSON.parse(e)},Af=()=>{try{return ZA()||ix()||sx()||rx()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},XE=s=>Af()?.emulatorHosts?.[s],ax=s=>{const e=XE(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},JE=()=>Af()?.config,ZE=s=>Af()?.[`_${s}`];class ox{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function al(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function WE(s){return(await fetch(s,{credentials:"include"})).ok}function lx(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Jh(JSON.stringify(t)),Jh(JSON.stringify(c)),""].join(".")}const _u={};function ux(){const s={prod:[],emulator:[]};for(const e of Object.keys(_u))_u[e]?s.emulator.push(e):s.prod.push(e);return s}function cx(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let qv=!1;function e1(s,e){if(typeof window>"u"||typeof document>"u"||!al(window.location.host)||_u[s]===e||_u[s]||qv)return;_u[s]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",u=ux().prod.length>0;function c(){const w=document.getElementById(r);w&&w.remove()}function m(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function g(w,I){w.setAttribute("width","24"),w.setAttribute("id",I),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{qv=!0,c()},w}function v(w,I){w.setAttribute("id",I),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function E(){const w=cx(r),I=t("text"),k=document.getElementById(I)||document.createElement("span"),j=t("learnmore"),D=document.getElementById(j)||document.createElement("a"),F=t("preprendIcon"),ne=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const Z=w.element;m(Z),v(D,j);const ce=p();g(ne,F),Z.append(ne,k,D,ce),document.body.appendChild(Z)}u?(k.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qn())}function fx(){const s=Af()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mx(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function gx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function px(){const s=qn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function yx(){return!fx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _x(){try{return typeof indexedDB=="object"}catch{return!1}}function vx(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const bx="FirebaseError";class sr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=bx,Object.setPrototypeOf(this,sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ku.prototype.create)}}class Ku{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],c=u?Ex(u,r):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new sr(o,m,r)}}function Ex(s,e){return s.replace(Tx,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const Tx=/\{\$([^}]+)}/g;function wx(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Fa(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const u=s[o],c=e[o];if(Hv(u)&&Hv(c)){if(!Fa(u,c))return!1}else if(u!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function Hv(s){return s!==null&&typeof s=="object"}function $u(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Sx(s,e){const t=new Ax(s,e);return t.subscribe.bind(t)}class Ax{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");xx(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=Jm),o.error===void 0&&(o.error=Jm),o.complete===void 0&&(o.complete=Jm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xx(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Jm(){}function wn(s){return s&&s._delegate?s._delegate:s}class Ga{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ba="[DEFAULT]";class Rx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new ox;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ix(e))try{this.getOrInitializeService({instanceIdentifier:Ba})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=Ba){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ba){return this.instances.has(e)}getOptions(e=Ba){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&c.resolve(o)}return o}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Cx(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ba){return this.component?this.component.multipleInstances?e:Ba:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Cx(s){return s===Ba?void 0:s}function Ix(s){return s.instantiationMode==="EAGER"}class Nx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Rx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Xe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Xe||(Xe={}));const Dx={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},Ox=Xe.INFO,Mx={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},kx=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=Mx[e];if(o)console[o](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ip{constructor(e){this.name=e,this._logLevel=Ox,this._logHandler=kx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const Vx=(s,e)=>e.some(t=>s instanceof t);let Fv,Gv;function Px(){return Fv||(Fv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Lx(){return Gv||(Gv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const t1=new WeakMap,Eg=new WeakMap,n1=new WeakMap,Zm=new WeakMap,sp=new WeakMap;function Ux(s){const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",c)},u=()=>{t(Xr(s.result)),o()},c=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&t1.set(t,s)}).catch(()=>{}),sp.set(e,s),e}function jx(s){if(Eg.has(s))return;const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",c),s.removeEventListener("abort",c)},u=()=>{t(),o()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",c),s.addEventListener("abort",c)});Eg.set(s,e)}let Tg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Eg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||n1.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xr(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function zx(s){Tg=s(Tg)}function Bx(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(Wm(this),e,...t);return n1.set(r,e.sort?e.sort():[e]),Xr(r)}:Lx().includes(s)?function(...e){return s.apply(Wm(this),e),Xr(t1.get(this))}:function(...e){return Xr(s.apply(Wm(this),e))}}function qx(s){return typeof s=="function"?Bx(s):(s instanceof IDBTransaction&&jx(s),Vx(s,Px())?new Proxy(s,Tg):s)}function Xr(s){if(s instanceof IDBRequest)return Ux(s);if(Zm.has(s))return Zm.get(s);const e=qx(s);return e!==s&&(Zm.set(s,e),sp.set(e,s)),e}const Wm=s=>sp.get(s);function Hx(s,e,{blocked:t,upgrade:r,blocking:o,terminated:u}={}){const c=indexedDB.open(s,e),m=Xr(c);return r&&c.addEventListener("upgradeneeded",g=>{r(Xr(c.result),g.oldVersion,g.newVersion,Xr(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const Fx=["get","getKey","getAll","getAllKeys","count"],Gx=["put","add","delete","clear"],eg=new Map;function Kv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(eg.get(e))return eg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=Gx.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||Fx.includes(t)))return;const u=async function(c,...m){const g=this.transaction(c,o?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),o&&g.done]))[0]};return eg.set(e,u),u}zx(s=>({...s,get:(e,t,r)=>Kv(e,t)||s.get(e,t,r),has:(e,t)=>!!Kv(e,t)||s.has(e,t)}));class Kx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if($x(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function $x(s){return s.getComponent()?.type==="VERSION"}const wg="@firebase/app",$v="0.14.6";const Zs=new ip("@firebase/app"),Qx="@firebase/app-compat",Yx="@firebase/analytics-compat",Xx="@firebase/analytics",Jx="@firebase/app-check-compat",Zx="@firebase/app-check",Wx="@firebase/auth",e2="@firebase/auth-compat",t2="@firebase/database",n2="@firebase/data-connect",i2="@firebase/database-compat",s2="@firebase/functions",r2="@firebase/functions-compat",a2="@firebase/installations",o2="@firebase/installations-compat",l2="@firebase/messaging",u2="@firebase/messaging-compat",c2="@firebase/performance",h2="@firebase/performance-compat",f2="@firebase/remote-config",d2="@firebase/remote-config-compat",m2="@firebase/storage",g2="@firebase/storage-compat",p2="@firebase/firestore",y2="@firebase/ai",_2="@firebase/firestore-compat",v2="firebase",b2="12.6.0";const Sg="[DEFAULT]",E2={[wg]:"fire-core",[Qx]:"fire-core-compat",[Xx]:"fire-analytics",[Yx]:"fire-analytics-compat",[Zx]:"fire-app-check",[Jx]:"fire-app-check-compat",[Wx]:"fire-auth",[e2]:"fire-auth-compat",[t2]:"fire-rtdb",[n2]:"fire-data-connect",[i2]:"fire-rtdb-compat",[s2]:"fire-fn",[r2]:"fire-fn-compat",[a2]:"fire-iid",[o2]:"fire-iid-compat",[l2]:"fire-fcm",[u2]:"fire-fcm-compat",[c2]:"fire-perf",[h2]:"fire-perf-compat",[f2]:"fire-rc",[d2]:"fire-rc-compat",[m2]:"fire-gcs",[g2]:"fire-gcs-compat",[p2]:"fire-fst",[_2]:"fire-fst-compat",[y2]:"fire-vertex","fire-js":"fire-js",[v2]:"fire-js-all"};const Ou=new Map,T2=new Map,Ag=new Map;function Qv(s,e){try{s.container.addComponent(e)}catch(t){Zs.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Xo(s){const e=s.name;if(Ag.has(e))return Zs.debug(`There were multiple attempts to register component ${e}.`),!1;Ag.set(e,s);for(const t of Ou.values())Qv(t,s);for(const t of T2.values())Qv(t,s);return!0}function rp(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function ns(s){return s==null?!1:s.settings!==void 0}const w2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jr=new Ku("app","Firebase",w2);class S2{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ga("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jr.create("app-deleted",{appName:this._name})}}const ol=b2;function i1(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r={name:Sg,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Jr.create("bad-app-name",{appName:String(o)});if(t||(t=JE()),!t)throw Jr.create("no-options");const u=Ou.get(o);if(u){if(Fa(t,u.options)&&Fa(r,u.config))return u;throw Jr.create("duplicate-app",{appName:o})}const c=new Nx(o);for(const g of Ag.values())c.addComponent(g);const m=new S2(t,r,c);return Ou.set(o,m),m}function s1(s=Sg){const e=Ou.get(s);if(!e&&s===Sg&&JE())return i1();if(!e)throw Jr.create("no-app",{appName:s});return e}function Yv(){return Array.from(Ou.values())}function Zr(s,e,t){let r=E2[s]??s;t&&(r+=`-${t}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zs.warn(c.join(" "));return}Xo(new Ga(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const A2="firebase-heartbeat-database",x2=1,Mu="firebase-heartbeat-store";let tg=null;function r1(){return tg||(tg=Hx(A2,x2,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Mu)}catch(t){console.warn(t)}}}}).catch(s=>{throw Jr.create("idb-open",{originalErrorMessage:s.message})})),tg}async function R2(s){try{const t=(await r1()).transaction(Mu),r=await t.objectStore(Mu).get(a1(s));return await t.done,r}catch(e){if(e instanceof sr)Zs.warn(e.message);else{const t=Jr.create("idb-get",{originalErrorMessage:e?.message});Zs.warn(t.message)}}}async function Xv(s,e){try{const r=(await r1()).transaction(Mu,"readwrite");await r.objectStore(Mu).put(e,a1(s)),await r.done}catch(t){if(t instanceof sr)Zs.warn(t.message);else{const r=Jr.create("idb-set",{originalErrorMessage:t?.message});Zs.warn(r.message)}}}function a1(s){return`${s.name}!${s.options.appId}`}const C2=1024,I2=30;class N2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new O2(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Jv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>I2){const o=M2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Zs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Jv(),{heartbeatsToSend:t,unsentEntries:r}=D2(this._heartbeatsCache.heartbeats),o=Jh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Zs.warn(e),""}}}function Jv(){return new Date().toISOString().substring(0,10)}function D2(s,e=C2){const t=[];let r=s.slice();for(const o of s){const u=t.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),Zv(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Zv(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class O2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _x()?vx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await R2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Xv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Xv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Zv(s){return Jh(JSON.stringify({version:2,heartbeats:s})).length}function M2(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}function k2(s){Xo(new Ga("platform-logger",e=>new Kx(e),"PRIVATE")),Xo(new Ga("heartbeat",e=>new N2(e),"PRIVATE")),Zr(wg,$v,s),Zr(wg,$v,"esm2020"),Zr("fire-js","")}k2("");var Wv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Wr,o1;(function(){var s;function e(x,R){function C(){}C.prototype=R.prototype,x.F=R.prototype,x.prototype=new C,x.prototype.constructor=x,x.D=function(V,M,U){for(var N=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)N[qe-2]=arguments[qe];return R.prototype[M].apply(V,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,R,C){C||(C=0);const V=Array(16);if(typeof R=="string")for(var M=0;M<16;++M)V[M]=R.charCodeAt(C++)|R.charCodeAt(C++)<<8|R.charCodeAt(C++)<<16|R.charCodeAt(C++)<<24;else for(M=0;M<16;++M)V[M]=R[C++]|R[C++]<<8|R[C++]<<16|R[C++]<<24;R=x.g[0],C=x.g[1],M=x.g[2];let U=x.g[3],N;N=R+(U^C&(M^U))+V[0]+3614090360&4294967295,R=C+(N<<7&4294967295|N>>>25),N=U+(M^R&(C^M))+V[1]+3905402710&4294967295,U=R+(N<<12&4294967295|N>>>20),N=M+(C^U&(R^C))+V[2]+606105819&4294967295,M=U+(N<<17&4294967295|N>>>15),N=C+(R^M&(U^R))+V[3]+3250441966&4294967295,C=M+(N<<22&4294967295|N>>>10),N=R+(U^C&(M^U))+V[4]+4118548399&4294967295,R=C+(N<<7&4294967295|N>>>25),N=U+(M^R&(C^M))+V[5]+1200080426&4294967295,U=R+(N<<12&4294967295|N>>>20),N=M+(C^U&(R^C))+V[6]+2821735955&4294967295,M=U+(N<<17&4294967295|N>>>15),N=C+(R^M&(U^R))+V[7]+4249261313&4294967295,C=M+(N<<22&4294967295|N>>>10),N=R+(U^C&(M^U))+V[8]+1770035416&4294967295,R=C+(N<<7&4294967295|N>>>25),N=U+(M^R&(C^M))+V[9]+2336552879&4294967295,U=R+(N<<12&4294967295|N>>>20),N=M+(C^U&(R^C))+V[10]+4294925233&4294967295,M=U+(N<<17&4294967295|N>>>15),N=C+(R^M&(U^R))+V[11]+2304563134&4294967295,C=M+(N<<22&4294967295|N>>>10),N=R+(U^C&(M^U))+V[12]+1804603682&4294967295,R=C+(N<<7&4294967295|N>>>25),N=U+(M^R&(C^M))+V[13]+4254626195&4294967295,U=R+(N<<12&4294967295|N>>>20),N=M+(C^U&(R^C))+V[14]+2792965006&4294967295,M=U+(N<<17&4294967295|N>>>15),N=C+(R^M&(U^R))+V[15]+1236535329&4294967295,C=M+(N<<22&4294967295|N>>>10),N=R+(M^U&(C^M))+V[1]+4129170786&4294967295,R=C+(N<<5&4294967295|N>>>27),N=U+(C^M&(R^C))+V[6]+3225465664&4294967295,U=R+(N<<9&4294967295|N>>>23),N=M+(R^C&(U^R))+V[11]+643717713&4294967295,M=U+(N<<14&4294967295|N>>>18),N=C+(U^R&(M^U))+V[0]+3921069994&4294967295,C=M+(N<<20&4294967295|N>>>12),N=R+(M^U&(C^M))+V[5]+3593408605&4294967295,R=C+(N<<5&4294967295|N>>>27),N=U+(C^M&(R^C))+V[10]+38016083&4294967295,U=R+(N<<9&4294967295|N>>>23),N=M+(R^C&(U^R))+V[15]+3634488961&4294967295,M=U+(N<<14&4294967295|N>>>18),N=C+(U^R&(M^U))+V[4]+3889429448&4294967295,C=M+(N<<20&4294967295|N>>>12),N=R+(M^U&(C^M))+V[9]+568446438&4294967295,R=C+(N<<5&4294967295|N>>>27),N=U+(C^M&(R^C))+V[14]+3275163606&4294967295,U=R+(N<<9&4294967295|N>>>23),N=M+(R^C&(U^R))+V[3]+4107603335&4294967295,M=U+(N<<14&4294967295|N>>>18),N=C+(U^R&(M^U))+V[8]+1163531501&4294967295,C=M+(N<<20&4294967295|N>>>12),N=R+(M^U&(C^M))+V[13]+2850285829&4294967295,R=C+(N<<5&4294967295|N>>>27),N=U+(C^M&(R^C))+V[2]+4243563512&4294967295,U=R+(N<<9&4294967295|N>>>23),N=M+(R^C&(U^R))+V[7]+1735328473&4294967295,M=U+(N<<14&4294967295|N>>>18),N=C+(U^R&(M^U))+V[12]+2368359562&4294967295,C=M+(N<<20&4294967295|N>>>12),N=R+(C^M^U)+V[5]+4294588738&4294967295,R=C+(N<<4&4294967295|N>>>28),N=U+(R^C^M)+V[8]+2272392833&4294967295,U=R+(N<<11&4294967295|N>>>21),N=M+(U^R^C)+V[11]+1839030562&4294967295,M=U+(N<<16&4294967295|N>>>16),N=C+(M^U^R)+V[14]+4259657740&4294967295,C=M+(N<<23&4294967295|N>>>9),N=R+(C^M^U)+V[1]+2763975236&4294967295,R=C+(N<<4&4294967295|N>>>28),N=U+(R^C^M)+V[4]+1272893353&4294967295,U=R+(N<<11&4294967295|N>>>21),N=M+(U^R^C)+V[7]+4139469664&4294967295,M=U+(N<<16&4294967295|N>>>16),N=C+(M^U^R)+V[10]+3200236656&4294967295,C=M+(N<<23&4294967295|N>>>9),N=R+(C^M^U)+V[13]+681279174&4294967295,R=C+(N<<4&4294967295|N>>>28),N=U+(R^C^M)+V[0]+3936430074&4294967295,U=R+(N<<11&4294967295|N>>>21),N=M+(U^R^C)+V[3]+3572445317&4294967295,M=U+(N<<16&4294967295|N>>>16),N=C+(M^U^R)+V[6]+76029189&4294967295,C=M+(N<<23&4294967295|N>>>9),N=R+(C^M^U)+V[9]+3654602809&4294967295,R=C+(N<<4&4294967295|N>>>28),N=U+(R^C^M)+V[12]+3873151461&4294967295,U=R+(N<<11&4294967295|N>>>21),N=M+(U^R^C)+V[15]+530742520&4294967295,M=U+(N<<16&4294967295|N>>>16),N=C+(M^U^R)+V[2]+3299628645&4294967295,C=M+(N<<23&4294967295|N>>>9),N=R+(M^(C|~U))+V[0]+4096336452&4294967295,R=C+(N<<6&4294967295|N>>>26),N=U+(C^(R|~M))+V[7]+1126891415&4294967295,U=R+(N<<10&4294967295|N>>>22),N=M+(R^(U|~C))+V[14]+2878612391&4294967295,M=U+(N<<15&4294967295|N>>>17),N=C+(U^(M|~R))+V[5]+4237533241&4294967295,C=M+(N<<21&4294967295|N>>>11),N=R+(M^(C|~U))+V[12]+1700485571&4294967295,R=C+(N<<6&4294967295|N>>>26),N=U+(C^(R|~M))+V[3]+2399980690&4294967295,U=R+(N<<10&4294967295|N>>>22),N=M+(R^(U|~C))+V[10]+4293915773&4294967295,M=U+(N<<15&4294967295|N>>>17),N=C+(U^(M|~R))+V[1]+2240044497&4294967295,C=M+(N<<21&4294967295|N>>>11),N=R+(M^(C|~U))+V[8]+1873313359&4294967295,R=C+(N<<6&4294967295|N>>>26),N=U+(C^(R|~M))+V[15]+4264355552&4294967295,U=R+(N<<10&4294967295|N>>>22),N=M+(R^(U|~C))+V[6]+2734768916&4294967295,M=U+(N<<15&4294967295|N>>>17),N=C+(U^(M|~R))+V[13]+1309151649&4294967295,C=M+(N<<21&4294967295|N>>>11),N=R+(M^(C|~U))+V[4]+4149444226&4294967295,R=C+(N<<6&4294967295|N>>>26),N=U+(C^(R|~M))+V[11]+3174756917&4294967295,U=R+(N<<10&4294967295|N>>>22),N=M+(R^(U|~C))+V[2]+718787259&4294967295,M=U+(N<<15&4294967295|N>>>17),N=C+(U^(M|~R))+V[9]+3951481745&4294967295,x.g[0]=x.g[0]+R&4294967295,x.g[1]=x.g[1]+(M+(N<<21&4294967295|N>>>11))&4294967295,x.g[2]=x.g[2]+M&4294967295,x.g[3]=x.g[3]+U&4294967295}r.prototype.v=function(x,R){R===void 0&&(R=x.length);const C=R-this.blockSize,V=this.C;let M=this.h,U=0;for(;U<R;){if(M==0)for(;U<=C;)o(this,x,U),U+=this.blockSize;if(typeof x=="string"){for(;U<R;)if(V[M++]=x.charCodeAt(U++),M==this.blockSize){o(this,V),M=0;break}}else for(;U<R;)if(V[M++]=x[U++],M==this.blockSize){o(this,V),M=0;break}}this.h=M,this.o+=R},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var R=1;R<x.length-8;++R)x[R]=0;R=this.o*8;for(var C=x.length-8;C<x.length;++C)x[C]=R&255,R/=256;for(this.v(x),x=Array(16),R=0,C=0;C<4;++C)for(let V=0;V<32;V+=8)x[R++]=this.g[C]>>>V&255;return x};function u(x,R){var C=m;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=R(x)}function c(x,R){this.h=R;const C=[];let V=!0;for(let M=x.length-1;M>=0;M--){const U=x[M]|0;V&&U==R||(C[M]=U,V=!1)}this.g=C}var m={};function g(x){return-128<=x&&x<128?u(x,function(R){return new c([R|0],R<0?-1:0)}):new c([x|0],x<0?-1:0)}function p(x){if(isNaN(x)||!isFinite(x))return E;if(x<0)return D(p(-x));const R=[];let C=1;for(let V=0;x>=C;V++)R[V]=x/C|0,C*=4294967296;return new c(R,0)}function v(x,R){if(x.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(x.charAt(0)=="-")return D(v(x.substring(1),R));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=p(Math.pow(R,8));let V=E;for(let U=0;U<x.length;U+=8){var M=Math.min(8,x.length-U);const N=parseInt(x.substring(U,U+M),R);M<8?(M=p(Math.pow(R,M)),V=V.j(M).add(p(N))):(V=V.j(C),V=V.add(p(N)))}return V}var E=g(0),w=g(1),I=g(16777216);s=c.prototype,s.m=function(){if(j(this))return-D(this).m();let x=0,R=1;for(let C=0;C<this.g.length;C++){const V=this.i(C);x+=(V>=0?V:4294967296+V)*R,R*=4294967296}return x},s.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(k(this))return"0";if(j(this))return"-"+D(this).toString(x);const R=p(Math.pow(x,6));var C=this;let V="";for(;;){const M=ce(C,R).g;C=F(C,M.j(R));let U=((C.g.length>0?C.g[0]:C.h)>>>0).toString(x);if(C=M,k(C))return U+V;for(;U.length<6;)U="0"+U;V=U+V}},s.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function k(x){if(x.h!=0)return!1;for(let R=0;R<x.g.length;R++)if(x.g[R]!=0)return!1;return!0}function j(x){return x.h==-1}s.l=function(x){return x=F(this,x),j(x)?-1:k(x)?0:1};function D(x){const R=x.g.length,C=[];for(let V=0;V<R;V++)C[V]=~x.g[V];return new c(C,~x.h).add(w)}s.abs=function(){return j(this)?D(this):this},s.add=function(x){const R=Math.max(this.g.length,x.g.length),C=[];let V=0;for(let M=0;M<=R;M++){let U=V+(this.i(M)&65535)+(x.i(M)&65535),N=(U>>>16)+(this.i(M)>>>16)+(x.i(M)>>>16);V=N>>>16,U&=65535,N&=65535,C[M]=N<<16|U}return new c(C,C[C.length-1]&-2147483648?-1:0)};function F(x,R){return x.add(D(R))}s.j=function(x){if(k(this)||k(x))return E;if(j(this))return j(x)?D(this).j(D(x)):D(D(this).j(x));if(j(x))return D(this.j(D(x)));if(this.l(I)<0&&x.l(I)<0)return p(this.m()*x.m());const R=this.g.length+x.g.length,C=[];for(var V=0;V<2*R;V++)C[V]=0;for(V=0;V<this.g.length;V++)for(let M=0;M<x.g.length;M++){const U=this.i(V)>>>16,N=this.i(V)&65535,qe=x.i(M)>>>16,dt=x.i(M)&65535;C[2*V+2*M]+=N*dt,ne(C,2*V+2*M),C[2*V+2*M+1]+=U*dt,ne(C,2*V+2*M+1),C[2*V+2*M+1]+=N*qe,ne(C,2*V+2*M+1),C[2*V+2*M+2]+=U*qe,ne(C,2*V+2*M+2)}for(x=0;x<R;x++)C[x]=C[2*x+1]<<16|C[2*x];for(x=R;x<2*R;x++)C[x]=0;return new c(C,0)};function ne(x,R){for(;(x[R]&65535)!=x[R];)x[R+1]+=x[R]>>>16,x[R]&=65535,R++}function Z(x,R){this.g=x,this.h=R}function ce(x,R){if(k(R))throw Error("division by zero");if(k(x))return new Z(E,E);if(j(x))return R=ce(D(x),R),new Z(D(R.g),D(R.h));if(j(R))return R=ce(x,D(R)),new Z(D(R.g),R.h);if(x.g.length>30){if(j(x)||j(R))throw Error("slowDivide_ only works with positive integers.");for(var C=w,V=R;V.l(x)<=0;)C=ie(C),V=ie(V);var M=W(C,1),U=W(V,1);for(V=W(V,2),C=W(C,2);!k(V);){var N=U.add(V);N.l(x)<=0&&(M=M.add(C),U=N),V=W(V,1),C=W(C,1)}return R=F(x,M.j(R)),new Z(M,R)}for(M=E;x.l(R)>=0;){for(C=Math.max(1,Math.floor(x.m()/R.m())),V=Math.ceil(Math.log(C)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),U=p(C),N=U.j(R);j(N)||N.l(x)>0;)C-=V,U=p(C),N=U.j(R);k(U)&&(U=w),M=M.add(U),x=F(x,N)}return new Z(M,x)}s.B=function(x){return ce(this,x).h},s.and=function(x){const R=Math.max(this.g.length,x.g.length),C=[];for(let V=0;V<R;V++)C[V]=this.i(V)&x.i(V);return new c(C,this.h&x.h)},s.or=function(x){const R=Math.max(this.g.length,x.g.length),C=[];for(let V=0;V<R;V++)C[V]=this.i(V)|x.i(V);return new c(C,this.h|x.h)},s.xor=function(x){const R=Math.max(this.g.length,x.g.length),C=[];for(let V=0;V<R;V++)C[V]=this.i(V)^x.i(V);return new c(C,this.h^x.h)};function ie(x){const R=x.g.length+1,C=[];for(let V=0;V<R;V++)C[V]=x.i(V)<<1|x.i(V-1)>>>31;return new c(C,x.h)}function W(x,R){const C=R>>5;R%=32;const V=x.g.length-C,M=[];for(let U=0;U<V;U++)M[U]=R>0?x.i(U+C)>>>R|x.i(U+C+1)<<32-R:x.i(U+C);return new c(M,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,o1=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,Wr=c}).apply(typeof Wv<"u"?Wv:typeof self<"u"?self:typeof window<"u"?window:{});var Ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var l1,cu,u1,Lh,xg,c1,h1,f1;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ih=="object"&&Ih];for(var y=0;y<h.length;++y){var b=h[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=t(this);function o(h,y){if(y)e:{var b=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var H=h[A];if(!(H in b))break e;b=b[H]}h=h[h.length-1],A=b[h],y=y(A),y!=A&&y!=null&&e(b,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var b=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&b.push([A,y[A]]);return b}});var u=u||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,b){return h.call.apply(h.bind,arguments)}function p(h,y,b){return p=g,p.apply(null,arguments)}function v(h,y){var b=Array.prototype.slice.call(arguments,1);return function(){var A=b.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function E(h,y){function b(){}b.prototype=y.prototype,h.Z=y.prototype,h.prototype=new b,h.prototype.constructor=h,h.Ob=function(A,H,J){for(var ge=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)ge[Ue-2]=arguments[Ue];return y.prototype[H].apply(A,ge)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function I(h){const y=h.length;if(y>0){const b=Array(y);for(let A=0;A<y;A++)b[A]=h[A];return b}return[]}function k(h,y){for(let A=1;A<arguments.length;A++){const H=arguments[A];var b=typeof H;if(b=b!="object"?b:H?Array.isArray(H)?"array":b:"null",b=="array"||b=="object"&&typeof H.length=="number"){b=h.length||0;const J=H.length||0;h.length=b+J;for(let ge=0;ge<J;ge++)h[b+ge]=H[ge]}else h.push(H)}}class j{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function D(h){c.setTimeout(()=>{throw h},0)}function F(){var h=x;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ne{constructor(){this.h=this.g=null}add(y,b){const A=Z.get();A.set(y,b),this.h?this.h.next=A:this.g=A,this.h=A}}var Z=new j(()=>new ce,h=>h.reset());class ce{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,W=!1,x=new ne,R=()=>{const h=Promise.resolve(void 0);ie=()=>{h.then(C)}};function C(){for(var h;h=F();){try{h.h.call(h.g)}catch(b){D(b)}var y=Z;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}W=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};c.addEventListener("test",b,y),c.removeEventListener("test",b,y)}catch{}return h})();function N(h){return/^[\s\xa0]*$/.test(h)}function qe(h,y){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(qe,M),qe.prototype.init=function(h,y){const b=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(b=="mouseover"?y=h.fromElement:b=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&qe.Z.h.call(this)},qe.prototype.h=function(){qe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var dt="closure_listenable_"+(Math.random()*1e6|0),te=0;function he(h,y,b,A,H){this.listener=h,this.proxy=null,this.src=y,this.type=b,this.capture=!!A,this.ha=H,this.key=++te,this.da=this.fa=!1}function be(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Me(h,y,b){for(const A in h)y.call(b,h[A],A,h)}function ze(h,y){for(const b in h)y.call(void 0,h[b],b,h)}function P(h){const y={};for(const b in h)y[b]=h[b];return y}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(h,y){let b,A;for(let H=1;H<arguments.length;H++){A=arguments[H];for(b in A)h[b]=A[b];for(let J=0;J<se.length;J++)b=se[J],Object.prototype.hasOwnProperty.call(A,b)&&(h[b]=A[b])}}function de(h){this.src=h,this.g={},this.h=0}de.prototype.add=function(h,y,b,A,H){const J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);const ge=Ae(h,y,A,H);return ge>-1?(y=h[ge],b||(y.fa=!1)):(y=new he(y,this.src,J,!!A,H),y.fa=b,h.push(y)),y};function _e(h,y){const b=y.type;if(b in h.g){var A=h.g[b],H=Array.prototype.indexOf.call(A,y,void 0),J;(J=H>=0)&&Array.prototype.splice.call(A,H,1),J&&(be(y),h.g[b].length==0&&(delete h.g[b],h.h--))}}function Ae(h,y,b,A){for(let H=0;H<h.length;++H){const J=h[H];if(!J.da&&J.listener==y&&J.capture==!!b&&J.ha==A)return H}return-1}var Le="closure_lm_"+(Math.random()*1e6|0),Dt={};function ut(h,y,b,A,H){if(Array.isArray(y)){for(let J=0;J<y.length;J++)ut(h,y[J],b,A,H);return null}return b=Hi(b),h&&h[dt]?h.J(y,b,m(A)?!!A.capture:!1,H):Ht(h,y,b,!1,A,H)}function Ht(h,y,b,A,H,J){if(!y)throw Error("Invalid event type");const ge=m(H)?!!H.capture:!!H;let Ue=Pn(h);if(Ue||(h[Le]=Ue=new de(h)),b=Ue.add(y,b,A,ge,J),b.proxy)return b;if(A=Si(),b.proxy=A,A.src=h,A.listener=b,h.addEventListener)U||(H=ge),H===void 0&&(H=!1),h.addEventListener(y.toString(),A,H);else if(h.attachEvent)h.attachEvent(Jt(y.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Si(){function h(b){return y.call(h.src,h.listener,b)}const y=fi;return h}function Vn(h,y,b,A,H){if(Array.isArray(y))for(var J=0;J<y.length;J++)Vn(h,y[J],b,A,H);else A=m(A)?!!A.capture:!!A,b=Hi(b),h&&h[dt]?(h=h.i,J=String(y).toString(),J in h.g&&(y=h.g[J],b=Ae(y,b,A,H),b>-1&&(be(y[b]),Array.prototype.splice.call(y,b,1),y.length==0&&(delete h.g[J],h.h--)))):h&&(h=Pn(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ae(y,b,A,H)),(b=h>-1?y[h]:null)&&qi(b))}function qi(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[dt])_e(y.i,h);else{var b=h.type,A=h.proxy;y.removeEventListener?y.removeEventListener(b,A,h.capture):y.detachEvent?y.detachEvent(Jt(b),A):y.addListener&&y.removeListener&&y.removeListener(A),(b=Pn(y))?(_e(b,h),b.h==0&&(b.src=null,y[Le]=null)):be(h)}}}function Jt(h){return h in Dt?Dt[h]:Dt[h]="on"+h}function fi(h,y){if(h.da)h=!0;else{y=new qe(y,this);const b=h.listener,A=h.ha||h.src;h.fa&&qi(h),h=b.call(A,y)}return h}function Pn(h){return h=h[Le],h instanceof de?h:null}var as="__closure_events_fn_"+(Math.random()*1e9>>>0);function Hi(h){return typeof h=="function"?h:(h[as]||(h[as]=function(y){return h.handleEvent(y)}),h[as])}function St(){V.call(this),this.i=new de(this),this.M=this,this.G=null}E(St,V),St.prototype[dt]=!0,St.prototype.removeEventListener=function(h,y,b,A){Vn(this,h,y,b,A)};function ct(h,y){var b,A=h.G;if(A)for(b=[];A;A=A.G)b.push(A);if(h=h.M,A=y.type||y,typeof y=="string")y=new M(y,h);else if(y instanceof M)y.target=y.target||h;else{var H=y;y=new M(A,h),me(y,H)}H=!0;let J,ge;if(b)for(ge=b.length-1;ge>=0;ge--)J=y.g=b[ge],H=Hn(J,A,!0,y)&&H;if(J=y.g=h,H=Hn(J,A,!0,y)&&H,H=Hn(J,A,!1,y)&&H,b)for(ge=0;ge<b.length;ge++)J=y.g=b[ge],H=Hn(J,A,!1,y)&&H}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const b=h.g[y];for(let A=0;A<b.length;A++)be(b[A]);delete h.g[y],h.h--}}this.G=null},St.prototype.J=function(h,y,b,A){return this.i.add(String(h),y,!1,b,A)},St.prototype.K=function(h,y,b,A){return this.i.add(String(h),y,!0,b,A)};function Hn(h,y,b,A){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let J=0;J<y.length;++J){const ge=y[J];if(ge&&!ge.da&&ge.capture==b){const Ue=ge.listener,$t=ge.ha||ge.src;ge.fa&&_e(h.i,ge),H=Ue.call($t,A)!==!1&&H}}return H&&!A.defaultPrevented}function os(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function ls(h){h.g=os(()=>{h.g=null,h.i&&(h.i=!1,ls(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Zt extends V{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ls(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fi(h){V.call(this),this.h=h,this.g={}}E(Fi,V);var Rs=[];function Fn(h){Me(h.g,function(y,b){this.g.hasOwnProperty(b)&&qi(y)},h),h.g={}}Fi.prototype.N=function(){Fi.Z.N.call(this),Fn(this)},Fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sn=c.JSON.stringify,Gi=c.JSON.parse,Cs=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Gn(){}function Is(){}var Kn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ft(){M.call(this,"d")}E(Ft,M);function pn(){M.call(this,"c")}E(pn,M);var At={},Ns=null;function Ki(){return Ns=Ns||new St}At.Ia="serverreachability";function rr(h){M.call(this,At.Ia,h)}E(rr,M);function ti(h){const y=Ki();ct(y,new rr(y))}At.STAT_EVENT="statevent";function $i(h,y){M.call(this,At.STAT_EVENT,h),this.stat=y}E($i,M);function He(h){const y=Ki();ct(y,new $i(y,h))}At.Ja="timingevent";function xt(h,y){M.call(this,At.Ja,h),this.size=y}E(xt,M);function Rt(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function Ut(){this.g=!0}Ut.prototype.ua=function(){this.g=!1};function yn(h,y,b,A,H,J){h.info(function(){if(h.g)if(J){var ge="",Ue=J.split("&");for(let ot=0;ot<Ue.length;ot++){var $t=Ue[ot].split("=");if($t.length>1){const Mt=$t[0];$t=$t[1];const Oi=Mt.split("_");ge=Oi.length>=2&&Oi[1]=="type"?ge+(Mt+"="+$t+"&"):ge+(Mt+"=redacted&")}}}else ge=null;else ge=J;return"XMLHTTP REQ ("+A+") [attempt "+H+"]: "+y+`
`+b+`
`+ge})}function Wt(h,y,b,A,H,J,ge){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+H+"]: "+y+`
`+b+`
`+J+" "+ge})}function Vt(h,y,b,A){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+mt(h,b)+(A?" "+A:"")})}function Y(h,y){h.info(function(){return"TIMEOUT: "+y})}Ut.prototype.info=function(){};function mt(h,y){if(!h.g)return y;if(!y)return null;try{const J=JSON.parse(y);if(J){for(h=0;h<J.length;h++)if(Array.isArray(J[h])){var b=J[h];if(!(b.length<2)){var A=b[1];if(Array.isArray(A)&&!(A.length<1)){var H=A[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ge=1;ge<A.length;ge++)A[ge]=""}}}}return Sn(J)}catch{return y}}var gt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},fe;function cn(){}E(cn,Gn),cn.prototype.g=function(){return new XMLHttpRequest},fe=new cn;function tt(h){return encodeURIComponent(String(h))}function Ot(h){var y=1;h=h.split(":");const b=[];for(;y>0&&h.length;)b.push(h.shift()),y--;return h.length&&b.push(h.join(":")),b}function hn(h,y,b,A){this.j=h,this.i=y,this.l=b,this.S=A||1,this.V=new Fi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pt}function pt(){this.i=null,this.g="",this.h=!1}var Pt={},Kt={};function Ee(h,y,b){h.M=1,h.A=Ii($(y)),h.u=b,h.R=!0,ar(h,null)}function ar(h,y){h.F=Date.now(),Ai(h),h.B=$(h.A);var b=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),eo(b.i,"t",A),h.C=0,b=h.j.L,h.h=new pt,h.g=Tc(h.j,b?y:null,!h.u),h.P>0&&(h.O=new Zt(p(h.Y,h,h.g),h.P)),y=h.V,b=h.g,A=h.ba;var H="readystatechange";Array.isArray(H)||(H&&(Rs[0]=H.toString()),H=Rs);for(let J=0;J<H.length;J++){const ge=ut(b,H[J],A||y.handleEvent,!1,y.h||y);if(!ge)break;y.g[ge.key]=ge}y=h.J?P(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),ti(),yn(h.i,h.v,h.B,h.l,h.S,h.u)}hn.prototype.ba=function(h){h=h.target;const y=this.O;y&&Xi(h)==3?y.j():this.Y(h)},hn.prototype.Y=function(h){try{if(h==this.g)e:{const Ue=Xi(this.g),$t=this.g.ya(),ot=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||An(this.g)))){this.K||Ue!=4||$t==7||($t==8||ot<=0?ti(3):ti(2)),xi(this);var y=this.g.ca();this.X=y;var b=Ja(this);if(this.o=y==200,Wt(this.i,this.v,this.B,this.l,this.S,Ue,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,H=this.g;if((A=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(A)){var J=A;break t}}J=null}if(h=J)Vt(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ri(this,h);else{this.o=!1,this.m=3,He(12),Ln(this),$n(this);break e}}if(this.R){h=!0;let Mt;for(;!this.K&&this.C<b.length;)if(Mt=da(this,b),Mt==Kt){Ue==4&&(this.m=4,He(14),h=!1),Vt(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==Pt){this.m=4,He(15),Vt(this.i,this.l,b,"[Invalid Chunk]"),h=!1;break}else Vt(this.i,this.l,Mt,null),Ri(this,Mt);if(Za(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||b.length!=0||this.h.h||(this.m=1,He(16),h=!1),this.o=this.o&&h,!h)Vt(this.i,this.l,b,"[Invalid Chunked Response]"),Ln(this),$n(this);else if(b.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Sl(ge),ge.P=!0,He(11))}}else Vt(this.i,this.l,b,null),Ri(this,b);Ue==4&&Ln(this),this.o&&!this.K&&(Ue==4?_c(this.j,this):(this.o=!1,Ai(this)))}else Os(this.g),y==400&&b.indexOf("Unknown SID")>0?(this.m=3,He(12)):(this.m=0,He(13)),Ln(this),$n(this)}}}catch{}};function Ja(h){if(!Za(h))return h.g.la();const y=An(h.g);if(y==="")return"";let b="";const A=y.length,H=Xi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Ln(h),$n(h),"";h.h.i=new c.TextDecoder}for(let J=0;J<A;J++)h.h.h=!0,b+=h.h.i.decode(y[J],{stream:!(H&&J==A-1)});return y.length=0,h.h.g+=b,h.C=0,h.h.g}function Za(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function da(h,y){var b=h.C,A=y.indexOf(`
`,b);return A==-1?Kt:(b=Number(y.substring(b,A)),isNaN(b)?Pt:(A+=1,A+b>y.length?Kt:(y=y.slice(A,A+b),h.C=A+b,y)))}hn.prototype.cancel=function(){this.K=!0,Ln(this)};function Ai(h){h.T=Date.now()+h.H,or(h,h.H)}function or(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Rt(p(h.aa,h),y)}function xi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}hn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Y(this.i,this.B),this.M!=2&&(ti(),He(17)),Ln(this),this.m=2,$n(this)):or(this,this.T-h)};function $n(h){h.j.I==0||h.K||_c(h.j,h)}function Ln(h){xi(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Fn(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Ri(h,y){try{var b=h.j;if(b.I!=0&&(b.g==h||Ci(b.h,h))){if(!h.L&&Ci(b.h,h)&&b.I==3){try{var A=b.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var H=A;if(H[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<h.F)ro(b),pr(b);else break e;wa(b),He(18)}}else b.xa=H[1],0<b.xa-b.K&&H[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Rt(p(b.Va,b),6e3));ni(b.h)<=1&&b.ta&&(b.ta=void 0)}else ms(b,11)}else if((h.L||b.g==h)&&ro(b),!N(y))for(H=b.Ba.g.parse(y),y=0;y<H.length;y++){let ot=H[y];const Mt=ot[0];if(!(Mt<=b.K))if(b.K=Mt,ot=ot[1],b.I==2)if(ot[0]=="c"){b.M=ot[1],b.ba=ot[2];const Oi=ot[3];Oi!=null&&(b.ka=Oi,b.j.info("VER="+b.ka));const gs=ot[4];gs!=null&&(b.za=gs,b.j.info("SVER="+b.za));const Ji=ot[5];Ji!=null&&typeof Ji=="number"&&Ji>0&&(A=1.5*Ji,b.O=A,b.j.info("backChannelRequestTimeoutMs_="+A)),A=b;const Zi=h.g;if(Zi){const Sa=Zi.g?Zi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sa){var J=A.h;J.g||Sa.indexOf("spdy")==-1&&Sa.indexOf("quic")==-1&&Sa.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(ga(J,J.h),J.h=null))}if(A.G){const ao=Zi.g?Zi.g.getResponseHeader("X-HTTP-Session-Id"):null;ao&&(A.wa=ao,Fe(A.J,A.G,ao))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-h.F,b.j.info("Handshake RTT: "+b.T+"ms")),A=b;var ge=h;if(A.na=Ec(A,A.L?A.ba:null,A.W),ge.L){ur(A.h,ge);var Ue=ge,$t=A.O;$t&&(Ue.H=$t),Ue.D&&(xi(Ue),Ai(Ue)),A.g=ge}else pc(A);b.i.length>0&&ds(b)}else ot[0]!="stop"&&ot[0]!="close"||ms(b,7);else b.I==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?ms(b,7):Tl(b):ot[0]!="noop"&&b.l&&b.l.qa(ot),b.A=0)}}ti(4)}catch{}}var jt=class{constructor(h,y){this.g=h,this.map=y}};function ma(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function lr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ni(h){return h.h?1:h.g?h.g.size:0}function Ci(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function ga(h,y){h.g?h.g.add(y):h.h=y}function ur(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}ma.prototype.cancel=function(){if(this.i=pa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function pa(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const b of h.g.values())y=y.concat(b.G);return y}return I(h.i)}var en=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function B(h,y){if(h){h=h.split("&");for(let b=0;b<h.length;b++){const A=h[b].indexOf("=");let H,J=null;A>=0?(H=h[b].substring(0,A),J=h[b].substring(A+1)):H=h[b],y(H,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function X(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof X?(this.l=h.l,ye(this,h.j),this.o=h.o,this.g=h.g,Se(this,h.u),this.h=h.h,We(this,mc(h.i)),this.m=h.m):h&&(y=String(h).match(en))?(this.l=!1,ye(this,y[1]||"",!0),this.o=us(y[2]||""),this.g=us(y[3]||"",!0),Se(this,y[4]),this.h=us(y[5]||"",!0),We(this,y[6]||"",!0),this.m=us(y[7]||"")):(this.l=!1,this.i=new hr(null,this.l))}X.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(ya(y,Wa,!0),":");var b=this.g;return(b||y=="file")&&(h.push("//"),(y=this.o)&&h.push(ya(y,Wa,!0),"@"),h.push(tt(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&h.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(ya(b,b.charAt(0)=="/"?pl:hc,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",ya(b,fc)),h.join("")},X.prototype.resolve=function(h){const y=$(this);let b=!!h.j;b?ye(y,h.j):b=!!h.o,b?y.o=h.o:b=!!h.g,b?y.g=h.g:b=h.u!=null;var A=h.h;if(b)Se(y,h.u);else if(b=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var H=y.h.lastIndexOf("/");H!=-1&&(A=y.h.slice(0,H+1)+A)}if(H=A,H==".."||H==".")A="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){A=H.lastIndexOf("/",0)==0,H=H.split("/");const J=[];for(let ge=0;ge<H.length;){const Ue=H[ge++];Ue=="."?A&&ge==H.length&&J.push(""):Ue==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),A&&ge==H.length&&J.push("")):(J.push(Ue),A=!0)}A=J.join("/")}else A=H}return b?y.h=A:b=h.i.toString()!=="",b?We(y,mc(h.i)):b=!!h.m,b&&(y.m=h.m),y};function $(h){return new X(h)}function ye(h,y,b){h.j=b?us(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Se(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function We(h,y,b){y instanceof hr?(h.i=y,to(h.i,h.l)):(b||(y=ya(y,cr)),h.i=new hr(y,h.l))}function Fe(h,y,b){h.i.set(y,b)}function Ii(h){return Fe(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function us(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ya(h,y,b){return typeof h=="string"?(h=encodeURI(h).replace(y,ii),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ii(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Wa=/[#\/\?@]/g,hc=/[#\?:]/g,pl=/[#\?]/g,cr=/[#\?@]/g,fc=/#/g;function hr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function si(h){h.g||(h.g=new Map,h.h=0,h.i&&B(h.i,function(y,b){h.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}s=hr.prototype,s.add=function(h,y){si(this),this.i=null,h=fr(this,h);let b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(y),this.h+=1,this};function dc(h,y){si(h),y=fr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function yl(h,y){return si(h),y=fr(h,y),h.g.has(y)}s.forEach=function(h,y){si(this),this.g.forEach(function(b,A){b.forEach(function(H){h.call(y,H,A,this)},this)},this)};function _l(h,y){si(h);let b=[];if(typeof y=="string")yl(h,y)&&(b=b.concat(h.g.get(fr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)b=b.concat(h[y]);return b}s.set=function(h,y){return si(this),this.i=null,h=fr(this,h),yl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=_l(this,h),h.length>0?String(h[0]):y):y};function eo(h,y,b){dc(h,y),b.length>0&&(h.i=null,h.g.set(fr(h,y),I(b)),h.h+=b.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var b=y[A];const H=tt(b);b=_l(this,b);for(let J=0;J<b.length;J++){let ge=H;b[J]!==""&&(ge+="="+tt(b[J])),h.push(ge)}}return this.i=h.join("&")};function mc(h){const y=new hr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function fr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function to(h,y){y&&!h.j&&(si(h),h.i=null,h.g.forEach(function(b,A){const H=A.toLowerCase();A!=H&&(dc(this,A),eo(this,H,b))},h)),h.j=y}function Qi(h,y){const b=new Ut;if(c.Image){const A=new Image;A.onload=v(Ni,b,"TestLoadImage: loaded",!0,y,A),A.onerror=v(Ni,b,"TestLoadImage: error",!1,y,A),A.onabort=v(Ni,b,"TestLoadImage: abort",!1,y,A),A.ontimeout=v(Ni,b,"TestLoadImage: timeout",!1,y,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else y(!1)}function vl(h,y){const b=new Ut,A=new AbortController,H=setTimeout(()=>{A.abort(),Ni(b,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:A.signal}).then(J=>{clearTimeout(H),J.ok?Ni(b,"TestPingServer: ok",!0,y):Ni(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),Ni(b,"TestPingServer: error",!1,y)})}function Ni(h,y,b,A,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),A(b)}catch{}}function dr(){this.g=new Cs}function cs(h){this.i=h.Sb||null,this.h=h.ab||!1}E(cs,Gn),cs.prototype.g=function(){return new _a(this.i,this.h)};function _a(h,y){St.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(_a,St),s=_a.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Yi(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,mr(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Yi(this)),this.g&&(this.readyState=3,Yi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;no(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function no(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?mr(this):Yi(this),this.readyState==3&&no(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,mr(this))},s.Na=function(h){this.g&&(this.response=h,mr(this))},s.ga=function(){this.g&&mr(this)};function mr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Yi(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=y.next();return h.join(`\r
`)};function Yi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(_a.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Di(h){let y="";return Me(h,function(b,A){y+=A,y+=":",y+=b,y+=`\r
`}),y}function va(h,y,b){e:{for(A in b){var A=!1;break e}A=!0}A||(b=Di(b),typeof h=="string"?b!=null&&tt(b):Fe(h,y,b))}function yt(h){St.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(yt,St);var hs=/^https?$/i,bl=["POST","PUT"];s=yt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,b,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():fe.g(),this.g.onreadystatechange=w(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(J){ba(this,J);return}if(h=b||"",b=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var H in A)b.set(H,A[H]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const J of A.keys())b.set(J,A.get(J));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(b.keys()).find(J=>J.toLowerCase()=="content-type"),H=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(bl,y,void 0)>=0)||A||H||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ge]of b)this.g.setRequestHeader(J,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(J){ba(this,J)}};function ba(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,El(h),Ds(h)}function El(h){h.A||(h.A=!0,ct(h,"complete"),ct(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,ct(this,"complete"),ct(this,"abort"),Ds(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ds(this,!0)),yt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ea(this):this.Xa())},s.Xa=function(){Ea(this)};function Ea(h){if(h.h&&typeof u<"u"){if(h.v&&Xi(h)==4)setTimeout(h.Ca.bind(h),0);else if(ct(h,"readystatechange"),Xi(h)==4){h.h=!1;try{const J=h.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var A;if(A=J===0){let ge=String(h.D).match(en)[1]||null;!ge&&c.self&&c.self.location&&(ge=c.self.location.protocol.slice(0,-1)),A=!hs.test(ge?ge.toLowerCase():"")}b=A}if(b)ct(h,"complete"),ct(h,"success");else{h.o=6;try{var H=Xi(h)>2?h.g.statusText:""}catch{H=""}h.l=H+" ["+h.ca()+"]",El(h)}}finally{Ds(h)}}}}function Ds(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const b=h.g;h.g=null,y||ct(h,"ready");try{b.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Xi(h){return h.g?h.g.readyState:0}s.ca=function(){try{return Xi(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Gi(y)}};function An(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Os(h){const y={};h=(h.g&&Xi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(N(h[A]))continue;var b=Ot(h[A]);const H=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const J=y[H]||[];y[H]=J,J.push(b)}ze(y,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fs(h,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||y}function gr(h){this.za=0,this.i=[],this.j=new Ut,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fs("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fs("baseRetryDelayMs",5e3,h),this.Za=fs("retryDelaySeedMs",1e4,h),this.Ta=fs("forwardChannelMaxRetries",2,h),this.va=fs("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ma(h&&h.concurrentRequestLimit),this.Ba=new dr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=gr.prototype,s.ka=8,s.I=1,s.connect=function(h,y,b,A){He(0),this.W=h,this.H=y||{},b&&A!==void 0&&(this.H.OSID=b,this.H.OAID=A),this.F=this.X,this.J=Ec(this,null,this.W),ds(this)};function Tl(h){if(io(h),h.I==3){var y=h.V++,b=$(h.J);if(Fe(b,"SID",h.M),Fe(b,"RID",y),Fe(b,"TYPE","terminate"),Ta(h,b),y=new hn(h,h.j,y),y.M=2,y.A=Ii($(b)),b=!1,c.navigator&&c.navigator.sendBeacon)try{b=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!b&&c.Image&&(new Image().src=y.A,b=!0),b||(y.g=Tc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ai(y)}bc(h)}function pr(h){h.g&&(Sl(h),h.g.cancel(),h.g=null)}function io(h){pr(h),h.v&&(c.clearTimeout(h.v),h.v=null),ro(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function ds(h){if(!lr(h.h)&&!h.m){h.m=!0;var y=h.Ea;ie||R(),W||(ie(),W=!0),x.add(y,h),h.D=0}}function so(h,y){return ni(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Rt(p(h.Ea,h,y),vc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const H=new hn(this,this.j,h);let J=this.o;if(this.U&&(J?(J=P(J),me(J,this.U)):J=this.U),this.u!==null||this.R||(H.J=J,J=null),this.S)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var A=this.i[b];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=gc(this,H,y),b=$(this.J),Fe(b,"RID",h),Fe(b,"CVER",22),this.G&&Fe(b,"X-HTTP-Session-Id",this.G),Ta(this,b),J&&(this.R?y="headers="+tt(Di(J))+"&"+y:this.u&&va(b,this.u,J)),ga(this.h,H),this.Ra&&Fe(b,"TYPE","init"),this.S?(Fe(b,"$req",y),Fe(b,"SID","null"),H.U=!0,Ee(H,b,null)):Ee(H,b,y),this.I=2}}else this.I==3&&(h?wl(this,h):this.i.length==0||lr(this.h)||wl(this))};function wl(h,y){var b;y?b=y.l:b=h.V++;const A=$(h.J);Fe(A,"SID",h.M),Fe(A,"RID",b),Fe(A,"AID",h.K),Ta(h,A),h.u&&h.o&&va(A,h.u,h.o),b=new hn(h,h.j,b,h.D+1),h.u===null&&(b.J=h.o),y&&(h.i=y.G.concat(h.i)),y=gc(h,b,1e3),b.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),ga(h.h,b),Ee(b,A,y)}function Ta(h,y){h.H&&Me(h.H,function(b,A){Fe(y,A,b)}),h.l&&Me({},function(b,A){Fe(y,A,b)})}function gc(h,y,b){b=Math.min(h.i.length,b);const A=h.l?p(h.l.Ka,h.l,h):null;e:{var H=h.i;let Ue=-1;for(;;){const $t=["count="+b];Ue==-1?b>0?(Ue=H[0].g,$t.push("ofs="+Ue)):Ue=0:$t.push("ofs="+Ue);let ot=!0;for(let Mt=0;Mt<b;Mt++){var J=H[Mt].g;const Oi=H[Mt].map;if(J-=Ue,J<0)Ue=Math.max(0,H[Mt].g-100),ot=!1;else try{J="req"+J+"_"||"";try{var ge=Oi instanceof Map?Oi:Object.entries(Oi);for(const[gs,Ji]of ge){let Zi=Ji;m(Ji)&&(Zi=Sn(Ji)),$t.push(J+gs+"="+encodeURIComponent(Zi))}}catch(gs){throw $t.push(J+"type="+encodeURIComponent("_badmap")),gs}}catch{A&&A(Oi)}}if(ot){ge=$t.join("&");break e}}ge=void 0}return h=h.i.splice(0,b),y.G=h,ge}function pc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ie||R(),W||(ie(),W=!0),x.add(y,h),h.A=0}}function wa(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Rt(p(h.Da,h),vc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,yc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Rt(p(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,He(10),pr(this),yc(this))};function Sl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function yc(h){h.g=new hn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=$(h.na);Fe(y,"RID","rpc"),Fe(y,"SID",h.M),Fe(y,"AID",h.K),Fe(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Fe(y,"TO",h.ia),Fe(y,"TYPE","xmlhttp"),Ta(h,y),h.u&&h.o&&va(y,h.u,h.o),h.O&&(h.g.H=h.O);var b=h.g;h=h.ba,b.M=1,b.A=Ii($(y)),b.u=null,b.R=!0,ar(b,h)}s.Va=function(){this.C!=null&&(this.C=null,pr(this),wa(this),He(19))};function ro(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function _c(h,y){var b=null;if(h.g==y){ro(h),Sl(h),h.g=null;var A=2}else if(Ci(h.h,y))b=y.G,ur(h.h,y),A=1;else return;if(h.I!=0){if(y.o)if(A==1){b=y.u?y.u.length:0,y=Date.now()-y.F;var H=h.D;A=Ki(),ct(A,new xt(A,b)),ds(h)}else pc(h);else if(H=y.m,H==3||H==0&&y.X>0||!(A==1&&so(h,y)||A==2&&wa(h)))switch(b&&b.length>0&&(y=h.h,y.i=y.i.concat(b)),H){case 1:ms(h,5);break;case 4:ms(h,10);break;case 3:ms(h,6);break;default:ms(h,2)}}}function vc(h,y){let b=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(b*=2),b*y}function ms(h,y){if(h.j.info("Error code "+y),y==2){var b=p(h.bb,h),A=h.Ua;const H=!A;A=new X(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ye(A,"https"),Ii(A),H?Qi(A.toString(),b):vl(A.toString(),b)}else He(2);h.I=0,h.l&&h.l.pa(y),bc(h),io(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),He(2)):(this.j.info("Failed to ping google.com"),He(1))};function bc(h){if(h.I=0,h.ja=[],h.l){const y=pa(h.h);(y.length!=0||h.i.length!=0)&&(k(h.ja,y),k(h.ja,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.oa()}}function Ec(h,y,b){var A=b instanceof X?$(b):new X(b);if(A.g!="")y&&(A.g=y+"."+A.g),Se(A,A.u);else{var H=c.location;A=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const J=new X(null);A&&ye(J,A),y&&(J.g=y),H&&Se(J,H),b&&(J.h=b),A=J}return b=h.G,y=h.wa,b&&y&&Fe(A,b,y),Fe(A,"VER",h.ka),Ta(h,A),A}function Tc(h,y,b){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new yt(new cs({ab:b})):new yt(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function wc(){}s=wc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function yr(){}yr.prototype.g=function(h,y){return new Qn(h,y)};function Qn(h,y){St.call(this),this.g=new gr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!N(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!N(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Ms(this)}E(Qn,St),Qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qn.prototype.close=function(){Tl(this.g)},Qn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.v&&(b={},b.__data__=Sn(h),h=b);y.i.push(new jt(y.Ya++,h)),y.I==3&&ds(y)},Qn.prototype.N=function(){this.g.l=null,delete this.j,Tl(this.g),delete this.g,Qn.Z.N.call(this)};function Sc(h){Ft.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const b in y){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(Sc,Ft);function Ac(){pn.call(this),this.status=1}E(Ac,pn);function Ms(h){this.g=h}E(Ms,wc),Ms.prototype.ra=function(){ct(this.g,"a")},Ms.prototype.qa=function(h){ct(this.g,new Sc(h))},Ms.prototype.pa=function(h){ct(this.g,new Ac)},Ms.prototype.oa=function(){ct(this.g,"b")},yr.prototype.createWebChannel=yr.prototype.g,Qn.prototype.send=Qn.prototype.o,Qn.prototype.open=Qn.prototype.m,Qn.prototype.close=Qn.prototype.close,f1=function(){return new yr},h1=function(){return Ki()},c1=At,xg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},gt.NO_ERROR=0,gt.TIMEOUT=8,gt.HTTP_ERROR=6,Lh=gt,Gt.COMPLETE="complete",u1=Gt,Is.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",St.prototype.listen=St.prototype.J,cu=Is,yt.prototype.listenOnce=yt.prototype.K,yt.prototype.getLastError=yt.prototype.Ha,yt.prototype.getLastErrorCode=yt.prototype.ya,yt.prototype.getStatus=yt.prototype.ca,yt.prototype.getResponseJson=yt.prototype.La,yt.prototype.getResponseText=yt.prototype.la,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Fa,l1=yt}).apply(typeof Ih<"u"?Ih:typeof self<"u"?self:typeof window<"u"?window:{});const eb="@firebase/firestore",tb="4.9.3";class Bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");let ll="12.7.0";const Ka=new ip("@firebase/firestore");function Lo(){return Ka.logLevel}function ve(s,...e){if(Ka.logLevel<=Xe.DEBUG){const t=e.map(ap);Ka.debug(`Firestore (${ll}): ${s}`,...t)}}function Ws(s,...e){if(Ka.logLevel<=Xe.ERROR){const t=e.map(ap);Ka.error(`Firestore (${ll}): ${s}`,...t)}}function Jo(s,...e){if(Ka.logLevel<=Xe.WARN){const t=e.map(ap);Ka.warn(`Firestore (${ll}): ${s}`,...t)}}function ap(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function Ce(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,d1(s,r,t)}function d1(s,e,t){let r=`FIRESTORE (${ll}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ws(r),new Error(r)}function it(s,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,s||d1(e,o,r)}function Ve(s,e){return s}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends sr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ea{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class m1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Bn.UNAUTHENTICATED)))}shutdown(){}}class P2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class L2{constructor(e){this.t=e,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let u=new ea;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ea,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ea)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(it(typeof r.accessToken=="string",31837,{l:r}),new m1(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new Bn(e)}}class U2{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class j2{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new U2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class nb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ns(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){it(this.o===void 0,3512);const r=u=>{u.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new nb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(it(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new nb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function B2(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}class op{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=B2(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%62))}return r}}function Je(s,e){return s<e?-1:s>e?1:0}function Rg(s,e){const t=Math.min(s.length,e.length);for(let r=0;r<t;r++){const o=s.charAt(r),u=e.charAt(r);if(o!==u)return ng(o)===ng(u)?Je(o,u):ng(o)?1:-1}return Je(s.length,e.length)}const q2=55296,H2=57343;function ng(s){const e=s.charCodeAt(0);return e>=q2&&e<=H2}function Zo(s,e,t){return s.length===e.length&&s.every(((r,o)=>t(r,e[o])))}const ib="__name__";class bs{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ce(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return bs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bs?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=bs.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return Je(e.length,t.length)}static compareSegments(e,t){const r=bs.isNumericId(e),o=bs.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?bs.extractNumericId(e).compare(bs.extractNumericId(t)):Rg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wr.fromString(e.substring(4,e.length-2))}}class Et extends bs{construct(e,t,r){return new Et(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new Et(t)}static emptyPath(){return new Et([])}}const F2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mn extends bs{construct(e,t,r){return new Mn(e,t,r)}static isValidIdentifier(e){return F2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ib}static keyField(){return new Mn([ib])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(r.length===0)throw new pe(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new pe(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new pe(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(r+=m,o++):(u(),o++)}if(u(),c)throw new pe(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mn(t)}static emptyPath(){return new Mn([])}}class xe{constructor(e){this.path=e}static fromPath(e){return new xe(Et.fromString(e))}static fromName(e){return new xe(Et.fromString(e).popFirst(5))}static empty(){return new xe(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new Et(e.slice()))}}function g1(s,e,t){if(!t)throw new pe(oe.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function G2(s,e,t,r){if(e===!0&&r===!0)throw new pe(oe.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function sb(s){if(!xe.isDocumentKey(s))throw new pe(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function rb(s){if(xe.isDocumentKey(s))throw new pe(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function p1(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function xf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ce(12329,{type:typeof s})}function Js(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new pe(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xf(s);throw new pe(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function un(s,e){const t={typeString:s};return e&&(t.value=e),t}function Qu(s,e){if(!p1(s))throw new pe(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){t=`JSON missing required field: '${r}'`;break}const c=s[r];if(o&&typeof c!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){t=`Expected '${r}' field to equal '${u.value}'`;break}}if(t)throw new pe(oe.INVALID_ARGUMENT,t);return!0}const ab=-62135596800,ob=1e6;class Nt{static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*ob);return new Nt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ab)throw new pe(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ob}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Qu(e,Nt._jsonSchema))return new Nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ab;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Nt._jsonSchemaVersion="firestore/timestamp/1.0",Nt._jsonSchema={type:un("string",Nt._jsonSchemaVersion),seconds:un("number"),nanoseconds:un("number")};class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new Nt(0,0))}static max(){return new Ne(new Nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ku=-1;function K2(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Ne.fromTimestamp(r===1e9?new Nt(t+1,0):new Nt(t,r));return new sa(o,xe.empty(),e)}function $2(s){return new sa(s.readTime,s.key,ku)}class sa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new sa(Ne.min(),xe.empty(),ku)}static max(){return new sa(Ne.max(),xe.empty(),ku)}}function Q2(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(s.documentKey,e.documentKey),t!==0?t:Je(s.largestBatchId,e.largestBatchId))}const Y2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ul(s){if(s.code!==oe.FAILED_PRECONDITION||s.message!==Y2)throw s;ve("LocalStore","Unexpectedly lost primary lease")}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.reject(t)}static resolve(e){return new ue(((t,r)=>{t(e)}))}static reject(e){return new ue(((t,r)=>{r(e)}))}static waitFor(e){return new ue(((t,r)=>{let o=0,u=0,c=!1;e.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&t()}),(g=>r(g)))})),c=!0,u===o&&t()}))}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next((o=>o?ue.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,u)=>{r.push(t.call(this,o,u))})),this.waitFor(r)}static mapArray(e,t){return new ue(((r,o)=>{const u=e.length,c=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;t(e[p]).next((v=>{c[p]=v,++m,m===u&&r(c)}),(v=>o(v)))}}))}static doWhile(e,t){return new ue(((r,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):r()};u()}))}}function J2(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function cl(s){return s.name==="IndexedDbTransactionError"}class Rf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rf.ce=-1;const lp=-1;function Yu(s){return s==null}function Zh(s){return s===0&&1/s==-1/0}function Z2(s){return typeof s=="number"&&Number.isInteger(s)&&!Zh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const y1="";function W2(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=lb(e)),e=eR(s.get(t),e);return lb(e)}function eR(s,e){let t=e;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":t+="";break;case y1:t+="";break;default:t+=u}}return t}function lb(s){return s+y1+""}function ub(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function ha(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function _1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Lt{constructor(e,t){this.comparator=e,this.root=t||Dn.EMPTY}insert(e,t){return new Lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nh(this.root,e,this.comparator,!0)}}class Nh{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dn{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Dn.RED,this.left=o??Dn.EMPTY,this.right=u??Dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Dn(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Dn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1;Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,r,o,u){return this}insert(e,t,r){return new Dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gn{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cb(this.data.getIterator())}getIteratorFrom(e){return new cb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof gn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new gn(this.comparator);return t.data=e,t}}class cb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ti{constructor(e){this.fields=e,e.sort(Mn.comparator)}static empty(){return new Ti([])}unionWith(e){let t=new gn(Mn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ti(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zo(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class v1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class kn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new v1("Invalid base64 string: "+u):u}})(e);return new kn(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(e);return new kn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kn.EMPTY_BYTE_STRING=new kn("");const tR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ra(s){if(it(!!s,39018),typeof s=="string"){let e=0;const t=tR.exec(s);if(it(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xt(s.seconds),nanos:Xt(s.nanos)}}function Xt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function aa(s){return typeof s=="string"?kn.fromBase64String(s):kn.fromUint8Array(s)}const b1="server_timestamp",E1="__type__",T1="__previous_value__",w1="__local_write_time__";function up(s){return(s?.mapValue?.fields||{})[E1]?.stringValue===b1}function Cf(s){const e=s.mapValue.fields[T1];return up(e)?Cf(e):e}function Vu(s){const e=ra(s.mapValue.fields[w1].timestampValue);return new Nt(e.seconds,e.nanos)}class nR{constructor(e,t,r,o,u,c,m,g,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=v}}const Wh="(default)";class Pu{constructor(e,t){this.projectId=e,this.database=t||Wh}static empty(){return new Pu("","")}get isDefaultDatabase(){return this.database===Wh}isEqual(e){return e instanceof Pu&&e.projectId===this.projectId&&e.database===this.database}}const S1="__type__",iR="__max__",Dh={mapValue:{}},A1="__vector__",ef="value";function oa(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?up(s)?4:rR(s)?9007199254740991:sR(s)?10:11:Ce(28295,{value:s})}function xs(s,e){if(s===e)return!0;const t=oa(s);if(t!==oa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Vu(s).isEqual(Vu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=ra(o.timestampValue),m=ra(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return aa(o.bytesValue).isEqual(aa(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return Xt(o.geoPointValue.latitude)===Xt(u.geoPointValue.latitude)&&Xt(o.geoPointValue.longitude)===Xt(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Xt(o.integerValue)===Xt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=Xt(o.doubleValue),m=Xt(u.doubleValue);return c===m?Zh(c)===Zh(m):isNaN(c)&&isNaN(m)}return!1})(s,e);case 9:return Zo(s.arrayValue.values||[],e.arrayValue.values||[],xs);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(ub(c)!==ub(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!xs(c[g],m[g])))return!1;return!0})(s,e);default:return Ce(52216,{left:s})}}function Lu(s,e){return(s.values||[]).find((t=>xs(t,e)))!==void 0}function Wo(s,e){if(s===e)return 0;const t=oa(s),r=oa(e);if(t!==r)return Je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(s.booleanValue,e.booleanValue);case 2:return(function(u,c){const m=Xt(u.integerValue||u.doubleValue),g=Xt(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,e);case 3:return hb(s.timestampValue,e.timestampValue);case 4:return hb(Vu(s),Vu(e));case 5:return Rg(s.stringValue,e.stringValue);case 6:return(function(u,c){const m=aa(u),g=aa(c);return m.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,c){const m=u.split("/"),g=c.split("/");for(let p=0;p<m.length&&p<g.length;p++){const v=Je(m[p],g[p]);if(v!==0)return v}return Je(m.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,c){const m=Je(Xt(u.latitude),Xt(c.latitude));return m!==0?m:Je(Xt(u.longitude),Xt(c.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return fb(s.arrayValue,e.arrayValue);case 10:return(function(u,c){const m=u.fields||{},g=c.fields||{},p=m[ef]?.arrayValue,v=g[ef]?.arrayValue,E=Je(p?.values?.length||0,v?.values?.length||0);return E!==0?E:fb(p,v)})(s.mapValue,e.mapValue);case 11:return(function(u,c){if(u===Dh.mapValue&&c===Dh.mapValue)return 0;if(u===Dh.mapValue)return 1;if(c===Dh.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=c.fields||{},v=Object.keys(p);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const w=Rg(g[E],v[E]);if(w!==0)return w;const I=Wo(m[g[E]],p[v[E]]);if(I!==0)return I}return Je(g.length,v.length)})(s.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function hb(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Je(s,e);const t=ra(s),r=ra(e),o=Je(t.seconds,r.seconds);return o!==0?o:Je(t.nanos,r.nanos)}function fb(s,e){const t=s.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const u=Wo(t[o],r[o]);if(u)return u}return Je(t.length,r.length)}function el(s){return Cg(s)}function Cg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const r=ra(t);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return aa(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return xe.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let r="[",o=!0;for(const u of t.values||[])o?o=!1:r+=",",r+=Cg(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const c of r)u?u=!1:o+=",",o+=`${c}:${Cg(t.fields[c])}`;return o+"}"})(s.mapValue):Ce(61005,{value:s})}function Uh(s){switch(oa(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cf(s);return e?16+Uh(e):16;case 5:return 2*s.stringValue.length;case 6:return aa(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+Uh(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return ha(r.fields,((u,c)=>{o+=u.length+Uh(c)})),o})(s.mapValue);default:throw Ce(13486,{value:s})}}function db(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Ig(s){return!!s&&"integerValue"in s}function cp(s){return!!s&&"arrayValue"in s}function mb(s){return!!s&&"nullValue"in s}function gb(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function jh(s){return!!s&&"mapValue"in s}function sR(s){return(s?.mapValue?.fields||{})[S1]?.stringValue===A1}function vu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return ha(s.mapValue.fields,((t,r)=>e.mapValue.fields[t]=vu(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vu(s.arrayValue.values[t]);return e}return{...s}}function rR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===iR}class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!jh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vu(t)}setAll(e){let t=Mn.emptyPath(),r={},o=[];e.forEach(((c,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,r,o),r={},o=[],t=m.popLast()}c?r[m.lastSegment()]=vu(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());jh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];jh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){ha(t,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new Zn(vu(this.value))}}function x1(s){const e=[];return ha(s.fields,((t,r)=>{const o=new Mn([t]);if(jh(r)){const u=x1(r.mapValue).fields;if(u.length===0)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)})),new Ti(e)}class Tn{constructor(e,t,r,o,u,c,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(e){return new Tn(e,0,Ne.min(),Ne.min(),Ne.min(),Zn.empty(),0)}static newFoundDocument(e,t,r,o){return new Tn(e,1,t,Ne.min(),r,o,0)}static newNoDocument(e,t){return new Tn(e,2,t,Ne.min(),Ne.min(),Zn.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,Ne.min(),Ne.min(),Zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class tf{constructor(e,t){this.position=e,this.inclusive=t}}function pb(s,e,t){let r=0;for(let o=0;o<s.position.length;o++){const u=e[o],c=s.position[o];if(u.field.isKeyField()?r=xe.comparator(xe.fromName(c.referenceValue),t.key):r=Wo(c,t.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function yb(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!xs(s.position[t],e.position[t]))return!1;return!0}class nf{constructor(e,t="asc"){this.field=e,this.dir=t}}function aR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class R1{}class ln extends R1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new lR(e,t,r):t==="array-contains"?new hR(e,r):t==="in"?new fR(e,r):t==="not-in"?new dR(e,r):t==="array-contains-any"?new mR(e,r):new ln(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new uR(e,r):new cR(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Wo(t,this.value)):t!==null&&oa(this.value)===oa(t)&&this.matchesComparison(Wo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ss extends R1{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ss(e,t)}matches(e){return C1(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function C1(s){return s.op==="and"}function I1(s){return oR(s)&&C1(s)}function oR(s){for(const e of s.filters)if(e instanceof ss)return!1;return!0}function Ng(s){if(s instanceof ln)return s.field.canonicalString()+s.op.toString()+el(s.value);if(I1(s))return s.filters.map((e=>Ng(e))).join(",");{const e=s.filters.map((t=>Ng(t))).join(",");return`${s.op}(${e})`}}function N1(s,e){return s instanceof ln?(function(r,o){return o instanceof ln&&r.op===o.op&&r.field.isEqual(o.field)&&xs(r.value,o.value)})(s,e):s instanceof ss?(function(r,o){return o instanceof ss&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,c,m)=>u&&N1(c,o.filters[m])),!0):!1})(s,e):void Ce(19439)}function D1(s){return s instanceof ln?(function(t){return`${t.field.canonicalString()} ${t.op} ${el(t.value)}`})(s):s instanceof ss?(function(t){return t.op.toString()+" {"+t.getFilters().map(D1).join(" ,")+"}"})(s):"Filter"}class lR extends ln{constructor(e,t,r){super(e,t,r),this.key=xe.fromName(r.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class uR extends ln{constructor(e,t){super(e,"in",t),this.keys=O1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class cR extends ln{constructor(e,t){super(e,"not-in",t),this.keys=O1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function O1(s,e){return(e.arrayValue?.values||[]).map((t=>xe.fromName(t.referenceValue)))}class hR extends ln{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cp(t)&&Lu(t.arrayValue,this.value)}}class fR extends ln{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Lu(this.value.arrayValue,t)}}class dR extends ln{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Lu(this.value.arrayValue,t)}}class mR extends ln{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Lu(this.value.arrayValue,r)))}}class gR{constructor(e,t=null,r=[],o=[],u=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function _b(s,e=null,t=[],r=[],o=null,u=null,c=null){return new gR(s,e,t,r,o,u,c)}function hp(s){const e=Ve(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Ng(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Yu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>el(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>el(r))).join(",")),e.Te=t}return e.Te}function fp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!aR(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!N1(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!yb(s.startAt,e.startAt)&&yb(s.endAt,e.endAt)}function Dg(s){return xe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Xu{constructor(e,t=null,r=[],o=[],u=null,c="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function pR(s,e,t,r,o,u,c,m){return new Xu(s,e,t,r,o,u,c,m)}function dp(s){return new Xu(s)}function vb(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function M1(s){return s.collectionGroup!==null}function bu(s){const e=Ve(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new gn(Mn.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new nf(u,r))})),t.has(Mn.keyField().canonicalString())||e.Ie.push(new nf(Mn.keyField(),r))}return e.Ie}function Es(s){const e=Ve(s);return e.Ee||(e.Ee=yR(e,bu(s))),e.Ee}function yR(s,e){if(s.limitType==="F")return _b(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new nf(o.field,u)}));const t=s.endAt?new tf(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new tf(s.startAt.position,s.startAt.inclusive):null;return _b(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function Og(s,e){const t=s.filters.concat([e]);return new Xu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Mg(s,e,t){return new Xu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function If(s,e){return fp(Es(s),Es(e))&&s.limitType===e.limitType}function k1(s){return`${hp(Es(s))}|lt:${s.limitType}`}function Uo(s){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>D1(o))).join(", ")}]`),Yu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>el(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>el(o))).join(",")),`Target(${r})`})(Es(s))}; limitType=${s.limitType})`}function Nf(s,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):xe.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,e)&&(function(r,o){for(const u of bu(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(c,m,g){const p=pb(c,m,g);return c.inclusive?p<=0:p<0})(r.startAt,bu(r),o)||r.endAt&&!(function(c,m,g){const p=pb(c,m,g);return c.inclusive?p>=0:p>0})(r.endAt,bu(r),o))})(s,e)}function _R(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function V1(s){return(e,t)=>{let r=!1;for(const o of bu(s)){const u=vR(o,e,t);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function vR(s,e,t){const r=s.field.isKeyField()?xe.comparator(e.key,t.key):(function(u,c,m){const g=c.data.field(u),p=m.data.field(u);return g!==null&&p!==null?Wo(g,p):Ce(42886)})(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Ce(19790,{direction:s.dir})}}class Ya{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ha(this.inner,((t,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return _1(this.inner)}size(){return this.innerSize}}const bR=new Lt(xe.comparator);function er(){return bR}const P1=new Lt(xe.comparator);function hu(...s){let e=P1;for(const t of s)e=e.insert(t.key,t);return e}function L1(s){let e=P1;return s.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function qa(){return Eu()}function U1(){return Eu()}function Eu(){return new Ya((s=>s.toString()),((s,e)=>s.isEqual(e)))}const ER=new Lt(xe.comparator),TR=new gn(xe.comparator);function Ze(...s){let e=TR;for(const t of s)e=e.add(t);return e}const wR=new gn(Je);function SR(){return wR}function mp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zh(e)?"-0":e}}function j1(s){return{integerValue:""+s}}function AR(s,e){return Z2(e)?j1(e):mp(s,e)}class Df{constructor(){this._=void 0}}function xR(s,e,t){return s instanceof sf?(function(o,u){const c={fields:{[E1]:{stringValue:b1},[w1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&up(u)&&(u=Cf(u)),u&&(c.fields[T1]=u),{mapValue:c}})(t,e):s instanceof Uu?B1(s,e):s instanceof ju?q1(s,e):(function(o,u){const c=z1(o,u),m=bb(c)+bb(o.Ae);return Ig(c)&&Ig(o.Ae)?j1(m):mp(o.serializer,m)})(s,e)}function RR(s,e,t){return s instanceof Uu?B1(s,e):s instanceof ju?q1(s,e):t}function z1(s,e){return s instanceof rf?(function(r){return Ig(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class sf extends Df{}class Uu extends Df{constructor(e){super(),this.elements=e}}function B1(s,e){const t=H1(e);for(const r of s.elements)t.some((o=>xs(o,r)))||t.push(r);return{arrayValue:{values:t}}}class ju extends Df{constructor(e){super(),this.elements=e}}function q1(s,e){let t=H1(e);for(const r of s.elements)t=t.filter((o=>!xs(o,r)));return{arrayValue:{values:t}}}class rf extends Df{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function bb(s){return Xt(s.integerValue||s.doubleValue)}function H1(s){return cp(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function CR(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof Uu&&o instanceof Uu||r instanceof ju&&o instanceof ju?Zo(r.elements,o.elements,xs):r instanceof rf&&o instanceof rf?xs(r.Ae,o.Ae):r instanceof sf&&o instanceof sf})(s.transform,e.transform)}class IR{constructor(e,t){this.version=e,this.transformResults=t}}class Wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Of{}function F1(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new gp(s.key,Wn.none()):new Ju(s.key,s.data,Wn.none());{const t=s.data,r=Zn.empty();let o=new gn(Mn.comparator);for(let u of e.fields)if(!o.has(u)){let c=t.field(u);c===null&&u.length>1&&(u=u.popLast(),c=t.field(u)),c===null?r.delete(u):r.set(u,c),o=o.add(u)}return new fa(s.key,r,new Ti(o.toArray()),Wn.none())}}function NR(s,e,t){s instanceof Ju?(function(o,u,c){const m=o.value.clone(),g=Tb(o.fieldTransforms,u,c.transformResults);m.setAll(g),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(s,e,t):s instanceof fa?(function(o,u,c){if(!zh(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=Tb(o.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(G1(o)),g.setAll(m),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(s,e,t):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Tu(s,e,t,r){return s instanceof Ju?(function(u,c,m,g){if(!zh(u.precondition,c))return m;const p=u.value.clone(),v=wb(u.fieldTransforms,g,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(s,e,t,r):s instanceof fa?(function(u,c,m,g){if(!zh(u.precondition,c))return m;const p=wb(u.fieldTransforms,g,c),v=c.data;return v.setAll(G1(u)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(s,e,t,r):(function(u,c,m){return zh(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(s,e,t)}function DR(s,e){let t=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),u=z1(r.transform,o||null);u!=null&&(t===null&&(t=Zn.empty()),t.set(r.field,u))}return t||null}function Eb(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Zo(r,o,((u,c)=>CR(u,c)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Ju extends Of{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class fa extends Of{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function G1(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}})),e}function Tb(s,e,t){const r=new Map;it(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let o=0;o<t.length;o++){const u=s[o],c=u.transform,m=e.data.field(u.field);r.set(u.field,RR(c,m,t[o]))}return r}function wb(s,e,t){const r=new Map;for(const o of s){const u=o.transform,c=t.data.field(o.field);r.set(o.field,xR(u,c,e))}return r}class gp extends Of{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class K1 extends Of{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class OR{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&NR(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Tu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Tu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=U1();return this.mutations.forEach((o=>{const u=e.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=t.has(o.key)?null:m;const g=F1(c,m);g!==null&&r.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(Ne.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&Zo(this.mutations,e.mutations,((t,r)=>Eb(t,r)))&&Zo(this.baseMutations,e.baseMutations,((t,r)=>Eb(t,r)))}}class pp{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){it(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return ER})();const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new pp(e,t,r,o)}}class MR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class kR{constructor(e,t){this.count=e,this.unchangedNames=t}}var on,nt;function $1(s){switch(s){case oe.OK:return Ce(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Ce(15467,{code:s})}}function Q1(s){if(s===void 0)return Ws("GRPC error has no .code"),oe.UNKNOWN;switch(s){case on.OK:return oe.OK;case on.CANCELLED:return oe.CANCELLED;case on.UNKNOWN:return oe.UNKNOWN;case on.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case on.INTERNAL:return oe.INTERNAL;case on.UNAVAILABLE:return oe.UNAVAILABLE;case on.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case on.NOT_FOUND:return oe.NOT_FOUND;case on.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case on.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case on.ABORTED:return oe.ABORTED;case on.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case on.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case on.DATA_LOSS:return oe.DATA_LOSS;default:return Ce(39323,{code:s})}}(nt=on||(on={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";function VR(){return new TextEncoder}const PR=new Wr([4294967295,4294967295],0);function Sb(s){const e=VR().encode(s),t=new o1;return t.update(e),new Uint8Array(t.digest())}function Ab(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Wr([t,r],0),new Wr([o,u],0)]}class yp{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new fu(`Invalid padding: ${t}`);if(r<0)throw new fu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new fu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Wr.fromNumber(this.ge)}ye(e,t,r){let o=e.add(t.multiply(Wr.fromNumber(r)));return o.compare(PR)===1&&(o=new Wr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Sb(e),[r,o]=Ab(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);if(!this.we(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new yp(u,o,t);return r.forEach((m=>c.insert(m))),c}insert(e){if(this.ge===0)return;const t=Sb(e),[r,o]=Ab(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class fu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Mf{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Zu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Mf(Ne.min(),o,new Lt(Je),er(),Ze())}}class Zu{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Zu(r,t,Ze(),Ze(),Ze())}}class Bh{constructor(e,t,r,o){this.be=e,this.removedTargetIds=t,this.key=r,this.De=o}}class Y1{constructor(e,t){this.targetId=e,this.Ce=t}}class X1{constructor(e,t,r=kn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class xb{constructor(){this.ve=0,this.Fe=Rb(),this.Me=kn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),t=Ze(),r=Ze();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Ce(38017,{changeType:u})}})),new Zu(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Rb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class LR{constructor(e){this.Ge=e,this.ze=new Map,this.je=er(),this.Je=Oh(),this.He=Oh(),this.Ye=new Lt(Je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,r=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(Dg(u))if(r===0){const c=new xe(u.path);this.et(t,c,Tn.newNoDocument(c,Ne.min()))}else it(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const m=this.ut(e),g=m?this.ct(m,e,c):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=t;let c,m;try{c=aa(r).toUint8Array()}catch(g){if(g instanceof v1)return Jo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new yp(c,o,u)}catch(g){return Jo(g instanceof fu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let o=0;return r.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&Dg(m.target)){const g=new xe(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,Tn.newNoDocument(g,e))}u.Be&&(t.set(c,u.ke()),u.qe())}}));let r=Ze();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(e)));const o=new Mf(e,t,this.Ye,this.je,r);return this.je=er(),this.Je=Oh(),this.He=Oh(),this.Ye=new Lt(Je),o}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new xb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new gn(Je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new gn(Je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new xb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Oh(){return new Lt(xe.comparator)}function Rb(){return new Lt(xe.comparator)}const UR={asc:"ASCENDING",desc:"DESCENDING"},jR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zR={and:"AND",or:"OR"};class BR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function kg(s,e){return s.useProto3Json||Yu(e)?e:{value:e}}function af(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function J1(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function qR(s,e){return af(s,e.toTimestamp())}function wi(s){return it(!!s,49232),Ne.fromTimestamp((function(t){const r=ra(t);return new Nt(r.seconds,r.nanos)})(s))}function _p(s,e){return Vg(s,e).canonicalString()}function Vg(s,e){const t=(function(o){return new Et(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function Z1(s){const e=Et.fromString(s);return it(sT(e),10190,{key:e.toString()}),e}function of(s,e){return _p(s.databaseId,e.path)}function wu(s,e){const t=Z1(e);if(t.get(1)!==s.databaseId.projectId)throw new pe(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new pe(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new xe(eT(t))}function W1(s,e){return _p(s.databaseId,e)}function HR(s){const e=Z1(s);return e.length===4?Et.emptyPath():eT(e)}function Pg(s){return new Et(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function eT(s){return it(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Cb(s,e,t){return{name:of(s,e),fields:t.value.mapValue.fields}}function FR(s,e){return"found"in e?(function(r,o){it(!!o.found,43571),o.found.name,o.found.updateTime;const u=wu(r,o.found.name),c=wi(o.found.updateTime),m=o.found.createTime?wi(o.found.createTime):Ne.min(),g=new Zn({mapValue:{fields:o.found.fields}});return Tn.newFoundDocument(u,c,m,g)})(s,e):"missing"in e?(function(r,o){it(!!o.missing,3894),it(!!o.readTime,22933);const u=wu(r,o.missing),c=wi(o.readTime);return Tn.newNoDocument(u,c)})(s,e):Ce(7234,{result:e})}function GR(s,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ce(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,v){return p.useProto3Json?(it(v===void 0||typeof v=="string",58123),kn.fromBase64String(v||"")):(it(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),kn.fromUint8Array(v||new Uint8Array))})(s,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&(function(p){const v=p.code===void 0?oe.UNKNOWN:Q1(p.code);return new pe(v,p.message||"")})(c);t=new X1(r,o,u,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=wu(s,r.document.name),u=wi(r.document.updateTime),c=r.document.createTime?wi(r.document.createTime):Ne.min(),m=new Zn({mapValue:{fields:r.document.fields}}),g=Tn.newFoundDocument(o,u,c,m),p=r.targetIds||[],v=r.removedTargetIds||[];t=new Bh(p,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=wu(s,r.document),u=r.readTime?wi(r.readTime):Ne.min(),c=Tn.newNoDocument(o,u),m=r.removedTargetIds||[];t=new Bh([],m,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=wu(s,r.document),u=r.removedTargetIds||[];t=new Bh([],u,o,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,c=new kR(o,u),m=r.targetId;t=new Y1(m,c)}}return t}function tT(s,e){let t;if(e instanceof Ju)t={update:Cb(s,e.key,e.value)};else if(e instanceof gp)t={delete:of(s,e.key)};else if(e instanceof fa)t={update:Cb(s,e.key,e.data),updateMask:eC(e.fieldMask)};else{if(!(e instanceof K1))return Ce(16599,{Vt:e.type});t={verify:of(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(u,c){const m=c.transform;if(m instanceof sf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Uu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof ju)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof rf)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw Ce(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:qR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ce(27497)})(s,e.precondition)),t}function KR(s,e){return s&&s.length>0?(it(e!==void 0,14353),s.map((t=>(function(o,u){let c=o.updateTime?wi(o.updateTime):wi(u);return c.isEqual(Ne.min())&&(c=wi(u)),new IR(c,o.transformResults||[])})(t,e)))):[]}function $R(s,e){return{documents:[W1(s,e.path)]}}function QR(s,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=W1(s,o);const u=(function(p){if(p.length!==0)return iT(ss.create(p,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const c=(function(p){if(p.length!==0)return p.map((v=>(function(w){return{field:jo(w.field),direction:JR(w.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const m=kg(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function YR(s){let e=HR(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){it(r===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let u=[];t.where&&(u=(function(E){const w=nT(E);return w instanceof ss&&I1(w)?w.getFilters():[w]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((w=>(function(k){return new nf(zo(k.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(w)))})(t.orderBy));let m=null;t.limit&&(m=(function(E){let w;return w=typeof E=="object"?E.value:E,Yu(w)?null:w})(t.limit));let g=null;t.startAt&&(g=(function(E){const w=!!E.before,I=E.values||[];return new tf(I,w)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const w=!E.before,I=E.values||[];return new tf(I,w)})(t.endAt)),pR(e,o,c,u,m,"F",g,p)}function XR(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function nT(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=zo(t.unaryFilter.field);return ln.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=zo(t.unaryFilter.field);return ln.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=zo(t.unaryFilter.field);return ln.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=zo(t.unaryFilter.field);return ln.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(s):s.fieldFilter!==void 0?(function(t){return ln.create(zo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return ss.create(t.compositeFilter.filters.map((r=>nT(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(s):Ce(30097,{filter:s})}function JR(s){return UR[s]}function ZR(s){return jR[s]}function WR(s){return zR[s]}function jo(s){return{fieldPath:s.canonicalString()}}function zo(s){return Mn.fromServerFormat(s.fieldPath)}function iT(s){return s instanceof ln?(function(t){if(t.op==="=="){if(gb(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NAN"}};if(mb(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(gb(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NOT_NAN"}};if(mb(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jo(t.field),op:ZR(t.op),value:t.value}}})(s):s instanceof ss?(function(t){const r=t.getFilters().map((o=>iT(o)));return r.length===1?r[0]:{compositeFilter:{op:WR(t.op),filters:r}}})(s):Ce(54877,{filter:s})}function eC(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function sT(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class Yr{constructor(e,t,r,o,u=Ne.min(),c=Ne.min(),m=kn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class tC{constructor(e){this.yt=e}}function nC(s){const e=YR({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Mg(e,e.limit,"L"):e}class iC{constructor(){this.Cn=new sC}addToCollectionParentIndex(e,t){return this.Cn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(sa.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(sa.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class sC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new gn(Et.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new gn(Et.comparator)).toArray()}}const Ib={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rT=41943040;class ci{static withCacheSize(e){return new ci(e,ci.DEFAULT_COLLECTION_PERCENTILE,ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}ci.DEFAULT_COLLECTION_PERCENTILE=10,ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ci.DEFAULT=new ci(rT,ci.DEFAULT_COLLECTION_PERCENTILE,ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ci.DISABLED=new ci(-1,0,0);class tl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new tl(0)}static cr(){return new tl(-1)}}const Nb="LruGarbageCollector",rC=1048576;function Db([s,e],[t,r]){const o=Je(s,t);return o===0?Je(e,r):o}class aC{constructor(e){this.Ir=e,this.buffer=new gn(Db),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Db(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class oC{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(Nb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){cl(t)?ve(Nb,"Ignoring IndexedDB error during garbage collection: ",t):await ul(t)}await this.Vr(3e5)}))}}class lC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(Rf.ce);const r=new aC(t);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(Ib)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ib):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,o,u,c,m,g,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(r=E,m=Date.now(),this.removeTargets(e,r,t)))).next((E=>(u=E,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(p=Date.now(),Lo()<=Xe.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${E} documents in `+(p-g)+`ms
Total Duration: ${p-v}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:E}))))}}function uC(s,e){return new lC(s,e)}class cC{constructor(){this.changes=new Ya((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class fC{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&Tu(r.mutation,o,Ti.empty(),Nt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ze()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ze()){const o=qa();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((u=>{let c=hu();return u.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=qa();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ze())))}populateOverlays(e,t,r){const o=[];return r.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((c,m)=>{t.set(c,m)}))}))}computeViews(e,t,r,o){let u=er();const c=Eu(),m=(function(){return Eu()})();return t.forEach(((g,p)=>{const v=r.get(p.key);o.has(p.key)&&(v===void 0||v.mutation instanceof fa)?u=u.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),Tu(v.mutation,p,v.mutation.getFieldMask(),Nt.now())):c.set(p.key,Ti.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((p,v)=>c.set(p,v))),t.forEach(((p,v)=>m.set(p,new hC(v,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,t){const r=Eu();let o=new Lt(((c,m)=>c-m)),u=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const m of c)m.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let v=r.get(g)||Ti.empty();v=m.applyToLocalView(p,v),r.set(g,v);const E=(o.get(m.batchId)||Ze()).add(g);o=o.insert(m.batchId,E)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,v=g.value,E=U1();v.forEach((w=>{if(!u.has(w)){const I=F1(t.get(w),r.get(w));I!==null&&E.set(w,I),u=u.add(w)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,E))}return ue.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(c){return xe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):M1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):ue.resolve(qa());let m=ku,g=u;return c.next((p=>ue.forEach(p,((v,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),u.get(v)?ue.resolve():this.remoteDocumentCache.getEntry(e,v).next((w=>{g=g.insert(v,w)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,g,p,Ze()))).next((v=>({batchId:m,changes:L1(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next((r=>{let o=hu();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const u=t.collectionGroup;let c=hu();return this.indexManager.getCollectionParents(e,u).next((m=>ue.forEach(m,(g=>{const p=(function(E,w){return new Xu(w,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,r,o).next((v=>{v.forEach(((E,w)=>{c=c.insert(E,w)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,u,o)))).next((c=>{u.forEach(((g,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,Tn.newInvalidDocument(v)))}));let m=hu();return c.forEach(((g,p)=>{const v=u.get(g);v!==void 0&&Tu(v.mutation,p,Ti.empty(),Nt.now()),Nf(t,p)&&(m=m.insert(g,p))})),m}))}}class dC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ue.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:wi(o.createTime)}})(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:nC(o.bundledQuery),readTime:wi(o.readTime)}})(t)),ue.resolve()}}class mC{constructor(){this.overlays=new Lt(xe.comparator),this.qr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=qa();return ue.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,u)=>{this.St(e,t,u)})),ue.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const o=qa(),u=t.length+1,c=new xe(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return ue.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Lt(((p,v)=>p-v));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let v=u.get(p.largestBatchId);v===null&&(v=qa(),u=u.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const m=qa(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,v)=>m.set(p,v))),!(m.size()>=o)););return ue.resolve(m)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new MR(t,r));let u=this.qr.get(t);u===void 0&&(u=Ze(),this.qr.set(t,u)),this.qr.set(t,u.add(r.key))}}class gC{constructor(){this.sessionToken=kn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}class vp{constructor(){this.Qr=new gn(bn.$r),this.Ur=new gn(bn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new bn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new bn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new xe(new Et([])),r=new bn(t,e),o=new bn(t,e+1),u=[];return this.Ur.forEachInRange([r,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new xe(new Et([])),r=new bn(t,e),o=new bn(t,e+1);let u=Ze();return this.Ur.forEachInRange([r,o],(c=>{u=u.add(c.key)})),u}containsKey(e){const t=new bn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class bn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return xe.comparator(e.key,t.key)||Je(e.Yr,t.Yr)}static Kr(e,t){return Je(e.Yr,t.Yr)||xe.comparator(e.key,t.key)}}class pC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new gn(bn.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new OR(u,t,r,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new bn(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ue.resolve(c)}lookupMutationBatch(e,t){return ue.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ei(r),u=o<0?0:o;return ue.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?lp:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new bn(t,0),o=new bn(t,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(c=>{const m=this.Xr(c.Yr);u.push(m)})),ue.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gn(Je);return t.forEach((o=>{const u=new bn(o,0),c=new bn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{r=r.add(m.Yr)}))})),ue.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;xe.isDocumentKey(u)||(u=u.child(""));const c=new bn(new xe(u),0);let m=new gn(Je);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),c),ue.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){it(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ue.forEach(t.mutations,(o=>{const u=new bn(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new bn(t,0),o=this.Zr.firstAfterOrEqual(r);return ue.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class yC{constructor(e){this.ri=e,this.docs=(function(){return new Lt(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let r=er();return t.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Tn.newInvalidDocument(o))})),ue.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=er();const c=t.path,m=new xe(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:v}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Q2($2(v),r)<=0||(o.has(v.key)||Nf(t,v))&&(u=u.insert(v.key,v.mutableCopy()))}return ue.resolve(u)}getAllFromCollectionGroup(e,t,r,o){Ce(9500)}ii(e,t){return ue.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new _C(this)}getSize(e){return ue.resolve(this.size)}}class _C extends cC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),ue.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class vC{constructor(e){this.persistence=e,this.si=new Ya((t=>hp(t)),fp),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new vp,this.targetCount=0,this.ai=tl.ur()}forEachTarget(e,t){return this.si.forEach(((r,o)=>t(o))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ue.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new tl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Pr(t),ue.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ue.waitFor(u).next((()=>o))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((c=>{u.push(o.markPotentiallyOrphaned(e,c))})),ue.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this._i.containsKey(t))}}class aT{constructor(e,t){this.ui={},this.overlays={},this.ci=new Rf(0),this.li=!1,this.li=!0,this.hi=new gC,this.referenceDelegate=e(this),this.Pi=new vC(this),this.indexManager=new iC,this.remoteDocumentCache=(function(o){return new yC(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new tC(t),this.Ii=new dC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new pC(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ve("MemoryPersistence","Starting transaction:",e);const o=new bC(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,t){return ue.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class bC extends X2{constructor(e){super(),this.currentSequenceNumber=e}}class bp{constructor(e){this.persistence=e,this.Ri=new vp,this.Vi=null}static mi(e){return new bp(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(r=>{const o=xe.fromPath(r);return this.gi(e,o).next((u=>{u||t.removeEntry(o,Ne.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ue.or([()=>ue.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class lf{constructor(e,t){this.persistence=e,this.pi=new Ya((r=>W2(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=uC(this,t)}static mi(e,t){return new lf(e,t)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ue.forEach(this.pi,((r,o)=>this.br(e,r,o).next((u=>u?ue.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((m=>{m||(r++,u.removeEntry(c,Ne.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Uh(e.data.value)),t}br(e,t,r){return ue.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ue.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ep{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=o}static As(e,t){let r=Ze(),o=Ze();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Ep(e,t.fromCache,r,o)}}class EC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class TC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return yx()?8:J2(qn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,o){const u={result:null};return this.ys(e,t).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(e,t,o,r).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new EC;return this.Ss(e,t,c).next((m=>{if(u.result=m,this.Vs)return this.bs(e,t,c,m.size)}))})).next((()=>u.result))}bs(e,t,r,o){return r.documentReadCount<this.fs?(Lo()<=Xe.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Uo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(Lo()<=Xe.DEBUG&&ve("QueryEngine","Query:",Uo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(Lo()<=Xe.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Uo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Es(t))):ue.resolve())}ys(e,t){if(vb(t))return ue.resolve(null);let r=Es(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Mg(t,null,"F"),r=Es(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const c=Ze(...u);return this.ps.getDocuments(e,c).next((m=>this.indexManager.getMinOffset(e,r).next((g=>{const p=this.Ds(t,m);return this.Cs(t,p,c,g.readTime)?this.ys(e,Mg(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,r,o){return vb(t)||o.isEqual(Ne.min())?ue.resolve(null):this.ps.getDocuments(e,r).next((u=>{const c=this.Ds(t,u);return this.Cs(t,c,r,o)?ue.resolve(null):(Lo()<=Xe.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Uo(t)),this.vs(e,c,t,K2(o,ku)).next((m=>m)))}))}Ds(e,t){let r=new gn(V1(e));return t.forEach(((o,u)=>{Nf(e,u)&&(r=r.add(u))})),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,t,r){return Lo()<=Xe.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Uo(t)),this.ps.getDocumentsMatchingQuery(e,t,sa.min(),r)}vs(e,t,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((u=>(t.forEach((c=>{u=u.insert(c.key,c)})),u)))}}const Tp="LocalStore",wC=3e8;class SC{constructor(e,t,r,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Lt(Je),this.xs=new Ya((u=>hp(u)),fp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function AC(s,e,t,r){return new SC(s,e,t,r)}async function oT(s,e){const t=Ve(s);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((u=>{const c=[],m=[];let g=Ze();for(const p of o){c.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}for(const p of u){m.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(r,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function xC(s,e){const t=Ve(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,v){const E=p.batch,w=E.keys();let I=ue.resolve();return w.forEach((k=>{I=I.next((()=>v.getEntry(g,k))).next((j=>{const D=p.docVersions.get(k);it(D!==null,48541),j.version.compareTo(D)<0&&(E.applyToRemoteDocument(j,p),j.isValidDocument()&&(j.setReadTime(p.commitVersion),v.addEntry(j)))}))})),I.next((()=>m.mutationQueue.removeMutationBatch(g,E)))})(t,r,e,u).next((()=>u.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=Ze();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function lT(s){const e=Ve(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function RC(s,e){const t=Ve(s),r=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((v,E)=>{const w=o.get(E);if(!w)return;m.push(t.Pi.removeMatchingKeys(u,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(u,v.addedDocuments,E))));let I=w.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(kn.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,r)),o=o.insert(E,I),(function(j,D,F){return j.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=wC?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(w,I,v)&&m.push(t.Pi.updateTargetData(u,I))}));let g=er(),p=Ze();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,v))})),m.push(CC(u,c,e.documentUpdates).next((v=>{g=v.ks,p=v.qs}))),!r.isEqual(Ne.min())){const v=t.Pi.getLastRemoteSnapshotVersion(u).next((E=>t.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(v)}return ue.waitFor(m).next((()=>c.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(t.Ms=o,u)))}function CC(s,e,t){let r=Ze(),o=Ze();return t.forEach((u=>r=r.add(u))),e.getEntries(s,r).next((u=>{let c=er();return t.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ne.min())?(e.removeEntry(m,g.readTime),c=c.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(m,g)):ve(Tp,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:o}}))}function IC(s,e){const t=Ve(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=lp),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function NC(s,e){const t=Ve(s);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.Pi.getTargetData(r,e).next((u=>u?(o=u,ue.resolve(o)):t.Pi.allocateTargetId(r).next((c=>(o=new Yr(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Lg(s,e,t){const r=Ve(s),o=r.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",u,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!cl(c))throw c;ve(Tp,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function Ob(s,e,t){const r=Ve(s);let o=Ne.min(),u=Ze();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,v){const E=Ve(g),w=E.xs.get(v);return w!==void 0?ue.resolve(E.Ms.get(w)):E.Pi.getTargetData(p,v)})(r,c,Es(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?o:Ne.min(),t?u:Ze()))).next((m=>(DC(r,_R(e),m),{documents:m,Qs:u})))))}function DC(s,e,t){let r=s.Os.get(e)||Ne.min();t.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(e,r)}class Mb{constructor(){this.activeTargetIds=SR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class OC{constructor(){this.Mo=new Mb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Mb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class MC{Oo(e){}shutdown(){}}const kb="ConnectivityMonitor";class Vb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(kb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(kb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Mh=null;function Ug(){return Mh===null?Mh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Mh++,"0x"+Mh.toString(16)}const ig="RestConnection",kC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class VC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===Wh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,t,r,o,u){const c=Ug(),m=this.zo(e,t.toUriEncodedString());ve(ig,`Sending RPC '${e}' ${c}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(m),v=al(p);return this.Jo(e,m,g,r,v).then((E=>(ve(ig,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Jo(ig,`RPC '${e}' ${c} failed with error: `,E,"url: ",m,"request:",r),E}))}Ho(e,t,r,o,u,c){return this.Go(e,t,r,o,u)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ll})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),r&&r.headers.forEach(((o,u)=>e[u]=o))}zo(e,t){const r=kC[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class PC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const jn="WebChannelConnection";class LC extends VC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,u){const c=Ug();return new Promise(((m,g)=>{const p=new l1;p.setWithCredentials(!0),p.listenOnce(u1.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Lh.NO_ERROR:const E=p.getResponseJson();ve(jn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),m(E);break;case Lh.TIMEOUT:ve(jn,`RPC '${e}' ${c} timed out`),g(new pe(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Lh.HTTP_ERROR:const w=p.getStatus();if(ve(jn,`RPC '${e}' ${c} failed with status:`,w,"response text:",p.getResponseText()),w>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const k=I?.error;if(k&&k.status&&k.message){const j=(function(F){const ne=F.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(ne)>=0?ne:oe.UNKNOWN})(k.status);g(new pe(j,k.message))}else g(new pe(oe.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new pe(oe.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ve(jn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(o);ve(jn,`RPC '${e}' ${c} sending request:`,o),p.send(t,"POST",v,r,15)}))}T_(e,t,r){const o=Ug(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=f1(),m=h1(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const v=u.join("");ve(jn,`Creating RPC '${e}' stream ${o}: ${v}`,g);const E=c.createWebChannel(v,g);this.I_(E);let w=!1,I=!1;const k=new PC({Yo:D=>{I?ve(jn,`Not sending because RPC '${e}' stream ${o} is closed:`,D):(w||(ve(jn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),w=!0),ve(jn,`RPC '${e}' stream ${o} sending:`,D),E.send(D))},Zo:()=>E.close()}),j=(D,F,ne)=>{D.listen(F,(Z=>{try{ne(Z)}catch(ce){setTimeout((()=>{throw ce}),0)}}))};return j(E,cu.EventType.OPEN,(()=>{I||(ve(jn,`RPC '${e}' stream ${o} transport opened.`),k.o_())})),j(E,cu.EventType.CLOSE,(()=>{I||(I=!0,ve(jn,`RPC '${e}' stream ${o} transport closed`),k.a_(),this.E_(E))})),j(E,cu.EventType.ERROR,(D=>{I||(I=!0,Jo(jn,`RPC '${e}' stream ${o} transport errored. Name:`,D.name,"Message:",D.message),k.a_(new pe(oe.UNAVAILABLE,"The operation could not be completed")))})),j(E,cu.EventType.MESSAGE,(D=>{if(!I){const F=D.data[0];it(!!F,16349);const ne=F,Z=ne?.error||ne[0]?.error;if(Z){ve(jn,`RPC '${e}' stream ${o} received error:`,Z);const ce=Z.status;let ie=(function(R){const C=on[R];if(C!==void 0)return Q1(C)})(ce),W=Z.message;ie===void 0&&(ie=oe.INTERNAL,W="Unknown error status: "+ce+" with message "+Z.message),I=!0,k.a_(new pe(ie,W)),E.close()}else ve(jn,`RPC '${e}' stream ${o} received:`,F),k.u_(F)}})),j(m,c1.STAT_EVENT,(D=>{D.stat===xg.PROXY?ve(jn,`RPC '${e}' stream ${o} detected buffering proxy`):D.stat===xg.NOPROXY&&ve(jn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function sg(){return typeof document<"u"?document:null}function kf(s){return new BR(s,!0)}class wp{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-r);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Pb="PersistentStream";class uT{constructor(e,t,r,o,u,c,m,g){this.Mi=e,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wp(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(Ws(t.toString()),Ws("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===t&&this.G_(r,o)}),(r=>{e((()=>{const o=new pe(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(Pb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ve(Pb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class UC extends uT{constructor(e,t,r,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=GR(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Ne.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?Ne.min():c.readTime?wi(c.readTime):Ne.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Pg(this.serializer),t.addTarget=(function(u,c){let m;const g=c.target;if(m=Dg(g)?{documents:$R(u,g)}:{query:QR(u,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=J1(u,c.resumeToken);const p=kg(u,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(Ne.min())>0){m.readTime=af(u,c.snapshotVersion.toTimestamp());const p=kg(u,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const r=XR(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Pg(this.serializer),t.removeTarget=e,this.q_(t)}}class jC extends uT{constructor(e,t,r,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=KR(e.writeResults,e.commitTime),r=wi(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Pg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>tT(this.serializer,r)))};this.q_(t)}}class zC{}class BC extends zC{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new pe(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(e,Vg(t,r),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(oe.UNKNOWN,u.toString())}))}Ho(e,t,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(e,Vg(t,r),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(oe.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class qC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ws(t),this.aa=!1):ve("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const $a="RemoteStore";class HC{constructor(e,t,r,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Xa(this)&&(ve($a,"Restarting streams for network reachability change."),await(async function(g){const p=Ve(g);p.Ea.add(4),await Wu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Vf(p)})(this))}))})),this.Ra=new qC(r,o)}}async function Vf(s){if(Xa(s))for(const e of s.da)await e(!0)}async function Wu(s){for(const e of s.da)await e(!1)}function cT(s,e){const t=Ve(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Rp(t)?xp(t):hl(t).O_()&&Ap(t,e))}function Sp(s,e){const t=Ve(s),r=hl(t);t.Ia.delete(e),r.O_()&&hT(t,e),t.Ia.size===0&&(r.O_()?r.L_():Xa(t)&&t.Ra.set("Unknown"))}function Ap(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hl(s).Y_(e)}function hT(s,e){s.Va.Ue(e),hl(s).Z_(e)}function xp(s){s.Va=new LR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),hl(s).start(),s.Ra.ua()}function Rp(s){return Xa(s)&&!hl(s).x_()&&s.Ia.size>0}function Xa(s){return Ve(s).Ea.size===0}function fT(s){s.Va=void 0}async function FC(s){s.Ra.set("Online")}async function GC(s){s.Ia.forEach(((e,t)=>{Ap(s,e)}))}async function KC(s,e){fT(s),Rp(s)?(s.Ra.ha(e),xp(s)):s.Ra.set("Unknown")}async function $C(s,e,t){if(s.Ra.set("Online"),e instanceof X1&&e.state===2&&e.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(s,e)}catch(r){ve($a,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await uf(s,r)}else if(e instanceof Bh?s.Va.Ze(e):e instanceof Y1?s.Va.st(e):s.Va.tt(e),!t.isEqual(Ne.min()))try{const r=await lT(s.localStore);t.compareTo(r)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const v=u.Ia.get(p);v&&u.Ia.set(p,v.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,p)=>{const v=u.Ia.get(g);if(!v)return;u.Ia.set(g,v.withResumeToken(kn.EMPTY_BYTE_STRING,v.snapshotVersion)),hT(u,g);const E=new Yr(v.target,g,p,v.sequenceNumber);Ap(u,E)})),u.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(r){ve($a,"Failed to raise snapshot:",r),await uf(s,r)}}async function uf(s,e,t){if(!cl(e))throw e;s.Ea.add(1),await Wu(s),s.Ra.set("Offline"),t||(t=()=>lT(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ve($a,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await Vf(s)}))}function dT(s,e){return e().catch((t=>uf(s,t,e)))}async function Pf(s){const e=Ve(s),t=la(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:lp;for(;QC(e);)try{const o=await IC(e.localStore,r);if(o===null){e.Ta.length===0&&t.L_();break}r=o.batchId,YC(e,o)}catch(o){await uf(e,o)}mT(e)&&gT(e)}function QC(s){return Xa(s)&&s.Ta.length<10}function YC(s,e){s.Ta.push(e);const t=la(s);t.O_()&&t.X_&&t.ea(e.mutations)}function mT(s){return Xa(s)&&!la(s).x_()&&s.Ta.length>0}function gT(s){la(s).start()}async function XC(s){la(s).ra()}async function JC(s){const e=la(s);for(const t of s.Ta)e.ea(t.mutations)}async function ZC(s,e,t){const r=s.Ta.shift(),o=pp.from(r,e,t);await dT(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Pf(s)}async function WC(s,e){e&&la(s).X_&&await(async function(r,o){if((function(c){return $1(c)&&c!==oe.ABORTED})(o.code)){const u=r.Ta.shift();la(r).B_(),await dT(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Pf(r)}})(s,e),mT(s)&&gT(s)}async function Lb(s,e){const t=Ve(s);t.asyncQueue.verifyOperationInProgress(),ve($a,"RemoteStore received new credentials");const r=Xa(t);t.Ea.add(3),await Wu(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Vf(t)}async function eI(s,e){const t=Ve(s);e?(t.Ea.delete(2),await Vf(t)):e||(t.Ea.add(2),await Wu(t),t.Ra.set("Unknown"))}function hl(s){return s.ma||(s.ma=(function(t,r,o){const u=Ve(t);return u.sa(),new UC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:FC.bind(null,s),t_:GC.bind(null,s),r_:KC.bind(null,s),H_:$C.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Rp(s)?xp(s):s.Ra.set("Unknown")):(await s.ma.stop(),fT(s))}))),s.ma}function la(s){return s.fa||(s.fa=(function(t,r,o){const u=Ve(t);return u.sa(),new jC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:XC.bind(null,s),r_:WC.bind(null,s),ta:JC.bind(null,s),na:ZC.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Pf(s)):(await s.fa.stop(),s.Ta.length>0&&(ve($a,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Cp{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new ea,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,u){const c=Date.now()+r,m=new Cp(e,t,c,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ip(s,e){if(Ws("AsyncQueue",`${e}: ${s}`),cl(s))return new pe(oe.UNAVAILABLE,`${e}: ${s}`);throw s}class Ho{static emptySet(e){return new Ho(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||xe.comparator(t.key,r.key):(t,r)=>xe.comparator(t.key,r.key),this.keyedMap=hu(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ho)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ho;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Ub{constructor(){this.ga=new Lt(xe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class nl{constructor(e,t,r,o,u,c,m,g,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,o,u){const c=[];return t.forEach((m=>{c.push({type:0,doc:m})})),new nl(e,t,Ho.emptySet(t),c,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&If(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class tI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class nI{constructor(){this.queries=jb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=Ve(t),u=o.queries;o.queries=jb(),u.forEach(((c,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new pe(oe.ABORTED,"Firestore shutting down"))}}function jb(){return new Ya((s=>k1(s)),If)}async function iI(s,e){const t=Ve(s);let r=3;const o=e.query;let u=t.queries.get(o);u?!u.ba()&&e.Da()&&(r=2):(u=new tI,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const m=Ip(c,`Initialization of query '${Uo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.Sa.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&Np(t)}async function sI(s,e){const t=Ve(s),r=e.query;let o=3;const u=t.queries.get(r);if(u){const c=u.Sa.indexOf(e);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function rI(s,e){const t=Ve(s);let r=!1;for(const o of e){const u=o.query,c=t.queries.get(u);if(c){for(const m of c.Sa)m.Fa(o)&&(r=!0);c.wa=o}}r&&Np(t)}function aI(s,e,t){const r=Ve(s),o=r.queries.get(e);if(o)for(const u of o.Sa)u.onError(t);r.queries.delete(e)}function Np(s){s.Ca.forEach((e=>{e.next()}))}var jg,zb;(zb=jg||(jg={})).Ma="default",zb.Cache="cache";class oI{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new nl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==jg.Cache}}class pT{constructor(e){this.key=e}}class yT{constructor(e){this.key=e}}class lI{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ze(),this.mutatedKeys=Ze(),this.eu=V1(e),this.tu=new Ho(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Ub,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const w=o.get(v),I=Nf(this.query,E)?E:null,k=!!w&&this.mutatedKeys.has(w.key),j=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let D=!1;w&&I?w.data.isEqual(I.data)?k!==j&&(r.track({type:3,doc:I}),D=!0):this.su(w,I)||(r.track({type:2,doc:I}),D=!0,(g&&this.eu(I,g)>0||p&&this.eu(I,p)<0)&&(m=!0)):!w&&I?(r.track({type:0,doc:I}),D=!0):w&&!I&&(r.track({type:1,doc:w}),D=!0,(g||p)&&(m=!0)),D&&(I?(c=c.add(I),u=j?u.add(v):u.delete(v)):(c=c.delete(v),u=u.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),u=u.delete(v.key),r.track({type:1,doc:v})}return{tu:c,iu:r,Cs:m,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(I,k){const j=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:D})}};return j(I)-j(k)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(r),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new nl(this.query,e.tu,u,c,e.mutatedKeys,g===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ub,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ze(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new yT(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new pT(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Dp="SyncEngine";class uI{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class cI{constructor(e){this.key=e,this.hu=!1}}class hI{constructor(e,t,r,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ya((m=>k1(m)),If),this.Iu=new Map,this.Eu=new Set,this.du=new Lt(xe.comparator),this.Au=new Map,this.Ru=new vp,this.Vu={},this.mu=new Map,this.fu=tl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function fI(s,e,t=!0){const r=wT(s);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await _T(r,e,t,!0),o}async function dI(s,e){const t=wT(s);await _T(t,e,!0,!1)}async function _T(s,e,t,r){const o=await NC(s.localStore,Es(e)),u=o.targetId,c=s.sharedClientState.addLocalQueryTarget(u,t);let m;return r&&(m=await mI(s,e,u,c==="current",o.resumeToken)),s.isPrimaryClient&&t&&cT(s.remoteStore,o),m}async function mI(s,e,t,r,o){s.pu=(E,w,I)=>(async function(j,D,F,ne){let Z=D.view.ru(F);Z.Cs&&(Z=await Ob(j.localStore,D.query,!1).then((({documents:x})=>D.view.ru(x,Z))));const ce=ne&&ne.targetChanges.get(D.targetId),ie=ne&&ne.targetMismatches.get(D.targetId)!=null,W=D.view.applyChanges(Z,j.isPrimaryClient,ce,ie);return qb(j,D.targetId,W.au),W.snapshot})(s,E,w,I);const u=await Ob(s.localStore,e,!0),c=new lI(e,u.Qs),m=c.ru(u.documents),g=Zu.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",o),p=c.applyChanges(m,s.isPrimaryClient,g);qb(s,t,p.au);const v=new uI(e,t,c);return s.Tu.set(e,v),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),p.snapshot}async function gI(s,e,t){const r=Ve(s),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((c=>!If(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Lg(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&Sp(r.remoteStore,o.targetId),zg(r,o.targetId)})).catch(ul)):(zg(r,o.targetId),await Lg(r.localStore,o.targetId,!0))}async function pI(s,e){const t=Ve(s),r=t.Tu.get(e),o=t.Iu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Sp(t.remoteStore,r.targetId))}async function yI(s,e,t){const r=SI(s);try{const o=await(function(c,m){const g=Ve(c),p=Nt.now(),v=m.reduce(((I,k)=>I.add(k.key)),Ze());let E,w;return g.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let k=er(),j=Ze();return g.Ns.getEntries(I,v).next((D=>{k=D,k.forEach(((F,ne)=>{ne.isValidDocument()||(j=j.add(F))}))})).next((()=>g.localDocuments.getOverlayedDocuments(I,k))).next((D=>{E=D;const F=[];for(const ne of m){const Z=DR(ne,E.get(ne.key).overlayedDocument);Z!=null&&F.push(new fa(ne.key,Z,x1(Z.value.mapValue),Wn.exists(!0)))}return g.mutationQueue.addMutationBatch(I,p,F,m)})).next((D=>{w=D;const F=D.applyToLocalDocumentSet(E,j);return g.documentOverlayCache.saveOverlays(I,D.batchId,F)}))})).then((()=>({batchId:w.batchId,changes:L1(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(c,m,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new Lt(Je)),p=p.insert(m,g),c.Vu[c.currentUser.toKey()]=p})(r,o.batchId,t),await ec(r,o.changes),await Pf(r.remoteStore)}catch(o){const u=Ip(o,"Failed to persist write");t.reject(u)}}async function vT(s,e){const t=Ve(s);try{const r=await RC(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const c=t.Au.get(u);c&&(it(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?it(c.hu,14607):o.removedDocuments.size>0&&(it(c.hu,42227),c.hu=!1))})),await ec(t,r,e)}catch(r){await ul(r)}}function Bb(s,e,t){const r=Ve(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Tu.forEach(((u,c)=>{const m=c.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const g=Ve(c);g.onlineState=m;let p=!1;g.queries.forEach(((v,E)=>{for(const w of E.Sa)w.va(m)&&(p=!0)})),p&&Np(g)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _I(s,e,t){const r=Ve(s);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Au.get(e),u=o&&o.key;if(u){let c=new Lt(xe.comparator);c=c.insert(u,Tn.newNoDocument(u,Ne.min()));const m=Ze().add(u),g=new Mf(Ne.min(),new Map,new Lt(Je),c,m);await vT(r,g),r.du=r.du.remove(u),r.Au.delete(e),Op(r)}else await Lg(r.localStore,e,!1).then((()=>zg(r,e,t))).catch(ul)}async function vI(s,e){const t=Ve(s),r=e.batch.batchId;try{const o=await xC(t.localStore,e);ET(t,r,null),bT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ec(t,o)}catch(o){await ul(o)}}async function bI(s,e,t){const r=Ve(s);try{const o=await(function(c,m){const g=Ve(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return g.mutationQueue.lookupMutationBatch(p,m).next((E=>(it(E!==null,37113),v=E.keys(),g.mutationQueue.removeMutationBatch(p,E)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,v,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>g.localDocuments.getDocuments(p,v)))}))})(r.localStore,e);ET(r,e,t),bT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ec(r,o)}catch(o){await ul(o)}}function bT(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function ET(s,e,t){const r=Ve(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function zg(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),t&&s.Pu.yu(r,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||TT(s,r)}))}function TT(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(Sp(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),Op(s))}function qb(s,e,t){for(const r of t)r instanceof pT?(s.Ru.addReference(r.key,e),EI(s,r)):r instanceof yT?(ve(Dp,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||TT(s,r.key)):Ce(19791,{wu:r})}function EI(s,e){const t=e.key,r=t.path.canonicalString();s.du.get(t)||s.Eu.has(r)||(ve(Dp,"New document in limbo: "+t),s.Eu.add(r),Op(s))}function Op(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new xe(Et.fromString(e)),r=s.fu.next();s.Au.set(r,new cI(t)),s.du=s.du.insert(t,r),cT(s.remoteStore,new Yr(Es(dp(t.path)),r,"TargetPurposeLimboResolution",Rf.ce))}}async function ec(s,e,t){const r=Ve(s),o=[],u=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{c.push(r.pu(g,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const v=p?!p.fromCache:t?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(p){o.push(p);const v=Ep.As(g.targetId,p);u.push(v)}})))})),await Promise.all(c),r.Pu.H_(o),await(async function(g,p){const v=Ve(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ue.forEach(p,(w=>ue.forEach(w.Es,(I=>v.persistence.referenceDelegate.addReference(E,w.targetId,I))).next((()=>ue.forEach(w.ds,(I=>v.persistence.referenceDelegate.removeReference(E,w.targetId,I)))))))))}catch(E){if(!cl(E))throw E;ve(Tp,"Failed to update sequence numbers: "+E)}for(const E of p){const w=E.targetId;if(!E.fromCache){const I=v.Ms.get(w),k=I.snapshotVersion,j=I.withLastLimboFreeSnapshotVersion(k);v.Ms=v.Ms.insert(w,j)}}})(r.localStore,u))}async function TI(s,e){const t=Ve(s);if(!t.currentUser.isEqual(e)){ve(Dp,"User change. New user:",e.toKey());const r=await oT(t.localStore,e);t.currentUser=e,(function(u,c){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new pe(oe.CANCELLED,c))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ec(t,r.Ls)}}function wI(s,e){const t=Ve(s),r=t.Au.get(e);if(r&&r.hu)return Ze().add(r.key);{let o=Ze();const u=t.Iu.get(e);if(!u)return o;for(const c of u){const m=t.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}function wT(s){const e=Ve(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=vT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_I.bind(null,e),e.Pu.H_=rI.bind(null,e.eventManager),e.Pu.yu=aI.bind(null,e.eventManager),e}function SI(s){const e=Ve(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bI.bind(null,e),e}class cf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return AC(this.persistence,new TC,e.initialUser,this.serializer)}Cu(e){return new aT(bp.mi,this.serializer)}Du(e){return new OC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cf.provider={build:()=>new cf};class AI extends cf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){it(this.persistence.referenceDelegate instanceof lf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new oC(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ci.withCacheSize(this.cacheSizeBytes):ci.DEFAULT;return new aT((r=>lf.mi(r,t)),this.serializer)}}class Bg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Bb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=TI.bind(null,this.syncEngine),await eI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new nI})()}createDatastore(e){const t=kf(e.databaseInfo.databaseId),r=(function(u){return new LC(u)})(e.databaseInfo);return(function(u,c,m,g){return new BC(u,c,m,g)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,u,c,m){return new HC(r,o,u,c,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>Bb(this.syncEngine,t,0)),(function(){return Vb.v()?new Vb:new MC})())}createSyncEngine(e,t){return(function(o,u,c,m,g,p,v){const E=new hI(o,u,c,m,g,p);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ve(t);ve($a,"RemoteStore shutting down."),r.Ea.add(5),await Wu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Bg.provider={build:()=>new Bg};class xI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ws("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class RI{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new pe(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,u){const c=Ve(o),m={documents:u.map((E=>of(c.serializer,E)))},g=await c.Ho("BatchGetDocuments",c.serializer.databaseId,Et.emptyPath(),m,u.length),p=new Map;g.forEach((E=>{const w=FR(c.serializer,E);p.set(w.key.toString(),w)}));const v=[];return u.forEach((E=>{const w=p.get(E.toString());it(!!w,55234,{key:E}),v.push(w)})),v})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new gp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const o=xe.fromPath(r);this.mutations.push(new K1(o,this.precondition(o)))})),await(async function(r,o){const u=Ve(r),c={writes:o.map((m=>tT(u.serializer,m)))};await u.Go("Commit",u.serializer.databaseId,Et.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ce(50498,{Gu:e.constructor.name});t=Ne.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new pe(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ne.min())?Wn.exists(!1):Wn.updateTime(t):Wn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ne.min()))throw new pe(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wn.updateTime(t)}return Wn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class CI{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.zu=r.maxAttempts,this.M_=new wp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new RI(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((o=>{this.Yu(o)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Yu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!$1(t)}return!1}}const ua="FirestoreClient";class II{constructor(e,t,r,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Bn.UNAUTHENTICATED,this.clientId=op.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async c=>{ve(ua,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(ve(ua,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ea;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Ip(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function rg(s,e){s.asyncQueue.verifyOperationInProgress(),ve(ua,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await oT(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Hb(s,e){s.asyncQueue.verifyOperationInProgress();const t=await NI(s);ve(ua,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((r=>Lb(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>Lb(e.remoteStore,o))),s._onlineComponents=e}async function NI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ve(ua,"Using user provided OfflineComponentProvider");try{await rg(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===oe.FAILED_PRECONDITION||o.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Jo("Error using user provided cache. Falling back to memory cache: "+t),await rg(s,new cf)}}else ve(ua,"Using default OfflineComponentProvider"),await rg(s,new AI(void 0));return s._offlineComponents}async function Mp(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ve(ua,"Using user provided OnlineComponentProvider"),await Hb(s,s._uninitializedComponentsProvider._online)):(ve(ua,"Using default OnlineComponentProvider"),await Hb(s,new Bg))),s._onlineComponents}function DI(s){return Mp(s).then((e=>e.syncEngine))}function OI(s){return Mp(s).then((e=>e.datastore))}async function Fb(s){const e=await Mp(s),t=e.eventManager;return t.onListen=fI.bind(null,e.syncEngine),t.onUnlisten=gI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=dI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=pI.bind(null,e.syncEngine),t}function ST(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const Gb=new Map;const AT="firestore.googleapis.com",Kb=!0;class $b{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=AT,this.ssl=Kb}else this.host=e.host,this.ssl=e.ssl??Kb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rC)throw new pe(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}G2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ST(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lf{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $b({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $b(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new V2;switch(r.type){case"firstParty":return new j2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Gb.get(t);r&&(ve("ComponentProvider","Removing Datastore"),Gb.delete(t),r.terminate())})(this),Promise.resolve()}}function MI(s,e,t,r={}){s=Js(s,Lf);const o=al(e),u=s._getSettings(),c={...u,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${t}`;o&&(WE(`https://${m}`),e1("Firestore",!0)),u.host!==AT&&u.host!==m&&Jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:r};if(!Fa(g,c)&&(s._setSettings(g),r.mockUserToken)){let p,v;if(typeof r.mockUserToken=="string")p=r.mockUserToken,v=Bn.MOCK_USER;else{p=lx(r.mockUserToken,s._app?.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new pe(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Bn(E)}s._authCredentials=new P2(new m1(p,v))}}class fl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fl(this.firestore,e,this._query)}}class qt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ta(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Qu(t,qt._jsonSchema))return new qt(e,r||null,new xe(Et.fromString(t.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:un("string",qt._jsonSchemaVersion),referencePath:un("string")};class ta extends fl{constructor(e,t,r){super(e,t,dp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new xe(e))}withConverter(e){return new ta(this.firestore,e,this._path)}}function Xn(s,e,...t){if(s=wn(s),g1("collection","path",e),s instanceof Lf){const r=Et.fromString(e,...t);return rb(r),new ta(s,null,r)}{if(!(s instanceof qt||s instanceof ta))throw new pe(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Et.fromString(e,...t));return rb(r),new ta(s.firestore,null,r)}}function Jn(s,e,...t){if(s=wn(s),arguments.length===1&&(e=op.newId()),g1("doc","path",e),s instanceof Lf){const r=Et.fromString(e,...t);return sb(r),new qt(s,null,new xe(r))}{if(!(s instanceof qt||s instanceof ta))throw new pe(oe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Et.fromString(e,...t));return sb(r),new qt(s.firestore,s instanceof ta?s.converter:null,new xe(r))}}const Qb="AsyncQueue";class Yb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wp(this,"async_queue_retry"),this._c=()=>{const r=sg();r&&ve(Qb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=sg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=sg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ea;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!cl(e))throw e;ve(Qb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ws("INTERNAL UNHANDLED ERROR: ",Xb(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Cp.createAndSchedule(this,e,t,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ce(47125,{Pc:Xb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Xb(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}function Jb(s){return(function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class il extends Lf{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new Yb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yb(e),this._firestoreClient=void 0,await e}}}function kI(s,e){const t=typeof s=="object"?s:s1(),r=typeof s=="string"?s:Wh,o=rp(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=ax("firestore");u&&MI(o,...u)}return o}function kp(s){if(s._terminated)throw new pe(oe.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||VI(s),s._firestoreClient}function VI(s){const e=s._freezeSettings(),t=(function(o,u,c,m){return new nR(o,u,c,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,ST(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new II(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}class Ei{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ei(kn.fromBase64String(e))}catch(t){throw new pe(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ei(kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ei._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Qu(e,Ei._jsonSchema))return Ei.fromBase64String(e.bytes)}}Ei._jsonSchemaVersion="firestore/bytes/1.0",Ei._jsonSchema={type:un("string",Ei._jsonSchemaVersion),bytes:un("string")};class tc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vp{constructor(e){this._methodName=e}}class Ts{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ts._jsonSchemaVersion}}static fromJSON(e){if(Qu(e,Ts._jsonSchema))return new Ts(e.latitude,e.longitude)}}Ts._jsonSchemaVersion="firestore/geoPoint/1.0",Ts._jsonSchema={type:un("string",Ts._jsonSchemaVersion),latitude:un("number"),longitude:un("number")};class ws{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ws._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Qu(e,ws._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ws(e.vectorValues);throw new pe(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ws._jsonSchemaVersion="firestore/vectorValue/1.0",ws._jsonSchema={type:un("string",ws._jsonSchemaVersion),vectorValues:un("object")};const PI=/^__.*__$/;class LI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new fa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ju(e,this.data,t,this.fieldTransforms)}}class xT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new fa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function RT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:s})}}class Pp{constructor(e,t,r,o,u,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Pp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return hf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(RT(this.Ac)&&PI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class UI{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||kf(e)}Cc(e,t,r,o=!1){return new Pp({Ac:e,methodName:t,Dc:r,path:Mn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uf(s){const e=s._freezeSettings(),t=kf(s._databaseId);return new UI(s._databaseId,!!e.ignoreUndefinedProperties,t)}function CT(s,e,t,r,o,u={}){const c=s.Cc(u.merge||u.mergeFields?2:0,e,t,o);Lp("Data must be an object, but it was:",c,r);const m=DT(r,c);let g,p;if(u.merge)g=new Ti(c.fieldMask),p=c.fieldTransforms;else if(u.mergeFields){const v=[];for(const E of u.mergeFields){const w=qg(e,E,t);if(!c.contains(w))throw new pe(oe.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);MT(v,w)||v.push(w)}g=new Ti(v),p=c.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,p=c.fieldTransforms;return new LI(new Zn(m),g,p)}class jf extends Vp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jf}}function IT(s,e,t,r){const o=s.Cc(1,e,t);Lp("Data must be an object, but it was:",o,r);const u=[],c=Zn.empty();ha(r,((g,p)=>{const v=Up(e,g,t);p=wn(p);const E=o.yc(v);if(p instanceof jf)u.push(v);else{const w=nc(p,E);w!=null&&(u.push(v),c.set(v,w))}}));const m=new Ti(u);return new xT(c,m,o.fieldTransforms)}function NT(s,e,t,r,o,u){const c=s.Cc(1,e,t),m=[qg(e,r,t)],g=[o];if(u.length%2!=0)throw new pe(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<u.length;w+=2)m.push(qg(e,u[w])),g.push(u[w+1]);const p=[],v=Zn.empty();for(let w=m.length-1;w>=0;--w)if(!MT(p,m[w])){const I=m[w];let k=g[w];k=wn(k);const j=c.yc(I);if(k instanceof jf)p.push(I);else{const D=nc(k,j);D!=null&&(p.push(I),v.set(I,D))}}const E=new Ti(p);return new xT(v,E,c.fieldTransforms)}function jI(s,e,t,r=!1){return nc(t,s.Cc(r?4:3,e))}function nc(s,e){if(OT(s=wn(s)))return Lp("Unsupported field value:",e,s),DT(s,e);if(s instanceof Vp)return(function(r,o){if(!RT(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let c=0;for(const m of r){let g=nc(m,o.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(s,e)}return(function(r,o){if((r=wn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return AR(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Nt.fromDate(r);return{timestampValue:af(o.serializer,u)}}if(r instanceof Nt){const u=new Nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:af(o.serializer,u)}}if(r instanceof Ts)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ei)return{bytesValue:J1(o.serializer,r._byteString)};if(r instanceof qt){const u=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:_p(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof ws)return(function(c,m){return{mapValue:{fields:{[S1]:{stringValue:A1},[ef]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return mp(m.serializer,p)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${xf(r)}`)})(s,e)}function DT(s,e){const t={};return _1(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ha(s,((r,o)=>{const u=nc(o,e.mc(r));u!=null&&(t[r]=u)})),{mapValue:{fields:t}}}function OT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Nt||s instanceof Ts||s instanceof Ei||s instanceof qt||s instanceof Vp||s instanceof ws)}function Lp(s,e,t){if(!OT(t)||!p1(t)){const r=xf(t);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function qg(s,e,t){if((e=wn(e))instanceof tc)return e._internalPath;if(typeof e=="string")return Up(s,e);throw hf("Field path arguments must be of type string or ",s,!1,void 0,t)}const zI=new RegExp("[~\\*/\\[\\]]");function Up(s,e,t){if(e.search(zI)>=0)throw hf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new tc(...e.split("."))._internalPath}catch{throw hf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function hf(s,e,t,r,o){const u=r&&!r.isEmpty(),c=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${r}`),c&&(g+=` in document ${o}`),g+=")"),new pe(oe.INVALID_ARGUMENT,m+s+g)}function MT(s,e){return s.some((t=>t.isEqual(e)))}class ff{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class BI extends ff{data(){return super.data()}}function jp(s,e){return typeof e=="string"?Up(s,e):e instanceof tc?e._internalPath:e._delegate._internalPath}function qI(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new pe(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zp{}class HI extends zp{}function FI(s,e,...t){let r=[];e instanceof zp&&r.push(e),r=r.concat(t),(function(u){const c=u.filter((g=>g instanceof Bp)).length,m=u.filter((g=>g instanceof zf)).length;if(c>1||c>0&&m>0)throw new pe(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class zf extends HI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new zf(e,t,r)}_apply(e){const t=this._parse(e);return kT(e._query,t),new fl(e.firestore,e.converter,Og(e._query,t))}_parse(e){const t=Uf(e.firestore);return(function(u,c,m,g,p,v,E){let w;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new pe(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Wb(E,v);const k=[];for(const j of E)k.push(Zb(g,u,j));w={arrayValue:{values:k}}}else w=Zb(g,u,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Wb(E,v),w=jI(m,c,E,v==="in"||v==="not-in");return ln.create(p,v,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function GI(s,e,t){const r=e,o=jp("where",s);return zf._create(o,r,t)}class Bp extends zp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Bp(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:ss.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,u){let c=o;const m=u.getFlattenedFilters();for(const g of m)kT(c,g),c=Og(c,g)})(e._query,t),new fl(e.firestore,e.converter,Og(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Zb(s,e,t){if(typeof(t=wn(t))=="string"){if(t==="")throw new pe(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!M1(e)&&t.indexOf("/")!==-1)throw new pe(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Et.fromString(t));if(!xe.isDocumentKey(r))throw new pe(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return db(s,new xe(r))}if(t instanceof qt)return db(s,t._key);throw new pe(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xf(t)}.`)}function Wb(s,e){if(!Array.isArray(s)||s.length===0)throw new pe(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kT(s,e){const t=(function(o,u){for(const c of o)for(const m of c.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new pe(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class VT{convertValue(e,t="none"){switch(oa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(aa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ha(e,((o,u)=>{r[o]=this.convertValue(u,t)})),r}convertVectorValue(e){const t=e.fields?.[ef].arrayValue?.values?.map((r=>Xt(r.doubleValue)));return new ws(t)}convertGeoPoint(e){return new Ts(Xt(e.latitude),Xt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Cf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Vu(e));default:return null}}convertTimestamp(e){const t=ra(e);return new Nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Et.fromString(e);it(sT(r),9688,{name:e});const o=new Pu(r.get(1),r.get(3)),u=new xe(r.popFirst(5));return o.isEqual(t)||Ws(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function PT(s,e,t){let r;return r=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,r}class KI extends VT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ei(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}class Bo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class na extends ff{constructor(e,t,r,o,u,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(jp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=na._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}na._jsonSchemaVersion="firestore/documentSnapshot/1.0",na._jsonSchema={type:un("string",na._jsonSchemaVersion),bundleSource:un("string","DocumentSnapshot"),bundleName:un("string"),bundle:un("string")};class qh extends na{data(e={}){return super.data(e)}}class Fo{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Bo(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new qh(this._firestore,this._userDataWriter,r.key,r,new Bo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const g=new qh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Bo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new qh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Bo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,v=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),v=c.indexOf(m.doc.key)),{type:$I(m.type),doc:g,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=op.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $I(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:s})}}Fo._jsonSchemaVersion="firestore/querySnapshot/1.0",Fo._jsonSchema={type:un("string",Fo._jsonSchemaVersion),bundleSource:un("string","QuerySnapshot"),bundleName:un("string"),bundle:un("string")};class qp extends VT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ei(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}function Hp(s,e,t){s=Js(s,qt);const r=Js(s.firestore,il),o=PT(s.converter,e,t);return LT(r,[CT(Uf(r),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,Wn.none())])}function Su(s,e,t,...r){s=Js(s,qt);const o=Js(s.firestore,il),u=Uf(o);let c;return c=typeof(e=wn(e))=="string"||e instanceof tc?NT(u,"updateDoc",s._key,e,t,r):IT(u,"updateDoc",s._key,e),LT(o,[c.toMutation(s._key,Wn.exists(!0))])}function Fp(s,...e){s=wn(s);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Jb(e[r])||(t=e[r++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Jb(e[r])){const g=e[r];e[r]=g.next?.bind(g),e[r+1]=g.error?.bind(g),e[r+2]=g.complete?.bind(g)}let u,c,m;if(s instanceof qt)c=Js(s.firestore,il),m=dp(s._key.path),u={next:g=>{e[r]&&e[r](QI(c,s,g))},error:e[r+1],complete:e[r+2]};else{const g=Js(s,fl);c=Js(g.firestore,il),m=g._query;const p=new qp(c);u={next:v=>{e[r]&&e[r](new Fo(c,p,g,v))},error:e[r+1],complete:e[r+2]},qI(s._query)}return(function(p,v,E,w){const I=new xI(w),k=new oI(v,I,E);return p.asyncQueue.enqueueAndForget((async()=>iI(await Fb(p),k))),()=>{I.Nu(),p.asyncQueue.enqueueAndForget((async()=>sI(await Fb(p),k)))}})(kp(c),m,o,u)}function LT(s,e){return(function(r,o){const u=new ea;return r.asyncQueue.enqueueAndForget((async()=>yI(await DI(r),o,u))),u.promise})(kp(s),e)}function QI(s,e,t){const r=t.docs.get(e._key),o=new qp(s);return new na(s,o,e._key,r,new Bo(t.hasPendingWrites,t.fromCache),e.converter)}const YI={maxAttempts:5};function du(s,e){if((s=wn(s)).firestore!==e)throw new pe(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class XI{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Uf(e)}get(e){const t=du(e,this._firestore),r=new KI(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return Ce(24041);const u=o[0];if(u.isFoundDocument())return new ff(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new ff(this._firestore,r,t._key,null,t.converter);throw Ce(18433,{doc:u})}))}set(e,t,r){const o=du(e,this._firestore),u=PT(o.converter,t,r),c=CT(this._dataReader,"Transaction.set",o._key,u,o.converter!==null,r);return this._transaction.set(o._key,c),this}update(e,t,r,...o){const u=du(e,this._firestore);let c;return c=typeof(t=wn(t))=="string"||t instanceof tc?NT(this._dataReader,"Transaction.update",u._key,t,r,o):IT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=du(e,this._firestore);return this._transaction.delete(t._key),this}}class JI extends XI{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=du(e,this._firestore),r=new qp(this._firestore);return super.get(e).then((o=>new na(this._firestore,r,t._key,o._document,new Bo(!1,!1),t.converter)))}}function Au(s,e,t){s=Js(s,il);const r={...YI,...t};return(function(u){if(u.maxAttempts<1)throw new pe(oe.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(u,c,m){const g=new ea;return u.asyncQueue.enqueueAndForget((async()=>{const p=await OI(u);new CI(u.asyncQueue,p,m,c,g).ju()})),g.promise})(kp(s),(o=>e(new JI(s,o))),r)}(function(e,t=!0){(function(o){ll=o})(ol),Xo(new Ga("firestore",((r,{instanceIdentifier:o,options:u})=>{const c=r.getProvider("app").getImmediate(),m=new il(new L2(r.getProvider("auth-internal")),new z2(c,r.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new pe(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pu(p.options.projectId,v)})(c,o),c);return u={useFetchStreams:t,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Zr(eb,tb,e),Zr(eb,tb,"esm2020")})();function UT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZI=UT,jT=new Ku("auth","Firebase",UT());const df=new ip("@firebase/auth");function WI(s,...e){df.logLevel<=Xe.WARN&&df.warn(`Auth (${ol}): ${s}`,...e)}function Hh(s,...e){df.logLevel<=Xe.ERROR&&df.error(`Auth (${ol}): ${s}`,...e)}function tr(s,...e){throw Gp(s,...e)}function Ss(s,...e){return Gp(s,...e)}function zT(s,e,t){const r={...ZI(),[e]:t};return new Ku("auth","Firebase",r).create(e,{appName:s.name})}function ia(s){return zT(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gp(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return jT.create(s,...e)}function Oe(s,e,...t){if(!s)throw Gp(e,...t)}function Ys(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Hh(e),new Error(e)}function nr(s,e){s||Ys(e)}function Hg(){return typeof self<"u"&&self.location?.href||""}function eN(){return eE()==="http:"||eE()==="https:"}function eE(){return typeof self<"u"&&self.location?.protocol||null}function tN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eN()||mx()||"connection"in navigator)?navigator.onLine:!0}function nN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class ic{constructor(e,t){this.shortDelay=e,this.longDelay=t,nr(t>e,"Short delay should be less than long delay!"),this.isMobile=hx()||gx()}get(){return tN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Kp(s,e){nr(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class BT{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const iN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const sN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rN=new ic(3e4,6e4);function Bf(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function dl(s,e,t,r,o={}){return qT(s,o,async()=>{let u={},c={};r&&(e==="GET"?c=r:u={body:JSON.stringify(r)});const m=$u({key:s.config.apiKey,...c}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const p={method:e,headers:g,...u};return dx()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&al(s.emulatorConfig.host)&&(p.credentials="include"),BT.fetch()(await FT(s,s.config.apiHost,t,m),p)})}async function qT(s,e,t){s._canInitEmulator=!1;const r={...iN,...e};try{const o=new aN(s),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw kh(s,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw kh(s,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw kh(s,"email-already-in-use",c);if(g==="USER_DISABLED")throw kh(s,"user-disabled",c);const v=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw zT(s,v,p);tr(s,v)}}catch(o){if(o instanceof sr)throw o;tr(s,"network-request-failed",{message:String(o)})}}async function HT(s,e,t,r,o={}){const u=await dl(s,e,t,r,o);return"mfaPendingCredential"in u&&tr(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function FT(s,e,t,r){const o=`${e}${t}?${r}`,u=s,c=u.config.emulator?Kp(s.config,o):`${s.config.apiScheme}://${o}`;return sN.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}class aN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ss(this.auth,"network-request-failed")),rN.get())})}}function kh(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=Ss(s,e,r);return o.customData._tokenResponse=t,o}async function oN(s,e){return dl(s,"POST","/v1/accounts:delete",e)}async function mf(s,e){return dl(s,"POST","/v1/accounts:lookup",e)}function xu(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lN(s,e=!1){const t=wn(s),r=await t.getIdToken(e),o=$p(r);Oe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,c=u?.sign_in_provider;return{claims:o,token:r,authTime:xu(ag(o.auth_time)),issuedAtTime:xu(ag(o.iat)),expirationTime:xu(ag(o.exp)),signInProvider:c||null,signInSecondFactor:u?.sign_in_second_factor||null}}function ag(s){return Number(s)*1e3}function $p(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return Hh("JWT malformed, contained fewer than 3 sections"),null;try{const o=YE(t);return o?JSON.parse(o):(Hh("Failed to decode base64 JWT payload"),null)}catch(o){return Hh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function tE(s){const e=$p(s);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function zu(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof sr&&uN(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function uN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class cN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Fg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=xu(this.lastLoginAt),this.creationTime=xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function gf(s){const e=s.auth,t=await s.getIdToken(),r=await zu(s,mf(e,{idToken:t}));Oe(r?.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?GT(o.providerUserInfo):[],c=fN(s.providerData,u),m=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!c?.length,p=m?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Fg(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(s,v)}async function hN(s){const e=wn(s);await gf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fN(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function GT(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function dN(s,e){const t=await qT(s,{},async()=>{const r=$u({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,c=await FT(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return s.emulatorConfig&&al(s.emulatorConfig.host)&&(g.credentials="include"),BT.fetch()(c,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function mN(s,e){return dl(s,"POST","/v2/accounts:revokeToken",Bf(s,e))}class Go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const t=tE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:u}=await dN(e,t);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:u}=t,c=new Go;return r&&(Oe(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),o&&(Oe(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),u&&(Oe(typeof u=="number","internal-error",{appName:e}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Go,this.toJSON())}_performRefresh(){return Ys("not implemented")}}function zr(s,e){Oe(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class is{constructor({uid:e,auth:t,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new cN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Fg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await zu(this,this.stsTokenManager.getToken(this.auth,e));return Oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return lN(this,e)}reload(){return hN(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new is({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await gf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ns(this.auth.app))return Promise.reject(ia(this.auth));const e=await this.getIdToken();return await zu(this,oN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,c=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:w,isAnonymous:I,providerData:k,stsTokenManager:j}=t;Oe(E&&j,e,"internal-error");const D=Go.fromJSON(this.name,j);Oe(typeof E=="string",e,"internal-error"),zr(r,e.name),zr(o,e.name),Oe(typeof w=="boolean",e,"internal-error"),Oe(typeof I=="boolean",e,"internal-error"),zr(u,e.name),zr(c,e.name),zr(m,e.name),zr(g,e.name),zr(p,e.name),zr(v,e.name);const F=new is({uid:E,auth:e,email:o,emailVerified:w,displayName:r,isAnonymous:I,photoURL:c,phoneNumber:u,tenantId:m,stsTokenManager:D,createdAt:p,lastLoginAt:v});return k&&Array.isArray(k)&&(F.providerData=k.map(ne=>({...ne}))),g&&(F._redirectEventId=g),F}static async _fromIdTokenResponse(e,t,r=!1){const o=new Go;o.updateFromServerResponse(t);const u=new is({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await gf(u),u}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Oe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?GT(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!u?.length,m=new Go;m.updateFromIdToken(r);const g=new is({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:c}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Fg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,p),g}}const nE=new Map;function Xs(s){nr(s instanceof Function,"Expected a class definition");let e=nE.get(s);return e?(nr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,nE.set(s,e),e)}class KT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}KT.type="NONE";const iE=KT;function Fh(s,e,t){return`firebase:${s}:${e}:${t}`}class Ko{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=Fh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Fh("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await mf(this.auth,{idToken:e}).catch(()=>{});return t?is._fromGetAccountInfoResponse(this.auth,t,e):null}return is._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ko(Xs(iE),e,r);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||Xs(iE);const c=Fh(r,e.config.apiKey,e.name);let m=null;for(const p of t)try{const v=await p._get(c);if(v){let E;if(typeof v=="string"){const w=await mf(e,{idToken:v}).catch(()=>{});if(!w)break;E=await is._fromGetAccountInfoResponse(e,w,v)}else E=is._fromJSON(e,v);p!==u&&(m=E),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Ko(u,e,r):(u=g[0],m&&await u._set(c,m.toJSON()),await Promise.all(t.map(async p=>{if(p!==u)try{await p._remove(c)}catch{}})),new Ko(u,e,r))}}function sE(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(XT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($T(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZT(e))return"Blackberry";if(WT(e))return"Webos";if(QT(e))return"Safari";if((e.includes("chrome/")||YT(e))&&!e.includes("edge/"))return"Chrome";if(JT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if(r?.length===2)return r[1]}return"Other"}function $T(s=qn()){return/firefox\//i.test(s)}function QT(s=qn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YT(s=qn()){return/crios\//i.test(s)}function XT(s=qn()){return/iemobile/i.test(s)}function JT(s=qn()){return/android/i.test(s)}function ZT(s=qn()){return/blackberry/i.test(s)}function WT(s=qn()){return/webos/i.test(s)}function Qp(s=qn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function gN(s=qn()){return Qp(s)&&!!window.navigator?.standalone}function pN(){return px()&&document.documentMode===10}function ew(s=qn()){return Qp(s)||JT(s)||WT(s)||ZT(s)||/windows phone/i.test(s)||XT(s)}function tw(s,e=[]){let t;switch(s){case"Browser":t=sE(qn());break;case"Worker":t=`${sE(qn())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ol}/${r}`}class yN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=u=>new Promise((c,m)=>{try{const g=e(u);c(g)}catch(g){m(g)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function _N(s,e={}){return dl(s,"GET","/v2/passwordPolicy",Bf(s,e))}const vN=6;class bN{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??vN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class EN{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rE(this),this.idTokenSubscription=new rE(this),this.beforeStateQueue=new yN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ko.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await mf(this,{idToken:e}),r=await is._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ns(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,c=r?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===c)&&m?.user&&(r=m.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ns(this.app))return Promise.reject(ia(this));const t=e?wn(e):null;return t&&Oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ns(this.app)?Promise.reject(ia(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ns(this.app)?Promise.reject(ia(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _N(this),t=new bN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ku("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await mN(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xs(e)||this._popupRedirectResolver;Oe(t,this,"argument-error"),this.redirectPersistenceManager=await Ko.create(this,[Xs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,r,o);return()=>{c=!0,g()}}else{const g=e.addObserver(t);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ns(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&WI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function qf(s){return wn(s)}class rE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Sx(t=>this.observer=t)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Yp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TN(s){Yp=s}function wN(s){return Yp.loadJS(s)}function SN(){return Yp.gapiScript}function AN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}function xN(s,e){const t=rp(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(Fa(u,e??{}))return o;tr(o,"already-initialized")}return t.initialize({options:e})}function RN(s,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Xs);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function CN(s,e,t){const r=qf(s);Oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=nw(e),{host:c,port:m}=IN(e),g=m===null?"":`:${m}`,p={url:`${u}//${c}${g}/`},v=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Oe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Oe(Fa(p,r.config.emulator)&&Fa(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,al(c)?(WE(`${u}//${c}${g}`),e1("Auth",!0)):NN()}function nw(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function IN(s){const e=nw(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:aE(r.substr(u.length+1))}}else{const[u,c]=r.split(":");return{host:u,port:aE(c)}}}function aE(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function NN(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class iw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ys("not implemented")}_getIdTokenResponse(e){return Ys("not implemented")}_linkToIdToken(e,t){return Ys("not implemented")}_getReauthenticationResolver(e){return Ys("not implemented")}}async function $o(s,e){return HT(s,"POST","/v1/accounts:signInWithIdp",Bf(s,e))}const DN="http://localhost";class Qa extends iw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Qa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):tr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=t;if(!r||!o)return null;const c=new Qa(r,o);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return $o(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,$o(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,$o(e,t)}buildRequest(){const e={requestUri:DN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$u(t)}return e}}class sw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class sc extends sw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Gr extends sc{constructor(){super("facebook.com")}static credential(e){return Qa._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gr.credential(e.oauthAccessToken)}catch{return null}}}Gr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gr.PROVIDER_ID="facebook.com";class Kr extends sc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Qa._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Kr.credential(t,r)}catch{return null}}}Kr.GOOGLE_SIGN_IN_METHOD="google.com";Kr.PROVIDER_ID="google.com";class $r extends sc{constructor(){super("github.com")}static credential(e){return Qa._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.GITHUB_SIGN_IN_METHOD="github.com";$r.PROVIDER_ID="github.com";class Qr extends sc{constructor(){super("twitter.com")}static credential(e,t){return Qa._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Qr.credential(t,r)}catch{return null}}}Qr.TWITTER_SIGN_IN_METHOD="twitter.com";Qr.PROVIDER_ID="twitter.com";async function ON(s,e){return HT(s,"POST","/v1/accounts:signUp",Bf(s,e))}class ca{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const u=await is._fromIdTokenResponse(e,r,o),c=oE(r);return new ca({user:u,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=oE(r);return new ca({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function oE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}async function Bu(s){if(ns(s.app))return Promise.reject(ia(s));const e=qf(s);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new ca({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await ON(e,{returnSecureToken:!0}),r=await ca._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class pf extends sr{constructor(e,t,r,o){super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,pf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new pf(e,t,r,o)}}function rw(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?pf._fromErrorAndOperation(s,u,e,r):u})}async function MN(s,e,t=!1){const r=await zu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return ca._forOperation(s,"link",r)}async function kN(s,e,t=!1){const{auth:r}=s;if(ns(r.app))return Promise.reject(ia(r));const o="reauthenticate";try{const u=await zu(s,rw(r,o,e,s),t);Oe(u.idToken,r,"internal-error");const c=$p(u.idToken);Oe(c,r,"internal-error");const{sub:m}=c;return Oe(s.uid===m,r,"user-mismatch"),ca._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&tr(r,"user-mismatch"),u}}async function VN(s,e,t=!1){if(ns(s.app))return Promise.reject(ia(s));const r="signIn",o=await rw(s,r,e),u=await ca._fromIdTokenResponse(s,r,o);return t||await s._updateCurrentUser(u.user),u}function PN(s,e,t,r){return wn(s).onIdTokenChanged(e,t,r)}function LN(s,e,t){return wn(s).beforeAuthStateChanged(e,t)}const yf="__sak";class aw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yf,"1"),this.storage.removeItem(yf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const UN=1e3,jN=10;class ow extends aw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ew(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,m,g)=>{this.notifyListeners(c,g)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},u=this.storage.getItem(r);pN()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,jN):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},UN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ow.type="LOCAL";const zN=ow;class lw extends aw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}lw.type="SESSION";const uw=lw;function BN(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Hf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new Hf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:u}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(c).map(async p=>p(t.origin,u)),g=await BN(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hf.receivers=[];function Xp(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}class qN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,c;return new Promise((m,g)=>{const p=Xp("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(E){const w=E;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(v),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(w.data.response);break;default:clearTimeout(v),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function As(){return window}function HN(s){As().location.href=s}function cw(){return typeof As().WorkerGlobalScope<"u"&&typeof As().importScripts=="function"}async function FN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GN(){return navigator?.serviceWorker?.controller||null}function KN(){return cw()?self:null}const hw="firebaseLocalStorageDb",$N=1,_f="firebaseLocalStorage",fw="fbase_key";class rc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ff(s,e){return s.transaction([_f],e?"readwrite":"readonly").objectStore(_f)}function QN(){const s=indexedDB.deleteDatabase(hw);return new rc(s).toPromise()}function Gg(){const s=indexedDB.open(hw,$N);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(_f,{keyPath:fw})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(_f)?e(r):(r.close(),await QN(),e(await Gg()))})})}async function lE(s,e,t){const r=Ff(s,!0).put({[fw]:e,value:t});return new rc(r).toPromise()}async function YN(s,e){const t=Ff(s,!1).get(e),r=await new rc(t).toPromise();return r===void 0?null:r.value}function uE(s,e){const t=Ff(s,!0).delete(e);return new rc(t).toPromise()}const XN=800,JN=3;class dw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>JN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hf._getInstance(KN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await FN(),!this.activeServiceWorker)return;this.sender=new qN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||GN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gg();return await lE(e,yf,"1"),await uE(e,yf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>lE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>YN(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>uE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Ff(o,!1).getAll();return new rc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dw.type="LOCAL";const ZN=dw;new ic(3e4,6e4);function WN(s,e){return e?Xs(e):(Oe(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Jp extends iw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $o(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $o(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $o(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function eD(s){return VN(s.auth,new Jp(s),s.bypassAuthState)}function tD(s){const{auth:e,user:t}=s;return Oe(t,e,"internal-error"),kN(t,new Jp(s),s.bypassAuthState)}async function nD(s){const{auth:e,user:t}=s;return Oe(t,e,"internal-error"),MN(t,new Jp(s),s.bypassAuthState)}class mw{constructor(e,t,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:u,error:c,type:m}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:t,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eD;case"linkViaPopup":case"linkViaRedirect":return nD;case"reauthViaPopup":case"reauthViaRedirect":return tD;default:tr(this.auth,"internal-error")}}resolve(e){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const iD=new ic(2e3,1e4);class qo extends mw{constructor(e,t,r,o,u){super(e,t,o,u),this.provider=r,this.authWindow=null,this.pollId=null,qo.currentPopupAction&&qo.currentPopupAction.cancel(),qo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){nr(this.filter.length===1,"Popup operations only handle one event");const e=Xp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ss(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ss(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ss(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iD.get())};e()}}qo.currentPopupAction=null;const sD="pendingRedirect",Gh=new Map;class rD extends mw{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Gh.get(this.auth._key());if(!e){try{const r=await aD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Gh.set(this.auth._key(),e)}return this.bypassAuthState||Gh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aD(s,e){const t=uD(e),r=lD(s);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function oD(s,e){Gh.set(s._key(),e)}function lD(s){return Xs(s._redirectPersistence)}function uD(s){return Fh(sD,s.config.apiKey,s.name)}async function cD(s,e,t=!1){if(ns(s.app))return Promise.reject(ia(s));const r=qf(s),o=WN(r,e),c=await new rD(r,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const hD=600*1e3;class fD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!gw(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ss(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hD&&this.cachedEventUids.clear(),this.cachedEventUids.has(cE(e))}saveEventToCache(e){this.cachedEventUids.add(cE(e)),this.lastProcessedEventTime=Date.now()}}function cE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function gw({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function dD(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gw(s);default:return!1}}async function mD(s,e={}){return dl(s,"GET","/v1/projects",e)}const gD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pD=/^https?/;async function yD(s){if(s.config.emulator)return;const{authorizedDomains:e}=await mD(s);for(const t of e)try{if(_D(t))return}catch{}tr(s,"unauthorized-domain")}function _D(s){const e=Hg(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!pD.test(t))return!1;if(gD.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const vD=new ic(3e4,6e4);function hE(){const s=As().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function bD(s){return new Promise((e,t)=>{function r(){hE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hE(),t(Ss(s,"network-request-failed"))},timeout:vD.get()})}if(As().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(As().gapi?.load)r();else{const o=AN("iframefcb");return As()[o]=()=>{gapi.load?r():t(Ss(s,"network-request-failed"))},wN(`${SN()}?onload=${o}`).catch(u=>t(u))}}).catch(e=>{throw Kh=null,e})}let Kh=null;function ED(s){return Kh=Kh||bD(s),Kh}const TD=new ic(5e3,15e3),wD="__/auth/iframe",SD="emulator/auth/iframe",AD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RD(s){const e=s.config;Oe(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Kp(e,SD):`https://${s.config.authDomain}/${wD}`,r={apiKey:e.apiKey,appName:s.name,v:ol},o=xD.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${t}?${$u(r).slice(1)}`}async function CD(s){const e=await ED(s),t=As().gapi;return Oe(t,s,"internal-error"),e.open({where:document.body,url:RD(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AD,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const c=Ss(s,"network-request-failed"),m=As().setTimeout(()=>{u(c)},TD.get());function g(){As().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{u(c)})}))}const ID={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ND=500,DD=600,OD="_blank",MD="http://localhost";class fE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kD(s,e,t,r=ND,o=DD){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...ID,width:r.toString(),height:o.toString(),top:u,left:c},p=qn().toLowerCase();t&&(m=YT(p)?OD:t),$T(p)&&(e=e||MD,g.scrollbars="yes");const v=Object.entries(g).reduce((w,[I,k])=>`${w}${I}=${k},`,"");if(gN(p)&&m!=="_self")return VD(e||"",m),new fE(null);const E=window.open(e||"",m,v);Oe(E,s,"popup-blocked");try{E.focus()}catch{}return new fE(E)}function VD(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const PD="__/auth/handler",LD="emulator/auth/handler",UD=encodeURIComponent("fac");async function dE(s,e,t,r,o,u){Oe(s.config.authDomain,s,"auth-domain-config-required"),Oe(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:ol,eventId:o};if(e instanceof sw){e.setDefaultLanguage(s.languageCode),c.providerId=e.providerId||"",wx(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof sc){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}s.tenantId&&(c.tid=s.tenantId);const m=c;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const g=await s._getAppCheckToken(),p=g?`#${UD}=${encodeURIComponent(g)}`:"";return`${jD(s)}?${$u(m).slice(1)}${p}`}function jD({config:s}){return s.emulator?Kp(s,LD):`https://${s.authDomain}/${PD}`}const og="webStorageSupport";class zD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uw,this._completeRedirectFn=cD,this._overrideRedirectResult=oD}async _openPopup(e,t,r,o){nr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await dE(e,t,r,Hg(),o);return kD(e,u,Xp())}async _openRedirect(e,t,r,o){await this._originValidation(e);const u=await dE(e,t,r,Hg(),o);return HN(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(nr(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await CD(e),r=new fD(e);return t.register("authEvent",o=>(Oe(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(og,{type:og},o=>{const u=o?.[0]?.[og];u!==void 0&&t(!!u),tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ew()||QT()||Qp()}}const BD=zD;var mE="@firebase/auth",gE="1.12.0";class qD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function HD(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function FD(s){Xo(new Ga("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=r.options;Oe(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tw(s)},p=new EN(r,o,u,g);return RN(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Xo(new Ga("auth-internal",e=>{const t=qf(e.getProvider("auth").getImmediate());return(r=>new qD(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zr(mE,gE,HD(s)),Zr(mE,gE,"esm2020")}const GD=300,KD=ZE("authIdTokenMaxAge")||GD;let pE=null;const $D=s=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>KD)return;const o=t?.token;pE!==o&&(pE=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function qu(s=s1()){const e=rp(s,"auth");if(e.isInitialized())return e.getImmediate();const t=xN(s,{popupRedirectResolver:BD,persistence:[ZN,zN,uw]}),r=ZE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const c=$D(u.toString());LN(t,c,()=>c(t.currentUser)),PN(t,m=>c(m))}}const o=XE("auth");return o&&CN(t,`http://${o}`),t}function QD(){return document.getElementsByTagName("head")?.[0]??document}TN({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const u=Ss("internal-error");u.customData=o,t(u)},r.type="text/javascript",r.charset="UTF-8",QD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});FD("Browser");var YD="firebase",XD="12.7.0";Zr(YD,XD,"app");const yE={apiKey:"AIzaSyB3ncjSdbTdaUqac5QvHon-Id5mCo3pByM",authDomain:"dragmate-af04d.firebaseapp.com",projectId:"dragmate-af04d",storageBucket:"dragmate-af04d.firebasestorage.app",messagingSenderId:"370425129874",appId:"1:370425129874:web:4c5c526a593e8fa45a6f4b"};let lg=null,$e=null,$h=null,On=!1;try{Object.values(yE).every(Boolean)?(lg=Yv().length?Yv()[0]:i1(yE),$e=kI(lg),$h=qu(lg),On=!0,console.log(" Firebase initialized for DragMate")):console.warn(" DEMO MODE: Firebase env vars missing. Global features will run in local/demo mode only.")}catch(s){console.error(" Firebase initialization failed:",s)}const _E=3e4;async function JD(s){return s?s.currentUser?s.currentUser:(await Bu(s)).user??null:null}async function vE(s,e){const t=Jn(s,"presence",e.uid);await Hp(t,{lastSeen:new Date,status:"online"},{merge:!0})}function ZD(){const[s,e]=q.useState({count:null,loading:!0,error:null,isOnline:!1,isSupported:On&&!!$e&&!!$h});return q.useEffect(()=>{if(!On||!$e||!$h){e(g=>({...g,loading:!1,isSupported:!1}));return}const t=$e,r=$h;let o=!1,u=null,c=null;return(async()=>{try{const g=await JD(r);if(!g||o)return;await vE(t,g),e(E=>({...E,isOnline:!0,isSupported:!0})),u=window.setInterval(()=>{vE(t,g).catch(E=>{console.error("Failed to update presence",E)})},_E/2);const p=new Date(Date.now()-_E),v=FI(Xn(t,"presence"),GI("lastSeen",">=",p));c=Fp(v,E=>{o||e(w=>({...w,count:E.size,loading:!1,error:null}))},E=>{console.error("Presence subscription error",E),!o&&e(w=>({...w,loading:!1,error:E.message??"Failed to subscribe to presence"}))})}catch(g){if(console.error("Presence initialization failed",g),o)return;e(p=>({...p,loading:!1,error:g?.message??"Presence initialization failed",isSupported:!1}))}})(),()=>{o=!0,u!==null&&window.clearInterval(u),c&&c()}},[]),s}const WD=({onCreateRoom:s,onJoinRoom:e,onStartLocal:t,isAuthLoading:r,onSelectGame:o})=>{const[u,c]=q.useState("game-select"),[m,g]=q.useState(""),[p,v]=q.useState(!1),{count:E,loading:w,isSupported:I}=ZD(),k=async()=>{v(!0);try{await s()}finally{v(!1)}},j=()=>S.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-500",children:[S.jsx("h2",{className:"text-2xl font-bold text-white text-center",children:"Choose Your Game"}),S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[S.jsx("button",{onClick:()=>{o("chess"),c("mode-select")},className:"group relative w-full aspect-[4/3] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-indigo-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-indigo-500/20 overflow-hidden text-left p-6 flex flex-col justify-between",children:S.jsxs("div",{children:[S.jsx(bg,{className:"w-10 h-10 text-indigo-400 mb-3 group-hover:scale-110 transition-transform"}),S.jsx("h3",{className:"text-2xl font-black text-white",children:"CHESS"}),S.jsx("p",{className:"text-slate-400 text-sm font-medium mt-1",children:"The classic strategy game."})]})}),S.jsxs("button",{onClick:()=>{o("backgammon"),c("mode-select")},className:"group relative w-full aspect-[4/3] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-emerald-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-emerald-500/20 overflow-hidden text-left p-6 flex flex-col justify-between",children:[S.jsx("div",{className:"absolute top-0 right-0 p-2 bg-emerald-500/10 text-emerald-300 rounded-bl-2xl text-[10px] font-black uppercase tracking-widest border-b border-l border-emerald-500/20",children:"New"}),S.jsxs("div",{children:[S.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 border-2 border-slate-600 mb-3 group-hover:border-emerald-500 transition-colors"}),S.jsx("h3",{className:"text-2xl font-black text-white",children:"TAVLA"}),S.jsx("p",{className:"text-slate-400 text-sm font-medium mt-1",children:"Classic Turkish Backgammon."})]})]})]})]}),D=()=>S.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-right-8 duration-500",children:[S.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[S.jsx("button",{onClick:()=>c("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:S.jsx(yu,{size:20})}),S.jsx("h2",{className:"text-2xl font-bold text-white",children:"Select Threat Level"})]}),S.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[S.jsx("button",{onClick:()=>t("Easy"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-green-500/50 hover:bg-slate-800 transition-all",children:S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("div",{className:"p-3 rounded-full bg-green-500/10 text-green-400",children:S.jsx(Xm,{size:20})}),S.jsxs("div",{className:"text-left",children:[S.jsx("div",{className:"text-lg font-bold text-white",children:"Easy"}),S.jsx("div",{className:"text-xs text-slate-500",children:"Casual play"})]})]})}),S.jsx("button",{onClick:()=>t("Normal"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-indigo-500/50 hover:bg-slate-800 transition-all",children:S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("div",{className:"p-3 rounded-full bg-indigo-500/10 text-indigo-400",children:S.jsx(Xm,{size:20})}),S.jsxs("div",{className:"text-left",children:[S.jsx("div",{className:"text-lg font-bold text-white",children:"Normal"}),S.jsx("div",{className:"text-xs text-slate-500",children:"Balanced opponent"})]})]})}),S.jsx("button",{onClick:()=>t("Hard"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-red-500/50 hover:bg-slate-800 transition-all",children:S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("div",{className:"p-3 rounded-full bg-red-500/10 text-red-400",children:S.jsx(bg,{size:20})}),S.jsxs("div",{className:"text-left",children:[S.jsx("div",{className:"text-lg font-bold text-white",children:"Hard"}),S.jsx("div",{className:"text-xs text-slate-500",children:"Ruthless tactics"})]})]})})]})]}),F=()=>S.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-right-8 duration-500",children:[S.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[S.jsx("button",{onClick:()=>c("game-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:S.jsx(yu,{size:20})}),S.jsx("h2",{className:"text-2xl font-bold text-white",children:"Select Mode"})]}),S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[S.jsxs("button",{onClick:()=>c("difficulty-select"),className:"group flex flex-col items-center justify-center gap-4 p-8 bg-slate-800/50 rounded-2xl border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all",children:[S.jsx("div",{className:"p-4 rounded-full bg-emerald-500/10 text-emerald-400 group-hover:scale-110 transition-transform",children:S.jsx(Xm,{size:32})}),S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"text-xl font-bold text-white",children:"Single Player"}),S.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"Vs Computer"})]})]}),S.jsxs("button",{onClick:()=>c("connection"),className:"group flex flex-col items-center justify-center gap-4 p-8 bg-slate-800/50 rounded-2xl border border-slate-700 hover:border-indigo-500/50 hover:bg-slate-800 transition-all",children:[S.jsx("div",{className:"p-4 rounded-full bg-indigo-500/10 text-indigo-400 group-hover:scale-110 transition-transform",children:S.jsx(np,{size:32})}),S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"text-xl font-bold text-white",children:"Multiplayer"}),S.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"Online PvP"})]})]})]})]}),ne=()=>S.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500",children:[S.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[S.jsx("button",{onClick:()=>c("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:S.jsx(yu,{size:20})}),S.jsx("h2",{className:"text-2xl font-bold text-white",children:"Multiplayer"})]}),S.jsxs("div",{className:"space-y-6",children:[S.jsxs("button",{onClick:k,disabled:p||r,className:"w-full btn-premium flex items-center justify-center gap-3 sm:gap-4 text-lg py-4 group disabled:opacity-50 disabled:cursor-not-allowed",children:[p||r?S.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"}):S.jsx(GA,{size:24,className:"transition-transform group-hover:rotate-90"}),S.jsx("span",{children:r?"Initializing...":p?"Creating Arena...":"Create New Room"})]}),S.jsxs("div",{className:"relative flex items-center gap-6",children:[S.jsx("div",{className:"flex-1 h-px bg-slate-800"}),S.jsx("span",{className:"text-slate-600 text-xs font-black uppercase tracking-[0.2em]",children:"OR JOIN"}),S.jsx("div",{className:"flex-1 h-px bg-slate-800"})]}),S.jsxs("div",{className:"flex gap-3",children:[S.jsx("input",{type:"text",placeholder:"Enter Room ID",value:m,onChange:Z=>g(Z.target.value),className:"flex-1 bg-slate-900/40 border border-slate-800/50 rounded-xl px-4 py-4 text-lg placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all"}),S.jsx("button",{onClick:()=>e(m),disabled:!m.trim()||r,className:"bg-slate-800 hover:bg-slate-700 text-white disabled:opacity-50 px-6 rounded-xl transition-all font-bold shadow-lg",children:S.jsx(HA,{size:24})})]})]})]});return S.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[85vh] gap-8 lg:gap-12 relative overflow-hidden px-4",children:[S.jsxs("div",{className:"text-center space-y-4 lg:space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-1000",children:[S.jsx("div",{className:"inline-flex items-center px-3 sm:px-4 py-1.5 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-400 text-xs sm:text-sm font-semibold tracking-wide",children:"PREMIUM MULTIPLAYER CHESS"}),S.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-8xl font-black tracking-tight bg-clip-text text-transparent bg-linear-to-b from-white via-indigo-100 to-indigo-400",children:"DragMate"})]}),S.jsxs("div",{className:"liquid-glass p-6 sm:p-8 w-full max-w-xl min-h-[400px] flex flex-col justify-center",children:[u==="game-select"&&j(),u==="mode-select"&&F(),u==="difficulty-select"&&D(),u==="connection"&&ne()]}),S.jsx("div",{className:"flex items-center gap-10 text-slate-600 font-bold uppercase tracking-widest text-[10px] animate-in fade-in duration-1000 delay-500",children:S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${I?"bg-green-500":"bg-slate-600"}`}),I?`${w?"...":(E??0).toLocaleString()} Online`:"Demo Mode"]})})]})};function e4(s){return s!==null?{comment:s,variations:[]}:{variations:[]}}function t4(s,e,t,r,o){const u={move:s,variations:o};return e&&(u.suffix=e),t&&(u.nag=t),r!==null&&(u.comment=r),u}function n4(...s){const[e,...t]=s;let r=e;for(const o of t)o!==null&&(r.variations=[o,...o.variations],o.variations=[],r=o);return e}function i4(s,e){if(e.marker&&e.marker.comment){let t=e.root;for(;;){const r=t.variations[0];if(!r){t.comment=e.marker.comment;break}t=r}}return{headers:s,root:e.root,result:(e.marker&&e.marker.result)??void 0}}function s4(s,e){function t(){this.constructor=s}t.prototype=e.prototype,s.prototype=new t}function sl(s,e,t,r){var o=Error.call(this,s);return Object.setPrototypeOf&&Object.setPrototypeOf(o,sl.prototype),o.expected=e,o.found=t,o.location=r,o.name="SyntaxError",o}s4(sl,Error);function ug(s,e,t){return t=t||" ",s.length>e?s:(e-=s.length,t+=t.repeat(e),s+t.slice(0,e))}sl.prototype.format=function(s){var e="Error: "+this.message;if(this.location){var t=null,r;for(r=0;r<s.length;r++)if(s[r].source===this.location.source){t=s[r].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,u=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(o):o,c=this.location.source+":"+u.line+":"+u.column;if(t){var m=this.location.end,g=ug("",u.line.toString().length," "),p=t[o.line-1],v=o.line===m.line?m.column:p.length+1,E=v-o.column||1;e+=`
 --> `+c+`
`+g+` |
`+u.line+" | "+p+`
`+g+" | "+ug("",o.column-1," ")+ug("",E,"^")}else e+=`
 at `+c}return e};sl.buildMessage=function(s,e){var t={literal:function(p){return'"'+o(p.text)+'"'},class:function(p){var v=p.parts.map(function(E){return Array.isArray(E)?u(E[0])+"-"+u(E[1]):u(E)});return"["+(p.inverted?"^":"")+v.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(p){return p.description}};function r(p){return p.charCodeAt(0).toString(16).toUpperCase()}function o(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+r(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+r(v)})}function u(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+r(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+r(v)})}function c(p){return t[p.type](p)}function m(p){var v=p.map(c),E,w;if(v.sort(),v.length>0){for(E=1,w=1;E<v.length;E++)v[E-1]!==v[E]&&(v[w]=v[E],w++);v.length=w}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}function g(p){return p?'"'+o(p)+'"':"end of input"}return"Expected "+m(s)+" but "+g(e)+" found."};function r4(s,e){e=e!==void 0?e:{};var t={},r=e.grammarSource,o={pgn:Ja},u=Ja,c="[",m='"',g="]",p=".",v="O-O-O",E="O-O",w="0-0-0",I="0-0",k="$",j="{",D="}",F=";",ne="(",Z=")",ce="1-0",ie="0-1",W="1/2-1/2",x="*",R=/^[a-zA-Z]/,C=/^[^"]/,V=/^[0-9]/,M=/^[.]/,U=/^[a-zA-Z1-8\-=]/,N=/^[+#]/,qe=/^[!?]/,dt=/^[^}]/,te=/^[^\r\n]/,he=/^[ \t\r\n]/,be=pt("tag pair"),Me=tt("[",!1),ze=tt('"',!1),P=tt("]",!1),se=pt("tag name"),me=Ot([["a","z"],["A","Z"]],!1,!1),de=pt("tag value"),_e=Ot(['"'],!0,!1),Ae=pt("move number"),Le=Ot([["0","9"]],!1,!1),Dt=tt(".",!1),ut=Ot(["."],!1,!1),Ht=pt("standard algebraic notation"),Si=tt("O-O-O",!1),Vn=tt("O-O",!1),qi=tt("0-0-0",!1),Jt=tt("0-0",!1),fi=Ot([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),Pn=Ot(["+","#"],!1,!1),as=pt("suffix annotation"),Hi=Ot(["!","?"],!1,!1),St=pt("NAG"),ct=tt("$",!1),Hn=pt("brace comment"),os=tt("{",!1),ls=Ot(["}"],!0,!1),Zt=tt("}",!1),Fi=pt("rest of line comment"),Rs=tt(";",!1),Fn=Ot(["\r",`
`],!0,!1),Sn=pt("variation"),Gi=tt("(",!1),Cs=tt(")",!1),Gn=pt("game termination marker"),Is=tt("1-0",!1),Kn=tt("0-1",!1),Ft=tt("1/2-1/2",!1),pn=tt("*",!1),At=pt("whitespace"),Ns=Ot([" ","	","\r",`
`],!1,!1),Ki=function(B,X){return i4(B,X)},rr=function(B){return Object.fromEntries(B)},ti=function(B,X){return[B,X]},$i=function(B,X){return{root:B,marker:X}},He=function(B,X){return n4(e4(B),...X.flat())},xt=function(B,X,$,ye,Se){return t4(B,X,$,ye,Se)},Rt=function(B){return B},Ut=function(B){return B.replace(/[\r\n]+/g," ")},yn=function(B){return B.trim()},Wt=function(B){return B},Vt=function(B,X){return{result:B,comment:X}},Y=e.peg$currPos|0,mt=[{line:1,column:1}],gt=Y,Gt=e.peg$maxFailExpected||[],fe=e.peg$silentFails|0,cn;if(e.startRule){if(!(e.startRule in o))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');u=o[e.startRule]}function tt(B,X){return{type:"literal",text:B,ignoreCase:X}}function Ot(B,X,$){return{type:"class",parts:B,inverted:X,ignoreCase:$}}function hn(){return{type:"end"}}function pt(B){return{type:"other",description:B}}function Pt(B){var X=mt[B],$;if(X)return X;if(B>=mt.length)$=mt.length-1;else for($=B;!mt[--$];);for(X=mt[$],X={line:X.line,column:X.column};$<B;)s.charCodeAt($)===10?(X.line++,X.column=1):X.column++,$++;return mt[B]=X,X}function Kt(B,X,$){var ye=Pt(B),Se=Pt(X),We={source:r,start:{offset:B,line:ye.line,column:ye.column},end:{offset:X,line:Se.line,column:Se.column}};return We}function Ee(B){Y<gt||(Y>gt&&(gt=Y,Gt=[]),Gt.push(B))}function ar(B,X,$){return new sl(sl.buildMessage(B,X),B,X,$)}function Ja(){var B,X,$;return B=Y,X=Za(),$=xi(),B=Ki(X,$),B}function Za(){var B,X,$;for(B=Y,X=[],$=da();$!==t;)X.push($),$=da();return $=en(),B=rr(X),B}function da(){var B,X,$,ye,Se,We,Fe;return fe++,B=Y,en(),s.charCodeAt(Y)===91?(X=c,Y++):(X=t,fe===0&&Ee(Me)),X!==t?(en(),$=Ai(),$!==t?(en(),s.charCodeAt(Y)===34?(ye=m,Y++):(ye=t,fe===0&&Ee(ze)),ye!==t?(Se=or(),s.charCodeAt(Y)===34?(We=m,Y++):(We=t,fe===0&&Ee(ze)),We!==t?(en(),s.charCodeAt(Y)===93?(Fe=g,Y++):(Fe=t,fe===0&&Ee(P)),Fe!==t?B=ti($,Se):(Y=B,B=t)):(Y=B,B=t)):(Y=B,B=t)):(Y=B,B=t)):(Y=B,B=t),fe--,B===t&&fe===0&&Ee(be),B}function Ai(){var B,X,$;if(fe++,B=Y,X=[],$=s.charAt(Y),R.test($)?Y++:($=t,fe===0&&Ee(me)),$!==t)for(;$!==t;)X.push($),$=s.charAt(Y),R.test($)?Y++:($=t,fe===0&&Ee(me));else X=t;return X!==t?B=s.substring(B,Y):B=X,fe--,B===t&&(X=t,fe===0&&Ee(se)),B}function or(){var B,X,$;for(fe++,B=Y,X=[],$=s.charAt(Y),C.test($)?Y++:($=t,fe===0&&Ee(_e));$!==t;)X.push($),$=s.charAt(Y),C.test($)?Y++:($=t,fe===0&&Ee(_e));return B=s.substring(B,Y),fe--,X=t,fe===0&&Ee(de),B}function xi(){var B,X,$;return B=Y,X=$n(),en(),$=pa(),$===t&&($=null),en(),B=$i(X,$),B}function $n(){var B,X,$,ye;for(B=Y,X=ni(),X===t&&(X=null),$=[],ye=Ln();ye!==t;)$.push(ye),ye=Ln();return B=He(X,$),B}function Ln(){var B,X,$,ye,Se,We,Fe,Ii;if(B=Y,en(),Ri(),en(),X=jt(),X!==t){for($=ma(),$===t&&($=null),ye=[],Se=lr();Se!==t;)ye.push(Se),Se=lr();for(Se=en(),We=ni(),We===t&&(We=null),Fe=[],Ii=ur();Ii!==t;)Fe.push(Ii),Ii=ur();B=xt(X,$,ye,We,Fe)}else Y=B,B=t;return B}function Ri(){var B,X,$,ye,Se,We;for(fe++,B=Y,X=[],$=s.charAt(Y),V.test($)?Y++:($=t,fe===0&&Ee(Le));$!==t;)X.push($),$=s.charAt(Y),V.test($)?Y++:($=t,fe===0&&Ee(Le));if(s.charCodeAt(Y)===46?($=p,Y++):($=t,fe===0&&Ee(Dt)),$!==t){for(ye=en(),Se=[],We=s.charAt(Y),M.test(We)?Y++:(We=t,fe===0&&Ee(ut));We!==t;)Se.push(We),We=s.charAt(Y),M.test(We)?Y++:(We=t,fe===0&&Ee(ut));X=[X,$,ye,Se],B=X}else Y=B,B=t;return fe--,B===t&&(X=t,fe===0&&Ee(Ae)),B}function jt(){var B,X,$,ye,Se,We;if(fe++,B=Y,X=Y,s.substr(Y,5)===v?($=v,Y+=5):($=t,fe===0&&Ee(Si)),$===t&&(s.substr(Y,3)===E?($=E,Y+=3):($=t,fe===0&&Ee(Vn)),$===t&&(s.substr(Y,5)===w?($=w,Y+=5):($=t,fe===0&&Ee(qi)),$===t&&(s.substr(Y,3)===I?($=I,Y+=3):($=t,fe===0&&Ee(Jt)),$===t))))if($=Y,ye=s.charAt(Y),R.test(ye)?Y++:(ye=t,fe===0&&Ee(me)),ye!==t){if(Se=[],We=s.charAt(Y),U.test(We)?Y++:(We=t,fe===0&&Ee(fi)),We!==t)for(;We!==t;)Se.push(We),We=s.charAt(Y),U.test(We)?Y++:(We=t,fe===0&&Ee(fi));else Se=t;Se!==t?(ye=[ye,Se],$=ye):(Y=$,$=t)}else Y=$,$=t;return $!==t?(ye=s.charAt(Y),N.test(ye)?Y++:(ye=t,fe===0&&Ee(Pn)),ye===t&&(ye=null),$=[$,ye],X=$):(Y=X,X=t),X!==t?B=s.substring(B,Y):B=X,fe--,B===t&&(X=t,fe===0&&Ee(Ht)),B}function ma(){var B,X,$;for(fe++,B=Y,X=[],$=s.charAt(Y),qe.test($)?Y++:($=t,fe===0&&Ee(Hi));$!==t;)X.push($),X.length>=2?$=t:($=s.charAt(Y),qe.test($)?Y++:($=t,fe===0&&Ee(Hi)));return X.length<1?(Y=B,B=t):B=X,fe--,B===t&&(X=t,fe===0&&Ee(as)),B}function lr(){var B,X,$,ye,Se;if(fe++,B=Y,en(),s.charCodeAt(Y)===36?(X=k,Y++):(X=t,fe===0&&Ee(ct)),X!==t){if($=Y,ye=[],Se=s.charAt(Y),V.test(Se)?Y++:(Se=t,fe===0&&Ee(Le)),Se!==t)for(;Se!==t;)ye.push(Se),Se=s.charAt(Y),V.test(Se)?Y++:(Se=t,fe===0&&Ee(Le));else ye=t;ye!==t?$=s.substring($,Y):$=ye,$!==t?B=Rt($):(Y=B,B=t)}else Y=B,B=t;return fe--,B===t&&fe===0&&Ee(St),B}function ni(){var B;return B=Ci(),B===t&&(B=ga()),B}function Ci(){var B,X,$,ye,Se;if(fe++,B=Y,s.charCodeAt(Y)===123?(X=j,Y++):(X=t,fe===0&&Ee(os)),X!==t){for($=Y,ye=[],Se=s.charAt(Y),dt.test(Se)?Y++:(Se=t,fe===0&&Ee(ls));Se!==t;)ye.push(Se),Se=s.charAt(Y),dt.test(Se)?Y++:(Se=t,fe===0&&Ee(ls));$=s.substring($,Y),s.charCodeAt(Y)===125?(ye=D,Y++):(ye=t,fe===0&&Ee(Zt)),ye!==t?B=Ut($):(Y=B,B=t)}else Y=B,B=t;return fe--,B===t&&(X=t,fe===0&&Ee(Hn)),B}function ga(){var B,X,$,ye,Se;if(fe++,B=Y,s.charCodeAt(Y)===59?(X=F,Y++):(X=t,fe===0&&Ee(Rs)),X!==t){for($=Y,ye=[],Se=s.charAt(Y),te.test(Se)?Y++:(Se=t,fe===0&&Ee(Fn));Se!==t;)ye.push(Se),Se=s.charAt(Y),te.test(Se)?Y++:(Se=t,fe===0&&Ee(Fn));$=s.substring($,Y),B=yn($)}else Y=B,B=t;return fe--,B===t&&(X=t,fe===0&&Ee(Fi)),B}function ur(){var B,X,$,ye;return fe++,B=Y,en(),s.charCodeAt(Y)===40?(X=ne,Y++):(X=t,fe===0&&Ee(Gi)),X!==t?($=$n(),$!==t?(en(),s.charCodeAt(Y)===41?(ye=Z,Y++):(ye=t,fe===0&&Ee(Cs)),ye!==t?B=Wt($):(Y=B,B=t)):(Y=B,B=t)):(Y=B,B=t),fe--,B===t&&fe===0&&Ee(Sn),B}function pa(){var B,X,$;return fe++,B=Y,s.substr(Y,3)===ce?(X=ce,Y+=3):(X=t,fe===0&&Ee(Is)),X===t&&(s.substr(Y,3)===ie?(X=ie,Y+=3):(X=t,fe===0&&Ee(Kn)),X===t&&(s.substr(Y,7)===W?(X=W,Y+=7):(X=t,fe===0&&Ee(Ft)),X===t&&(s.charCodeAt(Y)===42?(X=x,Y++):(X=t,fe===0&&Ee(pn))))),X!==t?(en(),$=ni(),$===t&&($=null),B=Vt(X,$)):(Y=B,B=t),fe--,B===t&&(X=t,fe===0&&Ee(Gn)),B}function en(){var B,X;for(fe++,B=[],X=s.charAt(Y),he.test(X)?Y++:(X=t,fe===0&&Ee(Ns));X!==t;)B.push(X),X=s.charAt(Y),he.test(X)?Y++:(X=t,fe===0&&Ee(Ns));return fe--,X=t,fe===0&&Ee(At),B}if(cn=u(),e.peg$library)return{peg$result:cn,peg$currPos:Y,peg$FAILED:t,peg$maxFailExpected:Gt,peg$maxFailPos:gt};if(cn!==t&&Y===s.length)return cn;throw cn!==t&&Y<s.length&&Ee(hn()),ar(Gt,gt<s.length?s.charAt(gt):null,gt<s.length?Kt(gt,gt+1):Kt(gt,gt))}const Qh=0xffffffffffffffffn;function cg(s,e){return(s<<e|s>>64n-e)&0xffffffffffffffffn}function bE(s,e){return s*e&Qh}function a4(s){return function(){let e=BigInt(s&Qh),t=BigInt(s>>64n&Qh);const r=bE(cg(bE(e,5n),7n),9n);return t^=e,e=(cg(e,24n)^t^t<<16n)&Qh,t=cg(t,37n),s=t<<64n|e,r}}const Gf=a4(0xa187eb39cdcaed8f31c4b365b102e01en),o4=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>Gf()))),l4=Array.from({length:8},()=>Gf()),u4=Array.from({length:16},()=>Gf()),hg=Gf(),zn="w",bi="b",an="p",Kg="n",Yh="b",mu="r",Hr="q",dn="k",fg="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Vh{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(e,t){const{color:r,piece:o,from:u,to:c,flags:m,captured:g,promotion:p}=t,v=vn(u),E=vn(c);this.color=r,this.piece=o,this.from=v,this.to=E,this.san=e._moveToSan(t,e._moves({legal:!0})),this.lan=v+E,this.before=e.fen(),e._makeMove(t),this.after=e.fen(),e._undoMove(),this.flags="";for(const w in ke)ke[w]&m&&(this.flags+=za[w]);g&&(this.captured=g),p&&(this.promotion=p,this.lan+=p)}isCapture(){return this.flags.indexOf(za.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(za.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(za.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(za.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(za.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(za.BIG_PAWN)>-1}}const Nn=-1,za={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},ke={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},$g={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},c4={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},h4={...$g,...c4},De={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},dg={b:[16,32,17,15],w:[-16,-32,-17,-15]},EE={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},f4=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],d4=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],m4={p:1,n:2,b:4,r:8,q:16,k:32},g4="pnbrqkPNBRQK",TE=[Kg,Yh,mu,Hr],p4=7,y4=6,_4=1,v4=0,Ph={[dn]:ke.KSIDE_CASTLE,[Hr]:ke.QSIDE_CASTLE},Br={w:[{square:De.a1,flag:ke.QSIDE_CASTLE},{square:De.h1,flag:ke.KSIDE_CASTLE}],b:[{square:De.a8,flag:ke.QSIDE_CASTLE},{square:De.h8,flag:ke.KSIDE_CASTLE}]},b4={b:_4,w:y4},mg="--";function Ha(s){return s>>4}function Hu(s){return s&15}function pw(s){return"0123456789".indexOf(s)!==-1}function vn(s){const e=Hu(s),t=Ha(s);return"abcdefgh".substring(e,e+1)+"87654321".substring(t,t+1)}function uu(s){return s===zn?bi:zn}function E4(s){const e=s.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const t=parseInt(e[5],10);if(isNaN(t)||t<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(e[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const o=e[0].split("/");if(o.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let c=0;c<o.length;c++){let m=0,g=!1;for(let p=0;p<o[c].length;p++)if(pw(o[c][p])){if(g)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};m+=parseInt(o[c][p],10),g=!0}else{if(!/^[prnbqkPRNBQK]$/.test(o[c][p]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};m+=1,g=!1}if(m!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const u=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:c,regex:m}of u){if(!m.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${c} king`};if((e[0].match(m)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${c} kings`}}return Array.from(o[0]+o[7]).some(c=>c.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function T4(s,e){const t=s.from,r=s.to,o=s.piece;let u=0,c=0,m=0;for(let g=0,p=e.length;g<p;g++){const v=e[g].from,E=e[g].to,w=e[g].piece;o===w&&t!==v&&r===E&&(u++,Ha(t)===Ha(v)&&c++,Hu(t)===Hu(v)&&m++)}return u>0?c>0&&m>0?vn(t):m>0?vn(t).charAt(1):vn(t).charAt(0):""}function qr(s,e,t,r,o,u=void 0,c=ke.NORMAL){const m=Ha(r);if(o===an&&(m===p4||m===v4))for(let g=0;g<TE.length;g++){const p=TE[g];s.push({color:e,from:t,to:r,piece:o,captured:u,promotion:p,flags:c|ke.PROMOTION})}else s.push({color:e,from:t,to:r,piece:o,captured:u,flags:c})}function wE(s){let e=s.charAt(0);return e>="a"&&e<="h"?s.match(/[a-h]\d.*[a-h]\d/)?void 0:an:(e=e.toLowerCase(),e==="o"?dn:e)}function gg(s){return s.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class Zp{_board=new Array(128);_turn=zn;_header={};_kings={w:Nn,b:Nn};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_hash=0n;_positionCount=new Map;constructor(e=fg,{skipValidation:t=!1}={}){this.load(e,{skipValidation:t})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:Nn,b:Nn},this._turn=zn,this._castling={w:0,b:0},this._epSquare=Nn,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...h4},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:t=!1,preserveHeaders:r=!1}={}){let o=e.split(/\s+/);if(o.length>=2&&o.length<6){const m=["-","-","0","1"];e=o.concat(m.slice(-(6-o.length))).join(" ")}if(o=e.split(/\s+/),!t){const{ok:m,error:g}=E4(e);if(!m)throw new Error(g)}const u=o[0];let c=0;this.clear({preserveHeaders:r});for(let m=0;m<u.length;m++){const g=u.charAt(m);if(g==="/")c+=8;else if(pw(g))c+=parseInt(g,10);else{const p=g<"a"?zn:bi;this._put({type:g.toLowerCase(),color:p},vn(c)),c++}}this._turn=o[1],o[2].indexOf("K")>-1&&(this._castling.w|=ke.KSIDE_CASTLE),o[2].indexOf("Q")>-1&&(this._castling.w|=ke.QSIDE_CASTLE),o[2].indexOf("k")>-1&&(this._castling.b|=ke.KSIDE_CASTLE),o[2].indexOf("q")>-1&&(this._castling.b|=ke.QSIDE_CASTLE),this._epSquare=o[3]==="-"?Nn:De[o[3]],this._halfMoves=parseInt(o[4],10),this._moveNumber=parseInt(o[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){let t=0,r="";for(let c=De.a8;c<=De.h1;c++){if(this._board[c]){t>0&&(r+=t,t=0);const{color:m,type:g}=this._board[c];r+=m===zn?g.toUpperCase():g.toLowerCase()}else t++;c+1&136&&(t>0&&(r+=t),c!==De.h1&&(r+="/"),t=0,c+=8)}let o="";this._castling[zn]&ke.KSIDE_CASTLE&&(o+="K"),this._castling[zn]&ke.QSIDE_CASTLE&&(o+="Q"),this._castling[bi]&ke.KSIDE_CASTLE&&(o+="k"),this._castling[bi]&ke.QSIDE_CASTLE&&(o+="q"),o=o||"-";let u="-";if(this._epSquare!==Nn)if(e)u=vn(this._epSquare);else{const c=this._epSquare+(this._turn===zn?16:-16),m=[c+1,c-1];for(const g of m){if(g&136)continue;const p=this._turn;if(this._board[g]?.color===p&&this._board[g]?.type===an){this._makeMove({color:p,from:g,to:this._epSquare,piece:an,captured:an,flags:ke.EP_CAPTURE});const v=!this._isKingAttacked(p);if(this._undoMove(),v){u=vn(this._epSquare);break}}}}return[r,this._turn,o,u,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;const{color:t,type:r}=this._board[e],o={w:0,b:1}[t],u={p:0,n:1,b:2,r:3,q:4,k:5}[r];return o4[o][u][e]}_epKey(){return this._epSquare===Nn?0n:l4[this._epSquare&7]}_castlingKey(){const e=this._castling.w>>5|this._castling.b>>3;return u4[e]}_computeHash(){let e=0n;for(let t=De.a8;t<=De.h1;t++){if(t&136){t+=7;continue}this._board[t]&&(e^=this._pieceKey(t))}return e^=this._epKey(),e^=this._castlingKey(),this._turn==="b"&&(e^=hg),e}_updateSetup(e){this._history.length>0||(e!==fg?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(fg)}get(e){return this._board[De[e]]}findPiece(e){const t=[];for(let r=De.a8;r<=De.h1;r++){if(r&136){r+=7;continue}!this._board[r]||this._board[r]?.color!==e.color||this._board[r].color===e.color&&this._board[r].type===e.type&&t.push(vn(r))}return t}put({type:e,color:t},r){return this._put({type:e,color:t},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(e,t){this._hash^=this._pieceKey(e),this._board[e]=t,this._hash^=this._pieceKey(e)}_put({type:e,color:t},r){if(g4.indexOf(e.toLowerCase())===-1||!(r in De))return!1;const o=De[r];if(e==dn&&!(this._kings[t]==Nn||this._kings[t]==o))return!1;const u=this._board[o];return u&&u.type===dn&&(this._kings[u.color]=Nn),this._set(o,{type:e,color:t}),e===dn&&(this._kings[t]=o),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){const t=this.get(e);return this._clear(De[e]),t&&t.type===dn&&(this._kings[t.color]=Nn),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){this._hash^=this._castlingKey();const e=this._board[De.e1]?.type===dn&&this._board[De.e1]?.color===zn,t=this._board[De.e8]?.type===dn&&this._board[De.e8]?.color===bi;(!e||this._board[De.a1]?.type!==mu||this._board[De.a1]?.color!==zn)&&(this._castling.w&=-65),(!e||this._board[De.h1]?.type!==mu||this._board[De.h1]?.color!==zn)&&(this._castling.w&=-33),(!t||this._board[De.a8]?.type!==mu||this._board[De.a8]?.color!==bi)&&(this._castling.b&=-65),(!t||this._board[De.h8]?.type!==mu||this._board[De.h8]?.color!==bi)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){if(this._epSquare===Nn)return;const e=this._epSquare+(this._turn===zn?-16:16),t=this._epSquare+(this._turn===zn?16:-16),r=[t+1,t-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||this._board[t]?.color!==uu(this._turn)||this._board[t]?.type!==an){this._hash^=this._epKey(),this._epSquare=Nn;return}const o=u=>!(u&136)&&this._board[u]?.color===this._turn&&this._board[u]?.type===an;r.some(o)||(this._hash^=this._epKey(),this._epSquare=Nn)}_attacked(e,t,r){const o=[];for(let u=De.a8;u<=De.h1;u++){if(u&136){u+=7;continue}if(this._board[u]===void 0||this._board[u].color!==e)continue;const c=this._board[u],m=u-t;if(m===0)continue;const g=m+119;if(f4[g]&m4[c.type]){if(c.type===an){if(m>0&&c.color===zn||m<=0&&c.color===bi)if(r)o.push(vn(u));else return!0;continue}if(c.type==="n"||c.type==="k")if(r){o.push(vn(u));continue}else return!0;const p=d4[g];let v=u+p,E=!1;for(;v!==t;){if(this._board[v]!=null){E=!0;break}v+=p}if(!E)if(r){o.push(vn(u));continue}else return!0}}return r?o:!1}attackers(e,t){return t?this._attacked(t,De[e],!0):this._attacked(this._turn,De[e],!0)}_isKingAttacked(e){const t=this._kings[e];return t===-1?!1:this._attacked(uu(e),t)}hash(){return this._hash.toString(16)}isAttacked(e,t){return this._attacked(t,De[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},t=[];let r=0,o=0;for(let u=De.a8;u<=De.h1;u++){if(o=(o+1)%2,u&136){u+=7;continue}const c=this._board[u];c&&(e[c.type]=c.type in e?e[c.type]+1:1,c.type===Yh&&t.push(o),r++)}if(r===2)return!0;if(r===3&&(e[Yh]===1||e[Kg]===1))return!0;if(r===e[Yh]+2){let u=0;const c=t.length;for(let m=0;m<c;m++)u+=t[m];if(u===0||u===c)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:t=void 0,piece:r=void 0}={}){const o=this._moves({square:t,piece:r});return e?o.map(u=>new Vh(this,u)):o.map(u=>this._moveToSan(u,o))}_moves({legal:e=!0,piece:t=void 0,square:r=void 0}={}){const o=r?r.toLowerCase():void 0,u=t?.toLowerCase(),c=[],m=this._turn,g=uu(m);let p=De.a8,v=De.h1,E=!1;if(o)if(o in De)p=v=De[o],E=!0;else return[];for(let I=p;I<=v;I++){if(I&136){I+=7;continue}if(!this._board[I]||this._board[I].color===g)continue;const{type:k}=this._board[I];let j;if(k===an){if(u&&u!==k)continue;j=I+dg[m][0],this._board[j]||(qr(c,m,I,j,an),j=I+dg[m][1],b4[m]===Ha(I)&&!this._board[j]&&qr(c,m,I,j,an,void 0,ke.BIG_PAWN));for(let D=2;D<4;D++)j=I+dg[m][D],!(j&136)&&(this._board[j]?.color===g?qr(c,m,I,j,an,this._board[j].type,ke.CAPTURE):j===this._epSquare&&qr(c,m,I,j,an,an,ke.EP_CAPTURE))}else{if(u&&u!==k)continue;for(let D=0,F=EE[k].length;D<F;D++){const ne=EE[k][D];for(j=I;j+=ne,!(j&136);){if(!this._board[j])qr(c,m,I,j,k);else{if(this._board[j].color===m)break;qr(c,m,I,j,k,this._board[j].type,ke.CAPTURE);break}if(k===Kg||k===dn)break}}}}if((u===void 0||u===dn)&&(!E||v===this._kings[m])){if(this._castling[m]&ke.KSIDE_CASTLE){const I=this._kings[m],k=I+2;!this._board[I+1]&&!this._board[k]&&!this._attacked(g,this._kings[m])&&!this._attacked(g,I+1)&&!this._attacked(g,k)&&qr(c,m,this._kings[m],k,dn,void 0,ke.KSIDE_CASTLE)}if(this._castling[m]&ke.QSIDE_CASTLE){const I=this._kings[m],k=I-2;!this._board[I-1]&&!this._board[I-2]&&!this._board[I-3]&&!this._attacked(g,this._kings[m])&&!this._attacked(g,I-1)&&!this._attacked(g,k)&&qr(c,m,this._kings[m],k,dn,void 0,ke.QSIDE_CASTLE)}}if(!e||this._kings[m]===-1)return c;const w=[];for(let I=0,k=c.length;I<k;I++)this._makeMove(c[I]),this._isKingAttacked(m)||w.push(c[I]),this._undoMove();return w}move(e,{strict:t=!1}={}){let r=null;if(typeof e=="string")r=this._moveFromSan(e,t);else if(e===null)r=this._moveFromSan(mg,t);else if(typeof e=="object"){const u=this._moves();for(let c=0,m=u.length;c<m;c++)if(e.from===vn(u[c].from)&&e.to===vn(u[c].to)&&(!("promotion"in u[c])||e.promotion===u[c].promotion)){r=u[c];break}}if(!r)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&r.flags&ke.NULL_MOVE)throw new Error("Null move not allowed when in check");const o=new Vh(this,r);return this._makeMove(r),this._incPositionCount(),o}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,t){this._hash^=this._pieceKey(e),this._board[t]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(t)}_makeMove(e){const t=this._turn,r=uu(t);if(this._push(e),e.flags&ke.NULL_MOVE){t===bi&&this._moveNumber++,this._halfMoves++,this._turn=r,this._epSquare=Nn;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&ke.EP_CAPTURE&&(this._turn===bi?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:t})),this._board[e.to].type===dn){if(this._kings[t]=e.to,e.flags&ke.KSIDE_CASTLE){const o=e.to-1,u=e.to+1;this._movePiece(u,o)}else if(e.flags&ke.QSIDE_CASTLE){const o=e.to+1,u=e.to-2;this._movePiece(u,o)}this._castling[t]=0}if(this._castling[t]){for(let o=0,u=Br[t].length;o<u;o++)if(e.from===Br[t][o].square&&this._castling[t]&Br[t][o].flag){this._castling[t]^=Br[t][o].flag;break}}if(this._castling[r]){for(let o=0,u=Br[r].length;o<u;o++)if(e.to===Br[r][o].square&&this._castling[r]&Br[r][o].flag){this._castling[r]^=Br[r][o].flag;break}}if(this._hash^=this._castlingKey(),e.flags&ke.BIG_PAWN){let o;t===bi?o=e.to-16:o=e.to+16,!(e.to-1&136)&&this._board[e.to-1]?.type===an&&this._board[e.to-1]?.color===r||!(e.to+1&136)&&this._board[e.to+1]?.type===an&&this._board[e.to+1]?.color===r?(this._epSquare=o,this._hash^=this._epKey()):this._epSquare=Nn}else this._epSquare=Nn;e.piece===an?this._halfMoves=0:e.flags&(ke.CAPTURE|ke.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===bi&&this._moveNumber++,this._turn=r,this._hash^=hg}undo(){const e=this._hash,t=this._undoMove();if(t){const r=new Vh(this,t);return this._decPositionCount(e),r}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=hg;const r=this._turn,o=uu(r);if(t.flags&ke.NULL_MOVE)return t;if(this._movePiece(t.to,t.from),t.piece&&(this._clear(t.from),this._set(t.from,{type:t.piece,color:r})),t.captured)if(t.flags&ke.EP_CAPTURE){let u;r===bi?u=t.to-16:u=t.to+16,this._set(u,{type:an,color:o})}else this._set(t.to,{type:t.captured,color:o});if(t.flags&(ke.KSIDE_CASTLE|ke.QSIDE_CASTLE)){let u,c;t.flags&ke.KSIDE_CASTLE?(u=t.to+1,c=t.to-1):(u=t.to-2,c=t.to+1),this._movePiece(c,u)}return t}pgn({newline:e=`
`,maxWidth:t=0}={}){const r=[];let o=!1;for(const w in this._header)this._header[w]&&r.push(`[${w} "${this._header[w]}"]`+e),o=!0;o&&this._history.length&&r.push(e);const u=w=>{const I=this._comments[this.fen()];if(typeof I<"u"){const k=w.length>0?" ":"";w=`${w}${k}{${I}}`}return w},c=[];for(;this._history.length>0;)c.push(this._undoMove());const m=[];let g="";for(c.length===0&&m.push(u(""));c.length>0;){g=u(g);const w=c.pop();if(!w)break;if(!this._history.length&&w.color==="b"){const I=`${this._moveNumber}. ...`;g=g?`${g} ${I}`:I}else w.color==="w"&&(g.length&&m.push(g),g=this._moveNumber+".");g=g+" "+this._moveToSan(w,this._moves({legal:!0})),this._makeMove(w)}if(g.length&&m.push(u(g)),m.push(this._header.Result||"*"),t===0)return r.join("")+m.join(" ");const p=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},v=function(w,I){for(const k of I.split(" "))if(k){if(w+k.length>t){for(;p();)w--;r.push(e),w=0}r.push(k),w+=k.length,r.push(" "),w++}return p()&&w--,w};let E=0;for(let w=0;w<m.length;w++){if(E+m[w].length>t&&m[w].includes("{")){E=v(E,m[w]);continue}E+m[w].length>t&&w!==0?(r[r.length-1]===" "&&r.pop(),r.push(e),E=0):w!==0&&(r.push(" "),E++),r.push(m[w]),E+=m[w].length}return r.join("")}header(...e){for(let t=0;t<e.length;t+=2)typeof e[t]=="string"&&typeof e[t+1]=="string"&&(this._header[e[t]]=e[t+1]);return this._header}setHeader(e,t){return this._header[e]=t??$g[e]??null,this.getHeaders()}removeHeader(e){return e in this._header?(this._header[e]=$g[e]||null,!0):!1}getHeaders(){const e={};for(const[t,r]of Object.entries(this._header))r!==null&&(e[t]=r);return e}loadPgn(e,{strict:t=!1,newlineChar:r=`\r?
`}={}){r!==`\r?
`&&(e=e.replace(new RegExp(r,"g"),`
`));const o=r4(e);this.reset();const u=o.headers;let c="";for(const p in u)p.toLowerCase()==="fen"&&(c=u[p]),this.header(p,u[p]);if(!t)c&&this.load(c,{preserveHeaders:!0});else if(u.SetUp==="1"){if(!("FEN"in u))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(u.FEN,{preserveHeaders:!0})}let m=o.root;for(;m;){if(m.move){const p=this._moveFromSan(m.move,t);if(p==null)throw new Error(`Invalid move in PGN: ${m.move}`);this._makeMove(p),this._incPositionCount()}m.comment!==void 0&&(this._comments[this.fen()]=m.comment),m=m.variations[0]}const g=o.result;g&&Object.keys(this._header).length&&this._header.Result!==g&&this.setHeader("Result",g)}_moveToSan(e,t){let r="";if(e.flags&ke.KSIDE_CASTLE)r="O-O";else if(e.flags&ke.QSIDE_CASTLE)r="O-O-O";else{if(e.flags&ke.NULL_MOVE)return mg;if(e.piece!==an){const o=T4(e,t);r+=e.piece.toUpperCase()+o}e.flags&(ke.CAPTURE|ke.EP_CAPTURE)&&(e.piece===an&&(r+=vn(e.from)[0]),r+="x"),r+=vn(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,t=!1){let r=gg(e);if(t||(r==="0-0"?r="O-O":r==="0-0-0"&&(r="O-O-O")),r==mg)return{color:this._turn,from:0,to:0,piece:"k",flags:ke.NULL_MOVE};let o=wE(r),u=this._moves({legal:!0,piece:o});for(let w=0,I=u.length;w<I;w++)if(r===gg(this._moveToSan(u[w],u)))return u[w];if(t)return null;let c,m,g,p,v,E=!1;if(m=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),m?(c=m[1],g=m[2],p=m[3],v=m[4],g.length==1&&(E=!0)):(m=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),m&&(c=m[1],g=m[2],p=m[3],v=m[4],g.length==1&&(E=!0))),o=wE(r),u=this._moves({legal:!0,piece:c||o}),!p)return null;for(let w=0,I=u.length;w<I;w++)if(g){if((!c||c.toLowerCase()==u[w].piece)&&De[g]==u[w].from&&De[p]==u[w].to&&(!v||v.toLowerCase()==u[w].promotion))return u[w];if(E){const k=vn(u[w].from);if((!c||c.toLowerCase()==u[w].piece)&&De[p]==u[w].to&&(g==k[0]||g==k[1])&&(!v||v.toLowerCase()==u[w].promotion))return u[w]}}else if(r===gg(this._moveToSan(u[w],u)).replace("x",""))return u[w];return null}ascii(){let e=`   +------------------------+
`;for(let t=De.a8;t<=De.h1;t++){if(Hu(t)===0&&(e+=" "+"87654321"[Ha(t)]+" |"),this._board[t]){const r=this._board[t].type,u=this._board[t].color===zn?r.toUpperCase():r.toLowerCase();e+=" "+u+" "}else e+=" . ";t+1&136&&(e+=`|
`,t+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const t=this._moves({legal:!1});let r=0;const o=this._turn;for(let u=0,c=t.length;u<c;u++)this._makeMove(t[u]),this._isKingAttacked(o)||(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}setTurn(e){return this._turn==e?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const e=[];let t=[];for(let r=De.a8;r<=De.h1;r++)this._board[r]==null?t.push(null):t.push({square:vn(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(t),t=[],r+=8);return e}squareColor(e){if(e in De){const t=De[e];return(Ha(t)+Hu(t))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const t=[],r=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){const o=t.pop();if(!o)break;e?r.push(new Vh(this,o)):r.push(this._moveToSan(o,this._moves())),this._makeMove(o)}return r}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){const t=this._positionCount.get(e)??0;t===1?this._positionCount.delete(e):this._positionCount.set(e,t-1)}_pruneComments(){const e=[],t={},r=o=>{o in this._comments&&(t[o]=this._comments[o])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){const o=e.pop();if(!o)break;this._makeMove(o),r(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(const o of[dn,Hr])t[o]!==void 0&&(t[o]?this._castling[e]|=Ph[o]:this._castling[e]&=~Ph[o]);this._updateCastlingRights();const r=this.getCastlingRights(e);return(t[dn]===void 0||t[dn]===r[dn])&&(t[Hr]===void 0||t[Hr]===r[Hr])}getCastlingRights(e){return{[dn]:(this._castling[e]&Ph[dn])!==0,[Hr]:(this._castling[e]&Ph[Hr])!==0}}moveNumber(){return this._moveNumber}}var gu=zE();const Kf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ml(s){const e=Object.prototype.toString.call(s);return e==="[object Window]"||e==="[object global]"}function Wp(s){return"nodeType"in s}function ei(s){var e,t;return s?ml(s)?s:Wp(s)&&(e=(t=s.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function e0(s){const{Document:e}=ei(s);return s instanceof e}function ac(s){return ml(s)?!1:s instanceof ei(s).HTMLElement}function yw(s){return s instanceof ei(s).SVGElement}function gl(s){return s?ml(s)?s.document:Wp(s)?e0(s)?s:ac(s)||yw(s)?s.ownerDocument:document:document:document}const ir=Kf?q.useLayoutEffect:q.useEffect;function $f(s){const e=q.useRef(s);return ir(()=>{e.current=s}),q.useCallback(function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}function w4(){const s=q.useRef(null),e=q.useCallback((r,o)=>{s.current=setInterval(r,o)},[]),t=q.useCallback(()=>{s.current!==null&&(clearInterval(s.current),s.current=null)},[]);return[e,t]}function Fu(s,e){e===void 0&&(e=[s]);const t=q.useRef(s);return ir(()=>{t.current!==s&&(t.current=s)},e),t}function oc(s,e){const t=q.useRef();return q.useMemo(()=>{const r=s(t.current);return t.current=r,r},[...e])}function vf(s){const e=$f(s),t=q.useRef(null),r=q.useCallback(o=>{o!==t.current&&e?.(o,t.current),t.current=o},[]);return[t,r]}function bf(s){const e=q.useRef();return q.useEffect(()=>{e.current=s},[s]),e.current}let pg={};function Qf(s,e){return q.useMemo(()=>{if(e)return e;const t=pg[s]==null?0:pg[s]+1;return pg[s]=t,s+"-"+t},[s,e])}function _w(s){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return r.reduce((u,c)=>{const m=Object.entries(c);for(const[g,p]of m){const v=u[g];v!=null&&(u[g]=v+s*p)}return u},{...e})}}const Qo=_w(1),Ef=_w(-1);function S4(s){return"clientX"in s&&"clientY"in s}function t0(s){if(!s)return!1;const{KeyboardEvent:e}=ei(s.target);return e&&s instanceof e}function A4(s){if(!s)return!1;const{TouchEvent:e}=ei(s.target);return e&&s instanceof e}function Tf(s){if(A4(s)){if(s.touches&&s.touches.length){const{clientX:e,clientY:t}=s.touches[0];return{x:e,y:t}}else if(s.changedTouches&&s.changedTouches.length){const{clientX:e,clientY:t}=s.changedTouches[0];return{x:e,y:t}}}return S4(s)?{x:s.clientX,y:s.clientY}:null}const rl=Object.freeze({Translate:{toString(s){if(!s)return;const{x:e,y:t}=s;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(s){if(!s)return;const{scaleX:e,scaleY:t}=s;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(s){if(s)return[rl.Translate.toString(s),rl.Scale.toString(s)].join(" ")}},Transition:{toString(s){let{property:e,duration:t,easing:r}=s;return e+" "+t+"ms "+r}}}),SE="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function x4(s){return s.matches(SE)?s:s.querySelector(SE)}const R4={display:"none"};function C4(s){let{id:e,value:t}=s;return at.createElement("div",{id:e,style:R4},t)}function I4(s){let{id:e,announcement:t,ariaLiveType:r="assertive"}=s;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return at.createElement("div",{id:e,style:o,role:"status","aria-live":r,"aria-atomic":!0},t)}function N4(){const[s,e]=q.useState("");return{announce:q.useCallback(r=>{r!=null&&e(r)},[]),announcement:s}}const vw=q.createContext(null);function D4(s){const e=q.useContext(vw);q.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(s)},[s,e])}function O4(){const[s]=q.useState(()=>new Set),e=q.useCallback(r=>(s.add(r),()=>s.delete(r)),[s]);return[q.useCallback(r=>{let{type:o,event:u}=r;s.forEach(c=>{var m;return(m=c[o])==null?void 0:m.call(c,u)})},[s]),e]}const M4={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},k4={onDragStart(s){let{active:e}=s;return"Picked up draggable item "+e.id+"."},onDragOver(s){let{active:e,over:t}=s;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(s){let{active:e,over:t}=s;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(s){let{active:e}=s;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function V4(s){let{announcements:e=k4,container:t,hiddenTextDescribedById:r,screenReaderInstructions:o=M4}=s;const{announce:u,announcement:c}=N4(),m=Qf("DndLiveRegion"),[g,p]=q.useState(!1);if(q.useEffect(()=>{p(!0)},[]),D4(q.useMemo(()=>({onDragStart(E){let{active:w}=E;u(e.onDragStart({active:w}))},onDragMove(E){let{active:w,over:I}=E;e.onDragMove&&u(e.onDragMove({active:w,over:I}))},onDragOver(E){let{active:w,over:I}=E;u(e.onDragOver({active:w,over:I}))},onDragEnd(E){let{active:w,over:I}=E;u(e.onDragEnd({active:w,over:I}))},onDragCancel(E){let{active:w,over:I}=E;u(e.onDragCancel({active:w,over:I}))}}),[u,e])),!g)return null;const v=at.createElement(at.Fragment,null,at.createElement(C4,{id:r,value:o.draggable}),at.createElement(I4,{id:m,announcement:c}));return t?gu.createPortal(v,t):v}var mn;(function(s){s.DragStart="dragStart",s.DragMove="dragMove",s.DragEnd="dragEnd",s.DragCancel="dragCancel",s.DragOver="dragOver",s.RegisterDroppable="registerDroppable",s.SetDroppableDisabled="setDroppableDisabled",s.UnregisterDroppable="unregisterDroppable"})(mn||(mn={}));function wf(){}function Ru(s,e){return q.useMemo(()=>({sensor:s,options:e??{}}),[s,e])}function bw(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return q.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const rs=Object.freeze({x:0,y:0});function P4(s,e){const t=Tf(s);if(!t)return"0 0";const r={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function L4(s,e){let{data:{value:t}}=s,{data:{value:r}}=e;return r-t}function U4(s,e){if(!s||s.length===0)return null;const[t]=s;return t[e]}function j4(s,e){const t=Math.max(e.top,s.top),r=Math.max(e.left,s.left),o=Math.min(e.left+e.width,s.left+s.width),u=Math.min(e.top+e.height,s.top+s.height),c=o-r,m=u-t;if(r<o&&t<u){const g=e.width*e.height,p=s.width*s.height,v=c*m,E=v/(g+p-v);return Number(E.toFixed(4))}return 0}const z4=s=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=s;const o=[];for(const u of r){const{id:c}=u,m=t.get(c);if(m){const g=j4(m,e);g>0&&o.push({id:c,data:{droppableContainer:u,value:g}})}}return o.sort(L4)};function B4(s,e,t){return{...s,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function Ew(s,e){return s&&e?{x:s.left-e.left,y:s.top-e.top}:rs}function q4(s){return function(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];return o.reduce((c,m)=>({...c,top:c.top+s*m.y,bottom:c.bottom+s*m.y,left:c.left+s*m.x,right:c.right+s*m.x}),{...t})}}const H4=q4(1);function Tw(s){if(s.startsWith("matrix3d(")){const e=s.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(s.startsWith("matrix(")){const e=s.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function F4(s,e,t){const r=Tw(e);if(!r)return s;const{scaleX:o,scaleY:u,x:c,y:m}=r,g=s.left-c-(1-o)*parseFloat(t),p=s.top-m-(1-u)*parseFloat(t.slice(t.indexOf(" ")+1)),v=o?s.width/o:s.width,E=u?s.height/u:s.height;return{width:v,height:E,top:p,right:g+v,bottom:p+E,left:g}}const G4={ignoreTransform:!1};function lc(s,e){e===void 0&&(e=G4);let t=s.getBoundingClientRect();if(e.ignoreTransform){const{transform:p,transformOrigin:v}=ei(s).getComputedStyle(s);p&&(t=F4(t,p,v))}const{top:r,left:o,width:u,height:c,bottom:m,right:g}=t;return{top:r,left:o,width:u,height:c,bottom:m,right:g}}function AE(s){return lc(s,{ignoreTransform:!0})}function K4(s){const e=s.innerWidth,t=s.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function $4(s,e){return e===void 0&&(e=ei(s).getComputedStyle(s)),e.position==="fixed"}function Q4(s,e){e===void 0&&(e=ei(s).getComputedStyle(s));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const u=e[o];return typeof u=="string"?t.test(u):!1})}function n0(s,e){const t=[];function r(o){if(e!=null&&t.length>=e||!o)return t;if(e0(o)&&o.scrollingElement!=null&&!t.includes(o.scrollingElement))return t.push(o.scrollingElement),t;if(!ac(o)||yw(o)||t.includes(o))return t;const u=ei(s).getComputedStyle(o);return o!==s&&Q4(o,u)&&t.push(o),$4(o,u)?t:r(o.parentNode)}return s?r(s):t}function ww(s){const[e]=n0(s,1);return e??null}function yg(s){return!Kf||!s?null:ml(s)?s:Wp(s)?e0(s)||s===gl(s).scrollingElement?window:ac(s)?s:null:null}function Sw(s){return ml(s)?s.scrollX:s.scrollLeft}function Aw(s){return ml(s)?s.scrollY:s.scrollTop}function Qg(s){return{x:Sw(s),y:Aw(s)}}var En;(function(s){s[s.Forward=1]="Forward",s[s.Backward=-1]="Backward"})(En||(En={}));function xw(s){return!Kf||!s?!1:s===document.scrollingElement}function Rw(s){const e={x:0,y:0},t=xw(s)?{height:window.innerHeight,width:window.innerWidth}:{height:s.clientHeight,width:s.clientWidth},r={x:s.scrollWidth-t.width,y:s.scrollHeight-t.height},o=s.scrollTop<=e.y,u=s.scrollLeft<=e.x,c=s.scrollTop>=r.y,m=s.scrollLeft>=r.x;return{isTop:o,isLeft:u,isBottom:c,isRight:m,maxScroll:r,minScroll:e}}const Y4={x:.2,y:.2};function X4(s,e,t,r,o){let{top:u,left:c,right:m,bottom:g}=t;r===void 0&&(r=10),o===void 0&&(o=Y4);const{isTop:p,isBottom:v,isLeft:E,isRight:w}=Rw(s),I={x:0,y:0},k={x:0,y:0},j={height:e.height*o.y,width:e.width*o.x};return!p&&u<=e.top+j.height?(I.y=En.Backward,k.y=r*Math.abs((e.top+j.height-u)/j.height)):!v&&g>=e.bottom-j.height&&(I.y=En.Forward,k.y=r*Math.abs((e.bottom-j.height-g)/j.height)),!w&&m>=e.right-j.width?(I.x=En.Forward,k.x=r*Math.abs((e.right-j.width-m)/j.width)):!E&&c<=e.left+j.width&&(I.x=En.Backward,k.x=r*Math.abs((e.left+j.width-c)/j.width)),{direction:I,speed:k}}function J4(s){if(s===document.scrollingElement){const{innerWidth:u,innerHeight:c}=window;return{top:0,left:0,right:u,bottom:c,width:u,height:c}}const{top:e,left:t,right:r,bottom:o}=s.getBoundingClientRect();return{top:e,left:t,right:r,bottom:o,width:s.clientWidth,height:s.clientHeight}}function Cw(s){return s.reduce((e,t)=>Qo(e,Qg(t)),rs)}function Z4(s){return s.reduce((e,t)=>e+Sw(t),0)}function W4(s){return s.reduce((e,t)=>e+Aw(t),0)}function Iw(s,e){if(e===void 0&&(e=lc),!s)return;const{top:t,left:r,bottom:o,right:u}=e(s);ww(s)&&(o<=0||u<=0||t>=window.innerHeight||r>=window.innerWidth)&&s.scrollIntoView({block:"center",inline:"center"})}const eO=[["x",["left","right"],Z4],["y",["top","bottom"],W4]];class i0{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=n0(t),o=Cw(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[u,c,m]of eO)for(const g of c)Object.defineProperty(this,g,{get:()=>{const p=m(r),v=o[u]-p;return this.rect[g]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Cu{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...t)})},this.target=e}add(e,t,r){var o;(o=this.target)==null||o.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function tO(s){const{EventTarget:e}=ei(s);return s instanceof e?s:gl(s)}function _g(s,e){const t=Math.abs(s.x),r=Math.abs(s.y);return typeof e=="number"?Math.sqrt(t**2+r**2)>e:"x"in e&&"y"in e?t>e.x&&r>e.y:"x"in e?t>e.x:"y"in e?r>e.y:!1}var Bi;(function(s){s.Click="click",s.DragStart="dragstart",s.Keydown="keydown",s.ContextMenu="contextmenu",s.Resize="resize",s.SelectionChange="selectionchange",s.VisibilityChange="visibilitychange"})(Bi||(Bi={}));function xE(s){s.preventDefault()}function nO(s){s.stopPropagation()}var wt;(function(s){s.Space="Space",s.Down="ArrowDown",s.Right="ArrowRight",s.Left="ArrowLeft",s.Up="ArrowUp",s.Esc="Escape",s.Enter="Enter",s.Tab="Tab"})(wt||(wt={}));const Nw={start:[wt.Space,wt.Enter],cancel:[wt.Esc],end:[wt.Space,wt.Enter,wt.Tab]},iO=(s,e)=>{let{currentCoordinates:t}=e;switch(s.code){case wt.Right:return{...t,x:t.x+25};case wt.Left:return{...t,x:t.x-25};case wt.Down:return{...t,y:t.y+25};case wt.Up:return{...t,y:t.y-25}}};class Dw{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Cu(gl(t)),this.windowListeners=new Cu(ei(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Bi.Resize,this.handleCancel),this.windowListeners.add(Bi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Bi.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&Iw(r),t(rs)}handleKeyDown(e){if(t0(e)){const{active:t,context:r,options:o}=this.props,{keyboardCodes:u=Nw,coordinateGetter:c=iO,scrollBehavior:m="smooth"}=o,{code:g}=e;if(u.end.includes(g)){this.handleEnd(e);return}if(u.cancel.includes(g)){this.handleCancel(e);return}const{collisionRect:p}=r.current,v=p?{x:p.left,y:p.top}:rs;this.referenceCoordinates||(this.referenceCoordinates=v);const E=c(e,{active:t,context:r.current,currentCoordinates:v});if(E){const w=Ef(E,v),I={x:0,y:0},{scrollableAncestors:k}=r.current;for(const j of k){const D=e.code,{isTop:F,isRight:ne,isLeft:Z,isBottom:ce,maxScroll:ie,minScroll:W}=Rw(j),x=J4(j),R={x:Math.min(D===wt.Right?x.right-x.width/2:x.right,Math.max(D===wt.Right?x.left:x.left+x.width/2,E.x)),y:Math.min(D===wt.Down?x.bottom-x.height/2:x.bottom,Math.max(D===wt.Down?x.top:x.top+x.height/2,E.y))},C=D===wt.Right&&!ne||D===wt.Left&&!Z,V=D===wt.Down&&!ce||D===wt.Up&&!F;if(C&&R.x!==E.x){const M=j.scrollLeft+w.x,U=D===wt.Right&&M<=ie.x||D===wt.Left&&M>=W.x;if(U&&!w.y){j.scrollTo({left:M,behavior:m});return}U?I.x=j.scrollLeft-M:I.x=D===wt.Right?j.scrollLeft-ie.x:j.scrollLeft-W.x,I.x&&j.scrollBy({left:-I.x,behavior:m});break}else if(V&&R.y!==E.y){const M=j.scrollTop+w.y,U=D===wt.Down&&M<=ie.y||D===wt.Up&&M>=W.y;if(U&&!w.x){j.scrollTo({top:M,behavior:m});return}U?I.y=j.scrollTop-M:I.y=D===wt.Down?j.scrollTop-ie.y:j.scrollTop-W.y,I.y&&j.scrollBy({top:-I.y,behavior:m});break}}this.handleMove(e,Qo(Ef(E,this.referenceCoordinates),I))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Dw.activators=[{eventName:"onKeyDown",handler:(s,e,t)=>{let{keyboardCodes:r=Nw,onActivation:o}=e,{active:u}=t;const{code:c}=s.nativeEvent;if(r.start.includes(c)){const m=u.activatorNode.current;return m&&s.target!==m?!1:(s.preventDefault(),o?.({event:s.nativeEvent}),!0)}return!1}}];function RE(s){return!!(s&&"distance"in s)}function CE(s){return!!(s&&"delay"in s)}class s0{constructor(e,t,r){var o;r===void 0&&(r=tO(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:u}=e,{target:c}=u;this.props=e,this.events=t,this.document=gl(c),this.documentListeners=new Cu(this.document),this.listeners=new Cu(r),this.windowListeners=new Cu(ei(c)),this.initialCoordinates=(o=Tf(u))!=null?o:rs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Bi.Resize,this.handleCancel),this.windowListeners.add(Bi.DragStart,xE),this.windowListeners.add(Bi.VisibilityChange,this.handleCancel),this.windowListeners.add(Bi.ContextMenu,xE),this.documentListeners.add(Bi.Keydown,this.handleKeydown),t){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(CE(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(RE(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:o}=this.props;o(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Bi.Click,nO,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Bi.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:o,props:u}=this,{onMove:c,options:{activationConstraint:m}}=u;if(!o)return;const g=(t=Tf(e))!=null?t:rs,p=Ef(o,g);if(!r&&m){if(RE(m)){if(m.tolerance!=null&&_g(p,m.tolerance))return this.handleCancel();if(_g(p,m.distance))return this.handleStart()}if(CE(m)&&_g(p,m.tolerance))return this.handleCancel();this.handlePending(m,p);return}e.cancelable&&e.preventDefault(),c(g)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===wt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const sO={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class r0 extends s0{constructor(e){const{event:t}=e,r=gl(t.target);super(e,sO,r)}}r0.activators=[{eventName:"onPointerDown",handler:(s,e)=>{let{nativeEvent:t}=s,{onActivation:r}=e;return!t.isPrimary||t.button!==0?!1:(r?.({event:t}),!0)}}];const rO={move:{name:"mousemove"},end:{name:"mouseup"}};var Yg;(function(s){s[s.RightClick=2]="RightClick"})(Yg||(Yg={}));class a0 extends s0{constructor(e){super(e,rO,gl(e.event.target))}}a0.activators=[{eventName:"onMouseDown",handler:(s,e)=>{let{nativeEvent:t}=s,{onActivation:r}=e;return t.button===Yg.RightClick?!1:(r?.({event:t}),!0)}}];const vg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class o0 extends s0{constructor(e){super(e,vg)}static setup(){return window.addEventListener(vg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(vg.move.name,e)};function e(){}}}o0.activators=[{eventName:"onTouchStart",handler:(s,e)=>{let{nativeEvent:t}=s,{onActivation:r}=e;const{touches:o}=t;return o.length>1?!1:(r?.({event:t}),!0)}}];var Iu;(function(s){s[s.Pointer=0]="Pointer",s[s.DraggableRect=1]="DraggableRect"})(Iu||(Iu={}));var Sf;(function(s){s[s.TreeOrder=0]="TreeOrder",s[s.ReversedTreeOrder=1]="ReversedTreeOrder"})(Sf||(Sf={}));function aO(s){let{acceleration:e,activator:t=Iu.Pointer,canScroll:r,draggingRect:o,enabled:u,interval:c=5,order:m=Sf.TreeOrder,pointerCoordinates:g,scrollableAncestors:p,scrollableAncestorRects:v,delta:E,threshold:w}=s;const I=lO({delta:E,disabled:!u}),[k,j]=w4(),D=q.useRef({x:0,y:0}),F=q.useRef({x:0,y:0}),ne=q.useMemo(()=>{switch(t){case Iu.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case Iu.DraggableRect:return o}},[t,o,g]),Z=q.useRef(null),ce=q.useCallback(()=>{const W=Z.current;if(!W)return;const x=D.current.x*F.current.x,R=D.current.y*F.current.y;W.scrollBy(x,R)},[]),ie=q.useMemo(()=>m===Sf.TreeOrder?[...p].reverse():p,[m,p]);q.useEffect(()=>{if(!u||!p.length||!ne){j();return}for(const W of ie){if(r?.(W)===!1)continue;const x=p.indexOf(W),R=v[x];if(!R)continue;const{direction:C,speed:V}=X4(W,R,ne,e,w);for(const M of["x","y"])I[M][C[M]]||(V[M]=0,C[M]=0);if(V.x>0||V.y>0){j(),Z.current=W,k(ce,c),D.current=V,F.current=C;return}}D.current={x:0,y:0},F.current={x:0,y:0},j()},[e,ce,r,j,u,c,JSON.stringify(ne),JSON.stringify(I),k,p,ie,v,JSON.stringify(w)])}const oO={x:{[En.Backward]:!1,[En.Forward]:!1},y:{[En.Backward]:!1,[En.Forward]:!1}};function lO(s){let{delta:e,disabled:t}=s;const r=bf(e);return oc(o=>{if(t||!r||!o)return oO;const u={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[En.Backward]:o.x[En.Backward]||u.x===-1,[En.Forward]:o.x[En.Forward]||u.x===1},y:{[En.Backward]:o.y[En.Backward]||u.y===-1,[En.Forward]:o.y[En.Forward]||u.y===1}}},[t,e,r])}function uO(s,e){const t=e!=null?s.get(e):void 0,r=t?t.node.current:null;return oc(o=>{var u;return e==null?null:(u=r??o)!=null?u:null},[r,e])}function cO(s,e){return q.useMemo(()=>s.reduce((t,r)=>{const{sensor:o}=r,u=o.activators.map(c=>({eventName:c.eventName,handler:e(c.handler,r)}));return[...t,...u]},[]),[s,e])}var Gu;(function(s){s[s.Always=0]="Always",s[s.BeforeDragging=1]="BeforeDragging",s[s.WhileDragging=2]="WhileDragging"})(Gu||(Gu={}));var Xg;(function(s){s.Optimized="optimized"})(Xg||(Xg={}));const IE=new Map;function hO(s,e){let{dragging:t,dependencies:r,config:o}=e;const[u,c]=q.useState(null),{frequency:m,measure:g,strategy:p}=o,v=q.useRef(s),E=D(),w=Fu(E),I=q.useCallback(function(F){F===void 0&&(F=[]),!w.current&&c(ne=>ne===null?F:ne.concat(F.filter(Z=>!ne.includes(Z))))},[w]),k=q.useRef(null),j=oc(F=>{if(E&&!t)return IE;if(!F||F===IE||v.current!==s||u!=null){const ne=new Map;for(let Z of s){if(!Z)continue;if(u&&u.length>0&&!u.includes(Z.id)&&Z.rect.current){ne.set(Z.id,Z.rect.current);continue}const ce=Z.node.current,ie=ce?new i0(g(ce),ce):null;Z.rect.current=ie,ie&&ne.set(Z.id,ie)}return ne}return F},[s,u,t,E,g]);return q.useEffect(()=>{v.current=s},[s]),q.useEffect(()=>{E||I()},[t,E]),q.useEffect(()=>{u&&u.length>0&&c(null)},[JSON.stringify(u)]),q.useEffect(()=>{E||typeof m!="number"||k.current!==null||(k.current=setTimeout(()=>{I(),k.current=null},m))},[m,E,I,...r]),{droppableRects:j,measureDroppableContainers:I,measuringScheduled:u!=null};function D(){switch(p){case Gu.Always:return!1;case Gu.BeforeDragging:return t;default:return!t}}}function l0(s,e){return oc(t=>s?t||(typeof e=="function"?e(s):s):null,[e,s])}function fO(s,e){return l0(s,e)}function dO(s){let{callback:e,disabled:t}=s;const r=$f(e),o=q.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(r)},[r,t]);return q.useEffect(()=>()=>o?.disconnect(),[o]),o}function Yf(s){let{callback:e,disabled:t}=s;const r=$f(e),o=q.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(r)},[t]);return q.useEffect(()=>()=>o?.disconnect(),[o]),o}function mO(s){return new i0(lc(s),s)}function NE(s,e,t){e===void 0&&(e=mO);const[r,o]=q.useState(null);function u(){o(g=>{if(!s)return null;if(s.isConnected===!1){var p;return(p=g??t)!=null?p:null}const v=e(s);return JSON.stringify(g)===JSON.stringify(v)?g:v})}const c=dO({callback(g){if(s)for(const p of g){const{type:v,target:E}=p;if(v==="childList"&&E instanceof HTMLElement&&E.contains(s)){u();break}}}}),m=Yf({callback:u});return ir(()=>{u(),s?(m?.observe(s),c?.observe(document.body,{childList:!0,subtree:!0})):(m?.disconnect(),c?.disconnect())},[s]),r}function gO(s){const e=l0(s);return Ew(s,e)}const DE=[];function pO(s){const e=q.useRef(s),t=oc(r=>s?r&&r!==DE&&s&&e.current&&s.parentNode===e.current.parentNode?r:n0(s):DE,[s]);return q.useEffect(()=>{e.current=s},[s]),t}function yO(s){const[e,t]=q.useState(null),r=q.useRef(s),o=q.useCallback(u=>{const c=yg(u.target);c&&t(m=>m?(m.set(c,Qg(c)),new Map(m)):null)},[]);return q.useEffect(()=>{const u=r.current;if(s!==u){c(u);const m=s.map(g=>{const p=yg(g);return p?(p.addEventListener("scroll",o,{passive:!0}),[p,Qg(p)]):null}).filter(g=>g!=null);t(m.length?new Map(m):null),r.current=s}return()=>{c(s),c(u)};function c(m){m.forEach(g=>{const p=yg(g);p?.removeEventListener("scroll",o)})}},[o,s]),q.useMemo(()=>s.length?e?Array.from(e.values()).reduce((u,c)=>Qo(u,c),rs):Cw(s):rs,[s,e])}function OE(s,e){e===void 0&&(e=[]);const t=q.useRef(null);return q.useEffect(()=>{t.current=null},e),q.useEffect(()=>{const r=s!==rs;r&&!t.current&&(t.current=s),!r&&t.current&&(t.current=null)},[s]),t.current?Ef(s,t.current):rs}function _O(s){q.useEffect(()=>{if(!Kf)return;const e=s.map(t=>{let{sensor:r}=t;return r.setup==null?void 0:r.setup()});return()=>{for(const t of e)t?.()}},s.map(e=>{let{sensor:t}=e;return t}))}function vO(s,e){return q.useMemo(()=>s.reduce((t,r)=>{let{eventName:o,handler:u}=r;return t[o]=c=>{u(c,e)},t},{}),[s,e])}function Ow(s){return q.useMemo(()=>s?K4(s):null,[s])}const ME=[];function bO(s,e){e===void 0&&(e=lc);const[t]=s,r=Ow(t?ei(t):null),[o,u]=q.useState(ME);function c(){u(()=>s.length?s.map(g=>xw(g)?r:new i0(e(g),g)):ME)}const m=Yf({callback:c});return ir(()=>{m?.disconnect(),c(),s.forEach(g=>m?.observe(g))},[s]),o}function Mw(s){if(!s)return null;if(s.children.length>1)return s;const e=s.children[0];return ac(e)?e:s}function EO(s){let{measure:e}=s;const[t,r]=q.useState(null),o=q.useCallback(p=>{for(const{target:v}of p)if(ac(v)){r(E=>{const w=e(v);return E?{...E,width:w.width,height:w.height}:w});break}},[e]),u=Yf({callback:o}),c=q.useCallback(p=>{const v=Mw(p);u?.disconnect(),v&&u?.observe(v),r(v?e(v):null)},[e,u]),[m,g]=vf(c);return q.useMemo(()=>({nodeRef:m,rect:t,setRef:g}),[t,m,g])}const TO=[{sensor:r0,options:{}},{sensor:Dw,options:{}}],wO={current:{}},Xh={draggable:{measure:AE},droppable:{measure:AE,strategy:Gu.WhileDragging,frequency:Xg.Optimized},dragOverlay:{measure:lc}};class Nu extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return(t=(r=this.get(e))==null?void 0:r.node.current)!=null?t:void 0}}const SO={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Nu,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:wf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Xh,measureDroppableContainers:wf,windowRect:null,measuringScheduled:!1},kw={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:wf,draggableNodes:new Map,over:null,measureDroppableContainers:wf},uc=q.createContext(kw),Vw=q.createContext(SO);function AO(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Nu}}}function xO(s,e){switch(e.type){case mn.DragStart:return{...s,draggable:{...s.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case mn.DragMove:return s.draggable.active==null?s:{...s,draggable:{...s.draggable,translate:{x:e.coordinates.x-s.draggable.initialCoordinates.x,y:e.coordinates.y-s.draggable.initialCoordinates.y}}};case mn.DragEnd:case mn.DragCancel:return{...s,draggable:{...s.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case mn.RegisterDroppable:{const{element:t}=e,{id:r}=t,o=new Nu(s.droppable.containers);return o.set(r,t),{...s,droppable:{...s.droppable,containers:o}}}case mn.SetDroppableDisabled:{const{id:t,key:r,disabled:o}=e,u=s.droppable.containers.get(t);if(!u||r!==u.key)return s;const c=new Nu(s.droppable.containers);return c.set(t,{...u,disabled:o}),{...s,droppable:{...s.droppable,containers:c}}}case mn.UnregisterDroppable:{const{id:t,key:r}=e,o=s.droppable.containers.get(t);if(!o||r!==o.key)return s;const u=new Nu(s.droppable.containers);return u.delete(t),{...s,droppable:{...s.droppable,containers:u}}}default:return s}}function RO(s){let{disabled:e}=s;const{active:t,activatorEvent:r,draggableNodes:o}=q.useContext(uc),u=bf(r),c=bf(t?.id);return q.useEffect(()=>{if(!e&&!r&&u&&c!=null){if(!t0(u)||document.activeElement===u.target)return;const m=o.get(c);if(!m)return;const{activatorNode:g,node:p}=m;if(!g.current&&!p.current)return;requestAnimationFrame(()=>{for(const v of[g.current,p.current]){if(!v)continue;const E=x4(v);if(E){E.focus();break}}})}},[r,e,o,c,u]),null}function Pw(s,e){let{transform:t,...r}=e;return s!=null&&s.length?s.reduce((o,u)=>u({transform:o,...r}),t):t}function CO(s){return q.useMemo(()=>({draggable:{...Xh.draggable,...s?.draggable},droppable:{...Xh.droppable,...s?.droppable},dragOverlay:{...Xh.dragOverlay,...s?.dragOverlay}}),[s?.draggable,s?.droppable,s?.dragOverlay])}function IO(s){let{activeNode:e,measure:t,initialRect:r,config:o=!0}=s;const u=q.useRef(!1),{x:c,y:m}=typeof o=="boolean"?{x:o,y:o}:o;ir(()=>{if(!c&&!m||!e){u.current=!1;return}if(u.current||!r)return;const p=e?.node.current;if(!p||p.isConnected===!1)return;const v=t(p),E=Ew(v,r);if(c||(E.x=0),m||(E.y=0),u.current=!0,Math.abs(E.x)>0||Math.abs(E.y)>0){const w=ww(p);w&&w.scrollBy({top:E.y,left:E.x})}},[e,c,m,r,t])}const Xf=q.createContext({...rs,scaleX:1,scaleY:1});var Fr;(function(s){s[s.Uninitialized=0]="Uninitialized",s[s.Initializing=1]="Initializing",s[s.Initialized=2]="Initialized"})(Fr||(Fr={}));const Lw=q.memo(function(e){var t,r,o,u;let{id:c,accessibility:m,autoScroll:g=!0,children:p,sensors:v=TO,collisionDetection:E=z4,measuring:w,modifiers:I,...k}=e;const j=q.useReducer(xO,void 0,AO),[D,F]=j,[ne,Z]=O4(),[ce,ie]=q.useState(Fr.Uninitialized),W=ce===Fr.Initialized,{draggable:{active:x,nodes:R,translate:C},droppable:{containers:V}}=D,M=x!=null?R.get(x):null,U=q.useRef({initial:null,translated:null}),N=q.useMemo(()=>{var He;return x!=null?{id:x,data:(He=M?.data)!=null?He:wO,rect:U}:null},[x,M]),qe=q.useRef(null),[dt,te]=q.useState(null),[he,be]=q.useState(null),Me=Fu(k,Object.values(k)),ze=Qf("DndDescribedBy",c),P=q.useMemo(()=>V.getEnabled(),[V]),se=CO(w),{droppableRects:me,measureDroppableContainers:de,measuringScheduled:_e}=hO(P,{dragging:W,dependencies:[C.x,C.y],config:se.droppable}),Ae=uO(R,x),Le=q.useMemo(()=>he?Tf(he):null,[he]),Dt=$i(),ut=fO(Ae,se.draggable.measure);IO({activeNode:x!=null?R.get(x):null,config:Dt.layoutShiftCompensation,initialRect:ut,measure:se.draggable.measure});const Ht=NE(Ae,se.draggable.measure,ut),Si=NE(Ae?Ae.parentElement:null),Vn=q.useRef({activatorEvent:null,active:null,activeNode:Ae,collisionRect:null,collisions:null,droppableRects:me,draggableNodes:R,draggingNode:null,draggingNodeRect:null,droppableContainers:V,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),qi=V.getNodeFor((t=Vn.current.over)==null?void 0:t.id),Jt=EO({measure:se.dragOverlay.measure}),fi=(r=Jt.nodeRef.current)!=null?r:Ae,Pn=W?(o=Jt.rect)!=null?o:Ht:null,as=!!(Jt.nodeRef.current&&Jt.rect),Hi=gO(as?null:Ht),St=Ow(fi?ei(fi):null),ct=pO(W?qi??Ae:null),Hn=bO(ct),os=Pw(I,{transform:{x:C.x-Hi.x,y:C.y-Hi.y,scaleX:1,scaleY:1},activatorEvent:he,active:N,activeNodeRect:Ht,containerNodeRect:Si,draggingNodeRect:Pn,over:Vn.current.over,overlayNodeRect:Jt.rect,scrollableAncestors:ct,scrollableAncestorRects:Hn,windowRect:St}),ls=Le?Qo(Le,C):null,Zt=yO(ct),Fi=OE(Zt),Rs=OE(Zt,[Ht]),Fn=Qo(os,Fi),Sn=Pn?H4(Pn,os):null,Gi=N&&Sn?E({active:N,collisionRect:Sn,droppableRects:me,droppableContainers:P,pointerCoordinates:ls}):null,Cs=U4(Gi,"id"),[Gn,Is]=q.useState(null),Kn=as?os:Qo(os,Rs),Ft=B4(Kn,(u=Gn?.rect)!=null?u:null,Ht),pn=q.useRef(null),At=q.useCallback((He,xt)=>{let{sensor:Rt,options:Ut}=xt;if(qe.current==null)return;const yn=R.get(qe.current);if(!yn)return;const Wt=He.nativeEvent,Vt=new Rt({active:qe.current,activeNode:yn,event:Wt,options:Ut,context:Vn,onAbort(mt){if(!R.get(mt))return;const{onDragAbort:Gt}=Me.current,fe={id:mt};Gt?.(fe),ne({type:"onDragAbort",event:fe})},onPending(mt,gt,Gt,fe){if(!R.get(mt))return;const{onDragPending:tt}=Me.current,Ot={id:mt,constraint:gt,initialCoordinates:Gt,offset:fe};tt?.(Ot),ne({type:"onDragPending",event:Ot})},onStart(mt){const gt=qe.current;if(gt==null)return;const Gt=R.get(gt);if(!Gt)return;const{onDragStart:fe}=Me.current,cn={activatorEvent:Wt,active:{id:gt,data:Gt.data,rect:U}};gu.unstable_batchedUpdates(()=>{fe?.(cn),ie(Fr.Initializing),F({type:mn.DragStart,initialCoordinates:mt,active:gt}),ne({type:"onDragStart",event:cn}),te(pn.current),be(Wt)})},onMove(mt){F({type:mn.DragMove,coordinates:mt})},onEnd:Y(mn.DragEnd),onCancel:Y(mn.DragCancel)});pn.current=Vt;function Y(mt){return async function(){const{active:Gt,collisions:fe,over:cn,scrollAdjustedTranslate:tt}=Vn.current;let Ot=null;if(Gt&&tt){const{cancelDrop:hn}=Me.current;Ot={activatorEvent:Wt,active:Gt,collisions:fe,delta:tt,over:cn},mt===mn.DragEnd&&typeof hn=="function"&&await Promise.resolve(hn(Ot))&&(mt=mn.DragCancel)}qe.current=null,gu.unstable_batchedUpdates(()=>{F({type:mt}),ie(Fr.Uninitialized),Is(null),te(null),be(null),pn.current=null;const hn=mt===mn.DragEnd?"onDragEnd":"onDragCancel";if(Ot){const pt=Me.current[hn];pt?.(Ot),ne({type:hn,event:Ot})}})}}},[R]),Ns=q.useCallback((He,xt)=>(Rt,Ut)=>{const yn=Rt.nativeEvent,Wt=R.get(Ut);if(qe.current!==null||!Wt||yn.dndKit||yn.defaultPrevented)return;const Vt={active:Wt};He(Rt,xt.options,Vt)===!0&&(yn.dndKit={capturedBy:xt.sensor},qe.current=Ut,At(Rt,xt))},[R,At]),Ki=cO(v,Ns);_O(v),ir(()=>{Ht&&ce===Fr.Initializing&&ie(Fr.Initialized)},[Ht,ce]),q.useEffect(()=>{const{onDragMove:He}=Me.current,{active:xt,activatorEvent:Rt,collisions:Ut,over:yn}=Vn.current;if(!xt||!Rt)return;const Wt={active:xt,activatorEvent:Rt,collisions:Ut,delta:{x:Fn.x,y:Fn.y},over:yn};gu.unstable_batchedUpdates(()=>{He?.(Wt),ne({type:"onDragMove",event:Wt})})},[Fn.x,Fn.y]),q.useEffect(()=>{const{active:He,activatorEvent:xt,collisions:Rt,droppableContainers:Ut,scrollAdjustedTranslate:yn}=Vn.current;if(!He||qe.current==null||!xt||!yn)return;const{onDragOver:Wt}=Me.current,Vt=Ut.get(Cs),Y=Vt&&Vt.rect.current?{id:Vt.id,rect:Vt.rect.current,data:Vt.data,disabled:Vt.disabled}:null,mt={active:He,activatorEvent:xt,collisions:Rt,delta:{x:yn.x,y:yn.y},over:Y};gu.unstable_batchedUpdates(()=>{Is(Y),Wt?.(mt),ne({type:"onDragOver",event:mt})})},[Cs]),ir(()=>{Vn.current={activatorEvent:he,active:N,activeNode:Ae,collisionRect:Sn,collisions:Gi,droppableRects:me,draggableNodes:R,draggingNode:fi,draggingNodeRect:Pn,droppableContainers:V,over:Gn,scrollableAncestors:ct,scrollAdjustedTranslate:Fn},U.current={initial:Pn,translated:Sn}},[N,Ae,Gi,Sn,R,fi,Pn,me,V,Gn,ct,Fn]),aO({...Dt,delta:C,draggingRect:Sn,pointerCoordinates:ls,scrollableAncestors:ct,scrollableAncestorRects:Hn});const rr=q.useMemo(()=>({active:N,activeNode:Ae,activeNodeRect:Ht,activatorEvent:he,collisions:Gi,containerNodeRect:Si,dragOverlay:Jt,draggableNodes:R,droppableContainers:V,droppableRects:me,over:Gn,measureDroppableContainers:de,scrollableAncestors:ct,scrollableAncestorRects:Hn,measuringConfiguration:se,measuringScheduled:_e,windowRect:St}),[N,Ae,Ht,he,Gi,Si,Jt,R,V,me,Gn,de,ct,Hn,se,_e,St]),ti=q.useMemo(()=>({activatorEvent:he,activators:Ki,active:N,activeNodeRect:Ht,ariaDescribedById:{draggable:ze},dispatch:F,draggableNodes:R,over:Gn,measureDroppableContainers:de}),[he,Ki,N,Ht,F,ze,R,Gn,de]);return at.createElement(vw.Provider,{value:Z},at.createElement(uc.Provider,{value:ti},at.createElement(Vw.Provider,{value:rr},at.createElement(Xf.Provider,{value:Ft},p)),at.createElement(RO,{disabled:m?.restoreFocus===!1})),at.createElement(V4,{...m,hiddenTextDescribedById:ze}));function $i(){const He=dt?.autoScrollEnabled===!1,xt=typeof g=="object"?g.enabled===!1:g===!1,Rt=W&&!He&&!xt;return typeof g=="object"?{...g,enabled:Rt}:{enabled:Rt}}}),NO=q.createContext(null),kE="button",DO="Draggable";function Uw(s){let{id:e,data:t,disabled:r=!1,attributes:o}=s;const u=Qf(DO),{activators:c,activatorEvent:m,active:g,activeNodeRect:p,ariaDescribedById:v,draggableNodes:E,over:w}=q.useContext(uc),{role:I=kE,roleDescription:k="draggable",tabIndex:j=0}=o??{},D=g?.id===e,F=q.useContext(D?Xf:NO),[ne,Z]=vf(),[ce,ie]=vf(),W=vO(c,e),x=Fu(t);ir(()=>(E.set(e,{id:e,key:u,node:ne,activatorNode:ce,data:x}),()=>{const C=E.get(e);C&&C.key===u&&E.delete(e)}),[E,e]);const R=q.useMemo(()=>({role:I,tabIndex:j,"aria-disabled":r,"aria-pressed":D&&I===kE?!0:void 0,"aria-roledescription":k,"aria-describedby":v.draggable}),[r,I,j,D,k,v.draggable]);return{active:g,activatorEvent:m,activeNodeRect:p,attributes:R,isDragging:D,listeners:r?void 0:W,node:ne,over:w,setNodeRef:Z,setActivatorNodeRef:ie,transform:F}}function OO(){return q.useContext(Vw)}const MO="Droppable",kO={timeout:25};function u0(s){let{data:e,disabled:t=!1,id:r,resizeObserverConfig:o}=s;const u=Qf(MO),{active:c,dispatch:m,over:g,measureDroppableContainers:p}=q.useContext(uc),v=q.useRef({disabled:t}),E=q.useRef(!1),w=q.useRef(null),I=q.useRef(null),{disabled:k,updateMeasurementsFor:j,timeout:D}={...kO,...o},F=Fu(j??r),ne=q.useCallback(()=>{if(!E.current){E.current=!0;return}I.current!=null&&clearTimeout(I.current),I.current=setTimeout(()=>{p(Array.isArray(F.current)?F.current:[F.current]),I.current=null},D)},[D]),Z=Yf({callback:ne,disabled:k||!c}),ce=q.useCallback((R,C)=>{Z&&(C&&(Z.unobserve(C),E.current=!1),R&&Z.observe(R))},[Z]),[ie,W]=vf(ce),x=Fu(e);return q.useEffect(()=>{!Z||!ie.current||(Z.disconnect(),E.current=!1,Z.observe(ie.current))},[ie,Z]),q.useEffect(()=>(m({type:mn.RegisterDroppable,element:{id:r,key:u,disabled:t,node:ie,rect:w,data:x}}),()=>m({type:mn.UnregisterDroppable,key:u,id:r})),[r]),q.useEffect(()=>{t!==v.current.disabled&&(m({type:mn.SetDroppableDisabled,id:r,key:u,disabled:t}),v.current.disabled=t)},[r,u,t,m]),{active:c,rect:w,isOver:g?.id===r,node:ie,over:g,setNodeRef:W}}function VO(s){let{animation:e,children:t}=s;const[r,o]=q.useState(null),[u,c]=q.useState(null),m=bf(t);return!t&&!r&&m&&o(m),ir(()=>{if(!u)return;const g=r?.key,p=r?.props.id;if(g==null||p==null){o(null);return}Promise.resolve(e(p,u)).then(()=>{o(null)})},[e,r,u]),at.createElement(at.Fragment,null,t,r?q.cloneElement(r,{ref:c}):null)}const PO={x:0,y:0,scaleX:1,scaleY:1};function LO(s){let{children:e}=s;return at.createElement(uc.Provider,{value:kw},at.createElement(Xf.Provider,{value:PO},e))}const UO={position:"fixed",touchAction:"none"},jO=s=>t0(s)?"transform 250ms ease":void 0,zO=q.forwardRef((s,e)=>{let{as:t,activatorEvent:r,adjustScale:o,children:u,className:c,rect:m,style:g,transform:p,transition:v=jO}=s;if(!m)return null;const E=o?p:{...p,scaleX:1,scaleY:1},w={...UO,width:m.width,height:m.height,top:m.top,left:m.left,transform:rl.Transform.toString(E),transformOrigin:o&&r?P4(r,m):void 0,transition:typeof v=="function"?v(r):v,...g};return at.createElement(t,{className:c,style:w,ref:e},u)}),BO=s=>e=>{let{active:t,dragOverlay:r}=e;const o={},{styles:u,className:c}=s;if(u!=null&&u.active)for(const[m,g]of Object.entries(u.active))g!==void 0&&(o[m]=t.node.style.getPropertyValue(m),t.node.style.setProperty(m,g));if(u!=null&&u.dragOverlay)for(const[m,g]of Object.entries(u.dragOverlay))g!==void 0&&r.node.style.setProperty(m,g);return c!=null&&c.active&&t.node.classList.add(c.active),c!=null&&c.dragOverlay&&r.node.classList.add(c.dragOverlay),function(){for(const[g,p]of Object.entries(o))t.node.style.setProperty(g,p);c!=null&&c.active&&t.node.classList.remove(c.active)}},qO=s=>{let{transform:{initial:e,final:t}}=s;return[{transform:rl.Transform.toString(e)},{transform:rl.Transform.toString(t)}]},HO={duration:250,easing:"ease",keyframes:qO,sideEffects:BO({styles:{active:{opacity:"0"}}})};function FO(s){let{config:e,draggableNodes:t,droppableContainers:r,measuringConfiguration:o}=s;return $f((u,c)=>{if(e===null)return;const m=t.get(u);if(!m)return;const g=m.node.current;if(!g)return;const p=Mw(c);if(!p)return;const{transform:v}=ei(c).getComputedStyle(c),E=Tw(v);if(!E)return;const w=typeof e=="function"?e:GO(e);return Iw(g,o.draggable.measure),w({active:{id:u,data:m.data,node:g,rect:o.draggable.measure(g)},draggableNodes:t,dragOverlay:{node:c,rect:o.dragOverlay.measure(p)},droppableContainers:r,measuringConfiguration:o,transform:E})})}function GO(s){const{duration:e,easing:t,sideEffects:r,keyframes:o}={...HO,...s};return u=>{let{active:c,dragOverlay:m,transform:g,...p}=u;if(!e)return;const v={x:m.rect.left-c.rect.left,y:m.rect.top-c.rect.top},E={scaleX:g.scaleX!==1?c.rect.width*g.scaleX/m.rect.width:1,scaleY:g.scaleY!==1?c.rect.height*g.scaleY/m.rect.height:1},w={x:g.x-v.x,y:g.y-v.y,...E},I=o({...p,active:c,dragOverlay:m,transform:{initial:g,final:w}}),[k]=I,j=I[I.length-1];if(JSON.stringify(k)===JSON.stringify(j))return;const D=r?.({active:c,dragOverlay:m,...p}),F=m.node.animate(I,{duration:e,easing:t,fill:"forwards"});return new Promise(ne=>{F.onfinish=()=>{D?.(),ne()}})}}let VE=0;function KO(s){return q.useMemo(()=>{if(s!=null)return VE++,VE},[s])}const $O=at.memo(s=>{let{adjustScale:e=!1,children:t,dropAnimation:r,style:o,transition:u,modifiers:c,wrapperElement:m="div",className:g,zIndex:p=999}=s;const{activatorEvent:v,active:E,activeNodeRect:w,containerNodeRect:I,draggableNodes:k,droppableContainers:j,dragOverlay:D,over:F,measuringConfiguration:ne,scrollableAncestors:Z,scrollableAncestorRects:ce,windowRect:ie}=OO(),W=q.useContext(Xf),x=KO(E?.id),R=Pw(c,{activatorEvent:v,active:E,activeNodeRect:w,containerNodeRect:I,draggingNodeRect:D.rect,over:F,overlayNodeRect:D.rect,scrollableAncestors:Z,scrollableAncestorRects:ce,transform:W,windowRect:ie}),C=l0(w),V=FO({config:r,draggableNodes:k,droppableContainers:j,measuringConfiguration:ne}),M=C?D.setRef:void 0;return at.createElement(LO,null,at.createElement(VO,{animation:V},E&&x?at.createElement(zO,{key:x,id:E.id,ref:M,as:m,activatorEvent:v,adjustScale:e,className:g,transition:u,rect:C,style:{zIndex:p,...o},transform:R},t):null))}),Yo=s=>new Zp(s),QO=(s,e,t,r)=>{try{return s.move({from:e,to:t,promotion:r||"q"})}catch{return null}},YO=({id:s,isLight:e,isHighlighted:t=!1,isActive:r=!1,children:o})=>{const{isOver:u,setNodeRef:c}=u0({id:s});return S.jsxs("div",{ref:c,className:`chess-square ${r?"z-50 relative":"overflow-hidden"} ${u?"bg-indigo-500/60 shadow-[inset_0_0_20px_rgba(255,255,255,0.2)] z-10":t?e?"bg-indigo-400/50 shadow-inner":"bg-indigo-600/50 shadow-inner":e?"bg-[#cbd5e1] text-slate-700 shadow-[inset_0_1px_4px_rgba(255,255,255,0.3)]":"bg-[#334155] text-slate-400 shadow-[inset_0_2px_4px_rgba(0,0,0,0.3)]"}`,children:[S.jsx("div",{className:`absolute top-1 left-1 text-[10px] font-black uppercase tracking-tighter opacity-20 pointer-events-none ${e?"text-slate-900":"text-slate-100"}`,children:s}),S.jsx("div",{className:"relative w-full h-full overflow-visible z-10",children:o})]})},XO={w:{p:"",r:"",n:"",b:"",q:"",k:""},b:{p:"",r:"",n:"",b:"",q:"",k:""}},JO=({id:s,type:e,color:t,isDraggable:r=!0})=>{const{attributes:o,listeners:u,setNodeRef:c,transform:m,isDragging:g}=Uw({id:s,disabled:!r,data:{type:e,color:t}}),p={transform:rl.Translate.toString(m),transition:g?"none":"transform 120ms ease-out",zIndex:g?9999:20};return S.jsx("div",{ref:c,style:p,...u,...o,className:`chess-piece transition-transform duration-120 ease-out ${g?"scale-112 drop-shadow-2xl z-[9999]":"hover:scale-103 z-20"} ${r?"cursor-grab active:cursor-grabbing":"grayscale-[0.2] opacity-90 cursor-default"} text-slate-950 drop-shadow-sm`,children:S.jsx("div",{className:`
        flex items-center justify-center w-full h-full 
        ${t==="w"?"drop-shadow-[0_2px_0_rgba(255,255,255,0.8)]":"drop-shadow-[0_2px_0_rgba(0,0,0,0.5)]"}
      `,children:XO[t][e]})})},ZO=({onMove:s,initialFen:e,playerColor:t="w",isGameOver:r=!1})=>{const[o,u]=q.useState(()=>Yo(e)),[c,m]=q.useState([]),[g,p]=q.useState(null);at.useEffect(()=>{e&&e!==o.fen()&&u(Yo(e))},[e]);const v=bw(Ru(o0,{activationConstraint:{delay:80,tolerance:8}}),Ru(r0),Ru(a0)),E=q.useCallback(k=>{const{active:j,over:D}=k;if(m([]),p(null),!D)return;const F=j.id,ne=D.id,Z=Yo(o.fen());QO(Z,F,ne)&&(u(Z),s&&s(Z.fen()))},[o,s]),w=q.useCallback(k=>{p(k);const j=k,D=o.get(j);if(r||!D||D.color!==t||o.turn()!==t){m([]);return}const F=o.moves({square:j,verbose:!0}).map(ne=>ne.to);m(F)},[o,t]),I=()=>{const k=[],j=["a","b","c","d","e","f","g","h"],D=["8","7","6","5","4","3","2","1"],F=t==="w"?D:[...D].reverse(),ne=t==="w"?j:[...j].reverse();for(const Z of F)for(const ce of ne){const ie=`${ce}${Z}`,W=o.get(ie),x=(j.indexOf(ce)+D.indexOf(Z))%2===0,R=!!W&&W.color===t&&o.turn()===t&&!r,C=c.includes(ie),V=ie===g;k.push(S.jsx(YO,{id:ie,isLight:x,isHighlighted:C,isActive:V,children:W&&S.jsx(JO,{id:ie,type:W.type,color:W.color,isDraggable:R})},ie))}return k};return S.jsx(Lw,{sensors:v,onDragEnd:E,onDragStart:k=>w(k.active.id),children:S.jsx("div",{className:"p-3 lg:p-4 bg-slate-800 rounded-[2rem] lg:rounded-[2.5rem] shadow-[0_0_50px_-12px_rgba(99,102,241,0.25)] border-4 border-slate-700/50 ring-4 ring-slate-900/50",style:{touchAction:"none"},children:S.jsx("div",{className:"grid grid-cols-8 gap-0 rounded-2xl lg:rounded-3xl overflow-hidden border border-slate-700/30 shadow-inner",style:{width:"min(92vw, 720px)",height:"min(92vw, 720px)",gridTemplateColumns:"repeat(8, 1fr)"},children:I()})})})},WO=()=>Math.random().toString(36).substring(2,8).toUpperCase(),PE="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",jw=s=>{const[e,t]=q.useState(null),[r,o]=q.useState(null),[u,c]=q.useState(!0),[m,g]=q.useState(!0);q.useEffect(()=>{const D=qu();Bu(D).then(F=>{o(F.user.uid)}).catch(F=>{console.error("Auth failed",F)}).finally(()=>g(!1))},[]);const p=async()=>{if(r)return r;const D=qu(),F=await Bu(D);return o(F.user.uid),F.user.uid};return q.useEffect(()=>{if(!On||!$e){console.warn("Firebase not configured; room sync disabled."),c(!1);return}if(!s){t(null),c(!1);return}c(!0);const D=Jn(Xn($e,"rooms"),s),F=Fp(D,ne=>{ne.exists()?t(ne.data()):t(null),c(!1)},ne=>{console.error("Room subscription error",ne),t(null),c(!1)});return()=>F()},[s]),{room:e,userId:r,loading:u,isAuthLoading:m,createRoom:async()=>{if(!On||!$e)throw new Error("Firebase not configured");const D=await p(),F=WO(),ne=Jn(Xn($e,"rooms"),F);return await Hp(ne,{fen:PE,whitePlayer:D,blackPlayer:"",turn:"w",status:"active",winner:"",resultReason:""}),F},joinRoom:async D=>{if(!On||!$e)throw new Error("Firebase not configured");const F=await p(),ne=Jn(Xn($e,"rooms"),D);await Au($e,async Z=>{const ce=await Z.get(ne);if(!ce.exists())throw new Error("Room not found");const W={...ce.data()};W.whitePlayer?!W.blackPlayer&&W.whitePlayer!==F&&(W.blackPlayer=F):W.whitePlayer=F,Z.update(ne,W)})},updateMove:async D=>{if(!On||!$e||!s)return;const F=Jn(Xn($e,"rooms"),s);await Au($e,async ne=>{const Z=await ne.get(F);if(!Z.exists())return;const ce=Z.data();if(ce.status&&ce.status!=="active")return;const ie=new Zp(D),W=ie.turn();let x="active",R="",C="";ie.isCheckmate()?(x="checkmate",R=W==="w"?"b":"w",C="checkmate"):ie.isStalemate&&ie.isStalemate()?(x="stalemate",R="",C="stalemate"):ie.isDraw()&&(x="draw",R="",C="draw"),ne.update(F,{fen:D,turn:W,status:x,winner:R,resultReason:C})})},resignGame:async D=>{if(!On||!$e||!s)return;const F=Jn(Xn($e,"rooms"),s);await Su(F,{status:"resigned",winner:D==="w"?"b":"w",resultReason:"resigned"})},resetGame:async()=>{if(!On||!$e||!s)return;const D=Jn(Xn($e,"rooms"),s);await Su(D,{fen:PE,turn:"w",status:"active",winner:"",resultReason:""})},leaveRoom:async()=>{if(!(!On||!$e)&&s)try{const D=await p(),F=Jn(Xn($e,"rooms"),s);await Au($e,async ne=>{const Z=await ne.get(F);if(!Z.exists())return;const ie={...Z.data()};ie.whitePlayer===D?ie.whitePlayer="":ie.blackPlayer===D&&(ie.blackPlayer=""),ne.update(F,ie)})}catch(D){console.error("Error leaving room:",D)}}}},eM={p:10,n:30,b:30,r:50,q:90,k:900},LE=[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,-.5,-1,0,0,-1,-.5,.5],[.5,1,1,-2,-2,1,1,.5],[0,0,0,0,0,0,0,0]],UE=[[-5,-4,-3,-3,-3,-3,-4,-5],[-4,-2,0,0,0,0,-2,-4],[-3,0,1,1.5,1.5,1,0,-3],[-3,.5,1.5,2,2,1.5,.5,-3],[-3,0,1.5,2,2,1.5,0,-3],[-3,.5,1,1.5,1.5,1,.5,-3],[-4,-2,0,.5,.5,0,-2,-4],[-5,-4,-3,-3,-3,-3,-4,-5]],tM=s=>{let e=0;const t=s.board();for(let r=0;r<8;r++)for(let o=0;o<8;o++){const u=t[r][o];if(u){const c=eM[u.type];let m=0;u.type==="p"&&(m=u.color==="w"?LE[r][o]:LE[7-r][o]),u.type==="n"&&(m=u.color==="w"?UE[r][o]:UE[7-r][o]),u.color==="w"?e+=c+m*.1:e-=c+m*.1}}return e},Jg=(s,e,t,r,o)=>{if(e===0||s.isGameOver())return-tM(s);const u=s.moves();if(o){let c=-1/0;for(const m of u){s.move(m);const g=Jg(s,e-1,t,r,!1);if(s.undo(),c=Math.max(c,g),t=Math.max(t,g),r<=t)break}return c}else{let c=1/0;for(const m of u){s.move(m);const g=Jg(s,e-1,t,r,!0);if(s.undo(),c=Math.min(c,g),r=Math.min(r,g),r<=t)break}return c}},nM=(s,e="Normal")=>{const t=s.moves();if(t.length===0)return null;if(e==="Easy"&&Math.random()>.2)return t[Math.floor(Math.random()*t.length)];let r=null,o=1/0;t.sort((c,m)=>{const g=c.includes("x")?1:0;return(m.includes("x")?1:0)-g});const u=e==="Easy"?1:e==="Hard"?3:2;for(const c of t){s.move(c);const m=Jg(s,u,-1/0,1/0,!0);s.undo(),m<o&&(o=m,r=c)}return r||t[0]},iM=({roomId:s="",mode:e="online",aiDifficulty:t="Normal",onExit:r})=>{const o=jw(e==="online"?s:null),[u,c]=q.useState(()=>Yo()),[m,g]=q.useState(u.fen()),[p,v]=q.useState("active"),[E,w]=q.useState(""),I=e==="local",k=I?{fen:m,turn:u.turn(),whitePlayer:"local-white",blackPlayer:"local-black",status:p,winner:E}:o.room,j=I?!1:o.loading,D=de=>{const _e=Yo(de);c(_e),g(de),_e.isCheckmate()?(v("checkmate"),w(_e.turn()==="w"?"b":"w")):_e.isDraw()?v("draw"):_e.isStalemate&&_e.isStalemate()&&v("stalemate")};q.useEffect(()=>{if(I&&u.turn()==="b"&&p==="active"){const de=setTimeout(()=>{const _e=nM(u,t);_e&&(u.move(_e),D(u.fen()))},500);return()=>clearTimeout(de)}},[m,I,p,t]);const F=()=>{const de=Yo();c(de),g(de.fen()),v("active"),w(""),x(0),C(0),M(0)},ne=I?D:o.updateMove,Z=I?de=>{v("active"),w(de==="w"?"b":"w"),alert(`${de==="w"?"White":"Black"} resigned.`)}:o.resignGame,ce=I?F:o.resetGame,ie=I?k?.turn==="w"?"local-white":"local-black":o.userId,[W,x]=at.useState(0),[R,C]=at.useState(0),[V,M]=at.useState(0);if(at.useEffect(()=>{!I&&s&&o.joinRoom&&o.joinRoom(s)},[s,I]),at.useEffect(()=>{if(!k||k.status&&k.status!=="active")return;const de=window.setInterval(()=>{x(_e=>_e+1),C(_e=>_e+(k.turn==="w"?1:0)),M(_e=>_e+(k.turn==="b"?1:0))},1e3);return()=>window.clearInterval(de)},[k?.turn,k?.status]),j)return S.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-6 animate-pulse",children:[S.jsx("div",{className:"relative shadow-2xl shadow-indigo-500/20 rounded-full p-4",children:S.jsx(FE,{className:"w-16 h-16 text-indigo-500 animate-spin"})}),S.jsxs("div",{className:"text-center space-y-2",children:[S.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest",children:"Entering Arena"}),S.jsx("p",{className:"text-slate-500 font-medium",children:"Synchronizing with the global lattice..."})]})]});if(!k)return S.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[S.jsxs("div",{className:"text-center space-y-4",children:[S.jsx("h2",{className:"text-5xl font-black text-white italic",children:"Room Dissolved"}),S.jsx("p",{className:"text-slate-400 text-lg",children:"The arena you seek no longer exists or the link is expired."})]}),S.jsx("button",{onClick:r,className:"btn-premium px-10 py-4 text-xl",children:"Return to Lobby"})]});const U=k.whitePlayer===ie||I,N=k.blackPlayer===ie,qe=I||ie===k.whitePlayer?"w":ie===k.blackPlayer?"b":"w",dt=k.turn===qe,te=new Zp(k.fen),he={isCheck:te.isCheck(),isCheckmate:te.isCheckmate(),isDraw:te.isDraw(),isStalemate:typeof te.isStalemate=="function"?te.isStalemate():!1,turn:te.turn()},be=k.status??"active",Me=k.winner??"",ze=be!=="active",P=de=>{const _e=Math.floor(de/60).toString().padStart(2,"0"),Ae=(de%60).toString().padStart(2,"0");return`${_e}:${Ae}`},se=be==="checkmate"?`Checkmate  ${Me==="w"?"White":"Black"} wins`:be==="stalemate"?"Stalemate  Draw":be==="draw"?"Draw":be==="resigned"?`Resigned  ${Me==="w"?"White":"Black"} wins`:he.isCheck?`${he.turn==="w"?"White":"Black"} is in check`:dt?"Your Turn":"Waiting...",me=()=>{navigator.clipboard.writeText(s),alert("Room ID copied to clipboard!")};return S.jsxs("div",{className:"flex flex-col items-center gap-8 lg:gap-12 py-6 lg:py-10 w-full animate-in fade-in duration-700",children:[S.jsxs("header",{className:"w-full max-w-6xl flex items-center justify-between px-4 lg:px-6",children:[S.jsxs("button",{onClick:()=>{!I&&o.leaveRoom&&o.leaveRoom(),r()},className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all font-bold uppercase tracking-widest text-xs",children:[S.jsx("div",{className:"p-2 rounded-xl bg-slate-900 border border-slate-800 group-hover:border-slate-700 group-hover:-translate-x-1 transition-transform",children:S.jsx(yu,{size:18})}),"Back"]}),!I&&S.jsx("div",{className:"flex items-center gap-4",children:S.jsxs("div",{className:"liquid-glass px-6 py-3 flex items-center gap-6",children:[S.jsxs("div",{className:"flex flex-col gap-0.5",children:[S.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-slate-500 font-black",children:"Arena ID"}),S.jsx("code",{className:"text-indigo-300 font-mono font-bold",children:s})]}),S.jsx("div",{className:"h-8 w-px bg-slate-800"}),S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("button",{onClick:me,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:S.jsx(qE,{size:18})}),S.jsx("button",{className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:S.jsx(GE,{size:18})})]})]})}),I&&S.jsx("div",{className:"px-6 py-3 liquid-glass text-indigo-300 font-bold uppercase tracking-widest text-xs",children:"Single Player Mode"})]}),S.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-6 lg:gap-16 w-full max-w-7xl px-4 lg:px-6",children:[S.jsxs("div",{className:"relative group w-full flex justify-center max-w-full overflow-visible",children:[S.jsx("div",{className:"absolute -inset-4 bg-linear-to-r from-indigo-500 to-pink-500 rounded-[2.5rem] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"}),S.jsx(ZO,{initialFen:k.fen,onMove:ne,playerColor:qe,isGameOver:ze})]}),S.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-6 lg:gap-8 mt-0 lg:mt-0",children:[S.jsxs("div",{className:"liquid-glass p-5 lg:p-8 space-y-6 lg:space-y-8 border-l-4 border-l-indigo-500",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:"Game Status"}),S.jsxs("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-2 ${be==="active"?dt?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-slate-800 text-slate-500":"bg-indigo-500/10 text-indigo-300 border border-indigo-500/30"}`,children:[S.jsx("span",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${be==="active"?"bg-green-500":"bg-indigo-400"}`}),I?k.turn==="w"?" White Turn":" Black Turn":se]})]}),be==="active"&&he.isCheck&&S.jsxs("div",{className:"p-3 rounded-2xl bg-amber-500/10 border border-amber-500/30 text-amber-200 text-[10px] lg:text-xs font-black uppercase tracking-widest",children:["CHECK! ",he.turn==="w"?"White":"Black"," to move."]}),ze&&S.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/10 border border-indigo-500/30 text-indigo-100 text-sm lg:text-base font-bold",children:se}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 p-4 rounded-2xl bg-slate-900/60 border border-slate-800/80 text-[10px] lg:text-xs font-bold uppercase tracking-widest",children:[S.jsxs("div",{className:"space-y-1",children:[S.jsx("div",{className:"text-slate-500",children:"Time"}),S.jsx("div",{className:"text-white text-base",children:P(W)})]}),S.jsxs("div",{className:"space-y-1",children:[S.jsx("div",{className:"text-slate-500",children:"White"}),S.jsx("div",{className:"text-emerald-300 text-base",children:P(R)})]}),S.jsxs("div",{className:"space-y-1",children:[S.jsx("div",{className:"text-slate-500",children:"Black"}),S.jsx("div",{className:"text-sky-300 text-base",children:P(V)})]})]}),!I&&S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"flex items-center gap-3 lg:gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[S.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${U?"bg-white text-slate-950":"bg-slate-800 text-slate-400"}`,children:"W"}),S.jsxs("div",{className:"flex-1",children:[S.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"White Player"}),S.jsx("div",{className:"text-xs text-slate-500 font-medium",children:k.whitePlayer===ie?"Connected (You)":k.whitePlayer?"Opponent Ready":"Awaiting Entry..."})]})]}),S.jsxs("div",{className:"flex items-center gap-3 lg:gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[S.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${N?"bg-indigo-500 text-white":"bg-slate-800 text-slate-400"}`,children:"B"}),S.jsxs("div",{className:"flex-1",children:[S.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"Black Player"}),S.jsx("div",{className:"text-xs text-slate-500 font-medium",children:k.blackPlayer===ie?"Connected (You)":k.blackPlayer?"Opponent Ready":"Awaiting Entry..."})]})]})]})]}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[S.jsxs("button",{disabled:ze,onClick:()=>Z(qe),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-slate-800 bg-slate-900/60 text-slate-200 font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:border-red-500/50 hover:text-red-200 transition",children:[S.jsx(HE,{size:18}),"Resign"]}),S.jsxs("button",{disabled:!ze&&!I,onClick:()=>ce(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 text-indigo-100 font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:bg-indigo-500/20 transition",children:[S.jsx(tp,{size:18}),"Rematch"]})]})]}),!I&&S.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[S.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[S.jsx(np,{size:20,className:"mx-auto text-slate-600"}),S.jsx("div",{className:"text-xl font-black text-white italic",children:k.whitePlayer&&k.blackPlayer?"2/2":k.whitePlayer||k.blackPlayer?"1/2":"0/2"}),S.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Connected"})]}),S.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[S.jsx(KE,{size:20,className:"mx-auto text-indigo-400"}),S.jsx("div",{className:"text-xl font-black text-white italic",children:"24ms"}),S.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Latency"})]})]})]})]}),S.jsx("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10",children:"Transparent Strategy Arena"})]})},sM=[2,0,0,0,0,-5,0,-3,0,0,0,5,-5,0,0,0,3,0,5,0,0,0,0,-2],pu=()=>{const s=Math.floor(Math.random()*6)+1,e=Math.floor(Math.random()*6)+1;return s===e?[s,s,s,s]:[s,e]},Du=()=>{const s=pu();return{board:[...sM],bar:{white:0,black:0},off:{white:0,black:0},turn:"white",dice:s,movesLeft:[...s],validMoves:[],winner:null}},rM=(s,e)=>{const t=s.board;if(e==="white"){if(s.bar.white>0)return!1;for(let r=0;r<18;r++)if(t[r]>0)return!1;return!0}else{if(s.bar.black>0)return!1;for(let r=6;r<24;r++)if(t[r]<0)return!1;return!0}},Zg=s=>{if(s.winner)return[];const e=o=>{const u=[],{turn:c,board:m,bar:g,movesLeft:p}=o,v=Array.from(new Set(p));if(p.length===0)return[];const E=c==="white",w=E?1:-1;if((E?g.white:g.black)>0){for(const k of v){const j=E?k-1:24-k,D=m[j];(E?D<-1:D>1)||u.push({from:"bar",to:j,roll:k,isHit:E?D===-1:D===1})}return u}for(let k=0;k<24;k++){const j=m[k];if(!(E&&j<=0)&&!(!E&&j>=0))for(const D of v){const F=k+w*D;if(rM(o,c)){if(E&&F===24){u.push({from:k,to:"off",roll:D});continue}if(!E&&F===-1){u.push({from:k,to:"off",roll:D});continue}if(E&&F>24){let ie=!0;for(let W=18;W<k;W++)m[W]>0&&(ie=!1);ie&&u.push({from:k,to:"off",roll:D})}if(!E&&F<-1){let ie=!0;for(let W=5;W>k;W--)m[W]<0&&(ie=!1);ie&&u.push({from:k,to:"off",roll:D})}}if(F<0||F>23)continue;const Z=m[F];(E?Z<-1:Z>1)||u.push({from:k,to:F,roll:D,isHit:E?Z===-1:Z===1})}}return u},t=e(s),r=[...t];if(s.movesLeft.length>1)for(const o of t){const u=cc(s,o),c=e(u);if(o.to!=="off"){const m=c.filter(g=>g.from===o.to);for(const g of m)r.push({from:o.from,to:g.to,roll:o.roll+g.roll,isHit:g.isHit,subMoves:[o,g]})}}return r},cc=(s,e)=>{const t={...s,board:[...s.board],bar:{...s.bar},off:{...s.off},movesLeft:[...s.movesLeft]},r=s.turn==="white";if(e.subMoves&&e.subMoves.length>0){let u=s;for(const c of e.subMoves)u=cc(u,c);return u}if(e.from==="bar"?r?t.bar.white--:t.bar.black--:t.board[e.from]-=r?1:-1,e.to==="off")r?t.off.white++:t.off.black++;else{const u=e.to;e.isHit&&(r?t.bar.black++:t.bar.white++,t.board[u]=0),t.board[u]+=r?1:-1}const o=t.movesLeft.indexOf(e.roll);return o>-1&&t.movesLeft.splice(o,1),r&&t.off.white===15&&(t.winner="white"),!r&&t.off.black===15&&(t.winner="black"),t},aM=()=>Math.random().toString(36).substring(2,8).toUpperCase(),zw=s=>{const[e,t]=q.useState(null),[r,o]=q.useState(null),[u,c]=q.useState(!0),[m,g]=q.useState(!0);q.useEffect(()=>{const D=qu();Bu(D).then(F=>{o(F.user.uid)}).catch(F=>{console.error("Auth failed",F)}).finally(()=>g(!1))},[]);const p=async()=>{if(r)return r;const D=qu(),F=await Bu(D);return o(F.user.uid),F.user.uid};return q.useEffect(()=>{if(!On||!$e){c(!1);return}if(!s){t(null),c(!1);return}c(!0);const D=Jn(Xn($e,"rooms_bg"),s),F=Fp(D,ne=>{ne.exists()?t(ne.data()):t(null),c(!1)},ne=>{console.error("Room subscription error",ne),t(null),c(!1)});return()=>F()},[s]),{room:e,userId:r,loading:u,isAuthLoading:m,createRoom:async()=>{if(!On||!$e)throw new Error("Firebase not configured");const D=await p(),F=aM(),ne=Jn(Xn($e,"rooms_bg"),F),Z=Du(),ce={board:Z.board,bar:Z.bar,off:Z.off,turn:Z.turn,dice:Z.dice,movesLeft:Z.movesLeft,whitePlayer:D,blackPlayer:"",winner:"",status:"active"};return await Hp(ne,ce),F},joinRoom:async D=>{if(!On||!$e)throw new Error("Firebase not configured");const F=await p(),ne=Jn(Xn($e,"rooms_bg"),D);await Au($e,async Z=>{const ce=await Z.get(ne);if(!ce.exists())throw new Error("Room not found");const W={...ce.data()};W.whitePlayer?!W.blackPlayer&&W.whitePlayer!==F&&(W.blackPlayer=F):W.whitePlayer=F,Z.update(ne,W)})},updateGameState:async D=>{if(!On||!$e||!s)return;const F=Jn(Xn($e,"rooms_bg"),s);let ne="active",Z="";D.winner&&(ne="finished",Z=D.winner),await Su(F,{board:D.board,bar:D.bar,off:D.off,turn:D.turn,dice:D.dice,movesLeft:D.movesLeft,winner:Z,status:ne})},resignGame:async D=>{if(!On||!$e||!s)return;const F=Jn(Xn($e,"rooms_bg"),s);await Su(F,{status:"resigned",winner:D==="white"?"black":"white"})},resetGame:async()=>{if(!On||!$e||!s)return;const D=Du(),F=Jn(Xn($e,"rooms_bg"),s);await Su(F,{board:D.board,bar:D.bar,off:D.off,turn:D.turn,dice:D.dice,movesLeft:D.movesLeft,status:"active",winner:""})},leaveRoom:async()=>{if(!(!On||!$e)&&s)try{const D=await p(),F=Jn(Xn($e,"rooms_bg"),s);await Au($e,async ne=>{const Z=await ne.get(F);if(!Z.exists())return;const ie={...Z.data()};ie.whitePlayer===D?ie.whitePlayer="":ie.blackPlayer===D&&(ie.blackPlayer=""),ne.update(F,ie)})}catch(D){console.error("Error leaving room:",D)}}}},Bw=({color:s,style:e,className:t=""})=>{const r=s==="white"?"bg-slate-200 shadow-[inset_0_-4px_4px_rgba(0,0,0,0.2),0_4px_6px_rgba(0,0,0,0.3)] border-slate-300":"bg-slate-900 shadow-[inset_0_-4px_4px_rgba(0,0,0,0.5),0_4px_6px_rgba(0,0,0,0.4)] border-slate-700",o=s==="white"?"border-slate-300":"border-slate-700";return S.jsx("div",{style:e,className:`w-full h-full rounded-full border-4 ${r} relative flex items-center justify-center ${t}`,children:S.jsx("div",{className:`w-[70%] h-[70%] rounded-full border-2 ${o} opacity-30`})})},Wg=({id:s,color:e,isDraggable:t=!1,style:r})=>{const{attributes:o,listeners:u,setNodeRef:c,isDragging:m}=Uw({id:s,disabled:!t}),g={opacity:m?0:1,touchAction:"none",...r};return S.jsx("div",{ref:c,style:g,...u,...o,className:"w-full aspect-square relative cursor-grab active:cursor-grabbing",children:S.jsx(Bw,{color:e})})},oM=({index:s,count:e,isTop:t,isHighlighted:r,playerColor:o,canDragFrom:u,isHitTarget:c})=>{const{setNodeRef:m,isOver:g}=u0({id:s.toString()}),p=s%2===1,v=g||r?"bg-indigo-500/20 ring-2 ring-indigo-400/50":"",E=[],w=Math.abs(e),I=e>0?"white":"black";for(let k=0;k<w;k++){const j=k===w-1,D=u&&j&&I===o;E.push(S.jsx("div",{className:"w-[80%] max-w-[40px] -my-1 z-10 relative",children:S.jsx(Wg,{id:`checker-${s}-${k}`,color:I,isDraggable:D})},`${s}-${k}`))}return S.jsxs("div",{ref:m,className:`relative flex-1 h-full flex ${t?"flex-col items-center justify-start":"flex-col-reverse items-center justify-start"} ${v} transition-colors rounded-sm`,children:[S.jsx("div",{className:"absolute inset-0 pointer-events-none w-full h-full opacity-60",style:{clipPath:t?"polygon(0 0, 50% 100%, 100% 0)":"polygon(0 100%, 50% 0, 100% 100%)",backgroundColor:p?"#334155":"#818cf8",opacity:p?.4:.15}}),S.jsx("div",{className:`z-10 w-full h-full flex ${t?"flex-col pt-2":"flex-col-reverse pb-2"} items-center`,children:E}),c&&S.jsxs("div",{className:`absolute ${t?"top-6":"bottom-6"} left-1/2 -translate-x-1/2 z-50 pointer-events-none`,children:[S.jsx("style",{children:`
                        @keyframes shatter-left {
                            0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
                            100% { transform: translate(-20px, -10px) rotate(-15deg); opacity: 0; }
                        }
                        @keyframes shatter-right {
                            0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
                            100% { transform: translate(20px, -10px) rotate(15deg); opacity: 0; }
                        }
                        @keyframes impact-flash {
                            0% { transform: scale(0.5); opacity: 0; }
                            10% { transform: scale(1.2); opacity: 1; }
                            100% { transform: scale(0); opacity: 0; }
                        }
                        `}),S.jsx("div",{className:"relative w-10 h-10 md:w-12 md:h-12",children:(()=>{const k=e>0?"black":"white",j=k==="white"?"bg-slate-200 border-slate-300 shadow-sm":"bg-slate-900 border-slate-700 shadow-xl",D=k==="white"?"border-slate-300":"border-slate-700";return S.jsxs(S.Fragment,{children:[S.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${j} overflow-hidden`,style:{clipPath:"polygon(0% 0%, 55% 0%, 45% 100%, 0% 100%)",animation:"shatter-left 0.6s ease-out forwards"},children:S.jsx("div",{className:`absolute inset-2 rounded-full border-2 ${D} opacity-30`})}),S.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${j} overflow-hidden`,style:{clipPath:"polygon(55% 0%, 100% 0%, 100% 100%, 45% 100%)",animation:"shatter-right 0.6s ease-out forwards"},children:S.jsx("div",{className:`absolute inset-2 rounded-full border-2 ${D} opacity-30`})}),S.jsx("div",{className:"absolute inset-0 bg-white rounded-full mix-blend-overlay",style:{animation:"impact-flash 0.4s ease-out forwards"}})]})})()})]}),S.jsx("span",{className:`absolute ${t?"top-0":"bottom-0"} text-[8px] text-slate-600 font-mono opacity-50`,children:s+1})]})},lM=({gameState:s,playerColor:e,onMove:t,validMoves:r})=>{const{board:o,bar:u,off:c,turn:m}=s,[g,p]=q.useState(null),[v,E]=q.useState([]),[w,I]=q.useState(null),k=bw(Ru(a0,{activationConstraint:{distance:8}}),Ru(o0,{activationConstraint:{delay:100,tolerance:5}})),j=Z=>{const{active:ce}=Z,ie=ce.id;let W=-1;if(ie.startsWith("bar"))W="bar";else if(ie.startsWith("checker-")){const C=ie.split("-");W=parseInt(C[1])}else W=parseInt(ie);p(ie);const R=r.filter(C=>W==="bar"?C.from==="bar":C.from===W).map(C=>C.to==="off"?99:C.to);E(R)},D=at.useRef(s.board);at.useEffect(()=>{const Z=D.current,ce=s.board;for(let ie=0;ie<24;ie++){const W=Z[ie],x=ce[ie];W===-1&&x>=1&&(I(ie),setTimeout(()=>I(null),800)),W===1&&x<=-1&&(I(ie),setTimeout(()=>I(null),800))}D.current=s.board},[s.board]);const F=Z=>{const{active:ce,over:ie}=Z;if(p(null),E([]),!ie)return;const W=ce.id;let x=-1;if(W.startsWith("bar"))x="bar";else if(W.startsWith("checker-")){const V=W.split("-");x=parseInt(V[1])}else x=parseInt(W);let R=-1;ie.id==="off"?R="off":R=parseInt(ie.id);const C=r.find(V=>V.from===x&&V.to===R);if(C){const V=cc(s,C);t(V)}},ne=(Z,ce,ie)=>{const W=[];if(Z<ce)for(let x=Z;x<=ce;x++)W.push(x);else for(let x=Z;x>=ce;x--)W.push(x);return S.jsx("div",{className:`flex-1 flex ${ie?"border-b-2":"border-t-2"} border-slate-700/30`,children:W.map(x=>S.jsx(oM,{index:x,count:o[x],isTop:ie,isHighlighted:v.includes(x),playerColor:e,canDragFrom:e===m&&(e==="white"&&u.white===0||e==="black"&&u.black===0),isHitTarget:w===x},x))})};return S.jsxs(Lw,{sensors:k,onDragStart:j,onDragEnd:F,children:[S.jsxs("div",{className:"flex flex-col md:flex-row w-full max-w-full md:max-w-7xl mx-auto gap-2 md:gap-4 items-stretch p-1 md:p-4",children:[S.jsxs("div",{className:"relative flex-1 aspect-square md:aspect-[4/3] bg-slate-800/80 rounded-xl border-4 md:border-[12px] border-slate-900 shadow-2xl flex flex-col overflow-hidden",children:[S.jsxs("div",{className:"flex-1 flex",children:[ne(e==="white"?11:12,e==="white"?6:17,!0),S.jsxs("div",{className:"w-12 md:w-20 bg-slate-900/50 border-x-4 border-slate-900 flex flex-col items-center justify-center gap-1 py-2",children:[Array.from({length:u.white}).map((Z,ce)=>S.jsx("div",{className:"w-10 md:w-12",children:S.jsx(Wg,{id:`bar-white-${ce}`,color:"white",isDraggable:e==="white"&&m==="white"&&ce===u.white-1})},`bar-w-${ce}`)),Array.from({length:u.black}).map((Z,ce)=>S.jsx("div",{className:"w-10 md:w-12",children:S.jsx(Wg,{id:`bar-black-${ce}`,color:"black",isDraggable:e==="black"&&m==="black"&&ce===u.black-1})},`bar-b-${ce}`))]}),ne(e==="white"?5:18,e==="white"?0:23,!0)]}),S.jsxs("div",{className:"flex-1 flex",children:[ne(e==="white"?12:11,e==="white"?17:6,!1),S.jsx("div",{className:"w-12 md:w-20 bg-slate-900/50 border-x-4 border-slate-900 flex flex-col-reverse items-center justify-start gap-1 py-2"}),ne(e==="white"?18:5,e==="white"?23:0,!1)]}),S.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center z-50",children:S.jsx("div",{className:"flex gap-3",children:s.movesLeft.map((Z,ce)=>S.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 rounded-lg shadow-xl flex items-center justify-center text-lg md:text-xl font-black border-2 animate-in zoom-in spin-in-3 duration-300 ${m==="white"?"bg-white text-slate-900 border-slate-200":"bg-slate-900 text-white border-slate-700"}`,children:Z},`${m}-${ce}-${Z}`))})})]}),S.jsxs("div",{className:"w-full h-20 md:w-32 md:h-auto bg-slate-900/40 rounded-xl border-4 border-slate-800 flex flex-row md:flex-col relative overflow-hidden shrink-0",children:[S.jsx("div",{className:"absolute inset-y-0 left-1/2 -translate-x-1/2 w-[2px] bg-slate-800/50 hidden md:block"}),S.jsx("div",{className:"absolute inset-x-0 top-1/2 -translate-y-1/2 h-[2px] bg-slate-800/50 md:hidden"}),S.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 md:-rotate-90 text-slate-700 font-bold text-xs md:text-sm tracking-[0.5em] pointer-events-none whitespace-nowrap opacity-50 z-0",children:"COLLECT"}),S.jsx("div",{className:"flex-1 w-full p-2 flex flex-col gap-1 z-10 border-r md:border-r-0 md:border-b border-slate-800/50",children:S.jsx(jE,{playerColor:"white",count:c.white,isTop:!0})}),S.jsx("div",{className:"flex-1 w-full p-2 flex flex-col-reverse gap-1 z-10",children:S.jsx(jE,{playerColor:"black",count:c.black,isTop:!1})}),S.jsx("div",{className:`absolute inset-0 z-20 ${g?"pointer-events-auto":"pointer-events-none"}`,children:S.jsx(uM,{isHighlighted:v.includes(99)})})]})]}),S.jsx($O,{children:g?S.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 cursor-grabbing",children:S.jsx(Bw,{color:(function(){if(g.startsWith("bar-white"))return"white";if(g.startsWith("bar-black"))return"black";if(g.startsWith("checker-")){const Z=g.split("-"),ce=parseInt(Z[1]);return o[ce]>0?"white":"black"}return"white"})()})}):null})]})},uM=({isHighlighted:s})=>{const{setNodeRef:e,isOver:t}=u0({id:"off"}),r=t||s;return S.jsx("div",{ref:e,className:`w-full h-full flex items-center justify-center transition-all duration-300 ${r?"bg-indigo-500/30 backdrop-blur-sm border-2 border-dashed border-indigo-400":""}`,children:r&&S.jsx("div",{className:"text-indigo-200 font-bold text-xs rotate-90 whitespace-nowrap animate-pulse",children:"COLLECT"})})},jE=({playerColor:s,count:e,isTop:t})=>S.jsxs("div",{className:`w-full flex ${t?"flex-col":"flex-col-reverse"} gap-[2px] transition-colors rounded-lg p-1`,children:[e>0&&S.jsx("div",{className:`text-[10px] text-center mb-1 font-bold ${s==="white"?"text-slate-400":"text-slate-600"}`,children:e}),Array.from({length:Math.min(e,15)}).map((r,o)=>S.jsx("div",{className:`h-2 w-full rounded-sm opacity-80 ${s==="white"?"bg-slate-200 shadow-sm":"bg-slate-900 border border-slate-700 shadow-sm"}`},o))]}),cM=(s,e="Normal")=>{const t=Zg(s);if(t.length===0)return null;if(e==="Easy"){const u=Math.floor(Math.random()*t.length);return t[u]}let r=t[0],o=-1/0;for(const u of t){const c=hM(s,u,e);c>o&&(o=c,r=u)}return r},hM=(s,e,t)=>{let r=0;e.isHit&&(r+=100),e.to==="off"&&(r+=200);const o=cc({...s},e),u=s.turn==="white";if(typeof e.to=="number"){const c=o.board[e.to];u&&c===2&&(r+=50),!u&&c===-2&&(r+=50)}if(typeof e.to=="number"){const c=o.board[e.to];Math.abs(c)===1&&(r-=30)}if(typeof e.from=="number"){const c=o.board[e.from];Math.abs(c)===1&&(r-=40)}return t==="Hard"&&typeof e.to=="number"&&(u?e.to>=18:e.to<=5)&&Math.abs(o.board[e.to])>1&&(r+=30),r+=Math.random()*5,r},fM=({roomId:s="",mode:e="online",aiDifficulty:t="Normal",onExit:r})=>{const o=zw(e==="online"?s:null),[u,c]=q.useState(()=>Du()),[m,g]=q.useState(null),p=e==="local",v=at.useMemo(()=>p?u:m||(o.room?{...o.room,validMoves:[]}:null),[p,u,o.room,m]);q.useEffect(()=>{if(!o.room||!m)return;const ie=o.room.turn===m.turn,W=JSON.stringify(o.room.board)===JSON.stringify(m.board),x=o.room.movesLeft.length===m.movesLeft.length;ie&&W&&x?g(null):ie||g(null)},[o.room,m]);const E=at.useMemo(()=>v?Zg(v):[],[v]),w=p?v?.turn==="white"?"local-white":"local-black":o.userId,I=p||o.room?.whitePlayer===w?"white":"black",k=I===v?.turn;q.useEffect(()=>{!p&&s&&o.joinRoom&&o.joinRoom(s)},[s,p]);const j=()=>{navigator.clipboard.writeText(s),alert("Room ID copied to clipboard!")},D=o.room?.whitePlayer===w||p,F=o.room?.blackPlayer===w,ne=!!v?.winner,Z=ie=>{let W={...ie};W.movesLeft.length===0?(W.turn=W.turn==="white"?"black":"white",W.dice=pu(),W.movesLeft=[...W.dice]):Zg(W).length===0&&(W.turn=W.turn==="white"?"black":"white",W.dice=pu(),W.movesLeft=[...W.dice]),p?c(W):(g(W),o.updateGameState(W))};if(q.useEffect(()=>{if(v&&v.movesLeft.length>0&&E.length===0&&!v.winner){const ie=setTimeout(()=>{let W={...v};W.turn=W.turn==="white"?"black":"white",W.dice=pu(),W.movesLeft=[...W.dice],p?c(W):(g(W),o.updateGameState(W))},1500);return()=>clearTimeout(ie)}},[v?.movesLeft,E.length,v?.winner,v?.turn,p,v]),q.useEffect(()=>{if(v&&p&&v.turn==="black"&&!v.winner){const ie=setTimeout(()=>{const W=cM(v,t);if(W){const x=cc(v,W);Z(x)}else{let x={...v};x.turn="white",x.dice=pu(),x.movesLeft=[...x.dice],c(x)}},800);return()=>clearTimeout(ie)}},[v,p,t]),!p&&o.loading)return S.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-6 animate-pulse",children:[S.jsx("div",{className:"relative shadow-2xl shadow-indigo-500/20 rounded-full p-4",children:S.jsx(FE,{className:"w-16 h-16 text-indigo-500 animate-spin"})}),S.jsxs("div",{className:"text-center space-y-2",children:[S.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest",children:"Entering Arena"}),S.jsx("p",{className:"text-slate-500 font-medium",children:"Synchronizing with the global lattice..."})]})]});if(!v)return S.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[S.jsxs("div",{className:"text-center space-y-4",children:[S.jsx("h2",{className:"text-5xl font-black text-white italic",children:"Room Dissolved"}),S.jsx("p",{className:"text-slate-400 text-lg",children:"The arena you seek no longer exists or the link is expired."})]}),S.jsx("button",{onClick:r,className:"btn-premium px-10 py-4 text-xl",children:"Return to Lobby"})]});const ce=v.winner?`${v.winner==="white"?"White":"Black"} Wins!`:k?"Your Turn":"Waiting...";return S.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center gap-8 lg:gap-12 py-6 lg:py-10 w-full animate-in fade-in duration-700",children:[S.jsxs("header",{className:"w-full max-w-6xl flex items-center justify-between px-4 lg:px-6",children:[S.jsxs("button",{onClick:()=>{!p&&o.leaveRoom&&o.leaveRoom(),r()},className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all font-bold uppercase tracking-widest text-xs",children:[S.jsx("div",{className:"p-2 rounded-xl bg-slate-900 border border-slate-800 group-hover:border-slate-700 group-hover:-translate-x-1 transition-transform",children:S.jsx(yu,{size:18})}),"Back"]}),!p&&S.jsx("div",{className:"flex items-center gap-4",children:S.jsxs("div",{className:"liquid-glass px-6 py-3 flex items-center gap-6",children:[S.jsxs("div",{className:"flex flex-col gap-0.5",children:[S.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-slate-500 font-black",children:"Arena ID"}),S.jsx("code",{className:"text-indigo-300 font-mono font-bold",children:s})]}),S.jsx("div",{className:"h-8 w-px bg-slate-800"}),S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("button",{onClick:j,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:S.jsx(qE,{size:18})}),S.jsx("button",{className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:S.jsx(GE,{size:18})})]})]})}),p&&S.jsx("div",{className:"px-6 py-3 liquid-glass text-indigo-300 font-bold uppercase tracking-widest text-xs",children:"Single Player Mode"})]}),S.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-6 lg:gap-16 w-full max-w-7xl px-0 lg:px-6",children:[S.jsxs("div",{className:"relative group w-full flex justify-center max-w-full overflow-visible",children:[S.jsx("div",{className:"absolute -inset-4 bg-linear-to-r from-indigo-500 to-pink-500 rounded-[2.5rem] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"}),S.jsx(lM,{gameState:v,playerColor:I,onMove:Z,onRollDice:()=>{},validMoves:E}),ne&&S.jsx(mM,{winner:v.winner,playerColor:I,onRematch:()=>{const ie=Du();g(null),p?c(ie):o.resetGame()},onExit:()=>{!p&&o.leaveRoom&&o.leaveRoom(),r()}})]}),S.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-3 lg:gap-8 mt-0 lg:mt-0",children:[S.jsxs("div",{className:"liquid-glass p-3 lg:p-8 space-y-3 lg:space-y-8 border-l-4 border-l-indigo-500",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:"Game Status"}),S.jsxs("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-2 ${v.winner?"bg-indigo-500/10 text-indigo-300 border border-indigo-500/30":k?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-slate-800 text-slate-500"}`,children:[S.jsx("span",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${v.winner?"bg-indigo-400":"bg-green-500"}`}),p?v.turn==="white"?" White Turn":" Black Turn":ce]})]}),ne&&S.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/10 border border-indigo-500/30 text-indigo-100 text-sm lg:text-base font-bold",children:ce}),S.jsxs("div",{className:"space-y-2 lg:space-y-4",children:[S.jsx(dM,{gameState:v}),!p&&S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"flex items-center gap-2 lg:gap-4 p-2 lg:p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[S.jsx("div",{className:`w-8 h-8 lg:w-12 lg:h-12 rounded-xl flex items-center justify-center text-lg lg:text-xl font-bold ${D?"bg-white text-slate-950":"bg-slate-800 text-slate-400"}`,children:"W"}),S.jsxs("div",{className:"flex-1",children:[S.jsx("div",{className:"text-xs lg:text-sm font-bold text-white uppercase tracking-wide",children:"White Player"}),S.jsx("div",{className:"text-[10px] lg:text-xs text-slate-500 font-medium",children:o.room?.whitePlayer===w?"Connected (You)":o.room?.whitePlayer?"Opponent Ready":"Awaiting Entry..."})]})]}),S.jsxs("div",{className:"flex items-center gap-2 lg:gap-4 p-2 lg:p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[S.jsx("div",{className:`w-8 h-8 lg:w-12 lg:h-12 rounded-xl flex items-center justify-center text-lg lg:text-xl font-bold ${F?"bg-indigo-500 text-white":"bg-slate-800 text-slate-400"}`,children:"B"}),S.jsxs("div",{className:"flex-1",children:[S.jsx("div",{className:"text-xs lg:text-sm font-bold text-white uppercase tracking-wide",children:"Black Player"}),S.jsx("div",{className:"text-[10px] lg:text-xs text-slate-500 font-medium",children:o.room?.blackPlayer===w?"Connected (You)":o.room?.blackPlayer?"Opponent Ready":"Awaiting Entry..."})]})]})]})]}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 lg:gap-3",children:[S.jsxs("button",{disabled:ne,onClick:()=>{if(p){const ie={...v};ie.winner=I==="white"?"black":"white",c(ie)}else o.resignGame(I)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 lg:px-4 lg:py-3 rounded-xl border border-slate-800 bg-slate-900/60 text-slate-200 text-sm lg:text-base font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:border-red-500/50 hover:text-red-200 transition",children:[S.jsx(HE,{size:16,className:"lg:w-[18px] lg:h-[18px]"}),"Resign"]}),S.jsxs("button",{disabled:!ne&&!p,onClick:()=>{const ie=Du();g(null),p?c(ie):o.resetGame()},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 lg:px-4 lg:py-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 text-indigo-100 text-sm lg:text-base font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:bg-indigo-500/20 transition",children:[S.jsx(tp,{size:16,className:"lg:w-[18px] lg:h-[18px]"}),"Rematch"]})]})]}),!p&&S.jsxs("div",{className:"hidden lg:grid grid-cols-2 gap-4",children:[S.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[S.jsx(np,{size:20,className:"mx-auto text-slate-600"}),S.jsx("div",{className:"text-xl font-black text-white italic",children:o.room?.whitePlayer&&o.room?.blackPlayer?"2/2":o.room?.whitePlayer||o.room?.blackPlayer?"1/2":"0/2"}),S.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Connected"})]}),S.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[S.jsx(KE,{size:20,className:"mx-auto text-indigo-400"}),S.jsx("div",{className:"text-xl font-black text-white italic",children:"24ms"}),S.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Latency"})]})]})]})]}),S.jsx("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10",children:"Transparent Strategy Arena"})]})},dM=({gameState:s})=>{const[e,t]=q.useState(0),[r,o]=q.useState(0),[u,c]=q.useState(0),m=at.useRef(s?.winner);q.useEffect(()=>{m.current&&!s?.winner&&(t(0),o(0),c(0)),m.current=s?.winner},[s?.winner]),q.useEffect(()=>{if(!s||s.winner)return;const p=window.setInterval(()=>{t(v=>v+1),o(v=>v+(s.turn==="white"?1:0)),c(v=>v+(s.turn==="black"?1:0))},1e3);return()=>window.clearInterval(p)},[s?.turn,s?.winner]);const g=p=>{const v=Math.floor(p/60).toString().padStart(2,"0"),E=(p%60).toString().padStart(2,"0");return`${v}:${E}`};return S.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-3 p-2 md:p-4 rounded-2xl bg-slate-900/60 border border-slate-800/80 text-[10px] lg:text-xs font-bold uppercase tracking-widest",children:[S.jsxs("div",{className:"space-y-1",children:[S.jsx("div",{className:"text-slate-500",children:"Time"}),S.jsx("div",{className:"text-white text-base",children:g(e)})]}),S.jsxs("div",{className:"space-y-1",children:[S.jsx("div",{className:"text-slate-500",children:"White"}),S.jsx("div",{className:"text-emerald-300 text-base",children:g(r)})]}),S.jsxs("div",{className:"space-y-1",children:[S.jsx("div",{className:"text-slate-500",children:"Black"}),S.jsx("div",{className:"text-sky-300 text-base",children:g(u)})]})]})},mM=({winner:s,playerColor:e,onRematch:t,onExit:r})=>{const o=s===e;return S.jsxs("div",{className:"absolute inset-0 z-50 rounded-[2rem] bg-slate-900/80 backdrop-blur-md flex flex-col items-center justify-center p-6 text-center animate-in fade-in zoom-in duration-500",children:[S.jsx("div",{className:`p-6 rounded-full mb-6 ${o?"bg-amber-500/20 text-amber-400 shadow-[0_0_50px_-12px_rgba(245,158,11,0.5)]":"bg-red-500/20 text-red-400 shadow-[0_0_50px_-12px_rgba(239,68,68,0.5)]"}`,children:o?S.jsx(bg,{size:64,className:"animate-bounce"}):S.jsx(PA,{size:64})}),S.jsx("h2",{className:`text-4xl md:text-5xl font-black uppercase tracking-widest mb-2 ${o?"text-transparent bg-clip-text bg-linear-to-b from-amber-300 to-amber-600":"text-slate-200"}`,children:o?"Victory!":"Defeat"}),S.jsx("p",{className:"text-slate-400 font-bold text-lg mb-8 uppercase tracking-widest",children:o?"You conquered the board.":"Better luck next time."}),S.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[S.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center gap-3 px-6 py-4 rounded-xl bg-indigo-500 hover:bg-indigo-400 text-white font-black uppercase tracking-widest transition-all hover:scale-105 active:scale-95 shadow-lg shadow-indigo-500/30",children:[S.jsx(tp,{size:20}),"Rematch"]}),S.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center gap-3 px-6 py-4 rounded-xl bg-slate-800 hover:bg-slate-700 text-slate-300 font-bold uppercase tracking-widest transition-all hover:scale-105 active:scale-95",children:[S.jsx(zA,{size:20}),"Return to Lobby"]})]})]})};function gM(){const[s,e]=q.useState("menu"),[t,r]=q.useState("chess"),[o,u]=q.useState(null),[c,m]=q.useState("Normal"),g=jw(null),p=zw(null),v=t==="chess"?g.isAuthLoading:p.isAuthLoading,E=async()=>{try{const D=t==="chess"?await g.createRoom():await p.createRoom();D&&(u(D),e("online"))}catch(D){console.error("Failed to create room:",D)}},w=async D=>{if(D.trim())try{t==="chess"?await g.joinRoom(D):await p.joinRoom(D),u(D),e("online")}catch(F){console.error("Failed to join room:",F),alert("Room not found or could not join")}},I=D=>{r(D)},k=D=>{m(D),e("local"),u(null)},j=()=>{u(null),e("menu")};return S.jsxs("main",{className:"relative min-h-screen w-full flex flex-col items-center overflow-x-hidden",children:[S.jsx(CA,{}),S.jsx("div",{className:"container mx-auto px-4 py-8 max-w-7xl w-full overflow-visible",children:s!=="menu"?t==="chess"?S.jsx(iM,{roomId:o||"",mode:s==="online"?"online":"local",aiDifficulty:c,onExit:j}):S.jsx(fM,{roomId:o||"",mode:s==="online"?"online":"local",aiDifficulty:c,onExit:j}):S.jsx(WD,{onCreateRoom:E,onJoinRoom:w,onStartLocal:k,isAuthLoading:v,onSelectGame:I})}),S.jsx("footer",{className:"mt-auto py-8 text-slate-500 text-sm",children:"DragMate  Premium Multiplayer Board Gaming"})]})}RA.createRoot(document.getElementById("root")).render(S.jsx(q.StrictMode,{children:S.jsx(gM,{})}));
