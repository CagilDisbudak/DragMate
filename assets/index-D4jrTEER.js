(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function _A(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Hm={exports:{}},ou={};var Cv;function vA(){if(Cv)return ou;Cv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:c,ref:o!==void 0?o:null,props:u}}return ou.Fragment=e,ou.jsx=t,ou.jsxs=t,ou}var Iv;function bA(){return Iv||(Iv=1,Hm.exports=vA()),Hm.exports}var A=bA(),Fm={exports:{}},Pe={};var Nv;function EA(){if(Nv)return Pe;Nv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),w=Symbol.iterator;function C(V){return V===null||typeof V!="object"?null:(V=w&&V[w]||V["@@iterator"],typeof V=="function"?V:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,D={};function B(V,ne,me){this.props=V,this.context=ne,this.refs=D,this.updater=me||L}B.prototype.isReactComponent={},B.prototype.setState=function(V,ne){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ne,"setState")},B.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function J(){}J.prototype=B.prototype;function te(V,ne,me){this.props=V,this.context=ne,this.refs=D,this.updater=me||L}var fe=te.prototype=new J;fe.constructor=te,z(fe,B.prototype),fe.isPureReactComponent=!0;var ue=Array.isArray;function ie(){}var R={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function I(V,ne,me){var de=me.ref;return{$$typeof:r,type:V,key:ne,ref:de!==void 0?de:null,props:me}}function k(V,ne){return I(V.type,ne,V.props)}function M(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function U(V){var ne={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(me){return ne[me]})}var N=/\/+/g;function qe(V,ne){return typeof V=="object"&&V!==null&&V.key!=null?U(""+V.key):ne.toString(36)}function dt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(ie,ie):(V.status="pending",V.then(function(ne){V.status==="pending"&&(V.status="fulfilled",V.value=ne)},function(ne){V.status==="pending"&&(V.status="rejected",V.reason=ne)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function ee(V,ne,me,de,_e){var Ae=typeof V;(Ae==="undefined"||Ae==="boolean")&&(V=null);var Le=!1;if(V===null)Le=!0;else switch(Ae){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(V.$$typeof){case r:case e:Le=!0;break;case v:return Le=V._init,ee(Le(V._payload),ne,me,de,_e)}}if(Le)return _e=_e(V),Le=de===""?"."+qe(V,0):de,ue(_e)?(me="",Le!=null&&(me=Le.replace(N,"$&/")+"/"),ee(_e,ne,me,"",function(Ht){return Ht})):_e!=null&&(M(_e)&&(_e=k(_e,me+(_e.key==null||V&&V.key===_e.key?"":(""+_e.key).replace(N,"$&/")+"/")+Le)),ne.push(_e)),1;Le=0;var Dt=de===""?".":de+":";if(ue(V))for(var lt=0;lt<V.length;lt++)de=V[lt],Ae=Dt+qe(de,lt),Le+=ee(de,ne,me,Ae,_e);else if(lt=C(V),typeof lt=="function")for(V=lt.call(V),lt=0;!(de=V.next()).done;)de=de.value,Ae=Dt+qe(de,lt++),Le+=ee(de,ne,me,Ae,_e);else if(Ae==="object"){if(typeof V.then=="function")return ee(dt(V),ne,me,de,_e);throw ne=String(V),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Le}function ce(V,ne,me){if(V==null)return V;var de=[],_e=0;return ee(V,de,"","",function(Ae){return ne.call(me,Ae,_e++)}),de}function be(V){if(V._status===-1){var ne=V._result;ne=ne(),ne.then(function(me){(V._status===0||V._status===-1)&&(V._status=1,V._result=me)},function(me){(V._status===0||V._status===-1)&&(V._status=2,V._result=me)}),V._status===-1&&(V._status=0,V._result=ne)}if(V._status===1)return V._result.default;throw V._result}var Me=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},ze={map:ce,forEach:function(V,ne,me){ce(V,function(){ne.apply(this,arguments)},me)},count:function(V){var ne=0;return ce(V,function(){ne++}),ne},toArray:function(V){return ce(V,function(ne){return ne})||[]},only:function(V){if(!M(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Pe.Activity=E,Pe.Children=ze,Pe.Component=B,Pe.Fragment=t,Pe.Profiler=o,Pe.PureComponent=te,Pe.StrictMode=s,Pe.Suspense=g,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(V){return R.H.useMemoCache(V)}},Pe.cache=function(V){return function(){return V.apply(null,arguments)}},Pe.cacheSignal=function(){return null},Pe.cloneElement=function(V,ne,me){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var de=z({},V.props),_e=V.key;if(ne!=null)for(Ae in ne.key!==void 0&&(_e=""+ne.key),ne)!x.call(ne,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&ne.ref===void 0||(de[Ae]=ne[Ae]);var Ae=arguments.length-2;if(Ae===1)de.children=me;else if(1<Ae){for(var Le=Array(Ae),Dt=0;Dt<Ae;Dt++)Le[Dt]=arguments[Dt+2];de.children=Le}return I(V.type,_e,de)},Pe.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},Pe.createElement=function(V,ne,me){var de,_e={},Ae=null;if(ne!=null)for(de in ne.key!==void 0&&(Ae=""+ne.key),ne)x.call(ne,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(_e[de]=ne[de]);var Le=arguments.length-2;if(Le===1)_e.children=me;else if(1<Le){for(var Dt=Array(Le),lt=0;lt<Le;lt++)Dt[lt]=arguments[lt+2];_e.children=Dt}if(V&&V.defaultProps)for(de in Le=V.defaultProps,Le)_e[de]===void 0&&(_e[de]=Le[de]);return I(V,Ae,_e)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(V){return{$$typeof:m,render:V}},Pe.isValidElement=M,Pe.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:be}},Pe.memo=function(V,ne){return{$$typeof:p,type:V,compare:ne===void 0?null:ne}},Pe.startTransition=function(V){var ne=R.T,me={};R.T=me;try{var de=V(),_e=R.S;_e!==null&&_e(me,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(ie,Me)}catch(Ae){Me(Ae)}finally{ne!==null&&me.types!==null&&(ne.types=me.types),R.T=ne}},Pe.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Pe.use=function(V){return R.H.use(V)},Pe.useActionState=function(V,ne,me){return R.H.useActionState(V,ne,me)},Pe.useCallback=function(V,ne){return R.H.useCallback(V,ne)},Pe.useContext=function(V){return R.H.useContext(V)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(V,ne){return R.H.useDeferredValue(V,ne)},Pe.useEffect=function(V,ne){return R.H.useEffect(V,ne)},Pe.useEffectEvent=function(V){return R.H.useEffectEvent(V)},Pe.useId=function(){return R.H.useId()},Pe.useImperativeHandle=function(V,ne,me){return R.H.useImperativeHandle(V,ne,me)},Pe.useInsertionEffect=function(V,ne){return R.H.useInsertionEffect(V,ne)},Pe.useLayoutEffect=function(V,ne){return R.H.useLayoutEffect(V,ne)},Pe.useMemo=function(V,ne){return R.H.useMemo(V,ne)},Pe.useOptimistic=function(V,ne){return R.H.useOptimistic(V,ne)},Pe.useReducer=function(V,ne,me){return R.H.useReducer(V,ne,me)},Pe.useRef=function(V){return R.H.useRef(V)},Pe.useState=function(V){return R.H.useState(V)},Pe.useSyncExternalStore=function(V,ne,me){return R.H.useSyncExternalStore(V,ne,me)},Pe.useTransition=function(){return R.H.useTransition()},Pe.version="19.2.3",Pe}var Dv;function Zg(){return Dv||(Dv=1,Fm.exports=EA()),Fm.exports}var H=Zg();const ct=_A(H);var Gm={exports:{}},lu={},Km={exports:{}},$m={};var Ov;function TA(){return Ov||(Ov=1,(function(r){function e(ee,ce){var be=ee.length;ee.push(ce);e:for(;0<be;){var Me=be-1>>>1,ze=ee[Me];if(0<o(ze,ce))ee[Me]=ce,ee[be]=ze,be=Me;else break e}}function t(ee){return ee.length===0?null:ee[0]}function s(ee){if(ee.length===0)return null;var ce=ee[0],be=ee.pop();if(be!==ce){ee[0]=be;e:for(var Me=0,ze=ee.length,V=ze>>>1;Me<V;){var ne=2*(Me+1)-1,me=ee[ne],de=ne+1,_e=ee[de];if(0>o(me,be))de<ze&&0>o(_e,me)?(ee[Me]=_e,ee[de]=be,Me=de):(ee[Me]=me,ee[ne]=be,Me=ne);else if(de<ze&&0>o(_e,be))ee[Me]=_e,ee[de]=be,Me=de;else break e}}return ce}function o(ee,ce){var be=ee.sortIndex-ce.sortIndex;return be!==0?be:ee.id-ce.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();r.unstable_now=function(){return c.now()-m}}var g=[],p=[],v=1,E=null,w=3,C=!1,L=!1,z=!1,D=!1,B=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function fe(ee){for(var ce=t(p);ce!==null;){if(ce.callback===null)s(p);else if(ce.startTime<=ee)s(p),ce.sortIndex=ce.expirationTime,e(g,ce);else break;ce=t(p)}}function ue(ee){if(z=!1,fe(ee),!L)if(t(g)!==null)L=!0,ie||(ie=!0,U());else{var ce=t(p);ce!==null&&dt(ue,ce.startTime-ee)}}var ie=!1,R=-1,x=5,I=-1;function k(){return D?!0:!(r.unstable_now()-I<x)}function M(){if(D=!1,ie){var ee=r.unstable_now();I=ee;var ce=!0;try{e:{L=!1,z&&(z=!1,J(R),R=-1),C=!0;var be=w;try{t:{for(fe(ee),E=t(g);E!==null&&!(E.expirationTime>ee&&k());){var Me=E.callback;if(typeof Me=="function"){E.callback=null,w=E.priorityLevel;var ze=Me(E.expirationTime<=ee);if(ee=r.unstable_now(),typeof ze=="function"){E.callback=ze,fe(ee),ce=!0;break t}E===t(g)&&s(g),fe(ee)}else s(g);E=t(g)}if(E!==null)ce=!0;else{var V=t(p);V!==null&&dt(ue,V.startTime-ee),ce=!1}}break e}finally{E=null,w=be,C=!1}ce=void 0}}finally{ce?U():ie=!1}}}var U;if(typeof te=="function")U=function(){te(M)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,qe=N.port2;N.port1.onmessage=M,U=function(){qe.postMessage(null)}}else U=function(){B(M,0)};function dt(ee,ce){R=B(function(){ee(r.unstable_now())},ce)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ee){ee.callback=null},r.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<ee?Math.floor(1e3/ee):5},r.unstable_getCurrentPriorityLevel=function(){return w},r.unstable_next=function(ee){switch(w){case 1:case 2:case 3:var ce=3;break;default:ce=w}var be=w;w=ce;try{return ee()}finally{w=be}},r.unstable_requestPaint=function(){D=!0},r.unstable_runWithPriority=function(ee,ce){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var be=w;w=ee;try{return ce()}finally{w=be}},r.unstable_scheduleCallback=function(ee,ce,be){var Me=r.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Me+be:Me):be=Me,ee){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=be+ze,ee={id:v++,callback:ce,priorityLevel:ee,startTime:be,expirationTime:ze,sortIndex:-1},be>Me?(ee.sortIndex=be,e(p,ee),t(g)===null&&ee===t(p)&&(z?(J(R),R=-1):z=!0,dt(ue,be-Me))):(ee.sortIndex=ze,e(g,ee),L||C||(L=!0,ie||(ie=!0,U()))),ee},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(ee){var ce=w;return function(){var be=w;w=ce;try{return ee.apply(this,arguments)}finally{w=be}}}})($m)),$m}var Mv;function wA(){return Mv||(Mv=1,Km.exports=TA()),Km.exports}var Qm={exports:{}},Un={};var kv;function SA(){if(kv)return Un;kv=1;var r=Zg();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:p,implementation:v}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Un.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(g,p,null,v)},Un.flushSync=function(g){var p=c.T,v=s.p;try{if(c.T=null,s.p=2,g)return g()}finally{c.T=p,s.p=v,s.d.f()}},Un.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},Un.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Un.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,E=m(v,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,C=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:w,fetchPriority:C}):v==="script"&&s.d.X(g,{crossOrigin:E,integrity:w,fetchPriority:C,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Un.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=m(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},Un.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=m(v,p.crossOrigin);s.d.L(g,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Un.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=m(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},Un.requestFormReset=function(g){s.d.r(g)},Un.unstable_batchedUpdates=function(g,p){return g(p)},Un.useFormState=function(g,p,v){return c.H.useFormState(g,p,v)},Un.useFormStatus=function(){return c.H.useHostTransitionStatus()},Un.version="19.2.3",Un}var Vv;function jE(){if(Vv)return Qm.exports;Vv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Qm.exports=SA(),Qm.exports}var Pv;function AA(){if(Pv)return lu;Pv=1;var r=wA(),e=Zg(),t=jE();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(s(188))}function p(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(s(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),n;if(d===l)return g(f),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,T=f.child;T;){if(T===a){_=!0,a=f,l=d;break}if(T===l){_=!0,l=f,a=d;break}T=T.sibling}if(!_){for(T=d.child;T;){if(T===a){_=!0,a=d,l=f;break}if(T===l){_=!0,l=d,a=f;break}T=T.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?n:i}function v(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=v(n),i!==null)return i;n=n.sibling}return null}var E=Object.assign,w=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),J=Symbol.for("react.consumer"),te=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var N=Symbol.for("react.client.reference");function qe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===N?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case z:return"Fragment";case B:return"Profiler";case D:return"StrictMode";case ue:return"Suspense";case ie:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case L:return"Portal";case te:return n.displayName||"Context";case J:return(n._context.displayName||"Context")+".Consumer";case fe:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case R:return i=n.displayName||null,i!==null?i:qe(n.type)||"Memo";case x:i=n._payload,n=n._init;try{return qe(n(i))}catch{}}return null}var dt=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},Me=[],ze=-1;function V(n){return{current:n}}function ne(n){0>ze||(n.current=Me[ze],Me[ze]=null,ze--)}function me(n,i){ze++,Me[ze]=n.current,n.current=i}var de=V(null),_e=V(null),Ae=V(null),Le=V(null);function Dt(n,i){switch(me(Ae,i),me(_e,n),me(de,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?J_(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=J_(i),n=Z_(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ne(de),me(de,n)}function lt(){ne(de),ne(_e),ne(Ae)}function Ht(n){n.memoizedState!==null&&me(Le,n);var i=de.current,a=Z_(i,n.type);i!==a&&(me(_e,n),me(de,a))}function wi(n){_e.current===n&&(ne(de),ne(_e)),Le.current===n&&(ne(Le),iu._currentValue=be)}var Vn,qi;function Jt(n){if(Vn===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Vn=i&&i[1]||"",qi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vn+n+qi}var hi=!1;function Pn(n,i){if(!n||hi)return"";hi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(W){var Q=W}Reflect.construct(n,[],oe)}else{try{oe.call()}catch(W){Q=W}n.call(oe.prototype)}}else{try{throw Error()}catch(W){Q=W}(oe=n())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(W){if(W&&Q&&typeof W.stack=="string")return[W.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],T=d[1];if(_&&T){var O=_.split(`
`),K=T.split(`
`);for(f=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;f<K.length&&!K[f].includes("DetermineComponentFrameRoot");)f++;if(l===O.length||f===K.length)for(l=O.length-1,f=K.length-1;1<=l&&0<=f&&O[l]!==K[f];)f--;for(;1<=l&&0<=f;l--,f--)if(O[l]!==K[f]){if(l!==1||f!==1)do if(l--,f--,0>f||O[l]!==K[f]){var re=`
`+O[l].replace(" at new "," at ");return n.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",n.displayName)),re}while(1<=l&&0<=f);break}}}finally{hi=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Jt(a):""}function ar(n,i){switch(n.tag){case 26:case 27:case 5:return Jt(n.type);case 16:return Jt("Lazy");case 13:return n.child!==i&&i!==null?Jt("Suspense Fallback"):Jt("Suspense");case 19:return Jt("SuspenseList");case 0:case 15:return Pn(n.type,!1);case 11:return Pn(n.type.render,!1);case 1:return Pn(n.type,!0);case 31:return Jt("Activity");default:return""}}function Hi(n){try{var i="",a=null;do i+=ar(n,a),a=n,n=n.return;while(n);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var St=Object.prototype.hasOwnProperty,ut=r.unstable_scheduleCallback,Hn=r.unstable_cancelCallback,or=r.unstable_shouldYield,lr=r.unstable_requestPaint,Zt=r.unstable_now,Fi=r.unstable_getCurrentPriorityLevel,Rr=r.unstable_ImmediatePriority,Fn=r.unstable_UserBlockingPriority,Sn=r.unstable_NormalPriority,Gi=r.unstable_LowPriority,Cr=r.unstable_IdlePriority,Gn=r.log,Ir=r.unstable_setDisableYieldValue,Kn=null,Ft=null;function pn(n){if(typeof Gn=="function"&&Ir(n),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(Kn,n)}catch{}}var At=Math.clz32?Math.clz32:ss,Nr=Math.log,Ki=Math.LN2;function ss(n){return n>>>=0,n===0?32:31-(Nr(n)/Ki|0)|0}var ti=256,$i=262144,He=4194304;function xt(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Rt(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?f=xt(l):(_&=T,_!==0?f=xt(_):a||(a=T&~n,a!==0&&(f=xt(a))))):(T=l&~d,T!==0?f=xt(T):_!==0?f=xt(_):a||(a=l&~n,a!==0&&(f=xt(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function Ut(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function yn(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wt(){var n=He;return He<<=1,(He&62914560)===0&&(He=4194304),n}function Vt(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Y(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function mt(n,i,a,l,f,d){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var T=n.entanglements,O=n.expirationTimes,K=n.hiddenUpdates;for(a=_&~a;0<a;){var re=31-At(a),oe=1<<re;T[re]=0,O[re]=-1;var Q=K[re];if(Q!==null)for(K[re]=null,re=0;re<Q.length;re++){var W=Q[re];W!==null&&(W.lane&=-536870913)}a&=~oe}l!==0&&gt(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(_&~i))}function gt(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-At(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function Gt(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-At(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function he(n,i){var a=i&-i;return a=(a&42)!==0?1:cn(a),(a&(n.suspendedLanes|i))!==0?0:a}function cn(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function tt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ot(){var n=ce.p;return n!==0?n:(n=window.event,n===void 0?32:Ev(n.type))}function hn(n,i){var a=ce.p;try{return ce.p=n,i()}finally{ce.p=a}}var pt=Math.random().toString(36).slice(2),Pt="__reactFiber$"+pt,Kt="__reactProps$"+pt,Ee="__reactContainer$"+pt,as="__reactEvents$"+pt,Ja="__reactListeners$"+pt,Za="__reactHandles$"+pt,da="__reactResources$"+pt,Si="__reactMarker$"+pt;function os(n){delete n[Pt],delete n[Kt],delete n[as],delete n[Ja],delete n[Za]}function Ai(n){var i=n[Pt];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Ee]||a[Pt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=sv(n);n!==null;){if(a=n[Pt])return a;n=sv(n)}return i}n=a,a=n.parentNode}return null}function $n(n){if(n=n[Pt]||n[Ee]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function Ln(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function xi(n){var i=n[da];return i||(i=n[da]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function jt(n){n[Si]=!0}var ma=new Set,ls={};function ni(n,i){Ri(n,i),Ri(n+"Capture",i)}function Ri(n,i){for(ls[n]=i,n=0;n<i.length;n++)ma.add(i[n])}var ga=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),us={},pa={};function en(n){return St.call(pa,n)?!0:St.call(us,n)?!1:ga.test(n)?pa[n]=!0:(us[n]=!0,!1)}function q(n,i,a){if(en(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function X(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function $(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}function ye(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Se(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function We(n,i,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Fe(n){if(!n._valueTracker){var i=Se(n)?"checked":"value";n._valueTracker=We(n,i,""+n[i])}}function Ci(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=Se(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function ur(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ya=/[\n"\\]/g;function ii(n){return n.replace(ya,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Wa(n,i,a,l,f,d,_,T){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),i!=null?_==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+ye(i)):n.value!==""+ye(i)&&(n.value=""+ye(i)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),i!=null?pl(n,_,ye(i)):a!=null?pl(n,_,ye(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+ye(T):n.removeAttribute("name")}function uc(n,i,a,l,f,d,_,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Fe(n);return}a=a!=null?""+ye(a):"",i=i!=null?""+ye(i):a,T||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=T?n.checked:!!l,n.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Fe(n)}function pl(n,i,a){i==="number"&&ur(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function cs(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+ye(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function cc(n,i,a){if(i!=null&&(i=""+ye(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+ye(a):""}function hs(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(dt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=ye(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),Fe(n)}function ri(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var hc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yl(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||hc.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function _l(n,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&yl(n,f,l)}else for(var d in i)i.hasOwnProperty(d)&&yl(n,d,i[d])}function eo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function to(n){return fs.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Qi(){}var vl=null;function Ii(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ds=null,cr=null;function _a(n){var i=$n(n);if(i&&(n=i.stateNode)){var a=n[Kt]||null;e:switch(n=i.stateNode,i.type){case"input":if(Wa(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ii(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[Kt]||null;if(!f)throw Error(s(90));Wa(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&Ci(l)}break e;case"textarea":cc(n,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&cs(n,!!a.multiple,i,!1)}}}var no=!1;function ms(n,i,a){if(no)return n(i,a);no=!0;try{var l=n(i);return l}finally{if(no=!1,(ds!==null||cr!==null)&&(sh(),ds&&(i=ds,n=cr,cr=ds=null,_a(i),n)))for(i=0;i<n.length;i++)_a(n[i])}}function Yi(n,i){var a=n.stateNode;if(a===null)return null;var l=a[Kt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),va=!1;if(Ni)try{var yt={};Object.defineProperty(yt,"passive",{get:function(){va=!0}}),window.addEventListener("test",yt,yt),window.removeEventListener("test",yt,yt)}catch{va=!1}var hr=null,bl=null,ba=null;function El(){if(ba)return ba;var n,i=bl,a=i.length,l,f="value"in hr?hr.value:hr.textContent,d=f.length;for(n=0;n<a&&i[n]===f[n];n++);var _=a-n;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return ba=f.slice(n,1<l?1-l:void 0)}function Ea(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Dr(){return!0}function Xi(){return!1}function An(n){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(a=n[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Dr:Xi,this.isPropagationStopped=Xi,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Dr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Dr)},persist:function(){},isPersistent:Dr}),i}var Or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fr=An(Or),gs=E({},Or,{view:0,detail:0}),Tl=An(gs),ps,io,dr,ro=E({},gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ys,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==dr&&(dr&&n.type==="mousemove"?(ps=n.screenX-dr.screenX,io=n.screenY-dr.screenY):io=ps=0,dr=n),ps)},movementY:function(n){return"movementY"in n?n.movementY:io}}),wl=An(ro),Ta=E({},ro,{dataTransfer:0}),dc=An(Ta),mc=E({},gs,{relatedTarget:0}),wa=An(mc),Sl=E({},Or,{animationName:0,elapsedTime:0,pseudoElement:0}),gc=An(Sl),so=E({},Or,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),pc=An(so),yc=E({},Or,{data:0}),mr=An(yc),_c={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ec(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=bc[n])?!!i[n]:!1}function ys(){return Ec}var Qn=E({},gs,{key:function(n){if(n.key){var i=_c[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ea(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?vc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ys,charCode:function(n){return n.type==="keypress"?Ea(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ea(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Tc=An(Qn),wc=E({},ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mr=An(wc),h=E({},gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ys}),y=An(h),b=E({},Or,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=An(b),F=E({},ro,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=An(F),ge=E({},Or,{newState:0,oldState:0}),Ue=An(ge),$t=[9,13,27,32],at=Ni&&"CompositionEvent"in window,Mt=null;Ni&&"documentMode"in document&&(Mt=document.documentMode);var Di=Ni&&"TextEvent"in window&&!Mt,gr=Ni&&(!at||Mt&&8<Mt&&11>=Mt),Ji=" ",Zi=!1;function Sa(n,i){switch(n){case"keyup":return $t.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ao(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var oo=!1;function qw(n,i){switch(n){case"compositionend":return ao(i);case"keypress":return i.which!==32?null:(Zi=!0,Ji);case"textInput":return n=i.data,n===Ji&&Zi?null:n;default:return null}}function Hw(n,i){if(oo)return n==="compositionend"||!at&&Sa(n,i)?(n=El(),ba=bl=hr=null,oo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return gr&&i.locale!=="ko"?null:i.data;default:return null}}var Fw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ly(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Fw[n.type]:i==="textarea"}function uy(n,i,a,l){ds?cr?cr.push(l):cr=[l]:ds=l,i=fh(i,"onChange"),0<i.length&&(a=new fr("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var Al=null,xl=null;function Gw(n){G_(n,0)}function Sc(n){var i=Ln(n);if(Ci(i))return n}function cy(n,i){if(n==="change")return i}var hy=!1;if(Ni){var Xf;if(Ni){var Jf="oninput"in document;if(!Jf){var fy=document.createElement("div");fy.setAttribute("oninput","return;"),Jf=typeof fy.oninput=="function"}Xf=Jf}else Xf=!1;hy=Xf&&(!document.documentMode||9<document.documentMode)}function dy(){Al&&(Al.detachEvent("onpropertychange",my),xl=Al=null)}function my(n){if(n.propertyName==="value"&&Sc(xl)){var i=[];uy(i,xl,n,Ii(n)),ms(Gw,i)}}function Kw(n,i,a){n==="focusin"?(dy(),Al=i,xl=a,Al.attachEvent("onpropertychange",my)):n==="focusout"&&dy()}function $w(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Sc(xl)}function Qw(n,i){if(n==="click")return Sc(i)}function Yw(n,i){if(n==="input"||n==="change")return Sc(i)}function Xw(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var fi=typeof Object.is=="function"?Object.is:Xw;function Rl(n,i){if(fi(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!St.call(i,f)||!fi(n[f],i[f]))return!1}return!0}function gy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function py(n,i){var a=gy(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=gy(a)}}function yy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?yy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function _y(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=ur(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=ur(n.document)}return i}function Zf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var Jw=Ni&&"documentMode"in document&&11>=document.documentMode,lo=null,Wf=null,Cl=null,ed=!1;function vy(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ed||lo==null||lo!==ur(l)||(l=lo,"selectionStart"in l&&Zf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Cl&&Rl(Cl,l)||(Cl=l,l=fh(Wf,"onSelect"),0<l.length&&(i=new fr("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=lo)))}function Aa(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var uo={animationend:Aa("Animation","AnimationEnd"),animationiteration:Aa("Animation","AnimationIteration"),animationstart:Aa("Animation","AnimationStart"),transitionrun:Aa("Transition","TransitionRun"),transitionstart:Aa("Transition","TransitionStart"),transitioncancel:Aa("Transition","TransitionCancel"),transitionend:Aa("Transition","TransitionEnd")},td={},by={};Ni&&(by=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function xa(n){if(td[n])return td[n];if(!uo[n])return n;var i=uo[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in by)return td[n]=i[a];return n}var Ey=xa("animationend"),Ty=xa("animationiteration"),wy=xa("animationstart"),Zw=xa("transitionrun"),Ww=xa("transitionstart"),eS=xa("transitioncancel"),Sy=xa("transitionend"),Ay=new Map,nd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nd.push("scrollEnd");function Wi(n,i){Ay.set(n,i),ni(i,[n])}var Ac=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Oi=[],co=0,id=0;function xc(){for(var n=co,i=id=co=0;i<n;){var a=Oi[i];Oi[i++]=null;var l=Oi[i];Oi[i++]=null;var f=Oi[i];Oi[i++]=null;var d=Oi[i];if(Oi[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&xy(a,f,d)}}function Rc(n,i,a,l){Oi[co++]=n,Oi[co++]=i,Oi[co++]=a,Oi[co++]=l,id|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function rd(n,i,a,l){return Rc(n,i,a,l),Cc(n)}function Ra(n,i){return Rc(n,null,null,i),Cc(n)}function xy(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&i!==null&&(f=31-At(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function Cc(n){if(50<Xl)throw Xl=0,dm=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var ho={};function tS(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(n,i,a,l){return new tS(n,i,a,l)}function sd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function kr(n,i){var a=n.alternate;return a===null?(a=di(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Ry(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Ic(n,i,a,l,f,d){var _=0;if(l=n,typeof n=="function")sd(n)&&(_=1);else if(typeof n=="string")_=aA(n,a,de.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=di(31,a,i,f),n.elementType=I,n.lanes=d,n;case z:return Ca(a.children,f,d,i);case D:_=8,f|=24;break;case B:return n=di(12,a,i,f|2),n.elementType=B,n.lanes=d,n;case ue:return n=di(13,a,i,f),n.elementType=ue,n.lanes=d,n;case ie:return n=di(19,a,i,f),n.elementType=ie,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case te:_=10;break e;case J:_=9;break e;case fe:_=11;break e;case R:_=14;break e;case x:_=16,l=null;break e}_=29,a=Error(s(130,n===null?"null":typeof n,"")),l=null}return i=di(_,a,i,f),i.elementType=n,i.type=l,i.lanes=d,i}function Ca(n,i,a,l){return n=di(7,n,l,i),n.lanes=a,n}function ad(n,i,a){return n=di(6,n,null,i),n.lanes=a,n}function Cy(n){var i=di(18,null,null,0);return i.stateNode=n,i}function od(n,i,a){return i=di(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Iy=new WeakMap;function Mi(n,i){if(typeof n=="object"&&n!==null){var a=Iy.get(n);return a!==void 0?a:(i={value:n,source:i,stack:Hi(i)},Iy.set(n,i),i)}return{value:n,source:i,stack:Hi(i)}}var fo=[],mo=0,Nc=null,Il=0,ki=[],Vi=0,_s=null,pr=1,yr="";function Vr(n,i){fo[mo++]=Il,fo[mo++]=Nc,Nc=n,Il=i}function Ny(n,i,a){ki[Vi++]=pr,ki[Vi++]=yr,ki[Vi++]=_s,_s=n;var l=pr;n=yr;var f=32-At(l)-1;l&=~(1<<f),a+=1;var d=32-At(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,pr=1<<32-At(i)+f|a<<f|l,yr=d+n}else pr=1<<d|a<<f|l,yr=n}function ld(n){n.return!==null&&(Vr(n,1),Ny(n,1,0))}function ud(n){for(;n===Nc;)Nc=fo[--mo],fo[mo]=null,Il=fo[--mo],fo[mo]=null;for(;n===_s;)_s=ki[--Vi],ki[Vi]=null,yr=ki[--Vi],ki[Vi]=null,pr=ki[--Vi],ki[Vi]=null}function Dy(n,i){ki[Vi++]=pr,ki[Vi++]=yr,ki[Vi++]=_s,pr=i.id,yr=i.overflow,_s=n}var xn=null,Ct=null,et=!1,vs=null,Pi=!1,cd=Error(s(519));function bs(n){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Nl(Mi(i,n)),cd}function Oy(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[Pt]=n,i[Kt]=l,a){case"dialog":Ke("cancel",i),Ke("close",i);break;case"iframe":case"object":case"embed":Ke("load",i);break;case"video":case"audio":for(a=0;a<Zl.length;a++)Ke(Zl[a],i);break;case"source":Ke("error",i);break;case"img":case"image":case"link":Ke("error",i),Ke("load",i);break;case"details":Ke("toggle",i);break;case"input":Ke("invalid",i),uc(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ke("invalid",i);break;case"textarea":Ke("invalid",i),hs(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Y_(i.textContent,a)?(l.popover!=null&&(Ke("beforetoggle",i),Ke("toggle",i)),l.onScroll!=null&&Ke("scroll",i),l.onScrollEnd!=null&&Ke("scrollend",i),l.onClick!=null&&(i.onclick=Qi),i=!0):i=!1,i||bs(n,!0)}function My(n){for(xn=n.return;xn;)switch(xn.tag){case 5:case 31:case 13:Pi=!1;return;case 27:case 3:Pi=!0;return;default:xn=xn.return}}function go(n){if(n!==xn)return!1;if(!et)return My(n),et=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Cm(n.type,n.memoizedProps)),a=!a),a&&Ct&&bs(n),My(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Ct=rv(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Ct=rv(n)}else i===27?(i=Ct,ks(n.type)?(n=Mm,Mm=null,Ct=n):Ct=i):Ct=xn?Ui(n.stateNode.nextSibling):null;return!0}function Ia(){Ct=xn=null,et=!1}function hd(){var n=vs;return n!==null&&(li===null?li=n:li.push.apply(li,n),vs=null),n}function Nl(n){vs===null?vs=[n]:vs.push(n)}var fd=V(null),Na=null,Pr=null;function Es(n,i,a){me(fd,i._currentValue),i._currentValue=a}function Lr(n){n._currentValue=fd.current,ne(fd)}function dd(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function md(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=f;for(var O=0;O<i.length;O++)if(T.context===i[O]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),dd(d.return,a,n),l||(_=null);break e}d=T.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(s(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),dd(_,a,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function po(n,i,a,l){n=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var T=f.type;fi(f.pendingProps.value,_.value)||(n!==null?n.push(T):n=[T])}}else if(f===Le.current){if(_=f.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(iu):n=[iu])}f=f.return}n!==null&&md(i,n,a,l),i.flags|=262144}function Dc(n){for(n=n.firstContext;n!==null;){if(!fi(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Da(n){Na=n,Pr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Rn(n){return ky(Na,n)}function Oc(n,i){return Na===null&&Da(n),ky(n,i)}function ky(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Pr===null){if(n===null)throw Error(s(308));Pr=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Pr=Pr.next=i;return a}var nS=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},iS=r.unstable_scheduleCallback,rS=r.unstable_NormalPriority,tn={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gd(){return{controller:new nS,data:new Map,refCount:0}}function Dl(n){n.refCount--,n.refCount===0&&iS(rS,function(){n.controller.abort()})}var Ol=null,pd=0,yo=0,_o=null;function sS(n,i){if(Ol===null){var a=Ol=[];pd=0,yo=vm(),_o={status:"pending",value:void 0,then:function(l){a.push(l)}}}return pd++,i.then(Vy,Vy),i}function Vy(){if(--pd===0&&Ol!==null){_o!==null&&(_o.status="fulfilled");var n=Ol;Ol=null,yo=0,_o=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function aS(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Py=ee.S;ee.S=function(n,i){v_=Zt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&sS(n,i),Py!==null&&Py(n,i)};var Oa=V(null);function yd(){var n=Oa.current;return n!==null?n:Tt.pooledCache}function Mc(n,i){i===null?me(Oa,Oa.current):me(Oa,i.pool)}function Ly(){var n=yd();return n===null?null:{parent:tn._currentValue,pool:n}}var vo=Error(s(460)),_d=Error(s(474)),kc=Error(s(542)),Vc={then:function(){}};function Uy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function jy(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(Qi,Qi),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,By(n),n;default:if(typeof i.status=="string")i.then(Qi,Qi);else{if(n=Tt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,By(n),n}throw ka=i,vo}}function Ma(n){try{var i=n._init;return i(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ka=a,vo):a}}var ka=null;function zy(){if(ka===null)throw Error(s(459));var n=ka;return ka=null,n}function By(n){if(n===vo||n===kc)throw Error(s(483))}var bo=null,Ml=0;function Pc(n){var i=Ml;return Ml+=1,bo===null&&(bo=[]),jy(bo,n,i)}function kl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Lc(n,i){throw i.$$typeof===w?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function qy(n){function i(j,P){if(n){var G=j.deletions;G===null?(j.deletions=[P],j.flags|=16):G.push(P)}}function a(j,P){if(!n)return null;for(;P!==null;)i(j,P),P=P.sibling;return null}function l(j){for(var P=new Map;j!==null;)j.key!==null?P.set(j.key,j):P.set(j.index,j),j=j.sibling;return P}function f(j,P){return j=kr(j,P),j.index=0,j.sibling=null,j}function d(j,P,G){return j.index=G,n?(G=j.alternate,G!==null?(G=G.index,G<P?(j.flags|=67108866,P):G):(j.flags|=67108866,P)):(j.flags|=1048576,P)}function _(j){return n&&j.alternate===null&&(j.flags|=67108866),j}function T(j,P,G,se){return P===null||P.tag!==6?(P=ad(G,j.mode,se),P.return=j,P):(P=f(P,G),P.return=j,P)}function O(j,P,G,se){var Re=G.type;return Re===z?re(j,P,G.props.children,se,G.key):P!==null&&(P.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===x&&Ma(Re)===P.type)?(P=f(P,G.props),kl(P,G),P.return=j,P):(P=Ic(G.type,G.key,G.props,null,j.mode,se),kl(P,G),P.return=j,P)}function K(j,P,G,se){return P===null||P.tag!==4||P.stateNode.containerInfo!==G.containerInfo||P.stateNode.implementation!==G.implementation?(P=od(G,j.mode,se),P.return=j,P):(P=f(P,G.children||[]),P.return=j,P)}function re(j,P,G,se,Re){return P===null||P.tag!==7?(P=Ca(G,j.mode,se,Re),P.return=j,P):(P=f(P,G),P.return=j,P)}function oe(j,P,G){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=ad(""+P,j.mode,G),P.return=j,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case C:return G=Ic(P.type,P.key,P.props,null,j.mode,G),kl(G,P),G.return=j,G;case L:return P=od(P,j.mode,G),P.return=j,P;case x:return P=Ma(P),oe(j,P,G)}if(dt(P)||U(P))return P=Ca(P,j.mode,G,null),P.return=j,P;if(typeof P.then=="function")return oe(j,Pc(P),G);if(P.$$typeof===te)return oe(j,Oc(j,P),G);Lc(j,P)}return null}function Q(j,P,G,se){var Re=P!==null?P.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Re!==null?null:T(j,P,""+G,se);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case C:return G.key===Re?O(j,P,G,se):null;case L:return G.key===Re?K(j,P,G,se):null;case x:return G=Ma(G),Q(j,P,G,se)}if(dt(G)||U(G))return Re!==null?null:re(j,P,G,se,null);if(typeof G.then=="function")return Q(j,P,Pc(G),se);if(G.$$typeof===te)return Q(j,P,Oc(j,G),se);Lc(j,G)}return null}function W(j,P,G,se,Re){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return j=j.get(G)||null,T(P,j,""+se,Re);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case C:return j=j.get(se.key===null?G:se.key)||null,O(P,j,se,Re);case L:return j=j.get(se.key===null?G:se.key)||null,K(P,j,se,Re);case x:return se=Ma(se),W(j,P,G,se,Re)}if(dt(se)||U(se))return j=j.get(G)||null,re(P,j,se,Re,null);if(typeof se.then=="function")return W(j,P,G,Pc(se),Re);if(se.$$typeof===te)return W(j,P,G,Oc(P,se),Re);Lc(P,se)}return null}function Te(j,P,G,se){for(var Re=null,rt=null,we=P,Be=P=0,Ye=null;we!==null&&Be<G.length;Be++){we.index>Be?(Ye=we,we=null):Ye=we.sibling;var st=Q(j,we,G[Be],se);if(st===null){we===null&&(we=Ye);break}n&&we&&st.alternate===null&&i(j,we),P=d(st,P,Be),rt===null?Re=st:rt.sibling=st,rt=st,we=Ye}if(Be===G.length)return a(j,we),et&&Vr(j,Be),Re;if(we===null){for(;Be<G.length;Be++)we=oe(j,G[Be],se),we!==null&&(P=d(we,P,Be),rt===null?Re=we:rt.sibling=we,rt=we);return et&&Vr(j,Be),Re}for(we=l(we);Be<G.length;Be++)Ye=W(we,j,Be,G[Be],se),Ye!==null&&(n&&Ye.alternate!==null&&we.delete(Ye.key===null?Be:Ye.key),P=d(Ye,P,Be),rt===null?Re=Ye:rt.sibling=Ye,rt=Ye);return n&&we.forEach(function(js){return i(j,js)}),et&&Vr(j,Be),Re}function Ie(j,P,G,se){if(G==null)throw Error(s(151));for(var Re=null,rt=null,we=P,Be=P=0,Ye=null,st=G.next();we!==null&&!st.done;Be++,st=G.next()){we.index>Be?(Ye=we,we=null):Ye=we.sibling;var js=Q(j,we,st.value,se);if(js===null){we===null&&(we=Ye);break}n&&we&&js.alternate===null&&i(j,we),P=d(js,P,Be),rt===null?Re=js:rt.sibling=js,rt=js,we=Ye}if(st.done)return a(j,we),et&&Vr(j,Be),Re;if(we===null){for(;!st.done;Be++,st=G.next())st=oe(j,st.value,se),st!==null&&(P=d(st,P,Be),rt===null?Re=st:rt.sibling=st,rt=st);return et&&Vr(j,Be),Re}for(we=l(we);!st.done;Be++,st=G.next())st=W(we,j,Be,st.value,se),st!==null&&(n&&st.alternate!==null&&we.delete(st.key===null?Be:st.key),P=d(st,P,Be),rt===null?Re=st:rt.sibling=st,rt=st);return n&&we.forEach(function(yA){return i(j,yA)}),et&&Vr(j,Be),Re}function bt(j,P,G,se){if(typeof G=="object"&&G!==null&&G.type===z&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case C:e:{for(var Re=G.key;P!==null;){if(P.key===Re){if(Re=G.type,Re===z){if(P.tag===7){a(j,P.sibling),se=f(P,G.props.children),se.return=j,j=se;break e}}else if(P.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===x&&Ma(Re)===P.type){a(j,P.sibling),se=f(P,G.props),kl(se,G),se.return=j,j=se;break e}a(j,P);break}else i(j,P);P=P.sibling}G.type===z?(se=Ca(G.props.children,j.mode,se,G.key),se.return=j,j=se):(se=Ic(G.type,G.key,G.props,null,j.mode,se),kl(se,G),se.return=j,j=se)}return _(j);case L:e:{for(Re=G.key;P!==null;){if(P.key===Re)if(P.tag===4&&P.stateNode.containerInfo===G.containerInfo&&P.stateNode.implementation===G.implementation){a(j,P.sibling),se=f(P,G.children||[]),se.return=j,j=se;break e}else{a(j,P);break}else i(j,P);P=P.sibling}se=od(G,j.mode,se),se.return=j,j=se}return _(j);case x:return G=Ma(G),bt(j,P,G,se)}if(dt(G))return Te(j,P,G,se);if(U(G)){if(Re=U(G),typeof Re!="function")throw Error(s(150));return G=Re.call(G),Ie(j,P,G,se)}if(typeof G.then=="function")return bt(j,P,Pc(G),se);if(G.$$typeof===te)return bt(j,P,Oc(j,G),se);Lc(j,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,P!==null&&P.tag===6?(a(j,P.sibling),se=f(P,G),se.return=j,j=se):(a(j,P),se=ad(G,j.mode,se),se.return=j,j=se),_(j)):a(j,P)}return function(j,P,G,se){try{Ml=0;var Re=bt(j,P,G,se);return bo=null,Re}catch(we){if(we===vo||we===kc)throw we;var rt=di(29,we,null,j.mode);return rt.lanes=se,rt.return=j,rt}}}var Va=qy(!0),Hy=qy(!1),Ts=!1;function vd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ws(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ss(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(ot&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Cc(n),xy(n,null,a),i}return Rc(n,l,i,a),Cc(n)}function Vl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,Gt(n,a)}}function Ed(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var Td=!1;function Pl(){if(Td){var n=_o;if(n!==null)throw n}}function Ll(n,i,a,l){Td=!1;var f=n.updateQueue;Ts=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var O=T,K=O.next;O.next=null,_===null?d=K:_.next=K,_=O;var re=n.alternate;re!==null&&(re=re.updateQueue,T=re.lastBaseUpdate,T!==_&&(T===null?re.firstBaseUpdate=K:T.next=K,re.lastBaseUpdate=O))}if(d!==null){var oe=f.baseState;_=0,re=K=O=null,T=d;do{var Q=T.lane&-536870913,W=Q!==T.lane;if(W?(Qe&Q)===Q:(l&Q)===Q){Q!==0&&Q===yo&&(Td=!0),re!==null&&(re=re.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Te=n,Ie=T;Q=i;var bt=a;switch(Ie.tag){case 1:if(Te=Ie.payload,typeof Te=="function"){oe=Te.call(bt,oe,Q);break e}oe=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ie.payload,Q=typeof Te=="function"?Te.call(bt,oe,Q):Te,Q==null)break e;oe=E({},oe,Q);break e;case 2:Ts=!0}}Q=T.callback,Q!==null&&(n.flags|=64,W&&(n.flags|=8192),W=f.callbacks,W===null?f.callbacks=[Q]:W.push(Q))}else W={lane:Q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},re===null?(K=re=W,O=oe):re=re.next=W,_|=Q;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;W=T,T=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);re===null&&(O=oe),f.baseState=O,f.firstBaseUpdate=K,f.lastBaseUpdate=re,d===null&&(f.shared.lanes=0),Is|=_,n.lanes=_,n.memoizedState=oe}}function Fy(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function Gy(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Fy(a[n],i)}var Eo=V(null),Uc=V(0);function Ky(n,i){n=Kr,me(Uc,n),me(Eo,i),Kr=n|i.baseLanes}function wd(){me(Uc,Kr),me(Eo,Eo.current)}function Sd(){Kr=Uc.current,ne(Eo),ne(Uc)}var mi=V(null),Li=null;function As(n){var i=n.alternate;me(Qt,Qt.current&1),me(mi,n),Li===null&&(i===null||Eo.current!==null||i.memoizedState!==null)&&(Li=n)}function Ad(n){me(Qt,Qt.current),me(mi,n),Li===null&&(Li=n)}function $y(n){n.tag===22?(me(Qt,Qt.current),me(mi,n),Li===null&&(Li=n)):xs()}function xs(){me(Qt,Qt.current),me(mi,mi.current)}function gi(n){ne(mi),Li===n&&(Li=null),ne(Qt)}var Qt=V(0);function jc(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Dm(a)||Om(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ur=0,je=null,_t=null,nn=null,zc=!1,To=!1,Pa=!1,Bc=0,Ul=0,wo=null,oS=0;function zt(){throw Error(s(321))}function xd(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!fi(n[a],i[a]))return!1;return!0}function Rd(n,i,a,l,f,d){return Ur=d,je=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ee.H=n===null||n.memoizedState===null?N0:qd,Pa=!1,d=a(l,f),Pa=!1,To&&(d=Yy(i,a,l,f)),Qy(n),d}function Qy(n){ee.H=Bl;var i=_t!==null&&_t.next!==null;if(Ur=0,nn=_t=je=null,zc=!1,Ul=0,wo=null,i)throw Error(s(300));n===null||rn||(n=n.dependencies,n!==null&&Dc(n)&&(rn=!0))}function Yy(n,i,a,l){je=n;var f=0;do{if(To&&(wo=null),Ul=0,To=!1,25<=f)throw Error(s(301));if(f+=1,nn=_t=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}ee.H=D0,d=i(a,l)}while(To);return d}function lS(){var n=ee.H,i=n.useState()[0];return i=typeof i.then=="function"?jl(i):i,n=n.useState()[0],(_t!==null?_t.memoizedState:null)!==n&&(je.flags|=1024),i}function Cd(){var n=Bc!==0;return Bc=0,n}function Id(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function Nd(n){if(zc){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}zc=!1}Ur=0,nn=_t=je=null,To=!1,Ul=Bc=0,wo=null}function Yn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?je.memoizedState=nn=n:nn=nn.next=n,nn}function Yt(){if(_t===null){var n=je.alternate;n=n!==null?n.memoizedState:null}else n=_t.next;var i=nn===null?je.memoizedState:nn.next;if(i!==null)nn=i,_t=n;else{if(n===null)throw je.alternate===null?Error(s(467)):Error(s(310));_t=n,n={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},nn===null?je.memoizedState=nn=n:nn=nn.next=n}return nn}function qc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jl(n){var i=Ul;return Ul+=1,wo===null&&(wo=[]),n=jy(wo,n,i),i=je,(nn===null?i.memoizedState:nn.next)===null&&(i=i.alternate,ee.H=i===null||i.memoizedState===null?N0:qd),n}function Hc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return jl(n);if(n.$$typeof===te)return Rn(n)}throw Error(s(438,String(n)))}function Dd(n){var i=null,a=je.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=je.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=qc(),je.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=k;return i.index++,a}function jr(n,i){return typeof i=="function"?i(n):i}function Fc(n){var i=Yt();return Od(i,_t,n)}function Od(n,i,a){var l=n.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{i=f.next;var T=_=null,O=null,K=i,re=!1;do{var oe=K.lane&-536870913;if(oe!==K.lane?(Qe&oe)===oe:(Ur&oe)===oe){var Q=K.revertLane;if(Q===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),oe===yo&&(re=!0);else if((Ur&Q)===Q){K=K.next,Q===yo&&(re=!0);continue}else oe={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},O===null?(T=O=oe,_=d):O=O.next=oe,je.lanes|=Q,Is|=Q;oe=K.action,Pa&&a(d,oe),d=K.hasEagerState?K.eagerState:a(d,oe)}else Q={lane:oe,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},O===null?(T=O=Q,_=d):O=O.next=Q,je.lanes|=oe,Is|=oe;K=K.next}while(K!==null&&K!==i);if(O===null?_=d:O.next=T,!fi(d,n.memoizedState)&&(rn=!0,re&&(a=_o,a!==null)))throw a;n.memoizedState=d,n.baseState=_,n.baseQueue=O,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function Md(n){var i=Yt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);fi(d,i.memoizedState)||(rn=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Xy(n,i,a){var l=je,f=Yt(),d=et;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var _=!fi((_t||f).memoizedState,a);if(_&&(f.memoizedState=a,rn=!0),f=f.queue,Pd(Wy.bind(null,l,f,n),[n]),f.getSnapshot!==i||_||nn!==null&&nn.memoizedState.tag&1){if(l.flags|=2048,So(9,{destroy:void 0},Zy.bind(null,l,f,a,i),null),Tt===null)throw Error(s(349));d||(Ur&127)!==0||Jy(l,i,a)}return a}function Jy(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=je.updateQueue,i===null?(i=qc(),je.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Zy(n,i,a,l){i.value=a,i.getSnapshot=l,e0(i)&&t0(n)}function Wy(n,i,a){return a(function(){e0(i)&&t0(n)})}function e0(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!fi(n,a)}catch{return!0}}function t0(n){var i=Ra(n,2);i!==null&&ui(i,n,2)}function kd(n){var i=Yn();if(typeof n=="function"){var a=n;if(n=a(),Pa){pn(!0);try{a()}finally{pn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:n},i}function n0(n,i,a,l){return n.baseState=a,Od(n,_t,typeof l=="function"?l:jr)}function uS(n,i,a,l,f){if($c(n))throw Error(s(485));if(n=i.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};ee.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,i0(i,d)):(d.next=a.next,i.pending=a.next=d)}}function i0(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var d=ee.T,_={};ee.T=_;try{var T=a(f,l),O=ee.S;O!==null&&O(_,T),r0(n,i,T)}catch(K){Vd(n,i,K)}finally{d!==null&&_.types!==null&&(d.types=_.types),ee.T=d}}else try{d=a(f,l),r0(n,i,d)}catch(K){Vd(n,i,K)}}function r0(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){s0(n,i,l)},function(l){return Vd(n,i,l)}):s0(n,i,a)}function s0(n,i,a){i.status="fulfilled",i.value=a,a0(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,i0(n,a)))}function Vd(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,a0(i),i=i.next;while(i!==l)}n.action=null}function a0(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function o0(n,i){return i}function l0(n,i){if(et){var a=Tt.formState;if(a!==null){e:{var l=je;if(et){if(Ct){t:{for(var f=Ct,d=Pi;f.nodeType!==8;){if(!d){f=null;break t}if(f=Ui(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){Ct=Ui(f.nextSibling),l=f.data==="F!";break e}}bs(l)}l=!1}l&&(i=a[0])}}return a=Yn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o0,lastRenderedState:i},a.queue=l,a=R0.bind(null,je,l),l.dispatch=a,l=kd(!1),d=Bd.bind(null,je,!1,l.queue),l=Yn(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=uS.bind(null,je,f,d,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function u0(n){var i=Yt();return c0(i,_t,n)}function c0(n,i,a){if(i=Od(n,i,o0)[0],n=Fc(jr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=jl(i)}catch(_){throw _===vo?kc:_}else l=i;i=Yt();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(je.flags|=2048,So(9,{destroy:void 0},cS.bind(null,f,a),null)),[l,d,n]}function cS(n,i){n.action=i}function h0(n){var i=Yt(),a=_t;if(a!==null)return c0(i,a,n);Yt(),i=i.memoizedState,a=Yt();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function So(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=je.updateQueue,i===null&&(i=qc(),je.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function f0(){return Yt().memoizedState}function Gc(n,i,a,l){var f=Yn();je.flags|=n,f.memoizedState=So(1|i,{destroy:void 0},a,l===void 0?null:l)}function Kc(n,i,a,l){var f=Yt();l=l===void 0?null:l;var d=f.memoizedState.inst;_t!==null&&l!==null&&xd(l,_t.memoizedState.deps)?f.memoizedState=So(i,d,a,l):(je.flags|=n,f.memoizedState=So(1|i,d,a,l))}function d0(n,i){Gc(8390656,8,n,i)}function Pd(n,i){Kc(2048,8,n,i)}function hS(n){je.flags|=4;var i=je.updateQueue;if(i===null)i=qc(),je.updateQueue=i,i.events=[n];else{var a=i.events;a===null?i.events=[n]:a.push(n)}}function m0(n){var i=Yt().memoizedState;return hS({ref:i,nextImpl:n}),function(){if((ot&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function g0(n,i){return Kc(4,2,n,i)}function p0(n,i){return Kc(4,4,n,i)}function y0(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function _0(n,i,a){a=a!=null?a.concat([n]):null,Kc(4,4,y0.bind(null,i,n),a)}function Ld(){}function v0(n,i){var a=Yt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&xd(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function b0(n,i){var a=Yt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&xd(i,l[1]))return l[0];if(l=n(),Pa){pn(!0);try{n()}finally{pn(!1)}}return a.memoizedState=[l,i],l}function Ud(n,i,a){return a===void 0||(Ur&1073741824)!==0&&(Qe&261930)===0?n.memoizedState=i:(n.memoizedState=a,n=E_(),je.lanes|=n,Is|=n,a)}function E0(n,i,a,l){return fi(a,i)?a:Eo.current!==null?(n=Ud(n,a,l),fi(n,i)||(rn=!0),n):(Ur&42)===0||(Ur&1073741824)!==0&&(Qe&261930)===0?(rn=!0,n.memoizedState=a):(n=E_(),je.lanes|=n,Is|=n,i)}function T0(n,i,a,l,f){var d=ce.p;ce.p=d!==0&&8>d?d:8;var _=ee.T,T={};ee.T=T,Bd(n,!1,i,a);try{var O=f(),K=ee.S;if(K!==null&&K(T,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var re=aS(O,l);zl(n,i,re,_i(n))}else zl(n,i,l,_i(n))}catch(oe){zl(n,i,{then:function(){},status:"rejected",reason:oe},_i())}finally{ce.p=d,_!==null&&T.types!==null&&(_.types=T.types),ee.T=_}}function fS(){}function jd(n,i,a,l){if(n.tag!==5)throw Error(s(476));var f=w0(n).queue;T0(n,f,i,be,a===null?fS:function(){return S0(n),a(l)})}function w0(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:be},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function S0(n){var i=w0(n);i.next===null&&(i=n.alternate.memoizedState),zl(n,i.next.queue,{},_i())}function zd(){return Rn(iu)}function A0(){return Yt().memoizedState}function x0(){return Yt().memoizedState}function dS(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=_i();n=ws(a);var l=Ss(i,n,a);l!==null&&(ui(l,i,a),Vl(l,i,a)),i={cache:gd()},n.payload=i;return}i=i.return}}function mS(n,i,a){var l=_i();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},$c(n)?C0(i,a):(a=rd(n,i,a,l),a!==null&&(ui(a,n,l),I0(a,i,l)))}function R0(n,i,a){var l=_i();zl(n,i,a,l)}function zl(n,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if($c(n))C0(i,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,T=d(_,a);if(f.hasEagerState=!0,f.eagerState=T,fi(T,_))return Rc(n,i,f,0),Tt===null&&xc(),!1}catch{}if(a=rd(n,i,f,l),a!==null)return ui(a,n,l),I0(a,i,l),!0}return!1}function Bd(n,i,a,l){if(l={lane:2,revertLane:vm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},$c(n)){if(i)throw Error(s(479))}else i=rd(n,a,l,2),i!==null&&ui(i,n,2)}function $c(n){var i=n.alternate;return n===je||i!==null&&i===je}function C0(n,i){To=zc=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function I0(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,Gt(n,a)}}var Bl={readContext:Rn,use:Hc,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useLayoutEffect:zt,useInsertionEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useSyncExternalStore:zt,useId:zt,useHostTransitionStatus:zt,useFormState:zt,useActionState:zt,useOptimistic:zt,useMemoCache:zt,useCacheRefresh:zt};Bl.useEffectEvent=zt;var N0={readContext:Rn,use:Hc,useCallback:function(n,i){return Yn().memoizedState=[n,i===void 0?null:i],n},useContext:Rn,useEffect:d0,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,Gc(4194308,4,y0.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Gc(4194308,4,n,i)},useInsertionEffect:function(n,i){Gc(4,2,n,i)},useMemo:function(n,i){var a=Yn();i=i===void 0?null:i;var l=n();if(Pa){pn(!0);try{n()}finally{pn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=Yn();if(a!==void 0){var f=a(i);if(Pa){pn(!0);try{a(i)}finally{pn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=mS.bind(null,je,n),[l.memoizedState,n]},useRef:function(n){var i=Yn();return n={current:n},i.memoizedState=n},useState:function(n){n=kd(n);var i=n.queue,a=R0.bind(null,je,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:Ld,useDeferredValue:function(n,i){var a=Yn();return Ud(a,n,i)},useTransition:function(){var n=kd(!1);return n=T0.bind(null,je,n.queue,!0,!1),Yn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=je,f=Yn();if(et){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),Tt===null)throw Error(s(349));(Qe&127)!==0||Jy(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,d0(Wy.bind(null,l,d,n),[n]),l.flags|=2048,So(9,{destroy:void 0},Zy.bind(null,l,d,a,i),null),a},useId:function(){var n=Yn(),i=Tt.identifierPrefix;if(et){var a=yr,l=pr;a=(l&~(1<<32-At(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Bc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=oS++,i="_"+i+"r_"+a.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:zd,useFormState:l0,useActionState:l0,useOptimistic:function(n){var i=Yn();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Bd.bind(null,je,!0,a),a.dispatch=i,[n,i]},useMemoCache:Dd,useCacheRefresh:function(){return Yn().memoizedState=dS.bind(null,je)},useEffectEvent:function(n){var i=Yn(),a={impl:n};return i.memoizedState=a,function(){if((ot&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},qd={readContext:Rn,use:Hc,useCallback:v0,useContext:Rn,useEffect:Pd,useImperativeHandle:_0,useInsertionEffect:g0,useLayoutEffect:p0,useMemo:b0,useReducer:Fc,useRef:f0,useState:function(){return Fc(jr)},useDebugValue:Ld,useDeferredValue:function(n,i){var a=Yt();return E0(a,_t.memoizedState,n,i)},useTransition:function(){var n=Fc(jr)[0],i=Yt().memoizedState;return[typeof n=="boolean"?n:jl(n),i]},useSyncExternalStore:Xy,useId:A0,useHostTransitionStatus:zd,useFormState:u0,useActionState:u0,useOptimistic:function(n,i){var a=Yt();return n0(a,_t,n,i)},useMemoCache:Dd,useCacheRefresh:x0};qd.useEffectEvent=m0;var D0={readContext:Rn,use:Hc,useCallback:v0,useContext:Rn,useEffect:Pd,useImperativeHandle:_0,useInsertionEffect:g0,useLayoutEffect:p0,useMemo:b0,useReducer:Md,useRef:f0,useState:function(){return Md(jr)},useDebugValue:Ld,useDeferredValue:function(n,i){var a=Yt();return _t===null?Ud(a,n,i):E0(a,_t.memoizedState,n,i)},useTransition:function(){var n=Md(jr)[0],i=Yt().memoizedState;return[typeof n=="boolean"?n:jl(n),i]},useSyncExternalStore:Xy,useId:A0,useHostTransitionStatus:zd,useFormState:h0,useActionState:h0,useOptimistic:function(n,i){var a=Yt();return _t!==null?n0(a,_t,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Dd,useCacheRefresh:x0};D0.useEffectEvent=m0;function Hd(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:E({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Fd={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=_i(),f=ws(l);f.payload=i,a!=null&&(f.callback=a),i=Ss(n,f,l),i!==null&&(ui(i,n,l),Vl(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=_i(),f=ws(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Ss(n,f,l),i!==null&&(ui(i,n,l),Vl(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=_i(),l=ws(a);l.tag=2,i!=null&&(l.callback=i),i=Ss(n,l,a),i!==null&&(ui(i,n,a),Vl(i,n,a))}};function O0(n,i,a,l,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!Rl(a,l)||!Rl(f,d):!0}function M0(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&Fd.enqueueReplaceState(i,i.state,null)}function La(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=E({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function k0(n){Ac(n)}function V0(n){console.error(n)}function P0(n){Ac(n)}function Qc(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function L0(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Gd(n,i,a){return a=ws(a),a.tag=3,a.payload={element:null},a.callback=function(){Qc(n,i)},a}function U0(n){return n=ws(n),n.tag=3,n}function j0(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){L0(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){L0(i,a,l),typeof f!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function gS(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&po(i,a,f,!0),a=mi.current,a!==null){switch(a.tag){case 31:case 13:return Li===null?ah():a.alternate===null&&Bt===0&&(Bt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Vc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),pm(n,l,f)),!1;case 22:return a.flags|=65536,l===Vc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),pm(n,l,f)),!1}throw Error(s(435,a.tag))}return pm(n,l,f),ah(),!1}if(et)return i=mi.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==cd&&(n=Error(s(422),{cause:l}),Nl(Mi(n,a)))):(l!==cd&&(i=Error(s(423),{cause:l}),Nl(Mi(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Mi(l,a),f=Gd(n.stateNode,l,f),Ed(n,f),Bt!==4&&(Bt=2)),!1;var d=Error(s(520),{cause:l});if(d=Mi(d,a),Yl===null?Yl=[d]:Yl.push(d),Bt!==4&&(Bt=2),i===null)return!0;l=Mi(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=Gd(a.stateNode,l,n),Ed(a,n),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ns===null||!Ns.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=U0(f),j0(f,n,a,l),Ed(a,f),!1}a=a.return}while(a!==null);return!1}var Kd=Error(s(461)),rn=!1;function Cn(n,i,a,l){i.child=n===null?Hy(i,null,a,l):Va(i,n.child,a,l)}function z0(n,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var T in l)T!=="ref"&&(_[T]=l[T])}else _=l;return Da(i),l=Rd(n,i,a,_,d,f),T=Cd(),n!==null&&!rn?(Id(n,i,f),zr(n,i,f)):(et&&T&&ld(i),i.flags|=1,Cn(n,i,l,f),i.child)}function B0(n,i,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!sd(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,q0(n,i,d,l,f)):(n=Ic(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(d=n.child,!em(n,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Rl,a(_,l)&&n.ref===i.ref)return zr(n,i,f)}return i.flags|=1,n=kr(d,l),n.ref=i.ref,n.return=i,i.child=n}function q0(n,i,a,l,f){if(n!==null){var d=n.memoizedProps;if(Rl(d,l)&&n.ref===i.ref)if(rn=!1,i.pendingProps=l=d,em(n,f))(n.flags&131072)!==0&&(rn=!0);else return i.lanes=n.lanes,zr(n,i,f)}return $d(n,i,a,l,f)}function H0(n,i,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=i.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return F0(n,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Mc(i,d!==null?d.cachePool:null),d!==null?Ky(i,d):wd(),$y(i);else return l=i.lanes=536870912,F0(n,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Mc(i,d.cachePool),Ky(i,d),xs(),i.memoizedState=null):(n!==null&&Mc(i,null),wd(),xs());return Cn(n,i,f,a),i.child}function ql(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function F0(n,i,a,l,f){var d=yd();return d=d===null?null:{parent:tn._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},n!==null&&Mc(i,null),wd(),$y(i),n!==null&&po(n,i,l,!0),i.childLanes=f,null}function Yc(n,i){return i=Jc({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function G0(n,i,a){return Va(i,n.child,null,a),n=Yc(i,i.pendingProps),n.flags|=2,gi(i),i.memoizedState=null,n}function pS(n,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(et){if(l.mode==="hidden")return n=Yc(i,l),i.lanes=536870912,ql(null,n);if(Ad(i),(n=Ct)?(n=iv(n,Pi),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:_s!==null?{id:pr,overflow:yr}:null,retryLane:536870912,hydrationErrors:null},a=Cy(n),a.return=i,i.child=a,xn=i,Ct=null)):n=null,n===null)throw bs(i);return i.lanes=536870912,null}return Yc(i,l)}var d=n.memoizedState;if(d!==null){var _=d.dehydrated;if(Ad(i),f)if(i.flags&256)i.flags&=-257,i=G0(n,i,a);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(s(558));else if(rn||po(n,i,a,!1),f=(a&n.childLanes)!==0,rn||f){if(l=Tt,l!==null&&(_=he(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Ra(n,_),ui(l,n,_),Kd;ah(),i=G0(n,i,a)}else n=d.treeContext,Ct=Ui(_.nextSibling),xn=i,et=!0,vs=null,Pi=!1,n!==null&&Dy(i,n),i=Yc(i,l),i.flags|=4096;return i}return n=kr(n.child,{mode:l.mode,children:l.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Xc(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function $d(n,i,a,l,f){return Da(i),a=Rd(n,i,a,l,void 0,f),l=Cd(),n!==null&&!rn?(Id(n,i,f),zr(n,i,f)):(et&&l&&ld(i),i.flags|=1,Cn(n,i,a,f),i.child)}function K0(n,i,a,l,f,d){return Da(i),i.updateQueue=null,a=Yy(i,l,a,f),Qy(n),l=Cd(),n!==null&&!rn?(Id(n,i,d),zr(n,i,d)):(et&&l&&ld(i),i.flags|=1,Cn(n,i,a,d),i.child)}function $0(n,i,a,l,f){if(Da(i),i.stateNode===null){var d=ho,_=a.contextType;typeof _=="object"&&_!==null&&(d=Rn(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Fd,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},vd(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?Rn(_):ho,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Hd(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Fd.enqueueReplaceState(d,d.state,null),Ll(i,l,d,f),Pl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){d=i.stateNode;var T=i.memoizedProps,O=La(a,T);d.props=O;var K=d.context,re=a.contextType;_=ho,typeof re=="object"&&re!==null&&(_=Rn(re));var oe=a.getDerivedStateFromProps;re=typeof oe=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,re||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||K!==_)&&M0(i,d,l,_),Ts=!1;var Q=i.memoizedState;d.state=Q,Ll(i,l,d,f),Pl(),K=i.memoizedState,T||Q!==K||Ts?(typeof oe=="function"&&(Hd(i,a,oe,l),K=i.memoizedState),(O=Ts||O0(i,a,O,l,Q,K,_))?(re||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=K),d.props=l,d.state=K,d.context=_,l=O):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,bd(n,i),_=i.memoizedProps,re=La(a,_),d.props=re,oe=i.pendingProps,Q=d.context,K=a.contextType,O=ho,typeof K=="object"&&K!==null&&(O=Rn(K)),T=a.getDerivedStateFromProps,(K=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==oe||Q!==O)&&M0(i,d,l,O),Ts=!1,Q=i.memoizedState,d.state=Q,Ll(i,l,d,f),Pl();var W=i.memoizedState;_!==oe||Q!==W||Ts||n!==null&&n.dependencies!==null&&Dc(n.dependencies)?(typeof T=="function"&&(Hd(i,a,T,l),W=i.memoizedState),(re=Ts||O0(i,a,re,l,Q,W,O)||n!==null&&n.dependencies!==null&&Dc(n.dependencies))?(K||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,W,O),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,W,O)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=W),d.props=l,d.state=W,d.context=O,l=re):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(i.flags|=1024),l=!1)}return d=l,Xc(n,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,n!==null&&l?(i.child=Va(i,n.child,null,f),i.child=Va(i,null,a,f)):Cn(n,i,a,f),i.memoizedState=d.state,n=i.child):n=zr(n,i,f),n}function Q0(n,i,a,l){return Ia(),i.flags|=256,Cn(n,i,a,l),i.child}var Qd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yd(n){return{baseLanes:n,cachePool:Ly()}}function Xd(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=yi),n}function Y0(n,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=n!==null&&n.memoizedState===null?!1:(Qt.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,n===null){if(et){if(f?As(i):xs(),(n=Ct)?(n=iv(n,Pi),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:_s!==null?{id:pr,overflow:yr}:null,retryLane:536870912,hydrationErrors:null},a=Cy(n),a.return=i,i.child=a,xn=i,Ct=null)):n=null,n===null)throw bs(i);return Om(n)?i.lanes=32:i.lanes=536870912,null}var T=l.children;return l=l.fallback,f?(xs(),f=i.mode,T=Jc({mode:"hidden",children:T},f),l=Ca(l,f,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,l=i.child,l.memoizedState=Yd(a),l.childLanes=Xd(n,_,a),i.memoizedState=Qd,ql(null,l)):(As(i),Jd(i,T))}var O=n.memoizedState;if(O!==null&&(T=O.dehydrated,T!==null)){if(d)i.flags&256?(As(i),i.flags&=-257,i=Zd(n,i,a)):i.memoizedState!==null?(xs(),i.child=n.child,i.flags|=128,i=null):(xs(),T=l.fallback,f=i.mode,l=Jc({mode:"visible",children:l.children},f),T=Ca(T,f,a,null),T.flags|=2,l.return=i,T.return=i,l.sibling=T,i.child=l,Va(i,n.child,null,a),l=i.child,l.memoizedState=Yd(a),l.childLanes=Xd(n,_,a),i.memoizedState=Qd,i=ql(null,l));else if(As(i),Om(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var K=_.dgst;_=K,l=Error(s(419)),l.stack="",l.digest=_,Nl({value:l,source:null,stack:null}),i=Zd(n,i,a)}else if(rn||po(n,i,a,!1),_=(a&n.childLanes)!==0,rn||_){if(_=Tt,_!==null&&(l=he(_,a),l!==0&&l!==O.retryLane))throw O.retryLane=l,Ra(n,l),ui(_,n,l),Kd;Dm(T)||ah(),i=Zd(n,i,a)}else Dm(T)?(i.flags|=192,i.child=n.child,i=null):(n=O.treeContext,Ct=Ui(T.nextSibling),xn=i,et=!0,vs=null,Pi=!1,n!==null&&Dy(i,n),i=Jd(i,l.children),i.flags|=4096);return i}return f?(xs(),T=l.fallback,f=i.mode,O=n.child,K=O.sibling,l=kr(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,K!==null?T=kr(K,T):(T=Ca(T,f,a,null),T.flags|=2),T.return=i,l.return=i,l.sibling=T,i.child=l,ql(null,l),l=i.child,T=n.child.memoizedState,T===null?T=Yd(a):(f=T.cachePool,f!==null?(O=tn._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=Ly(),T={baseLanes:T.baseLanes|a,cachePool:f}),l.memoizedState=T,l.childLanes=Xd(n,_,a),i.memoizedState=Qd,ql(n.child,l)):(As(i),a=n.child,n=a.sibling,a=kr(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(_=i.deletions,_===null?(i.deletions=[n],i.flags|=16):_.push(n)),i.child=a,i.memoizedState=null,a)}function Jd(n,i){return i=Jc({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Jc(n,i){return n=di(22,n,null,i),n.lanes=0,n}function Zd(n,i,a){return Va(i,n.child,null,a),n=Jd(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function X0(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),dd(n.return,i,a)}function Wd(n,i,a,l,f,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function J0(n,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=Qt.current,T=(_&2)!==0;if(T?(_=_&1|2,i.flags|=128):_&=1,me(Qt,_),Cn(n,i,l,a),l=et?Il:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&X0(n,a,i);else if(n.tag===19)X0(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&jc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Wd(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&jc(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Wd(i,!0,a,null,d,l);break;case"together":Wd(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function zr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Is|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(po(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,a=kr(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=kr(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function em(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Dc(n)))}function yS(n,i,a){switch(i.tag){case 3:Dt(i,i.stateNode.containerInfo),Es(i,tn,n.memoizedState.cache),Ia();break;case 27:case 5:Ht(i);break;case 4:Dt(i,i.stateNode.containerInfo);break;case 10:Es(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Ad(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(As(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Y0(n,i,a):(As(i),n=zr(n,i,a),n!==null?n.sibling:null);As(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(po(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return J0(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),me(Qt,Qt.current),l)break;return null;case 22:return i.lanes=0,H0(n,i,a,i.pendingProps);case 24:Es(i,tn,n.memoizedState.cache)}return zr(n,i,a)}function Z0(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)rn=!0;else{if(!em(n,a)&&(i.flags&128)===0)return rn=!1,yS(n,i,a);rn=(n.flags&131072)!==0}else rn=!1,et&&(i.flags&1048576)!==0&&Ny(i,Il,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(n=Ma(i.elementType),i.type=n,typeof n=="function")sd(n)?(l=La(n,l),i.tag=1,i=$0(null,i,n,l,a)):(i.tag=0,i=$d(null,i,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===fe){i.tag=11,i=z0(null,i,n,l,a);break e}else if(f===R){i.tag=14,i=B0(null,i,n,l,a);break e}}throw i=qe(n)||n,Error(s(306,i,""))}}return i;case 0:return $d(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=La(l,i.pendingProps),$0(n,i,l,f,a);case 3:e:{if(Dt(i,i.stateNode.containerInfo),n===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,bd(n,i),Ll(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Es(i,tn,l),l!==d.cache&&md(i,[tn],a,!0),Pl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Q0(n,i,l,a);break e}else if(l!==f){f=Mi(Error(s(424)),i),Nl(f),i=Q0(n,i,l,a);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Ct=Ui(n.firstChild),xn=i,et=!0,vs=null,Pi=!0,a=Hy(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ia(),l===f){i=zr(n,i,a);break e}Cn(n,i,l,a)}i=i.child}return i;case 26:return Xc(n,i),n===null?(a=uv(i.type,null,i.pendingProps,null))?i.memoizedState=a:et||(a=i.type,n=i.pendingProps,l=dh(Ae.current).createElement(a),l[Pt]=i,l[Kt]=n,In(l,a,n),jt(l),i.stateNode=l):i.memoizedState=uv(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Ht(i),n===null&&et&&(l=i.stateNode=av(i.type,i.pendingProps,Ae.current),xn=i,Pi=!0,f=Ct,ks(i.type)?(Mm=f,Ct=Ui(l.firstChild)):Ct=f),Cn(n,i,i.pendingProps.children,a),Xc(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&et&&((f=l=Ct)&&(l=$S(l,i.type,i.pendingProps,Pi),l!==null?(i.stateNode=l,xn=i,Ct=Ui(l.firstChild),Pi=!1,f=!0):f=!1),f||bs(i)),Ht(i),f=i.type,d=i.pendingProps,_=n!==null?n.memoizedProps:null,l=d.children,Cm(f,d)?l=null:_!==null&&Cm(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=Rd(n,i,lS,null,null,a),iu._currentValue=f),Xc(n,i),Cn(n,i,l,a),i.child;case 6:return n===null&&et&&((n=a=Ct)&&(a=QS(a,i.pendingProps,Pi),a!==null?(i.stateNode=a,xn=i,Ct=null,n=!0):n=!1),n||bs(i)),null;case 13:return Y0(n,i,a);case 4:return Dt(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=Va(i,null,l,a):Cn(n,i,l,a),i.child;case 11:return z0(n,i,i.type,i.pendingProps,a);case 7:return Cn(n,i,i.pendingProps,a),i.child;case 8:return Cn(n,i,i.pendingProps.children,a),i.child;case 12:return Cn(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Es(i,i.type,l.value),Cn(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Da(i),f=Rn(f),l=l(f),i.flags|=1,Cn(n,i,l,a),i.child;case 14:return B0(n,i,i.type,i.pendingProps,a);case 15:return q0(n,i,i.type,i.pendingProps,a);case 19:return J0(n,i,a);case 31:return pS(n,i,a);case 22:return H0(n,i,a,i.pendingProps);case 24:return Da(i),l=Rn(tn),n===null?(f=yd(),f===null&&(f=Tt,d=gd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},vd(i),Es(i,tn,f)):((n.lanes&a)!==0&&(bd(n,i),Ll(i,null,null,a),Pl()),f=n.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Es(i,tn,l)):(l=d.cache,Es(i,tn,l),l!==f.cache&&md(i,[tn],a,!0))),Cn(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Br(n){n.flags|=4}function tm(n,i,a,l,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(A_())n.flags|=8192;else throw ka=Vc,_d}else n.flags&=-16777217}function W0(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!mv(i))if(A_())n.flags|=8192;else throw ka=Vc,_d}function Zc(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Wt():536870912,n.lanes|=i,Co|=i)}function Hl(n,i){if(!et)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function It(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function _S(n,i,a){var l=i.pendingProps;switch(ud(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(i),null;case 1:return It(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Lr(tn),lt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(go(i)?Br(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,hd())),It(i),null;case 26:var f=i.type,d=i.memoizedState;return n===null?(Br(i),d!==null?(It(i),W0(i,d)):(It(i),tm(i,f,null,l,a))):d?d!==n.memoizedState?(Br(i),It(i),W0(i,d)):(It(i),i.flags&=-16777217):(n=n.memoizedProps,n!==l&&Br(i),It(i),tm(i,f,n,l,a)),null;case 27:if(wi(i),a=Ae.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&Br(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return It(i),null}n=de.current,go(i)?Oy(i):(n=av(f,l,a),i.stateNode=n,Br(i))}return It(i),null;case 5:if(wi(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&Br(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return It(i),null}if(d=de.current,go(i))Oy(i);else{var _=dh(Ae.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[Pt]=i,d[Kt]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;e:switch(In(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Br(i)}}return It(i),tm(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,a),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&Br(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(n=Ae.current,go(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=xn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Pt]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Y_(n.nodeValue,a)),n||bs(i,!0)}else n=dh(n).createTextNode(l),n[Pt]=i,i.stateNode=n}return It(i),null;case 31:if(a=i.memoizedState,n===null||n.memoizedState!==null){if(l=go(i),a!==null){if(n===null){if(!l)throw Error(s(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[Pt]=i}else Ia(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;It(i),n=!1}else a=hd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return i.flags&256?(gi(i),i):(gi(i),null);if((i.flags&128)!==0)throw Error(s(558))}return It(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=go(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Pt]=i}else Ia(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;It(i),f=!1}else f=hd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(gi(i),i):(gi(i),null)}return gi(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(i.child.flags|=8192),Zc(i,i.updateQueue),It(i),null);case 4:return lt(),n===null&&wm(i.stateNode.containerInfo),It(i),null;case 10:return Lr(i.type),It(i),null;case 19:if(ne(Qt),l=i.memoizedState,l===null)return It(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)Hl(l,!1);else{if(Bt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(d=jc(n),d!==null){for(i.flags|=128,Hl(l,!1),n=d.updateQueue,i.updateQueue=n,Zc(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)Ry(a,n),a=a.sibling;return me(Qt,Qt.current&1|2),et&&Vr(i,l.treeForkCount),i.child}n=n.sibling}l.tail!==null&&Zt()>ih&&(i.flags|=128,f=!0,Hl(l,!1),i.lanes=4194304)}else{if(!f)if(n=jc(d),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,Zc(i,n),Hl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!et)return It(i),null}else 2*Zt()-l.renderingStartTime>ih&&a!==536870912&&(i.flags|=128,f=!0,Hl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(n=l.last,n!==null?n.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=Zt(),n.sibling=null,a=Qt.current,me(Qt,f?a&1|2:a&1),et&&Vr(i,l.treeForkCount),n):(It(i),null);case 22:case 23:return gi(i),Sd(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(It(i),i.subtreeFlags&6&&(i.flags|=8192)):It(i),a=i.updateQueue,a!==null&&Zc(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&ne(Oa),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Lr(tn),It(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function vS(n,i){switch(ud(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Lr(tn),lt(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return wi(i),null;case 31:if(i.memoizedState!==null){if(gi(i),i.alternate===null)throw Error(s(340));Ia()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(gi(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Ia()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return ne(Qt),null;case 4:return lt(),null;case 10:return Lr(i.type),null;case 22:case 23:return gi(i),Sd(),n!==null&&ne(Oa),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Lr(tn),null;case 25:return null;default:return null}}function e_(n,i){switch(ud(i),i.tag){case 3:Lr(tn),lt();break;case 26:case 27:case 5:wi(i);break;case 4:lt();break;case 31:i.memoizedState!==null&&gi(i);break;case 13:gi(i);break;case 19:ne(Qt);break;case 10:Lr(i.type);break;case 22:case 23:gi(i),Sd(),n!==null&&ne(Oa);break;case 24:Lr(tn)}}function Fl(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(T){ft(i,i.return,T)}}function Rs(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var _=l.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,f=i;var O=a,K=T;try{K()}catch(re){ft(f,O,re)}}}l=l.next}while(l!==d)}}catch(re){ft(i,i.return,re)}}function t_(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{Gy(i,a)}catch(l){ft(n,n.return,l)}}}function n_(n,i,a){a.props=La(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){ft(n,i,l)}}function Gl(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){ft(n,i,f)}}function _r(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){ft(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ft(n,i,f)}else a.current=null}function i_(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){ft(n,n.return,f)}}function nm(n,i,a){try{var l=n.stateNode;BS(l,n.type,a,i),l[Kt]=i}catch(f){ft(n,n.return,f)}}function r_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ks(n.type)||n.tag===4}function im(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||r_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ks(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rm(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Qi));else if(l!==4&&(l===27&&ks(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(rm(n,i,a),n=n.sibling;n!==null;)rm(n,i,a),n=n.sibling}function Wc(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&ks(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Wc(n,i,a),n=n.sibling;n!==null;)Wc(n,i,a),n=n.sibling}function s_(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);In(i,l,a),i[Pt]=n,i[Kt]=a}catch(d){ft(n,n.return,d)}}var qr=!1,sn=!1,sm=!1,a_=typeof WeakSet=="function"?WeakSet:Set,_n=null;function bS(n,i){if(n=n.containerInfo,xm=bh,n=_y(n),Zf(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,T=-1,O=-1,K=0,re=0,oe=n,Q=null;t:for(;;){for(var W;oe!==a||f!==0&&oe.nodeType!==3||(T=_+f),oe!==d||l!==0&&oe.nodeType!==3||(O=_+l),oe.nodeType===3&&(_+=oe.nodeValue.length),(W=oe.firstChild)!==null;)Q=oe,oe=W;for(;;){if(oe===n)break t;if(Q===a&&++K===f&&(T=_),Q===d&&++re===l&&(O=_),(W=oe.nextSibling)!==null)break;oe=Q,Q=oe.parentNode}oe=W}a=T===-1||O===-1?null:{start:T,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Rm={focusedElem:n,selectionRange:a},bh=!1,_n=i;_n!==null;)if(i=_n,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,_n=n;else for(;_n!==null;){switch(i=_n,d=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Te=La(a.type,f);n=l.getSnapshotBeforeUpdate(Te,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(Ie){ft(a,a.return,Ie)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)Nm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Nm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,_n=n;break}_n=i.return}}function o_(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Fr(n,a),l&4&&Fl(5,a);break;case 1:if(Fr(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(_){ft(a,a.return,_)}else{var f=La(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(_){ft(a,a.return,_)}}l&64&&t_(a),l&512&&Gl(a,a.return);break;case 3:if(Fr(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Gy(n,i)}catch(_){ft(a,a.return,_)}}break;case 27:i===null&&l&4&&s_(a);case 26:case 5:Fr(n,a),i===null&&l&4&&i_(a),l&512&&Gl(a,a.return);break;case 12:Fr(n,a);break;case 31:Fr(n,a),l&4&&c_(n,a);break;case 13:Fr(n,a),l&4&&h_(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=IS.bind(null,a),YS(n,a))));break;case 22:if(l=a.memoizedState!==null||qr,!l){i=i!==null&&i.memoizedState!==null||sn,f=qr;var d=sn;qr=l,(sn=i)&&!d?Gr(n,a,(a.subtreeFlags&8772)!==0):Fr(n,a),qr=f,sn=d}break;case 30:break;default:Fr(n,a)}}function l_(n){var i=n.alternate;i!==null&&(n.alternate=null,l_(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&os(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var kt=null,si=!1;function Hr(n,i,a){for(a=a.child;a!==null;)u_(n,i,a),a=a.sibling}function u_(n,i,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Kn,a)}catch{}switch(a.tag){case 26:sn||_r(a,i),Hr(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:sn||_r(a,i);var l=kt,f=si;ks(a.type)&&(kt=a.stateNode,si=!1),Hr(n,i,a),eu(a.stateNode),kt=l,si=f;break;case 5:sn||_r(a,i);case 6:if(l=kt,f=si,kt=null,Hr(n,i,a),kt=l,si=f,kt!==null)if(si)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(a.stateNode)}catch(d){ft(a,i,d)}else try{kt.removeChild(a.stateNode)}catch(d){ft(a,i,d)}break;case 18:kt!==null&&(si?(n=kt,tv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Po(n)):tv(kt,a.stateNode));break;case 4:l=kt,f=si,kt=a.stateNode.containerInfo,si=!0,Hr(n,i,a),kt=l,si=f;break;case 0:case 11:case 14:case 15:Rs(2,a,i),sn||Rs(4,a,i),Hr(n,i,a);break;case 1:sn||(_r(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&n_(a,i,l)),Hr(n,i,a);break;case 21:Hr(n,i,a);break;case 22:sn=(l=sn)||a.memoizedState!==null,Hr(n,i,a),sn=l;break;default:Hr(n,i,a)}}function c_(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Po(n)}catch(a){ft(i,i.return,a)}}}function h_(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Po(n)}catch(a){ft(i,i.return,a)}}function ES(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new a_),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new a_),i;default:throw Error(s(435,n.tag))}}function eh(n,i){var a=ES(n);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=NS.bind(null,n,l);l.then(f,f)}})}function ai(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,_=i,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(ks(T.type)){kt=T.stateNode,si=!1;break e}break;case 5:kt=T.stateNode,si=!1;break e;case 3:case 4:kt=T.stateNode.containerInfo,si=!0;break e}T=T.return}if(kt===null)throw Error(s(160));u_(d,_,f),kt=null,si=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)f_(i,n),i=i.sibling}var er=null;function f_(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:ai(i,n),oi(n),l&4&&(Rs(3,n,n.return),Fl(3,n),Rs(5,n,n.return));break;case 1:ai(i,n),oi(n),l&512&&(sn||a===null||_r(a,a.return)),l&64&&qr&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=er;if(ai(i,n),oi(n),l&512&&(sn||a===null||_r(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Si]||d[Pt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),In(d,l,a),d[Pt]=n,jt(d),l=d;break e;case"link":var _=fv("link","href",f).get(l+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(d=_[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break t}}d=f.createElement(l),In(d,l,a),f.head.appendChild(d);break;case"meta":if(_=fv("meta","content",f).get(l+(a.content||""))){for(T=0;T<_.length;T++)if(d=_[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break t}}d=f.createElement(l),In(d,l,a),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[Pt]=n,jt(d),l=d}n.stateNode=l}else dv(f,n.type,n.stateNode);else n.stateNode=hv(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?dv(f,n.type,n.stateNode):hv(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&nm(n,n.memoizedProps,a.memoizedProps)}break;case 27:ai(i,n),oi(n),l&512&&(sn||a===null||_r(a,a.return)),a!==null&&l&4&&nm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(ai(i,n),oi(n),l&512&&(sn||a===null||_r(a,a.return)),n.flags&32){f=n.stateNode;try{ri(f,"")}catch(Te){ft(n,n.return,Te)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,nm(n,f,a!==null?a.memoizedProps:f)),l&1024&&(sm=!0);break;case 6:if(ai(i,n),oi(n),l&4){if(n.stateNode===null)throw Error(s(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(Te){ft(n,n.return,Te)}}break;case 3:if(ph=null,f=er,er=mh(i.containerInfo),ai(i,n),er=f,oi(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Po(i.containerInfo)}catch(Te){ft(n,n.return,Te)}sm&&(sm=!1,d_(n));break;case 4:l=er,er=mh(n.stateNode.containerInfo),ai(i,n),oi(n),er=l;break;case 12:ai(i,n),oi(n);break;case 31:ai(i,n),oi(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,eh(n,l)));break;case 13:ai(i,n),oi(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(nh=Zt()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,eh(n,l)));break;case 22:f=n.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,K=qr,re=sn;if(qr=K||f,sn=re||O,ai(i,n),sn=re,qr=K,oi(n),l&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||O||qr||sn||Ua(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){O=a=i;try{if(d=O.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=O.stateNode;var oe=O.memoizedProps.style,Q=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;T.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Te){ft(O,O.return,Te)}}}else if(i.tag===6){if(a===null){O=i;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(Te){ft(O,O.return,Te)}}}else if(i.tag===18){if(a===null){O=i;try{var W=O.stateNode;f?nv(W,!0):nv(O.stateNode,!1)}catch(Te){ft(O,O.return,Te)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,eh(n,a))));break;case 19:ai(i,n),oi(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,eh(n,l)));break;case 30:break;case 21:break;default:ai(i,n),oi(n)}}function oi(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(r_(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,d=im(n);Wc(n,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(ri(_,""),a.flags&=-33);var T=im(n);Wc(n,T,_);break;case 3:case 4:var O=a.stateNode.containerInfo,K=im(n);rm(n,K,O);break;default:throw Error(s(161))}}catch(re){ft(n,n.return,re)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function d_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;d_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Fr(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)o_(n,i.alternate,i),i=i.sibling}function Ua(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Rs(4,i,i.return),Ua(i);break;case 1:_r(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&n_(i,i.return,a),Ua(i);break;case 27:eu(i.stateNode);case 26:case 5:_r(i,i.return),Ua(i);break;case 22:i.memoizedState===null&&Ua(i);break;case 30:Ua(i);break;default:Ua(i)}n=n.sibling}}function Gr(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:Gr(f,d,a),Fl(4,d);break;case 1:if(Gr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(K){ft(l,l.return,K)}if(l=d,f=l.updateQueue,f!==null){var T=l.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)Fy(O[f],T)}catch(K){ft(l,l.return,K)}}a&&_&64&&t_(d),Gl(d,d.return);break;case 27:s_(d);case 26:case 5:Gr(f,d,a),a&&l===null&&_&4&&i_(d),Gl(d,d.return);break;case 12:Gr(f,d,a);break;case 31:Gr(f,d,a),a&&_&4&&c_(f,d);break;case 13:Gr(f,d,a),a&&_&4&&h_(f,d);break;case 22:d.memoizedState===null&&Gr(f,d,a),Gl(d,d.return);break;case 30:break;default:Gr(f,d,a)}i=i.sibling}}function am(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Dl(a))}function om(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Dl(n))}function tr(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)m_(n,i,a,l),i=i.sibling}function m_(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:tr(n,i,a,l),f&2048&&Fl(9,i);break;case 1:tr(n,i,a,l);break;case 3:tr(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Dl(n)));break;case 12:if(f&2048){tr(n,i,a,l),n=i.stateNode;try{var d=i.memoizedProps,_=d.id,T=d.onPostCommit;typeof T=="function"&&T(_,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){ft(i,i.return,O)}}else tr(n,i,a,l);break;case 31:tr(n,i,a,l);break;case 13:tr(n,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?tr(n,i,a,l):Kl(n,i):d._visibility&2?tr(n,i,a,l):(d._visibility|=2,Ao(n,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&am(_,i);break;case 24:tr(n,i,a,l),f&2048&&om(i.alternate,i);break;default:tr(n,i,a,l)}}function Ao(n,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=n,_=i,T=a,O=l,K=_.flags;switch(_.tag){case 0:case 11:case 15:Ao(d,_,T,O,f),Fl(8,_);break;case 23:break;case 22:var re=_.stateNode;_.memoizedState!==null?re._visibility&2?Ao(d,_,T,O,f):Kl(d,_):(re._visibility|=2,Ao(d,_,T,O,f)),f&&K&2048&&am(_.alternate,_);break;case 24:Ao(d,_,T,O,f),f&&K&2048&&om(_.alternate,_);break;default:Ao(d,_,T,O,f)}i=i.sibling}}function Kl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:Kl(a,l),f&2048&&am(l.alternate,l);break;case 24:Kl(a,l),f&2048&&om(l.alternate,l);break;default:Kl(a,l)}i=i.sibling}}var $l=8192;function xo(n,i,a){if(n.subtreeFlags&$l)for(n=n.child;n!==null;)g_(n,i,a),n=n.sibling}function g_(n,i,a){switch(n.tag){case 26:xo(n,i,a),n.flags&$l&&n.memoizedState!==null&&oA(a,er,n.memoizedState,n.memoizedProps);break;case 5:xo(n,i,a);break;case 3:case 4:var l=er;er=mh(n.stateNode.containerInfo),xo(n,i,a),er=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=$l,$l=16777216,xo(n,i,a),$l=l):xo(n,i,a));break;default:xo(n,i,a)}}function p_(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Ql(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];_n=l,__(l,n)}p_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)y_(n),n=n.sibling}function y_(n){switch(n.tag){case 0:case 11:case 15:Ql(n),n.flags&2048&&Rs(9,n,n.return);break;case 3:Ql(n);break;case 12:Ql(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,th(n)):Ql(n);break;default:Ql(n)}}function th(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];_n=l,__(l,n)}p_(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Rs(8,i,i.return),th(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,th(i));break;default:th(i)}n=n.sibling}}function __(n,i){for(;_n!==null;){var a=_n;switch(a.tag){case 0:case 11:case 15:Rs(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Dl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,_n=l;else e:for(a=n;_n!==null;){l=_n;var f=l.sibling,d=l.return;if(l_(l),l===a){_n=null;break e}if(f!==null){f.return=d,_n=f;break e}_n=d}}}var TS={getCacheForType:function(n){var i=Rn(tn),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a},cacheSignal:function(){return Rn(tn).controller.signal}},wS=typeof WeakMap=="function"?WeakMap:Map,ot=0,Tt=null,Ge=null,Qe=0,ht=0,pi=null,Cs=!1,Ro=!1,lm=!1,Kr=0,Bt=0,Is=0,ja=0,um=0,yi=0,Co=0,Yl=null,li=null,cm=!1,nh=0,v_=0,ih=1/0,rh=null,Ns=null,fn=0,Ds=null,Io=null,$r=0,hm=0,fm=null,b_=null,Xl=0,dm=null;function _i(){return(ot&2)!==0&&Qe!==0?Qe&-Qe:ee.T!==null?vm():Ot()}function E_(){if(yi===0)if((Qe&536870912)===0||et){var n=$i;$i<<=1,($i&3932160)===0&&($i=262144),yi=n}else yi=536870912;return n=mi.current,n!==null&&(n.flags|=32),yi}function ui(n,i,a){(n===Tt&&(ht===2||ht===9)||n.cancelPendingCommit!==null)&&(No(n,0),Os(n,Qe,yi,!1)),Y(n,a),((ot&2)===0||n!==Tt)&&(n===Tt&&((ot&2)===0&&(ja|=a),Bt===4&&Os(n,Qe,yi,!1)),vr(n))}function T_(n,i,a){if((ot&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&n.expiredLanes)===0||Ut(n,i),f=l?xS(n,i):gm(n,i,!0),d=l;do{if(f===0){Ro&&!l&&Os(n,i,0,!1);break}else{if(a=n.current.alternate,d&&!SS(a)){f=gm(n,i,!1),d=!1;continue}if(f===2){if(d=i,n.errorRecoveryDisabledLanes&d)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var T=n;f=Yl;var O=T.current.memoizedState.isDehydrated;if(O&&(No(T,_).flags|=256),_=gm(T,_,!1),_!==2){if(lm&&!O){T.errorRecoveryDisabledLanes|=d,ja|=d,f=4;break e}d=li,li=f,d!==null&&(li===null?li=d:li.push.apply(li,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){No(n,0),Os(n,i,0,!0);break}e:{switch(l=n,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Os(l,i,yi,!Cs);break e;case 2:li=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=nh+300-Zt(),10<f)){if(Os(l,i,yi,!Cs),Rt(l,0,!0)!==0)break e;$r=i,l.timeoutHandle=W_(w_.bind(null,l,a,li,rh,cm,i,yi,ja,Co,Cs,d,"Throttled",-0,0),f);break e}w_(l,a,li,rh,cm,i,yi,ja,Co,Cs,d,null,-0,0)}}break}while(!0);vr(n)}function w_(n,i,a,l,f,d,_,T,O,K,re,oe,Q,W){if(n.timeoutHandle=-1,oe=i.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qi},g_(i,d,oe);var Te=(d&62914560)===d?nh-Zt():(d&4194048)===d?v_-Zt():0;if(Te=lA(oe,Te),Te!==null){$r=d,n.cancelPendingCommit=Te(D_.bind(null,n,i,d,a,l,f,_,T,O,re,oe,null,Q,W)),Os(n,d,_,!K);return}}D_(n,i,d,a,l,f,_,T,O)}function SS(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!fi(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Os(n,i,a,l){i&=~um,i&=~ja,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var d=31-At(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&gt(n,a,i)}function sh(){return(ot&6)===0?(Jl(0),!1):!0}function mm(){if(Ge!==null){if(ht===0)var n=Ge.return;else n=Ge,Pr=Na=null,Nd(n),bo=null,Ml=0,n=Ge;for(;n!==null;)e_(n.alternate,n),n=n.return;Ge=null}}function No(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,FS(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),$r=0,mm(),Tt=n,Ge=a=kr(n.current,null),Qe=i,ht=0,pi=null,Cs=!1,Ro=Ut(n,i),lm=!1,Co=yi=um=ja=Is=Bt=0,li=Yl=null,cm=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-At(l),d=1<<f;i|=n[f],l&=~d}return Kr=i,xc(),a}function S_(n,i){je=null,ee.H=Bl,i===vo||i===kc?(i=zy(),ht=3):i===_d?(i=zy(),ht=4):ht=i===Kd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,pi=i,Ge===null&&(Bt=1,Qc(n,Mi(i,n.current)))}function A_(){var n=mi.current;return n===null?!0:(Qe&4194048)===Qe?Li===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?n===Li:!1}function x_(){var n=ee.H;return ee.H=Bl,n===null?Bl:n}function R_(){var n=ee.A;return ee.A=TS,n}function ah(){Bt=4,Cs||(Qe&4194048)!==Qe&&mi.current!==null||(Ro=!0),(Is&134217727)===0&&(ja&134217727)===0||Tt===null||Os(Tt,Qe,yi,!1)}function gm(n,i,a){var l=ot;ot|=2;var f=x_(),d=R_();(Tt!==n||Qe!==i)&&(rh=null,No(n,i)),i=!1;var _=Bt;e:do try{if(ht!==0&&Ge!==null){var T=Ge,O=pi;switch(ht){case 8:mm(),_=6;break e;case 3:case 2:case 9:case 6:mi.current===null&&(i=!0);var K=ht;if(ht=0,pi=null,Do(n,T,O,K),a&&Ro){_=0;break e}break;default:K=ht,ht=0,pi=null,Do(n,T,O,K)}}AS(),_=Bt;break}catch(re){S_(n,re)}while(!0);return i&&n.shellSuspendCounter++,Pr=Na=null,ot=l,ee.H=f,ee.A=d,Ge===null&&(Tt=null,Qe=0,xc()),_}function AS(){for(;Ge!==null;)C_(Ge)}function xS(n,i){var a=ot;ot|=2;var l=x_(),f=R_();Tt!==n||Qe!==i?(rh=null,ih=Zt()+500,No(n,i)):Ro=Ut(n,i);e:do try{if(ht!==0&&Ge!==null){i=Ge;var d=pi;t:switch(ht){case 1:ht=0,pi=null,Do(n,i,d,1);break;case 2:case 9:if(Uy(d)){ht=0,pi=null,I_(i);break}i=function(){ht!==2&&ht!==9||Tt!==n||(ht=7),vr(n)},d.then(i,i);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:Uy(d)?(ht=0,pi=null,I_(i)):(ht=0,pi=null,Do(n,i,d,7));break;case 5:var _=null;switch(Ge.tag){case 26:_=Ge.memoizedState;case 5:case 27:var T=Ge;if(_?mv(_):T.stateNode.complete){ht=0,pi=null;var O=T.sibling;if(O!==null)Ge=O;else{var K=T.return;K!==null?(Ge=K,oh(K)):Ge=null}break t}}ht=0,pi=null,Do(n,i,d,5);break;case 6:ht=0,pi=null,Do(n,i,d,6);break;case 8:mm(),Bt=6;break e;default:throw Error(s(462))}}RS();break}catch(re){S_(n,re)}while(!0);return Pr=Na=null,ee.H=l,ee.A=f,ot=a,Ge!==null?0:(Tt=null,Qe=0,xc(),Bt)}function RS(){for(;Ge!==null&&!or();)C_(Ge)}function C_(n){var i=Z0(n.alternate,n,Kr);n.memoizedProps=n.pendingProps,i===null?oh(n):Ge=i}function I_(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=K0(a,i,i.pendingProps,i.type,void 0,Qe);break;case 11:i=K0(a,i,i.pendingProps,i.type.render,i.ref,Qe);break;case 5:Nd(i);default:e_(a,i),i=Ge=Ry(i,Kr),i=Z0(a,i,Kr)}n.memoizedProps=n.pendingProps,i===null?oh(n):Ge=i}function Do(n,i,a,l){Pr=Na=null,Nd(i),bo=null,Ml=0;var f=i.return;try{if(gS(n,f,i,a,Qe)){Bt=1,Qc(n,Mi(a,n.current)),Ge=null;return}}catch(d){if(f!==null)throw Ge=f,d;Bt=1,Qc(n,Mi(a,n.current)),Ge=null;return}i.flags&32768?(et||l===1?n=!0:Ro||(Qe&536870912)!==0?n=!1:(Cs=n=!0,(l===2||l===9||l===3||l===6)&&(l=mi.current,l!==null&&l.tag===13&&(l.flags|=16384))),N_(i,n)):oh(i)}function oh(n){var i=n;do{if((i.flags&32768)!==0){N_(i,Cs);return}n=i.return;var a=_S(i.alternate,i,Kr);if(a!==null){Ge=a;return}if(i=i.sibling,i!==null){Ge=i;return}Ge=i=n}while(i!==null);Bt===0&&(Bt=5)}function N_(n,i){do{var a=vS(n.alternate,n);if(a!==null){a.flags&=32767,Ge=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Ge=n;return}Ge=n=a}while(n!==null);Bt=6,Ge=null}function D_(n,i,a,l,f,d,_,T,O){n.cancelPendingCommit=null;do lh();while(fn!==0);if((ot&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=id,mt(n,a,d,_,T,O),n===Tt&&(Ge=Tt=null,Qe=0),Io=i,Ds=n,$r=a,hm=d,fm=f,b_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,DS(Sn,function(){return P_(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=ee.T,ee.T=null,f=ce.p,ce.p=2,_=ot,ot|=4;try{bS(n,i,a)}finally{ot=_,ce.p=f,ee.T=l}}fn=1,O_(),M_(),k_()}}function O_(){if(fn===1){fn=0;var n=Ds,i=Io,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=ee.T,ee.T=null;var l=ce.p;ce.p=2;var f=ot;ot|=4;try{f_(i,n);var d=Rm,_=_y(n.containerInfo),T=d.focusedElem,O=d.selectionRange;if(_!==T&&T&&T.ownerDocument&&yy(T.ownerDocument.documentElement,T)){if(O!==null&&Zf(T)){var K=O.start,re=O.end;if(re===void 0&&(re=K),"selectionStart"in T)T.selectionStart=K,T.selectionEnd=Math.min(re,T.value.length);else{var oe=T.ownerDocument||document,Q=oe&&oe.defaultView||window;if(Q.getSelection){var W=Q.getSelection(),Te=T.textContent.length,Ie=Math.min(O.start,Te),bt=O.end===void 0?Ie:Math.min(O.end,Te);!W.extend&&Ie>bt&&(_=bt,bt=Ie,Ie=_);var j=py(T,Ie),P=py(T,bt);if(j&&P&&(W.rangeCount!==1||W.anchorNode!==j.node||W.anchorOffset!==j.offset||W.focusNode!==P.node||W.focusOffset!==P.offset)){var G=oe.createRange();G.setStart(j.node,j.offset),W.removeAllRanges(),Ie>bt?(W.addRange(G),W.extend(P.node,P.offset)):(G.setEnd(P.node,P.offset),W.addRange(G))}}}}for(oe=[],W=T;W=W.parentNode;)W.nodeType===1&&oe.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<oe.length;T++){var se=oe[T];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}bh=!!xm,Rm=xm=null}finally{ot=f,ce.p=l,ee.T=a}}n.current=i,fn=2}}function M_(){if(fn===2){fn=0;var n=Ds,i=Io,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=ee.T,ee.T=null;var l=ce.p;ce.p=2;var f=ot;ot|=4;try{o_(n,i.alternate,i)}finally{ot=f,ce.p=l,ee.T=a}}fn=3}}function k_(){if(fn===4||fn===3){fn=0,lr();var n=Ds,i=Io,a=$r,l=b_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?fn=5:(fn=0,Io=Ds=null,V_(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Ns=null),tt(a),i=i.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Kn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=ee.T,f=ce.p,ce.p=2,ee.T=null;try{for(var d=n.onRecoverableError,_=0;_<l.length;_++){var T=l[_];d(T.value,{componentStack:T.stack})}}finally{ee.T=i,ce.p=f}}($r&3)!==0&&lh(),vr(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===dm?Xl++:(Xl=0,dm=n):Xl=0,Jl(0)}}function V_(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Dl(i)))}function lh(){return O_(),M_(),k_(),P_()}function P_(){if(fn!==5)return!1;var n=Ds,i=hm;hm=0;var a=tt($r),l=ee.T,f=ce.p;try{ce.p=32>a?32:a,ee.T=null,a=fm,fm=null;var d=Ds,_=$r;if(fn=0,Io=Ds=null,$r=0,(ot&6)!==0)throw Error(s(331));var T=ot;if(ot|=4,y_(d.current),m_(d,d.current,_,a),ot=T,Jl(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Kn,d)}catch{}return!0}finally{ce.p=f,ee.T=l,V_(n,i)}}function L_(n,i,a){i=Mi(a,i),i=Gd(n.stateNode,i,2),n=Ss(n,i,2),n!==null&&(Y(n,2),vr(n))}function ft(n,i,a){if(n.tag===3)L_(n,n,a);else for(;i!==null;){if(i.tag===3){L_(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ns===null||!Ns.has(l))){n=Mi(a,n),a=U0(2),l=Ss(i,a,2),l!==null&&(j0(a,l,i,n),Y(l,2),vr(l));break}}i=i.return}}function pm(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new wS;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(lm=!0,f.add(a),n=CS.bind(null,n,i,a),i.then(n,n))}function CS(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,Tt===n&&(Qe&a)===a&&(Bt===4||Bt===3&&(Qe&62914560)===Qe&&300>Zt()-nh?(ot&2)===0&&No(n,0):um|=a,Co===Qe&&(Co=0)),vr(n)}function U_(n,i){i===0&&(i=Wt()),n=Ra(n,i),n!==null&&(Y(n,i),vr(n))}function IS(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),U_(n,a)}function NS(n,i){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),U_(n,a)}function DS(n,i){return ut(n,i)}var uh=null,Oo=null,ym=!1,ch=!1,_m=!1,Ms=0;function vr(n){n!==Oo&&n.next===null&&(Oo===null?uh=Oo=n:Oo=Oo.next=n),ch=!0,ym||(ym=!0,MS())}function Jl(n,i){if(!_m&&ch){_m=!0;do for(var a=!1,l=uh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-At(42|n)+1)-1,d&=f&~(_&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,q_(l,d))}else d=Qe,d=Rt(l,l===Tt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Ut(l,d)||(a=!0,q_(l,d));l=l.next}while(a);_m=!1}}function OS(){j_()}function j_(){ch=ym=!1;var n=0;Ms!==0&&HS()&&(n=Ms);for(var i=Zt(),a=null,l=uh;l!==null;){var f=l.next,d=z_(l,i);d===0?(l.next=null,a===null?uh=f:a.next=f,f===null&&(Oo=a)):(a=l,(n!==0||(d&3)!==0)&&(ch=!0)),l=f}fn!==0&&fn!==5||Jl(n),Ms!==0&&(Ms=0)}function z_(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var _=31-At(d),T=1<<_,O=f[_];O===-1?((T&a)===0||(T&l)!==0)&&(f[_]=yn(T,i)):O<=i&&(n.expiredLanes|=T),d&=~T}if(i=Tt,a=Qe,a=Rt(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&(ht===2||ht===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Hn(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Ut(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&Hn(l),tt(a)){case 2:case 8:a=Fn;break;case 32:a=Sn;break;case 268435456:a=Cr;break;default:a=Sn}return l=B_.bind(null,n),a=ut(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&Hn(l),n.callbackPriority=2,n.callbackNode=null,2}function B_(n,i){if(fn!==0&&fn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(lh()&&n.callbackNode!==a)return null;var l=Qe;return l=Rt(n,n===Tt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(T_(n,l,i),z_(n,Zt()),n.callbackNode!=null&&n.callbackNode===a?B_.bind(null,n):null)}function q_(n,i){if(lh())return null;T_(n,i,!0)}function MS(){GS(function(){(ot&6)!==0?ut(Rr,OS):j_()})}function vm(){if(Ms===0){var n=yo;n===0&&(n=ti,ti<<=1,(ti&261888)===0&&(ti=256)),Ms=n}return Ms}function H_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:to(""+n)}function F_(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function kS(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=H_((f[Kt]||null).action),_=l.submitter;_&&(i=(i=_[Kt]||null)?H_(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var T=new fr("action","action",null,l,f);n.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ms!==0){var O=_?F_(f,_):new FormData(f);jd(a,{pending:!0,data:O,method:f.method,action:d},null,O)}}else typeof d=="function"&&(T.preventDefault(),O=_?F_(f,_):new FormData(f),jd(a,{pending:!0,data:O,method:f.method,action:d},d,O))},currentTarget:f}]})}}for(var bm=0;bm<nd.length;bm++){var Em=nd[bm],VS=Em.toLowerCase(),PS=Em[0].toUpperCase()+Em.slice(1);Wi(VS,"on"+PS)}Wi(Ey,"onAnimationEnd"),Wi(Ty,"onAnimationIteration"),Wi(wy,"onAnimationStart"),Wi("dblclick","onDoubleClick"),Wi("focusin","onFocus"),Wi("focusout","onBlur"),Wi(Zw,"onTransitionRun"),Wi(Ww,"onTransitionStart"),Wi(eS,"onTransitionCancel"),Wi(Sy,"onTransitionEnd"),Ri("onMouseEnter",["mouseout","mouseover"]),Ri("onMouseLeave",["mouseout","mouseover"]),Ri("onPointerEnter",["pointerout","pointerover"]),Ri("onPointerLeave",["pointerout","pointerover"]),ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zl));function G_(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var T=l[_],O=T.instance,K=T.currentTarget;if(T=T.listener,O!==d&&f.isPropagationStopped())break e;d=T,f.currentTarget=K;try{d(f)}catch(re){Ac(re)}f.currentTarget=null,d=O}else for(_=0;_<l.length;_++){if(T=l[_],O=T.instance,K=T.currentTarget,T=T.listener,O!==d&&f.isPropagationStopped())break e;d=T,f.currentTarget=K;try{d(f)}catch(re){Ac(re)}f.currentTarget=null,d=O}}}}function Ke(n,i){var a=i[as];a===void 0&&(a=i[as]=new Set);var l=n+"__bubble";a.has(l)||(K_(i,n,2,!1),a.add(l))}function Tm(n,i,a){var l=0;i&&(l|=4),K_(a,n,l,i)}var hh="_reactListening"+Math.random().toString(36).slice(2);function wm(n){if(!n[hh]){n[hh]=!0,ma.forEach(function(a){a!=="selectionchange"&&(LS.has(a)||Tm(a,!1,n),Tm(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[hh]||(i[hh]=!0,Tm("selectionchange",!1,i))}}function K_(n,i,a,l){switch(Ev(i)){case 2:var f=hA;break;case 8:f=fA;break;default:f=Um}a=f.bind(null,i,a,n),f=void 0,!va||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Sm(n,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var T=l.stateNode.containerInfo;if(T===f)break;if(_===4)for(_=l.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;T!==null;){if(_=Ai(T),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){l=d=_;continue e}T=T.parentNode}}l=l.return}ms(function(){var K=d,re=Ii(a),oe=[];e:{var Q=Ay.get(n);if(Q!==void 0){var W=fr,Te=n;switch(n){case"keypress":if(Ea(a)===0)break e;case"keydown":case"keyup":W=Tc;break;case"focusin":Te="focus",W=wa;break;case"focusout":Te="blur",W=wa;break;case"beforeblur":case"afterblur":W=wa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=wl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=dc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=y;break;case Ey:case Ty:case wy:W=gc;break;case Sy:W=S;break;case"scroll":case"scrollend":W=Tl;break;case"wheel":W=Z;break;case"copy":case"cut":case"paste":W=pc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Mr;break;case"toggle":case"beforetoggle":W=Ue}var Ie=(i&4)!==0,bt=!Ie&&(n==="scroll"||n==="scrollend"),j=Ie?Q!==null?Q+"Capture":null:Q;Ie=[];for(var P=K,G;P!==null;){var se=P;if(G=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||G===null||j===null||(se=Yi(P,j),se!=null&&Ie.push(Wl(P,se,G))),bt)break;P=P.return}0<Ie.length&&(Q=new W(Q,Te,null,a,re),oe.push({event:Q,listeners:Ie}))}}if((i&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",W=n==="mouseout"||n==="pointerout",Q&&a!==vl&&(Te=a.relatedTarget||a.fromElement)&&(Ai(Te)||Te[Ee]))break e;if((W||Q)&&(Q=re.window===re?re:(Q=re.ownerDocument)?Q.defaultView||Q.parentWindow:window,W?(Te=a.relatedTarget||a.toElement,W=K,Te=Te?Ai(Te):null,Te!==null&&(bt=u(Te),Ie=Te.tag,Te!==bt||Ie!==5&&Ie!==27&&Ie!==6)&&(Te=null)):(W=null,Te=K),W!==Te)){if(Ie=wl,se="onMouseLeave",j="onMouseEnter",P="mouse",(n==="pointerout"||n==="pointerover")&&(Ie=Mr,se="onPointerLeave",j="onPointerEnter",P="pointer"),bt=W==null?Q:Ln(W),G=Te==null?Q:Ln(Te),Q=new Ie(se,P+"leave",W,a,re),Q.target=bt,Q.relatedTarget=G,se=null,Ai(re)===K&&(Ie=new Ie(j,P+"enter",Te,a,re),Ie.target=G,Ie.relatedTarget=bt,se=Ie),bt=se,W&&Te)t:{for(Ie=US,j=W,P=Te,G=0,se=j;se;se=Ie(se))G++;se=0;for(var Re=P;Re;Re=Ie(Re))se++;for(;0<G-se;)j=Ie(j),G--;for(;0<se-G;)P=Ie(P),se--;for(;G--;){if(j===P||P!==null&&j===P.alternate){Ie=j;break t}j=Ie(j),P=Ie(P)}Ie=null}else Ie=null;W!==null&&$_(oe,Q,W,Ie,!1),Te!==null&&bt!==null&&$_(oe,bt,Te,Ie,!0)}}e:{if(Q=K?Ln(K):window,W=Q.nodeName&&Q.nodeName.toLowerCase(),W==="select"||W==="input"&&Q.type==="file")var rt=cy;else if(ly(Q))if(hy)rt=Yw;else{rt=$w;var we=Kw}else W=Q.nodeName,!W||W.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?K&&eo(K.elementType)&&(rt=cy):rt=Qw;if(rt&&(rt=rt(n,K))){uy(oe,rt,a,re);break e}we&&we(n,Q,K),n==="focusout"&&K&&Q.type==="number"&&K.memoizedProps.value!=null&&pl(Q,"number",Q.value)}switch(we=K?Ln(K):window,n){case"focusin":(ly(we)||we.contentEditable==="true")&&(lo=we,Wf=K,Cl=null);break;case"focusout":Cl=Wf=lo=null;break;case"mousedown":ed=!0;break;case"contextmenu":case"mouseup":case"dragend":ed=!1,vy(oe,a,re);break;case"selectionchange":if(Jw)break;case"keydown":case"keyup":vy(oe,a,re)}var Be;if(at)e:{switch(n){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else oo?Sa(n,a)&&(Ye="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ye="onCompositionStart");Ye&&(gr&&a.locale!=="ko"&&(oo||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&oo&&(Be=El()):(hr=re,bl="value"in hr?hr.value:hr.textContent,oo=!0)),we=fh(K,Ye),0<we.length&&(Ye=new mr(Ye,n,null,a,re),oe.push({event:Ye,listeners:we}),Be?Ye.data=Be:(Be=ao(a),Be!==null&&(Ye.data=Be)))),(Be=Di?qw(n,a):Hw(n,a))&&(Ye=fh(K,"onBeforeInput"),0<Ye.length&&(we=new mr("onBeforeInput","beforeinput",null,a,re),oe.push({event:we,listeners:Ye}),we.data=Be)),kS(oe,n,K,a,re)}G_(oe,i)})}function Wl(n,i,a){return{instance:n,listener:i,currentTarget:a}}function fh(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Yi(n,a),f!=null&&l.unshift(Wl(n,f,d)),f=Yi(n,i),f!=null&&l.push(Wl(n,f,d))),n.tag===3)return l;n=n.return}return[]}function US(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function $_(n,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var T=a,O=T.alternate,K=T.stateNode;if(T=T.tag,O!==null&&O===l)break;T!==5&&T!==26&&T!==27||K===null||(O=K,f?(K=Yi(a,d),K!=null&&_.unshift(Wl(a,K,O))):f||(K=Yi(a,d),K!=null&&_.push(Wl(a,K,O)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var jS=/\r\n?/g,zS=/\u0000|\uFFFD/g;function Q_(n){return(typeof n=="string"?n:""+n).replace(jS,`
`).replace(zS,"")}function Y_(n,i){return i=Q_(i),Q_(n)===i}function vt(n,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||ri(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&ri(n,""+l);break;case"className":X(n,"class",l);break;case"tabIndex":X(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":X(n,a,l);break;case"style":_l(n,l,d);break;case"data":if(i!=="object"){X(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=to(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&vt(n,i,"name",f.name,f,null),vt(n,i,"formEncType",f.formEncType,f,null),vt(n,i,"formMethod",f.formMethod,f,null),vt(n,i,"formTarget",f.formTarget,f,null)):(vt(n,i,"encType",f.encType,f,null),vt(n,i,"method",f.method,f,null),vt(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=to(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Qi);break;case"onScroll":l!=null&&Ke("scroll",n);break;case"onScrollEnd":l!=null&&Ke("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=to(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Ke("beforetoggle",n),Ke("toggle",n),q(n,"popover",l);break;case"xlinkActuate":$(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":$(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":$(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":$(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":$(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":$(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":$(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":$(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":$(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":q(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=fc.get(a)||a,q(n,a,l))}}function Am(n,i,a,l,f,d){switch(a){case"style":_l(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"children":typeof l=="string"?ri(n,l):(typeof l=="number"||typeof l=="bigint")&&ri(n,""+l);break;case"onScroll":l!=null&&Ke("scroll",n);break;case"onScrollEnd":l!=null&&Ke("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Qi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ls.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=n[Kt]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):q(n,a,l)}}}function In(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",n),Ke("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:vt(n,i,d,_,a,null)}}f&&vt(n,i,"srcSet",a.srcSet,a,null),l&&vt(n,i,"src",a.src,a,null);return;case"input":Ke("invalid",n);var T=d=_=f=null,O=null,K=null;for(l in a)if(a.hasOwnProperty(l)){var re=a[l];if(re!=null)switch(l){case"name":f=re;break;case"type":_=re;break;case"checked":O=re;break;case"defaultChecked":K=re;break;case"value":d=re;break;case"defaultValue":T=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(137,i));break;default:vt(n,i,l,re,a,null)}}uc(n,d,T,O,K,_,f,!1);return;case"select":Ke("invalid",n),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(T=a[f],T!=null))switch(f){case"value":d=T;break;case"defaultValue":_=T;break;case"multiple":l=T;default:vt(n,i,f,T,a,null)}i=d,a=_,n.multiple=!!l,i!=null?cs(n,!!l,i,!1):a!=null&&cs(n,!!l,a,!0);return;case"textarea":Ke("invalid",n),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":l=T;break;case"defaultValue":f=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:vt(n,i,_,T,a,null)}hs(n,l,f,d);return;case"option":for(O in a)a.hasOwnProperty(O)&&(l=a[O],l!=null)&&(O==="selected"?n.selected=l&&typeof l!="function"&&typeof l!="symbol":vt(n,i,O,l,a,null));return;case"dialog":Ke("beforetoggle",n),Ke("toggle",n),Ke("cancel",n),Ke("close",n);break;case"iframe":case"object":Ke("load",n);break;case"video":case"audio":for(l=0;l<Zl.length;l++)Ke(Zl[l],n);break;case"image":Ke("error",n),Ke("load",n);break;case"details":Ke("toggle",n);break;case"embed":case"source":case"link":Ke("error",n),Ke("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(l=a[K],l!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:vt(n,i,K,l,a,null)}return;default:if(eo(i)){for(re in a)a.hasOwnProperty(re)&&(l=a[re],l!==void 0&&Am(n,i,re,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&vt(n,i,T,l,a,null))}function BS(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,T=null,O=null,K=null,re=null;for(W in a){var oe=a[W];if(a.hasOwnProperty(W)&&oe!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":O=oe;default:l.hasOwnProperty(W)||vt(n,i,W,null,l,oe)}}for(var Q in l){var W=l[Q];if(oe=a[Q],l.hasOwnProperty(Q)&&(W!=null||oe!=null))switch(Q){case"type":d=W;break;case"name":f=W;break;case"checked":K=W;break;case"defaultChecked":re=W;break;case"value":_=W;break;case"defaultValue":T=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,i));break;default:W!==oe&&vt(n,i,Q,W,l,oe)}}Wa(n,_,T,O,K,re,d,f);return;case"select":W=_=T=Q=null;for(d in a)if(O=a[d],a.hasOwnProperty(d)&&O!=null)switch(d){case"value":break;case"multiple":W=O;default:l.hasOwnProperty(d)||vt(n,i,d,null,l,O)}for(f in l)if(d=l[f],O=a[f],l.hasOwnProperty(f)&&(d!=null||O!=null))switch(f){case"value":Q=d;break;case"defaultValue":T=d;break;case"multiple":_=d;default:d!==O&&vt(n,i,f,d,l,O)}i=T,a=_,l=W,Q!=null?cs(n,!!a,Q,!1):!!l!=!!a&&(i!=null?cs(n,!!a,i,!0):cs(n,!!a,a?[]:"",!1));return;case"textarea":W=Q=null;for(T in a)if(f=a[T],a.hasOwnProperty(T)&&f!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:vt(n,i,T,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":Q=f;break;case"defaultValue":W=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&vt(n,i,_,f,l,d)}cc(n,Q,W);return;case"option":for(var Te in a)Q=a[Te],a.hasOwnProperty(Te)&&Q!=null&&!l.hasOwnProperty(Te)&&(Te==="selected"?n.selected=!1:vt(n,i,Te,null,l,Q));for(O in l)Q=l[O],W=a[O],l.hasOwnProperty(O)&&Q!==W&&(Q!=null||W!=null)&&(O==="selected"?n.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":vt(n,i,O,Q,l,W));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in a)Q=a[Ie],a.hasOwnProperty(Ie)&&Q!=null&&!l.hasOwnProperty(Ie)&&vt(n,i,Ie,null,l,Q);for(K in l)if(Q=l[K],W=a[K],l.hasOwnProperty(K)&&Q!==W&&(Q!=null||W!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:vt(n,i,K,Q,l,W)}return;default:if(eo(i)){for(var bt in a)Q=a[bt],a.hasOwnProperty(bt)&&Q!==void 0&&!l.hasOwnProperty(bt)&&Am(n,i,bt,void 0,l,Q);for(re in l)Q=l[re],W=a[re],!l.hasOwnProperty(re)||Q===W||Q===void 0&&W===void 0||Am(n,i,re,Q,l,W);return}}for(var j in a)Q=a[j],a.hasOwnProperty(j)&&Q!=null&&!l.hasOwnProperty(j)&&vt(n,i,j,null,l,Q);for(oe in l)Q=l[oe],W=a[oe],!l.hasOwnProperty(oe)||Q===W||Q==null&&W==null||vt(n,i,oe,Q,l,W)}function X_(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,T=f.duration;if(d&&T&&X_(_)){for(_=0,T=f.responseEnd,l+=1;l<a.length;l++){var O=a[l],K=O.startTime;if(K>T)break;var re=O.transferSize,oe=O.initiatorType;re&&X_(oe)&&(O=O.responseEnd,_+=re*(O<T?1:(T-K)/(O-K)))}if(--l,i+=8*(d+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var xm=null,Rm=null;function dh(n){return n.nodeType===9?n:n.ownerDocument}function J_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Z_(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Cm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Im=null;function HS(){var n=window.event;return n&&n.type==="popstate"?n===Im?!1:(Im=n,!0):(Im=null,!1)}var W_=typeof setTimeout=="function"?setTimeout:void 0,FS=typeof clearTimeout=="function"?clearTimeout:void 0,ev=typeof Promise=="function"?Promise:void 0,GS=typeof queueMicrotask=="function"?queueMicrotask:typeof ev<"u"?function(n){return ev.resolve(null).then(n).catch(KS)}:W_;function KS(n){setTimeout(function(){throw n})}function ks(n){return n==="head"}function tv(n,i){var a=i,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),Po(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")eu(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,eu(a);for(var d=a.firstChild;d;){var _=d.nextSibling,T=d.nodeName;d[Si]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&eu(n.ownerDocument.body);a=f}while(a);Po(i)}function nv(n,i){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function Nm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Nm(a),os(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function $S(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Si])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=Ui(n.nextSibling),n===null)break}return null}function QS(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Ui(n.nextSibling),n===null))return null;return n}function iv(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Ui(n.nextSibling),n===null))return null;return n}function Dm(n){return n.data==="$?"||n.data==="$~"}function Om(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function YS(n,i){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Ui(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var Mm=null;function rv(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(i===0)return Ui(n.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}n=n.nextSibling}return null}function sv(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return n;i--}else a!=="/$"&&a!=="/&"||i++}n=n.previousSibling}return null}function av(n,i,a){switch(i=dh(a),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function eu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);os(n)}var ji=new Map,ov=new Set;function mh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Qr=ce.d;ce.d={f:XS,r:JS,D:ZS,C:WS,L:eA,m:tA,X:iA,S:nA,M:rA};function XS(){var n=Qr.f(),i=sh();return n||i}function JS(n){var i=$n(n);i!==null&&i.tag===5&&i.type==="form"?S0(i):Qr.r(n)}var Mo=typeof document>"u"?null:document;function lv(n,i,a){var l=Mo;if(l&&typeof i=="string"&&i){var f=ii(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),ov.has(f)||(ov.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),In(i,"link",n),jt(i),l.head.appendChild(i)))}}function ZS(n){Qr.D(n),lv("dns-prefetch",n,null)}function WS(n,i){Qr.C(n,i),lv("preconnect",n,i)}function eA(n,i,a){Qr.L(n,i,a);var l=Mo;if(l&&n&&i){var f='link[rel="preload"][as="'+ii(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+ii(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+ii(a.imageSizes)+'"]')):f+='[href="'+ii(n)+'"]';var d=f;switch(i){case"style":d=ko(n);break;case"script":d=Vo(n)}ji.has(d)||(n=E({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),ji.set(d,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(tu(d))||i==="script"&&l.querySelector(nu(d))||(i=l.createElement("link"),In(i,"link",n),jt(i),l.head.appendChild(i)))}}function tA(n,i){Qr.m(n,i);var a=Mo;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+ii(l)+'"][href="'+ii(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Vo(n)}if(!ji.has(d)&&(n=E({rel:"modulepreload",href:n},i),ji.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(nu(d)))return}l=a.createElement("link"),In(l,"link",n),jt(l),a.head.appendChild(l)}}}function nA(n,i,a){Qr.S(n,i,a);var l=Mo;if(l&&n){var f=xi(l).hoistableStyles,d=ko(n);i=i||"default";var _=f.get(d);if(!_){var T={loading:0,preload:null};if(_=l.querySelector(tu(d)))T.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":i},a),(a=ji.get(d))&&km(n,a);var O=_=l.createElement("link");jt(O),In(O,"link",n),O._p=new Promise(function(K,re){O.onload=K,O.onerror=re}),O.addEventListener("load",function(){T.loading|=1}),O.addEventListener("error",function(){T.loading|=2}),T.loading|=4,gh(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:T},f.set(d,_)}}}function iA(n,i){Qr.X(n,i);var a=Mo;if(a&&n){var l=xi(a).hoistableScripts,f=Vo(n),d=l.get(f);d||(d=a.querySelector(nu(f)),d||(n=E({src:n,async:!0},i),(i=ji.get(f))&&Vm(n,i),d=a.createElement("script"),jt(d),In(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function rA(n,i){Qr.M(n,i);var a=Mo;if(a&&n){var l=xi(a).hoistableScripts,f=Vo(n),d=l.get(f);d||(d=a.querySelector(nu(f)),d||(n=E({src:n,async:!0,type:"module"},i),(i=ji.get(f))&&Vm(n,i),d=a.createElement("script"),jt(d),In(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function uv(n,i,a,l){var f=(f=Ae.current)?mh(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=ko(a.href),a=xi(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=ko(a.href);var d=xi(f).hoistableStyles,_=d.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,_),(d=f.querySelector(tu(n)))&&!d._p&&(_.instance=d,_.state.loading=5),ji.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ji.set(n,a),d||sA(f,n,a,_.state))),i&&l===null)throw Error(s(528,""));return _}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Vo(a),a=xi(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function ko(n){return'href="'+ii(n)+'"'}function tu(n){return'link[rel="stylesheet"]['+n+"]"}function cv(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function sA(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),In(i,"link",a),jt(i),n.head.appendChild(i))}function Vo(n){return'[src="'+ii(n)+'"]'}function nu(n){return"script[async]"+n}function hv(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+ii(a.href)+'"]');if(l)return i.instance=l,jt(l),l;var f=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),jt(l),In(l,"style",f),gh(l,a.precedence,n),i.instance=l;case"stylesheet":f=ko(a.href);var d=n.querySelector(tu(f));if(d)return i.state.loading|=4,i.instance=d,jt(d),d;l=cv(a),(f=ji.get(f))&&km(l,f),d=(n.ownerDocument||n).createElement("link"),jt(d);var _=d;return _._p=new Promise(function(T,O){_.onload=T,_.onerror=O}),In(d,"link",l),i.state.loading|=4,gh(d,a.precedence,n),i.instance=d;case"script":return d=Vo(a.src),(f=n.querySelector(nu(d)))?(i.instance=f,jt(f),f):(l=a,(f=ji.get(d))&&(l=E({},a),Vm(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),jt(f),In(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,gh(l,a.precedence,n));return i.instance}function gh(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var T=l[_];if(T.dataset.precedence===i)d=T;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function km(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Vm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var ph=null;function fv(n,i,a){if(ph===null){var l=new Map,f=ph=new Map;f.set(a,l)}else f=ph,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[Si]||d[Pt]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=n+_;var T=l.get(_);T?T.push(d):l.set(_,[d])}}return l}function dv(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function aA(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function mv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function oA(n,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=ko(l.href),d=i.querySelector(tu(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=yh.bind(n),i.then(n,n)),a.state.loading|=4,a.instance=d,jt(d);return}d=i.ownerDocument||i,l=cv(l),(f=ji.get(f))&&km(l,f),d=d.createElement("link"),jt(d);var _=d;_._p=new Promise(function(T,O){_.onload=T,_.onerror=O}),In(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=yh.bind(n),i.addEventListener("load",a),i.addEventListener("error",a))}}var Pm=0;function lA(n,i){return n.stylesheets&&n.count===0&&vh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&vh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+i);0<n.imgBytes&&Pm===0&&(Pm=62500*qS());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&vh(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>Pm?50:800)+i);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function yh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var _h=null;function vh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,_h=new Map,i.forEach(uA,n),_h=null,yh.call(n))}function uA(n,i){if(!(i.state.loading&4)){var a=_h.get(n);if(a)var l=a.get(null);else{a=new Map,_h.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=yh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var iu={$$typeof:te,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function cA(n,i,a,l,f,d,_,T,O){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vt(0),this.hiddenUpdates=Vt(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function gv(n,i,a,l,f,d,_,T,O,K,re,oe){return n=new cA(n,i,a,_,O,K,re,oe,T),i=1,d===!0&&(i|=24),d=di(3,null,null,i),n.current=d,d.stateNode=n,i=gd(),i.refCount++,n.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},vd(d),n}function pv(n){return n?(n=ho,n):ho}function yv(n,i,a,l,f,d){f=pv(f),l.context===null?l.context=f:l.pendingContext=f,l=ws(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Ss(n,l,i),a!==null&&(ui(a,n,i),Vl(a,n,i))}function _v(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Lm(n,i){_v(n,i),(n=n.alternate)&&_v(n,i)}function vv(n){if(n.tag===13||n.tag===31){var i=Ra(n,67108864);i!==null&&ui(i,n,67108864),Lm(n,67108864)}}function bv(n){if(n.tag===13||n.tag===31){var i=_i();i=cn(i);var a=Ra(n,i);a!==null&&ui(a,n,i),Lm(n,i)}}var bh=!0;function hA(n,i,a,l){var f=ee.T;ee.T=null;var d=ce.p;try{ce.p=2,Um(n,i,a,l)}finally{ce.p=d,ee.T=f}}function fA(n,i,a,l){var f=ee.T;ee.T=null;var d=ce.p;try{ce.p=8,Um(n,i,a,l)}finally{ce.p=d,ee.T=f}}function Um(n,i,a,l){if(bh){var f=jm(l);if(f===null)Sm(n,i,l,Eh,a),Tv(n,l);else if(mA(f,n,i,a,l))l.stopPropagation();else if(Tv(n,l),i&4&&-1<dA.indexOf(n)){for(;f!==null;){var d=$n(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=xt(d.pendingLanes);if(_!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var O=1<<31-At(_);T.entanglements[1]|=O,_&=~O}vr(d),(ot&6)===0&&(ih=Zt()+500,Jl(0))}}break;case 31:case 13:T=Ra(d,2),T!==null&&ui(T,d,2),sh(),Lm(d,2)}if(d=jm(l),d===null&&Sm(n,i,l,Eh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Sm(n,i,l,null,a)}}function jm(n){return n=Ii(n),zm(n)}var Eh=null;function zm(n){if(Eh=null,n=Ai(n),n!==null){var i=u(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=c(i),n!==null)return n;n=null}else if(a===31){if(n=m(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Eh=n,null}function Ev(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fi()){case Rr:return 2;case Fn:return 8;case Sn:case Gi:return 32;case Cr:return 268435456;default:return 32}default:return 32}}var Bm=!1,Vs=null,Ps=null,Ls=null,ru=new Map,su=new Map,Us=[],dA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tv(n,i){switch(n){case"focusin":case"focusout":Vs=null;break;case"dragenter":case"dragleave":Ps=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":ru.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":su.delete(i.pointerId)}}function au(n,i,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=$n(i),i!==null&&vv(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function mA(n,i,a,l,f){switch(i){case"focusin":return Vs=au(Vs,n,i,a,l,f),!0;case"dragenter":return Ps=au(Ps,n,i,a,l,f),!0;case"mouseover":return Ls=au(Ls,n,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return ru.set(d,au(ru.get(d)||null,n,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,su.set(d,au(su.get(d)||null,n,i,a,l,f)),!0}return!1}function wv(n){var i=Ai(n.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){n.blockedOn=i,hn(n.priority,function(){bv(a)});return}}else if(i===31){if(i=m(a),i!==null){n.blockedOn=i,hn(n.priority,function(){bv(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Th(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=jm(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);vl=l,a.target.dispatchEvent(l),vl=null}else return i=$n(a),i!==null&&vv(i),n.blockedOn=a,!1;i.shift()}return!0}function Sv(n,i,a){Th(n)&&a.delete(i)}function gA(){Bm=!1,Vs!==null&&Th(Vs)&&(Vs=null),Ps!==null&&Th(Ps)&&(Ps=null),Ls!==null&&Th(Ls)&&(Ls=null),ru.forEach(Sv),su.forEach(Sv)}function wh(n,i){n.blockedOn===i&&(n.blockedOn=null,Bm||(Bm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,gA)))}var Sh=null;function Av(n){Sh!==n&&(Sh=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Sh===n&&(Sh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(zm(l||a)===null)continue;break}var d=$n(a);d!==null&&(n.splice(i,3),i-=3,jd(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Po(n){function i(O){return wh(O,n)}Vs!==null&&wh(Vs,n),Ps!==null&&wh(Ps,n),Ls!==null&&wh(Ls,n),ru.forEach(i),su.forEach(i);for(var a=0;a<Us.length;a++){var l=Us[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Us.length&&(a=Us[0],a.blockedOn===null);)wv(a),a.blockedOn===null&&Us.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[Kt]||null;if(typeof d=="function")_||Av(a);else if(_){var T=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[Kt]||null)T=_.formAction;else if(zm(f)!==null)continue}else T=_.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),Av(a)}}}function xv(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function qm(n){this._internalRoot=n}Ah.prototype.render=qm.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=_i();yv(a,l,n,i,null,null)},Ah.prototype.unmount=qm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;yv(n.current,2,null,n,null,null),sh(),i[Ee]=null}};function Ah(n){this._internalRoot=n}Ah.prototype.unstable_scheduleHydration=function(n){if(n){var i=Ot();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Us.length&&i!==0&&i<Us[a].priority;a++);Us.splice(a,0,n),a===0&&wv(n)}};var Rv=e.version;if(Rv!=="19.2.3")throw Error(s(527,Rv,"19.2.3"));ce.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(i),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var pA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xh.isDisabled&&xh.supportsFiber)try{Kn=xh.inject(pA),Ft=xh}catch{}}return lu.createRoot=function(n,i){if(!o(n))throw Error(s(299));var a=!1,l="",f=k0,d=V0,_=P0;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=gv(n,1,!1,null,null,a,l,null,f,d,_,xv),n[Ee]=i.current,wm(n),new qm(i)},lu.hydrateRoot=function(n,i,a){if(!o(n))throw Error(s(299));var l=!1,f="",d=k0,_=V0,T=P0,O=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),i=gv(n,1,!0,i,a??null,l,f,O,d,_,T,xv),i.context=pv(null),a=i.current,l=_i(),l=cn(l),f=ws(l),f.callback=null,Ss(a,f,l),a=l,i.current.lanes=a,Y(i,a),vr(i),n[Ee]=i.current,wm(n),new Ah(i)},lu.version="19.2.3",lu}var Lv;function xA(){if(Lv)return Gm.exports;Lv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Gm.exports=AA(),Gm.exports}var RA=xA();const CA=()=>A.jsxs("div",{className:"fixed inset-0 -z-50 overflow-hidden pointer-events-none bg-[#020617]",children:[A.jsx("div",{className:"bg-blob opacity-20 w-[800px] h-[800px] -top-96 -left-96 bg-indigo-600 blur-[120px]"}),A.jsx("div",{className:"bg-blob opacity-30 w-[600px] h-[600px] top-1/2 -right-48 bg-pink-600 blur-[100px]",style:{animationDelay:"-5s",animationDuration:"25s"}}),A.jsx("div",{className:"bg-blob opacity-10 w-[500px] h-[500px] bottom-0 left-1/4 bg-cyan-400 blur-[80px]",style:{animationDelay:"-12s",animationDuration:"18s"}}),A.jsx("div",{className:"absolute inset-0 bg-radial-at-t from-transparent via-slate-950/40 to-slate-950"}),A.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"})]});const IA=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),NA=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Uv=r=>{const e=NA(r);return e.charAt(0).toUpperCase()+e.slice(1)},zE=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),DA=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var OA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const MA=H.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:c,...m},g)=>H.createElement("svg",{ref:g,...OA,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:zE("lucide",o),...!u&&!DA(m)&&{"aria-hidden":"true"},...m},[...c.map(([p,v])=>H.createElement(p,v)),...Array.isArray(u)?u:[u]]));const Bi=(r,e)=>{const t=H.forwardRef(({className:s,...o},u)=>H.createElement(MA,{ref:u,iconNode:e,className:zE(`lucide-${IA(Uv(r))}`,`lucide-${r}`,s),...o}));return t.displayName=Uv(r),t};const kA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],yu=Bi("arrow-left",kA);const VA=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],BE=Bi("copy",VA);const PA=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],qE=Bi("flag",PA);const LA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],HE=Bi("loader-circle",LA);const UA=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],jA=Bi("log-in",UA);const zA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],BA=Bi("plus",zA);const qA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],FE=Bi("rotate-ccw",qA);const HA=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],GE=Bi("share-2",HA);const FA=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],jv=Bi("trophy",FA);const GA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ym=Bi("user",GA);const KA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Wg=Bi("users",KA);const $A=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],KE=Bi("zap",$A),QA=()=>{};var zv={};const $E=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},YA=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[t++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[t++],c=r[t++],m=r[t++],g=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=r[t++],c=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return e.join("")},QE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],c=o+1<r.length,m=c?r[o+1]:0,g=o+2<r.length,p=g?r[o+2]:0,v=u>>2,E=(u&3)<<4|m>>4;let w=(m&15)<<2|p>>6,C=p&63;g||(C=64,c||(w=64)),s.push(t[v],t[E],t[w],t[C])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray($E(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):YA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=t[r.charAt(o++)],m=o<r.length?t[r.charAt(o)]:0;++o;const p=o<r.length?t[r.charAt(o)]:64;++o;const E=o<r.length?t[r.charAt(o)]:64;if(++o,u==null||m==null||p==null||E==null)throw new XA;const w=u<<2|m>>4;if(s.push(w),p!==64){const C=m<<4&240|p>>2;if(s.push(C),E!==64){const L=p<<6&192|E;s.push(L)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class XA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JA=function(r){const e=$E(r);return QE.encodeByteArray(e,!0)},Yh=function(r){return JA(r).replace(/\./g,"")},YE=function(r){try{return QE.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ZA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const WA=()=>ZA().__FIREBASE_DEFAULTS__,ex=()=>{if(typeof process>"u"||typeof zv>"u")return;const r=zv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},tx=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&YE(r[1]);return e&&JSON.parse(e)},Sf=()=>{try{return QA()||WA()||ex()||tx()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},XE=r=>Sf()?.emulatorHosts?.[r],nx=r=>{const e=XE(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},JE=()=>Sf()?.config,ZE=r=>Sf()?.[`_${r}`];class ix{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function al(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function WE(r){return(await fetch(r,{credentials:"include"})).ok}function rx(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Yh(JSON.stringify(t)),Yh(JSON.stringify(c)),""].join(".")}const _u={};function sx(){const r={prod:[],emulator:[]};for(const e of Object.keys(_u))_u[e]?r.emulator.push(e):r.prod.push(e);return r}function ax(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Bv=!1;function e1(r,e){if(typeof window>"u"||typeof document>"u"||!al(window.location.host)||_u[r]===e||_u[r]||Bv)return;_u[r]=e;function t(w){return`__firebase__banner__${w}`}const s="__firebase__banner",u=sx().prod.length>0;function c(){const w=document.getElementById(s);w&&w.remove()}function m(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function g(w,C){w.setAttribute("width","24"),w.setAttribute("id",C),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{Bv=!0,c()},w}function v(w,C){w.setAttribute("id",C),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function E(){const w=ax(s),C=t("text"),L=document.getElementById(C)||document.createElement("span"),z=t("learnmore"),D=document.getElementById(z)||document.createElement("a"),B=t("preprendIcon"),J=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const te=w.element;m(te),v(D,z);const fe=p();g(J,B),te.append(J,L,D,fe),document.body.appendChild(te)}u?(L.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ox(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qn())}function lx(){const r=Sf()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ux(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cx(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function hx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fx(){const r=qn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function dx(){return!lx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mx(){try{return typeof indexedDB=="object"}catch{return!1}}function gx(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const px="FirebaseError";class rs extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=px,Object.setPrototypeOf(this,rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gu.prototype.create)}}class Gu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],c=u?yx(u,s):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new rs(o,m,s)}}function yx(r,e){return r.replace(_x,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const _x=/\{\$([^}]+)}/g;function vx(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Fa(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const u=r[o],c=e[o];if(qv(u)&&qv(c)){if(!Fa(u,c))return!1}else if(u!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function qv(r){return r!==null&&typeof r=="object"}function Ku(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function bx(r,e){const t=new Ex(r,e);return t.subscribe.bind(t)}class Ex{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");Tx(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Xm),o.error===void 0&&(o.error=Xm),o.complete===void 0&&(o.complete=Xm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Tx(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Xm(){}function wn(r){return r&&r._delegate?r._delegate:r}class Ga{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ba="[DEFAULT]";class wx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new ix;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ax(e))try{this.getOrInitializeService({instanceIdentifier:Ba})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Ba){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ba){return this.instances.has(e)}getOptions(e=Ba){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Sx(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ba){return this.component?this.component.multipleInstances?e:Ba:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Sx(r){return r===Ba?void 0:r}function Ax(r){return r.instantiationMode==="EAGER"}class xx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new wx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Xe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Xe||(Xe={}));const Rx={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},Cx=Xe.INFO,Ix={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},Nx=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=Ix[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ep{constructor(e){this.name=e,this._logLevel=Cx,this._logHandler=Nx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Rx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const Dx=(r,e)=>e.some(t=>r instanceof t);let Hv,Fv;function Ox(){return Hv||(Hv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Mx(){return Fv||(Fv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const t1=new WeakMap,vg=new WeakMap,n1=new WeakMap,Jm=new WeakMap,tp=new WeakMap;function kx(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",c)},u=()=>{t(Xs(r.result)),o()},c=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&t1.set(t,r)}).catch(()=>{}),tp.set(e,r),e}function Vx(r){if(vg.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",c),r.removeEventListener("abort",c)},u=()=>{t(),o()},c=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",c),r.addEventListener("abort",c)});vg.set(r,e)}let bg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return vg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||n1.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xs(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Px(r){bg=r(bg)}function Lx(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Zm(this),e,...t);return n1.set(s,e.sort?e.sort():[e]),Xs(s)}:Mx().includes(r)?function(...e){return r.apply(Zm(this),e),Xs(t1.get(this))}:function(...e){return Xs(r.apply(Zm(this),e))}}function Ux(r){return typeof r=="function"?Lx(r):(r instanceof IDBTransaction&&Vx(r),Dx(r,Ox())?new Proxy(r,bg):r)}function Xs(r){if(r instanceof IDBRequest)return kx(r);if(Jm.has(r))return Jm.get(r);const e=Ux(r);return e!==r&&(Jm.set(r,e),tp.set(e,r)),e}const Zm=r=>tp.get(r);function jx(r,e,{blocked:t,upgrade:s,blocking:o,terminated:u}={}){const c=indexedDB.open(r,e),m=Xs(c);return s&&c.addEventListener("upgradeneeded",g=>{s(Xs(c.result),g.oldVersion,g.newVersion,Xs(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const zx=["get","getKey","getAll","getAllKeys","count"],Bx=["put","add","delete","clear"],Wm=new Map;function Gv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Wm.get(e))return Wm.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=Bx.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||zx.includes(t)))return;const u=async function(c,...m){const g=this.transaction(c,o?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),o&&g.done]))[0]};return Wm.set(e,u),u}Px(r=>({...r,get:(e,t,s)=>Gv(e,t)||r.get(e,t,s),has:(e,t)=>!!Gv(e,t)||r.has(e,t)}));class qx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Hx(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function Hx(r){return r.getComponent()?.type==="VERSION"}const Eg="@firebase/app",Kv="0.14.6";const Zr=new ep("@firebase/app"),Fx="@firebase/app-compat",Gx="@firebase/analytics-compat",Kx="@firebase/analytics",$x="@firebase/app-check-compat",Qx="@firebase/app-check",Yx="@firebase/auth",Xx="@firebase/auth-compat",Jx="@firebase/database",Zx="@firebase/data-connect",Wx="@firebase/database-compat",eR="@firebase/functions",tR="@firebase/functions-compat",nR="@firebase/installations",iR="@firebase/installations-compat",rR="@firebase/messaging",sR="@firebase/messaging-compat",aR="@firebase/performance",oR="@firebase/performance-compat",lR="@firebase/remote-config",uR="@firebase/remote-config-compat",cR="@firebase/storage",hR="@firebase/storage-compat",fR="@firebase/firestore",dR="@firebase/ai",mR="@firebase/firestore-compat",gR="firebase",pR="12.6.0";const Tg="[DEFAULT]",yR={[Eg]:"fire-core",[Fx]:"fire-core-compat",[Kx]:"fire-analytics",[Gx]:"fire-analytics-compat",[Qx]:"fire-app-check",[$x]:"fire-app-check-compat",[Yx]:"fire-auth",[Xx]:"fire-auth-compat",[Jx]:"fire-rtdb",[Zx]:"fire-data-connect",[Wx]:"fire-rtdb-compat",[eR]:"fire-fn",[tR]:"fire-fn-compat",[nR]:"fire-iid",[iR]:"fire-iid-compat",[rR]:"fire-fcm",[sR]:"fire-fcm-compat",[aR]:"fire-perf",[oR]:"fire-perf-compat",[lR]:"fire-rc",[uR]:"fire-rc-compat",[cR]:"fire-gcs",[hR]:"fire-gcs-compat",[fR]:"fire-fst",[mR]:"fire-fst-compat",[dR]:"fire-vertex","fire-js":"fire-js",[gR]:"fire-js-all"};const Du=new Map,_R=new Map,wg=new Map;function $v(r,e){try{r.container.addComponent(e)}catch(t){Zr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Xo(r){const e=r.name;if(wg.has(e))return Zr.debug(`There were multiple attempts to register component ${e}.`),!1;wg.set(e,r);for(const t of Du.values())$v(t,r);for(const t of _R.values())$v(t,r);return!0}function np(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function nr(r){return r==null?!1:r.settings!==void 0}const vR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Js=new Gu("app","Firebase",vR);class bR{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ga("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Js.create("app-deleted",{appName:this._name})}}const ol=pR;function i1(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Tg,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Js.create("bad-app-name",{appName:String(o)});if(t||(t=JE()),!t)throw Js.create("no-options");const u=Du.get(o);if(u){if(Fa(t,u.options)&&Fa(s,u.config))return u;throw Js.create("duplicate-app",{appName:o})}const c=new xx(o);for(const g of wg.values())c.addComponent(g);const m=new bR(t,s,c);return Du.set(o,m),m}function r1(r=Tg){const e=Du.get(r);if(!e&&r===Tg&&JE())return i1();if(!e)throw Js.create("no-app",{appName:r});return e}function Qv(){return Array.from(Du.values())}function Zs(r,e,t){let s=yR[r]??r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zr.warn(c.join(" "));return}Xo(new Ga(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const ER="firebase-heartbeat-database",TR=1,Ou="firebase-heartbeat-store";let eg=null;function s1(){return eg||(eg=jx(ER,TR,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ou)}catch(t){console.warn(t)}}}}).catch(r=>{throw Js.create("idb-open",{originalErrorMessage:r.message})})),eg}async function wR(r){try{const t=(await s1()).transaction(Ou),s=await t.objectStore(Ou).get(a1(r));return await t.done,s}catch(e){if(e instanceof rs)Zr.warn(e.message);else{const t=Js.create("idb-get",{originalErrorMessage:e?.message});Zr.warn(t.message)}}}async function Yv(r,e){try{const s=(await s1()).transaction(Ou,"readwrite");await s.objectStore(Ou).put(e,a1(r)),await s.done}catch(t){if(t instanceof rs)Zr.warn(t.message);else{const s=Js.create("idb-set",{originalErrorMessage:t?.message});Zr.warn(s.message)}}}function a1(r){return`${r.name}!${r.options.appId}`}const SR=1024,AR=30;class xR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new CR(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Xv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>AR){const o=IR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Zr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Xv(),{heartbeatsToSend:t,unsentEntries:s}=RR(this._heartbeatsCache.heartbeats),o=Yh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Zr.warn(e),""}}}function Xv(){return new Date().toISOString().substring(0,10)}function RR(r,e=SR){const t=[];let s=r.slice();for(const o of r){const u=t.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),Jv(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Jv(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class CR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mx()?gx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await wR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Yv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Yv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Jv(r){return Yh(JSON.stringify({version:2,heartbeats:r})).length}function IR(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}function NR(r){Xo(new Ga("platform-logger",e=>new qx(e),"PRIVATE")),Xo(new Ga("heartbeat",e=>new xR(e),"PRIVATE")),Zs(Eg,Kv,r),Zs(Eg,Kv,"esm2020"),Zs("fire-js","")}NR("");var Zv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ws,o1;(function(){var r;function e(R,x){function I(){}I.prototype=x.prototype,R.F=x.prototype,R.prototype=new I,R.prototype.constructor=R,R.D=function(k,M,U){for(var N=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)N[qe-2]=arguments[qe];return x.prototype[M].apply(k,N)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,x,I){I||(I=0);const k=Array(16);if(typeof x=="string")for(var M=0;M<16;++M)k[M]=x.charCodeAt(I++)|x.charCodeAt(I++)<<8|x.charCodeAt(I++)<<16|x.charCodeAt(I++)<<24;else for(M=0;M<16;++M)k[M]=x[I++]|x[I++]<<8|x[I++]<<16|x[I++]<<24;x=R.g[0],I=R.g[1],M=R.g[2];let U=R.g[3],N;N=x+(U^I&(M^U))+k[0]+3614090360&4294967295,x=I+(N<<7&4294967295|N>>>25),N=U+(M^x&(I^M))+k[1]+3905402710&4294967295,U=x+(N<<12&4294967295|N>>>20),N=M+(I^U&(x^I))+k[2]+606105819&4294967295,M=U+(N<<17&4294967295|N>>>15),N=I+(x^M&(U^x))+k[3]+3250441966&4294967295,I=M+(N<<22&4294967295|N>>>10),N=x+(U^I&(M^U))+k[4]+4118548399&4294967295,x=I+(N<<7&4294967295|N>>>25),N=U+(M^x&(I^M))+k[5]+1200080426&4294967295,U=x+(N<<12&4294967295|N>>>20),N=M+(I^U&(x^I))+k[6]+2821735955&4294967295,M=U+(N<<17&4294967295|N>>>15),N=I+(x^M&(U^x))+k[7]+4249261313&4294967295,I=M+(N<<22&4294967295|N>>>10),N=x+(U^I&(M^U))+k[8]+1770035416&4294967295,x=I+(N<<7&4294967295|N>>>25),N=U+(M^x&(I^M))+k[9]+2336552879&4294967295,U=x+(N<<12&4294967295|N>>>20),N=M+(I^U&(x^I))+k[10]+4294925233&4294967295,M=U+(N<<17&4294967295|N>>>15),N=I+(x^M&(U^x))+k[11]+2304563134&4294967295,I=M+(N<<22&4294967295|N>>>10),N=x+(U^I&(M^U))+k[12]+1804603682&4294967295,x=I+(N<<7&4294967295|N>>>25),N=U+(M^x&(I^M))+k[13]+4254626195&4294967295,U=x+(N<<12&4294967295|N>>>20),N=M+(I^U&(x^I))+k[14]+2792965006&4294967295,M=U+(N<<17&4294967295|N>>>15),N=I+(x^M&(U^x))+k[15]+1236535329&4294967295,I=M+(N<<22&4294967295|N>>>10),N=x+(M^U&(I^M))+k[1]+4129170786&4294967295,x=I+(N<<5&4294967295|N>>>27),N=U+(I^M&(x^I))+k[6]+3225465664&4294967295,U=x+(N<<9&4294967295|N>>>23),N=M+(x^I&(U^x))+k[11]+643717713&4294967295,M=U+(N<<14&4294967295|N>>>18),N=I+(U^x&(M^U))+k[0]+3921069994&4294967295,I=M+(N<<20&4294967295|N>>>12),N=x+(M^U&(I^M))+k[5]+3593408605&4294967295,x=I+(N<<5&4294967295|N>>>27),N=U+(I^M&(x^I))+k[10]+38016083&4294967295,U=x+(N<<9&4294967295|N>>>23),N=M+(x^I&(U^x))+k[15]+3634488961&4294967295,M=U+(N<<14&4294967295|N>>>18),N=I+(U^x&(M^U))+k[4]+3889429448&4294967295,I=M+(N<<20&4294967295|N>>>12),N=x+(M^U&(I^M))+k[9]+568446438&4294967295,x=I+(N<<5&4294967295|N>>>27),N=U+(I^M&(x^I))+k[14]+3275163606&4294967295,U=x+(N<<9&4294967295|N>>>23),N=M+(x^I&(U^x))+k[3]+4107603335&4294967295,M=U+(N<<14&4294967295|N>>>18),N=I+(U^x&(M^U))+k[8]+1163531501&4294967295,I=M+(N<<20&4294967295|N>>>12),N=x+(M^U&(I^M))+k[13]+2850285829&4294967295,x=I+(N<<5&4294967295|N>>>27),N=U+(I^M&(x^I))+k[2]+4243563512&4294967295,U=x+(N<<9&4294967295|N>>>23),N=M+(x^I&(U^x))+k[7]+1735328473&4294967295,M=U+(N<<14&4294967295|N>>>18),N=I+(U^x&(M^U))+k[12]+2368359562&4294967295,I=M+(N<<20&4294967295|N>>>12),N=x+(I^M^U)+k[5]+4294588738&4294967295,x=I+(N<<4&4294967295|N>>>28),N=U+(x^I^M)+k[8]+2272392833&4294967295,U=x+(N<<11&4294967295|N>>>21),N=M+(U^x^I)+k[11]+1839030562&4294967295,M=U+(N<<16&4294967295|N>>>16),N=I+(M^U^x)+k[14]+4259657740&4294967295,I=M+(N<<23&4294967295|N>>>9),N=x+(I^M^U)+k[1]+2763975236&4294967295,x=I+(N<<4&4294967295|N>>>28),N=U+(x^I^M)+k[4]+1272893353&4294967295,U=x+(N<<11&4294967295|N>>>21),N=M+(U^x^I)+k[7]+4139469664&4294967295,M=U+(N<<16&4294967295|N>>>16),N=I+(M^U^x)+k[10]+3200236656&4294967295,I=M+(N<<23&4294967295|N>>>9),N=x+(I^M^U)+k[13]+681279174&4294967295,x=I+(N<<4&4294967295|N>>>28),N=U+(x^I^M)+k[0]+3936430074&4294967295,U=x+(N<<11&4294967295|N>>>21),N=M+(U^x^I)+k[3]+3572445317&4294967295,M=U+(N<<16&4294967295|N>>>16),N=I+(M^U^x)+k[6]+76029189&4294967295,I=M+(N<<23&4294967295|N>>>9),N=x+(I^M^U)+k[9]+3654602809&4294967295,x=I+(N<<4&4294967295|N>>>28),N=U+(x^I^M)+k[12]+3873151461&4294967295,U=x+(N<<11&4294967295|N>>>21),N=M+(U^x^I)+k[15]+530742520&4294967295,M=U+(N<<16&4294967295|N>>>16),N=I+(M^U^x)+k[2]+3299628645&4294967295,I=M+(N<<23&4294967295|N>>>9),N=x+(M^(I|~U))+k[0]+4096336452&4294967295,x=I+(N<<6&4294967295|N>>>26),N=U+(I^(x|~M))+k[7]+1126891415&4294967295,U=x+(N<<10&4294967295|N>>>22),N=M+(x^(U|~I))+k[14]+2878612391&4294967295,M=U+(N<<15&4294967295|N>>>17),N=I+(U^(M|~x))+k[5]+4237533241&4294967295,I=M+(N<<21&4294967295|N>>>11),N=x+(M^(I|~U))+k[12]+1700485571&4294967295,x=I+(N<<6&4294967295|N>>>26),N=U+(I^(x|~M))+k[3]+2399980690&4294967295,U=x+(N<<10&4294967295|N>>>22),N=M+(x^(U|~I))+k[10]+4293915773&4294967295,M=U+(N<<15&4294967295|N>>>17),N=I+(U^(M|~x))+k[1]+2240044497&4294967295,I=M+(N<<21&4294967295|N>>>11),N=x+(M^(I|~U))+k[8]+1873313359&4294967295,x=I+(N<<6&4294967295|N>>>26),N=U+(I^(x|~M))+k[15]+4264355552&4294967295,U=x+(N<<10&4294967295|N>>>22),N=M+(x^(U|~I))+k[6]+2734768916&4294967295,M=U+(N<<15&4294967295|N>>>17),N=I+(U^(M|~x))+k[13]+1309151649&4294967295,I=M+(N<<21&4294967295|N>>>11),N=x+(M^(I|~U))+k[4]+4149444226&4294967295,x=I+(N<<6&4294967295|N>>>26),N=U+(I^(x|~M))+k[11]+3174756917&4294967295,U=x+(N<<10&4294967295|N>>>22),N=M+(x^(U|~I))+k[2]+718787259&4294967295,M=U+(N<<15&4294967295|N>>>17),N=I+(U^(M|~x))+k[9]+3951481745&4294967295,R.g[0]=R.g[0]+x&4294967295,R.g[1]=R.g[1]+(M+(N<<21&4294967295|N>>>11))&4294967295,R.g[2]=R.g[2]+M&4294967295,R.g[3]=R.g[3]+U&4294967295}s.prototype.v=function(R,x){x===void 0&&(x=R.length);const I=x-this.blockSize,k=this.C;let M=this.h,U=0;for(;U<x;){if(M==0)for(;U<=I;)o(this,R,U),U+=this.blockSize;if(typeof R=="string"){for(;U<x;)if(k[M++]=R.charCodeAt(U++),M==this.blockSize){o(this,k),M=0;break}}else for(;U<x;)if(k[M++]=R[U++],M==this.blockSize){o(this,k),M=0;break}}this.h=M,this.o+=x},s.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var x=1;x<R.length-8;++x)R[x]=0;x=this.o*8;for(var I=R.length-8;I<R.length;++I)R[I]=x&255,x/=256;for(this.v(R),R=Array(16),x=0,I=0;I<4;++I)for(let k=0;k<32;k+=8)R[x++]=this.g[I]>>>k&255;return R};function u(R,x){var I=m;return Object.prototype.hasOwnProperty.call(I,R)?I[R]:I[R]=x(R)}function c(R,x){this.h=x;const I=[];let k=!0;for(let M=R.length-1;M>=0;M--){const U=R[M]|0;k&&U==x||(I[M]=U,k=!1)}this.g=I}var m={};function g(R){return-128<=R&&R<128?u(R,function(x){return new c([x|0],x<0?-1:0)}):new c([R|0],R<0?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return E;if(R<0)return D(p(-R));const x=[];let I=1;for(let k=0;R>=I;k++)x[k]=R/I|0,I*=4294967296;return new c(x,0)}function v(R,x){if(R.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(R.charAt(0)=="-")return D(v(R.substring(1),x));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=p(Math.pow(x,8));let k=E;for(let U=0;U<R.length;U+=8){var M=Math.min(8,R.length-U);const N=parseInt(R.substring(U,U+M),x);M<8?(M=p(Math.pow(x,M)),k=k.j(M).add(p(N))):(k=k.j(I),k=k.add(p(N)))}return k}var E=g(0),w=g(1),C=g(16777216);r=c.prototype,r.m=function(){if(z(this))return-D(this).m();let R=0,x=1;for(let I=0;I<this.g.length;I++){const k=this.i(I);R+=(k>=0?k:4294967296+k)*x,x*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(L(this))return"0";if(z(this))return"-"+D(this).toString(R);const x=p(Math.pow(R,6));var I=this;let k="";for(;;){const M=fe(I,x).g;I=B(I,M.j(x));let U=((I.g.length>0?I.g[0]:I.h)>>>0).toString(R);if(I=M,L(I))return U+k;for(;U.length<6;)U="0"+U;k=U+k}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function L(R){if(R.h!=0)return!1;for(let x=0;x<R.g.length;x++)if(R.g[x]!=0)return!1;return!0}function z(R){return R.h==-1}r.l=function(R){return R=B(this,R),z(R)?-1:L(R)?0:1};function D(R){const x=R.g.length,I=[];for(let k=0;k<x;k++)I[k]=~R.g[k];return new c(I,~R.h).add(w)}r.abs=function(){return z(this)?D(this):this},r.add=function(R){const x=Math.max(this.g.length,R.g.length),I=[];let k=0;for(let M=0;M<=x;M++){let U=k+(this.i(M)&65535)+(R.i(M)&65535),N=(U>>>16)+(this.i(M)>>>16)+(R.i(M)>>>16);k=N>>>16,U&=65535,N&=65535,I[M]=N<<16|U}return new c(I,I[I.length-1]&-2147483648?-1:0)};function B(R,x){return R.add(D(x))}r.j=function(R){if(L(this)||L(R))return E;if(z(this))return z(R)?D(this).j(D(R)):D(D(this).j(R));if(z(R))return D(this.j(D(R)));if(this.l(C)<0&&R.l(C)<0)return p(this.m()*R.m());const x=this.g.length+R.g.length,I=[];for(var k=0;k<2*x;k++)I[k]=0;for(k=0;k<this.g.length;k++)for(let M=0;M<R.g.length;M++){const U=this.i(k)>>>16,N=this.i(k)&65535,qe=R.i(M)>>>16,dt=R.i(M)&65535;I[2*k+2*M]+=N*dt,J(I,2*k+2*M),I[2*k+2*M+1]+=U*dt,J(I,2*k+2*M+1),I[2*k+2*M+1]+=N*qe,J(I,2*k+2*M+1),I[2*k+2*M+2]+=U*qe,J(I,2*k+2*M+2)}for(R=0;R<x;R++)I[R]=I[2*R+1]<<16|I[2*R];for(R=x;R<2*x;R++)I[R]=0;return new c(I,0)};function J(R,x){for(;(R[x]&65535)!=R[x];)R[x+1]+=R[x]>>>16,R[x]&=65535,x++}function te(R,x){this.g=R,this.h=x}function fe(R,x){if(L(x))throw Error("division by zero");if(L(R))return new te(E,E);if(z(R))return x=fe(D(R),x),new te(D(x.g),D(x.h));if(z(x))return x=fe(R,D(x)),new te(D(x.g),x.h);if(R.g.length>30){if(z(R)||z(x))throw Error("slowDivide_ only works with positive integers.");for(var I=w,k=x;k.l(R)<=0;)I=ue(I),k=ue(k);var M=ie(I,1),U=ie(k,1);for(k=ie(k,2),I=ie(I,2);!L(k);){var N=U.add(k);N.l(R)<=0&&(M=M.add(I),U=N),k=ie(k,1),I=ie(I,1)}return x=B(R,M.j(x)),new te(M,x)}for(M=E;R.l(x)>=0;){for(I=Math.max(1,Math.floor(R.m()/x.m())),k=Math.ceil(Math.log(I)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),U=p(I),N=U.j(x);z(N)||N.l(R)>0;)I-=k,U=p(I),N=U.j(x);L(U)&&(U=w),M=M.add(U),R=B(R,N)}return new te(M,R)}r.B=function(R){return fe(this,R).h},r.and=function(R){const x=Math.max(this.g.length,R.g.length),I=[];for(let k=0;k<x;k++)I[k]=this.i(k)&R.i(k);return new c(I,this.h&R.h)},r.or=function(R){const x=Math.max(this.g.length,R.g.length),I=[];for(let k=0;k<x;k++)I[k]=this.i(k)|R.i(k);return new c(I,this.h|R.h)},r.xor=function(R){const x=Math.max(this.g.length,R.g.length),I=[];for(let k=0;k<x;k++)I[k]=this.i(k)^R.i(k);return new c(I,this.h^R.h)};function ue(R){const x=R.g.length+1,I=[];for(let k=0;k<x;k++)I[k]=R.i(k)<<1|R.i(k-1)>>>31;return new c(I,R.h)}function ie(R,x){const I=x>>5;x%=32;const k=R.g.length-I,M=[];for(let U=0;U<k;U++)M[U]=x>0?R.i(U+I)>>>x|R.i(U+I+1)<<32-x:R.i(U+I);return new c(M,R.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,o1=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,Ws=c}).apply(typeof Zv<"u"?Zv:typeof self<"u"?self:typeof window<"u"?window:{});var Rh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var l1,cu,u1,Vh,Sg,c1,h1,f1;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rh=="object"&&Rh];for(var y=0;y<h.length;++y){var b=h[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var s=t(this);function o(h,y){if(y)e:{var b=s;h=h.split(".");for(var S=0;S<h.length-1;S++){var F=h[S];if(!(F in b))break e;b=b[F]}h=h[h.length-1],S=b[h],y=y(S),y!=S&&y!=null&&e(b,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var b=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&b.push([S,y[S]]);return b}});var u=u||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,b){return h.call.apply(h.bind,arguments)}function p(h,y,b){return p=g,p.apply(null,arguments)}function v(h,y){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function E(h,y){function b(){}b.prototype=y.prototype,h.Z=y.prototype,h.prototype=new b,h.prototype.constructor=h,h.Ob=function(S,F,Z){for(var ge=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)ge[Ue-2]=arguments[Ue];return y.prototype[F].apply(S,ge)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function C(h){const y=h.length;if(y>0){const b=Array(y);for(let S=0;S<y;S++)b[S]=h[S];return b}return[]}function L(h,y){for(let S=1;S<arguments.length;S++){const F=arguments[S];var b=typeof F;if(b=b!="object"?b:F?Array.isArray(F)?"array":b:"null",b=="array"||b=="object"&&typeof F.length=="number"){b=h.length||0;const Z=F.length||0;h.length=b+Z;for(let ge=0;ge<Z;ge++)h[b+ge]=F[ge]}else h.push(F)}}class z{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function D(h){c.setTimeout(()=>{throw h},0)}function B(){var h=R;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class J{constructor(){this.h=this.g=null}add(y,b){const S=te.get();S.set(y,b),this.h?this.h.next=S:this.g=S,this.h=S}}var te=new z(()=>new fe,h=>h.reset());class fe{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,ie=!1,R=new J,x=()=>{const h=Promise.resolve(void 0);ue=()=>{h.then(I)}};function I(){for(var h;h=B();){try{h.h.call(h.g)}catch(b){D(b)}var y=te;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ie=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};c.addEventListener("test",b,y),c.removeEventListener("test",b,y)}catch{}return h})();function N(h){return/^[\s\xa0]*$/.test(h)}function qe(h,y){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(qe,M),qe.prototype.init=function(h,y){const b=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(b=="mouseover"?y=h.fromElement:b=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&qe.Z.h.call(this)},qe.prototype.h=function(){qe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var dt="closure_listenable_"+(Math.random()*1e6|0),ee=0;function ce(h,y,b,S,F){this.listener=h,this.proxy=null,this.src=y,this.type=b,this.capture=!!S,this.ha=F,this.key=++ee,this.da=this.fa=!1}function be(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Me(h,y,b){for(const S in h)y.call(b,h[S],S,h)}function ze(h,y){for(const b in h)y.call(void 0,h[b],b,h)}function V(h){const y={};for(const b in h)y[b]=h[b];return y}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(h,y){let b,S;for(let F=1;F<arguments.length;F++){S=arguments[F];for(b in S)h[b]=S[b];for(let Z=0;Z<ne.length;Z++)b=ne[Z],Object.prototype.hasOwnProperty.call(S,b)&&(h[b]=S[b])}}function de(h){this.src=h,this.g={},this.h=0}de.prototype.add=function(h,y,b,S,F){const Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);const ge=Ae(h,y,S,F);return ge>-1?(y=h[ge],b||(y.fa=!1)):(y=new ce(y,this.src,Z,!!S,F),y.fa=b,h.push(y)),y};function _e(h,y){const b=y.type;if(b in h.g){var S=h.g[b],F=Array.prototype.indexOf.call(S,y,void 0),Z;(Z=F>=0)&&Array.prototype.splice.call(S,F,1),Z&&(be(y),h.g[b].length==0&&(delete h.g[b],h.h--))}}function Ae(h,y,b,S){for(let F=0;F<h.length;++F){const Z=h[F];if(!Z.da&&Z.listener==y&&Z.capture==!!b&&Z.ha==S)return F}return-1}var Le="closure_lm_"+(Math.random()*1e6|0),Dt={};function lt(h,y,b,S,F){if(Array.isArray(y)){for(let Z=0;Z<y.length;Z++)lt(h,y[Z],b,S,F);return null}return b=Hi(b),h&&h[dt]?h.J(y,b,m(S)?!!S.capture:!1,F):Ht(h,y,b,!1,S,F)}function Ht(h,y,b,S,F,Z){if(!y)throw Error("Invalid event type");const ge=m(F)?!!F.capture:!!F;let Ue=Pn(h);if(Ue||(h[Le]=Ue=new de(h)),b=Ue.add(y,b,S,ge,Z),b.proxy)return b;if(S=wi(),b.proxy=S,S.src=h,S.listener=b,h.addEventListener)U||(F=ge),F===void 0&&(F=!1),h.addEventListener(y.toString(),S,F);else if(h.attachEvent)h.attachEvent(Jt(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function wi(){function h(b){return y.call(h.src,h.listener,b)}const y=hi;return h}function Vn(h,y,b,S,F){if(Array.isArray(y))for(var Z=0;Z<y.length;Z++)Vn(h,y[Z],b,S,F);else S=m(S)?!!S.capture:!!S,b=Hi(b),h&&h[dt]?(h=h.i,Z=String(y).toString(),Z in h.g&&(y=h.g[Z],b=Ae(y,b,S,F),b>-1&&(be(y[b]),Array.prototype.splice.call(y,b,1),y.length==0&&(delete h.g[Z],h.h--)))):h&&(h=Pn(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ae(y,b,S,F)),(b=h>-1?y[h]:null)&&qi(b))}function qi(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[dt])_e(y.i,h);else{var b=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(b,S,h.capture):y.detachEvent?y.detachEvent(Jt(b),S):y.addListener&&y.removeListener&&y.removeListener(S),(b=Pn(y))?(_e(b,h),b.h==0&&(b.src=null,y[Le]=null)):be(h)}}}function Jt(h){return h in Dt?Dt[h]:Dt[h]="on"+h}function hi(h,y){if(h.da)h=!0;else{y=new qe(y,this);const b=h.listener,S=h.ha||h.src;h.fa&&qi(h),h=b.call(S,y)}return h}function Pn(h){return h=h[Le],h instanceof de?h:null}var ar="__closure_events_fn_"+(Math.random()*1e9>>>0);function Hi(h){return typeof h=="function"?h:(h[ar]||(h[ar]=function(y){return h.handleEvent(y)}),h[ar])}function St(){k.call(this),this.i=new de(this),this.M=this,this.G=null}E(St,k),St.prototype[dt]=!0,St.prototype.removeEventListener=function(h,y,b,S){Vn(this,h,y,b,S)};function ut(h,y){var b,S=h.G;if(S)for(b=[];S;S=S.G)b.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new M(y,h);else if(y instanceof M)y.target=y.target||h;else{var F=y;y=new M(S,h),me(y,F)}F=!0;let Z,ge;if(b)for(ge=b.length-1;ge>=0;ge--)Z=y.g=b[ge],F=Hn(Z,S,!0,y)&&F;if(Z=y.g=h,F=Hn(Z,S,!0,y)&&F,F=Hn(Z,S,!1,y)&&F,b)for(ge=0;ge<b.length;ge++)Z=y.g=b[ge],F=Hn(Z,S,!1,y)&&F}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const b=h.g[y];for(let S=0;S<b.length;S++)be(b[S]);delete h.g[y],h.h--}}this.G=null},St.prototype.J=function(h,y,b,S){return this.i.add(String(h),y,!1,b,S)},St.prototype.K=function(h,y,b,S){return this.i.add(String(h),y,!0,b,S)};function Hn(h,y,b,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let F=!0;for(let Z=0;Z<y.length;++Z){const ge=y[Z];if(ge&&!ge.da&&ge.capture==b){const Ue=ge.listener,$t=ge.ha||ge.src;ge.fa&&_e(h.i,ge),F=Ue.call($t,S)!==!1&&F}}return F&&!S.defaultPrevented}function or(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function lr(h){h.g=or(()=>{h.g=null,h.i&&(h.i=!1,lr(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Zt extends k{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:lr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fi(h){k.call(this),this.h=h,this.g={}}E(Fi,k);var Rr=[];function Fn(h){Me(h.g,function(y,b){this.g.hasOwnProperty(b)&&qi(y)},h),h.g={}}Fi.prototype.N=function(){Fi.Z.N.call(this),Fn(this)},Fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sn=c.JSON.stringify,Gi=c.JSON.parse,Cr=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Gn(){}function Ir(){}var Kn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ft(){M.call(this,"d")}E(Ft,M);function pn(){M.call(this,"c")}E(pn,M);var At={},Nr=null;function Ki(){return Nr=Nr||new St}At.Ia="serverreachability";function ss(h){M.call(this,At.Ia,h)}E(ss,M);function ti(h){const y=Ki();ut(y,new ss(y))}At.STAT_EVENT="statevent";function $i(h,y){M.call(this,At.STAT_EVENT,h),this.stat=y}E($i,M);function He(h){const y=Ki();ut(y,new $i(y,h))}At.Ja="timingevent";function xt(h,y){M.call(this,At.Ja,h),this.size=y}E(xt,M);function Rt(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function Ut(){this.g=!0}Ut.prototype.ua=function(){this.g=!1};function yn(h,y,b,S,F,Z){h.info(function(){if(h.g)if(Z){var ge="",Ue=Z.split("&");for(let at=0;at<Ue.length;at++){var $t=Ue[at].split("=");if($t.length>1){const Mt=$t[0];$t=$t[1];const Di=Mt.split("_");ge=Di.length>=2&&Di[1]=="type"?ge+(Mt+"="+$t+"&"):ge+(Mt+"=redacted&")}}}else ge=null;else ge=Z;return"XMLHTTP REQ ("+S+") [attempt "+F+"]: "+y+`
`+b+`
`+ge})}function Wt(h,y,b,S,F,Z,ge){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+F+"]: "+y+`
`+b+`
`+Z+" "+ge})}function Vt(h,y,b,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+mt(h,b)+(S?" "+S:"")})}function Y(h,y){h.info(function(){return"TIMEOUT: "+y})}Ut.prototype.info=function(){};function mt(h,y){if(!h.g)return y;if(!y)return null;try{const Z=JSON.parse(y);if(Z){for(h=0;h<Z.length;h++)if(Array.isArray(Z[h])){var b=Z[h];if(!(b.length<2)){var S=b[1];if(Array.isArray(S)&&!(S.length<1)){var F=S[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ge=1;ge<S.length;ge++)S[ge]=""}}}}return Sn(Z)}catch{return y}}var gt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},he;function cn(){}E(cn,Gn),cn.prototype.g=function(){return new XMLHttpRequest},he=new cn;function tt(h){return encodeURIComponent(String(h))}function Ot(h){var y=1;h=h.split(":");const b=[];for(;y>0&&h.length;)b.push(h.shift()),y--;return h.length&&b.push(h.join(":")),b}function hn(h,y,b,S){this.j=h,this.i=y,this.l=b,this.S=S||1,this.V=new Fi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pt}function pt(){this.i=null,this.g="",this.h=!1}var Pt={},Kt={};function Ee(h,y,b){h.M=1,h.A=Ci($(y)),h.u=b,h.R=!0,as(h,null)}function as(h,y){h.F=Date.now(),Si(h),h.B=$(h.A);var b=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),eo(b.i,"t",S),h.C=0,b=h.j.L,h.h=new pt,h.g=bc(h.j,b?y:null,!h.u),h.P>0&&(h.O=new Zt(p(h.Y,h,h.g),h.P)),y=h.V,b=h.g,S=h.ba;var F="readystatechange";Array.isArray(F)||(F&&(Rr[0]=F.toString()),F=Rr);for(let Z=0;Z<F.length;Z++){const ge=lt(b,F[Z],S||y.handleEvent,!1,y.h||y);if(!ge)break;y.g[ge.key]=ge}y=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),ti(),yn(h.i,h.v,h.B,h.l,h.S,h.u)}hn.prototype.ba=function(h){h=h.target;const y=this.O;y&&Xi(h)==3?y.j():this.Y(h)},hn.prototype.Y=function(h){try{if(h==this.g)e:{const Ue=Xi(this.g),$t=this.g.ya(),at=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||An(this.g)))){this.K||Ue!=4||$t==7||($t==8||at<=0?ti(3):ti(2)),Ai(this);var y=this.g.ca();this.X=y;var b=Ja(this);if(this.o=y==200,Wt(this.i,this.v,this.B,this.l,this.S,Ue,y),this.o){if(this.U&&!this.L){t:{if(this.g){var S,F=this.g;if((S=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(S)){var Z=S;break t}}Z=null}if(h=Z)Vt(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xi(this,h);else{this.o=!1,this.m=3,He(12),Ln(this),$n(this);break e}}if(this.R){h=!0;let Mt;for(;!this.K&&this.C<b.length;)if(Mt=da(this,b),Mt==Kt){Ue==4&&(this.m=4,He(14),h=!1),Vt(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==Pt){this.m=4,He(15),Vt(this.i,this.l,b,"[Invalid Chunk]"),h=!1;break}else Vt(this.i,this.l,Mt,null),xi(this,Mt);if(Za(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||b.length!=0||this.h.h||(this.m=1,He(16),h=!1),this.o=this.o&&h,!h)Vt(this.i,this.l,b,"[Invalid Chunked Response]"),Ln(this),$n(this);else if(b.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Sl(ge),ge.P=!0,He(11))}}else Vt(this.i,this.l,b,null),xi(this,b);Ue==4&&Ln(this),this.o&&!this.K&&(Ue==4?pc(this.j,this):(this.o=!1,Si(this)))}else Or(this.g),y==400&&b.indexOf("Unknown SID")>0?(this.m=3,He(12)):(this.m=0,He(13)),Ln(this),$n(this)}}}catch{}};function Ja(h){if(!Za(h))return h.g.la();const y=An(h.g);if(y==="")return"";let b="";const S=y.length,F=Xi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Ln(h),$n(h),"";h.h.i=new c.TextDecoder}for(let Z=0;Z<S;Z++)h.h.h=!0,b+=h.h.i.decode(y[Z],{stream:!(F&&Z==S-1)});return y.length=0,h.h.g+=b,h.C=0,h.h.g}function Za(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function da(h,y){var b=h.C,S=y.indexOf(`
`,b);return S==-1?Kt:(b=Number(y.substring(b,S)),isNaN(b)?Pt:(S+=1,S+b>y.length?Kt:(y=y.slice(S,S+b),h.C=S+b,y)))}hn.prototype.cancel=function(){this.K=!0,Ln(this)};function Si(h){h.T=Date.now()+h.H,os(h,h.H)}function os(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Rt(p(h.aa,h),y)}function Ai(h){h.D&&(c.clearTimeout(h.D),h.D=null)}hn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Y(this.i,this.B),this.M!=2&&(ti(),He(17)),Ln(this),this.m=2,$n(this)):os(this,this.T-h)};function $n(h){h.j.I==0||h.K||pc(h.j,h)}function Ln(h){Ai(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Fn(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function xi(h,y){try{var b=h.j;if(b.I!=0&&(b.g==h||Ri(b.h,h))){if(!h.L&&Ri(b.h,h)&&b.I==3){try{var S=b.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var F=S;if(F[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<h.F)so(b),ps(b);else break e;wa(b),He(18)}}else b.xa=F[1],0<b.xa-b.K&&F[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Rt(p(b.Va,b),6e3));ni(b.h)<=1&&b.ta&&(b.ta=void 0)}else mr(b,11)}else if((h.L||b.g==h)&&so(b),!N(y))for(F=b.Ba.g.parse(y),y=0;y<F.length;y++){let at=F[y];const Mt=at[0];if(!(Mt<=b.K))if(b.K=Mt,at=at[1],b.I==2)if(at[0]=="c"){b.M=at[1],b.ba=at[2];const Di=at[3];Di!=null&&(b.ka=Di,b.j.info("VER="+b.ka));const gr=at[4];gr!=null&&(b.za=gr,b.j.info("SVER="+b.za));const Ji=at[5];Ji!=null&&typeof Ji=="number"&&Ji>0&&(S=1.5*Ji,b.O=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const Zi=h.g;if(Zi){const Sa=Zi.g?Zi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sa){var Z=S.h;Z.g||Sa.indexOf("spdy")==-1&&Sa.indexOf("quic")==-1&&Sa.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(ga(Z,Z.h),Z.h=null))}if(S.G){const ao=Zi.g?Zi.g.getResponseHeader("X-HTTP-Session-Id"):null;ao&&(S.wa=ao,Fe(S.J,S.G,ao))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-h.F,b.j.info("Handshake RTT: "+b.T+"ms")),S=b;var ge=h;if(S.na=vc(S,S.L?S.ba:null,S.W),ge.L){us(S.h,ge);var Ue=ge,$t=S.O;$t&&(Ue.H=$t),Ue.D&&(Ai(Ue),Si(Ue)),S.g=ge}else mc(S);b.i.length>0&&dr(b)}else at[0]!="stop"&&at[0]!="close"||mr(b,7);else b.I==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?mr(b,7):Tl(b):at[0]!="noop"&&b.l&&b.l.qa(at),b.A=0)}}ti(4)}catch{}}var jt=class{constructor(h,y){this.g=h,this.map=y}};function ma(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ls(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ni(h){return h.h?1:h.g?h.g.size:0}function Ri(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function ga(h,y){h.g?h.g.add(y):h.h=y}function us(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}ma.prototype.cancel=function(){if(this.i=pa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function pa(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const b of h.g.values())y=y.concat(b.G);return y}return C(h.i)}var en=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function q(h,y){if(h){h=h.split("&");for(let b=0;b<h.length;b++){const S=h[b].indexOf("=");let F,Z=null;S>=0?(F=h[b].substring(0,S),Z=h[b].substring(S+1)):F=h[b],y(F,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function X(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof X?(this.l=h.l,ye(this,h.j),this.o=h.o,this.g=h.g,Se(this,h.u),this.h=h.h,We(this,fc(h.i)),this.m=h.m):h&&(y=String(h).match(en))?(this.l=!1,ye(this,y[1]||"",!0),this.o=ur(y[2]||""),this.g=ur(y[3]||"",!0),Se(this,y[4]),this.h=ur(y[5]||"",!0),We(this,y[6]||"",!0),this.m=ur(y[7]||"")):(this.l=!1,this.i=new hs(null,this.l))}X.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(ya(y,Wa,!0),":");var b=this.g;return(b||y=="file")&&(h.push("//"),(y=this.o)&&h.push(ya(y,Wa,!0),"@"),h.push(tt(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&h.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(ya(b,b.charAt(0)=="/"?pl:uc,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",ya(b,cc)),h.join("")},X.prototype.resolve=function(h){const y=$(this);let b=!!h.j;b?ye(y,h.j):b=!!h.o,b?y.o=h.o:b=!!h.g,b?y.g=h.g:b=h.u!=null;var S=h.h;if(b)Se(y,h.u);else if(b=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var F=y.h.lastIndexOf("/");F!=-1&&(S=y.h.slice(0,F+1)+S)}if(F=S,F==".."||F==".")S="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){S=F.lastIndexOf("/",0)==0,F=F.split("/");const Z=[];for(let ge=0;ge<F.length;){const Ue=F[ge++];Ue=="."?S&&ge==F.length&&Z.push(""):Ue==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),S&&ge==F.length&&Z.push("")):(Z.push(Ue),S=!0)}S=Z.join("/")}else S=F}return b?y.h=S:b=h.i.toString()!=="",b?We(y,fc(h.i)):b=!!h.m,b&&(y.m=h.m),y};function $(h){return new X(h)}function ye(h,y,b){h.j=b?ur(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Se(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function We(h,y,b){y instanceof hs?(h.i=y,to(h.i,h.l)):(b||(y=ya(y,cs)),h.i=new hs(y,h.l))}function Fe(h,y,b){h.i.set(y,b)}function Ci(h){return Fe(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function ur(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ya(h,y,b){return typeof h=="string"?(h=encodeURI(h).replace(y,ii),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ii(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Wa=/[#\/\?@]/g,uc=/[#\?:]/g,pl=/[#\?]/g,cs=/[#\?@]/g,cc=/#/g;function hs(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function ri(h){h.g||(h.g=new Map,h.h=0,h.i&&q(h.i,function(y,b){h.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}r=hs.prototype,r.add=function(h,y){ri(this),this.i=null,h=fs(this,h);let b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(y),this.h+=1,this};function hc(h,y){ri(h),y=fs(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function yl(h,y){return ri(h),y=fs(h,y),h.g.has(y)}r.forEach=function(h,y){ri(this),this.g.forEach(function(b,S){b.forEach(function(F){h.call(y,F,S,this)},this)},this)};function _l(h,y){ri(h);let b=[];if(typeof y=="string")yl(h,y)&&(b=b.concat(h.g.get(fs(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)b=b.concat(h[y]);return b}r.set=function(h,y){return ri(this),this.i=null,h=fs(this,h),yl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=_l(this,h),h.length>0?String(h[0]):y):y};function eo(h,y,b){hc(h,y),b.length>0&&(h.i=null,h.g.set(fs(h,y),C(b)),h.h+=b.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var b=y[S];const F=tt(b);b=_l(this,b);for(let Z=0;Z<b.length;Z++){let ge=F;b[Z]!==""&&(ge+="="+tt(b[Z])),h.push(ge)}}return this.i=h.join("&")};function fc(h){const y=new hs;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function fs(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function to(h,y){y&&!h.j&&(ri(h),h.i=null,h.g.forEach(function(b,S){const F=S.toLowerCase();S!=F&&(hc(this,S),eo(this,F,b))},h)),h.j=y}function Qi(h,y){const b=new Ut;if(c.Image){const S=new Image;S.onload=v(Ii,b,"TestLoadImage: loaded",!0,y,S),S.onerror=v(Ii,b,"TestLoadImage: error",!1,y,S),S.onabort=v(Ii,b,"TestLoadImage: abort",!1,y,S),S.ontimeout=v(Ii,b,"TestLoadImage: timeout",!1,y,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function vl(h,y){const b=new Ut,S=new AbortController,F=setTimeout(()=>{S.abort(),Ii(b,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(Z=>{clearTimeout(F),Z.ok?Ii(b,"TestPingServer: ok",!0,y):Ii(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(F),Ii(b,"TestPingServer: error",!1,y)})}function Ii(h,y,b,S,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),S(b)}catch{}}function ds(){this.g=new Cr}function cr(h){this.i=h.Sb||null,this.h=h.ab||!1}E(cr,Gn),cr.prototype.g=function(){return new _a(this.i,this.h)};function _a(h,y){St.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(_a,St),r=_a.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Yi(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ms(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Yi(this)),this.g&&(this.readyState=3,Yi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;no(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function no(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?ms(this):Yi(this),this.readyState==3&&no(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,ms(this))},r.Na=function(h){this.g&&(this.response=h,ms(this))},r.ga=function(){this.g&&ms(this)};function ms(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Yi(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=y.next();return h.join(`\r
`)};function Yi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(_a.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ni(h){let y="";return Me(h,function(b,S){y+=S,y+=":",y+=b,y+=`\r
`}),y}function va(h,y,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=Ni(b),typeof h=="string"?b!=null&&tt(b):Fe(h,y,b))}function yt(h){St.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(yt,St);var hr=/^https?$/i,bl=["POST","PUT"];r=yt.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():he.g(),this.g.onreadystatechange=w(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Z){ba(this,Z);return}if(h=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var F in S)b.set(F,S[F]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Z of S.keys())b.set(Z,S.get(Z));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find(Z=>Z.toLowerCase()=="content-type"),F=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(bl,y,void 0)>=0)||S||F||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,ge]of b)this.g.setRequestHeader(Z,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Z){ba(this,Z)}};function ba(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,El(h),Dr(h)}function El(h){h.A||(h.A=!0,ut(h,"complete"),ut(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,ut(this,"complete"),ut(this,"abort"),Dr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dr(this,!0)),yt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Ea(this):this.Xa())},r.Xa=function(){Ea(this)};function Ea(h){if(h.h&&typeof u<"u"){if(h.v&&Xi(h)==4)setTimeout(h.Ca.bind(h),0);else if(ut(h,"readystatechange"),Xi(h)==4){h.h=!1;try{const Z=h.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var S;if(S=Z===0){let ge=String(h.D).match(en)[1]||null;!ge&&c.self&&c.self.location&&(ge=c.self.location.protocol.slice(0,-1)),S=!hr.test(ge?ge.toLowerCase():"")}b=S}if(b)ut(h,"complete"),ut(h,"success");else{h.o=6;try{var F=Xi(h)>2?h.g.statusText:""}catch{F=""}h.l=F+" ["+h.ca()+"]",El(h)}}finally{Dr(h)}}}}function Dr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const b=h.g;h.g=null,y||ut(h,"ready");try{b.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Xi(h){return h.g?h.g.readyState:0}r.ca=function(){try{return Xi(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Gi(y)}};function An(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Or(h){const y={};h=(h.g&&Xi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(N(h[S]))continue;var b=Ot(h[S]);const F=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Z=y[F]||[];y[F]=Z,Z.push(b)}ze(y,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fr(h,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||y}function gs(h){this.za=0,this.i=[],this.j=new Ut,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fr("baseRetryDelayMs",5e3,h),this.Za=fr("retryDelaySeedMs",1e4,h),this.Ta=fr("forwardChannelMaxRetries",2,h),this.va=fr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ma(h&&h.concurrentRequestLimit),this.Ba=new ds,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=gs.prototype,r.ka=8,r.I=1,r.connect=function(h,y,b,S){He(0),this.W=h,this.H=y||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.J=vc(this,null,this.W),dr(this)};function Tl(h){if(io(h),h.I==3){var y=h.V++,b=$(h.J);if(Fe(b,"SID",h.M),Fe(b,"RID",y),Fe(b,"TYPE","terminate"),Ta(h,b),y=new hn(h,h.j,y),y.M=2,y.A=Ci($(b)),b=!1,c.navigator&&c.navigator.sendBeacon)try{b=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!b&&c.Image&&(new Image().src=y.A,b=!0),b||(y.g=bc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Si(y)}_c(h)}function ps(h){h.g&&(Sl(h),h.g.cancel(),h.g=null)}function io(h){ps(h),h.v&&(c.clearTimeout(h.v),h.v=null),so(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function dr(h){if(!ls(h.h)&&!h.m){h.m=!0;var y=h.Ea;ue||x(),ie||(ue(),ie=!0),R.add(y,h),h.D=0}}function ro(h,y){return ni(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Rt(p(h.Ea,h,y),yc(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const F=new hn(this,this.j,h);let Z=this.o;if(this.U&&(Z?(Z=V(Z),me(Z,this.U)):Z=this.U),this.u!==null||this.R||(F.J=Z,Z=null),this.S)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=dc(this,F,y),b=$(this.J),Fe(b,"RID",h),Fe(b,"CVER",22),this.G&&Fe(b,"X-HTTP-Session-Id",this.G),Ta(this,b),Z&&(this.R?y="headers="+tt(Ni(Z))+"&"+y:this.u&&va(b,this.u,Z)),ga(this.h,F),this.Ra&&Fe(b,"TYPE","init"),this.S?(Fe(b,"$req",y),Fe(b,"SID","null"),F.U=!0,Ee(F,b,null)):Ee(F,b,y),this.I=2}}else this.I==3&&(h?wl(this,h):this.i.length==0||ls(this.h)||wl(this))};function wl(h,y){var b;y?b=y.l:b=h.V++;const S=$(h.J);Fe(S,"SID",h.M),Fe(S,"RID",b),Fe(S,"AID",h.K),Ta(h,S),h.u&&h.o&&va(S,h.u,h.o),b=new hn(h,h.j,b,h.D+1),h.u===null&&(b.J=h.o),y&&(h.i=y.G.concat(h.i)),y=dc(h,b,1e3),b.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),ga(h.h,b),Ee(b,S,y)}function Ta(h,y){h.H&&Me(h.H,function(b,S){Fe(y,S,b)}),h.l&&Me({},function(b,S){Fe(y,S,b)})}function dc(h,y,b){b=Math.min(h.i.length,b);const S=h.l?p(h.l.Ka,h.l,h):null;e:{var F=h.i;let Ue=-1;for(;;){const $t=["count="+b];Ue==-1?b>0?(Ue=F[0].g,$t.push("ofs="+Ue)):Ue=0:$t.push("ofs="+Ue);let at=!0;for(let Mt=0;Mt<b;Mt++){var Z=F[Mt].g;const Di=F[Mt].map;if(Z-=Ue,Z<0)Ue=Math.max(0,F[Mt].g-100),at=!1;else try{Z="req"+Z+"_"||"";try{var ge=Di instanceof Map?Di:Object.entries(Di);for(const[gr,Ji]of ge){let Zi=Ji;m(Ji)&&(Zi=Sn(Ji)),$t.push(Z+gr+"="+encodeURIComponent(Zi))}}catch(gr){throw $t.push(Z+"type="+encodeURIComponent("_badmap")),gr}}catch{S&&S(Di)}}if(at){ge=$t.join("&");break e}}ge=void 0}return h=h.i.splice(0,b),y.G=h,ge}function mc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ue||x(),ie||(ue(),ie=!0),R.add(y,h),h.A=0}}function wa(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Rt(p(h.Da,h),yc(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,gc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Rt(p(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,He(10),ps(this),gc(this))};function Sl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function gc(h){h.g=new hn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=$(h.na);Fe(y,"RID","rpc"),Fe(y,"SID",h.M),Fe(y,"AID",h.K),Fe(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Fe(y,"TO",h.ia),Fe(y,"TYPE","xmlhttp"),Ta(h,y),h.u&&h.o&&va(y,h.u,h.o),h.O&&(h.g.H=h.O);var b=h.g;h=h.ba,b.M=1,b.A=Ci($(y)),b.u=null,b.R=!0,as(b,h)}r.Va=function(){this.C!=null&&(this.C=null,ps(this),wa(this),He(19))};function so(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function pc(h,y){var b=null;if(h.g==y){so(h),Sl(h),h.g=null;var S=2}else if(Ri(h.h,y))b=y.G,us(h.h,y),S=1;else return;if(h.I!=0){if(y.o)if(S==1){b=y.u?y.u.length:0,y=Date.now()-y.F;var F=h.D;S=Ki(),ut(S,new xt(S,b)),dr(h)}else mc(h);else if(F=y.m,F==3||F==0&&y.X>0||!(S==1&&ro(h,y)||S==2&&wa(h)))switch(b&&b.length>0&&(y=h.h,y.i=y.i.concat(b)),F){case 1:mr(h,5);break;case 4:mr(h,10);break;case 3:mr(h,6);break;default:mr(h,2)}}}function yc(h,y){let b=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(b*=2),b*y}function mr(h,y){if(h.j.info("Error code "+y),y==2){var b=p(h.bb,h),S=h.Ua;const F=!S;S=new X(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ye(S,"https"),Ci(S),F?Qi(S.toString(),b):vl(S.toString(),b)}else He(2);h.I=0,h.l&&h.l.pa(y),_c(h),io(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),He(2)):(this.j.info("Failed to ping google.com"),He(1))};function _c(h){if(h.I=0,h.ja=[],h.l){const y=pa(h.h);(y.length!=0||h.i.length!=0)&&(L(h.ja,y),L(h.ja,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.oa()}}function vc(h,y,b){var S=b instanceof X?$(b):new X(b);if(S.g!="")y&&(S.g=y+"."+S.g),Se(S,S.u);else{var F=c.location;S=F.protocol,y=y?y+"."+F.hostname:F.hostname,F=+F.port;const Z=new X(null);S&&ye(Z,S),y&&(Z.g=y),F&&Se(Z,F),b&&(Z.h=b),S=Z}return b=h.G,y=h.wa,b&&y&&Fe(S,b,y),Fe(S,"VER",h.ka),Ta(h,S),S}function bc(h,y,b){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new yt(new cr({ab:b})):new yt(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ec(){}r=Ec.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function ys(){}ys.prototype.g=function(h,y){return new Qn(h,y)};function Qn(h,y){St.call(this),this.g=new gs(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!N(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!N(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Mr(this)}E(Qn,St),Qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qn.prototype.close=function(){Tl(this.g)},Qn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.v&&(b={},b.__data__=Sn(h),h=b);y.i.push(new jt(y.Ya++,h)),y.I==3&&dr(y)},Qn.prototype.N=function(){this.g.l=null,delete this.j,Tl(this.g),delete this.g,Qn.Z.N.call(this)};function Tc(h){Ft.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const b in y){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(Tc,Ft);function wc(){pn.call(this),this.status=1}E(wc,pn);function Mr(h){this.g=h}E(Mr,Ec),Mr.prototype.ra=function(){ut(this.g,"a")},Mr.prototype.qa=function(h){ut(this.g,new Tc(h))},Mr.prototype.pa=function(h){ut(this.g,new wc)},Mr.prototype.oa=function(){ut(this.g,"b")},ys.prototype.createWebChannel=ys.prototype.g,Qn.prototype.send=Qn.prototype.o,Qn.prototype.open=Qn.prototype.m,Qn.prototype.close=Qn.prototype.close,f1=function(){return new ys},h1=function(){return Ki()},c1=At,Sg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},gt.NO_ERROR=0,gt.TIMEOUT=8,gt.HTTP_ERROR=6,Vh=gt,Gt.COMPLETE="complete",u1=Gt,Ir.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",St.prototype.listen=St.prototype.J,cu=Ir,yt.prototype.listenOnce=yt.prototype.K,yt.prototype.getLastError=yt.prototype.Ha,yt.prototype.getLastErrorCode=yt.prototype.ya,yt.prototype.getStatus=yt.prototype.ca,yt.prototype.getResponseJson=yt.prototype.La,yt.prototype.getResponseText=yt.prototype.la,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Fa,l1=yt}).apply(typeof Rh<"u"?Rh:typeof self<"u"?self:typeof window<"u"?window:{});const Wv="@firebase/firestore",eb="4.9.3";class Bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");let ll="12.7.0";const Ka=new ep("@firebase/firestore");function Lo(){return Ka.logLevel}function ve(r,...e){if(Ka.logLevel<=Xe.DEBUG){const t=e.map(ip);Ka.debug(`Firestore (${ll}): ${r}`,...t)}}function Wr(r,...e){if(Ka.logLevel<=Xe.ERROR){const t=e.map(ip);Ka.error(`Firestore (${ll}): ${r}`,...t)}}function Jo(r,...e){if(Ka.logLevel<=Xe.WARN){const t=e.map(ip);Ka.warn(`Firestore (${ll}): ${r}`,...t)}}function ip(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Ce(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,d1(r,s,t)}function d1(r,e,t){let s=`FIRESTORE (${ll}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Wr(s),new Error(s)}function it(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||d1(e,o,s)}function Ve(r,e){return r}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends rs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ea{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class m1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Bn.UNAUTHENTICATED)))}shutdown(){}}class OR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class MR{constructor(e){this.t=e,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let u=new ea;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ea,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ea)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(it(typeof s.accessToken=="string",31837,{l:s}),new m1(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new Bn(e)}}class kR{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class VR{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new kR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class tb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){it(this.o===void 0,3512);const s=u=>{u.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new tb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(it(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new tb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function LR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class rp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=LR(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<t&&(s+=e.charAt(o[u]%62))}return s}}function Je(r,e){return r<e?-1:r>e?1:0}function Ag(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const o=r.charAt(s),u=e.charAt(s);if(o!==u)return tg(o)===tg(u)?Je(o,u):tg(o)?1:-1}return Je(r.length,e.length)}const UR=55296,jR=57343;function tg(r){const e=r.charCodeAt(0);return e>=UR&&e<=jR}function Zo(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}const nb="__name__";class br{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ce(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return br.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof br?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const u=br.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return Je(e.length,t.length)}static compareSegments(e,t){const s=br.isNumericId(e),o=br.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?br.extractNumericId(e).compare(br.extractNumericId(t)):Ag(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ws.fromString(e.substring(4,e.length-2))}}class Et extends br{construct(e,t,s){return new Et(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new pe(ae.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Et(t)}static emptyPath(){return new Et([])}}const zR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mn extends br{construct(e,t,s){return new Mn(e,t,s)}static isValidIdentifier(e){return zR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nb}static keyField(){return new Mn([nb])}static fromServerFormat(e){const t=[];let s="",o=0;const u=()=>{if(s.length===0)throw new pe(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new pe(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new pe(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(s+=m,o++):(u(),o++)}if(u(),c)throw new pe(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mn(t)}static emptyPath(){return new Mn([])}}class xe{constructor(e){this.path=e}static fromPath(e){return new xe(Et.fromString(e))}static fromName(e){return new xe(Et.fromString(e).popFirst(5))}static empty(){return new xe(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new Et(e.slice()))}}function g1(r,e,t){if(!t)throw new pe(ae.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function BR(r,e,t,s){if(e===!0&&s===!0)throw new pe(ae.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function ib(r){if(!xe.isDocumentKey(r))throw new pe(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function rb(r){if(xe.isDocumentKey(r))throw new pe(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function p1(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Af(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ce(12329,{type:typeof r})}function Jr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new pe(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Af(r);throw new pe(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function un(r,e){const t={typeString:r};return e&&(t.value=e),t}function $u(r,e){if(!p1(r))throw new pe(ae.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const c=r[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){t=`Expected '${s}' field to equal '${u.value}'`;break}}if(t)throw new pe(ae.INVALID_ARGUMENT,t);return!0}const sb=-62135596800,ab=1e6;class Nt{static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*ab);return new Nt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<sb)throw new pe(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ab}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($u(e,Nt._jsonSchema))return new Nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-sb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Nt._jsonSchemaVersion="firestore/timestamp/1.0",Nt._jsonSchema={type:un("string",Nt._jsonSchemaVersion),seconds:un("number"),nanoseconds:un("number")};class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new Nt(0,0))}static max(){return new Ne(new Nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Mu=-1;function qR(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ne.fromTimestamp(s===1e9?new Nt(t+1,0):new Nt(t,s));return new ra(o,xe.empty(),e)}function HR(r){return new ra(r.readTime,r.key,Mu)}class ra{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ra(Ne.min(),xe.empty(),Mu)}static max(){return new ra(Ne.max(),xe.empty(),Mu)}}function FR(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(r.documentKey,e.documentKey),t!==0?t:Je(r.largestBatchId,e.largestBatchId))}const GR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ul(r){if(r.code!==ae.FAILED_PRECONDITION||r.message!==GR)throw r;ve("LocalStore","Unexpectedly lost primary lease")}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):le.reject(t)}static resolve(e){return new le(((t,s)=>{t(e)}))}static reject(e){return new le(((t,s)=>{s(e)}))}static waitFor(e){return new le(((t,s)=>{let o=0,u=0,c=!1;e.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&t()}),(g=>s(g)))})),c=!0,u===o&&t()}))}static or(e){let t=le.resolve(!1);for(const s of e)t=t.next((o=>o?le.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,u)=>{s.push(t.call(this,o,u))})),this.waitFor(s)}static mapArray(e,t){return new le(((s,o)=>{const u=e.length,c=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;t(e[p]).next((v=>{c[p]=v,++m,m===u&&s(c)}),(v=>o(v)))}}))}static doWhile(e,t){return new le(((s,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):s()};u()}))}}function $R(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function cl(r){return r.name==="IndexedDbTransactionError"}class xf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xf.ce=-1;const sp=-1;function Qu(r){return r==null}function Xh(r){return r===0&&1/r==-1/0}function QR(r){return typeof r=="number"&&Number.isInteger(r)&&!Xh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const y1="";function YR(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=ob(e)),e=XR(r.get(t),e);return ob(e)}function XR(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":t+="";break;case y1:t+="";break;default:t+=u}}return t}function ob(r){return r+y1+""}function lb(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ha(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function _1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Lt{constructor(e,t){this.comparator=e,this.root=t||Dn.EMPTY}insert(e,t){return new Lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ch(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ch(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ch(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ch(this.root,e,this.comparator,!0)}}class Ch{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?s(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dn{constructor(e,t,s,o,u){this.key=e,this.value=t,this.color=s??Dn.RED,this.left=o??Dn.EMPTY,this.right=u??Dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,u){return new Dn(e??this.key,t??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,s),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Dn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1;Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,s,o,u){return this}insert(e,t,s){return new Dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gn{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ub(this.data.getIterator())}getIteratorFrom(e){return new ub(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof gn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new gn(this.comparator);return t.data=e,t}}class ub{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ei{constructor(e){this.fields=e,e.sort(Mn.comparator)}static empty(){return new Ei([])}unionWith(e){let t=new gn(Mn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Ei(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class v1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class kn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new v1("Invalid base64 string: "+u):u}})(e);return new kn(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(e);return new kn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kn.EMPTY_BYTE_STRING=new kn("");const JR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sa(r){if(it(!!r,39018),typeof r=="string"){let e=0;const t=JR.exec(r);if(it(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Xt(r.seconds),nanos:Xt(r.nanos)}}function Xt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function aa(r){return typeof r=="string"?kn.fromBase64String(r):kn.fromUint8Array(r)}const b1="server_timestamp",E1="__type__",T1="__previous_value__",w1="__local_write_time__";function ap(r){return(r?.mapValue?.fields||{})[E1]?.stringValue===b1}function Rf(r){const e=r.mapValue.fields[T1];return ap(e)?Rf(e):e}function ku(r){const e=sa(r.mapValue.fields[w1].timestampValue);return new Nt(e.seconds,e.nanos)}class ZR{constructor(e,t,s,o,u,c,m,g,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=v}}const Jh="(default)";class Vu{constructor(e,t){this.projectId=e,this.database=t||Jh}static empty(){return new Vu("","")}get isDefaultDatabase(){return this.database===Jh}isEqual(e){return e instanceof Vu&&e.projectId===this.projectId&&e.database===this.database}}const S1="__type__",WR="__max__",Ih={mapValue:{}},A1="__vector__",Zh="value";function oa(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?ap(r)?4:t2(r)?9007199254740991:e2(r)?10:11:Ce(28295,{value:r})}function xr(r,e){if(r===e)return!0;const t=oa(r);if(t!==oa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ku(r).isEqual(ku(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=sa(o.timestampValue),m=sa(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return aa(o.bytesValue).isEqual(aa(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return Xt(o.geoPointValue.latitude)===Xt(u.geoPointValue.latitude)&&Xt(o.geoPointValue.longitude)===Xt(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Xt(o.integerValue)===Xt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=Xt(o.doubleValue),m=Xt(u.doubleValue);return c===m?Xh(c)===Xh(m):isNaN(c)&&isNaN(m)}return!1})(r,e);case 9:return Zo(r.arrayValue.values||[],e.arrayValue.values||[],xr);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(lb(c)!==lb(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!xr(c[g],m[g])))return!1;return!0})(r,e);default:return Ce(52216,{left:r})}}function Pu(r,e){return(r.values||[]).find((t=>xr(t,e)))!==void 0}function Wo(r,e){if(r===e)return 0;const t=oa(r),s=oa(e);if(t!==s)return Je(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(r.booleanValue,e.booleanValue);case 2:return(function(u,c){const m=Xt(u.integerValue||u.doubleValue),g=Xt(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(r,e);case 3:return cb(r.timestampValue,e.timestampValue);case 4:return cb(ku(r),ku(e));case 5:return Ag(r.stringValue,e.stringValue);case 6:return(function(u,c){const m=aa(u),g=aa(c);return m.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(u,c){const m=u.split("/"),g=c.split("/");for(let p=0;p<m.length&&p<g.length;p++){const v=Je(m[p],g[p]);if(v!==0)return v}return Je(m.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,c){const m=Je(Xt(u.latitude),Xt(c.latitude));return m!==0?m:Je(Xt(u.longitude),Xt(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return hb(r.arrayValue,e.arrayValue);case 10:return(function(u,c){const m=u.fields||{},g=c.fields||{},p=m[Zh]?.arrayValue,v=g[Zh]?.arrayValue,E=Je(p?.values?.length||0,v?.values?.length||0);return E!==0?E:hb(p,v)})(r.mapValue,e.mapValue);case 11:return(function(u,c){if(u===Ih.mapValue&&c===Ih.mapValue)return 0;if(u===Ih.mapValue)return 1;if(c===Ih.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=c.fields||{},v=Object.keys(p);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const w=Ag(g[E],v[E]);if(w!==0)return w;const C=Wo(m[g[E]],p[v[E]]);if(C!==0)return C}return Je(g.length,v.length)})(r.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function cb(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Je(r,e);const t=sa(r),s=sa(e),o=Je(t.seconds,s.seconds);return o!==0?o:Je(t.nanos,s.nanos)}function hb(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const u=Wo(t[o],s[o]);if(u)return u}return Je(t.length,s.length)}function el(r){return xg(r)}function xg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=sa(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return aa(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return xe.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const u of t.values||[])o?o=!1:s+=",",s+=xg(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const c of s)u?u=!1:o+=",",o+=`${c}:${xg(t.fields[c])}`;return o+"}"})(r.mapValue):Ce(61005,{value:r})}function Ph(r){switch(oa(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rf(r);return e?16+Ph(e):16;case 5:return 2*r.stringValue.length;case 6:return aa(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Ph(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return ha(s.fields,((u,c)=>{o+=u.length+Ph(c)})),o})(r.mapValue);default:throw Ce(13486,{value:r})}}function fb(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Rg(r){return!!r&&"integerValue"in r}function op(r){return!!r&&"arrayValue"in r}function db(r){return!!r&&"nullValue"in r}function mb(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Lh(r){return!!r&&"mapValue"in r}function e2(r){return(r?.mapValue?.fields||{})[S1]?.stringValue===A1}function vu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ha(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=vu(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vu(r.arrayValue.values[t]);return e}return{...r}}function t2(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===WR}class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Lh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vu(t)}setAll(e){let t=Mn.emptyPath(),s={},o=[];e.forEach(((c,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=m.popLast()}c?s[m.lastSegment()]=vu(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,s,o)}delete(e){const t=this.field(e.popLast());Lh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Lh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){ha(t,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new Zn(vu(this.value))}}function x1(r){const e=[];return ha(r.fields,((t,s)=>{const o=new Mn([t]);if(Lh(s)){const u=x1(s.mapValue).fields;if(u.length===0)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)})),new Ei(e)}class Tn{constructor(e,t,s,o,u,c,m){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(e){return new Tn(e,0,Ne.min(),Ne.min(),Ne.min(),Zn.empty(),0)}static newFoundDocument(e,t,s,o){return new Tn(e,1,t,Ne.min(),s,o,0)}static newNoDocument(e,t){return new Tn(e,2,t,Ne.min(),Ne.min(),Zn.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,Ne.min(),Ne.min(),Zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wh{constructor(e,t){this.position=e,this.inclusive=t}}function gb(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],c=r.position[o];if(u.field.isKeyField()?s=xe.comparator(xe.fromName(c.referenceValue),t.key):s=Wo(c,t.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function pb(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!xr(r.position[t],e.position[t]))return!1;return!0}class ef{constructor(e,t="asc"){this.field=e,this.dir=t}}function n2(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class R1{}class ln extends R1{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new r2(e,t,s):t==="array-contains"?new o2(e,s):t==="in"?new l2(e,s):t==="not-in"?new u2(e,s):t==="array-contains-any"?new c2(e,s):new ln(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new s2(e,s):new a2(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Wo(t,this.value)):t!==null&&oa(this.value)===oa(t)&&this.matchesComparison(Wo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends R1{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new rr(e,t)}matches(e){return C1(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function C1(r){return r.op==="and"}function I1(r){return i2(r)&&C1(r)}function i2(r){for(const e of r.filters)if(e instanceof rr)return!1;return!0}function Cg(r){if(r instanceof ln)return r.field.canonicalString()+r.op.toString()+el(r.value);if(I1(r))return r.filters.map((e=>Cg(e))).join(",");{const e=r.filters.map((t=>Cg(t))).join(",");return`${r.op}(${e})`}}function N1(r,e){return r instanceof ln?(function(s,o){return o instanceof ln&&s.op===o.op&&s.field.isEqual(o.field)&&xr(s.value,o.value)})(r,e):r instanceof rr?(function(s,o){return o instanceof rr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,c,m)=>u&&N1(c,o.filters[m])),!0):!1})(r,e):void Ce(19439)}function D1(r){return r instanceof ln?(function(t){return`${t.field.canonicalString()} ${t.op} ${el(t.value)}`})(r):r instanceof rr?(function(t){return t.op.toString()+" {"+t.getFilters().map(D1).join(" ,")+"}"})(r):"Filter"}class r2 extends ln{constructor(e,t,s){super(e,t,s),this.key=xe.fromName(s.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class s2 extends ln{constructor(e,t){super(e,"in",t),this.keys=O1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class a2 extends ln{constructor(e,t){super(e,"not-in",t),this.keys=O1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function O1(r,e){return(e.arrayValue?.values||[]).map((t=>xe.fromName(t.referenceValue)))}class o2 extends ln{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return op(t)&&Pu(t.arrayValue,this.value)}}class l2 extends ln{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Pu(this.value.arrayValue,t)}}class u2 extends ln{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Pu(this.value.arrayValue,t)}}class c2 extends ln{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!op(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Pu(this.value.arrayValue,s)))}}class h2{constructor(e,t=null,s=[],o=[],u=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function yb(r,e=null,t=[],s=[],o=null,u=null,c=null){return new h2(r,e,t,s,o,u,c)}function lp(r){const e=Ve(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Cg(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Qu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>el(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>el(s))).join(",")),e.Te=t}return e.Te}function up(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!n2(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!N1(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!pb(r.startAt,e.startAt)&&pb(r.endAt,e.endAt)}function Ig(r){return xe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Yu{constructor(e,t=null,s=[],o=[],u=null,c="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function f2(r,e,t,s,o,u,c,m){return new Yu(r,e,t,s,o,u,c,m)}function cp(r){return new Yu(r)}function _b(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function M1(r){return r.collectionGroup!==null}function bu(r){const e=Ve(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new gn(Mn.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new ef(u,s))})),t.has(Mn.keyField().canonicalString())||e.Ie.push(new ef(Mn.keyField(),s))}return e.Ie}function Er(r){const e=Ve(r);return e.Ee||(e.Ee=d2(e,bu(r))),e.Ee}function d2(r,e){if(r.limitType==="F")return yb(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new ef(o.field,u)}));const t=r.endAt?new Wh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Wh(r.startAt.position,r.startAt.inclusive):null;return yb(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Ng(r,e){const t=r.filters.concat([e]);return new Yu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Dg(r,e,t){return new Yu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Cf(r,e){return up(Er(r),Er(e))&&r.limitType===e.limitType}function k1(r){return`${lp(Er(r))}|lt:${r.limitType}`}function Uo(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>D1(o))).join(", ")}]`),Qu(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>el(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>el(o))).join(",")),`Target(${s})`})(Er(r))}; limitType=${r.limitType})`}function If(r,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):xe.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,o){for(const u of bu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(c,m,g){const p=gb(c,m,g);return c.inclusive?p<=0:p<0})(s.startAt,bu(s),o)||s.endAt&&!(function(c,m,g){const p=gb(c,m,g);return c.inclusive?p>=0:p>0})(s.endAt,bu(s),o))})(r,e)}function m2(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function V1(r){return(e,t)=>{let s=!1;for(const o of bu(r)){const u=g2(o,e,t);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function g2(r,e,t){const s=r.field.isKeyField()?xe.comparator(e.key,t.key):(function(u,c,m){const g=c.data.field(u),p=m.data.field(u);return g!==null&&p!==null?Wo(g,p):Ce(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ce(19790,{direction:r.dir})}}class Ya{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ha(this.inner,((t,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return _1(this.inner)}size(){return this.innerSize}}const p2=new Lt(xe.comparator);function es(){return p2}const P1=new Lt(xe.comparator);function hu(...r){let e=P1;for(const t of r)e=e.insert(t.key,t);return e}function L1(r){let e=P1;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function qa(){return Eu()}function U1(){return Eu()}function Eu(){return new Ya((r=>r.toString()),((r,e)=>r.isEqual(e)))}const y2=new Lt(xe.comparator),_2=new gn(xe.comparator);function Ze(...r){let e=_2;for(const t of r)e=e.add(t);return e}const v2=new gn(Je);function b2(){return v2}function hp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xh(e)?"-0":e}}function j1(r){return{integerValue:""+r}}function E2(r,e){return QR(e)?j1(e):hp(r,e)}class Nf{constructor(){this._=void 0}}function T2(r,e,t){return r instanceof tf?(function(o,u){const c={fields:{[E1]:{stringValue:b1},[w1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&ap(u)&&(u=Rf(u)),u&&(c.fields[T1]=u),{mapValue:c}})(t,e):r instanceof Lu?B1(r,e):r instanceof Uu?q1(r,e):(function(o,u){const c=z1(o,u),m=vb(c)+vb(o.Ae);return Rg(c)&&Rg(o.Ae)?j1(m):hp(o.serializer,m)})(r,e)}function w2(r,e,t){return r instanceof Lu?B1(r,e):r instanceof Uu?q1(r,e):t}function z1(r,e){return r instanceof nf?(function(s){return Rg(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class tf extends Nf{}class Lu extends Nf{constructor(e){super(),this.elements=e}}function B1(r,e){const t=H1(e);for(const s of r.elements)t.some((o=>xr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class Uu extends Nf{constructor(e){super(),this.elements=e}}function q1(r,e){let t=H1(e);for(const s of r.elements)t=t.filter((o=>!xr(o,s)));return{arrayValue:{values:t}}}class nf extends Nf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function vb(r){return Xt(r.integerValue||r.doubleValue)}function H1(r){return op(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function S2(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof Lu&&o instanceof Lu||s instanceof Uu&&o instanceof Uu?Zo(s.elements,o.elements,xr):s instanceof nf&&o instanceof nf?xr(s.Ae,o.Ae):s instanceof tf&&o instanceof tf})(r.transform,e.transform)}class A2{constructor(e,t){this.version=e,this.transformResults=t}}class Wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Df{}function F1(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new fp(r.key,Wn.none()):new Xu(r.key,r.data,Wn.none());{const t=r.data,s=Zn.empty();let o=new gn(Mn.comparator);for(let u of e.fields)if(!o.has(u)){let c=t.field(u);c===null&&u.length>1&&(u=u.popLast(),c=t.field(u)),c===null?s.delete(u):s.set(u,c),o=o.add(u)}return new fa(r.key,s,new Ei(o.toArray()),Wn.none())}}function x2(r,e,t){r instanceof Xu?(function(o,u,c){const m=o.value.clone(),g=Eb(o.fieldTransforms,u,c.transformResults);m.setAll(g),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(r,e,t):r instanceof fa?(function(o,u,c){if(!Uh(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=Eb(o.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(G1(o)),g.setAll(m),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(r,e,t):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Tu(r,e,t,s){return r instanceof Xu?(function(u,c,m,g){if(!Uh(u.precondition,c))return m;const p=u.value.clone(),v=Tb(u.fieldTransforms,g,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(r,e,t,s):r instanceof fa?(function(u,c,m,g){if(!Uh(u.precondition,c))return m;const p=Tb(u.fieldTransforms,g,c),v=c.data;return v.setAll(G1(u)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(r,e,t,s):(function(u,c,m){return Uh(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(r,e,t)}function R2(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=z1(s.transform,o||null);u!=null&&(t===null&&(t=Zn.empty()),t.set(s.field,u))}return t||null}function bb(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Zo(s,o,((u,c)=>S2(u,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Xu extends Df{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class fa extends Df{constructor(e,t,s,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function G1(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function Eb(r,e,t){const s=new Map;it(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const u=r[o],c=u.transform,m=e.data.field(u.field);s.set(u.field,w2(c,m,t[o]))}return s}function Tb(r,e,t){const s=new Map;for(const o of r){const u=o.transform,c=t.data.field(o.field);s.set(o.field,T2(u,c,e))}return s}class fp extends Df{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class K1 extends Df{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class C2{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&x2(u,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Tu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Tu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=U1();return this.mutations.forEach((o=>{const u=e.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=t.has(o.key)?null:m;const g=F1(c,m);g!==null&&s.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(Ne.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&Zo(this.mutations,e.mutations,((t,s)=>bb(t,s)))&&Zo(this.baseMutations,e.baseMutations,((t,s)=>bb(t,s)))}}class dp{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){it(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return y2})();const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,s[c].version);return new dp(e,t,s,o)}}class I2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class N2{constructor(e,t){this.count=e,this.unchangedNames=t}}var on,nt;function $1(r){switch(r){case ae.OK:return Ce(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Ce(15467,{code:r})}}function Q1(r){if(r===void 0)return Wr("GRPC error has no .code"),ae.UNKNOWN;switch(r){case on.OK:return ae.OK;case on.CANCELLED:return ae.CANCELLED;case on.UNKNOWN:return ae.UNKNOWN;case on.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case on.INTERNAL:return ae.INTERNAL;case on.UNAVAILABLE:return ae.UNAVAILABLE;case on.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case on.NOT_FOUND:return ae.NOT_FOUND;case on.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case on.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case on.ABORTED:return ae.ABORTED;case on.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case on.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case on.DATA_LOSS:return ae.DATA_LOSS;default:return Ce(39323,{code:r})}}(nt=on||(on={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";function D2(){return new TextEncoder}const O2=new Ws([4294967295,4294967295],0);function wb(r){const e=D2().encode(r),t=new o1;return t.update(e),new Uint8Array(t.digest())}function Sb(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ws([t,s],0),new Ws([o,u],0)]}class mp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new fu(`Invalid padding: ${t}`);if(s<0)throw new fu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new fu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new fu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ws.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Ws.fromNumber(s)));return o.compare(O2)===1&&(o=new Ws([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=wb(e),[s,o]=Sb(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(s,o,u);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new mp(u,o,t);return s.forEach((m=>c.insert(m))),c}insert(e){if(this.ge===0)return;const t=wb(e),[s,o]=Sb(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(s,o,u);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class fu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Of{constructor(e,t,s,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Ju.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Of(Ne.min(),o,new Lt(Je),es(),Ze())}}class Ju{constructor(e,t,s,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ju(s,t,Ze(),Ze(),Ze())}}class jh{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class Y1{constructor(e,t){this.targetId=e,this.Ce=t}}class X1{constructor(e,t,s=kn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Ab{constructor(){this.ve=0,this.Fe=xb(),this.Me=kn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),t=Ze(),s=Ze();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ce(38017,{changeType:u})}})),new Ju(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=xb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class M2{constructor(e){this.Ge=e,this.ze=new Map,this.je=es(),this.Je=Nh(),this.He=Nh(),this.Ye=new Lt(Je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(Ig(u))if(s===0){const c=new xe(u.path);this.et(t,c,Tn.newNoDocument(c,Ne.min()))}else it(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const m=this.ut(e),g=m?this.ct(m,e,c):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=t;let c,m;try{c=aa(s).toUint8Array()}catch(g){if(g instanceof v1)return Jo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new mp(c,o,u)}catch(g){return Jo(g instanceof fu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&Ig(m.target)){const g=new xe(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,Tn.newNoDocument(g,e))}u.Be&&(t.set(c,u.ke()),u.qe())}}));let s=Ze();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(e)));const o=new Of(e,t,this.Ye,this.je,s);return this.je=es(),this.Je=Nh(),this.He=Nh(),this.Ye=new Lt(Je),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Ab,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new gn(Je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new gn(Je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ab),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Nh(){return new Lt(xe.comparator)}function xb(){return new Lt(xe.comparator)}const k2={asc:"ASCENDING",desc:"DESCENDING"},V2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},P2={and:"AND",or:"OR"};class L2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Og(r,e){return r.useProto3Json||Qu(e)?e:{value:e}}function rf(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function J1(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function U2(r,e){return rf(r,e.toTimestamp())}function Ti(r){return it(!!r,49232),Ne.fromTimestamp((function(t){const s=sa(t);return new Nt(s.seconds,s.nanos)})(r))}function gp(r,e){return Mg(r,e).canonicalString()}function Mg(r,e){const t=(function(o){return new Et(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Z1(r){const e=Et.fromString(r);return it(rT(e),10190,{key:e.toString()}),e}function sf(r,e){return gp(r.databaseId,e.path)}function wu(r,e){const t=Z1(e);if(t.get(1)!==r.databaseId.projectId)throw new pe(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new pe(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new xe(eT(t))}function W1(r,e){return gp(r.databaseId,e)}function j2(r){const e=Z1(r);return e.length===4?Et.emptyPath():eT(e)}function kg(r){return new Et(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function eT(r){return it(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Rb(r,e,t){return{name:sf(r,e),fields:t.value.mapValue.fields}}function z2(r,e){return"found"in e?(function(s,o){it(!!o.found,43571),o.found.name,o.found.updateTime;const u=wu(s,o.found.name),c=Ti(o.found.updateTime),m=o.found.createTime?Ti(o.found.createTime):Ne.min(),g=new Zn({mapValue:{fields:o.found.fields}});return Tn.newFoundDocument(u,c,m,g)})(r,e):"missing"in e?(function(s,o){it(!!o.missing,3894),it(!!o.readTime,22933);const u=wu(s,o.missing),c=Ti(o.readTime);return Tn.newNoDocument(u,c)})(r,e):Ce(7234,{result:e})}function B2(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ce(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,v){return p.useProto3Json?(it(v===void 0||typeof v=="string",58123),kn.fromBase64String(v||"")):(it(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),kn.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&(function(p){const v=p.code===void 0?ae.UNKNOWN:Q1(p.code);return new pe(v,p.message||"")})(c);t=new X1(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=wu(r,s.document.name),u=Ti(s.document.updateTime),c=s.document.createTime?Ti(s.document.createTime):Ne.min(),m=new Zn({mapValue:{fields:s.document.fields}}),g=Tn.newFoundDocument(o,u,c,m),p=s.targetIds||[],v=s.removedTargetIds||[];t=new jh(p,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=wu(r,s.document),u=s.readTime?Ti(s.readTime):Ne.min(),c=Tn.newNoDocument(o,u),m=s.removedTargetIds||[];t=new jh([],m,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=wu(r,s.document),u=s.removedTargetIds||[];t=new jh([],u,o,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,c=new N2(o,u),m=s.targetId;t=new Y1(m,c)}}return t}function tT(r,e){let t;if(e instanceof Xu)t={update:Rb(r,e.key,e.value)};else if(e instanceof fp)t={delete:sf(r,e.key)};else if(e instanceof fa)t={update:Rb(r,e.key,e.data),updateMask:X2(e.fieldMask)};else{if(!(e instanceof K1))return Ce(16599,{Vt:e.type});t={verify:sf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(u,c){const m=c.transform;if(m instanceof tf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Lu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Uu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof nf)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw Ce(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:U2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ce(27497)})(r,e.precondition)),t}function q2(r,e){return r&&r.length>0?(it(e!==void 0,14353),r.map((t=>(function(o,u){let c=o.updateTime?Ti(o.updateTime):Ti(u);return c.isEqual(Ne.min())&&(c=Ti(u)),new A2(c,o.transformResults||[])})(t,e)))):[]}function H2(r,e){return{documents:[W1(r,e.path)]}}function F2(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=W1(r,o);const u=(function(p){if(p.length!==0)return iT(rr.create(p,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const c=(function(p){if(p.length!==0)return p.map((v=>(function(w){return{field:jo(w.field),direction:$2(w.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const m=Og(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function G2(r){let e=j2(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){it(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let u=[];t.where&&(u=(function(E){const w=nT(E);return w instanceof rr&&I1(w)?w.getFilters():[w]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((w=>(function(L){return new ef(zo(L.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(w)))})(t.orderBy));let m=null;t.limit&&(m=(function(E){let w;return w=typeof E=="object"?E.value:E,Qu(w)?null:w})(t.limit));let g=null;t.startAt&&(g=(function(E){const w=!!E.before,C=E.values||[];return new Wh(C,w)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const w=!E.before,C=E.values||[];return new Wh(C,w)})(t.endAt)),f2(e,o,c,u,m,"F",g,p)}function K2(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function nT(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=zo(t.unaryFilter.field);return ln.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=zo(t.unaryFilter.field);return ln.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=zo(t.unaryFilter.field);return ln.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=zo(t.unaryFilter.field);return ln.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(r):r.fieldFilter!==void 0?(function(t){return ln.create(zo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return rr.create(t.compositeFilter.filters.map((s=>nT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(r):Ce(30097,{filter:r})}function $2(r){return k2[r]}function Q2(r){return V2[r]}function Y2(r){return P2[r]}function jo(r){return{fieldPath:r.canonicalString()}}function zo(r){return Mn.fromServerFormat(r.fieldPath)}function iT(r){return r instanceof ln?(function(t){if(t.op==="=="){if(mb(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NAN"}};if(db(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(mb(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NOT_NAN"}};if(db(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jo(t.field),op:Q2(t.op),value:t.value}}})(r):r instanceof rr?(function(t){const s=t.getFilters().map((o=>iT(o)));return s.length===1?s[0]:{compositeFilter:{op:Y2(t.op),filters:s}}})(r):Ce(54877,{filter:r})}function X2(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function rT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Ys{constructor(e,t,s,o,u=Ne.min(),c=Ne.min(),m=kn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class J2{constructor(e){this.yt=e}}function Z2(r){const e=G2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Dg(e,e.limit,"L"):e}class W2{constructor(){this.Cn=new eC}addToCollectionParentIndex(e,t){return this.Cn.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(ra.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(ra.min())}updateCollectionGroup(e,t,s){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class eC{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new gn(Et.comparator),u=!o.has(s);return this.index[t]=o.add(s),u}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new gn(Et.comparator)).toArray()}}const Cb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sT=41943040;class ci{static withCacheSize(e){return new ci(e,ci.DEFAULT_COLLECTION_PERCENTILE,ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}ci.DEFAULT_COLLECTION_PERCENTILE=10,ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ci.DEFAULT=new ci(sT,ci.DEFAULT_COLLECTION_PERCENTILE,ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ci.DISABLED=new ci(-1,0,0);class tl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new tl(0)}static cr(){return new tl(-1)}}const Ib="LruGarbageCollector",tC=1048576;function Nb([r,e],[t,s]){const o=Je(r,t);return o===0?Je(e,s):o}class nC{constructor(e){this.Ir=e,this.buffer=new gn(Nb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Nb(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class iC{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(Ib,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){cl(t)?ve(Ib,"Ignoring IndexedDB error during garbage collection: ",t):await ul(t)}await this.Vr(3e5)}))}}class rC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return le.resolve(xf.ce);const s=new nC(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(Cb)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Cb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,u,c,m,g,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,m=Date.now(),this.removeTargets(e,s,t)))).next((E=>(u=E,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(p=Date.now(),Lo()<=Xe.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${E} documents in `+(p-g)+`ms
Total Duration: ${p-v}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:E}))))}}function sC(r,e){return new rC(r,e)}class aC{constructor(){this.changes=new Ya((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?le.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class oC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class lC{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Tu(s.mutation,o,Ei.empty(),Nt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Ze()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Ze()){const o=qa();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((u=>{let c=hu();return u.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=qa();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Ze())))}populateOverlays(e,t,s){const o=[];return s.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((c,m)=>{t.set(c,m)}))}))}computeViews(e,t,s,o){let u=es();const c=Eu(),m=(function(){return Eu()})();return t.forEach(((g,p)=>{const v=s.get(p.key);o.has(p.key)&&(v===void 0||v.mutation instanceof fa)?u=u.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),Tu(v.mutation,p,v.mutation.getFieldMask(),Nt.now())):c.set(p.key,Ei.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((p,v)=>c.set(p,v))),t.forEach(((p,v)=>m.set(p,new oC(v,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,t){const s=Eu();let o=new Lt(((c,m)=>c-m)),u=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const m of c)m.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let v=s.get(g)||Ei.empty();v=m.applyToLocalView(p,v),s.set(g,v);const E=(o.get(m.batchId)||Ze()).add(g);o=o.insert(m.batchId,E)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,v=g.value,E=U1();v.forEach((w=>{if(!u.has(w)){const C=F1(t.get(w),s.get(w));C!==null&&E.set(w,C),u=u.add(w)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,E))}return le.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(c){return xe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):M1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-u.size):le.resolve(qa());let m=Mu,g=u;return c.next((p=>le.forEach(p,((v,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),u.get(v)?le.resolve():this.remoteDocumentCache.getEntry(e,v).next((w=>{g=g.insert(v,w)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,g,p,Ze()))).next((v=>({batchId:m,changes:L1(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next((s=>{let o=hu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const u=t.collectionGroup;let c=hu();return this.indexManager.getCollectionParents(e,u).next((m=>le.forEach(m,(g=>{const p=(function(E,w){return new Yu(w,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,s,o).next((v=>{v.forEach(((E,w)=>{c=c.insert(E,w)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,u,o)))).next((c=>{u.forEach(((g,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,Tn.newInvalidDocument(v)))}));let m=hu();return c.forEach(((g,p)=>{const v=u.get(g);v!==void 0&&Tu(v.mutation,p,Ei.empty(),Nt.now()),If(t,p)&&(m=m.insert(g,p))})),m}))}}class uC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return le.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Ti(o.createTime)}})(t)),le.resolve()}getNamedQuery(e,t){return le.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:Z2(o.bundledQuery),readTime:Ti(o.readTime)}})(t)),le.resolve()}}class cC{constructor(){this.overlays=new Lt(xe.comparator),this.qr=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const s=qa();return le.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,u)=>{this.St(e,t,u)})),le.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),le.resolve()}getOverlaysForCollection(e,t,s){const o=qa(),u=t.length+1,c=new xe(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return le.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let u=new Lt(((p,v)=>p-v));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let v=u.get(p.largestBatchId);v===null&&(v=qa(),u=u.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const m=qa(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,v)=>m.set(p,v))),!(m.size()>=o)););return le.resolve(m)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new I2(t,s));let u=this.qr.get(t);u===void 0&&(u=Ze(),this.qr.set(t,u)),this.qr.set(t,u.add(s.key))}}class hC{constructor(){this.sessionToken=kn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,le.resolve()}}class pp{constructor(){this.Qr=new gn(bn.$r),this.Ur=new gn(bn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new bn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new bn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new xe(new Et([])),s=new bn(t,e),o=new bn(t,e+1),u=[];return this.Ur.forEachInRange([s,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new xe(new Et([])),s=new bn(t,e),o=new bn(t,e+1);let u=Ze();return this.Ur.forEachInRange([s,o],(c=>{u=u.add(c.key)})),u}containsKey(e){const t=new bn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class bn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return xe.comparator(e.key,t.key)||Je(e.Yr,t.Yr)}static Kr(e,t){return Je(e.Yr,t.Yr)||xe.comparator(e.key,t.key)}}class fC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new gn(bn.$r)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new C2(u,t,s,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new bn(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return le.resolve(c)}lookupMutationBatch(e,t){return le.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),u=o<0?0:o;return le.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?sp:this.tr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new bn(t,0),o=new bn(t,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(c=>{const m=this.Xr(c.Yr);u.push(m)})),le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new gn(Je);return t.forEach((o=>{const u=new bn(o,0),c=new bn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{s=s.add(m.Yr)}))})),le.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let u=s;xe.isDocumentKey(u)||(u=u.child(""));const c=new bn(new xe(u),0);let m=new gn(Je);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),c),le.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){it(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return le.forEach(t.mutations,(o=>{const u=new bn(o.key,t.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new bn(t,0),o=this.Zr.firstAfterOrEqual(s);return le.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class dC{constructor(e){this.ri=e,this.docs=(function(){return new Lt(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),u=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return le.resolve(s?s.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let s=es();return t.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Tn.newInvalidDocument(o))})),le.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let u=es();const c=t.path,m=new xe(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:v}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||FR(HR(v),s)<=0||(o.has(v.key)||If(t,v))&&(u=u.insert(v.key,v.mutableCopy()))}return le.resolve(u)}getAllFromCollectionGroup(e,t,s,o){Ce(9500)}ii(e,t){return le.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new mC(this)}getSize(e){return le.resolve(this.size)}}class mC extends aC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),le.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class gC{constructor(e){this.persistence=e,this.si=new Ya((t=>lp(t)),up),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new pp,this.targetCount=0,this.ai=tl.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),le.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new tl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Pr(t),le.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,s){let o=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),le.waitFor(u).next((()=>o))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return le.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),le.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((c=>{u.push(o.markPotentiallyOrphaned(e,c))})),le.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),le.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return le.resolve(s)}containsKey(e,t){return le.resolve(this._i.containsKey(t))}}class aT{constructor(e,t){this.ui={},this.overlays={},this.ci=new xf(0),this.li=!1,this.li=!0,this.hi=new hC,this.referenceDelegate=e(this),this.Pi=new gC(this),this.indexManager=new W2,this.remoteDocumentCache=(function(o){return new dC(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new J2(t),this.Ii=new uC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new fC(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ve("MemoryPersistence","Starting transaction:",e);const o=new pC(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,t){return le.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class pC extends KR{constructor(e){super(),this.currentSequenceNumber=e}}class yp{constructor(e){this.persistence=e,this.Ri=new pp,this.Vi=null}static mi(e){return new yp(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),le.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),le.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.fi,(s=>{const o=xe.fromPath(s);return this.gi(e,o).next((u=>{u||t.removeEntry(o,Ne.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return le.or([()=>le.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class af{constructor(e,t){this.persistence=e,this.pi=new Ya((s=>YR(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=sC(this,t)}static mi(e,t){return new af(e,t)}Ei(){}di(e){return le.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return le.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?le.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((m=>{m||(s++,u.removeEntry(c,Ne.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),le.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),le.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),le.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ph(e.data.value)),t}br(e,t,s){return le.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return le.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class _p{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Ze(),o=Ze();for(const u of t.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new _p(e,t.fromCache,s,o)}}class yC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class _C{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return dx()?8:$R(qn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const u={result:null};return this.ys(e,t).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(e,t,o,s).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new yC;return this.Ss(e,t,c).next((m=>{if(u.result=m,this.Vs)return this.bs(e,t,c,m.size)}))})).next((()=>u.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(Lo()<=Xe.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Uo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),le.resolve()):(Lo()<=Xe.DEBUG&&ve("QueryEngine","Query:",Uo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Lo()<=Xe.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Uo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Er(t))):le.resolve())}ys(e,t){if(_b(t))return le.resolve(null);let s=Er(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Dg(t,null,"F"),s=Er(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const c=Ze(...u);return this.ps.getDocuments(e,c).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const p=this.Ds(t,m);return this.Cs(t,p,c,g.readTime)?this.ys(e,Dg(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,s,o){return _b(t)||o.isEqual(Ne.min())?le.resolve(null):this.ps.getDocuments(e,s).next((u=>{const c=this.Ds(t,u);return this.Cs(t,c,s,o)?le.resolve(null):(Lo()<=Xe.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Uo(t)),this.vs(e,c,t,qR(o,Mu)).next((m=>m)))}))}Ds(e,t){let s=new gn(V1(e));return t.forEach(((o,u)=>{If(e,u)&&(s=s.add(u))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,t,s){return Lo()<=Xe.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Uo(t)),this.ps.getDocumentsMatchingQuery(e,t,ra.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(t.forEach((c=>{u=u.insert(c.key,c)})),u)))}}const vp="LocalStore",vC=3e8;class bC{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Lt(Je),this.xs=new Ya((u=>lp(u)),up),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function EC(r,e,t,s){return new bC(r,e,t,s)}async function oT(r,e){const t=Ve(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((u=>{const c=[],m=[];let g=Ze();for(const p of o){c.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}for(const p of u){m.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function TC(r,e){const t=Ve(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,v){const E=p.batch,w=E.keys();let C=le.resolve();return w.forEach((L=>{C=C.next((()=>v.getEntry(g,L))).next((z=>{const D=p.docVersions.get(L);it(D!==null,48541),z.version.compareTo(D)<0&&(E.applyToRemoteDocument(z,p),z.isValidDocument()&&(z.setReadTime(p.commitVersion),v.addEntry(z)))}))})),C.next((()=>m.mutationQueue.removeMutationBatch(g,E)))})(t,s,e,u).next((()=>u.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=Ze();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function lT(r){const e=Ve(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function wC(r,e){const t=Ve(r),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((v,E)=>{const w=o.get(E);if(!w)return;m.push(t.Pi.removeMatchingKeys(u,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(u,v.addedDocuments,E))));let C=w.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(E)!==null?C=C.withResumeToken(kn.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,s)),o=o.insert(E,C),(function(z,D,B){return z.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=vC?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(w,C,v)&&m.push(t.Pi.updateTargetData(u,C))}));let g=es(),p=Ze();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,v))})),m.push(SC(u,c,e.documentUpdates).next((v=>{g=v.ks,p=v.qs}))),!s.isEqual(Ne.min())){const v=t.Pi.getLastRemoteSnapshotVersion(u).next((E=>t.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(v)}return le.waitFor(m).next((()=>c.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(t.Ms=o,u)))}function SC(r,e,t){let s=Ze(),o=Ze();return t.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let c=es();return t.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ne.min())?(e.removeEntry(m,g.readTime),c=c.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(m,g)):ve(vp,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:o}}))}function AC(r,e){const t=Ve(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=sp),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function xC(r,e){const t=Ve(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((u=>u?(o=u,le.resolve(o)):t.Pi.allocateTargetId(s).next((c=>(o=new Ys(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Vg(r,e,t){const s=Ve(r),o=s.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",u,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!cl(c))throw c;ve(vp,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function Db(r,e,t){const s=Ve(r);let o=Ne.min(),u=Ze();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,v){const E=Ve(g),w=E.xs.get(v);return w!==void 0?le.resolve(E.Ms.get(w)):E.Pi.getTargetData(p,v)})(s,c,Er(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{u=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?o:Ne.min(),t?u:Ze()))).next((m=>(RC(s,m2(e),m),{documents:m,Qs:u})))))}function RC(r,e,t){let s=r.Os.get(e)||Ne.min();t.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Os.set(e,s)}class Ob{constructor(){this.activeTargetIds=b2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CC{constructor(){this.Mo=new Ob,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ob,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class IC{Oo(e){}shutdown(){}}const Mb="ConnectivityMonitor";class kb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(Mb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(Mb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Dh=null;function Pg(){return Dh===null?Dh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Dh++,"0x"+Dh.toString(16)}const ng="RestConnection",NC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class DC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Jh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,u){const c=Pg(),m=this.zo(e,t.toUriEncodedString());ve(ng,`Sending RPC '${e}' ${c}:`,m,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(m),v=al(p);return this.Jo(e,m,g,s,v).then((E=>(ve(ng,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Jo(ng,`RPC '${e}' ${c} failed with error: `,E,"url: ",m,"request:",s),E}))}Ho(e,t,s,o,u,c){return this.Go(e,t,s,o,u)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ll})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,t){const s=NC[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class OC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const jn="WebChannelConnection";class MC extends DC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,u){const c=Pg();return new Promise(((m,g)=>{const p=new l1;p.setWithCredentials(!0),p.listenOnce(u1.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Vh.NO_ERROR:const E=p.getResponseJson();ve(jn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),m(E);break;case Vh.TIMEOUT:ve(jn,`RPC '${e}' ${c} timed out`),g(new pe(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Vh.HTTP_ERROR:const w=p.getStatus();if(ve(jn,`RPC '${e}' ${c} failed with status:`,w,"response text:",p.getResponseText()),w>0){let C=p.getResponseJson();Array.isArray(C)&&(C=C[0]);const L=C?.error;if(L&&L.status&&L.message){const z=(function(B){const J=B.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(J)>=0?J:ae.UNKNOWN})(L.status);g(new pe(z,L.message))}else g(new pe(ae.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new pe(ae.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ve(jn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(o);ve(jn,`RPC '${e}' ${c} sending request:`,o),p.send(t,"POST",v,s,15)}))}T_(e,t,s){const o=Pg(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=f1(),m=h1(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=u.join("");ve(jn,`Creating RPC '${e}' stream ${o}: ${v}`,g);const E=c.createWebChannel(v,g);this.I_(E);let w=!1,C=!1;const L=new OC({Yo:D=>{C?ve(jn,`Not sending because RPC '${e}' stream ${o} is closed:`,D):(w||(ve(jn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),w=!0),ve(jn,`RPC '${e}' stream ${o} sending:`,D),E.send(D))},Zo:()=>E.close()}),z=(D,B,J)=>{D.listen(B,(te=>{try{J(te)}catch(fe){setTimeout((()=>{throw fe}),0)}}))};return z(E,cu.EventType.OPEN,(()=>{C||(ve(jn,`RPC '${e}' stream ${o} transport opened.`),L.o_())})),z(E,cu.EventType.CLOSE,(()=>{C||(C=!0,ve(jn,`RPC '${e}' stream ${o} transport closed`),L.a_(),this.E_(E))})),z(E,cu.EventType.ERROR,(D=>{C||(C=!0,Jo(jn,`RPC '${e}' stream ${o} transport errored. Name:`,D.name,"Message:",D.message),L.a_(new pe(ae.UNAVAILABLE,"The operation could not be completed")))})),z(E,cu.EventType.MESSAGE,(D=>{if(!C){const B=D.data[0];it(!!B,16349);const J=B,te=J?.error||J[0]?.error;if(te){ve(jn,`RPC '${e}' stream ${o} received error:`,te);const fe=te.status;let ue=(function(x){const I=on[x];if(I!==void 0)return Q1(I)})(fe),ie=te.message;ue===void 0&&(ue=ae.INTERNAL,ie="Unknown error status: "+fe+" with message "+te.message),C=!0,L.a_(new pe(ue,ie)),E.close()}else ve(jn,`RPC '${e}' stream ${o} received:`,B),L.u_(B)}})),z(m,c1.STAT_EVENT,(D=>{D.stat===Sg.PROXY?ve(jn,`RPC '${e}' stream ${o} detected buffering proxy`):D.stat===Sg.NOPROXY&&ve(jn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function ig(){return typeof document<"u"?document:null}function Mf(r){return new L2(r,!0)}class bp{constructor(e,t,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Vb="PersistentStream";class uT{constructor(e,t,s,o,u,c,m,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bp(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Wr(t.toString()),Wr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new pe(ae.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(Vb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ve(Vb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class kC extends uT{constructor(e,t,s,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=B2(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Ne.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?Ne.min():c.readTime?Ti(c.readTime):Ne.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=kg(this.serializer),t.addTarget=(function(u,c){let m;const g=c.target;if(m=Ig(g)?{documents:H2(u,g)}:{query:F2(u,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=J1(u,c.resumeToken);const p=Og(u,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(Ne.min())>0){m.readTime=rf(u,c.snapshotVersion.toTimestamp());const p=Og(u,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const s=K2(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=kg(this.serializer),t.removeTarget=e,this.q_(t)}}class VC extends uT{constructor(e,t,s,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=q2(e.writeResults,e.commitTime),s=Ti(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=kg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>tT(this.serializer,s)))};this.q_(t)}}class PC{}class LC extends PC{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new pe(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(e,Mg(t,s),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(ae.UNKNOWN,u.toString())}))}Ho(e,t,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(e,Mg(t,s),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(ae.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class UC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wr(t),this.aa=!1):ve("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const $a="RemoteStore";class jC{constructor(e,t,s,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Xa(this)&&(ve($a,"Restarting streams for network reachability change."),await(async function(g){const p=Ve(g);p.Ea.add(4),await Zu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await kf(p)})(this))}))})),this.Ra=new UC(s,o)}}async function kf(r){if(Xa(r))for(const e of r.da)await e(!0)}async function Zu(r){for(const e of r.da)await e(!1)}function cT(r,e){const t=Ve(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Sp(t)?wp(t):hl(t).O_()&&Tp(t,e))}function Ep(r,e){const t=Ve(r),s=hl(t);t.Ia.delete(e),s.O_()&&hT(t,e),t.Ia.size===0&&(s.O_()?s.L_():Xa(t)&&t.Ra.set("Unknown"))}function Tp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hl(r).Y_(e)}function hT(r,e){r.Va.Ue(e),hl(r).Z_(e)}function wp(r){r.Va=new M2({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),hl(r).start(),r.Ra.ua()}function Sp(r){return Xa(r)&&!hl(r).x_()&&r.Ia.size>0}function Xa(r){return Ve(r).Ea.size===0}function fT(r){r.Va=void 0}async function zC(r){r.Ra.set("Online")}async function BC(r){r.Ia.forEach(((e,t)=>{Tp(r,e)}))}async function qC(r,e){fT(r),Sp(r)?(r.Ra.ha(e),wp(r)):r.Ra.set("Unknown")}async function HC(r,e,t){if(r.Ra.set("Online"),e instanceof X1&&e.state===2&&e.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(s){ve($a,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await of(r,s)}else if(e instanceof jh?r.Va.Ze(e):e instanceof Y1?r.Va.st(e):r.Va.tt(e),!t.isEqual(Ne.min()))try{const s=await lT(r.localStore);t.compareTo(s)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const v=u.Ia.get(p);v&&u.Ia.set(p,v.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,p)=>{const v=u.Ia.get(g);if(!v)return;u.Ia.set(g,v.withResumeToken(kn.EMPTY_BYTE_STRING,v.snapshotVersion)),hT(u,g);const E=new Ys(v.target,g,p,v.sequenceNumber);Tp(u,E)})),u.remoteSyncer.applyRemoteEvent(m)})(r,t)}catch(s){ve($a,"Failed to raise snapshot:",s),await of(r,s)}}async function of(r,e,t){if(!cl(e))throw e;r.Ea.add(1),await Zu(r),r.Ra.set("Offline"),t||(t=()=>lT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ve($a,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await kf(r)}))}function dT(r,e){return e().catch((t=>of(r,t,e)))}async function Vf(r){const e=Ve(r),t=la(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:sp;for(;FC(e);)try{const o=await AC(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,GC(e,o)}catch(o){await of(e,o)}mT(e)&&gT(e)}function FC(r){return Xa(r)&&r.Ta.length<10}function GC(r,e){r.Ta.push(e);const t=la(r);t.O_()&&t.X_&&t.ea(e.mutations)}function mT(r){return Xa(r)&&!la(r).x_()&&r.Ta.length>0}function gT(r){la(r).start()}async function KC(r){la(r).ra()}async function $C(r){const e=la(r);for(const t of r.Ta)e.ea(t.mutations)}async function QC(r,e,t){const s=r.Ta.shift(),o=dp.from(s,e,t);await dT(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Vf(r)}async function YC(r,e){e&&la(r).X_&&await(async function(s,o){if((function(c){return $1(c)&&c!==ae.ABORTED})(o.code)){const u=s.Ta.shift();la(s).B_(),await dT(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Vf(s)}})(r,e),mT(r)&&gT(r)}async function Pb(r,e){const t=Ve(r);t.asyncQueue.verifyOperationInProgress(),ve($a,"RemoteStore received new credentials");const s=Xa(t);t.Ea.add(3),await Zu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await kf(t)}async function XC(r,e){const t=Ve(r);e?(t.Ea.delete(2),await kf(t)):e||(t.Ea.add(2),await Zu(t),t.Ra.set("Unknown"))}function hl(r){return r.ma||(r.ma=(function(t,s,o){const u=Ve(t);return u.sa(),new kC(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:zC.bind(null,r),t_:BC.bind(null,r),r_:qC.bind(null,r),H_:HC.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Sp(r)?wp(r):r.Ra.set("Unknown")):(await r.ma.stop(),fT(r))}))),r.ma}function la(r){return r.fa||(r.fa=(function(t,s,o){const u=Ve(t);return u.sa(),new VC(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:KC.bind(null,r),r_:YC.bind(null,r),ta:$C.bind(null,r),na:QC.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Vf(r)):(await r.fa.stop(),r.Ta.length>0&&(ve($a,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class Ap{constructor(e,t,s,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new ea,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,u){const c=Date.now()+s,m=new Ap(e,t,c,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xp(r,e){if(Wr("AsyncQueue",`${e}: ${r}`),cl(r))return new pe(ae.UNAVAILABLE,`${e}: ${r}`);throw r}class Ho{static emptySet(e){return new Ho(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||xe.comparator(t.key,s.key):(t,s)=>xe.comparator(t.key,s.key),this.keyedMap=hu(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ho)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Ho;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Lb{constructor(){this.ga=new Lt(xe.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class nl{constructor(e,t,s,o,u,c,m,g,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,o,u){const c=[];return t.forEach((m=>{c.push({type:0,doc:m})})),new nl(e,t,Ho.emptySet(t),c,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class JC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class ZC{constructor(){this.queries=Ub(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Ve(t),u=o.queries;o.queries=Ub(),u.forEach(((c,m)=>{for(const g of m.Sa)g.onError(s)}))})(this,new pe(ae.ABORTED,"Firestore shutting down"))}}function Ub(){return new Ya((r=>k1(r)),Cf)}async function WC(r,e){const t=Ve(r);let s=3;const o=e.query;let u=t.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new JC,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const m=xp(c,`Initialization of query '${Uo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.Sa.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&Rp(t)}async function eI(r,e){const t=Ve(r),s=e.query;let o=3;const u=t.queries.get(s);if(u){const c=u.Sa.indexOf(e);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function tI(r,e){const t=Ve(r);let s=!1;for(const o of e){const u=o.query,c=t.queries.get(u);if(c){for(const m of c.Sa)m.Fa(o)&&(s=!0);c.wa=o}}s&&Rp(t)}function nI(r,e,t){const s=Ve(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(t);s.queries.delete(e)}function Rp(r){r.Ca.forEach((e=>{e.next()}))}var Lg,jb;(jb=Lg||(Lg={})).Ma="default",jb.Cache="cache";class iI{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new nl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Lg.Cache}}class pT{constructor(e){this.key=e}}class yT{constructor(e){this.key=e}}class rI{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ze(),this.mutatedKeys=Ze(),this.eu=V1(e),this.tu=new Ho(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new Lb,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const w=o.get(v),C=If(this.query,E)?E:null,L=!!w&&this.mutatedKeys.has(w.key),z=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let D=!1;w&&C?w.data.isEqual(C.data)?L!==z&&(s.track({type:3,doc:C}),D=!0):this.su(w,C)||(s.track({type:2,doc:C}),D=!0,(g&&this.eu(C,g)>0||p&&this.eu(C,p)<0)&&(m=!0)):!w&&C?(s.track({type:0,doc:C}),D=!0):w&&!C&&(s.track({type:1,doc:w}),D=!0,(g||p)&&(m=!0)),D&&(C?(c=c.add(C),u=z?u.add(v):u.delete(v)):(c=c.delete(v),u=u.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),u=u.delete(v.key),s.track({type:1,doc:v})}return{tu:c,iu:s,Cs:m,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(C,L){const z=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:D})}};return z(C)-z(L)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(s),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new nl(this.query,e.tu,u,c,e.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Lb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ze(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new yT(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new pT(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Cp="SyncEngine";class sI{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class aI{constructor(e){this.key=e,this.hu=!1}}class oI{constructor(e,t,s,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ya((m=>k1(m)),Cf),this.Iu=new Map,this.Eu=new Set,this.du=new Lt(xe.comparator),this.Au=new Map,this.Ru=new pp,this.Vu={},this.mu=new Map,this.fu=tl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function lI(r,e,t=!0){const s=wT(r);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await _T(s,e,t,!0),o}async function uI(r,e){const t=wT(r);await _T(t,e,!0,!1)}async function _T(r,e,t,s){const o=await xC(r.localStore,Er(e)),u=o.targetId,c=r.sharedClientState.addLocalQueryTarget(u,t);let m;return s&&(m=await cI(r,e,u,c==="current",o.resumeToken)),r.isPrimaryClient&&t&&cT(r.remoteStore,o),m}async function cI(r,e,t,s,o){r.pu=(E,w,C)=>(async function(z,D,B,J){let te=D.view.ru(B);te.Cs&&(te=await Db(z.localStore,D.query,!1).then((({documents:R})=>D.view.ru(R,te))));const fe=J&&J.targetChanges.get(D.targetId),ue=J&&J.targetMismatches.get(D.targetId)!=null,ie=D.view.applyChanges(te,z.isPrimaryClient,fe,ue);return Bb(z,D.targetId,ie.au),ie.snapshot})(r,E,w,C);const u=await Db(r.localStore,e,!0),c=new rI(e,u.Qs),m=c.ru(u.documents),g=Ju.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),p=c.applyChanges(m,r.isPrimaryClient,g);Bb(r,t,p.au);const v=new sI(e,t,c);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),p.snapshot}async function hI(r,e,t){const s=Ve(r),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((c=>!Cf(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Vg(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Ep(s.remoteStore,o.targetId),Ug(s,o.targetId)})).catch(ul)):(Ug(s,o.targetId),await Vg(s.localStore,o.targetId,!0))}async function fI(r,e){const t=Ve(r),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Ep(t.remoteStore,s.targetId))}async function dI(r,e,t){const s=bI(r);try{const o=await(function(c,m){const g=Ve(c),p=Nt.now(),v=m.reduce(((C,L)=>C.add(L.key)),Ze());let E,w;return g.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let L=es(),z=Ze();return g.Ns.getEntries(C,v).next((D=>{L=D,L.forEach(((B,J)=>{J.isValidDocument()||(z=z.add(B))}))})).next((()=>g.localDocuments.getOverlayedDocuments(C,L))).next((D=>{E=D;const B=[];for(const J of m){const te=R2(J,E.get(J.key).overlayedDocument);te!=null&&B.push(new fa(J.key,te,x1(te.value.mapValue),Wn.exists(!0)))}return g.mutationQueue.addMutationBatch(C,p,B,m)})).next((D=>{w=D;const B=D.applyToLocalDocumentSet(E,z);return g.documentOverlayCache.saveOverlays(C,D.batchId,B)}))})).then((()=>({batchId:w.batchId,changes:L1(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,m,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new Lt(Je)),p=p.insert(m,g),c.Vu[c.currentUser.toKey()]=p})(s,o.batchId,t),await Wu(s,o.changes),await Vf(s.remoteStore)}catch(o){const u=xp(o,"Failed to persist write");t.reject(u)}}async function vT(r,e){const t=Ve(r);try{const s=await wC(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const c=t.Au.get(u);c&&(it(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?it(c.hu,14607):o.removedDocuments.size>0&&(it(c.hu,42227),c.hu=!1))})),await Wu(t,s,e)}catch(s){await ul(s)}}function zb(r,e,t){const s=Ve(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((u,c)=>{const m=c.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const g=Ve(c);g.onlineState=m;let p=!1;g.queries.forEach(((v,E)=>{for(const w of E.Sa)w.va(m)&&(p=!0)})),p&&Rp(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function mI(r,e,t){const s=Ve(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),u=o&&o.key;if(u){let c=new Lt(xe.comparator);c=c.insert(u,Tn.newNoDocument(u,Ne.min()));const m=Ze().add(u),g=new Of(Ne.min(),new Map,new Lt(Je),c,m);await vT(s,g),s.du=s.du.remove(u),s.Au.delete(e),Ip(s)}else await Vg(s.localStore,e,!1).then((()=>Ug(s,e,t))).catch(ul)}async function gI(r,e){const t=Ve(r),s=e.batch.batchId;try{const o=await TC(t.localStore,e);ET(t,s,null),bT(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Wu(t,o)}catch(o){await ul(o)}}async function pI(r,e,t){const s=Ve(r);try{const o=await(function(c,m){const g=Ve(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return g.mutationQueue.lookupMutationBatch(p,m).next((E=>(it(E!==null,37113),v=E.keys(),g.mutationQueue.removeMutationBatch(p,E)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,v,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>g.localDocuments.getDocuments(p,v)))}))})(s.localStore,e);ET(s,e,t),bT(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Wu(s,o)}catch(o){await ul(o)}}function bT(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function ET(r,e,t){const s=Ve(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Ug(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||TT(r,s)}))}function TT(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Ep(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Ip(r))}function Bb(r,e,t){for(const s of t)s instanceof pT?(r.Ru.addReference(s.key,e),yI(r,s)):s instanceof yT?(ve(Cp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||TT(r,s.key)):Ce(19791,{wu:s})}function yI(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(ve(Cp,"New document in limbo: "+t),r.Eu.add(s),Ip(r))}function Ip(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new xe(Et.fromString(e)),s=r.fu.next();r.Au.set(s,new aI(t)),r.du=r.du.insert(t,s),cT(r.remoteStore,new Ys(Er(cp(t.path)),s,"TargetPurposeLimboResolution",xf.ce))}}async function Wu(r,e,t){const s=Ve(r),o=[],u=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,g)=>{c.push(s.pu(g,e,t).then((p=>{if((p||t)&&s.isPrimaryClient){const v=p?!p.fromCache:t?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(p){o.push(p);const v=_p.As(g.targetId,p);u.push(v)}})))})),await Promise.all(c),s.Pu.H_(o),await(async function(g,p){const v=Ve(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>le.forEach(p,(w=>le.forEach(w.Es,(C=>v.persistence.referenceDelegate.addReference(E,w.targetId,C))).next((()=>le.forEach(w.ds,(C=>v.persistence.referenceDelegate.removeReference(E,w.targetId,C)))))))))}catch(E){if(!cl(E))throw E;ve(vp,"Failed to update sequence numbers: "+E)}for(const E of p){const w=E.targetId;if(!E.fromCache){const C=v.Ms.get(w),L=C.snapshotVersion,z=C.withLastLimboFreeSnapshotVersion(L);v.Ms=v.Ms.insert(w,z)}}})(s.localStore,u))}async function _I(r,e){const t=Ve(r);if(!t.currentUser.isEqual(e)){ve(Cp,"User change. New user:",e.toKey());const s=await oT(t.localStore,e);t.currentUser=e,(function(u,c){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new pe(ae.CANCELLED,c))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Wu(t,s.Ls)}}function vI(r,e){const t=Ve(r),s=t.Au.get(e);if(s&&s.hu)return Ze().add(s.key);{let o=Ze();const u=t.Iu.get(e);if(!u)return o;for(const c of u){const m=t.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}function wT(r){const e=Ve(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=vT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mI.bind(null,e),e.Pu.H_=tI.bind(null,e.eventManager),e.Pu.yu=nI.bind(null,e.eventManager),e}function bI(r){const e=Ve(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pI.bind(null,e),e}class lf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return EC(this.persistence,new _C,e.initialUser,this.serializer)}Cu(e){return new aT(yp.mi,this.serializer)}Du(e){return new CC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lf.provider={build:()=>new lf};class EI extends lf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){it(this.persistence.referenceDelegate instanceof af,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new iC(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ci.withCacheSize(this.cacheSizeBytes):ci.DEFAULT;return new aT((s=>af.mi(s,t)),this.serializer)}}class jg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>zb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=_I.bind(null,this.syncEngine),await XC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ZC})()}createDatastore(e){const t=Mf(e.databaseInfo.databaseId),s=(function(u){return new MC(u)})(e.databaseInfo);return(function(u,c,m,g){return new LC(u,c,m,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,u,c,m){return new jC(s,o,u,c,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>zb(this.syncEngine,t,0)),(function(){return kb.v()?new kb:new IC})())}createSyncEngine(e,t){return(function(o,u,c,m,g,p,v){const E=new oI(o,u,c,m,g,p);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Ve(t);ve($a,"RemoteStore shutting down."),s.Ea.add(5),await Zu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}jg.provider={build:()=>new jg};class TI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Wr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class wI{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new pe(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,u){const c=Ve(o),m={documents:u.map((E=>sf(c.serializer,E)))},g=await c.Ho("BatchGetDocuments",c.serializer.databaseId,Et.emptyPath(),m,u.length),p=new Map;g.forEach((E=>{const w=z2(c.serializer,E);p.set(w.key.toString(),w)}));const v=[];return u.forEach((E=>{const w=p.get(E.toString());it(!!w,55234,{key:E}),v.push(w)})),v})(this.datastore,e);return t.forEach((s=>this.recordVersion(s))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new fp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,s)=>{const o=xe.fromPath(s);this.mutations.push(new K1(o,this.precondition(o)))})),await(async function(s,o){const u=Ve(s),c={writes:o.map((m=>tT(u.serializer,m)))};await u.Go("Commit",u.serializer.databaseId,Et.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ce(50498,{Gu:e.constructor.name});t=Ne.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new pe(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ne.min())?Wn.exists(!1):Wn.updateTime(t):Wn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ne.min()))throw new pe(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wn.updateTime(t)}return Wn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class SI{constructor(e,t,s,o,u){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=o,this.deferred=u,this.zu=s.maxAttempts,this.M_=new bp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new wI(this.datastore),t=this.Hu(e);t&&t.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Qu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!$1(t)}return!1}}const ua="FirestoreClient";class AI{constructor(e,t,s,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Bn.UNAUTHENTICATED,this.clientId=rp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async c=>{ve(ua,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(ve(ua,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ea;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=xp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function rg(r,e){r.asyncQueue.verifyOperationInProgress(),ve(ua,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await oT(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function qb(r,e){r.asyncQueue.verifyOperationInProgress();const t=await xI(r);ve(ua,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>Pb(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>Pb(e.remoteStore,o))),r._onlineComponents=e}async function xI(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ve(ua,"Using user provided OfflineComponentProvider");try{await rg(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ae.FAILED_PRECONDITION||o.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Jo("Error using user provided cache. Falling back to memory cache: "+t),await rg(r,new lf)}}else ve(ua,"Using default OfflineComponentProvider"),await rg(r,new EI(void 0));return r._offlineComponents}async function Np(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ve(ua,"Using user provided OnlineComponentProvider"),await qb(r,r._uninitializedComponentsProvider._online)):(ve(ua,"Using default OnlineComponentProvider"),await qb(r,new jg))),r._onlineComponents}function RI(r){return Np(r).then((e=>e.syncEngine))}function CI(r){return Np(r).then((e=>e.datastore))}async function Hb(r){const e=await Np(r),t=e.eventManager;return t.onListen=lI.bind(null,e.syncEngine),t.onUnlisten=hI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=uI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=fI.bind(null,e.syncEngine),t}function ST(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const Fb=new Map;const AT="firestore.googleapis.com",Gb=!0;class Kb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=AT,this.ssl=Gb}else this.host=e.host,this.ssl=e.ssl??Gb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tC)throw new pe(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ST(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new pe(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new pe(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new pe(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pf{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new DR;switch(s.type){case"firstParty":return new VR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Fb.get(t);s&&(ve("ComponentProvider","Removing Datastore"),Fb.delete(t),s.terminate())})(this),Promise.resolve()}}function II(r,e,t,s={}){r=Jr(r,Pf);const o=al(e),u=r._getSettings(),c={...u,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${t}`;o&&(WE(`https://${m}`),e1("Firestore",!0)),u.host!==AT&&u.host!==m&&Jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:s};if(!Fa(g,c)&&(r._setSettings(g),s.mockUserToken)){let p,v;if(typeof s.mockUserToken=="string")p=s.mockUserToken,v=Bn.MOCK_USER;else{p=rx(s.mockUserToken,r._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new pe(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Bn(E)}r._authCredentials=new OR(new m1(p,v))}}class fl{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new fl(this.firestore,e,this._query)}}class qt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ta(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if($u(t,qt._jsonSchema))return new qt(e,s||null,new xe(Et.fromString(t.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:un("string",qt._jsonSchemaVersion),referencePath:un("string")};class ta extends fl{constructor(e,t,s){super(e,t,cp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new xe(e))}withConverter(e){return new ta(this.firestore,e,this._path)}}function Xn(r,e,...t){if(r=wn(r),g1("collection","path",e),r instanceof Pf){const s=Et.fromString(e,...t);return rb(s),new ta(r,null,s)}{if(!(r instanceof qt||r instanceof ta))throw new pe(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Et.fromString(e,...t));return rb(s),new ta(r.firestore,null,s)}}function Jn(r,e,...t){if(r=wn(r),arguments.length===1&&(e=rp.newId()),g1("doc","path",e),r instanceof Pf){const s=Et.fromString(e,...t);return ib(s),new qt(r,null,new xe(s))}{if(!(r instanceof qt||r instanceof ta))throw new pe(ae.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Et.fromString(e,...t));return ib(s),new qt(r.firestore,r instanceof ta?r.converter:null,new xe(s))}}const $b="AsyncQueue";class Qb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bp(this,"async_queue_retry"),this._c=()=>{const s=ig();s&&ve($b,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=ig();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ig();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ea;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!cl(e))throw e;ve($b,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Wr("INTERNAL UNHANDLED ERROR: ",Yb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Ap.createAndSchedule(this,e,t,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ce(47125,{Pc:Yb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Yb(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function Xb(r){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(r,["next","error","complete"])}class il extends Pf{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Qb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Qb(e),this._firestoreClient=void 0,await e}}}function NI(r,e){const t=typeof r=="object"?r:r1(),s=typeof r=="string"?r:Jh,o=np(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=nx("firestore");u&&II(o,...u)}return o}function Dp(r){if(r._terminated)throw new pe(ae.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||DI(r),r._firestoreClient}function DI(r){const e=r._freezeSettings(),t=(function(o,u,c,m){return new ZR(o,u,c,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,ST(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new AI(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(r._componentsProvider))}class bi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bi(kn.fromBase64String(e))}catch(t){throw new pe(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bi(kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:bi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($u(e,bi._jsonSchema))return bi.fromBase64String(e.bytes)}}bi._jsonSchemaVersion="firestore/bytes/1.0",bi._jsonSchema={type:un("string",bi._jsonSchemaVersion),bytes:un("string")};class ec{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Op{constructor(e){this._methodName=e}}class Tr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Tr._jsonSchemaVersion}}static fromJSON(e){if($u(e,Tr._jsonSchema))return new Tr(e.latitude,e.longitude)}}Tr._jsonSchemaVersion="firestore/geoPoint/1.0",Tr._jsonSchema={type:un("string",Tr._jsonSchemaVersion),latitude:un("number"),longitude:un("number")};class wr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:wr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($u(e,wr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new wr(e.vectorValues);throw new pe(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wr._jsonSchemaVersion="firestore/vectorValue/1.0",wr._jsonSchema={type:un("string",wr._jsonSchemaVersion),vectorValues:un("object")};const OI=/^__.*__$/;class MI{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new fa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xu(e,this.data,t,this.fieldTransforms)}}class xT{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new fa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function RT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:r})}}class Mp{constructor(e,t,s,o,u,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Mp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return uf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(RT(this.Ac)&&OI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class kI{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Mf(e)}Cc(e,t,s,o=!1){return new Mp({Ac:e,methodName:t,Dc:s,path:Mn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lf(r){const e=r._freezeSettings(),t=Mf(r._databaseId);return new kI(r._databaseId,!!e.ignoreUndefinedProperties,t)}function CT(r,e,t,s,o,u={}){const c=r.Cc(u.merge||u.mergeFields?2:0,e,t,o);kp("Data must be an object, but it was:",c,s);const m=DT(s,c);let g,p;if(u.merge)g=new Ei(c.fieldMask),p=c.fieldTransforms;else if(u.mergeFields){const v=[];for(const E of u.mergeFields){const w=zg(e,E,t);if(!c.contains(w))throw new pe(ae.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);MT(v,w)||v.push(w)}g=new Ei(v),p=c.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,p=c.fieldTransforms;return new MI(new Zn(m),g,p)}class Uf extends Op{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uf}}function IT(r,e,t,s){const o=r.Cc(1,e,t);kp("Data must be an object, but it was:",o,s);const u=[],c=Zn.empty();ha(s,((g,p)=>{const v=Vp(e,g,t);p=wn(p);const E=o.yc(v);if(p instanceof Uf)u.push(v);else{const w=tc(p,E);w!=null&&(u.push(v),c.set(v,w))}}));const m=new Ei(u);return new xT(c,m,o.fieldTransforms)}function NT(r,e,t,s,o,u){const c=r.Cc(1,e,t),m=[zg(e,s,t)],g=[o];if(u.length%2!=0)throw new pe(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<u.length;w+=2)m.push(zg(e,u[w])),g.push(u[w+1]);const p=[],v=Zn.empty();for(let w=m.length-1;w>=0;--w)if(!MT(p,m[w])){const C=m[w];let L=g[w];L=wn(L);const z=c.yc(C);if(L instanceof Uf)p.push(C);else{const D=tc(L,z);D!=null&&(p.push(C),v.set(C,D))}}const E=new Ei(p);return new xT(v,E,c.fieldTransforms)}function VI(r,e,t,s=!1){return tc(t,r.Cc(s?4:3,e))}function tc(r,e){if(OT(r=wn(r)))return kp("Unsupported field value:",e,r),DT(r,e);if(r instanceof Op)return(function(s,o){if(!RT(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let c=0;for(const m of s){let g=tc(m,o.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(r,e)}return(function(s,o){if((s=wn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return E2(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Nt.fromDate(s);return{timestampValue:rf(o.serializer,u)}}if(s instanceof Nt){const u=new Nt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:rf(o.serializer,u)}}if(s instanceof Tr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof bi)return{bytesValue:J1(o.serializer,s._byteString)};if(s instanceof qt){const u=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:gp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof wr)return(function(c,m){return{mapValue:{fields:{[S1]:{stringValue:A1},[Zh]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return hp(m.serializer,p)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Af(s)}`)})(r,e)}function DT(r,e){const t={};return _1(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ha(r,((s,o)=>{const u=tc(o,e.mc(s));u!=null&&(t[s]=u)})),{mapValue:{fields:t}}}function OT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Nt||r instanceof Tr||r instanceof bi||r instanceof qt||r instanceof Op||r instanceof wr)}function kp(r,e,t){if(!OT(t)||!p1(t)){const s=Af(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function zg(r,e,t){if((e=wn(e))instanceof ec)return e._internalPath;if(typeof e=="string")return Vp(r,e);throw uf("Field path arguments must be of type string or ",r,!1,void 0,t)}const PI=new RegExp("[~\\*/\\[\\]]");function Vp(r,e,t){if(e.search(PI)>=0)throw uf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new ec(...e.split("."))._internalPath}catch{throw uf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function uf(r,e,t,s,o){const u=s&&!s.isEmpty(),c=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${s}`),c&&(g+=` in document ${o}`),g+=")"),new pe(ae.INVALID_ARGUMENT,m+r+g)}function MT(r,e){return r.some((t=>t.isEqual(e)))}class cf{constructor(e,t,s,o,u){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Pp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class LI extends cf{data(){return super.data()}}function Pp(r,e){return typeof e=="string"?Vp(r,e):e instanceof ec?e._internalPath:e._delegate._internalPath}function UI(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new pe(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lp{}class jI extends Lp{}function zI(r,e,...t){let s=[];e instanceof Lp&&s.push(e),s=s.concat(t),(function(u){const c=u.filter((g=>g instanceof Up)).length,m=u.filter((g=>g instanceof jf)).length;if(c>1||c>0&&m>0)throw new pe(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class jf extends jI{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new jf(e,t,s)}_apply(e){const t=this._parse(e);return kT(e._query,t),new fl(e.firestore,e.converter,Ng(e._query,t))}_parse(e){const t=Lf(e.firestore);return(function(u,c,m,g,p,v,E){let w;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new pe(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Zb(E,v);const L=[];for(const z of E)L.push(Jb(g,u,z));w={arrayValue:{values:L}}}else w=Jb(g,u,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Zb(E,v),w=VI(m,c,E,v==="in"||v==="not-in");return ln.create(p,v,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function BI(r,e,t){const s=e,o=Pp("where",r);return jf._create(o,s,t)}class Up extends Lp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Up(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:rr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,u){let c=o;const m=u.getFlattenedFilters();for(const g of m)kT(c,g),c=Ng(c,g)})(e._query,t),new fl(e.firestore,e.converter,Ng(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Jb(r,e,t){if(typeof(t=wn(t))=="string"){if(t==="")throw new pe(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!M1(e)&&t.indexOf("/")!==-1)throw new pe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Et.fromString(t));if(!xe.isDocumentKey(s))throw new pe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return fb(r,new xe(s))}if(t instanceof qt)return fb(r,t._key);throw new pe(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Af(t)}.`)}function Zb(r,e){if(!Array.isArray(r)||r.length===0)throw new pe(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kT(r,e){const t=(function(o,u){for(const c of o)for(const m of c.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new pe(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class VT{convertValue(e,t="none"){switch(oa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(aa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ha(e,((o,u)=>{s[o]=this.convertValue(u,t)})),s}convertVectorValue(e){const t=e.fields?.[Zh].arrayValue?.values?.map((s=>Xt(s.doubleValue)));return new wr(t)}convertGeoPoint(e){return new Tr(Xt(e.latitude),Xt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Rf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ku(e));default:return null}}convertTimestamp(e){const t=sa(e);return new Nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Et.fromString(e);it(rT(s),9688,{name:e});const o=new Vu(s.get(1),s.get(3)),u=new xe(s.popFirst(5));return o.isEqual(t)||Wr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function PT(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class qI extends VT{constructor(e){super(),this.firestore=e}convertBytes(e){return new bi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}class Bo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class na extends cf{constructor(e,t,s,o,u,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Pp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=na._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}na._jsonSchemaVersion="firestore/documentSnapshot/1.0",na._jsonSchema={type:un("string",na._jsonSchemaVersion),bundleSource:un("string","DocumentSnapshot"),bundleName:un("string"),bundle:un("string")};class zh extends na{data(e={}){return super.data(e)}}class Fo{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Bo(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new zh(this._firestore,this._userDataWriter,s.key,s,new Bo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const g=new zh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Bo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new zh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Bo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,v=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),v=c.indexOf(m.doc.key)),{type:HI(m.type),doc:g,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function HI(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:r})}}Fo._jsonSchemaVersion="firestore/querySnapshot/1.0",Fo._jsonSchema={type:un("string",Fo._jsonSchemaVersion),bundleSource:un("string","QuerySnapshot"),bundleName:un("string"),bundle:un("string")};class jp extends VT{constructor(e){super(),this.firestore=e}convertBytes(e){return new bi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}function zp(r,e,t){r=Jr(r,qt);const s=Jr(r.firestore,il),o=PT(r.converter,e,t);return LT(s,[CT(Lf(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Wn.none())])}function Su(r,e,t,...s){r=Jr(r,qt);const o=Jr(r.firestore,il),u=Lf(o);let c;return c=typeof(e=wn(e))=="string"||e instanceof ec?NT(u,"updateDoc",r._key,e,t,s):IT(u,"updateDoc",r._key,e),LT(o,[c.toMutation(r._key,Wn.exists(!0))])}function Bp(r,...e){r=wn(r);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Xb(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Xb(e[s])){const g=e[s];e[s]=g.next?.bind(g),e[s+1]=g.error?.bind(g),e[s+2]=g.complete?.bind(g)}let u,c,m;if(r instanceof qt)c=Jr(r.firestore,il),m=cp(r._key.path),u={next:g=>{e[s]&&e[s](FI(c,r,g))},error:e[s+1],complete:e[s+2]};else{const g=Jr(r,fl);c=Jr(g.firestore,il),m=g._query;const p=new jp(c);u={next:v=>{e[s]&&e[s](new Fo(c,p,g,v))},error:e[s+1],complete:e[s+2]},UI(r._query)}return(function(p,v,E,w){const C=new TI(w),L=new iI(v,C,E);return p.asyncQueue.enqueueAndForget((async()=>WC(await Hb(p),L))),()=>{C.Nu(),p.asyncQueue.enqueueAndForget((async()=>eI(await Hb(p),L)))}})(Dp(c),m,o,u)}function LT(r,e){return(function(s,o){const u=new ea;return s.asyncQueue.enqueueAndForget((async()=>dI(await RI(s),o,u))),u.promise})(Dp(r),e)}function FI(r,e,t){const s=t.docs.get(e._key),o=new jp(r);return new na(r,o,e._key,s,new Bo(t.hasPendingWrites,t.fromCache),e.converter)}const GI={maxAttempts:5};function du(r,e){if((r=wn(r)).firestore!==e)throw new pe(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class KI{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Lf(e)}get(e){const t=du(e,this._firestore),s=new qI(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return Ce(24041);const u=o[0];if(u.isFoundDocument())return new cf(this._firestore,s,u.key,u,t.converter);if(u.isNoDocument())return new cf(this._firestore,s,t._key,null,t.converter);throw Ce(18433,{doc:u})}))}set(e,t,s){const o=du(e,this._firestore),u=PT(o.converter,t,s),c=CT(this._dataReader,"Transaction.set",o._key,u,o.converter!==null,s);return this._transaction.set(o._key,c),this}update(e,t,s,...o){const u=du(e,this._firestore);let c;return c=typeof(t=wn(t))=="string"||t instanceof ec?NT(this._dataReader,"Transaction.update",u._key,t,s,o):IT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=du(e,this._firestore);return this._transaction.delete(t._key),this}}class $I extends KI{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=du(e,this._firestore),s=new jp(this._firestore);return super.get(e).then((o=>new na(this._firestore,s,t._key,o._document,new Bo(!1,!1),t.converter)))}}function Au(r,e,t){r=Jr(r,il);const s={...GI,...t};return(function(u){if(u.maxAttempts<1)throw new pe(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(u,c,m){const g=new ea;return u.asyncQueue.enqueueAndForget((async()=>{const p=await CI(u);new SI(u.asyncQueue,p,m,c,g).ju()})),g.promise})(Dp(r),(o=>e(new $I(r,o))),s)}(function(e,t=!0){(function(o){ll=o})(ol),Xo(new Ga("firestore",((s,{instanceIdentifier:o,options:u})=>{const c=s.getProvider("app").getImmediate(),m=new il(new MR(s.getProvider("auth-internal")),new PR(c,s.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new pe(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vu(p.options.projectId,v)})(c,o),c);return u={useFetchStreams:t,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Zs(Wv,eb,e),Zs(Wv,eb,"esm2020")})();function UT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QI=UT,jT=new Gu("auth","Firebase",UT());const hf=new ep("@firebase/auth");function YI(r,...e){hf.logLevel<=Xe.WARN&&hf.warn(`Auth (${ol}): ${r}`,...e)}function Bh(r,...e){hf.logLevel<=Xe.ERROR&&hf.error(`Auth (${ol}): ${r}`,...e)}function ts(r,...e){throw qp(r,...e)}function Sr(r,...e){return qp(r,...e)}function zT(r,e,t){const s={...QI(),[e]:t};return new Gu("auth","Firebase",s).create(e,{appName:r.name})}function ia(r){return zT(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qp(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return jT.create(r,...e)}function Oe(r,e,...t){if(!r)throw qp(e,...t)}function Yr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Bh(e),new Error(e)}function ns(r,e){r||Yr(e)}function Bg(){return typeof self<"u"&&self.location?.href||""}function XI(){return Wb()==="http:"||Wb()==="https:"}function Wb(){return typeof self<"u"&&self.location?.protocol||null}function JI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XI()||cx()||"connection"in navigator)?navigator.onLine:!0}function ZI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class nc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ns(t>e,"Short delay should be less than long delay!"),this.isMobile=ox()||hx()}get(){return JI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Hp(r,e){ns(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class BT{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const WI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const eN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tN=new nc(3e4,6e4);function zf(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function dl(r,e,t,s,o={}){return qT(r,o,async()=>{let u={},c={};s&&(e==="GET"?c=s:u={body:JSON.stringify(s)});const m=Ku({key:r.config.apiKey,...c}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const p={method:e,headers:g,...u};return ux()||(p.referrerPolicy="no-referrer"),r.emulatorConfig&&al(r.emulatorConfig.host)&&(p.credentials="include"),BT.fetch()(await FT(r,r.config.apiHost,t,m),p)})}async function qT(r,e,t){r._canInitEmulator=!1;const s={...WI,...e};try{const o=new nN(r),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw Oh(r,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oh(r,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw Oh(r,"email-already-in-use",c);if(g==="USER_DISABLED")throw Oh(r,"user-disabled",c);const v=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw zT(r,v,p);ts(r,v)}}catch(o){if(o instanceof rs)throw o;ts(r,"network-request-failed",{message:String(o)})}}async function HT(r,e,t,s,o={}){const u=await dl(r,e,t,s,o);return"mfaPendingCredential"in u&&ts(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function FT(r,e,t,s){const o=`${e}${t}?${s}`,u=r,c=u.config.emulator?Hp(r.config,o):`${r.config.apiScheme}://${o}`;return eN.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}class nN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Sr(this.auth,"network-request-failed")),tN.get())})}}function Oh(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Sr(r,e,s);return o.customData._tokenResponse=t,o}async function iN(r,e){return dl(r,"POST","/v1/accounts:delete",e)}async function ff(r,e){return dl(r,"POST","/v1/accounts:lookup",e)}function xu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rN(r,e=!1){const t=wn(r),s=await t.getIdToken(e),o=Fp(s);Oe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,c=u?.sign_in_provider;return{claims:o,token:s,authTime:xu(sg(o.auth_time)),issuedAtTime:xu(sg(o.iat)),expirationTime:xu(sg(o.exp)),signInProvider:c||null,signInSecondFactor:u?.sign_in_second_factor||null}}function sg(r){return Number(r)*1e3}function Fp(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Bh("JWT malformed, contained fewer than 3 sections"),null;try{const o=YE(t);return o?JSON.parse(o):(Bh("Failed to decode base64 JWT payload"),null)}catch(o){return Bh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function eE(r){const e=Fp(r);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ju(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof rs&&sN(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function sN({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class aN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class qg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=xu(this.lastLoginAt),this.creationTime=xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function df(r){const e=r.auth,t=await r.getIdToken(),s=await ju(r,ff(e,{idToken:t}));Oe(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?GT(o.providerUserInfo):[],c=lN(r.providerData,u),m=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!c?.length,p=m?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new qg(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(r,v)}async function oN(r){const e=wn(r);await df(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lN(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function GT(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function uN(r,e){const t=await qT(r,{},async()=>{const s=Ku({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,c=await FT(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return r.emulatorConfig&&al(r.emulatorConfig.host)&&(g.credentials="include"),BT.fetch()(c,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function cN(r,e){return dl(r,"POST","/v2/accounts:revokeToken",zf(r,e))}class Go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const t=eE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:u}=await uN(e,t);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:u}=t,c=new Go;return s&&(Oe(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(Oe(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),u&&(Oe(typeof u=="number","internal-error",{appName:e}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Go,this.toJSON())}_performRefresh(){return Yr("not implemented")}}function zs(r,e){Oe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ir{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new aN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new qg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ju(this,this.stsTokenManager.getToken(this.auth,e));return Oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return rN(this,e)}reload(){return oN(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ir({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await df(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nr(this.auth.app))return Promise.reject(ia(this.auth));const e=await this.getIdToken();return await ju(this,iN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,c=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:w,isAnonymous:C,providerData:L,stsTokenManager:z}=t;Oe(E&&z,e,"internal-error");const D=Go.fromJSON(this.name,z);Oe(typeof E=="string",e,"internal-error"),zs(s,e.name),zs(o,e.name),Oe(typeof w=="boolean",e,"internal-error"),Oe(typeof C=="boolean",e,"internal-error"),zs(u,e.name),zs(c,e.name),zs(m,e.name),zs(g,e.name),zs(p,e.name),zs(v,e.name);const B=new ir({uid:E,auth:e,email:o,emailVerified:w,displayName:s,isAnonymous:C,photoURL:c,phoneNumber:u,tenantId:m,stsTokenManager:D,createdAt:p,lastLoginAt:v});return L&&Array.isArray(L)&&(B.providerData=L.map(J=>({...J}))),g&&(B._redirectEventId=g),B}static async _fromIdTokenResponse(e,t,s=!1){const o=new Go;o.updateFromServerResponse(t);const u=new ir({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await df(u),u}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Oe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?GT(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!u?.length,m=new Go;m.updateFromIdToken(s);const g=new ir({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:c}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new qg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,p),g}}const tE=new Map;function Xr(r){ns(r instanceof Function,"Expected a class definition");let e=tE.get(r);return e?(ns(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,tE.set(r,e),e)}class KT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}KT.type="NONE";const nE=KT;function qh(r,e,t){return`firebase:${r}:${e}:${t}`}class Ko{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=qh(this.userKey,o.apiKey,u),this.fullPersistenceKey=qh("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ff(this.auth,{idToken:e}).catch(()=>{});return t?ir._fromGetAccountInfoResponse(this.auth,t,e):null}return ir._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Ko(Xr(nE),e,s);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||Xr(nE);const c=qh(s,e.config.apiKey,e.name);let m=null;for(const p of t)try{const v=await p._get(c);if(v){let E;if(typeof v=="string"){const w=await ff(e,{idToken:v}).catch(()=>{});if(!w)break;E=await ir._fromGetAccountInfoResponse(e,w,v)}else E=ir._fromJSON(e,v);p!==u&&(m=E),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Ko(u,e,s):(u=g[0],m&&await u._set(c,m.toJSON()),await Promise.all(t.map(async p=>{if(p!==u)try{await p._remove(c)}catch{}})),new Ko(u,e,s))}}function iE(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(XT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($T(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZT(e))return"Blackberry";if(WT(e))return"Webos";if(QT(e))return"Safari";if((e.includes("chrome/")||YT(e))&&!e.includes("edge/"))return"Chrome";if(JT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function $T(r=qn()){return/firefox\//i.test(r)}function QT(r=qn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YT(r=qn()){return/crios\//i.test(r)}function XT(r=qn()){return/iemobile/i.test(r)}function JT(r=qn()){return/android/i.test(r)}function ZT(r=qn()){return/blackberry/i.test(r)}function WT(r=qn()){return/webos/i.test(r)}function Gp(r=qn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function hN(r=qn()){return Gp(r)&&!!window.navigator?.standalone}function fN(){return fx()&&document.documentMode===10}function ew(r=qn()){return Gp(r)||JT(r)||WT(r)||ZT(r)||/windows phone/i.test(r)||XT(r)}function tw(r,e=[]){let t;switch(r){case"Browser":t=iE(qn());break;case"Worker":t=`${iE(qn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ol}/${s}`}class dN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=u=>new Promise((c,m)=>{try{const g=e(u);c(g)}catch(g){m(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function mN(r,e={}){return dl(r,"GET","/v2/passwordPolicy",zf(r,e))}const gN=6;class pN{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??gN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class yN{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rE(this),this.idTokenSubscription=new rE(this),this.beforeStateQueue=new dN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ko.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ff(this,{idToken:e}),s=await ir._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(nr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,c=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===c)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await df(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nr(this.app))return Promise.reject(ia(this));const t=e?wn(e):null;return t&&Oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nr(this.app)?Promise.reject(ia(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nr(this.app)?Promise.reject(ia(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mN(this),t=new pN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await cN(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xr(e)||this._popupRedirectResolver;Oe(t,this,"argument-error"),this.redirectPersistenceManager=await Ko.create(this,[Xr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{c=!0,g()}}else{const g=e.addObserver(t);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&YI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Bf(r){return wn(r)}class rE{constructor(e){this.auth=e,this.observer=null,this.addObserver=bx(t=>this.observer=t)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Kp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _N(r){Kp=r}function vN(r){return Kp.loadJS(r)}function bN(){return Kp.gapiScript}function EN(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function TN(r,e){const t=np(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(Fa(u,e??{}))return o;ts(o,"already-initialized")}return t.initialize({options:e})}function wN(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Xr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function SN(r,e,t){const s=Bf(r);Oe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=nw(e),{host:c,port:m}=AN(e),g=m===null?"":`:${m}`,p={url:`${u}//${c}${g}/`},v=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Oe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Oe(Fa(p,s.config.emulator)&&Fa(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,al(c)?(WE(`${u}//${c}${g}`),e1("Auth",!0)):xN()}function nw(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function AN(r){const e=nw(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:sE(s.substr(u.length+1))}}else{const[u,c]=s.split(":");return{host:u,port:sE(c)}}}function sE(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function xN(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class iw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Yr("not implemented")}_getIdTokenResponse(e){return Yr("not implemented")}_linkToIdToken(e,t){return Yr("not implemented")}_getReauthenticationResolver(e){return Yr("not implemented")}}async function $o(r,e){return HT(r,"POST","/v1/accounts:signInWithIdp",zf(r,e))}const RN="http://localhost";class Qa extends iw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Qa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ts("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=t;if(!s||!o)return null;const c=new Qa(s,o);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return $o(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,$o(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,$o(e,t)}buildRequest(){const e={requestUri:RN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ku(t)}return e}}class rw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ic extends rw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Gs extends ic{constructor(){super("facebook.com")}static credential(e){return Qa._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gs.credential(e.oauthAccessToken)}catch{return null}}}Gs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gs.PROVIDER_ID="facebook.com";class Ks extends ic{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Qa._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Ks.credential(t,s)}catch{return null}}}Ks.GOOGLE_SIGN_IN_METHOD="google.com";Ks.PROVIDER_ID="google.com";class $s extends ic{constructor(){super("github.com")}static credential(e){return Qa._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $s.credential(e.oauthAccessToken)}catch{return null}}}$s.GITHUB_SIGN_IN_METHOD="github.com";$s.PROVIDER_ID="github.com";class Qs extends ic{constructor(){super("twitter.com")}static credential(e,t){return Qa._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Qs.credential(t,s)}catch{return null}}}Qs.TWITTER_SIGN_IN_METHOD="twitter.com";Qs.PROVIDER_ID="twitter.com";async function CN(r,e){return HT(r,"POST","/v1/accounts:signUp",zf(r,e))}class ca{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const u=await ir._fromIdTokenResponse(e,s,o),c=aE(s);return new ca({user:u,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=aE(s);return new ca({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function aE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}async function zu(r){if(nr(r.app))return Promise.reject(ia(r));const e=Bf(r);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new ca({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await CN(e,{returnSecureToken:!0}),s=await ca._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}class mf extends rs{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,mf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new mf(e,t,s,o)}}function sw(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?mf._fromErrorAndOperation(r,u,e,s):u})}async function IN(r,e,t=!1){const s=await ju(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return ca._forOperation(r,"link",s)}async function NN(r,e,t=!1){const{auth:s}=r;if(nr(s.app))return Promise.reject(ia(s));const o="reauthenticate";try{const u=await ju(r,sw(s,o,e,r),t);Oe(u.idToken,s,"internal-error");const c=Fp(u.idToken);Oe(c,s,"internal-error");const{sub:m}=c;return Oe(r.uid===m,s,"user-mismatch"),ca._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&ts(s,"user-mismatch"),u}}async function DN(r,e,t=!1){if(nr(r.app))return Promise.reject(ia(r));const s="signIn",o=await sw(r,s,e),u=await ca._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(u.user),u}function ON(r,e,t,s){return wn(r).onIdTokenChanged(e,t,s)}function MN(r,e,t){return wn(r).beforeAuthStateChanged(e,t)}const gf="__sak";class aw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gf,"1"),this.storage.removeItem(gf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const kN=1e3,VN=10;class ow extends aw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ew(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,m,g)=>{this.notifyListeners(c,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},u=this.storage.getItem(s);fN()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,VN):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},kN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ow.type="LOCAL";const PN=ow;class lw extends aw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}lw.type="SESSION";const uw=lw;function LN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class qf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new qf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:u}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(c).map(async p=>p(t.origin,u)),g=await LN(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qf.receivers=[];function $p(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}class UN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,c;return new Promise((m,g)=>{const p=$p("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(E){const w=E;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(v),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(w.data.response);break;default:clearTimeout(v),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Ar(){return window}function jN(r){Ar().location.href=r}function cw(){return typeof Ar().WorkerGlobalScope<"u"&&typeof Ar().importScripts=="function"}async function zN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BN(){return navigator?.serviceWorker?.controller||null}function qN(){return cw()?self:null}const hw="firebaseLocalStorageDb",HN=1,pf="firebaseLocalStorage",fw="fbase_key";class rc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Hf(r,e){return r.transaction([pf],e?"readwrite":"readonly").objectStore(pf)}function FN(){const r=indexedDB.deleteDatabase(hw);return new rc(r).toPromise()}function Hg(){const r=indexedDB.open(hw,HN);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(pf,{keyPath:fw})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(pf)?e(s):(s.close(),await FN(),e(await Hg()))})})}async function oE(r,e,t){const s=Hf(r,!0).put({[fw]:e,value:t});return new rc(s).toPromise()}async function GN(r,e){const t=Hf(r,!1).get(e),s=await new rc(t).toPromise();return s===void 0?null:s.value}function lE(r,e){const t=Hf(r,!0).delete(e);return new rc(t).toPromise()}const KN=800,$N=3;class dw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>$N)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qf._getInstance(qN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await zN(),!this.activeServiceWorker)return;this.sender=new UN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||BN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hg();return await oE(e,gf,"1"),await lE(e,gf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>oE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>GN(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>lE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Hf(o,!1).getAll();return new rc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dw.type="LOCAL";const QN=dw;new nc(3e4,6e4);function YN(r,e){return e?Xr(e):(Oe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Qp extends iw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $o(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $o(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $o(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function XN(r){return DN(r.auth,new Qp(r),r.bypassAuthState)}function JN(r){const{auth:e,user:t}=r;return Oe(t,e,"internal-error"),NN(t,new Qp(r),r.bypassAuthState)}async function ZN(r){const{auth:e,user:t}=r;return Oe(t,e,"internal-error"),IN(t,new Qp(r),r.bypassAuthState)}class mw{constructor(e,t,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:u,error:c,type:m}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XN;case"linkViaPopup":case"linkViaRedirect":return ZN;case"reauthViaPopup":case"reauthViaRedirect":return JN;default:ts(this.auth,"internal-error")}}resolve(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const WN=new nc(2e3,1e4);class qo extends mw{constructor(e,t,s,o,u){super(e,t,o,u),this.provider=s,this.authWindow=null,this.pollId=null,qo.currentPopupAction&&qo.currentPopupAction.cancel(),qo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){ns(this.filter.length===1,"Popup operations only handle one event");const e=$p();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WN.get())};e()}}qo.currentPopupAction=null;const eD="pendingRedirect",Hh=new Map;class tD extends mw{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Hh.get(this.auth._key());if(!e){try{const s=await nD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Hh.set(this.auth._key(),e)}return this.bypassAuthState||Hh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nD(r,e){const t=sD(e),s=rD(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function iD(r,e){Hh.set(r._key(),e)}function rD(r){return Xr(r._redirectPersistence)}function sD(r){return qh(eD,r.config.apiKey,r.name)}async function aD(r,e,t=!1){if(nr(r.app))return Promise.reject(ia(r));const s=Bf(r),o=YN(s,e),c=await new tD(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}const oD=600*1e3;class lD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!gw(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Sr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oD&&this.cachedEventUids.clear(),this.cachedEventUids.has(uE(e))}saveEventToCache(e){this.cachedEventUids.add(uE(e)),this.lastProcessedEventTime=Date.now()}}function uE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function gw({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function uD(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gw(r);default:return!1}}async function cD(r,e={}){return dl(r,"GET","/v1/projects",e)}const hD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fD=/^https?/;async function dD(r){if(r.config.emulator)return;const{authorizedDomains:e}=await cD(r);for(const t of e)try{if(mD(t))return}catch{}ts(r,"unauthorized-domain")}function mD(r){const e=Bg(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!fD.test(t))return!1;if(hD.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const gD=new nc(3e4,6e4);function cE(){const r=Ar().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function pD(r){return new Promise((e,t)=>{function s(){cE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cE(),t(Sr(r,"network-request-failed"))},timeout:gD.get()})}if(Ar().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ar().gapi?.load)s();else{const o=EN("iframefcb");return Ar()[o]=()=>{gapi.load?s():t(Sr(r,"network-request-failed"))},vN(`${bN()}?onload=${o}`).catch(u=>t(u))}}).catch(e=>{throw Fh=null,e})}let Fh=null;function yD(r){return Fh=Fh||pD(r),Fh}const _D=new nc(5e3,15e3),vD="__/auth/iframe",bD="emulator/auth/iframe",ED={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wD(r){const e=r.config;Oe(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Hp(e,bD):`https://${r.config.authDomain}/${vD}`,s={apiKey:e.apiKey,appName:r.name,v:ol},o=TD.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${t}?${Ku(s).slice(1)}`}async function SD(r){const e=await yD(r),t=Ar().gapi;return Oe(t,r,"internal-error"),e.open({where:document.body,url:wD(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ED,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const c=Sr(r,"network-request-failed"),m=Ar().setTimeout(()=>{u(c)},_D.get());function g(){Ar().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{u(c)})}))}const AD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xD=500,RD=600,CD="_blank",ID="http://localhost";class hE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ND(r,e,t,s=xD,o=RD){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...AD,width:s.toString(),height:o.toString(),top:u,left:c},p=qn().toLowerCase();t&&(m=YT(p)?CD:t),$T(p)&&(e=e||ID,g.scrollbars="yes");const v=Object.entries(g).reduce((w,[C,L])=>`${w}${C}=${L},`,"");if(hN(p)&&m!=="_self")return DD(e||"",m),new hE(null);const E=window.open(e||"",m,v);Oe(E,r,"popup-blocked");try{E.focus()}catch{}return new hE(E)}function DD(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const OD="__/auth/handler",MD="emulator/auth/handler",kD=encodeURIComponent("fac");async function fE(r,e,t,s,o,u){Oe(r.config.authDomain,r,"auth-domain-config-required"),Oe(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:ol,eventId:o};if(e instanceof rw){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",vx(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof ic){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}r.tenantId&&(c.tid=r.tenantId);const m=c;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const g=await r._getAppCheckToken(),p=g?`#${kD}=${encodeURIComponent(g)}`:"";return`${VD(r)}?${Ku(m).slice(1)}${p}`}function VD({config:r}){return r.emulator?Hp(r,MD):`https://${r.authDomain}/${OD}`}const ag="webStorageSupport";class PD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uw,this._completeRedirectFn=aD,this._overrideRedirectResult=iD}async _openPopup(e,t,s,o){ns(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await fE(e,t,s,Bg(),o);return ND(e,u,$p())}async _openRedirect(e,t,s,o){await this._originValidation(e);const u=await fE(e,t,s,Bg(),o);return jN(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(ns(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await SD(e),s=new lD(e);return t.register("authEvent",o=>(Oe(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ag,{type:ag},o=>{const u=o?.[0]?.[ag];u!==void 0&&t(!!u),ts(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=dD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ew()||QT()||Gp()}}const LD=PD;var dE="@firebase/auth",mE="1.12.0";class UD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function jD(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zD(r){Xo(new Ga("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=s.options;Oe(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:c,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tw(r)},p=new yN(s,o,u,g);return wN(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Xo(new Ga("auth-internal",e=>{const t=Bf(e.getProvider("auth").getImmediate());return(s=>new UD(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zs(dE,mE,jD(r)),Zs(dE,mE,"esm2020")}const BD=300,qD=ZE("authIdTokenMaxAge")||BD;let gE=null;const HD=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>qD)return;const o=t?.token;gE!==o&&(gE=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Bu(r=r1()){const e=np(r,"auth");if(e.isInitialized())return e.getImmediate();const t=TN(r,{popupRedirectResolver:LD,persistence:[QN,PN,uw]}),s=ZE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const c=HD(u.toString());MN(t,c,()=>c(t.currentUser)),ON(t,m=>c(m))}}const o=XE("auth");return o&&SN(t,`http://${o}`),t}function FD(){return document.getElementsByTagName("head")?.[0]??document}_N({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=Sr("internal-error");u.customData=o,t(u)},s.type="text/javascript",s.charset="UTF-8",FD().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zD("Browser");var GD="firebase",KD="12.7.0";Zs(GD,KD,"app");const pE={apiKey:"AIzaSyB3ncjSdbTdaUqac5QvHon-Id5mCo3pByM",authDomain:"dragmate-af04d.firebaseapp.com",projectId:"dragmate-af04d",storageBucket:"dragmate-af04d.firebasestorage.app",messagingSenderId:"370425129874",appId:"1:370425129874:web:4c5c526a593e8fa45a6f4b"};let og=null,$e=null,Gh=null,On=!1;try{Object.values(pE).every(Boolean)?(og=Qv().length?Qv()[0]:i1(pE),$e=NI(og),Gh=Bu(og),On=!0,console.log(" Firebase initialized for DragMate")):console.warn(" DEMO MODE: Firebase env vars missing. Global features will run in local/demo mode only.")}catch(r){console.error(" Firebase initialization failed:",r)}const yE=3e4;async function $D(r){return r?r.currentUser?r.currentUser:(await zu(r)).user??null:null}async function _E(r,e){const t=Jn(r,"presence",e.uid);await zp(t,{lastSeen:new Date,status:"online"},{merge:!0})}function QD(){const[r,e]=H.useState({count:null,loading:!0,error:null,isOnline:!1,isSupported:On&&!!$e&&!!Gh});return H.useEffect(()=>{if(!On||!$e||!Gh){e(g=>({...g,loading:!1,isSupported:!1}));return}const t=$e,s=Gh;let o=!1,u=null,c=null;return(async()=>{try{const g=await $D(s);if(!g||o)return;await _E(t,g),e(E=>({...E,isOnline:!0,isSupported:!0})),u=window.setInterval(()=>{_E(t,g).catch(E=>{console.error("Failed to update presence",E)})},yE/2);const p=new Date(Date.now()-yE),v=zI(Xn(t,"presence"),BI("lastSeen",">=",p));c=Bp(v,E=>{o||e(w=>({...w,count:E.size,loading:!1,error:null}))},E=>{console.error("Presence subscription error",E),!o&&e(w=>({...w,loading:!1,error:E.message??"Failed to subscribe to presence"}))})}catch(g){if(console.error("Presence initialization failed",g),o)return;e(p=>({...p,loading:!1,error:g?.message??"Presence initialization failed",isSupported:!1}))}})(),()=>{o=!0,u!==null&&window.clearInterval(u),c&&c()}},[]),r}const YD=({onCreateRoom:r,onJoinRoom:e,onStartLocal:t,isAuthLoading:s,onSelectGame:o})=>{const[u,c]=H.useState("game-select"),[m,g]=H.useState(""),[p,v]=H.useState(!1),{count:E,loading:w,isSupported:C}=QD(),L=async()=>{v(!0);try{await r()}finally{v(!1)}},z=()=>A.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-500",children:[A.jsx("h2",{className:"text-2xl font-bold text-white text-center",children:"Choose Your Game"}),A.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[A.jsx("button",{onClick:()=>{o("chess"),c("mode-select")},className:"group relative w-full aspect-[4/3] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-indigo-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-indigo-500/20 overflow-hidden text-left p-6 flex flex-col justify-between",children:A.jsxs("div",{children:[A.jsx(jv,{className:"w-10 h-10 text-indigo-400 mb-3 group-hover:scale-110 transition-transform"}),A.jsx("h3",{className:"text-2xl font-black text-white",children:"CHESS"}),A.jsx("p",{className:"text-slate-400 text-sm font-medium mt-1",children:"The classic strategy game."})]})}),A.jsxs("button",{onClick:()=>{o("backgammon"),c("mode-select")},className:"group relative w-full aspect-[4/3] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-emerald-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-emerald-500/20 overflow-hidden text-left p-6 flex flex-col justify-between",children:[A.jsx("div",{className:"absolute top-0 right-0 p-2 bg-emerald-500/10 text-emerald-300 rounded-bl-2xl text-[10px] font-black uppercase tracking-widest border-b border-l border-emerald-500/20",children:"New"}),A.jsxs("div",{children:[A.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 border-2 border-slate-600 mb-3 group-hover:border-emerald-500 transition-colors"}),A.jsx("h3",{className:"text-2xl font-black text-white",children:"TAVLA"}),A.jsx("p",{className:"text-slate-400 text-sm font-medium mt-1",children:"Classic Turkish Backgammon."})]})]})]})]}),D=()=>A.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-right-8 duration-500",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[A.jsx("button",{onClick:()=>c("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:A.jsx(yu,{size:20})}),A.jsx("h2",{className:"text-2xl font-bold text-white",children:"Select Threat Level"})]}),A.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[A.jsx("button",{onClick:()=>t("Easy"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-green-500/50 hover:bg-slate-800 transition-all",children:A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("div",{className:"p-3 rounded-full bg-green-500/10 text-green-400",children:A.jsx(Ym,{size:20})}),A.jsxs("div",{className:"text-left",children:[A.jsx("div",{className:"text-lg font-bold text-white",children:"Easy"}),A.jsx("div",{className:"text-xs text-slate-500",children:"Casual play"})]})]})}),A.jsx("button",{onClick:()=>t("Normal"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-indigo-500/50 hover:bg-slate-800 transition-all",children:A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("div",{className:"p-3 rounded-full bg-indigo-500/10 text-indigo-400",children:A.jsx(Ym,{size:20})}),A.jsxs("div",{className:"text-left",children:[A.jsx("div",{className:"text-lg font-bold text-white",children:"Normal"}),A.jsx("div",{className:"text-xs text-slate-500",children:"Balanced opponent"})]})]})}),A.jsx("button",{onClick:()=>t("Hard"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-red-500/50 hover:bg-slate-800 transition-all",children:A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("div",{className:"p-3 rounded-full bg-red-500/10 text-red-400",children:A.jsx(jv,{size:20})}),A.jsxs("div",{className:"text-left",children:[A.jsx("div",{className:"text-lg font-bold text-white",children:"Hard"}),A.jsx("div",{className:"text-xs text-slate-500",children:"Ruthless tactics"})]})]})})]})]}),B=()=>A.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-right-8 duration-500",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[A.jsx("button",{onClick:()=>c("game-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:A.jsx(yu,{size:20})}),A.jsx("h2",{className:"text-2xl font-bold text-white",children:"Select Mode"})]}),A.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[A.jsxs("button",{onClick:()=>c("difficulty-select"),className:"group flex flex-col items-center justify-center gap-4 p-8 bg-slate-800/50 rounded-2xl border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all",children:[A.jsx("div",{className:"p-4 rounded-full bg-emerald-500/10 text-emerald-400 group-hover:scale-110 transition-transform",children:A.jsx(Ym,{size:32})}),A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"text-xl font-bold text-white",children:"Single Player"}),A.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"Vs Computer"})]})]}),A.jsxs("button",{onClick:()=>c("connection"),className:"group flex flex-col items-center justify-center gap-4 p-8 bg-slate-800/50 rounded-2xl border border-slate-700 hover:border-indigo-500/50 hover:bg-slate-800 transition-all",children:[A.jsx("div",{className:"p-4 rounded-full bg-indigo-500/10 text-indigo-400 group-hover:scale-110 transition-transform",children:A.jsx(Wg,{size:32})}),A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"text-xl font-bold text-white",children:"Multiplayer"}),A.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"Online PvP"})]})]})]})]}),J=()=>A.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[A.jsx("button",{onClick:()=>c("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:A.jsx(yu,{size:20})}),A.jsx("h2",{className:"text-2xl font-bold text-white",children:"Multiplayer"})]}),A.jsxs("div",{className:"space-y-6",children:[A.jsxs("button",{onClick:L,disabled:p||s,className:"w-full btn-premium flex items-center justify-center gap-3 sm:gap-4 text-lg py-4 group disabled:opacity-50 disabled:cursor-not-allowed",children:[p||s?A.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"}):A.jsx(BA,{size:24,className:"transition-transform group-hover:rotate-90"}),A.jsx("span",{children:s?"Initializing...":p?"Creating Arena...":"Create New Room"})]}),A.jsxs("div",{className:"relative flex items-center gap-6",children:[A.jsx("div",{className:"flex-1 h-px bg-slate-800"}),A.jsx("span",{className:"text-slate-600 text-xs font-black uppercase tracking-[0.2em]",children:"OR JOIN"}),A.jsx("div",{className:"flex-1 h-px bg-slate-800"})]}),A.jsxs("div",{className:"flex gap-3",children:[A.jsx("input",{type:"text",placeholder:"Enter Room ID",value:m,onChange:te=>g(te.target.value),className:"flex-1 bg-slate-900/40 border border-slate-800/50 rounded-xl px-4 py-4 text-lg placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all"}),A.jsx("button",{onClick:()=>e(m),disabled:!m.trim()||s,className:"bg-slate-800 hover:bg-slate-700 text-white disabled:opacity-50 px-6 rounded-xl transition-all font-bold shadow-lg",children:A.jsx(jA,{size:24})})]})]})]});return A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[85vh] gap-8 lg:gap-12 relative overflow-hidden px-4",children:[A.jsxs("div",{className:"text-center space-y-4 lg:space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-1000",children:[A.jsx("div",{className:"inline-flex items-center px-3 sm:px-4 py-1.5 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-400 text-xs sm:text-sm font-semibold tracking-wide",children:"PREMIUM MULTIPLAYER CHESS"}),A.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-8xl font-black tracking-tight bg-clip-text text-transparent bg-linear-to-b from-white via-indigo-100 to-indigo-400",children:"DragMate"})]}),A.jsxs("div",{className:"liquid-glass p-6 sm:p-8 w-full max-w-xl min-h-[400px] flex flex-col justify-center",children:[u==="game-select"&&z(),u==="mode-select"&&B(),u==="difficulty-select"&&D(),u==="connection"&&J()]}),A.jsx("div",{className:"flex items-center gap-10 text-slate-600 font-bold uppercase tracking-widest text-[10px] animate-in fade-in duration-1000 delay-500",children:A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${C?"bg-green-500":"bg-slate-600"}`}),C?`${w?"...":(E??0).toLocaleString()} Online`:"Demo Mode"]})})]})};function XD(r){return r!==null?{comment:r,variations:[]}:{variations:[]}}function JD(r,e,t,s,o){const u={move:r,variations:o};return e&&(u.suffix=e),t&&(u.nag=t),s!==null&&(u.comment=s),u}function ZD(...r){const[e,...t]=r;let s=e;for(const o of t)o!==null&&(s.variations=[o,...o.variations],o.variations=[],s=o);return e}function WD(r,e){if(e.marker&&e.marker.comment){let t=e.root;for(;;){const s=t.variations[0];if(!s){t.comment=e.marker.comment;break}t=s}}return{headers:r,root:e.root,result:(e.marker&&e.marker.result)??void 0}}function e4(r,e){function t(){this.constructor=r}t.prototype=e.prototype,r.prototype=new t}function rl(r,e,t,s){var o=Error.call(this,r);return Object.setPrototypeOf&&Object.setPrototypeOf(o,rl.prototype),o.expected=e,o.found=t,o.location=s,o.name="SyntaxError",o}e4(rl,Error);function lg(r,e,t){return t=t||" ",r.length>e?r:(e-=r.length,t+=t.repeat(e),r+t.slice(0,e))}rl.prototype.format=function(r){var e="Error: "+this.message;if(this.location){var t=null,s;for(s=0;s<r.length;s++)if(r[s].source===this.location.source){t=r[s].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,u=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(o):o,c=this.location.source+":"+u.line+":"+u.column;if(t){var m=this.location.end,g=lg("",u.line.toString().length," "),p=t[o.line-1],v=o.line===m.line?m.column:p.length+1,E=v-o.column||1;e+=`
 --> `+c+`
`+g+` |
`+u.line+" | "+p+`
`+g+" | "+lg("",o.column-1," ")+lg("",E,"^")}else e+=`
 at `+c}return e};rl.buildMessage=function(r,e){var t={literal:function(p){return'"'+o(p.text)+'"'},class:function(p){var v=p.parts.map(function(E){return Array.isArray(E)?u(E[0])+"-"+u(E[1]):u(E)});return"["+(p.inverted?"^":"")+v.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(p){return p.description}};function s(p){return p.charCodeAt(0).toString(16).toUpperCase()}function o(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+s(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+s(v)})}function u(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+s(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+s(v)})}function c(p){return t[p.type](p)}function m(p){var v=p.map(c),E,w;if(v.sort(),v.length>0){for(E=1,w=1;E<v.length;E++)v[E-1]!==v[E]&&(v[w]=v[E],w++);v.length=w}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}function g(p){return p?'"'+o(p)+'"':"end of input"}return"Expected "+m(r)+" but "+g(e)+" found."};function t4(r,e){e=e!==void 0?e:{};var t={},s=e.grammarSource,o={pgn:Ja},u=Ja,c="[",m='"',g="]",p=".",v="O-O-O",E="O-O",w="0-0-0",C="0-0",L="$",z="{",D="}",B=";",J="(",te=")",fe="1-0",ue="0-1",ie="1/2-1/2",R="*",x=/^[a-zA-Z]/,I=/^[^"]/,k=/^[0-9]/,M=/^[.]/,U=/^[a-zA-Z1-8\-=]/,N=/^[+#]/,qe=/^[!?]/,dt=/^[^}]/,ee=/^[^\r\n]/,ce=/^[ \t\r\n]/,be=pt("tag pair"),Me=tt("[",!1),ze=tt('"',!1),V=tt("]",!1),ne=pt("tag name"),me=Ot([["a","z"],["A","Z"]],!1,!1),de=pt("tag value"),_e=Ot(['"'],!0,!1),Ae=pt("move number"),Le=Ot([["0","9"]],!1,!1),Dt=tt(".",!1),lt=Ot(["."],!1,!1),Ht=pt("standard algebraic notation"),wi=tt("O-O-O",!1),Vn=tt("O-O",!1),qi=tt("0-0-0",!1),Jt=tt("0-0",!1),hi=Ot([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),Pn=Ot(["+","#"],!1,!1),ar=pt("suffix annotation"),Hi=Ot(["!","?"],!1,!1),St=pt("NAG"),ut=tt("$",!1),Hn=pt("brace comment"),or=tt("{",!1),lr=Ot(["}"],!0,!1),Zt=tt("}",!1),Fi=pt("rest of line comment"),Rr=tt(";",!1),Fn=Ot(["\r",`
`],!0,!1),Sn=pt("variation"),Gi=tt("(",!1),Cr=tt(")",!1),Gn=pt("game termination marker"),Ir=tt("1-0",!1),Kn=tt("0-1",!1),Ft=tt("1/2-1/2",!1),pn=tt("*",!1),At=pt("whitespace"),Nr=Ot([" ","	","\r",`
`],!1,!1),Ki=function(q,X){return WD(q,X)},ss=function(q){return Object.fromEntries(q)},ti=function(q,X){return[q,X]},$i=function(q,X){return{root:q,marker:X}},He=function(q,X){return ZD(XD(q),...X.flat())},xt=function(q,X,$,ye,Se){return JD(q,X,$,ye,Se)},Rt=function(q){return q},Ut=function(q){return q.replace(/[\r\n]+/g," ")},yn=function(q){return q.trim()},Wt=function(q){return q},Vt=function(q,X){return{result:q,comment:X}},Y=e.peg$currPos|0,mt=[{line:1,column:1}],gt=Y,Gt=e.peg$maxFailExpected||[],he=e.peg$silentFails|0,cn;if(e.startRule){if(!(e.startRule in o))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');u=o[e.startRule]}function tt(q,X){return{type:"literal",text:q,ignoreCase:X}}function Ot(q,X,$){return{type:"class",parts:q,inverted:X,ignoreCase:$}}function hn(){return{type:"end"}}function pt(q){return{type:"other",description:q}}function Pt(q){var X=mt[q],$;if(X)return X;if(q>=mt.length)$=mt.length-1;else for($=q;!mt[--$];);for(X=mt[$],X={line:X.line,column:X.column};$<q;)r.charCodeAt($)===10?(X.line++,X.column=1):X.column++,$++;return mt[q]=X,X}function Kt(q,X,$){var ye=Pt(q),Se=Pt(X),We={source:s,start:{offset:q,line:ye.line,column:ye.column},end:{offset:X,line:Se.line,column:Se.column}};return We}function Ee(q){Y<gt||(Y>gt&&(gt=Y,Gt=[]),Gt.push(q))}function as(q,X,$){return new rl(rl.buildMessage(q,X),q,X,$)}function Ja(){var q,X,$;return q=Y,X=Za(),$=Ai(),q=Ki(X,$),q}function Za(){var q,X,$;for(q=Y,X=[],$=da();$!==t;)X.push($),$=da();return $=en(),q=ss(X),q}function da(){var q,X,$,ye,Se,We,Fe;return he++,q=Y,en(),r.charCodeAt(Y)===91?(X=c,Y++):(X=t,he===0&&Ee(Me)),X!==t?(en(),$=Si(),$!==t?(en(),r.charCodeAt(Y)===34?(ye=m,Y++):(ye=t,he===0&&Ee(ze)),ye!==t?(Se=os(),r.charCodeAt(Y)===34?(We=m,Y++):(We=t,he===0&&Ee(ze)),We!==t?(en(),r.charCodeAt(Y)===93?(Fe=g,Y++):(Fe=t,he===0&&Ee(V)),Fe!==t?q=ti($,Se):(Y=q,q=t)):(Y=q,q=t)):(Y=q,q=t)):(Y=q,q=t)):(Y=q,q=t),he--,q===t&&he===0&&Ee(be),q}function Si(){var q,X,$;if(he++,q=Y,X=[],$=r.charAt(Y),x.test($)?Y++:($=t,he===0&&Ee(me)),$!==t)for(;$!==t;)X.push($),$=r.charAt(Y),x.test($)?Y++:($=t,he===0&&Ee(me));else X=t;return X!==t?q=r.substring(q,Y):q=X,he--,q===t&&(X=t,he===0&&Ee(ne)),q}function os(){var q,X,$;for(he++,q=Y,X=[],$=r.charAt(Y),I.test($)?Y++:($=t,he===0&&Ee(_e));$!==t;)X.push($),$=r.charAt(Y),I.test($)?Y++:($=t,he===0&&Ee(_e));return q=r.substring(q,Y),he--,X=t,he===0&&Ee(de),q}function Ai(){var q,X,$;return q=Y,X=$n(),en(),$=pa(),$===t&&($=null),en(),q=$i(X,$),q}function $n(){var q,X,$,ye;for(q=Y,X=ni(),X===t&&(X=null),$=[],ye=Ln();ye!==t;)$.push(ye),ye=Ln();return q=He(X,$),q}function Ln(){var q,X,$,ye,Se,We,Fe,Ci;if(q=Y,en(),xi(),en(),X=jt(),X!==t){for($=ma(),$===t&&($=null),ye=[],Se=ls();Se!==t;)ye.push(Se),Se=ls();for(Se=en(),We=ni(),We===t&&(We=null),Fe=[],Ci=us();Ci!==t;)Fe.push(Ci),Ci=us();q=xt(X,$,ye,We,Fe)}else Y=q,q=t;return q}function xi(){var q,X,$,ye,Se,We;for(he++,q=Y,X=[],$=r.charAt(Y),k.test($)?Y++:($=t,he===0&&Ee(Le));$!==t;)X.push($),$=r.charAt(Y),k.test($)?Y++:($=t,he===0&&Ee(Le));if(r.charCodeAt(Y)===46?($=p,Y++):($=t,he===0&&Ee(Dt)),$!==t){for(ye=en(),Se=[],We=r.charAt(Y),M.test(We)?Y++:(We=t,he===0&&Ee(lt));We!==t;)Se.push(We),We=r.charAt(Y),M.test(We)?Y++:(We=t,he===0&&Ee(lt));X=[X,$,ye,Se],q=X}else Y=q,q=t;return he--,q===t&&(X=t,he===0&&Ee(Ae)),q}function jt(){var q,X,$,ye,Se,We;if(he++,q=Y,X=Y,r.substr(Y,5)===v?($=v,Y+=5):($=t,he===0&&Ee(wi)),$===t&&(r.substr(Y,3)===E?($=E,Y+=3):($=t,he===0&&Ee(Vn)),$===t&&(r.substr(Y,5)===w?($=w,Y+=5):($=t,he===0&&Ee(qi)),$===t&&(r.substr(Y,3)===C?($=C,Y+=3):($=t,he===0&&Ee(Jt)),$===t))))if($=Y,ye=r.charAt(Y),x.test(ye)?Y++:(ye=t,he===0&&Ee(me)),ye!==t){if(Se=[],We=r.charAt(Y),U.test(We)?Y++:(We=t,he===0&&Ee(hi)),We!==t)for(;We!==t;)Se.push(We),We=r.charAt(Y),U.test(We)?Y++:(We=t,he===0&&Ee(hi));else Se=t;Se!==t?(ye=[ye,Se],$=ye):(Y=$,$=t)}else Y=$,$=t;return $!==t?(ye=r.charAt(Y),N.test(ye)?Y++:(ye=t,he===0&&Ee(Pn)),ye===t&&(ye=null),$=[$,ye],X=$):(Y=X,X=t),X!==t?q=r.substring(q,Y):q=X,he--,q===t&&(X=t,he===0&&Ee(Ht)),q}function ma(){var q,X,$;for(he++,q=Y,X=[],$=r.charAt(Y),qe.test($)?Y++:($=t,he===0&&Ee(Hi));$!==t;)X.push($),X.length>=2?$=t:($=r.charAt(Y),qe.test($)?Y++:($=t,he===0&&Ee(Hi)));return X.length<1?(Y=q,q=t):q=X,he--,q===t&&(X=t,he===0&&Ee(ar)),q}function ls(){var q,X,$,ye,Se;if(he++,q=Y,en(),r.charCodeAt(Y)===36?(X=L,Y++):(X=t,he===0&&Ee(ut)),X!==t){if($=Y,ye=[],Se=r.charAt(Y),k.test(Se)?Y++:(Se=t,he===0&&Ee(Le)),Se!==t)for(;Se!==t;)ye.push(Se),Se=r.charAt(Y),k.test(Se)?Y++:(Se=t,he===0&&Ee(Le));else ye=t;ye!==t?$=r.substring($,Y):$=ye,$!==t?q=Rt($):(Y=q,q=t)}else Y=q,q=t;return he--,q===t&&he===0&&Ee(St),q}function ni(){var q;return q=Ri(),q===t&&(q=ga()),q}function Ri(){var q,X,$,ye,Se;if(he++,q=Y,r.charCodeAt(Y)===123?(X=z,Y++):(X=t,he===0&&Ee(or)),X!==t){for($=Y,ye=[],Se=r.charAt(Y),dt.test(Se)?Y++:(Se=t,he===0&&Ee(lr));Se!==t;)ye.push(Se),Se=r.charAt(Y),dt.test(Se)?Y++:(Se=t,he===0&&Ee(lr));$=r.substring($,Y),r.charCodeAt(Y)===125?(ye=D,Y++):(ye=t,he===0&&Ee(Zt)),ye!==t?q=Ut($):(Y=q,q=t)}else Y=q,q=t;return he--,q===t&&(X=t,he===0&&Ee(Hn)),q}function ga(){var q,X,$,ye,Se;if(he++,q=Y,r.charCodeAt(Y)===59?(X=B,Y++):(X=t,he===0&&Ee(Rr)),X!==t){for($=Y,ye=[],Se=r.charAt(Y),ee.test(Se)?Y++:(Se=t,he===0&&Ee(Fn));Se!==t;)ye.push(Se),Se=r.charAt(Y),ee.test(Se)?Y++:(Se=t,he===0&&Ee(Fn));$=r.substring($,Y),q=yn($)}else Y=q,q=t;return he--,q===t&&(X=t,he===0&&Ee(Fi)),q}function us(){var q,X,$,ye;return he++,q=Y,en(),r.charCodeAt(Y)===40?(X=J,Y++):(X=t,he===0&&Ee(Gi)),X!==t?($=$n(),$!==t?(en(),r.charCodeAt(Y)===41?(ye=te,Y++):(ye=t,he===0&&Ee(Cr)),ye!==t?q=Wt($):(Y=q,q=t)):(Y=q,q=t)):(Y=q,q=t),he--,q===t&&he===0&&Ee(Sn),q}function pa(){var q,X,$;return he++,q=Y,r.substr(Y,3)===fe?(X=fe,Y+=3):(X=t,he===0&&Ee(Ir)),X===t&&(r.substr(Y,3)===ue?(X=ue,Y+=3):(X=t,he===0&&Ee(Kn)),X===t&&(r.substr(Y,7)===ie?(X=ie,Y+=7):(X=t,he===0&&Ee(Ft)),X===t&&(r.charCodeAt(Y)===42?(X=R,Y++):(X=t,he===0&&Ee(pn))))),X!==t?(en(),$=ni(),$===t&&($=null),q=Vt(X,$)):(Y=q,q=t),he--,q===t&&(X=t,he===0&&Ee(Gn)),q}function en(){var q,X;for(he++,q=[],X=r.charAt(Y),ce.test(X)?Y++:(X=t,he===0&&Ee(Nr));X!==t;)q.push(X),X=r.charAt(Y),ce.test(X)?Y++:(X=t,he===0&&Ee(Nr));return he--,X=t,he===0&&Ee(At),q}if(cn=u(),e.peg$library)return{peg$result:cn,peg$currPos:Y,peg$FAILED:t,peg$maxFailExpected:Gt,peg$maxFailPos:gt};if(cn!==t&&Y===r.length)return cn;throw cn!==t&&Y<r.length&&Ee(hn()),as(Gt,gt<r.length?r.charAt(gt):null,gt<r.length?Kt(gt,gt+1):Kt(gt,gt))}const Kh=0xffffffffffffffffn;function ug(r,e){return(r<<e|r>>64n-e)&0xffffffffffffffffn}function vE(r,e){return r*e&Kh}function n4(r){return function(){let e=BigInt(r&Kh),t=BigInt(r>>64n&Kh);const s=vE(ug(vE(e,5n),7n),9n);return t^=e,e=(ug(e,24n)^t^t<<16n)&Kh,t=ug(t,37n),r=t<<64n|e,s}}const Ff=n4(0xa187eb39cdcaed8f31c4b365b102e01en),i4=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>Ff()))),r4=Array.from({length:8},()=>Ff()),s4=Array.from({length:16},()=>Ff()),cg=Ff(),zn="w",vi="b",an="p",Fg="n",$h="b",mu="r",Hs="q",dn="k",hg="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Mh{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(e,t){const{color:s,piece:o,from:u,to:c,flags:m,captured:g,promotion:p}=t,v=vn(u),E=vn(c);this.color=s,this.piece=o,this.from=v,this.to=E,this.san=e._moveToSan(t,e._moves({legal:!0})),this.lan=v+E,this.before=e.fen(),e._makeMove(t),this.after=e.fen(),e._undoMove(),this.flags="";for(const w in ke)ke[w]&m&&(this.flags+=za[w]);g&&(this.captured=g),p&&(this.promotion=p,this.lan+=p)}isCapture(){return this.flags.indexOf(za.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(za.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(za.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(za.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(za.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(za.BIG_PAWN)>-1}}const Nn=-1,za={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},ke={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},Gg={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},a4={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},o4={...Gg,...a4},De={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},fg={b:[16,32,17,15],w:[-16,-32,-17,-15]},bE={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},l4=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],u4=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],c4={p:1,n:2,b:4,r:8,q:16,k:32},h4="pnbrqkPNBRQK",EE=[Fg,$h,mu,Hs],f4=7,d4=6,m4=1,g4=0,kh={[dn]:ke.KSIDE_CASTLE,[Hs]:ke.QSIDE_CASTLE},Bs={w:[{square:De.a1,flag:ke.QSIDE_CASTLE},{square:De.h1,flag:ke.KSIDE_CASTLE}],b:[{square:De.a8,flag:ke.QSIDE_CASTLE},{square:De.h8,flag:ke.KSIDE_CASTLE}]},p4={b:m4,w:d4},dg="--";function Ha(r){return r>>4}function qu(r){return r&15}function pw(r){return"0123456789".indexOf(r)!==-1}function vn(r){const e=qu(r),t=Ha(r);return"abcdefgh".substring(e,e+1)+"87654321".substring(t,t+1)}function uu(r){return r===zn?vi:zn}function y4(r){const e=r.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const t=parseInt(e[5],10);if(isNaN(t)||t<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const s=parseInt(e[4],10);if(isNaN(s)||s<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const o=e[0].split("/");if(o.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let c=0;c<o.length;c++){let m=0,g=!1;for(let p=0;p<o[c].length;p++)if(pw(o[c][p])){if(g)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};m+=parseInt(o[c][p],10),g=!0}else{if(!/^[prnbqkPRNBQK]$/.test(o[c][p]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};m+=1,g=!1}if(m!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const u=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:c,regex:m}of u){if(!m.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${c} king`};if((e[0].match(m)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${c} kings`}}return Array.from(o[0]+o[7]).some(c=>c.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function _4(r,e){const t=r.from,s=r.to,o=r.piece;let u=0,c=0,m=0;for(let g=0,p=e.length;g<p;g++){const v=e[g].from,E=e[g].to,w=e[g].piece;o===w&&t!==v&&s===E&&(u++,Ha(t)===Ha(v)&&c++,qu(t)===qu(v)&&m++)}return u>0?c>0&&m>0?vn(t):m>0?vn(t).charAt(1):vn(t).charAt(0):""}function qs(r,e,t,s,o,u=void 0,c=ke.NORMAL){const m=Ha(s);if(o===an&&(m===f4||m===g4))for(let g=0;g<EE.length;g++){const p=EE[g];r.push({color:e,from:t,to:s,piece:o,captured:u,promotion:p,flags:c|ke.PROMOTION})}else r.push({color:e,from:t,to:s,piece:o,captured:u,flags:c})}function TE(r){let e=r.charAt(0);return e>="a"&&e<="h"?r.match(/[a-h]\d.*[a-h]\d/)?void 0:an:(e=e.toLowerCase(),e==="o"?dn:e)}function mg(r){return r.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class Yp{_board=new Array(128);_turn=zn;_header={};_kings={w:Nn,b:Nn};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_hash=0n;_positionCount=new Map;constructor(e=hg,{skipValidation:t=!1}={}){this.load(e,{skipValidation:t})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:Nn,b:Nn},this._turn=zn,this._castling={w:0,b:0},this._epSquare=Nn,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...o4},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:t=!1,preserveHeaders:s=!1}={}){let o=e.split(/\s+/);if(o.length>=2&&o.length<6){const m=["-","-","0","1"];e=o.concat(m.slice(-(6-o.length))).join(" ")}if(o=e.split(/\s+/),!t){const{ok:m,error:g}=y4(e);if(!m)throw new Error(g)}const u=o[0];let c=0;this.clear({preserveHeaders:s});for(let m=0;m<u.length;m++){const g=u.charAt(m);if(g==="/")c+=8;else if(pw(g))c+=parseInt(g,10);else{const p=g<"a"?zn:vi;this._put({type:g.toLowerCase(),color:p},vn(c)),c++}}this._turn=o[1],o[2].indexOf("K")>-1&&(this._castling.w|=ke.KSIDE_CASTLE),o[2].indexOf("Q")>-1&&(this._castling.w|=ke.QSIDE_CASTLE),o[2].indexOf("k")>-1&&(this._castling.b|=ke.KSIDE_CASTLE),o[2].indexOf("q")>-1&&(this._castling.b|=ke.QSIDE_CASTLE),this._epSquare=o[3]==="-"?Nn:De[o[3]],this._halfMoves=parseInt(o[4],10),this._moveNumber=parseInt(o[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){let t=0,s="";for(let c=De.a8;c<=De.h1;c++){if(this._board[c]){t>0&&(s+=t,t=0);const{color:m,type:g}=this._board[c];s+=m===zn?g.toUpperCase():g.toLowerCase()}else t++;c+1&136&&(t>0&&(s+=t),c!==De.h1&&(s+="/"),t=0,c+=8)}let o="";this._castling[zn]&ke.KSIDE_CASTLE&&(o+="K"),this._castling[zn]&ke.QSIDE_CASTLE&&(o+="Q"),this._castling[vi]&ke.KSIDE_CASTLE&&(o+="k"),this._castling[vi]&ke.QSIDE_CASTLE&&(o+="q"),o=o||"-";let u="-";if(this._epSquare!==Nn)if(e)u=vn(this._epSquare);else{const c=this._epSquare+(this._turn===zn?16:-16),m=[c+1,c-1];for(const g of m){if(g&136)continue;const p=this._turn;if(this._board[g]?.color===p&&this._board[g]?.type===an){this._makeMove({color:p,from:g,to:this._epSquare,piece:an,captured:an,flags:ke.EP_CAPTURE});const v=!this._isKingAttacked(p);if(this._undoMove(),v){u=vn(this._epSquare);break}}}}return[s,this._turn,o,u,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;const{color:t,type:s}=this._board[e],o={w:0,b:1}[t],u={p:0,n:1,b:2,r:3,q:4,k:5}[s];return i4[o][u][e]}_epKey(){return this._epSquare===Nn?0n:r4[this._epSquare&7]}_castlingKey(){const e=this._castling.w>>5|this._castling.b>>3;return s4[e]}_computeHash(){let e=0n;for(let t=De.a8;t<=De.h1;t++){if(t&136){t+=7;continue}this._board[t]&&(e^=this._pieceKey(t))}return e^=this._epKey(),e^=this._castlingKey(),this._turn==="b"&&(e^=cg),e}_updateSetup(e){this._history.length>0||(e!==hg?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(hg)}get(e){return this._board[De[e]]}findPiece(e){const t=[];for(let s=De.a8;s<=De.h1;s++){if(s&136){s+=7;continue}!this._board[s]||this._board[s]?.color!==e.color||this._board[s].color===e.color&&this._board[s].type===e.type&&t.push(vn(s))}return t}put({type:e,color:t},s){return this._put({type:e,color:t},s)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(e,t){this._hash^=this._pieceKey(e),this._board[e]=t,this._hash^=this._pieceKey(e)}_put({type:e,color:t},s){if(h4.indexOf(e.toLowerCase())===-1||!(s in De))return!1;const o=De[s];if(e==dn&&!(this._kings[t]==Nn||this._kings[t]==o))return!1;const u=this._board[o];return u&&u.type===dn&&(this._kings[u.color]=Nn),this._set(o,{type:e,color:t}),e===dn&&(this._kings[t]=o),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){const t=this.get(e);return this._clear(De[e]),t&&t.type===dn&&(this._kings[t.color]=Nn),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){this._hash^=this._castlingKey();const e=this._board[De.e1]?.type===dn&&this._board[De.e1]?.color===zn,t=this._board[De.e8]?.type===dn&&this._board[De.e8]?.color===vi;(!e||this._board[De.a1]?.type!==mu||this._board[De.a1]?.color!==zn)&&(this._castling.w&=-65),(!e||this._board[De.h1]?.type!==mu||this._board[De.h1]?.color!==zn)&&(this._castling.w&=-33),(!t||this._board[De.a8]?.type!==mu||this._board[De.a8]?.color!==vi)&&(this._castling.b&=-65),(!t||this._board[De.h8]?.type!==mu||this._board[De.h8]?.color!==vi)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){if(this._epSquare===Nn)return;const e=this._epSquare+(this._turn===zn?-16:16),t=this._epSquare+(this._turn===zn?16:-16),s=[t+1,t-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||this._board[t]?.color!==uu(this._turn)||this._board[t]?.type!==an){this._hash^=this._epKey(),this._epSquare=Nn;return}const o=u=>!(u&136)&&this._board[u]?.color===this._turn&&this._board[u]?.type===an;s.some(o)||(this._hash^=this._epKey(),this._epSquare=Nn)}_attacked(e,t,s){const o=[];for(let u=De.a8;u<=De.h1;u++){if(u&136){u+=7;continue}if(this._board[u]===void 0||this._board[u].color!==e)continue;const c=this._board[u],m=u-t;if(m===0)continue;const g=m+119;if(l4[g]&c4[c.type]){if(c.type===an){if(m>0&&c.color===zn||m<=0&&c.color===vi)if(s)o.push(vn(u));else return!0;continue}if(c.type==="n"||c.type==="k")if(s){o.push(vn(u));continue}else return!0;const p=u4[g];let v=u+p,E=!1;for(;v!==t;){if(this._board[v]!=null){E=!0;break}v+=p}if(!E)if(s){o.push(vn(u));continue}else return!0}}return s?o:!1}attackers(e,t){return t?this._attacked(t,De[e],!0):this._attacked(this._turn,De[e],!0)}_isKingAttacked(e){const t=this._kings[e];return t===-1?!1:this._attacked(uu(e),t)}hash(){return this._hash.toString(16)}isAttacked(e,t){return this._attacked(t,De[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},t=[];let s=0,o=0;for(let u=De.a8;u<=De.h1;u++){if(o=(o+1)%2,u&136){u+=7;continue}const c=this._board[u];c&&(e[c.type]=c.type in e?e[c.type]+1:1,c.type===$h&&t.push(o),s++)}if(s===2)return!0;if(s===3&&(e[$h]===1||e[Fg]===1))return!0;if(s===e[$h]+2){let u=0;const c=t.length;for(let m=0;m<c;m++)u+=t[m];if(u===0||u===c)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:t=void 0,piece:s=void 0}={}){const o=this._moves({square:t,piece:s});return e?o.map(u=>new Mh(this,u)):o.map(u=>this._moveToSan(u,o))}_moves({legal:e=!0,piece:t=void 0,square:s=void 0}={}){const o=s?s.toLowerCase():void 0,u=t?.toLowerCase(),c=[],m=this._turn,g=uu(m);let p=De.a8,v=De.h1,E=!1;if(o)if(o in De)p=v=De[o],E=!0;else return[];for(let C=p;C<=v;C++){if(C&136){C+=7;continue}if(!this._board[C]||this._board[C].color===g)continue;const{type:L}=this._board[C];let z;if(L===an){if(u&&u!==L)continue;z=C+fg[m][0],this._board[z]||(qs(c,m,C,z,an),z=C+fg[m][1],p4[m]===Ha(C)&&!this._board[z]&&qs(c,m,C,z,an,void 0,ke.BIG_PAWN));for(let D=2;D<4;D++)z=C+fg[m][D],!(z&136)&&(this._board[z]?.color===g?qs(c,m,C,z,an,this._board[z].type,ke.CAPTURE):z===this._epSquare&&qs(c,m,C,z,an,an,ke.EP_CAPTURE))}else{if(u&&u!==L)continue;for(let D=0,B=bE[L].length;D<B;D++){const J=bE[L][D];for(z=C;z+=J,!(z&136);){if(!this._board[z])qs(c,m,C,z,L);else{if(this._board[z].color===m)break;qs(c,m,C,z,L,this._board[z].type,ke.CAPTURE);break}if(L===Fg||L===dn)break}}}}if((u===void 0||u===dn)&&(!E||v===this._kings[m])){if(this._castling[m]&ke.KSIDE_CASTLE){const C=this._kings[m],L=C+2;!this._board[C+1]&&!this._board[L]&&!this._attacked(g,this._kings[m])&&!this._attacked(g,C+1)&&!this._attacked(g,L)&&qs(c,m,this._kings[m],L,dn,void 0,ke.KSIDE_CASTLE)}if(this._castling[m]&ke.QSIDE_CASTLE){const C=this._kings[m],L=C-2;!this._board[C-1]&&!this._board[C-2]&&!this._board[C-3]&&!this._attacked(g,this._kings[m])&&!this._attacked(g,C-1)&&!this._attacked(g,L)&&qs(c,m,this._kings[m],L,dn,void 0,ke.QSIDE_CASTLE)}}if(!e||this._kings[m]===-1)return c;const w=[];for(let C=0,L=c.length;C<L;C++)this._makeMove(c[C]),this._isKingAttacked(m)||w.push(c[C]),this._undoMove();return w}move(e,{strict:t=!1}={}){let s=null;if(typeof e=="string")s=this._moveFromSan(e,t);else if(e===null)s=this._moveFromSan(dg,t);else if(typeof e=="object"){const u=this._moves();for(let c=0,m=u.length;c<m;c++)if(e.from===vn(u[c].from)&&e.to===vn(u[c].to)&&(!("promotion"in u[c])||e.promotion===u[c].promotion)){s=u[c];break}}if(!s)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&s.flags&ke.NULL_MOVE)throw new Error("Null move not allowed when in check");const o=new Mh(this,s);return this._makeMove(s),this._incPositionCount(),o}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,t){this._hash^=this._pieceKey(e),this._board[t]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(t)}_makeMove(e){const t=this._turn,s=uu(t);if(this._push(e),e.flags&ke.NULL_MOVE){t===vi&&this._moveNumber++,this._halfMoves++,this._turn=s,this._epSquare=Nn;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&ke.EP_CAPTURE&&(this._turn===vi?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:t})),this._board[e.to].type===dn){if(this._kings[t]=e.to,e.flags&ke.KSIDE_CASTLE){const o=e.to-1,u=e.to+1;this._movePiece(u,o)}else if(e.flags&ke.QSIDE_CASTLE){const o=e.to+1,u=e.to-2;this._movePiece(u,o)}this._castling[t]=0}if(this._castling[t]){for(let o=0,u=Bs[t].length;o<u;o++)if(e.from===Bs[t][o].square&&this._castling[t]&Bs[t][o].flag){this._castling[t]^=Bs[t][o].flag;break}}if(this._castling[s]){for(let o=0,u=Bs[s].length;o<u;o++)if(e.to===Bs[s][o].square&&this._castling[s]&Bs[s][o].flag){this._castling[s]^=Bs[s][o].flag;break}}if(this._hash^=this._castlingKey(),e.flags&ke.BIG_PAWN){let o;t===vi?o=e.to-16:o=e.to+16,!(e.to-1&136)&&this._board[e.to-1]?.type===an&&this._board[e.to-1]?.color===s||!(e.to+1&136)&&this._board[e.to+1]?.type===an&&this._board[e.to+1]?.color===s?(this._epSquare=o,this._hash^=this._epKey()):this._epSquare=Nn}else this._epSquare=Nn;e.piece===an?this._halfMoves=0:e.flags&(ke.CAPTURE|ke.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===vi&&this._moveNumber++,this._turn=s,this._hash^=cg}undo(){const e=this._hash,t=this._undoMove();if(t){const s=new Mh(this,t);return this._decPositionCount(e),s}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=cg;const s=this._turn,o=uu(s);if(t.flags&ke.NULL_MOVE)return t;if(this._movePiece(t.to,t.from),t.piece&&(this._clear(t.from),this._set(t.from,{type:t.piece,color:s})),t.captured)if(t.flags&ke.EP_CAPTURE){let u;s===vi?u=t.to-16:u=t.to+16,this._set(u,{type:an,color:o})}else this._set(t.to,{type:t.captured,color:o});if(t.flags&(ke.KSIDE_CASTLE|ke.QSIDE_CASTLE)){let u,c;t.flags&ke.KSIDE_CASTLE?(u=t.to+1,c=t.to-1):(u=t.to-2,c=t.to+1),this._movePiece(c,u)}return t}pgn({newline:e=`
`,maxWidth:t=0}={}){const s=[];let o=!1;for(const w in this._header)this._header[w]&&s.push(`[${w} "${this._header[w]}"]`+e),o=!0;o&&this._history.length&&s.push(e);const u=w=>{const C=this._comments[this.fen()];if(typeof C<"u"){const L=w.length>0?" ":"";w=`${w}${L}{${C}}`}return w},c=[];for(;this._history.length>0;)c.push(this._undoMove());const m=[];let g="";for(c.length===0&&m.push(u(""));c.length>0;){g=u(g);const w=c.pop();if(!w)break;if(!this._history.length&&w.color==="b"){const C=`${this._moveNumber}. ...`;g=g?`${g} ${C}`:C}else w.color==="w"&&(g.length&&m.push(g),g=this._moveNumber+".");g=g+" "+this._moveToSan(w,this._moves({legal:!0})),this._makeMove(w)}if(g.length&&m.push(u(g)),m.push(this._header.Result||"*"),t===0)return s.join("")+m.join(" ");const p=function(){return s.length>0&&s[s.length-1]===" "?(s.pop(),!0):!1},v=function(w,C){for(const L of C.split(" "))if(L){if(w+L.length>t){for(;p();)w--;s.push(e),w=0}s.push(L),w+=L.length,s.push(" "),w++}return p()&&w--,w};let E=0;for(let w=0;w<m.length;w++){if(E+m[w].length>t&&m[w].includes("{")){E=v(E,m[w]);continue}E+m[w].length>t&&w!==0?(s[s.length-1]===" "&&s.pop(),s.push(e),E=0):w!==0&&(s.push(" "),E++),s.push(m[w]),E+=m[w].length}return s.join("")}header(...e){for(let t=0;t<e.length;t+=2)typeof e[t]=="string"&&typeof e[t+1]=="string"&&(this._header[e[t]]=e[t+1]);return this._header}setHeader(e,t){return this._header[e]=t??Gg[e]??null,this.getHeaders()}removeHeader(e){return e in this._header?(this._header[e]=Gg[e]||null,!0):!1}getHeaders(){const e={};for(const[t,s]of Object.entries(this._header))s!==null&&(e[t]=s);return e}loadPgn(e,{strict:t=!1,newlineChar:s=`\r?
`}={}){s!==`\r?
`&&(e=e.replace(new RegExp(s,"g"),`
`));const o=t4(e);this.reset();const u=o.headers;let c="";for(const p in u)p.toLowerCase()==="fen"&&(c=u[p]),this.header(p,u[p]);if(!t)c&&this.load(c,{preserveHeaders:!0});else if(u.SetUp==="1"){if(!("FEN"in u))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(u.FEN,{preserveHeaders:!0})}let m=o.root;for(;m;){if(m.move){const p=this._moveFromSan(m.move,t);if(p==null)throw new Error(`Invalid move in PGN: ${m.move}`);this._makeMove(p),this._incPositionCount()}m.comment!==void 0&&(this._comments[this.fen()]=m.comment),m=m.variations[0]}const g=o.result;g&&Object.keys(this._header).length&&this._header.Result!==g&&this.setHeader("Result",g)}_moveToSan(e,t){let s="";if(e.flags&ke.KSIDE_CASTLE)s="O-O";else if(e.flags&ke.QSIDE_CASTLE)s="O-O-O";else{if(e.flags&ke.NULL_MOVE)return dg;if(e.piece!==an){const o=_4(e,t);s+=e.piece.toUpperCase()+o}e.flags&(ke.CAPTURE|ke.EP_CAPTURE)&&(e.piece===an&&(s+=vn(e.from)[0]),s+="x"),s+=vn(e.to),e.promotion&&(s+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?s+="#":s+="+"),this._undoMove(),s}_moveFromSan(e,t=!1){let s=mg(e);if(t||(s==="0-0"?s="O-O":s==="0-0-0"&&(s="O-O-O")),s==dg)return{color:this._turn,from:0,to:0,piece:"k",flags:ke.NULL_MOVE};let o=TE(s),u=this._moves({legal:!0,piece:o});for(let w=0,C=u.length;w<C;w++)if(s===mg(this._moveToSan(u[w],u)))return u[w];if(t)return null;let c,m,g,p,v,E=!1;if(m=s.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),m?(c=m[1],g=m[2],p=m[3],v=m[4],g.length==1&&(E=!0)):(m=s.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),m&&(c=m[1],g=m[2],p=m[3],v=m[4],g.length==1&&(E=!0))),o=TE(s),u=this._moves({legal:!0,piece:c||o}),!p)return null;for(let w=0,C=u.length;w<C;w++)if(g){if((!c||c.toLowerCase()==u[w].piece)&&De[g]==u[w].from&&De[p]==u[w].to&&(!v||v.toLowerCase()==u[w].promotion))return u[w];if(E){const L=vn(u[w].from);if((!c||c.toLowerCase()==u[w].piece)&&De[p]==u[w].to&&(g==L[0]||g==L[1])&&(!v||v.toLowerCase()==u[w].promotion))return u[w]}}else if(s===mg(this._moveToSan(u[w],u)).replace("x",""))return u[w];return null}ascii(){let e=`   +------------------------+
`;for(let t=De.a8;t<=De.h1;t++){if(qu(t)===0&&(e+=" "+"87654321"[Ha(t)]+" |"),this._board[t]){const s=this._board[t].type,u=this._board[t].color===zn?s.toUpperCase():s.toLowerCase();e+=" "+u+" "}else e+=" . ";t+1&136&&(e+=`|
`,t+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const t=this._moves({legal:!1});let s=0;const o=this._turn;for(let u=0,c=t.length;u<c;u++)this._makeMove(t[u]),this._isKingAttacked(o)||(e-1>0?s+=this.perft(e-1):s++),this._undoMove();return s}setTurn(e){return this._turn==e?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const e=[];let t=[];for(let s=De.a8;s<=De.h1;s++)this._board[s]==null?t.push(null):t.push({square:vn(s),type:this._board[s].type,color:this._board[s].color}),s+1&136&&(e.push(t),t=[],s+=8);return e}squareColor(e){if(e in De){const t=De[e];return(Ha(t)+qu(t))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const t=[],s=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){const o=t.pop();if(!o)break;e?s.push(new Mh(this,o)):s.push(this._moveToSan(o,this._moves())),this._makeMove(o)}return s}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){const t=this._positionCount.get(e)??0;t===1?this._positionCount.delete(e):this._positionCount.set(e,t-1)}_pruneComments(){const e=[],t={},s=o=>{o in this._comments&&(t[o]=this._comments[o])};for(;this._history.length>0;)e.push(this._undoMove());for(s(this.fen());;){const o=e.pop();if(!o)break;this._makeMove(o),s(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(const o of[dn,Hs])t[o]!==void 0&&(t[o]?this._castling[e]|=kh[o]:this._castling[e]&=~kh[o]);this._updateCastlingRights();const s=this.getCastlingRights(e);return(t[dn]===void 0||t[dn]===s[dn])&&(t[Hs]===void 0||t[Hs]===s[Hs])}getCastlingRights(e){return{[dn]:(this._castling[e]&kh[dn])!==0,[Hs]:(this._castling[e]&kh[Hs])!==0}}moveNumber(){return this._moveNumber}}var gu=jE();const Gf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ml(r){const e=Object.prototype.toString.call(r);return e==="[object Window]"||e==="[object global]"}function Xp(r){return"nodeType"in r}function ei(r){var e,t;return r?ml(r)?r:Xp(r)&&(e=(t=r.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function Jp(r){const{Document:e}=ei(r);return r instanceof e}function sc(r){return ml(r)?!1:r instanceof ei(r).HTMLElement}function yw(r){return r instanceof ei(r).SVGElement}function gl(r){return r?ml(r)?r.document:Xp(r)?Jp(r)?r:sc(r)||yw(r)?r.ownerDocument:document:document:document}const is=Gf?H.useLayoutEffect:H.useEffect;function Kf(r){const e=H.useRef(r);return is(()=>{e.current=r}),H.useCallback(function(){for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e.current==null?void 0:e.current(...s)},[])}function v4(){const r=H.useRef(null),e=H.useCallback((s,o)=>{r.current=setInterval(s,o)},[]),t=H.useCallback(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[]);return[e,t]}function Hu(r,e){e===void 0&&(e=[r]);const t=H.useRef(r);return is(()=>{t.current!==r&&(t.current=r)},e),t}function ac(r,e){const t=H.useRef();return H.useMemo(()=>{const s=r(t.current);return t.current=s,s},[...e])}function yf(r){const e=Kf(r),t=H.useRef(null),s=H.useCallback(o=>{o!==t.current&&e?.(o,t.current),t.current=o},[]);return[t,s]}function _f(r){const e=H.useRef();return H.useEffect(()=>{e.current=r},[r]),e.current}let gg={};function $f(r,e){return H.useMemo(()=>{if(e)return e;const t=gg[r]==null?0:gg[r]+1;return gg[r]=t,r+"-"+t},[r,e])}function _w(r){return function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),o=1;o<t;o++)s[o-1]=arguments[o];return s.reduce((u,c)=>{const m=Object.entries(c);for(const[g,p]of m){const v=u[g];v!=null&&(u[g]=v+r*p)}return u},{...e})}}const Qo=_w(1),vf=_w(-1);function b4(r){return"clientX"in r&&"clientY"in r}function Zp(r){if(!r)return!1;const{KeyboardEvent:e}=ei(r.target);return e&&r instanceof e}function E4(r){if(!r)return!1;const{TouchEvent:e}=ei(r.target);return e&&r instanceof e}function bf(r){if(E4(r)){if(r.touches&&r.touches.length){const{clientX:e,clientY:t}=r.touches[0];return{x:e,y:t}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:e,clientY:t}=r.changedTouches[0];return{x:e,y:t}}}return b4(r)?{x:r.clientX,y:r.clientY}:null}const sl=Object.freeze({Translate:{toString(r){if(!r)return;const{x:e,y:t}=r;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:e,scaleY:t}=r;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(r){if(r)return[sl.Translate.toString(r),sl.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:e,duration:t,easing:s}=r;return e+" "+t+"ms "+s}}}),wE="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function T4(r){return r.matches(wE)?r:r.querySelector(wE)}const w4={display:"none"};function S4(r){let{id:e,value:t}=r;return ct.createElement("div",{id:e,style:w4},t)}function A4(r){let{id:e,announcement:t,ariaLiveType:s="assertive"}=r;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ct.createElement("div",{id:e,style:o,role:"status","aria-live":s,"aria-atomic":!0},t)}function x4(){const[r,e]=H.useState("");return{announce:H.useCallback(s=>{s!=null&&e(s)},[]),announcement:r}}const vw=H.createContext(null);function R4(r){const e=H.useContext(vw);H.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(r)},[r,e])}function C4(){const[r]=H.useState(()=>new Set),e=H.useCallback(s=>(r.add(s),()=>r.delete(s)),[r]);return[H.useCallback(s=>{let{type:o,event:u}=s;r.forEach(c=>{var m;return(m=c[o])==null?void 0:m.call(c,u)})},[r]),e]}const I4={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},N4={onDragStart(r){let{active:e}=r;return"Picked up draggable item "+e.id+"."},onDragOver(r){let{active:e,over:t}=r;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(r){let{active:e,over:t}=r;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(r){let{active:e}=r;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function D4(r){let{announcements:e=N4,container:t,hiddenTextDescribedById:s,screenReaderInstructions:o=I4}=r;const{announce:u,announcement:c}=x4(),m=$f("DndLiveRegion"),[g,p]=H.useState(!1);if(H.useEffect(()=>{p(!0)},[]),R4(H.useMemo(()=>({onDragStart(E){let{active:w}=E;u(e.onDragStart({active:w}))},onDragMove(E){let{active:w,over:C}=E;e.onDragMove&&u(e.onDragMove({active:w,over:C}))},onDragOver(E){let{active:w,over:C}=E;u(e.onDragOver({active:w,over:C}))},onDragEnd(E){let{active:w,over:C}=E;u(e.onDragEnd({active:w,over:C}))},onDragCancel(E){let{active:w,over:C}=E;u(e.onDragCancel({active:w,over:C}))}}),[u,e])),!g)return null;const v=ct.createElement(ct.Fragment,null,ct.createElement(S4,{id:s,value:o.draggable}),ct.createElement(A4,{id:m,announcement:c}));return t?gu.createPortal(v,t):v}var mn;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(mn||(mn={}));function Ef(){}function Ru(r,e){return H.useMemo(()=>({sensor:r,options:e??{}}),[r,e])}function bw(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return H.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const sr=Object.freeze({x:0,y:0});function O4(r,e){const t=bf(r);if(!t)return"0 0";const s={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return s.x+"% "+s.y+"%"}function M4(r,e){let{data:{value:t}}=r,{data:{value:s}}=e;return s-t}function k4(r,e){if(!r||r.length===0)return null;const[t]=r;return t[e]}function V4(r,e){const t=Math.max(e.top,r.top),s=Math.max(e.left,r.left),o=Math.min(e.left+e.width,r.left+r.width),u=Math.min(e.top+e.height,r.top+r.height),c=o-s,m=u-t;if(s<o&&t<u){const g=e.width*e.height,p=r.width*r.height,v=c*m,E=v/(g+p-v);return Number(E.toFixed(4))}return 0}const P4=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=r;const o=[];for(const u of s){const{id:c}=u,m=t.get(c);if(m){const g=V4(m,e);g>0&&o.push({id:c,data:{droppableContainer:u,value:g}})}}return o.sort(M4)};function L4(r,e,t){return{...r,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function Ew(r,e){return r&&e?{x:r.left-e.left,y:r.top-e.top}:sr}function U4(r){return function(t){for(var s=arguments.length,o=new Array(s>1?s-1:0),u=1;u<s;u++)o[u-1]=arguments[u];return o.reduce((c,m)=>({...c,top:c.top+r*m.y,bottom:c.bottom+r*m.y,left:c.left+r*m.x,right:c.right+r*m.x}),{...t})}}const j4=U4(1);function Tw(r){if(r.startsWith("matrix3d(")){const e=r.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(r.startsWith("matrix(")){const e=r.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function z4(r,e,t){const s=Tw(e);if(!s)return r;const{scaleX:o,scaleY:u,x:c,y:m}=s,g=r.left-c-(1-o)*parseFloat(t),p=r.top-m-(1-u)*parseFloat(t.slice(t.indexOf(" ")+1)),v=o?r.width/o:r.width,E=u?r.height/u:r.height;return{width:v,height:E,top:p,right:g+v,bottom:p+E,left:g}}const B4={ignoreTransform:!1};function oc(r,e){e===void 0&&(e=B4);let t=r.getBoundingClientRect();if(e.ignoreTransform){const{transform:p,transformOrigin:v}=ei(r).getComputedStyle(r);p&&(t=z4(t,p,v))}const{top:s,left:o,width:u,height:c,bottom:m,right:g}=t;return{top:s,left:o,width:u,height:c,bottom:m,right:g}}function SE(r){return oc(r,{ignoreTransform:!0})}function q4(r){const e=r.innerWidth,t=r.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function H4(r,e){return e===void 0&&(e=ei(r).getComputedStyle(r)),e.position==="fixed"}function F4(r,e){e===void 0&&(e=ei(r).getComputedStyle(r));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const u=e[o];return typeof u=="string"?t.test(u):!1})}function Wp(r,e){const t=[];function s(o){if(e!=null&&t.length>=e||!o)return t;if(Jp(o)&&o.scrollingElement!=null&&!t.includes(o.scrollingElement))return t.push(o.scrollingElement),t;if(!sc(o)||yw(o)||t.includes(o))return t;const u=ei(r).getComputedStyle(o);return o!==r&&F4(o,u)&&t.push(o),H4(o,u)?t:s(o.parentNode)}return r?s(r):t}function ww(r){const[e]=Wp(r,1);return e??null}function pg(r){return!Gf||!r?null:ml(r)?r:Xp(r)?Jp(r)||r===gl(r).scrollingElement?window:sc(r)?r:null:null}function Sw(r){return ml(r)?r.scrollX:r.scrollLeft}function Aw(r){return ml(r)?r.scrollY:r.scrollTop}function Kg(r){return{x:Sw(r),y:Aw(r)}}var En;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(En||(En={}));function xw(r){return!Gf||!r?!1:r===document.scrollingElement}function Rw(r){const e={x:0,y:0},t=xw(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},s={x:r.scrollWidth-t.width,y:r.scrollHeight-t.height},o=r.scrollTop<=e.y,u=r.scrollLeft<=e.x,c=r.scrollTop>=s.y,m=r.scrollLeft>=s.x;return{isTop:o,isLeft:u,isBottom:c,isRight:m,maxScroll:s,minScroll:e}}const G4={x:.2,y:.2};function K4(r,e,t,s,o){let{top:u,left:c,right:m,bottom:g}=t;s===void 0&&(s=10),o===void 0&&(o=G4);const{isTop:p,isBottom:v,isLeft:E,isRight:w}=Rw(r),C={x:0,y:0},L={x:0,y:0},z={height:e.height*o.y,width:e.width*o.x};return!p&&u<=e.top+z.height?(C.y=En.Backward,L.y=s*Math.abs((e.top+z.height-u)/z.height)):!v&&g>=e.bottom-z.height&&(C.y=En.Forward,L.y=s*Math.abs((e.bottom-z.height-g)/z.height)),!w&&m>=e.right-z.width?(C.x=En.Forward,L.x=s*Math.abs((e.right-z.width-m)/z.width)):!E&&c<=e.left+z.width&&(C.x=En.Backward,L.x=s*Math.abs((e.left+z.width-c)/z.width)),{direction:C,speed:L}}function $4(r){if(r===document.scrollingElement){const{innerWidth:u,innerHeight:c}=window;return{top:0,left:0,right:u,bottom:c,width:u,height:c}}const{top:e,left:t,right:s,bottom:o}=r.getBoundingClientRect();return{top:e,left:t,right:s,bottom:o,width:r.clientWidth,height:r.clientHeight}}function Cw(r){return r.reduce((e,t)=>Qo(e,Kg(t)),sr)}function Q4(r){return r.reduce((e,t)=>e+Sw(t),0)}function Y4(r){return r.reduce((e,t)=>e+Aw(t),0)}function Iw(r,e){if(e===void 0&&(e=oc),!r)return;const{top:t,left:s,bottom:o,right:u}=e(r);ww(r)&&(o<=0||u<=0||t>=window.innerHeight||s>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const X4=[["x",["left","right"],Q4],["y",["top","bottom"],Y4]];class ey{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=Wp(t),o=Cw(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[u,c,m]of X4)for(const g of c)Object.defineProperty(this,g,{get:()=>{const p=m(s),v=o[u]-p;return this.rect[g]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Cu{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...t)})},this.target=e}add(e,t,s){var o;(o=this.target)==null||o.addEventListener(e,t,s),this.listeners.push([e,t,s])}}function J4(r){const{EventTarget:e}=ei(r);return r instanceof e?r:gl(r)}function yg(r,e){const t=Math.abs(r.x),s=Math.abs(r.y);return typeof e=="number"?Math.sqrt(t**2+s**2)>e:"x"in e&&"y"in e?t>e.x&&s>e.y:"x"in e?t>e.x:"y"in e?s>e.y:!1}var zi;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(zi||(zi={}));function AE(r){r.preventDefault()}function Z4(r){r.stopPropagation()}var wt;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter",r.Tab="Tab"})(wt||(wt={}));const Nw={start:[wt.Space,wt.Enter],cancel:[wt.Esc],end:[wt.Space,wt.Enter,wt.Tab]},W4=(r,e)=>{let{currentCoordinates:t}=e;switch(r.code){case wt.Right:return{...t,x:t.x+25};case wt.Left:return{...t,x:t.x-25};case wt.Down:return{...t,y:t.y+25};case wt.Up:return{...t,y:t.y-25}}};class Dw{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Cu(gl(t)),this.windowListeners=new Cu(ei(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(zi.Resize,this.handleCancel),this.windowListeners.add(zi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(zi.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,s=e.node.current;s&&Iw(s),t(sr)}handleKeyDown(e){if(Zp(e)){const{active:t,context:s,options:o}=this.props,{keyboardCodes:u=Nw,coordinateGetter:c=W4,scrollBehavior:m="smooth"}=o,{code:g}=e;if(u.end.includes(g)){this.handleEnd(e);return}if(u.cancel.includes(g)){this.handleCancel(e);return}const{collisionRect:p}=s.current,v=p?{x:p.left,y:p.top}:sr;this.referenceCoordinates||(this.referenceCoordinates=v);const E=c(e,{active:t,context:s.current,currentCoordinates:v});if(E){const w=vf(E,v),C={x:0,y:0},{scrollableAncestors:L}=s.current;for(const z of L){const D=e.code,{isTop:B,isRight:J,isLeft:te,isBottom:fe,maxScroll:ue,minScroll:ie}=Rw(z),R=$4(z),x={x:Math.min(D===wt.Right?R.right-R.width/2:R.right,Math.max(D===wt.Right?R.left:R.left+R.width/2,E.x)),y:Math.min(D===wt.Down?R.bottom-R.height/2:R.bottom,Math.max(D===wt.Down?R.top:R.top+R.height/2,E.y))},I=D===wt.Right&&!J||D===wt.Left&&!te,k=D===wt.Down&&!fe||D===wt.Up&&!B;if(I&&x.x!==E.x){const M=z.scrollLeft+w.x,U=D===wt.Right&&M<=ue.x||D===wt.Left&&M>=ie.x;if(U&&!w.y){z.scrollTo({left:M,behavior:m});return}U?C.x=z.scrollLeft-M:C.x=D===wt.Right?z.scrollLeft-ue.x:z.scrollLeft-ie.x,C.x&&z.scrollBy({left:-C.x,behavior:m});break}else if(k&&x.y!==E.y){const M=z.scrollTop+w.y,U=D===wt.Down&&M<=ue.y||D===wt.Up&&M>=ie.y;if(U&&!w.x){z.scrollTo({top:M,behavior:m});return}U?C.y=z.scrollTop-M:C.y=D===wt.Down?z.scrollTop-ue.y:z.scrollTop-ie.y,C.y&&z.scrollBy({top:-C.y,behavior:m});break}}this.handleMove(e,Qo(vf(E,this.referenceCoordinates),C))}}}handleMove(e,t){const{onMove:s}=this.props;e.preventDefault(),s(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Dw.activators=[{eventName:"onKeyDown",handler:(r,e,t)=>{let{keyboardCodes:s=Nw,onActivation:o}=e,{active:u}=t;const{code:c}=r.nativeEvent;if(s.start.includes(c)){const m=u.activatorNode.current;return m&&r.target!==m?!1:(r.preventDefault(),o?.({event:r.nativeEvent}),!0)}return!1}}];function xE(r){return!!(r&&"distance"in r)}function RE(r){return!!(r&&"delay"in r)}class ty{constructor(e,t,s){var o;s===void 0&&(s=J4(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:u}=e,{target:c}=u;this.props=e,this.events=t,this.document=gl(c),this.documentListeners=new Cu(this.document),this.listeners=new Cu(s),this.windowListeners=new Cu(ei(c)),this.initialCoordinates=(o=bf(u))!=null?o:sr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(zi.Resize,this.handleCancel),this.windowListeners.add(zi.DragStart,AE),this.windowListeners.add(zi.VisibilityChange,this.handleCancel),this.windowListeners.add(zi.ContextMenu,AE),this.documentListeners.add(zi.Keydown,this.handleKeydown),t){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(RE(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(xE(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:s,onPending:o}=this.props;o(s,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(zi.Click,Z4,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(zi.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:s,initialCoordinates:o,props:u}=this,{onMove:c,options:{activationConstraint:m}}=u;if(!o)return;const g=(t=bf(e))!=null?t:sr,p=vf(o,g);if(!s&&m){if(xE(m)){if(m.tolerance!=null&&yg(p,m.tolerance))return this.handleCancel();if(yg(p,m.distance))return this.handleStart()}if(RE(m)&&yg(p,m.tolerance))return this.handleCancel();this.handlePending(m,p);return}e.cancelable&&e.preventDefault(),c(g)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===wt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const eO={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ny extends ty{constructor(e){const{event:t}=e,s=gl(t.target);super(e,eO,s)}}ny.activators=[{eventName:"onPointerDown",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:s}=e;return!t.isPrimary||t.button!==0?!1:(s?.({event:t}),!0)}}];const tO={move:{name:"mousemove"},end:{name:"mouseup"}};var $g;(function(r){r[r.RightClick=2]="RightClick"})($g||($g={}));class iy extends ty{constructor(e){super(e,tO,gl(e.event.target))}}iy.activators=[{eventName:"onMouseDown",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:s}=e;return t.button===$g.RightClick?!1:(s?.({event:t}),!0)}}];const _g={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ry extends ty{constructor(e){super(e,_g)}static setup(){return window.addEventListener(_g.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(_g.move.name,e)};function e(){}}}ry.activators=[{eventName:"onTouchStart",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:s}=e;const{touches:o}=t;return o.length>1?!1:(s?.({event:t}),!0)}}];var Iu;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(Iu||(Iu={}));var Tf;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(Tf||(Tf={}));function nO(r){let{acceleration:e,activator:t=Iu.Pointer,canScroll:s,draggingRect:o,enabled:u,interval:c=5,order:m=Tf.TreeOrder,pointerCoordinates:g,scrollableAncestors:p,scrollableAncestorRects:v,delta:E,threshold:w}=r;const C=rO({delta:E,disabled:!u}),[L,z]=v4(),D=H.useRef({x:0,y:0}),B=H.useRef({x:0,y:0}),J=H.useMemo(()=>{switch(t){case Iu.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case Iu.DraggableRect:return o}},[t,o,g]),te=H.useRef(null),fe=H.useCallback(()=>{const ie=te.current;if(!ie)return;const R=D.current.x*B.current.x,x=D.current.y*B.current.y;ie.scrollBy(R,x)},[]),ue=H.useMemo(()=>m===Tf.TreeOrder?[...p].reverse():p,[m,p]);H.useEffect(()=>{if(!u||!p.length||!J){z();return}for(const ie of ue){if(s?.(ie)===!1)continue;const R=p.indexOf(ie),x=v[R];if(!x)continue;const{direction:I,speed:k}=K4(ie,x,J,e,w);for(const M of["x","y"])C[M][I[M]]||(k[M]=0,I[M]=0);if(k.x>0||k.y>0){z(),te.current=ie,L(fe,c),D.current=k,B.current=I;return}}D.current={x:0,y:0},B.current={x:0,y:0},z()},[e,fe,s,z,u,c,JSON.stringify(J),JSON.stringify(C),L,p,ue,v,JSON.stringify(w)])}const iO={x:{[En.Backward]:!1,[En.Forward]:!1},y:{[En.Backward]:!1,[En.Forward]:!1}};function rO(r){let{delta:e,disabled:t}=r;const s=_f(e);return ac(o=>{if(t||!s||!o)return iO;const u={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[En.Backward]:o.x[En.Backward]||u.x===-1,[En.Forward]:o.x[En.Forward]||u.x===1},y:{[En.Backward]:o.y[En.Backward]||u.y===-1,[En.Forward]:o.y[En.Forward]||u.y===1}}},[t,e,s])}function sO(r,e){const t=e!=null?r.get(e):void 0,s=t?t.node.current:null;return ac(o=>{var u;return e==null?null:(u=s??o)!=null?u:null},[s,e])}function aO(r,e){return H.useMemo(()=>r.reduce((t,s)=>{const{sensor:o}=s,u=o.activators.map(c=>({eventName:c.eventName,handler:e(c.handler,s)}));return[...t,...u]},[]),[r,e])}var Fu;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(Fu||(Fu={}));var Qg;(function(r){r.Optimized="optimized"})(Qg||(Qg={}));const CE=new Map;function oO(r,e){let{dragging:t,dependencies:s,config:o}=e;const[u,c]=H.useState(null),{frequency:m,measure:g,strategy:p}=o,v=H.useRef(r),E=D(),w=Hu(E),C=H.useCallback(function(B){B===void 0&&(B=[]),!w.current&&c(J=>J===null?B:J.concat(B.filter(te=>!J.includes(te))))},[w]),L=H.useRef(null),z=ac(B=>{if(E&&!t)return CE;if(!B||B===CE||v.current!==r||u!=null){const J=new Map;for(let te of r){if(!te)continue;if(u&&u.length>0&&!u.includes(te.id)&&te.rect.current){J.set(te.id,te.rect.current);continue}const fe=te.node.current,ue=fe?new ey(g(fe),fe):null;te.rect.current=ue,ue&&J.set(te.id,ue)}return J}return B},[r,u,t,E,g]);return H.useEffect(()=>{v.current=r},[r]),H.useEffect(()=>{E||C()},[t,E]),H.useEffect(()=>{u&&u.length>0&&c(null)},[JSON.stringify(u)]),H.useEffect(()=>{E||typeof m!="number"||L.current!==null||(L.current=setTimeout(()=>{C(),L.current=null},m))},[m,E,C,...s]),{droppableRects:z,measureDroppableContainers:C,measuringScheduled:u!=null};function D(){switch(p){case Fu.Always:return!1;case Fu.BeforeDragging:return t;default:return!t}}}function sy(r,e){return ac(t=>r?t||(typeof e=="function"?e(r):r):null,[e,r])}function lO(r,e){return sy(r,e)}function uO(r){let{callback:e,disabled:t}=r;const s=Kf(e),o=H.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(s)},[s,t]);return H.useEffect(()=>()=>o?.disconnect(),[o]),o}function Qf(r){let{callback:e,disabled:t}=r;const s=Kf(e),o=H.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(s)},[t]);return H.useEffect(()=>()=>o?.disconnect(),[o]),o}function cO(r){return new ey(oc(r),r)}function IE(r,e,t){e===void 0&&(e=cO);const[s,o]=H.useState(null);function u(){o(g=>{if(!r)return null;if(r.isConnected===!1){var p;return(p=g??t)!=null?p:null}const v=e(r);return JSON.stringify(g)===JSON.stringify(v)?g:v})}const c=uO({callback(g){if(r)for(const p of g){const{type:v,target:E}=p;if(v==="childList"&&E instanceof HTMLElement&&E.contains(r)){u();break}}}}),m=Qf({callback:u});return is(()=>{u(),r?(m?.observe(r),c?.observe(document.body,{childList:!0,subtree:!0})):(m?.disconnect(),c?.disconnect())},[r]),s}function hO(r){const e=sy(r);return Ew(r,e)}const NE=[];function fO(r){const e=H.useRef(r),t=ac(s=>r?s&&s!==NE&&r&&e.current&&r.parentNode===e.current.parentNode?s:Wp(r):NE,[r]);return H.useEffect(()=>{e.current=r},[r]),t}function dO(r){const[e,t]=H.useState(null),s=H.useRef(r),o=H.useCallback(u=>{const c=pg(u.target);c&&t(m=>m?(m.set(c,Kg(c)),new Map(m)):null)},[]);return H.useEffect(()=>{const u=s.current;if(r!==u){c(u);const m=r.map(g=>{const p=pg(g);return p?(p.addEventListener("scroll",o,{passive:!0}),[p,Kg(p)]):null}).filter(g=>g!=null);t(m.length?new Map(m):null),s.current=r}return()=>{c(r),c(u)};function c(m){m.forEach(g=>{const p=pg(g);p?.removeEventListener("scroll",o)})}},[o,r]),H.useMemo(()=>r.length?e?Array.from(e.values()).reduce((u,c)=>Qo(u,c),sr):Cw(r):sr,[r,e])}function DE(r,e){e===void 0&&(e=[]);const t=H.useRef(null);return H.useEffect(()=>{t.current=null},e),H.useEffect(()=>{const s=r!==sr;s&&!t.current&&(t.current=r),!s&&t.current&&(t.current=null)},[r]),t.current?vf(r,t.current):sr}function mO(r){H.useEffect(()=>{if(!Gf)return;const e=r.map(t=>{let{sensor:s}=t;return s.setup==null?void 0:s.setup()});return()=>{for(const t of e)t?.()}},r.map(e=>{let{sensor:t}=e;return t}))}function gO(r,e){return H.useMemo(()=>r.reduce((t,s)=>{let{eventName:o,handler:u}=s;return t[o]=c=>{u(c,e)},t},{}),[r,e])}function Ow(r){return H.useMemo(()=>r?q4(r):null,[r])}const OE=[];function pO(r,e){e===void 0&&(e=oc);const[t]=r,s=Ow(t?ei(t):null),[o,u]=H.useState(OE);function c(){u(()=>r.length?r.map(g=>xw(g)?s:new ey(e(g),g)):OE)}const m=Qf({callback:c});return is(()=>{m?.disconnect(),c(),r.forEach(g=>m?.observe(g))},[r]),o}function Mw(r){if(!r)return null;if(r.children.length>1)return r;const e=r.children[0];return sc(e)?e:r}function yO(r){let{measure:e}=r;const[t,s]=H.useState(null),o=H.useCallback(p=>{for(const{target:v}of p)if(sc(v)){s(E=>{const w=e(v);return E?{...E,width:w.width,height:w.height}:w});break}},[e]),u=Qf({callback:o}),c=H.useCallback(p=>{const v=Mw(p);u?.disconnect(),v&&u?.observe(v),s(v?e(v):null)},[e,u]),[m,g]=yf(c);return H.useMemo(()=>({nodeRef:m,rect:t,setRef:g}),[t,m,g])}const _O=[{sensor:ny,options:{}},{sensor:Dw,options:{}}],vO={current:{}},Qh={draggable:{measure:SE},droppable:{measure:SE,strategy:Fu.WhileDragging,frequency:Qg.Optimized},dragOverlay:{measure:oc}};class Nu extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,s;return(t=(s=this.get(e))==null?void 0:s.node.current)!=null?t:void 0}}const bO={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Nu,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ef},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Qh,measureDroppableContainers:Ef,windowRect:null,measuringScheduled:!1},kw={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ef,draggableNodes:new Map,over:null,measureDroppableContainers:Ef},lc=H.createContext(kw),Vw=H.createContext(bO);function EO(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Nu}}}function TO(r,e){switch(e.type){case mn.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case mn.DragMove:return r.draggable.active==null?r:{...r,draggable:{...r.draggable,translate:{x:e.coordinates.x-r.draggable.initialCoordinates.x,y:e.coordinates.y-r.draggable.initialCoordinates.y}}};case mn.DragEnd:case mn.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case mn.RegisterDroppable:{const{element:t}=e,{id:s}=t,o=new Nu(r.droppable.containers);return o.set(s,t),{...r,droppable:{...r.droppable,containers:o}}}case mn.SetDroppableDisabled:{const{id:t,key:s,disabled:o}=e,u=r.droppable.containers.get(t);if(!u||s!==u.key)return r;const c=new Nu(r.droppable.containers);return c.set(t,{...u,disabled:o}),{...r,droppable:{...r.droppable,containers:c}}}case mn.UnregisterDroppable:{const{id:t,key:s}=e,o=r.droppable.containers.get(t);if(!o||s!==o.key)return r;const u=new Nu(r.droppable.containers);return u.delete(t),{...r,droppable:{...r.droppable,containers:u}}}default:return r}}function wO(r){let{disabled:e}=r;const{active:t,activatorEvent:s,draggableNodes:o}=H.useContext(lc),u=_f(s),c=_f(t?.id);return H.useEffect(()=>{if(!e&&!s&&u&&c!=null){if(!Zp(u)||document.activeElement===u.target)return;const m=o.get(c);if(!m)return;const{activatorNode:g,node:p}=m;if(!g.current&&!p.current)return;requestAnimationFrame(()=>{for(const v of[g.current,p.current]){if(!v)continue;const E=T4(v);if(E){E.focus();break}}})}},[s,e,o,c,u]),null}function Pw(r,e){let{transform:t,...s}=e;return r!=null&&r.length?r.reduce((o,u)=>u({transform:o,...s}),t):t}function SO(r){return H.useMemo(()=>({draggable:{...Qh.draggable,...r?.draggable},droppable:{...Qh.droppable,...r?.droppable},dragOverlay:{...Qh.dragOverlay,...r?.dragOverlay}}),[r?.draggable,r?.droppable,r?.dragOverlay])}function AO(r){let{activeNode:e,measure:t,initialRect:s,config:o=!0}=r;const u=H.useRef(!1),{x:c,y:m}=typeof o=="boolean"?{x:o,y:o}:o;is(()=>{if(!c&&!m||!e){u.current=!1;return}if(u.current||!s)return;const p=e?.node.current;if(!p||p.isConnected===!1)return;const v=t(p),E=Ew(v,s);if(c||(E.x=0),m||(E.y=0),u.current=!0,Math.abs(E.x)>0||Math.abs(E.y)>0){const w=ww(p);w&&w.scrollBy({top:E.y,left:E.x})}},[e,c,m,s,t])}const Yf=H.createContext({...sr,scaleX:1,scaleY:1});var Fs;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(Fs||(Fs={}));const Lw=H.memo(function(e){var t,s,o,u;let{id:c,accessibility:m,autoScroll:g=!0,children:p,sensors:v=_O,collisionDetection:E=P4,measuring:w,modifiers:C,...L}=e;const z=H.useReducer(TO,void 0,EO),[D,B]=z,[J,te]=C4(),[fe,ue]=H.useState(Fs.Uninitialized),ie=fe===Fs.Initialized,{draggable:{active:R,nodes:x,translate:I},droppable:{containers:k}}=D,M=R!=null?x.get(R):null,U=H.useRef({initial:null,translated:null}),N=H.useMemo(()=>{var He;return R!=null?{id:R,data:(He=M?.data)!=null?He:vO,rect:U}:null},[R,M]),qe=H.useRef(null),[dt,ee]=H.useState(null),[ce,be]=H.useState(null),Me=Hu(L,Object.values(L)),ze=$f("DndDescribedBy",c),V=H.useMemo(()=>k.getEnabled(),[k]),ne=SO(w),{droppableRects:me,measureDroppableContainers:de,measuringScheduled:_e}=oO(V,{dragging:ie,dependencies:[I.x,I.y],config:ne.droppable}),Ae=sO(x,R),Le=H.useMemo(()=>ce?bf(ce):null,[ce]),Dt=$i(),lt=lO(Ae,ne.draggable.measure);AO({activeNode:R!=null?x.get(R):null,config:Dt.layoutShiftCompensation,initialRect:lt,measure:ne.draggable.measure});const Ht=IE(Ae,ne.draggable.measure,lt),wi=IE(Ae?Ae.parentElement:null),Vn=H.useRef({activatorEvent:null,active:null,activeNode:Ae,collisionRect:null,collisions:null,droppableRects:me,draggableNodes:x,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),qi=k.getNodeFor((t=Vn.current.over)==null?void 0:t.id),Jt=yO({measure:ne.dragOverlay.measure}),hi=(s=Jt.nodeRef.current)!=null?s:Ae,Pn=ie?(o=Jt.rect)!=null?o:Ht:null,ar=!!(Jt.nodeRef.current&&Jt.rect),Hi=hO(ar?null:Ht),St=Ow(hi?ei(hi):null),ut=fO(ie?qi??Ae:null),Hn=pO(ut),or=Pw(C,{transform:{x:I.x-Hi.x,y:I.y-Hi.y,scaleX:1,scaleY:1},activatorEvent:ce,active:N,activeNodeRect:Ht,containerNodeRect:wi,draggingNodeRect:Pn,over:Vn.current.over,overlayNodeRect:Jt.rect,scrollableAncestors:ut,scrollableAncestorRects:Hn,windowRect:St}),lr=Le?Qo(Le,I):null,Zt=dO(ut),Fi=DE(Zt),Rr=DE(Zt,[Ht]),Fn=Qo(or,Fi),Sn=Pn?j4(Pn,or):null,Gi=N&&Sn?E({active:N,collisionRect:Sn,droppableRects:me,droppableContainers:V,pointerCoordinates:lr}):null,Cr=k4(Gi,"id"),[Gn,Ir]=H.useState(null),Kn=ar?or:Qo(or,Rr),Ft=L4(Kn,(u=Gn?.rect)!=null?u:null,Ht),pn=H.useRef(null),At=H.useCallback((He,xt)=>{let{sensor:Rt,options:Ut}=xt;if(qe.current==null)return;const yn=x.get(qe.current);if(!yn)return;const Wt=He.nativeEvent,Vt=new Rt({active:qe.current,activeNode:yn,event:Wt,options:Ut,context:Vn,onAbort(mt){if(!x.get(mt))return;const{onDragAbort:Gt}=Me.current,he={id:mt};Gt?.(he),J({type:"onDragAbort",event:he})},onPending(mt,gt,Gt,he){if(!x.get(mt))return;const{onDragPending:tt}=Me.current,Ot={id:mt,constraint:gt,initialCoordinates:Gt,offset:he};tt?.(Ot),J({type:"onDragPending",event:Ot})},onStart(mt){const gt=qe.current;if(gt==null)return;const Gt=x.get(gt);if(!Gt)return;const{onDragStart:he}=Me.current,cn={activatorEvent:Wt,active:{id:gt,data:Gt.data,rect:U}};gu.unstable_batchedUpdates(()=>{he?.(cn),ue(Fs.Initializing),B({type:mn.DragStart,initialCoordinates:mt,active:gt}),J({type:"onDragStart",event:cn}),ee(pn.current),be(Wt)})},onMove(mt){B({type:mn.DragMove,coordinates:mt})},onEnd:Y(mn.DragEnd),onCancel:Y(mn.DragCancel)});pn.current=Vt;function Y(mt){return async function(){const{active:Gt,collisions:he,over:cn,scrollAdjustedTranslate:tt}=Vn.current;let Ot=null;if(Gt&&tt){const{cancelDrop:hn}=Me.current;Ot={activatorEvent:Wt,active:Gt,collisions:he,delta:tt,over:cn},mt===mn.DragEnd&&typeof hn=="function"&&await Promise.resolve(hn(Ot))&&(mt=mn.DragCancel)}qe.current=null,gu.unstable_batchedUpdates(()=>{B({type:mt}),ue(Fs.Uninitialized),Ir(null),ee(null),be(null),pn.current=null;const hn=mt===mn.DragEnd?"onDragEnd":"onDragCancel";if(Ot){const pt=Me.current[hn];pt?.(Ot),J({type:hn,event:Ot})}})}}},[x]),Nr=H.useCallback((He,xt)=>(Rt,Ut)=>{const yn=Rt.nativeEvent,Wt=x.get(Ut);if(qe.current!==null||!Wt||yn.dndKit||yn.defaultPrevented)return;const Vt={active:Wt};He(Rt,xt.options,Vt)===!0&&(yn.dndKit={capturedBy:xt.sensor},qe.current=Ut,At(Rt,xt))},[x,At]),Ki=aO(v,Nr);mO(v),is(()=>{Ht&&fe===Fs.Initializing&&ue(Fs.Initialized)},[Ht,fe]),H.useEffect(()=>{const{onDragMove:He}=Me.current,{active:xt,activatorEvent:Rt,collisions:Ut,over:yn}=Vn.current;if(!xt||!Rt)return;const Wt={active:xt,activatorEvent:Rt,collisions:Ut,delta:{x:Fn.x,y:Fn.y},over:yn};gu.unstable_batchedUpdates(()=>{He?.(Wt),J({type:"onDragMove",event:Wt})})},[Fn.x,Fn.y]),H.useEffect(()=>{const{active:He,activatorEvent:xt,collisions:Rt,droppableContainers:Ut,scrollAdjustedTranslate:yn}=Vn.current;if(!He||qe.current==null||!xt||!yn)return;const{onDragOver:Wt}=Me.current,Vt=Ut.get(Cr),Y=Vt&&Vt.rect.current?{id:Vt.id,rect:Vt.rect.current,data:Vt.data,disabled:Vt.disabled}:null,mt={active:He,activatorEvent:xt,collisions:Rt,delta:{x:yn.x,y:yn.y},over:Y};gu.unstable_batchedUpdates(()=>{Ir(Y),Wt?.(mt),J({type:"onDragOver",event:mt})})},[Cr]),is(()=>{Vn.current={activatorEvent:ce,active:N,activeNode:Ae,collisionRect:Sn,collisions:Gi,droppableRects:me,draggableNodes:x,draggingNode:hi,draggingNodeRect:Pn,droppableContainers:k,over:Gn,scrollableAncestors:ut,scrollAdjustedTranslate:Fn},U.current={initial:Pn,translated:Sn}},[N,Ae,Gi,Sn,x,hi,Pn,me,k,Gn,ut,Fn]),nO({...Dt,delta:I,draggingRect:Sn,pointerCoordinates:lr,scrollableAncestors:ut,scrollableAncestorRects:Hn});const ss=H.useMemo(()=>({active:N,activeNode:Ae,activeNodeRect:Ht,activatorEvent:ce,collisions:Gi,containerNodeRect:wi,dragOverlay:Jt,draggableNodes:x,droppableContainers:k,droppableRects:me,over:Gn,measureDroppableContainers:de,scrollableAncestors:ut,scrollableAncestorRects:Hn,measuringConfiguration:ne,measuringScheduled:_e,windowRect:St}),[N,Ae,Ht,ce,Gi,wi,Jt,x,k,me,Gn,de,ut,Hn,ne,_e,St]),ti=H.useMemo(()=>({activatorEvent:ce,activators:Ki,active:N,activeNodeRect:Ht,ariaDescribedById:{draggable:ze},dispatch:B,draggableNodes:x,over:Gn,measureDroppableContainers:de}),[ce,Ki,N,Ht,B,ze,x,Gn,de]);return ct.createElement(vw.Provider,{value:te},ct.createElement(lc.Provider,{value:ti},ct.createElement(Vw.Provider,{value:ss},ct.createElement(Yf.Provider,{value:Ft},p)),ct.createElement(wO,{disabled:m?.restoreFocus===!1})),ct.createElement(D4,{...m,hiddenTextDescribedById:ze}));function $i(){const He=dt?.autoScrollEnabled===!1,xt=typeof g=="object"?g.enabled===!1:g===!1,Rt=ie&&!He&&!xt;return typeof g=="object"?{...g,enabled:Rt}:{enabled:Rt}}}),xO=H.createContext(null),ME="button",RO="Draggable";function Uw(r){let{id:e,data:t,disabled:s=!1,attributes:o}=r;const u=$f(RO),{activators:c,activatorEvent:m,active:g,activeNodeRect:p,ariaDescribedById:v,draggableNodes:E,over:w}=H.useContext(lc),{role:C=ME,roleDescription:L="draggable",tabIndex:z=0}=o??{},D=g?.id===e,B=H.useContext(D?Yf:xO),[J,te]=yf(),[fe,ue]=yf(),ie=gO(c,e),R=Hu(t);is(()=>(E.set(e,{id:e,key:u,node:J,activatorNode:fe,data:R}),()=>{const I=E.get(e);I&&I.key===u&&E.delete(e)}),[E,e]);const x=H.useMemo(()=>({role:C,tabIndex:z,"aria-disabled":s,"aria-pressed":D&&C===ME?!0:void 0,"aria-roledescription":L,"aria-describedby":v.draggable}),[s,C,z,D,L,v.draggable]);return{active:g,activatorEvent:m,activeNodeRect:p,attributes:x,isDragging:D,listeners:s?void 0:ie,node:J,over:w,setNodeRef:te,setActivatorNodeRef:ue,transform:B}}function CO(){return H.useContext(Vw)}const IO="Droppable",NO={timeout:25};function ay(r){let{data:e,disabled:t=!1,id:s,resizeObserverConfig:o}=r;const u=$f(IO),{active:c,dispatch:m,over:g,measureDroppableContainers:p}=H.useContext(lc),v=H.useRef({disabled:t}),E=H.useRef(!1),w=H.useRef(null),C=H.useRef(null),{disabled:L,updateMeasurementsFor:z,timeout:D}={...NO,...o},B=Hu(z??s),J=H.useCallback(()=>{if(!E.current){E.current=!0;return}C.current!=null&&clearTimeout(C.current),C.current=setTimeout(()=>{p(Array.isArray(B.current)?B.current:[B.current]),C.current=null},D)},[D]),te=Qf({callback:J,disabled:L||!c}),fe=H.useCallback((x,I)=>{te&&(I&&(te.unobserve(I),E.current=!1),x&&te.observe(x))},[te]),[ue,ie]=yf(fe),R=Hu(e);return H.useEffect(()=>{!te||!ue.current||(te.disconnect(),E.current=!1,te.observe(ue.current))},[ue,te]),H.useEffect(()=>(m({type:mn.RegisterDroppable,element:{id:s,key:u,disabled:t,node:ue,rect:w,data:R}}),()=>m({type:mn.UnregisterDroppable,key:u,id:s})),[s]),H.useEffect(()=>{t!==v.current.disabled&&(m({type:mn.SetDroppableDisabled,id:s,key:u,disabled:t}),v.current.disabled=t)},[s,u,t,m]),{active:c,rect:w,isOver:g?.id===s,node:ue,over:g,setNodeRef:ie}}function DO(r){let{animation:e,children:t}=r;const[s,o]=H.useState(null),[u,c]=H.useState(null),m=_f(t);return!t&&!s&&m&&o(m),is(()=>{if(!u)return;const g=s?.key,p=s?.props.id;if(g==null||p==null){o(null);return}Promise.resolve(e(p,u)).then(()=>{o(null)})},[e,s,u]),ct.createElement(ct.Fragment,null,t,s?H.cloneElement(s,{ref:c}):null)}const OO={x:0,y:0,scaleX:1,scaleY:1};function MO(r){let{children:e}=r;return ct.createElement(lc.Provider,{value:kw},ct.createElement(Yf.Provider,{value:OO},e))}const kO={position:"fixed",touchAction:"none"},VO=r=>Zp(r)?"transform 250ms ease":void 0,PO=H.forwardRef((r,e)=>{let{as:t,activatorEvent:s,adjustScale:o,children:u,className:c,rect:m,style:g,transform:p,transition:v=VO}=r;if(!m)return null;const E=o?p:{...p,scaleX:1,scaleY:1},w={...kO,width:m.width,height:m.height,top:m.top,left:m.left,transform:sl.Transform.toString(E),transformOrigin:o&&s?O4(s,m):void 0,transition:typeof v=="function"?v(s):v,...g};return ct.createElement(t,{className:c,style:w,ref:e},u)}),LO=r=>e=>{let{active:t,dragOverlay:s}=e;const o={},{styles:u,className:c}=r;if(u!=null&&u.active)for(const[m,g]of Object.entries(u.active))g!==void 0&&(o[m]=t.node.style.getPropertyValue(m),t.node.style.setProperty(m,g));if(u!=null&&u.dragOverlay)for(const[m,g]of Object.entries(u.dragOverlay))g!==void 0&&s.node.style.setProperty(m,g);return c!=null&&c.active&&t.node.classList.add(c.active),c!=null&&c.dragOverlay&&s.node.classList.add(c.dragOverlay),function(){for(const[g,p]of Object.entries(o))t.node.style.setProperty(g,p);c!=null&&c.active&&t.node.classList.remove(c.active)}},UO=r=>{let{transform:{initial:e,final:t}}=r;return[{transform:sl.Transform.toString(e)},{transform:sl.Transform.toString(t)}]},jO={duration:250,easing:"ease",keyframes:UO,sideEffects:LO({styles:{active:{opacity:"0"}}})};function zO(r){let{config:e,draggableNodes:t,droppableContainers:s,measuringConfiguration:o}=r;return Kf((u,c)=>{if(e===null)return;const m=t.get(u);if(!m)return;const g=m.node.current;if(!g)return;const p=Mw(c);if(!p)return;const{transform:v}=ei(c).getComputedStyle(c),E=Tw(v);if(!E)return;const w=typeof e=="function"?e:BO(e);return Iw(g,o.draggable.measure),w({active:{id:u,data:m.data,node:g,rect:o.draggable.measure(g)},draggableNodes:t,dragOverlay:{node:c,rect:o.dragOverlay.measure(p)},droppableContainers:s,measuringConfiguration:o,transform:E})})}function BO(r){const{duration:e,easing:t,sideEffects:s,keyframes:o}={...jO,...r};return u=>{let{active:c,dragOverlay:m,transform:g,...p}=u;if(!e)return;const v={x:m.rect.left-c.rect.left,y:m.rect.top-c.rect.top},E={scaleX:g.scaleX!==1?c.rect.width*g.scaleX/m.rect.width:1,scaleY:g.scaleY!==1?c.rect.height*g.scaleY/m.rect.height:1},w={x:g.x-v.x,y:g.y-v.y,...E},C=o({...p,active:c,dragOverlay:m,transform:{initial:g,final:w}}),[L]=C,z=C[C.length-1];if(JSON.stringify(L)===JSON.stringify(z))return;const D=s?.({active:c,dragOverlay:m,...p}),B=m.node.animate(C,{duration:e,easing:t,fill:"forwards"});return new Promise(J=>{B.onfinish=()=>{D?.(),J()}})}}let kE=0;function qO(r){return H.useMemo(()=>{if(r!=null)return kE++,kE},[r])}const HO=ct.memo(r=>{let{adjustScale:e=!1,children:t,dropAnimation:s,style:o,transition:u,modifiers:c,wrapperElement:m="div",className:g,zIndex:p=999}=r;const{activatorEvent:v,active:E,activeNodeRect:w,containerNodeRect:C,draggableNodes:L,droppableContainers:z,dragOverlay:D,over:B,measuringConfiguration:J,scrollableAncestors:te,scrollableAncestorRects:fe,windowRect:ue}=CO(),ie=H.useContext(Yf),R=qO(E?.id),x=Pw(c,{activatorEvent:v,active:E,activeNodeRect:w,containerNodeRect:C,draggingNodeRect:D.rect,over:B,overlayNodeRect:D.rect,scrollableAncestors:te,scrollableAncestorRects:fe,transform:ie,windowRect:ue}),I=sy(w),k=zO({config:s,draggableNodes:L,droppableContainers:z,measuringConfiguration:J}),M=I?D.setRef:void 0;return ct.createElement(MO,null,ct.createElement(DO,{animation:k},E&&R?ct.createElement(PO,{key:R,id:E.id,ref:M,as:m,activatorEvent:v,adjustScale:e,className:g,transition:u,rect:I,style:{zIndex:p,...o},transform:x},t):null))}),Yo=r=>new Yp(r),FO=(r,e,t,s)=>{try{return r.move({from:e,to:t,promotion:s||"q"})}catch{return null}},GO=({id:r,isLight:e,isHighlighted:t=!1,isActive:s=!1,children:o})=>{const{isOver:u,setNodeRef:c}=ay({id:r});return A.jsxs("div",{ref:c,className:`chess-square ${s?"z-50 relative":"overflow-hidden"} ${u?"bg-indigo-500/60 shadow-[inset_0_0_20px_rgba(255,255,255,0.2)] z-10":t?e?"bg-indigo-400/50 shadow-inner":"bg-indigo-600/50 shadow-inner":e?"bg-[#cbd5e1] text-slate-700 shadow-[inset_0_1px_4px_rgba(255,255,255,0.3)]":"bg-[#334155] text-slate-400 shadow-[inset_0_2px_4px_rgba(0,0,0,0.3)]"}`,children:[A.jsx("div",{className:`absolute top-1 left-1 text-[10px] font-black uppercase tracking-tighter opacity-20 pointer-events-none ${e?"text-slate-900":"text-slate-100"}`,children:r}),A.jsx("div",{className:"relative w-full h-full overflow-visible z-10",children:o})]})},KO={w:{p:"",r:"",n:"",b:"",q:"",k:""},b:{p:"",r:"",n:"",b:"",q:"",k:""}},$O=({id:r,type:e,color:t,isDraggable:s=!0})=>{const{attributes:o,listeners:u,setNodeRef:c,transform:m,isDragging:g}=Uw({id:r,disabled:!s,data:{type:e,color:t}}),p={transform:sl.Translate.toString(m),transition:g?"none":"transform 120ms ease-out",zIndex:g?9999:20};return A.jsx("div",{ref:c,style:p,...u,...o,className:`chess-piece transition-transform duration-120 ease-out ${g?"scale-112 drop-shadow-2xl z-[9999]":"hover:scale-103 z-20"} ${s?"cursor-grab active:cursor-grabbing":"grayscale-[0.2] opacity-90 cursor-default"} text-slate-950 drop-shadow-sm`,children:A.jsx("div",{className:`
        flex items-center justify-center w-full h-full 
        ${t==="w"?"drop-shadow-[0_2px_0_rgba(255,255,255,0.8)]":"drop-shadow-[0_2px_0_rgba(0,0,0,0.5)]"}
      `,children:KO[t][e]})})},QO=({onMove:r,initialFen:e,playerColor:t="w",isGameOver:s=!1})=>{const[o,u]=H.useState(()=>Yo(e)),[c,m]=H.useState([]),[g,p]=H.useState(null);ct.useEffect(()=>{e&&e!==o.fen()&&u(Yo(e))},[e]);const v=bw(Ru(ry,{activationConstraint:{delay:80,tolerance:8}}),Ru(ny),Ru(iy)),E=H.useCallback(L=>{const{active:z,over:D}=L;if(m([]),p(null),!D)return;const B=z.id,J=D.id,te=Yo(o.fen());FO(te,B,J)&&(u(te),r&&r(te.fen()))},[o,r]),w=H.useCallback(L=>{p(L);const z=L,D=o.get(z);if(s||!D||D.color!==t||o.turn()!==t){m([]);return}const B=o.moves({square:z,verbose:!0}).map(J=>J.to);m(B)},[o,t]),C=()=>{const L=[],z=["a","b","c","d","e","f","g","h"],D=["8","7","6","5","4","3","2","1"],B=t==="w"?D:[...D].reverse(),J=t==="w"?z:[...z].reverse();for(const te of B)for(const fe of J){const ue=`${fe}${te}`,ie=o.get(ue),R=(z.indexOf(fe)+D.indexOf(te))%2===0,x=!!ie&&ie.color===t&&o.turn()===t&&!s,I=c.includes(ue),k=ue===g;L.push(A.jsx(GO,{id:ue,isLight:R,isHighlighted:I,isActive:k,children:ie&&A.jsx($O,{id:ue,type:ie.type,color:ie.color,isDraggable:x})},ue))}return L};return A.jsx(Lw,{sensors:v,onDragEnd:E,onDragStart:L=>w(L.active.id),children:A.jsx("div",{className:"p-3 lg:p-4 bg-slate-800 rounded-[2rem] lg:rounded-[2.5rem] shadow-[0_0_50px_-12px_rgba(99,102,241,0.25)] border-4 border-slate-700/50 ring-4 ring-slate-900/50",style:{touchAction:"none"},children:A.jsx("div",{className:"grid grid-cols-8 gap-0 rounded-2xl lg:rounded-3xl overflow-hidden border border-slate-700/30 shadow-inner",style:{width:"min(92vw, 720px)",height:"min(92vw, 720px)",gridTemplateColumns:"repeat(8, 1fr)"},children:C()})})})},YO=()=>Math.random().toString(36).substring(2,8).toUpperCase(),VE="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",jw=r=>{const[e,t]=H.useState(null),[s,o]=H.useState(null),[u,c]=H.useState(!0),[m,g]=H.useState(!0);H.useEffect(()=>{const D=Bu();zu(D).then(B=>{o(B.user.uid)}).catch(B=>{console.error("Auth failed",B)}).finally(()=>g(!1))},[]);const p=async()=>{if(s)return s;const D=Bu(),B=await zu(D);return o(B.user.uid),B.user.uid};return H.useEffect(()=>{if(!On||!$e){console.warn("Firebase not configured; room sync disabled."),c(!1);return}if(!r){t(null),c(!1);return}c(!0);const D=Jn(Xn($e,"rooms"),r),B=Bp(D,J=>{J.exists()?t(J.data()):t(null),c(!1)},J=>{console.error("Room subscription error",J),t(null),c(!1)});return()=>B()},[r]),{room:e,userId:s,loading:u,isAuthLoading:m,createRoom:async()=>{if(!On||!$e)throw new Error("Firebase not configured");const D=await p(),B=YO(),J=Jn(Xn($e,"rooms"),B);return await zp(J,{fen:VE,whitePlayer:D,blackPlayer:"",turn:"w",status:"active",winner:"",resultReason:""}),B},joinRoom:async D=>{if(!On||!$e)throw new Error("Firebase not configured");const B=await p(),J=Jn(Xn($e,"rooms"),D);await Au($e,async te=>{const fe=await te.get(J);if(!fe.exists())throw new Error("Room not found");const ie={...fe.data()};ie.whitePlayer?!ie.blackPlayer&&ie.whitePlayer!==B&&(ie.blackPlayer=B):ie.whitePlayer=B,te.update(J,ie)})},updateMove:async D=>{if(!On||!$e||!r)return;const B=Jn(Xn($e,"rooms"),r);await Au($e,async J=>{const te=await J.get(B);if(!te.exists())return;const fe=te.data();if(fe.status&&fe.status!=="active")return;const ue=new Yp(D),ie=ue.turn();let R="active",x="",I="";ue.isCheckmate()?(R="checkmate",x=ie==="w"?"b":"w",I="checkmate"):ue.isStalemate&&ue.isStalemate()?(R="stalemate",x="",I="stalemate"):ue.isDraw()&&(R="draw",x="",I="draw"),J.update(B,{fen:D,turn:ie,status:R,winner:x,resultReason:I})})},resignGame:async D=>{if(!On||!$e||!r)return;const B=Jn(Xn($e,"rooms"),r);await Su(B,{status:"resigned",winner:D==="w"?"b":"w",resultReason:"resigned"})},resetGame:async()=>{if(!On||!$e||!r)return;const D=Jn(Xn($e,"rooms"),r);await Su(D,{fen:VE,turn:"w",status:"active",winner:"",resultReason:""})},leaveRoom:async()=>{if(!(!On||!$e)&&r)try{const D=await p(),B=Jn(Xn($e,"rooms"),r);await Au($e,async J=>{const te=await J.get(B);if(!te.exists())return;const ue={...te.data()};ue.whitePlayer===D?ue.whitePlayer="":ue.blackPlayer===D&&(ue.blackPlayer=""),J.update(B,ue)})}catch(D){console.error("Error leaving room:",D)}}}},XO={p:10,n:30,b:30,r:50,q:90,k:900},PE=[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,-.5,-1,0,0,-1,-.5,.5],[.5,1,1,-2,-2,1,1,.5],[0,0,0,0,0,0,0,0]],LE=[[-5,-4,-3,-3,-3,-3,-4,-5],[-4,-2,0,0,0,0,-2,-4],[-3,0,1,1.5,1.5,1,0,-3],[-3,.5,1.5,2,2,1.5,.5,-3],[-3,0,1.5,2,2,1.5,0,-3],[-3,.5,1,1.5,1.5,1,.5,-3],[-4,-2,0,.5,.5,0,-2,-4],[-5,-4,-3,-3,-3,-3,-4,-5]],JO=r=>{let e=0;const t=r.board();for(let s=0;s<8;s++)for(let o=0;o<8;o++){const u=t[s][o];if(u){const c=XO[u.type];let m=0;u.type==="p"&&(m=u.color==="w"?PE[s][o]:PE[7-s][o]),u.type==="n"&&(m=u.color==="w"?LE[s][o]:LE[7-s][o]),u.color==="w"?e+=c+m*.1:e-=c+m*.1}}return e},Yg=(r,e,t,s,o)=>{if(e===0||r.isGameOver())return-JO(r);const u=r.moves();if(o){let c=-1/0;for(const m of u){r.move(m);const g=Yg(r,e-1,t,s,!1);if(r.undo(),c=Math.max(c,g),t=Math.max(t,g),s<=t)break}return c}else{let c=1/0;for(const m of u){r.move(m);const g=Yg(r,e-1,t,s,!0);if(r.undo(),c=Math.min(c,g),s=Math.min(s,g),s<=t)break}return c}},ZO=(r,e="Normal")=>{const t=r.moves();if(t.length===0)return null;if(e==="Easy"&&Math.random()>.2)return t[Math.floor(Math.random()*t.length)];let s=null,o=1/0;t.sort((c,m)=>{const g=c.includes("x")?1:0;return(m.includes("x")?1:0)-g});const u=e==="Easy"?1:e==="Hard"?3:2;for(const c of t){r.move(c);const m=Yg(r,u,-1/0,1/0,!0);r.undo(),m<o&&(o=m,s=c)}return s||t[0]},WO=({roomId:r="",mode:e="online",aiDifficulty:t="Normal",onExit:s})=>{const o=jw(e==="online"?r:null),[u,c]=H.useState(()=>Yo()),[m,g]=H.useState(u.fen()),[p,v]=H.useState("active"),[E,w]=H.useState(""),C=e==="local",L=C?{fen:m,turn:u.turn(),whitePlayer:"local-white",blackPlayer:"local-black",status:p,winner:E}:o.room,z=C?!1:o.loading,D=de=>{const _e=Yo(de);c(_e),g(de),_e.isCheckmate()?(v("checkmate"),w(_e.turn()==="w"?"b":"w")):_e.isDraw()?v("draw"):_e.isStalemate&&_e.isStalemate()&&v("stalemate")};H.useEffect(()=>{if(C&&u.turn()==="b"&&p==="active"){const de=setTimeout(()=>{const _e=ZO(u,t);_e&&(u.move(_e),D(u.fen()))},500);return()=>clearTimeout(de)}},[m,C,p,t]);const B=()=>{const de=Yo();c(de),g(de.fen()),v("active"),w(""),R(0),I(0),M(0)},J=C?D:o.updateMove,te=C?de=>{v("active"),w(de==="w"?"b":"w"),alert(`${de==="w"?"White":"Black"} resigned.`)}:o.resignGame,fe=C?B:o.resetGame,ue=C?L?.turn==="w"?"local-white":"local-black":o.userId,[ie,R]=ct.useState(0),[x,I]=ct.useState(0),[k,M]=ct.useState(0);if(ct.useEffect(()=>{!C&&r&&o.joinRoom&&o.joinRoom(r)},[r,C]),ct.useEffect(()=>{if(!L||L.status&&L.status!=="active")return;const de=window.setInterval(()=>{R(_e=>_e+1),I(_e=>_e+(L.turn==="w"?1:0)),M(_e=>_e+(L.turn==="b"?1:0))},1e3);return()=>window.clearInterval(de)},[L?.turn,L?.status]),z)return A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-6 animate-pulse",children:[A.jsx("div",{className:"relative shadow-2xl shadow-indigo-500/20 rounded-full p-4",children:A.jsx(HE,{className:"w-16 h-16 text-indigo-500 animate-spin"})}),A.jsxs("div",{className:"text-center space-y-2",children:[A.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest",children:"Entering Arena"}),A.jsx("p",{className:"text-slate-500 font-medium",children:"Synchronizing with the global lattice..."})]})]});if(!L)return A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[A.jsxs("div",{className:"text-center space-y-4",children:[A.jsx("h2",{className:"text-5xl font-black text-white italic",children:"Room Dissolved"}),A.jsx("p",{className:"text-slate-400 text-lg",children:"The arena you seek no longer exists or the link is expired."})]}),A.jsx("button",{onClick:s,className:"btn-premium px-10 py-4 text-xl",children:"Return to Lobby"})]});const U=L.whitePlayer===ue||C,N=L.blackPlayer===ue,qe=C||ue===L.whitePlayer?"w":ue===L.blackPlayer?"b":"w",dt=L.turn===qe,ee=new Yp(L.fen),ce={isCheck:ee.isCheck(),isCheckmate:ee.isCheckmate(),isDraw:ee.isDraw(),isStalemate:typeof ee.isStalemate=="function"?ee.isStalemate():!1,turn:ee.turn()},be=L.status??"active",Me=L.winner??"",ze=be!=="active",V=de=>{const _e=Math.floor(de/60).toString().padStart(2,"0"),Ae=(de%60).toString().padStart(2,"0");return`${_e}:${Ae}`},ne=be==="checkmate"?`Checkmate  ${Me==="w"?"White":"Black"} wins`:be==="stalemate"?"Stalemate  Draw":be==="draw"?"Draw":be==="resigned"?`Resigned  ${Me==="w"?"White":"Black"} wins`:ce.isCheck?`${ce.turn==="w"?"White":"Black"} is in check`:dt?"Your Turn":"Waiting...",me=()=>{navigator.clipboard.writeText(r),alert("Room ID copied to clipboard!")};return A.jsxs("div",{className:"flex flex-col items-center gap-8 lg:gap-12 py-6 lg:py-10 w-full animate-in fade-in duration-700",children:[A.jsxs("header",{className:"w-full max-w-6xl flex items-center justify-between px-4 lg:px-6",children:[A.jsxs("button",{onClick:()=>{!C&&o.leaveRoom&&o.leaveRoom(),s()},className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all font-bold uppercase tracking-widest text-xs",children:[A.jsx("div",{className:"p-2 rounded-xl bg-slate-900 border border-slate-800 group-hover:border-slate-700 group-hover:-translate-x-1 transition-transform",children:A.jsx(yu,{size:18})}),"Back"]}),!C&&A.jsx("div",{className:"flex items-center gap-4",children:A.jsxs("div",{className:"liquid-glass px-6 py-3 flex items-center gap-6",children:[A.jsxs("div",{className:"flex flex-col gap-0.5",children:[A.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-slate-500 font-black",children:"Arena ID"}),A.jsx("code",{className:"text-indigo-300 font-mono font-bold",children:r})]}),A.jsx("div",{className:"h-8 w-px bg-slate-800"}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("button",{onClick:me,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:A.jsx(BE,{size:18})}),A.jsx("button",{className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:A.jsx(GE,{size:18})})]})]})}),C&&A.jsx("div",{className:"px-6 py-3 liquid-glass text-indigo-300 font-bold uppercase tracking-widest text-xs",children:"Single Player Mode"})]}),A.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-6 lg:gap-16 w-full max-w-7xl px-4 lg:px-6",children:[A.jsxs("div",{className:"relative group w-full flex justify-center max-w-full overflow-visible",children:[A.jsx("div",{className:"absolute -inset-4 bg-linear-to-r from-indigo-500 to-pink-500 rounded-[2.5rem] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"}),A.jsx(QO,{initialFen:L.fen,onMove:J,playerColor:qe,isGameOver:ze})]}),A.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-6 lg:gap-8 mt-0 lg:mt-0",children:[A.jsxs("div",{className:"liquid-glass p-5 lg:p-8 space-y-6 lg:space-y-8 border-l-4 border-l-indigo-500",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:"Game Status"}),A.jsxs("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-2 ${be==="active"?dt?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-slate-800 text-slate-500":"bg-indigo-500/10 text-indigo-300 border border-indigo-500/30"}`,children:[A.jsx("span",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${be==="active"?"bg-green-500":"bg-indigo-400"}`}),C?L.turn==="w"?" White Turn":" Black Turn":ne]})]}),be==="active"&&ce.isCheck&&A.jsxs("div",{className:"p-3 rounded-2xl bg-amber-500/10 border border-amber-500/30 text-amber-200 text-[10px] lg:text-xs font-black uppercase tracking-widest",children:["CHECK! ",ce.turn==="w"?"White":"Black"," to move."]}),ze&&A.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/10 border border-indigo-500/30 text-indigo-100 text-sm lg:text-base font-bold",children:ne}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 p-4 rounded-2xl bg-slate-900/60 border border-slate-800/80 text-[10px] lg:text-xs font-bold uppercase tracking-widest",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx("div",{className:"text-slate-500",children:"Time"}),A.jsx("div",{className:"text-white text-base",children:V(ie)})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("div",{className:"text-slate-500",children:"White"}),A.jsx("div",{className:"text-emerald-300 text-base",children:V(x)})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("div",{className:"text-slate-500",children:"Black"}),A.jsx("div",{className:"text-sky-300 text-base",children:V(k)})]})]}),!C&&A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"flex items-center gap-3 lg:gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[A.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${U?"bg-white text-slate-950":"bg-slate-800 text-slate-400"}`,children:"W"}),A.jsxs("div",{className:"flex-1",children:[A.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"White Player"}),A.jsx("div",{className:"text-xs text-slate-500 font-medium",children:L.whitePlayer===ue?"Connected (You)":L.whitePlayer?"Opponent Ready":"Awaiting Entry..."})]})]}),A.jsxs("div",{className:"flex items-center gap-3 lg:gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[A.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${N?"bg-indigo-500 text-white":"bg-slate-800 text-slate-400"}`,children:"B"}),A.jsxs("div",{className:"flex-1",children:[A.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"Black Player"}),A.jsx("div",{className:"text-xs text-slate-500 font-medium",children:L.blackPlayer===ue?"Connected (You)":L.blackPlayer?"Opponent Ready":"Awaiting Entry..."})]})]})]})]}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[A.jsxs("button",{disabled:ze,onClick:()=>te(qe),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-slate-800 bg-slate-900/60 text-slate-200 font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:border-red-500/50 hover:text-red-200 transition",children:[A.jsx(qE,{size:18}),"Resign"]}),A.jsxs("button",{disabled:!ze&&!C,onClick:()=>fe(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 text-indigo-100 font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:bg-indigo-500/20 transition",children:[A.jsx(FE,{size:18}),"Rematch"]})]})]}),!C&&A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[A.jsx(Wg,{size:20,className:"mx-auto text-slate-600"}),A.jsx("div",{className:"text-xl font-black text-white italic",children:L.whitePlayer&&L.blackPlayer?"2/2":L.whitePlayer||L.blackPlayer?"1/2":"0/2"}),A.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Connected"})]}),A.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[A.jsx(KE,{size:20,className:"mx-auto text-indigo-400"}),A.jsx("div",{className:"text-xl font-black text-white italic",children:"24ms"}),A.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Latency"})]})]})]})]}),A.jsx("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10",children:"Transparent Strategy Arena"})]})},eM=[2,0,0,0,0,-5,0,-3,0,0,0,5,-5,0,0,0,3,0,5,0,0,0,0,-2],pu=()=>{const r=Math.floor(Math.random()*6)+1,e=Math.floor(Math.random()*6)+1;return r===e?[r,r,r,r]:[r,e]},wf=()=>{const r=pu();return{board:[...eM],bar:{white:0,black:0},off:{white:0,black:0},turn:"white",dice:r,movesLeft:[...r],validMoves:[],winner:null}},tM=(r,e)=>{const t=r.board;if(e==="white"){if(r.bar.white>0)return!1;for(let s=0;s<18;s++)if(t[s]>0)return!1;return!0}else{if(r.bar.black>0)return!1;for(let s=6;s<24;s++)if(t[s]<0)return!1;return!0}},Xg=r=>{const e=[];if(r.winner)return[];const{turn:t,board:s,bar:o,movesLeft:u}=r,c=Array.from(new Set(u));if(u.length===0)return[];const m=t==="white",g=m?1:-1;if((m?o.white:o.black)>0){for(const v of c){const E=m?v-1:24-v,w=s[E];(m?w<-1:w>1)||e.push({from:"bar",to:E,roll:v,isHit:m?w===-1:w===1})}return e}for(let v=0;v<24;v++){const E=s[v];if(!(m&&E<=0)&&!(!m&&E>=0))for(const w of c){const C=v+g*w;if(tM(r,t)){if(m&&C===24){e.push({from:v,to:"off",roll:w});continue}if(!m&&C===-1){e.push({from:v,to:"off",roll:w});continue}if(m&&C>24){let B=!0;for(let J=18;J<v;J++)s[J]>0&&(B=!1);B&&e.push({from:v,to:"off",roll:w})}if(!m&&C<-1){let B=!0;for(let J=5;J>v;J--)s[J]<0&&(B=!1);B&&e.push({from:v,to:"off",roll:w})}}if(C<0||C>23)continue;const z=s[C];(m?z<-1:z>1)||e.push({from:v,to:C,roll:w,isHit:m?z===-1:z===1})}}return e},oy=(r,e)=>{const t={...r,board:[...r.board],bar:{...r.bar},off:{...r.off},movesLeft:[...r.movesLeft]},s=r.turn==="white";if(e.from==="bar"?s?t.bar.white--:t.bar.black--:t.board[e.from]-=s?1:-1,e.to==="off")s?t.off.white++:t.off.black++;else{const u=e.to;e.isHit&&(s?t.bar.black++:t.bar.white++,t.board[u]=0),t.board[u]+=s?1:-1}const o=t.movesLeft.indexOf(e.roll);return o>-1&&t.movesLeft.splice(o,1),s&&t.off.white===15&&(t.winner="white"),!s&&t.off.black===15&&(t.winner="black"),t},nM=()=>Math.random().toString(36).substring(2,8).toUpperCase(),zw=r=>{const[e,t]=H.useState(null),[s,o]=H.useState(null),[u,c]=H.useState(!0),[m,g]=H.useState(!0);H.useEffect(()=>{const D=Bu();zu(D).then(B=>{o(B.user.uid)}).catch(B=>{console.error("Auth failed",B)}).finally(()=>g(!1))},[]);const p=async()=>{if(s)return s;const D=Bu(),B=await zu(D);return o(B.user.uid),B.user.uid};return H.useEffect(()=>{if(!On||!$e){c(!1);return}if(!r){t(null),c(!1);return}c(!0);const D=Jn(Xn($e,"rooms_bg"),r),B=Bp(D,J=>{J.exists()?t(J.data()):t(null),c(!1)},J=>{console.error("Room subscription error",J),t(null),c(!1)});return()=>B()},[r]),{room:e,userId:s,loading:u,isAuthLoading:m,createRoom:async()=>{if(!On||!$e)throw new Error("Firebase not configured");const D=await p(),B=nM(),J=Jn(Xn($e,"rooms_bg"),B),te=wf(),fe={board:te.board,bar:te.bar,off:te.off,turn:te.turn,dice:te.dice,movesLeft:te.movesLeft,whitePlayer:D,blackPlayer:"",winner:"",status:"active"};return await zp(J,fe),B},joinRoom:async D=>{if(!On||!$e)throw new Error("Firebase not configured");const B=await p(),J=Jn(Xn($e,"rooms_bg"),D);await Au($e,async te=>{const fe=await te.get(J);if(!fe.exists())throw new Error("Room not found");const ie={...fe.data()};ie.whitePlayer?!ie.blackPlayer&&ie.whitePlayer!==B&&(ie.blackPlayer=B):ie.whitePlayer=B,te.update(J,ie)})},updateGameState:async D=>{if(!On||!$e||!r)return;const B=Jn(Xn($e,"rooms_bg"),r);let J="active",te="";D.winner&&(J="finished",te=D.winner),await Su(B,{board:D.board,bar:D.bar,off:D.off,turn:D.turn,dice:D.dice,movesLeft:D.movesLeft,winner:te,status:J})},resignGame:async D=>{if(!On||!$e||!r)return;const B=Jn(Xn($e,"rooms_bg"),r);await Su(B,{status:"resigned",winner:D==="white"?"black":"white"})},resetGame:async()=>{if(!On||!$e||!r)return;const D=wf(),B=Jn(Xn($e,"rooms_bg"),r);await Su(B,{board:D.board,bar:D.bar,off:D.off,turn:D.turn,dice:D.dice,movesLeft:D.movesLeft,status:"active",winner:""})},leaveRoom:async()=>{if(!(!On||!$e)&&r)try{const D=await p(),B=Jn(Xn($e,"rooms_bg"),r);await Au($e,async J=>{const te=await J.get(B);if(!te.exists())return;const ue={...te.data()};ue.whitePlayer===D?ue.whitePlayer="":ue.blackPlayer===D&&(ue.blackPlayer=""),J.update(B,ue)})}catch(D){console.error("Error leaving room:",D)}}}},Bw=({color:r,style:e,className:t=""})=>{const s=r==="white"?"bg-slate-200 shadow-[inset_0_-4px_4px_rgba(0,0,0,0.2),0_4px_6px_rgba(0,0,0,0.3)] border-slate-300":"bg-slate-900 shadow-[inset_0_-4px_4px_rgba(0,0,0,0.5),0_4px_6px_rgba(0,0,0,0.4)] border-slate-700",o=r==="white"?"border-slate-300":"border-slate-700";return A.jsx("div",{style:e,className:`w-full h-full rounded-full border-4 ${s} relative flex items-center justify-center ${t}`,children:A.jsx("div",{className:`w-[70%] h-[70%] rounded-full border-2 ${o} opacity-30`})})},Jg=({id:r,color:e,isDraggable:t=!1,style:s})=>{const{attributes:o,listeners:u,setNodeRef:c,isDragging:m}=Uw({id:r,disabled:!t}),g={opacity:m?0:1,touchAction:"none",...s};return A.jsx("div",{ref:c,style:g,...u,...o,className:"w-full aspect-square relative cursor-grab active:cursor-grabbing",children:A.jsx(Bw,{color:e})})},iM=({index:r,count:e,isTop:t,isHighlighted:s,playerColor:o,canDragFrom:u})=>{const{setNodeRef:c,isOver:m}=ay({id:r.toString()}),g=r%2===1,p=m||s?"bg-indigo-500/20 ring-2 ring-indigo-400/50":"",v=[],E=Math.abs(e),w=e>0?"white":"black";for(let C=0;C<E;C++){const L=C===E-1,z=u&&L&&w===o;v.push(A.jsx("div",{className:"w-[80%] max-w-[40px] -my-1 z-10 relative",children:A.jsx(Jg,{id:`checker-${r}-${C}`,color:w,isDraggable:z})},`${r}-${C}`))}return A.jsxs("div",{ref:c,className:`relative flex-1 h-full flex ${t?"flex-col items-center justify-start":"flex-col-reverse items-center justify-start"} ${p} transition-colors rounded-sm`,children:[A.jsx("div",{className:"absolute inset-0 pointer-events-none w-full h-full opacity-60",style:{clipPath:t?"polygon(0 0, 50% 100%, 100% 0)":"polygon(0 100%, 50% 0, 100% 100%)",backgroundColor:g?"#334155":"#818cf8",opacity:g?.4:.15}}),A.jsx("div",{className:`z-10 w-full h-full flex ${t?"flex-col pt-2":"flex-col-reverse pb-2"} items-center`,children:v}),A.jsx("span",{className:`absolute ${t?"top-0":"bottom-0"} text-[8px] text-slate-600 font-mono opacity-50`,children:r+1})]})},rM=({gameState:r,playerColor:e,onMove:t,validMoves:s})=>{const{board:o,bar:u,off:c,turn:m}=r,[g,p]=H.useState(null),[v,E]=H.useState([]),w=bw(Ru(iy,{activationConstraint:{distance:8}}),Ru(ry,{activationConstraint:{delay:100,tolerance:5}})),C=D=>{const{active:B}=D,J=B.id;let te=-1;if(J.startsWith("bar"))te="bar";else if(J.startsWith("checker-")){const ie=J.split("-");te=parseInt(ie[1])}else te=parseInt(J);p(J);const ue=s.filter(ie=>te==="bar"?ie.from==="bar":ie.from===te).map(ie=>ie.to==="off"?99:ie.to);E(ue)},L=D=>{const{active:B,over:J}=D;if(p(null),E([]),!J)return;const te=B.id;let fe=-1;if(te.startsWith("bar"))fe="bar";else if(te.startsWith("checker-")){const R=te.split("-");fe=parseInt(R[1])}else fe=parseInt(te);let ue=-1;J.id==="off"?ue="off":ue=parseInt(J.id);const ie=s.find(R=>R.from===fe&&R.to===ue);if(ie){const R=oy(r,ie);t(R)}},z=(D,B,J)=>{const te=[];if(D<B)for(let fe=D;fe<=B;fe++)te.push(fe);else for(let fe=D;fe>=B;fe--)te.push(fe);return A.jsx("div",{className:`flex-1 flex ${J?"border-b-2":"border-t-2"} border-slate-700/30`,children:te.map(fe=>A.jsx(iM,{index:fe,count:o[fe],isTop:J,isHighlighted:v.includes(fe),playerColor:e,canDragFrom:e===m&&(e==="white"&&u.white===0||e==="black"&&u.black===0)},fe))})};return A.jsxs(Lw,{sensors:w,onDragStart:C,onDragEnd:L,children:[A.jsxs("div",{className:"flex flex-col md:flex-row w-full max-w-full md:max-w-7xl mx-auto gap-2 md:gap-4 items-stretch p-1 md:p-4",children:[A.jsxs("div",{className:"relative flex-1 aspect-square md:aspect-[4/3] bg-slate-800/80 rounded-xl border-4 md:border-[12px] border-slate-900 shadow-2xl flex flex-col overflow-hidden",children:[A.jsxs("div",{className:"flex-1 flex",children:[z(12,17,!0),A.jsxs("div",{className:"w-12 md:w-20 bg-slate-900/50 border-x-4 border-slate-900 flex flex-col items-center justify-center gap-1 py-2",children:[Array.from({length:u.white}).map((D,B)=>A.jsx("div",{className:"w-10 md:w-12",children:A.jsx(Jg,{id:`bar-white-${B}`,color:"white",isDraggable:e==="white"&&m==="white"&&B===u.white-1})},`bar-w-${B}`)),Array.from({length:u.black}).map((D,B)=>A.jsx("div",{className:"w-10 md:w-12",children:A.jsx(Jg,{id:`bar-black-${B}`,color:"black",isDraggable:e==="black"&&m==="black"&&B===u.black-1})},`bar-b-${B}`))]}),z(18,23,!0)]}),A.jsxs("div",{className:"flex-1 flex",children:[z(11,6,!1),A.jsx("div",{className:"w-12 md:w-20 bg-slate-900/50 border-x-4 border-slate-900 flex flex-col-reverse items-center justify-start gap-1 py-2"}),z(5,0,!1)]}),A.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center z-50",children:A.jsx("div",{className:"flex gap-3",children:r.movesLeft.map((D,B)=>A.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-white rounded-lg shadow-xl flex items-center justify-center text-xl md:text-2xl font-black text-slate-900 border-2 border-slate-200 animate-in zoom-in spin-in-3 duration-300",children:D},B))})})]}),A.jsxs("div",{className:"w-full h-20 md:w-32 md:h-auto bg-slate-900/40 rounded-xl border-4 border-slate-800 flex flex-row md:flex-col relative overflow-hidden shrink-0",children:[A.jsx("div",{className:"absolute inset-y-0 left-1/2 -translate-x-1/2 w-[2px] bg-slate-800/50 hidden md:block"}),A.jsx("div",{className:"absolute inset-x-0 top-1/2 -translate-y-1/2 h-[2px] bg-slate-800/50 md:hidden"}),A.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 md:-rotate-90 text-slate-700 font-bold text-xs md:text-sm tracking-[0.5em] pointer-events-none whitespace-nowrap opacity-50 z-0",children:"COLLECT"}),A.jsx("div",{className:"flex-1 w-full p-2 flex flex-col gap-1 z-10 border-r md:border-r-0 md:border-b border-slate-800/50",children:A.jsx(UE,{playerColor:"white",count:c.white,isTop:!0})}),A.jsx("div",{className:"flex-1 w-full p-2 flex flex-col-reverse gap-1 z-10",children:A.jsx(UE,{playerColor:"black",count:c.black,isTop:!1})}),A.jsx("div",{className:`absolute inset-0 z-20 ${g?"pointer-events-auto":"pointer-events-none"}`,children:A.jsx(sM,{isHighlighted:v.includes(99)})})]})]}),A.jsx(HO,{children:g?A.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 cursor-grabbing",children:A.jsx(Bw,{color:(function(){if(g.startsWith("bar-white"))return"white";if(g.startsWith("bar-black"))return"black";if(g.startsWith("checker-")){const D=g.split("-"),B=parseInt(D[1]);return o[B]>0?"white":"black"}return"white"})()})}):null})]})},sM=({isHighlighted:r})=>{const{setNodeRef:e,isOver:t}=ay({id:"off"}),s=t||r;return A.jsx("div",{ref:e,className:`w-full h-full flex items-center justify-center transition-all duration-300 ${s?"bg-indigo-500/30 backdrop-blur-sm border-2 border-dashed border-indigo-400":""}`,children:s&&A.jsx("div",{className:"text-indigo-200 font-bold text-xs rotate-90 whitespace-nowrap animate-pulse",children:"COLLECT"})})},UE=({playerColor:r,count:e,isTop:t})=>A.jsxs("div",{className:`w-full flex ${t?"flex-col":"flex-col-reverse"} gap-[2px] transition-colors rounded-lg p-1`,children:[e>0&&A.jsx("div",{className:`text-[10px] text-center mb-1 font-bold ${r==="white"?"text-slate-400":"text-slate-600"}`,children:e}),Array.from({length:Math.min(e,15)}).map((s,o)=>A.jsx("div",{className:`h-2 w-full rounded-sm opacity-80 ${r==="white"?"bg-slate-200 shadow-sm":"bg-slate-900 border border-slate-700 shadow-sm"}`},o))]}),aM=(r,e="Normal")=>{const t=Xg(r);if(t.length===0)return null;if(e==="Easy"){const u=Math.floor(Math.random()*t.length);return t[u]}let s=t[0],o=-1/0;for(const u of t){const c=oM(r,u,e);c>o&&(o=c,s=u)}return s},oM=(r,e,t)=>{let s=0;e.isHit&&(s+=100),e.to==="off"&&(s+=200);const o=oy({...r},e),u=r.turn==="white";if(typeof e.to=="number"){const c=o.board[e.to];u&&c===2&&(s+=50),!u&&c===-2&&(s+=50)}if(typeof e.to=="number"){const c=o.board[e.to];Math.abs(c)===1&&(s-=30)}if(typeof e.from=="number"){const c=o.board[e.from];Math.abs(c)===1&&(s-=40)}return t==="Hard"&&typeof e.to=="number"&&(u?e.to>=18:e.to<=5)&&Math.abs(o.board[e.to])>1&&(s+=30),s+=Math.random()*5,s},lM=({roomId:r="",mode:e="online",aiDifficulty:t="Normal",onExit:s})=>{const o=zw(e==="online"?r:null),[u,c]=H.useState(()=>wf()),[m,g]=H.useState(null),p=e==="local",v=ct.useMemo(()=>p?u:m||(o.room?{...o.room,validMoves:[]}:null),[p,u,o.room,m]);H.useEffect(()=>{if(!o.room||!m)return;const ue=o.room.turn===m.turn,ie=JSON.stringify(o.room.board)===JSON.stringify(m.board),R=o.room.movesLeft.length===m.movesLeft.length;ue&&ie&&R?g(null):ue||g(null)},[o.room,m]);const E=ct.useMemo(()=>v?Xg(v):[],[v]),w=p?v?.turn==="white"?"local-white":"local-black":o.userId,C=p||o.room?.whitePlayer===w?"white":"black",L=C===v?.turn;H.useEffect(()=>{!p&&r&&o.joinRoom&&o.joinRoom(r)},[r,p]);const z=()=>{navigator.clipboard.writeText(r),alert("Room ID copied to clipboard!")},D=o.room?.whitePlayer===w||p,B=o.room?.blackPlayer===w,J=!!v?.winner,te=ue=>{let ie={...ue};ie.movesLeft.length===0?(ie.turn=ie.turn==="white"?"black":"white",ie.dice=pu(),ie.movesLeft=[...ie.dice]):Xg(ie).length===0&&(ie.turn=ie.turn==="white"?"black":"white",ie.dice=pu(),ie.movesLeft=[...ie.dice]),p?c(ie):(g(ie),o.updateGameState(ie))};if(H.useEffect(()=>{if(v&&v.movesLeft.length>0&&E.length===0&&!v.winner){const ue=setTimeout(()=>{let ie={...v};ie.turn=ie.turn==="white"?"black":"white",ie.dice=pu(),ie.movesLeft=[...ie.dice],p?c(ie):(g(ie),o.updateGameState(ie))},1500);return()=>clearTimeout(ue)}},[v?.movesLeft,E.length,v?.winner,v?.turn,p,v]),H.useEffect(()=>{if(v&&p&&v.turn==="black"&&!v.winner){const ue=setTimeout(()=>{const ie=aM(v,t);if(ie){const R=oy(v,ie);te(R)}else{let R={...v};R.turn="white",R.dice=pu(),R.movesLeft=[...R.dice],c(R)}},800);return()=>clearTimeout(ue)}},[v,p,t]),!p&&o.loading)return A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-6 animate-pulse",children:[A.jsx("div",{className:"relative shadow-2xl shadow-indigo-500/20 rounded-full p-4",children:A.jsx(HE,{className:"w-16 h-16 text-indigo-500 animate-spin"})}),A.jsxs("div",{className:"text-center space-y-2",children:[A.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest",children:"Entering Arena"}),A.jsx("p",{className:"text-slate-500 font-medium",children:"Synchronizing with the global lattice..."})]})]});if(!v)return A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[A.jsxs("div",{className:"text-center space-y-4",children:[A.jsx("h2",{className:"text-5xl font-black text-white italic",children:"Room Dissolved"}),A.jsx("p",{className:"text-slate-400 text-lg",children:"The arena you seek no longer exists or the link is expired."})]}),A.jsx("button",{onClick:s,className:"btn-premium px-10 py-4 text-xl",children:"Return to Lobby"})]});const fe=v.winner?`${v.winner==="white"?"White":"Black"} Wins!`:L?"Your Turn":"Waiting...";return A.jsxs("div",{className:"flex flex-col items-center gap-8 lg:gap-12 py-6 lg:py-10 w-full animate-in fade-in duration-700",children:[A.jsxs("header",{className:"w-full max-w-6xl flex items-center justify-between px-4 lg:px-6",children:[A.jsxs("button",{onClick:()=>{!p&&o.leaveRoom&&o.leaveRoom(),s()},className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all font-bold uppercase tracking-widest text-xs",children:[A.jsx("div",{className:"p-2 rounded-xl bg-slate-900 border border-slate-800 group-hover:border-slate-700 group-hover:-translate-x-1 transition-transform",children:A.jsx(yu,{size:18})}),"Back"]}),!p&&A.jsx("div",{className:"flex items-center gap-4",children:A.jsxs("div",{className:"liquid-glass px-6 py-3 flex items-center gap-6",children:[A.jsxs("div",{className:"flex flex-col gap-0.5",children:[A.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-slate-500 font-black",children:"Arena ID"}),A.jsx("code",{className:"text-indigo-300 font-mono font-bold",children:r})]}),A.jsx("div",{className:"h-8 w-px bg-slate-800"}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("button",{onClick:z,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:A.jsx(BE,{size:18})}),A.jsx("button",{className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:A.jsx(GE,{size:18})})]})]})}),p&&A.jsx("div",{className:"px-6 py-3 liquid-glass text-indigo-300 font-bold uppercase tracking-widest text-xs",children:"Single Player Mode"})]}),A.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-6 lg:gap-16 w-full max-w-7xl px-0 lg:px-6",children:[A.jsxs("div",{className:"relative group w-full flex justify-center max-w-full overflow-visible",children:[A.jsx("div",{className:"absolute -inset-4 bg-linear-to-r from-indigo-500 to-pink-500 rounded-[2.5rem] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"}),A.jsx(rM,{gameState:v,playerColor:C,onMove:te,onRollDice:()=>{},validMoves:E})]}),A.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-3 lg:gap-8 mt-0 lg:mt-0",children:[A.jsxs("div",{className:"liquid-glass p-3 lg:p-8 space-y-3 lg:space-y-8 border-l-4 border-l-indigo-500",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:"Game Status"}),A.jsxs("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-2 ${v.winner?"bg-indigo-500/10 text-indigo-300 border border-indigo-500/30":L?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-slate-800 text-slate-500"}`,children:[A.jsx("span",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${v.winner?"bg-indigo-400":"bg-green-500"}`}),p?v.turn==="white"?" White Turn":" Black Turn":fe]})]}),J&&A.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/10 border border-indigo-500/30 text-indigo-100 text-sm lg:text-base font-bold",children:fe}),A.jsxs("div",{className:"space-y-2 lg:space-y-4",children:[A.jsx(uM,{gameState:v}),!p&&A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"flex items-center gap-2 lg:gap-4 p-2 lg:p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[A.jsx("div",{className:`w-8 h-8 lg:w-12 lg:h-12 rounded-xl flex items-center justify-center text-lg lg:text-xl font-bold ${D?"bg-white text-slate-950":"bg-slate-800 text-slate-400"}`,children:"W"}),A.jsxs("div",{className:"flex-1",children:[A.jsx("div",{className:"text-xs lg:text-sm font-bold text-white uppercase tracking-wide",children:"White Player"}),A.jsx("div",{className:"text-[10px] lg:text-xs text-slate-500 font-medium",children:o.room?.whitePlayer===w?"Connected (You)":o.room?.whitePlayer?"Opponent Ready":"Awaiting Entry..."})]})]}),A.jsxs("div",{className:"flex items-center gap-2 lg:gap-4 p-2 lg:p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[A.jsx("div",{className:`w-8 h-8 lg:w-12 lg:h-12 rounded-xl flex items-center justify-center text-lg lg:text-xl font-bold ${B?"bg-indigo-500 text-white":"bg-slate-800 text-slate-400"}`,children:"B"}),A.jsxs("div",{className:"flex-1",children:[A.jsx("div",{className:"text-xs lg:text-sm font-bold text-white uppercase tracking-wide",children:"Black Player"}),A.jsx("div",{className:"text-[10px] lg:text-xs text-slate-500 font-medium",children:o.room?.blackPlayer===w?"Connected (You)":o.room?.blackPlayer?"Opponent Ready":"Awaiting Entry..."})]})]})]})]}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 lg:gap-3",children:[A.jsxs("button",{disabled:J,onClick:()=>{if(p){const ue={...v};ue.winner=C==="white"?"black":"white",c(ue)}else o.resignGame(C)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 lg:px-4 lg:py-3 rounded-xl border border-slate-800 bg-slate-900/60 text-slate-200 text-sm lg:text-base font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:border-red-500/50 hover:text-red-200 transition",children:[A.jsx(qE,{size:16,className:"lg:w-[18px] lg:h-[18px]"}),"Resign"]}),A.jsxs("button",{disabled:!J&&!p,onClick:()=>{const ue=wf();g(null),p?c(ue):o.resetGame()},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 lg:px-4 lg:py-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 text-indigo-100 text-sm lg:text-base font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:bg-indigo-500/20 transition",children:[A.jsx(FE,{size:16,className:"lg:w-[18px] lg:h-[18px]"}),"Rematch"]})]})]}),!p&&A.jsxs("div",{className:"hidden lg:grid grid-cols-2 gap-4",children:[A.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[A.jsx(Wg,{size:20,className:"mx-auto text-slate-600"}),A.jsx("div",{className:"text-xl font-black text-white italic",children:o.room?.whitePlayer&&o.room?.blackPlayer?"2/2":o.room?.whitePlayer||o.room?.blackPlayer?"1/2":"0/2"}),A.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Connected"})]}),A.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[A.jsx(KE,{size:20,className:"mx-auto text-indigo-400"}),A.jsx("div",{className:"text-xl font-black text-white italic",children:"24ms"}),A.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Latency"})]})]})]})]}),A.jsx("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10",children:"Transparent Strategy Arena"})]})},uM=({gameState:r})=>{const[e,t]=H.useState(0),[s,o]=H.useState(0),[u,c]=H.useState(0),m=ct.useRef(r?.winner);H.useEffect(()=>{m.current&&!r?.winner&&(t(0),o(0),c(0)),m.current=r?.winner},[r?.winner]),H.useEffect(()=>{if(!r||r.winner)return;const p=window.setInterval(()=>{t(v=>v+1),o(v=>v+(r.turn==="white"?1:0)),c(v=>v+(r.turn==="black"?1:0))},1e3);return()=>window.clearInterval(p)},[r?.turn,r?.winner]);const g=p=>{const v=Math.floor(p/60).toString().padStart(2,"0"),E=(p%60).toString().padStart(2,"0");return`${v}:${E}`};return A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-3 p-2 md:p-4 rounded-2xl bg-slate-900/60 border border-slate-800/80 text-[10px] lg:text-xs font-bold uppercase tracking-widest",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx("div",{className:"text-slate-500",children:"Time"}),A.jsx("div",{className:"text-white text-base",children:g(e)})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("div",{className:"text-slate-500",children:"White"}),A.jsx("div",{className:"text-emerald-300 text-base",children:g(s)})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("div",{className:"text-slate-500",children:"Black"}),A.jsx("div",{className:"text-sky-300 text-base",children:g(u)})]})]})};function cM(){const[r,e]=H.useState("menu"),[t,s]=H.useState("chess"),[o,u]=H.useState(null),[c,m]=H.useState("Normal"),g=jw(null),p=zw(null),v=t==="chess"?g.isAuthLoading:p.isAuthLoading,E=async()=>{try{const D=t==="chess"?await g.createRoom():await p.createRoom();D&&(u(D),e("online"))}catch(D){console.error("Failed to create room:",D)}},w=async D=>{if(D.trim())try{t==="chess"?await g.joinRoom(D):await p.joinRoom(D),u(D),e("online")}catch(B){console.error("Failed to join room:",B),alert("Room not found or could not join")}},C=D=>{s(D)},L=D=>{m(D),e("local"),u(null)},z=()=>{u(null),e("menu")};return A.jsxs("main",{className:"relative min-h-screen w-full flex flex-col items-center overflow-x-hidden",children:[A.jsx(CA,{}),A.jsx("div",{className:"container mx-auto px-4 py-8 max-w-7xl w-full overflow-visible",children:r!=="menu"?t==="chess"?A.jsx(WO,{roomId:o||"",mode:r==="online"?"online":"local",aiDifficulty:c,onExit:z}):A.jsx(lM,{roomId:o||"",mode:r==="online"?"online":"local",aiDifficulty:c,onExit:z}):A.jsx(YD,{onCreateRoom:E,onJoinRoom:w,onStartLocal:L,isAuthLoading:v,onSelectGame:C})}),A.jsx("footer",{className:"mt-auto py-8 text-slate-500 text-sm",children:"DragMate  Premium Multiplayer Board Gaming"})]})}RA.createRoot(document.getElementById("root")).render(A.jsx(H.StrictMode,{children:A.jsx(cM,{})}));
