(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();function MS(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Zm={exports:{}},cc={};var U_;function VS(){if(U_)return cc;U_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:i,type:r,key:u,ref:o!==void 0?o:null,props:c}}return cc.Fragment=e,cc.jsx=t,cc.jsxs=t,cc}var z_;function PS(){return z_||(z_=1,Zm.exports=VS()),Zm.exports}var T=PS(),eg={exports:{}},Ue={};var B_;function jS(){if(B_)return Ue;B_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),w=Symbol.iterator;function N(L){return L===null||typeof L!="object"?null:(L=w&&L[w]||L["@@iterator"],typeof L=="function"?L:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,I={};function k(L,se,me){this.props=L,this.context=se,this.refs=I,this.updater=me||V}k.prototype.isReactComponent={},k.prototype.setState=function(L,se){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,se,"setState")},k.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function $(){}$.prototype=k.prototype;function F(L,se,me){this.props=L,this.context=se,this.refs=I,this.updater=me||V}var ue=F.prototype=new $;ue.constructor=F,z(ue,k.prototype),ue.isPureReactComponent=!0;var X=Array.isArray;function B(){}var A={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function C(L,se,me){var de=me.ref;return{$$typeof:i,type:L,key:se,ref:de!==void 0?de:null,props:me}}function O(L,se){return C(L.type,se,L.props)}function M(L){return typeof L=="object"&&L!==null&&L.$$typeof===i}function j(L){var se={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(me){return se[me]})}var D=/\/+/g;function De(L,se){return typeof L=="object"&&L!==null&&L.key!=null?j(""+L.key):se.toString(36)}function ke(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(B,B):(L.status="pending",L.then(function(se){L.status==="pending"&&(L.status="fulfilled",L.value=se)},function(se){L.status==="pending"&&(L.status="rejected",L.reason=se)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function ee(L,se,me,de,_e){var Se=typeof L;(Se==="undefined"||Se==="boolean")&&(L=null);var ze=!1;if(L===null)ze=!0;else switch(Se){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(L.$$typeof){case i:case e:ze=!0;break;case v:return ze=L._init,ee(ze(L._payload),se,me,de,_e)}}if(ze)return _e=_e(L),ze=de===""?"."+De(L,0):de,X(_e)?(me="",ze!=null&&(me=ze.replace(D,"$&/")+"/"),ee(_e,se,me,"",function(Ht){return Ht})):_e!=null&&(M(_e)&&(_e=O(_e,me+(_e.key==null||L&&L.key===_e.key?"":(""+_e.key).replace(D,"$&/")+"/")+ze)),se.push(_e)),1;ze=0;var Dt=de===""?".":de+":";if(X(L))for(var ht=0;ht<L.length;ht++)de=L[ht],Se=Dt+De(de,ht),ze+=ee(de,se,me,Se,_e);else if(ht=N(L),typeof ht=="function")for(L=ht.call(L),ht=0;!(de=L.next()).done;)de=de.value,Se=Dt+De(de,ht++),ze+=ee(de,se,me,Se,_e);else if(Se==="object"){if(typeof L.then=="function")return ee(ke(L),se,me,de,_e);throw se=String(L),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return ze}function he(L,se,me){if(L==null)return L;var de=[],_e=0;return ee(L,de,"","",function(Se){return se.call(me,Se,_e++)}),de}function pe(L){if(L._status===-1){var se=L._result;se=se(),se.then(function(me){(L._status===0||L._status===-1)&&(L._status=1,L._result=me)},function(me){(L._status===0||L._status===-1)&&(L._status=2,L._result=me)}),L._status===-1&&(L._status=0,L._result=se)}if(L._status===1)return L._result.default;throw L._result}var Ae=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},Pe={map:he,forEach:function(L,se,me){he(L,function(){se.apply(this,arguments)},me)},count:function(L){var se=0;return he(L,function(){se++}),se},toArray:function(L){return he(L,function(se){return se})||[]},only:function(L){if(!M(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Ue.Activity=b,Ue.Children=Pe,Ue.Component=k,Ue.Fragment=t,Ue.Profiler=o,Ue.PureComponent=F,Ue.StrictMode=r,Ue.Suspense=g,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(L){return A.H.useMemoCache(L)}},Ue.cache=function(L){return function(){return L.apply(null,arguments)}},Ue.cacheSignal=function(){return null},Ue.cloneElement=function(L,se,me){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var de=z({},L.props),_e=L.key;if(se!=null)for(Se in se.key!==void 0&&(_e=""+se.key),se)!S.call(se,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&se.ref===void 0||(de[Se]=se[Se]);var Se=arguments.length-2;if(Se===1)de.children=me;else if(1<Se){for(var ze=Array(Se),Dt=0;Dt<Se;Dt++)ze[Dt]=arguments[Dt+2];de.children=ze}return C(L.type,_e,de)},Ue.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:c,_context:L},L},Ue.createElement=function(L,se,me){var de,_e={},Se=null;if(se!=null)for(de in se.key!==void 0&&(Se=""+se.key),se)S.call(se,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(_e[de]=se[de]);var ze=arguments.length-2;if(ze===1)_e.children=me;else if(1<ze){for(var Dt=Array(ze),ht=0;ht<ze;ht++)Dt[ht]=arguments[ht+2];_e.children=Dt}if(L&&L.defaultProps)for(de in ze=L.defaultProps,ze)_e[de]===void 0&&(_e[de]=ze[de]);return C(L,Se,_e)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(L){return{$$typeof:m,render:L}},Ue.isValidElement=M,Ue.lazy=function(L){return{$$typeof:v,_payload:{_status:-1,_result:L},_init:pe}},Ue.memo=function(L,se){return{$$typeof:p,type:L,compare:se===void 0?null:se}},Ue.startTransition=function(L){var se=A.T,me={};A.T=me;try{var de=L(),_e=A.S;_e!==null&&_e(me,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(B,Ae)}catch(Se){Ae(Se)}finally{se!==null&&me.types!==null&&(se.types=me.types),A.T=se}},Ue.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Ue.use=function(L){return A.H.use(L)},Ue.useActionState=function(L,se,me){return A.H.useActionState(L,se,me)},Ue.useCallback=function(L,se){return A.H.useCallback(L,se)},Ue.useContext=function(L){return A.H.useContext(L)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(L,se){return A.H.useDeferredValue(L,se)},Ue.useEffect=function(L,se){return A.H.useEffect(L,se)},Ue.useEffectEvent=function(L){return A.H.useEffectEvent(L)},Ue.useId=function(){return A.H.useId()},Ue.useImperativeHandle=function(L,se,me){return A.H.useImperativeHandle(L,se,me)},Ue.useInsertionEffect=function(L,se){return A.H.useInsertionEffect(L,se)},Ue.useLayoutEffect=function(L,se){return A.H.useLayoutEffect(L,se)},Ue.useMemo=function(L,se){return A.H.useMemo(L,se)},Ue.useOptimistic=function(L,se){return A.H.useOptimistic(L,se)},Ue.useReducer=function(L,se,me){return A.H.useReducer(L,se,me)},Ue.useRef=function(L){return A.H.useRef(L)},Ue.useState=function(L){return A.H.useState(L)},Ue.useSyncExternalStore=function(L,se,me){return A.H.useSyncExternalStore(L,se,me)},Ue.useTransition=function(){return A.H.useTransition()},Ue.version="19.2.3",Ue}var q_;function cp(){return q_||(q_=1,eg.exports=jS()),eg.exports}var q=cp();const rt=MS(q);var tg={exports:{}},uc={},ng={exports:{}},ig={};var H_;function LS(){return H_||(H_=1,(function(i){function e(ee,he){var pe=ee.length;ee.push(he);e:for(;0<pe;){var Ae=pe-1>>>1,Pe=ee[Ae];if(0<o(Pe,he))ee[Ae]=he,ee[pe]=Pe,pe=Ae;else break e}}function t(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var he=ee[0],pe=ee.pop();if(pe!==he){ee[0]=pe;e:for(var Ae=0,Pe=ee.length,L=Pe>>>1;Ae<L;){var se=2*(Ae+1)-1,me=ee[se],de=se+1,_e=ee[de];if(0>o(me,pe))de<Pe&&0>o(_e,me)?(ee[Ae]=_e,ee[de]=pe,Ae=de):(ee[Ae]=me,ee[se]=pe,Ae=se);else if(de<Pe&&0>o(_e,pe))ee[Ae]=_e,ee[de]=pe,Ae=de;else break e}}return he}function o(ee,he){var pe=ee.sortIndex-he.sortIndex;return pe!==0?pe:ee.id-he.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var u=Date,m=u.now();i.unstable_now=function(){return u.now()-m}}var g=[],p=[],v=1,b=null,w=3,N=!1,V=!1,z=!1,I=!1,k=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function ue(ee){for(var he=t(p);he!==null;){if(he.callback===null)r(p);else if(he.startTime<=ee)r(p),he.sortIndex=he.expirationTime,e(g,he);else break;he=t(p)}}function X(ee){if(z=!1,ue(ee),!V)if(t(g)!==null)V=!0,B||(B=!0,j());else{var he=t(p);he!==null&&ke(X,he.startTime-ee)}}var B=!1,A=-1,S=5,C=-1;function O(){return I?!0:!(i.unstable_now()-C<S)}function M(){if(I=!1,B){var ee=i.unstable_now();C=ee;var he=!0;try{e:{V=!1,z&&(z=!1,$(A),A=-1),N=!0;var pe=w;try{t:{for(ue(ee),b=t(g);b!==null&&!(b.expirationTime>ee&&O());){var Ae=b.callback;if(typeof Ae=="function"){b.callback=null,w=b.priorityLevel;var Pe=Ae(b.expirationTime<=ee);if(ee=i.unstable_now(),typeof Pe=="function"){b.callback=Pe,ue(ee),he=!0;break t}b===t(g)&&r(g),ue(ee)}else r(g);b=t(g)}if(b!==null)he=!0;else{var L=t(p);L!==null&&ke(X,L.startTime-ee),he=!1}}break e}finally{b=null,w=pe,N=!1}he=void 0}}finally{he?j():B=!1}}}var j;if(typeof F=="function")j=function(){F(M)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,De=D.port2;D.port1.onmessage=M,j=function(){De.postMessage(null)}}else j=function(){k(M,0)};function ke(ee,he){A=k(function(){ee(i.unstable_now())},he)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ee){ee.callback=null},i.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<ee?Math.floor(1e3/ee):5},i.unstable_getCurrentPriorityLevel=function(){return w},i.unstable_next=function(ee){switch(w){case 1:case 2:case 3:var he=3;break;default:he=w}var pe=w;w=he;try{return ee()}finally{w=pe}},i.unstable_requestPaint=function(){I=!0},i.unstable_runWithPriority=function(ee,he){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var pe=w;w=ee;try{return he()}finally{w=pe}},i.unstable_scheduleCallback=function(ee,he,pe){var Ae=i.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Ae+pe:Ae):pe=Ae,ee){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=pe+Pe,ee={id:v++,callback:he,priorityLevel:ee,startTime:pe,expirationTime:Pe,sortIndex:-1},pe>Ae?(ee.sortIndex=pe,e(p,ee),t(g)===null&&ee===t(p)&&(z?($(A),A=-1):z=!0,ke(X,pe-Ae))):(ee.sortIndex=Pe,e(g,ee),V||N||(V=!0,B||(B=!0,j()))),ee},i.unstable_shouldYield=O,i.unstable_wrapCallback=function(ee){var he=w;return function(){var pe=w;w=he;try{return ee.apply(this,arguments)}finally{w=pe}}}})(ig)),ig}var F_;function US(){return F_||(F_=1,ng.exports=LS()),ng.exports}var sg={exports:{}},Un={};var G_;function zS(){if(G_)return Un;G_=1;var i=cp();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,p,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:g,containerInfo:p,implementation:v}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Un.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return c(g,p,null,v)},Un.flushSync=function(g){var p=u.T,v=r.p;try{if(u.T=null,r.p=2,g)return g()}finally{u.T=p,r.p=v,r.d.f()}},Un.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},Un.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Un.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,b=m(v,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,N=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:w,fetchPriority:N}):v==="script"&&r.d.X(g,{crossOrigin:b,integrity:w,fetchPriority:N,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Un.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=m(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},Un.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,b=m(v,p.crossOrigin);r.d.L(g,v,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Un.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=m(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},Un.requestFormReset=function(g){r.d.r(g)},Un.unstable_batchedUpdates=function(g,p){return g(p)},Un.useFormState=function(g,p,v){return u.H.useFormState(g,p,v)},Un.useFormStatus=function(){return u.H.useHostTransitionStatus()},Un.version="19.2.3",Un}var $_;function Z1(){if($_)return sg.exports;$_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),sg.exports=zS(),sg.exports}var K_;function BS(){if(K_)return uc;K_=1;var i=US(),e=cp(),t=Z1();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function u(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function g(n){if(c(n)!==n)throw Error(r(188))}function p(n){var s=n.alternate;if(!s){if(s=c(n),s===null)throw Error(r(188));return s!==n?null:n}for(var a=n,l=s;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),n;if(d===l)return g(f),s;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,x=f.child;x;){if(x===a){_=!0,a=f,l=d;break}if(x===l){_=!0,l=f,a=d;break}x=x.sibling}if(!_){for(x=d.child;x;){if(x===a){_=!0,a=d,l=f;break}if(x===l){_=!0,l=d,a=f;break}x=x.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:s}function v(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=v(n),s!==null)return s;n=n.sibling}return null}var b=Object.assign,w=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),F=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function j(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var D=Symbol.for("react.client.reference");function De(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===D?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case z:return"Fragment";case k:return"Profiler";case I:return"StrictMode";case X:return"Suspense";case B:return"SuspenseList";case C:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case V:return"Portal";case F:return n.displayName||"Context";case $:return(n._context.displayName||"Context")+".Consumer";case ue:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case A:return s=n.displayName||null,s!==null?s:De(n.type)||"Memo";case S:s=n._payload,n=n._init;try{return De(n(s))}catch{}}return null}var ke=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Ae=[],Pe=-1;function L(n){return{current:n}}function se(n){0>Pe||(n.current=Ae[Pe],Ae[Pe]=null,Pe--)}function me(n,s){Pe++,Ae[Pe]=n.current,n.current=s}var de=L(null),_e=L(null),Se=L(null),ze=L(null);function Dt(n,s){switch(me(Se,s),me(_e,n),me(de,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?l_(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=l_(s),n=c_(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}se(de),me(de,n)}function ht(){se(de),se(_e),se(Se)}function Ht(n){n.memoizedState!==null&&me(ze,n);var s=de.current,a=c_(s,n.type);s!==a&&(me(_e,n),me(de,a))}function xi(n){_e.current===n&&(se(de),se(_e)),ze.current===n&&(se(ze),rc._currentValue=pe)}var Pn,qi;function Wt(n){if(Pn===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Pn=s&&s[1]||"",qi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pn+n+qi}var fi=!1;function jn(n,s){if(!n||fi)return"";fi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ie){var J=ie}Reflect.construct(n,[],le)}else{try{le.call()}catch(ie){J=ie}n.call(le.prototype)}}else{try{throw Error()}catch(ie){J=ie}(le=n())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ie){if(ie&&J&&typeof ie.stack=="string")return[ie.stack,J.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],x=d[1];if(_&&x){var P=_.split(`
`),Y=x.split(`
`);for(f=l=0;l<P.length&&!P[l].includes("DetermineComponentFrameRoot");)l++;for(;f<Y.length&&!Y[f].includes("DetermineComponentFrameRoot");)f++;if(l===P.length||f===Y.length)for(l=P.length-1,f=Y.length-1;1<=l&&0<=f&&P[l]!==Y[f];)f--;for(;1<=l&&0<=f;l--,f--)if(P[l]!==Y[f]){if(l!==1||f!==1)do if(l--,f--,0>f||P[l]!==Y[f]){var re=`
`+P[l].replace(" at new "," at ");return n.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",n.displayName)),re}while(1<=l&&0<=f);break}}}finally{fi=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Wt(a):""}function as(n,s){switch(n.tag){case 26:case 27:case 5:return Wt(n.type);case 16:return Wt("Lazy");case 13:return n.child!==s&&s!==null?Wt("Suspense Fallback"):Wt("Suspense");case 19:return Wt("SuspenseList");case 0:case 15:return jn(n.type,!1);case 11:return jn(n.type.render,!1);case 1:return jn(n.type,!0);case 31:return Wt("Activity");default:return""}}function Hi(n){try{var s="",a=null;do s+=as(n,a),a=n,n=n.return;while(n);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var xt=Object.prototype.hasOwnProperty,ft=i.unstable_scheduleCallback,Fn=i.unstable_cancelCallback,os=i.unstable_shouldYield,ls=i.unstable_requestPaint,Jt=i.unstable_now,Fi=i.unstable_getCurrentPriorityLevel,Rs=i.unstable_ImmediatePriority,Gn=i.unstable_UserBlockingPriority,xn=i.unstable_NormalPriority,Gi=i.unstable_LowPriority,Cs=i.unstable_IdlePriority,$n=i.log,Ns=i.unstable_setDisableYieldValue,Kn=null,Ft=null;function pn(n){if(typeof $n=="function"&&Ns(n),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(Kn,n)}catch{}}var St=Math.clz32?Math.clz32:rr,Is=Math.log,$i=Math.LN2;function rr(n){return n>>>=0,n===0?32:31-(Is(n)/$i|0)|0}var ni=256,Ki=262144,Fe=4194304;function At(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Rt(n,s,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var x=l&134217727;return x!==0?(l=x&~d,l!==0?f=At(l):(_&=x,_!==0?f=At(_):a||(a=x&~n,a!==0&&(f=At(a))))):(x=l&~d,x!==0?f=At(x):_!==0?f=At(_):a||(a=l&~n,a!==0&&(f=At(a)))),f===0?0:s!==0&&s!==f&&(s&d)===0&&(d=f&-f,a=s&-s,d>=a||d===32&&(a&4194048)!==0)?s:f}function Lt(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function yn(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zt(){var n=Fe;return Fe<<=1,(Fe&62914560)===0&&(Fe=4194304),n}function Vt(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Z(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function gt(n,s,a,l,f,d){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var x=n.entanglements,P=n.expirationTimes,Y=n.hiddenUpdates;for(a=_&~a;0<a;){var re=31-St(a),le=1<<re;x[re]=0,P[re]=-1;var J=Y[re];if(J!==null)for(Y[re]=null,re=0;re<J.length;re++){var ie=J[re];ie!==null&&(ie.lane&=-536870913)}a&=~le}l!==0&&pt(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(_&~s))}function pt(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var l=31-St(s);n.entangledLanes|=s,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function Gt(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var l=31-St(a),f=1<<l;f&s|n[l]&s&&(n[l]|=s),a&=~f}}function fe(n,s){var a=s&-s;return a=(a&42)!==0?1:un(a),(a&(n.suspendedLanes|s))!==0?0:a}function un(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function it(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ot(){var n=he.p;return n!==0?n:(n=window.event,n===void 0?32:O_(n.type))}function hn(n,s){var a=he.p;try{return he.p=n,s()}finally{he.p=a}}var yt=Math.random().toString(36).slice(2),Pt="__reactFiber$"+yt,$t="__reactProps$"+yt,Ee="__reactContainer$"+yt,ar="__reactEvents$"+yt,Ja="__reactListeners$"+yt,Za="__reactHandles$"+yt,da="__reactResources$"+yt,Si="__reactMarker$"+yt;function or(n){delete n[Pt],delete n[$t],delete n[ar],delete n[Ja],delete n[Za]}function Ai(n){var s=n[Pt];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Ee]||a[Pt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=p_(n);n!==null;){if(a=n[Pt])return a;n=p_(n)}return s}n=a,a=n.parentNode}return null}function Qn(n){if(n=n[Pt]||n[Ee]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Ln(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function Ri(n){var s=n[da];return s||(s=n[da]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ut(n){n[Si]=!0}var ma=new Set,lr={};function ii(n,s){Ci(n,s),Ci(n+"Capture",s)}function Ci(n,s){for(lr[n]=s,n=0;n<s.length;n++)ma.add(s[n])}var ga=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cr={},pa={};function en(n){return xt.call(pa,n)?!0:xt.call(cr,n)?!1:ga.test(n)?pa[n]=!0:(cr[n]=!0,!1)}function G(n,s,a){if(en(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function te(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function W(n,s,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+l)}}function ve(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function xe(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function et(n,s,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Ge(n){if(!n._valueTracker){var s=xe(n)?"checked":"value";n._valueTracker=et(n,s,""+n[s])}}function Ni(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return n&&(l=xe(n)?n.checked?"true":"false":n.value),n=l,n!==a?(s.setValue(n),!0):!1}function cs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ya=/[\n"\\]/g;function si(n){return n.replace(ya,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function eo(n,s,a,l,f,d,_,x){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),s!=null?_==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+ve(s)):n.value!==""+ve(s)&&(n.value=""+ve(s)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),s!=null?vl(n,_,ve(s)):a!=null?vl(n,_,ve(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.name=""+ve(x):n.removeAttribute("name")}function gu(n,s,a,l,f,d,_,x){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),s!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||s!=null)){Ge(n);return}a=a!=null?""+ve(a):"",s=s!=null?""+ve(s):a,x||s===n.value||(n.value=s),n.defaultValue=s}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=x?n.checked:!!l,n.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Ge(n)}function vl(n,s,a){s==="number"&&cs(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function ur(n,s,a,l){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+ve(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function pu(n,s,a){if(s!=null&&(s=""+ve(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+ve(a):""}function hr(n,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(ke(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=ve(s),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),Ge(n)}function ri(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var yu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _l(n,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":l?n.setProperty(s,a):typeof a!="number"||a===0||yu.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function bl(n,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in s)l=s[f],s.hasOwnProperty(f)&&a[f]!==l&&_l(n,f,l)}else for(var d in s)s.hasOwnProperty(d)&&_l(n,d,s[d])}function to(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function no(n){return fr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Qi(){}var El=null;function Ii(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var dr=null,us=null;function va(n){var s=Qn(n);if(s&&(n=s.stateNode)){var a=n[$t]||null;e:switch(n=s.stateNode,s.type){case"input":if(eo(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+si(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==n&&l.form===n.form){var f=l[$t]||null;if(!f)throw Error(r(90));eo(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===n.form&&Ni(l)}break e;case"textarea":pu(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&ur(n,!!a.multiple,s,!1)}}}var io=!1;function mr(n,s,a){if(io)return n(s,a);io=!0;try{var l=n(s);return l}finally{if(io=!1,(dr!==null||us!==null)&&(hh(),dr&&(s=dr,n=us,us=dr=null,va(s),n)))for(s=0;s<n.length;s++)va(n[s])}}function Yi(n,s){var a=n.stateNode;if(a===null)return null;var l=a[$t]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var Di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_a=!1;if(Di)try{var vt={};Object.defineProperty(vt,"passive",{get:function(){_a=!0}}),window.addEventListener("test",vt,vt),window.removeEventListener("test",vt,vt)}catch{_a=!1}var hs=null,Tl=null,ba=null;function wl(){if(ba)return ba;var n,s=Tl,a=s.length,l,f="value"in hs?hs.value:hs.textContent,d=f.length;for(n=0;n<a&&s[n]===f[n];n++);var _=a-n;for(l=1;l<=_&&s[a-l]===f[d-l];l++);return ba=f.slice(n,1<l?1-l:void 0)}function Ea(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Ds(){return!0}function Xi(){return!1}function Sn(n){function s(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var x in n)n.hasOwnProperty(x)&&(a=n[x],this[x]=a?a(d):d[x]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ds:Xi,this.isPropagationStopped=Xi,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ds)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ds)},persist:function(){},isPersistent:Ds}),s}var Os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fs=Sn(Os),gr=b({},Os,{view:0,detail:0}),xl=Sn(gr),pr,so,ds,ro=b({},gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ds&&(ds&&n.type==="mousemove"?(pr=n.screenX-ds.screenX,so=n.screenY-ds.screenY):so=pr=0,ds=n),pr)},movementY:function(n){return"movementY"in n?n.movementY:so}}),Sl=Sn(ro),Ta=b({},ro,{dataTransfer:0}),_u=Sn(Ta),bu=b({},gr,{relatedTarget:0}),wa=Sn(bu),Al=b({},Os,{animationName:0,elapsedTime:0,pseudoElement:0}),Eu=Sn(Al),ao=b({},Os,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Tu=Sn(ao),wu=b({},Os,{data:0}),ms=Sn(wu),xu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Su={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Au={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ru(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Au[n])?!!s[n]:!1}function yr(){return Ru}var Yn=b({},gr,{key:function(n){if(n.key){var s=xu[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ea(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Su[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yr,charCode:function(n){return n.type==="keypress"?Ea(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ea(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Cu=Sn(Yn),Nu=b({},ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ks=Sn(Nu),h=b({},gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yr}),y=Sn(h),E=b({},Os,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=Sn(E),K=b({},ro,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ne=Sn(K),ge=b({},Os,{newState:0,oldState:0}),Be=Sn(ge),Kt=[9,13,27,32],ct=Di&&"CompositionEvent"in window,kt=null;Di&&"documentMode"in document&&(kt=document.documentMode);var Oi=Di&&"TextEvent"in window&&!kt,gs=Di&&(!ct||kt&&8<kt&&11>=kt),Wi=" ",Ji=!1;function xa(n,s){switch(n){case"keyup":return Kt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var lo=!1;function sx(n,s){switch(n){case"compositionend":return oo(s);case"keypress":return s.which!==32?null:(Ji=!0,Wi);case"textInput":return n=s.data,n===Wi&&Ji?null:n;default:return null}}function rx(n,s){if(lo)return n==="compositionend"||!ct&&xa(n,s)?(n=wl(),ba=Tl=hs=null,lo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return gs&&s.locale!=="ko"?null:s.data;default:return null}}var ax={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _0(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!ax[n.type]:s==="textarea"}function b0(n,s,a,l){dr?us?us.push(l):us=[l]:dr=l,s=vh(s,"onChange"),0<s.length&&(a=new fs("onChange","change",null,a,l),n.push({event:a,listeners:s}))}var Rl=null,Cl=null;function ox(n){n_(n,0)}function Iu(n){var s=Ln(n);if(Ni(s))return n}function E0(n,s){if(n==="change")return s}var T0=!1;if(Di){var ad;if(Di){var od="oninput"in document;if(!od){var w0=document.createElement("div");w0.setAttribute("oninput","return;"),od=typeof w0.oninput=="function"}ad=od}else ad=!1;T0=ad&&(!document.documentMode||9<document.documentMode)}function x0(){Rl&&(Rl.detachEvent("onpropertychange",S0),Cl=Rl=null)}function S0(n){if(n.propertyName==="value"&&Iu(Cl)){var s=[];b0(s,Cl,n,Ii(n)),mr(ox,s)}}function lx(n,s,a){n==="focusin"?(x0(),Rl=s,Cl=a,Rl.attachEvent("onpropertychange",S0)):n==="focusout"&&x0()}function cx(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Iu(Cl)}function ux(n,s){if(n==="click")return Iu(s)}function hx(n,s){if(n==="input"||n==="change")return Iu(s)}function fx(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var di=typeof Object.is=="function"?Object.is:fx;function Nl(n,s){if(di(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!xt.call(s,f)||!di(n[f],s[f]))return!1}return!0}function A0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function R0(n,s){var a=A0(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=s&&l>=s)return{node:a,offset:s-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=A0(a)}}function C0(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?C0(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function N0(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=cs(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=cs(n.document)}return s}function ld(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var dx=Di&&"documentMode"in document&&11>=document.documentMode,co=null,cd=null,Il=null,ud=!1;function I0(n,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ud||co==null||co!==cs(l)||(l=co,"selectionStart"in l&&ld(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Il&&Nl(Il,l)||(Il=l,l=vh(cd,"onSelect"),0<l.length&&(s=new fs("onSelect","select",null,s,a),n.push({event:s,listeners:l}),s.target=co)))}function Sa(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var uo={animationend:Sa("Animation","AnimationEnd"),animationiteration:Sa("Animation","AnimationIteration"),animationstart:Sa("Animation","AnimationStart"),transitionrun:Sa("Transition","TransitionRun"),transitionstart:Sa("Transition","TransitionStart"),transitioncancel:Sa("Transition","TransitionCancel"),transitionend:Sa("Transition","TransitionEnd")},hd={},D0={};Di&&(D0=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function Aa(n){if(hd[n])return hd[n];if(!uo[n])return n;var s=uo[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in D0)return hd[n]=s[a];return n}var O0=Aa("animationend"),k0=Aa("animationiteration"),M0=Aa("animationstart"),mx=Aa("transitionrun"),gx=Aa("transitionstart"),px=Aa("transitioncancel"),V0=Aa("transitionend"),P0=new Map,fd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fd.push("scrollEnd");function Zi(n,s){P0.set(n,s),ii(s,[n])}var Du=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},ki=[],ho=0,dd=0;function Ou(){for(var n=ho,s=dd=ho=0;s<n;){var a=ki[s];ki[s++]=null;var l=ki[s];ki[s++]=null;var f=ki[s];ki[s++]=null;var d=ki[s];if(ki[s++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&j0(a,f,d)}}function ku(n,s,a,l){ki[ho++]=n,ki[ho++]=s,ki[ho++]=a,ki[ho++]=l,dd|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function md(n,s,a,l){return ku(n,s,a,l),Mu(n)}function Ra(n,s){return ku(n,null,null,s),Mu(n)}function j0(n,s,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&s!==null&&(f=31-St(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[s]:l.push(s),s.lane=a|536870912),d):null}function Mu(n){if(50<Jl)throw Jl=0,wm=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var fo={};function yx(n,s,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(n,s,a,l){return new yx(n,s,a,l)}function gd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ms(n,s){var a=n.alternate;return a===null?(a=mi(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function L0(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Vu(n,s,a,l,f,d){var _=0;if(l=n,typeof n=="function")gd(n)&&(_=1);else if(typeof n=="string")_=TS(n,a,de.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case C:return n=mi(31,a,s,f),n.elementType=C,n.lanes=d,n;case z:return Ca(a.children,f,d,s);case I:_=8,f|=24;break;case k:return n=mi(12,a,s,f|2),n.elementType=k,n.lanes=d,n;case X:return n=mi(13,a,s,f),n.elementType=X,n.lanes=d,n;case B:return n=mi(19,a,s,f),n.elementType=B,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case F:_=10;break e;case $:_=9;break e;case ue:_=11;break e;case A:_=14;break e;case S:_=16,l=null;break e}_=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return s=mi(_,a,s,f),s.elementType=n,s.type=l,s.lanes=d,s}function Ca(n,s,a,l){return n=mi(7,n,l,s),n.lanes=a,n}function pd(n,s,a){return n=mi(6,n,null,s),n.lanes=a,n}function U0(n){var s=mi(18,null,null,0);return s.stateNode=n,s}function yd(n,s,a){return s=mi(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var z0=new WeakMap;function Mi(n,s){if(typeof n=="object"&&n!==null){var a=z0.get(n);return a!==void 0?a:(s={value:n,source:s,stack:Hi(s)},z0.set(n,s),s)}return{value:n,source:s,stack:Hi(s)}}var mo=[],go=0,Pu=null,Dl=0,Vi=[],Pi=0,vr=null,ps=1,ys="";function Vs(n,s){mo[go++]=Dl,mo[go++]=Pu,Pu=n,Dl=s}function B0(n,s,a){Vi[Pi++]=ps,Vi[Pi++]=ys,Vi[Pi++]=vr,vr=n;var l=ps;n=ys;var f=32-St(l)-1;l&=~(1<<f),a+=1;var d=32-St(s)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,ps=1<<32-St(s)+f|a<<f|l,ys=d+n}else ps=1<<d|a<<f|l,ys=n}function vd(n){n.return!==null&&(Vs(n,1),B0(n,1,0))}function _d(n){for(;n===Pu;)Pu=mo[--go],mo[go]=null,Dl=mo[--go],mo[go]=null;for(;n===vr;)vr=Vi[--Pi],Vi[Pi]=null,ys=Vi[--Pi],Vi[Pi]=null,ps=Vi[--Pi],Vi[Pi]=null}function q0(n,s){Vi[Pi++]=ps,Vi[Pi++]=ys,Vi[Pi++]=vr,ps=s.id,ys=s.overflow,vr=n}var An=null,Ct=null,tt=!1,_r=null,ji=!1,bd=Error(r(519));function br(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ol(Mi(s,n)),bd}function H0(n){var s=n.stateNode,a=n.type,l=n.memoizedProps;switch(s[Pt]=n,s[$t]=l,a){case"dialog":Ke("cancel",s),Ke("close",s);break;case"iframe":case"object":case"embed":Ke("load",s);break;case"video":case"audio":for(a=0;a<ec.length;a++)Ke(ec[a],s);break;case"source":Ke("error",s);break;case"img":case"image":case"link":Ke("error",s),Ke("load",s);break;case"details":Ke("toggle",s);break;case"input":Ke("invalid",s),gu(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ke("invalid",s);break;case"textarea":Ke("invalid",s),hr(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||a_(s.textContent,a)?(l.popover!=null&&(Ke("beforetoggle",s),Ke("toggle",s)),l.onScroll!=null&&Ke("scroll",s),l.onScrollEnd!=null&&Ke("scrollend",s),l.onClick!=null&&(s.onclick=Qi),s=!0):s=!1,s||br(n,!0)}function F0(n){for(An=n.return;An;)switch(An.tag){case 5:case 31:case 13:ji=!1;return;case 27:case 3:ji=!0;return;default:An=An.return}}function po(n){if(n!==An)return!1;if(!tt)return F0(n),tt=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Lm(n.type,n.memoizedProps)),a=!a),a&&Ct&&br(n),F0(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Ct=g_(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Ct=g_(n)}else s===27?(s=Ct,Mr(n.type)?(n=Hm,Hm=null,Ct=n):Ct=s):Ct=An?Ui(n.stateNode.nextSibling):null;return!0}function Na(){Ct=An=null,tt=!1}function Ed(){var n=_r;return n!==null&&(ci===null?ci=n:ci.push.apply(ci,n),_r=null),n}function Ol(n){_r===null?_r=[n]:_r.push(n)}var Td=L(null),Ia=null,Ps=null;function Er(n,s,a){me(Td,s._currentValue),s._currentValue=a}function js(n){n._currentValue=Td.current,se(Td)}function wd(n,s,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),n===a)break;n=n.return}}function xd(n,s,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;e:for(;d!==null;){var x=d;d=f;for(var P=0;P<s.length;P++)if(x.context===s[P]){d.lanes|=a,x=d.alternate,x!==null&&(x.lanes|=a),wd(d.return,a,n),l||(_=null);break e}d=x.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),wd(_,a,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function yo(n,s,a,l){n=null;for(var f=s,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var x=f.type;di(f.pendingProps.value,_.value)||(n!==null?n.push(x):n=[x])}}else if(f===ze.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(rc):n=[rc])}f=f.return}n!==null&&xd(s,n,a,l),s.flags|=262144}function ju(n){for(n=n.firstContext;n!==null;){if(!di(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Da(n){Ia=n,Ps=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Rn(n){return G0(Ia,n)}function Lu(n,s){return Ia===null&&Da(n),G0(n,s)}function G0(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Ps===null){if(n===null)throw Error(r(308));Ps=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Ps=Ps.next=s;return a}var vx=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},_x=i.unstable_scheduleCallback,bx=i.unstable_NormalPriority,tn={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sd(){return{controller:new vx,data:new Map,refCount:0}}function kl(n){n.refCount--,n.refCount===0&&_x(bx,function(){n.controller.abort()})}var Ml=null,Ad=0,vo=0,_o=null;function Ex(n,s){if(Ml===null){var a=Ml=[];Ad=0,vo=Nm(),_o={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ad++,s.then($0,$0),s}function $0(){if(--Ad===0&&Ml!==null){_o!==null&&(_o.status="fulfilled");var n=Ml;Ml=null,vo=0,_o=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function Tx(n,s){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var K0=ee.S;ee.S=function(n,s){Iv=Jt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Ex(n,s),K0!==null&&K0(n,s)};var Oa=L(null);function Rd(){var n=Oa.current;return n!==null?n:wt.pooledCache}function Uu(n,s){s===null?me(Oa,Oa.current):me(Oa,s.pool)}function Q0(){var n=Rd();return n===null?null:{parent:tn._currentValue,pool:n}}var bo=Error(r(460)),Cd=Error(r(474)),zu=Error(r(542)),Bu={then:function(){}};function Y0(n){return n=n.status,n==="fulfilled"||n==="rejected"}function X0(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(Qi,Qi),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,J0(n),n;default:if(typeof s.status=="string")s.then(Qi,Qi);else{if(n=wt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(l){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=l}},function(l){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,J0(n),n}throw Ma=s,bo}}function ka(n){try{var s=n._init;return s(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ma=a,bo):a}}var Ma=null;function W0(){if(Ma===null)throw Error(r(459));var n=Ma;return Ma=null,n}function J0(n){if(n===bo||n===zu)throw Error(r(483))}var Eo=null,Vl=0;function qu(n){var s=Vl;return Vl+=1,Eo===null&&(Eo=[]),X0(Eo,n,s)}function Pl(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Hu(n,s){throw s.$$typeof===w?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Z0(n){function s(H,U){if(n){var Q=H.deletions;Q===null?(H.deletions=[U],H.flags|=16):Q.push(U)}}function a(H,U){if(!n)return null;for(;U!==null;)s(H,U),U=U.sibling;return null}function l(H){for(var U=new Map;H!==null;)H.key!==null?U.set(H.key,H):U.set(H.index,H),H=H.sibling;return U}function f(H,U){return H=Ms(H,U),H.index=0,H.sibling=null,H}function d(H,U,Q){return H.index=Q,n?(Q=H.alternate,Q!==null?(Q=Q.index,Q<U?(H.flags|=67108866,U):Q):(H.flags|=67108866,U)):(H.flags|=1048576,U)}function _(H){return n&&H.alternate===null&&(H.flags|=67108866),H}function x(H,U,Q,ae){return U===null||U.tag!==6?(U=pd(Q,H.mode,ae),U.return=H,U):(U=f(U,Q),U.return=H,U)}function P(H,U,Q,ae){var Ce=Q.type;return Ce===z?re(H,U,Q.props.children,ae,Q.key):U!==null&&(U.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===S&&ka(Ce)===U.type)?(U=f(U,Q.props),Pl(U,Q),U.return=H,U):(U=Vu(Q.type,Q.key,Q.props,null,H.mode,ae),Pl(U,Q),U.return=H,U)}function Y(H,U,Q,ae){return U===null||U.tag!==4||U.stateNode.containerInfo!==Q.containerInfo||U.stateNode.implementation!==Q.implementation?(U=yd(Q,H.mode,ae),U.return=H,U):(U=f(U,Q.children||[]),U.return=H,U)}function re(H,U,Q,ae,Ce){return U===null||U.tag!==7?(U=Ca(Q,H.mode,ae,Ce),U.return=H,U):(U=f(U,Q),U.return=H,U)}function le(H,U,Q){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=pd(""+U,H.mode,Q),U.return=H,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case N:return Q=Vu(U.type,U.key,U.props,null,H.mode,Q),Pl(Q,U),Q.return=H,Q;case V:return U=yd(U,H.mode,Q),U.return=H,U;case S:return U=ka(U),le(H,U,Q)}if(ke(U)||j(U))return U=Ca(U,H.mode,Q,null),U.return=H,U;if(typeof U.then=="function")return le(H,qu(U),Q);if(U.$$typeof===F)return le(H,Lu(H,U),Q);Hu(H,U)}return null}function J(H,U,Q,ae){var Ce=U!==null?U.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Ce!==null?null:x(H,U,""+Q,ae);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case N:return Q.key===Ce?P(H,U,Q,ae):null;case V:return Q.key===Ce?Y(H,U,Q,ae):null;case S:return Q=ka(Q),J(H,U,Q,ae)}if(ke(Q)||j(Q))return Ce!==null?null:re(H,U,Q,ae,null);if(typeof Q.then=="function")return J(H,U,qu(Q),ae);if(Q.$$typeof===F)return J(H,U,Lu(H,Q),ae);Hu(H,Q)}return null}function ie(H,U,Q,ae,Ce){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return H=H.get(Q)||null,x(U,H,""+ae,Ce);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case N:return H=H.get(ae.key===null?Q:ae.key)||null,P(U,H,ae,Ce);case V:return H=H.get(ae.key===null?Q:ae.key)||null,Y(U,H,ae,Ce);case S:return ae=ka(ae),ie(H,U,Q,ae,Ce)}if(ke(ae)||j(ae))return H=H.get(Q)||null,re(U,H,ae,Ce,null);if(typeof ae.then=="function")return ie(H,U,Q,qu(ae),Ce);if(ae.$$typeof===F)return ie(H,U,Q,Lu(U,ae),Ce);Hu(U,ae)}return null}function Te(H,U,Q,ae){for(var Ce=null,ot=null,we=U,He=U=0,Xe=null;we!==null&&He<Q.length;He++){we.index>He?(Xe=we,we=null):Xe=we.sibling;var lt=J(H,we,Q[He],ae);if(lt===null){we===null&&(we=Xe);break}n&&we&&lt.alternate===null&&s(H,we),U=d(lt,U,He),ot===null?Ce=lt:ot.sibling=lt,ot=lt,we=Xe}if(He===Q.length)return a(H,we),tt&&Vs(H,He),Ce;if(we===null){for(;He<Q.length;He++)we=le(H,Q[He],ae),we!==null&&(U=d(we,U,He),ot===null?Ce=we:ot.sibling=we,ot=we);return tt&&Vs(H,He),Ce}for(we=l(we);He<Q.length;He++)Xe=ie(we,H,He,Q[He],ae),Xe!==null&&(n&&Xe.alternate!==null&&we.delete(Xe.key===null?He:Xe.key),U=d(Xe,U,He),ot===null?Ce=Xe:ot.sibling=Xe,ot=Xe);return n&&we.forEach(function(Ur){return s(H,Ur)}),tt&&Vs(H,He),Ce}function Ie(H,U,Q,ae){if(Q==null)throw Error(r(151));for(var Ce=null,ot=null,we=U,He=U=0,Xe=null,lt=Q.next();we!==null&&!lt.done;He++,lt=Q.next()){we.index>He?(Xe=we,we=null):Xe=we.sibling;var Ur=J(H,we,lt.value,ae);if(Ur===null){we===null&&(we=Xe);break}n&&we&&Ur.alternate===null&&s(H,we),U=d(Ur,U,He),ot===null?Ce=Ur:ot.sibling=Ur,ot=Ur,we=Xe}if(lt.done)return a(H,we),tt&&Vs(H,He),Ce;if(we===null){for(;!lt.done;He++,lt=Q.next())lt=le(H,lt.value,ae),lt!==null&&(U=d(lt,U,He),ot===null?Ce=lt:ot.sibling=lt,ot=lt);return tt&&Vs(H,He),Ce}for(we=l(we);!lt.done;He++,lt=Q.next())lt=ie(we,H,He,lt.value,ae),lt!==null&&(n&&lt.alternate!==null&&we.delete(lt.key===null?He:lt.key),U=d(lt,U,He),ot===null?Ce=lt:ot.sibling=lt,ot=lt);return n&&we.forEach(function(kS){return s(H,kS)}),tt&&Vs(H,He),Ce}function Et(H,U,Q,ae){if(typeof Q=="object"&&Q!==null&&Q.type===z&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case N:e:{for(var Ce=Q.key;U!==null;){if(U.key===Ce){if(Ce=Q.type,Ce===z){if(U.tag===7){a(H,U.sibling),ae=f(U,Q.props.children),ae.return=H,H=ae;break e}}else if(U.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===S&&ka(Ce)===U.type){a(H,U.sibling),ae=f(U,Q.props),Pl(ae,Q),ae.return=H,H=ae;break e}a(H,U);break}else s(H,U);U=U.sibling}Q.type===z?(ae=Ca(Q.props.children,H.mode,ae,Q.key),ae.return=H,H=ae):(ae=Vu(Q.type,Q.key,Q.props,null,H.mode,ae),Pl(ae,Q),ae.return=H,H=ae)}return _(H);case V:e:{for(Ce=Q.key;U!==null;){if(U.key===Ce)if(U.tag===4&&U.stateNode.containerInfo===Q.containerInfo&&U.stateNode.implementation===Q.implementation){a(H,U.sibling),ae=f(U,Q.children||[]),ae.return=H,H=ae;break e}else{a(H,U);break}else s(H,U);U=U.sibling}ae=yd(Q,H.mode,ae),ae.return=H,H=ae}return _(H);case S:return Q=ka(Q),Et(H,U,Q,ae)}if(ke(Q))return Te(H,U,Q,ae);if(j(Q)){if(Ce=j(Q),typeof Ce!="function")throw Error(r(150));return Q=Ce.call(Q),Ie(H,U,Q,ae)}if(typeof Q.then=="function")return Et(H,U,qu(Q),ae);if(Q.$$typeof===F)return Et(H,U,Lu(H,Q),ae);Hu(H,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,U!==null&&U.tag===6?(a(H,U.sibling),ae=f(U,Q),ae.return=H,H=ae):(a(H,U),ae=pd(Q,H.mode,ae),ae.return=H,H=ae),_(H)):a(H,U)}return function(H,U,Q,ae){try{Vl=0;var Ce=Et(H,U,Q,ae);return Eo=null,Ce}catch(we){if(we===bo||we===zu)throw we;var ot=mi(29,we,null,H.mode);return ot.lanes=ae,ot.return=H,ot}}}var Va=Z0(!0),ey=Z0(!1),Tr=!1;function Nd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Id(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function wr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function xr(n,s,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(ut&2)!==0){var f=l.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),l.pending=s,s=Mu(n),j0(n,null,a),s}return ku(n,l,s,a),Mu(n)}function jl(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,Gt(n,a)}}function Dd(n,s){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=s:d=d.next=s}else f=d=s;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var Od=!1;function Ll(){if(Od){var n=_o;if(n!==null)throw n}}function Ul(n,s,a,l){Od=!1;var f=n.updateQueue;Tr=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,x=f.shared.pending;if(x!==null){f.shared.pending=null;var P=x,Y=P.next;P.next=null,_===null?d=Y:_.next=Y,_=P;var re=n.alternate;re!==null&&(re=re.updateQueue,x=re.lastBaseUpdate,x!==_&&(x===null?re.firstBaseUpdate=Y:x.next=Y,re.lastBaseUpdate=P))}if(d!==null){var le=f.baseState;_=0,re=Y=P=null,x=d;do{var J=x.lane&-536870913,ie=J!==x.lane;if(ie?(Ye&J)===J:(l&J)===J){J!==0&&J===vo&&(Od=!0),re!==null&&(re=re.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var Te=n,Ie=x;J=s;var Et=a;switch(Ie.tag){case 1:if(Te=Ie.payload,typeof Te=="function"){le=Te.call(Et,le,J);break e}le=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ie.payload,J=typeof Te=="function"?Te.call(Et,le,J):Te,J==null)break e;le=b({},le,J);break e;case 2:Tr=!0}}J=x.callback,J!==null&&(n.flags|=64,ie&&(n.flags|=8192),ie=f.callbacks,ie===null?f.callbacks=[J]:ie.push(J))}else ie={lane:J,tag:x.tag,payload:x.payload,callback:x.callback,next:null},re===null?(Y=re=ie,P=le):re=re.next=ie,_|=J;if(x=x.next,x===null){if(x=f.shared.pending,x===null)break;ie=x,x=ie.next,ie.next=null,f.lastBaseUpdate=ie,f.shared.pending=null}}while(!0);re===null&&(P=le),f.baseState=P,f.firstBaseUpdate=Y,f.lastBaseUpdate=re,d===null&&(f.shared.lanes=0),Nr|=_,n.lanes=_,n.memoizedState=le}}function ty(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function ny(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)ty(a[n],s)}var To=L(null),Fu=L(0);function iy(n,s){n=$s,me(Fu,n),me(To,s),$s=n|s.baseLanes}function kd(){me(Fu,$s),me(To,To.current)}function Md(){$s=Fu.current,se(To),se(Fu)}var gi=L(null),Li=null;function Sr(n){var s=n.alternate;me(Qt,Qt.current&1),me(gi,n),Li===null&&(s===null||To.current!==null||s.memoizedState!==null)&&(Li=n)}function Vd(n){me(Qt,Qt.current),me(gi,n),Li===null&&(Li=n)}function sy(n){n.tag===22?(me(Qt,Qt.current),me(gi,n),Li===null&&(Li=n)):Ar()}function Ar(){me(Qt,Qt.current),me(gi,gi.current)}function pi(n){se(gi),Li===n&&(Li=null),se(Qt)}var Qt=L(0);function Gu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Bm(a)||qm(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ls=0,qe=null,_t=null,nn=null,$u=!1,wo=!1,Pa=!1,Ku=0,zl=0,xo=null,wx=0;function zt(){throw Error(r(321))}function Pd(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!di(n[a],s[a]))return!1;return!0}function jd(n,s,a,l,f,d){return Ls=d,qe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ee.H=n===null||n.memoizedState===null?By:Jd,Pa=!1,d=a(l,f),Pa=!1,wo&&(d=ay(s,a,l,f)),ry(n),d}function ry(n){ee.H=Hl;var s=_t!==null&&_t.next!==null;if(Ls=0,nn=_t=qe=null,$u=!1,zl=0,xo=null,s)throw Error(r(300));n===null||sn||(n=n.dependencies,n!==null&&ju(n)&&(sn=!0))}function ay(n,s,a,l){qe=n;var f=0;do{if(wo&&(xo=null),zl=0,wo=!1,25<=f)throw Error(r(301));if(f+=1,nn=_t=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}ee.H=qy,d=s(a,l)}while(wo);return d}function xx(){var n=ee.H,s=n.useState()[0];return s=typeof s.then=="function"?Bl(s):s,n=n.useState()[0],(_t!==null?_t.memoizedState:null)!==n&&(qe.flags|=1024),s}function Ld(){var n=Ku!==0;return Ku=0,n}function Ud(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function zd(n){if($u){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}$u=!1}Ls=0,nn=_t=qe=null,wo=!1,zl=Ku=0,xo=null}function Xn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?qe.memoizedState=nn=n:nn=nn.next=n,nn}function Yt(){if(_t===null){var n=qe.alternate;n=n!==null?n.memoizedState:null}else n=_t.next;var s=nn===null?qe.memoizedState:nn.next;if(s!==null)nn=s,_t=n;else{if(n===null)throw qe.alternate===null?Error(r(467)):Error(r(310));_t=n,n={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},nn===null?qe.memoizedState=nn=n:nn=nn.next=n}return nn}function Qu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bl(n){var s=zl;return zl+=1,xo===null&&(xo=[]),n=X0(xo,n,s),s=qe,(nn===null?s.memoizedState:nn.next)===null&&(s=s.alternate,ee.H=s===null||s.memoizedState===null?By:Jd),n}function Yu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Bl(n);if(n.$$typeof===F)return Rn(n)}throw Error(r(438,String(n)))}function Bd(n){var s=null,a=qe.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=qe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Qu(),qe.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),l=0;l<n;l++)a[l]=O;return s.index++,a}function Us(n,s){return typeof s=="function"?s(n):s}function Xu(n){var s=Yt();return qd(s,_t,n)}function qd(n,s,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}s.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{s=f.next;var x=_=null,P=null,Y=s,re=!1;do{var le=Y.lane&-536870913;if(le!==Y.lane?(Ye&le)===le:(Ls&le)===le){var J=Y.revertLane;if(J===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),le===vo&&(re=!0);else if((Ls&J)===J){Y=Y.next,J===vo&&(re=!0);continue}else le={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(x=P=le,_=d):P=P.next=le,qe.lanes|=J,Nr|=J;le=Y.action,Pa&&a(d,le),d=Y.hasEagerState?Y.eagerState:a(d,le)}else J={lane:le,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(x=P=J,_=d):P=P.next=J,qe.lanes|=le,Nr|=le;Y=Y.next}while(Y!==null&&Y!==s);if(P===null?_=d:P.next=x,!di(d,n.memoizedState)&&(sn=!0,re&&(a=_o,a!==null)))throw a;n.memoizedState=d,n.baseState=_,n.baseQueue=P,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function Hd(n){var s=Yt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=s.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);di(d,s.memoizedState)||(sn=!0),s.memoizedState=d,s.baseQueue===null&&(s.baseState=d),a.lastRenderedState=d}return[d,l]}function oy(n,s,a){var l=qe,f=Yt(),d=tt;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=s();var _=!di((_t||f).memoizedState,a);if(_&&(f.memoizedState=a,sn=!0),f=f.queue,$d(uy.bind(null,l,f,n),[n]),f.getSnapshot!==s||_||nn!==null&&nn.memoizedState.tag&1){if(l.flags|=2048,So(9,{destroy:void 0},cy.bind(null,l,f,a,s),null),wt===null)throw Error(r(349));d||(Ls&127)!==0||ly(l,s,a)}return a}function ly(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=qe.updateQueue,s===null?(s=Qu(),qe.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function cy(n,s,a,l){s.value=a,s.getSnapshot=l,hy(s)&&fy(n)}function uy(n,s,a){return a(function(){hy(s)&&fy(n)})}function hy(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!di(n,a)}catch{return!0}}function fy(n){var s=Ra(n,2);s!==null&&ui(s,n,2)}function Fd(n){var s=Xn();if(typeof n=="function"){var a=n;if(n=a(),Pa){pn(!0);try{a()}finally{pn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:n},s}function dy(n,s,a,l){return n.baseState=a,qd(n,_t,typeof l=="function"?l:Us)}function Sx(n,s,a,l,f){if(Zu(n))throw Error(r(485));if(n=s.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};ee.T!==null?a(!0):d.isTransition=!1,l(d),a=s.pending,a===null?(d.next=s.pending=d,my(s,d)):(d.next=a.next,s.pending=a.next=d)}}function my(n,s){var a=s.action,l=s.payload,f=n.state;if(s.isTransition){var d=ee.T,_={};ee.T=_;try{var x=a(f,l),P=ee.S;P!==null&&P(_,x),gy(n,s,x)}catch(Y){Gd(n,s,Y)}finally{d!==null&&_.types!==null&&(d.types=_.types),ee.T=d}}else try{d=a(f,l),gy(n,s,d)}catch(Y){Gd(n,s,Y)}}function gy(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){py(n,s,l)},function(l){return Gd(n,s,l)}):py(n,s,a)}function py(n,s,a){s.status="fulfilled",s.value=a,yy(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,my(n,a)))}function Gd(n,s,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,yy(s),s=s.next;while(s!==l)}n.action=null}function yy(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function vy(n,s){return s}function _y(n,s){if(tt){var a=wt.formState;if(a!==null){e:{var l=qe;if(tt){if(Ct){t:{for(var f=Ct,d=ji;f.nodeType!==8;){if(!d){f=null;break t}if(f=Ui(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){Ct=Ui(f.nextSibling),l=f.data==="F!";break e}}br(l)}l=!1}l&&(s=a[0])}}return a=Xn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vy,lastRenderedState:s},a.queue=l,a=Ly.bind(null,qe,l),l.dispatch=a,l=Fd(!1),d=Wd.bind(null,qe,!1,l.queue),l=Xn(),f={state:s,dispatch:null,action:n,pending:null},l.queue=f,a=Sx.bind(null,qe,f,d,a),f.dispatch=a,l.memoizedState=n,[s,a,!1]}function by(n){var s=Yt();return Ey(s,_t,n)}function Ey(n,s,a){if(s=qd(n,s,vy)[0],n=Xu(Us)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Bl(s)}catch(_){throw _===bo?zu:_}else l=s;s=Yt();var f=s.queue,d=f.dispatch;return a!==s.memoizedState&&(qe.flags|=2048,So(9,{destroy:void 0},Ax.bind(null,f,a),null)),[l,d,n]}function Ax(n,s){n.action=s}function Ty(n){var s=Yt(),a=_t;if(a!==null)return Ey(s,a,n);Yt(),s=s.memoizedState,a=Yt();var l=a.queue.dispatch;return a.memoizedState=n,[s,l,!1]}function So(n,s,a,l){return n={tag:n,create:a,deps:l,inst:s,next:null},s=qe.updateQueue,s===null&&(s=Qu(),qe.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,s.lastEffect=n),n}function wy(){return Yt().memoizedState}function Wu(n,s,a,l){var f=Xn();qe.flags|=n,f.memoizedState=So(1|s,{destroy:void 0},a,l===void 0?null:l)}function Ju(n,s,a,l){var f=Yt();l=l===void 0?null:l;var d=f.memoizedState.inst;_t!==null&&l!==null&&Pd(l,_t.memoizedState.deps)?f.memoizedState=So(s,d,a,l):(qe.flags|=n,f.memoizedState=So(1|s,d,a,l))}function xy(n,s){Wu(8390656,8,n,s)}function $d(n,s){Ju(2048,8,n,s)}function Rx(n){qe.flags|=4;var s=qe.updateQueue;if(s===null)s=Qu(),qe.updateQueue=s,s.events=[n];else{var a=s.events;a===null?s.events=[n]:a.push(n)}}function Sy(n){var s=Yt().memoizedState;return Rx({ref:s,nextImpl:n}),function(){if((ut&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function Ay(n,s){return Ju(4,2,n,s)}function Ry(n,s){return Ju(4,4,n,s)}function Cy(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Ny(n,s,a){a=a!=null?a.concat([n]):null,Ju(4,4,Cy.bind(null,s,n),a)}function Kd(){}function Iy(n,s){var a=Yt();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Pd(s,l[1])?l[0]:(a.memoizedState=[n,s],n)}function Dy(n,s){var a=Yt();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Pd(s,l[1]))return l[0];if(l=n(),Pa){pn(!0);try{n()}finally{pn(!1)}}return a.memoizedState=[l,s],l}function Qd(n,s,a){return a===void 0||(Ls&1073741824)!==0&&(Ye&261930)===0?n.memoizedState=s:(n.memoizedState=a,n=Ov(),qe.lanes|=n,Nr|=n,a)}function Oy(n,s,a,l){return di(a,s)?a:To.current!==null?(n=Qd(n,a,l),di(n,s)||(sn=!0),n):(Ls&42)===0||(Ls&1073741824)!==0&&(Ye&261930)===0?(sn=!0,n.memoizedState=a):(n=Ov(),qe.lanes|=n,Nr|=n,s)}function ky(n,s,a,l,f){var d=he.p;he.p=d!==0&&8>d?d:8;var _=ee.T,x={};ee.T=x,Wd(n,!1,s,a);try{var P=f(),Y=ee.S;if(Y!==null&&Y(x,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var re=Tx(P,l);ql(n,s,re,_i(n))}else ql(n,s,l,_i(n))}catch(le){ql(n,s,{then:function(){},status:"rejected",reason:le},_i())}finally{he.p=d,_!==null&&x.types!==null&&(_.types=x.types),ee.T=_}}function Cx(){}function Yd(n,s,a,l){if(n.tag!==5)throw Error(r(476));var f=My(n).queue;ky(n,f,s,pe,a===null?Cx:function(){return Vy(n),a(l)})}function My(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:pe},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Vy(n){var s=My(n);s.next===null&&(s=n.alternate.memoizedState),ql(n,s.next.queue,{},_i())}function Xd(){return Rn(rc)}function Py(){return Yt().memoizedState}function jy(){return Yt().memoizedState}function Nx(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=_i();n=wr(a);var l=xr(s,n,a);l!==null&&(ui(l,s,a),jl(l,s,a)),s={cache:Sd()},n.payload=s;return}s=s.return}}function Ix(n,s,a){var l=_i();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Zu(n)?Uy(s,a):(a=md(n,s,a,l),a!==null&&(ui(a,n,l),zy(a,s,l)))}function Ly(n,s,a){var l=_i();ql(n,s,a,l)}function ql(n,s,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Zu(n))Uy(s,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=s.lastRenderedReducer,d!==null))try{var _=s.lastRenderedState,x=d(_,a);if(f.hasEagerState=!0,f.eagerState=x,di(x,_))return ku(n,s,f,0),wt===null&&Ou(),!1}catch{}if(a=md(n,s,f,l),a!==null)return ui(a,n,l),zy(a,s,l),!0}return!1}function Wd(n,s,a,l){if(l={lane:2,revertLane:Nm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Zu(n)){if(s)throw Error(r(479))}else s=md(n,a,l,2),s!==null&&ui(s,n,2)}function Zu(n){var s=n.alternate;return n===qe||s!==null&&s===qe}function Uy(n,s){wo=$u=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function zy(n,s,a){if((a&4194048)!==0){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,Gt(n,a)}}var Hl={readContext:Rn,use:Yu,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useLayoutEffect:zt,useInsertionEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useSyncExternalStore:zt,useId:zt,useHostTransitionStatus:zt,useFormState:zt,useActionState:zt,useOptimistic:zt,useMemoCache:zt,useCacheRefresh:zt};Hl.useEffectEvent=zt;var By={readContext:Rn,use:Yu,useCallback:function(n,s){return Xn().memoizedState=[n,s===void 0?null:s],n},useContext:Rn,useEffect:xy,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,Wu(4194308,4,Cy.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Wu(4194308,4,n,s)},useInsertionEffect:function(n,s){Wu(4,2,n,s)},useMemo:function(n,s){var a=Xn();s=s===void 0?null:s;var l=n();if(Pa){pn(!0);try{n()}finally{pn(!1)}}return a.memoizedState=[l,s],l},useReducer:function(n,s,a){var l=Xn();if(a!==void 0){var f=a(s);if(Pa){pn(!0);try{a(s)}finally{pn(!1)}}}else f=s;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=Ix.bind(null,qe,n),[l.memoizedState,n]},useRef:function(n){var s=Xn();return n={current:n},s.memoizedState=n},useState:function(n){n=Fd(n);var s=n.queue,a=Ly.bind(null,qe,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:Kd,useDeferredValue:function(n,s){var a=Xn();return Qd(a,n,s)},useTransition:function(){var n=Fd(!1);return n=ky.bind(null,qe,n.queue,!0,!1),Xn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var l=qe,f=Xn();if(tt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),wt===null)throw Error(r(349));(Ye&127)!==0||ly(l,s,a)}f.memoizedState=a;var d={value:a,getSnapshot:s};return f.queue=d,xy(uy.bind(null,l,d,n),[n]),l.flags|=2048,So(9,{destroy:void 0},cy.bind(null,l,d,a,s),null),a},useId:function(){var n=Xn(),s=wt.identifierPrefix;if(tt){var a=ys,l=ps;a=(l&~(1<<32-St(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Ku++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=wx++,s="_"+s+"r_"+a.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Xd,useFormState:_y,useActionState:_y,useOptimistic:function(n){var s=Xn();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Wd.bind(null,qe,!0,a),a.dispatch=s,[n,s]},useMemoCache:Bd,useCacheRefresh:function(){return Xn().memoizedState=Nx.bind(null,qe)},useEffectEvent:function(n){var s=Xn(),a={impl:n};return s.memoizedState=a,function(){if((ut&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Jd={readContext:Rn,use:Yu,useCallback:Iy,useContext:Rn,useEffect:$d,useImperativeHandle:Ny,useInsertionEffect:Ay,useLayoutEffect:Ry,useMemo:Dy,useReducer:Xu,useRef:wy,useState:function(){return Xu(Us)},useDebugValue:Kd,useDeferredValue:function(n,s){var a=Yt();return Oy(a,_t.memoizedState,n,s)},useTransition:function(){var n=Xu(Us)[0],s=Yt().memoizedState;return[typeof n=="boolean"?n:Bl(n),s]},useSyncExternalStore:oy,useId:Py,useHostTransitionStatus:Xd,useFormState:by,useActionState:by,useOptimistic:function(n,s){var a=Yt();return dy(a,_t,n,s)},useMemoCache:Bd,useCacheRefresh:jy};Jd.useEffectEvent=Sy;var qy={readContext:Rn,use:Yu,useCallback:Iy,useContext:Rn,useEffect:$d,useImperativeHandle:Ny,useInsertionEffect:Ay,useLayoutEffect:Ry,useMemo:Dy,useReducer:Hd,useRef:wy,useState:function(){return Hd(Us)},useDebugValue:Kd,useDeferredValue:function(n,s){var a=Yt();return _t===null?Qd(a,n,s):Oy(a,_t.memoizedState,n,s)},useTransition:function(){var n=Hd(Us)[0],s=Yt().memoizedState;return[typeof n=="boolean"?n:Bl(n),s]},useSyncExternalStore:oy,useId:Py,useHostTransitionStatus:Xd,useFormState:Ty,useActionState:Ty,useOptimistic:function(n,s){var a=Yt();return _t!==null?dy(a,_t,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Bd,useCacheRefresh:jy};qy.useEffectEvent=Sy;function Zd(n,s,a,l){s=n.memoizedState,a=a(l,s),a=a==null?s:b({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var em={enqueueSetState:function(n,s,a){n=n._reactInternals;var l=_i(),f=wr(l);f.payload=s,a!=null&&(f.callback=a),s=xr(n,f,l),s!==null&&(ui(s,n,l),jl(s,n,l))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var l=_i(),f=wr(l);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=xr(n,f,l),s!==null&&(ui(s,n,l),jl(s,n,l))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=_i(),l=wr(a);l.tag=2,s!=null&&(l.callback=s),s=xr(n,l,a),s!==null&&(ui(s,n,a),jl(s,n,a))}};function Hy(n,s,a,l,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,_):s.prototype&&s.prototype.isPureReactComponent?!Nl(a,l)||!Nl(f,d):!0}function Fy(n,s,a,l){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==n&&em.enqueueReplaceState(s,s.state,null)}function ja(n,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(n=n.defaultProps){a===s&&(a=b({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function Gy(n){Du(n)}function $y(n){console.error(n)}function Ky(n){Du(n)}function eh(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Qy(n,s,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function tm(n,s,a){return a=wr(a),a.tag=3,a.payload={element:null},a.callback=function(){eh(n,s)},a}function Yy(n){return n=wr(n),n.tag=3,n}function Xy(n,s,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){Qy(s,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){Qy(s,a,l),typeof f!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var x=l.stack;this.componentDidCatch(l.value,{componentStack:x!==null?x:""})})}function Dx(n,s,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&yo(s,a,f,!0),a=gi.current,a!==null){switch(a.tag){case 31:case 13:return Li===null?fh():a.alternate===null&&Bt===0&&(Bt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Bu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Am(n,l,f)),!1;case 22:return a.flags|=65536,l===Bu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Am(n,l,f)),!1}throw Error(r(435,a.tag))}return Am(n,l,f),fh(),!1}if(tt)return s=gi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,l!==bd&&(n=Error(r(422),{cause:l}),Ol(Mi(n,a)))):(l!==bd&&(s=Error(r(423),{cause:l}),Ol(Mi(s,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Mi(l,a),f=tm(n.stateNode,l,f),Dd(n,f),Bt!==4&&(Bt=2)),!1;var d=Error(r(520),{cause:l});if(d=Mi(d,a),Wl===null?Wl=[d]:Wl.push(d),Bt!==4&&(Bt=2),s===null)return!0;l=Mi(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=tm(a.stateNode,l,n),Dd(a,n),!1;case 1:if(s=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ir===null||!Ir.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Yy(f),Xy(f,n,a,l),Dd(a,f),!1}a=a.return}while(a!==null);return!1}var nm=Error(r(461)),sn=!1;function Cn(n,s,a,l){s.child=n===null?ey(s,null,a,l):Va(s,n.child,a,l)}function Wy(n,s,a,l,f){a=a.render;var d=s.ref;if("ref"in l){var _={};for(var x in l)x!=="ref"&&(_[x]=l[x])}else _=l;return Da(s),l=jd(n,s,a,_,d,f),x=Ld(),n!==null&&!sn?(Ud(n,s,f),zs(n,s,f)):(tt&&x&&vd(s),s.flags|=1,Cn(n,s,l,f),s.child)}function Jy(n,s,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!gd(d)&&d.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=d,Zy(n,s,d,l,f)):(n=Vu(a.type,null,l,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(d=n.child,!um(n,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Nl,a(_,l)&&n.ref===s.ref)return zs(n,s,f)}return s.flags|=1,n=Ms(d,l),n.ref=s.ref,n.return=s,s.child=n}function Zy(n,s,a,l,f){if(n!==null){var d=n.memoizedProps;if(Nl(d,l)&&n.ref===s.ref)if(sn=!1,s.pendingProps=l=d,um(n,f))(n.flags&131072)!==0&&(sn=!0);else return s.lanes=n.lanes,zs(n,s,f)}return im(n,s,a,l,f)}function ev(n,s,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=s.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,s.child=null;return tv(n,s,d,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Uu(s,d!==null?d.cachePool:null),d!==null?iy(s,d):kd(),sy(s);else return l=s.lanes=536870912,tv(n,s,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Uu(s,d.cachePool),iy(s,d),Ar(),s.memoizedState=null):(n!==null&&Uu(s,null),kd(),Ar());return Cn(n,s,f,a),s.child}function Fl(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function tv(n,s,a,l,f){var d=Rd();return d=d===null?null:{parent:tn._currentValue,pool:d},s.memoizedState={baseLanes:a,cachePool:d},n!==null&&Uu(s,null),kd(),sy(s),n!==null&&yo(n,s,l,!0),s.childLanes=f,null}function th(n,s){return s=ih({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function nv(n,s,a){return Va(s,n.child,null,a),n=th(s,s.pendingProps),n.flags|=2,pi(s),s.memoizedState=null,n}function Ox(n,s,a){var l=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(tt){if(l.mode==="hidden")return n=th(s,l),s.lanes=536870912,Fl(null,n);if(Vd(s),(n=Ct)?(n=m_(n,ji),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:vr!==null?{id:ps,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},a=U0(n),a.return=s,s.child=a,An=s,Ct=null)):n=null,n===null)throw br(s);return s.lanes=536870912,null}return th(s,l)}var d=n.memoizedState;if(d!==null){var _=d.dehydrated;if(Vd(s),f)if(s.flags&256)s.flags&=-257,s=nv(n,s,a);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(sn||yo(n,s,a,!1),f=(a&n.childLanes)!==0,sn||f){if(l=wt,l!==null&&(_=fe(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Ra(n,_),ui(l,n,_),nm;fh(),s=nv(n,s,a)}else n=d.treeContext,Ct=Ui(_.nextSibling),An=s,tt=!0,_r=null,ji=!1,n!==null&&q0(s,n),s=th(s,l),s.flags|=4096;return s}return n=Ms(n.child,{mode:l.mode,children:l.children}),n.ref=s.ref,s.child=n,n.return=s,n}function nh(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function im(n,s,a,l,f){return Da(s),a=jd(n,s,a,l,void 0,f),l=Ld(),n!==null&&!sn?(Ud(n,s,f),zs(n,s,f)):(tt&&l&&vd(s),s.flags|=1,Cn(n,s,a,f),s.child)}function iv(n,s,a,l,f,d){return Da(s),s.updateQueue=null,a=ay(s,l,a,f),ry(n),l=Ld(),n!==null&&!sn?(Ud(n,s,d),zs(n,s,d)):(tt&&l&&vd(s),s.flags|=1,Cn(n,s,a,d),s.child)}function sv(n,s,a,l,f){if(Da(s),s.stateNode===null){var d=fo,_=a.contextType;typeof _=="object"&&_!==null&&(d=Rn(_)),d=new a(l,d),s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=em,s.stateNode=d,d._reactInternals=s,d=s.stateNode,d.props=l,d.state=s.memoizedState,d.refs={},Nd(s),_=a.contextType,d.context=typeof _=="object"&&_!==null?Rn(_):fo,d.state=s.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Zd(s,a,_,l),d.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&em.enqueueReplaceState(d,d.state,null),Ul(s,l,d,f),Ll(),d.state=s.memoizedState),typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(n===null){d=s.stateNode;var x=s.memoizedProps,P=ja(a,x);d.props=P;var Y=d.context,re=a.contextType;_=fo,typeof re=="object"&&re!==null&&(_=Rn(re));var le=a.getDerivedStateFromProps;re=typeof le=="function"||typeof d.getSnapshotBeforeUpdate=="function",x=s.pendingProps!==x,re||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(x||Y!==_)&&Fy(s,d,l,_),Tr=!1;var J=s.memoizedState;d.state=J,Ul(s,l,d,f),Ll(),Y=s.memoizedState,x||J!==Y||Tr?(typeof le=="function"&&(Zd(s,a,le,l),Y=s.memoizedState),(P=Tr||Hy(s,a,P,l,J,Y,_))?(re||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(s.flags|=4194308)):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=Y),d.props=l,d.state=Y,d.context=_,l=P):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{d=s.stateNode,Id(n,s),_=s.memoizedProps,re=ja(a,_),d.props=re,le=s.pendingProps,J=d.context,Y=a.contextType,P=fo,typeof Y=="object"&&Y!==null&&(P=Rn(Y)),x=a.getDerivedStateFromProps,(Y=typeof x=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==le||J!==P)&&Fy(s,d,l,P),Tr=!1,J=s.memoizedState,d.state=J,Ul(s,l,d,f),Ll();var ie=s.memoizedState;_!==le||J!==ie||Tr||n!==null&&n.dependencies!==null&&ju(n.dependencies)?(typeof x=="function"&&(Zd(s,a,x,l),ie=s.memoizedState),(re=Tr||Hy(s,a,re,l,J,ie,P)||n!==null&&n.dependencies!==null&&ju(n.dependencies))?(Y||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,ie,P),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,ie,P)),typeof d.componentDidUpdate=="function"&&(s.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&J===n.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&J===n.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=ie),d.props=l,d.state=ie,d.context=P,l=re):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&J===n.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&J===n.memoizedState||(s.flags|=1024),l=!1)}return d=l,nh(n,s),l=(s.flags&128)!==0,d||l?(d=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),s.flags|=1,n!==null&&l?(s.child=Va(s,n.child,null,f),s.child=Va(s,null,a,f)):Cn(n,s,a,f),s.memoizedState=d.state,n=s.child):n=zs(n,s,f),n}function rv(n,s,a,l){return Na(),s.flags|=256,Cn(n,s,a,l),s.child}var sm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rm(n){return{baseLanes:n,cachePool:Q0()}}function am(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=vi),n}function av(n,s,a){var l=s.pendingProps,f=!1,d=(s.flags&128)!==0,_;if((_=d)||(_=n!==null&&n.memoizedState===null?!1:(Qt.current&2)!==0),_&&(f=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,n===null){if(tt){if(f?Sr(s):Ar(),(n=Ct)?(n=m_(n,ji),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:vr!==null?{id:ps,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},a=U0(n),a.return=s,s.child=a,An=s,Ct=null)):n=null,n===null)throw br(s);return qm(n)?s.lanes=32:s.lanes=536870912,null}var x=l.children;return l=l.fallback,f?(Ar(),f=s.mode,x=ih({mode:"hidden",children:x},f),l=Ca(l,f,a,null),x.return=s,l.return=s,x.sibling=l,s.child=x,l=s.child,l.memoizedState=rm(a),l.childLanes=am(n,_,a),s.memoizedState=sm,Fl(null,l)):(Sr(s),om(s,x))}var P=n.memoizedState;if(P!==null&&(x=P.dehydrated,x!==null)){if(d)s.flags&256?(Sr(s),s.flags&=-257,s=lm(n,s,a)):s.memoizedState!==null?(Ar(),s.child=n.child,s.flags|=128,s=null):(Ar(),x=l.fallback,f=s.mode,l=ih({mode:"visible",children:l.children},f),x=Ca(x,f,a,null),x.flags|=2,l.return=s,x.return=s,l.sibling=x,s.child=l,Va(s,n.child,null,a),l=s.child,l.memoizedState=rm(a),l.childLanes=am(n,_,a),s.memoizedState=sm,s=Fl(null,l));else if(Sr(s),qm(x)){if(_=x.nextSibling&&x.nextSibling.dataset,_)var Y=_.dgst;_=Y,l=Error(r(419)),l.stack="",l.digest=_,Ol({value:l,source:null,stack:null}),s=lm(n,s,a)}else if(sn||yo(n,s,a,!1),_=(a&n.childLanes)!==0,sn||_){if(_=wt,_!==null&&(l=fe(_,a),l!==0&&l!==P.retryLane))throw P.retryLane=l,Ra(n,l),ui(_,n,l),nm;Bm(x)||fh(),s=lm(n,s,a)}else Bm(x)?(s.flags|=192,s.child=n.child,s=null):(n=P.treeContext,Ct=Ui(x.nextSibling),An=s,tt=!0,_r=null,ji=!1,n!==null&&q0(s,n),s=om(s,l.children),s.flags|=4096);return s}return f?(Ar(),x=l.fallback,f=s.mode,P=n.child,Y=P.sibling,l=Ms(P,{mode:"hidden",children:l.children}),l.subtreeFlags=P.subtreeFlags&65011712,Y!==null?x=Ms(Y,x):(x=Ca(x,f,a,null),x.flags|=2),x.return=s,l.return=s,l.sibling=x,s.child=l,Fl(null,l),l=s.child,x=n.child.memoizedState,x===null?x=rm(a):(f=x.cachePool,f!==null?(P=tn._currentValue,f=f.parent!==P?{parent:P,pool:P}:f):f=Q0(),x={baseLanes:x.baseLanes|a,cachePool:f}),l.memoizedState=x,l.childLanes=am(n,_,a),s.memoizedState=sm,Fl(n.child,l)):(Sr(s),a=n.child,n=a.sibling,a=Ms(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,n!==null&&(_=s.deletions,_===null?(s.deletions=[n],s.flags|=16):_.push(n)),s.child=a,s.memoizedState=null,a)}function om(n,s){return s=ih({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function ih(n,s){return n=mi(22,n,null,s),n.lanes=0,n}function lm(n,s,a){return Va(s,n.child,null,a),n=om(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function ov(n,s,a){n.lanes|=s;var l=n.alternate;l!==null&&(l.lanes|=s),wd(n.return,s,a)}function cm(n,s,a,l,f,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function lv(n,s,a){var l=s.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=Qt.current,x=(_&2)!==0;if(x?(_=_&1|2,s.flags|=128):_&=1,me(Qt,_),Cn(n,s,l,a),l=tt?Dl:0,!x&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ov(n,a,s);else if(n.tag===19)ov(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&Gu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),cm(s,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Gu(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}cm(s,!0,a,null,d,l);break;case"together":cm(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function zs(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Nr|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(yo(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,a=Ms(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Ms(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function um(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&ju(n)))}function kx(n,s,a){switch(s.tag){case 3:Dt(s,s.stateNode.containerInfo),Er(s,tn,n.memoizedState.cache),Na();break;case 27:case 5:Ht(s);break;case 4:Dt(s,s.stateNode.containerInfo);break;case 10:Er(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Vd(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Sr(s),s.flags|=128,null):(a&s.child.childLanes)!==0?av(n,s,a):(Sr(s),n=zs(n,s,a),n!==null?n.sibling:null);Sr(s);break;case 19:var f=(n.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(yo(n,s,a,!1),l=(a&s.childLanes)!==0),f){if(l)return lv(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),me(Qt,Qt.current),l)break;return null;case 22:return s.lanes=0,ev(n,s,a,s.pendingProps);case 24:Er(s,tn,n.memoizedState.cache)}return zs(n,s,a)}function cv(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)sn=!0;else{if(!um(n,a)&&(s.flags&128)===0)return sn=!1,kx(n,s,a);sn=(n.flags&131072)!==0}else sn=!1,tt&&(s.flags&1048576)!==0&&B0(s,Dl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(n=ka(s.elementType),s.type=n,typeof n=="function")gd(n)?(l=ja(n,l),s.tag=1,s=sv(null,s,n,l,a)):(s.tag=0,s=im(null,s,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===ue){s.tag=11,s=Wy(null,s,n,l,a);break e}else if(f===A){s.tag=14,s=Jy(null,s,n,l,a);break e}}throw s=De(n)||n,Error(r(306,s,""))}}return s;case 0:return im(n,s,s.type,s.pendingProps,a);case 1:return l=s.type,f=ja(l,s.pendingProps),sv(n,s,l,f,a);case 3:e:{if(Dt(s,s.stateNode.containerInfo),n===null)throw Error(r(387));l=s.pendingProps;var d=s.memoizedState;f=d.element,Id(n,s),Ul(s,l,null,a);var _=s.memoizedState;if(l=_.cache,Er(s,tn,l),l!==d.cache&&xd(s,[tn],a,!0),Ll(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=d,s.memoizedState=d,s.flags&256){s=rv(n,s,l,a);break e}else if(l!==f){f=Mi(Error(r(424)),s),Ol(f),s=rv(n,s,l,a);break e}else for(n=s.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Ct=Ui(n.firstChild),An=s,tt=!0,_r=null,ji=!0,a=ey(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Na(),l===f){s=zs(n,s,a);break e}Cn(n,s,l,a)}s=s.child}return s;case 26:return nh(n,s),n===null?(a=b_(s.type,null,s.pendingProps,null))?s.memoizedState=a:tt||(a=s.type,n=s.pendingProps,l=_h(Se.current).createElement(a),l[Pt]=s,l[$t]=n,Nn(l,a,n),Ut(l),s.stateNode=l):s.memoizedState=b_(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Ht(s),n===null&&tt&&(l=s.stateNode=y_(s.type,s.pendingProps,Se.current),An=s,ji=!0,f=Ct,Mr(s.type)?(Hm=f,Ct=Ui(l.firstChild)):Ct=f),Cn(n,s,s.pendingProps.children,a),nh(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&tt&&((f=l=Ct)&&(l=cS(l,s.type,s.pendingProps,ji),l!==null?(s.stateNode=l,An=s,Ct=Ui(l.firstChild),ji=!1,f=!0):f=!1),f||br(s)),Ht(s),f=s.type,d=s.pendingProps,_=n!==null?n.memoizedProps:null,l=d.children,Lm(f,d)?l=null:_!==null&&Lm(f,_)&&(s.flags|=32),s.memoizedState!==null&&(f=jd(n,s,xx,null,null,a),rc._currentValue=f),nh(n,s),Cn(n,s,l,a),s.child;case 6:return n===null&&tt&&((n=a=Ct)&&(a=uS(a,s.pendingProps,ji),a!==null?(s.stateNode=a,An=s,Ct=null,n=!0):n=!1),n||br(s)),null;case 13:return av(n,s,a);case 4:return Dt(s,s.stateNode.containerInfo),l=s.pendingProps,n===null?s.child=Va(s,null,l,a):Cn(n,s,l,a),s.child;case 11:return Wy(n,s,s.type,s.pendingProps,a);case 7:return Cn(n,s,s.pendingProps,a),s.child;case 8:return Cn(n,s,s.pendingProps.children,a),s.child;case 12:return Cn(n,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Er(s,s.type,l.value),Cn(n,s,l.children,a),s.child;case 9:return f=s.type._context,l=s.pendingProps.children,Da(s),f=Rn(f),l=l(f),s.flags|=1,Cn(n,s,l,a),s.child;case 14:return Jy(n,s,s.type,s.pendingProps,a);case 15:return Zy(n,s,s.type,s.pendingProps,a);case 19:return lv(n,s,a);case 31:return Ox(n,s,a);case 22:return ev(n,s,a,s.pendingProps);case 24:return Da(s),l=Rn(tn),n===null?(f=Rd(),f===null&&(f=wt,d=Sd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),s.memoizedState={parent:l,cache:f},Nd(s),Er(s,tn,f)):((n.lanes&a)!==0&&(Id(n,s),Ul(s,null,null,a),Ll()),f=n.memoizedState,d=s.memoizedState,f.parent!==l?(f={parent:l,cache:l},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Er(s,tn,l)):(l=d.cache,Er(s,tn,l),l!==f.cache&&xd(s,[tn],a,!0))),Cn(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Bs(n){n.flags|=4}function hm(n,s,a,l,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Pv())n.flags|=8192;else throw Ma=Bu,Cd}else n.flags&=-16777217}function uv(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!S_(s))if(Pv())n.flags|=8192;else throw Ma=Bu,Cd}function sh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Zt():536870912,n.lanes|=s,No|=s)}function Gl(n,s){if(!tt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function Nt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,s}function Mx(n,s,a){var l=s.pendingProps;switch(_d(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(s),null;case 1:return Nt(s),null;case 3:return a=s.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),js(tn),ht(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(po(s)?Bs(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ed())),Nt(s),null;case 26:var f=s.type,d=s.memoizedState;return n===null?(Bs(s),d!==null?(Nt(s),uv(s,d)):(Nt(s),hm(s,f,null,l,a))):d?d!==n.memoizedState?(Bs(s),Nt(s),uv(s,d)):(Nt(s),s.flags&=-16777217):(n=n.memoizedProps,n!==l&&Bs(s),Nt(s),hm(s,f,n,l,a)),null;case 27:if(xi(s),a=Se.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&Bs(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return Nt(s),null}n=de.current,po(s)?H0(s):(n=y_(f,l,a),s.stateNode=n,Bs(s))}return Nt(s),null;case 5:if(xi(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&Bs(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return Nt(s),null}if(d=de.current,po(s))H0(s);else{var _=_h(Se.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[Pt]=s,d[$t]=l;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=d;e:switch(Nn(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Bs(s)}}return Nt(s),hm(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,a),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==l&&Bs(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(n=Se.current,po(s)){if(n=s.stateNode,a=s.memoizedProps,l=null,f=An,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Pt]=s,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||a_(n.nodeValue,a)),n||br(s,!0)}else n=_h(n).createTextNode(l),n[Pt]=s,s.stateNode=n}return Nt(s),null;case 31:if(a=s.memoizedState,n===null||n.memoizedState!==null){if(l=po(s),a!==null){if(n===null){if(!l)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Pt]=s}else Na(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Nt(s),n=!1}else a=Ed(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return s.flags&256?(pi(s),s):(pi(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Nt(s),null;case 13:if(l=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=po(s),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Pt]=s}else Na(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Nt(s),f=!1}else f=Ed(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(pi(s),s):(pi(s),null)}return pi(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=s.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(s.child.flags|=8192),sh(s,s.updateQueue),Nt(s),null);case 4:return ht(),n===null&&km(s.stateNode.containerInfo),Nt(s),null;case 10:return js(s.type),Nt(s),null;case 19:if(se(Qt),l=s.memoizedState,l===null)return Nt(s),null;if(f=(s.flags&128)!==0,d=l.rendering,d===null)if(f)Gl(l,!1);else{if(Bt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(d=Gu(n),d!==null){for(s.flags|=128,Gl(l,!1),n=d.updateQueue,s.updateQueue=n,sh(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)L0(a,n),a=a.sibling;return me(Qt,Qt.current&1|2),tt&&Vs(s,l.treeForkCount),s.child}n=n.sibling}l.tail!==null&&Jt()>ch&&(s.flags|=128,f=!0,Gl(l,!1),s.lanes=4194304)}else{if(!f)if(n=Gu(d),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,sh(s,n),Gl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!tt)return Nt(s),null}else 2*Jt()-l.renderingStartTime>ch&&a!==536870912&&(s.flags|=128,f=!0,Gl(l,!1),s.lanes=4194304);l.isBackwards?(d.sibling=s.child,s.child=d):(n=l.last,n!==null?n.sibling=d:s.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=Jt(),n.sibling=null,a=Qt.current,me(Qt,f?a&1|2:a&1),tt&&Vs(s,l.treeForkCount),n):(Nt(s),null);case 22:case 23:return pi(s),Md(),l=s.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(Nt(s),s.subtreeFlags&6&&(s.flags|=8192)):Nt(s),a=s.updateQueue,a!==null&&sh(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),n!==null&&se(Oa),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),js(tn),Nt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Vx(n,s){switch(_d(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return js(tn),ht(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return xi(s),null;case 31:if(s.memoizedState!==null){if(pi(s),s.alternate===null)throw Error(r(340));Na()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(pi(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Na()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return se(Qt),null;case 4:return ht(),null;case 10:return js(s.type),null;case 22:case 23:return pi(s),Md(),n!==null&&se(Oa),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return js(tn),null;case 25:return null;default:return null}}function hv(n,s){switch(_d(s),s.tag){case 3:js(tn),ht();break;case 26:case 27:case 5:xi(s);break;case 4:ht();break;case 31:s.memoizedState!==null&&pi(s);break;case 13:pi(s);break;case 19:se(Qt);break;case 10:js(s.type);break;case 22:case 23:pi(s),Md(),n!==null&&se(Oa);break;case 24:js(tn)}}function $l(n,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(x){mt(s,s.return,x)}}function Rr(n,s,a){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var _=l.inst,x=_.destroy;if(x!==void 0){_.destroy=void 0,f=s;var P=a,Y=x;try{Y()}catch(re){mt(f,P,re)}}}l=l.next}while(l!==d)}}catch(re){mt(s,s.return,re)}}function fv(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{ny(s,a)}catch(l){mt(n,n.return,l)}}}function dv(n,s,a){a.props=ja(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){mt(n,s,l)}}function Kl(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){mt(n,s,f)}}function vs(n,s){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){mt(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){mt(n,s,f)}else a.current=null}function mv(n){var s=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){mt(n,n.return,f)}}function fm(n,s,a){try{var l=n.stateNode;iS(l,n.type,a,s),l[$t]=s}catch(f){mt(n,n.return,f)}}function gv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Mr(n.type)||n.tag===4}function dm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||gv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Mr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function mm(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Qi));else if(l!==4&&(l===27&&Mr(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(mm(n,s,a),n=n.sibling;n!==null;)mm(n,s,a),n=n.sibling}function rh(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(l!==4&&(l===27&&Mr(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(rh(n,s,a),n=n.sibling;n!==null;)rh(n,s,a),n=n.sibling}function pv(n){var s=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Nn(s,l,a),s[Pt]=n,s[$t]=a}catch(d){mt(n,n.return,d)}}var qs=!1,rn=!1,gm=!1,yv=typeof WeakSet=="function"?WeakSet:Set,vn=null;function Px(n,s){if(n=n.containerInfo,Pm=Ah,n=N0(n),ld(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,x=-1,P=-1,Y=0,re=0,le=n,J=null;t:for(;;){for(var ie;le!==a||f!==0&&le.nodeType!==3||(x=_+f),le!==d||l!==0&&le.nodeType!==3||(P=_+l),le.nodeType===3&&(_+=le.nodeValue.length),(ie=le.firstChild)!==null;)J=le,le=ie;for(;;){if(le===n)break t;if(J===a&&++Y===f&&(x=_),J===d&&++re===l&&(P=_),(ie=le.nextSibling)!==null)break;le=J,J=le.parentNode}le=ie}a=x===-1||P===-1?null:{start:x,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(jm={focusedElem:n,selectionRange:a},Ah=!1,vn=s;vn!==null;)if(s=vn,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,vn=n;else for(;vn!==null;){switch(s=vn,d=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=s,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Te=ja(a.type,f);n=l.getSnapshotBeforeUpdate(Te,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(Ie){mt(a,a.return,Ie)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)zm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":zm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,vn=n;break}vn=s.return}}function vv(n,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Fs(n,a),l&4&&$l(5,a);break;case 1:if(Fs(n,a),l&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(_){mt(a,a.return,_)}else{var f=ja(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(_){mt(a,a.return,_)}}l&64&&fv(a),l&512&&Kl(a,a.return);break;case 3:if(Fs(n,a),l&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{ny(n,s)}catch(_){mt(a,a.return,_)}}break;case 27:s===null&&l&4&&pv(a);case 26:case 5:Fs(n,a),s===null&&l&4&&mv(a),l&512&&Kl(a,a.return);break;case 12:Fs(n,a);break;case 31:Fs(n,a),l&4&&Ev(n,a);break;case 13:Fs(n,a),l&4&&Tv(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=Gx.bind(null,a),hS(n,a))));break;case 22:if(l=a.memoizedState!==null||qs,!l){s=s!==null&&s.memoizedState!==null||rn,f=qs;var d=rn;qs=l,(rn=s)&&!d?Gs(n,a,(a.subtreeFlags&8772)!==0):Fs(n,a),qs=f,rn=d}break;case 30:break;default:Fs(n,a)}}function _v(n){var s=n.alternate;s!==null&&(n.alternate=null,_v(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&or(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Mt=null,ai=!1;function Hs(n,s,a){for(a=a.child;a!==null;)bv(n,s,a),a=a.sibling}function bv(n,s,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Kn,a)}catch{}switch(a.tag){case 26:rn||vs(a,s),Hs(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:rn||vs(a,s);var l=Mt,f=ai;Mr(a.type)&&(Mt=a.stateNode,ai=!1),Hs(n,s,a),nc(a.stateNode),Mt=l,ai=f;break;case 5:rn||vs(a,s);case 6:if(l=Mt,f=ai,Mt=null,Hs(n,s,a),Mt=l,ai=f,Mt!==null)if(ai)try{(Mt.nodeType===9?Mt.body:Mt.nodeName==="HTML"?Mt.ownerDocument.body:Mt).removeChild(a.stateNode)}catch(d){mt(a,s,d)}else try{Mt.removeChild(a.stateNode)}catch(d){mt(a,s,d)}break;case 18:Mt!==null&&(ai?(n=Mt,f_(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),jo(n)):f_(Mt,a.stateNode));break;case 4:l=Mt,f=ai,Mt=a.stateNode.containerInfo,ai=!0,Hs(n,s,a),Mt=l,ai=f;break;case 0:case 11:case 14:case 15:Rr(2,a,s),rn||Rr(4,a,s),Hs(n,s,a);break;case 1:rn||(vs(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&dv(a,s,l)),Hs(n,s,a);break;case 21:Hs(n,s,a);break;case 22:rn=(l=rn)||a.memoizedState!==null,Hs(n,s,a),rn=l;break;default:Hs(n,s,a)}}function Ev(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{jo(n)}catch(a){mt(s,s.return,a)}}}function Tv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{jo(n)}catch(a){mt(s,s.return,a)}}function jx(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new yv),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new yv),s;default:throw Error(r(435,n.tag))}}function ah(n,s){var a=jx(n);s.forEach(function(l){if(!a.has(l)){a.add(l);var f=$x.bind(null,n,l);l.then(f,f)}})}function oi(n,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,_=s,x=_;e:for(;x!==null;){switch(x.tag){case 27:if(Mr(x.type)){Mt=x.stateNode,ai=!1;break e}break;case 5:Mt=x.stateNode,ai=!1;break e;case 3:case 4:Mt=x.stateNode.containerInfo,ai=!0;break e}x=x.return}if(Mt===null)throw Error(r(160));bv(d,_,f),Mt=null,ai=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)wv(s,n),s=s.sibling}var es=null;function wv(n,s){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:oi(s,n),li(n),l&4&&(Rr(3,n,n.return),$l(3,n),Rr(5,n,n.return));break;case 1:oi(s,n),li(n),l&512&&(rn||a===null||vs(a,a.return)),l&64&&qs&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=es;if(oi(s,n),li(n),l&512&&(rn||a===null||vs(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Si]||d[Pt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Nn(d,l,a),d[Pt]=n,Ut(d),l=d;break e;case"link":var _=w_("link","href",f).get(l+(a.href||""));if(_){for(var x=0;x<_.length;x++)if(d=_[x],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(x,1);break t}}d=f.createElement(l),Nn(d,l,a),f.head.appendChild(d);break;case"meta":if(_=w_("meta","content",f).get(l+(a.content||""))){for(x=0;x<_.length;x++)if(d=_[x],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(x,1);break t}}d=f.createElement(l),Nn(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[Pt]=n,Ut(d),l=d}n.stateNode=l}else x_(f,n.type,n.stateNode);else n.stateNode=T_(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?x_(f,n.type,n.stateNode):T_(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&fm(n,n.memoizedProps,a.memoizedProps)}break;case 27:oi(s,n),li(n),l&512&&(rn||a===null||vs(a,a.return)),a!==null&&l&4&&fm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(oi(s,n),li(n),l&512&&(rn||a===null||vs(a,a.return)),n.flags&32){f=n.stateNode;try{ri(f,"")}catch(Te){mt(n,n.return,Te)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,fm(n,f,a!==null?a.memoizedProps:f)),l&1024&&(gm=!0);break;case 6:if(oi(s,n),li(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(Te){mt(n,n.return,Te)}}break;case 3:if(Th=null,f=es,es=bh(s.containerInfo),oi(s,n),es=f,li(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{jo(s.containerInfo)}catch(Te){mt(n,n.return,Te)}gm&&(gm=!1,xv(n));break;case 4:l=es,es=bh(n.stateNode.containerInfo),oi(s,n),li(n),es=l;break;case 12:oi(s,n),li(n);break;case 31:oi(s,n),li(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,ah(n,l)));break;case 13:oi(s,n),li(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(lh=Jt()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,ah(n,l)));break;case 22:f=n.memoizedState!==null;var P=a!==null&&a.memoizedState!==null,Y=qs,re=rn;if(qs=Y||f,rn=re||P,oi(s,n),rn=re,qs=Y,li(n),l&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||P||qs||rn||La(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){P=a=s;try{if(d=P.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{x=P.stateNode;var le=P.memoizedProps.style,J=le!=null&&le.hasOwnProperty("display")?le.display:null;x.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(Te){mt(P,P.return,Te)}}}else if(s.tag===6){if(a===null){P=s;try{P.stateNode.nodeValue=f?"":P.memoizedProps}catch(Te){mt(P,P.return,Te)}}}else if(s.tag===18){if(a===null){P=s;try{var ie=P.stateNode;f?d_(ie,!0):d_(P.stateNode,!1)}catch(Te){mt(P,P.return,Te)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,ah(n,a))));break;case 19:oi(s,n),li(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,ah(n,l)));break;case 30:break;case 21:break;default:oi(s,n),li(n)}}function li(n){var s=n.flags;if(s&2){try{for(var a,l=n.return;l!==null;){if(gv(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=dm(n);rh(n,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(ri(_,""),a.flags&=-33);var x=dm(n);rh(n,x,_);break;case 3:case 4:var P=a.stateNode.containerInfo,Y=dm(n);mm(n,Y,P);break;default:throw Error(r(161))}}catch(re){mt(n,n.return,re)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function xv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;xv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Fs(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)vv(n,s.alternate,s),s=s.sibling}function La(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Rr(4,s,s.return),La(s);break;case 1:vs(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&dv(s,s.return,a),La(s);break;case 27:nc(s.stateNode);case 26:case 5:vs(s,s.return),La(s);break;case 22:s.memoizedState===null&&La(s);break;case 30:La(s);break;default:La(s)}n=n.sibling}}function Gs(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,f=n,d=s,_=d.flags;switch(d.tag){case 0:case 11:case 15:Gs(f,d,a),$l(4,d);break;case 1:if(Gs(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Y){mt(l,l.return,Y)}if(l=d,f=l.updateQueue,f!==null){var x=l.stateNode;try{var P=f.shared.hiddenCallbacks;if(P!==null)for(f.shared.hiddenCallbacks=null,f=0;f<P.length;f++)ty(P[f],x)}catch(Y){mt(l,l.return,Y)}}a&&_&64&&fv(d),Kl(d,d.return);break;case 27:pv(d);case 26:case 5:Gs(f,d,a),a&&l===null&&_&4&&mv(d),Kl(d,d.return);break;case 12:Gs(f,d,a);break;case 31:Gs(f,d,a),a&&_&4&&Ev(f,d);break;case 13:Gs(f,d,a),a&&_&4&&Tv(f,d);break;case 22:d.memoizedState===null&&Gs(f,d,a),Kl(d,d.return);break;case 30:break;default:Gs(f,d,a)}s=s.sibling}}function pm(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&kl(a))}function ym(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&kl(n))}function ts(n,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Sv(n,s,a,l),s=s.sibling}function Sv(n,s,a,l){var f=s.flags;switch(s.tag){case 0:case 11:case 15:ts(n,s,a,l),f&2048&&$l(9,s);break;case 1:ts(n,s,a,l);break;case 3:ts(n,s,a,l),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&kl(n)));break;case 12:if(f&2048){ts(n,s,a,l),n=s.stateNode;try{var d=s.memoizedProps,_=d.id,x=d.onPostCommit;typeof x=="function"&&x(_,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(P){mt(s,s.return,P)}}else ts(n,s,a,l);break;case 31:ts(n,s,a,l);break;case 13:ts(n,s,a,l);break;case 23:break;case 22:d=s.stateNode,_=s.alternate,s.memoizedState!==null?d._visibility&2?ts(n,s,a,l):Ql(n,s):d._visibility&2?ts(n,s,a,l):(d._visibility|=2,Ao(n,s,a,l,(s.subtreeFlags&10256)!==0||!1)),f&2048&&pm(_,s);break;case 24:ts(n,s,a,l),f&2048&&ym(s.alternate,s);break;default:ts(n,s,a,l)}}function Ao(n,s,a,l,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var d=n,_=s,x=a,P=l,Y=_.flags;switch(_.tag){case 0:case 11:case 15:Ao(d,_,x,P,f),$l(8,_);break;case 23:break;case 22:var re=_.stateNode;_.memoizedState!==null?re._visibility&2?Ao(d,_,x,P,f):Ql(d,_):(re._visibility|=2,Ao(d,_,x,P,f)),f&&Y&2048&&pm(_.alternate,_);break;case 24:Ao(d,_,x,P,f),f&&Y&2048&&ym(_.alternate,_);break;default:Ao(d,_,x,P,f)}s=s.sibling}}function Ql(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,l=s,f=l.flags;switch(l.tag){case 22:Ql(a,l),f&2048&&pm(l.alternate,l);break;case 24:Ql(a,l),f&2048&&ym(l.alternate,l);break;default:Ql(a,l)}s=s.sibling}}var Yl=8192;function Ro(n,s,a){if(n.subtreeFlags&Yl)for(n=n.child;n!==null;)Av(n,s,a),n=n.sibling}function Av(n,s,a){switch(n.tag){case 26:Ro(n,s,a),n.flags&Yl&&n.memoizedState!==null&&wS(a,es,n.memoizedState,n.memoizedProps);break;case 5:Ro(n,s,a);break;case 3:case 4:var l=es;es=bh(n.stateNode.containerInfo),Ro(n,s,a),es=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=Yl,Yl=16777216,Ro(n,s,a),Yl=l):Ro(n,s,a));break;default:Ro(n,s,a)}}function Rv(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Xl(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];vn=l,Nv(l,n)}Rv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Cv(n),n=n.sibling}function Cv(n){switch(n.tag){case 0:case 11:case 15:Xl(n),n.flags&2048&&Rr(9,n,n.return);break;case 3:Xl(n);break;case 12:Xl(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,oh(n)):Xl(n);break;default:Xl(n)}}function oh(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];vn=l,Nv(l,n)}Rv(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Rr(8,s,s.return),oh(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,oh(s));break;default:oh(s)}n=n.sibling}}function Nv(n,s){for(;vn!==null;){var a=vn;switch(a.tag){case 0:case 11:case 15:Rr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:kl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,vn=l;else e:for(a=n;vn!==null;){l=vn;var f=l.sibling,d=l.return;if(_v(l),l===a){vn=null;break e}if(f!==null){f.return=d,vn=f;break e}vn=d}}}var Lx={getCacheForType:function(n){var s=Rn(tn),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a},cacheSignal:function(){return Rn(tn).controller.signal}},Ux=typeof WeakMap=="function"?WeakMap:Map,ut=0,wt=null,$e=null,Ye=0,dt=0,yi=null,Cr=!1,Co=!1,vm=!1,$s=0,Bt=0,Nr=0,Ua=0,_m=0,vi=0,No=0,Wl=null,ci=null,bm=!1,lh=0,Iv=0,ch=1/0,uh=null,Ir=null,fn=0,Dr=null,Io=null,Ks=0,Em=0,Tm=null,Dv=null,Jl=0,wm=null;function _i(){return(ut&2)!==0&&Ye!==0?Ye&-Ye:ee.T!==null?Nm():Ot()}function Ov(){if(vi===0)if((Ye&536870912)===0||tt){var n=Ki;Ki<<=1,(Ki&3932160)===0&&(Ki=262144),vi=n}else vi=536870912;return n=gi.current,n!==null&&(n.flags|=32),vi}function ui(n,s,a){(n===wt&&(dt===2||dt===9)||n.cancelPendingCommit!==null)&&(Do(n,0),Or(n,Ye,vi,!1)),Z(n,a),((ut&2)===0||n!==wt)&&(n===wt&&((ut&2)===0&&(Ua|=a),Bt===4&&Or(n,Ye,vi,!1)),_s(n))}function kv(n,s,a){if((ut&6)!==0)throw Error(r(327));var l=!a&&(s&127)===0&&(s&n.expiredLanes)===0||Lt(n,s),f=l?qx(n,s):Sm(n,s,!0),d=l;do{if(f===0){Co&&!l&&Or(n,s,0,!1);break}else{if(a=n.current.alternate,d&&!zx(a)){f=Sm(n,s,!1),d=!1;continue}if(f===2){if(d=s,n.errorRecoveryDisabledLanes&d)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var x=n;f=Wl;var P=x.current.memoizedState.isDehydrated;if(P&&(Do(x,_).flags|=256),_=Sm(x,_,!1),_!==2){if(vm&&!P){x.errorRecoveryDisabledLanes|=d,Ua|=d,f=4;break e}d=ci,ci=f,d!==null&&(ci===null?ci=d:ci.push.apply(ci,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){Do(n,0),Or(n,s,0,!0);break}e:{switch(l=n,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Or(l,s,vi,!Cr);break e;case 2:ci=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=lh+300-Jt(),10<f)){if(Or(l,s,vi,!Cr),Rt(l,0,!0)!==0)break e;Ks=s,l.timeoutHandle=u_(Mv.bind(null,l,a,ci,uh,bm,s,vi,Ua,No,Cr,d,"Throttled",-0,0),f);break e}Mv(l,a,ci,uh,bm,s,vi,Ua,No,Cr,d,null,-0,0)}}break}while(!0);_s(n)}function Mv(n,s,a,l,f,d,_,x,P,Y,re,le,J,ie){if(n.timeoutHandle=-1,le=s.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qi},Av(s,d,le);var Te=(d&62914560)===d?lh-Jt():(d&4194048)===d?Iv-Jt():0;if(Te=xS(le,Te),Te!==null){Ks=d,n.cancelPendingCommit=Te(qv.bind(null,n,s,d,a,l,f,_,x,P,re,le,null,J,ie)),Or(n,d,_,!Y);return}}qv(n,s,d,a,l,f,_,x,P)}function zx(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!di(d(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Or(n,s,a,l){s&=~_m,s&=~Ua,n.suspendedLanes|=s,n.pingedLanes&=~s,l&&(n.warmLanes|=s),l=n.expirationTimes;for(var f=s;0<f;){var d=31-St(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&pt(n,a,s)}function hh(){return(ut&6)===0?(Zl(0),!1):!0}function xm(){if($e!==null){if(dt===0)var n=$e.return;else n=$e,Ps=Ia=null,zd(n),Eo=null,Vl=0,n=$e;for(;n!==null;)hv(n.alternate,n),n=n.return;$e=null}}function Do(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,aS(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Ks=0,xm(),wt=n,$e=a=Ms(n.current,null),Ye=s,dt=0,yi=null,Cr=!1,Co=Lt(n,s),vm=!1,No=vi=_m=Ua=Nr=Bt=0,ci=Wl=null,bm=!1,(s&8)!==0&&(s|=s&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=s;0<l;){var f=31-St(l),d=1<<f;s|=n[f],l&=~d}return $s=s,Ou(),a}function Vv(n,s){qe=null,ee.H=Hl,s===bo||s===zu?(s=W0(),dt=3):s===Cd?(s=W0(),dt=4):dt=s===nm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,yi=s,$e===null&&(Bt=1,eh(n,Mi(s,n.current)))}function Pv(){var n=gi.current;return n===null?!0:(Ye&4194048)===Ye?Li===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?n===Li:!1}function jv(){var n=ee.H;return ee.H=Hl,n===null?Hl:n}function Lv(){var n=ee.A;return ee.A=Lx,n}function fh(){Bt=4,Cr||(Ye&4194048)!==Ye&&gi.current!==null||(Co=!0),(Nr&134217727)===0&&(Ua&134217727)===0||wt===null||Or(wt,Ye,vi,!1)}function Sm(n,s,a){var l=ut;ut|=2;var f=jv(),d=Lv();(wt!==n||Ye!==s)&&(uh=null,Do(n,s)),s=!1;var _=Bt;e:do try{if(dt!==0&&$e!==null){var x=$e,P=yi;switch(dt){case 8:xm(),_=6;break e;case 3:case 2:case 9:case 6:gi.current===null&&(s=!0);var Y=dt;if(dt=0,yi=null,Oo(n,x,P,Y),a&&Co){_=0;break e}break;default:Y=dt,dt=0,yi=null,Oo(n,x,P,Y)}}Bx(),_=Bt;break}catch(re){Vv(n,re)}while(!0);return s&&n.shellSuspendCounter++,Ps=Ia=null,ut=l,ee.H=f,ee.A=d,$e===null&&(wt=null,Ye=0,Ou()),_}function Bx(){for(;$e!==null;)Uv($e)}function qx(n,s){var a=ut;ut|=2;var l=jv(),f=Lv();wt!==n||Ye!==s?(uh=null,ch=Jt()+500,Do(n,s)):Co=Lt(n,s);e:do try{if(dt!==0&&$e!==null){s=$e;var d=yi;t:switch(dt){case 1:dt=0,yi=null,Oo(n,s,d,1);break;case 2:case 9:if(Y0(d)){dt=0,yi=null,zv(s);break}s=function(){dt!==2&&dt!==9||wt!==n||(dt=7),_s(n)},d.then(s,s);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:Y0(d)?(dt=0,yi=null,zv(s)):(dt=0,yi=null,Oo(n,s,d,7));break;case 5:var _=null;switch($e.tag){case 26:_=$e.memoizedState;case 5:case 27:var x=$e;if(_?S_(_):x.stateNode.complete){dt=0,yi=null;var P=x.sibling;if(P!==null)$e=P;else{var Y=x.return;Y!==null?($e=Y,dh(Y)):$e=null}break t}}dt=0,yi=null,Oo(n,s,d,5);break;case 6:dt=0,yi=null,Oo(n,s,d,6);break;case 8:xm(),Bt=6;break e;default:throw Error(r(462))}}Hx();break}catch(re){Vv(n,re)}while(!0);return Ps=Ia=null,ee.H=l,ee.A=f,ut=a,$e!==null?0:(wt=null,Ye=0,Ou(),Bt)}function Hx(){for(;$e!==null&&!os();)Uv($e)}function Uv(n){var s=cv(n.alternate,n,$s);n.memoizedProps=n.pendingProps,s===null?dh(n):$e=s}function zv(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=iv(a,s,s.pendingProps,s.type,void 0,Ye);break;case 11:s=iv(a,s,s.pendingProps,s.type.render,s.ref,Ye);break;case 5:zd(s);default:hv(a,s),s=$e=L0(s,$s),s=cv(a,s,$s)}n.memoizedProps=n.pendingProps,s===null?dh(n):$e=s}function Oo(n,s,a,l){Ps=Ia=null,zd(s),Eo=null,Vl=0;var f=s.return;try{if(Dx(n,f,s,a,Ye)){Bt=1,eh(n,Mi(a,n.current)),$e=null;return}}catch(d){if(f!==null)throw $e=f,d;Bt=1,eh(n,Mi(a,n.current)),$e=null;return}s.flags&32768?(tt||l===1?n=!0:Co||(Ye&536870912)!==0?n=!1:(Cr=n=!0,(l===2||l===9||l===3||l===6)&&(l=gi.current,l!==null&&l.tag===13&&(l.flags|=16384))),Bv(s,n)):dh(s)}function dh(n){var s=n;do{if((s.flags&32768)!==0){Bv(s,Cr);return}n=s.return;var a=Mx(s.alternate,s,$s);if(a!==null){$e=a;return}if(s=s.sibling,s!==null){$e=s;return}$e=s=n}while(s!==null);Bt===0&&(Bt=5)}function Bv(n,s){do{var a=Vx(n.alternate,n);if(a!==null){a.flags&=32767,$e=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){$e=n;return}$e=n=a}while(n!==null);Bt=6,$e=null}function qv(n,s,a,l,f,d,_,x,P){n.cancelPendingCommit=null;do mh();while(fn!==0);if((ut&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(d=s.lanes|s.childLanes,d|=dd,gt(n,a,d,_,x,P),n===wt&&($e=wt=null,Ye=0),Io=s,Dr=n,Ks=a,Em=d,Tm=f,Dv=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Kx(xn,function(){return Kv(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=ee.T,ee.T=null,f=he.p,he.p=2,_=ut,ut|=4;try{Px(n,s,a)}finally{ut=_,he.p=f,ee.T=l}}fn=1,Hv(),Fv(),Gv()}}function Hv(){if(fn===1){fn=0;var n=Dr,s=Io,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=ee.T,ee.T=null;var l=he.p;he.p=2;var f=ut;ut|=4;try{wv(s,n);var d=jm,_=N0(n.containerInfo),x=d.focusedElem,P=d.selectionRange;if(_!==x&&x&&x.ownerDocument&&C0(x.ownerDocument.documentElement,x)){if(P!==null&&ld(x)){var Y=P.start,re=P.end;if(re===void 0&&(re=Y),"selectionStart"in x)x.selectionStart=Y,x.selectionEnd=Math.min(re,x.value.length);else{var le=x.ownerDocument||document,J=le&&le.defaultView||window;if(J.getSelection){var ie=J.getSelection(),Te=x.textContent.length,Ie=Math.min(P.start,Te),Et=P.end===void 0?Ie:Math.min(P.end,Te);!ie.extend&&Ie>Et&&(_=Et,Et=Ie,Ie=_);var H=R0(x,Ie),U=R0(x,Et);if(H&&U&&(ie.rangeCount!==1||ie.anchorNode!==H.node||ie.anchorOffset!==H.offset||ie.focusNode!==U.node||ie.focusOffset!==U.offset)){var Q=le.createRange();Q.setStart(H.node,H.offset),ie.removeAllRanges(),Ie>Et?(ie.addRange(Q),ie.extend(U.node,U.offset)):(Q.setEnd(U.node,U.offset),ie.addRange(Q))}}}}for(le=[],ie=x;ie=ie.parentNode;)ie.nodeType===1&&le.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<le.length;x++){var ae=le[x];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Ah=!!Pm,jm=Pm=null}finally{ut=f,he.p=l,ee.T=a}}n.current=s,fn=2}}function Fv(){if(fn===2){fn=0;var n=Dr,s=Io,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=ee.T,ee.T=null;var l=he.p;he.p=2;var f=ut;ut|=4;try{vv(n,s.alternate,s)}finally{ut=f,he.p=l,ee.T=a}}fn=3}}function Gv(){if(fn===4||fn===3){fn=0,ls();var n=Dr,s=Io,a=Ks,l=Dv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?fn=5:(fn=0,Io=Dr=null,$v(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Ir=null),it(a),s=s.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Kn,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=ee.T,f=he.p,he.p=2,ee.T=null;try{for(var d=n.onRecoverableError,_=0;_<l.length;_++){var x=l[_];d(x.value,{componentStack:x.stack})}}finally{ee.T=s,he.p=f}}(Ks&3)!==0&&mh(),_s(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===wm?Jl++:(Jl=0,wm=n):Jl=0,Zl(0)}}function $v(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,kl(s)))}function mh(){return Hv(),Fv(),Gv(),Kv()}function Kv(){if(fn!==5)return!1;var n=Dr,s=Em;Em=0;var a=it(Ks),l=ee.T,f=he.p;try{he.p=32>a?32:a,ee.T=null,a=Tm,Tm=null;var d=Dr,_=Ks;if(fn=0,Io=Dr=null,Ks=0,(ut&6)!==0)throw Error(r(331));var x=ut;if(ut|=4,Cv(d.current),Sv(d,d.current,_,a),ut=x,Zl(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Kn,d)}catch{}return!0}finally{he.p=f,ee.T=l,$v(n,s)}}function Qv(n,s,a){s=Mi(a,s),s=tm(n.stateNode,s,2),n=xr(n,s,2),n!==null&&(Z(n,2),_s(n))}function mt(n,s,a){if(n.tag===3)Qv(n,n,a);else for(;s!==null;){if(s.tag===3){Qv(s,n,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ir===null||!Ir.has(l))){n=Mi(a,n),a=Yy(2),l=xr(s,a,2),l!==null&&(Xy(a,l,s,n),Z(l,2),_s(l));break}}s=s.return}}function Am(n,s,a){var l=n.pingCache;if(l===null){l=n.pingCache=new Ux;var f=new Set;l.set(s,f)}else f=l.get(s),f===void 0&&(f=new Set,l.set(s,f));f.has(a)||(vm=!0,f.add(a),n=Fx.bind(null,n,s,a),s.then(n,n))}function Fx(n,s,a){var l=n.pingCache;l!==null&&l.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,wt===n&&(Ye&a)===a&&(Bt===4||Bt===3&&(Ye&62914560)===Ye&&300>Jt()-lh?(ut&2)===0&&Do(n,0):_m|=a,No===Ye&&(No=0)),_s(n)}function Yv(n,s){s===0&&(s=Zt()),n=Ra(n,s),n!==null&&(Z(n,s),_s(n))}function Gx(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Yv(n,a)}function $x(n,s){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),Yv(n,a)}function Kx(n,s){return ft(n,s)}var gh=null,ko=null,Rm=!1,ph=!1,Cm=!1,kr=0;function _s(n){n!==ko&&n.next===null&&(ko===null?gh=ko=n:ko=ko.next=n),ph=!0,Rm||(Rm=!0,Yx())}function Zl(n,s){if(!Cm&&ph){Cm=!0;do for(var a=!1,l=gh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,x=l.pingedLanes;d=(1<<31-St(42|n)+1)-1,d&=f&~(_&~x),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Zv(l,d))}else d=Ye,d=Rt(l,l===wt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Lt(l,d)||(a=!0,Zv(l,d));l=l.next}while(a);Cm=!1}}function Qx(){Xv()}function Xv(){ph=Rm=!1;var n=0;kr!==0&&rS()&&(n=kr);for(var s=Jt(),a=null,l=gh;l!==null;){var f=l.next,d=Wv(l,s);d===0?(l.next=null,a===null?gh=f:a.next=f,f===null&&(ko=a)):(a=l,(n!==0||(d&3)!==0)&&(ph=!0)),l=f}fn!==0&&fn!==5||Zl(n),kr!==0&&(kr=0)}function Wv(n,s){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var _=31-St(d),x=1<<_,P=f[_];P===-1?((x&a)===0||(x&l)!==0)&&(f[_]=yn(x,s)):P<=s&&(n.expiredLanes|=x),d&=~x}if(s=wt,a=Ye,a=Rt(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===s&&(dt===2||dt===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Fn(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Lt(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(l!==null&&Fn(l),it(a)){case 2:case 8:a=Gn;break;case 32:a=xn;break;case 268435456:a=Cs;break;default:a=xn}return l=Jv.bind(null,n),a=ft(a,l),n.callbackPriority=s,n.callbackNode=a,s}return l!==null&&l!==null&&Fn(l),n.callbackPriority=2,n.callbackNode=null,2}function Jv(n,s){if(fn!==0&&fn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(mh()&&n.callbackNode!==a)return null;var l=Ye;return l=Rt(n,n===wt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(kv(n,l,s),Wv(n,Jt()),n.callbackNode!=null&&n.callbackNode===a?Jv.bind(null,n):null)}function Zv(n,s){if(mh())return null;kv(n,s,!0)}function Yx(){oS(function(){(ut&6)!==0?ft(Rs,Qx):Xv()})}function Nm(){if(kr===0){var n=vo;n===0&&(n=ni,ni<<=1,(ni&261888)===0&&(ni=256)),kr=n}return kr}function e_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:no(""+n)}function t_(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function Xx(n,s,a,l,f){if(s==="submit"&&a&&a.stateNode===f){var d=e_((f[$t]||null).action),_=l.submitter;_&&(s=(s=_[$t]||null)?e_(s.formAction):_.getAttribute("formAction"),s!==null&&(d=s,_=null));var x=new fs("action","action",null,l,f);n.push({event:x,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(kr!==0){var P=_?t_(f,_):new FormData(f);Yd(a,{pending:!0,data:P,method:f.method,action:d},null,P)}}else typeof d=="function"&&(x.preventDefault(),P=_?t_(f,_):new FormData(f),Yd(a,{pending:!0,data:P,method:f.method,action:d},d,P))},currentTarget:f}]})}}for(var Im=0;Im<fd.length;Im++){var Dm=fd[Im],Wx=Dm.toLowerCase(),Jx=Dm[0].toUpperCase()+Dm.slice(1);Zi(Wx,"on"+Jx)}Zi(O0,"onAnimationEnd"),Zi(k0,"onAnimationIteration"),Zi(M0,"onAnimationStart"),Zi("dblclick","onDoubleClick"),Zi("focusin","onFocus"),Zi("focusout","onBlur"),Zi(mx,"onTransitionRun"),Zi(gx,"onTransitionStart"),Zi(px,"onTransitionCancel"),Zi(V0,"onTransitionEnd"),Ci("onMouseEnter",["mouseout","mouseover"]),Ci("onMouseLeave",["mouseout","mouseover"]),Ci("onPointerEnter",["pointerout","pointerover"]),Ci("onPointerLeave",["pointerout","pointerover"]),ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ec="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ec));function n_(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var d=void 0;if(s)for(var _=l.length-1;0<=_;_--){var x=l[_],P=x.instance,Y=x.currentTarget;if(x=x.listener,P!==d&&f.isPropagationStopped())break e;d=x,f.currentTarget=Y;try{d(f)}catch(re){Du(re)}f.currentTarget=null,d=P}else for(_=0;_<l.length;_++){if(x=l[_],P=x.instance,Y=x.currentTarget,x=x.listener,P!==d&&f.isPropagationStopped())break e;d=x,f.currentTarget=Y;try{d(f)}catch(re){Du(re)}f.currentTarget=null,d=P}}}}function Ke(n,s){var a=s[ar];a===void 0&&(a=s[ar]=new Set);var l=n+"__bubble";a.has(l)||(i_(s,n,2,!1),a.add(l))}function Om(n,s,a){var l=0;s&&(l|=4),i_(a,n,l,s)}var yh="_reactListening"+Math.random().toString(36).slice(2);function km(n){if(!n[yh]){n[yh]=!0,ma.forEach(function(a){a!=="selectionchange"&&(Zx.has(a)||Om(a,!1,n),Om(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[yh]||(s[yh]=!0,Om("selectionchange",!1,s))}}function i_(n,s,a,l){switch(O_(s)){case 2:var f=RS;break;case 8:f=CS;break;default:f=Qm}a=f.bind(null,s,a,n),f=void 0,!_a||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function Mm(n,s,a,l,f){var d=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var x=l.stateNode.containerInfo;if(x===f)break;if(_===4)for(_=l.return;_!==null;){var P=_.tag;if((P===3||P===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;x!==null;){if(_=Ai(x),_===null)return;if(P=_.tag,P===5||P===6||P===26||P===27){l=d=_;continue e}x=x.parentNode}}l=l.return}mr(function(){var Y=d,re=Ii(a),le=[];e:{var J=P0.get(n);if(J!==void 0){var ie=fs,Te=n;switch(n){case"keypress":if(Ea(a)===0)break e;case"keydown":case"keyup":ie=Cu;break;case"focusin":Te="focus",ie=wa;break;case"focusout":Te="blur",ie=wa;break;case"beforeblur":case"afterblur":ie=wa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Sl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=_u;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=y;break;case O0:case k0:case M0:ie=Eu;break;case V0:ie=R;break;case"scroll":case"scrollend":ie=xl;break;case"wheel":ie=ne;break;case"copy":case"cut":case"paste":ie=Tu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=ks;break;case"toggle":case"beforetoggle":ie=Be}var Ie=(s&4)!==0,Et=!Ie&&(n==="scroll"||n==="scrollend"),H=Ie?J!==null?J+"Capture":null:J;Ie=[];for(var U=Y,Q;U!==null;){var ae=U;if(Q=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Q===null||H===null||(ae=Yi(U,H),ae!=null&&Ie.push(tc(U,ae,Q))),Et)break;U=U.return}0<Ie.length&&(J=new ie(J,Te,null,a,re),le.push({event:J,listeners:Ie}))}}if((s&7)===0){e:{if(J=n==="mouseover"||n==="pointerover",ie=n==="mouseout"||n==="pointerout",J&&a!==El&&(Te=a.relatedTarget||a.fromElement)&&(Ai(Te)||Te[Ee]))break e;if((ie||J)&&(J=re.window===re?re:(J=re.ownerDocument)?J.defaultView||J.parentWindow:window,ie?(Te=a.relatedTarget||a.toElement,ie=Y,Te=Te?Ai(Te):null,Te!==null&&(Et=c(Te),Ie=Te.tag,Te!==Et||Ie!==5&&Ie!==27&&Ie!==6)&&(Te=null)):(ie=null,Te=Y),ie!==Te)){if(Ie=Sl,ae="onMouseLeave",H="onMouseEnter",U="mouse",(n==="pointerout"||n==="pointerover")&&(Ie=ks,ae="onPointerLeave",H="onPointerEnter",U="pointer"),Et=ie==null?J:Ln(ie),Q=Te==null?J:Ln(Te),J=new Ie(ae,U+"leave",ie,a,re),J.target=Et,J.relatedTarget=Q,ae=null,Ai(re)===Y&&(Ie=new Ie(H,U+"enter",Te,a,re),Ie.target=Q,Ie.relatedTarget=Et,ae=Ie),Et=ae,ie&&Te)t:{for(Ie=eS,H=ie,U=Te,Q=0,ae=H;ae;ae=Ie(ae))Q++;ae=0;for(var Ce=U;Ce;Ce=Ie(Ce))ae++;for(;0<Q-ae;)H=Ie(H),Q--;for(;0<ae-Q;)U=Ie(U),ae--;for(;Q--;){if(H===U||U!==null&&H===U.alternate){Ie=H;break t}H=Ie(H),U=Ie(U)}Ie=null}else Ie=null;ie!==null&&s_(le,J,ie,Ie,!1),Te!==null&&Et!==null&&s_(le,Et,Te,Ie,!0)}}e:{if(J=Y?Ln(Y):window,ie=J.nodeName&&J.nodeName.toLowerCase(),ie==="select"||ie==="input"&&J.type==="file")var ot=E0;else if(_0(J))if(T0)ot=hx;else{ot=cx;var we=lx}else ie=J.nodeName,!ie||ie.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Y&&to(Y.elementType)&&(ot=E0):ot=ux;if(ot&&(ot=ot(n,Y))){b0(le,ot,a,re);break e}we&&we(n,J,Y),n==="focusout"&&Y&&J.type==="number"&&Y.memoizedProps.value!=null&&vl(J,"number",J.value)}switch(we=Y?Ln(Y):window,n){case"focusin":(_0(we)||we.contentEditable==="true")&&(co=we,cd=Y,Il=null);break;case"focusout":Il=cd=co=null;break;case"mousedown":ud=!0;break;case"contextmenu":case"mouseup":case"dragend":ud=!1,I0(le,a,re);break;case"selectionchange":if(dx)break;case"keydown":case"keyup":I0(le,a,re)}var He;if(ct)e:{switch(n){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else lo?xa(n,a)&&(Xe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Xe="onCompositionStart");Xe&&(gs&&a.locale!=="ko"&&(lo||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&lo&&(He=wl()):(hs=re,Tl="value"in hs?hs.value:hs.textContent,lo=!0)),we=vh(Y,Xe),0<we.length&&(Xe=new ms(Xe,n,null,a,re),le.push({event:Xe,listeners:we}),He?Xe.data=He:(He=oo(a),He!==null&&(Xe.data=He)))),(He=Oi?sx(n,a):rx(n,a))&&(Xe=vh(Y,"onBeforeInput"),0<Xe.length&&(we=new ms("onBeforeInput","beforeinput",null,a,re),le.push({event:we,listeners:Xe}),we.data=He)),Xx(le,n,Y,a,re)}n_(le,s)})}function tc(n,s,a){return{instance:n,listener:s,currentTarget:a}}function vh(n,s){for(var a=s+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Yi(n,a),f!=null&&l.unshift(tc(n,f,d)),f=Yi(n,s),f!=null&&l.push(tc(n,f,d))),n.tag===3)return l;n=n.return}return[]}function eS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function s_(n,s,a,l,f){for(var d=s._reactName,_=[];a!==null&&a!==l;){var x=a,P=x.alternate,Y=x.stateNode;if(x=x.tag,P!==null&&P===l)break;x!==5&&x!==26&&x!==27||Y===null||(P=Y,f?(Y=Yi(a,d),Y!=null&&_.unshift(tc(a,Y,P))):f||(Y=Yi(a,d),Y!=null&&_.push(tc(a,Y,P)))),a=a.return}_.length!==0&&n.push({event:s,listeners:_})}var tS=/\r\n?/g,nS=/\u0000|\uFFFD/g;function r_(n){return(typeof n=="string"?n:""+n).replace(tS,`
`).replace(nS,"")}function a_(n,s){return s=r_(s),r_(n)===s}function bt(n,s,a,l,f,d){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||ri(n,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&ri(n,""+l);break;case"className":te(n,"class",l);break;case"tabIndex":te(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":te(n,a,l);break;case"style":bl(n,l,d);break;case"data":if(s!=="object"){te(n,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=no(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(s!=="input"&&bt(n,s,"name",f.name,f,null),bt(n,s,"formEncType",f.formEncType,f,null),bt(n,s,"formMethod",f.formMethod,f,null),bt(n,s,"formTarget",f.formTarget,f,null)):(bt(n,s,"encType",f.encType,f,null),bt(n,s,"method",f.method,f,null),bt(n,s,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=no(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Qi);break;case"onScroll":l!=null&&Ke("scroll",n);break;case"onScrollEnd":l!=null&&Ke("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=no(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Ke("beforetoggle",n),Ke("toggle",n),G(n,"popover",l);break;case"xlinkActuate":W(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":W(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":W(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":W(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":W(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":W(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":W(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":W(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":W(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":G(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=vu.get(a)||a,G(n,a,l))}}function Vm(n,s,a,l,f,d){switch(a){case"style":bl(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?ri(n,l):(typeof l=="number"||typeof l=="bigint")&&ri(n,""+l);break;case"onScroll":l!=null&&Ke("scroll",n);break;case"onScrollEnd":l!=null&&Ke("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Qi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),d=n[$t]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(s,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):G(n,a,l)}}}function Nn(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",n),Ke("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:bt(n,s,d,_,a,null)}}f&&bt(n,s,"srcSet",a.srcSet,a,null),l&&bt(n,s,"src",a.src,a,null);return;case"input":Ke("invalid",n);var x=d=_=f=null,P=null,Y=null;for(l in a)if(a.hasOwnProperty(l)){var re=a[l];if(re!=null)switch(l){case"name":f=re;break;case"type":_=re;break;case"checked":P=re;break;case"defaultChecked":Y=re;break;case"value":d=re;break;case"defaultValue":x=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,s));break;default:bt(n,s,l,re,a,null)}}gu(n,d,x,P,Y,_,f,!1);return;case"select":Ke("invalid",n),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(x=a[f],x!=null))switch(f){case"value":d=x;break;case"defaultValue":_=x;break;case"multiple":l=x;default:bt(n,s,f,x,a,null)}s=d,a=_,n.multiple=!!l,s!=null?ur(n,!!l,s,!1):a!=null&&ur(n,!!l,a,!0);return;case"textarea":Ke("invalid",n),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(x=a[_],x!=null))switch(_){case"value":l=x;break;case"defaultValue":f=x;break;case"children":d=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:bt(n,s,_,x,a,null)}hr(n,l,f,d);return;case"option":for(P in a)a.hasOwnProperty(P)&&(l=a[P],l!=null)&&(P==="selected"?n.selected=l&&typeof l!="function"&&typeof l!="symbol":bt(n,s,P,l,a,null));return;case"dialog":Ke("beforetoggle",n),Ke("toggle",n),Ke("cancel",n),Ke("close",n);break;case"iframe":case"object":Ke("load",n);break;case"video":case"audio":for(l=0;l<ec.length;l++)Ke(ec[l],n);break;case"image":Ke("error",n),Ke("load",n);break;case"details":Ke("toggle",n);break;case"embed":case"source":case"link":Ke("error",n),Ke("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(l=a[Y],l!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:bt(n,s,Y,l,a,null)}return;default:if(to(s)){for(re in a)a.hasOwnProperty(re)&&(l=a[re],l!==void 0&&Vm(n,s,re,l,a,void 0));return}}for(x in a)a.hasOwnProperty(x)&&(l=a[x],l!=null&&bt(n,s,x,l,a,null))}function iS(n,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,x=null,P=null,Y=null,re=null;for(ie in a){var le=a[ie];if(a.hasOwnProperty(ie)&&le!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":P=le;default:l.hasOwnProperty(ie)||bt(n,s,ie,null,l,le)}}for(var J in l){var ie=l[J];if(le=a[J],l.hasOwnProperty(J)&&(ie!=null||le!=null))switch(J){case"type":d=ie;break;case"name":f=ie;break;case"checked":Y=ie;break;case"defaultChecked":re=ie;break;case"value":_=ie;break;case"defaultValue":x=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,s));break;default:ie!==le&&bt(n,s,J,ie,l,le)}}eo(n,_,x,P,Y,re,d,f);return;case"select":ie=_=x=J=null;for(d in a)if(P=a[d],a.hasOwnProperty(d)&&P!=null)switch(d){case"value":break;case"multiple":ie=P;default:l.hasOwnProperty(d)||bt(n,s,d,null,l,P)}for(f in l)if(d=l[f],P=a[f],l.hasOwnProperty(f)&&(d!=null||P!=null))switch(f){case"value":J=d;break;case"defaultValue":x=d;break;case"multiple":_=d;default:d!==P&&bt(n,s,f,d,l,P)}s=x,a=_,l=ie,J!=null?ur(n,!!a,J,!1):!!l!=!!a&&(s!=null?ur(n,!!a,s,!0):ur(n,!!a,a?[]:"",!1));return;case"textarea":ie=J=null;for(x in a)if(f=a[x],a.hasOwnProperty(x)&&f!=null&&!l.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:bt(n,s,x,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":J=f;break;case"defaultValue":ie=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&bt(n,s,_,f,l,d)}pu(n,J,ie);return;case"option":for(var Te in a)J=a[Te],a.hasOwnProperty(Te)&&J!=null&&!l.hasOwnProperty(Te)&&(Te==="selected"?n.selected=!1:bt(n,s,Te,null,l,J));for(P in l)J=l[P],ie=a[P],l.hasOwnProperty(P)&&J!==ie&&(J!=null||ie!=null)&&(P==="selected"?n.selected=J&&typeof J!="function"&&typeof J!="symbol":bt(n,s,P,J,l,ie));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in a)J=a[Ie],a.hasOwnProperty(Ie)&&J!=null&&!l.hasOwnProperty(Ie)&&bt(n,s,Ie,null,l,J);for(Y in l)if(J=l[Y],ie=a[Y],l.hasOwnProperty(Y)&&J!==ie&&(J!=null||ie!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,s));break;default:bt(n,s,Y,J,l,ie)}return;default:if(to(s)){for(var Et in a)J=a[Et],a.hasOwnProperty(Et)&&J!==void 0&&!l.hasOwnProperty(Et)&&Vm(n,s,Et,void 0,l,J);for(re in l)J=l[re],ie=a[re],!l.hasOwnProperty(re)||J===ie||J===void 0&&ie===void 0||Vm(n,s,re,J,l,ie);return}}for(var H in a)J=a[H],a.hasOwnProperty(H)&&J!=null&&!l.hasOwnProperty(H)&&bt(n,s,H,null,l,J);for(le in l)J=l[le],ie=a[le],!l.hasOwnProperty(le)||J===ie||J==null&&ie==null||bt(n,s,le,J,l,ie)}function o_(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function sS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,x=f.duration;if(d&&x&&o_(_)){for(_=0,x=f.responseEnd,l+=1;l<a.length;l++){var P=a[l],Y=P.startTime;if(Y>x)break;var re=P.transferSize,le=P.initiatorType;re&&o_(le)&&(P=P.responseEnd,_+=re*(P<x?1:(x-Y)/(P-Y)))}if(--l,s+=8*(d+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Pm=null,jm=null;function _h(n){return n.nodeType===9?n:n.ownerDocument}function l_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function c_(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Lm(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Um=null;function rS(){var n=window.event;return n&&n.type==="popstate"?n===Um?!1:(Um=n,!0):(Um=null,!1)}var u_=typeof setTimeout=="function"?setTimeout:void 0,aS=typeof clearTimeout=="function"?clearTimeout:void 0,h_=typeof Promise=="function"?Promise:void 0,oS=typeof queueMicrotask=="function"?queueMicrotask:typeof h_<"u"?function(n){return h_.resolve(null).then(n).catch(lS)}:u_;function lS(n){setTimeout(function(){throw n})}function Mr(n){return n==="head"}function f_(n,s){var a=s,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),jo(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")nc(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,nc(a);for(var d=a.firstChild;d;){var _=d.nextSibling,x=d.nodeName;d[Si]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&nc(n.ownerDocument.body);a=f}while(a);jo(s)}function d_(n,s){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function zm(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":zm(a),or(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function cS(n,s,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Si])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=Ui(n.nextSibling),n===null)break}return null}function uS(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Ui(n.nextSibling),n===null))return null;return n}function m_(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Ui(n.nextSibling),n===null))return null;return n}function Bm(n){return n.data==="$?"||n.data==="$~"}function qm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function hS(n,s){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Ui(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Hm=null;function g_(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(s===0)return Ui(n.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}n=n.nextSibling}return null}function p_(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return n;s--}else a!=="/$"&&a!=="/&"||s++}n=n.previousSibling}return null}function y_(n,s,a){switch(s=_h(a),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function nc(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);or(n)}var zi=new Map,v_=new Set;function bh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Qs=he.d;he.d={f:fS,r:dS,D:mS,C:gS,L:pS,m:yS,X:_S,S:vS,M:bS};function fS(){var n=Qs.f(),s=hh();return n||s}function dS(n){var s=Qn(n);s!==null&&s.tag===5&&s.type==="form"?Vy(s):Qs.r(n)}var Mo=typeof document>"u"?null:document;function __(n,s,a){var l=Mo;if(l&&typeof s=="string"&&s){var f=si(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),v_.has(f)||(v_.add(f),n={rel:n,crossOrigin:a,href:s},l.querySelector(f)===null&&(s=l.createElement("link"),Nn(s,"link",n),Ut(s),l.head.appendChild(s)))}}function mS(n){Qs.D(n),__("dns-prefetch",n,null)}function gS(n,s){Qs.C(n,s),__("preconnect",n,s)}function pS(n,s,a){Qs.L(n,s,a);var l=Mo;if(l&&n&&s){var f='link[rel="preload"][as="'+si(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+si(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+si(a.imageSizes)+'"]')):f+='[href="'+si(n)+'"]';var d=f;switch(s){case"style":d=Vo(n);break;case"script":d=Po(n)}zi.has(d)||(n=b({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),zi.set(d,n),l.querySelector(f)!==null||s==="style"&&l.querySelector(ic(d))||s==="script"&&l.querySelector(sc(d))||(s=l.createElement("link"),Nn(s,"link",n),Ut(s),l.head.appendChild(s)))}}function yS(n,s){Qs.m(n,s);var a=Mo;if(a&&n){var l=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+si(l)+'"][href="'+si(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Po(n)}if(!zi.has(d)&&(n=b({rel:"modulepreload",href:n},s),zi.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(sc(d)))return}l=a.createElement("link"),Nn(l,"link",n),Ut(l),a.head.appendChild(l)}}}function vS(n,s,a){Qs.S(n,s,a);var l=Mo;if(l&&n){var f=Ri(l).hoistableStyles,d=Vo(n);s=s||"default";var _=f.get(d);if(!_){var x={loading:0,preload:null};if(_=l.querySelector(ic(d)))x.loading=5;else{n=b({rel:"stylesheet",href:n,"data-precedence":s},a),(a=zi.get(d))&&Fm(n,a);var P=_=l.createElement("link");Ut(P),Nn(P,"link",n),P._p=new Promise(function(Y,re){P.onload=Y,P.onerror=re}),P.addEventListener("load",function(){x.loading|=1}),P.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Eh(_,s,l)}_={type:"stylesheet",instance:_,count:1,state:x},f.set(d,_)}}}function _S(n,s){Qs.X(n,s);var a=Mo;if(a&&n){var l=Ri(a).hoistableScripts,f=Po(n),d=l.get(f);d||(d=a.querySelector(sc(f)),d||(n=b({src:n,async:!0},s),(s=zi.get(f))&&Gm(n,s),d=a.createElement("script"),Ut(d),Nn(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function bS(n,s){Qs.M(n,s);var a=Mo;if(a&&n){var l=Ri(a).hoistableScripts,f=Po(n),d=l.get(f);d||(d=a.querySelector(sc(f)),d||(n=b({src:n,async:!0,type:"module"},s),(s=zi.get(f))&&Gm(n,s),d=a.createElement("script"),Ut(d),Nn(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function b_(n,s,a,l){var f=(f=Se.current)?bh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Vo(a.href),a=Ri(f).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Vo(a.href);var d=Ri(f).hoistableStyles,_=d.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,_),(d=f.querySelector(ic(n)))&&!d._p&&(_.instance=d,_.state.loading=5),zi.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},zi.set(n,a),d||ES(f,n,a,_.state))),s&&l===null)throw Error(r(528,""));return _}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Po(a),a=Ri(f).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Vo(n){return'href="'+si(n)+'"'}function ic(n){return'link[rel="stylesheet"]['+n+"]"}function E_(n){return b({},n,{"data-precedence":n.precedence,precedence:null})}function ES(n,s,a,l){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=n.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),Nn(s,"link",a),Ut(s),n.head.appendChild(s))}function Po(n){return'[src="'+si(n)+'"]'}function sc(n){return"script[async]"+n}function T_(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=n.querySelector('style[data-href~="'+si(a.href)+'"]');if(l)return s.instance=l,Ut(l),l;var f=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Ut(l),Nn(l,"style",f),Eh(l,a.precedence,n),s.instance=l;case"stylesheet":f=Vo(a.href);var d=n.querySelector(ic(f));if(d)return s.state.loading|=4,s.instance=d,Ut(d),d;l=E_(a),(f=zi.get(f))&&Fm(l,f),d=(n.ownerDocument||n).createElement("link"),Ut(d);var _=d;return _._p=new Promise(function(x,P){_.onload=x,_.onerror=P}),Nn(d,"link",l),s.state.loading|=4,Eh(d,a.precedence,n),s.instance=d;case"script":return d=Po(a.src),(f=n.querySelector(sc(d)))?(s.instance=f,Ut(f),f):(l=a,(f=zi.get(d))&&(l=b({},a),Gm(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ut(f),Nn(f,"link",l),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Eh(l,a.precedence,n));return s.instance}function Eh(n,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var x=l[_];if(x.dataset.precedence===s)d=x;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function Fm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Gm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Th=null;function w_(n,s,a){if(Th===null){var l=new Map,f=Th=new Map;f.set(a,l)}else f=Th,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[Si]||d[Pt]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(s)||"";_=n+_;var x=l.get(_);x?x.push(d):l.set(_,[d])}}return l}function x_(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function TS(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(n=s.disabled,typeof s.precedence=="string"&&n==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function S_(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function wS(n,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Vo(l.href),d=s.querySelector(ic(f));if(d){s=d._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=wh.bind(n),s.then(n,n)),a.state.loading|=4,a.instance=d,Ut(d);return}d=s.ownerDocument||s,l=E_(l),(f=zi.get(f))&&Fm(l,f),d=d.createElement("link"),Ut(d);var _=d;_._p=new Promise(function(x,P){_.onload=x,_.onerror=P}),Nn(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=wh.bind(n),s.addEventListener("load",a),s.addEventListener("error",a))}}var $m=0;function xS(n,s){return n.stylesheets&&n.count===0&&Sh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&Sh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+s);0<n.imgBytes&&$m===0&&($m=62500*sS());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Sh(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>$m?50:800)+s);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function wh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Sh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var xh=null;function Sh(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,xh=new Map,s.forEach(SS,n),xh=null,wh.call(n))}function SS(n,s){if(!(s.state.loading&4)){var a=xh.get(n);if(a)var l=a.get(null);else{a=new Map,xh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=s.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=wh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var rc={$$typeof:F,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function AS(n,s,a,l,f,d,_,x,P){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vt(0),this.hiddenUpdates=Vt(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function A_(n,s,a,l,f,d,_,x,P,Y,re,le){return n=new AS(n,s,a,_,P,Y,re,le,x),s=1,d===!0&&(s|=24),d=mi(3,null,null,s),n.current=d,d.stateNode=n,s=Sd(),s.refCount++,n.pooledCache=s,s.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:s},Nd(d),n}function R_(n){return n?(n=fo,n):fo}function C_(n,s,a,l,f,d){f=R_(f),l.context===null?l.context=f:l.pendingContext=f,l=wr(s),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=xr(n,l,s),a!==null&&(ui(a,n,s),jl(a,n,s))}function N_(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Km(n,s){N_(n,s),(n=n.alternate)&&N_(n,s)}function I_(n){if(n.tag===13||n.tag===31){var s=Ra(n,67108864);s!==null&&ui(s,n,67108864),Km(n,67108864)}}function D_(n){if(n.tag===13||n.tag===31){var s=_i();s=un(s);var a=Ra(n,s);a!==null&&ui(a,n,s),Km(n,s)}}var Ah=!0;function RS(n,s,a,l){var f=ee.T;ee.T=null;var d=he.p;try{he.p=2,Qm(n,s,a,l)}finally{he.p=d,ee.T=f}}function CS(n,s,a,l){var f=ee.T;ee.T=null;var d=he.p;try{he.p=8,Qm(n,s,a,l)}finally{he.p=d,ee.T=f}}function Qm(n,s,a,l){if(Ah){var f=Ym(l);if(f===null)Mm(n,s,l,Rh,a),k_(n,l);else if(IS(f,n,s,a,l))l.stopPropagation();else if(k_(n,l),s&4&&-1<NS.indexOf(n)){for(;f!==null;){var d=Qn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=At(d.pendingLanes);if(_!==0){var x=d;for(x.pendingLanes|=2,x.entangledLanes|=2;_;){var P=1<<31-St(_);x.entanglements[1]|=P,_&=~P}_s(d),(ut&6)===0&&(ch=Jt()+500,Zl(0))}}break;case 31:case 13:x=Ra(d,2),x!==null&&ui(x,d,2),hh(),Km(d,2)}if(d=Ym(l),d===null&&Mm(n,s,l,Rh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Mm(n,s,l,null,a)}}function Ym(n){return n=Ii(n),Xm(n)}var Rh=null;function Xm(n){if(Rh=null,n=Ai(n),n!==null){var s=c(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=u(s),n!==null)return n;n=null}else if(a===31){if(n=m(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Rh=n,null}function O_(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fi()){case Rs:return 2;case Gn:return 8;case xn:case Gi:return 32;case Cs:return 268435456;default:return 32}default:return 32}}var Wm=!1,Vr=null,Pr=null,jr=null,ac=new Map,oc=new Map,Lr=[],NS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function k_(n,s){switch(n){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":Pr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":ac.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":oc.delete(s.pointerId)}}function lc(n,s,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},s!==null&&(s=Qn(s),s!==null&&I_(s)),n):(n.eventSystemFlags|=l,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function IS(n,s,a,l,f){switch(s){case"focusin":return Vr=lc(Vr,n,s,a,l,f),!0;case"dragenter":return Pr=lc(Pr,n,s,a,l,f),!0;case"mouseover":return jr=lc(jr,n,s,a,l,f),!0;case"pointerover":var d=f.pointerId;return ac.set(d,lc(ac.get(d)||null,n,s,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,oc.set(d,lc(oc.get(d)||null,n,s,a,l,f)),!0}return!1}function M_(n){var s=Ai(n.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){n.blockedOn=s,hn(n.priority,function(){D_(a)});return}}else if(s===31){if(s=m(a),s!==null){n.blockedOn=s,hn(n.priority,function(){D_(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ch(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Ym(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);El=l,a.target.dispatchEvent(l),El=null}else return s=Qn(a),s!==null&&I_(s),n.blockedOn=a,!1;s.shift()}return!0}function V_(n,s,a){Ch(n)&&a.delete(s)}function DS(){Wm=!1,Vr!==null&&Ch(Vr)&&(Vr=null),Pr!==null&&Ch(Pr)&&(Pr=null),jr!==null&&Ch(jr)&&(jr=null),ac.forEach(V_),oc.forEach(V_)}function Nh(n,s){n.blockedOn===s&&(n.blockedOn=null,Wm||(Wm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,DS)))}var Ih=null;function P_(n){Ih!==n&&(Ih=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Ih===n&&(Ih=null);for(var s=0;s<n.length;s+=3){var a=n[s],l=n[s+1],f=n[s+2];if(typeof l!="function"){if(Xm(l||a)===null)continue;break}var d=Qn(a);d!==null&&(n.splice(s,3),s-=3,Yd(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function jo(n){function s(P){return Nh(P,n)}Vr!==null&&Nh(Vr,n),Pr!==null&&Nh(Pr,n),jr!==null&&Nh(jr,n),ac.forEach(s),oc.forEach(s);for(var a=0;a<Lr.length;a++){var l=Lr[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Lr.length&&(a=Lr[0],a.blockedOn===null);)M_(a),a.blockedOn===null&&Lr.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[$t]||null;if(typeof d=="function")_||P_(a);else if(_){var x=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[$t]||null)x=_.formAction;else if(Xm(f)!==null)continue}else x=_.action;typeof x=="function"?a[l+1]=x:(a.splice(l,3),l-=3),P_(a)}}}function j_(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function Jm(n){this._internalRoot=n}Dh.prototype.render=Jm.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=_i();C_(a,l,n,s,null,null)},Dh.prototype.unmount=Jm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;C_(n.current,2,null,n,null,null),hh(),s[Ee]=null}};function Dh(n){this._internalRoot=n}Dh.prototype.unstable_scheduleHydration=function(n){if(n){var s=Ot();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Lr.length&&s!==0&&s<Lr[a].priority;a++);Lr.splice(a,0,n),a===0&&M_(n)}};var L_=e.version;if(L_!=="19.2.3")throw Error(r(527,L_,"19.2.3"));he.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(s),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var OS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oh.isDisabled&&Oh.supportsFiber)try{Kn=Oh.inject(OS),Ft=Oh}catch{}}return uc.createRoot=function(n,s){if(!o(n))throw Error(r(299));var a=!1,l="",f=Gy,d=$y,_=Ky;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(d=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=A_(n,1,!1,null,null,a,l,null,f,d,_,j_),n[Ee]=s.current,km(n),new Jm(s)},uc.hydrateRoot=function(n,s,a){if(!o(n))throw Error(r(299));var l=!1,f="",d=Gy,_=$y,x=Ky,P=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError),a.formState!==void 0&&(P=a.formState)),s=A_(n,1,!0,s,a??null,l,f,P,d,_,x,j_),s.context=R_(null),a=s.current,l=_i(),l=un(l),f=wr(l),f.callback=null,xr(a,f,l),a=l,s.current.lanes=a,Z(s,a),_s(s),n[Ee]=s.current,km(n),new Dh(s)},uc.version="19.2.3",uc}var Q_;function qS(){if(Q_)return tg.exports;Q_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),tg.exports=BS(),tg.exports}var HS=qS();const FS=()=>T.jsxs("div",{className:"fixed inset-0 -z-50 overflow-hidden pointer-events-none bg-[#020617]",children:[T.jsx("div",{className:"bg-blob opacity-20 w-[800px] h-[800px] -top-96 -left-96 bg-indigo-600 blur-[120px]"}),T.jsx("div",{className:"bg-blob opacity-30 w-[600px] h-[600px] top-1/2 -right-48 bg-pink-600 blur-[100px]",style:{animationDelay:"-5s",animationDuration:"25s"}}),T.jsx("div",{className:"bg-blob opacity-10 w-[500px] h-[500px] bottom-0 left-1/4 bg-cyan-400 blur-[80px]",style:{animationDelay:"-12s",animationDuration:"18s"}}),T.jsx("div",{className:"absolute inset-0 bg-radial-at-t from-transparent via-slate-950/40 to-slate-950"}),T.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"})]});const GS=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$S=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Y_=i=>{const e=$S(i);return e.charAt(0).toUpperCase()+e.slice(1)},eE=(...i)=>i.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),KS=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var QS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const YS=q.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:c,iconNode:u,...m},g)=>q.createElement("svg",{ref:g,...QS,width:e,height:e,stroke:i,strokeWidth:r?Number(t)*24/Number(e):t,className:eE("lucide",o),...!c&&!KS(m)&&{"aria-hidden":"true"},...m},[...u.map(([p,v])=>q.createElement(p,v)),...Array.isArray(c)?c:[c]]));const Vn=(i,e)=>{const t=q.forwardRef(({className:r,...o},c)=>q.createElement(YS,{ref:c,iconNode:e,className:eE(`lucide-${GS(Y_(i))}`,`lucide-${i}`,r),...o}));return t.displayName=Y_(i),t};const XS=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],_c=Vn("arrow-left",XS);const WS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],JS=Vn("circle-x",WS);const ZS=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],tE=Vn("copy",ZS);const eA=[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]],tA=Vn("dices",eA);const nA=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],nE=Vn("flag",nA);const iA=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],sA=Vn("house",iA);const rA=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],aA=Vn("layout-grid",rA);const oA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],iE=Vn("loader-circle",oA);const lA=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],cA=Vn("log-in",lA);const uA=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],hA=Vn("log-out",uA);const fA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],dA=Vn("plus",fA);const mA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],up=Vn("rotate-ccw",mA);const gA=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],sE=Vn("share-2",gA);const pA=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Ng=Vn("trophy",pA);const yA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],rg=Vn("user",yA);const vA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],hp=Vn("users",vA);const _A=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],rE=Vn("zap",_A),bA=()=>{};var X_={};const aE=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},EA=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const o=i[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[t++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[t++],u=i[t++],m=i[t++],g=((o&7)<<18|(c&63)<<12|(u&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const c=i[t++],u=i[t++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|u&63)}}return e.join("")},oE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const c=i[o],u=o+1<i.length,m=u?i[o+1]:0,g=o+2<i.length,p=g?i[o+2]:0,v=c>>2,b=(c&3)<<4|m>>4;let w=(m&15)<<2|p>>6,N=p&63;g||(N=64,u||(w=64)),r.push(t[v],t[b],t[w],t[N])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(aE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):EA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const c=t[i.charAt(o++)],m=o<i.length?t[i.charAt(o)]:0;++o;const p=o<i.length?t[i.charAt(o)]:64;++o;const b=o<i.length?t[i.charAt(o)]:64;if(++o,c==null||m==null||p==null||b==null)throw new TA;const w=c<<2|m>>4;if(r.push(w),p!==64){const N=m<<4&240|p>>2;if(r.push(N),b!==64){const V=p<<6&192|b;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class TA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wA=function(i){const e=aE(i);return oE.encodeByteArray(e,!0)},rf=function(i){return wA(i).replace(/\./g,"")},lE=function(i){try{return oE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function xA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const SA=()=>xA().__FIREBASE_DEFAULTS__,AA=()=>{if(typeof process>"u"||typeof X_>"u")return;const i=X_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},RA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&lE(i[1]);return e&&JSON.parse(e)},Of=()=>{try{return bA()||SA()||AA()||RA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},cE=i=>Of()?.emulatorHosts?.[i],CA=i=>{const e=cE(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},uE=()=>Of()?.config,hE=i=>Of()?.[`_${i}`];class NA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function ol(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fE(i){return(await fetch(i,{credentials:"include"})).ok}function IA(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[rf(JSON.stringify(t)),rf(JSON.stringify(u)),""].join(".")}const bc={};function DA(){const i={prod:[],emulator:[]};for(const e of Object.keys(bc))bc[e]?i.emulator.push(e):i.prod.push(e);return i}function OA(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let W_=!1;function dE(i,e){if(typeof window>"u"||typeof document>"u"||!ol(window.location.host)||bc[i]===e||bc[i]||W_)return;bc[i]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",c=DA().prod.length>0;function u(){const w=document.getElementById(r);w&&w.remove()}function m(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function g(w,N){w.setAttribute("width","24"),w.setAttribute("id",N),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{W_=!0,u()},w}function v(w,N){w.setAttribute("id",N),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function b(){const w=OA(r),N=t("text"),V=document.getElementById(N)||document.createElement("span"),z=t("learnmore"),I=document.getElementById(z)||document.createElement("a"),k=t("preprendIcon"),$=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const F=w.element;m(F),v(I,z);const ue=p();g($,k),F.append($,V,I,ue),document.body.appendChild(F)}c?(V.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function Hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hn())}function MA(){const i=Of()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PA(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function jA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LA(){const i=Hn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function UA(){return!MA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zA(){try{return typeof indexedDB=="object"}catch{return!1}}function BA(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const qA="FirebaseError";class sr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=qA,Object.setPrototypeOf(this,sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yc.prototype.create)}}class Yc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],u=c?HA(c,r):"Error",m=`${this.serviceName}: ${u} (${o}).`;return new sr(o,m,r)}}function HA(i,e){return i.replace(FA,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const FA=/\{\$([^}]+)}/g;function GA(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ga(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const c=i[o],u=e[o];if(J_(c)&&J_(u)){if(!Ga(c,u))return!1}else if(c!==u)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function J_(i){return i!==null&&typeof i=="object"}function Xc(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $A(i,e){const t=new KA(i,e);return t.subscribe.bind(t)}class KA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");QA(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=ag),o.error===void 0&&(o.error=ag),o.complete===void 0&&(o.complete=ag);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QA(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function ag(){}function wn(i){return i&&i._delegate?i._delegate:i}class $a{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ba="[DEFAULT]";class YA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new NA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WA(e))try{this.getOrInitializeService({instanceIdentifier:Ba})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=Ba){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ba){return this.instances.has(e)}getOptions(e=Ba){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[c,u]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);r===m&&u.resolve(o)}return o}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&e(c,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XA(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ba){return this.component?this.component.multipleInstances?e:Ba:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XA(i){return i===Ba?void 0:i}function WA(i){return i.instantiationMode==="EAGER"}class JA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new YA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var We;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(We||(We={}));const ZA={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},e2=We.INFO,t2={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},n2=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=t2[e];if(o)console[o](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fp{constructor(e){this.name=e,this._logLevel=e2,this._logHandler=n2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const i2=(i,e)=>e.some(t=>i instanceof t);let Z_,eb;function s2(){return Z_||(Z_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function r2(){return eb||(eb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mE=new WeakMap,Ig=new WeakMap,gE=new WeakMap,og=new WeakMap,dp=new WeakMap;function a2(i){const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",u)},c=()=>{t(Xr(i.result)),o()},u=()=>{r(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&mE.set(t,i)}).catch(()=>{}),dp.set(e,i),e}function o2(i){if(Ig.has(i))return;const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",u),i.removeEventListener("abort",u)},c=()=>{t(),o()},u=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",u),i.addEventListener("abort",u)});Ig.set(i,e)}let Dg={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Ig.get(i);if(e==="objectStoreNames")return i.objectStoreNames||gE.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xr(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function l2(i){Dg=i(Dg)}function c2(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(lg(this),e,...t);return gE.set(r,e.sort?e.sort():[e]),Xr(r)}:r2().includes(i)?function(...e){return i.apply(lg(this),e),Xr(mE.get(this))}:function(...e){return Xr(i.apply(lg(this),e))}}function u2(i){return typeof i=="function"?c2(i):(i instanceof IDBTransaction&&o2(i),i2(i,s2())?new Proxy(i,Dg):i)}function Xr(i){if(i instanceof IDBRequest)return a2(i);if(og.has(i))return og.get(i);const e=u2(i);return e!==i&&(og.set(i,e),dp.set(e,i)),e}const lg=i=>dp.get(i);function h2(i,e,{blocked:t,upgrade:r,blocking:o,terminated:c}={}){const u=indexedDB.open(i,e),m=Xr(u);return r&&u.addEventListener("upgradeneeded",g=>{r(Xr(u.result),g.oldVersion,g.newVersion,Xr(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const f2=["get","getKey","getAll","getAllKeys","count"],d2=["put","add","delete","clear"],cg=new Map;function tb(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(cg.get(e))return cg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=d2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||f2.includes(t)))return;const c=async function(u,...m){const g=this.transaction(u,o?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),o&&g.done]))[0]};return cg.set(e,c),c}l2(i=>({...i,get:(e,t,r)=>tb(e,t)||i.get(e,t,r),has:(e,t)=>!!tb(e,t)||i.has(e,t)}));class m2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(g2(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function g2(i){return i.getComponent()?.type==="VERSION"}const Og="@firebase/app",nb="0.14.6";const Js=new fp("@firebase/app"),p2="@firebase/app-compat",y2="@firebase/analytics-compat",v2="@firebase/analytics",_2="@firebase/app-check-compat",b2="@firebase/app-check",E2="@firebase/auth",T2="@firebase/auth-compat",w2="@firebase/database",x2="@firebase/data-connect",S2="@firebase/database-compat",A2="@firebase/functions",R2="@firebase/functions-compat",C2="@firebase/installations",N2="@firebase/installations-compat",I2="@firebase/messaging",D2="@firebase/messaging-compat",O2="@firebase/performance",k2="@firebase/performance-compat",M2="@firebase/remote-config",V2="@firebase/remote-config-compat",P2="@firebase/storage",j2="@firebase/storage-compat",L2="@firebase/firestore",U2="@firebase/ai",z2="@firebase/firestore-compat",B2="firebase",q2="12.6.0";const kg="[DEFAULT]",H2={[Og]:"fire-core",[p2]:"fire-core-compat",[v2]:"fire-analytics",[y2]:"fire-analytics-compat",[b2]:"fire-app-check",[_2]:"fire-app-check-compat",[E2]:"fire-auth",[T2]:"fire-auth-compat",[w2]:"fire-rtdb",[x2]:"fire-data-connect",[S2]:"fire-rtdb-compat",[A2]:"fire-fn",[R2]:"fire-fn-compat",[C2]:"fire-iid",[N2]:"fire-iid-compat",[I2]:"fire-fcm",[D2]:"fire-fcm-compat",[O2]:"fire-perf",[k2]:"fire-perf-compat",[M2]:"fire-rc",[V2]:"fire-rc-compat",[P2]:"fire-gcs",[j2]:"fire-gcs-compat",[L2]:"fire-fst",[z2]:"fire-fst-compat",[U2]:"fire-vertex","fire-js":"fire-js",[B2]:"fire-js-all"};const Mc=new Map,F2=new Map,Mg=new Map;function ib(i,e){try{i.container.addComponent(e)}catch(t){Js.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Wo(i){const e=i.name;if(Mg.has(e))return Js.debug(`There were multiple attempts to register component ${e}.`),!1;Mg.set(e,i);for(const t of Mc.values())ib(t,i);for(const t of F2.values())ib(t,i);return!0}function mp(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function ns(i){return i==null?!1:i.settings!==void 0}const G2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wr=new Yc("app","Firebase",G2);class $2{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wr.create("app-deleted",{appName:this._name})}}const ll=q2;function pE(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r={name:kg,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Wr.create("bad-app-name",{appName:String(o)});if(t||(t=uE()),!t)throw Wr.create("no-options");const c=Mc.get(o);if(c){if(Ga(t,c.options)&&Ga(r,c.config))return c;throw Wr.create("duplicate-app",{appName:o})}const u=new JA(o);for(const g of Mg.values())u.addComponent(g);const m=new $2(t,r,u);return Mc.set(o,m),m}function yE(i=kg){const e=Mc.get(i);if(!e&&i===kg&&uE())return pE();if(!e)throw Wr.create("no-app",{appName:i});return e}function sb(){return Array.from(Mc.values())}function Jr(i,e,t){let r=H2[i]??i;t&&(r+=`-${t}`);const o=r.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${r}" with version "${e}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Js.warn(u.join(" "));return}Wo(new $a(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const K2="firebase-heartbeat-database",Q2=1,Vc="firebase-heartbeat-store";let ug=null;function vE(){return ug||(ug=h2(K2,Q2,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Vc)}catch(t){console.warn(t)}}}}).catch(i=>{throw Wr.create("idb-open",{originalErrorMessage:i.message})})),ug}async function Y2(i){try{const t=(await vE()).transaction(Vc),r=await t.objectStore(Vc).get(_E(i));return await t.done,r}catch(e){if(e instanceof sr)Js.warn(e.message);else{const t=Wr.create("idb-get",{originalErrorMessage:e?.message});Js.warn(t.message)}}}async function rb(i,e){try{const r=(await vE()).transaction(Vc,"readwrite");await r.objectStore(Vc).put(e,_E(i)),await r.done}catch(t){if(t instanceof sr)Js.warn(t.message);else{const r=Wr.create("idb-set",{originalErrorMessage:t?.message});Js.warn(r.message)}}}function _E(i){return`${i.name}!${i.options.appId}`}const X2=1024,W2=30;class J2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new eR(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ab();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>W2){const o=tR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Js.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ab(),{heartbeatsToSend:t,unsentEntries:r}=Z2(this._heartbeatsCache.heartbeats),o=rf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Js.warn(e),""}}}function ab(){return new Date().toISOString().substring(0,10)}function Z2(i,e=X2){const t=[];let r=i.slice();for(const o of i){const c=t.find(u=>u.agent===o.agent);if(c){if(c.dates.push(o.date),ob(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ob(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class eR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zA()?BA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Y2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ob(i){return rf(JSON.stringify({version:2,heartbeats:i})).length}function tR(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}function nR(i){Wo(new $a("platform-logger",e=>new m2(e),"PRIVATE")),Wo(new $a("heartbeat",e=>new J2(e),"PRIVATE")),Jr(Og,nb,i),Jr(Og,nb,"esm2020"),Jr("fire-js","")}nR("");var lb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Zr,bE;(function(){var i;function e(A,S){function C(){}C.prototype=S.prototype,A.F=S.prototype,A.prototype=new C,A.prototype.constructor=A,A.D=function(O,M,j){for(var D=Array(arguments.length-2),De=2;De<arguments.length;De++)D[De-2]=arguments[De];return S.prototype[M].apply(O,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(A,S,C){C||(C=0);const O=Array(16);if(typeof S=="string")for(var M=0;M<16;++M)O[M]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(M=0;M<16;++M)O[M]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=A.g[0],C=A.g[1],M=A.g[2];let j=A.g[3],D;D=S+(j^C&(M^j))+O[0]+3614090360&4294967295,S=C+(D<<7&4294967295|D>>>25),D=j+(M^S&(C^M))+O[1]+3905402710&4294967295,j=S+(D<<12&4294967295|D>>>20),D=M+(C^j&(S^C))+O[2]+606105819&4294967295,M=j+(D<<17&4294967295|D>>>15),D=C+(S^M&(j^S))+O[3]+3250441966&4294967295,C=M+(D<<22&4294967295|D>>>10),D=S+(j^C&(M^j))+O[4]+4118548399&4294967295,S=C+(D<<7&4294967295|D>>>25),D=j+(M^S&(C^M))+O[5]+1200080426&4294967295,j=S+(D<<12&4294967295|D>>>20),D=M+(C^j&(S^C))+O[6]+2821735955&4294967295,M=j+(D<<17&4294967295|D>>>15),D=C+(S^M&(j^S))+O[7]+4249261313&4294967295,C=M+(D<<22&4294967295|D>>>10),D=S+(j^C&(M^j))+O[8]+1770035416&4294967295,S=C+(D<<7&4294967295|D>>>25),D=j+(M^S&(C^M))+O[9]+2336552879&4294967295,j=S+(D<<12&4294967295|D>>>20),D=M+(C^j&(S^C))+O[10]+4294925233&4294967295,M=j+(D<<17&4294967295|D>>>15),D=C+(S^M&(j^S))+O[11]+2304563134&4294967295,C=M+(D<<22&4294967295|D>>>10),D=S+(j^C&(M^j))+O[12]+1804603682&4294967295,S=C+(D<<7&4294967295|D>>>25),D=j+(M^S&(C^M))+O[13]+4254626195&4294967295,j=S+(D<<12&4294967295|D>>>20),D=M+(C^j&(S^C))+O[14]+2792965006&4294967295,M=j+(D<<17&4294967295|D>>>15),D=C+(S^M&(j^S))+O[15]+1236535329&4294967295,C=M+(D<<22&4294967295|D>>>10),D=S+(M^j&(C^M))+O[1]+4129170786&4294967295,S=C+(D<<5&4294967295|D>>>27),D=j+(C^M&(S^C))+O[6]+3225465664&4294967295,j=S+(D<<9&4294967295|D>>>23),D=M+(S^C&(j^S))+O[11]+643717713&4294967295,M=j+(D<<14&4294967295|D>>>18),D=C+(j^S&(M^j))+O[0]+3921069994&4294967295,C=M+(D<<20&4294967295|D>>>12),D=S+(M^j&(C^M))+O[5]+3593408605&4294967295,S=C+(D<<5&4294967295|D>>>27),D=j+(C^M&(S^C))+O[10]+38016083&4294967295,j=S+(D<<9&4294967295|D>>>23),D=M+(S^C&(j^S))+O[15]+3634488961&4294967295,M=j+(D<<14&4294967295|D>>>18),D=C+(j^S&(M^j))+O[4]+3889429448&4294967295,C=M+(D<<20&4294967295|D>>>12),D=S+(M^j&(C^M))+O[9]+568446438&4294967295,S=C+(D<<5&4294967295|D>>>27),D=j+(C^M&(S^C))+O[14]+3275163606&4294967295,j=S+(D<<9&4294967295|D>>>23),D=M+(S^C&(j^S))+O[3]+4107603335&4294967295,M=j+(D<<14&4294967295|D>>>18),D=C+(j^S&(M^j))+O[8]+1163531501&4294967295,C=M+(D<<20&4294967295|D>>>12),D=S+(M^j&(C^M))+O[13]+2850285829&4294967295,S=C+(D<<5&4294967295|D>>>27),D=j+(C^M&(S^C))+O[2]+4243563512&4294967295,j=S+(D<<9&4294967295|D>>>23),D=M+(S^C&(j^S))+O[7]+1735328473&4294967295,M=j+(D<<14&4294967295|D>>>18),D=C+(j^S&(M^j))+O[12]+2368359562&4294967295,C=M+(D<<20&4294967295|D>>>12),D=S+(C^M^j)+O[5]+4294588738&4294967295,S=C+(D<<4&4294967295|D>>>28),D=j+(S^C^M)+O[8]+2272392833&4294967295,j=S+(D<<11&4294967295|D>>>21),D=M+(j^S^C)+O[11]+1839030562&4294967295,M=j+(D<<16&4294967295|D>>>16),D=C+(M^j^S)+O[14]+4259657740&4294967295,C=M+(D<<23&4294967295|D>>>9),D=S+(C^M^j)+O[1]+2763975236&4294967295,S=C+(D<<4&4294967295|D>>>28),D=j+(S^C^M)+O[4]+1272893353&4294967295,j=S+(D<<11&4294967295|D>>>21),D=M+(j^S^C)+O[7]+4139469664&4294967295,M=j+(D<<16&4294967295|D>>>16),D=C+(M^j^S)+O[10]+3200236656&4294967295,C=M+(D<<23&4294967295|D>>>9),D=S+(C^M^j)+O[13]+681279174&4294967295,S=C+(D<<4&4294967295|D>>>28),D=j+(S^C^M)+O[0]+3936430074&4294967295,j=S+(D<<11&4294967295|D>>>21),D=M+(j^S^C)+O[3]+3572445317&4294967295,M=j+(D<<16&4294967295|D>>>16),D=C+(M^j^S)+O[6]+76029189&4294967295,C=M+(D<<23&4294967295|D>>>9),D=S+(C^M^j)+O[9]+3654602809&4294967295,S=C+(D<<4&4294967295|D>>>28),D=j+(S^C^M)+O[12]+3873151461&4294967295,j=S+(D<<11&4294967295|D>>>21),D=M+(j^S^C)+O[15]+530742520&4294967295,M=j+(D<<16&4294967295|D>>>16),D=C+(M^j^S)+O[2]+3299628645&4294967295,C=M+(D<<23&4294967295|D>>>9),D=S+(M^(C|~j))+O[0]+4096336452&4294967295,S=C+(D<<6&4294967295|D>>>26),D=j+(C^(S|~M))+O[7]+1126891415&4294967295,j=S+(D<<10&4294967295|D>>>22),D=M+(S^(j|~C))+O[14]+2878612391&4294967295,M=j+(D<<15&4294967295|D>>>17),D=C+(j^(M|~S))+O[5]+4237533241&4294967295,C=M+(D<<21&4294967295|D>>>11),D=S+(M^(C|~j))+O[12]+1700485571&4294967295,S=C+(D<<6&4294967295|D>>>26),D=j+(C^(S|~M))+O[3]+2399980690&4294967295,j=S+(D<<10&4294967295|D>>>22),D=M+(S^(j|~C))+O[10]+4293915773&4294967295,M=j+(D<<15&4294967295|D>>>17),D=C+(j^(M|~S))+O[1]+2240044497&4294967295,C=M+(D<<21&4294967295|D>>>11),D=S+(M^(C|~j))+O[8]+1873313359&4294967295,S=C+(D<<6&4294967295|D>>>26),D=j+(C^(S|~M))+O[15]+4264355552&4294967295,j=S+(D<<10&4294967295|D>>>22),D=M+(S^(j|~C))+O[6]+2734768916&4294967295,M=j+(D<<15&4294967295|D>>>17),D=C+(j^(M|~S))+O[13]+1309151649&4294967295,C=M+(D<<21&4294967295|D>>>11),D=S+(M^(C|~j))+O[4]+4149444226&4294967295,S=C+(D<<6&4294967295|D>>>26),D=j+(C^(S|~M))+O[11]+3174756917&4294967295,j=S+(D<<10&4294967295|D>>>22),D=M+(S^(j|~C))+O[2]+718787259&4294967295,M=j+(D<<15&4294967295|D>>>17),D=C+(j^(M|~S))+O[9]+3951481745&4294967295,A.g[0]=A.g[0]+S&4294967295,A.g[1]=A.g[1]+(M+(D<<21&4294967295|D>>>11))&4294967295,A.g[2]=A.g[2]+M&4294967295,A.g[3]=A.g[3]+j&4294967295}r.prototype.v=function(A,S){S===void 0&&(S=A.length);const C=S-this.blockSize,O=this.C;let M=this.h,j=0;for(;j<S;){if(M==0)for(;j<=C;)o(this,A,j),j+=this.blockSize;if(typeof A=="string"){for(;j<S;)if(O[M++]=A.charCodeAt(j++),M==this.blockSize){o(this,O),M=0;break}}else for(;j<S;)if(O[M++]=A[j++],M==this.blockSize){o(this,O),M=0;break}}this.h=M,this.o+=S},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var S=1;S<A.length-8;++S)A[S]=0;S=this.o*8;for(var C=A.length-8;C<A.length;++C)A[C]=S&255,S/=256;for(this.v(A),A=Array(16),S=0,C=0;C<4;++C)for(let O=0;O<32;O+=8)A[S++]=this.g[C]>>>O&255;return A};function c(A,S){var C=m;return Object.prototype.hasOwnProperty.call(C,A)?C[A]:C[A]=S(A)}function u(A,S){this.h=S;const C=[];let O=!0;for(let M=A.length-1;M>=0;M--){const j=A[M]|0;O&&j==S||(C[M]=j,O=!1)}this.g=C}var m={};function g(A){return-128<=A&&A<128?c(A,function(S){return new u([S|0],S<0?-1:0)}):new u([A|0],A<0?-1:0)}function p(A){if(isNaN(A)||!isFinite(A))return b;if(A<0)return I(p(-A));const S=[];let C=1;for(let O=0;A>=C;O++)S[O]=A/C|0,C*=4294967296;return new u(S,0)}function v(A,S){if(A.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(A.charAt(0)=="-")return I(v(A.substring(1),S));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=p(Math.pow(S,8));let O=b;for(let j=0;j<A.length;j+=8){var M=Math.min(8,A.length-j);const D=parseInt(A.substring(j,j+M),S);M<8?(M=p(Math.pow(S,M)),O=O.j(M).add(p(D))):(O=O.j(C),O=O.add(p(D)))}return O}var b=g(0),w=g(1),N=g(16777216);i=u.prototype,i.m=function(){if(z(this))return-I(this).m();let A=0,S=1;for(let C=0;C<this.g.length;C++){const O=this.i(C);A+=(O>=0?O:4294967296+O)*S,S*=4294967296}return A},i.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(V(this))return"0";if(z(this))return"-"+I(this).toString(A);const S=p(Math.pow(A,6));var C=this;let O="";for(;;){const M=ue(C,S).g;C=k(C,M.j(S));let j=((C.g.length>0?C.g[0]:C.h)>>>0).toString(A);if(C=M,V(C))return j+O;for(;j.length<6;)j="0"+j;O=j+O}},i.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function V(A){if(A.h!=0)return!1;for(let S=0;S<A.g.length;S++)if(A.g[S]!=0)return!1;return!0}function z(A){return A.h==-1}i.l=function(A){return A=k(this,A),z(A)?-1:V(A)?0:1};function I(A){const S=A.g.length,C=[];for(let O=0;O<S;O++)C[O]=~A.g[O];return new u(C,~A.h).add(w)}i.abs=function(){return z(this)?I(this):this},i.add=function(A){const S=Math.max(this.g.length,A.g.length),C=[];let O=0;for(let M=0;M<=S;M++){let j=O+(this.i(M)&65535)+(A.i(M)&65535),D=(j>>>16)+(this.i(M)>>>16)+(A.i(M)>>>16);O=D>>>16,j&=65535,D&=65535,C[M]=D<<16|j}return new u(C,C[C.length-1]&-2147483648?-1:0)};function k(A,S){return A.add(I(S))}i.j=function(A){if(V(this)||V(A))return b;if(z(this))return z(A)?I(this).j(I(A)):I(I(this).j(A));if(z(A))return I(this.j(I(A)));if(this.l(N)<0&&A.l(N)<0)return p(this.m()*A.m());const S=this.g.length+A.g.length,C=[];for(var O=0;O<2*S;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(let M=0;M<A.g.length;M++){const j=this.i(O)>>>16,D=this.i(O)&65535,De=A.i(M)>>>16,ke=A.i(M)&65535;C[2*O+2*M]+=D*ke,$(C,2*O+2*M),C[2*O+2*M+1]+=j*ke,$(C,2*O+2*M+1),C[2*O+2*M+1]+=D*De,$(C,2*O+2*M+1),C[2*O+2*M+2]+=j*De,$(C,2*O+2*M+2)}for(A=0;A<S;A++)C[A]=C[2*A+1]<<16|C[2*A];for(A=S;A<2*S;A++)C[A]=0;return new u(C,0)};function $(A,S){for(;(A[S]&65535)!=A[S];)A[S+1]+=A[S]>>>16,A[S]&=65535,S++}function F(A,S){this.g=A,this.h=S}function ue(A,S){if(V(S))throw Error("division by zero");if(V(A))return new F(b,b);if(z(A))return S=ue(I(A),S),new F(I(S.g),I(S.h));if(z(S))return S=ue(A,I(S)),new F(I(S.g),S.h);if(A.g.length>30){if(z(A)||z(S))throw Error("slowDivide_ only works with positive integers.");for(var C=w,O=S;O.l(A)<=0;)C=X(C),O=X(O);var M=B(C,1),j=B(O,1);for(O=B(O,2),C=B(C,2);!V(O);){var D=j.add(O);D.l(A)<=0&&(M=M.add(C),j=D),O=B(O,1),C=B(C,1)}return S=k(A,M.j(S)),new F(M,S)}for(M=b;A.l(S)>=0;){for(C=Math.max(1,Math.floor(A.m()/S.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),j=p(C),D=j.j(S);z(D)||D.l(A)>0;)C-=O,j=p(C),D=j.j(S);V(j)&&(j=w),M=M.add(j),A=k(A,D)}return new F(M,A)}i.B=function(A){return ue(this,A).h},i.and=function(A){const S=Math.max(this.g.length,A.g.length),C=[];for(let O=0;O<S;O++)C[O]=this.i(O)&A.i(O);return new u(C,this.h&A.h)},i.or=function(A){const S=Math.max(this.g.length,A.g.length),C=[];for(let O=0;O<S;O++)C[O]=this.i(O)|A.i(O);return new u(C,this.h|A.h)},i.xor=function(A){const S=Math.max(this.g.length,A.g.length),C=[];for(let O=0;O<S;O++)C[O]=this.i(O)^A.i(O);return new u(C,this.h^A.h)};function X(A){const S=A.g.length+1,C=[];for(let O=0;O<S;O++)C[O]=A.i(O)<<1|A.i(O-1)>>>31;return new u(C,A.h)}function B(A,S){const C=S>>5;S%=32;const O=A.g.length-C,M=[];for(let j=0;j<O;j++)M[j]=S>0?A.i(j+C)>>>S|A.i(j+C+1)<<32-S:A.i(j+C);return new u(M,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,bE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=v,Zr=u}).apply(typeof lb<"u"?lb:typeof self<"u"?self:typeof window<"u"?window:{});var kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var EE,fc,TE,Hh,Vg,wE,xE,SE;(function(){var i,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof kh=="object"&&kh];for(var y=0;y<h.length;++y){var E=h[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function o(h,y){if(y)e:{var E=r;h=h.split(".");for(var R=0;R<h.length-1;R++){var K=h[R];if(!(K in E))break e;E=E[K]}h=h[h.length-1],R=E[h],y=y(R),y!=R&&y!=null&&e(E,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var E=[],R;for(R in y)Object.prototype.hasOwnProperty.call(y,R)&&E.push([R,y[R]]);return E}});var c=c||{},u=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,E){return h.call.apply(h.bind,arguments)}function p(h,y,E){return p=g,p.apply(null,arguments)}function v(h,y){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function b(h,y){function E(){}E.prototype=y.prototype,h.Z=y.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(R,K,ne){for(var ge=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)ge[Be-2]=arguments[Be];return y.prototype[K].apply(R,ge)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function N(h){const y=h.length;if(y>0){const E=Array(y);for(let R=0;R<y;R++)E[R]=h[R];return E}return[]}function V(h,y){for(let R=1;R<arguments.length;R++){const K=arguments[R];var E=typeof K;if(E=E!="object"?E:K?Array.isArray(K)?"array":E:"null",E=="array"||E=="object"&&typeof K.length=="number"){E=h.length||0;const ne=K.length||0;h.length=E+ne;for(let ge=0;ge<ne;ge++)h[E+ge]=K[ge]}else h.push(K)}}class z{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function I(h){u.setTimeout(()=>{throw h},0)}function k(){var h=A;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ${constructor(){this.h=this.g=null}add(y,E){const R=F.get();R.set(y,E),this.h?this.h.next=R:this.g=R,this.h=R}}var F=new z(()=>new ue,h=>h.reset());class ue{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let X,B=!1,A=new $,S=()=>{const h=Promise.resolve(void 0);X=()=>{h.then(C)}};function C(){for(var h;h=k();){try{h.h.call(h.g)}catch(E){I(E)}var y=F;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}B=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};u.addEventListener("test",E,y),u.removeEventListener("test",E,y)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function De(h,y){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}b(De,M),De.prototype.init=function(h,y){const E=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(E=="mouseover"?y=h.fromElement:E=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&De.Z.h.call(this)},De.prototype.h=function(){De.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ke="closure_listenable_"+(Math.random()*1e6|0),ee=0;function he(h,y,E,R,K){this.listener=h,this.proxy=null,this.src=y,this.type=E,this.capture=!!R,this.ha=K,this.key=++ee,this.da=this.fa=!1}function pe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ae(h,y,E){for(const R in h)y.call(E,h[R],R,h)}function Pe(h,y){for(const E in h)y.call(void 0,h[E],E,h)}function L(h){const y={};for(const E in h)y[E]=h[E];return y}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(h,y){let E,R;for(let K=1;K<arguments.length;K++){R=arguments[K];for(E in R)h[E]=R[E];for(let ne=0;ne<se.length;ne++)E=se[ne],Object.prototype.hasOwnProperty.call(R,E)&&(h[E]=R[E])}}function de(h){this.src=h,this.g={},this.h=0}de.prototype.add=function(h,y,E,R,K){const ne=h.toString();h=this.g[ne],h||(h=this.g[ne]=[],this.h++);const ge=Se(h,y,R,K);return ge>-1?(y=h[ge],E||(y.fa=!1)):(y=new he(y,this.src,ne,!!R,K),y.fa=E,h.push(y)),y};function _e(h,y){const E=y.type;if(E in h.g){var R=h.g[E],K=Array.prototype.indexOf.call(R,y,void 0),ne;(ne=K>=0)&&Array.prototype.splice.call(R,K,1),ne&&(pe(y),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Se(h,y,E,R){for(let K=0;K<h.length;++K){const ne=h[K];if(!ne.da&&ne.listener==y&&ne.capture==!!E&&ne.ha==R)return K}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),Dt={};function ht(h,y,E,R,K){if(Array.isArray(y)){for(let ne=0;ne<y.length;ne++)ht(h,y[ne],E,R,K);return null}return E=Hi(E),h&&h[ke]?h.J(y,E,m(R)?!!R.capture:!1,K):Ht(h,y,E,!1,R,K)}function Ht(h,y,E,R,K,ne){if(!y)throw Error("Invalid event type");const ge=m(K)?!!K.capture:!!K;let Be=jn(h);if(Be||(h[ze]=Be=new de(h)),E=Be.add(y,E,R,ge,ne),E.proxy)return E;if(R=xi(),E.proxy=R,R.src=h,R.listener=E,h.addEventListener)j||(K=ge),K===void 0&&(K=!1),h.addEventListener(y.toString(),R,K);else if(h.attachEvent)h.attachEvent(Wt(y.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function xi(){function h(E){return y.call(h.src,h.listener,E)}const y=fi;return h}function Pn(h,y,E,R,K){if(Array.isArray(y))for(var ne=0;ne<y.length;ne++)Pn(h,y[ne],E,R,K);else R=m(R)?!!R.capture:!!R,E=Hi(E),h&&h[ke]?(h=h.i,ne=String(y).toString(),ne in h.g&&(y=h.g[ne],E=Se(y,E,R,K),E>-1&&(pe(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete h.g[ne],h.h--)))):h&&(h=jn(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Se(y,E,R,K)),(E=h>-1?y[h]:null)&&qi(E))}function qi(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[ke])_e(y.i,h);else{var E=h.type,R=h.proxy;y.removeEventListener?y.removeEventListener(E,R,h.capture):y.detachEvent?y.detachEvent(Wt(E),R):y.addListener&&y.removeListener&&y.removeListener(R),(E=jn(y))?(_e(E,h),E.h==0&&(E.src=null,y[ze]=null)):pe(h)}}}function Wt(h){return h in Dt?Dt[h]:Dt[h]="on"+h}function fi(h,y){if(h.da)h=!0;else{y=new De(y,this);const E=h.listener,R=h.ha||h.src;h.fa&&qi(h),h=E.call(R,y)}return h}function jn(h){return h=h[ze],h instanceof de?h:null}var as="__closure_events_fn_"+(Math.random()*1e9>>>0);function Hi(h){return typeof h=="function"?h:(h[as]||(h[as]=function(y){return h.handleEvent(y)}),h[as])}function xt(){O.call(this),this.i=new de(this),this.M=this,this.G=null}b(xt,O),xt.prototype[ke]=!0,xt.prototype.removeEventListener=function(h,y,E,R){Pn(this,h,y,E,R)};function ft(h,y){var E,R=h.G;if(R)for(E=[];R;R=R.G)E.push(R);if(h=h.M,R=y.type||y,typeof y=="string")y=new M(y,h);else if(y instanceof M)y.target=y.target||h;else{var K=y;y=new M(R,h),me(y,K)}K=!0;let ne,ge;if(E)for(ge=E.length-1;ge>=0;ge--)ne=y.g=E[ge],K=Fn(ne,R,!0,y)&&K;if(ne=y.g=h,K=Fn(ne,R,!0,y)&&K,K=Fn(ne,R,!1,y)&&K,E)for(ge=0;ge<E.length;ge++)ne=y.g=E[ge],K=Fn(ne,R,!1,y)&&K}xt.prototype.N=function(){if(xt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const E=h.g[y];for(let R=0;R<E.length;R++)pe(E[R]);delete h.g[y],h.h--}}this.G=null},xt.prototype.J=function(h,y,E,R){return this.i.add(String(h),y,!1,E,R)},xt.prototype.K=function(h,y,E,R){return this.i.add(String(h),y,!0,E,R)};function Fn(h,y,E,R){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let K=!0;for(let ne=0;ne<y.length;++ne){const ge=y[ne];if(ge&&!ge.da&&ge.capture==E){const Be=ge.listener,Kt=ge.ha||ge.src;ge.fa&&_e(h.i,ge),K=Be.call(Kt,R)!==!1&&K}}return K&&!R.defaultPrevented}function os(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:u.setTimeout(h,y||0)}function ls(h){h.g=os(()=>{h.g=null,h.i&&(h.i=!1,ls(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Jt extends O{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ls(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fi(h){O.call(this),this.h=h,this.g={}}b(Fi,O);var Rs=[];function Gn(h){Ae(h.g,function(y,E){this.g.hasOwnProperty(E)&&qi(y)},h),h.g={}}Fi.prototype.N=function(){Fi.Z.N.call(this),Gn(this)},Fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xn=u.JSON.stringify,Gi=u.JSON.parse,Cs=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function $n(){}function Ns(){}var Kn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ft(){M.call(this,"d")}b(Ft,M);function pn(){M.call(this,"c")}b(pn,M);var St={},Is=null;function $i(){return Is=Is||new xt}St.Ia="serverreachability";function rr(h){M.call(this,St.Ia,h)}b(rr,M);function ni(h){const y=$i();ft(y,new rr(y))}St.STAT_EVENT="statevent";function Ki(h,y){M.call(this,St.STAT_EVENT,h),this.stat=y}b(Ki,M);function Fe(h){const y=$i();ft(y,new Ki(y,h))}St.Ja="timingevent";function At(h,y){M.call(this,St.Ja,h),this.size=y}b(At,M);function Rt(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},y)}function Lt(){this.g=!0}Lt.prototype.ua=function(){this.g=!1};function yn(h,y,E,R,K,ne){h.info(function(){if(h.g)if(ne){var ge="",Be=ne.split("&");for(let ct=0;ct<Be.length;ct++){var Kt=Be[ct].split("=");if(Kt.length>1){const kt=Kt[0];Kt=Kt[1];const Oi=kt.split("_");ge=Oi.length>=2&&Oi[1]=="type"?ge+(kt+"="+Kt+"&"):ge+(kt+"=redacted&")}}}else ge=null;else ge=ne;return"XMLHTTP REQ ("+R+") [attempt "+K+"]: "+y+`
`+E+`
`+ge})}function Zt(h,y,E,R,K,ne,ge){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+K+"]: "+y+`
`+E+`
`+ne+" "+ge})}function Vt(h,y,E,R){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+gt(h,E)+(R?" "+R:"")})}function Z(h,y){h.info(function(){return"TIMEOUT: "+y})}Lt.prototype.info=function(){};function gt(h,y){if(!h.g)return y;if(!y)return null;try{const ne=JSON.parse(y);if(ne){for(h=0;h<ne.length;h++)if(Array.isArray(ne[h])){var E=ne[h];if(!(E.length<2)){var R=E[1];if(Array.isArray(R)&&!(R.length<1)){var K=R[0];if(K!="noop"&&K!="stop"&&K!="close")for(let ge=1;ge<R.length;ge++)R[ge]=""}}}}return xn(ne)}catch{return y}}var pt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},fe;function un(){}b(un,$n),un.prototype.g=function(){return new XMLHttpRequest},fe=new un;function it(h){return encodeURIComponent(String(h))}function Ot(h){var y=1;h=h.split(":");const E=[];for(;y>0&&h.length;)E.push(h.shift()),y--;return h.length&&E.push(h.join(":")),E}function hn(h,y,E,R){this.j=h,this.i=y,this.l=E,this.S=R||1,this.V=new Fi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new yt}function yt(){this.i=null,this.g="",this.h=!1}var Pt={},$t={};function Ee(h,y,E){h.M=1,h.A=Ni(W(y)),h.u=E,h.R=!0,ar(h,null)}function ar(h,y){h.F=Date.now(),Si(h),h.B=W(h.A);var E=h.B,R=h.S;Array.isArray(R)||(R=[String(R)]),to(E.i,"t",R),h.C=0,E=h.j.L,h.h=new yt,h.g=Au(h.j,E?y:null,!h.u),h.P>0&&(h.O=new Jt(p(h.Y,h,h.g),h.P)),y=h.V,E=h.g,R=h.ba;var K="readystatechange";Array.isArray(K)||(K&&(Rs[0]=K.toString()),K=Rs);for(let ne=0;ne<K.length;ne++){const ge=ht(E,K[ne],R||y.handleEvent,!1,y.h||y);if(!ge)break;y.g[ge.key]=ge}y=h.J?L(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),ni(),yn(h.i,h.v,h.B,h.l,h.S,h.u)}hn.prototype.ba=function(h){h=h.target;const y=this.O;y&&Xi(h)==3?y.j():this.Y(h)},hn.prototype.Y=function(h){try{if(h==this.g)e:{const Be=Xi(this.g),Kt=this.g.ya(),ct=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||Sn(this.g)))){this.K||Be!=4||Kt==7||(Kt==8||ct<=0?ni(3):ni(2)),Ai(this);var y=this.g.ca();this.X=y;var E=Ja(this);if(this.o=y==200,Zt(this.i,this.v,this.B,this.l,this.S,Be,y),this.o){if(this.U&&!this.L){t:{if(this.g){var R,K=this.g;if((R=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(R)){var ne=R;break t}}ne=null}if(h=ne)Vt(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ri(this,h);else{this.o=!1,this.m=3,Fe(12),Ln(this),Qn(this);break e}}if(this.R){h=!0;let kt;for(;!this.K&&this.C<E.length;)if(kt=da(this,E),kt==$t){Be==4&&(this.m=4,Fe(14),h=!1),Vt(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==Pt){this.m=4,Fe(15),Vt(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else Vt(this.i,this.l,kt,null),Ri(this,kt);if(Za(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||E.length!=0||this.h.h||(this.m=1,Fe(16),h=!1),this.o=this.o&&h,!h)Vt(this.i,this.l,E,"[Invalid Chunked Response]"),Ln(this),Qn(this);else if(E.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Al(ge),ge.P=!0,Fe(11))}}else Vt(this.i,this.l,E,null),Ri(this,E);Be==4&&Ln(this),this.o&&!this.K&&(Be==4?Tu(this.j,this):(this.o=!1,Si(this)))}else Os(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,Fe(12)):(this.m=0,Fe(13)),Ln(this),Qn(this)}}}catch{}};function Ja(h){if(!Za(h))return h.g.la();const y=Sn(h.g);if(y==="")return"";let E="";const R=y.length,K=Xi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Ln(h),Qn(h),"";h.h.i=new u.TextDecoder}for(let ne=0;ne<R;ne++)h.h.h=!0,E+=h.h.i.decode(y[ne],{stream:!(K&&ne==R-1)});return y.length=0,h.h.g+=E,h.C=0,h.h.g}function Za(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function da(h,y){var E=h.C,R=y.indexOf(`
`,E);return R==-1?$t:(E=Number(y.substring(E,R)),isNaN(E)?Pt:(R+=1,R+E>y.length?$t:(y=y.slice(R,R+E),h.C=R+E,y)))}hn.prototype.cancel=function(){this.K=!0,Ln(this)};function Si(h){h.T=Date.now()+h.H,or(h,h.H)}function or(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Rt(p(h.aa,h),y)}function Ai(h){h.D&&(u.clearTimeout(h.D),h.D=null)}hn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Z(this.i,this.B),this.M!=2&&(ni(),Fe(17)),Ln(this),this.m=2,Qn(this)):or(this,this.T-h)};function Qn(h){h.j.I==0||h.K||Tu(h.j,h)}function Ln(h){Ai(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Gn(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Ri(h,y){try{var E=h.j;if(E.I!=0&&(E.g==h||Ci(E.h,h))){if(!h.L&&Ci(E.h,h)&&E.I==3){try{var R=E.Ba.g.parse(y)}catch{R=null}if(Array.isArray(R)&&R.length==3){var K=R;if(K[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)ao(E),pr(E);else break e;wa(E),Fe(18)}}else E.xa=K[1],0<E.xa-E.K&&K[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Rt(p(E.Va,E),6e3));ii(E.h)<=1&&E.ta&&(E.ta=void 0)}else ms(E,11)}else if((h.L||E.g==h)&&ao(E),!D(y))for(K=E.Ba.g.parse(y),y=0;y<K.length;y++){let ct=K[y];const kt=ct[0];if(!(kt<=E.K))if(E.K=kt,ct=ct[1],E.I==2)if(ct[0]=="c"){E.M=ct[1],E.ba=ct[2];const Oi=ct[3];Oi!=null&&(E.ka=Oi,E.j.info("VER="+E.ka));const gs=ct[4];gs!=null&&(E.za=gs,E.j.info("SVER="+E.za));const Wi=ct[5];Wi!=null&&typeof Wi=="number"&&Wi>0&&(R=1.5*Wi,E.O=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const Ji=h.g;if(Ji){const xa=Ji.g?Ji.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xa){var ne=R.h;ne.g||xa.indexOf("spdy")==-1&&xa.indexOf("quic")==-1&&xa.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(ga(ne,ne.h),ne.h=null))}if(R.G){const oo=Ji.g?Ji.g.getResponseHeader("X-HTTP-Session-Id"):null;oo&&(R.wa=oo,Ge(R.J,R.G,oo))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),R=E;var ge=h;if(R.na=Su(R,R.L?R.ba:null,R.W),ge.L){cr(R.h,ge);var Be=ge,Kt=R.O;Kt&&(Be.H=Kt),Be.D&&(Ai(Be),Si(Be)),R.g=ge}else bu(R);E.i.length>0&&ds(E)}else ct[0]!="stop"&&ct[0]!="close"||ms(E,7);else E.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?ms(E,7):xl(E):ct[0]!="noop"&&E.l&&E.l.qa(ct),E.A=0)}}ni(4)}catch{}}var Ut=class{constructor(h,y){this.g=h,this.map=y}};function ma(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function lr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ii(h){return h.h?1:h.g?h.g.size:0}function Ci(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function ga(h,y){h.g?h.g.add(y):h.h=y}function cr(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}ma.prototype.cancel=function(){if(this.i=pa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function pa(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const E of h.g.values())y=y.concat(E.G);return y}return N(h.i)}var en=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function G(h,y){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const R=h[E].indexOf("=");let K,ne=null;R>=0?(K=h[E].substring(0,R),ne=h[E].substring(R+1)):K=h[E],y(K,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function te(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof te?(this.l=h.l,ve(this,h.j),this.o=h.o,this.g=h.g,xe(this,h.u),this.h=h.h,et(this,vu(h.i)),this.m=h.m):h&&(y=String(h).match(en))?(this.l=!1,ve(this,y[1]||"",!0),this.o=cs(y[2]||""),this.g=cs(y[3]||"",!0),xe(this,y[4]),this.h=cs(y[5]||"",!0),et(this,y[6]||"",!0),this.m=cs(y[7]||"")):(this.l=!1,this.i=new hr(null,this.l))}te.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(ya(y,eo,!0),":");var E=this.g;return(E||y=="file")&&(h.push("//"),(y=this.o)&&h.push(ya(y,eo,!0),"@"),h.push(it(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(ya(E,E.charAt(0)=="/"?vl:gu,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",ya(E,pu)),h.join("")},te.prototype.resolve=function(h){const y=W(this);let E=!!h.j;E?ve(y,h.j):E=!!h.o,E?y.o=h.o:E=!!h.g,E?y.g=h.g:E=h.u!=null;var R=h.h;if(E)xe(y,h.u);else if(E=!!h.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var K=y.h.lastIndexOf("/");K!=-1&&(R=y.h.slice(0,K+1)+R)}if(K=R,K==".."||K==".")R="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){R=K.lastIndexOf("/",0)==0,K=K.split("/");const ne=[];for(let ge=0;ge<K.length;){const Be=K[ge++];Be=="."?R&&ge==K.length&&ne.push(""):Be==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),R&&ge==K.length&&ne.push("")):(ne.push(Be),R=!0)}R=ne.join("/")}else R=K}return E?y.h=R:E=h.i.toString()!=="",E?et(y,vu(h.i)):E=!!h.m,E&&(y.m=h.m),y};function W(h){return new te(h)}function ve(h,y,E){h.j=E?cs(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function xe(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function et(h,y,E){y instanceof hr?(h.i=y,no(h.i,h.l)):(E||(y=ya(y,ur)),h.i=new hr(y,h.l))}function Ge(h,y,E){h.i.set(y,E)}function Ni(h){return Ge(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function cs(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ya(h,y,E){return typeof h=="string"?(h=encodeURI(h).replace(y,si),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function si(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var eo=/[#\/\?@]/g,gu=/[#\?:]/g,vl=/[#\?]/g,ur=/[#\?@]/g,pu=/#/g;function hr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function ri(h){h.g||(h.g=new Map,h.h=0,h.i&&G(h.i,function(y,E){h.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}i=hr.prototype,i.add=function(h,y){ri(this),this.i=null,h=fr(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(y),this.h+=1,this};function yu(h,y){ri(h),y=fr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function _l(h,y){return ri(h),y=fr(h,y),h.g.has(y)}i.forEach=function(h,y){ri(this),this.g.forEach(function(E,R){E.forEach(function(K){h.call(y,K,R,this)},this)},this)};function bl(h,y){ri(h);let E=[];if(typeof y=="string")_l(h,y)&&(E=E.concat(h.g.get(fr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)E=E.concat(h[y]);return E}i.set=function(h,y){return ri(this),this.i=null,h=fr(this,h),_l(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=bl(this,h),h.length>0?String(h[0]):y):y};function to(h,y,E){yu(h,y),E.length>0&&(h.i=null,h.g.set(fr(h,y),N(E)),h.h+=E.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let R=0;R<y.length;R++){var E=y[R];const K=it(E);E=bl(this,E);for(let ne=0;ne<E.length;ne++){let ge=K;E[ne]!==""&&(ge+="="+it(E[ne])),h.push(ge)}}return this.i=h.join("&")};function vu(h){const y=new hr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function fr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function no(h,y){y&&!h.j&&(ri(h),h.i=null,h.g.forEach(function(E,R){const K=R.toLowerCase();R!=K&&(yu(this,R),to(this,K,E))},h)),h.j=y}function Qi(h,y){const E=new Lt;if(u.Image){const R=new Image;R.onload=v(Ii,E,"TestLoadImage: loaded",!0,y,R),R.onerror=v(Ii,E,"TestLoadImage: error",!1,y,R),R.onabort=v(Ii,E,"TestLoadImage: abort",!1,y,R),R.ontimeout=v(Ii,E,"TestLoadImage: timeout",!1,y,R),u.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else y(!1)}function El(h,y){const E=new Lt,R=new AbortController,K=setTimeout(()=>{R.abort(),Ii(E,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:R.signal}).then(ne=>{clearTimeout(K),ne.ok?Ii(E,"TestPingServer: ok",!0,y):Ii(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(K),Ii(E,"TestPingServer: error",!1,y)})}function Ii(h,y,E,R,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),R(E)}catch{}}function dr(){this.g=new Cs}function us(h){this.i=h.Sb||null,this.h=h.ab||!1}b(us,$n),us.prototype.g=function(){return new va(this.i,this.h)};function va(h,y){xt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(va,xt),i=va.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Yi(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||u).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,mr(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Yi(this)),this.g&&(this.readyState=3,Yi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;io(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function io(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?mr(this):Yi(this),this.readyState==3&&io(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,mr(this))},i.Na=function(h){this.g&&(this.response=h,mr(this))},i.ga=function(){this.g&&mr(this)};function mr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Yi(h)}i.setRequestHeader=function(h,y){this.A.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=y.next();return h.join(`\r
`)};function Yi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(va.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Di(h){let y="";return Ae(h,function(E,R){y+=R,y+=":",y+=E,y+=`\r
`}),y}function _a(h,y,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=Di(E),typeof h=="string"?E!=null&&it(E):Ge(h,y,E))}function vt(h){xt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(vt,xt);var hs=/^https?$/i,Tl=["POST","PUT"];i=vt.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,y,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():fe.g(),this.g.onreadystatechange=w(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(ne){ba(this,ne);return}if(h=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var K in R)E.set(K,R[K]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const ne of R.keys())E.set(ne,R.get(ne));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(ne=>ne.toLowerCase()=="content-type"),K=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(Tl,y,void 0)>=0)||R||K||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,ge]of E)this.g.setRequestHeader(ne,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ne){ba(this,ne)}};function ba(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,wl(h),Ds(h)}function wl(h){h.A||(h.A=!0,ft(h,"complete"),ft(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,ft(this,"complete"),ft(this,"abort"),Ds(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ds(this,!0)),vt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Ea(this):this.Xa())},i.Xa=function(){Ea(this)};function Ea(h){if(h.h&&typeof c<"u"){if(h.v&&Xi(h)==4)setTimeout(h.Ca.bind(h),0);else if(ft(h,"readystatechange"),Xi(h)==4){h.h=!1;try{const ne=h.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var R;if(R=ne===0){let ge=String(h.D).match(en)[1]||null;!ge&&u.self&&u.self.location&&(ge=u.self.location.protocol.slice(0,-1)),R=!hs.test(ge?ge.toLowerCase():"")}E=R}if(E)ft(h,"complete"),ft(h,"success");else{h.o=6;try{var K=Xi(h)>2?h.g.statusText:""}catch{K=""}h.l=K+" ["+h.ca()+"]",wl(h)}}finally{Ds(h)}}}}function Ds(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,y||ft(h,"ready");try{E.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Xi(h){return h.g?h.g.readyState:0}i.ca=function(){try{return Xi(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Gi(y)}};function Sn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Os(h){const y={};h=(h.g&&Xi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(D(h[R]))continue;var E=Ot(h[R]);const K=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ne=y[K]||[];y[K]=ne,ne.push(E)}Pe(y,function(R){return R.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fs(h,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||y}function gr(h){this.za=0,this.i=[],this.j=new Lt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fs("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fs("baseRetryDelayMs",5e3,h),this.Za=fs("retryDelaySeedMs",1e4,h),this.Ta=fs("forwardChannelMaxRetries",2,h),this.va=fs("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ma(h&&h.concurrentRequestLimit),this.Ba=new dr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=gr.prototype,i.ka=8,i.I=1,i.connect=function(h,y,E,R){Fe(0),this.W=h,this.H=y||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.J=Su(this,null,this.W),ds(this)};function xl(h){if(so(h),h.I==3){var y=h.V++,E=W(h.J);if(Ge(E,"SID",h.M),Ge(E,"RID",y),Ge(E,"TYPE","terminate"),Ta(h,E),y=new hn(h,h.j,y),y.M=2,y.A=Ni(W(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&u.Image&&(new Image().src=y.A,E=!0),E||(y.g=Au(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Si(y)}xu(h)}function pr(h){h.g&&(Al(h),h.g.cancel(),h.g=null)}function so(h){pr(h),h.v&&(u.clearTimeout(h.v),h.v=null),ao(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function ds(h){if(!lr(h.h)&&!h.m){h.m=!0;var y=h.Ea;X||S(),B||(X(),B=!0),A.add(y,h),h.D=0}}function ro(h,y){return ii(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Rt(p(h.Ea,h,y),wu(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const K=new hn(this,this.j,h);let ne=this.o;if(this.U&&(ne?(ne=L(ne),me(ne,this.U)):ne=this.U),this.u!==null||this.R||(K.J=ne,ne=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(y+=R,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=_u(this,K,y),E=W(this.J),Ge(E,"RID",h),Ge(E,"CVER",22),this.G&&Ge(E,"X-HTTP-Session-Id",this.G),Ta(this,E),ne&&(this.R?y="headers="+it(Di(ne))+"&"+y:this.u&&_a(E,this.u,ne)),ga(this.h,K),this.Ra&&Ge(E,"TYPE","init"),this.S?(Ge(E,"$req",y),Ge(E,"SID","null"),K.U=!0,Ee(K,E,null)):Ee(K,E,y),this.I=2}}else this.I==3&&(h?Sl(this,h):this.i.length==0||lr(this.h)||Sl(this))};function Sl(h,y){var E;y?E=y.l:E=h.V++;const R=W(h.J);Ge(R,"SID",h.M),Ge(R,"RID",E),Ge(R,"AID",h.K),Ta(h,R),h.u&&h.o&&_a(R,h.u,h.o),E=new hn(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),y&&(h.i=y.G.concat(h.i)),y=_u(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),ga(h.h,E),Ee(E,R,y)}function Ta(h,y){h.H&&Ae(h.H,function(E,R){Ge(y,R,E)}),h.l&&Ae({},function(E,R){Ge(y,R,E)})}function _u(h,y,E){E=Math.min(h.i.length,E);const R=h.l?p(h.l.Ka,h.l,h):null;e:{var K=h.i;let Be=-1;for(;;){const Kt=["count="+E];Be==-1?E>0?(Be=K[0].g,Kt.push("ofs="+Be)):Be=0:Kt.push("ofs="+Be);let ct=!0;for(let kt=0;kt<E;kt++){var ne=K[kt].g;const Oi=K[kt].map;if(ne-=Be,ne<0)Be=Math.max(0,K[kt].g-100),ct=!1;else try{ne="req"+ne+"_"||"";try{var ge=Oi instanceof Map?Oi:Object.entries(Oi);for(const[gs,Wi]of ge){let Ji=Wi;m(Wi)&&(Ji=xn(Wi)),Kt.push(ne+gs+"="+encodeURIComponent(Ji))}}catch(gs){throw Kt.push(ne+"type="+encodeURIComponent("_badmap")),gs}}catch{R&&R(Oi)}}if(ct){ge=Kt.join("&");break e}}ge=void 0}return h=h.i.splice(0,E),y.G=h,ge}function bu(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;X||S(),B||(X(),B=!0),A.add(y,h),h.A=0}}function wa(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Rt(p(h.Da,h),wu(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,Eu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Rt(p(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Fe(10),pr(this),Eu(this))};function Al(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function Eu(h){h.g=new hn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=W(h.na);Ge(y,"RID","rpc"),Ge(y,"SID",h.M),Ge(y,"AID",h.K),Ge(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ge(y,"TO",h.ia),Ge(y,"TYPE","xmlhttp"),Ta(h,y),h.u&&h.o&&_a(y,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Ni(W(y)),E.u=null,E.R=!0,ar(E,h)}i.Va=function(){this.C!=null&&(this.C=null,pr(this),wa(this),Fe(19))};function ao(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function Tu(h,y){var E=null;if(h.g==y){ao(h),Al(h),h.g=null;var R=2}else if(Ci(h.h,y))E=y.G,cr(h.h,y),R=1;else return;if(h.I!=0){if(y.o)if(R==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var K=h.D;R=$i(),ft(R,new At(R,E)),ds(h)}else bu(h);else if(K=y.m,K==3||K==0&&y.X>0||!(R==1&&ro(h,y)||R==2&&wa(h)))switch(E&&E.length>0&&(y=h.h,y.i=y.i.concat(E)),K){case 1:ms(h,5);break;case 4:ms(h,10);break;case 3:ms(h,6);break;default:ms(h,2)}}}function wu(h,y){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*y}function ms(h,y){if(h.j.info("Error code "+y),y==2){var E=p(h.bb,h),R=h.Ua;const K=!R;R=new te(R||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||ve(R,"https"),Ni(R),K?Qi(R.toString(),E):El(R.toString(),E)}else Fe(2);h.I=0,h.l&&h.l.pa(y),xu(h),so(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Fe(2)):(this.j.info("Failed to ping google.com"),Fe(1))};function xu(h){if(h.I=0,h.ja=[],h.l){const y=pa(h.h);(y.length!=0||h.i.length!=0)&&(V(h.ja,y),V(h.ja,h.i),h.h.i.length=0,N(h.i),h.i.length=0),h.l.oa()}}function Su(h,y,E){var R=E instanceof te?W(E):new te(E);if(R.g!="")y&&(R.g=y+"."+R.g),xe(R,R.u);else{var K=u.location;R=K.protocol,y=y?y+"."+K.hostname:K.hostname,K=+K.port;const ne=new te(null);R&&ve(ne,R),y&&(ne.g=y),K&&xe(ne,K),E&&(ne.h=E),R=ne}return E=h.G,y=h.wa,E&&y&&Ge(R,E,y),Ge(R,"VER",h.ka),Ta(h,R),R}function Au(h,y,E){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new vt(new us({ab:E})):new vt(h.ma),y.Fa(h.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ru(){}i=Ru.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function yr(){}yr.prototype.g=function(h,y){return new Yn(h,y)};function Yn(h,y){xt.call(this),this.g=new gr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!D(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!D(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new ks(this)}b(Yn,xt),Yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Yn.prototype.close=function(){xl(this.g)},Yn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=xn(h),h=E);y.i.push(new Ut(y.Ya++,h)),y.I==3&&ds(y)},Yn.prototype.N=function(){this.g.l=null,delete this.j,xl(this.g),delete this.g,Yn.Z.N.call(this)};function Cu(h){Ft.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const E in y){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}b(Cu,Ft);function Nu(){pn.call(this),this.status=1}b(Nu,pn);function ks(h){this.g=h}b(ks,Ru),ks.prototype.ra=function(){ft(this.g,"a")},ks.prototype.qa=function(h){ft(this.g,new Cu(h))},ks.prototype.pa=function(h){ft(this.g,new Nu)},ks.prototype.oa=function(){ft(this.g,"b")},yr.prototype.createWebChannel=yr.prototype.g,Yn.prototype.send=Yn.prototype.o,Yn.prototype.open=Yn.prototype.m,Yn.prototype.close=Yn.prototype.close,SE=function(){return new yr},xE=function(){return $i()},wE=St,Vg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},pt.NO_ERROR=0,pt.TIMEOUT=8,pt.HTTP_ERROR=6,Hh=pt,Gt.COMPLETE="complete",TE=Gt,Ns.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",xt.prototype.listen=xt.prototype.J,fc=Ns,vt.prototype.listenOnce=vt.prototype.K,vt.prototype.getLastError=vt.prototype.Ha,vt.prototype.getLastErrorCode=vt.prototype.ya,vt.prototype.getStatus=vt.prototype.ca,vt.prototype.getResponseJson=vt.prototype.La,vt.prototype.getResponseText=vt.prototype.la,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Fa,EE=vt}).apply(typeof kh<"u"?kh:typeof self<"u"?self:typeof window<"u"?window:{});const cb="@firebase/firestore",ub="4.9.3";class qn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qn.UNAUTHENTICATED=new qn(null),qn.GOOGLE_CREDENTIALS=new qn("google-credentials-uid"),qn.FIRST_PARTY=new qn("first-party-uid"),qn.MOCK_USER=new qn("mock-user");let cl="12.7.0";const Ka=new fp("@firebase/firestore");function Lo(){return Ka.logLevel}function be(i,...e){if(Ka.logLevel<=We.DEBUG){const t=e.map(gp);Ka.debug(`Firestore (${cl}): ${i}`,...t)}}function Zs(i,...e){if(Ka.logLevel<=We.ERROR){const t=e.map(gp);Ka.error(`Firestore (${cl}): ${i}`,...t)}}function Jo(i,...e){if(Ka.logLevel<=We.WARN){const t=e.map(gp);Ka.warn(`Firestore (${cl}): ${i}`,...t)}}function gp(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}function Ne(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,AE(i,r,t)}function AE(i,e,t){let r=`FIRESTORE (${cl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Zs(r),new Error(r)}function at(i,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,i||AE(e,o,r)}function Le(i,e){return i}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends sr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ea{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class RE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(qn.UNAUTHENTICATED)))}shutdown(){}}class sR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class rR{constructor(e){this.t=e,this.currentUser=qn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){at(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let c=new ea;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ea,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ea)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(at(typeof r.accessToken=="string",31837,{l:r}),new RE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string",2055,{h:e}),new qn(e)}}class aR{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=qn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class oR{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new aR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(qn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class hb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ns(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){at(this.o===void 0,3512);const r=c=>{c.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,be("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const o=c=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new hb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(at(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new hb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function cR(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}class pp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=cR(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<t&&(r+=e.charAt(o[c]%62))}return r}}function Je(i,e){return i<e?-1:i>e?1:0}function Pg(i,e){const t=Math.min(i.length,e.length);for(let r=0;r<t;r++){const o=i.charAt(r),c=e.charAt(r);if(o!==c)return hg(o)===hg(c)?Je(o,c):hg(o)?1:-1}return Je(i.length,e.length)}const uR=55296,hR=57343;function hg(i){const e=i.charCodeAt(0);return e>=uR&&e<=hR}function Zo(i,e,t){return i.length===e.length&&i.every(((r,o)=>t(r,e[o])))}const fb="__name__";class bs{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ne(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ne(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return bs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bs?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const c=bs.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return Je(e.length,t.length)}static compareSegments(e,t){const r=bs.isNumericId(e),o=bs.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?bs.extractNumericId(e).compare(bs.extractNumericId(t)):Pg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zr.fromString(e.substring(4,e.length-2))}}class Tt extends bs{construct(e,t,r){return new Tt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new Tt(t)}static emptyPath(){return new Tt([])}}const fR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kn extends bs{construct(e,t,r){return new kn(e,t,r)}static isValidIdentifier(e){return fR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fb}static keyField(){return new kn([fb])}static fromServerFormat(e){const t=[];let r="",o=0;const c=()=>{if(r.length===0)throw new ye(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ye(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ye(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else m==="`"?(u=!u,o++):m!=="."||u?(r+=m,o++):(c(),o++)}if(c(),u)throw new ye(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kn(t)}static emptyPath(){return new kn([])}}class Re{constructor(e){this.path=e}static fromPath(e){return new Re(Tt.fromString(e))}static fromName(e){return new Re(Tt.fromString(e).popFirst(5))}static empty(){return new Re(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new Tt(e.slice()))}}function CE(i,e,t){if(!t)throw new ye(oe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function dR(i,e,t,r){if(e===!0&&r===!0)throw new ye(oe.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function db(i){if(!Re.isDocumentKey(i))throw new ye(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function mb(i){if(Re.isDocumentKey(i))throw new ye(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function NE(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function kf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ne(12329,{type:typeof i})}function Ws(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ye(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kf(i);throw new ye(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function cn(i,e){const t={typeString:i};return e&&(t.value=e),t}function Wc(i,e){if(!NE(i))throw new ye(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const u=i[r];if(o&&typeof u!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&u!==c.value){t=`Expected '${r}' field to equal '${c.value}'`;break}}if(t)throw new ye(oe.INVALID_ARGUMENT,t);return!0}const gb=-62135596800,pb=1e6;class It{static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*pb);return new It(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<gb)throw new ye(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pb}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:It._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wc(e,It._jsonSchema))return new It(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}It._jsonSchemaVersion="firestore/timestamp/1.0",It._jsonSchema={type:cn("string",It._jsonSchemaVersion),seconds:cn("number"),nanoseconds:cn("number")};class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new It(0,0))}static max(){return new Oe(new It(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Pc=-1;function mR(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Oe.fromTimestamp(r===1e9?new It(t+1,0):new It(t,r));return new sa(o,Re.empty(),e)}function gR(i){return new sa(i.readTime,i.key,Pc)}class sa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new sa(Oe.min(),Re.empty(),Pc)}static max(){return new sa(Oe.max(),Re.empty(),Pc)}}function pR(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=Re.comparator(i.documentKey,e.documentKey),t!==0?t:Je(i.largestBatchId,e.largestBatchId))}const yR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ul(i){if(i.code!==oe.FAILED_PRECONDITION||i.message!==yR)throw i;be("LocalStore","Unexpectedly lost primary lease")}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce(((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ce.reject(t)}static resolve(e){return new ce(((t,r)=>{t(e)}))}static reject(e){return new ce(((t,r)=>{r(e)}))}static waitFor(e){return new ce(((t,r)=>{let o=0,c=0,u=!1;e.forEach((m=>{++o,m.next((()=>{++c,u&&c===o&&t()}),(g=>r(g)))})),u=!0,c===o&&t()}))}static or(e){let t=ce.resolve(!1);for(const r of e)t=t.next((o=>o?ce.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,c)=>{r.push(t.call(this,o,c))})),this.waitFor(r)}static mapArray(e,t){return new ce(((r,o)=>{const c=e.length,u=new Array(c);let m=0;for(let g=0;g<c;g++){const p=g;t(e[p]).next((v=>{u[p]=v,++m,m===c&&r(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new ce(((r,o)=>{const c=()=>{e()===!0?t().next((()=>{c()}),o):r()};c()}))}}function _R(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function hl(i){return i.name==="IndexedDbTransactionError"}class Mf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mf.ce=-1;const yp=-1;function Jc(i){return i==null}function af(i){return i===0&&1/i==-1/0}function bR(i){return typeof i=="number"&&Number.isInteger(i)&&!af(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const IE="";function ER(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=yb(e)),e=TR(i.get(t),e);return yb(e)}function TR(i,e){let t=e;const r=i.length;for(let o=0;o<r;o++){const c=i.charAt(o);switch(c){case"\0":t+="";break;case IE:t+="";break;default:t+=c}}return t}function yb(i){return i+IE+""}function vb(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function ha(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function DE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class jt{constructor(e,t){this.comparator=e,this.root=t||Dn.EMPTY}insert(e,t){return new jt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mh(this.root,e,this.comparator,!0)}}class Mh{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dn{constructor(e,t,r,o,c){this.key=e,this.value=t,this.color=r??Dn.RED,this.left=o??Dn.EMPTY,this.right=c??Dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,c){return new Dn(e??this.key,t??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,r),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Dn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1;Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,t,r,o,c){return this}insert(e,t,r){return new Dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gn{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _b(this.data.getIterator())}getIteratorFrom(e){return new _b(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof gn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new gn(this.comparator);return t.data=e,t}}class _b{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ti{constructor(e){this.fields=e,e.sort(kn.comparator)}static empty(){return new Ti([])}unionWith(e){let t=new gn(kn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ti(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zo(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class OE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Mn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new OE("Invalid base64 string: "+c):c}})(e);return new Mn(t)}static fromUint8Array(e){const t=(function(o){let c="";for(let u=0;u<o.length;++u)c+=String.fromCharCode(o[u]);return c})(e);return new Mn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mn.EMPTY_BYTE_STRING=new Mn("");const wR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ra(i){if(at(!!i,39018),typeof i=="string"){let e=0;const t=wR.exec(i);if(at(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xt(i.seconds),nanos:Xt(i.nanos)}}function Xt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function aa(i){return typeof i=="string"?Mn.fromBase64String(i):Mn.fromUint8Array(i)}const kE="server_timestamp",ME="__type__",VE="__previous_value__",PE="__local_write_time__";function vp(i){return(i?.mapValue?.fields||{})[ME]?.stringValue===kE}function Vf(i){const e=i.mapValue.fields[VE];return vp(e)?Vf(e):e}function jc(i){const e=ra(i.mapValue.fields[PE].timestampValue);return new It(e.seconds,e.nanos)}class xR{constructor(e,t,r,o,c,u,m,g,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=v}}const of="(default)";class Lc{constructor(e,t){this.projectId=e,this.database=t||of}static empty(){return new Lc("","")}get isDefaultDatabase(){return this.database===of}isEqual(e){return e instanceof Lc&&e.projectId===this.projectId&&e.database===this.database}}const jE="__type__",SR="__max__",Vh={mapValue:{}},LE="__vector__",lf="value";function oa(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?vp(i)?4:RR(i)?9007199254740991:AR(i)?10:11:Ne(28295,{value:i})}function As(i,e){if(i===e)return!0;const t=oa(i);if(t!==oa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return jc(i).isEqual(jc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const u=ra(o.timestampValue),m=ra(c.timestampValue);return u.seconds===m.seconds&&u.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return aa(o.bytesValue).isEqual(aa(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return Xt(o.geoPointValue.latitude)===Xt(c.geoPointValue.latitude)&&Xt(o.geoPointValue.longitude)===Xt(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Xt(o.integerValue)===Xt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const u=Xt(o.doubleValue),m=Xt(c.doubleValue);return u===m?af(u)===af(m):isNaN(u)&&isNaN(m)}return!1})(i,e);case 9:return Zo(i.arrayValue.values||[],e.arrayValue.values||[],As);case 10:case 11:return(function(o,c){const u=o.mapValue.fields||{},m=c.mapValue.fields||{};if(vb(u)!==vb(m))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(m[g]===void 0||!As(u[g],m[g])))return!1;return!0})(i,e);default:return Ne(52216,{left:i})}}function Uc(i,e){return(i.values||[]).find((t=>As(t,e)))!==void 0}function el(i,e){if(i===e)return 0;const t=oa(i),r=oa(e);if(t!==r)return Je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(i.booleanValue,e.booleanValue);case 2:return(function(c,u){const m=Xt(c.integerValue||c.doubleValue),g=Xt(u.integerValue||u.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(i,e);case 3:return bb(i.timestampValue,e.timestampValue);case 4:return bb(jc(i),jc(e));case 5:return Pg(i.stringValue,e.stringValue);case 6:return(function(c,u){const m=aa(c),g=aa(u);return m.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(c,u){const m=c.split("/"),g=u.split("/");for(let p=0;p<m.length&&p<g.length;p++){const v=Je(m[p],g[p]);if(v!==0)return v}return Je(m.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,u){const m=Je(Xt(c.latitude),Xt(u.latitude));return m!==0?m:Je(Xt(c.longitude),Xt(u.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Eb(i.arrayValue,e.arrayValue);case 10:return(function(c,u){const m=c.fields||{},g=u.fields||{},p=m[lf]?.arrayValue,v=g[lf]?.arrayValue,b=Je(p?.values?.length||0,v?.values?.length||0);return b!==0?b:Eb(p,v)})(i.mapValue,e.mapValue);case 11:return(function(c,u){if(c===Vh.mapValue&&u===Vh.mapValue)return 0;if(c===Vh.mapValue)return 1;if(u===Vh.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),p=u.fields||{},v=Object.keys(p);g.sort(),v.sort();for(let b=0;b<g.length&&b<v.length;++b){const w=Pg(g[b],v[b]);if(w!==0)return w;const N=el(m[g[b]],p[v[b]]);if(N!==0)return N}return Je(g.length,v.length)})(i.mapValue,e.mapValue);default:throw Ne(23264,{he:t})}}function bb(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Je(i,e);const t=ra(i),r=ra(e),o=Je(t.seconds,r.seconds);return o!==0?o:Je(t.nanos,r.nanos)}function Eb(i,e){const t=i.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const c=el(t[o],r[o]);if(c)return c}return Je(t.length,r.length)}function tl(i){return jg(i)}function jg(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=ra(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return aa(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return Re.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",o=!0;for(const c of t.values||[])o?o=!1:r+=",",r+=jg(c);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const u of r)c?c=!1:o+=",",o+=`${u}:${jg(t.fields[u])}`;return o+"}"})(i.mapValue):Ne(61005,{value:i})}function Fh(i){switch(oa(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vf(i);return e?16+Fh(e):16;case 5:return 2*i.stringValue.length;case 6:return aa(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,c)=>o+Fh(c)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return ha(r.fields,((c,u)=>{o+=c.length+Fh(u)})),o})(i.mapValue);default:throw Ne(13486,{value:i})}}function Tb(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Lg(i){return!!i&&"integerValue"in i}function _p(i){return!!i&&"arrayValue"in i}function wb(i){return!!i&&"nullValue"in i}function xb(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Gh(i){return!!i&&"mapValue"in i}function AR(i){return(i?.mapValue?.fields||{})[jE]?.stringValue===LE}function Ec(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return ha(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Ec(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ec(i.arrayValue.values[t]);return e}return{...i}}function RR(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===SR}class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Gh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ec(t)}setAll(e){let t=kn.emptyPath(),r={},o=[];e.forEach(((u,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,r,o),r={},o=[],t=m.popLast()}u?r[m.lastSegment()]=Ec(u):o.push(m.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,r,o)}delete(e){const t=this.field(e.popLast());Gh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return As(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Gh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){ha(t,((o,c)=>e[o]=c));for(const o of r)delete e[o]}clone(){return new Zn(Ec(this.value))}}function UE(i){const e=[];return ha(i.fields,((t,r)=>{const o=new kn([t]);if(Gh(r)){const c=UE(r.mapValue).fields;if(c.length===0)e.push(o);else for(const u of c)e.push(o.child(u))}else e.push(o)})),new Ti(e)}class Tn{constructor(e,t,r,o,c,u,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=c,this.data=u,this.documentState=m}static newInvalidDocument(e){return new Tn(e,0,Oe.min(),Oe.min(),Oe.min(),Zn.empty(),0)}static newFoundDocument(e,t,r,o){return new Tn(e,1,t,Oe.min(),r,o,0)}static newNoDocument(e,t){return new Tn(e,2,t,Oe.min(),Oe.min(),Zn.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,Oe.min(),Oe.min(),Zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class cf{constructor(e,t){this.position=e,this.inclusive=t}}function Sb(i,e,t){let r=0;for(let o=0;o<i.position.length;o++){const c=e[o],u=i.position[o];if(c.field.isKeyField()?r=Re.comparator(Re.fromName(u.referenceValue),t.key):r=el(u,t.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ab(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!As(i.position[t],e.position[t]))return!1;return!0}class uf{constructor(e,t="asc"){this.field=e,this.dir=t}}function CR(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class zE{}class ln extends zE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new IR(e,t,r):t==="array-contains"?new kR(e,r):t==="in"?new MR(e,r):t==="not-in"?new VR(e,r):t==="array-contains-any"?new PR(e,r):new ln(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new DR(e,r):new OR(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(el(t,this.value)):t!==null&&oa(this.value)===oa(t)&&this.matchesComparison(el(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ss extends zE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ss(e,t)}matches(e){return BE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function BE(i){return i.op==="and"}function qE(i){return NR(i)&&BE(i)}function NR(i){for(const e of i.filters)if(e instanceof ss)return!1;return!0}function Ug(i){if(i instanceof ln)return i.field.canonicalString()+i.op.toString()+tl(i.value);if(qE(i))return i.filters.map((e=>Ug(e))).join(",");{const e=i.filters.map((t=>Ug(t))).join(",");return`${i.op}(${e})`}}function HE(i,e){return i instanceof ln?(function(r,o){return o instanceof ln&&r.op===o.op&&r.field.isEqual(o.field)&&As(r.value,o.value)})(i,e):i instanceof ss?(function(r,o){return o instanceof ss&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((c,u,m)=>c&&HE(u,o.filters[m])),!0):!1})(i,e):void Ne(19439)}function FE(i){return i instanceof ln?(function(t){return`${t.field.canonicalString()} ${t.op} ${tl(t.value)}`})(i):i instanceof ss?(function(t){return t.op.toString()+" {"+t.getFilters().map(FE).join(" ,")+"}"})(i):"Filter"}class IR extends ln{constructor(e,t,r){super(e,t,r),this.key=Re.fromName(r.referenceValue)}matches(e){const t=Re.comparator(e.key,this.key);return this.matchesComparison(t)}}class DR extends ln{constructor(e,t){super(e,"in",t),this.keys=GE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class OR extends ln{constructor(e,t){super(e,"not-in",t),this.keys=GE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function GE(i,e){return(e.arrayValue?.values||[]).map((t=>Re.fromName(t.referenceValue)))}class kR extends ln{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _p(t)&&Uc(t.arrayValue,this.value)}}class MR extends ln{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Uc(this.value.arrayValue,t)}}class VR extends ln{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Uc(this.value.arrayValue,t)}}class PR extends ln{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_p(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Uc(this.value.arrayValue,r)))}}class jR{constructor(e,t=null,r=[],o=[],c=null,u=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=u,this.endAt=m,this.Te=null}}function Rb(i,e=null,t=[],r=[],o=null,c=null,u=null){return new jR(i,e,t,r,o,c,u)}function bp(i){const e=Le(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Ug(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),Jc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>tl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>tl(r))).join(",")),e.Te=t}return e.Te}function Ep(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!CR(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!HE(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Ab(i.startAt,e.startAt)&&Ab(i.endAt,e.endAt)}function zg(i){return Re.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class Zc{constructor(e,t=null,r=[],o=[],c=null,u="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=u,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function LR(i,e,t,r,o,c,u,m){return new Zc(i,e,t,r,o,c,u,m)}function Tp(i){return new Zc(i)}function Cb(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function $E(i){return i.collectionGroup!==null}function Tc(i){const e=Le(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let m=new gn(kn.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new uf(c,r))})),t.has(kn.keyField().canonicalString())||e.Ie.push(new uf(kn.keyField(),r))}return e.Ie}function Es(i){const e=Le(i);return e.Ee||(e.Ee=UR(e,Tc(i))),e.Ee}function UR(i,e){if(i.limitType==="F")return Rb(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new uf(o.field,c)}));const t=i.endAt?new cf(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new cf(i.startAt.position,i.startAt.inclusive):null;return Rb(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function Bg(i,e){const t=i.filters.concat([e]);return new Zc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function qg(i,e,t){return new Zc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Pf(i,e){return Ep(Es(i),Es(e))&&i.limitType===e.limitType}function KE(i){return`${bp(Es(i))}|lt:${i.limitType}`}function Uo(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>FE(o))).join(", ")}]`),Jc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>tl(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>tl(o))).join(",")),`Target(${r})`})(Es(i))}; limitType=${i.limitType})`}function jf(i,e){return e.isFoundDocument()&&(function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Re.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(i,e)&&(function(r,o){for(const c of Tc(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(u,m,g){const p=Sb(u,m,g);return u.inclusive?p<=0:p<0})(r.startAt,Tc(r),o)||r.endAt&&!(function(u,m,g){const p=Sb(u,m,g);return u.inclusive?p>=0:p>0})(r.endAt,Tc(r),o))})(i,e)}function zR(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function QE(i){return(e,t)=>{let r=!1;for(const o of Tc(i)){const c=BR(o,e,t);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function BR(i,e,t){const r=i.field.isKeyField()?Re.comparator(e.key,t.key):(function(c,u,m){const g=u.data.field(c),p=m.data.field(c);return g!==null&&p!==null?el(g,p):Ne(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Ne(19790,{direction:i.dir})}}class Xa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ha(this.inner,((t,r)=>{for(const[o,c]of r)e(o,c)}))}isEmpty(){return DE(this.inner)}size(){return this.innerSize}}const qR=new jt(Re.comparator);function er(){return qR}const YE=new jt(Re.comparator);function dc(...i){let e=YE;for(const t of i)e=e.insert(t.key,t);return e}function XE(i){let e=YE;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function qa(){return wc()}function WE(){return wc()}function wc(){return new Xa((i=>i.toString()),((i,e)=>i.isEqual(e)))}const HR=new jt(Re.comparator),FR=new gn(Re.comparator);function Ze(...i){let e=FR;for(const t of i)e=e.add(t);return e}const GR=new gn(Je);function $R(){return GR}function wp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:af(e)?"-0":e}}function JE(i){return{integerValue:""+i}}function KR(i,e){return bR(e)?JE(e):wp(i,e)}class Lf{constructor(){this._=void 0}}function QR(i,e,t){return i instanceof hf?(function(o,c){const u={fields:{[ME]:{stringValue:kE},[PE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&vp(c)&&(c=Vf(c)),c&&(u.fields[VE]=c),{mapValue:u}})(t,e):i instanceof zc?eT(i,e):i instanceof Bc?tT(i,e):(function(o,c){const u=ZE(o,c),m=Nb(u)+Nb(o.Ae);return Lg(u)&&Lg(o.Ae)?JE(m):wp(o.serializer,m)})(i,e)}function YR(i,e,t){return i instanceof zc?eT(i,e):i instanceof Bc?tT(i,e):t}function ZE(i,e){return i instanceof ff?(function(r){return Lg(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class hf extends Lf{}class zc extends Lf{constructor(e){super(),this.elements=e}}function eT(i,e){const t=nT(e);for(const r of i.elements)t.some((o=>As(o,r)))||t.push(r);return{arrayValue:{values:t}}}class Bc extends Lf{constructor(e){super(),this.elements=e}}function tT(i,e){let t=nT(e);for(const r of i.elements)t=t.filter((o=>!As(o,r)));return{arrayValue:{values:t}}}class ff extends Lf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Nb(i){return Xt(i.integerValue||i.doubleValue)}function nT(i){return _p(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function XR(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof zc&&o instanceof zc||r instanceof Bc&&o instanceof Bc?Zo(r.elements,o.elements,As):r instanceof ff&&o instanceof ff?As(r.Ae,o.Ae):r instanceof hf&&o instanceof hf})(i.transform,e.transform)}class WR{constructor(e,t){this.version=e,this.transformResults=t}}class ei{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ei}static exists(e){return new ei(void 0,e)}static updateTime(e){return new ei(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $h(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Uf{}function iT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new xp(i.key,ei.none()):new eu(i.key,i.data,ei.none());{const t=i.data,r=Zn.empty();let o=new gn(kn.comparator);for(let c of e.fields)if(!o.has(c)){let u=t.field(c);u===null&&c.length>1&&(c=c.popLast(),u=t.field(c)),u===null?r.delete(c):r.set(c,u),o=o.add(c)}return new fa(i.key,r,new Ti(o.toArray()),ei.none())}}function JR(i,e,t){i instanceof eu?(function(o,c,u){const m=o.value.clone(),g=Db(o.fieldTransforms,c,u.transformResults);m.setAll(g),c.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(i,e,t):i instanceof fa?(function(o,c,u){if(!$h(o.precondition,c))return void c.convertToUnknownDocument(u.version);const m=Db(o.fieldTransforms,c,u.transformResults),g=c.data;g.setAll(sT(o)),g.setAll(m),c.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(i,e,t):(function(o,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function xc(i,e,t,r){return i instanceof eu?(function(c,u,m,g){if(!$h(c.precondition,u))return m;const p=c.value.clone(),v=Ob(c.fieldTransforms,g,u);return p.setAll(v),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(i,e,t,r):i instanceof fa?(function(c,u,m,g){if(!$h(c.precondition,u))return m;const p=Ob(c.fieldTransforms,g,u),v=u.data;return v.setAll(sT(c)),v.setAll(p),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((b=>b.field)))})(i,e,t,r):(function(c,u,m){return $h(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):m})(i,e,t)}function ZR(i,e){let t=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),c=ZE(r.transform,o||null);c!=null&&(t===null&&(t=Zn.empty()),t.set(r.field,c))}return t||null}function Ib(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Zo(r,o,((c,u)=>XR(c,u)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class eu extends Uf{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class fa extends Uf{constructor(e,t,r,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function sT(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function Db(i,e,t){const r=new Map;at(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let o=0;o<t.length;o++){const c=i[o],u=c.transform,m=e.data.field(c.field);r.set(c.field,YR(u,m,t[o]))}return r}function Ob(i,e,t){const r=new Map;for(const o of i){const c=o.transform,u=t.data.field(o.field);r.set(o.field,QR(c,u,e))}return r}class xp extends Uf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rT extends Uf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class eC{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&JR(c,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=xc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=xc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=WE();return this.mutations.forEach((o=>{const c=e.get(o.key),u=c.overlayedDocument;let m=this.applyToLocalView(u,c.mutatedFields);m=t.has(o.key)?null:m;const g=iT(u,m);g!==null&&r.set(o.key,g),u.isValidDocument()||u.convertToNoDocument(Oe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&Zo(this.mutations,e.mutations,((t,r)=>Ib(t,r)))&&Zo(this.baseMutations,e.baseMutations,((t,r)=>Ib(t,r)))}}class Sp{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){at(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return HR})();const c=e.mutations;for(let u=0;u<c.length;u++)o=o.insert(c[u].key,r[u].version);return new Sp(e,t,r,o)}}class tC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class nC{constructor(e,t){this.count=e,this.unchangedNames=t}}var on,st;function aT(i){switch(i){case oe.OK:return Ne(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Ne(15467,{code:i})}}function oT(i){if(i===void 0)return Zs("GRPC error has no .code"),oe.UNKNOWN;switch(i){case on.OK:return oe.OK;case on.CANCELLED:return oe.CANCELLED;case on.UNKNOWN:return oe.UNKNOWN;case on.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case on.INTERNAL:return oe.INTERNAL;case on.UNAVAILABLE:return oe.UNAVAILABLE;case on.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case on.NOT_FOUND:return oe.NOT_FOUND;case on.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case on.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case on.ABORTED:return oe.ABORTED;case on.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case on.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case on.DATA_LOSS:return oe.DATA_LOSS;default:return Ne(39323,{code:i})}}(st=on||(on={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";function iC(){return new TextEncoder}const sC=new Zr([4294967295,4294967295],0);function kb(i){const e=iC().encode(i),t=new bE;return t.update(e),new Uint8Array(t.digest())}function Mb(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Zr([t,r],0),new Zr([o,c],0)]}class Ap{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new mc(`Invalid padding: ${t}`);if(r<0)throw new mc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new mc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new mc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Zr.fromNumber(this.ge)}ye(e,t,r){let o=e.add(t.multiply(Zr.fromNumber(r)));return o.compare(sC)===1&&(o=new Zr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=kb(e),[r,o]=Mb(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(r,o,c);if(!this.we(u))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new Ap(c,o,t);return r.forEach((m=>u.insert(m))),u}insert(e){if(this.ge===0)return;const t=kb(e),[r,o]=Mb(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(r,o,c);this.Se(u)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class mc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zf{constructor(e,t,r,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,tu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new zf(Oe.min(),o,new jt(Je),er(),Ze())}}class tu{constructor(e,t,r,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new tu(r,t,Ze(),Ze(),Ze())}}class Kh{constructor(e,t,r,o){this.be=e,this.removedTargetIds=t,this.key=r,this.De=o}}class lT{constructor(e,t){this.targetId=e,this.Ce=t}}class cT{constructor(e,t,r=Mn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Vb{constructor(){this.ve=0,this.Fe=Pb(),this.Me=Mn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),t=Ze(),r=Ze();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Ne(38017,{changeType:c})}})),new tu(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Pb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,at(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class rC{constructor(e){this.Ge=e,this.ze=new Map,this.je=er(),this.Je=Ph(),this.He=Ph(),this.Ye=new jt(Je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ne(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,r=e.Ce.count,o=this.ot(t);if(o){const c=o.target;if(zg(c))if(r===0){const u=new Re(c.path);this.et(t,u,Tn.newNoDocument(u,Oe.min()))}else at(r===1,20013,{expectedCount:r});else{const u=this._t(t);if(u!==r){const m=this.ut(e),g=m?this.ct(m,e,u):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=t;let u,m;try{u=aa(r).toUint8Array()}catch(g){if(g instanceof OE)return Jo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Ap(u,o,c)}catch(g){return Jo(g instanceof mc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let o=0;return r.forEach((c=>{const u=this.Ge.ht(),m=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(t,c,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((c,u)=>{const m=this.ot(u);if(m){if(c.current&&zg(m.target)){const g=new Re(m.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,Tn.newNoDocument(g,e))}c.Be&&(t.set(u,c.ke()),c.qe())}}));let r=Ze();this.He.forEach(((c,u)=>{let m=!0;u.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const o=new zf(e,t,this.Ye,this.je,r);return this.je=er(),this.Je=Ph(),this.He=Ph(),this.Ye=new jt(Je),o}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Vb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new gn(Je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new gn(Je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||be("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Vb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ph(){return new jt(Re.comparator)}function Pb(){return new jt(Re.comparator)}const aC={asc:"ASCENDING",desc:"DESCENDING"},oC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lC={and:"AND",or:"OR"};class cC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hg(i,e){return i.useProto3Json||Jc(e)?e:{value:e}}function df(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function uC(i,e){return df(i,e.toTimestamp())}function wi(i){return at(!!i,49232),Oe.fromTimestamp((function(t){const r=ra(t);return new It(r.seconds,r.nanos)})(i))}function Rp(i,e){return Fg(i,e).canonicalString()}function Fg(i,e){const t=(function(o){return new Tt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?t:t.child(e)}function hT(i){const e=Tt.fromString(i);return at(yT(e),10190,{key:e.toString()}),e}function mf(i,e){return Rp(i.databaseId,e.path)}function Sc(i,e){const t=hT(e);if(t.get(1)!==i.databaseId.projectId)throw new ye(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ye(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Re(dT(t))}function fT(i,e){return Rp(i.databaseId,e)}function hC(i){const e=hT(i);return e.length===4?Tt.emptyPath():dT(e)}function Gg(i){return new Tt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function dT(i){return at(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function jb(i,e,t){return{name:mf(i,e),fields:t.value.mapValue.fields}}function fC(i,e){return"found"in e?(function(r,o){at(!!o.found,43571),o.found.name,o.found.updateTime;const c=Sc(r,o.found.name),u=wi(o.found.updateTime),m=o.found.createTime?wi(o.found.createTime):Oe.min(),g=new Zn({mapValue:{fields:o.found.fields}});return Tn.newFoundDocument(c,u,m,g)})(i,e):"missing"in e?(function(r,o){at(!!o.missing,3894),at(!!o.readTime,22933);const c=Sc(r,o.missing),u=wi(o.readTime);return Tn.newNoDocument(c,u)})(i,e):Ne(7234,{result:e})}function dC(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ne(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(p,v){return p.useProto3Json?(at(v===void 0||typeof v=="string",58123),Mn.fromBase64String(v||"")):(at(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Mn.fromUint8Array(v||new Uint8Array))})(i,e.targetChange.resumeToken),u=e.targetChange.cause,m=u&&(function(p){const v=p.code===void 0?oe.UNKNOWN:oT(p.code);return new ye(v,p.message||"")})(u);t=new cT(r,o,c,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Sc(i,r.document.name),c=wi(r.document.updateTime),u=r.document.createTime?wi(r.document.createTime):Oe.min(),m=new Zn({mapValue:{fields:r.document.fields}}),g=Tn.newFoundDocument(o,c,u,m),p=r.targetIds||[],v=r.removedTargetIds||[];t=new Kh(p,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Sc(i,r.document),c=r.readTime?wi(r.readTime):Oe.min(),u=Tn.newNoDocument(o,c),m=r.removedTargetIds||[];t=new Kh([],m,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Sc(i,r.document),c=r.removedTargetIds||[];t=new Kh([],c,o,null)}else{if(!("filter"in e))return Ne(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,u=new nC(o,c),m=r.targetId;t=new lT(m,u)}}return t}function mT(i,e){let t;if(e instanceof eu)t={update:jb(i,e.key,e.value)};else if(e instanceof xp)t={delete:mf(i,e.key)};else if(e instanceof fa)t={update:jb(i,e.key,e.data),updateMask:TC(e.fieldMask)};else{if(!(e instanceof rT))return Ne(16599,{Vt:e.type});t={verify:mf(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(c,u){const m=u.transform;if(m instanceof hf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof zc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Bc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof ff)return{fieldPath:u.field.canonicalString(),increment:m.Ae};throw Ne(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:uC(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ne(27497)})(i,e.precondition)),t}function mC(i,e){return i&&i.length>0?(at(e!==void 0,14353),i.map((t=>(function(o,c){let u=o.updateTime?wi(o.updateTime):wi(c);return u.isEqual(Oe.min())&&(u=wi(c)),new WR(u,o.transformResults||[])})(t,e)))):[]}function gC(i,e){return{documents:[fT(i,e.path)]}}function pC(i,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=fT(i,o);const c=(function(p){if(p.length!==0)return pT(ss.create(p,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const u=(function(p){if(p.length!==0)return p.map((v=>(function(w){return{field:zo(w.field),direction:_C(w.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const m=Hg(i,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function yC(i){let e=hC(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){at(r===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let c=[];t.where&&(c=(function(b){const w=gT(b);return w instanceof ss&&qE(w)?w.getFilters():[w]})(t.where));let u=[];t.orderBy&&(u=(function(b){return b.map((w=>(function(V){return new uf(Bo(V.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(w)))})(t.orderBy));let m=null;t.limit&&(m=(function(b){let w;return w=typeof b=="object"?b.value:b,Jc(w)?null:w})(t.limit));let g=null;t.startAt&&(g=(function(b){const w=!!b.before,N=b.values||[];return new cf(N,w)})(t.startAt));let p=null;return t.endAt&&(p=(function(b){const w=!b.before,N=b.values||[];return new cf(N,w)})(t.endAt)),LR(e,o,u,c,m,"F",g,p)}function vC(i,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function gT(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Bo(t.unaryFilter.field);return ln.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Bo(t.unaryFilter.field);return ln.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Bo(t.unaryFilter.field);return ln.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Bo(t.unaryFilter.field);return ln.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(i):i.fieldFilter!==void 0?(function(t){return ln.create(Bo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return ss.create(t.compositeFilter.filters.map((r=>gT(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(t.compositeFilter.op))})(i):Ne(30097,{filter:i})}function _C(i){return aC[i]}function bC(i){return oC[i]}function EC(i){return lC[i]}function zo(i){return{fieldPath:i.canonicalString()}}function Bo(i){return kn.fromServerFormat(i.fieldPath)}function pT(i){return i instanceof ln?(function(t){if(t.op==="=="){if(xb(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NAN"}};if(wb(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(xb(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NAN"}};if(wb(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(t.field),op:bC(t.op),value:t.value}}})(i):i instanceof ss?(function(t){const r=t.getFilters().map((o=>pT(o)));return r.length===1?r[0]:{compositeFilter:{op:EC(t.op),filters:r}}})(i):Ne(54877,{filter:i})}function TC(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function yT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class Yr{constructor(e,t,r,o,c=Oe.min(),u=Oe.min(),m=Mn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class wC{constructor(e){this.yt=e}}function xC(i){const e=yC({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?qg(e,e.limit,"L"):e}class SC{constructor(){this.Cn=new AC}addToCollectionParentIndex(e,t){return this.Cn.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(sa.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(sa.min())}updateCollectionGroup(e,t,r){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class AC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new gn(Tt.comparator),c=!o.has(r);return this.index[t]=o.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new gn(Tt.comparator)).toArray()}}const Lb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vT=41943040;class hi{static withCacheSize(e){return new hi(e,hi.DEFAULT_COLLECTION_PERCENTILE,hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}hi.DEFAULT_COLLECTION_PERCENTILE=10,hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hi.DEFAULT=new hi(vT,hi.DEFAULT_COLLECTION_PERCENTILE,hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hi.DISABLED=new hi(-1,0,0);class nl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new nl(0)}static cr(){return new nl(-1)}}const Ub="LruGarbageCollector",RC=1048576;function zb([i,e],[t,r]){const o=Je(i,t);return o===0?Je(e,r):o}class CC{constructor(e){this.Ir=e,this.buffer=new gn(zb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();zb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class NC{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){be(Ub,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){hl(t)?be(Ub,"Ignoring IndexedDB error during garbage collection: ",t):await ul(t)}await this.Vr(3e5)}))}}class IC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ce.resolve(Mf.ce);const r=new CC(t);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(Lb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,o,c,u,m,g,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,u=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(r=b,m=Date.now(),this.removeTargets(e,r,t)))).next((b=>(c=b,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(p=Date.now(),Lo()<=We.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(m-u)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${b} documents in `+(p-g)+`ms
Total Duration: ${p-v}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:b}))))}}function DC(i,e){return new IC(i,e)}class OC{constructor(){this.changes=new Xa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class kC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class MC{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&xc(r.mutation,o,Ti.empty(),It.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ze()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ze()){const o=qa();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((c=>{let u=dc();return c.forEach(((m,g)=>{u=u.insert(m,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=qa();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ze())))}populateOverlays(e,t,r){const o=[];return r.forEach((c=>{t.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((u,m)=>{t.set(u,m)}))}))}computeViews(e,t,r,o){let c=er();const u=wc(),m=(function(){return wc()})();return t.forEach(((g,p)=>{const v=r.get(p.key);o.has(p.key)&&(v===void 0||v.mutation instanceof fa)?c=c.insert(p.key,p):v!==void 0?(u.set(p.key,v.mutation.getFieldMask()),xc(v.mutation,p,v.mutation.getFieldMask(),It.now())):u.set(p.key,Ti.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((p,v)=>u.set(p,v))),t.forEach(((p,v)=>m.set(p,new kC(v,u.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,t){const r=wc();let o=new jt(((u,m)=>u-m)),c=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const m of u)m.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let v=r.get(g)||Ti.empty();v=m.applyToLocalView(p,v),r.set(g,v);const b=(o.get(m.batchId)||Ze()).add(g);o=o.insert(m.batchId,b)}))})).next((()=>{const u=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,v=g.value,b=WE();v.forEach((w=>{if(!c.has(w)){const N=iT(t.get(w),r.get(w));N!==null&&b.set(w,N),c=c.add(w)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,b))}return ce.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(u){return Re.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$E(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((c=>{const u=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-c.size):ce.resolve(qa());let m=Pc,g=c;return u.next((p=>ce.forEach(p,((v,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),c.get(v)?ce.resolve():this.remoteDocumentCache.getEntry(e,v).next((w=>{g=g.insert(v,w)}))))).next((()=>this.populateOverlays(e,p,c))).next((()=>this.computeViews(e,g,p,Ze()))).next((v=>({batchId:m,changes:XE(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Re(t)).next((r=>{let o=dc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const c=t.collectionGroup;let u=dc();return this.indexManager.getCollectionParents(e,c).next((m=>ce.forEach(m,(g=>{const p=(function(b,w){return new Zc(w,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,p,r,o).next((v=>{v.forEach(((b,w)=>{u=u.insert(b,w)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,c,o)))).next((u=>{c.forEach(((g,p)=>{const v=p.getKey();u.get(v)===null&&(u=u.insert(v,Tn.newInvalidDocument(v)))}));let m=dc();return u.forEach(((g,p)=>{const v=c.get(g);v!==void 0&&xc(v.mutation,p,Ti.empty(),It.now()),jf(t,p)&&(m=m.insert(g,p))})),m}))}}class VC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ce.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:wi(o.createTime)}})(t)),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:xC(o.bundledQuery),readTime:wi(o.readTime)}})(t)),ce.resolve()}}class PC{constructor(){this.overlays=new jt(Re.comparator),this.qr=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const r=qa();return ce.forEach(t,(o=>this.getOverlay(e,o).next((c=>{c!==null&&r.set(o,c)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,c)=>{this.St(e,t,c)})),ce.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),ce.resolve()}getOverlaysForCollection(e,t,r){const o=qa(),c=t.length+1,u=new Re(t.child("")),m=this.overlays.getIteratorFrom(u);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===c&&g.largestBatchId>r&&o.set(g.getKey(),g)}return ce.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let c=new jt(((p,v)=>p-v));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let v=c.get(p.largestBatchId);v===null&&(v=qa(),c=c.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const m=qa(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,v)=>m.set(p,v))),!(m.size()>=o)););return ce.resolve(m)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new tC(t,r));let c=this.qr.get(t);c===void 0&&(c=Ze(),this.qr.set(t,c)),this.qr.set(t,c.add(r.key))}}class jC{constructor(){this.sessionToken=Mn.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ce.resolve()}}class Cp{constructor(){this.Qr=new gn(bn.$r),this.Ur=new gn(bn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new bn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new bn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Re(new Tt([])),r=new bn(t,e),o=new bn(t,e+1),c=[];return this.Ur.forEachInRange([r,o],(u=>{this.Gr(u),c.push(u.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Re(new Tt([])),r=new bn(t,e),o=new bn(t,e+1);let c=Ze();return this.Ur.forEachInRange([r,o],(u=>{c=c.add(u.key)})),c}containsKey(e){const t=new bn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class bn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Re.comparator(e.key,t.key)||Je(e.Yr,t.Yr)}static Kr(e,t){return Je(e.Yr,t.Yr)||Re.comparator(e.key,t.key)}}class LC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new gn(bn.$r)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new eC(c,t,r,o);this.mutationQueue.push(u);for(const m of o)this.Zr=this.Zr.add(new bn(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ce.resolve(u)}lookupMutationBatch(e,t){return ce.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ei(r),c=o<0?0:o;return ce.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?yp:this.tr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new bn(t,0),o=new bn(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,o],(u=>{const m=this.Xr(u.Yr);c.push(m)})),ce.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gn(Je);return t.forEach((o=>{const c=new bn(o,0),u=new bn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,u],(m=>{r=r.add(m.Yr)}))})),ce.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let c=r;Re.isDocumentKey(c)||(c=c.child(""));const u=new bn(new Re(c),0);let m=new gn(Je);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),u),ce.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){at(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ce.forEach(t.mutations,(o=>{const c=new bn(o.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new bn(t,0),o=this.Zr.firstAfterOrEqual(r);return ce.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class UC{constructor(e){this.ri=e,this.docs=(function(){return new jt(Re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),c=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ce.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let r=er();return t.forEach((o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():Tn.newInvalidDocument(o))})),ce.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let c=er();const u=t.path,m=new Re(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:v}}=g.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||pR(gR(v),r)<=0||(o.has(v.key)||jf(t,v))&&(c=c.insert(v.key,v.mutableCopy()))}return ce.resolve(c)}getAllFromCollectionGroup(e,t,r,o){Ne(9500)}ii(e,t){return ce.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new zC(this)}getSize(e){return ce.resolve(this.size)}}class zC extends OC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),ce.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class BC{constructor(e){this.persistence=e,this.si=new Xa((t=>bp(t)),Ep),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.oi=0,this._i=new Cp,this.targetCount=0,this.ai=nl.ur()}forEachTarget(e,t){return this.si.forEach(((r,o)=>t(o))),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ce.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new nl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.Pr(t),ce.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,r){let o=0;const c=[];return this.si.forEach(((u,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.si.delete(u),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ce.waitFor(c).next((()=>o))}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ce.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ce.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach((u=>{c.push(o.markPotentiallyOrphaned(e,u))})),ce.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ce.resolve(r)}containsKey(e,t){return ce.resolve(this._i.containsKey(t))}}class _T{constructor(e,t){this.ui={},this.overlays={},this.ci=new Mf(0),this.li=!1,this.li=!0,this.hi=new jC,this.referenceDelegate=e(this),this.Pi=new BC(this),this.indexManager=new SC,this.remoteDocumentCache=(function(o){return new UC(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new wC(t),this.Ii=new VC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new LC(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){be("MemoryPersistence","Starting transaction:",e);const o=new qC(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,t){return ce.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class qC extends vR{constructor(e){super(),this.currentSequenceNumber=e}}class Np{constructor(e){this.persistence=e,this.Ri=new Cp,this.Vi=null}static mi(e){return new Np(e)}get fi(){if(this.Vi)return this.Vi;throw Ne(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ce.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.fi,(r=>{const o=Re.fromPath(r);return this.gi(e,o).next((c=>{c||t.removeEntry(o,Oe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ce.or([()=>ce.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class gf{constructor(e,t){this.persistence=e,this.pi=new Xa((r=>ER(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=DC(this,t)}static mi(e,t){return new gf(e,t)}Ei(){}di(e){return ce.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ce.forEach(this.pi,((r,o)=>this.br(e,r,o).next((c=>c?ce.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((m=>{m||(r++,c.removeEntry(u,Oe.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ce.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ce.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ce.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ce.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Fh(e.data.value)),t}br(e,t,r){return ce.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ce.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ip{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=o}static As(e,t){let r=Ze(),o=Ze();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Ip(e,t.fromCache,r,o)}}class HC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class FC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return UA()?8:_R(Hn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,o){const c={result:null};return this.ys(e,t).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ws(e,t,o,r).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new HC;return this.Ss(e,t,u).next((m=>{if(c.result=m,this.Vs)return this.bs(e,t,u,m.size)}))})).next((()=>c.result))}bs(e,t,r,o){return r.documentReadCount<this.fs?(Lo()<=We.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",Uo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ce.resolve()):(Lo()<=We.DEBUG&&be("QueryEngine","Query:",Uo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(Lo()<=We.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",Uo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Es(t))):ce.resolve())}ys(e,t){if(Cb(t))return ce.resolve(null);let r=Es(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=qg(t,null,"F"),r=Es(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const u=Ze(...c);return this.ps.getDocuments(e,u).next((m=>this.indexManager.getMinOffset(e,r).next((g=>{const p=this.Ds(t,m);return this.Cs(t,p,u,g.readTime)?this.ys(e,qg(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,r,o){return Cb(t)||o.isEqual(Oe.min())?ce.resolve(null):this.ps.getDocuments(e,r).next((c=>{const u=this.Ds(t,c);return this.Cs(t,u,r,o)?ce.resolve(null):(Lo()<=We.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Uo(t)),this.vs(e,u,t,mR(o,Pc)).next((m=>m)))}))}Ds(e,t){let r=new gn(QE(e));return t.forEach(((o,c)=>{jf(e,c)&&(r=r.add(c))})),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,t,r){return Lo()<=We.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",Uo(t)),this.ps.getDocumentsMatchingQuery(e,t,sa.min(),r)}vs(e,t,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((c=>(t.forEach((u=>{c=c.insert(u.key,u)})),c)))}}const Dp="LocalStore",GC=3e8;class $C{constructor(e,t,r,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new jt(Je),this.xs=new Xa((c=>bp(c)),Ep),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function KC(i,e,t,r){return new $C(i,e,t,r)}async function bT(i,e){const t=Le(i);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((c=>(o=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((c=>{const u=[],m=[];let g=Ze();for(const p of o){u.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}for(const p of c){m.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(r,g).next((p=>({Ls:p,removedBatchIds:u,addedBatchIds:m})))}))}))}function QC(i,e){const t=Le(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,v){const b=p.batch,w=b.keys();let N=ce.resolve();return w.forEach((V=>{N=N.next((()=>v.getEntry(g,V))).next((z=>{const I=p.docVersions.get(V);at(I!==null,48541),z.version.compareTo(I)<0&&(b.applyToRemoteDocument(z,p),z.isValidDocument()&&(z.setReadTime(p.commitVersion),v.addEntry(z)))}))})),N.next((()=>m.mutationQueue.removeMutationBatch(g,b)))})(t,r,e,c).next((()=>c.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=Ze();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function ET(i){const e=Le(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function YC(i,e){const t=Le(i),r=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((v,b)=>{const w=o.get(b);if(!w)return;m.push(t.Pi.removeMatchingKeys(c,v.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(c,v.addedDocuments,b))));let N=w.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(b)!==null?N=N.withResumeToken(Mn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,r)),o=o.insert(b,N),(function(z,I,k){return z.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=GC?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(w,N,v)&&m.push(t.Pi.updateTargetData(c,N))}));let g=er(),p=Ze();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,v))})),m.push(XC(c,u,e.documentUpdates).next((v=>{g=v.ks,p=v.qs}))),!r.isEqual(Oe.min())){const v=t.Pi.getLastRemoteSnapshotVersion(c).next((b=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));m.push(v)}return ce.waitFor(m).next((()=>u.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,p))).next((()=>g))})).then((c=>(t.Ms=o,c)))}function XC(i,e,t){let r=Ze(),o=Ze();return t.forEach((c=>r=r.add(c))),e.getEntries(i,r).next((c=>{let u=er();return t.forEach(((m,g)=>{const p=c.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Oe.min())?(e.removeEntry(m,g.readTime),u=u.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),u=u.insert(m,g)):be(Dp,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:u,qs:o}}))}function WC(i,e){const t=Le(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=yp),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function JC(i,e){const t=Le(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.Pi.getTargetData(r,e).next((c=>c?(o=c,ce.resolve(o)):t.Pi.allocateTargetId(r).next((u=>(o=new Yr(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function $g(i,e,t){const r=Le(i),o=r.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",c,(u=>r.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!hl(u))throw u;be(Dp,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function Bb(i,e,t){const r=Le(i);let o=Oe.min(),c=Ze();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,p,v){const b=Le(g),w=b.xs.get(v);return w!==void 0?ce.resolve(b.Ms.get(w)):b.Pi.getTargetData(p,v)})(r,u,Es(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(u,m.targetId).next((g=>{c=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(u,e,t?o:Oe.min(),t?c:Ze()))).next((m=>(ZC(r,zR(e),m),{documents:m,Qs:c})))))}function ZC(i,e,t){let r=i.Os.get(e)||Oe.min();t.forEach(((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),i.Os.set(e,r)}class qb{constructor(){this.activeTargetIds=$R()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eN{constructor(){this.Mo=new qb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new qb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class tN{Oo(e){}shutdown(){}}const Hb="ConnectivityMonitor";class Fb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){be(Hb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){be(Hb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let jh=null;function Kg(){return jh===null?jh=(function(){return 268435456+Math.round(2147483648*Math.random())})():jh++,"0x"+jh.toString(16)}const fg="RestConnection",nN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===of?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,t,r,o,c){const u=Kg(),m=this.zo(e,t.toUriEncodedString());be(fg,`Sending RPC '${e}' ${u}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:p}=new URL(m),v=ol(p);return this.Jo(e,m,g,r,v).then((b=>(be(fg,`Received RPC '${e}' ${u}: `,b),b)),(b=>{throw Jo(fg,`RPC '${e}' ${u} failed with error: `,b,"url: ",m,"request:",r),b}))}Ho(e,t,r,o,c,u){return this.Go(e,t,r,o,c)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+cl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,c)=>e[c]=o)),r&&r.headers.forEach(((o,c)=>e[c]=o))}zo(e,t){const r=nN[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class sN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const zn="WebChannelConnection";class rN extends iN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,c){const u=Kg();return new Promise(((m,g)=>{const p=new EE;p.setWithCredentials(!0),p.listenOnce(TE.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Hh.NO_ERROR:const b=p.getResponseJson();be(zn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),m(b);break;case Hh.TIMEOUT:be(zn,`RPC '${e}' ${u} timed out`),g(new ye(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Hh.HTTP_ERROR:const w=p.getStatus();if(be(zn,`RPC '${e}' ${u} failed with status:`,w,"response text:",p.getResponseText()),w>0){let N=p.getResponseJson();Array.isArray(N)&&(N=N[0]);const V=N?.error;if(V&&V.status&&V.message){const z=(function(k){const $=k.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf($)>=0?$:oe.UNKNOWN})(V.status);g(new ye(z,V.message))}else g(new ye(oe.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new ye(oe.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{be(zn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);be(zn,`RPC '${e}' ${u} sending request:`,o),p.send(t,"POST",v,r,15)}))}T_(e,t,r){const o=Kg(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=SE(),m=xE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const v=c.join("");be(zn,`Creating RPC '${e}' stream ${o}: ${v}`,g);const b=u.createWebChannel(v,g);this.I_(b);let w=!1,N=!1;const V=new sN({Yo:I=>{N?be(zn,`Not sending because RPC '${e}' stream ${o} is closed:`,I):(w||(be(zn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),w=!0),be(zn,`RPC '${e}' stream ${o} sending:`,I),b.send(I))},Zo:()=>b.close()}),z=(I,k,$)=>{I.listen(k,(F=>{try{$(F)}catch(ue){setTimeout((()=>{throw ue}),0)}}))};return z(b,fc.EventType.OPEN,(()=>{N||(be(zn,`RPC '${e}' stream ${o} transport opened.`),V.o_())})),z(b,fc.EventType.CLOSE,(()=>{N||(N=!0,be(zn,`RPC '${e}' stream ${o} transport closed`),V.a_(),this.E_(b))})),z(b,fc.EventType.ERROR,(I=>{N||(N=!0,Jo(zn,`RPC '${e}' stream ${o} transport errored. Name:`,I.name,"Message:",I.message),V.a_(new ye(oe.UNAVAILABLE,"The operation could not be completed")))})),z(b,fc.EventType.MESSAGE,(I=>{if(!N){const k=I.data[0];at(!!k,16349);const $=k,F=$?.error||$[0]?.error;if(F){be(zn,`RPC '${e}' stream ${o} received error:`,F);const ue=F.status;let X=(function(S){const C=on[S];if(C!==void 0)return oT(C)})(ue),B=F.message;X===void 0&&(X=oe.INTERNAL,B="Unknown error status: "+ue+" with message "+F.message),N=!0,V.a_(new ye(X,B)),b.close()}else be(zn,`RPC '${e}' stream ${o} received:`,k),V.u_(k)}})),z(m,wE.STAT_EVENT,(I=>{I.stat===Vg.PROXY?be(zn,`RPC '${e}' stream ${o} detected buffering proxy`):I.stat===Vg.NOPROXY&&be(zn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function dg(){return typeof document<"u"?document:null}function Bf(i){return new cC(i,!0)}class Op{constructor(e,t,r=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-r);o>0&&be("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Gb="PersistentStream";class TT{constructor(e,t,r,o,c,u,m,g){this.Mi=e,this.S_=r,this.b_=o,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Op(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(Zs(t.toString()),Zs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===t&&this.G_(r,o)}),(r=>{e((()=>{const o=new ye(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return be(Gb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(be(Gb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class aN extends TT{constructor(e,t,r,o,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,u),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=dC(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Oe.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?Oe.min():u.readTime?wi(u.readTime):Oe.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Gg(this.serializer),t.addTarget=(function(c,u){let m;const g=u.target;if(m=zg(g)?{documents:gC(c,g)}:{query:pC(c,g).ft},m.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){m.resumeToken=uT(c,u.resumeToken);const p=Hg(c,u.expectedCount);p!==null&&(m.expectedCount=p)}else if(u.snapshotVersion.compareTo(Oe.min())>0){m.readTime=df(c,u.snapshotVersion.toTimestamp());const p=Hg(c,u.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const r=vC(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Gg(this.serializer),t.removeTarget=e,this.q_(t)}}class oN extends TT{constructor(e,t,r,o,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,u),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return at(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,at(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){at(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=mC(e.writeResults,e.commitTime),r=wi(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Gg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>mT(this.serializer,r)))};this.q_(t)}}class lN{}class cN extends lN{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ye(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Go(e,Fg(t,r),o,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ye(oe.UNKNOWN,c.toString())}))}Ho(e,t,r,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,m])=>this.connection.Ho(e,Fg(t,r),o,u,m,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ye(oe.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class uN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Zs(t),this.aa=!1):be("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Qa="RemoteStore";class hN{constructor(e,t,r,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((u=>{r.enqueueAndForget((async()=>{Wa(this)&&(be(Qa,"Restarting streams for network reachability change."),await(async function(g){const p=Le(g);p.Ea.add(4),await nu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await qf(p)})(this))}))})),this.Ra=new uN(r,o)}}async function qf(i){if(Wa(i))for(const e of i.da)await e(!0)}async function nu(i){for(const e of i.da)await e(!1)}function wT(i,e){const t=Le(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Pp(t)?Vp(t):fl(t).O_()&&Mp(t,e))}function kp(i,e){const t=Le(i),r=fl(t);t.Ia.delete(e),r.O_()&&xT(t,e),t.Ia.size===0&&(r.O_()?r.L_():Wa(t)&&t.Ra.set("Unknown"))}function Mp(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fl(i).Y_(e)}function xT(i,e){i.Va.Ue(e),fl(i).Z_(e)}function Vp(i){i.Va=new rC({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),fl(i).start(),i.Ra.ua()}function Pp(i){return Wa(i)&&!fl(i).x_()&&i.Ia.size>0}function Wa(i){return Le(i).Ea.size===0}function ST(i){i.Va=void 0}async function fN(i){i.Ra.set("Online")}async function dN(i){i.Ia.forEach(((e,t)=>{Mp(i,e)}))}async function mN(i,e){ST(i),Pp(i)?(i.Ra.ha(e),Vp(i)):i.Ra.set("Unknown")}async function gN(i,e,t){if(i.Ra.set("Online"),e instanceof cT&&e.state===2&&e.cause)try{await(async function(o,c){const u=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,u),o.Ia.delete(m),o.Va.removeTarget(m))})(i,e)}catch(r){be(Qa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await pf(i,r)}else if(e instanceof Kh?i.Va.Ze(e):e instanceof lT?i.Va.st(e):i.Va.tt(e),!t.isEqual(Oe.min()))try{const r=await ET(i.localStore);t.compareTo(r)>=0&&await(function(c,u){const m=c.Va.Tt(u);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const v=c.Ia.get(p);v&&c.Ia.set(p,v.withResumeToken(g.resumeToken,u))}})),m.targetMismatches.forEach(((g,p)=>{const v=c.Ia.get(g);if(!v)return;c.Ia.set(g,v.withResumeToken(Mn.EMPTY_BYTE_STRING,v.snapshotVersion)),xT(c,g);const b=new Yr(v.target,g,p,v.sequenceNumber);Mp(c,b)})),c.remoteSyncer.applyRemoteEvent(m)})(i,t)}catch(r){be(Qa,"Failed to raise snapshot:",r),await pf(i,r)}}async function pf(i,e,t){if(!hl(e))throw e;i.Ea.add(1),await nu(i),i.Ra.set("Offline"),t||(t=()=>ET(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{be(Qa,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await qf(i)}))}function AT(i,e){return e().catch((t=>pf(i,t,e)))}async function Hf(i){const e=Le(i),t=la(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:yp;for(;pN(e);)try{const o=await WC(e.localStore,r);if(o===null){e.Ta.length===0&&t.L_();break}r=o.batchId,yN(e,o)}catch(o){await pf(e,o)}RT(e)&&CT(e)}function pN(i){return Wa(i)&&i.Ta.length<10}function yN(i,e){i.Ta.push(e);const t=la(i);t.O_()&&t.X_&&t.ea(e.mutations)}function RT(i){return Wa(i)&&!la(i).x_()&&i.Ta.length>0}function CT(i){la(i).start()}async function vN(i){la(i).ra()}async function _N(i){const e=la(i);for(const t of i.Ta)e.ea(t.mutations)}async function bN(i,e,t){const r=i.Ta.shift(),o=Sp.from(r,e,t);await AT(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Hf(i)}async function EN(i,e){e&&la(i).X_&&await(async function(r,o){if((function(u){return aT(u)&&u!==oe.ABORTED})(o.code)){const c=r.Ta.shift();la(r).B_(),await AT(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Hf(r)}})(i,e),RT(i)&&CT(i)}async function $b(i,e){const t=Le(i);t.asyncQueue.verifyOperationInProgress(),be(Qa,"RemoteStore received new credentials");const r=Wa(t);t.Ea.add(3),await nu(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await qf(t)}async function TN(i,e){const t=Le(i);e?(t.Ea.delete(2),await qf(t)):e||(t.Ea.add(2),await nu(t),t.Ra.set("Unknown"))}function fl(i){return i.ma||(i.ma=(function(t,r,o){const c=Le(t);return c.sa(),new aN(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:fN.bind(null,i),t_:dN.bind(null,i),r_:mN.bind(null,i),H_:gN.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Pp(i)?Vp(i):i.Ra.set("Unknown")):(await i.ma.stop(),ST(i))}))),i.ma}function la(i){return i.fa||(i.fa=(function(t,r,o){const c=Le(t);return c.sa(),new oN(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:vN.bind(null,i),r_:EN.bind(null,i),ta:_N.bind(null,i),na:bN.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Hf(i)):(await i.fa.stop(),i.Ta.length>0&&(be(Qa,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class jp{constructor(e,t,r,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new ea,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,c){const u=Date.now()+r,m=new jp(e,t,u,o,c);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lp(i,e){if(Zs("AsyncQueue",`${e}: ${i}`),hl(i))return new ye(oe.UNAVAILABLE,`${e}: ${i}`);throw i}class Fo{static emptySet(e){return new Fo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Re.comparator(t.key,r.key):(t,r)=>Re.comparator(t.key,r.key),this.keyedMap=dc(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Fo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Kb{constructor(){this.ga=new jt(Re.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ne(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class il{constructor(e,t,r,o,c,u,m,g,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,o,c){const u=[];return t.forEach((m=>{u.push({type:0,doc:m})})),new il(e,t,Fo.emptySet(t),u,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class wN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class xN{constructor(){this.queries=Qb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=Le(t),c=o.queries;o.queries=Qb(),c.forEach(((u,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new ye(oe.ABORTED,"Firestore shutting down"))}}function Qb(){return new Xa((i=>KE(i)),Pf)}async function SN(i,e){const t=Le(i);let r=3;const o=e.query;let c=t.queries.get(o);c?!c.ba()&&e.Da()&&(r=2):(c=new wN,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await t.onListen(o,!0);break;case 1:c.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const m=Lp(u,`Initialization of query '${Uo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Up(t)}async function AN(i,e){const t=Le(i),r=e.query;let o=3;const c=t.queries.get(r);if(c){const u=c.Sa.indexOf(e);u>=0&&(c.Sa.splice(u,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function RN(i,e){const t=Le(i);let r=!1;for(const o of e){const c=o.query,u=t.queries.get(c);if(u){for(const m of u.Sa)m.Fa(o)&&(r=!0);u.wa=o}}r&&Up(t)}function CN(i,e,t){const r=Le(i),o=r.queries.get(e);if(o)for(const c of o.Sa)c.onError(t);r.queries.delete(e)}function Up(i){i.Ca.forEach((e=>{e.next()}))}var Qg,Yb;(Yb=Qg||(Qg={})).Ma="default",Yb.Cache="cache";class NN{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new il(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qg.Cache}}class NT{constructor(e){this.key=e}}class IT{constructor(e){this.key=e}}class IN{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ze(),this.mutatedKeys=Ze(),this.eu=QE(e),this.tu=new Fo(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Kb,o=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,u=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,b)=>{const w=o.get(v),N=jf(this.query,b)?b:null,V=!!w&&this.mutatedKeys.has(w.key),z=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let I=!1;w&&N?w.data.isEqual(N.data)?V!==z&&(r.track({type:3,doc:N}),I=!0):this.su(w,N)||(r.track({type:2,doc:N}),I=!0,(g&&this.eu(N,g)>0||p&&this.eu(N,p)<0)&&(m=!0)):!w&&N?(r.track({type:0,doc:N}),I=!0):w&&!N&&(r.track({type:1,doc:w}),I=!0,(g||p)&&(m=!0)),I&&(N?(u=u.add(N),c=z?c.add(v):c.delete(v)):(u=u.delete(v),c=c.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),c=c.delete(v.key),r.track({type:1,doc:v})}return{tu:u,iu:r,Cs:m,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,b)=>(function(N,V){const z=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{Rt:I})}};return z(N)-z(V)})(v.type,b.type)||this.eu(v.doc,b.doc))),this.ou(r),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,u.length!==0||p?{snapshot:new il(this.query,e.tu,c,u,e.mutatedKeys,g===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Kb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ze(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new IT(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new NT(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return il.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const zp="SyncEngine";class DN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ON{constructor(e){this.key=e,this.hu=!1}}class kN{constructor(e,t,r,o,c,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Xa((m=>KE(m)),Pf),this.Iu=new Map,this.Eu=new Set,this.du=new jt(Re.comparator),this.Au=new Map,this.Ru=new Cp,this.Vu={},this.mu=new Map,this.fu=nl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function MN(i,e,t=!0){const r=PT(i);let o;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await DT(r,e,t,!0),o}async function VN(i,e){const t=PT(i);await DT(t,e,!0,!1)}async function DT(i,e,t,r){const o=await JC(i.localStore,Es(e)),c=o.targetId,u=i.sharedClientState.addLocalQueryTarget(c,t);let m;return r&&(m=await PN(i,e,c,u==="current",o.resumeToken)),i.isPrimaryClient&&t&&wT(i.remoteStore,o),m}async function PN(i,e,t,r,o){i.pu=(b,w,N)=>(async function(z,I,k,$){let F=I.view.ru(k);F.Cs&&(F=await Bb(z.localStore,I.query,!1).then((({documents:A})=>I.view.ru(A,F))));const ue=$&&$.targetChanges.get(I.targetId),X=$&&$.targetMismatches.get(I.targetId)!=null,B=I.view.applyChanges(F,z.isPrimaryClient,ue,X);return Wb(z,I.targetId,B.au),B.snapshot})(i,b,w,N);const c=await Bb(i.localStore,e,!0),u=new IN(e,c.Qs),m=u.ru(c.documents),g=tu.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",o),p=u.applyChanges(m,i.isPrimaryClient,g);Wb(i,t,p.au);const v=new DN(e,t,u);return i.Tu.set(e,v),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),p.snapshot}async function jN(i,e,t){const r=Le(i),o=r.Tu.get(e),c=r.Iu.get(o.targetId);if(c.length>1)return r.Iu.set(o.targetId,c.filter((u=>!Pf(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await $g(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&kp(r.remoteStore,o.targetId),Yg(r,o.targetId)})).catch(ul)):(Yg(r,o.targetId),await $g(r.localStore,o.targetId,!0))}async function LN(i,e){const t=Le(i),r=t.Tu.get(e),o=t.Iu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),kp(t.remoteStore,r.targetId))}async function UN(i,e,t){const r=$N(i);try{const o=await(function(u,m){const g=Le(u),p=It.now(),v=m.reduce(((N,V)=>N.add(V.key)),Ze());let b,w;return g.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let V=er(),z=Ze();return g.Ns.getEntries(N,v).next((I=>{V=I,V.forEach(((k,$)=>{$.isValidDocument()||(z=z.add(k))}))})).next((()=>g.localDocuments.getOverlayedDocuments(N,V))).next((I=>{b=I;const k=[];for(const $ of m){const F=ZR($,b.get($.key).overlayedDocument);F!=null&&k.push(new fa($.key,F,UE(F.value.mapValue),ei.exists(!0)))}return g.mutationQueue.addMutationBatch(N,p,k,m)})).next((I=>{w=I;const k=I.applyToLocalDocumentSet(b,z);return g.documentOverlayCache.saveOverlays(N,I.batchId,k)}))})).then((()=>({batchId:w.batchId,changes:XE(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(u,m,g){let p=u.Vu[u.currentUser.toKey()];p||(p=new jt(Je)),p=p.insert(m,g),u.Vu[u.currentUser.toKey()]=p})(r,o.batchId,t),await iu(r,o.changes),await Hf(r.remoteStore)}catch(o){const c=Lp(o,"Failed to persist write");t.reject(c)}}async function OT(i,e){const t=Le(i);try{const r=await YC(t.localStore,e);e.targetChanges.forEach(((o,c)=>{const u=t.Au.get(c);u&&(at(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?at(u.hu,14607):o.removedDocuments.size>0&&(at(u.hu,42227),u.hu=!1))})),await iu(t,r,e)}catch(r){await ul(r)}}function Xb(i,e,t){const r=Le(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Tu.forEach(((c,u)=>{const m=u.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(u,m){const g=Le(u);g.onlineState=m;let p=!1;g.queries.forEach(((v,b)=>{for(const w of b.Sa)w.va(m)&&(p=!0)})),p&&Up(g)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zN(i,e,t){const r=Le(i);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Au.get(e),c=o&&o.key;if(c){let u=new jt(Re.comparator);u=u.insert(c,Tn.newNoDocument(c,Oe.min()));const m=Ze().add(c),g=new zf(Oe.min(),new Map,new jt(Je),u,m);await OT(r,g),r.du=r.du.remove(c),r.Au.delete(e),Bp(r)}else await $g(r.localStore,e,!1).then((()=>Yg(r,e,t))).catch(ul)}async function BN(i,e){const t=Le(i),r=e.batch.batchId;try{const o=await QC(t.localStore,e);MT(t,r,null),kT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await iu(t,o)}catch(o){await ul(o)}}async function qN(i,e,t){const r=Le(i);try{const o=await(function(u,m){const g=Le(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return g.mutationQueue.lookupMutationBatch(p,m).next((b=>(at(b!==null,37113),v=b.keys(),g.mutationQueue.removeMutationBatch(p,b)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,v,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>g.localDocuments.getDocuments(p,v)))}))})(r.localStore,e);MT(r,e,t),kT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await iu(r,o)}catch(o){await ul(o)}}function kT(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function MT(i,e,t){const r=Le(i);let o=r.Vu[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function Yg(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),t&&i.Pu.yu(r,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||VT(i,r)}))}function VT(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(kp(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),Bp(i))}function Wb(i,e,t){for(const r of t)r instanceof NT?(i.Ru.addReference(r.key,e),HN(i,r)):r instanceof IT?(be(zp,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||VT(i,r.key)):Ne(19791,{wu:r})}function HN(i,e){const t=e.key,r=t.path.canonicalString();i.du.get(t)||i.Eu.has(r)||(be(zp,"New document in limbo: "+t),i.Eu.add(r),Bp(i))}function Bp(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new Re(Tt.fromString(e)),r=i.fu.next();i.Au.set(r,new ON(t)),i.du=i.du.insert(t,r),wT(i.remoteStore,new Yr(Es(Tp(t.path)),r,"TargetPurposeLimboResolution",Mf.ce))}}async function iu(i,e,t){const r=Le(i),o=[],c=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{u.push(r.pu(g,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const v=p?!p.fromCache:t?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(p){o.push(p);const v=Ip.As(g.targetId,p);c.push(v)}})))})),await Promise.all(u),r.Pu.H_(o),await(async function(g,p){const v=Le(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>ce.forEach(p,(w=>ce.forEach(w.Es,(N=>v.persistence.referenceDelegate.addReference(b,w.targetId,N))).next((()=>ce.forEach(w.ds,(N=>v.persistence.referenceDelegate.removeReference(b,w.targetId,N)))))))))}catch(b){if(!hl(b))throw b;be(Dp,"Failed to update sequence numbers: "+b)}for(const b of p){const w=b.targetId;if(!b.fromCache){const N=v.Ms.get(w),V=N.snapshotVersion,z=N.withLastLimboFreeSnapshotVersion(V);v.Ms=v.Ms.insert(w,z)}}})(r.localStore,c))}async function FN(i,e){const t=Le(i);if(!t.currentUser.isEqual(e)){be(zp,"User change. New user:",e.toKey());const r=await bT(t.localStore,e);t.currentUser=e,(function(c,u){c.mu.forEach((m=>{m.forEach((g=>{g.reject(new ye(oe.CANCELLED,u))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await iu(t,r.Ls)}}function GN(i,e){const t=Le(i),r=t.Au.get(e);if(r&&r.hu)return Ze().add(r.key);{let o=Ze();const c=t.Iu.get(e);if(!c)return o;for(const u of c){const m=t.Tu.get(u);o=o.unionWith(m.view.nu)}return o}}function PT(i){const e=Le(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=OT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zN.bind(null,e),e.Pu.H_=RN.bind(null,e.eventManager),e.Pu.yu=CN.bind(null,e.eventManager),e}function $N(i){const e=Le(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qN.bind(null,e),e}class yf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return KC(this.persistence,new FC,e.initialUser,this.serializer)}Cu(e){return new _T(Np.mi,this.serializer)}Du(e){return new eN}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yf.provider={build:()=>new yf};class KN extends yf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){at(this.persistence.referenceDelegate instanceof gf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new NC(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?hi.withCacheSize(this.cacheSizeBytes):hi.DEFAULT;return new _T((r=>gf.mi(r,t)),this.serializer)}}class Xg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=FN.bind(null,this.syncEngine),await TN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new xN})()}createDatastore(e){const t=Bf(e.databaseInfo.databaseId),r=(function(c){return new rN(c)})(e.databaseInfo);return(function(c,u,m,g){return new cN(c,u,m,g)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,c,u,m){return new hN(r,o,c,u,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>Xb(this.syncEngine,t,0)),(function(){return Fb.v()?new Fb:new tN})())}createSyncEngine(e,t){return(function(o,c,u,m,g,p,v){const b=new kN(o,c,u,m,g,p);return v&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Le(t);be(Qa,"RemoteStore shutting down."),r.Ea.add(5),await nu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Xg.provider={build:()=>new Xg};class QN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Zs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class YN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ye(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,c){const u=Le(o),m={documents:c.map((b=>mf(u.serializer,b)))},g=await u.Ho("BatchGetDocuments",u.serializer.databaseId,Tt.emptyPath(),m,c.length),p=new Map;g.forEach((b=>{const w=fC(u.serializer,b);p.set(w.key.toString(),w)}));const v=[];return c.forEach((b=>{const w=p.get(b.toString());at(!!w,55234,{key:b}),v.push(w)})),v})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new xp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const o=Re.fromPath(r);this.mutations.push(new rT(o,this.precondition(o)))})),await(async function(r,o){const c=Le(r),u={writes:o.map((m=>mT(c.serializer,m)))};await c.Go("Commit",c.serializer.databaseId,Tt.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ne(50498,{Gu:e.constructor.name});t=Oe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ye(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Oe.min())?ei.exists(!1):ei.updateTime(t):ei.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Oe.min()))throw new ye(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ei.updateTime(t)}return ei.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class XN{constructor(e,t,r,o,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=c,this.zu=r.maxAttempts,this.M_=new Op(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new YN(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((o=>{this.Yu(o)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Jc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!aT(t)}return!1}}const ca="FirestoreClient";class WN{constructor(e,t,r,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=qn.UNAUTHENTICATED,this.clientId=pp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async u=>{be(ca,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(be(ca,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ea;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Lp(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function mg(i,e){i.asyncQueue.verifyOperationInProgress(),be(ca,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await bT(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Jb(i,e){i.asyncQueue.verifyOperationInProgress();const t=await JN(i);be(ca,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>$b(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>$b(e.remoteStore,o))),i._onlineComponents=e}async function JN(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){be(ca,"Using user provided OfflineComponentProvider");try{await mg(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===oe.FAILED_PRECONDITION||o.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Jo("Error using user provided cache. Falling back to memory cache: "+t),await mg(i,new yf)}}else be(ca,"Using default OfflineComponentProvider"),await mg(i,new KN(void 0));return i._offlineComponents}async function qp(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(be(ca,"Using user provided OnlineComponentProvider"),await Jb(i,i._uninitializedComponentsProvider._online)):(be(ca,"Using default OnlineComponentProvider"),await Jb(i,new Xg))),i._onlineComponents}function ZN(i){return qp(i).then((e=>e.syncEngine))}function eI(i){return qp(i).then((e=>e.datastore))}async function Zb(i){const e=await qp(i),t=e.eventManager;return t.onListen=MN.bind(null,e.syncEngine),t.onUnlisten=jN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=VN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=LN.bind(null,e.syncEngine),t}function jT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const e1=new Map;const LT="firestore.googleapis.com",t1=!0;class n1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=LT,this.ssl=t1}else this.host=e.host,this.ssl=e.ssl??t1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=vT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<RC)throw new ye(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ye(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ye(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ye(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ff{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new iR;switch(r.type){case"firstParty":return new oR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=e1.get(t);r&&(be("ComponentProvider","Removing Datastore"),e1.delete(t),r.terminate())})(this),Promise.resolve()}}function tI(i,e,t,r={}){i=Ws(i,Ff);const o=ol(e),c=i._getSettings(),u={...c,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${t}`;o&&(fE(`https://${m}`),dE("Firestore",!0)),c.host!==LT&&c.host!==m&&Jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:m,ssl:o,emulatorOptions:r};if(!Ga(g,u)&&(i._setSettings(g),r.mockUserToken)){let p,v;if(typeof r.mockUserToken=="string")p=r.mockUserToken,v=qn.MOCK_USER;else{p=IA(r.mockUserToken,i._app?.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new ye(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new qn(b)}i._authCredentials=new sR(new RE(p,v))}}class dl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new dl(this.firestore,e,this._query)}}class qt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ta(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Wc(t,qt._jsonSchema))return new qt(e,r||null,new Re(Tt.fromString(t.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:cn("string",qt._jsonSchemaVersion),referencePath:cn("string")};class ta extends dl{constructor(e,t,r){super(e,t,Tp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new Re(e))}withConverter(e){return new ta(this.firestore,e,this._path)}}function Wn(i,e,...t){if(i=wn(i),CE("collection","path",e),i instanceof Ff){const r=Tt.fromString(e,...t);return mb(r),new ta(i,null,r)}{if(!(i instanceof qt||i instanceof ta))throw new ye(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Tt.fromString(e,...t));return mb(r),new ta(i.firestore,null,r)}}function Jn(i,e,...t){if(i=wn(i),arguments.length===1&&(e=pp.newId()),CE("doc","path",e),i instanceof Ff){const r=Tt.fromString(e,...t);return db(r),new qt(i,null,new Re(r))}{if(!(i instanceof qt||i instanceof ta))throw new ye(oe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Tt.fromString(e,...t));return db(r),new qt(i.firestore,i instanceof ta?i.converter:null,new Re(r))}}const i1="AsyncQueue";class s1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Op(this,"async_queue_retry"),this._c=()=>{const r=dg();r&&be(i1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=dg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=dg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ea;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!hl(e))throw e;be(i1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Zs("INTERNAL UNHANDLED ERROR: ",r1(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=jp.createAndSchedule(this,e,t,r,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Ne(47125,{Pc:r1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function r1(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}function a1(i){return(function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const c of r)if(c in o&&typeof o[c]=="function")return!0;return!1})(i,["next","error","complete"])}class sl extends Ff{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new s1,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new s1(e),this._firestoreClient=void 0,await e}}}function nI(i,e){const t=typeof i=="object"?i:yE(),r=typeof i=="string"?i:of,o=mp(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=CA("firestore");c&&tI(o,...c)}return o}function Hp(i){if(i._terminated)throw new ye(oe.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||iI(i),i._firestoreClient}function iI(i){const e=i._freezeSettings(),t=(function(o,c,u,m){return new xR(o,c,u,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,jT(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new WN(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(i._componentsProvider))}class Ei{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ei(Mn.fromBase64String(e))}catch(t){throw new ye(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ei(Mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ei._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wc(e,Ei._jsonSchema))return Ei.fromBase64String(e.bytes)}}Ei._jsonSchemaVersion="firestore/bytes/1.0",Ei._jsonSchema={type:cn("string",Ei._jsonSchemaVersion),bytes:cn("string")};class su{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Fp{constructor(e){this._methodName=e}}class Ts{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ts._jsonSchemaVersion}}static fromJSON(e){if(Wc(e,Ts._jsonSchema))return new Ts(e.latitude,e.longitude)}}Ts._jsonSchemaVersion="firestore/geoPoint/1.0",Ts._jsonSchema={type:cn("string",Ts._jsonSchemaVersion),latitude:cn("number"),longitude:cn("number")};class ws{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ws._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wc(e,ws._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ws(e.vectorValues);throw new ye(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ws._jsonSchemaVersion="firestore/vectorValue/1.0",ws._jsonSchema={type:cn("string",ws._jsonSchemaVersion),vectorValues:cn("object")};const sI=/^__.*__$/;class rI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new fa(e,this.data,this.fieldMask,t,this.fieldTransforms):new eu(e,this.data,t,this.fieldTransforms)}}class UT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new fa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ac:i})}}class Gp{constructor(e,t,r,o,c,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Gp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(zT(this.Ac)&&sI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class aI{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Bf(e)}Cc(e,t,r,o=!1){return new Gp({Ac:e,methodName:t,Dc:r,path:kn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gf(i){const e=i._freezeSettings(),t=Bf(i._databaseId);return new aI(i._databaseId,!!e.ignoreUndefinedProperties,t)}function BT(i,e,t,r,o,c={}){const u=i.Cc(c.merge||c.mergeFields?2:0,e,t,o);$p("Data must be an object, but it was:",u,r);const m=FT(r,u);let g,p;if(c.merge)g=new Ti(u.fieldMask),p=u.fieldTransforms;else if(c.mergeFields){const v=[];for(const b of c.mergeFields){const w=Wg(e,b,t);if(!u.contains(w))throw new ye(oe.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);$T(v,w)||v.push(w)}g=new Ti(v),p=u.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,p=u.fieldTransforms;return new rI(new Zn(m),g,p)}class $f extends Fp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $f}}function qT(i,e,t,r){const o=i.Cc(1,e,t);$p("Data must be an object, but it was:",o,r);const c=[],u=Zn.empty();ha(r,((g,p)=>{const v=Kp(e,g,t);p=wn(p);const b=o.yc(v);if(p instanceof $f)c.push(v);else{const w=ru(p,b);w!=null&&(c.push(v),u.set(v,w))}}));const m=new Ti(c);return new UT(u,m,o.fieldTransforms)}function HT(i,e,t,r,o,c){const u=i.Cc(1,e,t),m=[Wg(e,r,t)],g=[o];if(c.length%2!=0)throw new ye(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<c.length;w+=2)m.push(Wg(e,c[w])),g.push(c[w+1]);const p=[],v=Zn.empty();for(let w=m.length-1;w>=0;--w)if(!$T(p,m[w])){const N=m[w];let V=g[w];V=wn(V);const z=u.yc(N);if(V instanceof $f)p.push(N);else{const I=ru(V,z);I!=null&&(p.push(N),v.set(N,I))}}const b=new Ti(p);return new UT(v,b,u.fieldTransforms)}function oI(i,e,t,r=!1){return ru(t,i.Cc(r?4:3,e))}function ru(i,e){if(GT(i=wn(i)))return $p("Unsupported field value:",e,i),FT(i,e);if(i instanceof Fp)return(function(r,o){if(!zT(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const c=[];let u=0;for(const m of r){let g=ru(m,o.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),u++}return{arrayValue:{values:c}}})(i,e)}return(function(r,o){if((r=wn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return KR(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=It.fromDate(r);return{timestampValue:df(o.serializer,c)}}if(r instanceof It){const c=new It(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:df(o.serializer,c)}}if(r instanceof Ts)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ei)return{bytesValue:uT(o.serializer,r._byteString)};if(r instanceof qt){const c=o.databaseId,u=r.firestore._databaseId;if(!u.isEqual(c))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Rp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof ws)return(function(u,m){return{mapValue:{fields:{[jE]:{stringValue:LE},[lf]:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return wp(m.serializer,p)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${kf(r)}`)})(i,e)}function FT(i,e){const t={};return DE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ha(i,((r,o)=>{const c=ru(o,e.mc(r));c!=null&&(t[r]=c)})),{mapValue:{fields:t}}}function GT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof It||i instanceof Ts||i instanceof Ei||i instanceof qt||i instanceof Fp||i instanceof ws)}function $p(i,e,t){if(!GT(t)||!NE(t)){const r=kf(t);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function Wg(i,e,t){if((e=wn(e))instanceof su)return e._internalPath;if(typeof e=="string")return Kp(i,e);throw vf("Field path arguments must be of type string or ",i,!1,void 0,t)}const lI=new RegExp("[~\\*/\\[\\]]");function Kp(i,e,t){if(e.search(lI)>=0)throw vf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new su(...e.split("."))._internalPath}catch{throw vf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function vf(i,e,t,r,o){const c=r&&!r.isEmpty(),u=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||u)&&(g+=" (found",c&&(g+=` in field ${r}`),u&&(g+=` in document ${o}`),g+=")"),new ye(oe.INVALID_ARGUMENT,m+i+g)}function $T(i,e){return i.some((t=>t.isEqual(e)))}class _f{constructor(e,t,r,o,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Qp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class cI extends _f{data(){return super.data()}}function Qp(i,e){return typeof e=="string"?Kp(i,e):e instanceof su?e._internalPath:e._delegate._internalPath}function uI(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ye(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yp{}class hI extends Yp{}function fI(i,e,...t){let r=[];e instanceof Yp&&r.push(e),r=r.concat(t),(function(c){const u=c.filter((g=>g instanceof Xp)).length,m=c.filter((g=>g instanceof Kf)).length;if(u>1||u>0&&m>0)throw new ye(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)i=o._apply(i);return i}class Kf extends hI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Kf(e,t,r)}_apply(e){const t=this._parse(e);return KT(e._query,t),new dl(e.firestore,e.converter,Bg(e._query,t))}_parse(e){const t=Gf(e.firestore);return(function(c,u,m,g,p,v,b){let w;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ye(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){l1(b,v);const V=[];for(const z of b)V.push(o1(g,c,z));w={arrayValue:{values:V}}}else w=o1(g,c,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||l1(b,v),w=oI(m,u,b,v==="in"||v==="not-in");return ln.create(p,v,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function dI(i,e,t){const r=e,o=Qp("where",i);return Kf._create(o,r,t)}class Xp extends Yp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Xp(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:ss.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,c){let u=o;const m=c.getFlattenedFilters();for(const g of m)KT(u,g),u=Bg(u,g)})(e._query,t),new dl(e.firestore,e.converter,Bg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function o1(i,e,t){if(typeof(t=wn(t))=="string"){if(t==="")throw new ye(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$E(e)&&t.indexOf("/")!==-1)throw new ye(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Tt.fromString(t));if(!Re.isDocumentKey(r))throw new ye(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tb(i,new Re(r))}if(t instanceof qt)return Tb(i,t._key);throw new ye(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kf(t)}.`)}function l1(i,e){if(!Array.isArray(i)||i.length===0)throw new ye(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KT(i,e){const t=(function(o,c){for(const u of o)for(const m of u.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ye(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class QT{convertValue(e,t="none"){switch(oa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(aa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ha(e,((o,c)=>{r[o]=this.convertValue(c,t)})),r}convertVectorValue(e){const t=e.fields?.[lf].arrayValue?.values?.map((r=>Xt(r.doubleValue)));return new ws(t)}convertGeoPoint(e){return new Ts(Xt(e.latitude),Xt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Vf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(jc(e));default:return null}}convertTimestamp(e){const t=ra(e);return new It(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Tt.fromString(e);at(yT(r),9688,{name:e});const o=new Lc(r.get(1),r.get(3)),c=new Re(r.popFirst(5));return o.isEqual(t)||Zs(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function YT(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class mI extends QT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ei(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}class qo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class na extends _f{constructor(e,t,r,o,c,u){super(e,t,r,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Qp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=na._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}na._jsonSchemaVersion="firestore/documentSnapshot/1.0",na._jsonSchema={type:cn("string",na._jsonSchemaVersion),bundleSource:cn("string","DocumentSnapshot"),bundleName:cn("string"),bundle:cn("string")};class Qh extends na{data(e={}){return super.data(e)}}class Go{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new qo(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Qh(this._firestore,this._userDataWriter,r.key,r,new qo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((m=>{const g=new Qh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new qo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const g=new Qh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new qo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,v=-1;return m.type!==0&&(p=u.indexOf(m.doc.key),u=u.delete(m.doc.key)),m.type!==1&&(u=u.add(m.doc),v=u.indexOf(m.doc.key)),{type:gI(m.type),doc:g,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Go._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function gI(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:i})}}Go._jsonSchemaVersion="firestore/querySnapshot/1.0",Go._jsonSchema={type:cn("string",Go._jsonSchemaVersion),bundleSource:cn("string","QuerySnapshot"),bundleName:cn("string"),bundle:cn("string")};class Wp extends QT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ei(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}function Jp(i,e,t){i=Ws(i,qt);const r=Ws(i.firestore,sl),o=YT(i.converter,e,t);return XT(r,[BT(Gf(r),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,ei.none())])}function Ac(i,e,t,...r){i=Ws(i,qt);const o=Ws(i.firestore,sl),c=Gf(o);let u;return u=typeof(e=wn(e))=="string"||e instanceof su?HT(c,"updateDoc",i._key,e,t,r):qT(c,"updateDoc",i._key,e),XT(o,[u.toMutation(i._key,ei.exists(!0))])}function Zp(i,...e){i=wn(i);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||a1(e[r])||(t=e[r++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(a1(e[r])){const g=e[r];e[r]=g.next?.bind(g),e[r+1]=g.error?.bind(g),e[r+2]=g.complete?.bind(g)}let c,u,m;if(i instanceof qt)u=Ws(i.firestore,sl),m=Tp(i._key.path),c={next:g=>{e[r]&&e[r](pI(u,i,g))},error:e[r+1],complete:e[r+2]};else{const g=Ws(i,dl);u=Ws(g.firestore,sl),m=g._query;const p=new Wp(u);c={next:v=>{e[r]&&e[r](new Go(u,p,g,v))},error:e[r+1],complete:e[r+2]},uI(i._query)}return(function(p,v,b,w){const N=new QN(w),V=new NN(v,N,b);return p.asyncQueue.enqueueAndForget((async()=>SN(await Zb(p),V))),()=>{N.Nu(),p.asyncQueue.enqueueAndForget((async()=>AN(await Zb(p),V)))}})(Hp(u),m,o,c)}function XT(i,e){return(function(r,o){const c=new ea;return r.asyncQueue.enqueueAndForget((async()=>UN(await ZN(r),o,c))),c.promise})(Hp(i),e)}function pI(i,e,t){const r=t.docs.get(e._key),o=new Wp(i);return new na(i,o,e._key,r,new qo(t.hasPendingWrites,t.fromCache),e.converter)}const yI={maxAttempts:5};function gc(i,e){if((i=wn(i)).firestore!==e)throw new ye(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class vI{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Gf(e)}get(e){const t=gc(e,this._firestore),r=new mI(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return Ne(24041);const c=o[0];if(c.isFoundDocument())return new _f(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new _f(this._firestore,r,t._key,null,t.converter);throw Ne(18433,{doc:c})}))}set(e,t,r){const o=gc(e,this._firestore),c=YT(o.converter,t,r),u=BT(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,r);return this._transaction.set(o._key,u),this}update(e,t,r,...o){const c=gc(e,this._firestore);let u;return u=typeof(t=wn(t))=="string"||t instanceof su?HT(this._dataReader,"Transaction.update",c._key,t,r,o):qT(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,u),this}delete(e){const t=gc(e,this._firestore);return this._transaction.delete(t._key),this}}class _I extends vI{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=gc(e,this._firestore),r=new Wp(this._firestore);return super.get(e).then((o=>new na(this._firestore,r,t._key,o._document,new qo(!1,!1),t.converter)))}}function Rc(i,e,t){i=Ws(i,sl);const r={...yI,...t};return(function(c){if(c.maxAttempts<1)throw new ye(oe.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(c,u,m){const g=new ea;return c.asyncQueue.enqueueAndForget((async()=>{const p=await eI(c);new XN(c.asyncQueue,p,m,u,g).ju()})),g.promise})(Hp(i),(o=>e(new _I(i,o))),r)}(function(e,t=!0){(function(o){cl=o})(ll),Wo(new $a("firestore",((r,{instanceIdentifier:o,options:c})=>{const u=r.getProvider("app").getImmediate(),m=new sl(new rR(r.getProvider("auth-internal")),new lR(u,r.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ye(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lc(p.options.projectId,v)})(u,o),u);return c={useFetchStreams:t,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),Jr(cb,ub,e),Jr(cb,ub,"esm2020")})();function WT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bI=WT,JT=new Yc("auth","Firebase",WT());const bf=new fp("@firebase/auth");function EI(i,...e){bf.logLevel<=We.WARN&&bf.warn(`Auth (${ll}): ${i}`,...e)}function Yh(i,...e){bf.logLevel<=We.ERROR&&bf.error(`Auth (${ll}): ${i}`,...e)}function tr(i,...e){throw e0(i,...e)}function xs(i,...e){return e0(i,...e)}function ZT(i,e,t){const r={...bI(),[e]:t};return new Yc("auth","Firebase",r).create(e,{appName:i.name})}function ia(i){return ZT(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function e0(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return JT.create(i,...e)}function Ve(i,e,...t){if(!i)throw e0(e,...t)}function Ys(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Yh(e),new Error(e)}function nr(i,e){i||Ys(e)}function Jg(){return typeof self<"u"&&self.location?.href||""}function TI(){return c1()==="http:"||c1()==="https:"}function c1(){return typeof self<"u"&&self.location?.protocol||null}function wI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TI()||PA()||"connection"in navigator)?navigator.onLine:!0}function xI(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class au{constructor(e,t){this.shortDelay=e,this.longDelay=t,nr(t>e,"Short delay should be less than long delay!"),this.isMobile=kA()||jA()}get(){return wI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function t0(i,e){nr(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class ew{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const SI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const AI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],RI=new au(3e4,6e4);function Qf(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function ml(i,e,t,r,o={}){return tw(i,o,async()=>{let c={},u={};r&&(e==="GET"?u=r:c={body:JSON.stringify(r)});const m=Xc({key:i.config.apiKey,...u}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const p={method:e,headers:g,...c};return VA()||(p.referrerPolicy="no-referrer"),i.emulatorConfig&&ol(i.emulatorConfig.host)&&(p.credentials="include"),ew.fetch()(await iw(i,i.config.apiHost,t,m),p)})}async function tw(i,e,t){i._canInitEmulator=!1;const r={...SI,...e};try{const o=new CI(i),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw Lh(i,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const m=c.ok?u.errorMessage:u.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lh(i,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw Lh(i,"email-already-in-use",u);if(g==="USER_DISABLED")throw Lh(i,"user-disabled",u);const v=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw ZT(i,v,p);tr(i,v)}}catch(o){if(o instanceof sr)throw o;tr(i,"network-request-failed",{message:String(o)})}}async function nw(i,e,t,r,o={}){const c=await ml(i,e,t,r,o);return"mfaPendingCredential"in c&&tr(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function iw(i,e,t,r){const o=`${e}${t}?${r}`,c=i,u=c.config.emulator?t0(i.config,o):`${i.config.apiScheme}://${o}`;return AI.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}class CI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(xs(this.auth,"network-request-failed")),RI.get())})}}function Lh(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=xs(i,e,r);return o.customData._tokenResponse=t,o}async function NI(i,e){return ml(i,"POST","/v1/accounts:delete",e)}async function Ef(i,e){return ml(i,"POST","/v1/accounts:lookup",e)}function Cc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function II(i,e=!1){const t=wn(i),r=await t.getIdToken(e),o=n0(r);Ve(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,u=c?.sign_in_provider;return{claims:o,token:r,authTime:Cc(gg(o.auth_time)),issuedAtTime:Cc(gg(o.iat)),expirationTime:Cc(gg(o.exp)),signInProvider:u||null,signInSecondFactor:c?.sign_in_second_factor||null}}function gg(i){return Number(i)*1e3}function n0(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Yh("JWT malformed, contained fewer than 3 sections"),null;try{const o=lE(t);return o?JSON.parse(o):(Yh("Failed to decode base64 JWT payload"),null)}catch(o){return Yh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function u1(i){const e=n0(i);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function qc(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof sr&&DI(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function DI({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class OI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Zg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cc(this.lastLoginAt),this.creationTime=Cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Tf(i){const e=i.auth,t=await i.getIdToken(),r=await qc(i,Ef(e,{idToken:t}));Ve(r?.users.length,e,"internal-error");const o=r.users[0];i._notifyReloadListener(o);const c=o.providerUserInfo?.length?sw(o.providerUserInfo):[],u=MI(i.providerData,c),m=i.isAnonymous,g=!(i.email&&o.passwordHash)&&!u?.length,p=m?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Zg(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(i,v)}async function kI(i){const e=wn(i);await Tf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MI(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function sw(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function VI(i,e){const t=await tw(i,{},async()=>{const r=Xc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,u=await iw(i,o,"/v1/token",`key=${c}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return i.emulatorConfig&&ol(i.emulatorConfig.host)&&(g.credentials="include"),ew.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function PI(i,e){return ml(i,"POST","/v2/accounts:revokeToken",Qf(i,e))}class $o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):u1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const t=u1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:c}=await VI(e,t);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:c}=t,u=new $o;return r&&(Ve(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),o&&(Ve(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),c&&(Ve(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $o,this.toJSON())}_performRefresh(){return Ys("not implemented")}}function zr(i,e){Ve(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class is{constructor({uid:e,auth:t,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new OI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Zg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await qc(this,this.stsTokenManager.getToken(this.auth,e));return Ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return II(this,e)}reload(){return kI(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new is({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Tf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ns(this.auth.app))return Promise.reject(ia(this.auth));const e=await this.getIdToken();return await qc(this,NI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,u=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:b,emailVerified:w,isAnonymous:N,providerData:V,stsTokenManager:z}=t;Ve(b&&z,e,"internal-error");const I=$o.fromJSON(this.name,z);Ve(typeof b=="string",e,"internal-error"),zr(r,e.name),zr(o,e.name),Ve(typeof w=="boolean",e,"internal-error"),Ve(typeof N=="boolean",e,"internal-error"),zr(c,e.name),zr(u,e.name),zr(m,e.name),zr(g,e.name),zr(p,e.name),zr(v,e.name);const k=new is({uid:b,auth:e,email:o,emailVerified:w,displayName:r,isAnonymous:N,photoURL:u,phoneNumber:c,tenantId:m,stsTokenManager:I,createdAt:p,lastLoginAt:v});return V&&Array.isArray(V)&&(k.providerData=V.map($=>({...$}))),g&&(k._redirectEventId=g),k}static async _fromIdTokenResponse(e,t,r=!1){const o=new $o;o.updateFromServerResponse(t);const c=new is({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Tf(c),c}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Ve(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?sw(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!c?.length,m=new $o;m.updateFromIdToken(r);const g=new is({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:u}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Zg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,p),g}}const h1=new Map;function Xs(i){nr(i instanceof Function,"Expected a class definition");let e=h1.get(i);return e?(nr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,h1.set(i,e),e)}class rw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}rw.type="NONE";const f1=rw;function Xh(i,e,t){return`firebase:${i}:${e}:${t}`}class Ko{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=Xh(this.userKey,o.apiKey,c),this.fullPersistenceKey=Xh("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ef(this.auth,{idToken:e}).catch(()=>{});return t?is._fromGetAccountInfoResponse(this.auth,t,e):null}return is._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ko(Xs(f1),e,r);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let c=o[0]||Xs(f1);const u=Xh(r,e.config.apiKey,e.name);let m=null;for(const p of t)try{const v=await p._get(u);if(v){let b;if(typeof v=="string"){const w=await Ef(e,{idToken:v}).catch(()=>{});if(!w)break;b=await is._fromGetAccountInfoResponse(e,w,v)}else b=is._fromJSON(e,v);p!==c&&(m=b),c=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Ko(c,e,r):(c=g[0],m&&await c._set(u,m.toJSON()),await Promise.all(t.map(async p=>{if(p!==c)try{await p._remove(u)}catch{}})),new Ko(c,e,r))}}function d1(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hw(e))return"Blackberry";if(fw(e))return"Webos";if(ow(e))return"Safari";if((e.includes("chrome/")||lw(e))&&!e.includes("edge/"))return"Chrome";if(uw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if(r?.length===2)return r[1]}return"Other"}function aw(i=Hn()){return/firefox\//i.test(i)}function ow(i=Hn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lw(i=Hn()){return/crios\//i.test(i)}function cw(i=Hn()){return/iemobile/i.test(i)}function uw(i=Hn()){return/android/i.test(i)}function hw(i=Hn()){return/blackberry/i.test(i)}function fw(i=Hn()){return/webos/i.test(i)}function i0(i=Hn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function jI(i=Hn()){return i0(i)&&!!window.navigator?.standalone}function LI(){return LA()&&document.documentMode===10}function dw(i=Hn()){return i0(i)||uw(i)||fw(i)||hw(i)||/windows phone/i.test(i)||cw(i)}function mw(i,e=[]){let t;switch(i){case"Browser":t=d1(Hn());break;case"Worker":t=`${d1(Hn())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ll}/${r}`}class UI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=c=>new Promise((u,m)=>{try{const g=e(c);u(g)}catch(g){m(g)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function zI(i,e={}){return ml(i,"GET","/v2/passwordPolicy",Qf(i,e))}const BI=6;class qI{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??BI,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class HI{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new m1(this),this.idTokenSubscription=new m1(this),this.beforeStateQueue=new UI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ko.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ef(this,{idToken:e}),r=await is._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ns(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,u=r?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===u)&&m?.user&&(r=m.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Tf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ns(this.app))return Promise.reject(ia(this));const t=e?wn(e):null;return t&&Ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ns(this.app)?Promise.reject(ia(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ns(this.app)?Promise.reject(ia(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zI(this),t=new qI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await PI(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xs(e)||this._popupRedirectResolver;Ve(t,this,"argument-error"),this.redirectPersistenceManager=await Ko.create(this,[Xs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let u=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(m,this,"internal-error"),m.then(()=>{u||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,r,o);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ns(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&EI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Yf(i){return wn(i)}class m1{constructor(e){this.auth=e,this.observer=null,this.addObserver=$A(t=>this.observer=t)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let s0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FI(i){s0=i}function GI(i){return s0.loadJS(i)}function $I(){return s0.gapiScript}function KI(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function QI(i,e){const t=mp(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(Ga(c,e??{}))return o;tr(o,"already-initialized")}return t.initialize({options:e})}function YI(i,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Xs);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function XI(i,e,t){const r=Yf(i);Ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=gw(e),{host:u,port:m}=WI(e),g=m===null?"":`:${m}`,p={url:`${c}//${u}${g}/`},v=Object.freeze({host:u,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ve(Ga(p,r.config.emulator)&&Ga(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,ol(u)?(fE(`${c}//${u}${g}`),dE("Auth",!0)):JI()}function gw(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function WI(i){const e=gw(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:g1(r.substr(c.length+1))}}else{const[c,u]=r.split(":");return{host:c,port:g1(u)}}}function g1(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function JI(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class pw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ys("not implemented")}_getIdTokenResponse(e){return Ys("not implemented")}_linkToIdToken(e,t){return Ys("not implemented")}_getReauthenticationResolver(e){return Ys("not implemented")}}async function Qo(i,e){return nw(i,"POST","/v1/accounts:signInWithIdp",Qf(i,e))}const ZI="http://localhost";class Ya extends pw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ya(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):tr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...c}=t;if(!r||!o)return null;const u=new Ya(r,o);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Qo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Qo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qo(e,t)}buildRequest(){const e={requestUri:ZI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Xc(t)}return e}}class yw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ou extends yw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Gr extends ou{constructor(){super("facebook.com")}static credential(e){return Ya._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gr.credential(e.oauthAccessToken)}catch{return null}}}Gr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gr.PROVIDER_ID="facebook.com";class $r extends ou{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ya._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return $r.credential(t,r)}catch{return null}}}$r.GOOGLE_SIGN_IN_METHOD="google.com";$r.PROVIDER_ID="google.com";class Kr extends ou{constructor(){super("github.com")}static credential(e){return Ya._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kr.credential(e.oauthAccessToken)}catch{return null}}}Kr.GITHUB_SIGN_IN_METHOD="github.com";Kr.PROVIDER_ID="github.com";class Qr extends ou{constructor(){super("twitter.com")}static credential(e,t){return Ya._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Qr.credential(t,r)}catch{return null}}}Qr.TWITTER_SIGN_IN_METHOD="twitter.com";Qr.PROVIDER_ID="twitter.com";async function eD(i,e){return nw(i,"POST","/v1/accounts:signUp",Qf(i,e))}class ua{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const c=await is._fromIdTokenResponse(e,r,o),u=p1(r);return new ua({user:c,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=p1(r);return new ua({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function p1(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}async function Hc(i){if(ns(i.app))return Promise.reject(ia(i));const e=Yf(i);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new ua({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await eD(e,{returnSecureToken:!0}),r=await ua._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class wf extends sr{constructor(e,t,r,o){super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,wf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new wf(e,t,r,o)}}function vw(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?wf._fromErrorAndOperation(i,c,e,r):c})}async function tD(i,e,t=!1){const r=await qc(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return ua._forOperation(i,"link",r)}async function nD(i,e,t=!1){const{auth:r}=i;if(ns(r.app))return Promise.reject(ia(r));const o="reauthenticate";try{const c=await qc(i,vw(r,o,e,i),t);Ve(c.idToken,r,"internal-error");const u=n0(c.idToken);Ve(u,r,"internal-error");const{sub:m}=u;return Ve(i.uid===m,r,"user-mismatch"),ua._forOperation(i,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&tr(r,"user-mismatch"),c}}async function iD(i,e,t=!1){if(ns(i.app))return Promise.reject(ia(i));const r="signIn",o=await vw(i,r,e),c=await ua._fromIdTokenResponse(i,r,o);return t||await i._updateCurrentUser(c.user),c}function sD(i,e,t,r){return wn(i).onIdTokenChanged(e,t,r)}function rD(i,e,t){return wn(i).beforeAuthStateChanged(e,t)}const xf="__sak";class _w{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xf,"1"),this.storage.removeItem(xf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const aD=1e3,oD=10;class bw extends _w{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,m,g)=>{this.notifyListeners(u,g)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},c=this.storage.getItem(r);LI()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,oD):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},aD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}bw.type="LOCAL";const lD=bw;class Ew extends _w{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ew.type="SESSION";const Tw=Ew;function cD(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Xf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new Xf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:c}=t.data,u=this.handlersMap[o];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(u).map(async p=>p(t.origin,c)),g=await cD(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xf.receivers=[];function r0(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}class uD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,u;return new Promise((m,g)=>{const p=r0("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},r);u={messageChannel:o,onMessage(b){const w=b;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(v),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(w.data.response);break;default:clearTimeout(v),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function Ss(){return window}function hD(i){Ss().location.href=i}function ww(){return typeof Ss().WorkerGlobalScope<"u"&&typeof Ss().importScripts=="function"}async function fD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dD(){return navigator?.serviceWorker?.controller||null}function mD(){return ww()?self:null}const xw="firebaseLocalStorageDb",gD=1,Sf="firebaseLocalStorage",Sw="fbase_key";class lu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Wf(i,e){return i.transaction([Sf],e?"readwrite":"readonly").objectStore(Sf)}function pD(){const i=indexedDB.deleteDatabase(xw);return new lu(i).toPromise()}function ep(){const i=indexedDB.open(xw,gD);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Sf,{keyPath:Sw})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Sf)?e(r):(r.close(),await pD(),e(await ep()))})})}async function y1(i,e,t){const r=Wf(i,!0).put({[Sw]:e,value:t});return new lu(r).toPromise()}async function yD(i,e){const t=Wf(i,!1).get(e),r=await new lu(t).toPromise();return r===void 0?null:r.value}function v1(i,e){const t=Wf(i,!0).delete(e);return new lu(t).toPromise()}const vD=800,_D=3;class Aw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ep(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>_D)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ww()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xf._getInstance(mD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await fD(),!this.activeServiceWorker)return;this.sender=new uD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ep();return await y1(e,xf,"1"),await v1(e,xf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>y1(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>yD(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>v1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Wf(o,!1).getAll();return new lu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Aw.type="LOCAL";const bD=Aw;new au(3e4,6e4);function ED(i,e){return e?Xs(e):(Ve(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class a0 extends pw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function TD(i){return iD(i.auth,new a0(i),i.bypassAuthState)}function wD(i){const{auth:e,user:t}=i;return Ve(t,e,"internal-error"),nD(t,new a0(i),i.bypassAuthState)}async function xD(i){const{auth:e,user:t}=i;return Ve(t,e,"internal-error"),tD(t,new a0(i),i.bypassAuthState)}class Rw{constructor(e,t,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:c,error:u,type:m}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TD;case"linkViaPopup":case"linkViaRedirect":return xD;case"reauthViaPopup":case"reauthViaRedirect":return wD;default:tr(this.auth,"internal-error")}}resolve(e){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const SD=new au(2e3,1e4);class Ho extends Rw{constructor(e,t,r,o,c){super(e,t,o,c),this.provider=r,this.authWindow=null,this.pollId=null,Ho.currentPopupAction&&Ho.currentPopupAction.cancel(),Ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){nr(this.filter.length===1,"Popup operations only handle one event");const e=r0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(xs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(xs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,SD.get())};e()}}Ho.currentPopupAction=null;const AD="pendingRedirect",Wh=new Map;class RD extends Rw{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Wh.get(this.auth._key());if(!e){try{const r=await CD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Wh.set(this.auth._key(),e)}return this.bypassAuthState||Wh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CD(i,e){const t=DD(e),r=ID(i);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function ND(i,e){Wh.set(i._key(),e)}function ID(i){return Xs(i._redirectPersistence)}function DD(i){return Xh(AD,i.config.apiKey,i.name)}async function OD(i,e,t=!1){if(ns(i.app))return Promise.reject(ia(i));const r=Yf(i),o=ED(r,e),u=await new RD(r,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}const kD=600*1e3;class MD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Cw(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(xs(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kD&&this.cachedEventUids.clear(),this.cachedEventUids.has(_1(e))}saveEventToCache(e){this.cachedEventUids.add(_1(e)),this.lastProcessedEventTime=Date.now()}}function _1(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Cw({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function VD(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cw(i);default:return!1}}async function PD(i,e={}){return ml(i,"GET","/v1/projects",e)}const jD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LD=/^https?/;async function UD(i){if(i.config.emulator)return;const{authorizedDomains:e}=await PD(i);for(const t of e)try{if(zD(t))return}catch{}tr(i,"unauthorized-domain")}function zD(i){const e=Jg(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const u=new URL(i);return u.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!LD.test(t))return!1;if(jD.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const BD=new au(3e4,6e4);function b1(){const i=Ss().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function qD(i){return new Promise((e,t)=>{function r(){b1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{b1(),t(xs(i,"network-request-failed"))},timeout:BD.get()})}if(Ss().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ss().gapi?.load)r();else{const o=KI("iframefcb");return Ss()[o]=()=>{gapi.load?r():t(xs(i,"network-request-failed"))},GI(`${$I()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw Jh=null,e})}let Jh=null;function HD(i){return Jh=Jh||qD(i),Jh}const FD=new au(5e3,15e3),GD="__/auth/iframe",$D="emulator/auth/iframe",KD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YD(i){const e=i.config;Ve(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?t0(e,$D):`https://${i.config.authDomain}/${GD}`,r={apiKey:e.apiKey,appName:i.name,v:ll},o=QD.get(i.config.apiHost);o&&(r.eid=o);const c=i._getFrameworks();return c.length&&(r.fw=c.join(",")),`${t}?${Xc(r).slice(1)}`}async function XD(i){const e=await HD(i),t=Ss().gapi;return Ve(t,i,"internal-error"),e.open({where:document.body,url:YD(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KD,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const u=xs(i,"network-request-failed"),m=Ss().setTimeout(()=>{c(u)},FD.get());function g(){Ss().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{c(u)})}))}const WD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JD=500,ZD=600,e4="_blank",t4="http://localhost";class E1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function n4(i,e,t,r=JD,o=ZD){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...WD,width:r.toString(),height:o.toString(),top:c,left:u},p=Hn().toLowerCase();t&&(m=lw(p)?e4:t),aw(p)&&(e=e||t4,g.scrollbars="yes");const v=Object.entries(g).reduce((w,[N,V])=>`${w}${N}=${V},`,"");if(jI(p)&&m!=="_self")return i4(e||"",m),new E1(null);const b=window.open(e||"",m,v);Ve(b,i,"popup-blocked");try{b.focus()}catch{}return new E1(b)}function i4(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const s4="__/auth/handler",r4="emulator/auth/handler",a4=encodeURIComponent("fac");async function T1(i,e,t,r,o,c){Ve(i.config.authDomain,i,"auth-domain-config-required"),Ve(i.config.apiKey,i,"invalid-api-key");const u={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:ll,eventId:o};if(e instanceof yw){e.setDefaultLanguage(i.languageCode),u.providerId=e.providerId||"",GA(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))u[v]=b}if(e instanceof ou){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(u.scopes=v.join(","))}i.tenantId&&(u.tid=i.tenantId);const m=u;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const g=await i._getAppCheckToken(),p=g?`#${a4}=${encodeURIComponent(g)}`:"";return`${o4(i)}?${Xc(m).slice(1)}${p}`}function o4({config:i}){return i.emulator?t0(i,r4):`https://${i.authDomain}/${s4}`}const pg="webStorageSupport";class l4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tw,this._completeRedirectFn=OD,this._overrideRedirectResult=ND}async _openPopup(e,t,r,o){nr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await T1(e,t,r,Jg(),o);return n4(e,c,r0())}async _openRedirect(e,t,r,o){await this._originValidation(e);const c=await T1(e,t,r,Jg(),o);return hD(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(nr(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await XD(e),r=new MD(e);return t.register("authEvent",o=>(Ve(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pg,{type:pg},o=>{const c=o?.[0]?.[pg];c!==void 0&&t(!!c),tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=UD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return dw()||ow()||i0()}}const c4=l4;var w1="@firebase/auth",x1="1.12.0";class u4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function h4(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function f4(i){Wo(new $a("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:m}=r.options;Ve(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:u,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mw(i)},p=new HI(r,o,c,g);return YI(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Wo(new $a("auth-internal",e=>{const t=Yf(e.getProvider("auth").getImmediate());return(r=>new u4(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jr(w1,x1,h4(i)),Jr(w1,x1,"esm2020")}const d4=300,m4=hE("authIdTokenMaxAge")||d4;let S1=null;const g4=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>m4)return;const o=t?.token;S1!==o&&(S1=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Fc(i=yE()){const e=mp(i,"auth");if(e.isInitialized())return e.getImmediate();const t=QI(i,{popupRedirectResolver:c4,persistence:[bD,lD,Tw]}),r=hE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const u=g4(c.toString());rD(t,u,()=>u(t.currentUser)),sD(t,m=>u(m))}}const o=cE("auth");return o&&XI(t,`http://${o}`),t}function p4(){return document.getElementsByTagName("head")?.[0]??document}FI({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const c=xs("internal-error");c.customData=o,t(c)},r.type="text/javascript",r.charset="UTF-8",p4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});f4("Browser");var y4="firebase",v4="12.7.0";Jr(y4,v4,"app");const A1={apiKey:"AIzaSyB3ncjSdbTdaUqac5QvHon-Id5mCo3pByM",authDomain:"dragmate-af04d.firebaseapp.com",projectId:"dragmate-af04d",storageBucket:"dragmate-af04d.firebasestorage.app",messagingSenderId:"370425129874",appId:"1:370425129874:web:4c5c526a593e8fa45a6f4b"};let yg=null,Qe=null,Zh=null,On=!1;try{Object.values(A1).every(Boolean)?(yg=sb().length?sb()[0]:pE(A1),Qe=nI(yg),Zh=Fc(yg),On=!0,console.log(" Firebase initialized for DragMate")):console.warn(" DEMO MODE: Firebase env vars missing. Global features will run in local/demo mode only.")}catch(i){console.error(" Firebase initialization failed:",i)}const R1=3e4;async function _4(i){return i?i.currentUser?i.currentUser:(await Hc(i)).user??null:null}async function C1(i,e){const t=Jn(i,"presence",e.uid);await Jp(t,{lastSeen:new Date,status:"online"},{merge:!0})}function b4(){const[i,e]=q.useState({count:null,loading:!0,error:null,isOnline:!1,isSupported:On&&!!Qe&&!!Zh});return q.useEffect(()=>{if(!On||!Qe||!Zh){e(g=>({...g,loading:!1,isSupported:!1}));return}const t=Qe,r=Zh;let o=!1,c=null,u=null;return(async()=>{try{const g=await _4(r);if(!g||o)return;await C1(t,g),e(b=>({...b,isOnline:!0,isSupported:!0})),c=window.setInterval(()=>{C1(t,g).catch(b=>{console.error("Failed to update presence",b)})},R1/2);const p=new Date(Date.now()-R1),v=fI(Wn(t,"presence"),dI("lastSeen",">=",p));u=Zp(v,b=>{o||e(w=>({...w,count:b.size,loading:!1,error:null}))},b=>{console.error("Presence subscription error",b),!o&&e(w=>({...w,loading:!1,error:b.message??"Failed to subscribe to presence"}))})}catch(g){if(console.error("Presence initialization failed",g),o)return;e(p=>({...p,loading:!1,error:g?.message??"Presence initialization failed",isSupported:!1}))}})(),()=>{o=!0,c!==null&&window.clearInterval(c),u&&u()}},[]),i}const E4=({onCreateRoom:i,onJoinRoom:e,onStartLocal:t,isAuthLoading:r,onSelectGame:o})=>{const[c,u]=q.useState("game-select"),[m,g]=q.useState(""),[p,v]=q.useState(!1),{count:b,loading:w,isSupported:N}=b4(),V=async()=>{v(!0);try{await i()}finally{v(!1)}},z=()=>T.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-500",children:[T.jsx("h2",{className:"text-2xl font-bold text-white text-center",children:"Choose Your Game"}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[T.jsx("button",{onClick:()=>{o("chess"),u("mode-select")},className:"group relative w-full aspect-square sm:aspect-[4/5] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-indigo-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-indigo-500/20 overflow-hidden text-left p-4 sm:p-6 flex flex-col justify-between",children:T.jsxs("div",{children:[T.jsx(Ng,{className:"w-8 h-8 sm:w-10 sm:h-10 text-indigo-400 mb-2 sm:mb-3 group-hover:scale-110 transition-transform"}),T.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white",children:"CHESS"}),T.jsx("p",{className:"text-slate-400 text-xs sm:text-sm font-medium mt-1",children:"Classic strategy."})]})}),T.jsxs("button",{onClick:()=>{o("backgammon"),u("mode-select")},className:"group relative w-full aspect-square sm:aspect-[4/5] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-emerald-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-emerald-500/20 overflow-hidden text-left p-4 sm:p-6 flex flex-col justify-between",children:[T.jsx("div",{className:"absolute top-0 right-0 p-1.5 sm:p-2 bg-emerald-500/10 text-emerald-300 rounded-bl-2xl text-[8px] sm:text-[10px] font-black uppercase tracking-widest border-b border-l border-emerald-500/20",children:"New"}),T.jsxs("div",{children:[T.jsx(tA,{className:"w-8 h-8 sm:w-10 sm:h-10 text-emerald-400 mb-2 sm:mb-3 group-hover:scale-110 transition-transform"}),T.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white",children:"TAVLA"}),T.jsx("p",{className:"text-slate-400 text-xs sm:text-sm font-medium mt-1",children:"Persian legacy."})]})]}),T.jsxs("button",{onClick:()=>{o("okey"),u("mode-select")},className:"group relative w-full aspect-square sm:aspect-[4/5] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-amber-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-amber-500/20 overflow-hidden text-left p-4 sm:p-6 flex flex-col justify-between",children:[T.jsx("div",{className:"absolute top-0 right-0 p-1.5 sm:p-2 bg-amber-500/10 text-amber-300 rounded-bl-2xl text-[8px] sm:text-[10px] font-black uppercase tracking-widest border-b border-l border-amber-500/20",children:"Top"}),T.jsxs("div",{children:[T.jsx(aA,{className:"w-8 h-8 sm:w-10 sm:h-10 text-amber-400 mb-2 sm:mb-3 group-hover:scale-110 transition-transform"}),T.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white",children:"OKEY"}),T.jsx("p",{className:"text-slate-400 text-xs sm:text-sm font-medium mt-1",children:"Turkish Rummy."})]})]})]})]}),I=()=>T.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-right-8 duration-500",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[T.jsx("button",{onClick:()=>u("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:T.jsx(_c,{size:20})}),T.jsx("h2",{className:"text-2xl font-bold text-white",children:"Select Threat Level"})]}),T.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[T.jsx("button",{onClick:()=>t("Easy"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-green-500/50 hover:bg-slate-800 transition-all",children:T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"p-3 rounded-full bg-green-500/10 text-green-400",children:T.jsx(rg,{size:20})}),T.jsxs("div",{className:"text-left",children:[T.jsx("div",{className:"text-lg font-bold text-white",children:"Easy"}),T.jsx("div",{className:"text-xs text-slate-500",children:"Casual play"})]})]})}),T.jsx("button",{onClick:()=>t("Normal"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-indigo-500/50 hover:bg-slate-800 transition-all",children:T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"p-3 rounded-full bg-indigo-500/10 text-indigo-400",children:T.jsx(rg,{size:20})}),T.jsxs("div",{className:"text-left",children:[T.jsx("div",{className:"text-lg font-bold text-white",children:"Normal"}),T.jsx("div",{className:"text-xs text-slate-500",children:"Balanced opponent"})]})]})}),T.jsx("button",{onClick:()=>t("Hard"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-red-500/50 hover:bg-slate-800 transition-all",children:T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"p-3 rounded-full bg-red-500/10 text-red-400",children:T.jsx(Ng,{size:20})}),T.jsxs("div",{className:"text-left",children:[T.jsx("div",{className:"text-lg font-bold text-white",children:"Hard"}),T.jsx("div",{className:"text-xs text-slate-500",children:"Ruthless tactics"})]})]})})]})]}),k=()=>T.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-right-8 duration-500",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[T.jsx("button",{onClick:()=>u("game-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:T.jsx(_c,{size:20})}),T.jsx("h2",{className:"text-2xl font-bold text-white",children:"Select Mode"})]}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[T.jsxs("button",{onClick:()=>u("difficulty-select"),className:"group flex flex-col items-center justify-center gap-4 p-8 bg-slate-800/50 rounded-2xl border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all",children:[T.jsx("div",{className:"p-4 rounded-full bg-emerald-500/10 text-emerald-400 group-hover:scale-110 transition-transform",children:T.jsx(rg,{size:32})}),T.jsxs("div",{className:"text-center",children:[T.jsx("div",{className:"text-xl font-bold text-white",children:"Single Player"}),T.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"Vs Computer"})]})]}),T.jsxs("button",{onClick:()=>u("connection"),className:"group flex flex-col items-center justify-center gap-4 p-8 bg-slate-800/50 rounded-2xl border border-slate-700 hover:border-indigo-500/50 hover:bg-slate-800 transition-all",children:[T.jsx("div",{className:"p-4 rounded-full bg-indigo-500/10 text-indigo-400 group-hover:scale-110 transition-transform",children:T.jsx(hp,{size:32})}),T.jsxs("div",{className:"text-center",children:[T.jsx("div",{className:"text-xl font-bold text-white",children:"Multiplayer"}),T.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"Online PvP"})]})]})]})]}),$=()=>T.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[T.jsx("button",{onClick:()=>u("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:T.jsx(_c,{size:20})}),T.jsx("h2",{className:"text-2xl font-bold text-white",children:"Multiplayer"})]}),T.jsxs("div",{className:"space-y-6",children:[T.jsxs("button",{onClick:V,disabled:p||r,className:"w-full btn-premium flex items-center justify-center gap-3 sm:gap-4 text-lg py-4 group disabled:opacity-50 disabled:cursor-not-allowed",children:[p||r?T.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"}):T.jsx(dA,{size:24,className:"transition-transform group-hover:rotate-90"}),T.jsx("span",{children:r?"Initializing...":p?"Creating Arena...":"Create New Room"})]}),T.jsxs("div",{className:"relative flex items-center gap-6",children:[T.jsx("div",{className:"flex-1 h-px bg-slate-800"}),T.jsx("span",{className:"text-slate-600 text-xs font-black uppercase tracking-[0.2em]",children:"OR JOIN"}),T.jsx("div",{className:"flex-1 h-px bg-slate-800"})]}),T.jsxs("div",{className:"flex gap-3",children:[T.jsx("input",{type:"text",placeholder:"Enter Room ID",value:m,onChange:F=>g(F.target.value),className:"flex-1 bg-slate-900/40 border border-slate-800/50 rounded-xl px-4 py-4 text-lg placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all"}),T.jsx("button",{onClick:()=>e(m),disabled:!m.trim()||r,className:"bg-slate-800 hover:bg-slate-700 text-white disabled:opacity-50 px-6 rounded-xl transition-all font-bold shadow-lg",children:T.jsx(cA,{size:24})})]})]})]});return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[85vh] gap-8 lg:gap-12 relative overflow-hidden px-4",children:[T.jsx("div",{className:"text-center space-y-4 lg:space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-1000",children:T.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-8xl font-black tracking-normal pb-4 bg-clip-text text-transparent bg-linear-to-b from-white via-indigo-100 to-indigo-400",children:"DragMate"})}),T.jsxs("div",{className:"liquid-glass p-6 sm:p-8 w-full max-w-xl min-h-[400px] flex flex-col justify-center",children:[c==="game-select"&&z(),c==="mode-select"&&k(),c==="difficulty-select"&&I(),c==="connection"&&$()]}),T.jsx("div",{className:"flex items-center gap-10 text-slate-600 font-bold uppercase tracking-widest text-[10px] animate-in fade-in duration-1000 delay-500",children:T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${N?"bg-green-500":"bg-slate-600"}`}),N?`${w?"...":(b??0).toLocaleString()} Online`:"Demo Mode"]})})]})};function T4(i){return i!==null?{comment:i,variations:[]}:{variations:[]}}function w4(i,e,t,r,o){const c={move:i,variations:o};return e&&(c.suffix=e),t&&(c.nag=t),r!==null&&(c.comment=r),c}function x4(...i){const[e,...t]=i;let r=e;for(const o of t)o!==null&&(r.variations=[o,...o.variations],o.variations=[],r=o);return e}function S4(i,e){if(e.marker&&e.marker.comment){let t=e.root;for(;;){const r=t.variations[0];if(!r){t.comment=e.marker.comment;break}t=r}}return{headers:i,root:e.root,result:(e.marker&&e.marker.result)??void 0}}function A4(i,e){function t(){this.constructor=i}t.prototype=e.prototype,i.prototype=new t}function rl(i,e,t,r){var o=Error.call(this,i);return Object.setPrototypeOf&&Object.setPrototypeOf(o,rl.prototype),o.expected=e,o.found=t,o.location=r,o.name="SyntaxError",o}A4(rl,Error);function vg(i,e,t){return t=t||" ",i.length>e?i:(e-=i.length,t+=t.repeat(e),i+t.slice(0,e))}rl.prototype.format=function(i){var e="Error: "+this.message;if(this.location){var t=null,r;for(r=0;r<i.length;r++)if(i[r].source===this.location.source){t=i[r].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,c=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(o):o,u=this.location.source+":"+c.line+":"+c.column;if(t){var m=this.location.end,g=vg("",c.line.toString().length," "),p=t[o.line-1],v=o.line===m.line?m.column:p.length+1,b=v-o.column||1;e+=`
 --> `+u+`
`+g+` |
`+c.line+" | "+p+`
`+g+" | "+vg("",o.column-1," ")+vg("",b,"^")}else e+=`
 at `+u}return e};rl.buildMessage=function(i,e){var t={literal:function(p){return'"'+o(p.text)+'"'},class:function(p){var v=p.parts.map(function(b){return Array.isArray(b)?c(b[0])+"-"+c(b[1]):c(b)});return"["+(p.inverted?"^":"")+v.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(p){return p.description}};function r(p){return p.charCodeAt(0).toString(16).toUpperCase()}function o(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+r(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+r(v)})}function c(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+r(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+r(v)})}function u(p){return t[p.type](p)}function m(p){var v=p.map(u),b,w;if(v.sort(),v.length>0){for(b=1,w=1;b<v.length;b++)v[b-1]!==v[b]&&(v[w]=v[b],w++);v.length=w}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}function g(p){return p?'"'+o(p)+'"':"end of input"}return"Expected "+m(i)+" but "+g(e)+" found."};function R4(i,e){e=e!==void 0?e:{};var t={},r=e.grammarSource,o={pgn:Ja},c=Ja,u="[",m='"',g="]",p=".",v="O-O-O",b="O-O",w="0-0-0",N="0-0",V="$",z="{",I="}",k=";",$="(",F=")",ue="1-0",X="0-1",B="1/2-1/2",A="*",S=/^[a-zA-Z]/,C=/^[^"]/,O=/^[0-9]/,M=/^[.]/,j=/^[a-zA-Z1-8\-=]/,D=/^[+#]/,De=/^[!?]/,ke=/^[^}]/,ee=/^[^\r\n]/,he=/^[ \t\r\n]/,pe=yt("tag pair"),Ae=it("[",!1),Pe=it('"',!1),L=it("]",!1),se=yt("tag name"),me=Ot([["a","z"],["A","Z"]],!1,!1),de=yt("tag value"),_e=Ot(['"'],!0,!1),Se=yt("move number"),ze=Ot([["0","9"]],!1,!1),Dt=it(".",!1),ht=Ot(["."],!1,!1),Ht=yt("standard algebraic notation"),xi=it("O-O-O",!1),Pn=it("O-O",!1),qi=it("0-0-0",!1),Wt=it("0-0",!1),fi=Ot([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),jn=Ot(["+","#"],!1,!1),as=yt("suffix annotation"),Hi=Ot(["!","?"],!1,!1),xt=yt("NAG"),ft=it("$",!1),Fn=yt("brace comment"),os=it("{",!1),ls=Ot(["}"],!0,!1),Jt=it("}",!1),Fi=yt("rest of line comment"),Rs=it(";",!1),Gn=Ot(["\r",`
`],!0,!1),xn=yt("variation"),Gi=it("(",!1),Cs=it(")",!1),$n=yt("game termination marker"),Ns=it("1-0",!1),Kn=it("0-1",!1),Ft=it("1/2-1/2",!1),pn=it("*",!1),St=yt("whitespace"),Is=Ot([" ","	","\r",`
`],!1,!1),$i=function(G,te){return S4(G,te)},rr=function(G){return Object.fromEntries(G)},ni=function(G,te){return[G,te]},Ki=function(G,te){return{root:G,marker:te}},Fe=function(G,te){return x4(T4(G),...te.flat())},At=function(G,te,W,ve,xe){return w4(G,te,W,ve,xe)},Rt=function(G){return G},Lt=function(G){return G.replace(/[\r\n]+/g," ")},yn=function(G){return G.trim()},Zt=function(G){return G},Vt=function(G,te){return{result:G,comment:te}},Z=e.peg$currPos|0,gt=[{line:1,column:1}],pt=Z,Gt=e.peg$maxFailExpected||[],fe=e.peg$silentFails|0,un;if(e.startRule){if(!(e.startRule in o))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');c=o[e.startRule]}function it(G,te){return{type:"literal",text:G,ignoreCase:te}}function Ot(G,te,W){return{type:"class",parts:G,inverted:te,ignoreCase:W}}function hn(){return{type:"end"}}function yt(G){return{type:"other",description:G}}function Pt(G){var te=gt[G],W;if(te)return te;if(G>=gt.length)W=gt.length-1;else for(W=G;!gt[--W];);for(te=gt[W],te={line:te.line,column:te.column};W<G;)i.charCodeAt(W)===10?(te.line++,te.column=1):te.column++,W++;return gt[G]=te,te}function $t(G,te,W){var ve=Pt(G),xe=Pt(te),et={source:r,start:{offset:G,line:ve.line,column:ve.column},end:{offset:te,line:xe.line,column:xe.column}};return et}function Ee(G){Z<pt||(Z>pt&&(pt=Z,Gt=[]),Gt.push(G))}function ar(G,te,W){return new rl(rl.buildMessage(G,te),G,te,W)}function Ja(){var G,te,W;return G=Z,te=Za(),W=Ai(),G=$i(te,W),G}function Za(){var G,te,W;for(G=Z,te=[],W=da();W!==t;)te.push(W),W=da();return W=en(),G=rr(te),G}function da(){var G,te,W,ve,xe,et,Ge;return fe++,G=Z,en(),i.charCodeAt(Z)===91?(te=u,Z++):(te=t,fe===0&&Ee(Ae)),te!==t?(en(),W=Si(),W!==t?(en(),i.charCodeAt(Z)===34?(ve=m,Z++):(ve=t,fe===0&&Ee(Pe)),ve!==t?(xe=or(),i.charCodeAt(Z)===34?(et=m,Z++):(et=t,fe===0&&Ee(Pe)),et!==t?(en(),i.charCodeAt(Z)===93?(Ge=g,Z++):(Ge=t,fe===0&&Ee(L)),Ge!==t?G=ni(W,xe):(Z=G,G=t)):(Z=G,G=t)):(Z=G,G=t)):(Z=G,G=t)):(Z=G,G=t),fe--,G===t&&fe===0&&Ee(pe),G}function Si(){var G,te,W;if(fe++,G=Z,te=[],W=i.charAt(Z),S.test(W)?Z++:(W=t,fe===0&&Ee(me)),W!==t)for(;W!==t;)te.push(W),W=i.charAt(Z),S.test(W)?Z++:(W=t,fe===0&&Ee(me));else te=t;return te!==t?G=i.substring(G,Z):G=te,fe--,G===t&&(te=t,fe===0&&Ee(se)),G}function or(){var G,te,W;for(fe++,G=Z,te=[],W=i.charAt(Z),C.test(W)?Z++:(W=t,fe===0&&Ee(_e));W!==t;)te.push(W),W=i.charAt(Z),C.test(W)?Z++:(W=t,fe===0&&Ee(_e));return G=i.substring(G,Z),fe--,te=t,fe===0&&Ee(de),G}function Ai(){var G,te,W;return G=Z,te=Qn(),en(),W=pa(),W===t&&(W=null),en(),G=Ki(te,W),G}function Qn(){var G,te,W,ve;for(G=Z,te=ii(),te===t&&(te=null),W=[],ve=Ln();ve!==t;)W.push(ve),ve=Ln();return G=Fe(te,W),G}function Ln(){var G,te,W,ve,xe,et,Ge,Ni;if(G=Z,en(),Ri(),en(),te=Ut(),te!==t){for(W=ma(),W===t&&(W=null),ve=[],xe=lr();xe!==t;)ve.push(xe),xe=lr();for(xe=en(),et=ii(),et===t&&(et=null),Ge=[],Ni=cr();Ni!==t;)Ge.push(Ni),Ni=cr();G=At(te,W,ve,et,Ge)}else Z=G,G=t;return G}function Ri(){var G,te,W,ve,xe,et;for(fe++,G=Z,te=[],W=i.charAt(Z),O.test(W)?Z++:(W=t,fe===0&&Ee(ze));W!==t;)te.push(W),W=i.charAt(Z),O.test(W)?Z++:(W=t,fe===0&&Ee(ze));if(i.charCodeAt(Z)===46?(W=p,Z++):(W=t,fe===0&&Ee(Dt)),W!==t){for(ve=en(),xe=[],et=i.charAt(Z),M.test(et)?Z++:(et=t,fe===0&&Ee(ht));et!==t;)xe.push(et),et=i.charAt(Z),M.test(et)?Z++:(et=t,fe===0&&Ee(ht));te=[te,W,ve,xe],G=te}else Z=G,G=t;return fe--,G===t&&(te=t,fe===0&&Ee(Se)),G}function Ut(){var G,te,W,ve,xe,et;if(fe++,G=Z,te=Z,i.substr(Z,5)===v?(W=v,Z+=5):(W=t,fe===0&&Ee(xi)),W===t&&(i.substr(Z,3)===b?(W=b,Z+=3):(W=t,fe===0&&Ee(Pn)),W===t&&(i.substr(Z,5)===w?(W=w,Z+=5):(W=t,fe===0&&Ee(qi)),W===t&&(i.substr(Z,3)===N?(W=N,Z+=3):(W=t,fe===0&&Ee(Wt)),W===t))))if(W=Z,ve=i.charAt(Z),S.test(ve)?Z++:(ve=t,fe===0&&Ee(me)),ve!==t){if(xe=[],et=i.charAt(Z),j.test(et)?Z++:(et=t,fe===0&&Ee(fi)),et!==t)for(;et!==t;)xe.push(et),et=i.charAt(Z),j.test(et)?Z++:(et=t,fe===0&&Ee(fi));else xe=t;xe!==t?(ve=[ve,xe],W=ve):(Z=W,W=t)}else Z=W,W=t;return W!==t?(ve=i.charAt(Z),D.test(ve)?Z++:(ve=t,fe===0&&Ee(jn)),ve===t&&(ve=null),W=[W,ve],te=W):(Z=te,te=t),te!==t?G=i.substring(G,Z):G=te,fe--,G===t&&(te=t,fe===0&&Ee(Ht)),G}function ma(){var G,te,W;for(fe++,G=Z,te=[],W=i.charAt(Z),De.test(W)?Z++:(W=t,fe===0&&Ee(Hi));W!==t;)te.push(W),te.length>=2?W=t:(W=i.charAt(Z),De.test(W)?Z++:(W=t,fe===0&&Ee(Hi)));return te.length<1?(Z=G,G=t):G=te,fe--,G===t&&(te=t,fe===0&&Ee(as)),G}function lr(){var G,te,W,ve,xe;if(fe++,G=Z,en(),i.charCodeAt(Z)===36?(te=V,Z++):(te=t,fe===0&&Ee(ft)),te!==t){if(W=Z,ve=[],xe=i.charAt(Z),O.test(xe)?Z++:(xe=t,fe===0&&Ee(ze)),xe!==t)for(;xe!==t;)ve.push(xe),xe=i.charAt(Z),O.test(xe)?Z++:(xe=t,fe===0&&Ee(ze));else ve=t;ve!==t?W=i.substring(W,Z):W=ve,W!==t?G=Rt(W):(Z=G,G=t)}else Z=G,G=t;return fe--,G===t&&fe===0&&Ee(xt),G}function ii(){var G;return G=Ci(),G===t&&(G=ga()),G}function Ci(){var G,te,W,ve,xe;if(fe++,G=Z,i.charCodeAt(Z)===123?(te=z,Z++):(te=t,fe===0&&Ee(os)),te!==t){for(W=Z,ve=[],xe=i.charAt(Z),ke.test(xe)?Z++:(xe=t,fe===0&&Ee(ls));xe!==t;)ve.push(xe),xe=i.charAt(Z),ke.test(xe)?Z++:(xe=t,fe===0&&Ee(ls));W=i.substring(W,Z),i.charCodeAt(Z)===125?(ve=I,Z++):(ve=t,fe===0&&Ee(Jt)),ve!==t?G=Lt(W):(Z=G,G=t)}else Z=G,G=t;return fe--,G===t&&(te=t,fe===0&&Ee(Fn)),G}function ga(){var G,te,W,ve,xe;if(fe++,G=Z,i.charCodeAt(Z)===59?(te=k,Z++):(te=t,fe===0&&Ee(Rs)),te!==t){for(W=Z,ve=[],xe=i.charAt(Z),ee.test(xe)?Z++:(xe=t,fe===0&&Ee(Gn));xe!==t;)ve.push(xe),xe=i.charAt(Z),ee.test(xe)?Z++:(xe=t,fe===0&&Ee(Gn));W=i.substring(W,Z),G=yn(W)}else Z=G,G=t;return fe--,G===t&&(te=t,fe===0&&Ee(Fi)),G}function cr(){var G,te,W,ve;return fe++,G=Z,en(),i.charCodeAt(Z)===40?(te=$,Z++):(te=t,fe===0&&Ee(Gi)),te!==t?(W=Qn(),W!==t?(en(),i.charCodeAt(Z)===41?(ve=F,Z++):(ve=t,fe===0&&Ee(Cs)),ve!==t?G=Zt(W):(Z=G,G=t)):(Z=G,G=t)):(Z=G,G=t),fe--,G===t&&fe===0&&Ee(xn),G}function pa(){var G,te,W;return fe++,G=Z,i.substr(Z,3)===ue?(te=ue,Z+=3):(te=t,fe===0&&Ee(Ns)),te===t&&(i.substr(Z,3)===X?(te=X,Z+=3):(te=t,fe===0&&Ee(Kn)),te===t&&(i.substr(Z,7)===B?(te=B,Z+=7):(te=t,fe===0&&Ee(Ft)),te===t&&(i.charCodeAt(Z)===42?(te=A,Z++):(te=t,fe===0&&Ee(pn))))),te!==t?(en(),W=ii(),W===t&&(W=null),G=Vt(te,W)):(Z=G,G=t),fe--,G===t&&(te=t,fe===0&&Ee($n)),G}function en(){var G,te;for(fe++,G=[],te=i.charAt(Z),he.test(te)?Z++:(te=t,fe===0&&Ee(Is));te!==t;)G.push(te),te=i.charAt(Z),he.test(te)?Z++:(te=t,fe===0&&Ee(Is));return fe--,te=t,fe===0&&Ee(St),G}if(un=c(),e.peg$library)return{peg$result:un,peg$currPos:Z,peg$FAILED:t,peg$maxFailExpected:Gt,peg$maxFailPos:pt};if(un!==t&&Z===i.length)return un;throw un!==t&&Z<i.length&&Ee(hn()),ar(Gt,pt<i.length?i.charAt(pt):null,pt<i.length?$t(pt,pt+1):$t(pt,pt))}const ef=0xffffffffffffffffn;function _g(i,e){return(i<<e|i>>64n-e)&0xffffffffffffffffn}function N1(i,e){return i*e&ef}function C4(i){return function(){let e=BigInt(i&ef),t=BigInt(i>>64n&ef);const r=N1(_g(N1(e,5n),7n),9n);return t^=e,e=(_g(e,24n)^t^t<<16n)&ef,t=_g(t,37n),i=t<<64n|e,r}}const Jf=C4(0xa187eb39cdcaed8f31c4b365b102e01en),N4=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>Jf()))),I4=Array.from({length:8},()=>Jf()),D4=Array.from({length:16},()=>Jf()),bg=Jf(),Bn="w",bi="b",an="p",tp="n",tf="b",pc="r",Hr="q",dn="k",Eg="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Uh{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(e,t){const{color:r,piece:o,from:c,to:u,flags:m,captured:g,promotion:p}=t,v=_n(c),b=_n(u);this.color=r,this.piece=o,this.from=v,this.to=b,this.san=e._moveToSan(t,e._moves({legal:!0})),this.lan=v+b,this.before=e.fen(),e._makeMove(t),this.after=e.fen(),e._undoMove(),this.flags="";for(const w in je)je[w]&m&&(this.flags+=za[w]);g&&(this.captured=g),p&&(this.promotion=p,this.lan+=p)}isCapture(){return this.flags.indexOf(za.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(za.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(za.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(za.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(za.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(za.BIG_PAWN)>-1}}const In=-1,za={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},je={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},np={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},O4={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},k4={...np,...O4},Me={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Tg={b:[16,32,17,15],w:[-16,-32,-17,-15]},I1={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},M4=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],V4=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],P4={p:1,n:2,b:4,r:8,q:16,k:32},j4="pnbrqkPNBRQK",D1=[tp,tf,pc,Hr],L4=7,U4=6,z4=1,B4=0,zh={[dn]:je.KSIDE_CASTLE,[Hr]:je.QSIDE_CASTLE},Br={w:[{square:Me.a1,flag:je.QSIDE_CASTLE},{square:Me.h1,flag:je.KSIDE_CASTLE}],b:[{square:Me.a8,flag:je.QSIDE_CASTLE},{square:Me.h8,flag:je.KSIDE_CASTLE}]},q4={b:z4,w:U4},wg="--";function Ha(i){return i>>4}function Gc(i){return i&15}function Nw(i){return"0123456789".indexOf(i)!==-1}function _n(i){const e=Gc(i),t=Ha(i);return"abcdefgh".substring(e,e+1)+"87654321".substring(t,t+1)}function hc(i){return i===Bn?bi:Bn}function H4(i){const e=i.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const t=parseInt(e[5],10);if(isNaN(t)||t<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(e[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const o=e[0].split("/");if(o.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let u=0;u<o.length;u++){let m=0,g=!1;for(let p=0;p<o[u].length;p++)if(Nw(o[u][p])){if(g)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};m+=parseInt(o[u][p],10),g=!0}else{if(!/^[prnbqkPRNBQK]$/.test(o[u][p]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};m+=1,g=!1}if(m!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const c=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:u,regex:m}of c){if(!m.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${u} king`};if((e[0].match(m)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${u} kings`}}return Array.from(o[0]+o[7]).some(u=>u.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function F4(i,e){const t=i.from,r=i.to,o=i.piece;let c=0,u=0,m=0;for(let g=0,p=e.length;g<p;g++){const v=e[g].from,b=e[g].to,w=e[g].piece;o===w&&t!==v&&r===b&&(c++,Ha(t)===Ha(v)&&u++,Gc(t)===Gc(v)&&m++)}return c>0?u>0&&m>0?_n(t):m>0?_n(t).charAt(1):_n(t).charAt(0):""}function qr(i,e,t,r,o,c=void 0,u=je.NORMAL){const m=Ha(r);if(o===an&&(m===L4||m===B4))for(let g=0;g<D1.length;g++){const p=D1[g];i.push({color:e,from:t,to:r,piece:o,captured:c,promotion:p,flags:u|je.PROMOTION})}else i.push({color:e,from:t,to:r,piece:o,captured:c,flags:u})}function O1(i){let e=i.charAt(0);return e>="a"&&e<="h"?i.match(/[a-h]\d.*[a-h]\d/)?void 0:an:(e=e.toLowerCase(),e==="o"?dn:e)}function xg(i){return i.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class o0{_board=new Array(128);_turn=Bn;_header={};_kings={w:In,b:In};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_hash=0n;_positionCount=new Map;constructor(e=Eg,{skipValidation:t=!1}={}){this.load(e,{skipValidation:t})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:In,b:In},this._turn=Bn,this._castling={w:0,b:0},this._epSquare=In,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...k4},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:t=!1,preserveHeaders:r=!1}={}){let o=e.split(/\s+/);if(o.length>=2&&o.length<6){const m=["-","-","0","1"];e=o.concat(m.slice(-(6-o.length))).join(" ")}if(o=e.split(/\s+/),!t){const{ok:m,error:g}=H4(e);if(!m)throw new Error(g)}const c=o[0];let u=0;this.clear({preserveHeaders:r});for(let m=0;m<c.length;m++){const g=c.charAt(m);if(g==="/")u+=8;else if(Nw(g))u+=parseInt(g,10);else{const p=g<"a"?Bn:bi;this._put({type:g.toLowerCase(),color:p},_n(u)),u++}}this._turn=o[1],o[2].indexOf("K")>-1&&(this._castling.w|=je.KSIDE_CASTLE),o[2].indexOf("Q")>-1&&(this._castling.w|=je.QSIDE_CASTLE),o[2].indexOf("k")>-1&&(this._castling.b|=je.KSIDE_CASTLE),o[2].indexOf("q")>-1&&(this._castling.b|=je.QSIDE_CASTLE),this._epSquare=o[3]==="-"?In:Me[o[3]],this._halfMoves=parseInt(o[4],10),this._moveNumber=parseInt(o[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){let t=0,r="";for(let u=Me.a8;u<=Me.h1;u++){if(this._board[u]){t>0&&(r+=t,t=0);const{color:m,type:g}=this._board[u];r+=m===Bn?g.toUpperCase():g.toLowerCase()}else t++;u+1&136&&(t>0&&(r+=t),u!==Me.h1&&(r+="/"),t=0,u+=8)}let o="";this._castling[Bn]&je.KSIDE_CASTLE&&(o+="K"),this._castling[Bn]&je.QSIDE_CASTLE&&(o+="Q"),this._castling[bi]&je.KSIDE_CASTLE&&(o+="k"),this._castling[bi]&je.QSIDE_CASTLE&&(o+="q"),o=o||"-";let c="-";if(this._epSquare!==In)if(e)c=_n(this._epSquare);else{const u=this._epSquare+(this._turn===Bn?16:-16),m=[u+1,u-1];for(const g of m){if(g&136)continue;const p=this._turn;if(this._board[g]?.color===p&&this._board[g]?.type===an){this._makeMove({color:p,from:g,to:this._epSquare,piece:an,captured:an,flags:je.EP_CAPTURE});const v=!this._isKingAttacked(p);if(this._undoMove(),v){c=_n(this._epSquare);break}}}}return[r,this._turn,o,c,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;const{color:t,type:r}=this._board[e],o={w:0,b:1}[t],c={p:0,n:1,b:2,r:3,q:4,k:5}[r];return N4[o][c][e]}_epKey(){return this._epSquare===In?0n:I4[this._epSquare&7]}_castlingKey(){const e=this._castling.w>>5|this._castling.b>>3;return D4[e]}_computeHash(){let e=0n;for(let t=Me.a8;t<=Me.h1;t++){if(t&136){t+=7;continue}this._board[t]&&(e^=this._pieceKey(t))}return e^=this._epKey(),e^=this._castlingKey(),this._turn==="b"&&(e^=bg),e}_updateSetup(e){this._history.length>0||(e!==Eg?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(Eg)}get(e){return this._board[Me[e]]}findPiece(e){const t=[];for(let r=Me.a8;r<=Me.h1;r++){if(r&136){r+=7;continue}!this._board[r]||this._board[r]?.color!==e.color||this._board[r].color===e.color&&this._board[r].type===e.type&&t.push(_n(r))}return t}put({type:e,color:t},r){return this._put({type:e,color:t},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(e,t){this._hash^=this._pieceKey(e),this._board[e]=t,this._hash^=this._pieceKey(e)}_put({type:e,color:t},r){if(j4.indexOf(e.toLowerCase())===-1||!(r in Me))return!1;const o=Me[r];if(e==dn&&!(this._kings[t]==In||this._kings[t]==o))return!1;const c=this._board[o];return c&&c.type===dn&&(this._kings[c.color]=In),this._set(o,{type:e,color:t}),e===dn&&(this._kings[t]=o),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){const t=this.get(e);return this._clear(Me[e]),t&&t.type===dn&&(this._kings[t.color]=In),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){this._hash^=this._castlingKey();const e=this._board[Me.e1]?.type===dn&&this._board[Me.e1]?.color===Bn,t=this._board[Me.e8]?.type===dn&&this._board[Me.e8]?.color===bi;(!e||this._board[Me.a1]?.type!==pc||this._board[Me.a1]?.color!==Bn)&&(this._castling.w&=-65),(!e||this._board[Me.h1]?.type!==pc||this._board[Me.h1]?.color!==Bn)&&(this._castling.w&=-33),(!t||this._board[Me.a8]?.type!==pc||this._board[Me.a8]?.color!==bi)&&(this._castling.b&=-65),(!t||this._board[Me.h8]?.type!==pc||this._board[Me.h8]?.color!==bi)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){if(this._epSquare===In)return;const e=this._epSquare+(this._turn===Bn?-16:16),t=this._epSquare+(this._turn===Bn?16:-16),r=[t+1,t-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||this._board[t]?.color!==hc(this._turn)||this._board[t]?.type!==an){this._hash^=this._epKey(),this._epSquare=In;return}const o=c=>!(c&136)&&this._board[c]?.color===this._turn&&this._board[c]?.type===an;r.some(o)||(this._hash^=this._epKey(),this._epSquare=In)}_attacked(e,t,r){const o=[];for(let c=Me.a8;c<=Me.h1;c++){if(c&136){c+=7;continue}if(this._board[c]===void 0||this._board[c].color!==e)continue;const u=this._board[c],m=c-t;if(m===0)continue;const g=m+119;if(M4[g]&P4[u.type]){if(u.type===an){if(m>0&&u.color===Bn||m<=0&&u.color===bi)if(r)o.push(_n(c));else return!0;continue}if(u.type==="n"||u.type==="k")if(r){o.push(_n(c));continue}else return!0;const p=V4[g];let v=c+p,b=!1;for(;v!==t;){if(this._board[v]!=null){b=!0;break}v+=p}if(!b)if(r){o.push(_n(c));continue}else return!0}}return r?o:!1}attackers(e,t){return t?this._attacked(t,Me[e],!0):this._attacked(this._turn,Me[e],!0)}_isKingAttacked(e){const t=this._kings[e];return t===-1?!1:this._attacked(hc(e),t)}hash(){return this._hash.toString(16)}isAttacked(e,t){return this._attacked(t,Me[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},t=[];let r=0,o=0;for(let c=Me.a8;c<=Me.h1;c++){if(o=(o+1)%2,c&136){c+=7;continue}const u=this._board[c];u&&(e[u.type]=u.type in e?e[u.type]+1:1,u.type===tf&&t.push(o),r++)}if(r===2)return!0;if(r===3&&(e[tf]===1||e[tp]===1))return!0;if(r===e[tf]+2){let c=0;const u=t.length;for(let m=0;m<u;m++)c+=t[m];if(c===0||c===u)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:t=void 0,piece:r=void 0}={}){const o=this._moves({square:t,piece:r});return e?o.map(c=>new Uh(this,c)):o.map(c=>this._moveToSan(c,o))}_moves({legal:e=!0,piece:t=void 0,square:r=void 0}={}){const o=r?r.toLowerCase():void 0,c=t?.toLowerCase(),u=[],m=this._turn,g=hc(m);let p=Me.a8,v=Me.h1,b=!1;if(o)if(o in Me)p=v=Me[o],b=!0;else return[];for(let N=p;N<=v;N++){if(N&136){N+=7;continue}if(!this._board[N]||this._board[N].color===g)continue;const{type:V}=this._board[N];let z;if(V===an){if(c&&c!==V)continue;z=N+Tg[m][0],this._board[z]||(qr(u,m,N,z,an),z=N+Tg[m][1],q4[m]===Ha(N)&&!this._board[z]&&qr(u,m,N,z,an,void 0,je.BIG_PAWN));for(let I=2;I<4;I++)z=N+Tg[m][I],!(z&136)&&(this._board[z]?.color===g?qr(u,m,N,z,an,this._board[z].type,je.CAPTURE):z===this._epSquare&&qr(u,m,N,z,an,an,je.EP_CAPTURE))}else{if(c&&c!==V)continue;for(let I=0,k=I1[V].length;I<k;I++){const $=I1[V][I];for(z=N;z+=$,!(z&136);){if(!this._board[z])qr(u,m,N,z,V);else{if(this._board[z].color===m)break;qr(u,m,N,z,V,this._board[z].type,je.CAPTURE);break}if(V===tp||V===dn)break}}}}if((c===void 0||c===dn)&&(!b||v===this._kings[m])){if(this._castling[m]&je.KSIDE_CASTLE){const N=this._kings[m],V=N+2;!this._board[N+1]&&!this._board[V]&&!this._attacked(g,this._kings[m])&&!this._attacked(g,N+1)&&!this._attacked(g,V)&&qr(u,m,this._kings[m],V,dn,void 0,je.KSIDE_CASTLE)}if(this._castling[m]&je.QSIDE_CASTLE){const N=this._kings[m],V=N-2;!this._board[N-1]&&!this._board[N-2]&&!this._board[N-3]&&!this._attacked(g,this._kings[m])&&!this._attacked(g,N-1)&&!this._attacked(g,V)&&qr(u,m,this._kings[m],V,dn,void 0,je.QSIDE_CASTLE)}}if(!e||this._kings[m]===-1)return u;const w=[];for(let N=0,V=u.length;N<V;N++)this._makeMove(u[N]),this._isKingAttacked(m)||w.push(u[N]),this._undoMove();return w}move(e,{strict:t=!1}={}){let r=null;if(typeof e=="string")r=this._moveFromSan(e,t);else if(e===null)r=this._moveFromSan(wg,t);else if(typeof e=="object"){const c=this._moves();for(let u=0,m=c.length;u<m;u++)if(e.from===_n(c[u].from)&&e.to===_n(c[u].to)&&(!("promotion"in c[u])||e.promotion===c[u].promotion)){r=c[u];break}}if(!r)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&r.flags&je.NULL_MOVE)throw new Error("Null move not allowed when in check");const o=new Uh(this,r);return this._makeMove(r),this._incPositionCount(),o}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,t){this._hash^=this._pieceKey(e),this._board[t]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(t)}_makeMove(e){const t=this._turn,r=hc(t);if(this._push(e),e.flags&je.NULL_MOVE){t===bi&&this._moveNumber++,this._halfMoves++,this._turn=r,this._epSquare=In;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&je.EP_CAPTURE&&(this._turn===bi?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:t})),this._board[e.to].type===dn){if(this._kings[t]=e.to,e.flags&je.KSIDE_CASTLE){const o=e.to-1,c=e.to+1;this._movePiece(c,o)}else if(e.flags&je.QSIDE_CASTLE){const o=e.to+1,c=e.to-2;this._movePiece(c,o)}this._castling[t]=0}if(this._castling[t]){for(let o=0,c=Br[t].length;o<c;o++)if(e.from===Br[t][o].square&&this._castling[t]&Br[t][o].flag){this._castling[t]^=Br[t][o].flag;break}}if(this._castling[r]){for(let o=0,c=Br[r].length;o<c;o++)if(e.to===Br[r][o].square&&this._castling[r]&Br[r][o].flag){this._castling[r]^=Br[r][o].flag;break}}if(this._hash^=this._castlingKey(),e.flags&je.BIG_PAWN){let o;t===bi?o=e.to-16:o=e.to+16,!(e.to-1&136)&&this._board[e.to-1]?.type===an&&this._board[e.to-1]?.color===r||!(e.to+1&136)&&this._board[e.to+1]?.type===an&&this._board[e.to+1]?.color===r?(this._epSquare=o,this._hash^=this._epKey()):this._epSquare=In}else this._epSquare=In;e.piece===an?this._halfMoves=0:e.flags&(je.CAPTURE|je.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===bi&&this._moveNumber++,this._turn=r,this._hash^=bg}undo(){const e=this._hash,t=this._undoMove();if(t){const r=new Uh(this,t);return this._decPositionCount(e),r}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=bg;const r=this._turn,o=hc(r);if(t.flags&je.NULL_MOVE)return t;if(this._movePiece(t.to,t.from),t.piece&&(this._clear(t.from),this._set(t.from,{type:t.piece,color:r})),t.captured)if(t.flags&je.EP_CAPTURE){let c;r===bi?c=t.to-16:c=t.to+16,this._set(c,{type:an,color:o})}else this._set(t.to,{type:t.captured,color:o});if(t.flags&(je.KSIDE_CASTLE|je.QSIDE_CASTLE)){let c,u;t.flags&je.KSIDE_CASTLE?(c=t.to+1,u=t.to-1):(c=t.to-2,u=t.to+1),this._movePiece(u,c)}return t}pgn({newline:e=`
`,maxWidth:t=0}={}){const r=[];let o=!1;for(const w in this._header)this._header[w]&&r.push(`[${w} "${this._header[w]}"]`+e),o=!0;o&&this._history.length&&r.push(e);const c=w=>{const N=this._comments[this.fen()];if(typeof N<"u"){const V=w.length>0?" ":"";w=`${w}${V}{${N}}`}return w},u=[];for(;this._history.length>0;)u.push(this._undoMove());const m=[];let g="";for(u.length===0&&m.push(c(""));u.length>0;){g=c(g);const w=u.pop();if(!w)break;if(!this._history.length&&w.color==="b"){const N=`${this._moveNumber}. ...`;g=g?`${g} ${N}`:N}else w.color==="w"&&(g.length&&m.push(g),g=this._moveNumber+".");g=g+" "+this._moveToSan(w,this._moves({legal:!0})),this._makeMove(w)}if(g.length&&m.push(c(g)),m.push(this._header.Result||"*"),t===0)return r.join("")+m.join(" ");const p=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},v=function(w,N){for(const V of N.split(" "))if(V){if(w+V.length>t){for(;p();)w--;r.push(e),w=0}r.push(V),w+=V.length,r.push(" "),w++}return p()&&w--,w};let b=0;for(let w=0;w<m.length;w++){if(b+m[w].length>t&&m[w].includes("{")){b=v(b,m[w]);continue}b+m[w].length>t&&w!==0?(r[r.length-1]===" "&&r.pop(),r.push(e),b=0):w!==0&&(r.push(" "),b++),r.push(m[w]),b+=m[w].length}return r.join("")}header(...e){for(let t=0;t<e.length;t+=2)typeof e[t]=="string"&&typeof e[t+1]=="string"&&(this._header[e[t]]=e[t+1]);return this._header}setHeader(e,t){return this._header[e]=t??np[e]??null,this.getHeaders()}removeHeader(e){return e in this._header?(this._header[e]=np[e]||null,!0):!1}getHeaders(){const e={};for(const[t,r]of Object.entries(this._header))r!==null&&(e[t]=r);return e}loadPgn(e,{strict:t=!1,newlineChar:r=`\r?
`}={}){r!==`\r?
`&&(e=e.replace(new RegExp(r,"g"),`
`));const o=R4(e);this.reset();const c=o.headers;let u="";for(const p in c)p.toLowerCase()==="fen"&&(u=c[p]),this.header(p,c[p]);if(!t)u&&this.load(u,{preserveHeaders:!0});else if(c.SetUp==="1"){if(!("FEN"in c))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(c.FEN,{preserveHeaders:!0})}let m=o.root;for(;m;){if(m.move){const p=this._moveFromSan(m.move,t);if(p==null)throw new Error(`Invalid move in PGN: ${m.move}`);this._makeMove(p),this._incPositionCount()}m.comment!==void 0&&(this._comments[this.fen()]=m.comment),m=m.variations[0]}const g=o.result;g&&Object.keys(this._header).length&&this._header.Result!==g&&this.setHeader("Result",g)}_moveToSan(e,t){let r="";if(e.flags&je.KSIDE_CASTLE)r="O-O";else if(e.flags&je.QSIDE_CASTLE)r="O-O-O";else{if(e.flags&je.NULL_MOVE)return wg;if(e.piece!==an){const o=F4(e,t);r+=e.piece.toUpperCase()+o}e.flags&(je.CAPTURE|je.EP_CAPTURE)&&(e.piece===an&&(r+=_n(e.from)[0]),r+="x"),r+=_n(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,t=!1){let r=xg(e);if(t||(r==="0-0"?r="O-O":r==="0-0-0"&&(r="O-O-O")),r==wg)return{color:this._turn,from:0,to:0,piece:"k",flags:je.NULL_MOVE};let o=O1(r),c=this._moves({legal:!0,piece:o});for(let w=0,N=c.length;w<N;w++)if(r===xg(this._moveToSan(c[w],c)))return c[w];if(t)return null;let u,m,g,p,v,b=!1;if(m=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),m?(u=m[1],g=m[2],p=m[3],v=m[4],g.length==1&&(b=!0)):(m=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),m&&(u=m[1],g=m[2],p=m[3],v=m[4],g.length==1&&(b=!0))),o=O1(r),c=this._moves({legal:!0,piece:u||o}),!p)return null;for(let w=0,N=c.length;w<N;w++)if(g){if((!u||u.toLowerCase()==c[w].piece)&&Me[g]==c[w].from&&Me[p]==c[w].to&&(!v||v.toLowerCase()==c[w].promotion))return c[w];if(b){const V=_n(c[w].from);if((!u||u.toLowerCase()==c[w].piece)&&Me[p]==c[w].to&&(g==V[0]||g==V[1])&&(!v||v.toLowerCase()==c[w].promotion))return c[w]}}else if(r===xg(this._moveToSan(c[w],c)).replace("x",""))return c[w];return null}ascii(){let e=`   +------------------------+
`;for(let t=Me.a8;t<=Me.h1;t++){if(Gc(t)===0&&(e+=" "+"87654321"[Ha(t)]+" |"),this._board[t]){const r=this._board[t].type,c=this._board[t].color===Bn?r.toUpperCase():r.toLowerCase();e+=" "+c+" "}else e+=" . ";t+1&136&&(e+=`|
`,t+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const t=this._moves({legal:!1});let r=0;const o=this._turn;for(let c=0,u=t.length;c<u;c++)this._makeMove(t[c]),this._isKingAttacked(o)||(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}setTurn(e){return this._turn==e?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const e=[];let t=[];for(let r=Me.a8;r<=Me.h1;r++)this._board[r]==null?t.push(null):t.push({square:_n(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(t),t=[],r+=8);return e}squareColor(e){if(e in Me){const t=Me[e];return(Ha(t)+Gc(t))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const t=[],r=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){const o=t.pop();if(!o)break;e?r.push(new Uh(this,o)):r.push(this._moveToSan(o,this._moves())),this._makeMove(o)}return r}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){const t=this._positionCount.get(e)??0;t===1?this._positionCount.delete(e):this._positionCount.set(e,t-1)}_pruneComments(){const e=[],t={},r=o=>{o in this._comments&&(t[o]=this._comments[o])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){const o=e.pop();if(!o)break;this._makeMove(o),r(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(const o of[dn,Hr])t[o]!==void 0&&(t[o]?this._castling[e]|=zh[o]:this._castling[e]&=~zh[o]);this._updateCastlingRights();const r=this.getCastlingRights(e);return(t[dn]===void 0||t[dn]===r[dn])&&(t[Hr]===void 0||t[Hr]===r[Hr])}getCastlingRights(e){return{[dn]:(this._castling[e]&zh[dn])!==0,[Hr]:(this._castling[e]&zh[Hr])!==0}}moveNumber(){return this._moveNumber}}var yc=Z1();const Zf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function gl(i){const e=Object.prototype.toString.call(i);return e==="[object Window]"||e==="[object global]"}function l0(i){return"nodeType"in i}function ti(i){var e,t;return i?gl(i)?i:l0(i)&&(e=(t=i.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function c0(i){const{Document:e}=ti(i);return i instanceof e}function cu(i){return gl(i)?!1:i instanceof ti(i).HTMLElement}function Iw(i){return i instanceof ti(i).SVGElement}function pl(i){return i?gl(i)?i.document:l0(i)?c0(i)?i:cu(i)||Iw(i)?i.ownerDocument:document:document:document}const ir=Zf?q.useLayoutEffect:q.useEffect;function ed(i){const e=q.useRef(i);return ir(()=>{e.current=i}),q.useCallback(function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}function G4(){const i=q.useRef(null),e=q.useCallback((r,o)=>{i.current=setInterval(r,o)},[]),t=q.useCallback(()=>{i.current!==null&&(clearInterval(i.current),i.current=null)},[]);return[e,t]}function $c(i,e){e===void 0&&(e=[i]);const t=q.useRef(i);return ir(()=>{t.current!==i&&(t.current=i)},e),t}function uu(i,e){const t=q.useRef();return q.useMemo(()=>{const r=i(t.current);return t.current=r,r},[...e])}function Af(i){const e=ed(i),t=q.useRef(null),r=q.useCallback(o=>{o!==t.current&&e?.(o,t.current),t.current=o},[]);return[t,r]}function Rf(i){const e=q.useRef();return q.useEffect(()=>{e.current=i},[i]),e.current}let Sg={};function td(i,e){return q.useMemo(()=>{if(e)return e;const t=Sg[i]==null?0:Sg[i]+1;return Sg[i]=t,i+"-"+t},[i,e])}function Dw(i){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return r.reduce((c,u)=>{const m=Object.entries(u);for(const[g,p]of m){const v=c[g];v!=null&&(c[g]=v+i*p)}return c},{...e})}}const Yo=Dw(1),Kc=Dw(-1);function $4(i){return"clientX"in i&&"clientY"in i}function u0(i){if(!i)return!1;const{KeyboardEvent:e}=ti(i.target);return e&&i instanceof e}function K4(i){if(!i)return!1;const{TouchEvent:e}=ti(i.target);return e&&i instanceof e}function Cf(i){if(K4(i)){if(i.touches&&i.touches.length){const{clientX:e,clientY:t}=i.touches[0];return{x:e,y:t}}else if(i.changedTouches&&i.changedTouches.length){const{clientX:e,clientY:t}=i.changedTouches[0];return{x:e,y:t}}}return $4(i)?{x:i.clientX,y:i.clientY}:null}const al=Object.freeze({Translate:{toString(i){if(!i)return;const{x:e,y:t}=i;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(i){if(!i)return;const{scaleX:e,scaleY:t}=i;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(i){if(i)return[al.Translate.toString(i),al.Scale.toString(i)].join(" ")}},Transition:{toString(i){let{property:e,duration:t,easing:r}=i;return e+" "+t+"ms "+r}}}),k1="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Q4(i){return i.matches(k1)?i:i.querySelector(k1)}const Y4={display:"none"};function X4(i){let{id:e,value:t}=i;return rt.createElement("div",{id:e,style:Y4},t)}function W4(i){let{id:e,announcement:t,ariaLiveType:r="assertive"}=i;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return rt.createElement("div",{id:e,style:o,role:"status","aria-live":r,"aria-atomic":!0},t)}function J4(){const[i,e]=q.useState("");return{announce:q.useCallback(r=>{r!=null&&e(r)},[]),announcement:i}}const Ow=q.createContext(null);function Z4(i){const e=q.useContext(Ow);q.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(i)},[i,e])}function eO(){const[i]=q.useState(()=>new Set),e=q.useCallback(r=>(i.add(r),()=>i.delete(r)),[i]);return[q.useCallback(r=>{let{type:o,event:c}=r;i.forEach(u=>{var m;return(m=u[o])==null?void 0:m.call(u,c)})},[i]),e]}const tO={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},nO={onDragStart(i){let{active:e}=i;return"Picked up draggable item "+e.id+"."},onDragOver(i){let{active:e,over:t}=i;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(i){let{active:e,over:t}=i;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(i){let{active:e}=i;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function iO(i){let{announcements:e=nO,container:t,hiddenTextDescribedById:r,screenReaderInstructions:o=tO}=i;const{announce:c,announcement:u}=J4(),m=td("DndLiveRegion"),[g,p]=q.useState(!1);if(q.useEffect(()=>{p(!0)},[]),Z4(q.useMemo(()=>({onDragStart(b){let{active:w}=b;c(e.onDragStart({active:w}))},onDragMove(b){let{active:w,over:N}=b;e.onDragMove&&c(e.onDragMove({active:w,over:N}))},onDragOver(b){let{active:w,over:N}=b;c(e.onDragOver({active:w,over:N}))},onDragEnd(b){let{active:w,over:N}=b;c(e.onDragEnd({active:w,over:N}))},onDragCancel(b){let{active:w,over:N}=b;c(e.onDragCancel({active:w,over:N}))}}),[c,e])),!g)return null;const v=rt.createElement(rt.Fragment,null,rt.createElement(X4,{id:r,value:o.draggable}),rt.createElement(W4,{id:m,announcement:u}));return t?yc.createPortal(v,t):v}var mn;(function(i){i.DragStart="dragStart",i.DragMove="dragMove",i.DragEnd="dragEnd",i.DragCancel="dragCancel",i.DragOver="dragOver",i.RegisterDroppable="registerDroppable",i.SetDroppableDisabled="setDroppableDisabled",i.UnregisterDroppable="unregisterDroppable"})(mn||(mn={}));function Nf(){}function Fa(i,e){return q.useMemo(()=>({sensor:i,options:e??{}}),[i,e])}function h0(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return q.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const rs=Object.freeze({x:0,y:0});function kw(i,e){return Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2))}function sO(i,e){const t=Cf(i);if(!t)return"0 0";const r={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function Mw(i,e){let{data:{value:t}}=i,{data:{value:r}}=e;return t-r}function rO(i,e){let{data:{value:t}}=i,{data:{value:r}}=e;return r-t}function M1(i){let{left:e,top:t,height:r,width:o}=i;return[{x:e,y:t},{x:e+o,y:t},{x:e,y:t+r},{x:e+o,y:t+r}]}function Vw(i,e){if(!i||i.length===0)return null;const[t]=i;return t[e]}function V1(i,e,t){return e===void 0&&(e=i.left),t===void 0&&(t=i.top),{x:e+i.width*.5,y:t+i.height*.5}}const aO=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=i;const o=V1(e,e.left,e.top),c=[];for(const u of r){const{id:m}=u,g=t.get(m);if(g){const p=kw(V1(g),o);c.push({id:m,data:{droppableContainer:u,value:p}})}}return c.sort(Mw)},oO=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=i;const o=M1(e),c=[];for(const u of r){const{id:m}=u,g=t.get(m);if(g){const p=M1(g),v=o.reduce((w,N,V)=>w+kw(p[V],N),0),b=Number((v/4).toFixed(4));c.push({id:m,data:{droppableContainer:u,value:b}})}}return c.sort(Mw)};function lO(i,e){const t=Math.max(e.top,i.top),r=Math.max(e.left,i.left),o=Math.min(e.left+e.width,i.left+i.width),c=Math.min(e.top+e.height,i.top+i.height),u=o-r,m=c-t;if(r<o&&t<c){const g=e.width*e.height,p=i.width*i.height,v=u*m,b=v/(g+p-v);return Number(b.toFixed(4))}return 0}const cO=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=i;const o=[];for(const c of r){const{id:u}=c,m=t.get(u);if(m){const g=lO(m,e);g>0&&o.push({id:u,data:{droppableContainer:c,value:g}})}}return o.sort(rO)};function uO(i,e,t){return{...i,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function Pw(i,e){return i&&e?{x:i.left-e.left,y:i.top-e.top}:rs}function hO(i){return function(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),c=1;c<r;c++)o[c-1]=arguments[c];return o.reduce((u,m)=>({...u,top:u.top+i*m.y,bottom:u.bottom+i*m.y,left:u.left+i*m.x,right:u.right+i*m.x}),{...t})}}const fO=hO(1);function jw(i){if(i.startsWith("matrix3d(")){const e=i.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(i.startsWith("matrix(")){const e=i.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function dO(i,e,t){const r=jw(e);if(!r)return i;const{scaleX:o,scaleY:c,x:u,y:m}=r,g=i.left-u-(1-o)*parseFloat(t),p=i.top-m-(1-c)*parseFloat(t.slice(t.indexOf(" ")+1)),v=o?i.width/o:i.width,b=c?i.height/c:i.height;return{width:v,height:b,top:p,right:g+v,bottom:p+b,left:g}}const mO={ignoreTransform:!1};function hu(i,e){e===void 0&&(e=mO);let t=i.getBoundingClientRect();if(e.ignoreTransform){const{transform:p,transformOrigin:v}=ti(i).getComputedStyle(i);p&&(t=dO(t,p,v))}const{top:r,left:o,width:c,height:u,bottom:m,right:g}=t;return{top:r,left:o,width:c,height:u,bottom:m,right:g}}function P1(i){return hu(i,{ignoreTransform:!0})}function gO(i){const e=i.innerWidth,t=i.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function pO(i,e){return e===void 0&&(e=ti(i).getComputedStyle(i)),e.position==="fixed"}function yO(i,e){e===void 0&&(e=ti(i).getComputedStyle(i));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const c=e[o];return typeof c=="string"?t.test(c):!1})}function nd(i,e){const t=[];function r(o){if(e!=null&&t.length>=e||!o)return t;if(c0(o)&&o.scrollingElement!=null&&!t.includes(o.scrollingElement))return t.push(o.scrollingElement),t;if(!cu(o)||Iw(o)||t.includes(o))return t;const c=ti(i).getComputedStyle(o);return o!==i&&yO(o,c)&&t.push(o),pO(o,c)?t:r(o.parentNode)}return i?r(i):t}function Lw(i){const[e]=nd(i,1);return e??null}function Ag(i){return!Zf||!i?null:gl(i)?i:l0(i)?c0(i)||i===pl(i).scrollingElement?window:cu(i)?i:null:null}function Uw(i){return gl(i)?i.scrollX:i.scrollLeft}function zw(i){return gl(i)?i.scrollY:i.scrollTop}function ip(i){return{x:Uw(i),y:zw(i)}}var En;(function(i){i[i.Forward=1]="Forward",i[i.Backward=-1]="Backward"})(En||(En={}));function Bw(i){return!Zf||!i?!1:i===document.scrollingElement}function qw(i){const e={x:0,y:0},t=Bw(i)?{height:window.innerHeight,width:window.innerWidth}:{height:i.clientHeight,width:i.clientWidth},r={x:i.scrollWidth-t.width,y:i.scrollHeight-t.height},o=i.scrollTop<=e.y,c=i.scrollLeft<=e.x,u=i.scrollTop>=r.y,m=i.scrollLeft>=r.x;return{isTop:o,isLeft:c,isBottom:u,isRight:m,maxScroll:r,minScroll:e}}const vO={x:.2,y:.2};function _O(i,e,t,r,o){let{top:c,left:u,right:m,bottom:g}=t;r===void 0&&(r=10),o===void 0&&(o=vO);const{isTop:p,isBottom:v,isLeft:b,isRight:w}=qw(i),N={x:0,y:0},V={x:0,y:0},z={height:e.height*o.y,width:e.width*o.x};return!p&&c<=e.top+z.height?(N.y=En.Backward,V.y=r*Math.abs((e.top+z.height-c)/z.height)):!v&&g>=e.bottom-z.height&&(N.y=En.Forward,V.y=r*Math.abs((e.bottom-z.height-g)/z.height)),!w&&m>=e.right-z.width?(N.x=En.Forward,V.x=r*Math.abs((e.right-z.width-m)/z.width)):!b&&u<=e.left+z.width&&(N.x=En.Backward,V.x=r*Math.abs((e.left+z.width-u)/z.width)),{direction:N,speed:V}}function bO(i){if(i===document.scrollingElement){const{innerWidth:c,innerHeight:u}=window;return{top:0,left:0,right:c,bottom:u,width:c,height:u}}const{top:e,left:t,right:r,bottom:o}=i.getBoundingClientRect();return{top:e,left:t,right:r,bottom:o,width:i.clientWidth,height:i.clientHeight}}function Hw(i){return i.reduce((e,t)=>Yo(e,ip(t)),rs)}function EO(i){return i.reduce((e,t)=>e+Uw(t),0)}function TO(i){return i.reduce((e,t)=>e+zw(t),0)}function Fw(i,e){if(e===void 0&&(e=hu),!i)return;const{top:t,left:r,bottom:o,right:c}=e(i);Lw(i)&&(o<=0||c<=0||t>=window.innerHeight||r>=window.innerWidth)&&i.scrollIntoView({block:"center",inline:"center"})}const wO=[["x",["left","right"],EO],["y",["top","bottom"],TO]];class f0{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=nd(t),o=Hw(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[c,u,m]of wO)for(const g of u)Object.defineProperty(this,g,{get:()=>{const p=m(r),v=o[c]-p;return this.rect[g]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Nc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...t)})},this.target=e}add(e,t,r){var o;(o=this.target)==null||o.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function xO(i){const{EventTarget:e}=ti(i);return i instanceof e?i:pl(i)}function Rg(i,e){const t=Math.abs(i.x),r=Math.abs(i.y);return typeof e=="number"?Math.sqrt(t**2+r**2)>e:"x"in e&&"y"in e?t>e.x&&r>e.y:"x"in e?t>e.x:"y"in e?r>e.y:!1}var Bi;(function(i){i.Click="click",i.DragStart="dragstart",i.Keydown="keydown",i.ContextMenu="contextmenu",i.Resize="resize",i.SelectionChange="selectionchange",i.VisibilityChange="visibilitychange"})(Bi||(Bi={}));function j1(i){i.preventDefault()}function SO(i){i.stopPropagation()}var nt;(function(i){i.Space="Space",i.Down="ArrowDown",i.Right="ArrowRight",i.Left="ArrowLeft",i.Up="ArrowUp",i.Esc="Escape",i.Enter="Enter",i.Tab="Tab"})(nt||(nt={}));const Gw={start:[nt.Space,nt.Enter],cancel:[nt.Esc],end:[nt.Space,nt.Enter,nt.Tab]},AO=(i,e)=>{let{currentCoordinates:t}=e;switch(i.code){case nt.Right:return{...t,x:t.x+25};case nt.Left:return{...t,x:t.x-25};case nt.Down:return{...t,y:t.y+25};case nt.Up:return{...t,y:t.y-25}}};class d0{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Nc(pl(t)),this.windowListeners=new Nc(ti(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Bi.Resize,this.handleCancel),this.windowListeners.add(Bi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Bi.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&Fw(r),t(rs)}handleKeyDown(e){if(u0(e)){const{active:t,context:r,options:o}=this.props,{keyboardCodes:c=Gw,coordinateGetter:u=AO,scrollBehavior:m="smooth"}=o,{code:g}=e;if(c.end.includes(g)){this.handleEnd(e);return}if(c.cancel.includes(g)){this.handleCancel(e);return}const{collisionRect:p}=r.current,v=p?{x:p.left,y:p.top}:rs;this.referenceCoordinates||(this.referenceCoordinates=v);const b=u(e,{active:t,context:r.current,currentCoordinates:v});if(b){const w=Kc(b,v),N={x:0,y:0},{scrollableAncestors:V}=r.current;for(const z of V){const I=e.code,{isTop:k,isRight:$,isLeft:F,isBottom:ue,maxScroll:X,minScroll:B}=qw(z),A=bO(z),S={x:Math.min(I===nt.Right?A.right-A.width/2:A.right,Math.max(I===nt.Right?A.left:A.left+A.width/2,b.x)),y:Math.min(I===nt.Down?A.bottom-A.height/2:A.bottom,Math.max(I===nt.Down?A.top:A.top+A.height/2,b.y))},C=I===nt.Right&&!$||I===nt.Left&&!F,O=I===nt.Down&&!ue||I===nt.Up&&!k;if(C&&S.x!==b.x){const M=z.scrollLeft+w.x,j=I===nt.Right&&M<=X.x||I===nt.Left&&M>=B.x;if(j&&!w.y){z.scrollTo({left:M,behavior:m});return}j?N.x=z.scrollLeft-M:N.x=I===nt.Right?z.scrollLeft-X.x:z.scrollLeft-B.x,N.x&&z.scrollBy({left:-N.x,behavior:m});break}else if(O&&S.y!==b.y){const M=z.scrollTop+w.y,j=I===nt.Down&&M<=X.y||I===nt.Up&&M>=B.y;if(j&&!w.x){z.scrollTo({top:M,behavior:m});return}j?N.y=z.scrollTop-M:N.y=I===nt.Down?z.scrollTop-X.y:z.scrollTop-B.y,N.y&&z.scrollBy({top:-N.y,behavior:m});break}}this.handleMove(e,Yo(Kc(b,this.referenceCoordinates),N))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}d0.activators=[{eventName:"onKeyDown",handler:(i,e,t)=>{let{keyboardCodes:r=Gw,onActivation:o}=e,{active:c}=t;const{code:u}=i.nativeEvent;if(r.start.includes(u)){const m=c.activatorNode.current;return m&&i.target!==m?!1:(i.preventDefault(),o?.({event:i.nativeEvent}),!0)}return!1}}];function L1(i){return!!(i&&"distance"in i)}function U1(i){return!!(i&&"delay"in i)}class m0{constructor(e,t,r){var o;r===void 0&&(r=xO(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:c}=e,{target:u}=c;this.props=e,this.events=t,this.document=pl(u),this.documentListeners=new Nc(this.document),this.listeners=new Nc(r),this.windowListeners=new Nc(ti(u)),this.initialCoordinates=(o=Cf(c))!=null?o:rs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Bi.Resize,this.handleCancel),this.windowListeners.add(Bi.DragStart,j1),this.windowListeners.add(Bi.VisibilityChange,this.handleCancel),this.windowListeners.add(Bi.ContextMenu,j1),this.documentListeners.add(Bi.Keydown,this.handleKeydown),t){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(U1(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(L1(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:o}=this.props;o(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Bi.Click,SO,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Bi.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:o,props:c}=this,{onMove:u,options:{activationConstraint:m}}=c;if(!o)return;const g=(t=Cf(e))!=null?t:rs,p=Kc(o,g);if(!r&&m){if(L1(m)){if(m.tolerance!=null&&Rg(p,m.tolerance))return this.handleCancel();if(Rg(p,m.distance))return this.handleStart()}if(U1(m)&&Rg(p,m.tolerance))return this.handleCancel();this.handlePending(m,p);return}e.cancelable&&e.preventDefault(),u(g)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===nt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const RO={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class id extends m0{constructor(e){const{event:t}=e,r=pl(t.target);super(e,RO,r)}}id.activators=[{eventName:"onPointerDown",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:r}=e;return!t.isPrimary||t.button!==0?!1:(r?.({event:t}),!0)}}];const CO={move:{name:"mousemove"},end:{name:"mouseup"}};var sp;(function(i){i[i.RightClick=2]="RightClick"})(sp||(sp={}));class g0 extends m0{constructor(e){super(e,CO,pl(e.event.target))}}g0.activators=[{eventName:"onMouseDown",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:r}=e;return t.button===sp.RightClick?!1:(r?.({event:t}),!0)}}];const Cg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class p0 extends m0{constructor(e){super(e,Cg)}static setup(){return window.addEventListener(Cg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Cg.move.name,e)};function e(){}}}p0.activators=[{eventName:"onTouchStart",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:r}=e;const{touches:o}=t;return o.length>1?!1:(r?.({event:t}),!0)}}];var Ic;(function(i){i[i.Pointer=0]="Pointer",i[i.DraggableRect=1]="DraggableRect"})(Ic||(Ic={}));var If;(function(i){i[i.TreeOrder=0]="TreeOrder",i[i.ReversedTreeOrder=1]="ReversedTreeOrder"})(If||(If={}));function NO(i){let{acceleration:e,activator:t=Ic.Pointer,canScroll:r,draggingRect:o,enabled:c,interval:u=5,order:m=If.TreeOrder,pointerCoordinates:g,scrollableAncestors:p,scrollableAncestorRects:v,delta:b,threshold:w}=i;const N=DO({delta:b,disabled:!c}),[V,z]=G4(),I=q.useRef({x:0,y:0}),k=q.useRef({x:0,y:0}),$=q.useMemo(()=>{switch(t){case Ic.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case Ic.DraggableRect:return o}},[t,o,g]),F=q.useRef(null),ue=q.useCallback(()=>{const B=F.current;if(!B)return;const A=I.current.x*k.current.x,S=I.current.y*k.current.y;B.scrollBy(A,S)},[]),X=q.useMemo(()=>m===If.TreeOrder?[...p].reverse():p,[m,p]);q.useEffect(()=>{if(!c||!p.length||!$){z();return}for(const B of X){if(r?.(B)===!1)continue;const A=p.indexOf(B),S=v[A];if(!S)continue;const{direction:C,speed:O}=_O(B,S,$,e,w);for(const M of["x","y"])N[M][C[M]]||(O[M]=0,C[M]=0);if(O.x>0||O.y>0){z(),F.current=B,V(ue,u),I.current=O,k.current=C;return}}I.current={x:0,y:0},k.current={x:0,y:0},z()},[e,ue,r,z,c,u,JSON.stringify($),JSON.stringify(N),V,p,X,v,JSON.stringify(w)])}const IO={x:{[En.Backward]:!1,[En.Forward]:!1},y:{[En.Backward]:!1,[En.Forward]:!1}};function DO(i){let{delta:e,disabled:t}=i;const r=Rf(e);return uu(o=>{if(t||!r||!o)return IO;const c={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[En.Backward]:o.x[En.Backward]||c.x===-1,[En.Forward]:o.x[En.Forward]||c.x===1},y:{[En.Backward]:o.y[En.Backward]||c.y===-1,[En.Forward]:o.y[En.Forward]||c.y===1}}},[t,e,r])}function OO(i,e){const t=e!=null?i.get(e):void 0,r=t?t.node.current:null;return uu(o=>{var c;return e==null?null:(c=r??o)!=null?c:null},[r,e])}function kO(i,e){return q.useMemo(()=>i.reduce((t,r)=>{const{sensor:o}=r,c=o.activators.map(u=>({eventName:u.eventName,handler:e(u.handler,r)}));return[...t,...c]},[]),[i,e])}var Qc;(function(i){i[i.Always=0]="Always",i[i.BeforeDragging=1]="BeforeDragging",i[i.WhileDragging=2]="WhileDragging"})(Qc||(Qc={}));var rp;(function(i){i.Optimized="optimized"})(rp||(rp={}));const z1=new Map;function MO(i,e){let{dragging:t,dependencies:r,config:o}=e;const[c,u]=q.useState(null),{frequency:m,measure:g,strategy:p}=o,v=q.useRef(i),b=I(),w=$c(b),N=q.useCallback(function(k){k===void 0&&(k=[]),!w.current&&u($=>$===null?k:$.concat(k.filter(F=>!$.includes(F))))},[w]),V=q.useRef(null),z=uu(k=>{if(b&&!t)return z1;if(!k||k===z1||v.current!==i||c!=null){const $=new Map;for(let F of i){if(!F)continue;if(c&&c.length>0&&!c.includes(F.id)&&F.rect.current){$.set(F.id,F.rect.current);continue}const ue=F.node.current,X=ue?new f0(g(ue),ue):null;F.rect.current=X,X&&$.set(F.id,X)}return $}return k},[i,c,t,b,g]);return q.useEffect(()=>{v.current=i},[i]),q.useEffect(()=>{b||N()},[t,b]),q.useEffect(()=>{c&&c.length>0&&u(null)},[JSON.stringify(c)]),q.useEffect(()=>{b||typeof m!="number"||V.current!==null||(V.current=setTimeout(()=>{N(),V.current=null},m))},[m,b,N,...r]),{droppableRects:z,measureDroppableContainers:N,measuringScheduled:c!=null};function I(){switch(p){case Qc.Always:return!1;case Qc.BeforeDragging:return t;default:return!t}}}function y0(i,e){return uu(t=>i?t||(typeof e=="function"?e(i):i):null,[e,i])}function VO(i,e){return y0(i,e)}function PO(i){let{callback:e,disabled:t}=i;const r=ed(e),o=q.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:c}=window;return new c(r)},[r,t]);return q.useEffect(()=>()=>o?.disconnect(),[o]),o}function sd(i){let{callback:e,disabled:t}=i;const r=ed(e),o=q.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:c}=window;return new c(r)},[t]);return q.useEffect(()=>()=>o?.disconnect(),[o]),o}function jO(i){return new f0(hu(i),i)}function B1(i,e,t){e===void 0&&(e=jO);const[r,o]=q.useState(null);function c(){o(g=>{if(!i)return null;if(i.isConnected===!1){var p;return(p=g??t)!=null?p:null}const v=e(i);return JSON.stringify(g)===JSON.stringify(v)?g:v})}const u=PO({callback(g){if(i)for(const p of g){const{type:v,target:b}=p;if(v==="childList"&&b instanceof HTMLElement&&b.contains(i)){c();break}}}}),m=sd({callback:c});return ir(()=>{c(),i?(m?.observe(i),u?.observe(document.body,{childList:!0,subtree:!0})):(m?.disconnect(),u?.disconnect())},[i]),r}function LO(i){const e=y0(i);return Pw(i,e)}const q1=[];function UO(i){const e=q.useRef(i),t=uu(r=>i?r&&r!==q1&&i&&e.current&&i.parentNode===e.current.parentNode?r:nd(i):q1,[i]);return q.useEffect(()=>{e.current=i},[i]),t}function zO(i){const[e,t]=q.useState(null),r=q.useRef(i),o=q.useCallback(c=>{const u=Ag(c.target);u&&t(m=>m?(m.set(u,ip(u)),new Map(m)):null)},[]);return q.useEffect(()=>{const c=r.current;if(i!==c){u(c);const m=i.map(g=>{const p=Ag(g);return p?(p.addEventListener("scroll",o,{passive:!0}),[p,ip(p)]):null}).filter(g=>g!=null);t(m.length?new Map(m):null),r.current=i}return()=>{u(i),u(c)};function u(m){m.forEach(g=>{const p=Ag(g);p?.removeEventListener("scroll",o)})}},[o,i]),q.useMemo(()=>i.length?e?Array.from(e.values()).reduce((c,u)=>Yo(c,u),rs):Hw(i):rs,[i,e])}function H1(i,e){e===void 0&&(e=[]);const t=q.useRef(null);return q.useEffect(()=>{t.current=null},e),q.useEffect(()=>{const r=i!==rs;r&&!t.current&&(t.current=i),!r&&t.current&&(t.current=null)},[i]),t.current?Kc(i,t.current):rs}function BO(i){q.useEffect(()=>{if(!Zf)return;const e=i.map(t=>{let{sensor:r}=t;return r.setup==null?void 0:r.setup()});return()=>{for(const t of e)t?.()}},i.map(e=>{let{sensor:t}=e;return t}))}function qO(i,e){return q.useMemo(()=>i.reduce((t,r)=>{let{eventName:o,handler:c}=r;return t[o]=u=>{c(u,e)},t},{}),[i,e])}function $w(i){return q.useMemo(()=>i?gO(i):null,[i])}const F1=[];function HO(i,e){e===void 0&&(e=hu);const[t]=i,r=$w(t?ti(t):null),[o,c]=q.useState(F1);function u(){c(()=>i.length?i.map(g=>Bw(g)?r:new f0(e(g),g)):F1)}const m=sd({callback:u});return ir(()=>{m?.disconnect(),u(),i.forEach(g=>m?.observe(g))},[i]),o}function Kw(i){if(!i)return null;if(i.children.length>1)return i;const e=i.children[0];return cu(e)?e:i}function FO(i){let{measure:e}=i;const[t,r]=q.useState(null),o=q.useCallback(p=>{for(const{target:v}of p)if(cu(v)){r(b=>{const w=e(v);return b?{...b,width:w.width,height:w.height}:w});break}},[e]),c=sd({callback:o}),u=q.useCallback(p=>{const v=Kw(p);c?.disconnect(),v&&c?.observe(v),r(v?e(v):null)},[e,c]),[m,g]=Af(u);return q.useMemo(()=>({nodeRef:m,rect:t,setRef:g}),[t,m,g])}const GO=[{sensor:id,options:{}},{sensor:d0,options:{}}],$O={current:{}},nf={draggable:{measure:P1},droppable:{measure:P1,strategy:Qc.WhileDragging,frequency:rp.Optimized},dragOverlay:{measure:hu}};class Dc extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return(t=(r=this.get(e))==null?void 0:r.node.current)!=null?t:void 0}}const KO={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Dc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Nf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:nf,measureDroppableContainers:Nf,windowRect:null,measuringScheduled:!1},Qw={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Nf,draggableNodes:new Map,over:null,measureDroppableContainers:Nf},fu=q.createContext(Qw),Yw=q.createContext(KO);function QO(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Dc}}}function YO(i,e){switch(e.type){case mn.DragStart:return{...i,draggable:{...i.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case mn.DragMove:return i.draggable.active==null?i:{...i,draggable:{...i.draggable,translate:{x:e.coordinates.x-i.draggable.initialCoordinates.x,y:e.coordinates.y-i.draggable.initialCoordinates.y}}};case mn.DragEnd:case mn.DragCancel:return{...i,draggable:{...i.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case mn.RegisterDroppable:{const{element:t}=e,{id:r}=t,o=new Dc(i.droppable.containers);return o.set(r,t),{...i,droppable:{...i.droppable,containers:o}}}case mn.SetDroppableDisabled:{const{id:t,key:r,disabled:o}=e,c=i.droppable.containers.get(t);if(!c||r!==c.key)return i;const u=new Dc(i.droppable.containers);return u.set(t,{...c,disabled:o}),{...i,droppable:{...i.droppable,containers:u}}}case mn.UnregisterDroppable:{const{id:t,key:r}=e,o=i.droppable.containers.get(t);if(!o||r!==o.key)return i;const c=new Dc(i.droppable.containers);return c.delete(t),{...i,droppable:{...i.droppable,containers:c}}}default:return i}}function XO(i){let{disabled:e}=i;const{active:t,activatorEvent:r,draggableNodes:o}=q.useContext(fu),c=Rf(r),u=Rf(t?.id);return q.useEffect(()=>{if(!e&&!r&&c&&u!=null){if(!u0(c)||document.activeElement===c.target)return;const m=o.get(u);if(!m)return;const{activatorNode:g,node:p}=m;if(!g.current&&!p.current)return;requestAnimationFrame(()=>{for(const v of[g.current,p.current]){if(!v)continue;const b=Q4(v);if(b){b.focus();break}}})}},[r,e,o,u,c]),null}function Xw(i,e){let{transform:t,...r}=e;return i!=null&&i.length?i.reduce((o,c)=>c({transform:o,...r}),t):t}function WO(i){return q.useMemo(()=>({draggable:{...nf.draggable,...i?.draggable},droppable:{...nf.droppable,...i?.droppable},dragOverlay:{...nf.dragOverlay,...i?.dragOverlay}}),[i?.draggable,i?.droppable,i?.dragOverlay])}function JO(i){let{activeNode:e,measure:t,initialRect:r,config:o=!0}=i;const c=q.useRef(!1),{x:u,y:m}=typeof o=="boolean"?{x:o,y:o}:o;ir(()=>{if(!u&&!m||!e){c.current=!1;return}if(c.current||!r)return;const p=e?.node.current;if(!p||p.isConnected===!1)return;const v=t(p),b=Pw(v,r);if(u||(b.x=0),m||(b.y=0),c.current=!0,Math.abs(b.x)>0||Math.abs(b.y)>0){const w=Lw(p);w&&w.scrollBy({top:b.y,left:b.x})}},[e,u,m,r,t])}const rd=q.createContext({...rs,scaleX:1,scaleY:1});var Fr;(function(i){i[i.Uninitialized=0]="Uninitialized",i[i.Initializing=1]="Initializing",i[i.Initialized=2]="Initialized"})(Fr||(Fr={}));const v0=q.memo(function(e){var t,r,o,c;let{id:u,accessibility:m,autoScroll:g=!0,children:p,sensors:v=GO,collisionDetection:b=cO,measuring:w,modifiers:N,...V}=e;const z=q.useReducer(YO,void 0,QO),[I,k]=z,[$,F]=eO(),[ue,X]=q.useState(Fr.Uninitialized),B=ue===Fr.Initialized,{draggable:{active:A,nodes:S,translate:C},droppable:{containers:O}}=I,M=A!=null?S.get(A):null,j=q.useRef({initial:null,translated:null}),D=q.useMemo(()=>{var Fe;return A!=null?{id:A,data:(Fe=M?.data)!=null?Fe:$O,rect:j}:null},[A,M]),De=q.useRef(null),[ke,ee]=q.useState(null),[he,pe]=q.useState(null),Ae=$c(V,Object.values(V)),Pe=td("DndDescribedBy",u),L=q.useMemo(()=>O.getEnabled(),[O]),se=WO(w),{droppableRects:me,measureDroppableContainers:de,measuringScheduled:_e}=MO(L,{dragging:B,dependencies:[C.x,C.y],config:se.droppable}),Se=OO(S,A),ze=q.useMemo(()=>he?Cf(he):null,[he]),Dt=Ki(),ht=VO(Se,se.draggable.measure);JO({activeNode:A!=null?S.get(A):null,config:Dt.layoutShiftCompensation,initialRect:ht,measure:se.draggable.measure});const Ht=B1(Se,se.draggable.measure,ht),xi=B1(Se?Se.parentElement:null),Pn=q.useRef({activatorEvent:null,active:null,activeNode:Se,collisionRect:null,collisions:null,droppableRects:me,draggableNodes:S,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),qi=O.getNodeFor((t=Pn.current.over)==null?void 0:t.id),Wt=FO({measure:se.dragOverlay.measure}),fi=(r=Wt.nodeRef.current)!=null?r:Se,jn=B?(o=Wt.rect)!=null?o:Ht:null,as=!!(Wt.nodeRef.current&&Wt.rect),Hi=LO(as?null:Ht),xt=$w(fi?ti(fi):null),ft=UO(B?qi??Se:null),Fn=HO(ft),os=Xw(N,{transform:{x:C.x-Hi.x,y:C.y-Hi.y,scaleX:1,scaleY:1},activatorEvent:he,active:D,activeNodeRect:Ht,containerNodeRect:xi,draggingNodeRect:jn,over:Pn.current.over,overlayNodeRect:Wt.rect,scrollableAncestors:ft,scrollableAncestorRects:Fn,windowRect:xt}),ls=ze?Yo(ze,C):null,Jt=zO(ft),Fi=H1(Jt),Rs=H1(Jt,[Ht]),Gn=Yo(os,Fi),xn=jn?fO(jn,os):null,Gi=D&&xn?b({active:D,collisionRect:xn,droppableRects:me,droppableContainers:L,pointerCoordinates:ls}):null,Cs=Vw(Gi,"id"),[$n,Ns]=q.useState(null),Kn=as?os:Yo(os,Rs),Ft=uO(Kn,(c=$n?.rect)!=null?c:null,Ht),pn=q.useRef(null),St=q.useCallback((Fe,At)=>{let{sensor:Rt,options:Lt}=At;if(De.current==null)return;const yn=S.get(De.current);if(!yn)return;const Zt=Fe.nativeEvent,Vt=new Rt({active:De.current,activeNode:yn,event:Zt,options:Lt,context:Pn,onAbort(gt){if(!S.get(gt))return;const{onDragAbort:Gt}=Ae.current,fe={id:gt};Gt?.(fe),$({type:"onDragAbort",event:fe})},onPending(gt,pt,Gt,fe){if(!S.get(gt))return;const{onDragPending:it}=Ae.current,Ot={id:gt,constraint:pt,initialCoordinates:Gt,offset:fe};it?.(Ot),$({type:"onDragPending",event:Ot})},onStart(gt){const pt=De.current;if(pt==null)return;const Gt=S.get(pt);if(!Gt)return;const{onDragStart:fe}=Ae.current,un={activatorEvent:Zt,active:{id:pt,data:Gt.data,rect:j}};yc.unstable_batchedUpdates(()=>{fe?.(un),X(Fr.Initializing),k({type:mn.DragStart,initialCoordinates:gt,active:pt}),$({type:"onDragStart",event:un}),ee(pn.current),pe(Zt)})},onMove(gt){k({type:mn.DragMove,coordinates:gt})},onEnd:Z(mn.DragEnd),onCancel:Z(mn.DragCancel)});pn.current=Vt;function Z(gt){return async function(){const{active:Gt,collisions:fe,over:un,scrollAdjustedTranslate:it}=Pn.current;let Ot=null;if(Gt&&it){const{cancelDrop:hn}=Ae.current;Ot={activatorEvent:Zt,active:Gt,collisions:fe,delta:it,over:un},gt===mn.DragEnd&&typeof hn=="function"&&await Promise.resolve(hn(Ot))&&(gt=mn.DragCancel)}De.current=null,yc.unstable_batchedUpdates(()=>{k({type:gt}),X(Fr.Uninitialized),Ns(null),ee(null),pe(null),pn.current=null;const hn=gt===mn.DragEnd?"onDragEnd":"onDragCancel";if(Ot){const yt=Ae.current[hn];yt?.(Ot),$({type:hn,event:Ot})}})}}},[S]),Is=q.useCallback((Fe,At)=>(Rt,Lt)=>{const yn=Rt.nativeEvent,Zt=S.get(Lt);if(De.current!==null||!Zt||yn.dndKit||yn.defaultPrevented)return;const Vt={active:Zt};Fe(Rt,At.options,Vt)===!0&&(yn.dndKit={capturedBy:At.sensor},De.current=Lt,St(Rt,At))},[S,St]),$i=kO(v,Is);BO(v),ir(()=>{Ht&&ue===Fr.Initializing&&X(Fr.Initialized)},[Ht,ue]),q.useEffect(()=>{const{onDragMove:Fe}=Ae.current,{active:At,activatorEvent:Rt,collisions:Lt,over:yn}=Pn.current;if(!At||!Rt)return;const Zt={active:At,activatorEvent:Rt,collisions:Lt,delta:{x:Gn.x,y:Gn.y},over:yn};yc.unstable_batchedUpdates(()=>{Fe?.(Zt),$({type:"onDragMove",event:Zt})})},[Gn.x,Gn.y]),q.useEffect(()=>{const{active:Fe,activatorEvent:At,collisions:Rt,droppableContainers:Lt,scrollAdjustedTranslate:yn}=Pn.current;if(!Fe||De.current==null||!At||!yn)return;const{onDragOver:Zt}=Ae.current,Vt=Lt.get(Cs),Z=Vt&&Vt.rect.current?{id:Vt.id,rect:Vt.rect.current,data:Vt.data,disabled:Vt.disabled}:null,gt={active:Fe,activatorEvent:At,collisions:Rt,delta:{x:yn.x,y:yn.y},over:Z};yc.unstable_batchedUpdates(()=>{Ns(Z),Zt?.(gt),$({type:"onDragOver",event:gt})})},[Cs]),ir(()=>{Pn.current={activatorEvent:he,active:D,activeNode:Se,collisionRect:xn,collisions:Gi,droppableRects:me,draggableNodes:S,draggingNode:fi,draggingNodeRect:jn,droppableContainers:O,over:$n,scrollableAncestors:ft,scrollAdjustedTranslate:Gn},j.current={initial:jn,translated:xn}},[D,Se,Gi,xn,S,fi,jn,me,O,$n,ft,Gn]),NO({...Dt,delta:C,draggingRect:xn,pointerCoordinates:ls,scrollableAncestors:ft,scrollableAncestorRects:Fn});const rr=q.useMemo(()=>({active:D,activeNode:Se,activeNodeRect:Ht,activatorEvent:he,collisions:Gi,containerNodeRect:xi,dragOverlay:Wt,draggableNodes:S,droppableContainers:O,droppableRects:me,over:$n,measureDroppableContainers:de,scrollableAncestors:ft,scrollableAncestorRects:Fn,measuringConfiguration:se,measuringScheduled:_e,windowRect:xt}),[D,Se,Ht,he,Gi,xi,Wt,S,O,me,$n,de,ft,Fn,se,_e,xt]),ni=q.useMemo(()=>({activatorEvent:he,activators:$i,active:D,activeNodeRect:Ht,ariaDescribedById:{draggable:Pe},dispatch:k,draggableNodes:S,over:$n,measureDroppableContainers:de}),[he,$i,D,Ht,k,Pe,S,$n,de]);return rt.createElement(Ow.Provider,{value:F},rt.createElement(fu.Provider,{value:ni},rt.createElement(Yw.Provider,{value:rr},rt.createElement(rd.Provider,{value:Ft},p)),rt.createElement(XO,{disabled:m?.restoreFocus===!1})),rt.createElement(iO,{...m,hiddenTextDescribedById:Pe}));function Ki(){const Fe=ke?.autoScrollEnabled===!1,At=typeof g=="object"?g.enabled===!1:g===!1,Rt=B&&!Fe&&!At;return typeof g=="object"?{...g,enabled:Rt}:{enabled:Rt}}}),ZO=q.createContext(null),G1="button",ek="Draggable";function du(i){let{id:e,data:t,disabled:r=!1,attributes:o}=i;const c=td(ek),{activators:u,activatorEvent:m,active:g,activeNodeRect:p,ariaDescribedById:v,draggableNodes:b,over:w}=q.useContext(fu),{role:N=G1,roleDescription:V="draggable",tabIndex:z=0}=o??{},I=g?.id===e,k=q.useContext(I?rd:ZO),[$,F]=Af(),[ue,X]=Af(),B=qO(u,e),A=$c(t);ir(()=>(b.set(e,{id:e,key:c,node:$,activatorNode:ue,data:A}),()=>{const C=b.get(e);C&&C.key===c&&b.delete(e)}),[b,e]);const S=q.useMemo(()=>({role:N,tabIndex:z,"aria-disabled":r,"aria-pressed":I&&N===G1?!0:void 0,"aria-roledescription":V,"aria-describedby":v.draggable}),[r,N,z,I,V,v.draggable]);return{active:g,activatorEvent:m,activeNodeRect:p,attributes:S,isDragging:I,listeners:r?void 0:B,node:$,over:w,setNodeRef:F,setActivatorNodeRef:X,transform:k}}function tk(){return q.useContext(Yw)}const nk="Droppable",ik={timeout:25};function yl(i){let{data:e,disabled:t=!1,id:r,resizeObserverConfig:o}=i;const c=td(nk),{active:u,dispatch:m,over:g,measureDroppableContainers:p}=q.useContext(fu),v=q.useRef({disabled:t}),b=q.useRef(!1),w=q.useRef(null),N=q.useRef(null),{disabled:V,updateMeasurementsFor:z,timeout:I}={...ik,...o},k=$c(z??r),$=q.useCallback(()=>{if(!b.current){b.current=!0;return}N.current!=null&&clearTimeout(N.current),N.current=setTimeout(()=>{p(Array.isArray(k.current)?k.current:[k.current]),N.current=null},I)},[I]),F=sd({callback:$,disabled:V||!u}),ue=q.useCallback((S,C)=>{F&&(C&&(F.unobserve(C),b.current=!1),S&&F.observe(S))},[F]),[X,B]=Af(ue),A=$c(e);return q.useEffect(()=>{!F||!X.current||(F.disconnect(),b.current=!1,F.observe(X.current))},[X,F]),q.useEffect(()=>(m({type:mn.RegisterDroppable,element:{id:r,key:c,disabled:t,node:X,rect:w,data:A}}),()=>m({type:mn.UnregisterDroppable,key:c,id:r})),[r]),q.useEffect(()=>{t!==v.current.disabled&&(m({type:mn.SetDroppableDisabled,id:r,key:c,disabled:t}),v.current.disabled=t)},[r,c,t,m]),{active:u,rect:w,isOver:g?.id===r,node:X,over:g,setNodeRef:B}}function sk(i){let{animation:e,children:t}=i;const[r,o]=q.useState(null),[c,u]=q.useState(null),m=Rf(t);return!t&&!r&&m&&o(m),ir(()=>{if(!c)return;const g=r?.key,p=r?.props.id;if(g==null||p==null){o(null);return}Promise.resolve(e(p,c)).then(()=>{o(null)})},[e,r,c]),rt.createElement(rt.Fragment,null,t,r?q.cloneElement(r,{ref:u}):null)}const rk={x:0,y:0,scaleX:1,scaleY:1};function ak(i){let{children:e}=i;return rt.createElement(fu.Provider,{value:Qw},rt.createElement(rd.Provider,{value:rk},e))}const ok={position:"fixed",touchAction:"none"},lk=i=>u0(i)?"transform 250ms ease":void 0,ck=q.forwardRef((i,e)=>{let{as:t,activatorEvent:r,adjustScale:o,children:c,className:u,rect:m,style:g,transform:p,transition:v=lk}=i;if(!m)return null;const b=o?p:{...p,scaleX:1,scaleY:1},w={...ok,width:m.width,height:m.height,top:m.top,left:m.left,transform:al.Transform.toString(b),transformOrigin:o&&r?sO(r,m):void 0,transition:typeof v=="function"?v(r):v,...g};return rt.createElement(t,{className:u,style:w,ref:e},c)}),uk=i=>e=>{let{active:t,dragOverlay:r}=e;const o={},{styles:c,className:u}=i;if(c!=null&&c.active)for(const[m,g]of Object.entries(c.active))g!==void 0&&(o[m]=t.node.style.getPropertyValue(m),t.node.style.setProperty(m,g));if(c!=null&&c.dragOverlay)for(const[m,g]of Object.entries(c.dragOverlay))g!==void 0&&r.node.style.setProperty(m,g);return u!=null&&u.active&&t.node.classList.add(u.active),u!=null&&u.dragOverlay&&r.node.classList.add(u.dragOverlay),function(){for(const[g,p]of Object.entries(o))t.node.style.setProperty(g,p);u!=null&&u.active&&t.node.classList.remove(u.active)}},hk=i=>{let{transform:{initial:e,final:t}}=i;return[{transform:al.Transform.toString(e)},{transform:al.Transform.toString(t)}]},fk={duration:250,easing:"ease",keyframes:hk,sideEffects:uk({styles:{active:{opacity:"0"}}})};function dk(i){let{config:e,draggableNodes:t,droppableContainers:r,measuringConfiguration:o}=i;return ed((c,u)=>{if(e===null)return;const m=t.get(c);if(!m)return;const g=m.node.current;if(!g)return;const p=Kw(u);if(!p)return;const{transform:v}=ti(u).getComputedStyle(u),b=jw(v);if(!b)return;const w=typeof e=="function"?e:mk(e);return Fw(g,o.draggable.measure),w({active:{id:c,data:m.data,node:g,rect:o.draggable.measure(g)},draggableNodes:t,dragOverlay:{node:u,rect:o.dragOverlay.measure(p)},droppableContainers:r,measuringConfiguration:o,transform:b})})}function mk(i){const{duration:e,easing:t,sideEffects:r,keyframes:o}={...fk,...i};return c=>{let{active:u,dragOverlay:m,transform:g,...p}=c;if(!e)return;const v={x:m.rect.left-u.rect.left,y:m.rect.top-u.rect.top},b={scaleX:g.scaleX!==1?u.rect.width*g.scaleX/m.rect.width:1,scaleY:g.scaleY!==1?u.rect.height*g.scaleY/m.rect.height:1},w={x:g.x-v.x,y:g.y-v.y,...b},N=o({...p,active:u,dragOverlay:m,transform:{initial:g,final:w}}),[V]=N,z=N[N.length-1];if(JSON.stringify(V)===JSON.stringify(z))return;const I=r?.({active:u,dragOverlay:m,...p}),k=m.node.animate(N,{duration:e,easing:t,fill:"forwards"});return new Promise($=>{k.onfinish=()=>{I?.(),$()}})}}let $1=0;function gk(i){return q.useMemo(()=>{if(i!=null)return $1++,$1},[i])}const Ww=rt.memo(i=>{let{adjustScale:e=!1,children:t,dropAnimation:r,style:o,transition:c,modifiers:u,wrapperElement:m="div",className:g,zIndex:p=999}=i;const{activatorEvent:v,active:b,activeNodeRect:w,containerNodeRect:N,draggableNodes:V,droppableContainers:z,dragOverlay:I,over:k,measuringConfiguration:$,scrollableAncestors:F,scrollableAncestorRects:ue,windowRect:X}=tk(),B=q.useContext(rd),A=gk(b?.id),S=Xw(u,{activatorEvent:v,active:b,activeNodeRect:w,containerNodeRect:N,draggingNodeRect:I.rect,over:k,overlayNodeRect:I.rect,scrollableAncestors:F,scrollableAncestorRects:ue,transform:B,windowRect:X}),C=y0(w),O=dk({config:r,draggableNodes:V,droppableContainers:z,measuringConfiguration:$}),M=C?I.setRef:void 0;return rt.createElement(ak,null,rt.createElement(sk,{animation:O},b&&A?rt.createElement(ck,{key:A,id:b.id,ref:M,as:m,activatorEvent:v,adjustScale:e,className:g,transition:c,rect:C,style:{zIndex:p,...o},transform:S},t):null))}),Xo=i=>new o0(i),pk=(i,e,t,r)=>{try{return i.move({from:e,to:t,promotion:r||"q"})}catch{return null}},yk=({id:i,isLight:e,isHighlighted:t=!1,isActive:r=!1,children:o})=>{const{isOver:c,setNodeRef:u}=yl({id:i});return T.jsxs("div",{ref:u,className:`chess-square ${r?"z-50 relative":"overflow-hidden"} ${c?"bg-indigo-500/60 shadow-[inset_0_0_20px_rgba(255,255,255,0.2)] z-10":t?e?"bg-indigo-400/50 shadow-inner":"bg-indigo-600/50 shadow-inner":e?"bg-[#cbd5e1] text-slate-700 shadow-[inset_0_1px_4px_rgba(255,255,255,0.3)]":"bg-[#334155] text-slate-400 shadow-[inset_0_2px_4px_rgba(0,0,0,0.3)]"}`,children:[T.jsx("div",{className:`absolute top-1 left-1 text-[10px] font-black uppercase tracking-tighter opacity-20 pointer-events-none ${e?"text-slate-900":"text-slate-100"}`,children:i}),T.jsx("div",{className:"relative w-full h-full overflow-visible z-10",children:o})]})},vk={w:{p:"",r:"",n:"",b:"",q:"",k:""},b:{p:"",r:"",n:"",b:"",q:"",k:""}},_k=({id:i,type:e,color:t,isDraggable:r=!0})=>{const{attributes:o,listeners:c,setNodeRef:u,transform:m,isDragging:g}=du({id:i,disabled:!r,data:{type:e,color:t}}),p={transform:al.Translate.toString(m),transition:g?"none":"transform 120ms ease-out",zIndex:g?9999:20};return T.jsx("div",{ref:u,style:p,...c,...o,className:`chess-piece transition-transform duration-120 ease-out ${g?"scale-112 drop-shadow-2xl z-[9999]":"hover:scale-103 z-20"} ${r?"cursor-grab active:cursor-grabbing":"grayscale-[0.2] opacity-90 cursor-default"} text-slate-950 drop-shadow-sm`,children:T.jsx("div",{className:`
        flex items-center justify-center w-full h-full 
        ${t==="w"?"drop-shadow-[0_2px_0_rgba(255,255,255,0.8)]":"drop-shadow-[0_2px_0_rgba(0,0,0,0.5)]"}
      `,children:vk[t][e]})})},bk=({onMove:i,initialFen:e,playerColor:t="w",isGameOver:r=!1})=>{const[o,c]=q.useState(()=>Xo(e)),[u,m]=q.useState([]),[g,p]=q.useState(null);rt.useEffect(()=>{e&&e!==o.fen()&&c(Xo(e))},[e]);const v=h0(Fa(p0,{activationConstraint:{delay:80,tolerance:8}}),Fa(id),Fa(g0)),b=q.useCallback(V=>{const{active:z,over:I}=V;if(m([]),p(null),!I)return;const k=z.id,$=I.id,F=Xo(o.fen());pk(F,k,$)&&(c(F),i&&i(F.fen()))},[o,i]),w=q.useCallback(V=>{p(V);const z=V,I=o.get(z);if(r||!I||I.color!==t||o.turn()!==t){m([]);return}const k=o.moves({square:z,verbose:!0}).map($=>$.to);m(k)},[o,t]),N=()=>{const V=[],z=["a","b","c","d","e","f","g","h"],I=["8","7","6","5","4","3","2","1"],k=t==="w"?I:[...I].reverse(),$=t==="w"?z:[...z].reverse();for(const F of k)for(const ue of $){const X=`${ue}${F}`,B=o.get(X),A=(z.indexOf(ue)+I.indexOf(F))%2===0,S=!!B&&B.color===t&&o.turn()===t&&!r,C=u.includes(X),O=X===g;V.push(T.jsx(yk,{id:X,isLight:A,isHighlighted:C,isActive:O,children:B&&T.jsx(_k,{id:X,type:B.type,color:B.color,isDraggable:S})},X))}return V};return T.jsx(v0,{sensors:v,onDragEnd:b,onDragStart:V=>w(V.active.id),children:T.jsx("div",{className:"p-3 lg:p-4 bg-slate-800 rounded-[2rem] lg:rounded-[2.5rem] shadow-[0_0_50px_-12px_rgba(99,102,241,0.25)] border-4 border-slate-700/50 ring-4 ring-slate-900/50",style:{touchAction:"none"},children:T.jsx("div",{className:"grid grid-cols-8 gap-0 rounded-2xl lg:rounded-3xl overflow-hidden border border-slate-700/30 shadow-inner",style:{width:"min(92vw, 720px)",height:"min(92vw, 720px)",gridTemplateColumns:"repeat(8, 1fr)"},children:N()})})})},Ek=()=>Math.random().toString(36).substring(2,8).toUpperCase(),K1="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",Jw=i=>{const[e,t]=q.useState(null),[r,o]=q.useState(null),[c,u]=q.useState(!0),[m,g]=q.useState(!0);q.useEffect(()=>{const I=Fc();Hc(I).then(k=>{o(k.user.uid)}).catch(k=>{console.error("Auth failed",k)}).finally(()=>g(!1))},[]);const p=async()=>{if(r)return r;const I=Fc(),k=await Hc(I);return o(k.user.uid),k.user.uid};return q.useEffect(()=>{if(!On||!Qe){console.warn("Firebase not configured; room sync disabled."),u(!1);return}if(!i){t(null),u(!1);return}u(!0);const I=Jn(Wn(Qe,"rooms"),i),k=Zp(I,$=>{$.exists()?t($.data()):t(null),u(!1)},$=>{console.error("Room subscription error",$),t(null),u(!1)});return()=>k()},[i]),{room:e,userId:r,loading:c,isAuthLoading:m,createRoom:async()=>{if(!On||!Qe)throw new Error("Firebase not configured");const I=await p(),k=Ek(),$=Jn(Wn(Qe,"rooms"),k);return await Jp($,{fen:K1,whitePlayer:I,blackPlayer:"",turn:"w",status:"active",winner:"",resultReason:""}),k},joinRoom:async I=>{if(!On||!Qe)throw new Error("Firebase not configured");const k=await p(),$=Jn(Wn(Qe,"rooms"),I);await Rc(Qe,async F=>{const ue=await F.get($);if(!ue.exists())throw new Error("Room not found");const B={...ue.data()};B.whitePlayer?!B.blackPlayer&&B.whitePlayer!==k&&(B.blackPlayer=k):B.whitePlayer=k,F.update($,B)})},updateMove:async I=>{if(!On||!Qe||!i)return;const k=Jn(Wn(Qe,"rooms"),i);await Rc(Qe,async $=>{const F=await $.get(k);if(!F.exists())return;const ue=F.data();if(ue.status&&ue.status!=="active")return;const X=new o0(I),B=X.turn();let A="active",S="",C="";X.isCheckmate()?(A="checkmate",S=B==="w"?"b":"w",C="checkmate"):X.isStalemate&&X.isStalemate()?(A="stalemate",S="",C="stalemate"):X.isDraw()&&(A="draw",S="",C="draw"),$.update(k,{fen:I,turn:B,status:A,winner:S,resultReason:C})})},resignGame:async I=>{if(!On||!Qe||!i)return;const k=Jn(Wn(Qe,"rooms"),i);await Ac(k,{status:"resigned",winner:I==="w"?"b":"w",resultReason:"resigned"})},resetGame:async()=>{if(!On||!Qe||!i)return;const I=Jn(Wn(Qe,"rooms"),i);await Ac(I,{fen:K1,turn:"w",status:"active",winner:"",resultReason:""})},leaveRoom:async()=>{if(!(!On||!Qe)&&i)try{const I=await p(),k=Jn(Wn(Qe,"rooms"),i);await Rc(Qe,async $=>{const F=await $.get(k);if(!F.exists())return;const X={...F.data()};X.whitePlayer===I?X.whitePlayer="":X.blackPlayer===I&&(X.blackPlayer=""),$.update(k,X)})}catch(I){console.error("Error leaving room:",I)}}}},Tk={p:10,n:30,b:30,r:50,q:90,k:900},Q1=[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,-.5,-1,0,0,-1,-.5,.5],[.5,1,1,-2,-2,1,1,.5],[0,0,0,0,0,0,0,0]],Y1=[[-5,-4,-3,-3,-3,-3,-4,-5],[-4,-2,0,0,0,0,-2,-4],[-3,0,1,1.5,1.5,1,0,-3],[-3,.5,1.5,2,2,1.5,.5,-3],[-3,0,1.5,2,2,1.5,0,-3],[-3,.5,1,1.5,1.5,1,.5,-3],[-4,-2,0,.5,.5,0,-2,-4],[-5,-4,-3,-3,-3,-3,-4,-5]],wk=i=>{let e=0;const t=i.board();for(let r=0;r<8;r++)for(let o=0;o<8;o++){const c=t[r][o];if(c){const u=Tk[c.type];let m=0;c.type==="p"&&(m=c.color==="w"?Q1[r][o]:Q1[7-r][o]),c.type==="n"&&(m=c.color==="w"?Y1[r][o]:Y1[7-r][o]),c.color==="w"?e+=u+m*.1:e-=u+m*.1}}return e},ap=(i,e,t,r,o)=>{if(e===0||i.isGameOver())return-wk(i);const c=i.moves();if(o){let u=-1/0;for(const m of c){i.move(m);const g=ap(i,e-1,t,r,!1);if(i.undo(),u=Math.max(u,g),t=Math.max(t,g),r<=t)break}return u}else{let u=1/0;for(const m of c){i.move(m);const g=ap(i,e-1,t,r,!0);if(i.undo(),u=Math.min(u,g),r=Math.min(r,g),r<=t)break}return u}},xk=(i,e="Normal")=>{const t=i.moves();if(t.length===0)return null;if(e==="Easy"&&Math.random()>.2)return t[Math.floor(Math.random()*t.length)];let r=null,o=1/0;t.sort((u,m)=>{const g=u.includes("x")?1:0;return(m.includes("x")?1:0)-g});const c=e==="Easy"?1:e==="Hard"?3:2;for(const u of t){i.move(u);const m=ap(i,c,-1/0,1/0,!0);i.undo(),m<o&&(o=m,r=u)}return r||t[0]},Sk=({roomId:i="",mode:e="online",aiDifficulty:t="Normal",onExit:r})=>{const o=Jw(e==="online"?i:null),[c,u]=q.useState(()=>Xo()),[m,g]=q.useState(c.fen()),[p,v]=q.useState("active"),[b,w]=q.useState(""),N=e==="local",V=N?{fen:m,turn:c.turn(),whitePlayer:"local-white",blackPlayer:"local-black",status:p,winner:b}:o.room,z=N?!1:o.loading,I=de=>{const _e=Xo(de);u(_e),g(de),_e.isCheckmate()?(v("checkmate"),w(_e.turn()==="w"?"b":"w")):_e.isDraw()?v("draw"):_e.isStalemate&&_e.isStalemate()&&v("stalemate")};q.useEffect(()=>{if(N&&c.turn()==="b"&&p==="active"){const de=setTimeout(()=>{const _e=xk(c,t);_e&&(c.move(_e),I(c.fen()))},500);return()=>clearTimeout(de)}},[m,N,p,t]);const k=()=>{const de=Xo();u(de),g(de.fen()),v("active"),w(""),A(0),C(0),M(0)},$=N?I:o.updateMove,F=N?de=>{v("active"),w(de==="w"?"b":"w"),alert(`${de==="w"?"White":"Black"} resigned.`)}:o.resignGame,ue=N?k:o.resetGame,X=N?V?.turn==="w"?"local-white":"local-black":o.userId,[B,A]=rt.useState(0),[S,C]=rt.useState(0),[O,M]=rt.useState(0);if(rt.useEffect(()=>{!N&&i&&o.joinRoom&&o.joinRoom(i)},[i,N]),rt.useEffect(()=>{if(!V||V.status&&V.status!=="active")return;const de=window.setInterval(()=>{A(_e=>_e+1),C(_e=>_e+(V.turn==="w"?1:0)),M(_e=>_e+(V.turn==="b"?1:0))},1e3);return()=>window.clearInterval(de)},[V?.turn,V?.status]),z)return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-6 animate-pulse",children:[T.jsx("div",{className:"relative shadow-2xl shadow-indigo-500/20 rounded-full p-4",children:T.jsx(iE,{className:"w-16 h-16 text-indigo-500 animate-spin"})}),T.jsxs("div",{className:"text-center space-y-2",children:[T.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest",children:"Entering Arena"}),T.jsx("p",{className:"text-slate-500 font-medium",children:"Synchronizing with the global lattice..."})]})]});if(!V)return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[T.jsxs("div",{className:"text-center space-y-4",children:[T.jsx("h2",{className:"text-5xl font-black text-white italic",children:"Room Dissolved"}),T.jsx("p",{className:"text-slate-400 text-lg",children:"The arena you seek no longer exists or the link is expired."})]}),T.jsx("button",{onClick:r,className:"btn-premium px-10 py-4 text-xl",children:"Return to Lobby"})]});const j=V.whitePlayer===X||N,D=V.blackPlayer===X,De=N||X===V.whitePlayer?"w":X===V.blackPlayer?"b":"w",ke=V.turn===De,ee=new o0(V.fen),he={isCheck:ee.isCheck(),isCheckmate:ee.isCheckmate(),isDraw:ee.isDraw(),isStalemate:typeof ee.isStalemate=="function"?ee.isStalemate():!1,turn:ee.turn()},pe=V.status??"active",Ae=V.winner??"",Pe=pe!=="active",L=de=>{const _e=Math.floor(de/60).toString().padStart(2,"0"),Se=(de%60).toString().padStart(2,"0");return`${_e}:${Se}`},se=pe==="checkmate"?`Checkmate  ${Ae==="w"?"White":"Black"} wins`:pe==="stalemate"?"Stalemate  Draw":pe==="draw"?"Draw":pe==="resigned"?`Resigned  ${Ae==="w"?"White":"Black"} wins`:he.isCheck?`${he.turn==="w"?"White":"Black"} is in check`:ke?"Your Turn":"Waiting...",me=()=>{navigator.clipboard.writeText(i),alert("Room ID copied to clipboard!")};return T.jsxs("div",{className:"flex flex-col items-center gap-8 lg:gap-12 py-6 lg:py-10 w-full animate-in fade-in duration-700",children:[T.jsxs("header",{className:"w-full max-w-6xl flex items-center justify-between px-4 lg:px-6",children:[T.jsxs("button",{onClick:()=>{!N&&o.leaveRoom&&o.leaveRoom(),r()},className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all font-bold uppercase tracking-widest text-xs",children:[T.jsx("div",{className:"p-2 rounded-xl bg-slate-900 border border-slate-800 group-hover:border-slate-700 group-hover:-translate-x-1 transition-transform",children:T.jsx(_c,{size:18})}),"Back"]}),!N&&T.jsx("div",{className:"flex items-center gap-4",children:T.jsxs("div",{className:"liquid-glass px-6 py-3 flex items-center gap-6",children:[T.jsxs("div",{className:"flex flex-col gap-0.5",children:[T.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-slate-500 font-black",children:"Arena ID"}),T.jsx("code",{className:"text-indigo-300 font-mono font-bold",children:i})]}),T.jsx("div",{className:"h-8 w-px bg-slate-800"}),T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("button",{onClick:me,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:T.jsx(tE,{size:18})}),T.jsx("button",{className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:T.jsx(sE,{size:18})})]})]})}),N&&T.jsx("div",{className:"px-6 py-3 liquid-glass text-indigo-300 font-bold uppercase tracking-widest text-xs",children:"Single Player Mode"})]}),T.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-6 lg:gap-16 w-full max-w-7xl px-4 lg:px-6",children:[T.jsxs("div",{className:"relative group w-full flex justify-center max-w-full overflow-visible",children:[T.jsx("div",{className:"absolute -inset-4 bg-linear-to-r from-indigo-500 to-pink-500 rounded-[2.5rem] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"}),T.jsx(bk,{initialFen:V.fen,onMove:$,playerColor:De,isGameOver:Pe})]}),T.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-6 lg:gap-8 mt-0 lg:mt-0",children:[T.jsxs("div",{className:"liquid-glass p-5 lg:p-8 space-y-6 lg:space-y-8 border-l-4 border-l-indigo-500",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:"Game Status"}),T.jsxs("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-2 ${pe==="active"?ke?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-slate-800 text-slate-500":"bg-indigo-500/10 text-indigo-300 border border-indigo-500/30"}`,children:[T.jsx("span",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${pe==="active"?"bg-green-500":"bg-indigo-400"}`}),N?V.turn==="w"?" White Turn":" Black Turn":se]})]}),pe==="active"&&he.isCheck&&T.jsxs("div",{className:"p-3 rounded-2xl bg-amber-500/10 border border-amber-500/30 text-amber-200 text-[10px] lg:text-xs font-black uppercase tracking-widest",children:["CHECK! ",he.turn==="w"?"White":"Black"," to move."]}),Pe&&T.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/10 border border-indigo-500/30 text-indigo-100 text-sm lg:text-base font-bold",children:se}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 p-4 rounded-2xl bg-slate-900/60 border border-slate-800/80 text-[10px] lg:text-xs font-bold uppercase tracking-widest",children:[T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"Time"}),T.jsx("div",{className:"text-white text-base",children:L(B)})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"White"}),T.jsx("div",{className:"text-emerald-300 text-base",children:L(S)})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"Black"}),T.jsx("div",{className:"text-sky-300 text-base",children:L(O)})]})]}),!N&&T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex items-center gap-3 lg:gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[T.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${j?"bg-white text-slate-950":"bg-slate-800 text-slate-400"}`,children:"W"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"White Player"}),T.jsx("div",{className:"text-xs text-slate-500 font-medium",children:V.whitePlayer===X?"Connected (You)":V.whitePlayer?"Opponent Ready":"Awaiting Entry..."})]})]}),T.jsxs("div",{className:"flex items-center gap-3 lg:gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[T.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${D?"bg-indigo-500 text-white":"bg-slate-800 text-slate-400"}`,children:"B"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"Black Player"}),T.jsx("div",{className:"text-xs text-slate-500 font-medium",children:V.blackPlayer===X?"Connected (You)":V.blackPlayer?"Opponent Ready":"Awaiting Entry..."})]})]})]})]}),T.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[T.jsxs("button",{disabled:Pe,onClick:()=>F(De),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-slate-800 bg-slate-900/60 text-slate-200 font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:border-red-500/50 hover:text-red-200 transition",children:[T.jsx(nE,{size:18}),"Resign"]}),T.jsxs("button",{disabled:!Pe&&!N,onClick:()=>ue(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 text-indigo-100 font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:bg-indigo-500/20 transition",children:[T.jsx(up,{size:18}),"Rematch"]})]})]}),!N&&T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[T.jsx(hp,{size:20,className:"mx-auto text-slate-600"}),T.jsx("div",{className:"text-xl font-black text-white italic",children:V.whitePlayer&&V.blackPlayer?"2/2":V.whitePlayer||V.blackPlayer?"1/2":"0/2"}),T.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Connected"})]}),T.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[T.jsx(rE,{size:20,className:"mx-auto text-indigo-400"}),T.jsx("div",{className:"text-xl font-black text-white italic",children:"24ms"}),T.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Latency"})]})]})]})]}),T.jsxs("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10 flex flex-col items-center gap-1",children:[T.jsx("span",{children:"Transparent Strategy Arena"}),T.jsx("span",{className:"text-slate-700 text-[8px]",children:"v1.2.0"})]})]})},Ak=[2,0,0,0,0,-5,0,-3,0,0,0,5,-5,0,0,0,3,0,5,0,0,0,0,-2],vc=()=>{const i=Math.floor(Math.random()*6)+1,e=Math.floor(Math.random()*6)+1;return i===e?[i,i,i,i]:[i,e]},Oc=()=>{const i=vc();return{board:[...Ak],bar:{white:0,black:0},off:{white:0,black:0},turn:"white",dice:i,movesLeft:[...i],validMoves:[],winner:null}},Rk=(i,e)=>{const t=i.board;if(e==="white"){if(i.bar.white>0)return!1;for(let r=0;r<18;r++)if(t[r]>0)return!1;return!0}else{if(i.bar.black>0)return!1;for(let r=6;r<24;r++)if(t[r]<0)return!1;return!0}},op=i=>{if(i.winner)return[];const e=o=>{const c=[],{turn:u,board:m,bar:g,movesLeft:p}=o,v=Array.from(new Set(p));if(p.length===0)return[];const b=u==="white",w=b?1:-1;if((b?g.white:g.black)>0){for(const V of v){const z=b?V-1:24-V,I=m[z];(b?I<-1:I>1)||c.push({from:"bar",to:z,roll:V,isHit:b?I===-1:I===1})}return c}for(let V=0;V<24;V++){const z=m[V];if(!(b&&z<=0)&&!(!b&&z>=0))for(const I of v){const k=V+w*I;if(Rk(o,u)){if(b&&k===24){c.push({from:V,to:"off",roll:I});continue}if(!b&&k===-1){c.push({from:V,to:"off",roll:I});continue}if(b&&k>24){let X=!0;for(let B=18;B<V;B++)m[B]>0&&(X=!1);X&&c.push({from:V,to:"off",roll:I})}if(!b&&k<-1){let X=!0;for(let B=5;B>V;B--)m[B]<0&&(X=!1);X&&c.push({from:V,to:"off",roll:I})}}if(k<0||k>23)continue;const F=m[k];(b?F<-1:F>1)||c.push({from:V,to:k,roll:I,isHit:b?F===-1:F===1})}}return c},t=e(i),r=[...t];if(i.movesLeft.length>1)for(const o of t){const c=mu(i,o),u=e(c);if(o.to!=="off"){const m=u.filter(g=>g.from===o.to);for(const g of m)r.push({from:o.from,to:g.to,roll:o.roll+g.roll,isHit:g.isHit,subMoves:[o,g]})}}return r},mu=(i,e)=>{const t={...i,board:[...i.board],bar:{...i.bar},off:{...i.off},movesLeft:[...i.movesLeft]},r=i.turn==="white";if(e.subMoves&&e.subMoves.length>0){let c=i;for(const u of e.subMoves)c=mu(c,u);return c}if(e.from==="bar"?r?t.bar.white--:t.bar.black--:t.board[e.from]-=r?1:-1,e.to==="off")r?t.off.white++:t.off.black++;else{const c=e.to;e.isHit&&(r?t.bar.black++:t.bar.white++,t.board[c]=0),t.board[c]+=r?1:-1}const o=t.movesLeft.indexOf(e.roll);return o>-1&&t.movesLeft.splice(o,1),r&&t.off.white===15&&(t.winner="white"),!r&&t.off.black===15&&(t.winner="black"),t},Ck=()=>Math.random().toString(36).substring(2,8).toUpperCase(),Zw=i=>{const[e,t]=q.useState(null),[r,o]=q.useState(null),[c,u]=q.useState(!0),[m,g]=q.useState(!0);q.useEffect(()=>{const I=Fc();Hc(I).then(k=>{o(k.user.uid)}).catch(k=>{console.error("Auth failed",k)}).finally(()=>g(!1))},[]);const p=async()=>{if(r)return r;const I=Fc(),k=await Hc(I);return o(k.user.uid),k.user.uid};return q.useEffect(()=>{if(!On||!Qe){u(!1);return}if(!i){t(null),u(!1);return}u(!0);const I=Jn(Wn(Qe,"rooms_bg"),i),k=Zp(I,$=>{$.exists()?t($.data()):t(null),u(!1)},$=>{console.error("Room subscription error",$),t(null),u(!1)});return()=>k()},[i]),{room:e,userId:r,loading:c,isAuthLoading:m,createRoom:async()=>{if(!On||!Qe)throw new Error("Firebase not configured");const I=await p(),k=Ck(),$=Jn(Wn(Qe,"rooms_bg"),k),F=Oc(),ue={board:F.board,bar:F.bar,off:F.off,turn:F.turn,dice:F.dice,movesLeft:F.movesLeft,whitePlayer:I,blackPlayer:"",winner:"",status:"active"};return await Jp($,ue),k},joinRoom:async I=>{if(!On||!Qe)throw new Error("Firebase not configured");const k=await p(),$=Jn(Wn(Qe,"rooms_bg"),I);await Rc(Qe,async F=>{const ue=await F.get($);if(!ue.exists())throw new Error("Room not found");const B={...ue.data()};B.whitePlayer?!B.blackPlayer&&B.whitePlayer!==k&&(B.blackPlayer=k):B.whitePlayer=k,F.update($,B)})},updateGameState:async I=>{if(!On||!Qe||!i)return;const k=Jn(Wn(Qe,"rooms_bg"),i);let $="active",F="";I.winner&&($="finished",F=I.winner),await Ac(k,{board:I.board,bar:I.bar,off:I.off,turn:I.turn,dice:I.dice,movesLeft:I.movesLeft,winner:F,status:$})},resignGame:async I=>{if(!On||!Qe||!i)return;const k=Jn(Wn(Qe,"rooms_bg"),i);await Ac(k,{status:"resigned",winner:I==="white"?"black":"white"})},resetGame:async()=>{if(!On||!Qe||!i)return;const I=Oc(),k=Jn(Wn(Qe,"rooms_bg"),i);await Ac(k,{board:I.board,bar:I.bar,off:I.off,turn:I.turn,dice:I.dice,movesLeft:I.movesLeft,status:"active",winner:""})},leaveRoom:async()=>{if(!(!On||!Qe)&&i)try{const I=await p(),k=Jn(Wn(Qe,"rooms_bg"),i);await Rc(Qe,async $=>{const F=await $.get(k);if(!F.exists())return;const X={...F.data()};X.whitePlayer===I?X.whitePlayer="":X.blackPlayer===I&&(X.blackPlayer=""),$.update(k,X)})}catch(I){console.error("Error leaving room:",I)}}}},ex=({color:i,style:e,className:t=""})=>{const r=i==="white"?"bg-slate-200 shadow-[inset_0_-4px_4px_rgba(0,0,0,0.2),0_4px_6px_rgba(0,0,0,0.3)] border-slate-300":"bg-slate-900 shadow-[inset_0_-4px_4px_rgba(0,0,0,0.5),0_4px_6px_rgba(0,0,0,0.4)] border-slate-700",o=i==="white"?"border-slate-300":"border-slate-700";return T.jsx("div",{style:e,className:`w-full h-full rounded-full border-4 ${r} relative flex items-center justify-center ${t}`,children:T.jsx("div",{className:`w-[70%] h-[70%] rounded-full border-2 ${o} opacity-30`})})},lp=({id:i,color:e,isDraggable:t=!1,style:r})=>{const{attributes:o,listeners:c,setNodeRef:u,isDragging:m}=du({id:i,disabled:!t}),g={opacity:m?0:1,touchAction:"none",...r};return T.jsx("div",{ref:u,style:g,...c,...o,className:"w-full aspect-square relative cursor-grab active:cursor-grabbing",children:T.jsx(ex,{color:e})})},Nk=({index:i,count:e,isTop:t,isHighlighted:r,playerColor:o,canDragFrom:c,isHitTarget:u})=>{const{setNodeRef:m,isOver:g}=yl({id:i.toString()}),p=i%2===1,v=g||r?"bg-indigo-500/20 ring-2 ring-indigo-400/50":"",b=Math.abs(e),w=e>0?"white":"black",N=5,V=Math.min(b,N),z=b>N,I=()=>b<=3?"-my-0.5":b<=5?"-my-1":"-my-1.5",k=[];for(let F=0;F<V;F++){const ue=F===V-1,X=c&&ue&&w===o;k.push(T.jsx("div",{className:`w-[80%] max-w-[40px] ${I()} z-10 relative`,children:T.jsx(lp,{id:`checker-${i}-${F}`,color:w,isDraggable:X})},`${i}-${F}`))}const $=z?T.jsx("div",{className:`absolute ${t?"bottom-1":"top-1"} left-1/2 -translate-x-1/2 z-20 
                px-1.5 py-0.5 rounded-full text-[10px] font-bold shadow-lg
                ${w==="white"?"bg-slate-100 text-slate-800 border border-slate-300":"bg-slate-800 text-slate-100 border border-slate-600"}`,children:b}):null;return T.jsxs("div",{ref:m,className:`relative flex-1 h-full flex ${t?"flex-col items-center justify-start":"flex-col-reverse items-center justify-start"} ${v} transition-colors rounded-sm`,children:[T.jsx("div",{className:"absolute inset-0 pointer-events-none w-full h-full opacity-60",style:{clipPath:t?"polygon(0 0, 50% 100%, 100% 0)":"polygon(0 100%, 50% 0, 100% 100%)",backgroundColor:p?"#334155":"#818cf8",opacity:p?.4:.15}}),T.jsx("div",{className:`z-10 w-full h-full flex ${t?"flex-col pt-2":"flex-col-reverse pb-2"} items-center overflow-hidden`,children:k}),$,u&&T.jsxs("div",{className:`absolute ${t?"top-6":"bottom-6"} left-1/2 -translate-x-1/2 z-50 pointer-events-none`,children:[T.jsx("style",{children:`
                        @keyframes shatter-left {
                            0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
                            100% { transform: translate(-20px, -10px) rotate(-15deg); opacity: 0; }
                        }
                        @keyframes shatter-right {
                            0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
                            100% { transform: translate(20px, -10px) rotate(15deg); opacity: 0; }
                        }
                        @keyframes impact-flash {
                            0% { transform: scale(0.5); opacity: 0; }
                            10% { transform: scale(1.2); opacity: 1; }
                            100% { transform: scale(0); opacity: 0; }
                        }
                        `}),T.jsx("div",{className:"relative w-10 h-10 md:w-12 md:h-12",children:(()=>{const F=e>0?"black":"white",ue=F==="white"?"bg-slate-200 border-slate-300 shadow-sm":"bg-slate-900 border-slate-700 shadow-xl",X=F==="white"?"border-slate-300":"border-slate-700";return T.jsxs(T.Fragment,{children:[T.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${ue} overflow-hidden`,style:{clipPath:"polygon(0% 0%, 55% 0%, 45% 100%, 0% 100%)",animation:"shatter-left 0.6s ease-out forwards"},children:T.jsx("div",{className:`absolute inset-2 rounded-full border-2 ${X} opacity-30`})}),T.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${ue} overflow-hidden`,style:{clipPath:"polygon(55% 0%, 100% 0%, 100% 100%, 45% 100%)",animation:"shatter-right 0.6s ease-out forwards"},children:T.jsx("div",{className:`absolute inset-2 rounded-full border-2 ${X} opacity-30`})}),T.jsx("div",{className:"absolute inset-0 bg-white rounded-full mix-blend-overlay",style:{animation:"impact-flash 0.4s ease-out forwards"}})]})})()})]}),T.jsx("span",{className:`absolute ${t?"top-0":"bottom-0"} text-[8px] text-slate-600 font-mono opacity-50`,children:i+1})]})},Ik={1:[4],2:[0,8],3:[0,4,8],4:[0,2,6,8],5:[0,2,4,6,8],6:[0,2,3,5,6,8]},Dk=({value:i,isRolling:e,color:t})=>{const[r,o]=q.useState(i);q.useEffect(()=>{let m;return e?m=setInterval(()=>{o(Math.floor(Math.random()*6)+1)},100):o(i),()=>clearInterval(m)},[e,i]);const c=t==="white"?"bg-white text-slate-900 border-slate-200 shadow-lg":"bg-slate-900 text-white border-slate-700 shadow-xl",u=t==="white"?"bg-slate-900":"bg-white";return T.jsxs("div",{className:`
                w-10 h-10 md:w-12 md:h-12 rounded-lg flex items-center justify-center border-2 
                transition-all duration-300 relative
                ${c}
                ${e?"animate-bounce scale-110 rotate-12":"hover:scale-105"}
            `,style:{perspective:"1000px",transformStyle:"preserve-3d"},children:[T.jsx("div",{className:"grid grid-cols-3 grid-rows-3 gap-1 w-[70%] h-[70%]",children:Array.from({length:9}).map((m,g)=>T.jsx("div",{className:"flex items-center justify-center",children:Ik[r].includes(g)&&T.jsx("div",{className:`w-1.5 h-1.5 md:w-2 md:h-2 rounded-full ${u} shadow-sm`})},g))}),T.jsx("div",{className:"absolute inset-0 bg-linear-to-br from-white/20 to-transparent pointer-events-none rounded-lg"})]})},Ok=({gameState:i,playerColor:e,onMove:t,validMoves:r})=>{const{board:o,bar:c,off:u,turn:m}=i,[g,p]=q.useState(null),[v,b]=q.useState([]),[w,N]=q.useState(null),[V,z]=q.useState(!1),I=rt.useRef(i.dice),k=h0(Fa(g0,{activationConstraint:{distance:8}}),Fa(p0,{activationConstraint:{delay:100,tolerance:5}})),$=B=>{const{active:A}=B,S=A.id;let C=-1;if(S.startsWith("bar"))C="bar";else if(S.startsWith("checker-")){const j=S.split("-");C=parseInt(j[1])}else C=parseInt(S);p(S);const M=r.filter(j=>C==="bar"?j.from==="bar":j.from===C).map(j=>j.to==="off"?99:j.to);b(M)},F=rt.useRef(i.board);rt.useEffect(()=>{const B=F.current,A=i.board;for(let S=0;S<24;S++){const C=B[S],O=A[S];C===-1&&O>=1&&(N(S),setTimeout(()=>N(null),800)),C===1&&O<=-1&&(N(S),setTimeout(()=>N(null),800))}F.current=i.board},[i.board]),rt.useEffect(()=>{if(JSON.stringify(I.current)!==JSON.stringify(i.dice)){z(!0);const B=setTimeout(()=>z(!1),800);return I.current=i.dice,()=>clearTimeout(B)}},[i.dice]);const ue=B=>{const{active:A,over:S}=B;if(p(null),b([]),!S)return;const C=A.id;let O=-1;if(C.startsWith("bar"))O="bar";else if(C.startsWith("checker-")){const D=C.split("-");O=parseInt(D[1])}else O=parseInt(C);let M=-1;S.id==="off"?M="off":M=parseInt(S.id);const j=r.find(D=>D.from===O&&D.to===M);if(j){const D=mu(i,j);t(D)}},X=(B,A,S)=>{const C=[];if(B<A)for(let O=B;O<=A;O++)C.push(O);else for(let O=B;O>=A;O--)C.push(O);return T.jsx("div",{className:`flex-1 flex ${S?"border-b-2":"border-t-2"} border-slate-700/30`,children:C.map(O=>T.jsx(Nk,{index:O,count:o[O],isTop:S,isHighlighted:v.includes(O),playerColor:e,canDragFrom:e===m&&(e==="white"&&c.white===0||e==="black"&&c.black===0),isHitTarget:w===O},O))})};return T.jsxs(v0,{sensors:k,onDragStart:$,onDragEnd:ue,children:[T.jsxs("div",{className:"flex flex-col md:flex-row w-full max-w-full md:max-w-7xl mx-auto gap-2 md:gap-4 items-stretch p-1 md:p-4",children:[T.jsxs("div",{className:"relative flex-1 aspect-square md:aspect-[4/3] bg-slate-800/80 rounded-xl border-4 md:border-[12px] border-slate-900 shadow-2xl flex flex-col overflow-hidden",children:[T.jsxs("div",{className:"flex-1 flex",children:[X(e==="white"?11:12,e==="white"?6:17,!0),T.jsxs("div",{className:"w-12 md:w-20 bg-slate-900/50 border-x-4 border-slate-900 flex flex-col items-center justify-center gap-1 py-2",children:[Array.from({length:c.white}).map((B,A)=>T.jsx("div",{className:"w-10 md:w-12",children:T.jsx(lp,{id:`bar-white-${A}`,color:"white",isDraggable:e==="white"&&m==="white"&&A===c.white-1})},`bar-w-${A}`)),Array.from({length:c.black}).map((B,A)=>T.jsx("div",{className:"w-10 md:w-12",children:T.jsx(lp,{id:`bar-black-${A}`,color:"black",isDraggable:e==="black"&&m==="black"&&A===c.black-1})},`bar-b-${A}`))]}),X(e==="white"?5:18,e==="white"?0:23,!0)]}),T.jsxs("div",{className:"flex-1 flex",children:[X(e==="white"?12:11,e==="white"?17:6,!1),T.jsx("div",{className:"w-12 md:w-20 bg-slate-900/50 border-x-4 border-slate-900 flex flex-col-reverse items-center justify-start gap-1 py-2"}),X(e==="white"?18:5,e==="white"?23:0,!1)]}),T.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center z-50",children:T.jsx("div",{className:"flex gap-4",children:(()=>{const B={};return i.dice.map((A,S)=>{const C=i.movesLeft.filter(M=>M===A).length;B[A]=(B[A]||0)+1;const O=B[A]>C;return T.jsx("div",{className:`transition-opacity duration-300 ${O?"opacity-30 grayscale":"opacity-100"}`,children:T.jsx(Dk,{value:A,isRolling:V,color:m==="white"?"white":"black"})},S)})})()})})]}),T.jsxs("div",{className:"w-full h-20 md:w-32 md:h-auto bg-slate-900/40 rounded-xl border-4 border-slate-800 flex flex-row md:flex-col relative overflow-hidden shrink-0",children:[T.jsx("div",{className:"absolute inset-y-0 left-1/2 -translate-x-1/2 w-[2px] bg-slate-800/50 hidden md:block"}),T.jsx("div",{className:"absolute inset-x-0 top-1/2 -translate-y-1/2 h-[2px] bg-slate-800/50 md:hidden"}),T.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 md:-rotate-90 text-slate-700 font-bold text-xs md:text-sm tracking-[0.5em] pointer-events-none whitespace-nowrap opacity-50 z-0",children:"COLLECT"}),T.jsx("div",{className:"flex-1 w-full p-2 flex flex-col gap-1 z-10 border-r md:border-r-0 md:border-b border-slate-800/50",children:T.jsx(X1,{playerColor:e==="white"?"black":"white",count:e==="white"?u.black:u.white,isTop:!0})}),T.jsx("div",{className:"flex-1 w-full p-2 flex flex-col-reverse gap-1 z-10",children:T.jsx(X1,{playerColor:e==="white"?"white":"black",count:e==="white"?u.white:u.black,isTop:!1})}),T.jsx("div",{className:`absolute inset-0 z-20 ${g?"pointer-events-auto":"pointer-events-none"}`,children:T.jsx(kk,{isHighlighted:v.includes(99)})})]})]}),T.jsx(Ww,{children:g?T.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 cursor-grabbing",children:T.jsx(ex,{color:(function(){if(g.startsWith("bar-white"))return"white";if(g.startsWith("bar-black"))return"black";if(g.startsWith("checker-")){const B=g.split("-"),A=parseInt(B[1]);return o[A]>0?"white":"black"}return"white"})()})}):null})]})},kk=({isHighlighted:i})=>{const{setNodeRef:e,isOver:t}=yl({id:"off"}),r=t||i;return T.jsx("div",{ref:e,className:`w-full h-full flex items-center justify-center transition-all duration-300 ${r?"bg-indigo-500/30 backdrop-blur-sm border-2 border-dashed border-indigo-400":""}`,children:r&&T.jsx("div",{className:"text-indigo-200 font-bold text-xs rotate-90 whitespace-nowrap animate-pulse",children:"COLLECT"})})},X1=({playerColor:i,count:e,isTop:t})=>T.jsxs("div",{className:`w-full flex ${t?"flex-col":"flex-col-reverse"} gap-[2px] transition-colors rounded-lg p-1`,children:[e>0&&T.jsx("div",{className:`text-[10px] text-center mb-1 font-bold ${i==="white"?"text-slate-400":"text-slate-600"}`,children:e}),Array.from({length:Math.min(e,15)}).map((r,o)=>T.jsx("div",{className:`h-2 w-full rounded-sm opacity-80 ${i==="white"?"bg-slate-200 shadow-sm":"bg-slate-900 border border-slate-700 shadow-sm"}`},o))]}),Mk=(i,e="Normal")=>{const t=op(i);if(t.length===0)return null;if(e==="Easy"){const c=Math.floor(Math.random()*t.length);return t[c]}let r=t[0],o=-1/0;for(const c of t){const u=Vk(i,c,e);u>o&&(o=u,r=c)}return r},Vk=(i,e,t)=>{let r=0;e.isHit&&(r+=100),e.to==="off"&&(r+=200);const o=mu({...i},e),c=i.turn==="white";if(typeof e.to=="number"){const u=o.board[e.to];c&&u===2&&(r+=50),!c&&u===-2&&(r+=50)}if(typeof e.to=="number"){const u=o.board[e.to];Math.abs(u)===1&&(r-=30)}if(typeof e.from=="number"){const u=o.board[e.from];Math.abs(u)===1&&(r-=40)}return t==="Hard"&&typeof e.to=="number"&&(c?e.to>=18:e.to<=5)&&Math.abs(o.board[e.to])>1&&(r+=30),r+=Math.random()*5,r},Pk=({roomId:i="",mode:e="online",aiDifficulty:t="Normal",onExit:r})=>{const o=Zw(e==="online"?i:null),[c,u]=q.useState(()=>Oc()),[m,g]=q.useState(null),p=e==="local",v=rt.useMemo(()=>p?c:m||(o.room?{...o.room,validMoves:[]}:null),[p,c,o.room,m]);q.useEffect(()=>{if(!o.room||!m)return;const X=o.room.turn===m.turn,B=JSON.stringify(o.room.board)===JSON.stringify(m.board),A=o.room.movesLeft.length===m.movesLeft.length;X&&B&&A?g(null):X||g(null)},[o.room,m]);const b=rt.useMemo(()=>v?op(v):[],[v]),w=p?v?.turn==="white"?"local-white":"local-black":o.userId,N=p||o.room?.whitePlayer===w?"white":"black",V=N===v?.turn;q.useEffect(()=>{!p&&i&&o.joinRoom&&o.joinRoom(i)},[i,p]);const z=()=>{navigator.clipboard.writeText(i),alert("Room ID copied to clipboard!")},I=o.room?.whitePlayer===w||p,k=o.room?.blackPlayer===w,$=!!v?.winner,F=X=>{let B={...X};B.movesLeft.length===0?(B.turn=B.turn==="white"?"black":"white",B.dice=vc(),B.movesLeft=[...B.dice]):op(B).length===0&&(B.turn=B.turn==="white"?"black":"white",B.dice=vc(),B.movesLeft=[...B.dice]),p?u(B):(g(B),o.updateGameState(B))};if(q.useEffect(()=>{if(v&&v.movesLeft.length>0&&b.length===0&&!v.winner){const X=setTimeout(()=>{let B={...v};B.turn=B.turn==="white"?"black":"white",B.dice=vc(),B.movesLeft=[...B.dice],p?u(B):(g(B),o.updateGameState(B))},1500);return()=>clearTimeout(X)}},[v?.movesLeft,b.length,v?.winner,v?.turn,p,v]),q.useEffect(()=>{if(v&&p&&v.turn==="black"&&!v.winner){const X=setTimeout(()=>{const B=Mk(v,t);if(B){const A=mu(v,B);F(A)}else{let A={...v};A.turn="white",A.dice=vc(),A.movesLeft=[...A.dice],u(A)}},1500);return()=>clearTimeout(X)}},[v,p,t]),!p&&o.loading)return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-6 animate-pulse",children:[T.jsx("div",{className:"relative shadow-2xl shadow-indigo-500/20 rounded-full p-4",children:T.jsx(iE,{className:"w-16 h-16 text-indigo-500 animate-spin"})}),T.jsxs("div",{className:"text-center space-y-2",children:[T.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest",children:"Entering Arena"}),T.jsx("p",{className:"text-slate-500 font-medium",children:"Synchronizing with the global lattice..."})]})]});if(!v)return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[T.jsxs("div",{className:"text-center space-y-4",children:[T.jsx("h2",{className:"text-5xl font-black text-white italic",children:"Room Dissolved"}),T.jsx("p",{className:"text-slate-400 text-lg",children:"The arena you seek no longer exists or the link is expired."})]}),T.jsx("button",{onClick:r,className:"btn-premium px-10 py-4 text-xl",children:"Return to Lobby"})]});const ue=v.winner?`${v.winner==="white"?"White":"Black"} Wins!`:V?"Your Turn":"Waiting...";return T.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center gap-8 lg:gap-12 py-6 lg:py-10 w-full animate-in fade-in duration-700",children:[T.jsxs("header",{className:"w-full max-w-6xl flex items-center justify-between px-4 lg:px-6",children:[T.jsxs("button",{onClick:()=>{!p&&o.leaveRoom&&o.leaveRoom(),r()},className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all font-bold uppercase tracking-widest text-xs",children:[T.jsx("div",{className:"p-2 rounded-xl bg-slate-900 border border-slate-800 group-hover:border-slate-700 group-hover:-translate-x-1 transition-transform",children:T.jsx(_c,{size:18})}),"Back"]}),!p&&T.jsx("div",{className:"flex items-center gap-4",children:T.jsxs("div",{className:"liquid-glass px-6 py-3 flex items-center gap-6",children:[T.jsxs("div",{className:"flex flex-col gap-0.5",children:[T.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-slate-500 font-black",children:"Arena ID"}),T.jsx("code",{className:"text-indigo-300 font-mono font-bold",children:i})]}),T.jsx("div",{className:"h-8 w-px bg-slate-800"}),T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("button",{onClick:z,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:T.jsx(tE,{size:18})}),T.jsx("button",{className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:T.jsx(sE,{size:18})})]})]})}),p&&T.jsx("div",{className:"px-6 py-3 liquid-glass text-indigo-300 font-bold uppercase tracking-widest text-xs",children:"Single Player Mode"})]}),T.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-6 lg:gap-16 w-full max-w-7xl px-0 lg:px-6",children:[T.jsxs("div",{className:"relative group w-full flex justify-center max-w-full overflow-visible",children:[T.jsx("div",{className:"absolute -inset-4 bg-linear-to-r from-indigo-500 to-pink-500 rounded-[2.5rem] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"}),T.jsx(Ok,{gameState:v,playerColor:N,onMove:F,onRollDice:()=>{},validMoves:b}),$&&T.jsx(Lk,{winner:v.winner,playerColor:N,onRematch:()=>{const X=Oc();g(null),p?u(X):o.resetGame()},onExit:()=>{!p&&o.leaveRoom&&o.leaveRoom(),r()}})]}),T.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-3 lg:gap-8 mt-0 lg:mt-0",children:[T.jsxs("div",{className:"liquid-glass p-3 lg:p-8 space-y-3 lg:space-y-8 border-l-4 border-l-indigo-500",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:"Game Status"}),T.jsxs("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-2 ${v.winner?"bg-indigo-500/10 text-indigo-300 border border-indigo-500/30":V?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-slate-800 text-slate-500"}`,children:[T.jsx("span",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${v.winner?"bg-indigo-400":"bg-green-500"}`}),p?v.turn==="white"?" White Turn":" Black Turn":ue]})]}),$&&T.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/10 border border-indigo-500/30 text-indigo-100 text-sm lg:text-base font-bold",children:ue}),T.jsxs("div",{className:"space-y-2 lg:space-y-4",children:[T.jsx(jk,{gameState:v}),!p&&T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex items-center gap-2 lg:gap-4 p-2 lg:p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[T.jsx("div",{className:`w-8 h-8 lg:w-12 lg:h-12 rounded-xl flex items-center justify-center text-lg lg:text-xl font-bold ${I?"bg-white text-slate-950":"bg-slate-800 text-slate-400"}`,children:"W"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("div",{className:"text-xs lg:text-sm font-bold text-white uppercase tracking-wide",children:"White Player"}),T.jsx("div",{className:"text-[10px] lg:text-xs text-slate-500 font-medium",children:o.room?.whitePlayer===w?"Connected (You)":o.room?.whitePlayer?"Opponent Ready":"Awaiting Entry..."})]})]}),T.jsxs("div",{className:"flex items-center gap-2 lg:gap-4 p-2 lg:p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[T.jsx("div",{className:`w-8 h-8 lg:w-12 lg:h-12 rounded-xl flex items-center justify-center text-lg lg:text-xl font-bold ${k?"bg-indigo-500 text-white":"bg-slate-800 text-slate-400"}`,children:"B"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("div",{className:"text-xs lg:text-sm font-bold text-white uppercase tracking-wide",children:"Black Player"}),T.jsx("div",{className:"text-[10px] lg:text-xs text-slate-500 font-medium",children:o.room?.blackPlayer===w?"Connected (You)":o.room?.blackPlayer?"Opponent Ready":"Awaiting Entry..."})]})]})]})]}),T.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 lg:gap-3",children:[T.jsxs("button",{disabled:$,onClick:()=>{if(p){const X={...v};X.winner=N==="white"?"black":"white",u(X)}else o.resignGame(N)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 lg:px-4 lg:py-3 rounded-xl border border-slate-800 bg-slate-900/60 text-slate-200 text-sm lg:text-base font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:border-red-500/50 hover:text-red-200 transition",children:[T.jsx(nE,{size:16,className:"lg:w-[18px] lg:h-[18px]"}),"Resign"]}),T.jsxs("button",{disabled:!$&&!p,onClick:()=>{const X=Oc();g(null),p?u(X):o.resetGame()},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 lg:px-4 lg:py-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 text-indigo-100 text-sm lg:text-base font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:bg-indigo-500/20 transition",children:[T.jsx(up,{size:16,className:"lg:w-[18px] lg:h-[18px]"}),"Rematch"]})]})]}),!p&&T.jsxs("div",{className:"hidden lg:grid grid-cols-2 gap-4",children:[T.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[T.jsx(hp,{size:20,className:"mx-auto text-slate-600"}),T.jsx("div",{className:"text-xl font-black text-white italic",children:o.room?.whitePlayer&&o.room?.blackPlayer?"2/2":o.room?.whitePlayer||o.room?.blackPlayer?"1/2":"0/2"}),T.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Connected"})]}),T.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[T.jsx(rE,{size:20,className:"mx-auto text-indigo-400"}),T.jsx("div",{className:"text-xl font-black text-white italic",children:"24ms"}),T.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Latency"})]})]})]})]}),T.jsxs("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10 flex flex-col items-center gap-1",children:[T.jsx("span",{children:"Transparent Strategy Arena"}),T.jsx("span",{className:"text-slate-700 text-[8px]",children:"v1.1.0"})]})]})},jk=({gameState:i})=>{const[e,t]=q.useState(0),[r,o]=q.useState(0),[c,u]=q.useState(0),m=rt.useRef(i?.winner);q.useEffect(()=>{m.current&&!i?.winner&&(t(0),o(0),u(0)),m.current=i?.winner},[i?.winner]),q.useEffect(()=>{if(!i||i.winner)return;const p=window.setInterval(()=>{t(v=>v+1),o(v=>v+(i.turn==="white"?1:0)),u(v=>v+(i.turn==="black"?1:0))},1e3);return()=>window.clearInterval(p)},[i?.turn,i?.winner]);const g=p=>{const v=Math.floor(p/60).toString().padStart(2,"0"),b=(p%60).toString().padStart(2,"0");return`${v}:${b}`};return T.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-3 p-2 md:p-4 rounded-2xl bg-slate-900/60 border border-slate-800/80 text-[10px] lg:text-xs font-bold uppercase tracking-widest",children:[T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"Time"}),T.jsx("div",{className:"text-white text-base",children:g(e)})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"White"}),T.jsx("div",{className:"text-emerald-300 text-base",children:g(r)})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"Black"}),T.jsx("div",{className:"text-sky-300 text-base",children:g(c)})]})]})},Lk=({winner:i,playerColor:e,onRematch:t,onExit:r})=>{const o=i===e;return T.jsxs("div",{className:"absolute inset-0 z-50 rounded-[2rem] bg-slate-900/80 backdrop-blur-md flex flex-col items-center justify-center p-6 text-center animate-in fade-in zoom-in duration-500",children:[T.jsx("div",{className:`p-6 rounded-full mb-6 ${o?"bg-amber-500/20 text-amber-400 shadow-[0_0_50px_-12px_rgba(245,158,11,0.5)]":"bg-red-500/20 text-red-400 shadow-[0_0_50px_-12px_rgba(239,68,68,0.5)]"}`,children:o?T.jsx(Ng,{size:64,className:"animate-bounce"}):T.jsx(JS,{size:64})}),T.jsx("h2",{className:`text-4xl md:text-5xl font-black uppercase tracking-widest mb-2 ${o?"text-transparent bg-clip-text bg-linear-to-b from-amber-300 to-amber-600":"text-slate-200"}`,children:o?"Victory!":"Defeat"}),T.jsx("p",{className:"text-slate-400 font-bold text-lg mb-8 uppercase tracking-widest",children:o?"You conquered the board.":"Better luck next time."}),T.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[T.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center gap-3 px-6 py-4 rounded-xl bg-indigo-500 hover:bg-indigo-400 text-white font-black uppercase tracking-widest transition-all hover:scale-105 active:scale-95 shadow-lg shadow-indigo-500/30",children:[T.jsx(up,{size:20}),"Rematch"]}),T.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center gap-3 px-6 py-4 rounded-xl bg-slate-800 hover:bg-slate-700 text-slate-300 font-bold uppercase tracking-widest transition-all hover:scale-105 active:scale-95",children:[T.jsx(sA,{size:20}),"Return to Lobby"]})]})]})},Uk=30,zk=(i,e)=>{const t=i.filter(c=>c!==null);if(t.length!==14)return!1;const r=[],o=[];return t.forEach(c=>{!c.isFakeOkey&&e&&c.color===e.color&&c.value===e.value?r.push(c):c.isFakeOkey?o.push({...c,value:e?.value||1,color:e?.color||"red",isFakeOkey:!1}):o.push(c)}),o.sort((c,u)=>c.color!==u.color?c.color.localeCompare(u.color):c.value-u.value),sf(o,r.length)},sf=(i,e)=>{if(i.length===0)return!0;const t=i[0],r=i.filter(m=>m.color===t.color);for(let m=3;m<=13;m++){const g=[];let p=!0;for(let N=0;N<m;N++){const V=t.value+N;if(V>13){p=!1;break}g.push(V)}if(!p)break;const v=[];let b=0,w=[...r];for(const N of g){const V=w.findIndex(z=>z.value===N);V!==-1?(v.push(w[V]),w.splice(V,1)):b++}if(b<=e){const N=v.map(z=>z.id),V=i.filter(z=>!N.includes(z.id));if(sf(V,e-b))return!0}}if(t.value===1)for(let m=3;m<=4;m++){const g=[];for(let w=13-(m-2);w<=13;w++)g.push(w);g.push(1);const p=[];let v=0,b=[...r];for(const w of g){const N=b.findIndex(V=>V.value===w);N!==-1?(p.push(b[N]),b.splice(N,1)):v++}if(v<=e){const w=p.map(V=>V.id),N=i.filter(V=>!w.includes(V.id));if(sf(N,e-v))return!0}}const o=i.filter(m=>m.value===t.value),c=[],u=new Set;for(const m of o)u.has(m.color)||(u.add(m.color),c.push(m));for(let m=3;m<=4;m++){const g=c.slice(0,Math.min(m,c.length)),p=m-g.length;if(p>=0&&p<=e){const v=g.map(w=>w.id),b=i.filter(w=>!v.includes(w.id));if(sf(b,e-p))return!0}}return!1},Bk=["red","black","blue","yellow"],qk=()=>{const i=[];let e=1;return Bk.forEach(t=>{for(let r=1;r<=13;r++)i.push({id:`t-${e++}`,value:r,color:t}),i.push({id:`t-${e++}`,value:r,color:t})}),i.push({id:`t-${e++}`,value:0,color:null,isFakeOkey:!0}),i.push({id:`t-${e++}`,value:0,color:null,isFakeOkey:!0}),i},Hk=i=>{const e=[...i];for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e},Fk=i=>i.isFakeOkey||!i.color?{id:"virtual-okey",value:1,color:"red"}:{id:"virtual-okey",value:i.value===13?1:i.value+1,color:i.color},W1=()=>{let i=Hk(qk());const e=i.pop(),t=Fk(e),r=Array(4).fill(null).map(()=>({tiles:Array(Uk).fill(null)}));for(let o=0;o<15;o++)r[0].tiles[o]=i.pop();for(let o=1;o<4;o++)for(let c=0;c<14;c++)r[o].tiles[c]=i.pop();return{phase:"playing",players:r,centerStack:i,discardPiles:[[],[],[],[]],indicatorTile:e,okeyTile:t,currentTurn:0,winner:null}},tx=i=>{const[e,t]=q.useState(null),[r,o]=q.useState(!1);q.useEffect(()=>{if(!i)try{const I=W1();console.log("Okey Game Initialized",I),t(I)}catch(I){console.error("Failed to initialize Okey game",I)}},[i]);const c=q.useCallback(I=>{t(k=>{if(!k)return null;if(k.currentTurn!==0||k.players[0].tiles.filter(S=>S!==null).length>=15)return k;const F=[...k.centerStack],ue=F.pop();if(!ue)return k;const X=[...k.players],B=[...X[0].tiles];let A=-1;if(I!==void 0&&I>=0&&I<B.length)if(B[I]===null)A=I;else for(let S=1;S<B.length;S++){const C=I+S,O=I-S;if(C<B.length&&B[C]===null){A=C;break}if(O>=0&&B[O]===null){A=O;break}}return A===-1&&(A=B.findIndex(S=>S===null)),A!==-1&&(B[A]=ue),X[0]={...X[0],tiles:B},F.length===0?{...k,players:X,centerStack:F,phase:"stackEmpty"}:{...k,players:X,centerStack:F}})},[]),u=q.useCallback(I=>{t(k=>{if(!k||k.currentTurn!==0||k.players[0].tiles.filter(O=>O!==null).length>=15)return k;const F=3;if(k.discardPiles[F].length===0)return k;const X=[...k.discardPiles],B=X[F][X[F].length-1];X[F]=X[F].slice(0,-1);const A=[...k.players],S=[...A[0].tiles];let C=-1;if(I!==void 0&&I>=0&&I<S.length)if(S[I]===null)C=I;else for(let O=1;O<S.length;O++){const M=I+O,j=I-O;if(M<S.length&&S[M]===null){C=M;break}if(j>=0&&S[j]===null){C=j;break}}return C===-1&&(C=S.findIndex(O=>O===null)),C!==-1&&(S[C]=B),A[0]={...A[0],tiles:S},{...k,players:A,discardPiles:X}})},[]),m=q.useCallback(I=>{t(k=>{if(!k||k.currentTurn!==0)return k;const $=[...k.players[0].tiles];if(!$[I])return k;const ue=[...$];return ue[I]=null,zk(ue,k.okeyTile)?{...k,phase:"roundOver",winner:0}:(alert("Eliniz okey deil! Ltfen talar per yapn."),k)})},[]),g=q.useCallback(()=>{t(W1())},[]),p=q.useCallback(()=>{t(I=>{if(!I)return null;const k=[];if(I.discardPiles.forEach(F=>{k.push(...F)}),k.length===0)return{...I,phase:"roundOver",winner:null};const $=[...k].sort(()=>Math.random()-.5);return{...I,centerStack:$,discardPiles:[[],[],[],[]],phase:"playing"}})},[]),v=q.useCallback(()=>{t(I=>I?{...I,phase:"roundOver",winner:null}:null)},[]),b=q.useCallback((I,k)=>{t($=>{if(!$)return null;const F=[...$.players],ue=[...F[0].tiles],X=ue[I];return ue[I]=ue[k],ue[k]=X,F[0]={...F[0],tiles:ue},{...$,players:F}})},[]),w=q.useCallback(I=>{t(k=>{if(!k||k.currentTurn!==0)return k;if(k.players[0].tiles.filter(S=>S!==null).length!==15)return console.log("Discard blocked: Must have 15 tiles to discard."),k;const F=[...k.players],ue=[...k.players[0].tiles],X=ue[I];if(!X)return k;ue[I]=null,F[0]={...F[0],tiles:ue};const B=[...k.discardPiles];B[0]=[...B[0],X];const A=(k.currentTurn+1)%4;return{...k,players:F,discardPiles:B,currentTurn:A}})},[]);q.useEffect(()=>{if(e&&e.currentTurn!==0&&e.phase==="playing"){const I=setTimeout(()=>{t(k=>{if(!k||k.currentTurn===0)return k;const $=k.currentTurn,F=[...k.players],ue=($+1)%4,X=[...k.centerStack],B=X.pop();if(B){const A=[...F[$].tiles],S=A.findIndex(D=>D===null);S!==-1&&(A[S]=B);const C=A.findIndex(D=>D!==null),O=A[C];A[C]=null,F[$]={...F[$],tiles:A};const M=[...k.discardPiles];M[$]=[...M[$],O];const j=X.length===0?"stackEmpty":"playing";return{...k,centerStack:X,players:F,discardPiles:M,currentTurn:ue,phase:j}}return{...k,currentTurn:ue}})},1500);return()=>clearTimeout(I)}},[e?.currentTurn,e?.phase]);const N=async()=>(o(!0),await new Promise(I=>setTimeout(I,1e3)),o(!1),"okey-room-"+Math.random().toString(36).substr(2,6)),V=async I=>{o(!0),await new Promise(k=>setTimeout(k,1e3)),o(!1)},z=q.useCallback(()=>{t(I=>{if(!I)return null;const k=I.players[0],$=k.tiles.filter(j=>j!==null),F=$.filter(j=>!j.isFakeOkey&&!(I.okeyTile&&j.color===I.okeyTile.color&&j.value===I.okeyTile.value)),ue=$.filter(j=>j.isFakeOkey||I.okeyTile&&j.color===I.okeyTile.color&&j.value===I.okeyTile.value),X=[],B=[...F];["red","blue","black","yellow"].forEach(j=>{const D=B.filter(ke=>ke.color===j).sort((ke,ee)=>ke.value-ee.value);let De=0;for(;De<D.length;){let ke=[D[De]],ee=D[De].value+1,he=De+1;for(;he<D.length;)if(D[he].value===ee)ke.push(D[he]),ee++,he++;else if(D[he].value<ee)he++;else break;if(ke[ke.length-1].value===13){const pe=D.find(Ae=>Ae.value===1);pe&&!ke.find(Ae=>Ae.id===pe.id)&&ke.push(pe)}if(ke.length>=3){X.push([...ke]),ke.forEach(Ae=>{const Pe=B.findIndex(L=>L.id===Ae.id);Pe!==-1&&B.splice(Pe,1)});const pe=B.filter(Ae=>Ae.color===j).sort((Ae,Pe)=>Ae.value-Pe.value);D.length=0,D.push(...pe),De=0}else De++}});for(let j=1;j<=13;j++){const D=B.filter(ke=>ke.value===j),De=Array.from(new Set(D.map(ke=>ke.color)));if(De.length>=3){const ke=De.map(ee=>D.find(he=>he.color===ee));X.push(ke),ke.forEach(ee=>{const he=B.findIndex(pe=>pe.id===ee.id);he!==-1&&B.splice(he,1)})}}let S=new Array(30).fill(null),C=0;ue.forEach(j=>{S[C++]=j}),ue.length>0&&C++,X.forEach(j=>{j.forEach(D=>{S[C++]=D}),C++});let O=15;for(;S[O]!==null&&O<30;)O++;B.forEach(j=>{O<30&&(S[O++]=j)});const M=[...I.players];return M[0]={...k,tiles:S},{...I,players:M}})},[e?.okeyTile]);return{gameState:e,moveTileInRack:b,drawFromCenter:c,drawFromDiscard:u,finishGame:m,resetGame:g,discardTile:w,autoSortTiles:z,reshuffleDiscards:p,endInTie:v,createRoom:N,joinRoom:V,isAuthLoading:r}},kc=({tile:i,okeyTile:e,isJoker:t,className:r="",dragging:o=!1,size:c="md"})=>{const u=b=>{switch(b){case"red":return"text-[#d32f2f]";case"black":return"text-[#212121]";case"blue":return"text-[#1976d2]";case"yellow":return"text-[#ffa000]";default:return"text-slate-400"}},m=c==="sm"?"w-10 h-13":c==="lg"?"w-16 h-22":"w-14 h-19",g=c==="sm"?"text-2xl":c==="lg"?"text-5xl":"text-4xl",p=e&&i.color===e.color&&i.value===e.value&&!i.isFakeOkey,v=()=>i.isFakeOkey?T.jsx("div",{className:"flex flex-col items-center justify-center",children:T.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-emerald-500/30 flex items-center justify-center",children:T.jsx("div",{className:"w-4 h-4 rounded-full bg-emerald-500/20"})})}):T.jsxs("div",{className:"flex flex-col items-center justify-center leading-none",children:[T.jsx("span",{className:`${g} font-bold ${u(i.color)} tracking-tighter`,children:i.value}),T.jsx("div",{className:`w-2 h-2 rounded-full mt-1 ${i.color==="red"?"bg-red-500":i.color==="blue"?"bg-blue-500":i.color==="yellow"?"bg-yellow-500":"bg-black"} shadow-sm`}),p&&T.jsx("div",{className:"absolute top-1 right-1",children:T.jsx("div",{className:"text-[10px] drop-shadow-sm",children:""})})]});return T.jsxs("div",{className:`
        relative ${m}
        bg-[#fffdfa]
        rounded-md
        shadow-[0_2px_0_#d1cfca,0_4px_8px_rgba(0,0,0,0.2)]
        flex items-center justify-center
        select-none
        border border-[#e5e3de]
        ${o?"opacity-90 cursor-grabbing scale-110 -rotate-2 z-50":"cursor-grab hover:-translate-y-1"}
        ${t?"ring-4 ring-green-400/80 ring-offset-2":""}
        transition-all duration-200
        ${r}
      `,children:[T.jsx("div",{className:"absolute inset-[2px] rounded-[3px] bg-gradient-to-br from-white to-transparent opacity-50 pointer-events-none"}),T.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center w-full h-full pb-0.5",children:v()})]})},J1=({tile:i,isJoker:e,index:t,okeyTile:r})=>{const o=`slot-${t}`,{setNodeRef:c,isOver:u}=yl({id:o}),{attributes:m,listeners:g,setNodeRef:p,isDragging:v}=du({id:o,disabled:!i});return T.jsxs("div",{ref:c,className:`
                relative w-13 h-17 rounded-lg shadow-inner flex items-center justify-center transition-all duration-200
                ${u?"bg-green-500/30 ring-4 ring-green-400 scale-110 z-20 shadow-2xl":"bg-black/15 border border-black/10"}
            `,children:[i&&T.jsx("div",{ref:p,...m,...g,className:`relative z-10 ${v?"opacity-20":""}`,children:T.jsx(kc,{tile:i,okeyTile:r,isJoker:e,dragging:v})}),!i&&!u&&T.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-black/5"})]})},Gk=({tiles:i,isCurrentPlayer:e,okeyTile:t})=>{if(!e){const r=i.filter(o=>o!==null);return T.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[T.jsx("div",{className:"flex justify-center items-center gap-1 bg-[#2a1b0e] p-2 rounded border border-[#3d2a1a] shadow-2xl",children:Array.from({length:Math.min(r.length,11)}).map((o,c)=>T.jsx("div",{className:"w-6 h-8 bg-[#f5f5f5] rounded-sm transform -skew-x-2 border-b-2 border-slate-400 shadow-sm"},c))}),T.jsx("div",{className:"flex justify-center items-center gap-1 bg-[#2a1b0e] p-2 rounded border border-[#3d2a1a] shadow-2xl -mt-1 scale-95 opacity-80",children:Array.from({length:Math.max(0,r.length-11)}).map((o,c)=>T.jsx("div",{className:"w-6 h-8 bg-[#f5f5f5] rounded-sm transform -skew-x-1 border-b-2 border-slate-400 shadow-sm"},c))})]})}return T.jsxs("div",{className:"relative w-full max-w-none mx-auto flex flex-col items-center select-none",children:[T.jsxs("div",{className:"relative w-[85%] bg-[#8d5b3e] rounded-sm shadow-[0_20px_40px_rgba(0,0,0,0.6)] border-b-8 border-[#3d251e] p-4 flex flex-col gap-1",children:[T.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/wood-pattern.png')] opacity-20 pointer-events-none mix-blend-overlay scale-x-150"}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-black/30 pointer-events-none"}),T.jsx("div",{className:"relative flex justify-center gap-1 pb-2 min-h-[5.5rem] border-b-4 border-black/20 z-10",children:i.slice(0,15).map((r,o)=>{const c=t&&r&&r.color===t.color&&r.value===t.value;return T.jsx(J1,{index:o,tile:r,okeyTile:t,isJoker:c||!1},o)})}),T.jsx("div",{className:"relative flex justify-center gap-1 pt-2 min-h-[5.5rem] z-10",children:i.slice(15,30).map((r,o)=>{const c=o+15,u=t&&r&&r.color===t.color&&r.value===t.value;return T.jsx(J1,{index:c,tile:r,okeyTile:t,isJoker:u||!1},c)})})]}),T.jsx("div",{className:"mt-4 px-6 py-1 bg-amber-500/20 rounded-full border border-amber-500/30 text-[10px] font-black text-amber-500 uppercase tracking-widest animate-pulse",children:"Talar Srkleyerek Dzenleyebilirsiniz"})]})};function Df(i){if(!i)return!1;const e=i.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const $k=[nt.Down,nt.Right,nt.Up,nt.Left],Kk=(i,e)=>{let{context:{active:t,collisionRect:r,droppableRects:o,droppableContainers:c,over:u,scrollableAncestors:m}}=e;if($k.includes(i.code)){if(i.preventDefault(),!t||!r)return;const g=[];c.getEnabled().forEach(b=>{if(!b||b!=null&&b.disabled)return;const w=o.get(b.id);if(w)switch(i.code){case nt.Down:r.top<w.top&&g.push(b);break;case nt.Up:r.top>w.top&&g.push(b);break;case nt.Left:r.left>w.left&&g.push(b);break;case nt.Right:r.left<w.left&&g.push(b);break}});const p=oO({collisionRect:r,droppableRects:o,droppableContainers:g});let v=Vw(p,"id");if(v===u?.id&&p.length>1&&(v=p[1].id),v!=null){const b=c.get(t.id),w=c.get(v),N=w?o.get(w.id):null,V=w?.node.current;if(V&&N&&b&&w){const I=nd(V).some((B,A)=>m[A]!==B),k=nx(b,w),$=Qk(b,w),F=I||!k?{x:0,y:0}:{x:$?r.width-N.width:0,y:$?r.height-N.height:0},ue={x:N.left,y:N.top};return F.x&&F.y?ue:Kc(ue,F)}}}};function nx(i,e){return!Df(i)||!Df(e)?!1:i.data.current.sortable.containerId===e.data.current.sortable.containerId}function Qk(i,e){return!Df(i)||!Df(e)||!nx(i,e)?!1:i.data.current.sortable.index<e.data.current.sortable.index}const ix=[{name:"Siz",color:"from-blue-400 to-indigo-600",avatar:"https://api.dicebear.com/7.x/lorelei/svg?seed=Felix&backgroundColor=b6e3f4"},{name:"Esat",color:"from-emerald-400 to-teal-600",avatar:"https://api.dicebear.com/7.x/lorelei/svg?seed=Cuddles&backgroundColor=c0aede"},{name:"Zeynep",color:"from-amber-400 to-orange-600",avatar:"https://api.dicebear.com/7.x/lorelei/svg?seed=Shadow&backgroundColor=ffdfbf"},{name:"Emirhan",color:"from-rose-400 to-pink-600",avatar:"https://api.dicebear.com/7.x/lorelei/svg?seed=Fluffy&backgroundColor=ffd5dc"}],Bh=({playerId:i,currentTurn:e,className:t="",isDragging:r=!1})=>{const o=e===i,c=ix[i];return T.jsx("div",{className:`transition-all duration-300 ${o&&!r?"scale-110":"opacity-90"} ${t}`,children:T.jsxs("div",{className:`
                relative flex items-center min-w-[160px] h-9 px-4 bg-[#ede0d4] rounded-sm border-2 shadow-xl transition-all
                ${o?r?"border-green-500 bg-white shadow-green-500/20":"border-green-500 bg-white ring-8 ring-green-500/20":"border-[#8d5b3e]"}
            `,children:[T.jsxs("div",{className:`flex-1 font-bold text-xs text-center uppercase tracking-tight ${o?"text-green-700":"text-[#3d251e]"}`,children:[o&&T.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-green-500 mr-2 animate-ping"}),c.name]}),i!==0&&T.jsx("div",{className:`absolute -bottom-5 left-1/2 -translate-x-1/2 px-2 py-0.5 rounded text-white text-[9px] font-bold shadow-md ${o?"bg-green-600":"bg-[#3d251e]"}`,children:"TA: 14"})]})})},qh=({playerId:i,position:e,discardPiles:t,currentTurn:r,userTileCount:o,onDrawDiscard:c,isDraggingRackTile:u})=>{const m=i===0&&r===0&&o===15&&u,g=i===3&&r===0&&o===14,{setNodeRef:p,isOver:v}=yl({id:`discard-${i}`,disabled:!m}),b=t[i][t[i].length-1],{attributes:w,listeners:N,setNodeRef:V,isDragging:z}=du({id:`pick-discard-${i}`,disabled:!g||!b}),I={top:"absolute top-[22%] left-1/2 -translate-x-1/2",bottom:"absolute bottom-[35%] right-[10%] -translate-x-1/2",left:"absolute left-[12%] top-[35%]",right:"absolute right-[12%] top-[35%]"};return T.jsxs("div",{ref:p,onClick:()=>g&&c(),className:`
                ${I[e]} w-20 h-28 rounded-lg transition-all duration-300 flex items-center justify-center
                ${v?"bg-green-400/20 scale-110 ring-4 ring-green-400 shadow-2xl":""}
                ${g?"cursor-grab active:cursor-grabbing hover:ring-4 hover:ring-amber-400 shadow-[0_0_20px_rgba(251,191,36,0.3)] bg-amber-400/10":""}
            `,children:[b?T.jsx("div",{ref:V,...w,...N,className:`rotate-3 shadow-xl transform transition-transform ${g&&!z?"hover:scale-110 -translate-y-2":""} ${z?"opacity-20":""}`,children:T.jsx(kc,{tile:b,size:"sm"})}):T.jsx("div",{className:"w-16 h-24 border-2 border-white/5 border-dashed rounded-lg flex items-center justify-center",children:T.jsx("div",{className:"w-2 h-2 rounded-full bg-white/5"})}),m&&T.jsx("div",{className:"absolute -inset-2 border-2 border-dashed border-green-400 rounded-xl animate-pulse flex items-center justify-center",children:T.jsx("div",{className:"text-[8px] font-black text-green-400 mb-20 uppercase tracking-widest whitespace-nowrap",children:"Buraya At"})}),g&&b&&!z&&T.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-amber-500 text-white text-[8px] font-black px-2 py-1 rounded animate-bounce whitespace-nowrap z-50",children:"SRKLE VEYA TIKLA"})]})},Yk=({currentTurn:i,userTileCount:e,centerStackCount:t,onDraw:r})=>{const o=i===0&&e<15,{attributes:c,listeners:u,setNodeRef:m,isDragging:g}=du({id:"draw-pile",disabled:!o});return T.jsx("div",{className:"relative group",children:T.jsxs("div",{ref:m,...c,...u,onClick:()=>o&&r(),className:`
                    relative w-16 h-20 bg-[#fffdfa] rounded-sm shadow-2xl flex items-center justify-center transition-all
                    ${o?"hover:-translate-y-2 cursor-grab active:cursor-grabbing ring-4 ring-green-500 bg-white":"cursor-wait opacity-60"}
                    ${g?"opacity-20":""}
                `,children:[T.jsx("div",{className:`absolute inset-0 bg-[#e5e3de] border border-[#ccc] rounded-sm transform translate-x-1 translate-y-1 -z-10 shadow-lg ${o?"bg-green-100":""}`}),T.jsx("div",{className:`absolute inset-0 bg-[#d1cfca] border border-[#bbb] rounded-sm transform translate-x-2 translate-y-2 -z-20 shadow-lg ${o?"bg-green-200":""}`}),T.jsx("div",{className:"text-[#3d251e] font-bold text-2xl",children:t}),o&&!g&&T.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-green-500 text-white text-[10px] font-black px-3 py-1 rounded-full animate-bounce shadow-lg whitespace-nowrap flex items-center gap-1 z-50",children:"TA EK"})]})})},Xk=({isDraggingRackTile:i,canFinish:e})=>{const{setNodeRef:t,isOver:r}=yl({id:"finish-zone",disabled:!e});return T.jsx("div",{ref:t,className:`
                absolute -inset-4 rounded-2xl transition-all duration-300 pointer-events-none
                ${e&&i?"border-4 border-dashed border-amber-400 animate-[pulse_1.5s_infinite] bg-amber-400/10":""}
                ${r?"bg-amber-400/30 scale-110":""}
            `})},Wk=({gameState:i,onDraw:e,onDrawDiscard:t,onMoveTile:r,onDiscard:o,onAutoSort:c,onFinish:u,onReset:m,onReshuffle:g,onEndTie:p,onExit:v})=>{const[b,w]=q.useState(null),N=h0(Fa(id,{activationConstraint:{distance:5}}),Fa(d0,{coordinateGetter:Kk}));if(!i)return T.jsx("div",{className:"text-white text-center p-10 font-bold",children:"YKLENYOR..."});const V=$=>w($.active.id),z=$=>{w(null);const{active:F,over:ue}=$;if(!ue)return;const X=F.id,B=ue.id;B==="discard-0"&&X.startsWith("slot-")?o(parseInt(X.split("-")[1])):B==="finish-zone"&&X.startsWith("slot-")?u(parseInt(X.split("-")[1])):X==="draw-pile"&&B.startsWith("slot-")?e(parseInt(B.split("-")[1])):X==="pick-discard-3"&&B.startsWith("slot-")?t(parseInt(B.split("-")[1])):X!==B&&X.startsWith("slot-")&&B.startsWith("slot-")&&r(parseInt(X.split("-")[1]),parseInt(B.split("-")[1]))},I=()=>{if(!b)return null;if(b==="draw-pile")return T.jsx("div",{className:"w-16 h-20 bg-white rounded shadow-2xl opacity-80"});if(b==="pick-discard-3"){const $=i.discardPiles[3][i.discardPiles[3].length-1];return $?T.jsx(kc,{tile:$,size:"sm",okeyTile:i.okeyTile}):null}if(b.startsWith("slot-")){const $=i.players[0].tiles[parseInt(b.split("-")[1])];return $?T.jsx(kc,{tile:$,okeyTile:i.okeyTile}):null}return null},k=i.players[0].tiles.filter($=>$!==null).length;return T.jsx(v0,{sensors:N,collisionDetection:aO,onDragStart:V,onDragEnd:z,children:T.jsxs("div",{className:"relative w-full aspect-[16/10] bg-[#357a38] overflow-hidden mx-auto font-sans shadow-2xl rounded-lg border-x-[12px] border-y-[6px] border-[#3d251e]",children:[T.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/dark-matter.png')] opacity-30 pointer-events-none"}),T.jsx(Bh,{playerId:2,currentTurn:i.currentTurn,isDragging:!!b,className:"absolute top-4 left-1/2 -translate-x-1/2 z-30"}),T.jsx(Bh,{playerId:3,currentTurn:i.currentTurn,isDragging:!!b,className:"absolute left-4 top-1/2 -translate-y-1/2 -rotate-90 origin-center z-30"}),T.jsx(Bh,{playerId:1,currentTurn:i.currentTurn,isDragging:!!b,className:"absolute right-4 top-1/2 -translate-y-1/2 rotate-90 origin-center z-30"}),T.jsx(qh,{playerId:2,position:"top",...i,userTileCount:k,onDrawDiscard:t,isDraggingRackTile:b?.startsWith("slot-")}),T.jsx(qh,{playerId:3,position:"left",...i,userTileCount:k,onDrawDiscard:t,isDraggingRackTile:b?.startsWith("slot-")}),T.jsx(qh,{playerId:1,position:"right",...i,userTileCount:k,onDrawDiscard:t,isDraggingRackTile:b?.startsWith("slot-")}),T.jsx(qh,{playerId:0,position:"bottom",...i,userTileCount:k,onDrawDiscard:t,isDraggingRackTile:b?.startsWith("slot-")}),T.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center gap-12",children:[T.jsxs("div",{className:"relative",children:[T.jsx(kc,{tile:i.indicatorTile,size:"md",okeyTile:i.okeyTile}),T.jsx(Xk,{isDraggingRackTile:b?.startsWith("slot-")||!1,canFinish:i.currentTurn===0&&k===15})]}),T.jsx(Yk,{...i,userTileCount:k,centerStackCount:i.centerStack.length,onDraw:e})]}),T.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-40 p-2 flex flex-col items-center gap-3",children:[T.jsxs("div",{className:"flex items-center gap-6",children:[T.jsx(Bh,{playerId:0,currentTurn:i.currentTurn,isDragging:!!b}),T.jsx("button",{onClick:c,className:"px-8 py-2 bg-[#ede0d4] text-[#3d251e] border-2 border-[#8d5b3e] rounded shadow-lg text-[11px] font-black uppercase tracking-widest transition-all hover:scale-105 active:scale-95",children:"Dzenle"})]}),T.jsx(Gk,{tiles:i.players[0].tiles,playerId:0,isCurrentPlayer:!0,okeyTile:i.okeyTile})]}),i.phase==="roundOver"&&T.jsx("div",{className:"absolute inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm",children:T.jsxs("div",{className:"bg-[#ede0d4] p-10 rounded-2xl shadow-2xl flex flex-col items-center gap-6 text-[#3d251e]",children:[T.jsx("h2",{className:"text-4xl font-black uppercase",children:i.winner===null?"DOSTLUK KAZANDI":i.winner===0?"TEBRKLER!":"OYUN BTT"}),T.jsx("p",{className:"text-xl font-bold",children:i.winner===null?"Berabere! Talar bitti.":i.winner===0?"Kazandnz!":`${ix[i.winner].name} Kazand!`}),T.jsxs("div",{className:"flex gap-4",children:[T.jsx("button",{onClick:m,className:"px-10 py-4 bg-emerald-600 text-white font-black rounded-xl",children:"Tekrar Oyna"}),T.jsx("button",{onClick:v,className:"px-10 py-4 bg-slate-800 text-white font-black rounded-xl",children:"k"})]})]})}),i.phase==="stackEmpty"&&T.jsx("div",{className:"absolute inset-0 z-[110] flex items-center justify-center bg-black/70 backdrop-blur-md fade-in",children:T.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 p-8 rounded-2xl shadow-2xl border-4 border-amber-500 max-w-md text-center flex flex-col gap-6",children:[T.jsx("div",{className:"text-5xl",children:""}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-2xl font-black text-amber-900 uppercase",children:"ORTADA TA BTT!"}),T.jsx("p",{className:"text-amber-800 font-medium mt-2",children:"Iskartadaki talar kartrp devam m edelim, yoksa oyunu bitirelim mi?"})]}),T.jsxs("div",{className:"flex flex-col gap-3",children:[T.jsx("button",{onClick:g,className:"w-full py-4 bg-amber-600 hover:bg-amber-500 text-white font-black uppercase tracking-widest rounded-xl shadow-lg transition-all hover:scale-105 active:scale-95",children:"Talar Kartr (Devam Et)"}),T.jsx("button",{onClick:p,className:"w-full py-4 bg-slate-700 hover:bg-slate-600 text-white font-black uppercase tracking-widest rounded-xl shadow-lg transition-all hover:scale-105 active:scale-95",children:"Oyunu Bitir (Berabere)"})]})]})}),T.jsx(Ww,{dropAnimation:null,children:I()})]})})},Jk=({roomId:i,mode:e,aiDifficulty:t,onExit:r})=>{const{gameState:o,drawFromCenter:c,drawFromDiscard:u,moveTileInRack:m,discardTile:g,autoSortTiles:p,finishGame:v,resetGame:b,reshuffleDiscards:w,endInTie:N}=tx(i);return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[85vh] fade-in animate-in duration-700",children:[T.jsx("div",{className:"w-full max-w-6xl mb-6 flex justify-between items-center text-white px-4",children:T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("button",{onClick:r,className:"p-3 bg-slate-800/80 hover:bg-red-500/20 text-slate-400 hover:text-red-400 rounded-xl transition-all border border-slate-700 hover:border-red-500/50",title:"Leave Game",children:T.jsx(hA,{size:20})}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-2xl font-black tracking-tight",children:"Okey Arena"}),T.jsxs("div",{className:"text-xs font-medium text-emerald-400 flex items-center gap-2",children:[T.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),e==="online"?`Room: ${i}`:`Local  ${t} AI`]})]})]})}),T.jsx(Wk,{gameState:o,onDraw:c,onDrawDiscard:u,onMoveTile:m,onDiscard:g,onAutoSort:p,onFinish:v,onReset:b,onReshuffle:w,onEndTie:N,onExit:r}),T.jsxs("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10 flex flex-col items-center gap-1",children:[T.jsx("span",{children:"Transparent Strategy Arena"}),T.jsx("span",{className:"text-slate-700 text-[8px]",children:"v0.1.0"})]})]})};function Zk(){const[i,e]=q.useState("menu"),[t,r]=q.useState("chess"),[o,c]=q.useState(null),[u,m]=q.useState("Normal"),g=Jw(null),p=Zw(null),v=tx(null),b=t==="chess"?g.isAuthLoading:t==="backgammon"?p.isAuthLoading:v.isAuthLoading,w=async()=>{try{const k=t==="chess"?await g.createRoom():t==="backgammon"?await p.createRoom():await v.createRoom();k&&(c(k),e("online"))}catch(k){console.error("Failed to create room:",k)}},N=async k=>{if(k.trim())try{t==="chess"?await g.joinRoom(k):t==="backgammon"?await p.joinRoom(k):await v.joinRoom(k),c(k),e("online")}catch($){console.error("Failed to join room:",$),alert("Room not found or could not join")}},V=k=>{r(k)},z=k=>{m(k),e("local"),c(null)},I=()=>{c(null),e("menu")};return T.jsxs("main",{className:"relative min-h-screen w-full flex flex-col items-center overflow-x-hidden",children:[T.jsx(FS,{}),T.jsx("div",{className:"container mx-auto px-4 py-8 max-w-7xl w-full overflow-visible",children:i!=="menu"?t==="chess"?T.jsx(Sk,{roomId:o||"",mode:i==="online"?"online":"local",aiDifficulty:u,onExit:I}):t==="backgammon"?T.jsx(Pk,{roomId:o||"",mode:i==="online"?"online":"local",aiDifficulty:u,onExit:I}):T.jsx(Jk,{roomId:o||"",mode:i==="online"?"online":"local",aiDifficulty:u,onExit:I}):T.jsx(E4,{onCreateRoom:w,onJoinRoom:N,onStartLocal:z,isAuthLoading:b,onSelectGame:V})}),T.jsx("footer",{className:"mt-auto py-8 text-slate-500 text-sm",children:"DragMate  Premium Multiplayer Board Gaming"})]})}HS.createRoot(document.getElementById("root")).render(T.jsx(q.StrictMode,{children:T.jsx(Zk,{})}));
