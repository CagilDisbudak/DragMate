(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function _A(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var vg={exports:{}},Wl={};var Qv;function vA(){if(Qv)return Wl;Qv=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:u}}return Wl.Fragment=t,Wl.jsx=n,Wl.jsxs=n,Wl}var Yv;function EA(){return Yv||(Yv=1,vg.exports=vA()),vg.exports}var et=EA(),Eg={exports:{}},Vt={};var $v;function TA(){if($v)return Vt;$v=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function O(M){return M===null||typeof M!="object"?null:(M=S&&M[S]||M["@@iterator"],typeof M=="function"?M:null)}var K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,$={};function lt(M,W,ot){this.props=M,this.context=W,this.refs=$,this.updater=ot||K}lt.prototype.isReactComponent={},lt.prototype.setState=function(M,W){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,W,"setState")},lt.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ht(){}ht.prototype=lt.prototype;function ut(M,W,ot){this.props=M,this.context=W,this.refs=$,this.updater=ot||K}var It=ut.prototype=new ht;It.constructor=ut,G(It,lt.prototype),It.isPureReactComponent=!0;var wt=Array.isArray;function vt(){}var R={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function C(M,W,ot){var ft=ot.ref;return{$$typeof:r,type:M,key:W,ref:ft!==void 0?ft:null,props:ot}}function x(M,W){return C(M.type,W,M.props)}function N(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function k(M){var W={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ot){return W[ot]})}var I=/\/+/g;function Gt(M,W){return typeof M=="object"&&M!==null&&M.key!=null?k(""+M.key):W.toString(36)}function we(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(vt,vt):(M.status="pending",M.then(function(W){M.status==="pending"&&(M.status="fulfilled",M.value=W)},function(W){M.status==="pending"&&(M.status="rejected",M.reason=W)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function X(M,W,ot,ft,Rt){var bt=typeof M;(bt==="undefined"||bt==="boolean")&&(M=null);var Lt=!1;if(M===null)Lt=!0;else switch(bt){case"bigint":case"string":case"number":Lt=!0;break;case"object":switch(M.$$typeof){case r:case t:Lt=!0;break;case E:return Lt=M._init,X(Lt(M._payload),W,ot,ft,Rt)}}if(Lt)return Rt=Rt(M),Lt=ft===""?"."+Gt(M,0):ft,wt(Rt)?(ot="",Lt!=null&&(ot=Lt.replace(I,"$&/")+"/"),X(Rt,W,ot,"",function(je){return je})):Rt!=null&&(N(Rt)&&(Rt=x(Rt,ot+(Rt.key==null||M&&M.key===Rt.key?"":(""+Rt.key).replace(I,"$&/")+"/")+Lt)),W.push(Rt)),1;Lt=0;var De=ft===""?".":ft+":";if(wt(M))for(var ae=0;ae<M.length;ae++)ft=M[ae],bt=De+Gt(ft,ae),Lt+=X(ft,W,ot,bt,Rt);else if(ae=O(M),typeof ae=="function")for(M=ae.call(M),ae=0;!(ft=M.next()).done;)ft=ft.value,bt=De+Gt(ft,ae++),Lt+=X(ft,W,ot,bt,Rt);else if(bt==="object"){if(typeof M.then=="function")return X(we(M),W,ot,ft,Rt);throw W=String(M),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Lt}function at(M,W,ot){if(M==null)return M;var ft=[],Rt=0;return X(M,ft,"","",function(bt){return W.call(ot,bt,Rt++)}),ft}function Tt(M){if(M._status===-1){var W=M._result;W=W(),W.then(function(ot){(M._status===0||M._status===-1)&&(M._status=1,M._result=ot)},function(ot){(M._status===0||M._status===-1)&&(M._status=2,M._result=ot)}),M._status===-1&&(M._status=0,M._result=W)}if(M._status===1)return M._result.default;throw M._result}var Pt=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Kt={map:at,forEach:function(M,W,ot){at(M,function(){W.apply(this,arguments)},ot)},count:function(M){var W=0;return at(M,function(){W++}),W},toArray:function(M){return at(M,function(W){return W})||[]},only:function(M){if(!N(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Vt.Activity=T,Vt.Children=Kt,Vt.Component=lt,Vt.Fragment=n,Vt.Profiler=o,Vt.PureComponent=ut,Vt.StrictMode=s,Vt.Suspense=m,Vt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Vt.__COMPILER_RUNTIME={__proto__:null,c:function(M){return R.H.useMemoCache(M)}},Vt.cache=function(M){return function(){return M.apply(null,arguments)}},Vt.cacheSignal=function(){return null},Vt.cloneElement=function(M,W,ot){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ft=G({},M.props),Rt=M.key;if(W!=null)for(bt in W.key!==void 0&&(Rt=""+W.key),W)!w.call(W,bt)||bt==="key"||bt==="__self"||bt==="__source"||bt==="ref"&&W.ref===void 0||(ft[bt]=W[bt]);var bt=arguments.length-2;if(bt===1)ft.children=ot;else if(1<bt){for(var Lt=Array(bt),De=0;De<bt;De++)Lt[De]=arguments[De+2];ft.children=Lt}return C(M.type,Rt,ft)},Vt.createContext=function(M){return M={$$typeof:f,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},Vt.createElement=function(M,W,ot){var ft,Rt={},bt=null;if(W!=null)for(ft in W.key!==void 0&&(bt=""+W.key),W)w.call(W,ft)&&ft!=="key"&&ft!=="__self"&&ft!=="__source"&&(Rt[ft]=W[ft]);var Lt=arguments.length-2;if(Lt===1)Rt.children=ot;else if(1<Lt){for(var De=Array(Lt),ae=0;ae<Lt;ae++)De[ae]=arguments[ae+2];Rt.children=De}if(M&&M.defaultProps)for(ft in Lt=M.defaultProps,Lt)Rt[ft]===void 0&&(Rt[ft]=Lt[ft]);return C(M,bt,Rt)},Vt.createRef=function(){return{current:null}},Vt.forwardRef=function(M){return{$$typeof:g,render:M}},Vt.isValidElement=N,Vt.lazy=function(M){return{$$typeof:E,_payload:{_status:-1,_result:M},_init:Tt}},Vt.memo=function(M,W){return{$$typeof:p,type:M,compare:W===void 0?null:W}},Vt.startTransition=function(M){var W=R.T,ot={};R.T=ot;try{var ft=M(),Rt=R.S;Rt!==null&&Rt(ot,ft),typeof ft=="object"&&ft!==null&&typeof ft.then=="function"&&ft.then(vt,Pt)}catch(bt){Pt(bt)}finally{W!==null&&ot.types!==null&&(W.types=ot.types),R.T=W}},Vt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Vt.use=function(M){return R.H.use(M)},Vt.useActionState=function(M,W,ot){return R.H.useActionState(M,W,ot)},Vt.useCallback=function(M,W){return R.H.useCallback(M,W)},Vt.useContext=function(M){return R.H.useContext(M)},Vt.useDebugValue=function(){},Vt.useDeferredValue=function(M,W){return R.H.useDeferredValue(M,W)},Vt.useEffect=function(M,W){return R.H.useEffect(M,W)},Vt.useEffectEvent=function(M){return R.H.useEffectEvent(M)},Vt.useId=function(){return R.H.useId()},Vt.useImperativeHandle=function(M,W,ot){return R.H.useImperativeHandle(M,W,ot)},Vt.useInsertionEffect=function(M,W){return R.H.useInsertionEffect(M,W)},Vt.useLayoutEffect=function(M,W){return R.H.useLayoutEffect(M,W)},Vt.useMemo=function(M,W){return R.H.useMemo(M,W)},Vt.useOptimistic=function(M,W){return R.H.useOptimistic(M,W)},Vt.useReducer=function(M,W,ot){return R.H.useReducer(M,W,ot)},Vt.useRef=function(M){return R.H.useRef(M)},Vt.useState=function(M){return R.H.useState(M)},Vt.useSyncExternalStore=function(M,W,ot){return R.H.useSyncExternalStore(M,W,ot)},Vt.useTransition=function(){return R.H.useTransition()},Vt.version="19.2.3",Vt}var Xv;function xm(){return Xv||(Xv=1,Eg.exports=TA()),Eg.exports}var Z=xm();const ni=_A(Z);var Tg={exports:{}},tu={},bg={exports:{}},Sg={};var Zv;function bA(){return Zv||(Zv=1,(function(r){function t(X,at){var Tt=X.length;X.push(at);t:for(;0<Tt;){var Pt=Tt-1>>>1,Kt=X[Pt];if(0<o(Kt,at))X[Pt]=at,X[Tt]=Kt,Tt=Pt;else break t}}function n(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var at=X[0],Tt=X.pop();if(Tt!==at){X[0]=Tt;t:for(var Pt=0,Kt=X.length,M=Kt>>>1;Pt<M;){var W=2*(Pt+1)-1,ot=X[W],ft=W+1,Rt=X[ft];if(0>o(ot,Tt))ft<Kt&&0>o(Rt,ot)?(X[Pt]=Rt,X[ft]=Tt,Pt=ft):(X[Pt]=ot,X[W]=Tt,Pt=W);else if(ft<Kt&&0>o(Rt,Tt))X[Pt]=Rt,X[ft]=Tt,Pt=ft;else break t}}return at}function o(X,at){var Tt=X.sortIndex-at.sortIndex;return Tt!==0?Tt:X.id-at.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,g=f.now();r.unstable_now=function(){return f.now()-g}}var m=[],p=[],E=1,T=null,S=3,O=!1,K=!1,G=!1,$=!1,lt=typeof setTimeout=="function"?setTimeout:null,ht=typeof clearTimeout=="function"?clearTimeout:null,ut=typeof setImmediate<"u"?setImmediate:null;function It(X){for(var at=n(p);at!==null;){if(at.callback===null)s(p);else if(at.startTime<=X)s(p),at.sortIndex=at.expirationTime,t(m,at);else break;at=n(p)}}function wt(X){if(G=!1,It(X),!K)if(n(m)!==null)K=!0,vt||(vt=!0,k());else{var at=n(p);at!==null&&we(wt,at.startTime-X)}}var vt=!1,R=-1,w=5,C=-1;function x(){return $?!0:!(r.unstable_now()-C<w)}function N(){if($=!1,vt){var X=r.unstable_now();C=X;var at=!0;try{t:{K=!1,G&&(G=!1,ht(R),R=-1),O=!0;var Tt=S;try{e:{for(It(X),T=n(m);T!==null&&!(T.expirationTime>X&&x());){var Pt=T.callback;if(typeof Pt=="function"){T.callback=null,S=T.priorityLevel;var Kt=Pt(T.expirationTime<=X);if(X=r.unstable_now(),typeof Kt=="function"){T.callback=Kt,It(X),at=!0;break e}T===n(m)&&s(m),It(X)}else s(m);T=n(m)}if(T!==null)at=!0;else{var M=n(p);M!==null&&we(wt,M.startTime-X),at=!1}}break t}finally{T=null,S=Tt,O=!1}at=void 0}}finally{at?k():vt=!1}}}var k;if(typeof ut=="function")k=function(){ut(N)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Gt=I.port2;I.port1.onmessage=N,k=function(){Gt.postMessage(null)}}else k=function(){lt(N,0)};function we(X,at){R=lt(function(){X(r.unstable_now())},at)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(X){switch(S){case 1:case 2:case 3:var at=3;break;default:at=S}var Tt=S;S=at;try{return X()}finally{S=Tt}},r.unstable_requestPaint=function(){$=!0},r.unstable_runWithPriority=function(X,at){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var Tt=S;S=X;try{return at()}finally{S=Tt}},r.unstable_scheduleCallback=function(X,at,Tt){var Pt=r.unstable_now();switch(typeof Tt=="object"&&Tt!==null?(Tt=Tt.delay,Tt=typeof Tt=="number"&&0<Tt?Pt+Tt:Pt):Tt=Pt,X){case 1:var Kt=-1;break;case 2:Kt=250;break;case 5:Kt=1073741823;break;case 4:Kt=1e4;break;default:Kt=5e3}return Kt=Tt+Kt,X={id:E++,callback:at,priorityLevel:X,startTime:Tt,expirationTime:Kt,sortIndex:-1},Tt>Pt?(X.sortIndex=Tt,t(p,X),n(m)===null&&X===n(p)&&(G?(ht(R),R=-1):G=!0,we(wt,Tt-Pt))):(X.sortIndex=Kt,t(m,X),K||O||(K=!0,vt||(vt=!0,k()))),X},r.unstable_shouldYield=x,r.unstable_wrapCallback=function(X){var at=S;return function(){var Tt=S;S=at;try{return X.apply(this,arguments)}finally{S=Tt}}}})(Sg)),Sg}var Jv;function SA(){return Jv||(Jv=1,bg.exports=bA()),bg.exports}var Ag={exports:{}},Mn={};var Wv;function AA(){if(Wv)return Mn;Wv=1;var r=xm();function t(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(m,p,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:m,containerInfo:p,implementation:E}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Mn.createPortal=function(m,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return u(m,p,null,E)},Mn.flushSync=function(m){var p=f.T,E=s.p;try{if(f.T=null,s.p=2,m)return m()}finally{f.T=p,s.p=E,s.d.f()}},Mn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(m,p))},Mn.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},Mn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var E=p.as,T=g(E,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,O=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;E==="style"?s.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:O}):E==="script"&&s.d.X(m,{crossOrigin:T,integrity:S,fetchPriority:O,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Mn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var E=g(p.as,p.crossOrigin);s.d.M(m,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(m)},Mn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var E=p.as,T=g(E,p.crossOrigin);s.d.L(m,E,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Mn.preloadModule=function(m,p){if(typeof m=="string")if(p){var E=g(p.as,p.crossOrigin);s.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(m)},Mn.requestFormReset=function(m){s.d.r(m)},Mn.unstable_batchedUpdates=function(m,p){return m(p)},Mn.useFormState=function(m,p,E){return f.H.useFormState(m,p,E)},Mn.useFormStatus=function(){return f.H.useHostTransitionStatus()},Mn.version="19.2.3",Mn}var t0;function JE(){if(t0)return Ag.exports;t0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Ag.exports=AA(),Ag.exports}var e0;function wA(){if(e0)return tu;e0=1;var r=SA(),t=xm(),n=JE();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function f(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function g(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(s(188))}function p(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),e;if(d===l)return m(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var _=!1,b=h.child;b;){if(b===a){_=!0,a=h,l=d;break}if(b===l){_=!0,l=h,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,l=h;break}if(b===l){_=!0,l=d,a=h;break}b=b.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function E(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=E(e),i!==null)return i;e=e.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),K=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),lt=Symbol.for("react.profiler"),ht=Symbol.for("react.consumer"),ut=Symbol.for("react.context"),It=Symbol.for("react.forward_ref"),wt=Symbol.for("react.suspense"),vt=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),x=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function k(e){return e===null||typeof e!="object"?null:(e=N&&e[N]||e["@@iterator"],typeof e=="function"?e:null)}var I=Symbol.for("react.client.reference");function Gt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===I?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case G:return"Fragment";case lt:return"Profiler";case $:return"StrictMode";case wt:return"Suspense";case vt:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case K:return"Portal";case ut:return e.displayName||"Context";case ht:return(e._context.displayName||"Context")+".Consumer";case It:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case R:return i=e.displayName||null,i!==null?i:Gt(e.type)||"Memo";case w:i=e._payload,e=e._init;try{return Gt(e(i))}catch{}}return null}var we=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Tt={pending:!1,data:null,method:null,action:null},Pt=[],Kt=-1;function M(e){return{current:e}}function W(e){0>Kt||(e.current=Pt[Kt],Pt[Kt]=null,Kt--)}function ot(e,i){Kt++,Pt[Kt]=e.current,e.current=i}var ft=M(null),Rt=M(null),bt=M(null),Lt=M(null);function De(e,i){switch(ot(bt,i),ot(Rt,e),ot(ft,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?pv(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=pv(i),e=yv(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}W(ft),ot(ft,e)}function ae(){W(ft),W(Rt),W(bt)}function je(e){e.memoizedState!==null&&ot(Lt,e);var i=ft.current,a=yv(i,e.type);i!==a&&(ot(Rt,e),ot(ft,a))}function gi(e){Rt.current===e&&(W(ft),W(Rt)),Lt.current===e&&(W(Lt),$l._currentValue=Tt)}var Nn,Vi;function Ye(e){if(Nn===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Nn=i&&i[1]||"",Vi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Nn+e+Vi}var ri=!1;function On(e,i){if(!e||ri)return"";ri=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var nt=function(){throw Error()};if(Object.defineProperty(nt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nt,[])}catch(Y){var q=Y}Reflect.construct(e,[],nt)}else{try{nt.call()}catch(Y){q=Y}e.call(nt.prototype)}}else{try{throw Error()}catch(Y){q=Y}(nt=e())&&typeof nt.catch=="function"&&nt.catch(function(){})}}catch(Y){if(Y&&q&&typeof Y.stack=="string")return[Y.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var D=_.split(`
`),j=b.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===j.length)for(l=D.length-1,h=j.length-1;1<=l&&0<=h&&D[l]!==j[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==j[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==j[h]){var J=`
`+D[l].replace(" at new "," at ");return e.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",e.displayName)),J}while(1<=l&&0<=h);break}}}finally{ri=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ye(a):""}function Wi(e,i){switch(e.tag){case 26:case 27:case 5:return Ye(e.type);case 16:return Ye("Lazy");case 13:return e.child!==i&&i!==null?Ye("Suspense Fallback"):Ye("Suspense");case 19:return Ye("SuspenseList");case 0:case 15:return On(e.type,!1);case 11:return On(e.type.render,!1);case 1:return On(e.type,!0);case 31:return Ye("Activity");default:return""}}function ki(e){try{var i="",a=null;do i+=Wi(e,a),a=e,e=e.return;while(e);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ee=Object.prototype.hasOwnProperty,oe=r.unstable_scheduleCallback,zn=r.unstable_cancelCallback,tr=r.unstable_shouldYield,er=r.unstable_requestPaint,$e=r.unstable_now,Pi=r.unstable_getCurrentPriorityLevel,Tr=r.unstable_ImmediatePriority,jn=r.unstable_UserBlockingPriority,En=r.unstable_NormalPriority,Li=r.unstable_LowPriority,br=r.unstable_IdlePriority,Bn=r.log,Sr=r.unstable_setDisableYieldValue,qn=null,Be=null;function gn(e){if(typeof Bn=="function"&&Sr(e),Be&&typeof Be.setStrictMode=="function")try{Be.setStrictMode(qn,e)}catch{}}var Te=Math.clz32?Math.clz32:Wr,Ar=Math.log,Ui=Math.LN2;function Wr(e){return e>>>=0,e===0?32:31-(Ar(e)/Ui|0)|0}var Kn=256,zi=262144,Bt=4194304;function be(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Se(e,i,a){var l=e.pendingLanes;if(l===0)return 0;var h=0,d=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?h=be(l):(_&=b,_!==0?h=be(_):a||(a=b&~e,a!==0&&(h=be(a))))):(b=l&~d,b!==0?h=be(b):_!==0?h=be(_):a||(a=l&~e,a!==0&&(h=be(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Pe(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function mn(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xe(){var e=Bt;return Bt<<=1,(Bt&62914560)===0&&(Bt=4194304),e}function Me(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function H(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function he(e,i,a,l,h,d){var _=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var b=e.entanglements,D=e.expirationTimes,j=e.hiddenUpdates;for(a=_&~a;0<a;){var J=31-Te(a),nt=1<<J;b[J]=0,D[J]=-1;var q=j[J];if(q!==null)for(j[J]=null,J=0;J<q.length;J++){var Y=q[J];Y!==null&&(Y.lane&=-536870913)}a&=~nt}l!==0&&fe(e,l,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(_&~i))}function fe(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var l=31-Te(i);e.entangledLanes|=i,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function qe(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var l=31-Te(a),h=1<<l;h&i|e[l]&i&&(e[l]|=i),a&=~h}}function st(e,i){var a=i&-i;return a=(a&42)!==0?1:ln(a),(a&(e.suspendedLanes|i))!==0?0:a}function ln(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function te(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ne(){var e=at.p;return e!==0?e:(e=window.event,e===void 0?32:jv(e.type))}function un(e,i){var a=at.p;try{return at.p=e,i()}finally{at.p=a}}var de=Math.random().toString(36).slice(2),Ve="__reactFiber$"+de,He="__reactProps$"+de,pt="__reactContainer$"+de,ts="__reactEvents$"+de,Ka="__reactListeners$"+de,Qa="__reactHandles$"+de,ra="__reactResources$"+de,mi="__reactMarker$"+de;function es(e){delete e[Ve],delete e[He],delete e[ts],delete e[Ka],delete e[Qa]}function pi(e){var i=e[Ve];if(i)return i;for(var a=e.parentNode;a;){if(i=a[pt]||a[Ve]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=Av(e);e!==null;){if(a=e[Ve])return a;e=Av(e)}return i}e=a,a=e.parentNode}return null}function Hn(e){if(e=e[Ve]||e[pt]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function xn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function yi(e){var i=e[ra];return i||(i=e[ra]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Le(e){e[mi]=!0}var sa=new Set,ns={};function Qn(e,i){_i(e,i),_i(e+"Capture",i)}function _i(e,i){for(ns[e]=i,e=0;e<i.length;e++)sa.add(i[e])}var aa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),is={},oa={};function Ze(e){return Ee.call(oa,e)?!0:Ee.call(is,e)?!1:aa.test(e)?oa[e]=!0:(is[e]=!0,!1)}function L(e,i,a){if(Ze(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function F(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function B(e,i,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+l)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Et(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Jt(e,i,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,d=l.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(e,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function qt(e){if(!e._valueTracker){var i=Et(e)?"checked":"value";e._valueTracker=Jt(e,i,""+e[i])}}function vi(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return e&&(l=Et(e)?e.checked?"true":"false":e.value),e=l,e!==a?(i.setValue(e),!0):!1}function nr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var la=/[\n"\\]/g;function Yn(e){return e.replace(la,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ya(e,i,a,l,h,d,_,b){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),i!=null?_==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+dt(i)):e.value!==""+dt(i)&&(e.value=""+dt(i)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),i!=null?ll(e,_,dt(i)):a!=null?ll(e,_,dt(a)):l!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+dt(b):e.removeAttribute("name")}function Fu(e,i,a,l,h,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){qt(e);return}a=a!=null?""+dt(a):"",i=i!=null?""+dt(i):a,b||i===e.value||(e.value=i),e.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=b?e.checked:!!l,e.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_),qt(e)}function ll(e,i,a){i==="number"&&nr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function rs(e,i,a,l){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&l&&(e[a].defaultSelected=!0)}else{for(a=""+dt(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function Gu(e,i,a){if(i!=null&&(i=""+dt(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+dt(a):""}function ss(e,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(we(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=dt(i),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),qt(e)}function $n(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var Ku=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ul(e,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":l?e.setProperty(i,a):typeof a!="number"||a===0||Ku.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function cl(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&ul(e,h,l)}else for(var d in i)i.hasOwnProperty(d)&&ul(e,d,i[d])}function $a(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),as=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xa(e){return as.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ji(){}var hl=null;function Ei(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var os=null,ir=null;function ua(e){var i=Hn(e);if(i&&(e=i.stateNode)){var a=e[He]||null;t:switch(e=i.stateNode,i.type){case"input":if(Ya(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Yn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==e&&l.form===e.form){var h=l[He]||null;if(!h)throw Error(s(90));Ya(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===e.form&&vi(l)}break t;case"textarea":Gu(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&rs(e,!!a.multiple,i,!1)}}}var Za=!1;function ls(e,i,a){if(Za)return e(i,a);Za=!0;try{var l=e(i);return l}finally{if(Za=!1,(os!==null||ir!==null)&&(jc(),os&&(i=os,e=ir,ir=os=null,ua(i),e)))for(i=0;i<e.length;i++)ua(e[i])}}function Bi(e,i){var a=e.stateNode;if(a===null)return null;var l=a[He]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ca=!1;if(Ti)try{var ge={};Object.defineProperty(ge,"passive",{get:function(){ca=!0}}),window.addEventListener("test",ge,ge),window.removeEventListener("test",ge,ge)}catch{ca=!1}var rr=null,fl=null,ha=null;function dl(){if(ha)return ha;var e,i=fl,a=i.length,l,h="value"in rr?rr.value:rr.textContent,d=h.length;for(e=0;e<a&&i[e]===h[e];e++);var _=a-e;for(l=1;l<=_&&i[a-l]===h[d-l];l++);return ha=h.slice(e,1<l?1-l:void 0)}function fa(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function wr(){return!0}function qi(){return!1}function Tn(e){function i(a,l,h,d,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(a=e[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?wr:qi,this.isPropagationStopped=qi,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=wr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=wr)},persist:function(){},isPersistent:wr}),i}var Rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sr=Tn(Rr),us=T({},Rr,{view:0,detail:0}),gl=Tn(us),cs,Ja,ar,Wa=T({},us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ar&&(ar&&e.type==="mousemove"?(cs=e.screenX-ar.screenX,Ja=e.screenY-ar.screenY):Ja=cs=0,ar=e),cs)},movementY:function(e){return"movementY"in e?e.movementY:Ja}}),ml=Tn(Wa),da=T({},Wa,{dataTransfer:0}),Yu=Tn(da),$u=T({},us,{relatedTarget:0}),ga=Tn($u),pl=T({},Rr,{animationName:0,elapsedTime:0,pseudoElement:0}),Xu=Tn(pl),to=T({},Rr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zu=Tn(to),Ju=T({},Rr,{data:0}),or=Tn(Ju),Wu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ec={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nc(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=ec[e])?!!i[e]:!1}function hs(){return nc}var Fn=T({},us,{key:function(e){if(e.key){var i=Wu[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=fa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hs,charCode:function(e){return e.type==="keypress"?fa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ic=Tn(Fn),rc=T({},Wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cr=Tn(rc),c=T({},us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hs}),y=Tn(c),v=T({},Rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Tn(v),U=T({},Wa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Tn(U),ct=T({},Rr,{newState:0,oldState:0}),Ut=Tn(ct),Fe=[9,13,27,32],re=Ti&&"CompositionEvent"in window,Oe=null;Ti&&"documentMode"in document&&(Oe=document.documentMode);var bi=Ti&&"TextEvent"in window&&!Oe,lr=Ti&&(!re||Oe&&8<Oe&&11>=Oe),Hi=" ",Fi=!1;function ma(e,i){switch(e){case"keyup":return Fe.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eo(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var no=!1;function q1(e,i){switch(e){case"compositionend":return eo(i);case"keypress":return i.which!==32?null:(Fi=!0,Hi);case"textInput":return e=i.data,e===Hi&&Fi?null:e;default:return null}}function H1(e,i){if(no)return e==="compositionend"||!re&&ma(e,i)?(e=dl(),ha=fl=rr=null,no=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return lr&&i.locale!=="ko"?null:i.data;default:return null}}var F1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cp(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!F1[e.type]:i==="textarea"}function Ip(e,i,a,l){os?ir?ir.push(l):ir=[l]:os=l,i=Qc(i,"onChange"),0<i.length&&(a=new sr("onChange","change",null,a,l),e.push({event:a,listeners:i}))}var yl=null,_l=null;function G1(e){cv(e,0)}function sc(e){var i=xn(e);if(vi(i))return e}function Dp(e,i){if(e==="change")return i}var Np=!1;if(Ti){var Rf;if(Ti){var Cf="oninput"in document;if(!Cf){var Op=document.createElement("div");Op.setAttribute("oninput","return;"),Cf=typeof Op.oninput=="function"}Rf=Cf}else Rf=!1;Np=Rf&&(!document.documentMode||9<document.documentMode)}function xp(){yl&&(yl.detachEvent("onpropertychange",Mp),_l=yl=null)}function Mp(e){if(e.propertyName==="value"&&sc(_l)){var i=[];Ip(i,_l,e,Ei(e)),ls(G1,i)}}function K1(e,i,a){e==="focusin"?(xp(),yl=i,_l=a,yl.attachEvent("onpropertychange",Mp)):e==="focusout"&&xp()}function Q1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sc(_l)}function Y1(e,i){if(e==="click")return sc(i)}function $1(e,i){if(e==="input"||e==="change")return sc(i)}function X1(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var si=typeof Object.is=="function"?Object.is:X1;function vl(e,i){if(si(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Ee.call(i,h)||!si(e[h],i[h]))return!1}return!0}function Vp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function kp(e,i){var a=Vp(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=i&&l>=i)return{node:a,offset:i-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Vp(a)}}function Pp(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Pp(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Lp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=nr(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=nr(e.document)}return i}function If(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var Z1=Ti&&"documentMode"in document&&11>=document.documentMode,io=null,Df=null,El=null,Nf=!1;function Up(e,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Nf||io==null||io!==nr(l)||(l=io,"selectionStart"in l&&If(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),El&&vl(El,l)||(El=l,l=Qc(Df,"onSelect"),0<l.length&&(i=new sr("onSelect","select",null,i,a),e.push({event:i,listeners:l}),i.target=io)))}function pa(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var ro={animationend:pa("Animation","AnimationEnd"),animationiteration:pa("Animation","AnimationIteration"),animationstart:pa("Animation","AnimationStart"),transitionrun:pa("Transition","TransitionRun"),transitionstart:pa("Transition","TransitionStart"),transitioncancel:pa("Transition","TransitionCancel"),transitionend:pa("Transition","TransitionEnd")},Of={},zp={};Ti&&(zp=document.createElement("div").style,"AnimationEvent"in window||(delete ro.animationend.animation,delete ro.animationiteration.animation,delete ro.animationstart.animation),"TransitionEvent"in window||delete ro.transitionend.transition);function ya(e){if(Of[e])return Of[e];if(!ro[e])return e;var i=ro[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in zp)return Of[e]=i[a];return e}var jp=ya("animationend"),Bp=ya("animationiteration"),qp=ya("animationstart"),J1=ya("transitionrun"),W1=ya("transitionstart"),tS=ya("transitioncancel"),Hp=ya("transitionend"),Fp=new Map,xf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xf.push("scrollEnd");function Gi(e,i){Fp.set(e,i),Qn(i,[e])}var ac=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Si=[],so=0,Mf=0;function oc(){for(var e=so,i=Mf=so=0;i<e;){var a=Si[i];Si[i++]=null;var l=Si[i];Si[i++]=null;var h=Si[i];Si[i++]=null;var d=Si[i];if(Si[i++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}d!==0&&Gp(a,h,d)}}function lc(e,i,a,l){Si[so++]=e,Si[so++]=i,Si[so++]=a,Si[so++]=l,Mf|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Vf(e,i,a,l){return lc(e,i,a,l),uc(e)}function _a(e,i){return lc(e,null,null,i),uc(e)}function Gp(e,i,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&i!==null&&(h=31-Te(a),e=d.hiddenUpdates,l=e[h],l===null?e[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function uc(e){if(50<ql)throw ql=0,Hd=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var ao={};function eS(e,i,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ai(e,i,a,l){return new eS(e,i,a,l)}function kf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ir(e,i){var a=e.alternate;return a===null?(a=ai(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Kp(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function cc(e,i,a,l,h,d){var _=0;if(l=e,typeof e=="function")kf(e)&&(_=1);else if(typeof e=="string")_=aA(e,a,ft.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case C:return e=ai(31,a,i,h),e.elementType=C,e.lanes=d,e;case G:return va(a.children,h,d,i);case $:_=8,h|=24;break;case lt:return e=ai(12,a,i,h|2),e.elementType=lt,e.lanes=d,e;case wt:return e=ai(13,a,i,h),e.elementType=wt,e.lanes=d,e;case vt:return e=ai(19,a,i,h),e.elementType=vt,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ut:_=10;break t;case ht:_=9;break t;case It:_=11;break t;case R:_=14;break t;case w:_=16,l=null;break t}_=29,a=Error(s(130,e===null?"null":typeof e,"")),l=null}return i=ai(_,a,i,h),i.elementType=e,i.type=l,i.lanes=d,i}function va(e,i,a,l){return e=ai(7,e,l,i),e.lanes=a,e}function Pf(e,i,a){return e=ai(6,e,null,i),e.lanes=a,e}function Qp(e){var i=ai(18,null,null,0);return i.stateNode=e,i}function Lf(e,i,a){return i=ai(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Yp=new WeakMap;function Ai(e,i){if(typeof e=="object"&&e!==null){var a=Yp.get(e);return a!==void 0?a:(i={value:e,source:i,stack:ki(i)},Yp.set(e,i),i)}return{value:e,source:i,stack:ki(i)}}var oo=[],lo=0,hc=null,Tl=0,wi=[],Ri=0,fs=null,ur=1,cr="";function Dr(e,i){oo[lo++]=Tl,oo[lo++]=hc,hc=e,Tl=i}function $p(e,i,a){wi[Ri++]=ur,wi[Ri++]=cr,wi[Ri++]=fs,fs=e;var l=ur;e=cr;var h=32-Te(l)-1;l&=~(1<<h),a+=1;var d=32-Te(i)+h;if(30<d){var _=h-h%5;d=(l&(1<<_)-1).toString(32),l>>=_,h-=_,ur=1<<32-Te(i)+h|a<<h|l,cr=d+e}else ur=1<<d|a<<h|l,cr=e}function Uf(e){e.return!==null&&(Dr(e,1),$p(e,1,0))}function zf(e){for(;e===hc;)hc=oo[--lo],oo[lo]=null,Tl=oo[--lo],oo[lo]=null;for(;e===fs;)fs=wi[--Ri],wi[Ri]=null,cr=wi[--Ri],wi[Ri]=null,ur=wi[--Ri],wi[Ri]=null}function Xp(e,i){wi[Ri++]=ur,wi[Ri++]=cr,wi[Ri++]=fs,ur=i.id,cr=i.overflow,fs=e}var bn=null,Re=null,Wt=!1,ds=null,Ci=!1,jf=Error(s(519));function gs(e){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bl(Ai(i,e)),jf}function Zp(e){var i=e.stateNode,a=e.type,l=e.memoizedProps;switch(i[Ve]=e,i[He]=l,a){case"dialog":Ft("cancel",i),Ft("close",i);break;case"iframe":case"object":case"embed":Ft("load",i);break;case"video":case"audio":for(a=0;a<Fl.length;a++)Ft(Fl[a],i);break;case"source":Ft("error",i);break;case"img":case"image":case"link":Ft("error",i),Ft("load",i);break;case"details":Ft("toggle",i);break;case"input":Ft("invalid",i),Fu(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ft("invalid",i);break;case"textarea":Ft("invalid",i),ss(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||gv(i.textContent,a)?(l.popover!=null&&(Ft("beforetoggle",i),Ft("toggle",i)),l.onScroll!=null&&Ft("scroll",i),l.onScrollEnd!=null&&Ft("scrollend",i),l.onClick!=null&&(i.onclick=ji),i=!0):i=!1,i||gs(e,!0)}function Jp(e){for(bn=e.return;bn;)switch(bn.tag){case 5:case 31:case 13:Ci=!1;return;case 27:case 3:Ci=!0;return;default:bn=bn.return}}function uo(e){if(e!==bn)return!1;if(!Wt)return Jp(e),Wt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||rg(e.type,e.memoizedProps)),a=!a),a&&Re&&gs(e),Jp(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Re=Sv(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Re=Sv(e)}else i===27?(i=Re,Is(e.type)?(e=ug,ug=null,Re=e):Re=i):Re=bn?Di(e.stateNode.nextSibling):null;return!0}function Ea(){Re=bn=null,Wt=!1}function Bf(){var e=ds;return e!==null&&(Wn===null?Wn=e:Wn.push.apply(Wn,e),ds=null),e}function bl(e){ds===null?ds=[e]:ds.push(e)}var qf=M(null),Ta=null,Nr=null;function ms(e,i,a){ot(qf,i._currentValue),i._currentValue=a}function Or(e){e._currentValue=qf.current,W(qf)}function Hf(e,i,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),e===a)break;e=e.return}}function Ff(e,i,a,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;t:for(;d!==null;){var b=d;d=h;for(var D=0;D<i.length;D++)if(b.context===i[D]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),Hf(d.return,a,e),l||(_=null);break t}d=b.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(s(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),Hf(_,a,e),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===e){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function co(e,i,a,l){e=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var b=h.type;si(h.pendingProps.value,_.value)||(e!==null?e.push(b):e=[b])}}else if(h===Lt.current){if(_=h.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push($l):e=[$l])}h=h.return}e!==null&&Ff(i,e,a,l),i.flags|=262144}function fc(e){for(e=e.firstContext;e!==null;){if(!si(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ba(e){Ta=e,Nr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Sn(e){return Wp(Ta,e)}function dc(e,i){return Ta===null&&ba(e),Wp(e,i)}function Wp(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Nr===null){if(e===null)throw Error(s(308));Nr=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Nr=Nr.next=i;return a}var nS=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},iS=r.unstable_scheduleCallback,rS=r.unstable_NormalPriority,Je={$$typeof:ut,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gf(){return{controller:new nS,data:new Map,refCount:0}}function Sl(e){e.refCount--,e.refCount===0&&iS(rS,function(){e.controller.abort()})}var Al=null,Kf=0,ho=0,fo=null;function sS(e,i){if(Al===null){var a=Al=[];Kf=0,ho=$d(),fo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Kf++,i.then(ty,ty),i}function ty(){if(--Kf===0&&Al!==null){fo!==null&&(fo.status="fulfilled");var e=Al;Al=null,ho=0,fo=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function aS(e,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var ey=X.S;X.S=function(e,i){U_=$e(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&sS(e,i),ey!==null&&ey(e,i)};var Sa=M(null);function Qf(){var e=Sa.current;return e!==null?e:_e.pooledCache}function gc(e,i){i===null?ot(Sa,Sa.current):ot(Sa,i.pool)}function ny(){var e=Qf();return e===null?null:{parent:Je._currentValue,pool:e}}var go=Error(s(460)),Yf=Error(s(474)),mc=Error(s(542)),pc={then:function(){}};function iy(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ry(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(ji,ji),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,ay(e),e;default:if(typeof i.status=="string")i.then(ji,ji);else{if(e=_e,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,ay(e),e}throw wa=i,go}}function Aa(e){try{var i=e._init;return i(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(wa=a,go):a}}var wa=null;function sy(){if(wa===null)throw Error(s(459));var e=wa;return wa=null,e}function ay(e){if(e===go||e===mc)throw Error(s(483))}var mo=null,wl=0;function yc(e){var i=wl;return wl+=1,mo===null&&(mo=[]),ry(mo,e,i)}function Rl(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function _c(e,i){throw i.$$typeof===S?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function oy(e){function i(P,V){if(e){var z=P.deletions;z===null?(P.deletions=[V],P.flags|=16):z.push(V)}}function a(P,V){if(!e)return null;for(;V!==null;)i(P,V),V=V.sibling;return null}function l(P){for(var V=new Map;P!==null;)P.key!==null?V.set(P.key,P):V.set(P.index,P),P=P.sibling;return V}function h(P,V){return P=Ir(P,V),P.index=0,P.sibling=null,P}function d(P,V,z){return P.index=z,e?(z=P.alternate,z!==null?(z=z.index,z<V?(P.flags|=67108866,V):z):(P.flags|=67108866,V)):(P.flags|=1048576,V)}function _(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function b(P,V,z,tt){return V===null||V.tag!==6?(V=Pf(z,P.mode,tt),V.return=P,V):(V=h(V,z),V.return=P,V)}function D(P,V,z,tt){var St=z.type;return St===G?J(P,V,z.props.children,tt,z.key):V!==null&&(V.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===w&&Aa(St)===V.type)?(V=h(V,z.props),Rl(V,z),V.return=P,V):(V=cc(z.type,z.key,z.props,null,P.mode,tt),Rl(V,z),V.return=P,V)}function j(P,V,z,tt){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=Lf(z,P.mode,tt),V.return=P,V):(V=h(V,z.children||[]),V.return=P,V)}function J(P,V,z,tt,St){return V===null||V.tag!==7?(V=va(z,P.mode,tt,St),V.return=P,V):(V=h(V,z),V.return=P,V)}function nt(P,V,z){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Pf(""+V,P.mode,z),V.return=P,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case O:return z=cc(V.type,V.key,V.props,null,P.mode,z),Rl(z,V),z.return=P,z;case K:return V=Lf(V,P.mode,z),V.return=P,V;case w:return V=Aa(V),nt(P,V,z)}if(we(V)||k(V))return V=va(V,P.mode,z,null),V.return=P,V;if(typeof V.then=="function")return nt(P,yc(V),z);if(V.$$typeof===ut)return nt(P,dc(P,V),z);_c(P,V)}return null}function q(P,V,z,tt){var St=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return St!==null?null:b(P,V,""+z,tt);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case O:return z.key===St?D(P,V,z,tt):null;case K:return z.key===St?j(P,V,z,tt):null;case w:return z=Aa(z),q(P,V,z,tt)}if(we(z)||k(z))return St!==null?null:J(P,V,z,tt,null);if(typeof z.then=="function")return q(P,V,yc(z),tt);if(z.$$typeof===ut)return q(P,V,dc(P,z),tt);_c(P,z)}return null}function Y(P,V,z,tt,St){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return P=P.get(z)||null,b(V,P,""+tt,St);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case O:return P=P.get(tt.key===null?z:tt.key)||null,D(V,P,tt,St);case K:return P=P.get(tt.key===null?z:tt.key)||null,j(V,P,tt,St);case w:return tt=Aa(tt),Y(P,V,z,tt,St)}if(we(tt)||k(tt))return P=P.get(z)||null,J(V,P,tt,St,null);if(typeof tt.then=="function")return Y(P,V,z,yc(tt),St);if(tt.$$typeof===ut)return Y(P,V,z,dc(V,tt),St);_c(V,tt)}return null}function yt(P,V,z,tt){for(var St=null,ne=null,_t=V,jt=V=0,Yt=null;_t!==null&&jt<z.length;jt++){_t.index>jt?(Yt=_t,_t=null):Yt=_t.sibling;var ie=q(P,_t,z[jt],tt);if(ie===null){_t===null&&(_t=Yt);break}e&&_t&&ie.alternate===null&&i(P,_t),V=d(ie,V,jt),ne===null?St=ie:ne.sibling=ie,ne=ie,_t=Yt}if(jt===z.length)return a(P,_t),Wt&&Dr(P,jt),St;if(_t===null){for(;jt<z.length;jt++)_t=nt(P,z[jt],tt),_t!==null&&(V=d(_t,V,jt),ne===null?St=_t:ne.sibling=_t,ne=_t);return Wt&&Dr(P,jt),St}for(_t=l(_t);jt<z.length;jt++)Yt=Y(_t,P,jt,z[jt],tt),Yt!==null&&(e&&Yt.alternate!==null&&_t.delete(Yt.key===null?jt:Yt.key),V=d(Yt,V,jt),ne===null?St=Yt:ne.sibling=Yt,ne=Yt);return e&&_t.forEach(function(Ms){return i(P,Ms)}),Wt&&Dr(P,jt),St}function Ct(P,V,z,tt){if(z==null)throw Error(s(151));for(var St=null,ne=null,_t=V,jt=V=0,Yt=null,ie=z.next();_t!==null&&!ie.done;jt++,ie=z.next()){_t.index>jt?(Yt=_t,_t=null):Yt=_t.sibling;var Ms=q(P,_t,ie.value,tt);if(Ms===null){_t===null&&(_t=Yt);break}e&&_t&&Ms.alternate===null&&i(P,_t),V=d(Ms,V,jt),ne===null?St=Ms:ne.sibling=Ms,ne=Ms,_t=Yt}if(ie.done)return a(P,_t),Wt&&Dr(P,jt),St;if(_t===null){for(;!ie.done;jt++,ie=z.next())ie=nt(P,ie.value,tt),ie!==null&&(V=d(ie,V,jt),ne===null?St=ie:ne.sibling=ie,ne=ie);return Wt&&Dr(P,jt),St}for(_t=l(_t);!ie.done;jt++,ie=z.next())ie=Y(_t,P,jt,ie.value,tt),ie!==null&&(e&&ie.alternate!==null&&_t.delete(ie.key===null?jt:ie.key),V=d(ie,V,jt),ne===null?St=ie:ne.sibling=ie,ne=ie);return e&&_t.forEach(function(yA){return i(P,yA)}),Wt&&Dr(P,jt),St}function ye(P,V,z,tt){if(typeof z=="object"&&z!==null&&z.type===G&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case O:t:{for(var St=z.key;V!==null;){if(V.key===St){if(St=z.type,St===G){if(V.tag===7){a(P,V.sibling),tt=h(V,z.props.children),tt.return=P,P=tt;break t}}else if(V.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===w&&Aa(St)===V.type){a(P,V.sibling),tt=h(V,z.props),Rl(tt,z),tt.return=P,P=tt;break t}a(P,V);break}else i(P,V);V=V.sibling}z.type===G?(tt=va(z.props.children,P.mode,tt,z.key),tt.return=P,P=tt):(tt=cc(z.type,z.key,z.props,null,P.mode,tt),Rl(tt,z),tt.return=P,P=tt)}return _(P);case K:t:{for(St=z.key;V!==null;){if(V.key===St)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){a(P,V.sibling),tt=h(V,z.children||[]),tt.return=P,P=tt;break t}else{a(P,V);break}else i(P,V);V=V.sibling}tt=Lf(z,P.mode,tt),tt.return=P,P=tt}return _(P);case w:return z=Aa(z),ye(P,V,z,tt)}if(we(z))return yt(P,V,z,tt);if(k(z)){if(St=k(z),typeof St!="function")throw Error(s(150));return z=St.call(z),Ct(P,V,z,tt)}if(typeof z.then=="function")return ye(P,V,yc(z),tt);if(z.$$typeof===ut)return ye(P,V,dc(P,z),tt);_c(P,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,V!==null&&V.tag===6?(a(P,V.sibling),tt=h(V,z),tt.return=P,P=tt):(a(P,V),tt=Pf(z,P.mode,tt),tt.return=P,P=tt),_(P)):a(P,V)}return function(P,V,z,tt){try{wl=0;var St=ye(P,V,z,tt);return mo=null,St}catch(_t){if(_t===go||_t===mc)throw _t;var ne=ai(29,_t,null,P.mode);return ne.lanes=tt,ne.return=P,ne}}}var Ra=oy(!0),ly=oy(!1),ps=!1;function $f(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xf(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ys(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function _s(e,i,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(se&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=uc(e),Gp(e,null,a),i}return lc(e,l,i,a),uc(e)}function Cl(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,qe(e,a)}}function Zf(e,i){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var Jf=!1;function Il(){if(Jf){var e=fo;if(e!==null)throw e}}function Dl(e,i,a,l){Jf=!1;var h=e.updateQueue;ps=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var D=b,j=D.next;D.next=null,_===null?d=j:_.next=j,_=D;var J=e.alternate;J!==null&&(J=J.updateQueue,b=J.lastBaseUpdate,b!==_&&(b===null?J.firstBaseUpdate=j:b.next=j,J.lastBaseUpdate=D))}if(d!==null){var nt=h.baseState;_=0,J=j=D=null,b=d;do{var q=b.lane&-536870913,Y=q!==b.lane;if(Y?(Qt&q)===q:(l&q)===q){q!==0&&q===ho&&(Jf=!0),J!==null&&(J=J.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var yt=e,Ct=b;q=i;var ye=a;switch(Ct.tag){case 1:if(yt=Ct.payload,typeof yt=="function"){nt=yt.call(ye,nt,q);break t}nt=yt;break t;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=Ct.payload,q=typeof yt=="function"?yt.call(ye,nt,q):yt,q==null)break t;nt=T({},nt,q);break t;case 2:ps=!0}}q=b.callback,q!==null&&(e.flags|=64,Y&&(e.flags|=8192),Y=h.callbacks,Y===null?h.callbacks=[q]:Y.push(q))}else Y={lane:q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},J===null?(j=J=Y,D=nt):J=J.next=Y,_|=q;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;Y=b,b=Y.next,Y.next=null,h.lastBaseUpdate=Y,h.shared.pending=null}}while(!0);J===null&&(D=nt),h.baseState=D,h.firstBaseUpdate=j,h.lastBaseUpdate=J,d===null&&(h.shared.lanes=0),Ss|=_,e.lanes=_,e.memoizedState=nt}}function uy(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function cy(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)uy(a[e],i)}var po=M(null),vc=M(0);function hy(e,i){e=jr,ot(vc,e),ot(po,i),jr=e|i.baseLanes}function Wf(){ot(vc,jr),ot(po,po.current)}function td(){jr=vc.current,W(po),W(vc)}var oi=M(null),Ii=null;function vs(e){var i=e.alternate;ot(Ge,Ge.current&1),ot(oi,e),Ii===null&&(i===null||po.current!==null||i.memoizedState!==null)&&(Ii=e)}function ed(e){ot(Ge,Ge.current),ot(oi,e),Ii===null&&(Ii=e)}function fy(e){e.tag===22?(ot(Ge,Ge.current),ot(oi,e),Ii===null&&(Ii=e)):Es()}function Es(){ot(Ge,Ge.current),ot(oi,oi.current)}function li(e){W(oi),Ii===e&&(Ii=null),W(Ge)}var Ge=M(0);function Ec(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||og(a)||lg(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var xr=0,zt=null,me=null,We=null,Tc=!1,yo=!1,Ca=!1,bc=0,Nl=0,_o=null,oS=0;function Ue(){throw Error(s(321))}function nd(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!si(e[a],i[a]))return!1;return!0}function id(e,i,a,l,h,d){return xr=d,zt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,X.H=e===null||e.memoizedState===null?$y:_d,Ca=!1,d=a(l,h),Ca=!1,yo&&(d=gy(i,a,l,h)),dy(e),d}function dy(e){X.H=Ml;var i=me!==null&&me.next!==null;if(xr=0,We=me=zt=null,Tc=!1,Nl=0,_o=null,i)throw Error(s(300));e===null||tn||(e=e.dependencies,e!==null&&fc(e)&&(tn=!0))}function gy(e,i,a,l){zt=e;var h=0;do{if(yo&&(_o=null),Nl=0,yo=!1,25<=h)throw Error(s(301));if(h+=1,We=me=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}X.H=Xy,d=i(a,l)}while(yo);return d}function lS(){var e=X.H,i=e.useState()[0];return i=typeof i.then=="function"?Ol(i):i,e=e.useState()[0],(me!==null?me.memoizedState:null)!==e&&(zt.flags|=1024),i}function rd(){var e=bc!==0;return bc=0,e}function sd(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function ad(e){if(Tc){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Tc=!1}xr=0,We=me=zt=null,yo=!1,Nl=bc=0,_o=null}function Gn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?zt.memoizedState=We=e:We=We.next=e,We}function Ke(){if(me===null){var e=zt.alternate;e=e!==null?e.memoizedState:null}else e=me.next;var i=We===null?zt.memoizedState:We.next;if(i!==null)We=i,me=e;else{if(e===null)throw zt.alternate===null?Error(s(467)):Error(s(310));me=e,e={memoizedState:me.memoizedState,baseState:me.baseState,baseQueue:me.baseQueue,queue:me.queue,next:null},We===null?zt.memoizedState=We=e:We=We.next=e}return We}function Sc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ol(e){var i=Nl;return Nl+=1,_o===null&&(_o=[]),e=ry(_o,e,i),i=zt,(We===null?i.memoizedState:We.next)===null&&(i=i.alternate,X.H=i===null||i.memoizedState===null?$y:_d),e}function Ac(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ol(e);if(e.$$typeof===ut)return Sn(e)}throw Error(s(438,String(e)))}function od(e){var i=null,a=zt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=zt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Sc(),zt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),l=0;l<e;l++)a[l]=x;return i.index++,a}function Mr(e,i){return typeof i=="function"?i(e):i}function wc(e){var i=Ke();return ld(i,me,e)}function ld(e,i,a){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=e.baseQueue,d=l.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}i.baseQueue=h=d,l.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{i=h.next;var b=_=null,D=null,j=i,J=!1;do{var nt=j.lane&-536870913;if(nt!==j.lane?(Qt&nt)===nt:(xr&nt)===nt){var q=j.revertLane;if(q===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),nt===ho&&(J=!0);else if((xr&q)===q){j=j.next,q===ho&&(J=!0);continue}else nt={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},D===null?(b=D=nt,_=d):D=D.next=nt,zt.lanes|=q,Ss|=q;nt=j.action,Ca&&a(d,nt),d=j.hasEagerState?j.eagerState:a(d,nt)}else q={lane:nt,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},D===null?(b=D=q,_=d):D=D.next=q,zt.lanes|=nt,Ss|=nt;j=j.next}while(j!==null&&j!==i);if(D===null?_=d:D.next=b,!si(d,e.memoizedState)&&(tn=!0,J&&(a=fo,a!==null)))throw a;e.memoizedState=d,e.baseState=_,e.baseQueue=D,l.lastRenderedState=d}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function ud(e){var i=Ke(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=e(d,_.action),_=_.next;while(_!==h);si(d,i.memoizedState)||(tn=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function my(e,i,a){var l=zt,h=Ke(),d=Wt;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var _=!si((me||h).memoizedState,a);if(_&&(h.memoizedState=a,tn=!0),h=h.queue,fd(_y.bind(null,l,h,e),[e]),h.getSnapshot!==i||_||We!==null&&We.memoizedState.tag&1){if(l.flags|=2048,vo(9,{destroy:void 0},yy.bind(null,l,h,a,i),null),_e===null)throw Error(s(349));d||(xr&127)!==0||py(l,i,a)}return a}function py(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=zt.updateQueue,i===null?(i=Sc(),zt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function yy(e,i,a,l){i.value=a,i.getSnapshot=l,vy(i)&&Ey(e)}function _y(e,i,a){return a(function(){vy(i)&&Ey(e)})}function vy(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!si(e,a)}catch{return!0}}function Ey(e){var i=_a(e,2);i!==null&&ti(i,e,2)}function cd(e){var i=Gn();if(typeof e=="function"){var a=e;if(e=a(),Ca){gn(!0);try{a()}finally{gn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:e},i}function Ty(e,i,a,l){return e.baseState=a,ld(e,me,typeof l=="function"?l:Mr)}function uS(e,i,a,l,h){if(Ic(e))throw Error(s(485));if(e=i.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};X.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,by(i,d)):(d.next=a.next,i.pending=a.next=d)}}function by(e,i){var a=i.action,l=i.payload,h=e.state;if(i.isTransition){var d=X.T,_={};X.T=_;try{var b=a(h,l),D=X.S;D!==null&&D(_,b),Sy(e,i,b)}catch(j){hd(e,i,j)}finally{d!==null&&_.types!==null&&(d.types=_.types),X.T=d}}else try{d=a(h,l),Sy(e,i,d)}catch(j){hd(e,i,j)}}function Sy(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Ay(e,i,l)},function(l){return hd(e,i,l)}):Ay(e,i,a)}function Ay(e,i,a){i.status="fulfilled",i.value=a,wy(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,by(e,a)))}function hd(e,i,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,wy(i),i=i.next;while(i!==l)}e.action=null}function wy(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Ry(e,i){return i}function Cy(e,i){if(Wt){var a=_e.formState;if(a!==null){t:{var l=zt;if(Wt){if(Re){e:{for(var h=Re,d=Ci;h.nodeType!==8;){if(!d){h=null;break e}if(h=Di(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){Re=Di(h.nextSibling),l=h.data==="F!";break t}}gs(l)}l=!1}l&&(i=a[0])}}return a=Gn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ry,lastRenderedState:i},a.queue=l,a=Ky.bind(null,zt,l),l.dispatch=a,l=cd(!1),d=yd.bind(null,zt,!1,l.queue),l=Gn(),h={state:i,dispatch:null,action:e,pending:null},l.queue=h,a=uS.bind(null,zt,h,d,a),h.dispatch=a,l.memoizedState=e,[i,a,!1]}function Iy(e){var i=Ke();return Dy(i,me,e)}function Dy(e,i,a){if(i=ld(e,i,Ry)[0],e=wc(Mr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Ol(i)}catch(_){throw _===go?mc:_}else l=i;i=Ke();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(zt.flags|=2048,vo(9,{destroy:void 0},cS.bind(null,h,a),null)),[l,d,e]}function cS(e,i){e.action=i}function Ny(e){var i=Ke(),a=me;if(a!==null)return Dy(i,a,e);Ke(),i=i.memoizedState,a=Ke();var l=a.queue.dispatch;return a.memoizedState=e,[i,l,!1]}function vo(e,i,a,l){return e={tag:e,create:a,deps:l,inst:i,next:null},i=zt.updateQueue,i===null&&(i=Sc(),zt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,i.lastEffect=e),e}function Oy(){return Ke().memoizedState}function Rc(e,i,a,l){var h=Gn();zt.flags|=e,h.memoizedState=vo(1|i,{destroy:void 0},a,l===void 0?null:l)}function Cc(e,i,a,l){var h=Ke();l=l===void 0?null:l;var d=h.memoizedState.inst;me!==null&&l!==null&&nd(l,me.memoizedState.deps)?h.memoizedState=vo(i,d,a,l):(zt.flags|=e,h.memoizedState=vo(1|i,d,a,l))}function xy(e,i){Rc(8390656,8,e,i)}function fd(e,i){Cc(2048,8,e,i)}function hS(e){zt.flags|=4;var i=zt.updateQueue;if(i===null)i=Sc(),zt.updateQueue=i,i.events=[e];else{var a=i.events;a===null?i.events=[e]:a.push(e)}}function My(e){var i=Ke().memoizedState;return hS({ref:i,nextImpl:e}),function(){if((se&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Vy(e,i){return Cc(4,2,e,i)}function ky(e,i){return Cc(4,4,e,i)}function Py(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Ly(e,i,a){a=a!=null?a.concat([e]):null,Cc(4,4,Py.bind(null,i,e),a)}function dd(){}function Uy(e,i){var a=Ke();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&nd(i,l[1])?l[0]:(a.memoizedState=[e,i],e)}function zy(e,i){var a=Ke();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&nd(i,l[1]))return l[0];if(l=e(),Ca){gn(!0);try{e()}finally{gn(!1)}}return a.memoizedState=[l,i],l}function gd(e,i,a){return a===void 0||(xr&1073741824)!==0&&(Qt&261930)===0?e.memoizedState=i:(e.memoizedState=a,e=j_(),zt.lanes|=e,Ss|=e,a)}function jy(e,i,a,l){return si(a,i)?a:po.current!==null?(e=gd(e,a,l),si(e,i)||(tn=!0),e):(xr&42)===0||(xr&1073741824)!==0&&(Qt&261930)===0?(tn=!0,e.memoizedState=a):(e=j_(),zt.lanes|=e,Ss|=e,i)}function By(e,i,a,l,h){var d=at.p;at.p=d!==0&&8>d?d:8;var _=X.T,b={};X.T=b,yd(e,!1,i,a);try{var D=h(),j=X.S;if(j!==null&&j(b,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var J=aS(D,l);xl(e,i,J,hi(e))}else xl(e,i,l,hi(e))}catch(nt){xl(e,i,{then:function(){},status:"rejected",reason:nt},hi())}finally{at.p=d,_!==null&&b.types!==null&&(_.types=b.types),X.T=_}}function fS(){}function md(e,i,a,l){if(e.tag!==5)throw Error(s(476));var h=qy(e).queue;By(e,h,i,Tt,a===null?fS:function(){return Hy(e),a(l)})}function qy(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:Tt,baseState:Tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:Tt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Hy(e){var i=qy(e);i.next===null&&(i=e.alternate.memoizedState),xl(e,i.next.queue,{},hi())}function pd(){return Sn($l)}function Fy(){return Ke().memoizedState}function Gy(){return Ke().memoizedState}function dS(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=hi();e=ys(a);var l=_s(i,e,a);l!==null&&(ti(l,i,a),Cl(l,i,a)),i={cache:Gf()},e.payload=i;return}i=i.return}}function gS(e,i,a){var l=hi();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ic(e)?Qy(i,a):(a=Vf(e,i,a,l),a!==null&&(ti(a,e,l),Yy(a,i,l)))}function Ky(e,i,a){var l=hi();xl(e,i,a,l)}function xl(e,i,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ic(e))Qy(i,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,b=d(_,a);if(h.hasEagerState=!0,h.eagerState=b,si(b,_))return lc(e,i,h,0),_e===null&&oc(),!1}catch{}if(a=Vf(e,i,h,l),a!==null)return ti(a,e,l),Yy(a,i,l),!0}return!1}function yd(e,i,a,l){if(l={lane:2,revertLane:$d(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ic(e)){if(i)throw Error(s(479))}else i=Vf(e,a,l,2),i!==null&&ti(i,e,2)}function Ic(e){var i=e.alternate;return e===zt||i!==null&&i===zt}function Qy(e,i){yo=Tc=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Yy(e,i,a){if((a&4194048)!==0){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,qe(e,a)}}var Ml={readContext:Sn,use:Ac,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useLayoutEffect:Ue,useInsertionEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useSyncExternalStore:Ue,useId:Ue,useHostTransitionStatus:Ue,useFormState:Ue,useActionState:Ue,useOptimistic:Ue,useMemoCache:Ue,useCacheRefresh:Ue};Ml.useEffectEvent=Ue;var $y={readContext:Sn,use:Ac,useCallback:function(e,i){return Gn().memoizedState=[e,i===void 0?null:i],e},useContext:Sn,useEffect:xy,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,Rc(4194308,4,Py.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Rc(4194308,4,e,i)},useInsertionEffect:function(e,i){Rc(4,2,e,i)},useMemo:function(e,i){var a=Gn();i=i===void 0?null:i;var l=e();if(Ca){gn(!0);try{e()}finally{gn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(e,i,a){var l=Gn();if(a!==void 0){var h=a(i);if(Ca){gn(!0);try{a(i)}finally{gn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=gS.bind(null,zt,e),[l.memoizedState,e]},useRef:function(e){var i=Gn();return e={current:e},i.memoizedState=e},useState:function(e){e=cd(e);var i=e.queue,a=Ky.bind(null,zt,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:dd,useDeferredValue:function(e,i){var a=Gn();return gd(a,e,i)},useTransition:function(){var e=cd(!1);return e=By.bind(null,zt,e.queue,!0,!1),Gn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var l=zt,h=Gn();if(Wt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),_e===null)throw Error(s(349));(Qt&127)!==0||py(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,xy(_y.bind(null,l,d,e),[e]),l.flags|=2048,vo(9,{destroy:void 0},yy.bind(null,l,d,a,i),null),a},useId:function(){var e=Gn(),i=_e.identifierPrefix;if(Wt){var a=cr,l=ur;a=(l&~(1<<32-Te(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=bc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=oS++,i="_"+i+"r_"+a.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:pd,useFormState:Cy,useActionState:Cy,useOptimistic:function(e){var i=Gn();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=yd.bind(null,zt,!0,a),a.dispatch=i,[e,i]},useMemoCache:od,useCacheRefresh:function(){return Gn().memoizedState=dS.bind(null,zt)},useEffectEvent:function(e){var i=Gn(),a={impl:e};return i.memoizedState=a,function(){if((se&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},_d={readContext:Sn,use:Ac,useCallback:Uy,useContext:Sn,useEffect:fd,useImperativeHandle:Ly,useInsertionEffect:Vy,useLayoutEffect:ky,useMemo:zy,useReducer:wc,useRef:Oy,useState:function(){return wc(Mr)},useDebugValue:dd,useDeferredValue:function(e,i){var a=Ke();return jy(a,me.memoizedState,e,i)},useTransition:function(){var e=wc(Mr)[0],i=Ke().memoizedState;return[typeof e=="boolean"?e:Ol(e),i]},useSyncExternalStore:my,useId:Fy,useHostTransitionStatus:pd,useFormState:Iy,useActionState:Iy,useOptimistic:function(e,i){var a=Ke();return Ty(a,me,e,i)},useMemoCache:od,useCacheRefresh:Gy};_d.useEffectEvent=My;var Xy={readContext:Sn,use:Ac,useCallback:Uy,useContext:Sn,useEffect:fd,useImperativeHandle:Ly,useInsertionEffect:Vy,useLayoutEffect:ky,useMemo:zy,useReducer:ud,useRef:Oy,useState:function(){return ud(Mr)},useDebugValue:dd,useDeferredValue:function(e,i){var a=Ke();return me===null?gd(a,e,i):jy(a,me.memoizedState,e,i)},useTransition:function(){var e=ud(Mr)[0],i=Ke().memoizedState;return[typeof e=="boolean"?e:Ol(e),i]},useSyncExternalStore:my,useId:Fy,useHostTransitionStatus:pd,useFormState:Ny,useActionState:Ny,useOptimistic:function(e,i){var a=Ke();return me!==null?Ty(a,me,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:od,useCacheRefresh:Gy};Xy.useEffectEvent=My;function vd(e,i,a,l){i=e.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Ed={enqueueSetState:function(e,i,a){e=e._reactInternals;var l=hi(),h=ys(l);h.payload=i,a!=null&&(h.callback=a),i=_s(e,h,l),i!==null&&(ti(i,e,l),Cl(i,e,l))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var l=hi(),h=ys(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=_s(e,h,l),i!==null&&(ti(i,e,l),Cl(i,e,l))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=hi(),l=ys(a);l.tag=2,i!=null&&(l.callback=i),i=_s(e,l,a),i!==null&&(ti(i,e,a),Cl(i,e,a))}};function Zy(e,i,a,l,h,d,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!vl(a,l)||!vl(h,d):!0}function Jy(e,i,a,l){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==e&&Ed.enqueueReplaceState(i,i.state,null)}function Ia(e,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(e=e.defaultProps){a===i&&(a=T({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}function Wy(e){ac(e)}function t_(e){console.error(e)}function e_(e){ac(e)}function Dc(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function n_(e,i,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Td(e,i,a){return a=ys(a),a.tag=3,a.payload={element:null},a.callback=function(){Dc(e,i)},a}function i_(e){return e=ys(e),e.tag=3,e}function r_(e,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;e.payload=function(){return h(d)},e.callback=function(){n_(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){n_(i,a,l),typeof h!="function"&&(As===null?As=new Set([this]):As.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function mS(e,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&co(i,a,h,!0),a=oi.current,a!==null){switch(a.tag){case 31:case 13:return Ii===null?Bc():a.alternate===null&&ze===0&&(ze=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===pc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Kd(e,l,h)),!1;case 22:return a.flags|=65536,l===pc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Kd(e,l,h)),!1}throw Error(s(435,a.tag))}return Kd(e,l,h),Bc(),!1}if(Wt)return i=oi.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==jf&&(e=Error(s(422),{cause:l}),bl(Ai(e,a)))):(l!==jf&&(i=Error(s(423),{cause:l}),bl(Ai(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=Ai(l,a),h=Td(e.stateNode,l,h),Zf(e,h),ze!==4&&(ze=2)),!1;var d=Error(s(520),{cause:l});if(d=Ai(d,a),Bl===null?Bl=[d]:Bl.push(d),ze!==4&&(ze=2),i===null)return!0;l=Ai(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=Td(a.stateNode,l,e),Zf(a,e),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(As===null||!As.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=i_(h),r_(h,e,a,l),Zf(a,h),!1}a=a.return}while(a!==null);return!1}var bd=Error(s(461)),tn=!1;function An(e,i,a,l){i.child=e===null?ly(i,null,a,l):Ra(i,e.child,a,l)}function s_(e,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var b in l)b!=="ref"&&(_[b]=l[b])}else _=l;return ba(i),l=id(e,i,a,_,d,h),b=rd(),e!==null&&!tn?(sd(e,i,h),Vr(e,i,h)):(Wt&&b&&Uf(i),i.flags|=1,An(e,i,l,h),i.child)}function a_(e,i,a,l,h){if(e===null){var d=a.type;return typeof d=="function"&&!kf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,o_(e,i,d,l,h)):(e=cc(a.type,null,l,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!Nd(e,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:vl,a(_,l)&&e.ref===i.ref)return Vr(e,i,h)}return i.flags|=1,e=Ir(d,l),e.ref=i.ref,e.return=i,i.child=e}function o_(e,i,a,l,h){if(e!==null){var d=e.memoizedProps;if(vl(d,l)&&e.ref===i.ref)if(tn=!1,i.pendingProps=l=d,Nd(e,h))(e.flags&131072)!==0&&(tn=!0);else return i.lanes=e.lanes,Vr(e,i,h)}return Sd(e,i,a,l,h)}function l_(e,i,a,l){var h=l.children,d=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(l=i.child=e.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~d}else l=0,i.child=null;return u_(e,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&gc(i,d!==null?d.cachePool:null),d!==null?hy(i,d):Wf(),fy(i);else return l=i.lanes=536870912,u_(e,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(gc(i,d.cachePool),hy(i,d),Es(),i.memoizedState=null):(e!==null&&gc(i,null),Wf(),Es());return An(e,i,h,a),i.child}function Vl(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function u_(e,i,a,l,h){var d=Qf();return d=d===null?null:{parent:Je._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},e!==null&&gc(i,null),Wf(),fy(i),e!==null&&co(e,i,l,!0),i.childLanes=h,null}function Nc(e,i){return i=xc({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function c_(e,i,a){return Ra(i,e.child,null,a),e=Nc(i,i.pendingProps),e.flags|=2,li(i),i.memoizedState=null,e}function pS(e,i,a){var l=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Wt){if(l.mode==="hidden")return e=Nc(i,l),i.lanes=536870912,Vl(null,e);if(ed(i),(e=Re)?(e=bv(e,Ci),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:fs!==null?{id:ur,overflow:cr}:null,retryLane:536870912,hydrationErrors:null},a=Qp(e),a.return=i,i.child=a,bn=i,Re=null)):e=null,e===null)throw gs(i);return i.lanes=536870912,null}return Nc(i,l)}var d=e.memoizedState;if(d!==null){var _=d.dehydrated;if(ed(i),h)if(i.flags&256)i.flags&=-257,i=c_(e,i,a);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(s(558));else if(tn||co(e,i,a,!1),h=(a&e.childLanes)!==0,tn||h){if(l=_e,l!==null&&(_=st(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,_a(e,_),ti(l,e,_),bd;Bc(),i=c_(e,i,a)}else e=d.treeContext,Re=Di(_.nextSibling),bn=i,Wt=!0,ds=null,Ci=!1,e!==null&&Xp(i,e),i=Nc(i,l),i.flags|=4096;return i}return e=Ir(e.child,{mode:l.mode,children:l.children}),e.ref=i.ref,i.child=e,e.return=i,e}function Oc(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Sd(e,i,a,l,h){return ba(i),a=id(e,i,a,l,void 0,h),l=rd(),e!==null&&!tn?(sd(e,i,h),Vr(e,i,h)):(Wt&&l&&Uf(i),i.flags|=1,An(e,i,a,h),i.child)}function h_(e,i,a,l,h,d){return ba(i),i.updateQueue=null,a=gy(i,l,a,h),dy(e),l=rd(),e!==null&&!tn?(sd(e,i,d),Vr(e,i,d)):(Wt&&l&&Uf(i),i.flags|=1,An(e,i,a,d),i.child)}function f_(e,i,a,l,h){if(ba(i),i.stateNode===null){var d=ao,_=a.contextType;typeof _=="object"&&_!==null&&(d=Sn(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Ed,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},$f(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?Sn(_):ao,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(vd(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Ed.enqueueReplaceState(d,d.state,null),Dl(i,l,d,h),Il(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(e===null){d=i.stateNode;var b=i.memoizedProps,D=Ia(a,b);d.props=D;var j=d.context,J=a.contextType;_=ao,typeof J=="object"&&J!==null&&(_=Sn(J));var nt=a.getDerivedStateFromProps;J=typeof nt=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,J||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||j!==_)&&Jy(i,d,l,_),ps=!1;var q=i.memoizedState;d.state=q,Dl(i,l,d,h),Il(),j=i.memoizedState,b||q!==j||ps?(typeof nt=="function"&&(vd(i,a,nt,l),j=i.memoizedState),(D=ps||Zy(i,a,D,l,q,j,_))?(J||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=j),d.props=l,d.state=j,d.context=_,l=D):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Xf(e,i),_=i.memoizedProps,J=Ia(a,_),d.props=J,nt=i.pendingProps,q=d.context,j=a.contextType,D=ao,typeof j=="object"&&j!==null&&(D=Sn(j)),b=a.getDerivedStateFromProps,(j=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==nt||q!==D)&&Jy(i,d,l,D),ps=!1,q=i.memoizedState,d.state=q,Dl(i,l,d,h),Il();var Y=i.memoizedState;_!==nt||q!==Y||ps||e!==null&&e.dependencies!==null&&fc(e.dependencies)?(typeof b=="function"&&(vd(i,a,b,l),Y=i.memoizedState),(J=ps||Zy(i,a,J,l,q,Y,D)||e!==null&&e.dependencies!==null&&fc(e.dependencies))?(j||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,Y,D),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,Y,D)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===e.memoizedProps&&q===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&q===e.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=Y),d.props=l,d.state=Y,d.context=D,l=J):(typeof d.componentDidUpdate!="function"||_===e.memoizedProps&&q===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&q===e.memoizedState||(i.flags|=1024),l=!1)}return d=l,Oc(e,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&l?(i.child=Ra(i,e.child,null,h),i.child=Ra(i,null,a,h)):An(e,i,a,h),i.memoizedState=d.state,e=i.child):e=Vr(e,i,h),e}function d_(e,i,a,l){return Ea(),i.flags|=256,An(e,i,a,l),i.child}var Ad={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wd(e){return{baseLanes:e,cachePool:ny()}}function Rd(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=ci),e}function g_(e,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=e!==null&&e.memoizedState===null?!1:(Ge.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,e===null){if(Wt){if(h?vs(i):Es(),(e=Re)?(e=bv(e,Ci),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:fs!==null?{id:ur,overflow:cr}:null,retryLane:536870912,hydrationErrors:null},a=Qp(e),a.return=i,i.child=a,bn=i,Re=null)):e=null,e===null)throw gs(i);return lg(e)?i.lanes=32:i.lanes=536870912,null}var b=l.children;return l=l.fallback,h?(Es(),h=i.mode,b=xc({mode:"hidden",children:b},h),l=va(l,h,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,l=i.child,l.memoizedState=wd(a),l.childLanes=Rd(e,_,a),i.memoizedState=Ad,Vl(null,l)):(vs(i),Cd(i,b))}var D=e.memoizedState;if(D!==null&&(b=D.dehydrated,b!==null)){if(d)i.flags&256?(vs(i),i.flags&=-257,i=Id(e,i,a)):i.memoizedState!==null?(Es(),i.child=e.child,i.flags|=128,i=null):(Es(),b=l.fallback,h=i.mode,l=xc({mode:"visible",children:l.children},h),b=va(b,h,a,null),b.flags|=2,l.return=i,b.return=i,l.sibling=b,i.child=l,Ra(i,e.child,null,a),l=i.child,l.memoizedState=wd(a),l.childLanes=Rd(e,_,a),i.memoizedState=Ad,i=Vl(null,l));else if(vs(i),lg(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var j=_.dgst;_=j,l=Error(s(419)),l.stack="",l.digest=_,bl({value:l,source:null,stack:null}),i=Id(e,i,a)}else if(tn||co(e,i,a,!1),_=(a&e.childLanes)!==0,tn||_){if(_=_e,_!==null&&(l=st(_,a),l!==0&&l!==D.retryLane))throw D.retryLane=l,_a(e,l),ti(_,e,l),bd;og(b)||Bc(),i=Id(e,i,a)}else og(b)?(i.flags|=192,i.child=e.child,i=null):(e=D.treeContext,Re=Di(b.nextSibling),bn=i,Wt=!0,ds=null,Ci=!1,e!==null&&Xp(i,e),i=Cd(i,l.children),i.flags|=4096);return i}return h?(Es(),b=l.fallback,h=i.mode,D=e.child,j=D.sibling,l=Ir(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,j!==null?b=Ir(j,b):(b=va(b,h,a,null),b.flags|=2),b.return=i,l.return=i,l.sibling=b,i.child=l,Vl(null,l),l=i.child,b=e.child.memoizedState,b===null?b=wd(a):(h=b.cachePool,h!==null?(D=Je._currentValue,h=h.parent!==D?{parent:D,pool:D}:h):h=ny(),b={baseLanes:b.baseLanes|a,cachePool:h}),l.memoizedState=b,l.childLanes=Rd(e,_,a),i.memoizedState=Ad,Vl(e.child,l)):(vs(i),a=e.child,e=a.sibling,a=Ir(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,e!==null&&(_=i.deletions,_===null?(i.deletions=[e],i.flags|=16):_.push(e)),i.child=a,i.memoizedState=null,a)}function Cd(e,i){return i=xc({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function xc(e,i){return e=ai(22,e,null,i),e.lanes=0,e}function Id(e,i,a){return Ra(i,e.child,null,a),e=Cd(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function m_(e,i,a){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i),Hf(e.return,i,a)}function Dd(e,i,a,l,h,d){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=h,_.treeForkCount=d)}function p_(e,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;l=l.children;var _=Ge.current,b=(_&2)!==0;if(b?(_=_&1|2,i.flags|=128):_&=1,ot(Ge,_),An(e,i,l,a),l=Wt?Tl:0,!b&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&m_(e,a,i);else if(e.tag===19)m_(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&Ec(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Dd(i,!1,h,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&Ec(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Dd(i,!0,a,null,d,l);break;case"together":Dd(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Vr(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Ss|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(co(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=Ir(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Ir(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Nd(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&fc(e)))}function yS(e,i,a){switch(i.tag){case 3:De(i,i.stateNode.containerInfo),ms(i,Je,e.memoizedState.cache),Ea();break;case 27:case 5:je(i);break;case 4:De(i,i.stateNode.containerInfo);break;case 10:ms(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,ed(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(vs(i),i.flags|=128,null):(a&i.child.childLanes)!==0?g_(e,i,a):(vs(i),e=Vr(e,i,a),e!==null?e.sibling:null);vs(i);break;case 19:var h=(e.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(co(e,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return p_(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ot(Ge,Ge.current),l)break;return null;case 22:return i.lanes=0,l_(e,i,a,i.pendingProps);case 24:ms(i,Je,e.memoizedState.cache)}return Vr(e,i,a)}function y_(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)tn=!0;else{if(!Nd(e,a)&&(i.flags&128)===0)return tn=!1,yS(e,i,a);tn=(e.flags&131072)!==0}else tn=!1,Wt&&(i.flags&1048576)!==0&&$p(i,Tl,i.index);switch(i.lanes=0,i.tag){case 16:t:{var l=i.pendingProps;if(e=Aa(i.elementType),i.type=e,typeof e=="function")kf(e)?(l=Ia(e,l),i.tag=1,i=f_(null,i,e,l,a)):(i.tag=0,i=Sd(null,i,e,l,a));else{if(e!=null){var h=e.$$typeof;if(h===It){i.tag=11,i=s_(null,i,e,l,a);break t}else if(h===R){i.tag=14,i=a_(null,i,e,l,a);break t}}throw i=Gt(e)||e,Error(s(306,i,""))}}return i;case 0:return Sd(e,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Ia(l,i.pendingProps),f_(e,i,l,h,a);case 3:t:{if(De(i,i.stateNode.containerInfo),e===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,Xf(e,i),Dl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,ms(i,Je,l),l!==d.cache&&Ff(i,[Je],a,!0),Il(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=d_(e,i,l,a);break t}else if(l!==h){h=Ai(Error(s(424)),i),bl(h),i=d_(e,i,l,a);break t}else for(e=i.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Re=Di(e.firstChild),bn=i,Wt=!0,ds=null,Ci=!0,a=ly(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ea(),l===h){i=Vr(e,i,a);break t}An(e,i,l,a)}i=i.child}return i;case 26:return Oc(e,i),e===null?(a=Iv(i.type,null,i.pendingProps,null))?i.memoizedState=a:Wt||(a=i.type,e=i.pendingProps,l=Yc(bt.current).createElement(a),l[Ve]=i,l[He]=e,wn(l,a,e),Le(l),i.stateNode=l):i.memoizedState=Iv(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return je(i),e===null&&Wt&&(l=i.stateNode=wv(i.type,i.pendingProps,bt.current),bn=i,Ci=!0,h=Re,Is(i.type)?(ug=h,Re=Di(l.firstChild)):Re=h),An(e,i,i.pendingProps.children,a),Oc(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Wt&&((h=l=Re)&&(l=QS(l,i.type,i.pendingProps,Ci),l!==null?(i.stateNode=l,bn=i,Re=Di(l.firstChild),Ci=!1,h=!0):h=!1),h||gs(i)),je(i),h=i.type,d=i.pendingProps,_=e!==null?e.memoizedProps:null,l=d.children,rg(h,d)?l=null:_!==null&&rg(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=id(e,i,lS,null,null,a),$l._currentValue=h),Oc(e,i),An(e,i,l,a),i.child;case 6:return e===null&&Wt&&((e=a=Re)&&(a=YS(a,i.pendingProps,Ci),a!==null?(i.stateNode=a,bn=i,Re=null,e=!0):e=!1),e||gs(i)),null;case 13:return g_(e,i,a);case 4:return De(i,i.stateNode.containerInfo),l=i.pendingProps,e===null?i.child=Ra(i,null,l,a):An(e,i,l,a),i.child;case 11:return s_(e,i,i.type,i.pendingProps,a);case 7:return An(e,i,i.pendingProps,a),i.child;case 8:return An(e,i,i.pendingProps.children,a),i.child;case 12:return An(e,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,ms(i,i.type,l.value),An(e,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,ba(i),h=Sn(h),l=l(h),i.flags|=1,An(e,i,l,a),i.child;case 14:return a_(e,i,i.type,i.pendingProps,a);case 15:return o_(e,i,i.type,i.pendingProps,a);case 19:return p_(e,i,a);case 31:return pS(e,i,a);case 22:return l_(e,i,a,i.pendingProps);case 24:return ba(i),l=Sn(Je),e===null?(h=Qf(),h===null&&(h=_e,d=Gf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},$f(i),ms(i,Je,h)):((e.lanes&a)!==0&&(Xf(e,i),Dl(i,null,null,a),Il()),h=e.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),ms(i,Je,l)):(l=d.cache,ms(i,Je,l),l!==h.cache&&Ff(i,[Je],a,!0))),An(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function kr(e){e.flags|=4}function Od(e,i,a,l,h){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(F_())e.flags|=8192;else throw wa=pc,Yf}else e.flags&=-16777217}function __(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Mv(i))if(F_())e.flags|=8192;else throw wa=pc,Yf}function Mc(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Xe():536870912,e.lanes|=i,So|=i)}function kl(e,i){if(!Wt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ce(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=a,i}function _S(e,i,a){var l=i.pendingProps;switch(zf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ce(i),null;case 1:return Ce(i),null;case 3:return a=i.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Or(Je),ae(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(uo(i)?kr(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Bf())),Ce(i),null;case 26:var h=i.type,d=i.memoizedState;return e===null?(kr(i),d!==null?(Ce(i),__(i,d)):(Ce(i),Od(i,h,null,l,a))):d?d!==e.memoizedState?(kr(i),Ce(i),__(i,d)):(Ce(i),i.flags&=-16777217):(e=e.memoizedProps,e!==l&&kr(i),Ce(i),Od(i,h,e,l,a)),null;case 27:if(gi(i),a=bt.current,h=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&kr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return Ce(i),null}e=ft.current,uo(i)?Zp(i):(e=wv(h,l,a),i.stateNode=e,kr(i))}return Ce(i),null;case 5:if(gi(i),h=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&kr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return Ce(i),null}if(d=ft.current,uo(i))Zp(i);else{var _=Yc(bt.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(h,{is:l.is}):_.createElement(h)}}d[Ve]=i,d[He]=l;t:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break t;for(;_.sibling===null;){if(_.return===null||_.return===i)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;t:switch(wn(d,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&kr(i)}}return Ce(i),Od(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,a),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==l&&kr(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(e=bt.current,uo(i)){if(e=i.stateNode,a=i.memoizedProps,l=null,h=bn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[Ve]=i,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||gv(e.nodeValue,a)),e||gs(i,!0)}else e=Yc(e).createTextNode(l),e[Ve]=i,i.stateNode=e}return Ce(i),null;case 31:if(a=i.memoizedState,e===null||e.memoizedState!==null){if(l=uo(i),a!==null){if(e===null){if(!l)throw Error(s(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Ve]=i}else Ea(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ce(i),e=!1}else a=Bf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return i.flags&256?(li(i),i):(li(i),null);if((i.flags&128)!==0)throw Error(s(558))}return Ce(i),null;case 13:if(l=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=uo(i),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Ve]=i}else Ea(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ce(i),h=!1}else h=Bf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(li(i),i):(li(i),null)}return li(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)),a!==e&&a&&(i.child.flags|=8192),Mc(i,i.updateQueue),Ce(i),null);case 4:return ae(),e===null&&Wd(i.stateNode.containerInfo),Ce(i),null;case 10:return Or(i.type),Ce(i),null;case 19:if(W(Ge),l=i.memoizedState,l===null)return Ce(i),null;if(h=(i.flags&128)!==0,d=l.rendering,d===null)if(h)kl(l,!1);else{if(ze!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=Ec(e),d!==null){for(i.flags|=128,kl(l,!1),e=d.updateQueue,i.updateQueue=e,Mc(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Kp(a,e),a=a.sibling;return ot(Ge,Ge.current&1|2),Wt&&Dr(i,l.treeForkCount),i.child}e=e.sibling}l.tail!==null&&$e()>Uc&&(i.flags|=128,h=!0,kl(l,!1),i.lanes=4194304)}else{if(!h)if(e=Ec(d),e!==null){if(i.flags|=128,h=!0,e=e.updateQueue,i.updateQueue=e,Mc(i,e),kl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Wt)return Ce(i),null}else 2*$e()-l.renderingStartTime>Uc&&a!==536870912&&(i.flags|=128,h=!0,kl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(e=l.last,e!==null?e.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=$e(),e.sibling=null,a=Ge.current,ot(Ge,h?a&1|2:a&1),Wt&&Dr(i,l.treeForkCount),e):(Ce(i),null);case 22:case 23:return li(i),td(),l=i.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(Ce(i),i.subtreeFlags&6&&(i.flags|=8192)):Ce(i),a=i.updateQueue,a!==null&&Mc(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),e!==null&&W(Sa),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Or(Je),Ce(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function vS(e,i){switch(zf(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Or(Je),ae(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return gi(i),null;case 31:if(i.memoizedState!==null){if(li(i),i.alternate===null)throw Error(s(340));Ea()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(li(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Ea()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return W(Ge),null;case 4:return ae(),null;case 10:return Or(i.type),null;case 22:case 23:return li(i),td(),e!==null&&W(Sa),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Or(Je),null;case 25:return null;default:return null}}function v_(e,i){switch(zf(i),i.tag){case 3:Or(Je),ae();break;case 26:case 27:case 5:gi(i);break;case 4:ae();break;case 31:i.memoizedState!==null&&li(i);break;case 13:li(i);break;case 19:W(Ge);break;case 10:Or(i.type);break;case 22:case 23:li(i),td(),e!==null&&W(Sa);break;case 24:Or(Je)}}function Pl(e,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&e)===e){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==h)}}catch(b){ce(i,i.return,b)}}function Ts(e,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&e)===e){var _=l.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,h=i;var D=a,j=b;try{j()}catch(J){ce(h,D,J)}}}l=l.next}while(l!==d)}}catch(J){ce(i,i.return,J)}}function E_(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{cy(i,a)}catch(l){ce(e,e.return,l)}}}function T_(e,i,a){a.props=Ia(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){ce(e,i,l)}}function Ll(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(h){ce(e,i,h)}}function hr(e,i){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ce(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ce(e,i,h)}else a.current=null}function b_(e){var i=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ce(e,e.return,h)}}function xd(e,i,a){try{var l=e.stateNode;BS(l,e.type,a,i),l[He]=i}catch(h){ce(e,e.return,h)}}function S_(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Is(e.type)||e.tag===4}function Md(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||S_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Is(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vd(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ji));else if(l!==4&&(l===27&&Is(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(Vd(e,i,a),e=e.sibling;e!==null;)Vd(e,i,a),e=e.sibling}function Vc(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(l!==4&&(l===27&&Is(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Vc(e,i,a),e=e.sibling;e!==null;)Vc(e,i,a),e=e.sibling}function A_(e){var i=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);wn(i,l,a),i[Ve]=e,i[He]=a}catch(d){ce(e,e.return,d)}}var Pr=!1,en=!1,kd=!1,w_=typeof WeakSet=="function"?WeakSet:Set,pn=null;function ES(e,i){if(e=e.containerInfo,ng=eh,e=Lp(e),If(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var _=0,b=-1,D=-1,j=0,J=0,nt=e,q=null;e:for(;;){for(var Y;nt!==a||h!==0&&nt.nodeType!==3||(b=_+h),nt!==d||l!==0&&nt.nodeType!==3||(D=_+l),nt.nodeType===3&&(_+=nt.nodeValue.length),(Y=nt.firstChild)!==null;)q=nt,nt=Y;for(;;){if(nt===e)break e;if(q===a&&++j===h&&(b=_),q===d&&++J===l&&(D=_),(Y=nt.nextSibling)!==null)break;nt=q,q=nt.parentNode}nt=Y}a=b===-1||D===-1?null:{start:b,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(ig={focusedElem:e,selectionRange:a},eh=!1,pn=i;pn!==null;)if(i=pn,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,pn=e;else for(;pn!==null;){switch(i=pn,d=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)h=e[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var yt=Ia(a.type,h);e=l.getSnapshotBeforeUpdate(yt,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(Ct){ce(a,a.return,Ct)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)ag(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ag(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,pn=e;break}pn=i.return}}function R_(e,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ur(e,a),l&4&&Pl(5,a);break;case 1:if(Ur(e,a),l&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(_){ce(a,a.return,_)}else{var h=Ia(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(_){ce(a,a.return,_)}}l&64&&E_(a),l&512&&Ll(a,a.return);break;case 3:if(Ur(e,a),l&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{cy(e,i)}catch(_){ce(a,a.return,_)}}break;case 27:i===null&&l&4&&A_(a);case 26:case 5:Ur(e,a),i===null&&l&4&&b_(a),l&512&&Ll(a,a.return);break;case 12:Ur(e,a);break;case 31:Ur(e,a),l&4&&D_(e,a);break;case 13:Ur(e,a),l&4&&N_(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=DS.bind(null,a),$S(e,a))));break;case 22:if(l=a.memoizedState!==null||Pr,!l){i=i!==null&&i.memoizedState!==null||en,h=Pr;var d=en;Pr=l,(en=i)&&!d?zr(e,a,(a.subtreeFlags&8772)!==0):Ur(e,a),Pr=h,en=d}break;case 30:break;default:Ur(e,a)}}function C_(e){var i=e.alternate;i!==null&&(e.alternate=null,C_(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&es(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var xe=null,Xn=!1;function Lr(e,i,a){for(a=a.child;a!==null;)I_(e,i,a),a=a.sibling}function I_(e,i,a){if(Be&&typeof Be.onCommitFiberUnmount=="function")try{Be.onCommitFiberUnmount(qn,a)}catch{}switch(a.tag){case 26:en||hr(a,i),Lr(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:en||hr(a,i);var l=xe,h=Xn;Is(a.type)&&(xe=a.stateNode,Xn=!1),Lr(e,i,a),Kl(a.stateNode),xe=l,Xn=h;break;case 5:en||hr(a,i);case 6:if(l=xe,h=Xn,xe=null,Lr(e,i,a),xe=l,Xn=h,xe!==null)if(Xn)try{(xe.nodeType===9?xe.body:xe.nodeName==="HTML"?xe.ownerDocument.body:xe).removeChild(a.stateNode)}catch(d){ce(a,i,d)}else try{xe.removeChild(a.stateNode)}catch(d){ce(a,i,d)}break;case 18:xe!==null&&(Xn?(e=xe,Ev(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Oo(e)):Ev(xe,a.stateNode));break;case 4:l=xe,h=Xn,xe=a.stateNode.containerInfo,Xn=!0,Lr(e,i,a),xe=l,Xn=h;break;case 0:case 11:case 14:case 15:Ts(2,a,i),en||Ts(4,a,i),Lr(e,i,a);break;case 1:en||(hr(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&T_(a,i,l)),Lr(e,i,a);break;case 21:Lr(e,i,a);break;case 22:en=(l=en)||a.memoizedState!==null,Lr(e,i,a),en=l;break;default:Lr(e,i,a)}}function D_(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Oo(e)}catch(a){ce(i,i.return,a)}}}function N_(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Oo(e)}catch(a){ce(i,i.return,a)}}function TS(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new w_),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new w_),i;default:throw Error(s(435,e.tag))}}function kc(e,i){var a=TS(e);i.forEach(function(l){if(!a.has(l)){a.add(l);var h=NS.bind(null,e,l);l.then(h,h)}})}function Zn(e,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=e,_=i,b=_;t:for(;b!==null;){switch(b.tag){case 27:if(Is(b.type)){xe=b.stateNode,Xn=!1;break t}break;case 5:xe=b.stateNode,Xn=!1;break t;case 3:case 4:xe=b.stateNode.containerInfo,Xn=!0;break t}b=b.return}if(xe===null)throw Error(s(160));I_(d,_,h),xe=null,Xn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)O_(i,e),i=i.sibling}var Ki=null;function O_(e,i){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Zn(i,e),Jn(e),l&4&&(Ts(3,e,e.return),Pl(3,e),Ts(5,e,e.return));break;case 1:Zn(i,e),Jn(e),l&512&&(en||a===null||hr(a,a.return)),l&64&&Pr&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Ki;if(Zn(i,e),Jn(e),l&512&&(en||a===null||hr(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[mi]||d[Ve]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),wn(d,l,a),d[Ve]=e,Le(d),l=d;break t;case"link":var _=Ov("link","href",h).get(l+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break e}}d=h.createElement(l),wn(d,l,a),h.head.appendChild(d);break;case"meta":if(_=Ov("meta","content",h).get(l+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break e}}d=h.createElement(l),wn(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[Ve]=e,Le(d),l=d}e.stateNode=l}else xv(h,e.type,e.stateNode);else e.stateNode=Nv(h,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?xv(h,e.type,e.stateNode):Nv(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&xd(e,e.memoizedProps,a.memoizedProps)}break;case 27:Zn(i,e),Jn(e),l&512&&(en||a===null||hr(a,a.return)),a!==null&&l&4&&xd(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Zn(i,e),Jn(e),l&512&&(en||a===null||hr(a,a.return)),e.flags&32){h=e.stateNode;try{$n(h,"")}catch(yt){ce(e,e.return,yt)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,xd(e,h,a!==null?a.memoizedProps:h)),l&1024&&(kd=!0);break;case 6:if(Zn(i,e),Jn(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(yt){ce(e,e.return,yt)}}break;case 3:if(Zc=null,h=Ki,Ki=$c(i.containerInfo),Zn(i,e),Ki=h,Jn(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Oo(i.containerInfo)}catch(yt){ce(e,e.return,yt)}kd&&(kd=!1,x_(e));break;case 4:l=Ki,Ki=$c(e.stateNode.containerInfo),Zn(i,e),Jn(e),Ki=l;break;case 12:Zn(i,e),Jn(e);break;case 31:Zn(i,e),Jn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,kc(e,l)));break;case 13:Zn(i,e),Jn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Lc=$e()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,kc(e,l)));break;case 22:h=e.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,j=Pr,J=en;if(Pr=j||h,en=J||D,Zn(i,e),en=J,Pr=j,Jn(e),l&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||D||Pr||en||Da(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){D=a=i;try{if(d=D.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=D.stateNode;var nt=D.memoizedProps.style,q=nt!=null&&nt.hasOwnProperty("display")?nt.display:null;b.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(yt){ce(D,D.return,yt)}}}else if(i.tag===6){if(a===null){D=i;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(yt){ce(D,D.return,yt)}}}else if(i.tag===18){if(a===null){D=i;try{var Y=D.stateNode;h?Tv(Y,!0):Tv(D.stateNode,!1)}catch(yt){ce(D,D.return,yt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,kc(e,a))));break;case 19:Zn(i,e),Jn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,kc(e,l)));break;case 30:break;case 21:break;default:Zn(i,e),Jn(e)}}function Jn(e){var i=e.flags;if(i&2){try{for(var a,l=e.return;l!==null;){if(S_(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=Md(e);Vc(e,d,h);break;case 5:var _=a.stateNode;a.flags&32&&($n(_,""),a.flags&=-33);var b=Md(e);Vc(e,b,_);break;case 3:case 4:var D=a.stateNode.containerInfo,j=Md(e);Vd(e,j,D);break;default:throw Error(s(161))}}catch(J){ce(e,e.return,J)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function x_(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;x_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function Ur(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)R_(e,i.alternate,i),i=i.sibling}function Da(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Ts(4,i,i.return),Da(i);break;case 1:hr(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&T_(i,i.return,a),Da(i);break;case 27:Kl(i.stateNode);case 26:case 5:hr(i,i.return),Da(i);break;case 22:i.memoizedState===null&&Da(i);break;case 30:Da(i);break;default:Da(i)}e=e.sibling}}function zr(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=e,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:zr(h,d,a),Pl(4,d);break;case 1:if(zr(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(j){ce(l,l.return,j)}if(l=d,h=l.updateQueue,h!==null){var b=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)uy(D[h],b)}catch(j){ce(l,l.return,j)}}a&&_&64&&E_(d),Ll(d,d.return);break;case 27:A_(d);case 26:case 5:zr(h,d,a),a&&l===null&&_&4&&b_(d),Ll(d,d.return);break;case 12:zr(h,d,a);break;case 31:zr(h,d,a),a&&_&4&&D_(h,d);break;case 13:zr(h,d,a),a&&_&4&&N_(h,d);break;case 22:d.memoizedState===null&&zr(h,d,a),Ll(d,d.return);break;case 30:break;default:zr(h,d,a)}i=i.sibling}}function Pd(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Sl(a))}function Ld(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Sl(e))}function Qi(e,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)M_(e,i,a,l),i=i.sibling}function M_(e,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Qi(e,i,a,l),h&2048&&Pl(9,i);break;case 1:Qi(e,i,a,l);break;case 3:Qi(e,i,a,l),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Sl(e)));break;case 12:if(h&2048){Qi(e,i,a,l),e=i.stateNode;try{var d=i.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(D){ce(i,i.return,D)}}else Qi(e,i,a,l);break;case 31:Qi(e,i,a,l);break;case 13:Qi(e,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?Qi(e,i,a,l):Ul(e,i):d._visibility&2?Qi(e,i,a,l):(d._visibility|=2,Eo(e,i,a,l,(i.subtreeFlags&10256)!==0||!1)),h&2048&&Pd(_,i);break;case 24:Qi(e,i,a,l),h&2048&&Ld(i.alternate,i);break;default:Qi(e,i,a,l)}}function Eo(e,i,a,l,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=e,_=i,b=a,D=l,j=_.flags;switch(_.tag){case 0:case 11:case 15:Eo(d,_,b,D,h),Pl(8,_);break;case 23:break;case 22:var J=_.stateNode;_.memoizedState!==null?J._visibility&2?Eo(d,_,b,D,h):Ul(d,_):(J._visibility|=2,Eo(d,_,b,D,h)),h&&j&2048&&Pd(_.alternate,_);break;case 24:Eo(d,_,b,D,h),h&&j&2048&&Ld(_.alternate,_);break;default:Eo(d,_,b,D,h)}i=i.sibling}}function Ul(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,l=i,h=l.flags;switch(l.tag){case 22:Ul(a,l),h&2048&&Pd(l.alternate,l);break;case 24:Ul(a,l),h&2048&&Ld(l.alternate,l);break;default:Ul(a,l)}i=i.sibling}}var zl=8192;function To(e,i,a){if(e.subtreeFlags&zl)for(e=e.child;e!==null;)V_(e,i,a),e=e.sibling}function V_(e,i,a){switch(e.tag){case 26:To(e,i,a),e.flags&zl&&e.memoizedState!==null&&oA(a,Ki,e.memoizedState,e.memoizedProps);break;case 5:To(e,i,a);break;case 3:case 4:var l=Ki;Ki=$c(e.stateNode.containerInfo),To(e,i,a),Ki=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=zl,zl=16777216,To(e,i,a),zl=l):To(e,i,a));break;default:To(e,i,a)}}function k_(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function jl(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];pn=l,L_(l,e)}k_(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)P_(e),e=e.sibling}function P_(e){switch(e.tag){case 0:case 11:case 15:jl(e),e.flags&2048&&Ts(9,e,e.return);break;case 3:jl(e);break;case 12:jl(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Pc(e)):jl(e);break;default:jl(e)}}function Pc(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];pn=l,L_(l,e)}k_(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Ts(8,i,i.return),Pc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Pc(i));break;default:Pc(i)}e=e.sibling}}function L_(e,i){for(;pn!==null;){var a=pn;switch(a.tag){case 0:case 11:case 15:Ts(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Sl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,pn=l;else t:for(a=e;pn!==null;){l=pn;var h=l.sibling,d=l.return;if(C_(l),l===a){pn=null;break t}if(h!==null){h.return=d,pn=h;break t}pn=d}}}var bS={getCacheForType:function(e){var i=Sn(Je),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a},cacheSignal:function(){return Sn(Je).controller.signal}},SS=typeof WeakMap=="function"?WeakMap:Map,se=0,_e=null,Ht=null,Qt=0,ue=0,ui=null,bs=!1,bo=!1,Ud=!1,jr=0,ze=0,Ss=0,Na=0,zd=0,ci=0,So=0,Bl=null,Wn=null,jd=!1,Lc=0,U_=0,Uc=1/0,zc=null,As=null,cn=0,ws=null,Ao=null,Br=0,Bd=0,qd=null,z_=null,ql=0,Hd=null;function hi(){return(se&2)!==0&&Qt!==0?Qt&-Qt:X.T!==null?$d():Ne()}function j_(){if(ci===0)if((Qt&536870912)===0||Wt){var e=zi;zi<<=1,(zi&3932160)===0&&(zi=262144),ci=e}else ci=536870912;return e=oi.current,e!==null&&(e.flags|=32),ci}function ti(e,i,a){(e===_e&&(ue===2||ue===9)||e.cancelPendingCommit!==null)&&(wo(e,0),Rs(e,Qt,ci,!1)),H(e,a),((se&2)===0||e!==_e)&&(e===_e&&((se&2)===0&&(Na|=a),ze===4&&Rs(e,Qt,ci,!1)),fr(e))}function B_(e,i,a){if((se&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&e.expiredLanes)===0||Pe(e,i),h=l?RS(e,i):Gd(e,i,!0),d=l;do{if(h===0){bo&&!l&&Rs(e,i,0,!1);break}else{if(a=e.current.alternate,d&&!AS(a)){h=Gd(e,i,!1),d=!1;continue}if(h===2){if(d=i,e.errorRecoveryDisabledLanes&d)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;t:{var b=e;h=Bl;var D=b.current.memoizedState.isDehydrated;if(D&&(wo(b,_).flags|=256),_=Gd(b,_,!1),_!==2){if(Ud&&!D){b.errorRecoveryDisabledLanes|=d,Na|=d,h=4;break t}d=Wn,Wn=h,d!==null&&(Wn===null?Wn=d:Wn.push.apply(Wn,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){wo(e,0),Rs(e,i,0,!0);break}t:{switch(l=e,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Rs(l,i,ci,!bs);break t;case 2:Wn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Lc+300-$e(),10<h)){if(Rs(l,i,ci,!bs),Se(l,0,!0)!==0)break t;Br=i,l.timeoutHandle=_v(q_.bind(null,l,a,Wn,zc,jd,i,ci,Na,So,bs,d,"Throttled",-0,0),h);break t}q_(l,a,Wn,zc,jd,i,ci,Na,So,bs,d,null,-0,0)}}break}while(!0);fr(e)}function q_(e,i,a,l,h,d,_,b,D,j,J,nt,q,Y){if(e.timeoutHandle=-1,nt=i.subtreeFlags,nt&8192||(nt&16785408)===16785408){nt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ji},V_(i,d,nt);var yt=(d&62914560)===d?Lc-$e():(d&4194048)===d?U_-$e():0;if(yt=lA(nt,yt),yt!==null){Br=d,e.cancelPendingCommit=yt(X_.bind(null,e,i,d,a,l,h,_,b,D,J,nt,null,q,Y)),Rs(e,d,_,!j);return}}X_(e,i,d,a,l,h,_,b,D)}function AS(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!si(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Rs(e,i,a,l){i&=~zd,i&=~Na,e.suspendedLanes|=i,e.pingedLanes&=~i,l&&(e.warmLanes|=i),l=e.expirationTimes;for(var h=i;0<h;){var d=31-Te(h),_=1<<d;l[d]=-1,h&=~_}a!==0&&fe(e,a,i)}function jc(){return(se&6)===0?(Hl(0),!1):!0}function Fd(){if(Ht!==null){if(ue===0)var e=Ht.return;else e=Ht,Nr=Ta=null,ad(e),mo=null,wl=0,e=Ht;for(;e!==null;)v_(e.alternate,e),e=e.return;Ht=null}}function wo(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,FS(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Br=0,Fd(),_e=e,Ht=a=Ir(e.current,null),Qt=i,ue=0,ui=null,bs=!1,bo=Pe(e,i),Ud=!1,So=ci=zd=Na=Ss=ze=0,Wn=Bl=null,jd=!1,(i&8)!==0&&(i|=i&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=i;0<l;){var h=31-Te(l),d=1<<h;i|=e[h],l&=~d}return jr=i,oc(),a}function H_(e,i){zt=null,X.H=Ml,i===go||i===mc?(i=sy(),ue=3):i===Yf?(i=sy(),ue=4):ue=i===bd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,ui=i,Ht===null&&(ze=1,Dc(e,Ai(i,e.current)))}function F_(){var e=oi.current;return e===null?!0:(Qt&4194048)===Qt?Ii===null:(Qt&62914560)===Qt||(Qt&536870912)!==0?e===Ii:!1}function G_(){var e=X.H;return X.H=Ml,e===null?Ml:e}function K_(){var e=X.A;return X.A=bS,e}function Bc(){ze=4,bs||(Qt&4194048)!==Qt&&oi.current!==null||(bo=!0),(Ss&134217727)===0&&(Na&134217727)===0||_e===null||Rs(_e,Qt,ci,!1)}function Gd(e,i,a){var l=se;se|=2;var h=G_(),d=K_();(_e!==e||Qt!==i)&&(zc=null,wo(e,i)),i=!1;var _=ze;t:do try{if(ue!==0&&Ht!==null){var b=Ht,D=ui;switch(ue){case 8:Fd(),_=6;break t;case 3:case 2:case 9:case 6:oi.current===null&&(i=!0);var j=ue;if(ue=0,ui=null,Ro(e,b,D,j),a&&bo){_=0;break t}break;default:j=ue,ue=0,ui=null,Ro(e,b,D,j)}}wS(),_=ze;break}catch(J){H_(e,J)}while(!0);return i&&e.shellSuspendCounter++,Nr=Ta=null,se=l,X.H=h,X.A=d,Ht===null&&(_e=null,Qt=0,oc()),_}function wS(){for(;Ht!==null;)Q_(Ht)}function RS(e,i){var a=se;se|=2;var l=G_(),h=K_();_e!==e||Qt!==i?(zc=null,Uc=$e()+500,wo(e,i)):bo=Pe(e,i);t:do try{if(ue!==0&&Ht!==null){i=Ht;var d=ui;e:switch(ue){case 1:ue=0,ui=null,Ro(e,i,d,1);break;case 2:case 9:if(iy(d)){ue=0,ui=null,Y_(i);break}i=function(){ue!==2&&ue!==9||_e!==e||(ue=7),fr(e)},d.then(i,i);break t;case 3:ue=7;break t;case 4:ue=5;break t;case 7:iy(d)?(ue=0,ui=null,Y_(i)):(ue=0,ui=null,Ro(e,i,d,7));break;case 5:var _=null;switch(Ht.tag){case 26:_=Ht.memoizedState;case 5:case 27:var b=Ht;if(_?Mv(_):b.stateNode.complete){ue=0,ui=null;var D=b.sibling;if(D!==null)Ht=D;else{var j=b.return;j!==null?(Ht=j,qc(j)):Ht=null}break e}}ue=0,ui=null,Ro(e,i,d,5);break;case 6:ue=0,ui=null,Ro(e,i,d,6);break;case 8:Fd(),ze=6;break t;default:throw Error(s(462))}}CS();break}catch(J){H_(e,J)}while(!0);return Nr=Ta=null,X.H=l,X.A=h,se=a,Ht!==null?0:(_e=null,Qt=0,oc(),ze)}function CS(){for(;Ht!==null&&!tr();)Q_(Ht)}function Q_(e){var i=y_(e.alternate,e,jr);e.memoizedProps=e.pendingProps,i===null?qc(e):Ht=i}function Y_(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=h_(a,i,i.pendingProps,i.type,void 0,Qt);break;case 11:i=h_(a,i,i.pendingProps,i.type.render,i.ref,Qt);break;case 5:ad(i);default:v_(a,i),i=Ht=Kp(i,jr),i=y_(a,i,jr)}e.memoizedProps=e.pendingProps,i===null?qc(e):Ht=i}function Ro(e,i,a,l){Nr=Ta=null,ad(i),mo=null,wl=0;var h=i.return;try{if(mS(e,h,i,a,Qt)){ze=1,Dc(e,Ai(a,e.current)),Ht=null;return}}catch(d){if(h!==null)throw Ht=h,d;ze=1,Dc(e,Ai(a,e.current)),Ht=null;return}i.flags&32768?(Wt||l===1?e=!0:bo||(Qt&536870912)!==0?e=!1:(bs=e=!0,(l===2||l===9||l===3||l===6)&&(l=oi.current,l!==null&&l.tag===13&&(l.flags|=16384))),$_(i,e)):qc(i)}function qc(e){var i=e;do{if((i.flags&32768)!==0){$_(i,bs);return}e=i.return;var a=_S(i.alternate,i,jr);if(a!==null){Ht=a;return}if(i=i.sibling,i!==null){Ht=i;return}Ht=i=e}while(i!==null);ze===0&&(ze=5)}function $_(e,i){do{var a=vS(e.alternate,e);if(a!==null){a.flags&=32767,Ht=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Ht=e;return}Ht=e=a}while(e!==null);ze=6,Ht=null}function X_(e,i,a,l,h,d,_,b,D){e.cancelPendingCommit=null;do Hc();while(cn!==0);if((se&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Mf,he(e,a,d,_,b,D),e===_e&&(Ht=_e=null,Qt=0),Ao=i,ws=e,Br=a,Bd=d,qd=h,z_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,OS(En,function(){return ev(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,h=at.p,at.p=2,_=se,se|=4;try{ES(e,i,a)}finally{se=_,at.p=h,X.T=l}}cn=1,Z_(),J_(),W_()}}function Z_(){if(cn===1){cn=0;var e=ws,i=Ao,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var l=at.p;at.p=2;var h=se;se|=4;try{O_(i,e);var d=ig,_=Lp(e.containerInfo),b=d.focusedElem,D=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&Pp(b.ownerDocument.documentElement,b)){if(D!==null&&If(b)){var j=D.start,J=D.end;if(J===void 0&&(J=j),"selectionStart"in b)b.selectionStart=j,b.selectionEnd=Math.min(J,b.value.length);else{var nt=b.ownerDocument||document,q=nt&&nt.defaultView||window;if(q.getSelection){var Y=q.getSelection(),yt=b.textContent.length,Ct=Math.min(D.start,yt),ye=D.end===void 0?Ct:Math.min(D.end,yt);!Y.extend&&Ct>ye&&(_=ye,ye=Ct,Ct=_);var P=kp(b,Ct),V=kp(b,ye);if(P&&V&&(Y.rangeCount!==1||Y.anchorNode!==P.node||Y.anchorOffset!==P.offset||Y.focusNode!==V.node||Y.focusOffset!==V.offset)){var z=nt.createRange();z.setStart(P.node,P.offset),Y.removeAllRanges(),Ct>ye?(Y.addRange(z),Y.extend(V.node,V.offset)):(z.setEnd(V.node,V.offset),Y.addRange(z))}}}}for(nt=[],Y=b;Y=Y.parentNode;)Y.nodeType===1&&nt.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<nt.length;b++){var tt=nt[b];tt.element.scrollLeft=tt.left,tt.element.scrollTop=tt.top}}eh=!!ng,ig=ng=null}finally{se=h,at.p=l,X.T=a}}e.current=i,cn=2}}function J_(){if(cn===2){cn=0;var e=ws,i=Ao,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var l=at.p;at.p=2;var h=se;se|=4;try{R_(e,i.alternate,i)}finally{se=h,at.p=l,X.T=a}}cn=3}}function W_(){if(cn===4||cn===3){cn=0,er();var e=ws,i=Ao,a=Br,l=z_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?cn=5:(cn=0,Ao=ws=null,tv(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(As=null),te(a),i=i.stateNode,Be&&typeof Be.onCommitFiberRoot=="function")try{Be.onCommitFiberRoot(qn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=X.T,h=at.p,at.p=2,X.T=null;try{for(var d=e.onRecoverableError,_=0;_<l.length;_++){var b=l[_];d(b.value,{componentStack:b.stack})}}finally{X.T=i,at.p=h}}(Br&3)!==0&&Hc(),fr(e),h=e.pendingLanes,(a&261930)!==0&&(h&42)!==0?e===Hd?ql++:(ql=0,Hd=e):ql=0,Hl(0)}}function tv(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Sl(i)))}function Hc(){return Z_(),J_(),W_(),ev()}function ev(){if(cn!==5)return!1;var e=ws,i=Bd;Bd=0;var a=te(Br),l=X.T,h=at.p;try{at.p=32>a?32:a,X.T=null,a=qd,qd=null;var d=ws,_=Br;if(cn=0,Ao=ws=null,Br=0,(se&6)!==0)throw Error(s(331));var b=se;if(se|=4,P_(d.current),M_(d,d.current,_,a),se=b,Hl(0,!1),Be&&typeof Be.onPostCommitFiberRoot=="function")try{Be.onPostCommitFiberRoot(qn,d)}catch{}return!0}finally{at.p=h,X.T=l,tv(e,i)}}function nv(e,i,a){i=Ai(a,i),i=Td(e.stateNode,i,2),e=_s(e,i,2),e!==null&&(H(e,2),fr(e))}function ce(e,i,a){if(e.tag===3)nv(e,e,a);else for(;i!==null;){if(i.tag===3){nv(i,e,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(As===null||!As.has(l))){e=Ai(a,e),a=i_(2),l=_s(i,a,2),l!==null&&(r_(a,l,i,e),H(l,2),fr(l));break}}i=i.return}}function Kd(e,i,a){var l=e.pingCache;if(l===null){l=e.pingCache=new SS;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Ud=!0,h.add(a),e=IS.bind(null,e,i,a),i.then(e,e))}function IS(e,i,a){var l=e.pingCache;l!==null&&l.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,_e===e&&(Qt&a)===a&&(ze===4||ze===3&&(Qt&62914560)===Qt&&300>$e()-Lc?(se&2)===0&&wo(e,0):zd|=a,So===Qt&&(So=0)),fr(e)}function iv(e,i){i===0&&(i=Xe()),e=_a(e,i),e!==null&&(H(e,i),fr(e))}function DS(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),iv(e,a)}function NS(e,i){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),iv(e,a)}function OS(e,i){return oe(e,i)}var Fc=null,Co=null,Qd=!1,Gc=!1,Yd=!1,Cs=0;function fr(e){e!==Co&&e.next===null&&(Co===null?Fc=Co=e:Co=Co.next=e),Gc=!0,Qd||(Qd=!0,MS())}function Hl(e,i){if(!Yd&&Gc){Yd=!0;do for(var a=!1,l=Fc;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var _=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-Te(42|e)+1)-1,d&=h&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,ov(l,d))}else d=Qt,d=Se(l,l===_e?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Pe(l,d)||(a=!0,ov(l,d));l=l.next}while(a);Yd=!1}}function xS(){rv()}function rv(){Gc=Qd=!1;var e=0;Cs!==0&&HS()&&(e=Cs);for(var i=$e(),a=null,l=Fc;l!==null;){var h=l.next,d=sv(l,i);d===0?(l.next=null,a===null?Fc=h:a.next=h,h===null&&(Co=a)):(a=l,(e!==0||(d&3)!==0)&&(Gc=!0)),l=h}cn!==0&&cn!==5||Hl(e),Cs!==0&&(Cs=0)}function sv(e,i){for(var a=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var _=31-Te(d),b=1<<_,D=h[_];D===-1?((b&a)===0||(b&l)!==0)&&(h[_]=mn(b,i)):D<=i&&(e.expiredLanes|=b),d&=~b}if(i=_e,a=Qt,a=Se(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===i&&(ue===2||ue===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&zn(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Pe(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(l!==null&&zn(l),te(a)){case 2:case 8:a=jn;break;case 32:a=En;break;case 268435456:a=br;break;default:a=En}return l=av.bind(null,e),a=oe(a,l),e.callbackPriority=i,e.callbackNode=a,i}return l!==null&&l!==null&&zn(l),e.callbackPriority=2,e.callbackNode=null,2}function av(e,i){if(cn!==0&&cn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Hc()&&e.callbackNode!==a)return null;var l=Qt;return l=Se(e,e===_e?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(B_(e,l,i),sv(e,$e()),e.callbackNode!=null&&e.callbackNode===a?av.bind(null,e):null)}function ov(e,i){if(Hc())return null;B_(e,i,!0)}function MS(){GS(function(){(se&6)!==0?oe(Tr,xS):rv()})}function $d(){if(Cs===0){var e=ho;e===0&&(e=Kn,Kn<<=1,(Kn&261888)===0&&(Kn=256)),Cs=e}return Cs}function lv(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Xa(""+e)}function uv(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function VS(e,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=lv((h[He]||null).action),_=l.submitter;_&&(i=(i=_[He]||null)?lv(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var b=new sr("action","action",null,l,h);e.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Cs!==0){var D=_?uv(h,_):new FormData(h);md(a,{pending:!0,data:D,method:h.method,action:d},null,D)}}else typeof d=="function"&&(b.preventDefault(),D=_?uv(h,_):new FormData(h),md(a,{pending:!0,data:D,method:h.method,action:d},d,D))},currentTarget:h}]})}}for(var Xd=0;Xd<xf.length;Xd++){var Zd=xf[Xd],kS=Zd.toLowerCase(),PS=Zd[0].toUpperCase()+Zd.slice(1);Gi(kS,"on"+PS)}Gi(jp,"onAnimationEnd"),Gi(Bp,"onAnimationIteration"),Gi(qp,"onAnimationStart"),Gi("dblclick","onDoubleClick"),Gi("focusin","onFocus"),Gi("focusout","onBlur"),Gi(J1,"onTransitionRun"),Gi(W1,"onTransitionStart"),Gi(tS,"onTransitionCancel"),Gi(Hp,"onTransitionEnd"),_i("onMouseEnter",["mouseout","mouseover"]),_i("onMouseLeave",["mouseout","mouseover"]),_i("onPointerEnter",["pointerout","pointerover"]),_i("onPointerLeave",["pointerout","pointerover"]),Qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fl));function cv(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],h=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var b=l[_],D=b.instance,j=b.currentTarget;if(b=b.listener,D!==d&&h.isPropagationStopped())break t;d=b,h.currentTarget=j;try{d(h)}catch(J){ac(J)}h.currentTarget=null,d=D}else for(_=0;_<l.length;_++){if(b=l[_],D=b.instance,j=b.currentTarget,b=b.listener,D!==d&&h.isPropagationStopped())break t;d=b,h.currentTarget=j;try{d(h)}catch(J){ac(J)}h.currentTarget=null,d=D}}}}function Ft(e,i){var a=i[ts];a===void 0&&(a=i[ts]=new Set);var l=e+"__bubble";a.has(l)||(hv(i,e,2,!1),a.add(l))}function Jd(e,i,a){var l=0;i&&(l|=4),hv(a,e,l,i)}var Kc="_reactListening"+Math.random().toString(36).slice(2);function Wd(e){if(!e[Kc]){e[Kc]=!0,sa.forEach(function(a){a!=="selectionchange"&&(LS.has(a)||Jd(a,!1,e),Jd(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Kc]||(i[Kc]=!0,Jd("selectionchange",!1,i))}}function hv(e,i,a,l){switch(jv(i)){case 2:var h=hA;break;case 8:h=fA;break;default:h=gg}a=h.bind(null,i,a,e),h=void 0,!ca||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function tg(e,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===h)break;if(_===4)for(_=l.return;_!==null;){var D=_.tag;if((D===3||D===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;b!==null;){if(_=pi(b),_===null)return;if(D=_.tag,D===5||D===6||D===26||D===27){l=d=_;continue t}b=b.parentNode}}l=l.return}ls(function(){var j=d,J=Ei(a),nt=[];t:{var q=Fp.get(e);if(q!==void 0){var Y=sr,yt=e;switch(e){case"keypress":if(fa(a)===0)break t;case"keydown":case"keyup":Y=ic;break;case"focusin":yt="focus",Y=ga;break;case"focusout":yt="blur",Y=ga;break;case"beforeblur":case"afterblur":Y=ga;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=ml;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Yu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=y;break;case jp:case Bp:case qp:Y=Xu;break;case Hp:Y=A;break;case"scroll":case"scrollend":Y=gl;break;case"wheel":Y=Q;break;case"copy":case"cut":case"paste":Y=Zu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Cr;break;case"toggle":case"beforetoggle":Y=Ut}var Ct=(i&4)!==0,ye=!Ct&&(e==="scroll"||e==="scrollend"),P=Ct?q!==null?q+"Capture":null:q;Ct=[];for(var V=j,z;V!==null;){var tt=V;if(z=tt.stateNode,tt=tt.tag,tt!==5&&tt!==26&&tt!==27||z===null||P===null||(tt=Bi(V,P),tt!=null&&Ct.push(Gl(V,tt,z))),ye)break;V=V.return}0<Ct.length&&(q=new Y(q,yt,null,a,J),nt.push({event:q,listeners:Ct}))}}if((i&7)===0){t:{if(q=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",q&&a!==hl&&(yt=a.relatedTarget||a.fromElement)&&(pi(yt)||yt[pt]))break t;if((Y||q)&&(q=J.window===J?J:(q=J.ownerDocument)?q.defaultView||q.parentWindow:window,Y?(yt=a.relatedTarget||a.toElement,Y=j,yt=yt?pi(yt):null,yt!==null&&(ye=u(yt),Ct=yt.tag,yt!==ye||Ct!==5&&Ct!==27&&Ct!==6)&&(yt=null)):(Y=null,yt=j),Y!==yt)){if(Ct=ml,tt="onMouseLeave",P="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(Ct=Cr,tt="onPointerLeave",P="onPointerEnter",V="pointer"),ye=Y==null?q:xn(Y),z=yt==null?q:xn(yt),q=new Ct(tt,V+"leave",Y,a,J),q.target=ye,q.relatedTarget=z,tt=null,pi(J)===j&&(Ct=new Ct(P,V+"enter",yt,a,J),Ct.target=z,Ct.relatedTarget=ye,tt=Ct),ye=tt,Y&&yt)e:{for(Ct=US,P=Y,V=yt,z=0,tt=P;tt;tt=Ct(tt))z++;tt=0;for(var St=V;St;St=Ct(St))tt++;for(;0<z-tt;)P=Ct(P),z--;for(;0<tt-z;)V=Ct(V),tt--;for(;z--;){if(P===V||V!==null&&P===V.alternate){Ct=P;break e}P=Ct(P),V=Ct(V)}Ct=null}else Ct=null;Y!==null&&fv(nt,q,Y,Ct,!1),yt!==null&&ye!==null&&fv(nt,ye,yt,Ct,!0)}}t:{if(q=j?xn(j):window,Y=q.nodeName&&q.nodeName.toLowerCase(),Y==="select"||Y==="input"&&q.type==="file")var ne=Dp;else if(Cp(q))if(Np)ne=$1;else{ne=Q1;var _t=K1}else Y=q.nodeName,!Y||Y.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?j&&$a(j.elementType)&&(ne=Dp):ne=Y1;if(ne&&(ne=ne(e,j))){Ip(nt,ne,a,J);break t}_t&&_t(e,q,j),e==="focusout"&&j&&q.type==="number"&&j.memoizedProps.value!=null&&ll(q,"number",q.value)}switch(_t=j?xn(j):window,e){case"focusin":(Cp(_t)||_t.contentEditable==="true")&&(io=_t,Df=j,El=null);break;case"focusout":El=Df=io=null;break;case"mousedown":Nf=!0;break;case"contextmenu":case"mouseup":case"dragend":Nf=!1,Up(nt,a,J);break;case"selectionchange":if(Z1)break;case"keydown":case"keyup":Up(nt,a,J)}var jt;if(re)t:{switch(e){case"compositionstart":var Yt="onCompositionStart";break t;case"compositionend":Yt="onCompositionEnd";break t;case"compositionupdate":Yt="onCompositionUpdate";break t}Yt=void 0}else no?ma(e,a)&&(Yt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Yt="onCompositionStart");Yt&&(lr&&a.locale!=="ko"&&(no||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&no&&(jt=dl()):(rr=J,fl="value"in rr?rr.value:rr.textContent,no=!0)),_t=Qc(j,Yt),0<_t.length&&(Yt=new or(Yt,e,null,a,J),nt.push({event:Yt,listeners:_t}),jt?Yt.data=jt:(jt=eo(a),jt!==null&&(Yt.data=jt)))),(jt=bi?q1(e,a):H1(e,a))&&(Yt=Qc(j,"onBeforeInput"),0<Yt.length&&(_t=new or("onBeforeInput","beforeinput",null,a,J),nt.push({event:_t,listeners:Yt}),_t.data=jt)),VS(nt,e,j,a,J)}cv(nt,i)})}function Gl(e,i,a){return{instance:e,listener:i,currentTarget:a}}function Qc(e,i){for(var a=i+"Capture",l=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Bi(e,a),h!=null&&l.unshift(Gl(e,h,d)),h=Bi(e,i),h!=null&&l.push(Gl(e,h,d))),e.tag===3)return l;e=e.return}return[]}function US(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function fv(e,i,a,l,h){for(var d=i._reactName,_=[];a!==null&&a!==l;){var b=a,D=b.alternate,j=b.stateNode;if(b=b.tag,D!==null&&D===l)break;b!==5&&b!==26&&b!==27||j===null||(D=j,h?(j=Bi(a,d),j!=null&&_.unshift(Gl(a,j,D))):h||(j=Bi(a,d),j!=null&&_.push(Gl(a,j,D)))),a=a.return}_.length!==0&&e.push({event:i,listeners:_})}var zS=/\r\n?/g,jS=/\u0000|\uFFFD/g;function dv(e){return(typeof e=="string"?e:""+e).replace(zS,`
`).replace(jS,"")}function gv(e,i){return i=dv(i),dv(e)===i}function pe(e,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||$n(e,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&$n(e,""+l);break;case"className":F(e,"class",l);break;case"tabIndex":F(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":F(e,a,l);break;case"style":cl(e,l,d);break;case"data":if(i!=="object"){F(e,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Xa(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&pe(e,i,"name",h.name,h,null),pe(e,i,"formEncType",h.formEncType,h,null),pe(e,i,"formMethod",h.formMethod,h,null),pe(e,i,"formTarget",h.formTarget,h,null)):(pe(e,i,"encType",h.encType,h,null),pe(e,i,"method",h.method,h,null),pe(e,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Xa(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=ji);break;case"onScroll":l!=null&&Ft("scroll",e);break;case"onScrollEnd":l!=null&&Ft("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Xa(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Ft("beforetoggle",e),Ft("toggle",e),L(e,"popover",l);break;case"xlinkActuate":B(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":B(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":B(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":B(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":B(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":B(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":B(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":B(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":B(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":L(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Qu.get(a)||a,L(e,a,l))}}function eg(e,i,a,l,h,d){switch(a){case"style":cl(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof l=="string"?$n(e,l):(typeof l=="number"||typeof l=="bigint")&&$n(e,""+l);break;case"onScroll":l!=null&&Ft("scroll",e);break;case"onScrollEnd":l!=null&&Ft("scrollend",e);break;case"onClick":l!=null&&(e.onclick=ji);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ns.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=e[He]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,l,h);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):L(e,a,l)}}}function wn(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ft("error",e),Ft("load",e);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:pe(e,i,d,_,a,null)}}h&&pe(e,i,"srcSet",a.srcSet,a,null),l&&pe(e,i,"src",a.src,a,null);return;case"input":Ft("invalid",e);var b=d=_=h=null,D=null,j=null;for(l in a)if(a.hasOwnProperty(l)){var J=a[l];if(J!=null)switch(l){case"name":h=J;break;case"type":_=J;break;case"checked":D=J;break;case"defaultChecked":j=J;break;case"value":d=J;break;case"defaultValue":b=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,i));break;default:pe(e,i,l,J,a,null)}}Fu(e,d,b,D,j,_,h,!1);return;case"select":Ft("invalid",e),l=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":l=b;default:pe(e,i,h,b,a,null)}i=d,a=_,e.multiple=!!l,i!=null?rs(e,!!l,i,!1):a!=null&&rs(e,!!l,a,!0);return;case"textarea":Ft("invalid",e),d=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":l=b;break;case"defaultValue":h=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:pe(e,i,_,b,a,null)}ss(e,l,h,d);return;case"option":for(D in a)a.hasOwnProperty(D)&&(l=a[D],l!=null)&&(D==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":pe(e,i,D,l,a,null));return;case"dialog":Ft("beforetoggle",e),Ft("toggle",e),Ft("cancel",e),Ft("close",e);break;case"iframe":case"object":Ft("load",e);break;case"video":case"audio":for(l=0;l<Fl.length;l++)Ft(Fl[l],e);break;case"image":Ft("error",e),Ft("load",e);break;case"details":Ft("toggle",e);break;case"embed":case"source":case"link":Ft("error",e),Ft("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(l=a[j],l!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:pe(e,i,j,l,a,null)}return;default:if($a(i)){for(J in a)a.hasOwnProperty(J)&&(l=a[J],l!==void 0&&eg(e,i,J,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&pe(e,i,b,l,a,null))}function BS(e,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,b=null,D=null,j=null,J=null;for(Y in a){var nt=a[Y];if(a.hasOwnProperty(Y)&&nt!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":D=nt;default:l.hasOwnProperty(Y)||pe(e,i,Y,null,l,nt)}}for(var q in l){var Y=l[q];if(nt=a[q],l.hasOwnProperty(q)&&(Y!=null||nt!=null))switch(q){case"type":d=Y;break;case"name":h=Y;break;case"checked":j=Y;break;case"defaultChecked":J=Y;break;case"value":_=Y;break;case"defaultValue":b=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:Y!==nt&&pe(e,i,q,Y,l,nt)}}Ya(e,_,b,D,j,J,d,h);return;case"select":Y=_=b=q=null;for(d in a)if(D=a[d],a.hasOwnProperty(d)&&D!=null)switch(d){case"value":break;case"multiple":Y=D;default:l.hasOwnProperty(d)||pe(e,i,d,null,l,D)}for(h in l)if(d=l[h],D=a[h],l.hasOwnProperty(h)&&(d!=null||D!=null))switch(h){case"value":q=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==D&&pe(e,i,h,d,l,D)}i=b,a=_,l=Y,q!=null?rs(e,!!a,q,!1):!!l!=!!a&&(i!=null?rs(e,!!a,i,!0):rs(e,!!a,a?[]:"",!1));return;case"textarea":Y=q=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:pe(e,i,b,null,l,h)}for(_ in l)if(h=l[_],d=a[_],l.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":q=h;break;case"defaultValue":Y=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&pe(e,i,_,h,l,d)}Gu(e,q,Y);return;case"option":for(var yt in a)q=a[yt],a.hasOwnProperty(yt)&&q!=null&&!l.hasOwnProperty(yt)&&(yt==="selected"?e.selected=!1:pe(e,i,yt,null,l,q));for(D in l)q=l[D],Y=a[D],l.hasOwnProperty(D)&&q!==Y&&(q!=null||Y!=null)&&(D==="selected"?e.selected=q&&typeof q!="function"&&typeof q!="symbol":pe(e,i,D,q,l,Y));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ct in a)q=a[Ct],a.hasOwnProperty(Ct)&&q!=null&&!l.hasOwnProperty(Ct)&&pe(e,i,Ct,null,l,q);for(j in l)if(q=l[j],Y=a[j],l.hasOwnProperty(j)&&q!==Y&&(q!=null||Y!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:pe(e,i,j,q,l,Y)}return;default:if($a(i)){for(var ye in a)q=a[ye],a.hasOwnProperty(ye)&&q!==void 0&&!l.hasOwnProperty(ye)&&eg(e,i,ye,void 0,l,q);for(J in l)q=l[J],Y=a[J],!l.hasOwnProperty(J)||q===Y||q===void 0&&Y===void 0||eg(e,i,J,q,l,Y);return}}for(var P in a)q=a[P],a.hasOwnProperty(P)&&q!=null&&!l.hasOwnProperty(P)&&pe(e,i,P,null,l,q);for(nt in l)q=l[nt],Y=a[nt],!l.hasOwnProperty(nt)||q===Y||q==null&&Y==null||pe(e,i,nt,q,l,Y)}function mv(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qS(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],d=h.transferSize,_=h.initiatorType,b=h.duration;if(d&&b&&mv(_)){for(_=0,b=h.responseEnd,l+=1;l<a.length;l++){var D=a[l],j=D.startTime;if(j>b)break;var J=D.transferSize,nt=D.initiatorType;J&&mv(nt)&&(D=D.responseEnd,_+=J*(D<b?1:(b-j)/(D-j)))}if(--l,i+=8*(d+_)/(h.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var ng=null,ig=null;function Yc(e){return e.nodeType===9?e:e.ownerDocument}function pv(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yv(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function rg(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var sg=null;function HS(){var e=window.event;return e&&e.type==="popstate"?e===sg?!1:(sg=e,!0):(sg=null,!1)}var _v=typeof setTimeout=="function"?setTimeout:void 0,FS=typeof clearTimeout=="function"?clearTimeout:void 0,vv=typeof Promise=="function"?Promise:void 0,GS=typeof queueMicrotask=="function"?queueMicrotask:typeof vv<"u"?function(e){return vv.resolve(null).then(e).catch(KS)}:_v;function KS(e){setTimeout(function(){throw e})}function Is(e){return e==="head"}function Ev(e,i){var a=i,l=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(h),Oo(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Kl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Kl(a);for(var d=a.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[mi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&Kl(e.ownerDocument.body);a=h}while(a);Oo(i)}function Tv(e,i){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function ag(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ag(a),es(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function QS(e,i,a,l){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[mi])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Di(e.nextSibling),e===null)break}return null}function YS(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Di(e.nextSibling),e===null))return null;return e}function bv(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Di(e.nextSibling),e===null))return null;return e}function og(e){return e.data==="$?"||e.data==="$~"}function lg(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function $S(e,i){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Di(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var ug=null;function Sv(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(i===0)return Di(e.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}e=e.nextSibling}return null}function Av(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return e;i--}else a!=="/$"&&a!=="/&"||i++}e=e.previousSibling}return null}function wv(e,i,a){switch(i=Yc(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Kl(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);es(e)}var Ni=new Map,Rv=new Set;function $c(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var qr=at.d;at.d={f:XS,r:ZS,D:JS,C:WS,L:tA,m:eA,X:iA,S:nA,M:rA};function XS(){var e=qr.f(),i=jc();return e||i}function ZS(e){var i=Hn(e);i!==null&&i.tag===5&&i.type==="form"?Hy(i):qr.r(e)}var Io=typeof document>"u"?null:document;function Cv(e,i,a){var l=Io;if(l&&typeof i=="string"&&i){var h=Yn(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Rv.has(h)||(Rv.add(h),e={rel:e,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),wn(i,"link",e),Le(i),l.head.appendChild(i)))}}function JS(e){qr.D(e),Cv("dns-prefetch",e,null)}function WS(e,i){qr.C(e,i),Cv("preconnect",e,i)}function tA(e,i,a){qr.L(e,i,a);var l=Io;if(l&&e&&i){var h='link[rel="preload"][as="'+Yn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Yn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Yn(a.imageSizes)+'"]')):h+='[href="'+Yn(e)+'"]';var d=h;switch(i){case"style":d=Do(e);break;case"script":d=No(e)}Ni.has(d)||(e=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Ni.set(d,e),l.querySelector(h)!==null||i==="style"&&l.querySelector(Ql(d))||i==="script"&&l.querySelector(Yl(d))||(i=l.createElement("link"),wn(i,"link",e),Le(i),l.head.appendChild(i)))}}function eA(e,i){qr.m(e,i);var a=Io;if(a&&e){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Yn(l)+'"][href="'+Yn(e)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=No(e)}if(!Ni.has(d)&&(e=T({rel:"modulepreload",href:e},i),Ni.set(d,e),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Yl(d)))return}l=a.createElement("link"),wn(l,"link",e),Le(l),a.head.appendChild(l)}}}function nA(e,i,a){qr.S(e,i,a);var l=Io;if(l&&e){var h=yi(l).hoistableStyles,d=Do(e);i=i||"default";var _=h.get(d);if(!_){var b={loading:0,preload:null};if(_=l.querySelector(Ql(d)))b.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Ni.get(d))&&cg(e,a);var D=_=l.createElement("link");Le(D),wn(D,"link",e),D._p=new Promise(function(j,J){D.onload=j,D.onerror=J}),D.addEventListener("load",function(){b.loading|=1}),D.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Xc(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:b},h.set(d,_)}}}function iA(e,i){qr.X(e,i);var a=Io;if(a&&e){var l=yi(a).hoistableScripts,h=No(e),d=l.get(h);d||(d=a.querySelector(Yl(h)),d||(e=T({src:e,async:!0},i),(i=Ni.get(h))&&hg(e,i),d=a.createElement("script"),Le(d),wn(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function rA(e,i){qr.M(e,i);var a=Io;if(a&&e){var l=yi(a).hoistableScripts,h=No(e),d=l.get(h);d||(d=a.querySelector(Yl(h)),d||(e=T({src:e,async:!0,type:"module"},i),(i=Ni.get(h))&&hg(e,i),d=a.createElement("script"),Le(d),wn(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Iv(e,i,a,l){var h=(h=bt.current)?$c(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Do(a.href),a=yi(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Do(a.href);var d=yi(h).hoistableStyles,_=d.get(e);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,_),(d=h.querySelector(Ql(e)))&&!d._p&&(_.instance=d,_.state.loading=5),Ni.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ni.set(e,a),d||sA(h,e,a,_.state))),i&&l===null)throw Error(s(528,""));return _}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=No(a),a=yi(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Do(e){return'href="'+Yn(e)+'"'}function Ql(e){return'link[rel="stylesheet"]['+e+"]"}function Dv(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function sA(e,i,a,l){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=e.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),wn(i,"link",a),Le(i),e.head.appendChild(i))}function No(e){return'[src="'+Yn(e)+'"]'}function Yl(e){return"script[async]"+e}function Nv(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=e.querySelector('style[data-href~="'+Yn(a.href)+'"]');if(l)return i.instance=l,Le(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Le(l),wn(l,"style",h),Xc(l,a.precedence,e),i.instance=l;case"stylesheet":h=Do(a.href);var d=e.querySelector(Ql(h));if(d)return i.state.loading|=4,i.instance=d,Le(d),d;l=Dv(a),(h=Ni.get(h))&&cg(l,h),d=(e.ownerDocument||e).createElement("link"),Le(d);var _=d;return _._p=new Promise(function(b,D){_.onload=b,_.onerror=D}),wn(d,"link",l),i.state.loading|=4,Xc(d,a.precedence,e),i.instance=d;case"script":return d=No(a.src),(h=e.querySelector(Yl(d)))?(i.instance=h,Le(h),h):(l=a,(h=Ni.get(d))&&(l=T({},a),hg(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),Le(h),wn(h,"link",l),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Xc(l,a.precedence,e));return i.instance}function Xc(e,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,_=0;_<l.length;_++){var b=l[_];if(b.dataset.precedence===i)d=b;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function cg(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function hg(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Zc=null;function Ov(e,i,a){if(Zc===null){var l=new Map,h=Zc=new Map;h.set(a,l)}else h=Zc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var d=a[h];if(!(d[mi]||d[Ve]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=e+_;var b=l.get(_);b?b.push(d):l.set(_,[d])}}return l}function xv(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function aA(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(e=i.disabled,typeof i.precedence=="string"&&e==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Mv(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function oA(e,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Do(l.href),d=i.querySelector(Ql(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=Jc.bind(e),i.then(e,e)),a.state.loading|=4,a.instance=d,Le(d);return}d=i.ownerDocument||i,l=Dv(l),(h=Ni.get(h))&&cg(l,h),d=d.createElement("link"),Le(d);var _=d;_._p=new Promise(function(b,D){_.onload=b,_.onerror=D}),wn(d,"link",l),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Jc.bind(e),i.addEventListener("load",a),i.addEventListener("error",a))}}var fg=0;function lA(e,i){return e.stylesheets&&e.count===0&&th(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&th(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+i);0<e.imgBytes&&fg===0&&(fg=62500*qS());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&th(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>fg?50:800)+i);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Jc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)th(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Wc=null;function th(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Wc=new Map,i.forEach(uA,e),Wc=null,Jc.call(e))}function uA(e,i){if(!(i.state.loading&4)){var a=Wc.get(e);if(a)var l=a.get(null);else{a=new Map,Wc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=i.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,h),a.set(_,h),this.count++,l=Jc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var $l={$$typeof:ut,Provider:null,Consumer:null,_currentValue:Tt,_currentValue2:Tt,_threadCount:0};function cA(e,i,a,l,h,d,_,b,D){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Me(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Me(0),this.hiddenUpdates=Me(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Vv(e,i,a,l,h,d,_,b,D,j,J,nt){return e=new cA(e,i,a,_,D,j,J,nt,b),i=1,d===!0&&(i|=24),d=ai(3,null,null,i),e.current=d,d.stateNode=e,i=Gf(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},$f(d),e}function kv(e){return e?(e=ao,e):ao}function Pv(e,i,a,l,h,d){h=kv(h),l.context===null?l.context=h:l.pendingContext=h,l=ys(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=_s(e,l,i),a!==null&&(ti(a,e,i),Cl(a,e,i))}function Lv(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function dg(e,i){Lv(e,i),(e=e.alternate)&&Lv(e,i)}function Uv(e){if(e.tag===13||e.tag===31){var i=_a(e,67108864);i!==null&&ti(i,e,67108864),dg(e,67108864)}}function zv(e){if(e.tag===13||e.tag===31){var i=hi();i=ln(i);var a=_a(e,i);a!==null&&ti(a,e,i),dg(e,i)}}var eh=!0;function hA(e,i,a,l){var h=X.T;X.T=null;var d=at.p;try{at.p=2,gg(e,i,a,l)}finally{at.p=d,X.T=h}}function fA(e,i,a,l){var h=X.T;X.T=null;var d=at.p;try{at.p=8,gg(e,i,a,l)}finally{at.p=d,X.T=h}}function gg(e,i,a,l){if(eh){var h=mg(l);if(h===null)tg(e,i,l,nh,a),Bv(e,l);else if(gA(h,e,i,a,l))l.stopPropagation();else if(Bv(e,l),i&4&&-1<dA.indexOf(e)){for(;h!==null;){var d=Hn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=be(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var D=1<<31-Te(_);b.entanglements[1]|=D,_&=~D}fr(d),(se&6)===0&&(Uc=$e()+500,Hl(0))}}break;case 31:case 13:b=_a(d,2),b!==null&&ti(b,d,2),jc(),dg(d,2)}if(d=mg(l),d===null&&tg(e,i,l,nh,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else tg(e,i,l,null,a)}}function mg(e){return e=Ei(e),pg(e)}var nh=null;function pg(e){if(nh=null,e=pi(e),e!==null){var i=u(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=f(i),e!==null)return e;e=null}else if(a===31){if(e=g(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return nh=e,null}function jv(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pi()){case Tr:return 2;case jn:return 8;case En:case Li:return 32;case br:return 268435456;default:return 32}default:return 32}}var yg=!1,Ds=null,Ns=null,Os=null,Xl=new Map,Zl=new Map,xs=[],dA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bv(e,i){switch(e){case"focusin":case"focusout":Ds=null;break;case"dragenter":case"dragleave":Ns=null;break;case"mouseover":case"mouseout":Os=null;break;case"pointerover":case"pointerout":Xl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zl.delete(i.pointerId)}}function Jl(e,i,a,l,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Hn(i),i!==null&&Uv(i)),e):(e.eventSystemFlags|=l,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function gA(e,i,a,l,h){switch(i){case"focusin":return Ds=Jl(Ds,e,i,a,l,h),!0;case"dragenter":return Ns=Jl(Ns,e,i,a,l,h),!0;case"mouseover":return Os=Jl(Os,e,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return Xl.set(d,Jl(Xl.get(d)||null,e,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Zl.set(d,Jl(Zl.get(d)||null,e,i,a,l,h)),!0}return!1}function qv(e){var i=pi(e.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){e.blockedOn=i,un(e.priority,function(){zv(a)});return}}else if(i===31){if(i=g(a),i!==null){e.blockedOn=i,un(e.priority,function(){zv(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ih(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=mg(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);hl=l,a.target.dispatchEvent(l),hl=null}else return i=Hn(a),i!==null&&Uv(i),e.blockedOn=a,!1;i.shift()}return!0}function Hv(e,i,a){ih(e)&&a.delete(i)}function mA(){yg=!1,Ds!==null&&ih(Ds)&&(Ds=null),Ns!==null&&ih(Ns)&&(Ns=null),Os!==null&&ih(Os)&&(Os=null),Xl.forEach(Hv),Zl.forEach(Hv)}function rh(e,i){e.blockedOn===i&&(e.blockedOn=null,yg||(yg=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,mA)))}var sh=null;function Fv(e){sh!==e&&(sh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){sh===e&&(sh=null);for(var i=0;i<e.length;i+=3){var a=e[i],l=e[i+1],h=e[i+2];if(typeof l!="function"){if(pg(l||a)===null)continue;break}var d=Hn(a);d!==null&&(e.splice(i,3),i-=3,md(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Oo(e){function i(D){return rh(D,e)}Ds!==null&&rh(Ds,e),Ns!==null&&rh(Ns,e),Os!==null&&rh(Os,e),Xl.forEach(i),Zl.forEach(i);for(var a=0;a<xs.length;a++){var l=xs[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<xs.length&&(a=xs[0],a.blockedOn===null);)qv(a),a.blockedOn===null&&xs.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],_=h[He]||null;if(typeof d=="function")_||Fv(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[He]||null)b=_.formAction;else if(pg(h)!==null)continue}else b=_.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),Fv(a)}}}function Gv(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function _g(e){this._internalRoot=e}ah.prototype.render=_g.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=hi();Pv(a,l,e,i,null,null)},ah.prototype.unmount=_g.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Pv(e.current,2,null,e,null,null),jc(),i[pt]=null}};function ah(e){this._internalRoot=e}ah.prototype.unstable_scheduleHydration=function(e){if(e){var i=Ne();e={blockedOn:null,target:e,priority:i};for(var a=0;a<xs.length&&i!==0&&i<xs[a].priority;a++);xs.splice(a,0,e),a===0&&qv(e)}};var Kv=t.version;if(Kv!=="19.2.3")throw Error(s(527,Kv,"19.2.3"));at.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=p(i),e=e!==null?E(e):null,e=e===null?null:e.stateNode,e};var pA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oh.isDisabled&&oh.supportsFiber)try{qn=oh.inject(pA),Be=oh}catch{}}return tu.createRoot=function(e,i){if(!o(e))throw Error(s(299));var a=!1,l="",h=Wy,d=t_,_=e_;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=Vv(e,1,!1,null,null,a,l,null,h,d,_,Gv),e[pt]=i.current,Wd(e),new _g(i)},tu.hydrateRoot=function(e,i,a){if(!o(e))throw Error(s(299));var l=!1,h="",d=Wy,_=t_,b=e_,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),i=Vv(e,1,!0,i,a??null,l,h,D,d,_,b,Gv),i.context=kv(null),a=i.current,l=hi(),l=ln(l),h=ys(l),h.callback=null,_s(a,h,l),a=l,i.current.lanes=a,H(i,a),fr(i),e[pt]=i.current,Wd(e),new ah(i)},tu.version="19.2.3",tu}var n0;function RA(){if(n0)return Tg.exports;n0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Tg.exports=wA(),Tg.exports}var CA=RA();const IA=()=>et.jsxs("div",{className:"fixed inset-0 -z-50 overflow-hidden pointer-events-none bg-[#020617]",children:[et.jsx("div",{className:"bg-blob opacity-20 w-[800px] h-[800px] -top-96 -left-96 bg-indigo-600 blur-[120px]"}),et.jsx("div",{className:"bg-blob opacity-30 w-[600px] h-[600px] top-1/2 -right-48 bg-pink-600 blur-[100px]",style:{animationDelay:"-5s",animationDuration:"25s"}}),et.jsx("div",{className:"bg-blob opacity-10 w-[500px] h-[500px] bottom-0 left-1/4 bg-cyan-400 blur-[80px]",style:{animationDelay:"-12s",animationDuration:"18s"}}),et.jsx("div",{className:"absolute inset-0 bg-radial-at-t from-transparent via-slate-950/40 to-slate-950"}),et.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"})]});const DA=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),NA=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),i0=r=>{const t=NA(r);return t.charAt(0).toUpperCase()+t.slice(1)},WE=(...r)=>r.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim(),OA=r=>{for(const t in r)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var xA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const MA=Z.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:f,...g},m)=>Z.createElement("svg",{ref:m,...xA,width:t,height:t,stroke:r,strokeWidth:s?Number(n)*24/Number(t):n,className:WE("lucide",o),...!u&&!OA(g)&&{"aria-hidden":"true"},...g},[...f.map(([p,E])=>Z.createElement(p,E)),...Array.isArray(u)?u:[u]]));const Zr=(r,t)=>{const n=Z.forwardRef(({className:s,...o},u)=>Z.createElement(MA,{ref:u,iconNode:t,className:WE(`lucide-${DA(i0(r))}`,`lucide-${r}`,s),...o}));return n.displayName=i0(r),n};const VA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],kA=Zr("arrow-left",VA);const PA=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],LA=Zr("copy",PA);const UA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],zA=Zr("loader-circle",UA);const jA=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],BA=Zr("log-in",jA);const qA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],HA=Zr("plus",qA);const FA=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],GA=Zr("share-2",FA);const KA=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],QA=Zr("trophy",KA);const YA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],$A=Zr("users",YA);const XA=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ZA=Zr("zap",XA),JA=()=>{};var r0={};const tT=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},WA=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)t[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];t[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],g=r[n++],m=((o&7)<<18|(u&63)<<12|(f&63)<<6|g&63)-65536;t[s++]=String.fromCharCode(55296+(m>>10)),t[s++]=String.fromCharCode(56320+(m&1023))}else{const u=r[n++],f=r[n++];t[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return t.join("")},eT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,g=f?r[o+1]:0,m=o+2<r.length,p=m?r[o+2]:0,E=u>>2,T=(u&3)<<4|g>>4;let S=(g&15)<<2|p>>6,O=p&63;m||(O=64,f||(S=64)),s.push(n[E],n[T],n[S],n[O])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(tT(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):WA(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],g=o<r.length?n[r.charAt(o)]:0;++o;const p=o<r.length?n[r.charAt(o)]:64;++o;const T=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||g==null||p==null||T==null)throw new tw;const S=u<<2|g>>4;if(s.push(S),p!==64){const O=g<<4&240|p>>2;if(s.push(O),T!==64){const K=p<<6&192|T;s.push(K)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class tw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ew=function(r){const t=tT(r);return eT.encodeByteArray(t,!0)},Oh=function(r){return ew(r).replace(/\./g,"")},nT=function(r){try{return eT.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function nw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const iw=()=>nw().__FIREBASE_DEFAULTS__,rw=()=>{if(typeof process>"u"||typeof r0>"u")return;const r=r0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},sw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&nT(r[1]);return t&&JSON.parse(t)},ef=()=>{try{return JA()||iw()||rw()||sw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},iT=r=>ef()?.emulatorHosts?.[r],aw=r=>{const t=iT(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},rT=()=>ef()?.config,sT=r=>ef()?.[`_${r}`];class ow{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}function Jo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aT(r){return(await fetch(r,{credentials:"include"})).ok}function lw(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Oh(JSON.stringify(n)),Oh(JSON.stringify(f)),""].join(".")}const uu={};function uw(){const r={prod:[],emulator:[]};for(const t of Object.keys(uu))uu[t]?r.emulator.push(t):r.prod.push(t);return r}function cw(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let s0=!1;function oT(r,t){if(typeof window>"u"||typeof document>"u"||!Jo(window.location.host)||uu[r]===t||uu[r]||s0)return;uu[r]=t;function n(S){return`__firebase__banner__${S}`}const s="__firebase__banner",u=uw().prod.length>0;function f(){const S=document.getElementById(s);S&&S.remove()}function g(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function m(S,O){S.setAttribute("width","24"),S.setAttribute("id",O),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{s0=!0,f()},S}function E(S,O){S.setAttribute("id",O),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=cw(s),O=n("text"),K=document.getElementById(O)||document.createElement("span"),G=n("learnmore"),$=document.getElementById(G)||document.createElement("a"),lt=n("preprendIcon"),ht=document.getElementById(lt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ut=S.element;g(ut),E($,G);const It=p();m(ht,lt),ut.append(ht,K,$,It),document.body.appendChild(ut)}u?(K.innerText="Preview backend disconnected.",ht.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ht.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function Un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Un())}function fw(){const r=ef()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gw(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function mw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pw(){const r=Un();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function yw(){return!fw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _w(){try{return typeof indexedDB=="object"}catch{return!1}}function vw(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(n){t(n)}})}const Ew="FirebaseError";class Jr extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=Ew,Object.setPrototypeOf(this,Jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nu.prototype.create)}}class Nu{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},o=`${this.service}/${t}`,u=this.errors[t],f=u?Tw(u,s):"Error",g=`${this.serviceName}: ${f} (${o}).`;return new Jr(o,g,s)}}function Tw(r,t){return r.replace(bw,(n,s)=>{const o=t[s];return o!=null?String(o):`<${s}?>`})}const bw=/\{\$([^}]+)}/g;function Sw(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function La(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const o of n){if(!s.includes(o))return!1;const u=r[o],f=t[o];if(a0(u)&&a0(f)){if(!La(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function a0(r){return r!==null&&typeof r=="object"}function Ou(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function Aw(r,t){const n=new ww(r,t);return n.subscribe.bind(n)}class ww{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let o;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Rw(t,["next","error","complete"])?o=t:o={next:t,error:n,complete:s},o.next===void 0&&(o.next=wg),o.error===void 0&&(o.error=wg),o.complete===void 0&&(o.complete=wg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rw(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function wg(){}function di(r){return r&&r._delegate?r._delegate:r}class Ua{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const xa="[DEFAULT]";class Cw{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new ow;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Dw(t))try{this.getOrInitializeService({instanceIdentifier:xa})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(t=xa){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=xa){return this.instances.has(t)}getOptions(t=xa){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);s===g&&f.resolve(o)}return o}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(t),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&t(u,s),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Iw(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=xa){return this.component?this.component.multipleInstances?t:xa:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Iw(r){return r===xa?void 0:r}function Dw(r){return r.instantiationMode==="EAGER"}class Nw{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Cw(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}var $t;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})($t||($t={}));const Ow={debug:$t.DEBUG,verbose:$t.VERBOSE,info:$t.INFO,warn:$t.WARN,error:$t.ERROR,silent:$t.SILENT},xw=$t.INFO,Mw={[$t.DEBUG]:"log",[$t.VERBOSE]:"log",[$t.INFO]:"info",[$t.WARN]:"warn",[$t.ERROR]:"error"},Vw=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),o=Mw[t];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Mm{constructor(t){this.name=t,this._logLevel=xw,this._logHandler=Vw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in $t))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Ow[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,$t.DEBUG,...t),this._logHandler(this,$t.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,$t.VERBOSE,...t),this._logHandler(this,$t.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,$t.INFO,...t),this._logHandler(this,$t.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,$t.WARN,...t),this._logHandler(this,$t.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,$t.ERROR,...t),this._logHandler(this,$t.ERROR,...t)}}const kw=(r,t)=>t.some(n=>r instanceof n);let o0,l0;function Pw(){return o0||(o0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Lw(){return l0||(l0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lT=new WeakMap,Jg=new WeakMap,uT=new WeakMap,Rg=new WeakMap,Vm=new WeakMap;function Uw(r){const t=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(Fs(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return t.then(n=>{n instanceof IDBCursor&&lT.set(n,r)}).catch(()=>{}),Vm.set(t,r),t}function zw(r){if(Jg.has(r))return;const t=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});Jg.set(r,t)}let Wg={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return Jg.get(r);if(t==="objectStoreNames")return r.objectStoreNames||uT.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fs(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function jw(r){Wg=r(Wg)}function Bw(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(Cg(this),t,...n);return uT.set(s,t.sort?t.sort():[t]),Fs(s)}:Lw().includes(r)?function(...t){return r.apply(Cg(this),t),Fs(lT.get(this))}:function(...t){return Fs(r.apply(Cg(this),t))}}function qw(r){return typeof r=="function"?Bw(r):(r instanceof IDBTransaction&&zw(r),kw(r,Pw())?new Proxy(r,Wg):r)}function Fs(r){if(r instanceof IDBRequest)return Uw(r);if(Rg.has(r))return Rg.get(r);const t=qw(r);return t!==r&&(Rg.set(r,t),Vm.set(t,r)),t}const Cg=r=>Vm.get(r);function Hw(r,t,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,t),g=Fs(f);return s&&f.addEventListener("upgradeneeded",m=>{s(Fs(f.result),m.oldVersion,m.newVersion,Fs(f.transaction),m)}),n&&f.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),g.then(m=>{u&&m.addEventListener("close",()=>u()),o&&m.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),g}const Fw=["get","getKey","getAll","getAllKeys","count"],Gw=["put","add","delete","clear"],Ig=new Map;function u0(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Ig.get(t))return Ig.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,o=Gw.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Fw.includes(n)))return;const u=async function(f,...g){const m=this.transaction(f,o?"readwrite":"readonly");let p=m.store;return s&&(p=p.index(g.shift())),(await Promise.all([p[n](...g),o&&m.done]))[0]};return Ig.set(t,u),u}jw(r=>({...r,get:(t,n,s)=>u0(t,n)||r.get(t,n,s),has:(t,n)=>!!u0(t,n)||r.has(t,n)}));class Kw{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Qw(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Qw(r){return r.getComponent()?.type==="VERSION"}const tm="@firebase/app",c0="0.14.6";const Kr=new Mm("@firebase/app"),Yw="@firebase/app-compat",$w="@firebase/analytics-compat",Xw="@firebase/analytics",Zw="@firebase/app-check-compat",Jw="@firebase/app-check",Ww="@firebase/auth",tR="@firebase/auth-compat",eR="@firebase/database",nR="@firebase/data-connect",iR="@firebase/database-compat",rR="@firebase/functions",sR="@firebase/functions-compat",aR="@firebase/installations",oR="@firebase/installations-compat",lR="@firebase/messaging",uR="@firebase/messaging-compat",cR="@firebase/performance",hR="@firebase/performance-compat",fR="@firebase/remote-config",dR="@firebase/remote-config-compat",gR="@firebase/storage",mR="@firebase/storage-compat",pR="@firebase/firestore",yR="@firebase/ai",_R="@firebase/firestore-compat",vR="firebase",ER="12.6.0";const em="[DEFAULT]",TR={[tm]:"fire-core",[Yw]:"fire-core-compat",[Xw]:"fire-analytics",[$w]:"fire-analytics-compat",[Jw]:"fire-app-check",[Zw]:"fire-app-check-compat",[Ww]:"fire-auth",[tR]:"fire-auth-compat",[eR]:"fire-rtdb",[nR]:"fire-data-connect",[iR]:"fire-rtdb-compat",[rR]:"fire-fn",[sR]:"fire-fn-compat",[aR]:"fire-iid",[oR]:"fire-iid-compat",[lR]:"fire-fcm",[uR]:"fire-fcm-compat",[cR]:"fire-perf",[hR]:"fire-perf-compat",[fR]:"fire-rc",[dR]:"fire-rc-compat",[gR]:"fire-gcs",[mR]:"fire-gcs-compat",[pR]:"fire-fst",[_R]:"fire-fst-compat",[yR]:"fire-vertex","fire-js":"fire-js",[vR]:"fire-js-all"};const _u=new Map,bR=new Map,nm=new Map;function h0(r,t){try{r.container.addComponent(t)}catch(n){Kr.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function Fo(r){const t=r.name;if(nm.has(t))return Kr.debug(`There were multiple attempts to register component ${t}.`),!1;nm.set(t,r);for(const n of _u.values())h0(n,r);for(const n of bR.values())h0(n,r);return!0}function km(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function Yi(r){return r==null?!1:r.settings!==void 0}const SR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gs=new Nu("app","Firebase",SR);class AR{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ua("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Gs.create("app-deleted",{appName:this._name})}}const Wo=ER;function cT(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s={name:em,automaticDataCollectionEnabled:!0,...t},o=s.name;if(typeof o!="string"||!o)throw Gs.create("bad-app-name",{appName:String(o)});if(n||(n=rT()),!n)throw Gs.create("no-options");const u=_u.get(o);if(u){if(La(n,u.options)&&La(s,u.config))return u;throw Gs.create("duplicate-app",{appName:o})}const f=new Nw(o);for(const m of nm.values())f.addComponent(m);const g=new AR(n,s,f);return _u.set(o,g),g}function hT(r=em){const t=_u.get(r);if(!t&&r===em&&rT())return cT();if(!t)throw Gs.create("no-app",{appName:r});return t}function f0(){return Array.from(_u.values())}function Ks(r,t,n){let s=TR[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const f=[`Unable to register library "${s}" with version "${t}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Kr.warn(f.join(" "));return}Fo(new Ua(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const wR="firebase-heartbeat-database",RR=1,vu="firebase-heartbeat-store";let Dg=null;function fT(){return Dg||(Dg=Hw(wR,RR,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(vu)}catch(n){console.warn(n)}}}}).catch(r=>{throw Gs.create("idb-open",{originalErrorMessage:r.message})})),Dg}async function CR(r){try{const n=(await fT()).transaction(vu),s=await n.objectStore(vu).get(dT(r));return await n.done,s}catch(t){if(t instanceof Jr)Kr.warn(t.message);else{const n=Gs.create("idb-get",{originalErrorMessage:t?.message});Kr.warn(n.message)}}}async function d0(r,t){try{const s=(await fT()).transaction(vu,"readwrite");await s.objectStore(vu).put(t,dT(r)),await s.done}catch(n){if(n instanceof Jr)Kr.warn(n.message);else{const s=Gs.create("idb-set",{originalErrorMessage:n?.message});Kr.warn(s.message)}}}function dT(r){return`${r.name}!${r.options.appId}`}const IR=1024,DR=30;class NR{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=g0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>DR){const o=MR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Kr.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=g0(),{heartbeatsToSend:n,unsentEntries:s}=OR(this._heartbeatsCache.heartbeats),o=Oh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Kr.warn(t),""}}}function g0(){return new Date().toISOString().substring(0,10)}function OR(r,t=IR){const n=[];let s=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),m0(n)>t){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),m0(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class xR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _w()?vw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await CR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return d0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return d0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function m0(r){return Oh(JSON.stringify({version:2,heartbeats:r})).length}function MR(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}function VR(r){Fo(new Ua("platform-logger",t=>new Kw(t),"PRIVATE")),Fo(new Ua("heartbeat",t=>new NR(t),"PRIVATE")),Ks(tm,c0,r),Ks(tm,c0,"esm2020"),Ks("fire-js","")}VR("");var p0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Qs,gT;(function(){var r;function t(R,w){function C(){}C.prototype=w.prototype,R.F=w.prototype,R.prototype=new C,R.prototype.constructor=R,R.D=function(x,N,k){for(var I=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)I[Gt-2]=arguments[Gt];return w.prototype[N].apply(x,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,w,C){C||(C=0);const x=Array(16);if(typeof w=="string")for(var N=0;N<16;++N)x[N]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(N=0;N<16;++N)x[N]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=R.g[0],C=R.g[1],N=R.g[2];let k=R.g[3],I;I=w+(k^C&(N^k))+x[0]+3614090360&4294967295,w=C+(I<<7&4294967295|I>>>25),I=k+(N^w&(C^N))+x[1]+3905402710&4294967295,k=w+(I<<12&4294967295|I>>>20),I=N+(C^k&(w^C))+x[2]+606105819&4294967295,N=k+(I<<17&4294967295|I>>>15),I=C+(w^N&(k^w))+x[3]+3250441966&4294967295,C=N+(I<<22&4294967295|I>>>10),I=w+(k^C&(N^k))+x[4]+4118548399&4294967295,w=C+(I<<7&4294967295|I>>>25),I=k+(N^w&(C^N))+x[5]+1200080426&4294967295,k=w+(I<<12&4294967295|I>>>20),I=N+(C^k&(w^C))+x[6]+2821735955&4294967295,N=k+(I<<17&4294967295|I>>>15),I=C+(w^N&(k^w))+x[7]+4249261313&4294967295,C=N+(I<<22&4294967295|I>>>10),I=w+(k^C&(N^k))+x[8]+1770035416&4294967295,w=C+(I<<7&4294967295|I>>>25),I=k+(N^w&(C^N))+x[9]+2336552879&4294967295,k=w+(I<<12&4294967295|I>>>20),I=N+(C^k&(w^C))+x[10]+4294925233&4294967295,N=k+(I<<17&4294967295|I>>>15),I=C+(w^N&(k^w))+x[11]+2304563134&4294967295,C=N+(I<<22&4294967295|I>>>10),I=w+(k^C&(N^k))+x[12]+1804603682&4294967295,w=C+(I<<7&4294967295|I>>>25),I=k+(N^w&(C^N))+x[13]+4254626195&4294967295,k=w+(I<<12&4294967295|I>>>20),I=N+(C^k&(w^C))+x[14]+2792965006&4294967295,N=k+(I<<17&4294967295|I>>>15),I=C+(w^N&(k^w))+x[15]+1236535329&4294967295,C=N+(I<<22&4294967295|I>>>10),I=w+(N^k&(C^N))+x[1]+4129170786&4294967295,w=C+(I<<5&4294967295|I>>>27),I=k+(C^N&(w^C))+x[6]+3225465664&4294967295,k=w+(I<<9&4294967295|I>>>23),I=N+(w^C&(k^w))+x[11]+643717713&4294967295,N=k+(I<<14&4294967295|I>>>18),I=C+(k^w&(N^k))+x[0]+3921069994&4294967295,C=N+(I<<20&4294967295|I>>>12),I=w+(N^k&(C^N))+x[5]+3593408605&4294967295,w=C+(I<<5&4294967295|I>>>27),I=k+(C^N&(w^C))+x[10]+38016083&4294967295,k=w+(I<<9&4294967295|I>>>23),I=N+(w^C&(k^w))+x[15]+3634488961&4294967295,N=k+(I<<14&4294967295|I>>>18),I=C+(k^w&(N^k))+x[4]+3889429448&4294967295,C=N+(I<<20&4294967295|I>>>12),I=w+(N^k&(C^N))+x[9]+568446438&4294967295,w=C+(I<<5&4294967295|I>>>27),I=k+(C^N&(w^C))+x[14]+3275163606&4294967295,k=w+(I<<9&4294967295|I>>>23),I=N+(w^C&(k^w))+x[3]+4107603335&4294967295,N=k+(I<<14&4294967295|I>>>18),I=C+(k^w&(N^k))+x[8]+1163531501&4294967295,C=N+(I<<20&4294967295|I>>>12),I=w+(N^k&(C^N))+x[13]+2850285829&4294967295,w=C+(I<<5&4294967295|I>>>27),I=k+(C^N&(w^C))+x[2]+4243563512&4294967295,k=w+(I<<9&4294967295|I>>>23),I=N+(w^C&(k^w))+x[7]+1735328473&4294967295,N=k+(I<<14&4294967295|I>>>18),I=C+(k^w&(N^k))+x[12]+2368359562&4294967295,C=N+(I<<20&4294967295|I>>>12),I=w+(C^N^k)+x[5]+4294588738&4294967295,w=C+(I<<4&4294967295|I>>>28),I=k+(w^C^N)+x[8]+2272392833&4294967295,k=w+(I<<11&4294967295|I>>>21),I=N+(k^w^C)+x[11]+1839030562&4294967295,N=k+(I<<16&4294967295|I>>>16),I=C+(N^k^w)+x[14]+4259657740&4294967295,C=N+(I<<23&4294967295|I>>>9),I=w+(C^N^k)+x[1]+2763975236&4294967295,w=C+(I<<4&4294967295|I>>>28),I=k+(w^C^N)+x[4]+1272893353&4294967295,k=w+(I<<11&4294967295|I>>>21),I=N+(k^w^C)+x[7]+4139469664&4294967295,N=k+(I<<16&4294967295|I>>>16),I=C+(N^k^w)+x[10]+3200236656&4294967295,C=N+(I<<23&4294967295|I>>>9),I=w+(C^N^k)+x[13]+681279174&4294967295,w=C+(I<<4&4294967295|I>>>28),I=k+(w^C^N)+x[0]+3936430074&4294967295,k=w+(I<<11&4294967295|I>>>21),I=N+(k^w^C)+x[3]+3572445317&4294967295,N=k+(I<<16&4294967295|I>>>16),I=C+(N^k^w)+x[6]+76029189&4294967295,C=N+(I<<23&4294967295|I>>>9),I=w+(C^N^k)+x[9]+3654602809&4294967295,w=C+(I<<4&4294967295|I>>>28),I=k+(w^C^N)+x[12]+3873151461&4294967295,k=w+(I<<11&4294967295|I>>>21),I=N+(k^w^C)+x[15]+530742520&4294967295,N=k+(I<<16&4294967295|I>>>16),I=C+(N^k^w)+x[2]+3299628645&4294967295,C=N+(I<<23&4294967295|I>>>9),I=w+(N^(C|~k))+x[0]+4096336452&4294967295,w=C+(I<<6&4294967295|I>>>26),I=k+(C^(w|~N))+x[7]+1126891415&4294967295,k=w+(I<<10&4294967295|I>>>22),I=N+(w^(k|~C))+x[14]+2878612391&4294967295,N=k+(I<<15&4294967295|I>>>17),I=C+(k^(N|~w))+x[5]+4237533241&4294967295,C=N+(I<<21&4294967295|I>>>11),I=w+(N^(C|~k))+x[12]+1700485571&4294967295,w=C+(I<<6&4294967295|I>>>26),I=k+(C^(w|~N))+x[3]+2399980690&4294967295,k=w+(I<<10&4294967295|I>>>22),I=N+(w^(k|~C))+x[10]+4293915773&4294967295,N=k+(I<<15&4294967295|I>>>17),I=C+(k^(N|~w))+x[1]+2240044497&4294967295,C=N+(I<<21&4294967295|I>>>11),I=w+(N^(C|~k))+x[8]+1873313359&4294967295,w=C+(I<<6&4294967295|I>>>26),I=k+(C^(w|~N))+x[15]+4264355552&4294967295,k=w+(I<<10&4294967295|I>>>22),I=N+(w^(k|~C))+x[6]+2734768916&4294967295,N=k+(I<<15&4294967295|I>>>17),I=C+(k^(N|~w))+x[13]+1309151649&4294967295,C=N+(I<<21&4294967295|I>>>11),I=w+(N^(C|~k))+x[4]+4149444226&4294967295,w=C+(I<<6&4294967295|I>>>26),I=k+(C^(w|~N))+x[11]+3174756917&4294967295,k=w+(I<<10&4294967295|I>>>22),I=N+(w^(k|~C))+x[2]+718787259&4294967295,N=k+(I<<15&4294967295|I>>>17),I=C+(k^(N|~w))+x[9]+3951481745&4294967295,R.g[0]=R.g[0]+w&4294967295,R.g[1]=R.g[1]+(N+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+N&4294967295,R.g[3]=R.g[3]+k&4294967295}s.prototype.v=function(R,w){w===void 0&&(w=R.length);const C=w-this.blockSize,x=this.C;let N=this.h,k=0;for(;k<w;){if(N==0)for(;k<=C;)o(this,R,k),k+=this.blockSize;if(typeof R=="string"){for(;k<w;)if(x[N++]=R.charCodeAt(k++),N==this.blockSize){o(this,x),N=0;break}}else for(;k<w;)if(x[N++]=R[k++],N==this.blockSize){o(this,x),N=0;break}}this.h=N,this.o+=w},s.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var w=1;w<R.length-8;++w)R[w]=0;w=this.o*8;for(var C=R.length-8;C<R.length;++C)R[C]=w&255,w/=256;for(this.v(R),R=Array(16),w=0,C=0;C<4;++C)for(let x=0;x<32;x+=8)R[w++]=this.g[C]>>>x&255;return R};function u(R,w){var C=g;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=w(R)}function f(R,w){this.h=w;const C=[];let x=!0;for(let N=R.length-1;N>=0;N--){const k=R[N]|0;x&&k==w||(C[N]=k,x=!1)}this.g=C}var g={};function m(R){return-128<=R&&R<128?u(R,function(w){return new f([w|0],w<0?-1:0)}):new f([R|0],R<0?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return T;if(R<0)return $(p(-R));const w=[];let C=1;for(let x=0;R>=C;x++)w[x]=R/C|0,C*=4294967296;return new f(w,0)}function E(R,w){if(R.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R.charAt(0)=="-")return $(E(R.substring(1),w));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=p(Math.pow(w,8));let x=T;for(let k=0;k<R.length;k+=8){var N=Math.min(8,R.length-k);const I=parseInt(R.substring(k,k+N),w);N<8?(N=p(Math.pow(w,N)),x=x.j(N).add(p(I))):(x=x.j(C),x=x.add(p(I)))}return x}var T=m(0),S=m(1),O=m(16777216);r=f.prototype,r.m=function(){if(G(this))return-$(this).m();let R=0,w=1;for(let C=0;C<this.g.length;C++){const x=this.i(C);R+=(x>=0?x:4294967296+x)*w,w*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(K(this))return"0";if(G(this))return"-"+$(this).toString(R);const w=p(Math.pow(R,6));var C=this;let x="";for(;;){const N=It(C,w).g;C=lt(C,N.j(w));let k=((C.g.length>0?C.g[0]:C.h)>>>0).toString(R);if(C=N,K(C))return k+x;for(;k.length<6;)k="0"+k;x=k+x}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function K(R){if(R.h!=0)return!1;for(let w=0;w<R.g.length;w++)if(R.g[w]!=0)return!1;return!0}function G(R){return R.h==-1}r.l=function(R){return R=lt(this,R),G(R)?-1:K(R)?0:1};function $(R){const w=R.g.length,C=[];for(let x=0;x<w;x++)C[x]=~R.g[x];return new f(C,~R.h).add(S)}r.abs=function(){return G(this)?$(this):this},r.add=function(R){const w=Math.max(this.g.length,R.g.length),C=[];let x=0;for(let N=0;N<=w;N++){let k=x+(this.i(N)&65535)+(R.i(N)&65535),I=(k>>>16)+(this.i(N)>>>16)+(R.i(N)>>>16);x=I>>>16,k&=65535,I&=65535,C[N]=I<<16|k}return new f(C,C[C.length-1]&-2147483648?-1:0)};function lt(R,w){return R.add($(w))}r.j=function(R){if(K(this)||K(R))return T;if(G(this))return G(R)?$(this).j($(R)):$($(this).j(R));if(G(R))return $(this.j($(R)));if(this.l(O)<0&&R.l(O)<0)return p(this.m()*R.m());const w=this.g.length+R.g.length,C=[];for(var x=0;x<2*w;x++)C[x]=0;for(x=0;x<this.g.length;x++)for(let N=0;N<R.g.length;N++){const k=this.i(x)>>>16,I=this.i(x)&65535,Gt=R.i(N)>>>16,we=R.i(N)&65535;C[2*x+2*N]+=I*we,ht(C,2*x+2*N),C[2*x+2*N+1]+=k*we,ht(C,2*x+2*N+1),C[2*x+2*N+1]+=I*Gt,ht(C,2*x+2*N+1),C[2*x+2*N+2]+=k*Gt,ht(C,2*x+2*N+2)}for(R=0;R<w;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=w;R<2*w;R++)C[R]=0;return new f(C,0)};function ht(R,w){for(;(R[w]&65535)!=R[w];)R[w+1]+=R[w]>>>16,R[w]&=65535,w++}function ut(R,w){this.g=R,this.h=w}function It(R,w){if(K(w))throw Error("division by zero");if(K(R))return new ut(T,T);if(G(R))return w=It($(R),w),new ut($(w.g),$(w.h));if(G(w))return w=It(R,$(w)),new ut($(w.g),w.h);if(R.g.length>30){if(G(R)||G(w))throw Error("slowDivide_ only works with positive integers.");for(var C=S,x=w;x.l(R)<=0;)C=wt(C),x=wt(x);var N=vt(C,1),k=vt(x,1);for(x=vt(x,2),C=vt(C,2);!K(x);){var I=k.add(x);I.l(R)<=0&&(N=N.add(C),k=I),x=vt(x,1),C=vt(C,1)}return w=lt(R,N.j(w)),new ut(N,w)}for(N=T;R.l(w)>=0;){for(C=Math.max(1,Math.floor(R.m()/w.m())),x=Math.ceil(Math.log(C)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),k=p(C),I=k.j(w);G(I)||I.l(R)>0;)C-=x,k=p(C),I=k.j(w);K(k)&&(k=S),N=N.add(k),R=lt(R,I)}return new ut(N,R)}r.B=function(R){return It(this,R).h},r.and=function(R){const w=Math.max(this.g.length,R.g.length),C=[];for(let x=0;x<w;x++)C[x]=this.i(x)&R.i(x);return new f(C,this.h&R.h)},r.or=function(R){const w=Math.max(this.g.length,R.g.length),C=[];for(let x=0;x<w;x++)C[x]=this.i(x)|R.i(x);return new f(C,this.h|R.h)},r.xor=function(R){const w=Math.max(this.g.length,R.g.length),C=[];for(let x=0;x<w;x++)C[x]=this.i(x)^R.i(x);return new f(C,this.h^R.h)};function wt(R){const w=R.g.length+1,C=[];for(let x=0;x<w;x++)C[x]=R.i(x)<<1|R.i(x-1)>>>31;return new f(C,R.h)}function vt(R,w){const C=w>>5;w%=32;const x=R.g.length-C,N=[];for(let k=0;k<x;k++)N[k]=w>0?R.i(k+C)>>>w|R.i(k+C+1)<<32-w:R.i(k+C);return new f(N,R.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,gT=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=p,f.fromString=E,Qs=f}).apply(typeof p0<"u"?p0:typeof self<"u"?self:typeof window<"u"?window:{});var lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var mT,iu,pT,ph,im,yT,_T,vT;(function(){var r,t=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof lh=="object"&&lh];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)t:{var v=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var U=c[A];if(!(U in v))break t;v=v[U]}c=c[c.length-1],A=v[c],y=y(A),y!=A&&y!=null&&t(v,c,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(y){var v=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&v.push([A,y[A]]);return v}});var u=u||{},f=this||self;function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function m(c,y,v){return c.call.apply(c.bind,arguments)}function p(c,y,v){return p=m,p.apply(null,arguments)}function E(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function T(c,y){function v(){}v.prototype=y.prototype,c.Z=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(A,U,Q){for(var ct=Array(arguments.length-2),Ut=2;Ut<arguments.length;Ut++)ct[Ut-2]=arguments[Ut];return y.prototype[U].apply(A,ct)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function O(c){const y=c.length;if(y>0){const v=Array(y);for(let A=0;A<y;A++)v[A]=c[A];return v}return[]}function K(c,y){for(let A=1;A<arguments.length;A++){const U=arguments[A];var v=typeof U;if(v=v!="object"?v:U?Array.isArray(U)?"array":v:"null",v=="array"||v=="object"&&typeof U.length=="number"){v=c.length||0;const Q=U.length||0;c.length=v+Q;for(let ct=0;ct<Q;ct++)c[v+ct]=U[ct]}else c.push(U)}}class G{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function $(c){f.setTimeout(()=>{throw c},0)}function lt(){var c=R;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class ht{constructor(){this.h=this.g=null}add(y,v){const A=ut.get();A.set(y,v),this.h?this.h.next=A:this.g=A,this.h=A}}var ut=new G(()=>new It,c=>c.reset());class It{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let wt,vt=!1,R=new ht,w=()=>{const c=Promise.resolve(void 0);wt=()=>{c.then(C)}};function C(){for(var c;c=lt();){try{c.h.call(c.g)}catch(v){$(v)}var y=ut;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}vt=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};f.addEventListener("test",v,y),f.removeEventListener("test",v,y)}catch{}return c})();function I(c){return/^[\s\xa0]*$/.test(c)}function Gt(c,y){N.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}T(Gt,N),Gt.prototype.init=function(c,y){const v=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Gt.Z.h.call(this)},Gt.prototype.h=function(){Gt.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var we="closure_listenable_"+(Math.random()*1e6|0),X=0;function at(c,y,v,A,U){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!A,this.ha=U,this.key=++X,this.da=this.fa=!1}function Tt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Pt(c,y,v){for(const A in c)y.call(v,c[A],A,c)}function Kt(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function M(c){const y={};for(const v in c)y[v]=c[v];return y}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ot(c,y){let v,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(v in A)c[v]=A[v];for(let Q=0;Q<W.length;Q++)v=W[Q],Object.prototype.hasOwnProperty.call(A,v)&&(c[v]=A[v])}}function ft(c){this.src=c,this.g={},this.h=0}ft.prototype.add=function(c,y,v,A,U){const Q=c.toString();c=this.g[Q],c||(c=this.g[Q]=[],this.h++);const ct=bt(c,y,A,U);return ct>-1?(y=c[ct],v||(y.fa=!1)):(y=new at(y,this.src,Q,!!A,U),y.fa=v,c.push(y)),y};function Rt(c,y){const v=y.type;if(v in c.g){var A=c.g[v],U=Array.prototype.indexOf.call(A,y,void 0),Q;(Q=U>=0)&&Array.prototype.splice.call(A,U,1),Q&&(Tt(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function bt(c,y,v,A){for(let U=0;U<c.length;++U){const Q=c[U];if(!Q.da&&Q.listener==y&&Q.capture==!!v&&Q.ha==A)return U}return-1}var Lt="closure_lm_"+(Math.random()*1e6|0),De={};function ae(c,y,v,A,U){if(Array.isArray(y)){for(let Q=0;Q<y.length;Q++)ae(c,y[Q],v,A,U);return null}return v=ki(v),c&&c[we]?c.J(y,v,g(A)?!!A.capture:!1,U):je(c,y,v,!1,A,U)}function je(c,y,v,A,U,Q){if(!y)throw Error("Invalid event type");const ct=g(U)?!!U.capture:!!U;let Ut=On(c);if(Ut||(c[Lt]=Ut=new ft(c)),v=Ut.add(y,v,A,ct,Q),v.proxy)return v;if(A=gi(),v.proxy=A,A.src=c,A.listener=v,c.addEventListener)k||(U=ct),U===void 0&&(U=!1),c.addEventListener(y.toString(),A,U);else if(c.attachEvent)c.attachEvent(Ye(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function gi(){function c(v){return y.call(c.src,c.listener,v)}const y=ri;return c}function Nn(c,y,v,A,U){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)Nn(c,y[Q],v,A,U);else A=g(A)?!!A.capture:!!A,v=ki(v),c&&c[we]?(c=c.i,Q=String(y).toString(),Q in c.g&&(y=c.g[Q],v=bt(y,v,A,U),v>-1&&(Tt(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete c.g[Q],c.h--)))):c&&(c=On(c))&&(y=c.g[y.toString()],c=-1,y&&(c=bt(y,v,A,U)),(v=c>-1?y[c]:null)&&Vi(v))}function Vi(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[we])Rt(y.i,c);else{var v=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(v,A,c.capture):y.detachEvent?y.detachEvent(Ye(v),A):y.addListener&&y.removeListener&&y.removeListener(A),(v=On(y))?(Rt(v,c),v.h==0&&(v.src=null,y[Lt]=null)):Tt(c)}}}function Ye(c){return c in De?De[c]:De[c]="on"+c}function ri(c,y){if(c.da)c=!0;else{y=new Gt(y,this);const v=c.listener,A=c.ha||c.src;c.fa&&Vi(c),c=v.call(A,y)}return c}function On(c){return c=c[Lt],c instanceof ft?c:null}var Wi="__closure_events_fn_"+(Math.random()*1e9>>>0);function ki(c){return typeof c=="function"?c:(c[Wi]||(c[Wi]=function(y){return c.handleEvent(y)}),c[Wi])}function Ee(){x.call(this),this.i=new ft(this),this.M=this,this.G=null}T(Ee,x),Ee.prototype[we]=!0,Ee.prototype.removeEventListener=function(c,y,v,A){Nn(this,c,y,v,A)};function oe(c,y){var v,A=c.G;if(A)for(v=[];A;A=A.G)v.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new N(y,c);else if(y instanceof N)y.target=y.target||c;else{var U=y;y=new N(A,c),ot(y,U)}U=!0;let Q,ct;if(v)for(ct=v.length-1;ct>=0;ct--)Q=y.g=v[ct],U=zn(Q,A,!0,y)&&U;if(Q=y.g=c,U=zn(Q,A,!0,y)&&U,U=zn(Q,A,!1,y)&&U,v)for(ct=0;ct<v.length;ct++)Q=y.g=v[ct],U=zn(Q,A,!1,y)&&U}Ee.prototype.N=function(){if(Ee.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const v=c.g[y];for(let A=0;A<v.length;A++)Tt(v[A]);delete c.g[y],c.h--}}this.G=null},Ee.prototype.J=function(c,y,v,A){return this.i.add(String(c),y,!1,v,A)},Ee.prototype.K=function(c,y,v,A){return this.i.add(String(c),y,!0,v,A)};function zn(c,y,v,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let U=!0;for(let Q=0;Q<y.length;++Q){const ct=y[Q];if(ct&&!ct.da&&ct.capture==v){const Ut=ct.listener,Fe=ct.ha||ct.src;ct.fa&&Rt(c.i,ct),U=Ut.call(Fe,A)!==!1&&U}}return U&&!A.defaultPrevented}function tr(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:f.setTimeout(c,y||0)}function er(c){c.g=tr(()=>{c.g=null,c.i&&(c.i=!1,er(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class $e extends x{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:er(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pi(c){x.call(this),this.h=c,this.g={}}T(Pi,x);var Tr=[];function jn(c){Pt(c.g,function(y,v){this.g.hasOwnProperty(v)&&Vi(y)},c),c.g={}}Pi.prototype.N=function(){Pi.Z.N.call(this),jn(this)},Pi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var En=f.JSON.stringify,Li=f.JSON.parse,br=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function Bn(){}function Sr(){}var qn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Be(){N.call(this,"d")}T(Be,N);function gn(){N.call(this,"c")}T(gn,N);var Te={},Ar=null;function Ui(){return Ar=Ar||new Ee}Te.Ia="serverreachability";function Wr(c){N.call(this,Te.Ia,c)}T(Wr,N);function Kn(c){const y=Ui();oe(y,new Wr(y))}Te.STAT_EVENT="statevent";function zi(c,y){N.call(this,Te.STAT_EVENT,c),this.stat=y}T(zi,N);function Bt(c){const y=Ui();oe(y,new zi(y,c))}Te.Ja="timingevent";function be(c,y){N.call(this,Te.Ja,c),this.size=y}T(be,N);function Se(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},y)}function Pe(){this.g=!0}Pe.prototype.ua=function(){this.g=!1};function mn(c,y,v,A,U,Q){c.info(function(){if(c.g)if(Q){var ct="",Ut=Q.split("&");for(let re=0;re<Ut.length;re++){var Fe=Ut[re].split("=");if(Fe.length>1){const Oe=Fe[0];Fe=Fe[1];const bi=Oe.split("_");ct=bi.length>=2&&bi[1]=="type"?ct+(Oe+"="+Fe+"&"):ct+(Oe+"=redacted&")}}}else ct=null;else ct=Q;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+y+`
`+v+`
`+ct})}function Xe(c,y,v,A,U,Q,ct){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+y+`
`+v+`
`+Q+" "+ct})}function Me(c,y,v,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+he(c,v)+(A?" "+A:"")})}function H(c,y){c.info(function(){return"TIMEOUT: "+y})}Pe.prototype.info=function(){};function he(c,y){if(!c.g)return y;if(!y)return null;try{const Q=JSON.parse(y);if(Q){for(c=0;c<Q.length;c++)if(Array.isArray(Q[c])){var v=Q[c];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var U=A[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ct=1;ct<A.length;ct++)A[ct]=""}}}}return En(Q)}catch{return y}}var fe={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},qe={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},st;function ln(){}T(ln,Bn),ln.prototype.g=function(){return new XMLHttpRequest},st=new ln;function te(c){return encodeURIComponent(String(c))}function Ne(c){var y=1;c=c.split(":");const v=[];for(;y>0&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function un(c,y,v,A){this.j=c,this.i=y,this.l=v,this.S=A||1,this.V=new Pi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new de}function de(){this.i=null,this.g="",this.h=!1}var Ve={},He={};function pt(c,y,v){c.M=1,c.A=vi(B(y)),c.u=v,c.R=!0,ts(c,null)}function ts(c,y){c.F=Date.now(),mi(c),c.B=B(c.A);var v=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),$a(v.i,"t",A),c.C=0,v=c.j.L,c.h=new de,c.g=ec(c.j,v?y:null,!c.u),c.P>0&&(c.O=new $e(p(c.Y,c,c.g),c.P)),y=c.V,v=c.g,A=c.ba;var U="readystatechange";Array.isArray(U)||(U&&(Tr[0]=U.toString()),U=Tr);for(let Q=0;Q<U.length;Q++){const ct=ae(v,U[Q],A||y.handleEvent,!1,y.h||y);if(!ct)break;y.g[ct.key]=ct}y=c.J?M(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),Kn(),mn(c.i,c.v,c.B,c.l,c.S,c.u)}un.prototype.ba=function(c){c=c.target;const y=this.O;y&&qi(c)==3?y.j():this.Y(c)},un.prototype.Y=function(c){try{if(c==this.g)t:{const Ut=qi(this.g),Fe=this.g.ya(),re=this.g.ca();if(!(Ut<3)&&(Ut!=3||this.g&&(this.h.h||this.g.la()||Tn(this.g)))){this.K||Ut!=4||Fe==7||(Fe==8||re<=0?Kn(3):Kn(2)),pi(this);var y=this.g.ca();this.X=y;var v=Ka(this);if(this.o=y==200,Xe(this.i,this.v,this.B,this.l,this.S,Ut,y),this.o){if(this.U&&!this.L){e:{if(this.g){var A,U=this.g;if((A=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(A)){var Q=A;break e}}Q=null}if(c=Q)Me(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yi(this,c);else{this.o=!1,this.m=3,Bt(12),xn(this),Hn(this);break t}}if(this.R){c=!0;let Oe;for(;!this.K&&this.C<v.length;)if(Oe=ra(this,v),Oe==He){Ut==4&&(this.m=4,Bt(14),c=!1),Me(this.i,this.l,null,"[Incomplete Response]");break}else if(Oe==Ve){this.m=4,Bt(15),Me(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else Me(this.i,this.l,Oe,null),yi(this,Oe);if(Qa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||v.length!=0||this.h.h||(this.m=1,Bt(16),c=!1),this.o=this.o&&c,!c)Me(this.i,this.l,v,"[Invalid Chunked Response]"),xn(this),Hn(this);else if(v.length>0&&!this.W){this.W=!0;var ct=this.j;ct.g==this&&ct.aa&&!ct.P&&(ct.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),pl(ct),ct.P=!0,Bt(11))}}else Me(this.i,this.l,v,null),yi(this,v);Ut==4&&xn(this),this.o&&!this.K&&(Ut==4?Zu(this.j,this):(this.o=!1,mi(this)))}else Rr(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,Bt(12)):(this.m=0,Bt(13)),xn(this),Hn(this)}}}catch{}};function Ka(c){if(!Qa(c))return c.g.la();const y=Tn(c.g);if(y==="")return"";let v="";const A=y.length,U=qi(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return xn(c),Hn(c),"";c.h.i=new f.TextDecoder}for(let Q=0;Q<A;Q++)c.h.h=!0,v+=c.h.i.decode(y[Q],{stream:!(U&&Q==A-1)});return y.length=0,c.h.g+=v,c.C=0,c.h.g}function Qa(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function ra(c,y){var v=c.C,A=y.indexOf(`
`,v);return A==-1?He:(v=Number(y.substring(v,A)),isNaN(v)?Ve:(A+=1,A+v>y.length?He:(y=y.slice(A,A+v),c.C=A+v,y)))}un.prototype.cancel=function(){this.K=!0,xn(this)};function mi(c){c.T=Date.now()+c.H,es(c,c.H)}function es(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Se(p(c.aa,c),y)}function pi(c){c.D&&(f.clearTimeout(c.D),c.D=null)}un.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(H(this.i,this.B),this.M!=2&&(Kn(),Bt(17)),xn(this),this.m=2,Hn(this)):es(this,this.T-c)};function Hn(c){c.j.I==0||c.K||Zu(c.j,c)}function xn(c){pi(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,jn(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function yi(c,y){try{var v=c.j;if(v.I!=0&&(v.g==c||_i(v.h,c))){if(!c.L&&_i(v.h,c)&&v.I==3){try{var A=v.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)to(v),cs(v);else break t;ga(v),Bt(18)}}else v.xa=U[1],0<v.xa-v.K&&U[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Se(p(v.Va,v),6e3));Qn(v.h)<=1&&v.ta&&(v.ta=void 0)}else or(v,11)}else if((c.L||v.g==c)&&to(v),!I(y))for(U=v.Ba.g.parse(y),y=0;y<U.length;y++){let re=U[y];const Oe=re[0];if(!(Oe<=v.K))if(v.K=Oe,re=re[1],v.I==2)if(re[0]=="c"){v.M=re[1],v.ba=re[2];const bi=re[3];bi!=null&&(v.ka=bi,v.j.info("VER="+v.ka));const lr=re[4];lr!=null&&(v.za=lr,v.j.info("SVER="+v.za));const Hi=re[5];Hi!=null&&typeof Hi=="number"&&Hi>0&&(A=1.5*Hi,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const Fi=c.g;if(Fi){const ma=Fi.g?Fi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ma){var Q=A.h;Q.g||ma.indexOf("spdy")==-1&&ma.indexOf("quic")==-1&&ma.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(aa(Q,Q.h),Q.h=null))}if(A.G){const eo=Fi.g?Fi.g.getResponseHeader("X-HTTP-Session-Id"):null;eo&&(A.wa=eo,qt(A.J,A.G,eo))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var ct=c;if(A.na=tc(A,A.L?A.ba:null,A.W),ct.L){is(A.h,ct);var Ut=ct,Fe=A.O;Fe&&(Ut.H=Fe),Ut.D&&(pi(Ut),mi(Ut)),A.g=ct}else $u(A);v.i.length>0&&ar(v)}else re[0]!="stop"&&re[0]!="close"||or(v,7);else v.I==3&&(re[0]=="stop"||re[0]=="close"?re[0]=="stop"?or(v,7):gl(v):re[0]!="noop"&&v.l&&v.l.qa(re),v.A=0)}}Kn(4)}catch{}}var Le=class{constructor(c,y){this.g=c,this.map=y}};function sa(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ns(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Qn(c){return c.h?1:c.g?c.g.size:0}function _i(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function aa(c,y){c.g?c.g.add(y):c.h=y}function is(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}sa.prototype.cancel=function(){if(this.i=oa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function oa(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.G);return y}return O(c.i)}var Ze=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function L(c,y){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const A=c[v].indexOf("=");let U,Q=null;A>=0?(U=c[v].substring(0,A),Q=c[v].substring(A+1)):U=c[v],y(U,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function F(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof F?(this.l=c.l,dt(this,c.j),this.o=c.o,this.g=c.g,Et(this,c.u),this.h=c.h,Jt(this,Qu(c.i)),this.m=c.m):c&&(y=String(c).match(Ze))?(this.l=!1,dt(this,y[1]||"",!0),this.o=nr(y[2]||""),this.g=nr(y[3]||"",!0),Et(this,y[4]),this.h=nr(y[5]||"",!0),Jt(this,y[6]||"",!0),this.m=nr(y[7]||"")):(this.l=!1,this.i=new ss(null,this.l))}F.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(la(y,Ya,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(la(y,Ya,!0),"@"),c.push(te(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(la(v,v.charAt(0)=="/"?ll:Fu,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",la(v,Gu)),c.join("")},F.prototype.resolve=function(c){const y=B(this);let v=!!c.j;v?dt(y,c.j):v=!!c.o,v?y.o=c.o:v=!!c.g,v?y.g=c.g:v=c.u!=null;var A=c.h;if(v)Et(y,c.u);else if(v=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var U=y.h.lastIndexOf("/");U!=-1&&(A=y.h.slice(0,U+1)+A)}if(U=A,U==".."||U==".")A="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){A=U.lastIndexOf("/",0)==0,U=U.split("/");const Q=[];for(let ct=0;ct<U.length;){const Ut=U[ct++];Ut=="."?A&&ct==U.length&&Q.push(""):Ut==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),A&&ct==U.length&&Q.push("")):(Q.push(Ut),A=!0)}A=Q.join("/")}else A=U}return v?y.h=A:v=c.i.toString()!=="",v?Jt(y,Qu(c.i)):v=!!c.m,v&&(y.m=c.m),y};function B(c){return new F(c)}function dt(c,y,v){c.j=v?nr(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Et(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Jt(c,y,v){y instanceof ss?(c.i=y,Xa(c.i,c.l)):(v||(y=la(y,rs)),c.i=new ss(y,c.l))}function qt(c,y,v){c.i.set(y,v)}function vi(c){return qt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function nr(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function la(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,Yn),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Yn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ya=/[#\/\?@]/g,Fu=/[#\?:]/g,ll=/[#\?]/g,rs=/[#\?@]/g,Gu=/#/g;function ss(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function $n(c){c.g||(c.g=new Map,c.h=0,c.i&&L(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}r=ss.prototype,r.add=function(c,y){$n(this),this.i=null,c=as(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function Ku(c,y){$n(c),y=as(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function ul(c,y){return $n(c),y=as(c,y),c.g.has(y)}r.forEach=function(c,y){$n(this),this.g.forEach(function(v,A){v.forEach(function(U){c.call(y,U,A,this)},this)},this)};function cl(c,y){$n(c);let v=[];if(typeof y=="string")ul(c,y)&&(v=v.concat(c.g.get(as(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)v=v.concat(c[y]);return v}r.set=function(c,y){return $n(this),this.i=null,c=as(this,c),ul(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=cl(this,c),c.length>0?String(c[0]):y):y};function $a(c,y,v){Ku(c,y),v.length>0&&(c.i=null,c.g.set(as(c,y),O(v)),c.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var v=y[A];const U=te(v);v=cl(this,v);for(let Q=0;Q<v.length;Q++){let ct=U;v[Q]!==""&&(ct+="="+te(v[Q])),c.push(ct)}}return this.i=c.join("&")};function Qu(c){const y=new ss;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function as(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Xa(c,y){y&&!c.j&&($n(c),c.i=null,c.g.forEach(function(v,A){const U=A.toLowerCase();A!=U&&(Ku(this,A),$a(this,U,v))},c)),c.j=y}function ji(c,y){const v=new Pe;if(f.Image){const A=new Image;A.onload=E(Ei,v,"TestLoadImage: loaded",!0,y,A),A.onerror=E(Ei,v,"TestLoadImage: error",!1,y,A),A.onabort=E(Ei,v,"TestLoadImage: abort",!1,y,A),A.ontimeout=E(Ei,v,"TestLoadImage: timeout",!1,y,A),f.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function hl(c,y){const v=new Pe,A=new AbortController,U=setTimeout(()=>{A.abort(),Ei(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(Q=>{clearTimeout(U),Q.ok?Ei(v,"TestPingServer: ok",!0,y):Ei(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(U),Ei(v,"TestPingServer: error",!1,y)})}function Ei(c,y,v,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(v)}catch{}}function os(){this.g=new br}function ir(c){this.i=c.Sb||null,this.h=c.ab||!1}T(ir,Bn),ir.prototype.g=function(){return new ua(this.i,this.h)};function ua(c,y){Ee.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(ua,Ee),r=ua.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,Bi(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||f).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ls(this)),this.readyState=0},r.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Bi(this)),this.g&&(this.readyState=3,Bi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Za(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Za(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}r.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?ls(this):Bi(this),this.readyState==3&&Za(this)}},r.Oa=function(c){this.g&&(this.response=this.responseText=c,ls(this))},r.Na=function(c){this.g&&(this.response=c,ls(this))},r.ga=function(){this.g&&ls(this)};function ls(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Bi(c)}r.setRequestHeader=function(c,y){this.A.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function Bi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ua.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ti(c){let y="";return Pt(c,function(v,A){y+=A,y+=":",y+=v,y+=`\r
`}),y}function ca(c,y,v){t:{for(A in v){var A=!1;break t}A=!0}A||(v=Ti(v),typeof c=="string"?v!=null&&te(v):qt(c,y,v))}function ge(c){Ee.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(ge,Ee);var rr=/^https?$/i,fl=["POST","PUT"];r=ge.prototype,r.Fa=function(c){this.H=c},r.ea=function(c,y,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():st.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Q){ha(this,Q);return}if(c=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)v.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Q of A.keys())v.set(Q,A.get(Q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(Q=>Q.toLowerCase()=="content-type"),U=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(fl,y,void 0)>=0)||A||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ct]of v)this.g.setRequestHeader(Q,ct);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(Q){ha(this,Q)}};function ha(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,dl(c),wr(c)}function dl(c){c.A||(c.A=!0,oe(c,"complete"),oe(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,oe(this,"complete"),oe(this,"abort"),wr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wr(this,!0)),ge.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?fa(this):this.Xa())},r.Xa=function(){fa(this)};function fa(c){if(c.h&&typeof u<"u"){if(c.v&&qi(c)==4)setTimeout(c.Ca.bind(c),0);else if(oe(c,"readystatechange"),qi(c)==4){c.h=!1;try{const Q=c.ca();t:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break t;default:y=!1}var v;if(!(v=y)){var A;if(A=Q===0){let ct=String(c.D).match(Ze)[1]||null;!ct&&f.self&&f.self.location&&(ct=f.self.location.protocol.slice(0,-1)),A=!rr.test(ct?ct.toLowerCase():"")}v=A}if(v)oe(c,"complete"),oe(c,"success");else{c.o=6;try{var U=qi(c)>2?c.g.statusText:""}catch{U=""}c.l=U+" ["+c.ca()+"]",dl(c)}}finally{wr(c)}}}}function wr(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,y||oe(c,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function qi(c){return c.g?c.g.readyState:0}r.ca=function(){try{return qi(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Li(y)}};function Tn(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Rr(c){const y={};c=(c.g&&qi(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(I(c[A]))continue;var v=Ne(c[A]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Q=y[U]||[];y[U]=Q,Q.push(v)}Kt(y,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function sr(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function us(c){this.za=0,this.i=[],this.j=new Pe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=sr("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=sr("baseRetryDelayMs",5e3,c),this.Za=sr("retryDelaySeedMs",1e4,c),this.Ta=sr("forwardChannelMaxRetries",2,c),this.va=sr("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new sa(c&&c.concurrentRequestLimit),this.Ba=new os,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=us.prototype,r.ka=8,r.I=1,r.connect=function(c,y,v,A){Bt(0),this.W=c,this.H=y||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=tc(this,null,this.W),ar(this)};function gl(c){if(Ja(c),c.I==3){var y=c.V++,v=B(c.J);if(qt(v,"SID",c.M),qt(v,"RID",y),qt(v,"TYPE","terminate"),da(c,v),y=new un(c,c.j,y),y.M=2,y.A=vi(B(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=y.A,v=!0),v||(y.g=ec(y.j,null),y.g.ea(y.A)),y.F=Date.now(),mi(y)}Wu(c)}function cs(c){c.g&&(pl(c),c.g.cancel(),c.g=null)}function Ja(c){cs(c),c.v&&(f.clearTimeout(c.v),c.v=null),to(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function ar(c){if(!ns(c.h)&&!c.m){c.m=!0;var y=c.Ea;wt||w(),vt||(wt(),vt=!0),R.add(y,c),c.D=0}}function Wa(c,y){return Qn(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Se(p(c.Ea,c,y),Ju(c,c.D)),c.D++,!0)}r.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const U=new un(this,this.j,c);let Q=this.o;if(this.U&&(Q?(Q=M(Q),ot(Q,this.U)):Q=this.U),this.u!==null||this.R||(U.J=Q,Q=null),this.S)t:{for(var y=0,v=0;v<this.i.length;v++){e:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=v;break t}if(y===4096||v===this.i.length-1){y=v+1;break t}}y=1e3}else y=1e3;y=Yu(this,U,y),v=B(this.J),qt(v,"RID",c),qt(v,"CVER",22),this.G&&qt(v,"X-HTTP-Session-Id",this.G),da(this,v),Q&&(this.R?y="headers="+te(Ti(Q))+"&"+y:this.u&&ca(v,this.u,Q)),aa(this.h,U),this.Ra&&qt(v,"TYPE","init"),this.S?(qt(v,"$req",y),qt(v,"SID","null"),U.U=!0,pt(U,v,null)):pt(U,v,y),this.I=2}}else this.I==3&&(c?ml(this,c):this.i.length==0||ns(this.h)||ml(this))};function ml(c,y){var v;y?v=y.l:v=c.V++;const A=B(c.J);qt(A,"SID",c.M),qt(A,"RID",v),qt(A,"AID",c.K),da(c,A),c.u&&c.o&&ca(A,c.u,c.o),v=new un(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Yu(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),aa(c.h,v),pt(v,A,y)}function da(c,y){c.H&&Pt(c.H,function(v,A){qt(y,A,v)}),c.l&&Pt({},function(v,A){qt(y,A,v)})}function Yu(c,y,v){v=Math.min(c.i.length,v);const A=c.l?p(c.l.Ka,c.l,c):null;t:{var U=c.i;let Ut=-1;for(;;){const Fe=["count="+v];Ut==-1?v>0?(Ut=U[0].g,Fe.push("ofs="+Ut)):Ut=0:Fe.push("ofs="+Ut);let re=!0;for(let Oe=0;Oe<v;Oe++){var Q=U[Oe].g;const bi=U[Oe].map;if(Q-=Ut,Q<0)Ut=Math.max(0,U[Oe].g-100),re=!1;else try{Q="req"+Q+"_"||"";try{var ct=bi instanceof Map?bi:Object.entries(bi);for(const[lr,Hi]of ct){let Fi=Hi;g(Hi)&&(Fi=En(Hi)),Fe.push(Q+lr+"="+encodeURIComponent(Fi))}}catch(lr){throw Fe.push(Q+"type="+encodeURIComponent("_badmap")),lr}}catch{A&&A(bi)}}if(re){ct=Fe.join("&");break t}}ct=void 0}return c=c.i.splice(0,v),y.G=c,ct}function $u(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;wt||w(),vt||(wt(),vt=!0),R.add(y,c),c.A=0}}function ga(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Se(p(c.Da,c),Ju(c,c.A)),c.A++,!0)}r.Da=function(){if(this.v=null,Xu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Se(p(this.Wa,this),c)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Bt(10),cs(this),Xu(this))};function pl(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function Xu(c){c.g=new un(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=B(c.na);qt(y,"RID","rpc"),qt(y,"SID",c.M),qt(y,"AID",c.K),qt(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&qt(y,"TO",c.ia),qt(y,"TYPE","xmlhttp"),da(c,y),c.u&&c.o&&ca(y,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=vi(B(y)),v.u=null,v.R=!0,ts(v,c)}r.Va=function(){this.C!=null&&(this.C=null,cs(this),ga(this),Bt(19))};function to(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function Zu(c,y){var v=null;if(c.g==y){to(c),pl(c),c.g=null;var A=2}else if(_i(c.h,y))v=y.G,is(c.h,y),A=1;else return;if(c.I!=0){if(y.o)if(A==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var U=c.D;A=Ui(),oe(A,new be(A,v)),ar(c)}else $u(c);else if(U=y.m,U==3||U==0&&y.X>0||!(A==1&&Wa(c,y)||A==2&&ga(c)))switch(v&&v.length>0&&(y=c.h,y.i=y.i.concat(v)),U){case 1:or(c,5);break;case 4:or(c,10);break;case 3:or(c,6);break;default:or(c,2)}}}function Ju(c,y){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*y}function or(c,y){if(c.j.info("Error code "+y),y==2){var v=p(c.bb,c),A=c.Ua;const U=!A;A=new F(A||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||dt(A,"https"),vi(A),U?ji(A.toString(),v):hl(A.toString(),v)}else Bt(2);c.I=0,c.l&&c.l.pa(y),Wu(c),Ja(c)}r.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function Wu(c){if(c.I=0,c.ja=[],c.l){const y=oa(c.h);(y.length!=0||c.i.length!=0)&&(K(c.ja,y),K(c.ja,c.i),c.h.i.length=0,O(c.i),c.i.length=0),c.l.oa()}}function tc(c,y,v){var A=v instanceof F?B(v):new F(v);if(A.g!="")y&&(A.g=y+"."+A.g),Et(A,A.u);else{var U=f.location;A=U.protocol,y=y?y+"."+U.hostname:U.hostname,U=+U.port;const Q=new F(null);A&&dt(Q,A),y&&(Q.g=y),U&&Et(Q,U),v&&(Q.h=v),A=Q}return v=c.G,y=c.wa,v&&y&&qt(A,v,y),qt(A,"VER",c.ka),da(c,A),A}function ec(c,y,v){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new ge(new ir({ab:v})):new ge(c.ma),y.Fa(c.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function nc(){}r=nc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function hs(){}hs.prototype.g=function(c,y){return new Fn(c,y)};function Fn(c,y){Ee.call(this),this.g=new us(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!I(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Cr(this)}T(Fn,Ee),Fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){gl(this.g)},Fn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=En(c),c=v);y.i.push(new Le(y.Ya++,c)),y.I==3&&ar(y)},Fn.prototype.N=function(){this.g.l=null,delete this.j,gl(this.g),delete this.g,Fn.Z.N.call(this)};function ic(c){Be.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){t:{for(const v in y){c=v;break t}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}T(ic,Be);function rc(){gn.call(this),this.status=1}T(rc,gn);function Cr(c){this.g=c}T(Cr,nc),Cr.prototype.ra=function(){oe(this.g,"a")},Cr.prototype.qa=function(c){oe(this.g,new ic(c))},Cr.prototype.pa=function(c){oe(this.g,new rc)},Cr.prototype.oa=function(){oe(this.g,"b")},hs.prototype.createWebChannel=hs.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,vT=function(){return new hs},_T=function(){return Ui()},yT=Te,im={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},fe.NO_ERROR=0,fe.TIMEOUT=8,fe.HTTP_ERROR=6,ph=fe,qe.COMPLETE="complete",pT=qe,Sr.EventType=qn,qn.OPEN="a",qn.CLOSE="b",qn.ERROR="c",qn.MESSAGE="d",Ee.prototype.listen=Ee.prototype.J,iu=Sr,ge.prototype.listenOnce=ge.prototype.K,ge.prototype.getLastError=ge.prototype.Ha,ge.prototype.getLastErrorCode=ge.prototype.ya,ge.prototype.getStatus=ge.prototype.ca,ge.prototype.getResponseJson=ge.prototype.La,ge.prototype.getResponseText=ge.prototype.la,ge.prototype.send=ge.prototype.ea,ge.prototype.setWithCredentials=ge.prototype.Fa,mT=ge}).apply(typeof lh<"u"?lh:typeof self<"u"?self:typeof window<"u"?window:{});const y0="@firebase/firestore",_0="4.9.3";class Pn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Pn.UNAUTHENTICATED=new Pn(null),Pn.GOOGLE_CREDENTIALS=new Pn("google-credentials-uid"),Pn.FIRST_PARTY=new Pn("first-party-uid"),Pn.MOCK_USER=new Pn("mock-user");let tl="12.7.0";const za=new Mm("@firebase/firestore");function xo(){return za.logLevel}function gt(r,...t){if(za.logLevel<=$t.DEBUG){const n=t.map(Pm);za.debug(`Firestore (${tl}): ${r}`,...n)}}function Qr(r,...t){if(za.logLevel<=$t.ERROR){const n=t.map(Pm);za.error(`Firestore (${tl}): ${r}`,...n)}}function Go(r,...t){if(za.logLevel<=$t.WARN){const n=t.map(Pm);za.warn(`Firestore (${tl}): ${r}`,...n)}}function Pm(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function Dt(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,ET(r,s,n)}function ET(r,t,n){let s=`FIRESTORE (${tl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Qr(s),new Error(s)}function le(r,t,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||ET(t,o,s)}function kt(r,t){return r}const it={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class mt extends Jr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Va{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}class TT{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class kR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Pn.UNAUTHENTICATED)))}shutdown(){}}class PR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class LR{constructor(t){this.t=t,this.currentUser=Pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){le(this.o===void 0,42304);let s=this.i;const o=m=>this.i!==s?(s=this.i,n(m)):Promise.resolve();let u=new Va;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Va,t.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const m=u;t.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},g=m=>{gt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((m=>g(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?g(m):(gt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Va)}}),0),f()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(gt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(le(typeof s.accessToken=="string",31837,{l:s}),new TT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return le(t===null||typeof t=="string",2055,{h:t}),new Pn(t)}}class UR{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Pn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class zR{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new UR(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Pn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class v0{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jR{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yi(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){le(this.o===void 0,3512);const s=u=>{u.error!=null&&gt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,gt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>s(u)))};const o=u=>{gt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):gt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new v0(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(le(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new v0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function BR(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}class Lm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=BR(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=t.charAt(o[u]%62))}return s}}function Xt(r,t){return r<t?-1:r>t?1:0}function rm(r,t){const n=Math.min(r.length,t.length);for(let s=0;s<n;s++){const o=r.charAt(s),u=t.charAt(s);if(o!==u)return Ng(o)===Ng(u)?Xt(o,u):Ng(o)?1:-1}return Xt(r.length,t.length)}const qR=55296,HR=57343;function Ng(r){const t=r.charCodeAt(0);return t>=qR&&t<=HR}function Ko(r,t,n){return r.length===t.length&&r.every(((s,o)=>n(s,t[o])))}const E0="__name__";class dr{constructor(t,n,s){n===void 0?n=0:n>t.length&&Dt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&Dt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return dr.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof dr?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let o=0;o<s;o++){const u=dr.compareSegments(t.get(o),n.get(o));if(u!==0)return u}return Xt(t.length,n.length)}static compareSegments(t,n){const s=dr.isNumericId(t),o=dr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?dr.extractNumericId(t).compare(dr.extractNumericId(n)):rm(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Qs.fromString(t.substring(4,t.length-2))}}class Ae extends dr{construct(t,n,s){return new Ae(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new mt(it.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new Ae(n)}static emptyPath(){return new Ae([])}}const FR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends dr{construct(t,n,s){return new In(t,n,s)}static isValidIdentifier(t){return FR.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===E0}static keyField(){return new In([E0])}static fromServerFormat(t){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new mt(it.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<t.length;){const g=t[o];if(g==="\\"){if(o+1===t.length)throw new mt(it.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new mt(it.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=m,o+=2}else g==="`"?(f=!f,o++):g!=="."||f?(s+=g,o++):(u(),o++)}if(u(),f)throw new mt(it.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new In(n)}static emptyPath(){return new In([])}}class At{constructor(t){this.path=t}static fromPath(t){return new At(Ae.fromString(t))}static fromName(t){return new At(Ae.fromString(t).popFirst(5))}static empty(){return new At(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ae.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Ae.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new At(new Ae(t.slice()))}}function bT(r,t,n){if(!n)throw new mt(it.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function GR(r,t,n,s){if(t===!0&&s===!0)throw new mt(it.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function T0(r){if(!At.isDocumentKey(r))throw new mt(it.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function b0(r){if(At.isDocumentKey(r))throw new mt(it.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function ST(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function nf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Dt(12329,{type:typeof r})}function Lo(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new mt(it.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nf(r);throw new mt(it.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}function an(r,t){const n={typeString:r};return t&&(n.value=t),n}function xu(r,t){if(!ST(r))throw new mt(it.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const o=t[s].typeString,u="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new mt(it.INVALID_ARGUMENT,n);return!0}const S0=-62135596800,A0=1e6;class Ie{static now(){return Ie.fromMillis(Date.now())}static fromDate(t){return Ie.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*A0);return new Ie(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new mt(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new mt(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<S0)throw new mt(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new mt(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/A0}_compareTo(t){return this.seconds===t.seconds?Xt(this.nanoseconds,t.nanoseconds):Xt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ie._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(xu(t,Ie._jsonSchema))return new Ie(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-S0;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ie._jsonSchemaVersion="firestore/timestamp/1.0",Ie._jsonSchema={type:an("string",Ie._jsonSchemaVersion),seconds:an("number"),nanoseconds:an("number")};class Mt{static fromTimestamp(t){return new Mt(t)}static min(){return new Mt(new Ie(0,0))}static max(){return new Mt(new Ie(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Eu=-1;function KR(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Mt.fromTimestamp(s===1e9?new Ie(n+1,0):new Ie(n,s));return new Xs(o,At.empty(),t)}function QR(r){return new Xs(r.readTime,r.key,Eu)}class Xs{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Xs(Mt.min(),At.empty(),Eu)}static max(){return new Xs(Mt.max(),At.empty(),Eu)}}function YR(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=At.comparator(r.documentKey,t.documentKey),n!==0?n:Xt(r.largestBatchId,t.largestBatchId))}const $R="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function el(r){if(r.code!==it.FAILED_PRECONDITION||r.message!==$R)throw r;gt("LocalStore","Unexpectedly lost primary lease")}class rt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Dt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new rt(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof rt?n:rt.resolve(n)}catch(n){return rt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):rt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):rt.reject(n)}static resolve(t){return new rt(((n,s)=>{n(t)}))}static reject(t){return new rt(((n,s)=>{s(t)}))}static waitFor(t){return new rt(((n,s)=>{let o=0,u=0,f=!1;t.forEach((g=>{++o,g.next((()=>{++u,f&&u===o&&n()}),(m=>s(m)))})),f=!0,u===o&&n()}))}static or(t){let n=rt.resolve(!1);for(const s of t)n=n.next((o=>o?rt.resolve(o):s()));return n}static forEach(t,n){const s=[];return t.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(t,n){return new rt(((s,o)=>{const u=t.length,f=new Array(u);let g=0;for(let m=0;m<u;m++){const p=m;n(t[p]).next((E=>{f[p]=E,++g,g===u&&s(f)}),(E=>o(E)))}}))}static doWhile(t,n){return new rt(((s,o)=>{const u=()=>{t()===!0?n().next((()=>{u()}),o):s()};u()}))}}function ZR(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function nl(r){return r.name==="IndexedDbTransactionError"}class rf{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}rf.ce=-1;const Um=-1;function sf(r){return r==null}function xh(r){return r===0&&1/r==-1/0}function JR(r){return typeof r=="number"&&Number.isInteger(r)&&!xh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const AT="";function WR(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=w0(t)),t=tC(r.get(n),t);return w0(t)}function tC(r,t){let n=t;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case AT:n+="";break;default:n+=u}}return n}function w0(r){return r+AT+""}function R0(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function qa(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function wT(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}class ke{constructor(t,n){this.comparator=t,this.root=n||Cn.EMPTY}insert(t,n){return new ke(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Cn.BLACK,null,null))}remove(t){return new ke(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Cn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(t,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new uh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new uh(this.root,t,this.comparator,!1)}getReverseIterator(){return new uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new uh(this.root,t,this.comparator,!0)}}class uh{constructor(t,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?s(t.key,n):1,n&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Cn{constructor(t,n,s,o,u){this.key=t,this.value=n,this.color=s??Cn.RED,this.left=o??Cn.EMPTY,this.right=u??Cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,o,u){return new Cn(t??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let o=this;const u=s(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(t,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Cn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(t,o.key)===0){if(o.right.isEmpty())return Cn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Dt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Dt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Dt(27949);return t+(this.isRed()?0:1)}}Cn.EMPTY=null,Cn.RED=!0,Cn.BLACK=!1;Cn.EMPTY=new class{constructor(){this.size=0}get key(){throw Dt(57766)}get value(){throw Dt(16141)}get color(){throw Dt(16727)}get left(){throw Dt(29726)}get right(){throw Dt(36894)}copy(t,n,s,o,u){return this}insert(t,n,s){return new Cn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dn{constructor(t){this.comparator=t,this.data=new ke(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,t[1])>=0)return;n(o.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new C0(this.data.getIterator())}getIteratorFrom(t){return new C0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof dn)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new dn(this.comparator);return n.data=t,n}}class C0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class $i{constructor(t){this.fields=t,t.sort(In.comparator)}static empty(){return new $i([])}unionWith(t){let n=new dn(In.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new $i(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Ko(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}class RT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Dn{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new RT("Invalid base64 string: "+u):u}})(t);return new Dn(n)}static fromUint8Array(t){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(t);return new Dn(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Xt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Dn.EMPTY_BYTE_STRING=new Dn("");const eC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zs(r){if(le(!!r,39018),typeof r=="string"){let t=0;const n=eC.exec(r);if(le(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),t=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Qe(r.seconds),nanos:Qe(r.nanos)}}function Qe(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Js(r){return typeof r=="string"?Dn.fromBase64String(r):Dn.fromUint8Array(r)}const CT="server_timestamp",IT="__type__",DT="__previous_value__",NT="__local_write_time__";function zm(r){return(r?.mapValue?.fields||{})[IT]?.stringValue===CT}function af(r){const t=r.mapValue.fields[DT];return zm(t)?af(t):t}function Tu(r){const t=Zs(r.mapValue.fields[NT].timestampValue);return new Ie(t.seconds,t.nanos)}class nC{constructor(t,n,s,o,u,f,g,m,p,E){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=E}}const Mh="(default)";class bu{constructor(t,n){this.projectId=t,this.database=n||Mh}static empty(){return new bu("","")}get isDefaultDatabase(){return this.database===Mh}isEqual(t){return t instanceof bu&&t.projectId===this.projectId&&t.database===this.database}}const OT="__type__",iC="__max__",ch={mapValue:{}},xT="__vector__",Vh="value";function Ws(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?zm(r)?4:sC(r)?9007199254740991:rC(r)?10:11:Dt(28295,{value:r})}function Er(r,t){if(r===t)return!0;const n=Ws(r);if(n!==Ws(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Tu(r).isEqual(Tu(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Zs(o.timestampValue),g=Zs(u.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(o,u){return Js(o.bytesValue).isEqual(Js(u.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(o,u){return Qe(o.geoPointValue.latitude)===Qe(u.geoPointValue.latitude)&&Qe(o.geoPointValue.longitude)===Qe(u.geoPointValue.longitude)})(r,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Qe(o.integerValue)===Qe(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=Qe(o.doubleValue),g=Qe(u.doubleValue);return f===g?xh(f)===xh(g):isNaN(f)&&isNaN(g)}return!1})(r,t);case 9:return Ko(r.arrayValue.values||[],t.arrayValue.values||[],Er);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},g=u.mapValue.fields||{};if(R0(f)!==R0(g))return!1;for(const m in f)if(f.hasOwnProperty(m)&&(g[m]===void 0||!Er(f[m],g[m])))return!1;return!0})(r,t);default:return Dt(52216,{left:r})}}function Su(r,t){return(r.values||[]).find((n=>Er(n,t)))!==void 0}function Qo(r,t){if(r===t)return 0;const n=Ws(r),s=Ws(t);if(n!==s)return Xt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xt(r.booleanValue,t.booleanValue);case 2:return(function(u,f){const g=Qe(u.integerValue||u.doubleValue),m=Qe(f.integerValue||f.doubleValue);return g<m?-1:g>m?1:g===m?0:isNaN(g)?isNaN(m)?0:-1:1})(r,t);case 3:return I0(r.timestampValue,t.timestampValue);case 4:return I0(Tu(r),Tu(t));case 5:return rm(r.stringValue,t.stringValue);case 6:return(function(u,f){const g=Js(u),m=Js(f);return g.compareTo(m)})(r.bytesValue,t.bytesValue);case 7:return(function(u,f){const g=u.split("/"),m=f.split("/");for(let p=0;p<g.length&&p<m.length;p++){const E=Xt(g[p],m[p]);if(E!==0)return E}return Xt(g.length,m.length)})(r.referenceValue,t.referenceValue);case 8:return(function(u,f){const g=Xt(Qe(u.latitude),Qe(f.latitude));return g!==0?g:Xt(Qe(u.longitude),Qe(f.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return D0(r.arrayValue,t.arrayValue);case 10:return(function(u,f){const g=u.fields||{},m=f.fields||{},p=g[Vh]?.arrayValue,E=m[Vh]?.arrayValue,T=Xt(p?.values?.length||0,E?.values?.length||0);return T!==0?T:D0(p,E)})(r.mapValue,t.mapValue);case 11:return(function(u,f){if(u===ch.mapValue&&f===ch.mapValue)return 0;if(u===ch.mapValue)return 1;if(f===ch.mapValue)return-1;const g=u.fields||{},m=Object.keys(g),p=f.fields||{},E=Object.keys(p);m.sort(),E.sort();for(let T=0;T<m.length&&T<E.length;++T){const S=rm(m[T],E[T]);if(S!==0)return S;const O=Qo(g[m[T]],p[E[T]]);if(O!==0)return O}return Xt(m.length,E.length)})(r.mapValue,t.mapValue);default:throw Dt(23264,{he:n})}}function I0(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Xt(r,t);const n=Zs(r),s=Zs(t),o=Xt(n.seconds,s.seconds);return o!==0?o:Xt(n.nanos,s.nanos)}function D0(r,t){const n=r.values||[],s=t.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Qo(n[o],s[o]);if(u)return u}return Xt(n.length,s.length)}function Yo(r){return sm(r)}function sm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Zs(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Js(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return At.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=sm(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${sm(n.fields[f])}`;return o+"}"})(r.mapValue):Dt(61005,{value:r})}function yh(r){switch(Ws(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=af(r);return t?16+yh(t):16;case 5:return 2*r.stringValue.length;case 6:return Js(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+yh(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return qa(s.fields,((u,f)=>{o+=u.length+yh(f)})),o})(r.mapValue);default:throw Dt(13486,{value:r})}}function N0(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function am(r){return!!r&&"integerValue"in r}function jm(r){return!!r&&"arrayValue"in r}function O0(r){return!!r&&"nullValue"in r}function x0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function _h(r){return!!r&&"mapValue"in r}function rC(r){return(r?.mapValue?.fields||{})[OT]?.stringValue===xT}function cu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return qa(r.mapValue.fields,((n,s)=>t.mapValue.fields[n]=cu(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=cu(r.arrayValue.values[n]);return t}return{...r}}function sC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===iC}class xi{constructor(t){this.value=t}static empty(){return new xi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!_h(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=cu(n)}setAll(t){let n=In.emptyPath(),s={},o=[];t.forEach(((f,g)=>{if(!n.isImmediateParentOf(g)){const m=this.getFieldsMap(n);this.applyChanges(m,s,o),s={},o=[],n=g.popLast()}f?s[g.lastSegment()]=cu(f):o.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(t){const n=this.field(t.popLast());_h(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Er(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let o=n.mapValue.fields[t.get(s)];_h(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(t,n,s){qa(n,((o,u)=>t[o]=u));for(const o of s)delete t[o]}clone(){return new xi(cu(this.value))}}function MT(r){const t=[];return qa(r.fields,((n,s)=>{const o=new In([n]);if(_h(s)){const u=MT(s.mapValue).fields;if(u.length===0)t.push(o);else for(const f of u)t.push(o.child(f))}else t.push(o)})),new $i(t)}class Ln{constructor(t,n,s,o,u,f,g){this.key=t,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=g}static newInvalidDocument(t){return new Ln(t,0,Mt.min(),Mt.min(),Mt.min(),xi.empty(),0)}static newFoundDocument(t,n,s,o){return new Ln(t,1,n,Mt.min(),s,o,0)}static newNoDocument(t,n){return new Ln(t,2,n,Mt.min(),Mt.min(),xi.empty(),0)}static newUnknownDocument(t,n){return new Ln(t,3,n,Mt.min(),Mt.min(),xi.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Mt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=xi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=xi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ln&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class kh{constructor(t,n){this.position=t,this.inclusive=n}}function M0(r,t,n){let s=0;for(let o=0;o<r.position.length;o++){const u=t[o],f=r.position[o];if(u.field.isKeyField()?s=At.comparator(At.fromName(f.referenceValue),n.key):s=Qo(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function V0(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Er(r.position[n],t.position[n]))return!1;return!0}class Ph{constructor(t,n="asc"){this.field=t,this.dir=n}}function aC(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}class VT{}class sn extends VT{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new lC(t,n,s):n==="array-contains"?new hC(t,s):n==="in"?new fC(t,s):n==="not-in"?new dC(t,s):n==="array-contains-any"?new gC(t,s):new sn(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new uC(t,s):new cC(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Qo(n,this.value)):n!==null&&Ws(this.value)===Ws(n)&&this.matchesComparison(Qo(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Dt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zi extends VT{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Zi(t,n)}matches(t){return kT(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kT(r){return r.op==="and"}function PT(r){return oC(r)&&kT(r)}function oC(r){for(const t of r.filters)if(t instanceof Zi)return!1;return!0}function om(r){if(r instanceof sn)return r.field.canonicalString()+r.op.toString()+Yo(r.value);if(PT(r))return r.filters.map((t=>om(t))).join(",");{const t=r.filters.map((n=>om(n))).join(",");return`${r.op}(${t})`}}function LT(r,t){return r instanceof sn?(function(s,o){return o instanceof sn&&s.op===o.op&&s.field.isEqual(o.field)&&Er(s.value,o.value)})(r,t):r instanceof Zi?(function(s,o){return o instanceof Zi&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,f,g)=>u&&LT(f,o.filters[g])),!0):!1})(r,t):void Dt(19439)}function UT(r){return r instanceof sn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Yo(n.value)}`})(r):r instanceof Zi?(function(n){return n.op.toString()+" {"+n.getFilters().map(UT).join(" ,")+"}"})(r):"Filter"}class lC extends sn{constructor(t,n,s){super(t,n,s),this.key=At.fromName(s.referenceValue)}matches(t){const n=At.comparator(t.key,this.key);return this.matchesComparison(n)}}class uC extends sn{constructor(t,n){super(t,"in",n),this.keys=zT("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class cC extends sn{constructor(t,n){super(t,"not-in",n),this.keys=zT("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function zT(r,t){return(t.arrayValue?.values||[]).map((n=>At.fromName(n.referenceValue)))}class hC extends sn{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return jm(n)&&Su(n.arrayValue,this.value)}}class fC extends sn{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Su(this.value.arrayValue,n)}}class dC extends sn{constructor(t,n){super(t,"not-in",n)}matches(t){if(Su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Su(this.value.arrayValue,n)}}class gC extends sn{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!jm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Su(this.value.arrayValue,s)))}}class mC{constructor(t,n=null,s=[],o=[],u=null,f=null,g=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=g,this.Te=null}}function k0(r,t=null,n=[],s=[],o=null,u=null,f=null){return new mC(r,t,n,s,o,u,f)}function Bm(r){const t=kt(r);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>om(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),sf(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>Yo(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>Yo(s))).join(",")),t.Te=n}return t.Te}function qm(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!aC(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!LT(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!V0(r.startAt,t.startAt)&&V0(r.endAt,t.endAt)}function lm(r){return At.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Mu{constructor(t,n=null,s=[],o=[],u=null,f="F",g=null,m=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=g,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function pC(r,t,n,s,o,u,f,g){return new Mu(r,t,n,s,o,u,f,g)}function Hm(r){return new Mu(r)}function P0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function jT(r){return r.collectionGroup!==null}function hu(r){const t=kt(r);if(t.Ie===null){t.Ie=[];const n=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),n.add(u.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new dn(In.comparator);return f.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(g=g.add(p.field))}))})),g})(t).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Ph(u,s))})),n.has(In.keyField().canonicalString())||t.Ie.push(new Ph(In.keyField(),s))}return t.Ie}function gr(r){const t=kt(r);return t.Ee||(t.Ee=yC(t,hu(r))),t.Ee}function yC(r,t){if(r.limitType==="F")return k0(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Ph(o.field,u)}));const n=r.endAt?new kh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new kh(r.startAt.position,r.startAt.inclusive):null;return k0(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function um(r,t){const n=r.filters.concat([t]);return new Mu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function cm(r,t,n){return new Mu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function of(r,t){return qm(gr(r),gr(t))&&r.limitType===t.limitType}function BT(r){return`${Bm(gr(r))}|lt:${r.limitType}`}function Mo(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>UT(o))).join(", ")}]`),sf(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>Yo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>Yo(o))).join(",")),`Target(${s})`})(gr(r))}; limitType=${r.limitType})`}function lf(r,t){return t.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):At.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,t)&&(function(s,o){for(const u of hu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,t)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,t)&&(function(s,o){return!(s.startAt&&!(function(f,g,m){const p=M0(f,g,m);return f.inclusive?p<=0:p<0})(s.startAt,hu(s),o)||s.endAt&&!(function(f,g,m){const p=M0(f,g,m);return f.inclusive?p>=0:p>0})(s.endAt,hu(s),o))})(r,t)}function _C(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function qT(r){return(t,n)=>{let s=!1;for(const o of hu(r)){const u=vC(o,t,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function vC(r,t,n){const s=r.field.isKeyField()?At.comparator(t.key,n.key):(function(u,f,g){const m=f.data.field(u),p=g.data.field(u);return m!==null&&p!==null?Qo(m,p):Dt(42886)})(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Dt(19790,{direction:r.dir})}}class Ha{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),o=this.inner[s];if(o===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,n]);o.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(t){qa(this.inner,((n,s)=>{for(const[o,u]of s)t(o,u)}))}isEmpty(){return wT(this.inner)}size(){return this.innerSize}}const EC=new ke(At.comparator);function Yr(){return EC}const HT=new ke(At.comparator);function ru(...r){let t=HT;for(const n of r)t=t.insert(n.key,n);return t}function FT(r){let t=HT;return r.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function Ma(){return fu()}function GT(){return fu()}function fu(){return new Ha((r=>r.toString()),((r,t)=>r.isEqual(t)))}const TC=new ke(At.comparator),bC=new dn(At.comparator);function Zt(...r){let t=bC;for(const n of r)t=t.add(n);return t}const SC=new dn(Xt);function AC(){return SC}function Fm(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xh(t)?"-0":t}}function KT(r){return{integerValue:""+r}}function wC(r,t){return JR(t)?KT(t):Fm(r,t)}class uf{constructor(){this._=void 0}}function RC(r,t,n){return r instanceof Lh?(function(o,u){const f={fields:{[IT]:{stringValue:CT},[NT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&zm(u)&&(u=af(u)),u&&(f.fields[DT]=u),{mapValue:f}})(n,t):r instanceof Au?YT(r,t):r instanceof wu?$T(r,t):(function(o,u){const f=QT(o,u),g=L0(f)+L0(o.Ae);return am(f)&&am(o.Ae)?KT(g):Fm(o.serializer,g)})(r,t)}function CC(r,t,n){return r instanceof Au?YT(r,t):r instanceof wu?$T(r,t):n}function QT(r,t){return r instanceof Uh?(function(s){return am(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(t)?t:{integerValue:0}:null}class Lh extends uf{}class Au extends uf{constructor(t){super(),this.elements=t}}function YT(r,t){const n=XT(t);for(const s of r.elements)n.some((o=>Er(o,s)))||n.push(s);return{arrayValue:{values:n}}}class wu extends uf{constructor(t){super(),this.elements=t}}function $T(r,t){let n=XT(t);for(const s of r.elements)n=n.filter((o=>!Er(o,s)));return{arrayValue:{values:n}}}class Uh extends uf{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function L0(r){return Qe(r.integerValue||r.doubleValue)}function XT(r){return jm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function IC(r,t){return r.field.isEqual(t.field)&&(function(s,o){return s instanceof Au&&o instanceof Au||s instanceof wu&&o instanceof wu?Ko(s.elements,o.elements,Er):s instanceof Uh&&o instanceof Uh?Er(s.Ae,o.Ae):s instanceof Lh&&o instanceof Lh})(r.transform,t.transform)}class DC{constructor(t,n){this.version=t,this.transformResults=n}}class Gr{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Gr}static exists(t){return new Gr(void 0,t)}static updateTime(t){return new Gr(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function vh(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class cf{}function ZT(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new WT(r.key,Gr.none()):new Vu(r.key,r.data,Gr.none());{const n=r.data,s=xi.empty();let o=new dn(In.comparator);for(let u of t.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new Fa(r.key,s,new $i(o.toArray()),Gr.none())}}function NC(r,t,n){r instanceof Vu?(function(o,u,f){const g=o.value.clone(),m=z0(o.fieldTransforms,u,f.transformResults);g.setAll(m),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(r,t,n):r instanceof Fa?(function(o,u,f){if(!vh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const g=z0(o.fieldTransforms,u,f.transformResults),m=u.data;m.setAll(JT(o)),m.setAll(g),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(r,t,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,t,n)}function du(r,t,n,s){return r instanceof Vu?(function(u,f,g,m){if(!vh(u.precondition,f))return g;const p=u.value.clone(),E=j0(u.fieldTransforms,m,f);return p.setAll(E),f.convertToFoundDocument(f.version,p).setHasLocalMutations(),null})(r,t,n,s):r instanceof Fa?(function(u,f,g,m){if(!vh(u.precondition,f))return g;const p=j0(u.fieldTransforms,m,f),E=f.data;return E.setAll(JT(u)),E.setAll(p),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(r,t,n,s):(function(u,f,g){return vh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g})(r,t,n)}function OC(r,t){let n=null;for(const s of r.fieldTransforms){const o=t.data.field(s.field),u=QT(s.transform,o||null);u!=null&&(n===null&&(n=xi.empty()),n.set(s.field,u))}return n||null}function U0(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Ko(s,o,((u,f)=>IC(u,f)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Vu extends cf{constructor(t,n,s,o=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Fa extends cf{constructor(t,n,s,o,u=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function JT(r){const t=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}})),t}function z0(r,t,n){const s=new Map;le(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,g=t.data.field(u.field);s.set(u.field,CC(f,g,n[o]))}return s}function j0(r,t,n){const s=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);s.set(o.field,RC(u,f,t))}return s}class WT extends cf{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xC extends cf{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class MC{constructor(t,n,s,o){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&NC(u,t,s[o])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=du(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=du(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=GT();return this.mutations.forEach((o=>{const u=t.get(o.key),f=u.overlayedDocument;let g=this.applyToLocalView(f,u.mutatedFields);g=n.has(o.key)?null:g;const m=ZT(f,g);m!==null&&s.set(o.key,m),f.isValidDocument()||f.convertToNoDocument(Mt.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Zt())}isEqual(t){return this.batchId===t.batchId&&Ko(this.mutations,t.mutations,((n,s)=>U0(n,s)))&&Ko(this.baseMutations,t.baseMutations,((n,s)=>U0(n,s)))}}class Gm{constructor(t,n,s,o){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(t,n,s){le(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let o=(function(){return TC})();const u=t.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new Gm(t,n,s,o)}}class VC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class kC{constructor(t,n){this.count=t,this.unchangedNames=n}}var rn,ee;function PC(r){switch(r){case it.OK:return Dt(64938);case it.CANCELLED:case it.UNKNOWN:case it.DEADLINE_EXCEEDED:case it.RESOURCE_EXHAUSTED:case it.INTERNAL:case it.UNAVAILABLE:case it.UNAUTHENTICATED:return!1;case it.INVALID_ARGUMENT:case it.NOT_FOUND:case it.ALREADY_EXISTS:case it.PERMISSION_DENIED:case it.FAILED_PRECONDITION:case it.ABORTED:case it.OUT_OF_RANGE:case it.UNIMPLEMENTED:case it.DATA_LOSS:return!0;default:return Dt(15467,{code:r})}}function tb(r){if(r===void 0)return Qr("GRPC error has no .code"),it.UNKNOWN;switch(r){case rn.OK:return it.OK;case rn.CANCELLED:return it.CANCELLED;case rn.UNKNOWN:return it.UNKNOWN;case rn.DEADLINE_EXCEEDED:return it.DEADLINE_EXCEEDED;case rn.RESOURCE_EXHAUSTED:return it.RESOURCE_EXHAUSTED;case rn.INTERNAL:return it.INTERNAL;case rn.UNAVAILABLE:return it.UNAVAILABLE;case rn.UNAUTHENTICATED:return it.UNAUTHENTICATED;case rn.INVALID_ARGUMENT:return it.INVALID_ARGUMENT;case rn.NOT_FOUND:return it.NOT_FOUND;case rn.ALREADY_EXISTS:return it.ALREADY_EXISTS;case rn.PERMISSION_DENIED:return it.PERMISSION_DENIED;case rn.FAILED_PRECONDITION:return it.FAILED_PRECONDITION;case rn.ABORTED:return it.ABORTED;case rn.OUT_OF_RANGE:return it.OUT_OF_RANGE;case rn.UNIMPLEMENTED:return it.UNIMPLEMENTED;case rn.DATA_LOSS:return it.DATA_LOSS;default:return Dt(39323,{code:r})}}(ee=rn||(rn={}))[ee.OK=0]="OK",ee[ee.CANCELLED=1]="CANCELLED",ee[ee.UNKNOWN=2]="UNKNOWN",ee[ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ee[ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ee[ee.NOT_FOUND=5]="NOT_FOUND",ee[ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",ee[ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",ee[ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",ee[ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ee[ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ee[ee.ABORTED=10]="ABORTED",ee[ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",ee[ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",ee[ee.INTERNAL=13]="INTERNAL",ee[ee.UNAVAILABLE=14]="UNAVAILABLE",ee[ee.DATA_LOSS=15]="DATA_LOSS";function LC(){return new TextEncoder}const UC=new Qs([4294967295,4294967295],0);function B0(r){const t=LC().encode(r),n=new gT;return n.update(t),new Uint8Array(n.digest())}function q0(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Qs([n,s],0),new Qs([o,u],0)]}class Km{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new su(`Invalid padding: ${n}`);if(s<0)throw new su(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new su(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new su(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Qs.fromNumber(this.ge)}ye(t,n,s){let o=t.add(n.multiply(Qs.fromNumber(s)));return o.compare(UC)===1&&(o=new Qs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=B0(t),[s,o]=q0(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);if(!this.we(f))return!1}return!0}static create(t,n,s){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),f=new Km(u,o,n);return s.forEach((g=>f.insert(g))),f}insert(t){if(this.ge===0)return;const n=B0(t),[s,o]=q0(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);this.Se(f)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class hf{constructor(t,n,s,o,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const o=new Map;return o.set(t,ku.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new hf(Mt.min(),o,new ke(Xt),Yr(),Zt())}}class ku{constructor(t,n,s,o,u){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new ku(s,n,Zt(),Zt(),Zt())}}class Eh{constructor(t,n,s,o){this.be=t,this.removedTargetIds=n,this.key=s,this.De=o}}class eb{constructor(t,n){this.targetId=t,this.Ce=n}}class nb{constructor(t,n,s=Dn.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=o}}class H0{constructor(){this.ve=0,this.Fe=F0(),this.Me=Dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Zt(),n=Zt(),s=Zt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Dt(38017,{changeType:u})}})),new ku(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=F0()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,le(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class zC{constructor(t){this.Ge=t,this.ze=new Map,this.je=Yr(),this.Je=hh(),this.He=hh(),this.Ye=new ke(Xt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:Dt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(t){const n=t.targetId,s=t.Ce.count,o=this.ot(n);if(o){const u=o.target;if(lm(u))if(s===0){const f=new At(u.path);this.et(n,f,Ln.newNoDocument(f,Mt.min()))}else le(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const g=this.ut(t),m=g?this.ct(g,t,f):1;if(m!==0){this.it(n);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,g;try{f=Js(s).toUint8Array()}catch(m){if(m instanceof RT)return Go("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{g=new Km(f,o,u)}catch(m){return Go(m instanceof su?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return g.ge===0?null:g}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const f=this.Ge.ht(),g=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;t.mightContain(g)||(this.et(n,u,null),o++)})),o}Tt(t){const n=new Map;this.ze.forEach(((u,f)=>{const g=this.ot(f);if(g){if(u.current&&lm(g.target)){const m=new At(g.target.path);this.It(m).has(f)||this.Et(f,m)||this.et(f,m,Ln.newNoDocument(m,t))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let s=Zt();this.He.forEach(((u,f)=>{let g=!0;f.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(s=s.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(t)));const o=new hf(t,n,this.Ye,this.je,s);return this.je=Yr(),this.Je=hh(),this.He=hh(),this.Ye=new ke(Xt),o}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new H0,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new dn(Xt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new dn(Xt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||gt("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new H0),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function hh(){return new ke(At.comparator)}function F0(){return new ke(At.comparator)}const jC={asc:"ASCENDING",desc:"DESCENDING"},BC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qC={and:"AND",or:"OR"};class HC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function hm(r,t){return r.useProto3Json||sf(t)?t:{value:t}}function zh(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ib(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function FC(r,t){return zh(r,t.toTimestamp())}function mr(r){return le(!!r,49232),Mt.fromTimestamp((function(n){const s=Zs(n);return new Ie(s.seconds,s.nanos)})(r))}function Qm(r,t){return fm(r,t).canonicalString()}function fm(r,t){const n=(function(o){return new Ae(["projects",o.projectId,"databases",o.database])})(r).child("documents");return t===void 0?n:n.child(t)}function rb(r){const t=Ae.fromString(r);return le(ub(t),10190,{key:t.toString()}),t}function dm(r,t){return Qm(r.databaseId,t.path)}function Og(r,t){const n=rb(t);if(n.get(1)!==r.databaseId.projectId)throw new mt(it.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new mt(it.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new At(ab(n))}function sb(r,t){return Qm(r.databaseId,t)}function GC(r){const t=rb(r);return t.length===4?Ae.emptyPath():ab(t)}function gm(r){return new Ae(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function ab(r){return le(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function G0(r,t,n){return{name:dm(r,t),fields:n.value.mapValue.fields}}function KC(r,t){let n;if("targetChange"in t){t.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Dt(39313,{state:p})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(p,E){return p.useProto3Json?(le(E===void 0||typeof E=="string",58123),Dn.fromBase64String(E||"")):(le(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Dn.fromUint8Array(E||new Uint8Array))})(r,t.targetChange.resumeToken),f=t.targetChange.cause,g=f&&(function(p){const E=p.code===void 0?it.UNKNOWN:tb(p.code);return new mt(E,p.message||"")})(f);n=new nb(s,o,u,g||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const o=Og(r,s.document.name),u=mr(s.document.updateTime),f=s.document.createTime?mr(s.document.createTime):Mt.min(),g=new xi({mapValue:{fields:s.document.fields}}),m=Ln.newFoundDocument(o,u,f,g),p=s.targetIds||[],E=s.removedTargetIds||[];n=new Eh(p,E,m.key,m)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const o=Og(r,s.document),u=s.readTime?mr(s.readTime):Mt.min(),f=Ln.newNoDocument(o,u),g=s.removedTargetIds||[];n=new Eh([],g,f.key,f)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const o=Og(r,s.document),u=s.removedTargetIds||[];n=new Eh([],u,o,null)}else{if(!("filter"in t))return Dt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new kC(o,u),g=s.targetId;n=new eb(g,f)}}return n}function QC(r,t){let n;if(t instanceof Vu)n={update:G0(r,t.key,t.value)};else if(t instanceof WT)n={delete:dm(r,t.key)};else if(t instanceof Fa)n={update:G0(r,t.key,t.data),updateMask:n2(t.fieldMask)};else{if(!(t instanceof xC))return Dt(16599,{Vt:t.type});n={verify:dm(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(u,f){const g=f.transform;if(g instanceof Lh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Au)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof wu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Uh)return{fieldPath:f.field.canonicalString(),increment:g.Ae};throw Dt(20930,{transform:f.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:FC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Dt(27497)})(r,t.precondition)),n}function YC(r,t){return r&&r.length>0?(le(t!==void 0,14353),r.map((n=>(function(o,u){let f=o.updateTime?mr(o.updateTime):mr(u);return f.isEqual(Mt.min())&&(f=mr(u)),new DC(f,o.transformResults||[])})(n,t)))):[]}function $C(r,t){return{documents:[sb(r,t.path)]}}function XC(r,t){const n={structuredQuery:{}},s=t.path;let o;t.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=sb(r,o);const u=(function(p){if(p.length!==0)return lb(Zi.create(p,"and"))})(t.filters);u&&(n.structuredQuery.where=u);const f=(function(p){if(p.length!==0)return p.map((E=>(function(S){return{field:Vo(S.field),direction:WC(S.dir)}})(E)))})(t.orderBy);f&&(n.structuredQuery.orderBy=f);const g=hm(r,t.limit);return g!==null&&(n.structuredQuery.limit=g),t.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(t.endAt)),{ft:n,parent:o}}function ZC(r){let t=GC(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){le(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:t=t.child(E.collectionId)}let u=[];n.where&&(u=(function(T){const S=ob(T);return S instanceof Zi&&PT(S)?S.getFilters():[S]})(n.where));let f=[];n.orderBy&&(f=(function(T){return T.map((S=>(function(K){return new Ph(ko(K.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(K.direction))})(S)))})(n.orderBy));let g=null;n.limit&&(g=(function(T){let S;return S=typeof T=="object"?T.value:T,sf(S)?null:S})(n.limit));let m=null;n.startAt&&(m=(function(T){const S=!!T.before,O=T.values||[];return new kh(O,S)})(n.startAt));let p=null;return n.endAt&&(p=(function(T){const S=!T.before,O=T.values||[];return new kh(O,S)})(n.endAt)),pC(t,o,f,u,g,"F",m,p)}function JC(r,t){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dt(28987,{purpose:o})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function ob(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=ko(n.unaryFilter.field);return sn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=ko(n.unaryFilter.field);return sn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=ko(n.unaryFilter.field);return sn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=ko(n.unaryFilter.field);return sn.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Dt(61313);default:return Dt(60726)}})(r):r.fieldFilter!==void 0?(function(n){return sn.create(ko(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Dt(58110);default:return Dt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Zi.create(n.compositeFilter.filters.map((s=>ob(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Dt(1026)}})(n.compositeFilter.op))})(r):Dt(30097,{filter:r})}function WC(r){return jC[r]}function t2(r){return BC[r]}function e2(r){return qC[r]}function Vo(r){return{fieldPath:r.canonicalString()}}function ko(r){return In.fromServerFormat(r.fieldPath)}function lb(r){return r instanceof sn?(function(n){if(n.op==="=="){if(x0(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NAN"}};if(O0(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(x0(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NOT_NAN"}};if(O0(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vo(n.field),op:t2(n.op),value:n.value}}})(r):r instanceof Zi?(function(n){const s=n.getFilters().map((o=>lb(o)));return s.length===1?s[0]:{compositeFilter:{op:e2(n.op),filters:s}}})(r):Dt(54877,{filter:r})}function n2(r){const t=[];return r.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function ub(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Hs{constructor(t,n,s,o,u=Mt.min(),f=Mt.min(),g=Dn.EMPTY_BYTE_STRING,m=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=m}withSequenceNumber(t){return new Hs(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class i2{constructor(t){this.yt=t}}function r2(r){const t=ZC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?cm(t,t.limit,"L"):t}class s2{constructor(){this.Cn=new a2}addToCollectionParentIndex(t,n){return this.Cn.add(n),rt.resolve()}getCollectionParents(t,n){return rt.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return rt.resolve()}deleteFieldIndex(t,n){return rt.resolve()}deleteAllFieldIndexes(t){return rt.resolve()}createTargetIndexes(t,n){return rt.resolve()}getDocumentsMatchingTarget(t,n){return rt.resolve(null)}getIndexType(t,n){return rt.resolve(0)}getFieldIndexes(t,n){return rt.resolve([])}getNextCollectionGroupToUpdate(t){return rt.resolve(null)}getMinOffset(t,n){return rt.resolve(Xs.min())}getMinOffsetFromCollectionGroup(t,n){return rt.resolve(Xs.min())}updateCollectionGroup(t,n,s){return rt.resolve()}updateIndexEntries(t,n){return rt.resolve()}}class a2{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),o=this.index[n]||new dn(Ae.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(t){const n=t.lastSegment(),s=t.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(t){return(this.index[t]||new dn(Ae.comparator)).toArray()}}const K0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cb=41943040;class ei{static withCacheSize(t){return new ei(t,ei.DEFAULT_COLLECTION_PERCENTILE,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}ei.DEFAULT_COLLECTION_PERCENTILE=10,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ei.DEFAULT=new ei(cb,ei.DEFAULT_COLLECTION_PERCENTILE,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ei.DISABLED=new ei(-1,0,0);class $o{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new $o(0)}static cr(){return new $o(-1)}}const Q0="LruGarbageCollector",o2=1048576;function Y0([r,t],[n,s]){const o=Xt(r,n);return o===0?Xt(t,s):o}class l2{constructor(t){this.Ir=t,this.buffer=new dn(Y0),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Y0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class u2{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){gt(Q0,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){nl(n)?gt(Q0,"Ignoring IndexedDB error during garbage collection: ",n):await el(n)}await this.Vr(3e5)}))}}class c2{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return rt.resolve(rf.ce);const s=new l2(n);return this.mr.forEachTarget(t,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(gt("LruGarbageCollector","Garbage collection skipped; disabled"),rt.resolve(K0)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(gt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),K0):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,o,u,f,g,m,p;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(gt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,f=Date.now(),this.nthSequenceNumber(t,o)))).next((T=>(s=T,g=Date.now(),this.removeTargets(t,s,n)))).next((T=>(u=T,m=Date.now(),this.removeOrphanedDocuments(t,s)))).next((T=>(p=Date.now(),xo()<=$t.DEBUG&&gt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(g-f)+`ms
	Removed ${u} targets in `+(m-g)+`ms
	Removed ${T} documents in `+(p-m)+`ms
Total Duration: ${p-E}ms`),rt.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function h2(r,t){return new c2(r,t)}class f2{constructor(){this.changes=new Ha((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ln.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?rt.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class d2{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}class g2{constructor(t,n,s,o){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(t,n)))).next((o=>(s!==null&&du(s.mutation,o,$i.empty(),Ie.now()),o)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,Zt()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=Zt()){const o=Ma();return this.populateOverlays(t,o,n).next((()=>this.computeViews(t,n,o,s).next((u=>{let f=ru();return u.forEach(((g,m)=>{f=f.insert(g,m.overlayedDocument)})),f}))))}getOverlayedDocuments(t,n){const s=Ma();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,Zt())))}populateOverlays(t,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((f,g)=>{n.set(f,g)}))}))}computeViews(t,n,s,o){let u=Yr();const f=fu(),g=(function(){return fu()})();return n.forEach(((m,p)=>{const E=s.get(p.key);o.has(p.key)&&(E===void 0||E.mutation instanceof Fa)?u=u.insert(p.key,p):E!==void 0?(f.set(p.key,E.mutation.getFieldMask()),du(E.mutation,p,E.mutation.getFieldMask(),Ie.now())):f.set(p.key,$i.empty())})),this.recalculateAndSaveOverlays(t,u).next((m=>(m.forEach(((p,E)=>f.set(p,E))),n.forEach(((p,E)=>g.set(p,new d2(E,f.get(p)??null)))),g)))}recalculateAndSaveOverlays(t,n){const s=fu();let o=new ke(((f,g)=>f-g)),u=Zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((f=>{for(const g of f)g.keys().forEach((m=>{const p=n.get(m);if(p===null)return;let E=s.get(m)||$i.empty();E=g.applyToLocalView(p,E),s.set(m,E);const T=(o.get(g.batchId)||Zt()).add(m);o=o.insert(g.batchId,T)}))})).next((()=>{const f=[],g=o.getReverseIterator();for(;g.hasNext();){const m=g.getNext(),p=m.key,E=m.value,T=GT();E.forEach((S=>{if(!u.has(S)){const O=ZT(n.get(S),s.get(S));O!==null&&T.set(S,O),u=u.add(S)}})),f.push(this.documentOverlayCache.saveOverlays(t,p,T))}return rt.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,o){return(function(f){return At.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):jT(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,o):this.getDocumentsMatchingCollectionQuery(t,n,s,o)}getNextDocuments(t,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,o-u.size):rt.resolve(Ma());let g=Eu,m=u;return f.next((p=>rt.forEach(p,((E,T)=>(g<T.largestBatchId&&(g=T.largestBatchId),u.get(E)?rt.resolve():this.remoteDocumentCache.getEntry(t,E).next((S=>{m=m.insert(E,S)}))))).next((()=>this.populateOverlays(t,p,u))).next((()=>this.computeViews(t,m,p,Zt()))).next((E=>({batchId:g,changes:FT(E)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new At(n)).next((s=>{let o=ru();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,o){const u=n.collectionGroup;let f=ru();return this.indexManager.getCollectionParents(t,u).next((g=>rt.forEach(g,(m=>{const p=(function(T,S){return new Mu(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,m.child(u));return this.getDocumentsMatchingCollectionQuery(t,p,s,o).next((E=>{E.forEach(((T,S)=>{f=f.insert(T,S)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(t,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,u,o)))).next((f=>{u.forEach(((m,p)=>{const E=p.getKey();f.get(E)===null&&(f=f.insert(E,Ln.newInvalidDocument(E)))}));let g=ru();return f.forEach(((m,p)=>{const E=u.get(m);E!==void 0&&du(E.mutation,p,$i.empty(),Ie.now()),lf(n,p)&&(g=g.insert(m,p))})),g}))}}class m2{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return rt.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:mr(o.createTime)}})(n)),rt.resolve()}getNamedQuery(t,n){return rt.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:r2(o.bundledQuery),readTime:mr(o.readTime)}})(n)),rt.resolve()}}class p2{constructor(){this.overlays=new ke(At.comparator),this.qr=new Map}getOverlay(t,n){return rt.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Ma();return rt.forEach(n,(o=>this.getOverlay(t,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((o,u)=>{this.St(t,n,u)})),rt.resolve()}removeOverlaysForBatchId(t,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),rt.resolve()}getOverlaysForCollection(t,n,s){const o=Ma(),u=n.length+1,f=new At(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const m=g.getNext().value,p=m.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===u&&m.largestBatchId>s&&o.set(m.getKey(),m)}return rt.resolve(o)}getOverlaysForCollectionGroup(t,n,s,o){let u=new ke(((p,E)=>p-E));const f=this.overlays.getIterator();for(;f.hasNext();){const p=f.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>s){let E=u.get(p.largestBatchId);E===null&&(E=Ma(),u=u.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const g=Ma(),m=u.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,E)=>g.set(p,E))),!(g.size()>=o)););return rt.resolve(g)}St(t,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new VC(n,s));let u=this.qr.get(n);u===void 0&&(u=Zt(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}class y2{constructor(){this.sessionToken=Dn.EMPTY_BYTE_STRING}getSessionToken(t){return rt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,rt.resolve()}}class Ym{constructor(){this.Qr=new dn(_n.$r),this.Ur=new dn(_n.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new _n(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new _n(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new At(new Ae([])),s=new _n(n,t),o=new _n(n,t+1),u=[];return this.Ur.forEachInRange([s,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new At(new Ae([])),s=new _n(n,t),o=new _n(n,t+1);let u=Zt();return this.Ur.forEachInRange([s,o],(f=>{u=u.add(f.key)})),u}containsKey(t){const n=new _n(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class _n{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return At.comparator(t.key,n.key)||Xt(t.Yr,n.Yr)}static Kr(t,n){return Xt(t.Yr,n.Yr)||At.comparator(t.key,n.key)}}class _2{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new dn(_n.$r)}checkEmpty(t){return rt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new MC(u,n,s,o);this.mutationQueue.push(f);for(const g of o)this.Zr=this.Zr.add(new _n(g.key,u)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return rt.resolve(f)}lookupMutationBatch(t,n){return rt.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return rt.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return rt.resolve(this.mutationQueue.length===0?Um:this.tr-1)}getAllMutationBatches(t){return rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new _n(n,0),o=new _n(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(f=>{const g=this.Xr(f.Yr);u.push(g)})),rt.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new dn(Xt);return n.forEach((o=>{const u=new _n(o,0),f=new _n(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(g=>{s=s.add(g.Yr)}))})),rt.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,o=s.length+1;let u=s;At.isDocumentKey(u)||(u=u.child(""));const f=new _n(new At(u),0);let g=new dn(Xt);return this.Zr.forEachWhile((m=>{const p=m.key.path;return!!s.isPrefixOf(p)&&(p.length===o&&(g=g.add(m.Yr)),!0)}),f),rt.resolve(this.ti(g))}ti(t){const n=[];return t.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(t,n){le(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return rt.forEach(n.mutations,(o=>{const u=new _n(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new _n(n,0),o=this.Zr.firstAfterOrEqual(s);return rt.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,rt.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class v2{constructor(t){this.ri=t,this.docs=(function(){return new ke(At.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return rt.resolve(s?s.document.mutableCopy():Ln.newInvalidDocument(n))}getEntries(t,n){let s=Yr();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Ln.newInvalidDocument(o))})),rt.resolve(s)}getDocumentsMatchingQuery(t,n,s,o){let u=Yr();const f=n.path,g=new At(f.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(g);for(;m.hasNext();){const{key:p,value:{document:E}}=m.getNext();if(!f.isPrefixOf(p.path))break;p.path.length>f.length+1||YR(QR(E),s)<=0||(o.has(E.key)||lf(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return rt.resolve(u)}getAllFromCollectionGroup(t,n,s,o){Dt(9500)}ii(t,n){return rt.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new E2(this)}getSize(t){return rt.resolve(this.size)}}class E2 extends f2{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(s)})),rt.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}class T2{constructor(t){this.persistence=t,this.si=new Ha((n=>Bm(n)),qm),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.oi=0,this._i=new Ym,this.targetCount=0,this.ai=$o.ur()}forEachTarget(t,n){return this.si.forEach(((s,o)=>n(o))),rt.resolve()}getLastRemoteSnapshotVersion(t){return rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return rt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),rt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),rt.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new $o(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,rt.resolve()}updateTargetData(t,n){return this.Pr(n),rt.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,rt.resolve()}removeTargets(t,n,s){let o=0;const u=[];return this.si.forEach(((f,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(t,g.targetId)),o++)})),rt.waitFor(u).next((()=>o))}getTargetCount(t){return rt.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return rt.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),rt.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(t,f))})),rt.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),rt.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return rt.resolve(s)}containsKey(t,n){return rt.resolve(this._i.containsKey(n))}}class hb{constructor(t,n){this.ui={},this.overlays={},this.ci=new rf(0),this.li=!1,this.li=!0,this.hi=new y2,this.referenceDelegate=t(this),this.Pi=new T2(this),this.indexManager=new s2,this.remoteDocumentCache=(function(o){return new v2(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new i2(n),this.Ii=new m2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new p2,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new _2(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){gt("MemoryPersistence","Starting transaction:",t);const o=new b2(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,n){return rt.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class b2 extends XR{constructor(t){super(),this.currentSequenceNumber=t}}class $m{constructor(t){this.persistence=t,this.Ri=new Ym,this.Vi=null}static mi(t){return new $m(t)}get fi(){if(this.Vi)return this.Vi;throw Dt(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),rt.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),rt.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),rt.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rt.forEach(this.fi,(s=>{const o=At.fromPath(s);return this.gi(t,o).next((u=>{u||n.removeEntry(o,Mt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return rt.or([()=>rt.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class jh{constructor(t,n){this.persistence=t,this.pi=new Ha((s=>WR(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=h2(this,n)}static mi(t,n){return new jh(t,n)}Ei(){}di(t){return rt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((o=>s+o))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return rt.forEach(this.pi,((s,o)=>this.br(t,s,o).next((u=>u?rt.resolve():n(o)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(f=>this.br(t,f,n).next((g=>{g||(s++,u.removeEntry(f,Mt.min()))})))).next((()=>u.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),rt.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),rt.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),rt.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),rt.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=yh(t.data.value)),n}br(t,n,s){return rt.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const o=this.pi.get(n);return rt.resolve(o!==void 0&&o>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class Xm{constructor(t,n,s,o){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=o}static As(t,n){let s=Zt(),o=Zt();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Xm(t,n.fromCache,s,o)}}class S2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class A2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return yw()?8:ZR(Un())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,o){const u={result:null};return this.ys(t,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(t,n,o,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new S2;return this.Ss(t,n,f).next((g=>{if(u.result=g,this.Vs)return this.bs(t,n,f,g.size)}))})).next((()=>u.result))}bs(t,n,s,o){return s.documentReadCount<this.fs?(xo()<=$t.DEBUG&&gt("QueryEngine","SDK will not create cache indexes for query:",Mo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),rt.resolve()):(xo()<=$t.DEBUG&&gt("QueryEngine","Query:",Mo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(xo()<=$t.DEBUG&&gt("QueryEngine","The SDK decides to create cache indexes for query:",Mo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,gr(n))):rt.resolve())}ys(t,n){if(P0(n))return rt.resolve(null);let s=gr(n);return this.indexManager.getIndexType(t,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=cm(n,null,"F"),s=gr(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((u=>{const f=Zt(...u);return this.ps.getDocuments(t,f).next((g=>this.indexManager.getMinOffset(t,s).next((m=>{const p=this.Ds(n,g);return this.Cs(n,p,f,m.readTime)?this.ys(t,cm(n,null,"F")):this.vs(t,p,n,m)}))))})))))}ws(t,n,s,o){return P0(n)||o.isEqual(Mt.min())?rt.resolve(null):this.ps.getDocuments(t,s).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,s,o)?rt.resolve(null):(xo()<=$t.DEBUG&&gt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Mo(n)),this.vs(t,f,n,KR(o,Eu)).next((g=>g)))}))}Ds(t,n){let s=new dn(qT(t));return n.forEach(((o,u)=>{lf(t,u)&&(s=s.add(u))})),s}Cs(t,n,s,o){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const u=t.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,n,s){return xo()<=$t.DEBUG&&gt("QueryEngine","Using full collection scan to execute query:",Mo(n)),this.ps.getDocumentsMatchingQuery(t,n,Xs.min(),s)}vs(t,n,s,o){return this.ps.getDocumentsMatchingQuery(t,s,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}const Zm="LocalStore",w2=3e8;class R2{constructor(t,n,s,o){this.persistence=t,this.Fs=n,this.serializer=o,this.Ms=new ke(Xt),this.xs=new Ha((u=>Bm(u)),qm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new g2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function C2(r,t,n,s){return new R2(r,t,n,s)}async function fb(r,t){const n=kt(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],g=[];let m=Zt();for(const p of o){f.push(p.batchId);for(const E of p.mutations)m=m.add(E.key)}for(const p of u){g.push(p.batchId);for(const E of p.mutations)m=m.add(E.key)}return n.localDocuments.getDocuments(s,m).next((p=>({Ls:p,removedBatchIds:f,addedBatchIds:g})))}))}))}function I2(r,t){const n=kt(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=t.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,m,p,E){const T=p.batch,S=T.keys();let O=rt.resolve();return S.forEach((K=>{O=O.next((()=>E.getEntry(m,K))).next((G=>{const $=p.docVersions.get(K);le($!==null,48541),G.version.compareTo($)<0&&(T.applyToRemoteDocument(G,p),G.isValidDocument()&&(G.setReadTime(p.commitVersion),E.addEntry(G)))}))})),O.next((()=>g.mutationQueue.removeMutationBatch(m,T)))})(n,s,t,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(g){let m=Zt();for(let p=0;p<g.mutationResults.length;++p)g.mutationResults[p].transformResults.length>0&&(m=m.add(g.batch.mutations[p].key));return m})(t)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function db(r){const t=kt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function D2(r,t){const n=kt(r),s=t.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];t.targetChanges.forEach(((E,T)=>{const S=o.get(T);if(!S)return;g.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,E.addedDocuments,T))));let O=S.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(T)!==null?O=O.withResumeToken(Dn.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):E.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(E.resumeToken,s)),o=o.insert(T,O),(function(G,$,lt){return G.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=w2?!0:lt.addedDocuments.size+lt.modifiedDocuments.size+lt.removedDocuments.size>0})(S,O,E)&&g.push(n.Pi.updateTargetData(u,O))}));let m=Yr(),p=Zt();if(t.documentUpdates.forEach((E=>{t.resolvedLimboDocuments.has(E)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),g.push(N2(u,f,t.documentUpdates).next((E=>{m=E.ks,p=E.qs}))),!s.isEqual(Mt.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));g.push(E)}return rt.waitFor(g).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,m,p))).next((()=>m))})).then((u=>(n.Ms=o,u)))}function N2(r,t,n){let s=Zt(),o=Zt();return n.forEach((u=>s=s.add(u))),t.getEntries(r,s).next((u=>{let f=Yr();return n.forEach(((g,m)=>{const p=u.get(g);m.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(g)),m.isNoDocument()&&m.version.isEqual(Mt.min())?(t.removeEntry(g,m.readTime),f=f.insert(g,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(m),f=f.insert(g,m)):gt(Zm,"Ignoring outdated watch update for ",g,". Current version:",p.version," Watch version:",m.version)})),{ks:f,qs:o}}))}function O2(r,t){const n=kt(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Um),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function x2(r,t){const n=kt(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,t).next((u=>u?(o=u,rt.resolve(o)):n.Pi.allocateTargetId(s).next((f=>(o=new Hs(t,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function mm(r,t,n){const s=kt(r),o=s.Ms.get(t),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!nl(f))throw f;gt(Zm,`Failed to update sequence numbers for target ${t}: ${f}`)}s.Ms=s.Ms.remove(t),s.xs.delete(o.target)}function $0(r,t,n){const s=kt(r);let o=Mt.min(),u=Zt();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(m,p,E){const T=kt(m),S=T.xs.get(E);return S!==void 0?rt.resolve(T.Ms.get(S)):T.Pi.getTargetData(p,E)})(s,f,gr(t)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,g.targetId).next((m=>{u=m}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,t,n?o:Mt.min(),n?u:Zt()))).next((g=>(M2(s,_C(t),g),{documents:g,Qs:u})))))}function M2(r,t,n){let s=r.Os.get(t)||Mt.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Os.set(t,s)}class X0{constructor(){this.activeTargetIds=AC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class V2{constructor(){this.Mo=new X0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new X0,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class k2{Oo(t){}shutdown(){}}const Z0="ConnectivityMonitor";class J0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){gt(Z0,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){gt(Z0,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let fh=null;function pm(){return fh===null?fh=(function(){return 268435456+Math.round(2147483648*Math.random())})():fh++,"0x"+fh.toString(16)}const xg="RestConnection",P2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class L2{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Mh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(t,n,s,o,u){const f=pm(),g=this.zo(t,n.toUriEncodedString());gt(xg,`Sending RPC '${t}' ${f}:`,g,s);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,o,u);const{host:p}=new URL(g),E=Jo(p);return this.Jo(t,g,m,s,E).then((T=>(gt(xg,`Received RPC '${t}' ${f}: `,T),T)),(T=>{throw Go(xg,`RPC '${t}' ${f} failed with error: `,T,"url: ",g,"request:",s),T}))}Ho(t,n,s,o,u,f){return this.Go(t,n,s,o,u)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+tl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>t[u]=o)),s&&s.headers.forEach(((o,u)=>t[u]=o))}zo(t,n){const s=P2[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class U2{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const Vn="WebChannelConnection";class z2 extends L2{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,o,u){const f=pm();return new Promise(((g,m)=>{const p=new mT;p.setWithCredentials(!0),p.listenOnce(pT.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case ph.NO_ERROR:const T=p.getResponseJson();gt(Vn,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(T)),g(T);break;case ph.TIMEOUT:gt(Vn,`RPC '${t}' ${f} timed out`),m(new mt(it.DEADLINE_EXCEEDED,"Request time out"));break;case ph.HTTP_ERROR:const S=p.getStatus();if(gt(Vn,`RPC '${t}' ${f} failed with status:`,S,"response text:",p.getResponseText()),S>0){let O=p.getResponseJson();Array.isArray(O)&&(O=O[0]);const K=O?.error;if(K&&K.status&&K.message){const G=(function(lt){const ht=lt.toLowerCase().replace(/_/g,"-");return Object.values(it).indexOf(ht)>=0?ht:it.UNKNOWN})(K.status);m(new mt(G,K.message))}else m(new mt(it.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new mt(it.UNAVAILABLE,"Connection failed."));break;default:Dt(9055,{l_:t,streamId:f,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{gt(Vn,`RPC '${t}' ${f} completed.`)}}));const E=JSON.stringify(o);gt(Vn,`RPC '${t}' ${f} sending request:`,o),p.send(n,"POST",E,s,15)}))}T_(t,n,s){const o=pm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=vT(),g=_T(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,n,s),m.encodeInitMessageHeaders=!0;const E=u.join("");gt(Vn,`Creating RPC '${t}' stream ${o}: ${E}`,m);const T=f.createWebChannel(E,m);this.I_(T);let S=!1,O=!1;const K=new U2({Yo:$=>{O?gt(Vn,`Not sending because RPC '${t}' stream ${o} is closed:`,$):(S||(gt(Vn,`Opening RPC '${t}' stream ${o} transport.`),T.open(),S=!0),gt(Vn,`RPC '${t}' stream ${o} sending:`,$),T.send($))},Zo:()=>T.close()}),G=($,lt,ht)=>{$.listen(lt,(ut=>{try{ht(ut)}catch(It){setTimeout((()=>{throw It}),0)}}))};return G(T,iu.EventType.OPEN,(()=>{O||(gt(Vn,`RPC '${t}' stream ${o} transport opened.`),K.o_())})),G(T,iu.EventType.CLOSE,(()=>{O||(O=!0,gt(Vn,`RPC '${t}' stream ${o} transport closed`),K.a_(),this.E_(T))})),G(T,iu.EventType.ERROR,($=>{O||(O=!0,Go(Vn,`RPC '${t}' stream ${o} transport errored. Name:`,$.name,"Message:",$.message),K.a_(new mt(it.UNAVAILABLE,"The operation could not be completed")))})),G(T,iu.EventType.MESSAGE,($=>{if(!O){const lt=$.data[0];le(!!lt,16349);const ht=lt,ut=ht?.error||ht[0]?.error;if(ut){gt(Vn,`RPC '${t}' stream ${o} received error:`,ut);const It=ut.status;let wt=(function(w){const C=rn[w];if(C!==void 0)return tb(C)})(It),vt=ut.message;wt===void 0&&(wt=it.INTERNAL,vt="Unknown error status: "+It+" with message "+ut.message),O=!0,K.a_(new mt(wt,vt)),T.close()}else gt(Vn,`RPC '${t}' stream ${o} received:`,lt),K.u_(lt)}})),G(g,yT.STAT_EVENT,($=>{$.stat===im.PROXY?gt(Vn,`RPC '${t}' stream ${o} detected buffering proxy`):$.stat===im.NOPROXY&&gt(Vn,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{K.__()}),0),K}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function Mg(){return typeof document<"u"?document:null}function ff(r){return new HC(r,!0)}class gb{constructor(t,n,s=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&gt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const W0="PersistentStream";class mb{constructor(t,n,s,o,u,f,g,m){this.Mi=t,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new gb(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===it.RESOURCE_EXHAUSTED?(Qr(n.toString()),Qr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===it.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{t((()=>{const o=new mt(it.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return gt(W0,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(gt(W0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class j2 extends mb{constructor(t,n,s,o,u,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=KC(this.serializer,t),s=(function(u){if(!("targetChange"in u))return Mt.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Mt.min():f.readTime?mr(f.readTime):Mt.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=gm(this.serializer),n.addTarget=(function(u,f){let g;const m=f.target;if(g=lm(m)?{documents:$C(u,m)}:{query:XC(u,m).ft},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=ib(u,f.resumeToken);const p=hm(u,f.expectedCount);p!==null&&(g.expectedCount=p)}else if(f.snapshotVersion.compareTo(Mt.min())>0){g.readTime=zh(u,f.snapshotVersion.toTimestamp());const p=hm(u,f.expectedCount);p!==null&&(g.expectedCount=p)}return g})(this.serializer,t);const s=JC(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=gm(this.serializer),n.removeTarget=t,this.q_(n)}}class B2 extends mb{constructor(t,n,s,o,u,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return le(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,le(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){le(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=YC(t.writeResults,t.commitTime),s=mr(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=gm(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>QC(this.serializer,s)))};this.q_(n)}}class q2{}class H2 extends q2{constructor(t,n,s,o){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new mt(it.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(t,fm(n,s),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new mt(it.UNKNOWN,u.toString())}))}Ho(t,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,g])=>this.connection.Ho(t,fm(n,s),o,f,g,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new mt(it.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class F2{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qr(n),this.aa=!1):gt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ja="RemoteStore";class G2{constructor(t,n,s,o,u){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{Ga(this)&&(gt(ja,"Restarting streams for network reachability change."),await(async function(m){const p=kt(m);p.Ea.add(4),await Pu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await df(p)})(this))}))})),this.Ra=new F2(s,o)}}async function df(r){if(Ga(r))for(const t of r.da)await t(!0)}async function Pu(r){for(const t of r.da)await t(!1)}function pb(r,t){const n=kt(r);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),ep(n)?tp(n):il(n).O_()&&Wm(n,t))}function Jm(r,t){const n=kt(r),s=il(n);n.Ia.delete(t),s.O_()&&yb(n,t),n.Ia.size===0&&(s.O_()?s.L_():Ga(n)&&n.Ra.set("Unknown"))}function Wm(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Mt.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}il(r).Y_(t)}function yb(r,t){r.Va.Ue(t),il(r).Z_(t)}function tp(r){r.Va=new zC({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),il(r).start(),r.Ra.ua()}function ep(r){return Ga(r)&&!il(r).x_()&&r.Ia.size>0}function Ga(r){return kt(r).Ea.size===0}function _b(r){r.Va=void 0}async function K2(r){r.Ra.set("Online")}async function Q2(r){r.Ia.forEach(((t,n)=>{Wm(r,t)}))}async function Y2(r,t){_b(r),ep(r)?(r.Ra.ha(t),tp(r)):r.Ra.set("Unknown")}async function $2(r,t,n){if(r.Ra.set("Online"),t instanceof nb&&t.state===2&&t.cause)try{await(async function(o,u){const f=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,f),o.Ia.delete(g),o.Va.removeTarget(g))})(r,t)}catch(s){gt(ja,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Bh(r,s)}else if(t instanceof Eh?r.Va.Ze(t):t instanceof eb?r.Va.st(t):r.Va.tt(t),!n.isEqual(Mt.min()))try{const s=await db(r.localStore);n.compareTo(s)>=0&&await(function(u,f){const g=u.Va.Tt(f);return g.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const E=u.Ia.get(p);E&&u.Ia.set(p,E.withResumeToken(m.resumeToken,f))}})),g.targetMismatches.forEach(((m,p)=>{const E=u.Ia.get(m);if(!E)return;u.Ia.set(m,E.withResumeToken(Dn.EMPTY_BYTE_STRING,E.snapshotVersion)),yb(u,m);const T=new Hs(E.target,m,p,E.sequenceNumber);Wm(u,T)})),u.remoteSyncer.applyRemoteEvent(g)})(r,n)}catch(s){gt(ja,"Failed to raise snapshot:",s),await Bh(r,s)}}async function Bh(r,t,n){if(!nl(t))throw t;r.Ea.add(1),await Pu(r),r.Ra.set("Offline"),n||(n=()=>db(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{gt(ja,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await df(r)}))}function vb(r,t){return t().catch((n=>Bh(r,n,t)))}async function gf(r){const t=kt(r),n=ta(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Um;for(;X2(t);)try{const o=await O2(t.localStore,s);if(o===null){t.Ta.length===0&&n.L_();break}s=o.batchId,Z2(t,o)}catch(o){await Bh(t,o)}Eb(t)&&Tb(t)}function X2(r){return Ga(r)&&r.Ta.length<10}function Z2(r,t){r.Ta.push(t);const n=ta(r);n.O_()&&n.X_&&n.ea(t.mutations)}function Eb(r){return Ga(r)&&!ta(r).x_()&&r.Ta.length>0}function Tb(r){ta(r).start()}async function J2(r){ta(r).ra()}async function W2(r){const t=ta(r);for(const n of r.Ta)t.ea(n.mutations)}async function tI(r,t,n){const s=r.Ta.shift(),o=Gm.from(s,t,n);await vb(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await gf(r)}async function eI(r,t){t&&ta(r).X_&&await(async function(s,o){if((function(f){return PC(f)&&f!==it.ABORTED})(o.code)){const u=s.Ta.shift();ta(s).B_(),await vb(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await gf(s)}})(r,t),Eb(r)&&Tb(r)}async function tE(r,t){const n=kt(r);n.asyncQueue.verifyOperationInProgress(),gt(ja,"RemoteStore received new credentials");const s=Ga(n);n.Ea.add(3),await Pu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await df(n)}async function nI(r,t){const n=kt(r);t?(n.Ea.delete(2),await df(n)):t||(n.Ea.add(2),await Pu(n),n.Ra.set("Unknown"))}function il(r){return r.ma||(r.ma=(function(n,s,o){const u=kt(n);return u.sa(),new j2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:K2.bind(null,r),t_:Q2.bind(null,r),r_:Y2.bind(null,r),H_:$2.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),ep(r)?tp(r):r.Ra.set("Unknown")):(await r.ma.stop(),_b(r))}))),r.ma}function ta(r){return r.fa||(r.fa=(function(n,s,o){const u=kt(n);return u.sa(),new B2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:J2.bind(null,r),r_:eI.bind(null,r),ta:W2.bind(null,r),na:tI.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await gf(r)):(await r.fa.stop(),r.Ta.length>0&&(gt(ja,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class np{constructor(t,n,s,o,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Va,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,o,u){const f=Date.now()+s,g=new np(t,n,f,o,u);return g.start(s),g}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new mt(it.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ip(r,t){if(Qr("AsyncQueue",`${t}: ${r}`),nl(r))return new mt(it.UNAVAILABLE,`${t}: ${r}`);throw r}class Uo{static emptySet(t){return new Uo(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||At.comparator(n.key,s.key):(n,s)=>At.comparator(n.key,s.key),this.keyedMap=ru(),this.sortedSet=new ke(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Uo)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new Uo;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}class eE{constructor(){this.ga=new ke(At.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Dt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class Xo{constructor(t,n,s,o,u,f,g,m,p){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(t,n,s,o,u){const f=[];return n.forEach((g=>{f.push({type:0,doc:g})})),new Xo(t,n,Uo.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&of(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class iI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class rI{constructor(){this.queries=nE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=kt(n),u=o.queries;o.queries=nE(),u.forEach(((f,g)=>{for(const m of g.Sa)m.onError(s)}))})(this,new mt(it.ABORTED,"Firestore shutting down"))}}function nE(){return new Ha((r=>BT(r)),of)}async function sI(r,t){const n=kt(r);let s=3;const o=t.query;let u=n.queries.get(o);u?!u.ba()&&t.Da()&&(s=2):(u=new iI,s=t.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const g=ip(f,`Initialization of query '${Mo(t.query)}' failed`);return void t.onError(g)}n.queries.set(o,u),u.Sa.push(t),t.va(n.onlineState),u.wa&&t.Fa(u.wa)&&rp(n)}async function aI(r,t){const n=kt(r),s=t.query;let o=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(t);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function oI(r,t){const n=kt(r);let s=!1;for(const o of t){const u=o.query,f=n.queries.get(u);if(f){for(const g of f.Sa)g.Fa(o)&&(s=!0);f.wa=o}}s&&rp(n)}function lI(r,t,n){const s=kt(r),o=s.queries.get(t);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(t)}function rp(r){r.Ca.forEach((t=>{t.next()}))}var ym,iE;(iE=ym||(ym={})).Ma="default",iE.Cache="cache";class uI{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const o of t.docChanges)o.type!==3&&s.push(o);t=new Xo(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Xo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==ym.Cache}}class bb{constructor(t){this.key=t}}class Sb{constructor(t){this.key=t}}class cI{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Zt(),this.mutatedKeys=Zt(),this.eu=qT(t),this.tu=new Uo(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new eE,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,g=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((E,T)=>{const S=o.get(E),O=lf(this.query,T)?T:null,K=!!S&&this.mutatedKeys.has(S.key),G=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let $=!1;S&&O?S.data.isEqual(O.data)?K!==G&&(s.track({type:3,doc:O}),$=!0):this.su(S,O)||(s.track({type:2,doc:O}),$=!0,(m&&this.eu(O,m)>0||p&&this.eu(O,p)<0)&&(g=!0)):!S&&O?(s.track({type:0,doc:O}),$=!0):S&&!O&&(s.track({type:1,doc:S}),$=!0,(m||p)&&(g=!0)),$&&(O?(f=f.add(O),u=G?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{tu:f,iu:s,Cs:g,mutatedKeys:u}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const f=t.iu.ya();f.sort(((E,T)=>(function(O,K){const G=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dt(20277,{Rt:$})}};return G(O)-G(K)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(s),o=o??!1;const g=n&&!o?this._u():[],m=this.Xa.size===0&&this.current&&!o?1:0,p=m!==this.Za;return this.Za=m,f.length!==0||p?{snapshot:new Xo(this.query,t.tu,u,f,t.mutatedKeys,m===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new eE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Zt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new Sb(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new bb(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=Zt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Xo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sp="SyncEngine";class hI{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class fI{constructor(t){this.key=t,this.hu=!1}}class dI{constructor(t,n,s,o,u,f){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Ha((g=>BT(g)),of),this.Iu=new Map,this.Eu=new Set,this.du=new ke(At.comparator),this.Au=new Map,this.Ru=new Ym,this.Vu={},this.mu=new Map,this.fu=$o.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function gI(r,t,n=!0){const s=Db(r);let o;const u=s.Tu.get(t);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await Ab(s,t,n,!0),o}async function mI(r,t){const n=Db(r);await Ab(n,t,!0,!1)}async function Ab(r,t,n,s){const o=await x2(r.localStore,gr(t)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let g;return s&&(g=await pI(r,t,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&pb(r.remoteStore,o),g}async function pI(r,t,n,s,o){r.pu=(T,S,O)=>(async function(G,$,lt,ht){let ut=$.view.ru(lt);ut.Cs&&(ut=await $0(G.localStore,$.query,!1).then((({documents:R})=>$.view.ru(R,ut))));const It=ht&&ht.targetChanges.get($.targetId),wt=ht&&ht.targetMismatches.get($.targetId)!=null,vt=$.view.applyChanges(ut,G.isPrimaryClient,It,wt);return sE(G,$.targetId,vt.au),vt.snapshot})(r,T,S,O);const u=await $0(r.localStore,t,!0),f=new cI(t,u.Qs),g=f.ru(u.documents),m=ku.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),p=f.applyChanges(g,r.isPrimaryClient,m);sE(r,n,p.au);const E=new hI(t,n,f);return r.Tu.set(t,E),r.Iu.has(n)?r.Iu.get(n).push(t):r.Iu.set(n,[t]),p.snapshot}async function yI(r,t,n){const s=kt(r),o=s.Tu.get(t),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((f=>!of(f,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await mm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Jm(s.remoteStore,o.targetId),_m(s,o.targetId)})).catch(el)):(_m(s,o.targetId),await mm(s.localStore,o.targetId,!0))}async function _I(r,t){const n=kt(r),s=n.Tu.get(t),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Jm(n.remoteStore,s.targetId))}async function vI(r,t,n){const s=RI(r);try{const o=await(function(f,g){const m=kt(f),p=Ie.now(),E=g.reduce(((O,K)=>O.add(K.key)),Zt());let T,S;return m.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let K=Yr(),G=Zt();return m.Ns.getEntries(O,E).next(($=>{K=$,K.forEach(((lt,ht)=>{ht.isValidDocument()||(G=G.add(lt))}))})).next((()=>m.localDocuments.getOverlayedDocuments(O,K))).next(($=>{T=$;const lt=[];for(const ht of g){const ut=OC(ht,T.get(ht.key).overlayedDocument);ut!=null&&lt.push(new Fa(ht.key,ut,MT(ut.value.mapValue),Gr.exists(!0)))}return m.mutationQueue.addMutationBatch(O,p,lt,g)})).next(($=>{S=$;const lt=$.applyToLocalDocumentSet(T,G);return m.documentOverlayCache.saveOverlays(O,$.batchId,lt)}))})).then((()=>({batchId:S.batchId,changes:FT(T)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(o.batchId),(function(f,g,m){let p=f.Vu[f.currentUser.toKey()];p||(p=new ke(Xt)),p=p.insert(g,m),f.Vu[f.currentUser.toKey()]=p})(s,o.batchId,n),await Lu(s,o.changes),await gf(s.remoteStore)}catch(o){const u=ip(o,"Failed to persist write");n.reject(u)}}async function wb(r,t){const n=kt(r);try{const s=await D2(n.localStore,t);t.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(le(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?le(f.hu,14607):o.removedDocuments.size>0&&(le(f.hu,42227),f.hu=!1))})),await Lu(n,s,t)}catch(s){await el(s)}}function rE(r,t,n){const s=kt(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,f)=>{const g=f.view.va(t);g.snapshot&&o.push(g.snapshot)})),(function(f,g){const m=kt(f);m.onlineState=g;let p=!1;m.queries.forEach(((E,T)=>{for(const S of T.Sa)S.va(g)&&(p=!0)})),p&&rp(m)})(s.eventManager,t),o.length&&s.Pu.H_(o),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function EI(r,t,n){const s=kt(r);s.sharedClientState.updateQueryState(t,"rejected",n);const o=s.Au.get(t),u=o&&o.key;if(u){let f=new ke(At.comparator);f=f.insert(u,Ln.newNoDocument(u,Mt.min()));const g=Zt().add(u),m=new hf(Mt.min(),new Map,new ke(Xt),f,g);await wb(s,m),s.du=s.du.remove(u),s.Au.delete(t),ap(s)}else await mm(s.localStore,t,!1).then((()=>_m(s,t,n))).catch(el)}async function TI(r,t){const n=kt(r),s=t.batch.batchId;try{const o=await I2(n.localStore,t);Cb(n,s,null),Rb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Lu(n,o)}catch(o){await el(o)}}async function bI(r,t,n){const s=kt(r);try{const o=await(function(f,g){const m=kt(f);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let E;return m.mutationQueue.lookupMutationBatch(p,g).next((T=>(le(T!==null,37113),E=T.keys(),m.mutationQueue.removeMutationBatch(p,T)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,E,g))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E))).next((()=>m.localDocuments.getDocuments(p,E)))}))})(s.localStore,t);Cb(s,t,n),Rb(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Lu(s,o)}catch(o){await el(o)}}function Rb(r,t){(r.mu.get(t)||[]).forEach((n=>{n.resolve()})),r.mu.delete(t)}function Cb(r,t,n){const s=kt(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(t);u&&(n?u.reject(n):u.resolve(),o=o.remove(t)),s.Vu[s.currentUser.toKey()]=o}}function _m(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((s=>{r.Ru.containsKey(s)||Ib(r,s)}))}function Ib(r,t){r.Eu.delete(t.path.canonicalString());const n=r.du.get(t);n!==null&&(Jm(r.remoteStore,n),r.du=r.du.remove(t),r.Au.delete(n),ap(r))}function sE(r,t,n){for(const s of n)s instanceof bb?(r.Ru.addReference(s.key,t),SI(r,s)):s instanceof Sb?(gt(sp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||Ib(r,s.key)):Dt(19791,{wu:s})}function SI(r,t){const n=t.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(gt(sp,"New document in limbo: "+n),r.Eu.add(s),ap(r))}function ap(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const n=new At(Ae.fromString(t)),s=r.fu.next();r.Au.set(s,new fI(n)),r.du=r.du.insert(n,s),pb(r.remoteStore,new Hs(gr(Hm(n.path)),s,"TargetPurposeLimboResolution",rf.ce))}}async function Lu(r,t,n){const s=kt(r),o=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((g,m)=>{f.push(s.pu(m,t,n).then((p=>{if((p||n)&&s.isPrimaryClient){const E=p?!p.fromCache:n?.targetChanges.get(m.targetId)?.current;s.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(p){o.push(p);const E=Xm.As(m.targetId,p);u.push(E)}})))})),await Promise.all(f),s.Pu.H_(o),await(async function(m,p){const E=kt(m);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>rt.forEach(p,(S=>rt.forEach(S.Es,(O=>E.persistence.referenceDelegate.addReference(T,S.targetId,O))).next((()=>rt.forEach(S.ds,(O=>E.persistence.referenceDelegate.removeReference(T,S.targetId,O)))))))))}catch(T){if(!nl(T))throw T;gt(Zm,"Failed to update sequence numbers: "+T)}for(const T of p){const S=T.targetId;if(!T.fromCache){const O=E.Ms.get(S),K=O.snapshotVersion,G=O.withLastLimboFreeSnapshotVersion(K);E.Ms=E.Ms.insert(S,G)}}})(s.localStore,u))}async function AI(r,t){const n=kt(r);if(!n.currentUser.isEqual(t)){gt(sp,"User change. New user:",t.toKey());const s=await fb(n.localStore,t);n.currentUser=t,(function(u,f){u.mu.forEach((g=>{g.forEach((m=>{m.reject(new mt(it.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Lu(n,s.Ls)}}function wI(r,t){const n=kt(r),s=n.Au.get(t);if(s&&s.hu)return Zt().add(s.key);{let o=Zt();const u=n.Iu.get(t);if(!u)return o;for(const f of u){const g=n.Tu.get(f);o=o.unionWith(g.view.nu)}return o}}function Db(r){const t=kt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=wb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=wI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=EI.bind(null,t),t.Pu.H_=oI.bind(null,t.eventManager),t.Pu.yu=lI.bind(null,t.eventManager),t}function RI(r){const t=kt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=TI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bI.bind(null,t),t}class qh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=ff(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return C2(this.persistence,new A2,t.initialUser,this.serializer)}Cu(t){return new hb($m.mi,this.serializer)}Du(t){return new V2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qh.provider={build:()=>new qh};class CI extends qh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){le(this.persistence.referenceDelegate instanceof jh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new u2(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?ei.withCacheSize(this.cacheSizeBytes):ei.DEFAULT;return new hb((s=>jh.mi(s,n)),this.serializer)}}class vm{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>rE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=AI.bind(null,this.syncEngine),await nI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new rI})()}createDatastore(t){const n=ff(t.databaseInfo.databaseId),s=(function(u){return new z2(u)})(t.databaseInfo);return(function(u,f,g,m){return new H2(u,f,g,m)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,o,u,f,g){return new G2(s,o,u,f,g)})(this.localStore,this.datastore,t.asyncQueue,(n=>rE(this.syncEngine,n,0)),(function(){return J0.v()?new J0:new k2})())}createSyncEngine(t,n){return(function(o,u,f,g,m,p,E){const T=new dI(o,u,f,g,m,p);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=kt(n);gt(ja,"RemoteStore shutting down."),s.Ea.add(5),await Pu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}vm.provider={build:()=>new vm};class II{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Qr("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}const ea="FirestoreClient";class DI{constructor(t,n,s,o,u){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Pn.UNAUTHENTICATED,this.clientId=Lm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{gt(ea,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(gt(ea,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Va;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=ip(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function Vg(r,t){r.asyncQueue.verifyOperationInProgress(),gt(ea,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await fb(t.localStore,o),s=o)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function aE(r,t){r.asyncQueue.verifyOperationInProgress();const n=await NI(r);gt(ea,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener((s=>tE(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>tE(t.remoteStore,o))),r._onlineComponents=t}async function NI(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){gt(ea,"Using user provided OfflineComponentProvider");try{await Vg(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(o){return o.name==="FirebaseError"?o.code===it.FAILED_PRECONDITION||o.code===it.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Go("Error using user provided cache. Falling back to memory cache: "+n),await Vg(r,new qh)}}else gt(ea,"Using default OfflineComponentProvider"),await Vg(r,new CI(void 0));return r._offlineComponents}async function Nb(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(gt(ea,"Using user provided OnlineComponentProvider"),await aE(r,r._uninitializedComponentsProvider._online)):(gt(ea,"Using default OnlineComponentProvider"),await aE(r,new vm))),r._onlineComponents}function OI(r){return Nb(r).then((t=>t.syncEngine))}async function oE(r){const t=await Nb(r),n=t.eventManager;return n.onListen=gI.bind(null,t.syncEngine),n.onUnlisten=yI.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=mI.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=_I.bind(null,t.syncEngine),n}function Ob(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}const lE=new Map;const xb="firestore.googleapis.com",uE=!0;class cE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new mt(it.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xb,this.ssl=uE}else this.host=t.host,this.ssl=t.ssl??uE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=cb;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<o2)throw new mt(it.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}GR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ob(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new mt(it.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new mt(it.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new mt(it.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class mf{constructor(t,n,s,o){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new mt(it.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new mt(it.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new kR;switch(s.type){case"firstParty":return new zR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new mt(it.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=lE.get(n);s&&(gt("ComponentProvider","Removing Datastore"),lE.delete(n),s.terminate())})(this),Promise.resolve()}}function xI(r,t,n,s={}){r=Lo(r,mf);const o=Jo(t),u=r._getSettings(),f={...u,emulatorOptions:r._getEmulatorOptions()},g=`${t}:${n}`;o&&(aT(`https://${g}`),oT("Firestore",!0)),u.host!==xb&&u.host!==g&&Go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...u,host:g,ssl:o,emulatorOptions:s};if(!La(m,f)&&(r._setSettings(m),s.mockUserToken)){let p,E;if(typeof s.mockUserToken=="string")p=s.mockUserToken,E=Pn.MOCK_USER;else{p=lw(s.mockUserToken,r._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new mt(it.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Pn(T)}r._authCredentials=new PR(new TT(p,E))}}class rl{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new rl(this.firestore,t,this._query)}}class on{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new on(this.firestore,t,this._key)}toJSON(){return{type:on._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(xu(n,on._jsonSchema))return new on(t,s||null,new At(Ae.fromString(n.referencePath)))}}on._jsonSchemaVersion="firestore/documentReference/1.0",on._jsonSchema={type:an("string",on._jsonSchemaVersion),referencePath:an("string")};class Ys extends rl{constructor(t,n,s){super(t,n,Hm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new on(this.firestore,null,new At(t))}withConverter(t){return new Ys(this.firestore,t,this._path)}}function MI(r,t,...n){if(r=di(r),bT("collection","path",t),r instanceof mf){const s=Ae.fromString(t,...n);return b0(s),new Ys(r,null,s)}{if(!(r instanceof on||r instanceof Ys))throw new mt(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ae.fromString(t,...n));return b0(s),new Ys(r.firestore,null,s)}}function VI(r,t,...n){if(r=di(r),arguments.length===1&&(t=Lm.newId()),bT("doc","path",t),r instanceof mf){const s=Ae.fromString(t,...n);return T0(s),new on(r,null,new At(s))}{if(!(r instanceof on||r instanceof Ys))throw new mt(it.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ae.fromString(t,...n));return T0(s),new on(r.firestore,r instanceof Ys?r.converter:null,new At(s))}}const hE="AsyncQueue";class fE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new gb(this,"async_queue_retry"),this._c=()=>{const s=Mg();s&&gt(hE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=Mg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Mg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Va;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!nl(t))throw t;gt(hE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,Qr("INTERNAL UNHANDLED ERROR: ",dE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const o=np.createAndSchedule(this,t,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Dt(47125,{Pc:dE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function dE(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}function gE(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(r,["next","error","complete"])}class Hh extends mf{constructor(t,n,s,o){super(t,n,s,o),this.type="firestore",this._queue=new fE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new fE(t),this._firestoreClient=void 0,await t}}}function kI(r,t){const n=typeof r=="object"?r:hT(),s=typeof r=="string"?r:Mh,o=km(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=aw("firestore");u&&xI(o,...u)}return o}function Mb(r){if(r._terminated)throw new mt(it.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||PI(r),r._firestoreClient}function PI(r){const t=r._freezeSettings(),n=(function(o,u,f,g){return new nC(o,u,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,Ob(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new DI(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(r._componentsProvider))}class Mi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Mi(Dn.fromBase64String(t))}catch(n){throw new mt(it.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Mi(Dn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Mi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(xu(t,Mi._jsonSchema))return Mi.fromBase64String(t.bytes)}}Mi._jsonSchemaVersion="firestore/bytes/1.0",Mi._jsonSchema={type:an("string",Mi._jsonSchemaVersion),bytes:an("string")};class op{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new mt(it.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Vb{constructor(t){this._methodName=t}}class pr{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new mt(it.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new mt(it.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Xt(this._lat,t._lat)||Xt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pr._jsonSchemaVersion}}static fromJSON(t){if(xu(t,pr._jsonSchema))return new pr(t.latitude,t.longitude)}}pr._jsonSchemaVersion="firestore/geoPoint/1.0",pr._jsonSchema={type:an("string",pr._jsonSchemaVersion),latitude:an("number"),longitude:an("number")};class yr{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:yr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(xu(t,yr._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new yr(t.vectorValues);throw new mt(it.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yr._jsonSchemaVersion="firestore/vectorValue/1.0",yr._jsonSchema={type:an("string",yr._jsonSchemaVersion),vectorValues:an("object")};const LI=/^__.*__$/;class UI{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new Fa(t,this.data,this.fieldMask,n,this.fieldTransforms):new Vu(t,this.data,n,this.fieldTransforms)}}function kb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dt(40011,{Ac:r})}}class lp{constructor(t,n,s,o,u,f){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new lp({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Fh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(kb(this.Ac)&&LI.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class zI{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||ff(t)}Cc(t,n,s,o=!1){return new lp({Ac:t,methodName:n,Dc:s,path:In.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pb(r){const t=r._freezeSettings(),n=ff(r._databaseId);return new zI(r._databaseId,!!t.ignoreUndefinedProperties,n)}function jI(r,t,n,s,o,u={}){const f=r.Cc(u.merge||u.mergeFields?2:0,t,n,o);zb("Data must be an object, but it was:",f,s);const g=Lb(s,f);let m,p;if(u.merge)m=new $i(f.fieldMask),p=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const S=qI(t,T,n);if(!f.contains(S))throw new mt(it.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);FI(E,S)||E.push(S)}m=new $i(E),p=f.fieldTransforms.filter((T=>m.covers(T.field)))}else m=null,p=f.fieldTransforms;return new UI(new xi(g),m,p)}function BI(r,t,n,s=!1){return up(n,r.Cc(s?4:3,t))}function up(r,t){if(Ub(r=di(r)))return zb("Unsupported field value:",t,r),Lb(r,t);if(r instanceof Vb)return(function(s,o){if(!kb(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let f=0;for(const g of s){let m=up(g,o.wc(f));m==null&&(m={nullValue:"NULL_VALUE"}),u.push(m),f++}return{arrayValue:{values:u}}})(r,t)}return(function(s,o){if((s=di(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return wC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Ie.fromDate(s);return{timestampValue:zh(o.serializer,u)}}if(s instanceof Ie){const u=new Ie(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:zh(o.serializer,u)}}if(s instanceof pr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Mi)return{bytesValue:ib(o.serializer,s._byteString)};if(s instanceof on){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Qm(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof yr)return(function(f,g){return{mapValue:{fields:{[OT]:{stringValue:xT},[Vh]:{arrayValue:{values:f.toArray().map((p=>{if(typeof p!="number")throw g.Sc("VectorValues must only contain numeric values.");return Fm(g.serializer,p)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${nf(s)}`)})(r,t)}function Lb(r,t){const n={};return wT(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):qa(r,((s,o)=>{const u=up(o,t.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function Ub(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ie||r instanceof pr||r instanceof Mi||r instanceof on||r instanceof Vb||r instanceof yr)}function zb(r,t,n){if(!Ub(n)||!ST(n)){const s=nf(n);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function qI(r,t,n){if((t=di(t))instanceof op)return t._internalPath;if(typeof t=="string")return jb(r,t);throw Fh("Field path arguments must be of type string or ",r,!1,void 0,n)}const HI=new RegExp("[~\\*/\\[\\]]");function jb(r,t,n){if(t.search(HI)>=0)throw Fh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new op(...t.split("."))._internalPath}catch{throw Fh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Fh(r,t,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let g=`Function ${t}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let m="";return(u||f)&&(m+=" (found",u&&(m+=` in field ${s}`),f&&(m+=` in document ${o}`),m+=")"),new mt(it.INVALID_ARGUMENT,g+r+m)}function FI(r,t){return r.some((n=>n.isEqual(t)))}class Bb{constructor(t,n,s,o,u){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new on(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new GI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(cp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class GI extends Bb{data(){return super.data()}}function cp(r,t){return typeof t=="string"?jb(r,t):t instanceof op?t._internalPath:t._delegate._internalPath}function KI(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new mt(it.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hp{}class QI extends hp{}function YI(r,t,...n){let s=[];t instanceof hp&&s.push(t),s=s.concat(n),(function(u){const f=u.filter((m=>m instanceof fp)).length,g=u.filter((m=>m instanceof pf)).length;if(f>1||f>0&&g>0)throw new mt(it.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class pf extends QI{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new pf(t,n,s)}_apply(t){const n=this._parse(t);return qb(t._query,n),new rl(t.firestore,t.converter,um(t._query,n))}_parse(t){const n=Pb(t.firestore);return(function(u,f,g,m,p,E,T){let S;if(p.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new mt(it.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){pE(T,E);const K=[];for(const G of T)K.push(mE(m,u,G));S={arrayValue:{values:K}}}else S=mE(m,u,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||pE(T,E),S=BI(g,f,T,E==="in"||E==="not-in");return sn.create(p,E,S)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function $I(r,t,n){const s=t,o=cp("where",r);return pf._create(o,s,n)}class fp extends hp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new fp(t,n)}_parse(t){const n=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Zi.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(o,u){let f=o;const g=u.getFlattenedFilters();for(const m of g)qb(f,m),f=um(f,m)})(t._query,n),new rl(t.firestore,t.converter,um(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function mE(r,t,n){if(typeof(n=di(n))=="string"){if(n==="")throw new mt(it.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jT(t)&&n.indexOf("/")!==-1)throw new mt(it.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(Ae.fromString(n));if(!At.isDocumentKey(s))throw new mt(it.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return N0(r,new At(s))}if(n instanceof on)return N0(r,n._key);throw new mt(it.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nf(n)}.`)}function pE(r,t){if(!Array.isArray(r)||r.length===0)throw new mt(it.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function qb(r,t){const n=(function(o,u){for(const f of o)for(const g of f.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new mt(it.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new mt(it.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class XI{convertValue(t,n="none"){switch(Ws(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Qe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Js(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Dt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return qa(t,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(t){const n=t.fields?.[Vh].arrayValue?.values?.map((s=>Qe(s.doubleValue)));return new yr(n)}convertGeoPoint(t){return new pr(Qe(t.latitude),Qe(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=af(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Tu(t));default:return null}}convertTimestamp(t){const n=Zs(t);return new Ie(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=Ae.fromString(t);le(ub(s),9688,{name:t});const o=new bu(s.get(1),s.get(3)),u=new At(s.popFirst(5));return o.isEqual(n)||Qr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function ZI(r,t,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(t,n):r.toFirestore(t):t,s}class au{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ka extends Bb{constructor(t,n,s,o,u,f){super(t,n,s,o,f),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Th(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(cp("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new mt(it.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=ka._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ka._jsonSchemaVersion="firestore/documentSnapshot/1.0",ka._jsonSchema={type:an("string",ka._jsonSchemaVersion),bundleSource:an("string","DocumentSnapshot"),bundleName:an("string"),bundle:an("string")};class Th extends ka{data(t={}){return super.data(t)}}class zo{constructor(t,n,s,o){this._firestore=t,this._userDataWriter=n,this._snapshot=o,this.metadata=new au(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new Th(this._firestore,this._userDataWriter,s.key,s,new au(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new mt(it.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((g=>{const m=new Th(o._firestore,o._userDataWriter,g.doc.key,g.doc,new au(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:m,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const m=new Th(o._firestore,o._userDataWriter,g.doc.key,g.doc,new au(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,E=-1;return g.type!==0&&(p=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),E=f.indexOf(g.doc.key)),{type:JI(g.type),doc:m,oldIndex:p,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new mt(it.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=zo._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Lm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function JI(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dt(61501,{type:r})}}zo._jsonSchemaVersion="firestore/querySnapshot/1.0",zo._jsonSchema={type:an("string",zo._jsonSchemaVersion),bundleSource:an("string","QuerySnapshot"),bundleName:an("string"),bundle:an("string")};class Hb extends XI{constructor(t){super(),this.firestore=t}convertBytes(t){return new Mi(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new on(this.firestore,null,n)}}function WI(r,t,n){r=Lo(r,on);const s=Lo(r.firestore,Hh),o=ZI(r.converter,t,n);return eD(s,[jI(Pb(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,Gr.none())])}function tD(r,...t){r=di(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||gE(t[s])||(n=t[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(gE(t[s])){const m=t[s];t[s]=m.next?.bind(m),t[s+1]=m.error?.bind(m),t[s+2]=m.complete?.bind(m)}let u,f,g;if(r instanceof on)f=Lo(r.firestore,Hh),g=Hm(r._key.path),u={next:m=>{t[s]&&t[s](nD(f,r,m))},error:t[s+1],complete:t[s+2]};else{const m=Lo(r,rl);f=Lo(m.firestore,Hh),g=m._query;const p=new Hb(f);u={next:E=>{t[s]&&t[s](new zo(f,p,m,E))},error:t[s+1],complete:t[s+2]},KI(r._query)}return(function(p,E,T,S){const O=new II(S),K=new uI(E,O,T);return p.asyncQueue.enqueueAndForget((async()=>sI(await oE(p),K))),()=>{O.Nu(),p.asyncQueue.enqueueAndForget((async()=>aI(await oE(p),K)))}})(Mb(f),g,o,u)}function eD(r,t){return(function(s,o){const u=new Va;return s.asyncQueue.enqueueAndForget((async()=>vI(await OI(s),o,u))),u.promise})(Mb(r),t)}function nD(r,t,n){const s=n.docs.get(t._key),o=new Hb(r);return new ka(r,o,t._key,s,new au(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(o){tl=o})(Wo),Fo(new Ua("firestore",((s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),g=new Hh(new LR(s.getProvider("auth-internal")),new jR(f,s.getProvider("app-check-internal")),(function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new mt(it.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bu(p.options.projectId,E)})(f,o),f);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),Ks(y0,_0,t),Ks(y0,_0,"esm2020")})();function Fb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iD=Fb,Gb=new Nu("auth","Firebase",Fb());const Gh=new Mm("@firebase/auth");function rD(r,...t){Gh.logLevel<=$t.WARN&&Gh.warn(`Auth (${Wo}): ${r}`,...t)}function bh(r,...t){Gh.logLevel<=$t.ERROR&&Gh.error(`Auth (${Wo}): ${r}`,...t)}function $r(r,...t){throw dp(r,...t)}function _r(r,...t){return dp(r,...t)}function Kb(r,t,n){const s={...iD(),[t]:n};return new Nu("auth","Firebase",s).create(t,{appName:r.name})}function $s(r){return Kb(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dp(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return Gb.create(r,...t)}function Ot(r,t,...n){if(!r)throw dp(t,...n)}function Hr(r){const t="INTERNAL ASSERTION FAILED: "+r;throw bh(t),new Error(t)}function Xr(r,t){r||Hr(t)}function Em(){return typeof self<"u"&&self.location?.href||""}function sD(){return yE()==="http:"||yE()==="https:"}function yE(){return typeof self<"u"&&self.location?.protocol||null}function aD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sD()||gw()||"connection"in navigator)?navigator.onLine:!0}function oD(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Uu{constructor(t,n){this.shortDelay=t,this.longDelay=n,Xr(n>t,"Short delay should be less than long delay!"),this.isMobile=hw()||mw()}get(){return aD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function gp(r,t){Xr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Qb{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const lD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const uD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cD=new Uu(3e4,6e4);function yf(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function sl(r,t,n,s,o={}){return Yb(r,o,async()=>{let u={},f={};s&&(t==="GET"?f=s:u={body:JSON.stringify(s)});const g=Ou({key:r.config.apiKey,...f}).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const p={method:t,headers:m,...u};return dw()||(p.referrerPolicy="no-referrer"),r.emulatorConfig&&Jo(r.emulatorConfig.host)&&(p.credentials="include"),Qb.fetch()(await Xb(r,r.config.apiHost,n,g),p)})}async function Yb(r,t,n){r._canInitEmulator=!1;const s={...lD,...t};try{const o=new hD(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw dh(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const g=u.ok?f.errorMessage:f.error.message,[m,p]=g.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw dh(r,"credential-already-in-use",f);if(m==="EMAIL_EXISTS")throw dh(r,"email-already-in-use",f);if(m==="USER_DISABLED")throw dh(r,"user-disabled",f);const E=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Kb(r,E,p);$r(r,E)}}catch(o){if(o instanceof Jr)throw o;$r(r,"network-request-failed",{message:String(o)})}}async function $b(r,t,n,s,o={}){const u=await sl(r,t,n,s,o);return"mfaPendingCredential"in u&&$r(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function Xb(r,t,n,s){const o=`${t}${n}?${s}`,u=r,f=u.config.emulator?gp(r.config,o):`${r.config.apiScheme}://${o}`;return uD.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}class hD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(_r(this.auth,"network-request-failed")),cD.get())})}}function dh(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=_r(r,t,s);return o.customData._tokenResponse=n,o}async function fD(r,t){return sl(r,"POST","/v1/accounts:delete",t)}async function Kh(r,t){return sl(r,"POST","/v1/accounts:lookup",t)}function gu(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function dD(r,t=!1){const n=di(r),s=await n.getIdToken(t),o=mp(s);Ot(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:s,authTime:gu(kg(o.auth_time)),issuedAtTime:gu(kg(o.iat)),expirationTime:gu(kg(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function kg(r){return Number(r)*1e3}function mp(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return bh("JWT malformed, contained fewer than 3 sections"),null;try{const o=nT(n);return o?JSON.parse(o):(bh("Failed to decode base64 JWT payload"),null)}catch(o){return bh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function _E(r){const t=mp(r);return Ot(t,"internal-error"),Ot(typeof t.exp<"u","internal-error"),Ot(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function Ru(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof Jr&&gD(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function gD({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class mD{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Tm{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gu(this.lastLoginAt),this.creationTime=gu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Qh(r){const t=r.auth,n=await r.getIdToken(),s=await Ru(r,Kh(t,{idToken:n}));Ot(s?.users.length,t,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?Zb(o.providerUserInfo):[],f=yD(r.providerData,u),g=r.isAnonymous,m=!(r.email&&o.passwordHash)&&!f?.length,p=g?m:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Tm(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(r,E)}async function pD(r){const t=di(r);await Qh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function yD(r,t){return[...r.filter(s=>!t.some(o=>o.providerId===s.providerId)),...t]}function Zb(r){return r.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function _D(r,t){const n=await Yb(r,{},async()=>{const s=Ou({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=await Xb(r,o,"/v1/token",`key=${u}`),g=await r._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:g,body:s};return r.emulatorConfig&&Jo(r.emulatorConfig.host)&&(m.credentials="include"),Qb.fetch()(f,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function vD(r,t){return sl(r,"POST","/v2/accounts:revokeToken",yf(r,t))}class jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Ot(t.idToken,"internal-error"),Ot(typeof t.idToken<"u","internal-error"),Ot(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):_E(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Ot(t.length!==0,"internal-error");const n=_E(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ot(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await _D(t,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new jo;return s&&(Ot(typeof s=="string","internal-error",{appName:t}),f.refreshToken=s),o&&(Ot(typeof o=="string","internal-error",{appName:t}),f.accessToken=o),u&&(Ot(typeof u=="number","internal-error",{appName:t}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new jo,this.toJSON())}_performRefresh(){return Hr("not implemented")}}function Vs(r,t){Ot(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Xi{constructor({uid:t,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new mD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Tm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const n=await Ru(this,this.stsTokenManager.getToken(this.auth,t));return Ot(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return dD(this,t)}reload(){return pD(this)}_assign(t){this!==t&&(Ot(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Xi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){Ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await Qh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yi(this.auth.app))return Promise.reject($s(this.auth));const t=await this.getIdToken();return await Ru(this,fD(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,g=n.tenantId??void 0,m=n._redirectEventId??void 0,p=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:O,providerData:K,stsTokenManager:G}=n;Ot(T&&G,t,"internal-error");const $=jo.fromJSON(this.name,G);Ot(typeof T=="string",t,"internal-error"),Vs(s,t.name),Vs(o,t.name),Ot(typeof S=="boolean",t,"internal-error"),Ot(typeof O=="boolean",t,"internal-error"),Vs(u,t.name),Vs(f,t.name),Vs(g,t.name),Vs(m,t.name),Vs(p,t.name),Vs(E,t.name);const lt=new Xi({uid:T,auth:t,email:o,emailVerified:S,displayName:s,isAnonymous:O,photoURL:f,phoneNumber:u,tenantId:g,stsTokenManager:$,createdAt:p,lastLoginAt:E});return K&&Array.isArray(K)&&(lt.providerData=K.map(ht=>({...ht}))),m&&(lt._redirectEventId=m),lt}static async _fromIdTokenResponse(t,n,s=!1){const o=new jo;o.updateFromServerResponse(n);const u=new Xi({uid:n.localId,auth:t,stsTokenManager:o,isAnonymous:s});return await Qh(u),u}static async _fromGetAccountInfoResponse(t,n,s){const o=n.users[0];Ot(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Zb(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,g=new jo;g.updateFromIdToken(s);const m=new Xi({uid:o.localId,auth:t,stsTokenManager:g,isAnonymous:f}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Tm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(m,p),m}}const vE=new Map;function Fr(r){Xr(r instanceof Function,"Expected a class definition");let t=vE.get(r);return t?(Xr(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,vE.set(r,t),t)}class Jb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}Jb.type="NONE";const EE=Jb;function Sh(r,t,n){return`firebase:${r}:${t}:${n}`}class Bo{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Sh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Sh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Kh(this.auth,{idToken:t}).catch(()=>{});return n?Xi._fromGetAccountInfoResponse(this.auth,n,t):null}return Xi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Bo(Fr(EE),t,s);const o=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||Fr(EE);const f=Sh(s,t.config.apiKey,t.name);let g=null;for(const p of n)try{const E=await p._get(f);if(E){let T;if(typeof E=="string"){const S=await Kh(t,{idToken:E}).catch(()=>{});if(!S)break;T=await Xi._fromGetAccountInfoResponse(t,S,E)}else T=Xi._fromJSON(t,E);p!==u&&(g=T),u=p;break}}catch{}const m=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!m.length?new Bo(u,t,s):(u=m[0],g&&await u._set(f,g.toJSON()),await Promise.all(n.map(async p=>{if(p!==u)try{await p._remove(f)}catch{}})),new Bo(u,t,s))}}function TE(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(n1(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Wb(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(r1(t))return"Blackberry";if(s1(t))return"Webos";if(t1(t))return"Safari";if((t.includes("chrome/")||e1(t))&&!t.includes("edge/"))return"Chrome";if(i1(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function Wb(r=Un()){return/firefox\//i.test(r)}function t1(r=Un()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function e1(r=Un()){return/crios\//i.test(r)}function n1(r=Un()){return/iemobile/i.test(r)}function i1(r=Un()){return/android/i.test(r)}function r1(r=Un()){return/blackberry/i.test(r)}function s1(r=Un()){return/webos/i.test(r)}function pp(r=Un()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function ED(r=Un()){return pp(r)&&!!window.navigator?.standalone}function TD(){return pw()&&document.documentMode===10}function a1(r=Un()){return pp(r)||i1(r)||s1(r)||r1(r)||/windows phone/i.test(r)||n1(r)}function o1(r,t=[]){let n;switch(r){case"Browser":n=TE(Un());break;case"Worker":n=`${TE(Un())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wo}/${s}`}class bD{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=u=>new Promise((f,g)=>{try{const m=t(u);f(m)}catch(m){g(m)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function SD(r,t={}){return sl(r,"GET","/v2/passwordPolicy",yf(r,t))}const AD=6;class wD{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??AD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),o&&(n.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<t.length;o++)s=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}class RD{constructor(t,n,s,o){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bE(this),this.idTokenSubscription=new bE(this),this.beforeStateQueue=new bD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Fr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Bo.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Kh(this,{idToken:t}),s=await Xi._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Yi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=s?._redirectEventId,g=await this.tryRedirectSignIn(t);(!u||u===f)&&g?.user&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Qh(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=oD()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Yi(this.app))return Promise.reject($s(this));const n=t?di(t):null;return n&&Ot(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Ot(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Yi(this.app)?Promise.reject($s(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Yi(this.app)?Promise.reject($s(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await SD(this),n=new wD(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Nu("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await vD(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Fr(t)||this._popupRedirectResolver;Ot(n,this,"argument-error"),this.redirectPersistenceManager=await Bo.create(this,[Fr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ot(g,this,"internal-error"),g.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const m=t.addObserver(n,s,o);return()=>{f=!0,m()}}else{const m=t.addObserver(n);return()=>{f=!0,m()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=o1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(Yi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&rD(`Error while retrieving App Check token: ${t.error}`),t?.token}}function _f(r){return di(r)}class bE{constructor(t){this.auth=t,this.observer=null,this.addObserver=Aw(n=>this.observer=n)}get next(){return Ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let yp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CD(r){yp=r}function ID(r){return yp.loadJS(r)}function DD(){return yp.gapiScript}function ND(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function OD(r,t){const n=km(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(La(u,t??{}))return o;$r(o,"already-initialized")}return n.initialize({options:t})}function xD(r,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Fr);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function MD(r,t,n){const s=_f(r);Ot(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const o=!1,u=l1(t),{host:f,port:g}=VD(t),m=g===null?"":`:${g}`,p={url:`${u}//${f}${m}/`},E=Object.freeze({host:f,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ot(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ot(La(p,s.config.emulator)&&La(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,Jo(f)?(aT(`${u}//${f}${m}`),oT("Auth",!0)):kD()}function l1(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function VD(r){const t=l1(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:SE(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:SE(f)}}}function SE(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function kD(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class u1{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Hr("not implemented")}_getIdTokenResponse(t){return Hr("not implemented")}_linkToIdToken(t,n){return Hr("not implemented")}_getReauthenticationResolver(t){return Hr("not implemented")}}async function qo(r,t){return $b(r,"POST","/v1/accounts:signInWithIdp",yf(r,t))}const PD="http://localhost";class Ba extends u1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Ba(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):$r("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const f=new Ba(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(t){const n=this.buildRequest();return qo(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,qo(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,qo(t,n)}buildRequest(){const t={requestUri:PD,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Ou(n)}return t}}class c1{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class zu extends c1{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class zs extends zu{constructor(){super("facebook.com")}static credential(t){return Ba._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return zs.credentialFromTaggedObject(t)}static credentialFromError(t){return zs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return zs.credential(t.oauthAccessToken)}catch{return null}}}zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";zs.PROVIDER_ID="facebook.com";class js extends zu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Ba._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return js.credentialFromTaggedObject(t)}static credentialFromError(t){return js.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return js.credential(n,s)}catch{return null}}}js.GOOGLE_SIGN_IN_METHOD="google.com";js.PROVIDER_ID="google.com";class Bs extends zu{constructor(){super("github.com")}static credential(t){return Ba._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Bs.credentialFromTaggedObject(t)}static credentialFromError(t){return Bs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Bs.credential(t.oauthAccessToken)}catch{return null}}}Bs.GITHUB_SIGN_IN_METHOD="github.com";Bs.PROVIDER_ID="github.com";class qs extends zu{constructor(){super("twitter.com")}static credential(t,n){return Ba._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return qs.credentialFromTaggedObject(t)}static credentialFromError(t){return qs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return qs.credential(n,s)}catch{return null}}}qs.TWITTER_SIGN_IN_METHOD="twitter.com";qs.PROVIDER_ID="twitter.com";async function LD(r,t){return $b(r,"POST","/v1/accounts:signUp",yf(r,t))}class na{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,o=!1){const u=await Xi._fromIdTokenResponse(t,s,o),f=AE(s);return new na({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const o=AE(s);return new na({user:t,providerId:o,_tokenResponse:s,operationType:n})}}function AE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}async function UD(r){if(Yi(r.app))return Promise.reject($s(r));const t=_f(r);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new na({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await LD(t,{returnSecureToken:!0}),s=await na._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(s.user),s}class Yh extends Jr{constructor(t,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Yh.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,o){return new Yh(t,n,s,o)}}function h1(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Yh._fromErrorAndOperation(r,u,t,s):u})}async function zD(r,t,n=!1){const s=await Ru(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return na._forOperation(r,"link",s)}async function jD(r,t,n=!1){const{auth:s}=r;if(Yi(s.app))return Promise.reject($s(s));const o="reauthenticate";try{const u=await Ru(r,h1(s,o,t,r),n);Ot(u.idToken,s,"internal-error");const f=mp(u.idToken);Ot(f,s,"internal-error");const{sub:g}=f;return Ot(r.uid===g,s,"user-mismatch"),na._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&$r(s,"user-mismatch"),u}}async function BD(r,t,n=!1){if(Yi(r.app))return Promise.reject($s(r));const s="signIn",o=await h1(r,s,t),u=await na._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}function qD(r,t,n,s){return di(r).onIdTokenChanged(t,n,s)}function HD(r,t,n){return di(r).beforeAuthStateChanged(t,n)}const $h="__sak";class f1{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($h,"1"),this.storage.removeItem($h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const FD=1e3,GD=10;class d1 extends f1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=a1(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&t(n,o,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((f,g,m)=>{this.notifyListeners(f,m)});return}const s=t.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);TD()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,GD):o()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},FD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}d1.type="LOCAL";const KD=d1;class g1 extends f1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}g1.type="SESSION";const m1=g1;function QD(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}class vf{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(o=>o.isListeningto(t));if(n)return n;const s=new vf(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const g=Array.from(f).map(async p=>p(n.origin,u)),m=await QD(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:m})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vf.receivers=[];function _p(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}class YD{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((g,m)=>{const p=_p("",20);o.port1.start();const E=setTimeout(()=>{m(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(S.data.response);break;default:clearTimeout(E),clearTimeout(u),m(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:p,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function vr(){return window}function $D(r){vr().location.href=r}function p1(){return typeof vr().WorkerGlobalScope<"u"&&typeof vr().importScripts=="function"}async function XD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZD(){return navigator?.serviceWorker?.controller||null}function JD(){return p1()?self:null}const y1="firebaseLocalStorageDb",WD=1,Xh="firebaseLocalStorage",_1="fbase_key";class ju{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ef(r,t){return r.transaction([Xh],t?"readwrite":"readonly").objectStore(Xh)}function tN(){const r=indexedDB.deleteDatabase(y1);return new ju(r).toPromise()}function bm(){const r=indexedDB.open(y1,WD);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Xh,{keyPath:_1})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Xh)?t(s):(s.close(),await tN(),t(await bm()))})})}async function wE(r,t,n){const s=Ef(r,!0).put({[_1]:t,value:n});return new ju(s).toPromise()}async function eN(r,t){const n=Ef(r,!1).get(t),s=await new ju(n).toPromise();return s===void 0?null:s.value}function RE(r,t){const n=Ef(r,!0).delete(t);return new ju(n).toPromise()}const nN=800,iN=3;class v1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bm(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>iN)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return p1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vf._getInstance(JD()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await XD(),!this.activeServiceWorker)return;this.sender=new YD(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||ZD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await bm();return await wE(t,$h,"1"),await RE(t,$h),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>wE(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>eN(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>RE(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=Ef(o,!1).getAll();return new ju(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}v1.type="LOCAL";const rN=v1;new Uu(3e4,6e4);function sN(r,t){return t?Fr(t):(Ot(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class vp extends u1{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return qo(t,this._buildIdpRequest())}_linkToIdToken(t,n){return qo(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return qo(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function aN(r){return BD(r.auth,new vp(r),r.bypassAuthState)}function oN(r){const{auth:t,user:n}=r;return Ot(n,t,"internal-error"),jD(n,new vp(r),r.bypassAuthState)}async function lN(r){const{auth:t,user:n}=r;return Ot(n,t,"internal-error"),zD(n,new vp(r),r.bypassAuthState)}class E1{constructor(t,n,s,o,u=!1){this.auth=t,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:g}=t;if(f){this.reject(f);return}const m={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(m))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return aN;case"linkViaPopup":case"linkViaRedirect":return lN;case"reauthViaPopup":case"reauthViaRedirect":return oN;default:$r(this.auth,"internal-error")}}resolve(t){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const uN=new Uu(2e3,1e4);class Po extends E1{constructor(t,n,s,o,u){super(t,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Po.currentPopupAction&&Po.currentPopupAction.cancel(),Po.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Ot(t,this.auth,"internal-error"),t}async onExecution(){Xr(this.filter.length===1,"Popup operations only handle one event");const t=_p();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_r(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(_r(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Po.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_r(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,uN.get())};t()}}Po.currentPopupAction=null;const cN="pendingRedirect",Ah=new Map;class hN extends E1{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Ah.get(this.auth._key());if(!t){try{const s=await fN(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Ah.set(this.auth._key(),t)}return this.bypassAuthState||Ah.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fN(r,t){const n=mN(t),s=gN(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function dN(r,t){Ah.set(r._key(),t)}function gN(r){return Fr(r._redirectPersistence)}function mN(r){return Sh(cN,r.config.apiKey,r.name)}async function pN(r,t,n=!1){if(Yi(r.app))return Promise.reject($s(r));const s=_f(r),o=sN(s,t),f=await new hN(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,t)),f}const yN=600*1e3;class _N{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!vN(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!T1(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(_r(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=yN&&this.cachedEventUids.clear(),this.cachedEventUids.has(CE(t))}saveEventToCache(t){this.cachedEventUids.add(CE(t)),this.lastProcessedEventTime=Date.now()}}function CE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function T1({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function vN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return T1(r);default:return!1}}async function EN(r,t={}){return sl(r,"GET","/v1/projects",t)}const TN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bN=/^https?/;async function SN(r){if(r.config.emulator)return;const{authorizedDomains:t}=await EN(r);for(const n of t)try{if(AN(n))return}catch{}$r(r,"unauthorized-domain")}function AN(r){const t=Em(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!bN.test(n))return!1;if(TN.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const wN=new Uu(3e4,6e4);function IE(){const r=vr().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function RN(r){return new Promise((t,n)=>{function s(){IE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{IE(),n(_r(r,"network-request-failed"))},timeout:wN.get()})}if(vr().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(vr().gapi?.load)s();else{const o=ND("iframefcb");return vr()[o]=()=>{gapi.load?s():n(_r(r,"network-request-failed"))},ID(`${DD()}?onload=${o}`).catch(u=>n(u))}}).catch(t=>{throw wh=null,t})}let wh=null;function CN(r){return wh=wh||RN(r),wh}const IN=new Uu(5e3,15e3),DN="__/auth/iframe",NN="emulator/auth/iframe",ON={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MN(r){const t=r.config;Ot(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?gp(t,NN):`https://${r.config.authDomain}/${DN}`,s={apiKey:t.apiKey,appName:r.name,v:Wo},o=xN.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Ou(s).slice(1)}`}async function VN(r){const t=await CN(r),n=vr().gapi;return Ot(n,r,"internal-error"),t.open({where:document.body,url:MN(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ON,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=_r(r,"network-request-failed"),g=vr().setTimeout(()=>{u(f)},IN.get());function m(){vr().clearTimeout(g),o(s)}s.ping(m).then(m,()=>{u(f)})}))}const kN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PN=500,LN=600,UN="_blank",zN="http://localhost";class DE{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jN(r,t,n,s=PN,o=LN){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const m={...kN,width:s.toString(),height:o.toString(),top:u,left:f},p=Un().toLowerCase();n&&(g=e1(p)?UN:n),Wb(p)&&(t=t||zN,m.scrollbars="yes");const E=Object.entries(m).reduce((S,[O,K])=>`${S}${O}=${K},`,"");if(ED(p)&&g!=="_self")return BN(t||"",g),new DE(null);const T=window.open(t||"",g,E);Ot(T,r,"popup-blocked");try{T.focus()}catch{}return new DE(T)}function BN(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const qN="__/auth/handler",HN="emulator/auth/handler",FN=encodeURIComponent("fac");async function NE(r,t,n,s,o,u){Ot(r.config.authDomain,r,"auth-domain-config-required"),Ot(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Wo,eventId:o};if(t instanceof c1){t.setDefaultLanguage(r.languageCode),f.providerId=t.providerId||"",Sw(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[E,T]of Object.entries({}))f[E]=T}if(t instanceof zu){const E=t.getScopes().filter(T=>T!=="");E.length>0&&(f.scopes=E.join(","))}r.tenantId&&(f.tid=r.tenantId);const g=f;for(const E of Object.keys(g))g[E]===void 0&&delete g[E];const m=await r._getAppCheckToken(),p=m?`#${FN}=${encodeURIComponent(m)}`:"";return`${GN(r)}?${Ou(g).slice(1)}${p}`}function GN({config:r}){return r.emulator?gp(r,HN):`https://${r.authDomain}/${qN}`}const Pg="webStorageSupport";class KN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=m1,this._completeRedirectFn=pN,this._overrideRedirectResult=dN}async _openPopup(t,n,s,o){Xr(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const u=await NE(t,n,s,Em(),o);return jN(t,u,_p())}async _openRedirect(t,n,s,o){await this._originValidation(t);const u=await NE(t,n,s,Em(),o);return $D(u),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Xr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await VN(t),s=new _N(t);return n.register("authEvent",o=>(Ot(o?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Pg,{type:Pg},o=>{const u=o?.[0]?.[Pg];u!==void 0&&n(!!u),$r(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=SN(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return a1()||t1()||pp()}}const QN=KN;var OE="@firebase/auth",xE="1.12.0";class YN{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function $N(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XN(r){Fo(new Ua("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:f,authDomain:g}=s.options;Ot(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:f,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:o1(r)},p=new RD(s,o,u,m);return xD(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Fo(new Ua("auth-internal",t=>{const n=_f(t.getProvider("auth").getImmediate());return(s=>new YN(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ks(OE,xE,$N(r)),Ks(OE,xE,"esm2020")}const ZN=300,JN=sT("authIdTokenMaxAge")||ZN;let ME=null;const WN=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>JN)return;const o=n?.token;ME!==o&&(ME=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function tO(r=hT()){const t=km(r,"auth");if(t.isInitialized())return t.getImmediate();const n=OD(r,{popupRedirectResolver:QN,persistence:[rN,KD,m1]}),s=sT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=WN(u.toString());HD(n,f,()=>f(n.currentUser)),qD(n,g=>f(g))}}const o=iT("auth");return o&&MD(n,`http://${o}`),n}function eO(){return document.getElementsByTagName("head")?.[0]??document}CD({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=o=>{const u=_r("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",eO().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XN("Browser");var nO="firebase",iO="12.7.0";Ks(nO,iO,"app");const VE={apiKey:"AIzaSyB3ncjSdbTdaUqac5QvHon-Id5mCo3pByM",authDomain:"dragmate-af04d.firebaseapp.com",projectId:"dragmate-af04d",storageBucket:"dragmate-af04d.firebasestorage.app",messagingSenderId:"370425129874",appId:"1:370425129874:web:4c5c526a593e8fa45a6f4b"};let Lg=null,Rh=null,Ch=null,Sm=!1;try{Object.values(VE).every(Boolean)?(Lg=f0().length?f0()[0]:cT(VE),Rh=kI(Lg),Ch=tO(Lg),Sm=!0,console.log(" Firebase initialized for DragMate")):console.warn(" DEMO MODE: Firebase env vars missing. Global features will run in local/demo mode only.")}catch(r){console.error(" Firebase initialization failed:",r)}const kE=3e4;async function rO(r){return r?r.currentUser?r.currentUser:(await UD(r)).user??null:null}async function PE(r,t){const n=VI(r,"presence",t.uid);await WI(n,{lastSeen:new Date,status:"online"},{merge:!0})}function sO(){const[r,t]=Z.useState({count:null,loading:!0,error:null,isOnline:!1,isSupported:Sm&&!!Rh&&!!Ch});return Z.useEffect(()=>{if(!Sm||!Rh||!Ch){t(m=>({...m,loading:!1,isSupported:!1}));return}const n=Rh,s=Ch;let o=!1,u=null,f=null;return(async()=>{try{const m=await rO(s);if(!m||o)return;await PE(n,m),t(T=>({...T,isOnline:!0,isSupported:!0})),u=window.setInterval(()=>{PE(n,m).catch(T=>{console.error("Failed to update presence",T)})},kE/2);const p=new Date(Date.now()-kE),E=YI(MI(n,"presence"),$I("lastSeen",">=",p));f=tD(E,T=>{o||t(S=>({...S,count:T.size,loading:!1,error:null}))},T=>{console.error("Presence subscription error",T),!o&&t(S=>({...S,loading:!1,error:T.message??"Failed to subscribe to presence"}))})}catch(m){if(console.error("Presence initialization failed",m),o)return;t(p=>({...p,loading:!1,error:m?.message??"Presence initialization failed",isSupported:!1}))}})(),()=>{o=!0,u!==null&&window.clearInterval(u),f&&f()}},[]),r}const aO=({onCreateRoom:r,onJoinRoom:t,isAuthLoading:n})=>{const[s,o]=Z.useState(""),[u,f]=Z.useState(!1),{count:g,loading:m,isSupported:p}=sO(),E=async()=>{f(!0);try{await r()}finally{f(!1)}};return et.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[85vh] gap-12 relative overflow-hidden",children:[et.jsxs("div",{className:"text-center space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-1000",children:[et.jsx("div",{className:"inline-flex items-center px-4 py-1.5 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-400 text-sm font-semibold tracking-wide",children:"PREMIUM MULTIPLAYER CHESS"}),et.jsx("h1",{className:"text-8xl font-black tracking-tight bg-clip-text text-transparent bg-linear-to-b from-white via-indigo-100 to-indigo-400",children:"DragMate"}),et.jsx("p",{className:"text-xl text-slate-400 max-w-xl mx-auto leading-relaxed font-medium",children:"Master the board with friends in a fluid, minimalist arena. Zero friction. Pure strategy."})]}),et.jsxs("div",{className:"liquid-glass p-12 w-full max-w-xl space-y-10 animate-in fade-in slide-in-from-bottom-12 duration-1000 delay-200",children:[et.jsxs("div",{className:"space-y-6",children:[et.jsxs("button",{onClick:E,disabled:u||n,className:"w-full btn-premium flex items-center justify-center gap-4 text-2xl py-5 group disabled:opacity-50 disabled:cursor-not-allowed",children:[u||n?et.jsx("div",{className:"w-7 h-7 border-3 border-white/20 border-t-white rounded-full animate-spin"}):et.jsx(HA,{size:28,className:"transition-transform group-hover:rotate-90"}),et.jsx("span",{children:n?"Initializing...":u?"Creating Arena...":"New Game"})]}),et.jsxs("div",{className:"relative flex items-center gap-6",children:[et.jsx("div",{className:"flex-1 h-px bg-slate-800"}),et.jsx("span",{className:"text-slate-600 text-xs font-black uppercase tracking-[0.2em]",children:"OR"}),et.jsx("div",{className:"flex-1 h-px bg-slate-800"})]}),et.jsxs("div",{className:"flex gap-4",children:[et.jsx("div",{className:"relative flex-1 group",children:et.jsx("input",{type:"text",placeholder:"Enter Room ID",value:s,onChange:T=>o(T.target.value),className:"w-full bg-slate-900/40 border border-slate-800/50 rounded-2xl px-8 py-5 text-xl placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all group-hover:border-slate-700"})}),et.jsx("button",{onClick:()=>t(s),disabled:!s.trim()||n,className:"bg-white text-slate-950 hover:bg-slate-100 disabled:opacity-20 disabled:grayscale px-8 py-5 rounded-2xl transition-all duration-300 font-black active:scale-95 shadow-2xl hover:shadow-white/10",children:et.jsx(BA,{size:28})})]})]}),et.jsxs("div",{className:"grid grid-cols-2 gap-6 pt-6 border-t border-slate-800/40",children:[et.jsxs("div",{className:"space-y-1",children:[et.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest",children:"Active Players"}),et.jsx("div",{className:"text-3xl font-bold text-white tracking-tight",children:p?m?"":(g??0).toLocaleString():"Demo"})]}),et.jsxs("div",{className:"space-y-1 text-right",children:[et.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest",children:"Global Sync"}),et.jsxs("div",{className:"text-3xl font-bold text-green-400 tracking-tight flex items-center justify-end gap-2",children:[et.jsx("span",{className:`w-2 h-2 rounded-full animate-pulse ${p?"bg-green-500":"bg-slate-600"}`}),p?"Live":"Demo"]})]})]})]}),et.jsxs("div",{className:"flex items-center gap-10 text-slate-600 font-bold uppercase tracking-widest text-[10px] animate-in fade-in duration-1000 delay-500",children:[et.jsx("a",{href:"#",className:"hover:text-indigo-400 transition-colors",children:"Documentation"}),et.jsx("a",{href:"#",className:"hover:text-indigo-400 transition-colors",children:"Leaderboard"}),et.jsx("a",{href:"#",className:"hover:text-indigo-400 transition-colors",children:"Source Code"})]})]})};var ou=JE();const Tf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function al(r){const t=Object.prototype.toString.call(r);return t==="[object Window]"||t==="[object global]"}function Ep(r){return"nodeType"in r}function ii(r){var t,n;return r?al(r)?r:Ep(r)&&(t=(n=r.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Tp(r){const{Document:t}=ii(r);return r instanceof t}function Bu(r){return al(r)?!1:r instanceof ii(r).HTMLElement}function b1(r){return r instanceof ii(r).SVGElement}function ol(r){return r?al(r)?r.document:Ep(r)?Tp(r)?r:Bu(r)||b1(r)?r.ownerDocument:document:document:document}const ia=Tf?Z.useLayoutEffect:Z.useEffect;function bp(r){const t=Z.useRef(r);return ia(()=>{t.current=r}),Z.useCallback(function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return t.current==null?void 0:t.current(...s)},[])}function oO(){const r=Z.useRef(null),t=Z.useCallback((s,o)=>{r.current=setInterval(s,o)},[]),n=Z.useCallback(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[]);return[t,n]}function Cu(r,t){t===void 0&&(t=[r]);const n=Z.useRef(r);return ia(()=>{n.current!==r&&(n.current=r)},t),n}function qu(r,t){const n=Z.useRef();return Z.useMemo(()=>{const s=r(n.current);return n.current=s,s},[...t])}function Zh(r){const t=bp(r),n=Z.useRef(null),s=Z.useCallback(o=>{o!==n.current&&t?.(o,n.current),n.current=o},[]);return[n,s]}function Am(r){const t=Z.useRef();return Z.useEffect(()=>{t.current=r},[r]),t.current}let Ug={};function bf(r,t){return Z.useMemo(()=>{if(t)return t;const n=Ug[r]==null?0:Ug[r]+1;return Ug[r]=n,r+"-"+n},[r,t])}function S1(r){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return s.reduce((u,f)=>{const g=Object.entries(f);for(const[m,p]of g){const E=u[m];E!=null&&(u[m]=E+r*p)}return u},{...t})}}const Ho=S1(1),Jh=S1(-1);function lO(r){return"clientX"in r&&"clientY"in r}function A1(r){if(!r)return!1;const{KeyboardEvent:t}=ii(r.target);return t&&r instanceof t}function uO(r){if(!r)return!1;const{TouchEvent:t}=ii(r.target);return t&&r instanceof t}function wm(r){if(uO(r)){if(r.touches&&r.touches.length){const{clientX:t,clientY:n}=r.touches[0];return{x:t,y:n}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:t,clientY:n}=r.changedTouches[0];return{x:t,y:n}}}return lO(r)?{x:r.clientX,y:r.clientY}:null}const Rm=Object.freeze({Translate:{toString(r){if(!r)return;const{x:t,y:n}=r;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:t,scaleY:n}=r;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(r){if(r)return[Rm.Translate.toString(r),Rm.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:t,duration:n,easing:s}=r;return t+" "+n+"ms "+s}}}),LE="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function cO(r){return r.matches(LE)?r:r.querySelector(LE)}const hO={display:"none"};function fO(r){let{id:t,value:n}=r;return ni.createElement("div",{id:t,style:hO},n)}function dO(r){let{id:t,announcement:n,ariaLiveType:s="assertive"}=r;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ni.createElement("div",{id:t,style:o,role:"status","aria-live":s,"aria-atomic":!0},n)}function gO(){const[r,t]=Z.useState("");return{announce:Z.useCallback(s=>{s!=null&&t(s)},[]),announcement:r}}const w1=Z.createContext(null);function mO(r){const t=Z.useContext(w1);Z.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(r)},[r,t])}function pO(){const[r]=Z.useState(()=>new Set),t=Z.useCallback(s=>(r.add(s),()=>r.delete(s)),[r]);return[Z.useCallback(s=>{let{type:o,event:u}=s;r.forEach(f=>{var g;return(g=f[o])==null?void 0:g.call(f,u)})},[r]),t]}const yO={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},_O={onDragStart(r){let{active:t}=r;return"Picked up draggable item "+t.id+"."},onDragOver(r){let{active:t,over:n}=r;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(r){let{active:t,over:n}=r;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(r){let{active:t}=r;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function vO(r){let{announcements:t=_O,container:n,hiddenTextDescribedById:s,screenReaderInstructions:o=yO}=r;const{announce:u,announcement:f}=gO(),g=bf("DndLiveRegion"),[m,p]=Z.useState(!1);if(Z.useEffect(()=>{p(!0)},[]),mO(Z.useMemo(()=>({onDragStart(T){let{active:S}=T;u(t.onDragStart({active:S}))},onDragMove(T){let{active:S,over:O}=T;t.onDragMove&&u(t.onDragMove({active:S,over:O}))},onDragOver(T){let{active:S,over:O}=T;u(t.onDragOver({active:S,over:O}))},onDragEnd(T){let{active:S,over:O}=T;u(t.onDragEnd({active:S,over:O}))},onDragCancel(T){let{active:S,over:O}=T;u(t.onDragCancel({active:S,over:O}))}}),[u,t])),!m)return null;const E=ni.createElement(ni.Fragment,null,ni.createElement(fO,{id:s,value:o.draggable}),ni.createElement(dO,{id:g,announcement:f}));return n?ou.createPortal(E,n):E}var fn;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(fn||(fn={}));function Wh(){}function zg(r,t){return Z.useMemo(()=>({sensor:r,options:{}}),[r,t])}function EO(){for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return Z.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const Ji=Object.freeze({x:0,y:0});function TO(r,t){let{data:{value:n}}=r,{data:{value:s}}=t;return s-n}function bO(r,t){if(!r||r.length===0)return null;const[n]=r;return n[t]}function SO(r,t){const n=Math.max(t.top,r.top),s=Math.max(t.left,r.left),o=Math.min(t.left+t.width,r.left+r.width),u=Math.min(t.top+t.height,r.top+r.height),f=o-s,g=u-n;if(s<o&&n<u){const m=t.width*t.height,p=r.width*r.height,E=f*g,T=E/(m+p-E);return Number(T.toFixed(4))}return 0}const AO=r=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=r;const o=[];for(const u of s){const{id:f}=u,g=n.get(f);if(g){const m=SO(g,t);m>0&&o.push({id:f,data:{droppableContainer:u,value:m}})}}return o.sort(TO)};function wO(r,t,n){return{...r,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function R1(r,t){return r&&t?{x:r.left-t.left,y:r.top-t.top}:Ji}function RO(r){return function(n){for(var s=arguments.length,o=new Array(s>1?s-1:0),u=1;u<s;u++)o[u-1]=arguments[u];return o.reduce((f,g)=>({...f,top:f.top+r*g.y,bottom:f.bottom+r*g.y,left:f.left+r*g.x,right:f.right+r*g.x}),{...n})}}const CO=RO(1);function IO(r){if(r.startsWith("matrix3d(")){const t=r.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(r.startsWith("matrix(")){const t=r.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function DO(r,t,n){const s=IO(t);if(!s)return r;const{scaleX:o,scaleY:u,x:f,y:g}=s,m=r.left-f-(1-o)*parseFloat(n),p=r.top-g-(1-u)*parseFloat(n.slice(n.indexOf(" ")+1)),E=o?r.width/o:r.width,T=u?r.height/u:r.height;return{width:E,height:T,top:p,right:m+E,bottom:p+T,left:m}}const NO={ignoreTransform:!1};function Hu(r,t){t===void 0&&(t=NO);let n=r.getBoundingClientRect();if(t.ignoreTransform){const{transform:p,transformOrigin:E}=ii(r).getComputedStyle(r);p&&(n=DO(n,p,E))}const{top:s,left:o,width:u,height:f,bottom:g,right:m}=n;return{top:s,left:o,width:u,height:f,bottom:g,right:m}}function UE(r){return Hu(r,{ignoreTransform:!0})}function OO(r){const t=r.innerWidth,n=r.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function xO(r,t){return t===void 0&&(t=ii(r).getComputedStyle(r)),t.position==="fixed"}function MO(r,t){t===void 0&&(t=ii(r).getComputedStyle(r));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const u=t[o];return typeof u=="string"?n.test(u):!1})}function Sp(r,t){const n=[];function s(o){if(t!=null&&n.length>=t||!o)return n;if(Tp(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!Bu(o)||b1(o)||n.includes(o))return n;const u=ii(r).getComputedStyle(o);return o!==r&&MO(o,u)&&n.push(o),xO(o,u)?n:s(o.parentNode)}return r?s(r):n}function C1(r){const[t]=Sp(r,1);return t??null}function jg(r){return!Tf||!r?null:al(r)?r:Ep(r)?Tp(r)||r===ol(r).scrollingElement?window:Bu(r)?r:null:null}function I1(r){return al(r)?r.scrollX:r.scrollLeft}function D1(r){return al(r)?r.scrollY:r.scrollTop}function Cm(r){return{x:I1(r),y:D1(r)}}var vn;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(vn||(vn={}));function N1(r){return!Tf||!r?!1:r===document.scrollingElement}function O1(r){const t={x:0,y:0},n=N1(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},s={x:r.scrollWidth-n.width,y:r.scrollHeight-n.height},o=r.scrollTop<=t.y,u=r.scrollLeft<=t.x,f=r.scrollTop>=s.y,g=r.scrollLeft>=s.x;return{isTop:o,isLeft:u,isBottom:f,isRight:g,maxScroll:s,minScroll:t}}const VO={x:.2,y:.2};function kO(r,t,n,s,o){let{top:u,left:f,right:g,bottom:m}=n;s===void 0&&(s=10),o===void 0&&(o=VO);const{isTop:p,isBottom:E,isLeft:T,isRight:S}=O1(r),O={x:0,y:0},K={x:0,y:0},G={height:t.height*o.y,width:t.width*o.x};return!p&&u<=t.top+G.height?(O.y=vn.Backward,K.y=s*Math.abs((t.top+G.height-u)/G.height)):!E&&m>=t.bottom-G.height&&(O.y=vn.Forward,K.y=s*Math.abs((t.bottom-G.height-m)/G.height)),!S&&g>=t.right-G.width?(O.x=vn.Forward,K.x=s*Math.abs((t.right-G.width-g)/G.width)):!T&&f<=t.left+G.width&&(O.x=vn.Backward,K.x=s*Math.abs((t.left+G.width-f)/G.width)),{direction:O,speed:K}}function PO(r){if(r===document.scrollingElement){const{innerWidth:u,innerHeight:f}=window;return{top:0,left:0,right:u,bottom:f,width:u,height:f}}const{top:t,left:n,right:s,bottom:o}=r.getBoundingClientRect();return{top:t,left:n,right:s,bottom:o,width:r.clientWidth,height:r.clientHeight}}function x1(r){return r.reduce((t,n)=>Ho(t,Cm(n)),Ji)}function LO(r){return r.reduce((t,n)=>t+I1(n),0)}function UO(r){return r.reduce((t,n)=>t+D1(n),0)}function zO(r,t){if(t===void 0&&(t=Hu),!r)return;const{top:n,left:s,bottom:o,right:u}=t(r);C1(r)&&(o<=0||u<=0||n>=window.innerHeight||s>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const jO=[["x",["left","right"],LO],["y",["top","bottom"],UO]];class Ap{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=Sp(n),o=x1(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[u,f,g]of jO)for(const m of f)Object.defineProperty(this,m,{get:()=>{const p=g(s),E=o[u]-p;return this.rect[m]+E},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class mu{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=t}add(t,n,s){var o;(o=this.target)==null||o.addEventListener(t,n,s),this.listeners.push([t,n,s])}}function BO(r){const{EventTarget:t}=ii(r);return r instanceof t?r:ol(r)}function Bg(r,t){const n=Math.abs(r.x),s=Math.abs(r.y);return typeof t=="number"?Math.sqrt(n**2+s**2)>t:"x"in t&&"y"in t?n>t.x&&s>t.y:"x"in t?n>t.x:"y"in t?s>t.y:!1}var Oi;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(Oi||(Oi={}));function zE(r){r.preventDefault()}function qO(r){r.stopPropagation()}var ve;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter",r.Tab="Tab"})(ve||(ve={}));const M1={start:[ve.Space,ve.Enter],cancel:[ve.Esc],end:[ve.Space,ve.Enter,ve.Tab]},HO=(r,t)=>{let{currentCoordinates:n}=t;switch(r.code){case ve.Right:return{...n,x:n.x+25};case ve.Left:return{...n,x:n.x-25};case ve.Down:return{...n,y:n.y+25};case ve.Up:return{...n,y:n.y-25}}};class V1{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new mu(ol(n)),this.windowListeners=new mu(ii(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Oi.Resize,this.handleCancel),this.windowListeners.add(Oi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Oi.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,s=t.node.current;s&&zO(s),n(Ji)}handleKeyDown(t){if(A1(t)){const{active:n,context:s,options:o}=this.props,{keyboardCodes:u=M1,coordinateGetter:f=HO,scrollBehavior:g="smooth"}=o,{code:m}=t;if(u.end.includes(m)){this.handleEnd(t);return}if(u.cancel.includes(m)){this.handleCancel(t);return}const{collisionRect:p}=s.current,E=p?{x:p.left,y:p.top}:Ji;this.referenceCoordinates||(this.referenceCoordinates=E);const T=f(t,{active:n,context:s.current,currentCoordinates:E});if(T){const S=Jh(T,E),O={x:0,y:0},{scrollableAncestors:K}=s.current;for(const G of K){const $=t.code,{isTop:lt,isRight:ht,isLeft:ut,isBottom:It,maxScroll:wt,minScroll:vt}=O1(G),R=PO(G),w={x:Math.min($===ve.Right?R.right-R.width/2:R.right,Math.max($===ve.Right?R.left:R.left+R.width/2,T.x)),y:Math.min($===ve.Down?R.bottom-R.height/2:R.bottom,Math.max($===ve.Down?R.top:R.top+R.height/2,T.y))},C=$===ve.Right&&!ht||$===ve.Left&&!ut,x=$===ve.Down&&!It||$===ve.Up&&!lt;if(C&&w.x!==T.x){const N=G.scrollLeft+S.x,k=$===ve.Right&&N<=wt.x||$===ve.Left&&N>=vt.x;if(k&&!S.y){G.scrollTo({left:N,behavior:g});return}k?O.x=G.scrollLeft-N:O.x=$===ve.Right?G.scrollLeft-wt.x:G.scrollLeft-vt.x,O.x&&G.scrollBy({left:-O.x,behavior:g});break}else if(x&&w.y!==T.y){const N=G.scrollTop+S.y,k=$===ve.Down&&N<=wt.y||$===ve.Up&&N>=vt.y;if(k&&!S.x){G.scrollTo({top:N,behavior:g});return}k?O.y=G.scrollTop-N:O.y=$===ve.Down?G.scrollTop-wt.y:G.scrollTop-vt.y,O.y&&G.scrollBy({top:-O.y,behavior:g});break}}this.handleMove(t,Ho(Jh(T,this.referenceCoordinates),O))}}}handleMove(t,n){const{onMove:s}=this.props;t.preventDefault(),s(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}V1.activators=[{eventName:"onKeyDown",handler:(r,t,n)=>{let{keyboardCodes:s=M1,onActivation:o}=t,{active:u}=n;const{code:f}=r.nativeEvent;if(s.start.includes(f)){const g=u.activatorNode.current;return g&&r.target!==g?!1:(r.preventDefault(),o?.({event:r.nativeEvent}),!0)}return!1}}];function jE(r){return!!(r&&"distance"in r)}function BE(r){return!!(r&&"delay"in r)}class wp{constructor(t,n,s){var o;s===void 0&&(s=BO(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:u}=t,{target:f}=u;this.props=t,this.events=n,this.document=ol(f),this.documentListeners=new mu(this.document),this.listeners=new mu(s),this.windowListeners=new mu(ii(f)),this.initialCoordinates=(o=wm(u))!=null?o:Ji,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Oi.Resize,this.handleCancel),this.windowListeners.add(Oi.DragStart,zE),this.windowListeners.add(Oi.VisibilityChange,this.handleCancel),this.windowListeners.add(Oi.ContextMenu,zE),this.documentListeners.add(Oi.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(BE(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(jE(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:s,onPending:o}=this.props;o(s,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Oi.Click,qO,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Oi.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:s,initialCoordinates:o,props:u}=this,{onMove:f,options:{activationConstraint:g}}=u;if(!o)return;const m=(n=wm(t))!=null?n:Ji,p=Jh(o,m);if(!s&&g){if(jE(g)){if(g.tolerance!=null&&Bg(p,g.tolerance))return this.handleCancel();if(Bg(p,g.distance))return this.handleStart()}if(BE(g)&&Bg(p,g.tolerance))return this.handleCancel();this.handlePending(g,p);return}t.cancelable&&t.preventDefault(),f(m)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===ve.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const FO={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Rp extends wp{constructor(t){const{event:n}=t,s=ol(n.target);super(t,FO,s)}}Rp.activators=[{eventName:"onPointerDown",handler:(r,t)=>{let{nativeEvent:n}=r,{onActivation:s}=t;return!n.isPrimary||n.button!==0?!1:(s?.({event:n}),!0)}}];const GO={move:{name:"mousemove"},end:{name:"mouseup"}};var Im;(function(r){r[r.RightClick=2]="RightClick"})(Im||(Im={}));class k1 extends wp{constructor(t){super(t,GO,ol(t.event.target))}}k1.activators=[{eventName:"onMouseDown",handler:(r,t)=>{let{nativeEvent:n}=r,{onActivation:s}=t;return n.button===Im.RightClick?!1:(s?.({event:n}),!0)}}];const qg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class P1 extends wp{constructor(t){super(t,qg)}static setup(){return window.addEventListener(qg.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(qg.move.name,t)};function t(){}}}P1.activators=[{eventName:"onTouchStart",handler:(r,t)=>{let{nativeEvent:n}=r,{onActivation:s}=t;const{touches:o}=n;return o.length>1?!1:(s?.({event:n}),!0)}}];var pu;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(pu||(pu={}));var tf;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(tf||(tf={}));function KO(r){let{acceleration:t,activator:n=pu.Pointer,canScroll:s,draggingRect:o,enabled:u,interval:f=5,order:g=tf.TreeOrder,pointerCoordinates:m,scrollableAncestors:p,scrollableAncestorRects:E,delta:T,threshold:S}=r;const O=YO({delta:T,disabled:!u}),[K,G]=oO(),$=Z.useRef({x:0,y:0}),lt=Z.useRef({x:0,y:0}),ht=Z.useMemo(()=>{switch(n){case pu.Pointer:return m?{top:m.y,bottom:m.y,left:m.x,right:m.x}:null;case pu.DraggableRect:return o}},[n,o,m]),ut=Z.useRef(null),It=Z.useCallback(()=>{const vt=ut.current;if(!vt)return;const R=$.current.x*lt.current.x,w=$.current.y*lt.current.y;vt.scrollBy(R,w)},[]),wt=Z.useMemo(()=>g===tf.TreeOrder?[...p].reverse():p,[g,p]);Z.useEffect(()=>{if(!u||!p.length||!ht){G();return}for(const vt of wt){if(s?.(vt)===!1)continue;const R=p.indexOf(vt),w=E[R];if(!w)continue;const{direction:C,speed:x}=kO(vt,w,ht,t,S);for(const N of["x","y"])O[N][C[N]]||(x[N]=0,C[N]=0);if(x.x>0||x.y>0){G(),ut.current=vt,K(It,f),$.current=x,lt.current=C;return}}$.current={x:0,y:0},lt.current={x:0,y:0},G()},[t,It,s,G,u,f,JSON.stringify(ht),JSON.stringify(O),K,p,wt,E,JSON.stringify(S)])}const QO={x:{[vn.Backward]:!1,[vn.Forward]:!1},y:{[vn.Backward]:!1,[vn.Forward]:!1}};function YO(r){let{delta:t,disabled:n}=r;const s=Am(t);return qu(o=>{if(n||!s||!o)return QO;const u={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[vn.Backward]:o.x[vn.Backward]||u.x===-1,[vn.Forward]:o.x[vn.Forward]||u.x===1},y:{[vn.Backward]:o.y[vn.Backward]||u.y===-1,[vn.Forward]:o.y[vn.Forward]||u.y===1}}},[n,t,s])}function $O(r,t){const n=t!=null?r.get(t):void 0,s=n?n.node.current:null;return qu(o=>{var u;return t==null?null:(u=s??o)!=null?u:null},[s,t])}function XO(r,t){return Z.useMemo(()=>r.reduce((n,s)=>{const{sensor:o}=s,u=o.activators.map(f=>({eventName:f.eventName,handler:t(f.handler,s)}));return[...n,...u]},[]),[r,t])}var Iu;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(Iu||(Iu={}));var Dm;(function(r){r.Optimized="optimized"})(Dm||(Dm={}));const qE=new Map;function ZO(r,t){let{dragging:n,dependencies:s,config:o}=t;const[u,f]=Z.useState(null),{frequency:g,measure:m,strategy:p}=o,E=Z.useRef(r),T=$(),S=Cu(T),O=Z.useCallback(function(lt){lt===void 0&&(lt=[]),!S.current&&f(ht=>ht===null?lt:ht.concat(lt.filter(ut=>!ht.includes(ut))))},[S]),K=Z.useRef(null),G=qu(lt=>{if(T&&!n)return qE;if(!lt||lt===qE||E.current!==r||u!=null){const ht=new Map;for(let ut of r){if(!ut)continue;if(u&&u.length>0&&!u.includes(ut.id)&&ut.rect.current){ht.set(ut.id,ut.rect.current);continue}const It=ut.node.current,wt=It?new Ap(m(It),It):null;ut.rect.current=wt,wt&&ht.set(ut.id,wt)}return ht}return lt},[r,u,n,T,m]);return Z.useEffect(()=>{E.current=r},[r]),Z.useEffect(()=>{T||O()},[n,T]),Z.useEffect(()=>{u&&u.length>0&&f(null)},[JSON.stringify(u)]),Z.useEffect(()=>{T||typeof g!="number"||K.current!==null||(K.current=setTimeout(()=>{O(),K.current=null},g))},[g,T,O,...s]),{droppableRects:G,measureDroppableContainers:O,measuringScheduled:u!=null};function $(){switch(p){case Iu.Always:return!1;case Iu.BeforeDragging:return n;default:return!n}}}function L1(r,t){return qu(n=>r?n||(typeof t=="function"?t(r):r):null,[t,r])}function JO(r,t){return L1(r,t)}function WO(r){let{callback:t,disabled:n}=r;const s=bp(t),o=Z.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(s)},[s,n]);return Z.useEffect(()=>()=>o?.disconnect(),[o]),o}function Sf(r){let{callback:t,disabled:n}=r;const s=bp(t),o=Z.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(s)},[n]);return Z.useEffect(()=>()=>o?.disconnect(),[o]),o}function tx(r){return new Ap(Hu(r),r)}function HE(r,t,n){t===void 0&&(t=tx);const[s,o]=Z.useState(null);function u(){o(m=>{if(!r)return null;if(r.isConnected===!1){var p;return(p=m??n)!=null?p:null}const E=t(r);return JSON.stringify(m)===JSON.stringify(E)?m:E})}const f=WO({callback(m){if(r)for(const p of m){const{type:E,target:T}=p;if(E==="childList"&&T instanceof HTMLElement&&T.contains(r)){u();break}}}}),g=Sf({callback:u});return ia(()=>{u(),r?(g?.observe(r),f?.observe(document.body,{childList:!0,subtree:!0})):(g?.disconnect(),f?.disconnect())},[r]),s}function ex(r){const t=L1(r);return R1(r,t)}const FE=[];function nx(r){const t=Z.useRef(r),n=qu(s=>r?s&&s!==FE&&r&&t.current&&r.parentNode===t.current.parentNode?s:Sp(r):FE,[r]);return Z.useEffect(()=>{t.current=r},[r]),n}function ix(r){const[t,n]=Z.useState(null),s=Z.useRef(r),o=Z.useCallback(u=>{const f=jg(u.target);f&&n(g=>g?(g.set(f,Cm(f)),new Map(g)):null)},[]);return Z.useEffect(()=>{const u=s.current;if(r!==u){f(u);const g=r.map(m=>{const p=jg(m);return p?(p.addEventListener("scroll",o,{passive:!0}),[p,Cm(p)]):null}).filter(m=>m!=null);n(g.length?new Map(g):null),s.current=r}return()=>{f(r),f(u)};function f(g){g.forEach(m=>{const p=jg(m);p?.removeEventListener("scroll",o)})}},[o,r]),Z.useMemo(()=>r.length?t?Array.from(t.values()).reduce((u,f)=>Ho(u,f),Ji):x1(r):Ji,[r,t])}function GE(r,t){t===void 0&&(t=[]);const n=Z.useRef(null);return Z.useEffect(()=>{n.current=null},t),Z.useEffect(()=>{const s=r!==Ji;s&&!n.current&&(n.current=r),!s&&n.current&&(n.current=null)},[r]),n.current?Jh(r,n.current):Ji}function rx(r){Z.useEffect(()=>{if(!Tf)return;const t=r.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of t)n?.()}},r.map(t=>{let{sensor:n}=t;return n}))}function sx(r,t){return Z.useMemo(()=>r.reduce((n,s)=>{let{eventName:o,handler:u}=s;return n[o]=f=>{u(f,t)},n},{}),[r,t])}function U1(r){return Z.useMemo(()=>r?OO(r):null,[r])}const KE=[];function ax(r,t){t===void 0&&(t=Hu);const[n]=r,s=U1(n?ii(n):null),[o,u]=Z.useState(KE);function f(){u(()=>r.length?r.map(m=>N1(m)?s:new Ap(t(m),m)):KE)}const g=Sf({callback:f});return ia(()=>{g?.disconnect(),f(),r.forEach(m=>g?.observe(m))},[r]),o}function ox(r){if(!r)return null;if(r.children.length>1)return r;const t=r.children[0];return Bu(t)?t:r}function lx(r){let{measure:t}=r;const[n,s]=Z.useState(null),o=Z.useCallback(p=>{for(const{target:E}of p)if(Bu(E)){s(T=>{const S=t(E);return T?{...T,width:S.width,height:S.height}:S});break}},[t]),u=Sf({callback:o}),f=Z.useCallback(p=>{const E=ox(p);u?.disconnect(),E&&u?.observe(E),s(E?t(E):null)},[t,u]),[g,m]=Zh(f);return Z.useMemo(()=>({nodeRef:g,rect:n,setRef:m}),[n,g,m])}const ux=[{sensor:Rp,options:{}},{sensor:V1,options:{}}],cx={current:{}},Ih={draggable:{measure:UE},droppable:{measure:UE,strategy:Iu.WhileDragging,frequency:Dm.Optimized},dragOverlay:{measure:Hu}};class yu extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,s;return(n=(s=this.get(t))==null?void 0:s.node.current)!=null?n:void 0}}const hx={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new yu,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Wh},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ih,measureDroppableContainers:Wh,windowRect:null,measuringScheduled:!1},fx={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Wh,draggableNodes:new Map,over:null,measureDroppableContainers:Wh},Af=Z.createContext(fx),dx=Z.createContext(hx);function gx(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new yu}}}function mx(r,t){switch(t.type){case fn.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case fn.DragMove:return r.draggable.active==null?r:{...r,draggable:{...r.draggable,translate:{x:t.coordinates.x-r.draggable.initialCoordinates.x,y:t.coordinates.y-r.draggable.initialCoordinates.y}}};case fn.DragEnd:case fn.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case fn.RegisterDroppable:{const{element:n}=t,{id:s}=n,o=new yu(r.droppable.containers);return o.set(s,n),{...r,droppable:{...r.droppable,containers:o}}}case fn.SetDroppableDisabled:{const{id:n,key:s,disabled:o}=t,u=r.droppable.containers.get(n);if(!u||s!==u.key)return r;const f=new yu(r.droppable.containers);return f.set(n,{...u,disabled:o}),{...r,droppable:{...r.droppable,containers:f}}}case fn.UnregisterDroppable:{const{id:n,key:s}=t,o=r.droppable.containers.get(n);if(!o||s!==o.key)return r;const u=new yu(r.droppable.containers);return u.delete(n),{...r,droppable:{...r.droppable,containers:u}}}default:return r}}function px(r){let{disabled:t}=r;const{active:n,activatorEvent:s,draggableNodes:o}=Z.useContext(Af),u=Am(s),f=Am(n?.id);return Z.useEffect(()=>{if(!t&&!s&&u&&f!=null){if(!A1(u)||document.activeElement===u.target)return;const g=o.get(f);if(!g)return;const{activatorNode:m,node:p}=g;if(!m.current&&!p.current)return;requestAnimationFrame(()=>{for(const E of[m.current,p.current]){if(!E)continue;const T=cO(E);if(T){T.focus();break}}})}},[s,t,o,f,u]),null}function yx(r,t){let{transform:n,...s}=t;return r!=null&&r.length?r.reduce((o,u)=>u({transform:o,...s}),n):n}function _x(r){return Z.useMemo(()=>({draggable:{...Ih.draggable,...r?.draggable},droppable:{...Ih.droppable,...r?.droppable},dragOverlay:{...Ih.dragOverlay,...r?.dragOverlay}}),[r?.draggable,r?.droppable,r?.dragOverlay])}function vx(r){let{activeNode:t,measure:n,initialRect:s,config:o=!0}=r;const u=Z.useRef(!1),{x:f,y:g}=typeof o=="boolean"?{x:o,y:o}:o;ia(()=>{if(!f&&!g||!t){u.current=!1;return}if(u.current||!s)return;const p=t?.node.current;if(!p||p.isConnected===!1)return;const E=n(p),T=R1(E,s);if(f||(T.x=0),g||(T.y=0),u.current=!0,Math.abs(T.x)>0||Math.abs(T.y)>0){const S=C1(p);S&&S.scrollBy({top:T.y,left:T.x})}},[t,f,g,s,n])}const z1=Z.createContext({...Ji,scaleX:1,scaleY:1});var Ls;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(Ls||(Ls={}));const Ex=Z.memo(function(t){var n,s,o,u;let{id:f,accessibility:g,autoScroll:m=!0,children:p,sensors:E=ux,collisionDetection:T=AO,measuring:S,modifiers:O,...K}=t;const G=Z.useReducer(mx,void 0,gx),[$,lt]=G,[ht,ut]=pO(),[It,wt]=Z.useState(Ls.Uninitialized),vt=It===Ls.Initialized,{draggable:{active:R,nodes:w,translate:C},droppable:{containers:x}}=$,N=R!=null?w.get(R):null,k=Z.useRef({initial:null,translated:null}),I=Z.useMemo(()=>{var Bt;return R!=null?{id:R,data:(Bt=N?.data)!=null?Bt:cx,rect:k}:null},[R,N]),Gt=Z.useRef(null),[we,X]=Z.useState(null),[at,Tt]=Z.useState(null),Pt=Cu(K,Object.values(K)),Kt=bf("DndDescribedBy",f),M=Z.useMemo(()=>x.getEnabled(),[x]),W=_x(S),{droppableRects:ot,measureDroppableContainers:ft,measuringScheduled:Rt}=ZO(M,{dragging:vt,dependencies:[C.x,C.y],config:W.droppable}),bt=$O(w,R),Lt=Z.useMemo(()=>at?wm(at):null,[at]),De=zi(),ae=JO(bt,W.draggable.measure);vx({activeNode:R!=null?w.get(R):null,config:De.layoutShiftCompensation,initialRect:ae,measure:W.draggable.measure});const je=HE(bt,W.draggable.measure,ae),gi=HE(bt?bt.parentElement:null),Nn=Z.useRef({activatorEvent:null,active:null,activeNode:bt,collisionRect:null,collisions:null,droppableRects:ot,draggableNodes:w,draggingNode:null,draggingNodeRect:null,droppableContainers:x,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Vi=x.getNodeFor((n=Nn.current.over)==null?void 0:n.id),Ye=lx({measure:W.dragOverlay.measure}),ri=(s=Ye.nodeRef.current)!=null?s:bt,On=vt?(o=Ye.rect)!=null?o:je:null,Wi=!!(Ye.nodeRef.current&&Ye.rect),ki=ex(Wi?null:je),Ee=U1(ri?ii(ri):null),oe=nx(vt?Vi??bt:null),zn=ax(oe),tr=yx(O,{transform:{x:C.x-ki.x,y:C.y-ki.y,scaleX:1,scaleY:1},activatorEvent:at,active:I,activeNodeRect:je,containerNodeRect:gi,draggingNodeRect:On,over:Nn.current.over,overlayNodeRect:Ye.rect,scrollableAncestors:oe,scrollableAncestorRects:zn,windowRect:Ee}),er=Lt?Ho(Lt,C):null,$e=ix(oe),Pi=GE($e),Tr=GE($e,[je]),jn=Ho(tr,Pi),En=On?CO(On,tr):null,Li=I&&En?T({active:I,collisionRect:En,droppableRects:ot,droppableContainers:M,pointerCoordinates:er}):null,br=bO(Li,"id"),[Bn,Sr]=Z.useState(null),qn=Wi?tr:Ho(tr,Tr),Be=wO(qn,(u=Bn?.rect)!=null?u:null,je),gn=Z.useRef(null),Te=Z.useCallback((Bt,be)=>{let{sensor:Se,options:Pe}=be;if(Gt.current==null)return;const mn=w.get(Gt.current);if(!mn)return;const Xe=Bt.nativeEvent,Me=new Se({active:Gt.current,activeNode:mn,event:Xe,options:Pe,context:Nn,onAbort(he){if(!w.get(he))return;const{onDragAbort:qe}=Pt.current,st={id:he};qe?.(st),ht({type:"onDragAbort",event:st})},onPending(he,fe,qe,st){if(!w.get(he))return;const{onDragPending:te}=Pt.current,Ne={id:he,constraint:fe,initialCoordinates:qe,offset:st};te?.(Ne),ht({type:"onDragPending",event:Ne})},onStart(he){const fe=Gt.current;if(fe==null)return;const qe=w.get(fe);if(!qe)return;const{onDragStart:st}=Pt.current,ln={activatorEvent:Xe,active:{id:fe,data:qe.data,rect:k}};ou.unstable_batchedUpdates(()=>{st?.(ln),wt(Ls.Initializing),lt({type:fn.DragStart,initialCoordinates:he,active:fe}),ht({type:"onDragStart",event:ln}),X(gn.current),Tt(Xe)})},onMove(he){lt({type:fn.DragMove,coordinates:he})},onEnd:H(fn.DragEnd),onCancel:H(fn.DragCancel)});gn.current=Me;function H(he){return async function(){const{active:qe,collisions:st,over:ln,scrollAdjustedTranslate:te}=Nn.current;let Ne=null;if(qe&&te){const{cancelDrop:un}=Pt.current;Ne={activatorEvent:Xe,active:qe,collisions:st,delta:te,over:ln},he===fn.DragEnd&&typeof un=="function"&&await Promise.resolve(un(Ne))&&(he=fn.DragCancel)}Gt.current=null,ou.unstable_batchedUpdates(()=>{lt({type:he}),wt(Ls.Uninitialized),Sr(null),X(null),Tt(null),gn.current=null;const un=he===fn.DragEnd?"onDragEnd":"onDragCancel";if(Ne){const de=Pt.current[un];de?.(Ne),ht({type:un,event:Ne})}})}}},[w]),Ar=Z.useCallback((Bt,be)=>(Se,Pe)=>{const mn=Se.nativeEvent,Xe=w.get(Pe);if(Gt.current!==null||!Xe||mn.dndKit||mn.defaultPrevented)return;const Me={active:Xe};Bt(Se,be.options,Me)===!0&&(mn.dndKit={capturedBy:be.sensor},Gt.current=Pe,Te(Se,be))},[w,Te]),Ui=XO(E,Ar);rx(E),ia(()=>{je&&It===Ls.Initializing&&wt(Ls.Initialized)},[je,It]),Z.useEffect(()=>{const{onDragMove:Bt}=Pt.current,{active:be,activatorEvent:Se,collisions:Pe,over:mn}=Nn.current;if(!be||!Se)return;const Xe={active:be,activatorEvent:Se,collisions:Pe,delta:{x:jn.x,y:jn.y},over:mn};ou.unstable_batchedUpdates(()=>{Bt?.(Xe),ht({type:"onDragMove",event:Xe})})},[jn.x,jn.y]),Z.useEffect(()=>{const{active:Bt,activatorEvent:be,collisions:Se,droppableContainers:Pe,scrollAdjustedTranslate:mn}=Nn.current;if(!Bt||Gt.current==null||!be||!mn)return;const{onDragOver:Xe}=Pt.current,Me=Pe.get(br),H=Me&&Me.rect.current?{id:Me.id,rect:Me.rect.current,data:Me.data,disabled:Me.disabled}:null,he={active:Bt,activatorEvent:be,collisions:Se,delta:{x:mn.x,y:mn.y},over:H};ou.unstable_batchedUpdates(()=>{Sr(H),Xe?.(he),ht({type:"onDragOver",event:he})})},[br]),ia(()=>{Nn.current={activatorEvent:at,active:I,activeNode:bt,collisionRect:En,collisions:Li,droppableRects:ot,draggableNodes:w,draggingNode:ri,draggingNodeRect:On,droppableContainers:x,over:Bn,scrollableAncestors:oe,scrollAdjustedTranslate:jn},k.current={initial:On,translated:En}},[I,bt,Li,En,w,ri,On,ot,x,Bn,oe,jn]),KO({...De,delta:C,draggingRect:En,pointerCoordinates:er,scrollableAncestors:oe,scrollableAncestorRects:zn});const Wr=Z.useMemo(()=>({active:I,activeNode:bt,activeNodeRect:je,activatorEvent:at,collisions:Li,containerNodeRect:gi,dragOverlay:Ye,draggableNodes:w,droppableContainers:x,droppableRects:ot,over:Bn,measureDroppableContainers:ft,scrollableAncestors:oe,scrollableAncestorRects:zn,measuringConfiguration:W,measuringScheduled:Rt,windowRect:Ee}),[I,bt,je,at,Li,gi,Ye,w,x,ot,Bn,ft,oe,zn,W,Rt,Ee]),Kn=Z.useMemo(()=>({activatorEvent:at,activators:Ui,active:I,activeNodeRect:je,ariaDescribedById:{draggable:Kt},dispatch:lt,draggableNodes:w,over:Bn,measureDroppableContainers:ft}),[at,Ui,I,je,lt,Kt,w,Bn,ft]);return ni.createElement(w1.Provider,{value:ut},ni.createElement(Af.Provider,{value:Kn},ni.createElement(dx.Provider,{value:Wr},ni.createElement(z1.Provider,{value:Be},p)),ni.createElement(px,{disabled:g?.restoreFocus===!1})),ni.createElement(vO,{...g,hiddenTextDescribedById:Kt}));function zi(){const Bt=we?.autoScrollEnabled===!1,be=typeof m=="object"?m.enabled===!1:m===!1,Se=vt&&!Bt&&!be;return typeof m=="object"?{...m,enabled:Se}:{enabled:Se}}}),Tx=Z.createContext(null),QE="button",bx="Draggable";function Sx(r){let{id:t,data:n,disabled:s=!1,attributes:o}=r;const u=bf(bx),{activators:f,activatorEvent:g,active:m,activeNodeRect:p,ariaDescribedById:E,draggableNodes:T,over:S}=Z.useContext(Af),{role:O=QE,roleDescription:K="draggable",tabIndex:G=0}=o??{},$=m?.id===t,lt=Z.useContext($?z1:Tx),[ht,ut]=Zh(),[It,wt]=Zh(),vt=sx(f,t),R=Cu(n);ia(()=>(T.set(t,{id:t,key:u,node:ht,activatorNode:It,data:R}),()=>{const C=T.get(t);C&&C.key===u&&T.delete(t)}),[T,t]);const w=Z.useMemo(()=>({role:O,tabIndex:G,"aria-disabled":s,"aria-pressed":$&&O===QE?!0:void 0,"aria-roledescription":K,"aria-describedby":E.draggable}),[s,O,G,$,K,E.draggable]);return{active:m,activatorEvent:g,activeNodeRect:p,attributes:w,isDragging:$,listeners:s?void 0:vt,node:ht,over:S,setNodeRef:ut,setActivatorNodeRef:wt,transform:lt}}const Ax="Droppable",wx={timeout:25};function Rx(r){let{data:t,disabled:n=!1,id:s,resizeObserverConfig:o}=r;const u=bf(Ax),{active:f,dispatch:g,over:m,measureDroppableContainers:p}=Z.useContext(Af),E=Z.useRef({disabled:n}),T=Z.useRef(!1),S=Z.useRef(null),O=Z.useRef(null),{disabled:K,updateMeasurementsFor:G,timeout:$}={...wx,...o},lt=Cu(G??s),ht=Z.useCallback(()=>{if(!T.current){T.current=!0;return}O.current!=null&&clearTimeout(O.current),O.current=setTimeout(()=>{p(Array.isArray(lt.current)?lt.current:[lt.current]),O.current=null},$)},[$]),ut=Sf({callback:ht,disabled:K||!f}),It=Z.useCallback((w,C)=>{ut&&(C&&(ut.unobserve(C),T.current=!1),w&&ut.observe(w))},[ut]),[wt,vt]=Zh(It),R=Cu(t);return Z.useEffect(()=>{!ut||!wt.current||(ut.disconnect(),T.current=!1,ut.observe(wt.current))},[wt,ut]),Z.useEffect(()=>(g({type:fn.RegisterDroppable,element:{id:s,key:u,disabled:n,node:wt,rect:S,data:R}}),()=>g({type:fn.UnregisterDroppable,key:u,id:s})),[s]),Z.useEffect(()=>{n!==E.current.disabled&&(g({type:fn.SetDroppableDisabled,id:s,key:u,disabled:n}),E.current.disabled=n)},[s,u,n,g]),{active:f,rect:S,isOver:m?.id===s,node:wt,over:m,setNodeRef:vt}}function Cx(r){return r!==null?{comment:r,variations:[]}:{variations:[]}}function Ix(r,t,n,s,o){const u={move:r,variations:o};return t&&(u.suffix=t),n&&(u.nag=n),s!==null&&(u.comment=s),u}function Dx(...r){const[t,...n]=r;let s=t;for(const o of n)o!==null&&(s.variations=[o,...o.variations],o.variations=[],s=o);return t}function Nx(r,t){if(t.marker&&t.marker.comment){let n=t.root;for(;;){const s=n.variations[0];if(!s){n.comment=t.marker.comment;break}n=s}}return{headers:r,root:t.root,result:(t.marker&&t.marker.result)??void 0}}function Ox(r,t){function n(){this.constructor=r}n.prototype=t.prototype,r.prototype=new n}function Zo(r,t,n,s){var o=Error.call(this,r);return Object.setPrototypeOf&&Object.setPrototypeOf(o,Zo.prototype),o.expected=t,o.found=n,o.location=s,o.name="SyntaxError",o}Ox(Zo,Error);function Hg(r,t,n){return n=n||" ",r.length>t?r:(t-=r.length,n+=n.repeat(t),r+n.slice(0,t))}Zo.prototype.format=function(r){var t="Error: "+this.message;if(this.location){var n=null,s;for(s=0;s<r.length;s++)if(r[s].source===this.location.source){n=r[s].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,u=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(o):o,f=this.location.source+":"+u.line+":"+u.column;if(n){var g=this.location.end,m=Hg("",u.line.toString().length," "),p=n[o.line-1],E=o.line===g.line?g.column:p.length+1,T=E-o.column||1;t+=`
 --> `+f+`
`+m+` |
`+u.line+" | "+p+`
`+m+" | "+Hg("",o.column-1," ")+Hg("",T,"^")}else t+=`
 at `+f}return t};Zo.buildMessage=function(r,t){var n={literal:function(p){return'"'+o(p.text)+'"'},class:function(p){var E=p.parts.map(function(T){return Array.isArray(T)?u(T[0])+"-"+u(T[1]):u(T)});return"["+(p.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(p){return p.description}};function s(p){return p.charCodeAt(0).toString(16).toUpperCase()}function o(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+s(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+s(E)})}function u(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+s(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+s(E)})}function f(p){return n[p.type](p)}function g(p){var E=p.map(f),T,S;if(E.sort(),E.length>0){for(T=1,S=1;T<E.length;T++)E[T-1]!==E[T]&&(E[S]=E[T],S++);E.length=S}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function m(p){return p?'"'+o(p)+'"':"end of input"}return"Expected "+g(r)+" but "+m(t)+" found."};function xx(r,t){t=t!==void 0?t:{};var n={},s=t.grammarSource,o={pgn:Ka},u=Ka,f="[",g='"',m="]",p=".",E="O-O-O",T="O-O",S="0-0-0",O="0-0",K="$",G="{",$="}",lt=";",ht="(",ut=")",It="1-0",wt="0-1",vt="1/2-1/2",R="*",w=/^[a-zA-Z]/,C=/^[^"]/,x=/^[0-9]/,N=/^[.]/,k=/^[a-zA-Z1-8\-=]/,I=/^[+#]/,Gt=/^[!?]/,we=/^[^}]/,X=/^[^\r\n]/,at=/^[ \t\r\n]/,Tt=de("tag pair"),Pt=te("[",!1),Kt=te('"',!1),M=te("]",!1),W=de("tag name"),ot=Ne([["a","z"],["A","Z"]],!1,!1),ft=de("tag value"),Rt=Ne(['"'],!0,!1),bt=de("move number"),Lt=Ne([["0","9"]],!1,!1),De=te(".",!1),ae=Ne(["."],!1,!1),je=de("standard algebraic notation"),gi=te("O-O-O",!1),Nn=te("O-O",!1),Vi=te("0-0-0",!1),Ye=te("0-0",!1),ri=Ne([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),On=Ne(["+","#"],!1,!1),Wi=de("suffix annotation"),ki=Ne(["!","?"],!1,!1),Ee=de("NAG"),oe=te("$",!1),zn=de("brace comment"),tr=te("{",!1),er=Ne(["}"],!0,!1),$e=te("}",!1),Pi=de("rest of line comment"),Tr=te(";",!1),jn=Ne(["\r",`
`],!0,!1),En=de("variation"),Li=te("(",!1),br=te(")",!1),Bn=de("game termination marker"),Sr=te("1-0",!1),qn=te("0-1",!1),Be=te("1/2-1/2",!1),gn=te("*",!1),Te=de("whitespace"),Ar=Ne([" ","	","\r",`
`],!1,!1),Ui=function(L,F){return Nx(L,F)},Wr=function(L){return Object.fromEntries(L)},Kn=function(L,F){return[L,F]},zi=function(L,F){return{root:L,marker:F}},Bt=function(L,F){return Dx(Cx(L),...F.flat())},be=function(L,F,B,dt,Et){return Ix(L,F,B,dt,Et)},Se=function(L){return L},Pe=function(L){return L.replace(/[\r\n]+/g," ")},mn=function(L){return L.trim()},Xe=function(L){return L},Me=function(L,F){return{result:L,comment:F}},H=t.peg$currPos|0,he=[{line:1,column:1}],fe=H,qe=t.peg$maxFailExpected||[],st=t.peg$silentFails|0,ln;if(t.startRule){if(!(t.startRule in o))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');u=o[t.startRule]}function te(L,F){return{type:"literal",text:L,ignoreCase:F}}function Ne(L,F,B){return{type:"class",parts:L,inverted:F,ignoreCase:B}}function un(){return{type:"end"}}function de(L){return{type:"other",description:L}}function Ve(L){var F=he[L],B;if(F)return F;if(L>=he.length)B=he.length-1;else for(B=L;!he[--B];);for(F=he[B],F={line:F.line,column:F.column};B<L;)r.charCodeAt(B)===10?(F.line++,F.column=1):F.column++,B++;return he[L]=F,F}function He(L,F,B){var dt=Ve(L),Et=Ve(F),Jt={source:s,start:{offset:L,line:dt.line,column:dt.column},end:{offset:F,line:Et.line,column:Et.column}};return Jt}function pt(L){H<fe||(H>fe&&(fe=H,qe=[]),qe.push(L))}function ts(L,F,B){return new Zo(Zo.buildMessage(L,F),L,F,B)}function Ka(){var L,F,B;return L=H,F=Qa(),B=pi(),L=Ui(F,B),L}function Qa(){var L,F,B;for(L=H,F=[],B=ra();B!==n;)F.push(B),B=ra();return B=Ze(),L=Wr(F),L}function ra(){var L,F,B,dt,Et,Jt,qt;return st++,L=H,Ze(),r.charCodeAt(H)===91?(F=f,H++):(F=n,st===0&&pt(Pt)),F!==n?(Ze(),B=mi(),B!==n?(Ze(),r.charCodeAt(H)===34?(dt=g,H++):(dt=n,st===0&&pt(Kt)),dt!==n?(Et=es(),r.charCodeAt(H)===34?(Jt=g,H++):(Jt=n,st===0&&pt(Kt)),Jt!==n?(Ze(),r.charCodeAt(H)===93?(qt=m,H++):(qt=n,st===0&&pt(M)),qt!==n?L=Kn(B,Et):(H=L,L=n)):(H=L,L=n)):(H=L,L=n)):(H=L,L=n)):(H=L,L=n),st--,L===n&&st===0&&pt(Tt),L}function mi(){var L,F,B;if(st++,L=H,F=[],B=r.charAt(H),w.test(B)?H++:(B=n,st===0&&pt(ot)),B!==n)for(;B!==n;)F.push(B),B=r.charAt(H),w.test(B)?H++:(B=n,st===0&&pt(ot));else F=n;return F!==n?L=r.substring(L,H):L=F,st--,L===n&&(F=n,st===0&&pt(W)),L}function es(){var L,F,B;for(st++,L=H,F=[],B=r.charAt(H),C.test(B)?H++:(B=n,st===0&&pt(Rt));B!==n;)F.push(B),B=r.charAt(H),C.test(B)?H++:(B=n,st===0&&pt(Rt));return L=r.substring(L,H),st--,F=n,st===0&&pt(ft),L}function pi(){var L,F,B;return L=H,F=Hn(),Ze(),B=oa(),B===n&&(B=null),Ze(),L=zi(F,B),L}function Hn(){var L,F,B,dt;for(L=H,F=Qn(),F===n&&(F=null),B=[],dt=xn();dt!==n;)B.push(dt),dt=xn();return L=Bt(F,B),L}function xn(){var L,F,B,dt,Et,Jt,qt,vi;if(L=H,Ze(),yi(),Ze(),F=Le(),F!==n){for(B=sa(),B===n&&(B=null),dt=[],Et=ns();Et!==n;)dt.push(Et),Et=ns();for(Et=Ze(),Jt=Qn(),Jt===n&&(Jt=null),qt=[],vi=is();vi!==n;)qt.push(vi),vi=is();L=be(F,B,dt,Jt,qt)}else H=L,L=n;return L}function yi(){var L,F,B,dt,Et,Jt;for(st++,L=H,F=[],B=r.charAt(H),x.test(B)?H++:(B=n,st===0&&pt(Lt));B!==n;)F.push(B),B=r.charAt(H),x.test(B)?H++:(B=n,st===0&&pt(Lt));if(r.charCodeAt(H)===46?(B=p,H++):(B=n,st===0&&pt(De)),B!==n){for(dt=Ze(),Et=[],Jt=r.charAt(H),N.test(Jt)?H++:(Jt=n,st===0&&pt(ae));Jt!==n;)Et.push(Jt),Jt=r.charAt(H),N.test(Jt)?H++:(Jt=n,st===0&&pt(ae));F=[F,B,dt,Et],L=F}else H=L,L=n;return st--,L===n&&(F=n,st===0&&pt(bt)),L}function Le(){var L,F,B,dt,Et,Jt;if(st++,L=H,F=H,r.substr(H,5)===E?(B=E,H+=5):(B=n,st===0&&pt(gi)),B===n&&(r.substr(H,3)===T?(B=T,H+=3):(B=n,st===0&&pt(Nn)),B===n&&(r.substr(H,5)===S?(B=S,H+=5):(B=n,st===0&&pt(Vi)),B===n&&(r.substr(H,3)===O?(B=O,H+=3):(B=n,st===0&&pt(Ye)),B===n))))if(B=H,dt=r.charAt(H),w.test(dt)?H++:(dt=n,st===0&&pt(ot)),dt!==n){if(Et=[],Jt=r.charAt(H),k.test(Jt)?H++:(Jt=n,st===0&&pt(ri)),Jt!==n)for(;Jt!==n;)Et.push(Jt),Jt=r.charAt(H),k.test(Jt)?H++:(Jt=n,st===0&&pt(ri));else Et=n;Et!==n?(dt=[dt,Et],B=dt):(H=B,B=n)}else H=B,B=n;return B!==n?(dt=r.charAt(H),I.test(dt)?H++:(dt=n,st===0&&pt(On)),dt===n&&(dt=null),B=[B,dt],F=B):(H=F,F=n),F!==n?L=r.substring(L,H):L=F,st--,L===n&&(F=n,st===0&&pt(je)),L}function sa(){var L,F,B;for(st++,L=H,F=[],B=r.charAt(H),Gt.test(B)?H++:(B=n,st===0&&pt(ki));B!==n;)F.push(B),F.length>=2?B=n:(B=r.charAt(H),Gt.test(B)?H++:(B=n,st===0&&pt(ki)));return F.length<1?(H=L,L=n):L=F,st--,L===n&&(F=n,st===0&&pt(Wi)),L}function ns(){var L,F,B,dt,Et;if(st++,L=H,Ze(),r.charCodeAt(H)===36?(F=K,H++):(F=n,st===0&&pt(oe)),F!==n){if(B=H,dt=[],Et=r.charAt(H),x.test(Et)?H++:(Et=n,st===0&&pt(Lt)),Et!==n)for(;Et!==n;)dt.push(Et),Et=r.charAt(H),x.test(Et)?H++:(Et=n,st===0&&pt(Lt));else dt=n;dt!==n?B=r.substring(B,H):B=dt,B!==n?L=Se(B):(H=L,L=n)}else H=L,L=n;return st--,L===n&&st===0&&pt(Ee),L}function Qn(){var L;return L=_i(),L===n&&(L=aa()),L}function _i(){var L,F,B,dt,Et;if(st++,L=H,r.charCodeAt(H)===123?(F=G,H++):(F=n,st===0&&pt(tr)),F!==n){for(B=H,dt=[],Et=r.charAt(H),we.test(Et)?H++:(Et=n,st===0&&pt(er));Et!==n;)dt.push(Et),Et=r.charAt(H),we.test(Et)?H++:(Et=n,st===0&&pt(er));B=r.substring(B,H),r.charCodeAt(H)===125?(dt=$,H++):(dt=n,st===0&&pt($e)),dt!==n?L=Pe(B):(H=L,L=n)}else H=L,L=n;return st--,L===n&&(F=n,st===0&&pt(zn)),L}function aa(){var L,F,B,dt,Et;if(st++,L=H,r.charCodeAt(H)===59?(F=lt,H++):(F=n,st===0&&pt(Tr)),F!==n){for(B=H,dt=[],Et=r.charAt(H),X.test(Et)?H++:(Et=n,st===0&&pt(jn));Et!==n;)dt.push(Et),Et=r.charAt(H),X.test(Et)?H++:(Et=n,st===0&&pt(jn));B=r.substring(B,H),L=mn(B)}else H=L,L=n;return st--,L===n&&(F=n,st===0&&pt(Pi)),L}function is(){var L,F,B,dt;return st++,L=H,Ze(),r.charCodeAt(H)===40?(F=ht,H++):(F=n,st===0&&pt(Li)),F!==n?(B=Hn(),B!==n?(Ze(),r.charCodeAt(H)===41?(dt=ut,H++):(dt=n,st===0&&pt(br)),dt!==n?L=Xe(B):(H=L,L=n)):(H=L,L=n)):(H=L,L=n),st--,L===n&&st===0&&pt(En),L}function oa(){var L,F,B;return st++,L=H,r.substr(H,3)===It?(F=It,H+=3):(F=n,st===0&&pt(Sr)),F===n&&(r.substr(H,3)===wt?(F=wt,H+=3):(F=n,st===0&&pt(qn)),F===n&&(r.substr(H,7)===vt?(F=vt,H+=7):(F=n,st===0&&pt(Be)),F===n&&(r.charCodeAt(H)===42?(F=R,H++):(F=n,st===0&&pt(gn))))),F!==n?(Ze(),B=Qn(),B===n&&(B=null),L=Me(F,B)):(H=L,L=n),st--,L===n&&(F=n,st===0&&pt(Bn)),L}function Ze(){var L,F;for(st++,L=[],F=r.charAt(H),at.test(F)?H++:(F=n,st===0&&pt(Ar));F!==n;)L.push(F),F=r.charAt(H),at.test(F)?H++:(F=n,st===0&&pt(Ar));return st--,F=n,st===0&&pt(Te),L}if(ln=u(),t.peg$library)return{peg$result:ln,peg$currPos:H,peg$FAILED:n,peg$maxFailExpected:qe,peg$maxFailPos:fe};if(ln!==n&&H===r.length)return ln;throw ln!==n&&H<r.length&&pt(un()),ts(qe,fe<r.length?r.charAt(fe):null,fe<r.length?He(fe,fe+1):He(fe,fe))}const Dh=0xffffffffffffffffn;function Fg(r,t){return(r<<t|r>>64n-t)&0xffffffffffffffffn}function YE(r,t){return r*t&Dh}function Mx(r){return function(){let t=BigInt(r&Dh),n=BigInt(r>>64n&Dh);const s=YE(Fg(YE(t,5n),7n),9n);return n^=t,t=(Fg(t,24n)^n^n<<16n)&Dh,n=Fg(n,37n),r=n<<64n|t,s}}const wf=Mx(0xa187eb39cdcaed8f31c4b365b102e01en),Vx=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>wf()))),kx=Array.from({length:8},()=>wf()),Px=Array.from({length:16},()=>wf()),Gg=wf(),kn="w",fi="b",nn="p",Nm="n",Nh="b",lu="r",Us="q",hn="k",Kg="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class gh{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(t,n){const{color:s,piece:o,from:u,to:f,flags:g,captured:m,promotion:p}=n,E=yn(u),T=yn(f);this.color=s,this.piece=o,this.from=E,this.to=T,this.san=t._moveToSan(n,t._moves({legal:!0})),this.lan=E+T,this.before=t.fen(),t._makeMove(n),this.after=t.fen(),t._undoMove(),this.flags="";for(const S in xt)xt[S]&g&&(this.flags+=Oa[S]);m&&(this.captured=m),p&&(this.promotion=p,this.lan+=p)}isCapture(){return this.flags.indexOf(Oa.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(Oa.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(Oa.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(Oa.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(Oa.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(Oa.BIG_PAWN)>-1}}const Rn=-1,Oa={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},xt={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},Om={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},Lx={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},Ux={...Om,...Lx},Nt={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Qg={b:[16,32,17,15],w:[-16,-32,-17,-15]},$E={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},zx=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],jx=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],Bx={p:1,n:2,b:4,r:8,q:16,k:32},qx="pnbrqkPNBRQK",XE=[Nm,Nh,lu,Us],Hx=7,Fx=6,Gx=1,Kx=0,mh={[hn]:xt.KSIDE_CASTLE,[Us]:xt.QSIDE_CASTLE},ks={w:[{square:Nt.a1,flag:xt.QSIDE_CASTLE},{square:Nt.h1,flag:xt.KSIDE_CASTLE}],b:[{square:Nt.a8,flag:xt.QSIDE_CASTLE},{square:Nt.h8,flag:xt.KSIDE_CASTLE}]},Qx={b:Gx,w:Fx},Yg="--";function Pa(r){return r>>4}function Du(r){return r&15}function j1(r){return"0123456789".indexOf(r)!==-1}function yn(r){const t=Du(r),n=Pa(r);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function eu(r){return r===kn?fi:kn}function Yx(r){const t=r.split(/\s+/);if(t.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(t[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const s=parseInt(t[4],10);if(isNaN(s)||s<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const o=t[0].split("/");if(o.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let f=0;f<o.length;f++){let g=0,m=!1;for(let p=0;p<o[f].length;p++)if(j1(o[f][p])){if(m)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};g+=parseInt(o[f][p],10),m=!0}else{if(!/^[prnbqkPRNBQK]$/.test(o[f][p]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};g+=1,m=!1}if(g!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(t[3][1]=="3"&&t[1]=="w"||t[3][1]=="6"&&t[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const u=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:f,regex:g}of u){if(!g.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${f} king`};if((t[0].match(g)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${f} kings`}}return Array.from(o[0]+o[7]).some(f=>f.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function $x(r,t){const n=r.from,s=r.to,o=r.piece;let u=0,f=0,g=0;for(let m=0,p=t.length;m<p;m++){const E=t[m].from,T=t[m].to,S=t[m].piece;o===S&&n!==E&&s===T&&(u++,Pa(n)===Pa(E)&&f++,Du(n)===Du(E)&&g++)}return u>0?f>0&&g>0?yn(n):g>0?yn(n).charAt(1):yn(n).charAt(0):""}function Ps(r,t,n,s,o,u=void 0,f=xt.NORMAL){const g=Pa(s);if(o===nn&&(g===Hx||g===Kx))for(let m=0;m<XE.length;m++){const p=XE[m];r.push({color:t,from:n,to:s,piece:o,captured:u,promotion:p,flags:f|xt.PROMOTION})}else r.push({color:t,from:n,to:s,piece:o,captured:u,flags:f})}function ZE(r){let t=r.charAt(0);return t>="a"&&t<="h"?r.match(/[a-h]\d.*[a-h]\d/)?void 0:nn:(t=t.toLowerCase(),t==="o"?hn:t)}function $g(r){return r.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class Xx{_board=new Array(128);_turn=kn;_header={};_kings={w:Rn,b:Rn};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_hash=0n;_positionCount=new Map;constructor(t=Kg,{skipValidation:n=!1}={}){this.load(t,{skipValidation:n})}clear({preserveHeaders:t=!1}={}){this._board=new Array(128),this._kings={w:Rn,b:Rn},this._turn=kn,this._castling={w:0,b:0},this._epSquare=Rn,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=t?this._header:{...Ux},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(t,{skipValidation:n=!1,preserveHeaders:s=!1}={}){let o=t.split(/\s+/);if(o.length>=2&&o.length<6){const g=["-","-","0","1"];t=o.concat(g.slice(-(6-o.length))).join(" ")}if(o=t.split(/\s+/),!n){const{ok:g,error:m}=Yx(t);if(!g)throw new Error(m)}const u=o[0];let f=0;this.clear({preserveHeaders:s});for(let g=0;g<u.length;g++){const m=u.charAt(g);if(m==="/")f+=8;else if(j1(m))f+=parseInt(m,10);else{const p=m<"a"?kn:fi;this._put({type:m.toLowerCase(),color:p},yn(f)),f++}}this._turn=o[1],o[2].indexOf("K")>-1&&(this._castling.w|=xt.KSIDE_CASTLE),o[2].indexOf("Q")>-1&&(this._castling.w|=xt.QSIDE_CASTLE),o[2].indexOf("k")>-1&&(this._castling.b|=xt.KSIDE_CASTLE),o[2].indexOf("q")>-1&&(this._castling.b|=xt.QSIDE_CASTLE),this._epSquare=o[3]==="-"?Rn:Nt[o[3]],this._halfMoves=parseInt(o[4],10),this._moveNumber=parseInt(o[5],10),this._hash=this._computeHash(),this._updateSetup(t),this._incPositionCount()}fen({forceEnpassantSquare:t=!1}={}){let n=0,s="";for(let f=Nt.a8;f<=Nt.h1;f++){if(this._board[f]){n>0&&(s+=n,n=0);const{color:g,type:m}=this._board[f];s+=g===kn?m.toUpperCase():m.toLowerCase()}else n++;f+1&136&&(n>0&&(s+=n),f!==Nt.h1&&(s+="/"),n=0,f+=8)}let o="";this._castling[kn]&xt.KSIDE_CASTLE&&(o+="K"),this._castling[kn]&xt.QSIDE_CASTLE&&(o+="Q"),this._castling[fi]&xt.KSIDE_CASTLE&&(o+="k"),this._castling[fi]&xt.QSIDE_CASTLE&&(o+="q"),o=o||"-";let u="-";if(this._epSquare!==Rn)if(t)u=yn(this._epSquare);else{const f=this._epSquare+(this._turn===kn?16:-16),g=[f+1,f-1];for(const m of g){if(m&136)continue;const p=this._turn;if(this._board[m]?.color===p&&this._board[m]?.type===nn){this._makeMove({color:p,from:m,to:this._epSquare,piece:nn,captured:nn,flags:xt.EP_CAPTURE});const E=!this._isKingAttacked(p);if(this._undoMove(),E){u=yn(this._epSquare);break}}}}return[s,this._turn,o,u,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(t){if(!this._board[t])return 0n;const{color:n,type:s}=this._board[t],o={w:0,b:1}[n],u={p:0,n:1,b:2,r:3,q:4,k:5}[s];return Vx[o][u][t]}_epKey(){return this._epSquare===Rn?0n:kx[this._epSquare&7]}_castlingKey(){const t=this._castling.w>>5|this._castling.b>>3;return Px[t]}_computeHash(){let t=0n;for(let n=Nt.a8;n<=Nt.h1;n++){if(n&136){n+=7;continue}this._board[n]&&(t^=this._pieceKey(n))}return t^=this._epKey(),t^=this._castlingKey(),this._turn==="b"&&(t^=Gg),t}_updateSetup(t){this._history.length>0||(t!==Kg?(this._header.SetUp="1",this._header.FEN=t):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(Kg)}get(t){return this._board[Nt[t]]}findPiece(t){const n=[];for(let s=Nt.a8;s<=Nt.h1;s++){if(s&136){s+=7;continue}!this._board[s]||this._board[s]?.color!==t.color||this._board[s].color===t.color&&this._board[s].type===t.type&&n.push(yn(s))}return n}put({type:t,color:n},s){return this._put({type:t,color:n},s)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(t,n){this._hash^=this._pieceKey(t),this._board[t]=n,this._hash^=this._pieceKey(t)}_put({type:t,color:n},s){if(qx.indexOf(t.toLowerCase())===-1||!(s in Nt))return!1;const o=Nt[s];if(t==hn&&!(this._kings[n]==Rn||this._kings[n]==o))return!1;const u=this._board[o];return u&&u.type===hn&&(this._kings[u.color]=Rn),this._set(o,{type:t,color:n}),t===hn&&(this._kings[n]=o),!0}_clear(t){this._hash^=this._pieceKey(t),delete this._board[t]}remove(t){const n=this.get(t);return this._clear(Nt[t]),n&&n.type===hn&&(this._kings[n.color]=Rn),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){this._hash^=this._castlingKey();const t=this._board[Nt.e1]?.type===hn&&this._board[Nt.e1]?.color===kn,n=this._board[Nt.e8]?.type===hn&&this._board[Nt.e8]?.color===fi;(!t||this._board[Nt.a1]?.type!==lu||this._board[Nt.a1]?.color!==kn)&&(this._castling.w&=-65),(!t||this._board[Nt.h1]?.type!==lu||this._board[Nt.h1]?.color!==kn)&&(this._castling.w&=-33),(!n||this._board[Nt.a8]?.type!==lu||this._board[Nt.a8]?.color!==fi)&&(this._castling.b&=-65),(!n||this._board[Nt.h8]?.type!==lu||this._board[Nt.h8]?.color!==fi)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){if(this._epSquare===Rn)return;const t=this._epSquare+(this._turn===kn?-16:16),n=this._epSquare+(this._turn===kn?16:-16),s=[n+1,n-1];if(this._board[t]!==null||this._board[this._epSquare]!==null||this._board[n]?.color!==eu(this._turn)||this._board[n]?.type!==nn){this._hash^=this._epKey(),this._epSquare=Rn;return}const o=u=>!(u&136)&&this._board[u]?.color===this._turn&&this._board[u]?.type===nn;s.some(o)||(this._hash^=this._epKey(),this._epSquare=Rn)}_attacked(t,n,s){const o=[];for(let u=Nt.a8;u<=Nt.h1;u++){if(u&136){u+=7;continue}if(this._board[u]===void 0||this._board[u].color!==t)continue;const f=this._board[u],g=u-n;if(g===0)continue;const m=g+119;if(zx[m]&Bx[f.type]){if(f.type===nn){if(g>0&&f.color===kn||g<=0&&f.color===fi)if(s)o.push(yn(u));else return!0;continue}if(f.type==="n"||f.type==="k")if(s){o.push(yn(u));continue}else return!0;const p=jx[m];let E=u+p,T=!1;for(;E!==n;){if(this._board[E]!=null){T=!0;break}E+=p}if(!T)if(s){o.push(yn(u));continue}else return!0}}return s?o:!1}attackers(t,n){return n?this._attacked(n,Nt[t],!0):this._attacked(this._turn,Nt[t],!0)}_isKingAttacked(t){const n=this._kings[t];return n===-1?!1:this._attacked(eu(t),n)}hash(){return this._hash.toString(16)}isAttacked(t,n){return this._attacked(n,Nt[t])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const t={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let s=0,o=0;for(let u=Nt.a8;u<=Nt.h1;u++){if(o=(o+1)%2,u&136){u+=7;continue}const f=this._board[u];f&&(t[f.type]=f.type in t?t[f.type]+1:1,f.type===Nh&&n.push(o),s++)}if(s===2)return!0;if(s===3&&(t[Nh]===1||t[Nm]===1))return!0;if(s===t[Nh]+2){let u=0;const f=n.length;for(let g=0;g<f;g++)u+=n[g];if(u===0||u===f)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:t=!1,square:n=void 0,piece:s=void 0}={}){const o=this._moves({square:n,piece:s});return t?o.map(u=>new gh(this,u)):o.map(u=>this._moveToSan(u,o))}_moves({legal:t=!0,piece:n=void 0,square:s=void 0}={}){const o=s?s.toLowerCase():void 0,u=n?.toLowerCase(),f=[],g=this._turn,m=eu(g);let p=Nt.a8,E=Nt.h1,T=!1;if(o)if(o in Nt)p=E=Nt[o],T=!0;else return[];for(let O=p;O<=E;O++){if(O&136){O+=7;continue}if(!this._board[O]||this._board[O].color===m)continue;const{type:K}=this._board[O];let G;if(K===nn){if(u&&u!==K)continue;G=O+Qg[g][0],this._board[G]||(Ps(f,g,O,G,nn),G=O+Qg[g][1],Qx[g]===Pa(O)&&!this._board[G]&&Ps(f,g,O,G,nn,void 0,xt.BIG_PAWN));for(let $=2;$<4;$++)G=O+Qg[g][$],!(G&136)&&(this._board[G]?.color===m?Ps(f,g,O,G,nn,this._board[G].type,xt.CAPTURE):G===this._epSquare&&Ps(f,g,O,G,nn,nn,xt.EP_CAPTURE))}else{if(u&&u!==K)continue;for(let $=0,lt=$E[K].length;$<lt;$++){const ht=$E[K][$];for(G=O;G+=ht,!(G&136);){if(!this._board[G])Ps(f,g,O,G,K);else{if(this._board[G].color===g)break;Ps(f,g,O,G,K,this._board[G].type,xt.CAPTURE);break}if(K===Nm||K===hn)break}}}}if((u===void 0||u===hn)&&(!T||E===this._kings[g])){if(this._castling[g]&xt.KSIDE_CASTLE){const O=this._kings[g],K=O+2;!this._board[O+1]&&!this._board[K]&&!this._attacked(m,this._kings[g])&&!this._attacked(m,O+1)&&!this._attacked(m,K)&&Ps(f,g,this._kings[g],K,hn,void 0,xt.KSIDE_CASTLE)}if(this._castling[g]&xt.QSIDE_CASTLE){const O=this._kings[g],K=O-2;!this._board[O-1]&&!this._board[O-2]&&!this._board[O-3]&&!this._attacked(m,this._kings[g])&&!this._attacked(m,O-1)&&!this._attacked(m,K)&&Ps(f,g,this._kings[g],K,hn,void 0,xt.QSIDE_CASTLE)}}if(!t||this._kings[g]===-1)return f;const S=[];for(let O=0,K=f.length;O<K;O++)this._makeMove(f[O]),this._isKingAttacked(g)||S.push(f[O]),this._undoMove();return S}move(t,{strict:n=!1}={}){let s=null;if(typeof t=="string")s=this._moveFromSan(t,n);else if(t===null)s=this._moveFromSan(Yg,n);else if(typeof t=="object"){const u=this._moves();for(let f=0,g=u.length;f<g;f++)if(t.from===yn(u[f].from)&&t.to===yn(u[f].to)&&(!("promotion"in u[f])||t.promotion===u[f].promotion)){s=u[f];break}}if(!s)throw typeof t=="string"?new Error(`Invalid move: ${t}`):new Error(`Invalid move: ${JSON.stringify(t)}`);if(this.isCheck()&&s.flags&xt.NULL_MOVE)throw new Error("Null move not allowed when in check");const o=new gh(this,s);return this._makeMove(s),this._incPositionCount(),o}_push(t){this._history.push({move:t,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(t,n){this._hash^=this._pieceKey(t),this._board[n]=this._board[t],delete this._board[t],this._hash^=this._pieceKey(n)}_makeMove(t){const n=this._turn,s=eu(n);if(this._push(t),t.flags&xt.NULL_MOVE){n===fi&&this._moveNumber++,this._halfMoves++,this._turn=s,this._epSquare=Rn;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),t.captured&&(this._hash^=this._pieceKey(t.to)),this._movePiece(t.from,t.to),t.flags&xt.EP_CAPTURE&&(this._turn===fi?this._clear(t.to-16):this._clear(t.to+16)),t.promotion&&(this._clear(t.to),this._set(t.to,{type:t.promotion,color:n})),this._board[t.to].type===hn){if(this._kings[n]=t.to,t.flags&xt.KSIDE_CASTLE){const o=t.to-1,u=t.to+1;this._movePiece(u,o)}else if(t.flags&xt.QSIDE_CASTLE){const o=t.to+1,u=t.to-2;this._movePiece(u,o)}this._castling[n]=0}if(this._castling[n]){for(let o=0,u=ks[n].length;o<u;o++)if(t.from===ks[n][o].square&&this._castling[n]&ks[n][o].flag){this._castling[n]^=ks[n][o].flag;break}}if(this._castling[s]){for(let o=0,u=ks[s].length;o<u;o++)if(t.to===ks[s][o].square&&this._castling[s]&ks[s][o].flag){this._castling[s]^=ks[s][o].flag;break}}if(this._hash^=this._castlingKey(),t.flags&xt.BIG_PAWN){let o;n===fi?o=t.to-16:o=t.to+16,!(t.to-1&136)&&this._board[t.to-1]?.type===nn&&this._board[t.to-1]?.color===s||!(t.to+1&136)&&this._board[t.to+1]?.type===nn&&this._board[t.to+1]?.color===s?(this._epSquare=o,this._hash^=this._epKey()):this._epSquare=Rn}else this._epSquare=Rn;t.piece===nn?this._halfMoves=0:t.flags&(xt.CAPTURE|xt.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===fi&&this._moveNumber++,this._turn=s,this._hash^=Gg}undo(){const t=this._hash,n=this._undoMove();if(n){const s=new gh(this,n);return this._decPositionCount(t),s}return null}_undoMove(){const t=this._history.pop();if(t===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const n=t.move;this._kings=t.kings,this._turn=t.turn,this._castling=t.castling,this._epSquare=t.epSquare,this._halfMoves=t.halfMoves,this._moveNumber=t.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=Gg;const s=this._turn,o=eu(s);if(n.flags&xt.NULL_MOVE)return n;if(this._movePiece(n.to,n.from),n.piece&&(this._clear(n.from),this._set(n.from,{type:n.piece,color:s})),n.captured)if(n.flags&xt.EP_CAPTURE){let u;s===fi?u=n.to-16:u=n.to+16,this._set(u,{type:nn,color:o})}else this._set(n.to,{type:n.captured,color:o});if(n.flags&(xt.KSIDE_CASTLE|xt.QSIDE_CASTLE)){let u,f;n.flags&xt.KSIDE_CASTLE?(u=n.to+1,f=n.to-1):(u=n.to-2,f=n.to+1),this._movePiece(f,u)}return n}pgn({newline:t=`
`,maxWidth:n=0}={}){const s=[];let o=!1;for(const S in this._header)this._header[S]&&s.push(`[${S} "${this._header[S]}"]`+t),o=!0;o&&this._history.length&&s.push(t);const u=S=>{const O=this._comments[this.fen()];if(typeof O<"u"){const K=S.length>0?" ":"";S=`${S}${K}{${O}}`}return S},f=[];for(;this._history.length>0;)f.push(this._undoMove());const g=[];let m="";for(f.length===0&&g.push(u(""));f.length>0;){m=u(m);const S=f.pop();if(!S)break;if(!this._history.length&&S.color==="b"){const O=`${this._moveNumber}. ...`;m=m?`${m} ${O}`:O}else S.color==="w"&&(m.length&&g.push(m),m=this._moveNumber+".");m=m+" "+this._moveToSan(S,this._moves({legal:!0})),this._makeMove(S)}if(m.length&&g.push(u(m)),g.push(this._header.Result||"*"),n===0)return s.join("")+g.join(" ");const p=function(){return s.length>0&&s[s.length-1]===" "?(s.pop(),!0):!1},E=function(S,O){for(const K of O.split(" "))if(K){if(S+K.length>n){for(;p();)S--;s.push(t),S=0}s.push(K),S+=K.length,s.push(" "),S++}return p()&&S--,S};let T=0;for(let S=0;S<g.length;S++){if(T+g[S].length>n&&g[S].includes("{")){T=E(T,g[S]);continue}T+g[S].length>n&&S!==0?(s[s.length-1]===" "&&s.pop(),s.push(t),T=0):S!==0&&(s.push(" "),T++),s.push(g[S]),T+=g[S].length}return s.join("")}header(...t){for(let n=0;n<t.length;n+=2)typeof t[n]=="string"&&typeof t[n+1]=="string"&&(this._header[t[n]]=t[n+1]);return this._header}setHeader(t,n){return this._header[t]=n??Om[t]??null,this.getHeaders()}removeHeader(t){return t in this._header?(this._header[t]=Om[t]||null,!0):!1}getHeaders(){const t={};for(const[n,s]of Object.entries(this._header))s!==null&&(t[n]=s);return t}loadPgn(t,{strict:n=!1,newlineChar:s=`\r?
`}={}){s!==`\r?
`&&(t=t.replace(new RegExp(s,"g"),`
`));const o=xx(t);this.reset();const u=o.headers;let f="";for(const p in u)p.toLowerCase()==="fen"&&(f=u[p]),this.header(p,u[p]);if(!n)f&&this.load(f,{preserveHeaders:!0});else if(u.SetUp==="1"){if(!("FEN"in u))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(u.FEN,{preserveHeaders:!0})}let g=o.root;for(;g;){if(g.move){const p=this._moveFromSan(g.move,n);if(p==null)throw new Error(`Invalid move in PGN: ${g.move}`);this._makeMove(p),this._incPositionCount()}g.comment!==void 0&&(this._comments[this.fen()]=g.comment),g=g.variations[0]}const m=o.result;m&&Object.keys(this._header).length&&this._header.Result!==m&&this.setHeader("Result",m)}_moveToSan(t,n){let s="";if(t.flags&xt.KSIDE_CASTLE)s="O-O";else if(t.flags&xt.QSIDE_CASTLE)s="O-O-O";else{if(t.flags&xt.NULL_MOVE)return Yg;if(t.piece!==nn){const o=$x(t,n);s+=t.piece.toUpperCase()+o}t.flags&(xt.CAPTURE|xt.EP_CAPTURE)&&(t.piece===nn&&(s+=yn(t.from)[0]),s+="x"),s+=yn(t.to),t.promotion&&(s+="="+t.promotion.toUpperCase())}return this._makeMove(t),this.isCheck()&&(this.isCheckmate()?s+="#":s+="+"),this._undoMove(),s}_moveFromSan(t,n=!1){let s=$g(t);if(n||(s==="0-0"?s="O-O":s==="0-0-0"&&(s="O-O-O")),s==Yg)return{color:this._turn,from:0,to:0,piece:"k",flags:xt.NULL_MOVE};let o=ZE(s),u=this._moves({legal:!0,piece:o});for(let S=0,O=u.length;S<O;S++)if(s===$g(this._moveToSan(u[S],u)))return u[S];if(n)return null;let f,g,m,p,E,T=!1;if(g=s.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),g?(f=g[1],m=g[2],p=g[3],E=g[4],m.length==1&&(T=!0)):(g=s.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),g&&(f=g[1],m=g[2],p=g[3],E=g[4],m.length==1&&(T=!0))),o=ZE(s),u=this._moves({legal:!0,piece:f||o}),!p)return null;for(let S=0,O=u.length;S<O;S++)if(m){if((!f||f.toLowerCase()==u[S].piece)&&Nt[m]==u[S].from&&Nt[p]==u[S].to&&(!E||E.toLowerCase()==u[S].promotion))return u[S];if(T){const K=yn(u[S].from);if((!f||f.toLowerCase()==u[S].piece)&&Nt[p]==u[S].to&&(m==K[0]||m==K[1])&&(!E||E.toLowerCase()==u[S].promotion))return u[S]}}else if(s===$g(this._moveToSan(u[S],u)).replace("x",""))return u[S];return null}ascii(){let t=`   +------------------------+
`;for(let n=Nt.a8;n<=Nt.h1;n++){if(Du(n)===0&&(t+=" "+"87654321"[Pa(n)]+" |"),this._board[n]){const s=this._board[n].type,u=this._board[n].color===kn?s.toUpperCase():s.toLowerCase();t+=" "+u+" "}else t+=" . ";n+1&136&&(t+=`|
`,n+=8)}return t+=`   +------------------------+
`,t+="     a  b  c  d  e  f  g  h",t}perft(t){const n=this._moves({legal:!1});let s=0;const o=this._turn;for(let u=0,f=n.length;u<f;u++)this._makeMove(n[u]),this._isKingAttacked(o)||(t-1>0?s+=this.perft(t-1):s++),this._undoMove();return s}setTurn(t){return this._turn==t?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const t=[];let n=[];for(let s=Nt.a8;s<=Nt.h1;s++)this._board[s]==null?n.push(null):n.push({square:yn(s),type:this._board[s].type,color:this._board[s].color}),s+1&136&&(t.push(n),n=[],s+=8);return t}squareColor(t){if(t in Nt){const n=Nt[t];return(Pa(n)+Du(n))%2===0?"light":"dark"}return null}history({verbose:t=!1}={}){const n=[],s=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const o=n.pop();if(!o)break;t?s.push(new gh(this,o)):s.push(this._moveToSan(o,this._moves())),this._makeMove(o)}return s}_getPositionCount(t){return this._positionCount.get(t)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(t){const n=this._positionCount.get(t)??0;n===1?this._positionCount.delete(t):this._positionCount.set(t,n-1)}_pruneComments(){const t=[],n={},s=o=>{o in this._comments&&(n[o]=this._comments[o])};for(;this._history.length>0;)t.push(this._undoMove());for(s(this.fen());;){const o=t.pop();if(!o)break;this._makeMove(o),s(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(t){this._comments[this.fen()]=t.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const t=this._comments[this.fen()];return delete this._comments[this.fen()],t}getComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>({fen:t,comment:this._comments[t]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>{const n=this._comments[t];return delete this._comments[t],{fen:t,comment:n}})}setCastlingRights(t,n){for(const o of[hn,Us])n[o]!==void 0&&(n[o]?this._castling[t]|=mh[o]:this._castling[t]&=~mh[o]);this._updateCastlingRights();const s=this.getCastlingRights(t);return(n[hn]===void 0||n[hn]===s[hn])&&(n[Us]===void 0||n[Us]===s[Us])}getCastlingRights(t){return{[hn]:(this._castling[t]&mh[hn])!==0,[Us]:(this._castling[t]&mh[Us])!==0}}moveNumber(){return this._moveNumber}}const Xg=r=>new Xx(r),Zx=(r,t,n,s)=>{try{return r.move({from:t,to:n,promotion:s||"q"})}catch{return null}},Jx=({id:r,isLight:t,isHighlighted:n=!1,children:s})=>{const{isOver:o,setNodeRef:u}=Rx({id:r});return et.jsxs("div",{ref:u,className:`chess-square relative transition-all duration-200 ${o?"bg-indigo-500/40 scale-95 z-10 rounded-xl shadow-[0_0_40px_rgba(99,102,241,0.5)]":n?t?"bg-emerald-300/70":"bg-emerald-500/70":t?"bg-slate-200":"bg-slate-400"}`,children:[et.jsx("div",{className:`absolute top-1 left-1 text-[10px] font-black uppercase tracking-tighter opacity-20 pointer-events-none ${t?"text-slate-900":"text-slate-100"}`,children:r}),s]})},Wx={w:{p:"",r:"",n:"",b:"",q:"",k:""},b:{p:"",r:"",n:"",b:"",q:"",k:""}},tM=({id:r,type:t,color:n,isDraggable:s=!0})=>{const{attributes:o,listeners:u,setNodeRef:f,transform:g,isDragging:m}=Sx({id:r,disabled:!s,data:{type:t,color:n}}),p={transform:Rm.Translate.toString(g)};return et.jsx("div",{ref:f,style:p,...u,...o,className:`chess-piece relative z-20 transition-transform duration-100 ${m?"scale-125 z-50 drop-shadow-2xl":"hover:scale-110"} ${s?"cursor-grab active:cursor-grabbing":"grayscale-[0.2] opacity-90 cursor-default"} text-slate-950 drop-shadow-sm`,children:et.jsx("div",{className:`
        flex items-center justify-center w-full h-full 
        ${n==="w"?"drop-shadow-[0_2px_0_rgba(255,255,255,0.8)]":"drop-shadow-[0_2px_0_rgba(0,0,0,0.5)]"}
      `,children:Wx[n][t]})})},eM=({onMove:r,initialFen:t,playerColor:n="w"})=>{const[s,o]=Z.useState(()=>Xg(t)),[u,f]=Z.useState([]);ni.useEffect(()=>{t&&t!==s.fen()&&o(Xg(t))},[t]);const g=EO(zg(Rp),zg(k1),zg(P1)),m=Z.useCallback(T=>{const{active:S,over:O}=T;if(f([]),!O)return;const K=S.id,G=O.id,$=Xg(s.fen());Zx($,K,G)&&(o($),r&&r($.fen()))},[s,r]),p=Z.useCallback(T=>{const S=T,O=s.get(S);if(!O||O.color!==n||s.turn()!==n){f([]);return}const K=s.moves({square:S,verbose:!0}).map(G=>G.to);f(K)},[s,n]),E=()=>{const T=[],S=["a","b","c","d","e","f","g","h"],O=["8","7","6","5","4","3","2","1"],K=n==="w"?O:[...O].reverse(),G=n==="w"?S:[...S].reverse();for(const $ of K)for(const lt of G){const ht=`${lt}${$}`,ut=s.get(ht),It=(S.indexOf(lt)+O.indexOf($))%2===0,wt=!!ut&&ut.color===n&&s.turn()===n,vt=u.includes(ht);T.push(et.jsx(Jx,{id:ht,isLight:It,isHighlighted:vt,children:ut&&et.jsx(tM,{id:ht,type:ut.type,color:ut.color,isDraggable:wt})},ht))}return T};return et.jsx(Ex,{sensors:g,onDragEnd:m,onDragStart:T=>p(T.active.id),children:et.jsx("div",{className:"p-3 bg-slate-900 rounded-[2.5rem] shadow-2xl border border-slate-800 ring-1 ring-white/5",children:et.jsx("div",{className:"grid grid-cols-8 gap-0 rounded-3xl overflow-hidden border border-slate-900/50",style:{width:"min(90vw, 640px)",height:"min(90vw, 640px)",gridTemplateColumns:"repeat(8, 1fr)"},children:E()})})})},nM="demo-user-"+Math.random().toString(36).substring(7),nu=()=>{const r=localStorage.getItem("dragmate-rooms");return r?JSON.parse(r):{}},Zg=r=>{localStorage.setItem("dragmate-rooms",JSON.stringify(r))},iM=()=>Math.random().toString(36).substring(2,8).toUpperCase(),B1=r=>{const[t,n]=Z.useState(null),[s]=Z.useState(nM),[o,u]=Z.useState(!0),[f]=Z.useState(!1);return Z.useEffect(()=>{console.log(" Using DEMO MODE with localStorage"),u(!1)},[]),Z.useEffect(()=>{if(!r){u(!1);return}const T=nu()[r];n(T||null),u(!1);const S=setInterval(()=>{const K=nu()[r];K&&n(K)},500);return()=>clearInterval(S)},[r]),{room:t,userId:s,loading:o,isAuthLoading:f,createRoom:async()=>{const E=iM(),T={fen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",whitePlayer:s,blackPlayer:"",turn:"w"},S=nu();return S[E]=T,Zg(S),console.log(" Demo room created with ID:",E),E},joinRoom:async E=>{const T=nu(),S=T[E];S?(S.whitePlayer?!S.blackPlayer&&S.whitePlayer!==s&&(S.blackPlayer=s):S.whitePlayer=s,Zg(T),console.log(" Joined demo room:",E)):(console.error(" Room not found:",E),alert("Room not found."))},updateMove:async E=>{if(!r)return;const T=nu(),S=T[r];S&&(S.fen=E,S.turn=E.split(" ")[1],Zg(T))}}},rM=({roomId:r,onExit:t})=>{const{room:n,userId:s,loading:o,updateMove:u,joinRoom:f}=B1(r);if(ni.useEffect(()=>{r&&f(r)},[r,f]),o)return et.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-6 animate-pulse",children:[et.jsx("div",{className:"relative shadow-2xl shadow-indigo-500/20 rounded-full p-4",children:et.jsx(zA,{className:"w-16 h-16 text-indigo-500 animate-spin"})}),et.jsxs("div",{className:"text-center space-y-2",children:[et.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest",children:"Entering Arena"}),et.jsx("p",{className:"text-slate-500 font-medium",children:"Synchronizing with the global lattice..."})]})]});if(!n)return et.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[et.jsxs("div",{className:"text-center space-y-4",children:[et.jsx("h2",{className:"text-5xl font-black text-white italic",children:"Room Dissolved"}),et.jsx("p",{className:"text-slate-400 text-lg",children:"The arena you seek no longer exists or the link is expired."})]}),et.jsx("button",{onClick:t,className:"btn-premium px-10 py-4 text-xl",children:"Return to Lobby"})]});const g=n.whitePlayer===s,m=n.blackPlayer===s,p=g?"w":m?"b":"w",E=n.turn===p,T=!n.blackPlayer,S=()=>{navigator.clipboard.writeText(r),alert("Room ID copied to clipboard!")};return et.jsxs("div",{className:"flex flex-col items-center gap-12 py-10 w-full animate-in fade-in duration-700",children:[et.jsxs("header",{className:"w-full max-w-6xl flex items-center justify-between px-6",children:[et.jsxs("button",{onClick:t,className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all font-bold uppercase tracking-widest text-xs",children:[et.jsx("div",{className:"p-2 rounded-xl bg-slate-900 border border-slate-800 group-hover:border-slate-700 group-hover:-translate-x-1 transition-transform",children:et.jsx(kA,{size:18})}),"Back"]}),et.jsx("div",{className:"flex items-center gap-4",children:et.jsxs("div",{className:"liquid-glass px-6 py-3 flex items-center gap-6",children:[et.jsxs("div",{className:"flex flex-col gap-0.5",children:[et.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-slate-500 font-black",children:"Arena ID"}),et.jsx("code",{className:"text-indigo-300 font-mono font-bold",children:r})]}),et.jsx("div",{className:"h-8 w-px bg-slate-800"}),et.jsxs("div",{className:"flex items-center gap-3",children:[et.jsx("button",{onClick:S,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:et.jsx(LA,{size:18})}),et.jsx("button",{className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:et.jsx(GA,{size:18})})]})]})})]}),et.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-16 w-full max-w-7xl px-6",children:[et.jsxs("div",{className:"relative group",children:[et.jsx("div",{className:"absolute -inset-4 bg-linear-to-r from-indigo-500 to-pink-500 rounded-[2.5rem] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"}),et.jsx(eM,{initialFen:n.fen,onMove:u,playerColor:p})]}),et.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-8",children:[et.jsxs("div",{className:"liquid-glass p-8 space-y-8 border-l-4 border-l-indigo-500",children:[et.jsxs("div",{className:"flex items-center justify-between",children:[et.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:T?"Current Turn":"Player Status"}),et.jsxs("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-2 ${T?"bg-indigo-500/10 text-indigo-400 border border-indigo-500/20":E?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-slate-800 text-slate-500"}`,children:[et.jsx("span",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${T?"bg-indigo-500":"bg-green-500"}`}),T?n.turn==="w"?" White to Move":" Black to Move":E?"Your Turn":"Waiting..."]})]}),et.jsxs("div",{className:"space-y-4",children:[et.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[et.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${g?"bg-white text-slate-950":"bg-slate-800 text-slate-400"}`,children:"W"}),et.jsxs("div",{className:"flex-1",children:[et.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"White Player"}),et.jsx("div",{className:"text-xs text-slate-500 font-medium",children:n.whitePlayer===s?"Connected (You)":n.whitePlayer?"Opponent Ready":"Awaiting Entry..."})]})]}),et.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[et.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${m?"bg-indigo-500 text-white":"bg-slate-800 text-slate-400"}`,children:"B"}),et.jsxs("div",{className:"flex-1",children:[et.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"Black Player"}),et.jsx("div",{className:"text-xs text-slate-500 font-medium",children:n.blackPlayer===s?"Connected (You)":n.blackPlayer?"Opponent Ready":"Awaiting Entry..."})]})]})]})]}),et.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[et.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[et.jsx($A,{size:20,className:"mx-auto text-slate-600"}),et.jsx("div",{className:"text-xl font-black text-white italic",children:n.whitePlayer&&n.blackPlayer?"2/2":n.whitePlayer||n.blackPlayer?"1/2":"0/2"}),et.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Connected"})]}),et.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[et.jsx(ZA,{size:20,className:"mx-auto text-indigo-400"}),et.jsx("div",{className:"text-xl font-black text-white italic",children:"24ms"}),et.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Latency"})]})]}),et.jsxs("div",{className:"p-8 rounded-3xl bg-linear-to-br from-indigo-500/10 to-transparent border border-indigo-500/20 text-center",children:[et.jsx(QA,{size:32,className:"mx-auto text-indigo-400 mb-4"}),et.jsx("h4",{className:"text-lg font-black text-white italic mb-2",children:"Rule System v2.4"}),et.jsx("p",{className:"text-sm text-slate-400 font-medium px-4",children:"Moves are secured and validated by the distributed chess core."})]})]})]}),et.jsx("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10",children:"Transparent Strategy Arena"})]})};function sM(){const[r,t]=Z.useState(null),{createRoom:n,isAuthLoading:s}=B1(null),o=async()=>{const g=await n();g&&t(g)},u=g=>{g.trim()&&t(g)},f=()=>{t(null)};return et.jsxs("main",{className:"relative min-h-screen w-full flex flex-col items-center",children:[et.jsx(IA,{}),et.jsx("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:r?et.jsx(rM,{roomId:r,onExit:f}):et.jsx(aO,{onCreateRoom:o,onJoinRoom:u,isAuthLoading:s})}),et.jsx("footer",{className:"mt-auto py-8 text-slate-500 text-sm",children:"DragMate  Premium Multiplayer Board Gaming"})]})}CA.createRoot(document.getElementById("root")).render(et.jsx(Z.StrictMode,{children:et.jsx(sM,{})}));
