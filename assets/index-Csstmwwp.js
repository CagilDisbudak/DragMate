(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function EA(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Gm={exports:{}},ou={};var Dv;function TA(){if(Dv)return ou;Dv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:c,ref:o!==void 0?o:null,props:u}}return ou.Fragment=e,ou.jsx=t,ou.jsxs=t,ou}var Ov;function wA(){return Ov||(Ov=1,Gm.exports=TA()),Gm.exports}var T=wA(),Km={exports:{}},Pe={};var Mv;function SA(){if(Mv)return Pe;Mv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function N(P){return P===null||typeof P!="object"?null:(P=S&&P[S]||P["@@iterator"],typeof P=="function"?P:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,D={};function B(P,re,me){this.props=P,this.context=re,this.refs=D,this.updater=me||k}B.prototype.isReactComponent={},B.prototype.setState=function(P,re){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,re,"setState")},B.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function ne(){}ne.prototype=B.prototype;function Z(P,re,me){this.props=P,this.context=re,this.refs=D,this.updater=me||k}var ce=Z.prototype=new ne;ce.constructor=Z,z(ce,B.prototype),ce.isPureReactComponent=!0;var ie=Array.isArray;function W(){}var x={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function C(P,re,me){var de=me.ref;return{$$typeof:i,type:P,key:re,ref:de!==void 0?de:null,props:me}}function V(P,re){return C(P.type,re,P.props)}function M(P){return typeof P=="object"&&P!==null&&P.$$typeof===i}function j(P){var re={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(me){return re[me]})}var I=/\/+/g;function qe(P,re){return typeof P=="object"&&P!==null&&P.key!=null?j(""+P.key):re.toString(36)}function dt(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(W,W):(P.status="pending",P.then(function(re){P.status==="pending"&&(P.status="fulfilled",P.value=re)},function(re){P.status==="pending"&&(P.status="rejected",P.reason=re)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function te(P,re,me,de,_e){var Ae=typeof P;(Ae==="undefined"||Ae==="boolean")&&(P=null);var Le=!1;if(P===null)Le=!0;else switch(Ae){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(P.$$typeof){case i:case e:Le=!0;break;case v:return Le=P._init,te(Le(P._payload),re,me,de,_e)}}if(Le)return _e=_e(P),Le=de===""?"."+qe(P,0):de,ie(_e)?(me="",Le!=null&&(me=Le.replace(I,"$&/")+"/"),te(_e,re,me,"",function(Ht){return Ht})):_e!=null&&(M(_e)&&(_e=V(_e,me+(_e.key==null||P&&P.key===_e.key?"":(""+_e.key).replace(I,"$&/")+"/")+Le)),re.push(_e)),1;Le=0;var Dt=de===""?".":de+":";if(ie(P))for(var ut=0;ut<P.length;ut++)de=P[ut],Ae=Dt+qe(de,ut),Le+=te(de,re,me,Ae,_e);else if(ut=N(P),typeof ut=="function")for(P=ut.call(P),ut=0;!(de=P.next()).done;)de=de.value,Ae=Dt+qe(de,ut++),Le+=te(de,re,me,Ae,_e);else if(Ae==="object"){if(typeof P.then=="function")return te(dt(P),re,me,de,_e);throw re=String(P),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Le}function he(P,re,me){if(P==null)return P;var de=[],_e=0;return te(P,de,"","",function(Ae){return re.call(me,Ae,_e++)}),de}function be(P){if(P._status===-1){var re=P._result;re=re(),re.then(function(me){(P._status===0||P._status===-1)&&(P._status=1,P._result=me)},function(me){(P._status===0||P._status===-1)&&(P._status=2,P._result=me)}),P._status===-1&&(P._status=0,P._result=re)}if(P._status===1)return P._result.default;throw P._result}var Me=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},ze={map:he,forEach:function(P,re,me){he(P,function(){re.apply(this,arguments)},me)},count:function(P){var re=0;return he(P,function(){re++}),re},toArray:function(P){return he(P,function(re){return re})||[]},only:function(P){if(!M(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Pe.Activity=E,Pe.Children=ze,Pe.Component=B,Pe.Fragment=t,Pe.Profiler=o,Pe.PureComponent=Z,Pe.StrictMode=s,Pe.Suspense=g,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(P){return x.H.useMemoCache(P)}},Pe.cache=function(P){return function(){return P.apply(null,arguments)}},Pe.cacheSignal=function(){return null},Pe.cloneElement=function(P,re,me){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var de=z({},P.props),_e=P.key;if(re!=null)for(Ae in re.key!==void 0&&(_e=""+re.key),re)!R.call(re,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&re.ref===void 0||(de[Ae]=re[Ae]);var Ae=arguments.length-2;if(Ae===1)de.children=me;else if(1<Ae){for(var Le=Array(Ae),Dt=0;Dt<Ae;Dt++)Le[Dt]=arguments[Dt+2];de.children=Le}return C(P.type,_e,de)},Pe.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},Pe.createElement=function(P,re,me){var de,_e={},Ae=null;if(re!=null)for(de in re.key!==void 0&&(Ae=""+re.key),re)R.call(re,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(_e[de]=re[de]);var Le=arguments.length-2;if(Le===1)_e.children=me;else if(1<Le){for(var Dt=Array(Le),ut=0;ut<Le;ut++)Dt[ut]=arguments[ut+2];_e.children=Dt}if(P&&P.defaultProps)for(de in Le=P.defaultProps,Le)_e[de]===void 0&&(_e[de]=Le[de]);return C(P,Ae,_e)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(P){return{$$typeof:m,render:P}},Pe.isValidElement=M,Pe.lazy=function(P){return{$$typeof:v,_payload:{_status:-1,_result:P},_init:be}},Pe.memo=function(P,re){return{$$typeof:p,type:P,compare:re===void 0?null:re}},Pe.startTransition=function(P){var re=x.T,me={};x.T=me;try{var de=P(),_e=x.S;_e!==null&&_e(me,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(W,Me)}catch(Ae){Me(Ae)}finally{re!==null&&me.types!==null&&(re.types=me.types),x.T=re}},Pe.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},Pe.use=function(P){return x.H.use(P)},Pe.useActionState=function(P,re,me){return x.H.useActionState(P,re,me)},Pe.useCallback=function(P,re){return x.H.useCallback(P,re)},Pe.useContext=function(P){return x.H.useContext(P)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(P,re){return x.H.useDeferredValue(P,re)},Pe.useEffect=function(P,re){return x.H.useEffect(P,re)},Pe.useEffectEvent=function(P){return x.H.useEffectEvent(P)},Pe.useId=function(){return x.H.useId()},Pe.useImperativeHandle=function(P,re,me){return x.H.useImperativeHandle(P,re,me)},Pe.useInsertionEffect=function(P,re){return x.H.useInsertionEffect(P,re)},Pe.useLayoutEffect=function(P,re){return x.H.useLayoutEffect(P,re)},Pe.useMemo=function(P,re){return x.H.useMemo(P,re)},Pe.useOptimistic=function(P,re){return x.H.useOptimistic(P,re)},Pe.useReducer=function(P,re,me){return x.H.useReducer(P,re,me)},Pe.useRef=function(P){return x.H.useRef(P)},Pe.useState=function(P){return x.H.useState(P)},Pe.useSyncExternalStore=function(P,re,me){return x.H.useSyncExternalStore(P,re,me)},Pe.useTransition=function(){return x.H.useTransition()},Pe.version="19.2.3",Pe}var kv;function tp(){return kv||(kv=1,Km.exports=SA()),Km.exports}var H=tp();const at=EA(H);var $m={exports:{}},lu={},Qm={exports:{}},Ym={};var Vv;function AA(){return Vv||(Vv=1,(function(i){function e(te,he){var be=te.length;te.push(he);e:for(;0<be;){var Me=be-1>>>1,ze=te[Me];if(0<o(ze,he))te[Me]=he,te[be]=ze,be=Me;else break e}}function t(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var he=te[0],be=te.pop();if(be!==he){te[0]=be;e:for(var Me=0,ze=te.length,P=ze>>>1;Me<P;){var re=2*(Me+1)-1,me=te[re],de=re+1,_e=te[de];if(0>o(me,be))de<ze&&0>o(_e,me)?(te[Me]=_e,te[de]=be,Me=de):(te[Me]=me,te[re]=be,Me=re);else if(de<ze&&0>o(_e,be))te[Me]=_e,te[de]=be,Me=de;else break e}}return he}function o(te,he){var be=te.sortIndex-he.sortIndex;return be!==0?be:te.id-he.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();i.unstable_now=function(){return c.now()-m}}var g=[],p=[],v=1,E=null,S=3,N=!1,k=!1,z=!1,D=!1,B=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function ce(te){for(var he=t(p);he!==null;){if(he.callback===null)s(p);else if(he.startTime<=te)s(p),he.sortIndex=he.expirationTime,e(g,he);else break;he=t(p)}}function ie(te){if(z=!1,ce(te),!k)if(t(g)!==null)k=!0,W||(W=!0,j());else{var he=t(p);he!==null&&dt(ie,he.startTime-te)}}var W=!1,x=-1,R=5,C=-1;function V(){return D?!0:!(i.unstable_now()-C<R)}function M(){if(D=!1,W){var te=i.unstable_now();C=te;var he=!0;try{e:{k=!1,z&&(z=!1,ne(x),x=-1),N=!0;var be=S;try{t:{for(ce(te),E=t(g);E!==null&&!(E.expirationTime>te&&V());){var Me=E.callback;if(typeof Me=="function"){E.callback=null,S=E.priorityLevel;var ze=Me(E.expirationTime<=te);if(te=i.unstable_now(),typeof ze=="function"){E.callback=ze,ce(te),he=!0;break t}E===t(g)&&s(g),ce(te)}else s(g);E=t(g)}if(E!==null)he=!0;else{var P=t(p);P!==null&&dt(ie,P.startTime-te),he=!1}}break e}finally{E=null,S=be,N=!1}he=void 0}}finally{he?j():W=!1}}}var j;if(typeof Z=="function")j=function(){Z(M)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,qe=I.port2;I.port1.onmessage=M,j=function(){qe.postMessage(null)}}else j=function(){B(M,0)};function dt(te,he){x=B(function(){te(i.unstable_now())},he)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(te){te.callback=null},i.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<te?Math.floor(1e3/te):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(te){switch(S){case 1:case 2:case 3:var he=3;break;default:he=S}var be=S;S=he;try{return te()}finally{S=be}},i.unstable_requestPaint=function(){D=!0},i.unstable_runWithPriority=function(te,he){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var be=S;S=te;try{return he()}finally{S=be}},i.unstable_scheduleCallback=function(te,he,be){var Me=i.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Me+be:Me):be=Me,te){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=be+ze,te={id:v++,callback:he,priorityLevel:te,startTime:be,expirationTime:ze,sortIndex:-1},be>Me?(te.sortIndex=be,e(p,te),t(g)===null&&te===t(p)&&(z?(ne(x),x=-1):z=!0,dt(ie,be-Me))):(te.sortIndex=ze,e(g,te),k||N||(k=!0,W||(W=!0,j()))),te},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(te){var he=S;return function(){var be=S;S=he;try{return te.apply(this,arguments)}finally{S=be}}}})(Ym)),Ym}var Pv;function xA(){return Pv||(Pv=1,Qm.exports=AA()),Qm.exports}var Xm={exports:{}},jn={};var Lv;function RA(){if(Lv)return jn;Lv=1;var i=tp();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:p,implementation:v}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,jn.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(g,p,null,v)},jn.flushSync=function(g){var p=c.T,v=s.p;try{if(c.T=null,s.p=2,g)return g()}finally{c.T=p,s.p=v,s.d.f()}},jn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},jn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},jn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,E=m(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,N=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:N}):v==="script"&&s.d.X(g,{crossOrigin:E,integrity:S,fetchPriority:N,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},jn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=m(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},jn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=m(v,p.crossOrigin);s.d.L(g,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},jn.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=m(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},jn.requestFormReset=function(g){s.d.r(g)},jn.unstable_batchedUpdates=function(g,p){return g(p)},jn.useFormState=function(g,p,v){return c.H.useFormState(g,p,v)},jn.useFormStatus=function(){return c.H.useHostTransitionStatus()},jn.version="19.2.3",jn}var jv;function BE(){if(jv)return Xm.exports;jv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Xm.exports=RA(),Xm.exports}var Uv;function CA(){if(Uv)return lu;Uv=1;var i=xA(),e=tp(),t=BE();function s(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function c(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function m(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(s(188))}function p(n){var r=n.alternate;if(!r){if(r=u(n),r===null)throw Error(s(188));return r!==n?null:n}for(var a=n,l=r;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),n;if(d===l)return g(f),r;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,w=f.child;w;){if(w===a){_=!0,a=f,l=d;break}if(w===l){_=!0,l=f,a=d;break}w=w.sibling}if(!_){for(w=d.child;w;){if(w===a){_=!0,a=d,l=f;break}if(w===l){_=!0,l=d,a=f;break}w=w.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?n:r}function v(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=v(n),r!==null)return r;n=n.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function j(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var I=Symbol.for("react.client.reference");function qe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===I?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case z:return"Fragment";case B:return"Profiler";case D:return"StrictMode";case ie:return"Suspense";case W:return"SuspenseList";case C:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case k:return"Portal";case Z:return n.displayName||"Context";case ne:return(n._context.displayName||"Context")+".Consumer";case ce:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case x:return r=n.displayName||null,r!==null?r:qe(n.type)||"Memo";case R:r=n._payload,n=n._init;try{return qe(n(r))}catch{}}return null}var dt=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},Me=[],ze=-1;function P(n){return{current:n}}function re(n){0>ze||(n.current=Me[ze],Me[ze]=null,ze--)}function me(n,r){ze++,Me[ze]=n.current,n.current=r}var de=P(null),_e=P(null),Ae=P(null),Le=P(null);function Dt(n,r){switch(me(Ae,r),me(_e,n),me(de,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?ev(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=ev(r),n=tv(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}re(de),me(de,n)}function ut(){re(de),re(_e),re(Ae)}function Ht(n){n.memoizedState!==null&&me(Le,n);var r=de.current,a=tv(r,n.type);r!==a&&(me(_e,n),me(de,a))}function Si(n){_e.current===n&&(re(de),re(_e)),Le.current===n&&(re(Le),iu._currentValue=be)}var Vn,qi;function Jt(n){if(Vn===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Vn=r&&r[1]||"",qi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vn+n+qi}var fi=!1;function Pn(n,r){if(!n||fi)return"";fi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ee){var Q=ee}Reflect.construct(n,[],le)}else{try{le.call()}catch(ee){Q=ee}n.call(le.prototype)}}else{try{throw Error()}catch(ee){Q=ee}(le=n())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ee){if(ee&&Q&&typeof ee.stack=="string")return[ee.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],w=d[1];if(_&&w){var O=_.split(`
`),K=w.split(`
`);for(f=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;f<K.length&&!K[f].includes("DetermineComponentFrameRoot");)f++;if(l===O.length||f===K.length)for(l=O.length-1,f=K.length-1;1<=l&&0<=f&&O[l]!==K[f];)f--;for(;1<=l&&0<=f;l--,f--)if(O[l]!==K[f]){if(l!==1||f!==1)do if(l--,f--,0>f||O[l]!==K[f]){var se=`
`+O[l].replace(" at new "," at ");return n.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",n.displayName)),se}while(1<=l&&0<=f);break}}}finally{fi=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Jt(a):""}function ar(n,r){switch(n.tag){case 26:case 27:case 5:return Jt(n.type);case 16:return Jt("Lazy");case 13:return n.child!==r&&r!==null?Jt("Suspense Fallback"):Jt("Suspense");case 19:return Jt("SuspenseList");case 0:case 15:return Pn(n.type,!1);case 11:return Pn(n.type.render,!1);case 1:return Pn(n.type,!0);case 31:return Jt("Activity");default:return""}}function Hi(n){try{var r="",a=null;do r+=ar(n,a),a=n,n=n.return;while(n);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var St=Object.prototype.hasOwnProperty,ct=i.unstable_scheduleCallback,Hn=i.unstable_cancelCallback,or=i.unstable_shouldYield,lr=i.unstable_requestPaint,Zt=i.unstable_now,Fi=i.unstable_getCurrentPriorityLevel,Rr=i.unstable_ImmediatePriority,Fn=i.unstable_UserBlockingPriority,Sn=i.unstable_NormalPriority,Gi=i.unstable_LowPriority,Cr=i.unstable_IdlePriority,Gn=i.log,Nr=i.unstable_setDisableYieldValue,Kn=null,Ft=null;function pn(n){if(typeof Gn=="function"&&Nr(n),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(Kn,n)}catch{}}var At=Math.clz32?Math.clz32:ss,Ir=Math.log,Ki=Math.LN2;function ss(n){return n>>>=0,n===0?32:31-(Ir(n)/Ki|0)|0}var ni=256,$i=262144,He=4194304;function xt(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Rt(n,r,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var w=l&134217727;return w!==0?(l=w&~d,l!==0?f=xt(l):(_&=w,_!==0?f=xt(_):a||(a=w&~n,a!==0&&(f=xt(a))))):(w=l&~d,w!==0?f=xt(w):_!==0?f=xt(_):a||(a=l&~n,a!==0&&(f=xt(a)))),f===0?0:r!==0&&r!==f&&(r&d)===0&&(d=f&-f,a=r&-r,d>=a||d===32&&(a&4194048)!==0)?r:f}function jt(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function yn(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wt(){var n=He;return He<<=1,(He&62914560)===0&&(He=4194304),n}function Vt(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function Y(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function mt(n,r,a,l,f,d){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var w=n.entanglements,O=n.expirationTimes,K=n.hiddenUpdates;for(a=_&~a;0<a;){var se=31-At(a),le=1<<se;w[se]=0,O[se]=-1;var Q=K[se];if(Q!==null)for(K[se]=null,se=0;se<Q.length;se++){var ee=Q[se];ee!==null&&(ee.lane&=-536870913)}a&=~le}l!==0&&gt(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(_&~r))}function gt(n,r,a){n.pendingLanes|=r,n.suspendedLanes&=~r;var l=31-At(r);n.entangledLanes|=r,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function Gt(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var l=31-At(a),f=1<<l;f&r|n[l]&r&&(n[l]|=r),a&=~f}}function fe(n,r){var a=r&-r;return a=(a&42)!==0?1:cn(a),(a&(n.suspendedLanes|r))!==0?0:a}function cn(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function tt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ot(){var n=he.p;return n!==0?n:(n=window.event,n===void 0?32:Sv(n.type))}function hn(n,r){var a=he.p;try{return he.p=n,r()}finally{he.p=a}}var pt=Math.random().toString(36).slice(2),Pt="__reactFiber$"+pt,Kt="__reactProps$"+pt,Ee="__reactContainer$"+pt,as="__reactEvents$"+pt,Ja="__reactListeners$"+pt,Za="__reactHandles$"+pt,da="__reactResources$"+pt,Ai="__reactMarker$"+pt;function os(n){delete n[Pt],delete n[Kt],delete n[as],delete n[Ja],delete n[Za]}function xi(n){var r=n[Pt];if(r)return r;for(var a=n.parentNode;a;){if(r=a[Ee]||a[Pt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=lv(n);n!==null;){if(a=n[Pt])return a;n=lv(n)}return r}n=a,a=n.parentNode}return null}function $n(n){if(n=n[Pt]||n[Ee]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function Ln(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(s(33))}function Ri(n){var r=n[da];return r||(r=n[da]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ut(n){n[Ai]=!0}var ma=new Set,ls={};function ii(n,r){Ci(n,r),Ci(n+"Capture",r)}function Ci(n,r){for(ls[n]=r,n=0;n<r.length;n++)ma.add(r[n])}var ga=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),us={},pa={};function en(n){return St.call(pa,n)?!0:St.call(us,n)?!1:ga.test(n)?pa[n]=!0:(us[n]=!0,!1)}function q(n,r,a){if(en(r))if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+a)}}function X(n,r,a){if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+a)}}function $(n,r,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(r,a,""+l)}}function ye(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Se(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function We(n,r,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(n,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Fe(n){if(!n._valueTracker){var r=Se(n)?"checked":"value";n._valueTracker=We(n,r,""+n[r])}}function Ni(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return n&&(l=Se(n)?n.checked?"true":"false":n.value),n=l,n!==a?(r.setValue(n),!0):!1}function ur(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ya=/[\n"\\]/g;function ri(n){return n.replace(ya,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Wa(n,r,a,l,f,d,_,w){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),r!=null?_==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+ye(r)):n.value!==""+ye(r)&&(n.value=""+ye(r)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),r!=null?pl(n,_,ye(r)):a!=null?pl(n,_,ye(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+ye(w):n.removeAttribute("name")}function hc(n,r,a,l,f,d,_,w){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),r!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||r!=null)){Fe(n);return}a=a!=null?""+ye(a):"",r=r!=null?""+ye(r):a,w||r===n.value||(n.value=r),n.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=w?n.checked:!!l,n.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Fe(n)}function pl(n,r,a){r==="number"&&ur(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function cs(n,r,a,l){if(n=n.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=r.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+ye(a),r=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function fc(n,r,a){if(r!=null&&(r=""+ye(r),r!==n.value&&(n.value=r),a==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=a!=null?""+ye(a):""}function hs(n,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(dt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=ye(r),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),Fe(n)}function si(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var dc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yl(n,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":l?n.setProperty(r,a):typeof a!="number"||a===0||dc.has(r)?r==="float"?n.cssFloat=a:n[r]=(""+a).trim():n[r]=a+"px"}function _l(n,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&a[f]!==l&&yl(n,f,l)}else for(var d in r)r.hasOwnProperty(d)&&yl(n,d,r[d])}function eo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function to(n){return fs.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Qi(){}var vl=null;function Ii(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ds=null,cr=null;function _a(n){var r=$n(n);if(r&&(n=r.stateNode)){var a=n[Kt]||null;e:switch(n=r.stateNode,r.type){case"input":if(Wa(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ri(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==n&&l.form===n.form){var f=l[Kt]||null;if(!f)throw Error(s(90));Wa(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===n.form&&Ni(l)}break e;case"textarea":fc(n,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&cs(n,!!a.multiple,r,!1)}}}var no=!1;function ms(n,r,a){if(no)return n(r,a);no=!0;try{var l=n(r);return l}finally{if(no=!1,(ds!==null||cr!==null)&&(oh(),ds&&(r=ds,n=cr,cr=ds=null,_a(r),n)))for(r=0;r<n.length;r++)_a(n[r])}}function Yi(n,r){var a=n.stateNode;if(a===null)return null;var l=a[Kt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),va=!1;if(Di)try{var yt={};Object.defineProperty(yt,"passive",{get:function(){va=!0}}),window.addEventListener("test",yt,yt),window.removeEventListener("test",yt,yt)}catch{va=!1}var hr=null,bl=null,ba=null;function El(){if(ba)return ba;var n,r=bl,a=r.length,l,f="value"in hr?hr.value:hr.textContent,d=f.length;for(n=0;n<a&&r[n]===f[n];n++);var _=a-n;for(l=1;l<=_&&r[a-l]===f[d-l];l++);return ba=f.slice(n,1<l?1-l:void 0)}function Ea(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Dr(){return!0}function Xi(){return!1}function An(n){function r(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(a=n[w],this[w]=a?a(d):d[w]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Dr:Xi,this.isPropagationStopped=Xi,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Dr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Dr)},persist:function(){},isPersistent:Dr}),r}var Or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fr=An(Or),gs=E({},Or,{view:0,detail:0}),Tl=An(gs),ps,io,dr,ro=E({},gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ys,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==dr&&(dr&&n.type==="mousemove"?(ps=n.screenX-dr.screenX,io=n.screenY-dr.screenY):io=ps=0,dr=n),ps)},movementY:function(n){return"movementY"in n?n.movementY:io}}),wl=An(ro),Ta=E({},ro,{dataTransfer:0}),gc=An(Ta),pc=E({},gs,{relatedTarget:0}),wa=An(pc),Sl=E({},Or,{animationName:0,elapsedTime:0,pseudoElement:0}),yc=An(Sl),so=E({},Or,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),_c=An(so),vc=E({},Or,{data:0}),mr=An(vc),bc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ec={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wc(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Tc[n])?!!r[n]:!1}function ys(){return wc}var Qn=E({},gs,{key:function(n){if(n.key){var r=bc[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Ea(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ec[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ys,charCode:function(n){return n.type==="keypress"?Ea(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ea(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Sc=An(Qn),Ac=E({},ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mr=An(Ac),h=E({},gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ys}),y=An(h),b=E({},Or,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=An(b),F=E({},ro,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),J=An(F),ge=E({},Or,{newState:0,oldState:0}),je=An(ge),$t=[9,13,27,32],ot=Di&&"CompositionEvent"in window,Mt=null;Di&&"documentMode"in document&&(Mt=document.documentMode);var Oi=Di&&"TextEvent"in window&&!Mt,gr=Di&&(!ot||Mt&&8<Mt&&11>=Mt),Ji=" ",Zi=!1;function Sa(n,r){switch(n){case"keyup":return $t.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ao(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var oo=!1;function Gw(n,r){switch(n){case"compositionend":return ao(r);case"keypress":return r.which!==32?null:(Zi=!0,Ji);case"textInput":return n=r.data,n===Ji&&Zi?null:n;default:return null}}function Kw(n,r){if(oo)return n==="compositionend"||!ot&&Sa(n,r)?(n=El(),ba=bl=hr=null,oo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return gr&&r.locale!=="ko"?null:r.data;default:return null}}var $w={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function h0(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!$w[n.type]:r==="textarea"}function f0(n,r,a,l){ds?cr?cr.push(l):cr=[l]:ds=l,r=mh(r,"onChange"),0<r.length&&(a=new fr("onChange","change",null,a,l),n.push({event:a,listeners:r}))}var Al=null,xl=null;function Qw(n){Q_(n,0)}function xc(n){var r=Ln(n);if(Ni(r))return n}function d0(n,r){if(n==="change")return r}var m0=!1;if(Di){var Zf;if(Di){var Wf="oninput"in document;if(!Wf){var g0=document.createElement("div");g0.setAttribute("oninput","return;"),Wf=typeof g0.oninput=="function"}Zf=Wf}else Zf=!1;m0=Zf&&(!document.documentMode||9<document.documentMode)}function p0(){Al&&(Al.detachEvent("onpropertychange",y0),xl=Al=null)}function y0(n){if(n.propertyName==="value"&&xc(xl)){var r=[];f0(r,xl,n,Ii(n)),ms(Qw,r)}}function Yw(n,r,a){n==="focusin"?(p0(),Al=r,xl=a,Al.attachEvent("onpropertychange",y0)):n==="focusout"&&p0()}function Xw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return xc(xl)}function Jw(n,r){if(n==="click")return xc(r)}function Zw(n,r){if(n==="input"||n==="change")return xc(r)}function Ww(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var di=typeof Object.is=="function"?Object.is:Ww;function Rl(n,r){if(di(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!St.call(r,f)||!di(n[f],r[f]))return!1}return!0}function _0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function v0(n,r){var a=_0(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=r&&l>=r)return{node:a,offset:r-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=_0(a)}}function b0(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?b0(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function E0(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=ur(n.document);r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=ur(n.document)}return r}function ed(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var eS=Di&&"documentMode"in document&&11>=document.documentMode,lo=null,td=null,Cl=null,nd=!1;function T0(n,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;nd||lo==null||lo!==ur(l)||(l=lo,"selectionStart"in l&&ed(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Cl&&Rl(Cl,l)||(Cl=l,l=mh(td,"onSelect"),0<l.length&&(r=new fr("onSelect","select",null,r,a),n.push({event:r,listeners:l}),r.target=lo)))}function Aa(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var uo={animationend:Aa("Animation","AnimationEnd"),animationiteration:Aa("Animation","AnimationIteration"),animationstart:Aa("Animation","AnimationStart"),transitionrun:Aa("Transition","TransitionRun"),transitionstart:Aa("Transition","TransitionStart"),transitioncancel:Aa("Transition","TransitionCancel"),transitionend:Aa("Transition","TransitionEnd")},id={},w0={};Di&&(w0=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function xa(n){if(id[n])return id[n];if(!uo[n])return n;var r=uo[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in w0)return id[n]=r[a];return n}var S0=xa("animationend"),A0=xa("animationiteration"),x0=xa("animationstart"),tS=xa("transitionrun"),nS=xa("transitionstart"),iS=xa("transitioncancel"),R0=xa("transitionend"),C0=new Map,rd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rd.push("scrollEnd");function Wi(n,r){C0.set(n,r),ii(r,[n])}var Rc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Mi=[],co=0,sd=0;function Cc(){for(var n=co,r=sd=co=0;r<n;){var a=Mi[r];Mi[r++]=null;var l=Mi[r];Mi[r++]=null;var f=Mi[r];Mi[r++]=null;var d=Mi[r];if(Mi[r++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&N0(a,f,d)}}function Nc(n,r,a,l){Mi[co++]=n,Mi[co++]=r,Mi[co++]=a,Mi[co++]=l,sd|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function ad(n,r,a,l){return Nc(n,r,a,l),Ic(n)}function Ra(n,r){return Nc(n,null,null,r),Ic(n)}function N0(n,r,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&r!==null&&(f=31-At(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[r]:l.push(r),r.lane=a|536870912),d):null}function Ic(n){if(50<Xl)throw Xl=0,gm=null,Error(s(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var ho={};function rS(n,r,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(n,r,a,l){return new rS(n,r,a,l)}function od(n){return n=n.prototype,!(!n||!n.isReactComponent)}function kr(n,r){var a=n.alternate;return a===null?(a=mi(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function I0(n,r){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,r=a.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function Dc(n,r,a,l,f,d){var _=0;if(l=n,typeof n=="function")od(n)&&(_=1);else if(typeof n=="string")_=uA(n,a,de.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case C:return n=mi(31,a,r,f),n.elementType=C,n.lanes=d,n;case z:return Ca(a.children,f,d,r);case D:_=8,f|=24;break;case B:return n=mi(12,a,r,f|2),n.elementType=B,n.lanes=d,n;case ie:return n=mi(13,a,r,f),n.elementType=ie,n.lanes=d,n;case W:return n=mi(19,a,r,f),n.elementType=W,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Z:_=10;break e;case ne:_=9;break e;case ce:_=11;break e;case x:_=14;break e;case R:_=16,l=null;break e}_=29,a=Error(s(130,n===null?"null":typeof n,"")),l=null}return r=mi(_,a,r,f),r.elementType=n,r.type=l,r.lanes=d,r}function Ca(n,r,a,l){return n=mi(7,n,l,r),n.lanes=a,n}function ld(n,r,a){return n=mi(6,n,null,r),n.lanes=a,n}function D0(n){var r=mi(18,null,null,0);return r.stateNode=n,r}function ud(n,r,a){return r=mi(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var O0=new WeakMap;function ki(n,r){if(typeof n=="object"&&n!==null){var a=O0.get(n);return a!==void 0?a:(r={value:n,source:r,stack:Hi(r)},O0.set(n,r),r)}return{value:n,source:r,stack:Hi(r)}}var fo=[],mo=0,Oc=null,Nl=0,Vi=[],Pi=0,_s=null,pr=1,yr="";function Vr(n,r){fo[mo++]=Nl,fo[mo++]=Oc,Oc=n,Nl=r}function M0(n,r,a){Vi[Pi++]=pr,Vi[Pi++]=yr,Vi[Pi++]=_s,_s=n;var l=pr;n=yr;var f=32-At(l)-1;l&=~(1<<f),a+=1;var d=32-At(r)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,pr=1<<32-At(r)+f|a<<f|l,yr=d+n}else pr=1<<d|a<<f|l,yr=n}function cd(n){n.return!==null&&(Vr(n,1),M0(n,1,0))}function hd(n){for(;n===Oc;)Oc=fo[--mo],fo[mo]=null,Nl=fo[--mo],fo[mo]=null;for(;n===_s;)_s=Vi[--Pi],Vi[Pi]=null,yr=Vi[--Pi],Vi[Pi]=null,pr=Vi[--Pi],Vi[Pi]=null}function k0(n,r){Vi[Pi++]=pr,Vi[Pi++]=yr,Vi[Pi++]=_s,pr=r.id,yr=r.overflow,_s=n}var xn=null,Ct=null,et=!1,vs=null,Li=!1,fd=Error(s(519));function bs(n){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Il(ki(r,n)),fd}function V0(n){var r=n.stateNode,a=n.type,l=n.memoizedProps;switch(r[Pt]=n,r[Kt]=l,a){case"dialog":Ke("cancel",r),Ke("close",r);break;case"iframe":case"object":case"embed":Ke("load",r);break;case"video":case"audio":for(a=0;a<Zl.length;a++)Ke(Zl[a],r);break;case"source":Ke("error",r);break;case"img":case"image":case"link":Ke("error",r),Ke("load",r);break;case"details":Ke("toggle",r);break;case"input":Ke("invalid",r),hc(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ke("invalid",r);break;case"textarea":Ke("invalid",r),hs(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||Z_(r.textContent,a)?(l.popover!=null&&(Ke("beforetoggle",r),Ke("toggle",r)),l.onScroll!=null&&Ke("scroll",r),l.onScrollEnd!=null&&Ke("scrollend",r),l.onClick!=null&&(r.onclick=Qi),r=!0):r=!1,r||bs(n,!0)}function P0(n){for(xn=n.return;xn;)switch(xn.tag){case 5:case 31:case 13:Li=!1;return;case 27:case 3:Li=!0;return;default:xn=xn.return}}function go(n){if(n!==xn)return!1;if(!et)return P0(n),et=!0,!1;var r=n.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Im(n.type,n.memoizedProps)),a=!a),a&&Ct&&bs(n),P0(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Ct=ov(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Ct=ov(n)}else r===27?(r=Ct,ks(n.type)?(n=Vm,Vm=null,Ct=n):Ct=r):Ct=xn?Ui(n.stateNode.nextSibling):null;return!0}function Na(){Ct=xn=null,et=!1}function dd(){var n=vs;return n!==null&&(ui===null?ui=n:ui.push.apply(ui,n),vs=null),n}function Il(n){vs===null?vs=[n]:vs.push(n)}var md=P(null),Ia=null,Pr=null;function Es(n,r,a){me(md,r._currentValue),r._currentValue=a}function Lr(n){n._currentValue=md.current,re(md)}function gd(n,r,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),n===a)break;n=n.return}}function pd(n,r,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;e:for(;d!==null;){var w=d;d=f;for(var O=0;O<r.length;O++)if(w.context===r[O]){d.lanes|=a,w=d.alternate,w!==null&&(w.lanes|=a),gd(d.return,a,n),l||(_=null);break e}d=w.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(s(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),gd(_,a,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function po(n,r,a,l){n=null;for(var f=r,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var w=f.type;di(f.pendingProps.value,_.value)||(n!==null?n.push(w):n=[w])}}else if(f===Le.current){if(_=f.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(iu):n=[iu])}f=f.return}n!==null&&pd(r,n,a,l),r.flags|=262144}function Mc(n){for(n=n.firstContext;n!==null;){if(!di(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Da(n){Ia=n,Pr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Rn(n){return L0(Ia,n)}function kc(n,r){return Ia===null&&Da(n),L0(n,r)}function L0(n,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Pr===null){if(n===null)throw Error(s(308));Pr=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Pr=Pr.next=r;return a}var sS=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){r.aborted=!0,n.forEach(function(a){return a()})}},aS=i.unstable_scheduleCallback,oS=i.unstable_NormalPriority,tn={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yd(){return{controller:new sS,data:new Map,refCount:0}}function Dl(n){n.refCount--,n.refCount===0&&aS(oS,function(){n.controller.abort()})}var Ol=null,_d=0,yo=0,_o=null;function lS(n,r){if(Ol===null){var a=Ol=[];_d=0,yo=Em(),_o={status:"pending",value:void 0,then:function(l){a.push(l)}}}return _d++,r.then(j0,j0),r}function j0(){if(--_d===0&&Ol!==null){_o!==null&&(_o.status="fulfilled");var n=Ol;Ol=null,yo=0,_o=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function uS(n,r){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var U0=te.S;te.S=function(n,r){T_=Zt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&lS(n,r),U0!==null&&U0(n,r)};var Oa=P(null);function vd(){var n=Oa.current;return n!==null?n:Tt.pooledCache}function Vc(n,r){r===null?me(Oa,Oa.current):me(Oa,r.pool)}function z0(){var n=vd();return n===null?null:{parent:tn._currentValue,pool:n}}var vo=Error(s(460)),bd=Error(s(474)),Pc=Error(s(542)),Lc={then:function(){}};function B0(n){return n=n.status,n==="fulfilled"||n==="rejected"}function q0(n,r,a){switch(a=n[a],a===void 0?n.push(r):a!==r&&(r.then(Qi,Qi),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,F0(n),n;default:if(typeof r.status=="string")r.then(Qi,Qi);else{if(n=Tt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=r,n.status="pending",n.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,F0(n),n}throw ka=r,vo}}function Ma(n){try{var r=n._init;return r(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ka=a,vo):a}}var ka=null;function H0(){if(ka===null)throw Error(s(459));var n=ka;return ka=null,n}function F0(n){if(n===vo||n===Pc)throw Error(s(483))}var bo=null,Ml=0;function jc(n){var r=Ml;return Ml+=1,bo===null&&(bo=[]),q0(bo,n,r)}function kl(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Uc(n,r){throw r.$$typeof===S?Error(s(525)):(n=Object.prototype.toString.call(r),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function G0(n){function r(U,L){if(n){var G=U.deletions;G===null?(U.deletions=[L],U.flags|=16):G.push(L)}}function a(U,L){if(!n)return null;for(;L!==null;)r(U,L),L=L.sibling;return null}function l(U){for(var L=new Map;U!==null;)U.key!==null?L.set(U.key,U):L.set(U.index,U),U=U.sibling;return L}function f(U,L){return U=kr(U,L),U.index=0,U.sibling=null,U}function d(U,L,G){return U.index=G,n?(G=U.alternate,G!==null?(G=G.index,G<L?(U.flags|=67108866,L):G):(U.flags|=67108866,L)):(U.flags|=1048576,L)}function _(U){return n&&U.alternate===null&&(U.flags|=67108866),U}function w(U,L,G,ae){return L===null||L.tag!==6?(L=ld(G,U.mode,ae),L.return=U,L):(L=f(L,G),L.return=U,L)}function O(U,L,G,ae){var Re=G.type;return Re===z?se(U,L,G.props.children,ae,G.key):L!==null&&(L.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===R&&Ma(Re)===L.type)?(L=f(L,G.props),kl(L,G),L.return=U,L):(L=Dc(G.type,G.key,G.props,null,U.mode,ae),kl(L,G),L.return=U,L)}function K(U,L,G,ae){return L===null||L.tag!==4||L.stateNode.containerInfo!==G.containerInfo||L.stateNode.implementation!==G.implementation?(L=ud(G,U.mode,ae),L.return=U,L):(L=f(L,G.children||[]),L.return=U,L)}function se(U,L,G,ae,Re){return L===null||L.tag!==7?(L=Ca(G,U.mode,ae,Re),L.return=U,L):(L=f(L,G),L.return=U,L)}function le(U,L,G){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=ld(""+L,U.mode,G),L.return=U,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case N:return G=Dc(L.type,L.key,L.props,null,U.mode,G),kl(G,L),G.return=U,G;case k:return L=ud(L,U.mode,G),L.return=U,L;case R:return L=Ma(L),le(U,L,G)}if(dt(L)||j(L))return L=Ca(L,U.mode,G,null),L.return=U,L;if(typeof L.then=="function")return le(U,jc(L),G);if(L.$$typeof===Z)return le(U,kc(U,L),G);Uc(U,L)}return null}function Q(U,L,G,ae){var Re=L!==null?L.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Re!==null?null:w(U,L,""+G,ae);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case N:return G.key===Re?O(U,L,G,ae):null;case k:return G.key===Re?K(U,L,G,ae):null;case R:return G=Ma(G),Q(U,L,G,ae)}if(dt(G)||j(G))return Re!==null?null:se(U,L,G,ae,null);if(typeof G.then=="function")return Q(U,L,jc(G),ae);if(G.$$typeof===Z)return Q(U,L,kc(U,G),ae);Uc(U,G)}return null}function ee(U,L,G,ae,Re){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return U=U.get(G)||null,w(L,U,""+ae,Re);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case N:return U=U.get(ae.key===null?G:ae.key)||null,O(L,U,ae,Re);case k:return U=U.get(ae.key===null?G:ae.key)||null,K(L,U,ae,Re);case R:return ae=Ma(ae),ee(U,L,G,ae,Re)}if(dt(ae)||j(ae))return U=U.get(G)||null,se(L,U,ae,Re,null);if(typeof ae.then=="function")return ee(U,L,G,jc(ae),Re);if(ae.$$typeof===Z)return ee(U,L,G,kc(L,ae),Re);Uc(L,ae)}return null}function Te(U,L,G,ae){for(var Re=null,rt=null,we=L,Be=L=0,Ye=null;we!==null&&Be<G.length;Be++){we.index>Be?(Ye=we,we=null):Ye=we.sibling;var st=Q(U,we,G[Be],ae);if(st===null){we===null&&(we=Ye);break}n&&we&&st.alternate===null&&r(U,we),L=d(st,L,Be),rt===null?Re=st:rt.sibling=st,rt=st,we=Ye}if(Be===G.length)return a(U,we),et&&Vr(U,Be),Re;if(we===null){for(;Be<G.length;Be++)we=le(U,G[Be],ae),we!==null&&(L=d(we,L,Be),rt===null?Re=we:rt.sibling=we,rt=we);return et&&Vr(U,Be),Re}for(we=l(we);Be<G.length;Be++)Ye=ee(we,U,Be,G[Be],ae),Ye!==null&&(n&&Ye.alternate!==null&&we.delete(Ye.key===null?Be:Ye.key),L=d(Ye,L,Be),rt===null?Re=Ye:rt.sibling=Ye,rt=Ye);return n&&we.forEach(function(Us){return r(U,Us)}),et&&Vr(U,Be),Re}function Ne(U,L,G,ae){if(G==null)throw Error(s(151));for(var Re=null,rt=null,we=L,Be=L=0,Ye=null,st=G.next();we!==null&&!st.done;Be++,st=G.next()){we.index>Be?(Ye=we,we=null):Ye=we.sibling;var Us=Q(U,we,st.value,ae);if(Us===null){we===null&&(we=Ye);break}n&&we&&Us.alternate===null&&r(U,we),L=d(Us,L,Be),rt===null?Re=Us:rt.sibling=Us,rt=Us,we=Ye}if(st.done)return a(U,we),et&&Vr(U,Be),Re;if(we===null){for(;!st.done;Be++,st=G.next())st=le(U,st.value,ae),st!==null&&(L=d(st,L,Be),rt===null?Re=st:rt.sibling=st,rt=st);return et&&Vr(U,Be),Re}for(we=l(we);!st.done;Be++,st=G.next())st=ee(we,U,Be,st.value,ae),st!==null&&(n&&st.alternate!==null&&we.delete(st.key===null?Be:st.key),L=d(st,L,Be),rt===null?Re=st:rt.sibling=st,rt=st);return n&&we.forEach(function(bA){return r(U,bA)}),et&&Vr(U,Be),Re}function bt(U,L,G,ae){if(typeof G=="object"&&G!==null&&G.type===z&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case N:e:{for(var Re=G.key;L!==null;){if(L.key===Re){if(Re=G.type,Re===z){if(L.tag===7){a(U,L.sibling),ae=f(L,G.props.children),ae.return=U,U=ae;break e}}else if(L.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===R&&Ma(Re)===L.type){a(U,L.sibling),ae=f(L,G.props),kl(ae,G),ae.return=U,U=ae;break e}a(U,L);break}else r(U,L);L=L.sibling}G.type===z?(ae=Ca(G.props.children,U.mode,ae,G.key),ae.return=U,U=ae):(ae=Dc(G.type,G.key,G.props,null,U.mode,ae),kl(ae,G),ae.return=U,U=ae)}return _(U);case k:e:{for(Re=G.key;L!==null;){if(L.key===Re)if(L.tag===4&&L.stateNode.containerInfo===G.containerInfo&&L.stateNode.implementation===G.implementation){a(U,L.sibling),ae=f(L,G.children||[]),ae.return=U,U=ae;break e}else{a(U,L);break}else r(U,L);L=L.sibling}ae=ud(G,U.mode,ae),ae.return=U,U=ae}return _(U);case R:return G=Ma(G),bt(U,L,G,ae)}if(dt(G))return Te(U,L,G,ae);if(j(G)){if(Re=j(G),typeof Re!="function")throw Error(s(150));return G=Re.call(G),Ne(U,L,G,ae)}if(typeof G.then=="function")return bt(U,L,jc(G),ae);if(G.$$typeof===Z)return bt(U,L,kc(U,G),ae);Uc(U,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,L!==null&&L.tag===6?(a(U,L.sibling),ae=f(L,G),ae.return=U,U=ae):(a(U,L),ae=ld(G,U.mode,ae),ae.return=U,U=ae),_(U)):a(U,L)}return function(U,L,G,ae){try{Ml=0;var Re=bt(U,L,G,ae);return bo=null,Re}catch(we){if(we===vo||we===Pc)throw we;var rt=mi(29,we,null,U.mode);return rt.lanes=ae,rt.return=U,rt}}}var Va=G0(!0),K0=G0(!1),Ts=!1;function Ed(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Td(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ws(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ss(n,r,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(lt&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=Ic(n),N0(n,null,a),r}return Nc(n,l,r,a),Ic(n)}function Vl(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,Gt(n,a)}}function wd(n,r){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=r:d=d.next=r}else f=d=r;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}var Sd=!1;function Pl(){if(Sd){var n=_o;if(n!==null)throw n}}function Ll(n,r,a,l){Sd=!1;var f=n.updateQueue;Ts=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var O=w,K=O.next;O.next=null,_===null?d=K:_.next=K,_=O;var se=n.alternate;se!==null&&(se=se.updateQueue,w=se.lastBaseUpdate,w!==_&&(w===null?se.firstBaseUpdate=K:w.next=K,se.lastBaseUpdate=O))}if(d!==null){var le=f.baseState;_=0,se=K=O=null,w=d;do{var Q=w.lane&-536870913,ee=Q!==w.lane;if(ee?(Qe&Q)===Q:(l&Q)===Q){Q!==0&&Q===yo&&(Sd=!0),se!==null&&(se=se.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Te=n,Ne=w;Q=r;var bt=a;switch(Ne.tag){case 1:if(Te=Ne.payload,typeof Te=="function"){le=Te.call(bt,le,Q);break e}le=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ne.payload,Q=typeof Te=="function"?Te.call(bt,le,Q):Te,Q==null)break e;le=E({},le,Q);break e;case 2:Ts=!0}}Q=w.callback,Q!==null&&(n.flags|=64,ee&&(n.flags|=8192),ee=f.callbacks,ee===null?f.callbacks=[Q]:ee.push(Q))}else ee={lane:Q,tag:w.tag,payload:w.payload,callback:w.callback,next:null},se===null?(K=se=ee,O=le):se=se.next=ee,_|=Q;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;ee=w,w=ee.next,ee.next=null,f.lastBaseUpdate=ee,f.shared.pending=null}}while(!0);se===null&&(O=le),f.baseState=O,f.firstBaseUpdate=K,f.lastBaseUpdate=se,d===null&&(f.shared.lanes=0),Ns|=_,n.lanes=_,n.memoizedState=le}}function $0(n,r){if(typeof n!="function")throw Error(s(191,n));n.call(r)}function Q0(n,r){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)$0(a[n],r)}var Eo=P(null),zc=P(0);function Y0(n,r){n=Kr,me(zc,n),me(Eo,r),Kr=n|r.baseLanes}function Ad(){me(zc,Kr),me(Eo,Eo.current)}function xd(){Kr=zc.current,re(Eo),re(zc)}var gi=P(null),ji=null;function As(n){var r=n.alternate;me(Qt,Qt.current&1),me(gi,n),ji===null&&(r===null||Eo.current!==null||r.memoizedState!==null)&&(ji=n)}function Rd(n){me(Qt,Qt.current),me(gi,n),ji===null&&(ji=n)}function X0(n){n.tag===22?(me(Qt,Qt.current),me(gi,n),ji===null&&(ji=n)):xs()}function xs(){me(Qt,Qt.current),me(gi,gi.current)}function pi(n){re(gi),ji===n&&(ji=null),re(Qt)}var Qt=P(0);function Bc(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Mm(a)||km(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var jr=0,Ue=null,_t=null,nn=null,qc=!1,To=!1,Pa=!1,Hc=0,jl=0,wo=null,cS=0;function zt(){throw Error(s(321))}function Cd(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!di(n[a],r[a]))return!1;return!0}function Nd(n,r,a,l,f,d){return jr=d,Ue=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,te.H=n===null||n.memoizedState===null?My:Fd,Pa=!1,d=a(l,f),Pa=!1,To&&(d=Z0(r,a,l,f)),J0(n),d}function J0(n){te.H=Bl;var r=_t!==null&&_t.next!==null;if(jr=0,nn=_t=Ue=null,qc=!1,jl=0,wo=null,r)throw Error(s(300));n===null||rn||(n=n.dependencies,n!==null&&Mc(n)&&(rn=!0))}function Z0(n,r,a,l){Ue=n;var f=0;do{if(To&&(wo=null),jl=0,To=!1,25<=f)throw Error(s(301));if(f+=1,nn=_t=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}te.H=ky,d=r(a,l)}while(To);return d}function hS(){var n=te.H,r=n.useState()[0];return r=typeof r.then=="function"?Ul(r):r,n=n.useState()[0],(_t!==null?_t.memoizedState:null)!==n&&(Ue.flags|=1024),r}function Id(){var n=Hc!==0;return Hc=0,n}function Dd(n,r,a){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~a}function Od(n){if(qc){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}qc=!1}jr=0,nn=_t=Ue=null,To=!1,jl=Hc=0,wo=null}function Yn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?Ue.memoizedState=nn=n:nn=nn.next=n,nn}function Yt(){if(_t===null){var n=Ue.alternate;n=n!==null?n.memoizedState:null}else n=_t.next;var r=nn===null?Ue.memoizedState:nn.next;if(r!==null)nn=r,_t=n;else{if(n===null)throw Ue.alternate===null?Error(s(467)):Error(s(310));_t=n,n={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},nn===null?Ue.memoizedState=nn=n:nn=nn.next=n}return nn}function Fc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(n){var r=jl;return jl+=1,wo===null&&(wo=[]),n=q0(wo,n,r),r=Ue,(nn===null?r.memoizedState:nn.next)===null&&(r=r.alternate,te.H=r===null||r.memoizedState===null?My:Fd),n}function Gc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ul(n);if(n.$$typeof===Z)return Rn(n)}throw Error(s(438,String(n)))}function Md(n){var r=null,a=Ue.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Ue.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Fc(),Ue.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(n),l=0;l<n;l++)a[l]=V;return r.index++,a}function Ur(n,r){return typeof r=="function"?r(n):r}function Kc(n){var r=Yt();return kd(r,_t,n)}function kd(n,r,a){var l=n.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}r.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{r=f.next;var w=_=null,O=null,K=r,se=!1;do{var le=K.lane&-536870913;if(le!==K.lane?(Qe&le)===le:(jr&le)===le){var Q=K.revertLane;if(Q===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),le===yo&&(se=!0);else if((jr&Q)===Q){K=K.next,Q===yo&&(se=!0);continue}else le={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},O===null?(w=O=le,_=d):O=O.next=le,Ue.lanes|=Q,Ns|=Q;le=K.action,Pa&&a(d,le),d=K.hasEagerState?K.eagerState:a(d,le)}else Q={lane:le,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},O===null?(w=O=Q,_=d):O=O.next=Q,Ue.lanes|=le,Ns|=le;K=K.next}while(K!==null&&K!==r);if(O===null?_=d:O.next=w,!di(d,n.memoizedState)&&(rn=!0,se&&(a=_o,a!==null)))throw a;n.memoizedState=d,n.baseState=_,n.baseQueue=O,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function Vd(n){var r=Yt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=r.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);di(d,r.memoizedState)||(rn=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,l]}function W0(n,r,a){var l=Ue,f=Yt(),d=et;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=r();var _=!di((_t||f).memoizedState,a);if(_&&(f.memoizedState=a,rn=!0),f=f.queue,jd(ny.bind(null,l,f,n),[n]),f.getSnapshot!==r||_||nn!==null&&nn.memoizedState.tag&1){if(l.flags|=2048,So(9,{destroy:void 0},ty.bind(null,l,f,a,r),null),Tt===null)throw Error(s(349));d||(jr&127)!==0||ey(l,r,a)}return a}function ey(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=Ue.updateQueue,r===null?(r=Fc(),Ue.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function ty(n,r,a,l){r.value=a,r.getSnapshot=l,iy(r)&&ry(n)}function ny(n,r,a){return a(function(){iy(r)&&ry(n)})}function iy(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!di(n,a)}catch{return!0}}function ry(n){var r=Ra(n,2);r!==null&&ci(r,n,2)}function Pd(n){var r=Yn();if(typeof n=="function"){var a=n;if(n=a(),Pa){pn(!0);try{a()}finally{pn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:n},r}function sy(n,r,a,l){return n.baseState=a,kd(n,_t,typeof l=="function"?l:Ur)}function fS(n,r,a,l,f){if(Yc(n))throw Error(s(485));if(n=r.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};te.T!==null?a(!0):d.isTransition=!1,l(d),a=r.pending,a===null?(d.next=r.pending=d,ay(r,d)):(d.next=a.next,r.pending=a.next=d)}}function ay(n,r){var a=r.action,l=r.payload,f=n.state;if(r.isTransition){var d=te.T,_={};te.T=_;try{var w=a(f,l),O=te.S;O!==null&&O(_,w),oy(n,r,w)}catch(K){Ld(n,r,K)}finally{d!==null&&_.types!==null&&(d.types=_.types),te.T=d}}else try{d=a(f,l),oy(n,r,d)}catch(K){Ld(n,r,K)}}function oy(n,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){ly(n,r,l)},function(l){return Ld(n,r,l)}):ly(n,r,a)}function ly(n,r,a){r.status="fulfilled",r.value=a,uy(r),n.state=a,r=n.pending,r!==null&&(a=r.next,a===r?n.pending=null:(a=a.next,r.next=a,ay(n,a)))}function Ld(n,r,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,uy(r),r=r.next;while(r!==l)}n.action=null}function uy(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function cy(n,r){return r}function hy(n,r){if(et){var a=Tt.formState;if(a!==null){e:{var l=Ue;if(et){if(Ct){t:{for(var f=Ct,d=Li;f.nodeType!==8;){if(!d){f=null;break t}if(f=Ui(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){Ct=Ui(f.nextSibling),l=f.data==="F!";break e}}bs(l)}l=!1}l&&(r=a[0])}}return a=Yn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cy,lastRenderedState:r},a.queue=l,a=Iy.bind(null,Ue,l),l.dispatch=a,l=Pd(!1),d=Hd.bind(null,Ue,!1,l.queue),l=Yn(),f={state:r,dispatch:null,action:n,pending:null},l.queue=f,a=fS.bind(null,Ue,f,d,a),f.dispatch=a,l.memoizedState=n,[r,a,!1]}function fy(n){var r=Yt();return dy(r,_t,n)}function dy(n,r,a){if(r=kd(n,r,cy)[0],n=Kc(Ur)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Ul(r)}catch(_){throw _===vo?Pc:_}else l=r;r=Yt();var f=r.queue,d=f.dispatch;return a!==r.memoizedState&&(Ue.flags|=2048,So(9,{destroy:void 0},dS.bind(null,f,a),null)),[l,d,n]}function dS(n,r){n.action=r}function my(n){var r=Yt(),a=_t;if(a!==null)return dy(r,a,n);Yt(),r=r.memoizedState,a=Yt();var l=a.queue.dispatch;return a.memoizedState=n,[r,l,!1]}function So(n,r,a,l){return n={tag:n,create:a,deps:l,inst:r,next:null},r=Ue.updateQueue,r===null&&(r=Fc(),Ue.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,r.lastEffect=n),n}function gy(){return Yt().memoizedState}function $c(n,r,a,l){var f=Yn();Ue.flags|=n,f.memoizedState=So(1|r,{destroy:void 0},a,l===void 0?null:l)}function Qc(n,r,a,l){var f=Yt();l=l===void 0?null:l;var d=f.memoizedState.inst;_t!==null&&l!==null&&Cd(l,_t.memoizedState.deps)?f.memoizedState=So(r,d,a,l):(Ue.flags|=n,f.memoizedState=So(1|r,d,a,l))}function py(n,r){$c(8390656,8,n,r)}function jd(n,r){Qc(2048,8,n,r)}function mS(n){Ue.flags|=4;var r=Ue.updateQueue;if(r===null)r=Fc(),Ue.updateQueue=r,r.events=[n];else{var a=r.events;a===null?r.events=[n]:a.push(n)}}function yy(n){var r=Yt().memoizedState;return mS({ref:r,nextImpl:n}),function(){if((lt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function _y(n,r){return Qc(4,2,n,r)}function vy(n,r){return Qc(4,4,n,r)}function by(n,r){if(typeof r=="function"){n=n();var a=r(n);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Ey(n,r,a){a=a!=null?a.concat([n]):null,Qc(4,4,by.bind(null,r,n),a)}function Ud(){}function Ty(n,r){var a=Yt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Cd(r,l[1])?l[0]:(a.memoizedState=[n,r],n)}function wy(n,r){var a=Yt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Cd(r,l[1]))return l[0];if(l=n(),Pa){pn(!0);try{n()}finally{pn(!1)}}return a.memoizedState=[l,r],l}function zd(n,r,a){return a===void 0||(jr&1073741824)!==0&&(Qe&261930)===0?n.memoizedState=r:(n.memoizedState=a,n=S_(),Ue.lanes|=n,Ns|=n,a)}function Sy(n,r,a,l){return di(a,r)?a:Eo.current!==null?(n=zd(n,a,l),di(n,r)||(rn=!0),n):(jr&42)===0||(jr&1073741824)!==0&&(Qe&261930)===0?(rn=!0,n.memoizedState=a):(n=S_(),Ue.lanes|=n,Ns|=n,r)}function Ay(n,r,a,l,f){var d=he.p;he.p=d!==0&&8>d?d:8;var _=te.T,w={};te.T=w,Hd(n,!1,r,a);try{var O=f(),K=te.S;if(K!==null&&K(w,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var se=uS(O,l);zl(n,r,se,vi(n))}else zl(n,r,l,vi(n))}catch(le){zl(n,r,{then:function(){},status:"rejected",reason:le},vi())}finally{he.p=d,_!==null&&w.types!==null&&(_.types=w.types),te.T=_}}function gS(){}function Bd(n,r,a,l){if(n.tag!==5)throw Error(s(476));var f=xy(n).queue;Ay(n,f,r,be,a===null?gS:function(){return Ry(n),a(l)})}function xy(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:be},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:a},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function Ry(n){var r=xy(n);r.next===null&&(r=n.alternate.memoizedState),zl(n,r.next.queue,{},vi())}function qd(){return Rn(iu)}function Cy(){return Yt().memoizedState}function Ny(){return Yt().memoizedState}function pS(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var a=vi();n=ws(a);var l=Ss(r,n,a);l!==null&&(ci(l,r,a),Vl(l,r,a)),r={cache:yd()},n.payload=r;return}r=r.return}}function yS(n,r,a){var l=vi();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Yc(n)?Dy(r,a):(a=ad(n,r,a,l),a!==null&&(ci(a,n,l),Oy(a,r,l)))}function Iy(n,r,a){var l=vi();zl(n,r,a,l)}function zl(n,r,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Yc(n))Dy(r,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var _=r.lastRenderedState,w=d(_,a);if(f.hasEagerState=!0,f.eagerState=w,di(w,_))return Nc(n,r,f,0),Tt===null&&Cc(),!1}catch{}if(a=ad(n,r,f,l),a!==null)return ci(a,n,l),Oy(a,r,l),!0}return!1}function Hd(n,r,a,l){if(l={lane:2,revertLane:Em(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Yc(n)){if(r)throw Error(s(479))}else r=ad(n,a,l,2),r!==null&&ci(r,n,2)}function Yc(n){var r=n.alternate;return n===Ue||r!==null&&r===Ue}function Dy(n,r){To=qc=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function Oy(n,r,a){if((a&4194048)!==0){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,Gt(n,a)}}var Bl={readContext:Rn,use:Gc,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useLayoutEffect:zt,useInsertionEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useSyncExternalStore:zt,useId:zt,useHostTransitionStatus:zt,useFormState:zt,useActionState:zt,useOptimistic:zt,useMemoCache:zt,useCacheRefresh:zt};Bl.useEffectEvent=zt;var My={readContext:Rn,use:Gc,useCallback:function(n,r){return Yn().memoizedState=[n,r===void 0?null:r],n},useContext:Rn,useEffect:py,useImperativeHandle:function(n,r,a){a=a!=null?a.concat([n]):null,$c(4194308,4,by.bind(null,r,n),a)},useLayoutEffect:function(n,r){return $c(4194308,4,n,r)},useInsertionEffect:function(n,r){$c(4,2,n,r)},useMemo:function(n,r){var a=Yn();r=r===void 0?null:r;var l=n();if(Pa){pn(!0);try{n()}finally{pn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(n,r,a){var l=Yn();if(a!==void 0){var f=a(r);if(Pa){pn(!0);try{a(r)}finally{pn(!1)}}}else f=r;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=yS.bind(null,Ue,n),[l.memoizedState,n]},useRef:function(n){var r=Yn();return n={current:n},r.memoizedState=n},useState:function(n){n=Pd(n);var r=n.queue,a=Iy.bind(null,Ue,r);return r.dispatch=a,[n.memoizedState,a]},useDebugValue:Ud,useDeferredValue:function(n,r){var a=Yn();return zd(a,n,r)},useTransition:function(){var n=Pd(!1);return n=Ay.bind(null,Ue,n.queue,!0,!1),Yn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,a){var l=Ue,f=Yn();if(et){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),Tt===null)throw Error(s(349));(Qe&127)!==0||ey(l,r,a)}f.memoizedState=a;var d={value:a,getSnapshot:r};return f.queue=d,py(ny.bind(null,l,d,n),[n]),l.flags|=2048,So(9,{destroy:void 0},ty.bind(null,l,d,a,r),null),a},useId:function(){var n=Yn(),r=Tt.identifierPrefix;if(et){var a=yr,l=pr;a=(l&~(1<<32-At(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Hc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=cS++,r="_"+r+"r_"+a.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:qd,useFormState:hy,useActionState:hy,useOptimistic:function(n){var r=Yn();r.memoizedState=r.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Hd.bind(null,Ue,!0,a),a.dispatch=r,[n,r]},useMemoCache:Md,useCacheRefresh:function(){return Yn().memoizedState=pS.bind(null,Ue)},useEffectEvent:function(n){var r=Yn(),a={impl:n};return r.memoizedState=a,function(){if((lt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Fd={readContext:Rn,use:Gc,useCallback:Ty,useContext:Rn,useEffect:jd,useImperativeHandle:Ey,useInsertionEffect:_y,useLayoutEffect:vy,useMemo:wy,useReducer:Kc,useRef:gy,useState:function(){return Kc(Ur)},useDebugValue:Ud,useDeferredValue:function(n,r){var a=Yt();return Sy(a,_t.memoizedState,n,r)},useTransition:function(){var n=Kc(Ur)[0],r=Yt().memoizedState;return[typeof n=="boolean"?n:Ul(n),r]},useSyncExternalStore:W0,useId:Cy,useHostTransitionStatus:qd,useFormState:fy,useActionState:fy,useOptimistic:function(n,r){var a=Yt();return sy(a,_t,n,r)},useMemoCache:Md,useCacheRefresh:Ny};Fd.useEffectEvent=yy;var ky={readContext:Rn,use:Gc,useCallback:Ty,useContext:Rn,useEffect:jd,useImperativeHandle:Ey,useInsertionEffect:_y,useLayoutEffect:vy,useMemo:wy,useReducer:Vd,useRef:gy,useState:function(){return Vd(Ur)},useDebugValue:Ud,useDeferredValue:function(n,r){var a=Yt();return _t===null?zd(a,n,r):Sy(a,_t.memoizedState,n,r)},useTransition:function(){var n=Vd(Ur)[0],r=Yt().memoizedState;return[typeof n=="boolean"?n:Ul(n),r]},useSyncExternalStore:W0,useId:Cy,useHostTransitionStatus:qd,useFormState:my,useActionState:my,useOptimistic:function(n,r){var a=Yt();return _t!==null?sy(a,_t,n,r):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Md,useCacheRefresh:Ny};ky.useEffectEvent=yy;function Gd(n,r,a,l){r=n.memoizedState,a=a(l,r),a=a==null?r:E({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Kd={enqueueSetState:function(n,r,a){n=n._reactInternals;var l=vi(),f=ws(l);f.payload=r,a!=null&&(f.callback=a),r=Ss(n,f,l),r!==null&&(ci(r,n,l),Vl(r,n,l))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var l=vi(),f=ws(l);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=Ss(n,f,l),r!==null&&(ci(r,n,l),Vl(r,n,l))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=vi(),l=ws(a);l.tag=2,r!=null&&(l.callback=r),r=Ss(n,l,a),r!==null&&(ci(r,n,a),Vl(r,n,a))}};function Vy(n,r,a,l,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,_):r.prototype&&r.prototype.isPureReactComponent?!Rl(a,l)||!Rl(f,d):!0}function Py(n,r,a,l){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==n&&Kd.enqueueReplaceState(r,r.state,null)}function La(n,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(n=n.defaultProps){a===r&&(a=E({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function Ly(n){Rc(n)}function jy(n){console.error(n)}function Uy(n){Rc(n)}function Xc(n,r){try{var a=n.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function zy(n,r,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function $d(n,r,a){return a=ws(a),a.tag=3,a.payload={element:null},a.callback=function(){Xc(n,r)},a}function By(n){return n=ws(n),n.tag=3,n}function qy(n,r,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){zy(r,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){zy(r,a,l),typeof f!="function"&&(Is===null?Is=new Set([this]):Is.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function _S(n,r,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&po(r,a,f,!0),a=gi.current,a!==null){switch(a.tag){case 31:case 13:return ji===null?lh():a.alternate===null&&Bt===0&&(Bt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Lc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),_m(n,l,f)),!1;case 22:return a.flags|=65536,l===Lc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),_m(n,l,f)),!1}throw Error(s(435,a.tag))}return _m(n,l,f),lh(),!1}if(et)return r=gi.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==fd&&(n=Error(s(422),{cause:l}),Il(ki(n,a)))):(l!==fd&&(r=Error(s(423),{cause:l}),Il(ki(r,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=ki(l,a),f=$d(n.stateNode,l,f),wd(n,f),Bt!==4&&(Bt=2)),!1;var d=Error(s(520),{cause:l});if(d=ki(d,a),Yl===null?Yl=[d]:Yl.push(d),Bt!==4&&(Bt=2),r===null)return!0;l=ki(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=$d(a.stateNode,l,n),wd(a,n),!1;case 1:if(r=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Is===null||!Is.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=By(f),qy(f,n,a,l),wd(a,f),!1}a=a.return}while(a!==null);return!1}var Qd=Error(s(461)),rn=!1;function Cn(n,r,a,l){r.child=n===null?K0(r,null,a,l):Va(r,n.child,a,l)}function Hy(n,r,a,l,f){a=a.render;var d=r.ref;if("ref"in l){var _={};for(var w in l)w!=="ref"&&(_[w]=l[w])}else _=l;return Da(r),l=Nd(n,r,a,_,d,f),w=Id(),n!==null&&!rn?(Dd(n,r,f),zr(n,r,f)):(et&&w&&cd(r),r.flags|=1,Cn(n,r,l,f),r.child)}function Fy(n,r,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!od(d)&&d.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=d,Gy(n,r,d,l,f)):(n=Dc(a.type,null,l,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(d=n.child,!nm(n,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Rl,a(_,l)&&n.ref===r.ref)return zr(n,r,f)}return r.flags|=1,n=kr(d,l),n.ref=r.ref,n.return=r,r.child=n}function Gy(n,r,a,l,f){if(n!==null){var d=n.memoizedProps;if(Rl(d,l)&&n.ref===r.ref)if(rn=!1,r.pendingProps=l=d,nm(n,f))(n.flags&131072)!==0&&(rn=!0);else return r.lanes=n.lanes,zr(n,r,f)}return Yd(n,r,a,l,f)}function Ky(n,r,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=r.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,r.child=null;return $y(n,r,d,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&Vc(r,d!==null?d.cachePool:null),d!==null?Y0(r,d):Ad(),X0(r);else return l=r.lanes=536870912,$y(n,r,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Vc(r,d.cachePool),Y0(r,d),xs(),r.memoizedState=null):(n!==null&&Vc(r,null),Ad(),xs());return Cn(n,r,f,a),r.child}function ql(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function $y(n,r,a,l,f){var d=vd();return d=d===null?null:{parent:tn._currentValue,pool:d},r.memoizedState={baseLanes:a,cachePool:d},n!==null&&Vc(r,null),Ad(),X0(r),n!==null&&po(n,r,l,!0),r.childLanes=f,null}function Jc(n,r){return r=Wc({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function Qy(n,r,a){return Va(r,n.child,null,a),n=Jc(r,r.pendingProps),n.flags|=2,pi(r),r.memoizedState=null,n}function vS(n,r,a){var l=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(et){if(l.mode==="hidden")return n=Jc(r,l),r.lanes=536870912,ql(null,n);if(Rd(r),(n=Ct)?(n=av(n,Li),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:_s!==null?{id:pr,overflow:yr}:null,retryLane:536870912,hydrationErrors:null},a=D0(n),a.return=r,r.child=a,xn=r,Ct=null)):n=null,n===null)throw bs(r);return r.lanes=536870912,null}return Jc(r,l)}var d=n.memoizedState;if(d!==null){var _=d.dehydrated;if(Rd(r),f)if(r.flags&256)r.flags&=-257,r=Qy(n,r,a);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(s(558));else if(rn||po(n,r,a,!1),f=(a&n.childLanes)!==0,rn||f){if(l=Tt,l!==null&&(_=fe(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Ra(n,_),ci(l,n,_),Qd;lh(),r=Qy(n,r,a)}else n=d.treeContext,Ct=Ui(_.nextSibling),xn=r,et=!0,vs=null,Li=!1,n!==null&&k0(r,n),r=Jc(r,l),r.flags|=4096;return r}return n=kr(n.child,{mode:l.mode,children:l.children}),n.ref=r.ref,r.child=n,n.return=r,n}function Zc(n,r){var a=r.ref;if(a===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(n===null||n.ref!==a)&&(r.flags|=4194816)}}function Yd(n,r,a,l,f){return Da(r),a=Nd(n,r,a,l,void 0,f),l=Id(),n!==null&&!rn?(Dd(n,r,f),zr(n,r,f)):(et&&l&&cd(r),r.flags|=1,Cn(n,r,a,f),r.child)}function Yy(n,r,a,l,f,d){return Da(r),r.updateQueue=null,a=Z0(r,l,a,f),J0(n),l=Id(),n!==null&&!rn?(Dd(n,r,d),zr(n,r,d)):(et&&l&&cd(r),r.flags|=1,Cn(n,r,a,d),r.child)}function Xy(n,r,a,l,f){if(Da(r),r.stateNode===null){var d=ho,_=a.contextType;typeof _=="object"&&_!==null&&(d=Rn(_)),d=new a(l,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Kd,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=l,d.state=r.memoizedState,d.refs={},Ed(r),_=a.contextType,d.context=typeof _=="object"&&_!==null?Rn(_):ho,d.state=r.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Gd(r,a,_,l),d.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Kd.enqueueReplaceState(d,d.state,null),Ll(r,l,d,f),Pl(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(n===null){d=r.stateNode;var w=r.memoizedProps,O=La(a,w);d.props=O;var K=d.context,se=a.contextType;_=ho,typeof se=="object"&&se!==null&&(_=Rn(se));var le=a.getDerivedStateFromProps;se=typeof le=="function"||typeof d.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,se||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(w||K!==_)&&Py(r,d,l,_),Ts=!1;var Q=r.memoizedState;d.state=Q,Ll(r,l,d,f),Pl(),K=r.memoizedState,w||Q!==K||Ts?(typeof le=="function"&&(Gd(r,a,le,l),K=r.memoizedState),(O=Ts||Vy(r,a,O,l,Q,K,_))?(se||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=K),d.props=l,d.state=K,d.context=_,l=O):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{d=r.stateNode,Td(n,r),_=r.memoizedProps,se=La(a,_),d.props=se,le=r.pendingProps,Q=d.context,K=a.contextType,O=ho,typeof K=="object"&&K!==null&&(O=Rn(K)),w=a.getDerivedStateFromProps,(K=typeof w=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==le||Q!==O)&&Py(r,d,l,O),Ts=!1,Q=r.memoizedState,d.state=Q,Ll(r,l,d,f),Pl();var ee=r.memoizedState;_!==le||Q!==ee||Ts||n!==null&&n.dependencies!==null&&Mc(n.dependencies)?(typeof w=="function"&&(Gd(r,a,w,l),ee=r.memoizedState),(se=Ts||Vy(r,a,se,l,Q,ee,O)||n!==null&&n.dependencies!==null&&Mc(n.dependencies))?(K||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,ee,O),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,ee,O)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=ee),d.props=l,d.state=ee,d.context=O,l=se):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(r.flags|=1024),l=!1)}return d=l,Zc(n,r),l=(r.flags&128)!==0,d||l?(d=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,n!==null&&l?(r.child=Va(r,n.child,null,f),r.child=Va(r,null,a,f)):Cn(n,r,a,f),r.memoizedState=d.state,n=r.child):n=zr(n,r,f),n}function Jy(n,r,a,l){return Na(),r.flags|=256,Cn(n,r,a,l),r.child}var Xd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jd(n){return{baseLanes:n,cachePool:z0()}}function Zd(n,r,a){return n=n!==null?n.childLanes&~a:0,r&&(n|=_i),n}function Zy(n,r,a){var l=r.pendingProps,f=!1,d=(r.flags&128)!==0,_;if((_=d)||(_=n!==null&&n.memoizedState===null?!1:(Qt.current&2)!==0),_&&(f=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,n===null){if(et){if(f?As(r):xs(),(n=Ct)?(n=av(n,Li),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:_s!==null?{id:pr,overflow:yr}:null,retryLane:536870912,hydrationErrors:null},a=D0(n),a.return=r,r.child=a,xn=r,Ct=null)):n=null,n===null)throw bs(r);return km(n)?r.lanes=32:r.lanes=536870912,null}var w=l.children;return l=l.fallback,f?(xs(),f=r.mode,w=Wc({mode:"hidden",children:w},f),l=Ca(l,f,a,null),w.return=r,l.return=r,w.sibling=l,r.child=w,l=r.child,l.memoizedState=Jd(a),l.childLanes=Zd(n,_,a),r.memoizedState=Xd,ql(null,l)):(As(r),Wd(r,w))}var O=n.memoizedState;if(O!==null&&(w=O.dehydrated,w!==null)){if(d)r.flags&256?(As(r),r.flags&=-257,r=em(n,r,a)):r.memoizedState!==null?(xs(),r.child=n.child,r.flags|=128,r=null):(xs(),w=l.fallback,f=r.mode,l=Wc({mode:"visible",children:l.children},f),w=Ca(w,f,a,null),w.flags|=2,l.return=r,w.return=r,l.sibling=w,r.child=l,Va(r,n.child,null,a),l=r.child,l.memoizedState=Jd(a),l.childLanes=Zd(n,_,a),r.memoizedState=Xd,r=ql(null,l));else if(As(r),km(w)){if(_=w.nextSibling&&w.nextSibling.dataset,_)var K=_.dgst;_=K,l=Error(s(419)),l.stack="",l.digest=_,Il({value:l,source:null,stack:null}),r=em(n,r,a)}else if(rn||po(n,r,a,!1),_=(a&n.childLanes)!==0,rn||_){if(_=Tt,_!==null&&(l=fe(_,a),l!==0&&l!==O.retryLane))throw O.retryLane=l,Ra(n,l),ci(_,n,l),Qd;Mm(w)||lh(),r=em(n,r,a)}else Mm(w)?(r.flags|=192,r.child=n.child,r=null):(n=O.treeContext,Ct=Ui(w.nextSibling),xn=r,et=!0,vs=null,Li=!1,n!==null&&k0(r,n),r=Wd(r,l.children),r.flags|=4096);return r}return f?(xs(),w=l.fallback,f=r.mode,O=n.child,K=O.sibling,l=kr(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,K!==null?w=kr(K,w):(w=Ca(w,f,a,null),w.flags|=2),w.return=r,l.return=r,l.sibling=w,r.child=l,ql(null,l),l=r.child,w=n.child.memoizedState,w===null?w=Jd(a):(f=w.cachePool,f!==null?(O=tn._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=z0(),w={baseLanes:w.baseLanes|a,cachePool:f}),l.memoizedState=w,l.childLanes=Zd(n,_,a),r.memoizedState=Xd,ql(n.child,l)):(As(r),a=n.child,n=a.sibling,a=kr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,n!==null&&(_=r.deletions,_===null?(r.deletions=[n],r.flags|=16):_.push(n)),r.child=a,r.memoizedState=null,a)}function Wd(n,r){return r=Wc({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Wc(n,r){return n=mi(22,n,null,r),n.lanes=0,n}function em(n,r,a){return Va(r,n.child,null,a),n=Wd(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function Wy(n,r,a){n.lanes|=r;var l=n.alternate;l!==null&&(l.lanes|=r),gd(n.return,r,a)}function tm(n,r,a,l,f,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function e_(n,r,a){var l=r.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=Qt.current,w=(_&2)!==0;if(w?(_=_&1|2,r.flags|=128):_&=1,me(Qt,_),Cn(n,r,l,a),l=et?Nl:0,!w&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Wy(n,a,r);else if(n.tag===19)Wy(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=r.child,f=null;a!==null;)n=a.alternate,n!==null&&Bc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),tm(r,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&Bc(n)===null){r.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}tm(r,!0,a,null,d,l);break;case"together":tm(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function zr(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),Ns|=r.lanes,(a&r.childLanes)===0)if(n!==null){if(po(n,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(s(153));if(r.child!==null){for(n=r.child,a=kr(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=kr(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function nm(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&Mc(n)))}function bS(n,r,a){switch(r.tag){case 3:Dt(r,r.stateNode.containerInfo),Es(r,tn,n.memoizedState.cache),Na();break;case 27:case 5:Ht(r);break;case 4:Dt(r,r.stateNode.containerInfo);break;case 10:Es(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Rd(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(As(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Zy(n,r,a):(As(r),n=zr(n,r,a),n!==null?n.sibling:null);As(r);break;case 19:var f=(n.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(po(n,r,a,!1),l=(a&r.childLanes)!==0),f){if(l)return e_(n,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),me(Qt,Qt.current),l)break;return null;case 22:return r.lanes=0,Ky(n,r,a,r.pendingProps);case 24:Es(r,tn,n.memoizedState.cache)}return zr(n,r,a)}function t_(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps)rn=!0;else{if(!nm(n,a)&&(r.flags&128)===0)return rn=!1,bS(n,r,a);rn=(n.flags&131072)!==0}else rn=!1,et&&(r.flags&1048576)!==0&&M0(r,Nl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(n=Ma(r.elementType),r.type=n,typeof n=="function")od(n)?(l=La(n,l),r.tag=1,r=Xy(null,r,n,l,a)):(r.tag=0,r=Yd(null,r,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===ce){r.tag=11,r=Hy(null,r,n,l,a);break e}else if(f===x){r.tag=14,r=Fy(null,r,n,l,a);break e}}throw r=qe(n)||n,Error(s(306,r,""))}}return r;case 0:return Yd(n,r,r.type,r.pendingProps,a);case 1:return l=r.type,f=La(l,r.pendingProps),Xy(n,r,l,f,a);case 3:e:{if(Dt(r,r.stateNode.containerInfo),n===null)throw Error(s(387));l=r.pendingProps;var d=r.memoizedState;f=d.element,Td(n,r),Ll(r,l,null,a);var _=r.memoizedState;if(l=_.cache,Es(r,tn,l),l!==d.cache&&pd(r,[tn],a,!0),Pl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=Jy(n,r,l,a);break e}else if(l!==f){f=ki(Error(s(424)),r),Il(f),r=Jy(n,r,l,a);break e}else for(n=r.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Ct=Ui(n.firstChild),xn=r,et=!0,vs=null,Li=!0,a=K0(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Na(),l===f){r=zr(n,r,a);break e}Cn(n,r,l,a)}r=r.child}return r;case 26:return Zc(n,r),n===null?(a=fv(r.type,null,r.pendingProps,null))?r.memoizedState=a:et||(a=r.type,n=r.pendingProps,l=gh(Ae.current).createElement(a),l[Pt]=r,l[Kt]=n,Nn(l,a,n),Ut(l),r.stateNode=l):r.memoizedState=fv(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return Ht(r),n===null&&et&&(l=r.stateNode=uv(r.type,r.pendingProps,Ae.current),xn=r,Li=!0,f=Ct,ks(r.type)?(Vm=f,Ct=Ui(l.firstChild)):Ct=f),Cn(n,r,r.pendingProps.children,a),Zc(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&et&&((f=l=Ct)&&(l=XS(l,r.type,r.pendingProps,Li),l!==null?(r.stateNode=l,xn=r,Ct=Ui(l.firstChild),Li=!1,f=!0):f=!1),f||bs(r)),Ht(r),f=r.type,d=r.pendingProps,_=n!==null?n.memoizedProps:null,l=d.children,Im(f,d)?l=null:_!==null&&Im(f,_)&&(r.flags|=32),r.memoizedState!==null&&(f=Nd(n,r,hS,null,null,a),iu._currentValue=f),Zc(n,r),Cn(n,r,l,a),r.child;case 6:return n===null&&et&&((n=a=Ct)&&(a=JS(a,r.pendingProps,Li),a!==null?(r.stateNode=a,xn=r,Ct=null,n=!0):n=!1),n||bs(r)),null;case 13:return Zy(n,r,a);case 4:return Dt(r,r.stateNode.containerInfo),l=r.pendingProps,n===null?r.child=Va(r,null,l,a):Cn(n,r,l,a),r.child;case 11:return Hy(n,r,r.type,r.pendingProps,a);case 7:return Cn(n,r,r.pendingProps,a),r.child;case 8:return Cn(n,r,r.pendingProps.children,a),r.child;case 12:return Cn(n,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Es(r,r.type,l.value),Cn(n,r,l.children,a),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,Da(r),f=Rn(f),l=l(f),r.flags|=1,Cn(n,r,l,a),r.child;case 14:return Fy(n,r,r.type,r.pendingProps,a);case 15:return Gy(n,r,r.type,r.pendingProps,a);case 19:return e_(n,r,a);case 31:return vS(n,r,a);case 22:return Ky(n,r,a,r.pendingProps);case 24:return Da(r),l=Rn(tn),n===null?(f=vd(),f===null&&(f=Tt,d=yd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),r.memoizedState={parent:l,cache:f},Ed(r),Es(r,tn,f)):((n.lanes&a)!==0&&(Td(n,r),Ll(r,null,null,a),Pl()),f=n.memoizedState,d=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Es(r,tn,l)):(l=d.cache,Es(r,tn,l),l!==f.cache&&pd(r,[tn],a,!0))),Cn(n,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Br(n){n.flags|=4}function im(n,r,a,l,f){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(C_())n.flags|=8192;else throw ka=Lc,bd}else n.flags&=-16777217}function n_(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!yv(r))if(C_())n.flags|=8192;else throw ka=Lc,bd}function eh(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Wt():536870912,n.lanes|=r,Co|=r)}function Hl(n,r){if(!et)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function Nt(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(r)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,r}function ES(n,r,a){var l=r.pendingProps;switch(hd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(r),null;case 1:return Nt(r),null;case 3:return a=r.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Lr(tn),ut(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(go(r)?Br(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,dd())),Nt(r),null;case 26:var f=r.type,d=r.memoizedState;return n===null?(Br(r),d!==null?(Nt(r),n_(r,d)):(Nt(r),im(r,f,null,l,a))):d?d!==n.memoizedState?(Br(r),Nt(r),n_(r,d)):(Nt(r),r.flags&=-16777217):(n=n.memoizedProps,n!==l&&Br(r),Nt(r),im(r,f,n,l,a)),null;case 27:if(Si(r),a=Ae.current,f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==l&&Br(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return Nt(r),null}n=de.current,go(r)?V0(r):(n=uv(f,l,a),r.stateNode=n,Br(r))}return Nt(r),null;case 5:if(Si(r),f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==l&&Br(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return Nt(r),null}if(d=de.current,go(r))V0(r);else{var _=gh(Ae.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[Pt]=r,d[Kt]=l;e:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=d;e:switch(Nn(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Br(r)}}return Nt(r),im(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,a),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==l&&Br(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(n=Ae.current,go(r)){if(n=r.stateNode,a=r.memoizedProps,l=null,f=xn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Pt]=r,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Z_(n.nodeValue,a)),n||bs(r,!0)}else n=gh(n).createTextNode(l),n[Pt]=r,r.stateNode=n}return Nt(r),null;case 31:if(a=r.memoizedState,n===null||n.memoizedState!==null){if(l=go(r),a!==null){if(n===null){if(!l)throw Error(s(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[Pt]=r}else Na(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Nt(r),n=!1}else a=dd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return r.flags&256?(pi(r),r):(pi(r),null);if((r.flags&128)!==0)throw Error(s(558))}return Nt(r),null;case 13:if(l=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=go(r),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Pt]=r}else Na(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Nt(r),f=!1}else f=dd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(pi(r),r):(pi(r),null)}return pi(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(r.child.flags|=8192),eh(r,r.updateQueue),Nt(r),null);case 4:return ut(),n===null&&Am(r.stateNode.containerInfo),Nt(r),null;case 10:return Lr(r.type),Nt(r),null;case 19:if(re(Qt),l=r.memoizedState,l===null)return Nt(r),null;if(f=(r.flags&128)!==0,d=l.rendering,d===null)if(f)Hl(l,!1);else{if(Bt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(d=Bc(n),d!==null){for(r.flags|=128,Hl(l,!1),n=d.updateQueue,r.updateQueue=n,eh(r,n),r.subtreeFlags=0,n=a,a=r.child;a!==null;)I0(a,n),a=a.sibling;return me(Qt,Qt.current&1|2),et&&Vr(r,l.treeForkCount),r.child}n=n.sibling}l.tail!==null&&Zt()>sh&&(r.flags|=128,f=!0,Hl(l,!1),r.lanes=4194304)}else{if(!f)if(n=Bc(d),n!==null){if(r.flags|=128,f=!0,n=n.updateQueue,r.updateQueue=n,eh(r,n),Hl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!et)return Nt(r),null}else 2*Zt()-l.renderingStartTime>sh&&a!==536870912&&(r.flags|=128,f=!0,Hl(l,!1),r.lanes=4194304);l.isBackwards?(d.sibling=r.child,r.child=d):(n=l.last,n!==null?n.sibling=d:r.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=Zt(),n.sibling=null,a=Qt.current,me(Qt,f?a&1|2:a&1),et&&Vr(r,l.treeForkCount),n):(Nt(r),null);case 22:case 23:return pi(r),xd(),l=r.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(Nt(r),r.subtreeFlags&6&&(r.flags|=8192)):Nt(r),a=r.updateQueue,a!==null&&eh(r,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),n!==null&&re(Oa),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Lr(tn),Nt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function TS(n,r){switch(hd(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Lr(tn),ut(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Si(r),null;case 31:if(r.memoizedState!==null){if(pi(r),r.alternate===null)throw Error(s(340));Na()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(pi(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Na()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return re(Qt),null;case 4:return ut(),null;case 10:return Lr(r.type),null;case 22:case 23:return pi(r),xd(),n!==null&&re(Oa),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return Lr(tn),null;case 25:return null;default:return null}}function i_(n,r){switch(hd(r),r.tag){case 3:Lr(tn),ut();break;case 26:case 27:case 5:Si(r);break;case 4:ut();break;case 31:r.memoizedState!==null&&pi(r);break;case 13:pi(r);break;case 19:re(Qt);break;case 10:Lr(r.type);break;case 22:case 23:pi(r),xd(),n!==null&&re(Oa);break;case 24:Lr(tn)}}function Fl(n,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(w){ft(r,r.return,w)}}function Rs(n,r,a){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var _=l.inst,w=_.destroy;if(w!==void 0){_.destroy=void 0,f=r;var O=a,K=w;try{K()}catch(se){ft(f,O,se)}}}l=l.next}while(l!==d)}}catch(se){ft(r,r.return,se)}}function r_(n){var r=n.updateQueue;if(r!==null){var a=n.stateNode;try{Q0(r,a)}catch(l){ft(n,n.return,l)}}}function s_(n,r,a){a.props=La(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){ft(n,r,l)}}function Gl(n,r){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){ft(n,r,f)}}function _r(n,r){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){ft(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ft(n,r,f)}else a.current=null}function a_(n){var r=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){ft(n,n.return,f)}}function rm(n,r,a){try{var l=n.stateNode;FS(l,n.type,a,r),l[Kt]=r}catch(f){ft(n,n.return,f)}}function o_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ks(n.type)||n.tag===4}function sm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||o_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ks(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function am(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(n),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Qi));else if(l!==4&&(l===27&&ks(n.type)&&(a=n.stateNode,r=null),n=n.child,n!==null))for(am(n,r,a),n=n.sibling;n!==null;)am(n,r,a),n=n.sibling}function th(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(l!==4&&(l===27&&ks(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(th(n,r,a),n=n.sibling;n!==null;)th(n,r,a),n=n.sibling}function l_(n){var r=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Nn(r,l,a),r[Pt]=n,r[Kt]=a}catch(d){ft(n,n.return,d)}}var qr=!1,sn=!1,om=!1,u_=typeof WeakSet=="function"?WeakSet:Set,_n=null;function wS(n,r){if(n=n.containerInfo,Cm=Th,n=E0(n),ed(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,w=-1,O=-1,K=0,se=0,le=n,Q=null;t:for(;;){for(var ee;le!==a||f!==0&&le.nodeType!==3||(w=_+f),le!==d||l!==0&&le.nodeType!==3||(O=_+l),le.nodeType===3&&(_+=le.nodeValue.length),(ee=le.firstChild)!==null;)Q=le,le=ee;for(;;){if(le===n)break t;if(Q===a&&++K===f&&(w=_),Q===d&&++se===l&&(O=_),(ee=le.nextSibling)!==null)break;le=Q,Q=le.parentNode}le=ee}a=w===-1||O===-1?null:{start:w,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Nm={focusedElem:n,selectionRange:a},Th=!1,_n=r;_n!==null;)if(r=_n,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,_n=n;else for(;_n!==null;){switch(r=_n,d=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=r,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Te=La(a.type,f);n=l.getSnapshotBeforeUpdate(Te,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(Ne){ft(a,a.return,Ne)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,a=n.nodeType,a===9)Om(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Om(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=r.sibling,n!==null){n.return=r.return,_n=n;break}_n=r.return}}function c_(n,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Fr(n,a),l&4&&Fl(5,a);break;case 1:if(Fr(n,a),l&4)if(n=a.stateNode,r===null)try{n.componentDidMount()}catch(_){ft(a,a.return,_)}else{var f=La(a.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(_){ft(a,a.return,_)}}l&64&&r_(a),l&512&&Gl(a,a.return);break;case 3:if(Fr(n,a),l&64&&(n=a.updateQueue,n!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Q0(n,r)}catch(_){ft(a,a.return,_)}}break;case 27:r===null&&l&4&&l_(a);case 26:case 5:Fr(n,a),r===null&&l&4&&a_(a),l&512&&Gl(a,a.return);break;case 12:Fr(n,a);break;case 31:Fr(n,a),l&4&&d_(n,a);break;case 13:Fr(n,a),l&4&&m_(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=OS.bind(null,a),ZS(n,a))));break;case 22:if(l=a.memoizedState!==null||qr,!l){r=r!==null&&r.memoizedState!==null||sn,f=qr;var d=sn;qr=l,(sn=r)&&!d?Gr(n,a,(a.subtreeFlags&8772)!==0):Fr(n,a),qr=f,sn=d}break;case 30:break;default:Fr(n,a)}}function h_(n){var r=n.alternate;r!==null&&(n.alternate=null,h_(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&os(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var kt=null,ai=!1;function Hr(n,r,a){for(a=a.child;a!==null;)f_(n,r,a),a=a.sibling}function f_(n,r,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Kn,a)}catch{}switch(a.tag){case 26:sn||_r(a,r),Hr(n,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:sn||_r(a,r);var l=kt,f=ai;ks(a.type)&&(kt=a.stateNode,ai=!1),Hr(n,r,a),eu(a.stateNode),kt=l,ai=f;break;case 5:sn||_r(a,r);case 6:if(l=kt,f=ai,kt=null,Hr(n,r,a),kt=l,ai=f,kt!==null)if(ai)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(a.stateNode)}catch(d){ft(a,r,d)}else try{kt.removeChild(a.stateNode)}catch(d){ft(a,r,d)}break;case 18:kt!==null&&(ai?(n=kt,rv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Po(n)):rv(kt,a.stateNode));break;case 4:l=kt,f=ai,kt=a.stateNode.containerInfo,ai=!0,Hr(n,r,a),kt=l,ai=f;break;case 0:case 11:case 14:case 15:Rs(2,a,r),sn||Rs(4,a,r),Hr(n,r,a);break;case 1:sn||(_r(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&s_(a,r,l)),Hr(n,r,a);break;case 21:Hr(n,r,a);break;case 22:sn=(l=sn)||a.memoizedState!==null,Hr(n,r,a),sn=l;break;default:Hr(n,r,a)}}function d_(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Po(n)}catch(a){ft(r,r.return,a)}}}function m_(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Po(n)}catch(a){ft(r,r.return,a)}}function SS(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new u_),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new u_),r;default:throw Error(s(435,n.tag))}}function nh(n,r){var a=SS(n);r.forEach(function(l){if(!a.has(l)){a.add(l);var f=MS.bind(null,n,l);l.then(f,f)}})}function oi(n,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,_=r,w=_;e:for(;w!==null;){switch(w.tag){case 27:if(ks(w.type)){kt=w.stateNode,ai=!1;break e}break;case 5:kt=w.stateNode,ai=!1;break e;case 3:case 4:kt=w.stateNode.containerInfo,ai=!0;break e}w=w.return}if(kt===null)throw Error(s(160));f_(d,_,f),kt=null,ai=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)g_(r,n),r=r.sibling}var er=null;function g_(n,r){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:oi(r,n),li(n),l&4&&(Rs(3,n,n.return),Fl(3,n),Rs(5,n,n.return));break;case 1:oi(r,n),li(n),l&512&&(sn||a===null||_r(a,a.return)),l&64&&qr&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=er;if(oi(r,n),li(n),l&512&&(sn||a===null||_r(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Ai]||d[Pt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Nn(d,l,a),d[Pt]=n,Ut(d),l=d;break e;case"link":var _=gv("link","href",f).get(l+(a.href||""));if(_){for(var w=0;w<_.length;w++)if(d=_[w],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(w,1);break t}}d=f.createElement(l),Nn(d,l,a),f.head.appendChild(d);break;case"meta":if(_=gv("meta","content",f).get(l+(a.content||""))){for(w=0;w<_.length;w++)if(d=_[w],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(w,1);break t}}d=f.createElement(l),Nn(d,l,a),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[Pt]=n,Ut(d),l=d}n.stateNode=l}else pv(f,n.type,n.stateNode);else n.stateNode=mv(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?pv(f,n.type,n.stateNode):mv(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&rm(n,n.memoizedProps,a.memoizedProps)}break;case 27:oi(r,n),li(n),l&512&&(sn||a===null||_r(a,a.return)),a!==null&&l&4&&rm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(oi(r,n),li(n),l&512&&(sn||a===null||_r(a,a.return)),n.flags&32){f=n.stateNode;try{si(f,"")}catch(Te){ft(n,n.return,Te)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,rm(n,f,a!==null?a.memoizedProps:f)),l&1024&&(om=!0);break;case 6:if(oi(r,n),li(n),l&4){if(n.stateNode===null)throw Error(s(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(Te){ft(n,n.return,Te)}}break;case 3:if(_h=null,f=er,er=ph(r.containerInfo),oi(r,n),er=f,li(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Po(r.containerInfo)}catch(Te){ft(n,n.return,Te)}om&&(om=!1,p_(n));break;case 4:l=er,er=ph(n.stateNode.containerInfo),oi(r,n),li(n),er=l;break;case 12:oi(r,n),li(n);break;case 31:oi(r,n),li(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,nh(n,l)));break;case 13:oi(r,n),li(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(rh=Zt()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,nh(n,l)));break;case 22:f=n.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,K=qr,se=sn;if(qr=K||f,sn=se||O,oi(r,n),sn=se,qr=K,li(n),l&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||O||qr||sn||ja(n)),a=null,r=n;;){if(r.tag===5||r.tag===26){if(a===null){O=a=r;try{if(d=O.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{w=O.stateNode;var le=O.memoizedProps.style,Q=le!=null&&le.hasOwnProperty("display")?le.display:null;w.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Te){ft(O,O.return,Te)}}}else if(r.tag===6){if(a===null){O=r;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(Te){ft(O,O.return,Te)}}}else if(r.tag===18){if(a===null){O=r;try{var ee=O.stateNode;f?sv(ee,!0):sv(O.stateNode,!1)}catch(Te){ft(O,O.return,Te)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,nh(n,a))));break;case 19:oi(r,n),li(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,nh(n,l)));break;case 30:break;case 21:break;default:oi(r,n),li(n)}}function li(n){var r=n.flags;if(r&2){try{for(var a,l=n.return;l!==null;){if(o_(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,d=sm(n);th(n,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(si(_,""),a.flags&=-33);var w=sm(n);th(n,w,_);break;case 3:case 4:var O=a.stateNode.containerInfo,K=sm(n);am(n,K,O);break;default:throw Error(s(161))}}catch(se){ft(n,n.return,se)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function p_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;p_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Fr(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)c_(n,r.alternate,r),r=r.sibling}function ja(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Rs(4,r,r.return),ja(r);break;case 1:_r(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&s_(r,r.return,a),ja(r);break;case 27:eu(r.stateNode);case 26:case 5:_r(r,r.return),ja(r);break;case 22:r.memoizedState===null&&ja(r);break;case 30:ja(r);break;default:ja(r)}n=n.sibling}}function Gr(n,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=n,d=r,_=d.flags;switch(d.tag){case 0:case 11:case 15:Gr(f,d,a),Fl(4,d);break;case 1:if(Gr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(K){ft(l,l.return,K)}if(l=d,f=l.updateQueue,f!==null){var w=l.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)$0(O[f],w)}catch(K){ft(l,l.return,K)}}a&&_&64&&r_(d),Gl(d,d.return);break;case 27:l_(d);case 26:case 5:Gr(f,d,a),a&&l===null&&_&4&&a_(d),Gl(d,d.return);break;case 12:Gr(f,d,a);break;case 31:Gr(f,d,a),a&&_&4&&d_(f,d);break;case 13:Gr(f,d,a),a&&_&4&&m_(f,d);break;case 22:d.memoizedState===null&&Gr(f,d,a),Gl(d,d.return);break;case 30:break;default:Gr(f,d,a)}r=r.sibling}}function lm(n,r){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Dl(a))}function um(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Dl(n))}function tr(n,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)y_(n,r,a,l),r=r.sibling}function y_(n,r,a,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:tr(n,r,a,l),f&2048&&Fl(9,r);break;case 1:tr(n,r,a,l);break;case 3:tr(n,r,a,l),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Dl(n)));break;case 12:if(f&2048){tr(n,r,a,l),n=r.stateNode;try{var d=r.memoizedProps,_=d.id,w=d.onPostCommit;typeof w=="function"&&w(_,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){ft(r,r.return,O)}}else tr(n,r,a,l);break;case 31:tr(n,r,a,l);break;case 13:tr(n,r,a,l);break;case 23:break;case 22:d=r.stateNode,_=r.alternate,r.memoizedState!==null?d._visibility&2?tr(n,r,a,l):Kl(n,r):d._visibility&2?tr(n,r,a,l):(d._visibility|=2,Ao(n,r,a,l,(r.subtreeFlags&10256)!==0||!1)),f&2048&&lm(_,r);break;case 24:tr(n,r,a,l),f&2048&&um(r.alternate,r);break;default:tr(n,r,a,l)}}function Ao(n,r,a,l,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var d=n,_=r,w=a,O=l,K=_.flags;switch(_.tag){case 0:case 11:case 15:Ao(d,_,w,O,f),Fl(8,_);break;case 23:break;case 22:var se=_.stateNode;_.memoizedState!==null?se._visibility&2?Ao(d,_,w,O,f):Kl(d,_):(se._visibility|=2,Ao(d,_,w,O,f)),f&&K&2048&&lm(_.alternate,_);break;case 24:Ao(d,_,w,O,f),f&&K&2048&&um(_.alternate,_);break;default:Ao(d,_,w,O,f)}r=r.sibling}}function Kl(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=n,l=r,f=l.flags;switch(l.tag){case 22:Kl(a,l),f&2048&&lm(l.alternate,l);break;case 24:Kl(a,l),f&2048&&um(l.alternate,l);break;default:Kl(a,l)}r=r.sibling}}var $l=8192;function xo(n,r,a){if(n.subtreeFlags&$l)for(n=n.child;n!==null;)__(n,r,a),n=n.sibling}function __(n,r,a){switch(n.tag){case 26:xo(n,r,a),n.flags&$l&&n.memoizedState!==null&&cA(a,er,n.memoizedState,n.memoizedProps);break;case 5:xo(n,r,a);break;case 3:case 4:var l=er;er=ph(n.stateNode.containerInfo),xo(n,r,a),er=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=$l,$l=16777216,xo(n,r,a),$l=l):xo(n,r,a));break;default:xo(n,r,a)}}function v_(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Ql(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];_n=l,E_(l,n)}v_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)b_(n),n=n.sibling}function b_(n){switch(n.tag){case 0:case 11:case 15:Ql(n),n.flags&2048&&Rs(9,n,n.return);break;case 3:Ql(n);break;case 12:Ql(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,ih(n)):Ql(n);break;default:Ql(n)}}function ih(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];_n=l,E_(l,n)}v_(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Rs(8,r,r.return),ih(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,ih(r));break;default:ih(r)}n=n.sibling}}function E_(n,r){for(;_n!==null;){var a=_n;switch(a.tag){case 0:case 11:case 15:Rs(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Dl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,_n=l;else e:for(a=n;_n!==null;){l=_n;var f=l.sibling,d=l.return;if(h_(l),l===a){_n=null;break e}if(f!==null){f.return=d,_n=f;break e}_n=d}}}var AS={getCacheForType:function(n){var r=Rn(tn),a=r.data.get(n);return a===void 0&&(a=n(),r.data.set(n,a)),a},cacheSignal:function(){return Rn(tn).controller.signal}},xS=typeof WeakMap=="function"?WeakMap:Map,lt=0,Tt=null,Ge=null,Qe=0,ht=0,yi=null,Cs=!1,Ro=!1,cm=!1,Kr=0,Bt=0,Ns=0,Ua=0,hm=0,_i=0,Co=0,Yl=null,ui=null,fm=!1,rh=0,T_=0,sh=1/0,ah=null,Is=null,fn=0,Ds=null,No=null,$r=0,dm=0,mm=null,w_=null,Xl=0,gm=null;function vi(){return(lt&2)!==0&&Qe!==0?Qe&-Qe:te.T!==null?Em():Ot()}function S_(){if(_i===0)if((Qe&536870912)===0||et){var n=$i;$i<<=1,($i&3932160)===0&&($i=262144),_i=n}else _i=536870912;return n=gi.current,n!==null&&(n.flags|=32),_i}function ci(n,r,a){(n===Tt&&(ht===2||ht===9)||n.cancelPendingCommit!==null)&&(Io(n,0),Os(n,Qe,_i,!1)),Y(n,a),((lt&2)===0||n!==Tt)&&(n===Tt&&((lt&2)===0&&(Ua|=a),Bt===4&&Os(n,Qe,_i,!1)),vr(n))}function A_(n,r,a){if((lt&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&n.expiredLanes)===0||jt(n,r),f=l?NS(n,r):ym(n,r,!0),d=l;do{if(f===0){Ro&&!l&&Os(n,r,0,!1);break}else{if(a=n.current.alternate,d&&!RS(a)){f=ym(n,r,!1),d=!1;continue}if(f===2){if(d=r,n.errorRecoveryDisabledLanes&d)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var w=n;f=Yl;var O=w.current.memoizedState.isDehydrated;if(O&&(Io(w,_).flags|=256),_=ym(w,_,!1),_!==2){if(cm&&!O){w.errorRecoveryDisabledLanes|=d,Ua|=d,f=4;break e}d=ui,ui=f,d!==null&&(ui===null?ui=d:ui.push.apply(ui,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){Io(n,0),Os(n,r,0,!0);break}e:{switch(l=n,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Os(l,r,_i,!Cs);break e;case 2:ui=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=rh+300-Zt(),10<f)){if(Os(l,r,_i,!Cs),Rt(l,0,!0)!==0)break e;$r=r,l.timeoutHandle=nv(x_.bind(null,l,a,ui,ah,fm,r,_i,Ua,Co,Cs,d,"Throttled",-0,0),f);break e}x_(l,a,ui,ah,fm,r,_i,Ua,Co,Cs,d,null,-0,0)}}break}while(!0);vr(n)}function x_(n,r,a,l,f,d,_,w,O,K,se,le,Q,ee){if(n.timeoutHandle=-1,le=r.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qi},__(r,d,le);var Te=(d&62914560)===d?rh-Zt():(d&4194048)===d?T_-Zt():0;if(Te=hA(le,Te),Te!==null){$r=d,n.cancelPendingCommit=Te(k_.bind(null,n,r,d,a,l,f,_,w,O,se,le,null,Q,ee)),Os(n,d,_,!K);return}}k_(n,r,d,a,l,f,_,w,O)}function RS(n){for(var r=n;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!di(d(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Os(n,r,a,l){r&=~hm,r&=~Ua,n.suspendedLanes|=r,n.pingedLanes&=~r,l&&(n.warmLanes|=r),l=n.expirationTimes;for(var f=r;0<f;){var d=31-At(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&gt(n,a,r)}function oh(){return(lt&6)===0?(Jl(0),!1):!0}function pm(){if(Ge!==null){if(ht===0)var n=Ge.return;else n=Ge,Pr=Ia=null,Od(n),bo=null,Ml=0,n=Ge;for(;n!==null;)i_(n.alternate,n),n=n.return;Ge=null}}function Io(n,r){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,$S(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),$r=0,pm(),Tt=n,Ge=a=kr(n.current,null),Qe=r,ht=0,yi=null,Cs=!1,Ro=jt(n,r),cm=!1,Co=_i=hm=Ua=Ns=Bt=0,ui=Yl=null,fm=!1,(r&8)!==0&&(r|=r&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=r;0<l;){var f=31-At(l),d=1<<f;r|=n[f],l&=~d}return Kr=r,Cc(),a}function R_(n,r){Ue=null,te.H=Bl,r===vo||r===Pc?(r=H0(),ht=3):r===bd?(r=H0(),ht=4):ht=r===Qd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,yi=r,Ge===null&&(Bt=1,Xc(n,ki(r,n.current)))}function C_(){var n=gi.current;return n===null?!0:(Qe&4194048)===Qe?ji===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?n===ji:!1}function N_(){var n=te.H;return te.H=Bl,n===null?Bl:n}function I_(){var n=te.A;return te.A=AS,n}function lh(){Bt=4,Cs||(Qe&4194048)!==Qe&&gi.current!==null||(Ro=!0),(Ns&134217727)===0&&(Ua&134217727)===0||Tt===null||Os(Tt,Qe,_i,!1)}function ym(n,r,a){var l=lt;lt|=2;var f=N_(),d=I_();(Tt!==n||Qe!==r)&&(ah=null,Io(n,r)),r=!1;var _=Bt;e:do try{if(ht!==0&&Ge!==null){var w=Ge,O=yi;switch(ht){case 8:pm(),_=6;break e;case 3:case 2:case 9:case 6:gi.current===null&&(r=!0);var K=ht;if(ht=0,yi=null,Do(n,w,O,K),a&&Ro){_=0;break e}break;default:K=ht,ht=0,yi=null,Do(n,w,O,K)}}CS(),_=Bt;break}catch(se){R_(n,se)}while(!0);return r&&n.shellSuspendCounter++,Pr=Ia=null,lt=l,te.H=f,te.A=d,Ge===null&&(Tt=null,Qe=0,Cc()),_}function CS(){for(;Ge!==null;)D_(Ge)}function NS(n,r){var a=lt;lt|=2;var l=N_(),f=I_();Tt!==n||Qe!==r?(ah=null,sh=Zt()+500,Io(n,r)):Ro=jt(n,r);e:do try{if(ht!==0&&Ge!==null){r=Ge;var d=yi;t:switch(ht){case 1:ht=0,yi=null,Do(n,r,d,1);break;case 2:case 9:if(B0(d)){ht=0,yi=null,O_(r);break}r=function(){ht!==2&&ht!==9||Tt!==n||(ht=7),vr(n)},d.then(r,r);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:B0(d)?(ht=0,yi=null,O_(r)):(ht=0,yi=null,Do(n,r,d,7));break;case 5:var _=null;switch(Ge.tag){case 26:_=Ge.memoizedState;case 5:case 27:var w=Ge;if(_?yv(_):w.stateNode.complete){ht=0,yi=null;var O=w.sibling;if(O!==null)Ge=O;else{var K=w.return;K!==null?(Ge=K,uh(K)):Ge=null}break t}}ht=0,yi=null,Do(n,r,d,5);break;case 6:ht=0,yi=null,Do(n,r,d,6);break;case 8:pm(),Bt=6;break e;default:throw Error(s(462))}}IS();break}catch(se){R_(n,se)}while(!0);return Pr=Ia=null,te.H=l,te.A=f,lt=a,Ge!==null?0:(Tt=null,Qe=0,Cc(),Bt)}function IS(){for(;Ge!==null&&!or();)D_(Ge)}function D_(n){var r=t_(n.alternate,n,Kr);n.memoizedProps=n.pendingProps,r===null?uh(n):Ge=r}function O_(n){var r=n,a=r.alternate;switch(r.tag){case 15:case 0:r=Yy(a,r,r.pendingProps,r.type,void 0,Qe);break;case 11:r=Yy(a,r,r.pendingProps,r.type.render,r.ref,Qe);break;case 5:Od(r);default:i_(a,r),r=Ge=I0(r,Kr),r=t_(a,r,Kr)}n.memoizedProps=n.pendingProps,r===null?uh(n):Ge=r}function Do(n,r,a,l){Pr=Ia=null,Od(r),bo=null,Ml=0;var f=r.return;try{if(_S(n,f,r,a,Qe)){Bt=1,Xc(n,ki(a,n.current)),Ge=null;return}}catch(d){if(f!==null)throw Ge=f,d;Bt=1,Xc(n,ki(a,n.current)),Ge=null;return}r.flags&32768?(et||l===1?n=!0:Ro||(Qe&536870912)!==0?n=!1:(Cs=n=!0,(l===2||l===9||l===3||l===6)&&(l=gi.current,l!==null&&l.tag===13&&(l.flags|=16384))),M_(r,n)):uh(r)}function uh(n){var r=n;do{if((r.flags&32768)!==0){M_(r,Cs);return}n=r.return;var a=ES(r.alternate,r,Kr);if(a!==null){Ge=a;return}if(r=r.sibling,r!==null){Ge=r;return}Ge=r=n}while(r!==null);Bt===0&&(Bt=5)}function M_(n,r){do{var a=TS(n.alternate,n);if(a!==null){a.flags&=32767,Ge=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(n=n.sibling,n!==null)){Ge=n;return}Ge=n=a}while(n!==null);Bt=6,Ge=null}function k_(n,r,a,l,f,d,_,w,O){n.cancelPendingCommit=null;do ch();while(fn!==0);if((lt&6)!==0)throw Error(s(327));if(r!==null){if(r===n.current)throw Error(s(177));if(d=r.lanes|r.childLanes,d|=sd,mt(n,a,d,_,w,O),n===Tt&&(Ge=Tt=null,Qe=0),No=r,Ds=n,$r=a,dm=d,mm=f,w_=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,kS(Sn,function(){return U_(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=te.T,te.T=null,f=he.p,he.p=2,_=lt,lt|=4;try{wS(n,r,a)}finally{lt=_,he.p=f,te.T=l}}fn=1,V_(),P_(),L_()}}function V_(){if(fn===1){fn=0;var n=Ds,r=No,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=te.T,te.T=null;var l=he.p;he.p=2;var f=lt;lt|=4;try{g_(r,n);var d=Nm,_=E0(n.containerInfo),w=d.focusedElem,O=d.selectionRange;if(_!==w&&w&&w.ownerDocument&&b0(w.ownerDocument.documentElement,w)){if(O!==null&&ed(w)){var K=O.start,se=O.end;if(se===void 0&&(se=K),"selectionStart"in w)w.selectionStart=K,w.selectionEnd=Math.min(se,w.value.length);else{var le=w.ownerDocument||document,Q=le&&le.defaultView||window;if(Q.getSelection){var ee=Q.getSelection(),Te=w.textContent.length,Ne=Math.min(O.start,Te),bt=O.end===void 0?Ne:Math.min(O.end,Te);!ee.extend&&Ne>bt&&(_=bt,bt=Ne,Ne=_);var U=v0(w,Ne),L=v0(w,bt);if(U&&L&&(ee.rangeCount!==1||ee.anchorNode!==U.node||ee.anchorOffset!==U.offset||ee.focusNode!==L.node||ee.focusOffset!==L.offset)){var G=le.createRange();G.setStart(U.node,U.offset),ee.removeAllRanges(),Ne>bt?(ee.addRange(G),ee.extend(L.node,L.offset)):(G.setEnd(L.node,L.offset),ee.addRange(G))}}}}for(le=[],ee=w;ee=ee.parentNode;)ee.nodeType===1&&le.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<le.length;w++){var ae=le[w];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Th=!!Cm,Nm=Cm=null}finally{lt=f,he.p=l,te.T=a}}n.current=r,fn=2}}function P_(){if(fn===2){fn=0;var n=Ds,r=No,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=te.T,te.T=null;var l=he.p;he.p=2;var f=lt;lt|=4;try{c_(n,r.alternate,r)}finally{lt=f,he.p=l,te.T=a}}fn=3}}function L_(){if(fn===4||fn===3){fn=0,lr();var n=Ds,r=No,a=$r,l=w_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?fn=5:(fn=0,No=Ds=null,j_(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Is=null),tt(a),r=r.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Kn,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=te.T,f=he.p,he.p=2,te.T=null;try{for(var d=n.onRecoverableError,_=0;_<l.length;_++){var w=l[_];d(w.value,{componentStack:w.stack})}}finally{te.T=r,he.p=f}}($r&3)!==0&&ch(),vr(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===gm?Xl++:(Xl=0,gm=n):Xl=0,Jl(0)}}function j_(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,Dl(r)))}function ch(){return V_(),P_(),L_(),U_()}function U_(){if(fn!==5)return!1;var n=Ds,r=dm;dm=0;var a=tt($r),l=te.T,f=he.p;try{he.p=32>a?32:a,te.T=null,a=mm,mm=null;var d=Ds,_=$r;if(fn=0,No=Ds=null,$r=0,(lt&6)!==0)throw Error(s(331));var w=lt;if(lt|=4,b_(d.current),y_(d,d.current,_,a),lt=w,Jl(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Kn,d)}catch{}return!0}finally{he.p=f,te.T=l,j_(n,r)}}function z_(n,r,a){r=ki(a,r),r=$d(n.stateNode,r,2),n=Ss(n,r,2),n!==null&&(Y(n,2),vr(n))}function ft(n,r,a){if(n.tag===3)z_(n,n,a);else for(;r!==null;){if(r.tag===3){z_(r,n,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Is===null||!Is.has(l))){n=ki(a,n),a=By(2),l=Ss(r,a,2),l!==null&&(qy(a,l,r,n),Y(l,2),vr(l));break}}r=r.return}}function _m(n,r,a){var l=n.pingCache;if(l===null){l=n.pingCache=new xS;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(a)||(cm=!0,f.add(a),n=DS.bind(null,n,r,a),r.then(n,n))}function DS(n,r,a){var l=n.pingCache;l!==null&&l.delete(r),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,Tt===n&&(Qe&a)===a&&(Bt===4||Bt===3&&(Qe&62914560)===Qe&&300>Zt()-rh?(lt&2)===0&&Io(n,0):hm|=a,Co===Qe&&(Co=0)),vr(n)}function B_(n,r){r===0&&(r=Wt()),n=Ra(n,r),n!==null&&(Y(n,r),vr(n))}function OS(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),B_(n,a)}function MS(n,r){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),B_(n,a)}function kS(n,r){return ct(n,r)}var hh=null,Oo=null,vm=!1,fh=!1,bm=!1,Ms=0;function vr(n){n!==Oo&&n.next===null&&(Oo===null?hh=Oo=n:Oo=Oo.next=n),fh=!0,vm||(vm=!0,PS())}function Jl(n,r){if(!bm&&fh){bm=!0;do for(var a=!1,l=hh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,w=l.pingedLanes;d=(1<<31-At(42|n)+1)-1,d&=f&~(_&~w),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,G_(l,d))}else d=Qe,d=Rt(l,l===Tt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||jt(l,d)||(a=!0,G_(l,d));l=l.next}while(a);bm=!1}}function VS(){q_()}function q_(){fh=vm=!1;var n=0;Ms!==0&&KS()&&(n=Ms);for(var r=Zt(),a=null,l=hh;l!==null;){var f=l.next,d=H_(l,r);d===0?(l.next=null,a===null?hh=f:a.next=f,f===null&&(Oo=a)):(a=l,(n!==0||(d&3)!==0)&&(fh=!0)),l=f}fn!==0&&fn!==5||Jl(n),Ms!==0&&(Ms=0)}function H_(n,r){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var _=31-At(d),w=1<<_,O=f[_];O===-1?((w&a)===0||(w&l)!==0)&&(f[_]=yn(w,r)):O<=r&&(n.expiredLanes|=w),d&=~w}if(r=Tt,a=Qe,a=Rt(n,n===r?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===r&&(ht===2||ht===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Hn(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||jt(n,a)){if(r=a&-a,r===n.callbackPriority)return r;switch(l!==null&&Hn(l),tt(a)){case 2:case 8:a=Fn;break;case 32:a=Sn;break;case 268435456:a=Cr;break;default:a=Sn}return l=F_.bind(null,n),a=ct(a,l),n.callbackPriority=r,n.callbackNode=a,r}return l!==null&&l!==null&&Hn(l),n.callbackPriority=2,n.callbackNode=null,2}function F_(n,r){if(fn!==0&&fn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(ch()&&n.callbackNode!==a)return null;var l=Qe;return l=Rt(n,n===Tt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(A_(n,l,r),H_(n,Zt()),n.callbackNode!=null&&n.callbackNode===a?F_.bind(null,n):null)}function G_(n,r){if(ch())return null;A_(n,r,!0)}function PS(){QS(function(){(lt&6)!==0?ct(Rr,VS):q_()})}function Em(){if(Ms===0){var n=yo;n===0&&(n=ni,ni<<=1,(ni&261888)===0&&(ni=256)),Ms=n}return Ms}function K_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:to(""+n)}function $_(n,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,n.id&&a.setAttribute("form",n.id),r.parentNode.insertBefore(a,r),n=new FormData(n),a.parentNode.removeChild(a),n}function LS(n,r,a,l,f){if(r==="submit"&&a&&a.stateNode===f){var d=K_((f[Kt]||null).action),_=l.submitter;_&&(r=(r=_[Kt]||null)?K_(r.formAction):_.getAttribute("formAction"),r!==null&&(d=r,_=null));var w=new fr("action","action",null,l,f);n.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ms!==0){var O=_?$_(f,_):new FormData(f);Bd(a,{pending:!0,data:O,method:f.method,action:d},null,O)}}else typeof d=="function"&&(w.preventDefault(),O=_?$_(f,_):new FormData(f),Bd(a,{pending:!0,data:O,method:f.method,action:d},d,O))},currentTarget:f}]})}}for(var Tm=0;Tm<rd.length;Tm++){var wm=rd[Tm],jS=wm.toLowerCase(),US=wm[0].toUpperCase()+wm.slice(1);Wi(jS,"on"+US)}Wi(S0,"onAnimationEnd"),Wi(A0,"onAnimationIteration"),Wi(x0,"onAnimationStart"),Wi("dblclick","onDoubleClick"),Wi("focusin","onFocus"),Wi("focusout","onBlur"),Wi(tS,"onTransitionRun"),Wi(nS,"onTransitionStart"),Wi(iS,"onTransitionCancel"),Wi(R0,"onTransitionEnd"),Ci("onMouseEnter",["mouseout","mouseover"]),Ci("onMouseLeave",["mouseout","mouseover"]),Ci("onPointerEnter",["pointerout","pointerover"]),Ci("onPointerLeave",["pointerout","pointerover"]),ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zl));function Q_(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var d=void 0;if(r)for(var _=l.length-1;0<=_;_--){var w=l[_],O=w.instance,K=w.currentTarget;if(w=w.listener,O!==d&&f.isPropagationStopped())break e;d=w,f.currentTarget=K;try{d(f)}catch(se){Rc(se)}f.currentTarget=null,d=O}else for(_=0;_<l.length;_++){if(w=l[_],O=w.instance,K=w.currentTarget,w=w.listener,O!==d&&f.isPropagationStopped())break e;d=w,f.currentTarget=K;try{d(f)}catch(se){Rc(se)}f.currentTarget=null,d=O}}}}function Ke(n,r){var a=r[as];a===void 0&&(a=r[as]=new Set);var l=n+"__bubble";a.has(l)||(Y_(r,n,2,!1),a.add(l))}function Sm(n,r,a){var l=0;r&&(l|=4),Y_(a,n,l,r)}var dh="_reactListening"+Math.random().toString(36).slice(2);function Am(n){if(!n[dh]){n[dh]=!0,ma.forEach(function(a){a!=="selectionchange"&&(zS.has(a)||Sm(a,!1,n),Sm(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[dh]||(r[dh]=!0,Sm("selectionchange",!1,r))}}function Y_(n,r,a,l){switch(Sv(r)){case 2:var f=mA;break;case 8:f=gA;break;default:f=zm}a=f.bind(null,r,a,n),f=void 0,!va||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(r,a,{capture:!0,passive:f}):n.addEventListener(r,a,!0):f!==void 0?n.addEventListener(r,a,{passive:f}):n.addEventListener(r,a,!1)}function xm(n,r,a,l,f){var d=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var w=l.stateNode.containerInfo;if(w===f)break;if(_===4)for(_=l.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;w!==null;){if(_=xi(w),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){l=d=_;continue e}w=w.parentNode}}l=l.return}ms(function(){var K=d,se=Ii(a),le=[];e:{var Q=C0.get(n);if(Q!==void 0){var ee=fr,Te=n;switch(n){case"keypress":if(Ea(a)===0)break e;case"keydown":case"keyup":ee=Sc;break;case"focusin":Te="focus",ee=wa;break;case"focusout":Te="blur",ee=wa;break;case"beforeblur":case"afterblur":ee=wa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=wl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=gc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=y;break;case S0:case A0:case x0:ee=yc;break;case R0:ee=A;break;case"scroll":case"scrollend":ee=Tl;break;case"wheel":ee=J;break;case"copy":case"cut":case"paste":ee=_c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Mr;break;case"toggle":case"beforetoggle":ee=je}var Ne=(r&4)!==0,bt=!Ne&&(n==="scroll"||n==="scrollend"),U=Ne?Q!==null?Q+"Capture":null:Q;Ne=[];for(var L=K,G;L!==null;){var ae=L;if(G=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||G===null||U===null||(ae=Yi(L,U),ae!=null&&Ne.push(Wl(L,ae,G))),bt)break;L=L.return}0<Ne.length&&(Q=new ee(Q,Te,null,a,se),le.push({event:Q,listeners:Ne}))}}if((r&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",ee=n==="mouseout"||n==="pointerout",Q&&a!==vl&&(Te=a.relatedTarget||a.fromElement)&&(xi(Te)||Te[Ee]))break e;if((ee||Q)&&(Q=se.window===se?se:(Q=se.ownerDocument)?Q.defaultView||Q.parentWindow:window,ee?(Te=a.relatedTarget||a.toElement,ee=K,Te=Te?xi(Te):null,Te!==null&&(bt=u(Te),Ne=Te.tag,Te!==bt||Ne!==5&&Ne!==27&&Ne!==6)&&(Te=null)):(ee=null,Te=K),ee!==Te)){if(Ne=wl,ae="onMouseLeave",U="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(Ne=Mr,ae="onPointerLeave",U="onPointerEnter",L="pointer"),bt=ee==null?Q:Ln(ee),G=Te==null?Q:Ln(Te),Q=new Ne(ae,L+"leave",ee,a,se),Q.target=bt,Q.relatedTarget=G,ae=null,xi(se)===K&&(Ne=new Ne(U,L+"enter",Te,a,se),Ne.target=G,Ne.relatedTarget=bt,ae=Ne),bt=ae,ee&&Te)t:{for(Ne=BS,U=ee,L=Te,G=0,ae=U;ae;ae=Ne(ae))G++;ae=0;for(var Re=L;Re;Re=Ne(Re))ae++;for(;0<G-ae;)U=Ne(U),G--;for(;0<ae-G;)L=Ne(L),ae--;for(;G--;){if(U===L||L!==null&&U===L.alternate){Ne=U;break t}U=Ne(U),L=Ne(L)}Ne=null}else Ne=null;ee!==null&&X_(le,Q,ee,Ne,!1),Te!==null&&bt!==null&&X_(le,bt,Te,Ne,!0)}}e:{if(Q=K?Ln(K):window,ee=Q.nodeName&&Q.nodeName.toLowerCase(),ee==="select"||ee==="input"&&Q.type==="file")var rt=d0;else if(h0(Q))if(m0)rt=Zw;else{rt=Xw;var we=Yw}else ee=Q.nodeName,!ee||ee.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?K&&eo(K.elementType)&&(rt=d0):rt=Jw;if(rt&&(rt=rt(n,K))){f0(le,rt,a,se);break e}we&&we(n,Q,K),n==="focusout"&&K&&Q.type==="number"&&K.memoizedProps.value!=null&&pl(Q,"number",Q.value)}switch(we=K?Ln(K):window,n){case"focusin":(h0(we)||we.contentEditable==="true")&&(lo=we,td=K,Cl=null);break;case"focusout":Cl=td=lo=null;break;case"mousedown":nd=!0;break;case"contextmenu":case"mouseup":case"dragend":nd=!1,T0(le,a,se);break;case"selectionchange":if(eS)break;case"keydown":case"keyup":T0(le,a,se)}var Be;if(ot)e:{switch(n){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else oo?Sa(n,a)&&(Ye="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ye="onCompositionStart");Ye&&(gr&&a.locale!=="ko"&&(oo||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&oo&&(Be=El()):(hr=se,bl="value"in hr?hr.value:hr.textContent,oo=!0)),we=mh(K,Ye),0<we.length&&(Ye=new mr(Ye,n,null,a,se),le.push({event:Ye,listeners:we}),Be?Ye.data=Be:(Be=ao(a),Be!==null&&(Ye.data=Be)))),(Be=Oi?Gw(n,a):Kw(n,a))&&(Ye=mh(K,"onBeforeInput"),0<Ye.length&&(we=new mr("onBeforeInput","beforeinput",null,a,se),le.push({event:we,listeners:Ye}),we.data=Be)),LS(le,n,K,a,se)}Q_(le,r)})}function Wl(n,r,a){return{instance:n,listener:r,currentTarget:a}}function mh(n,r){for(var a=r+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Yi(n,a),f!=null&&l.unshift(Wl(n,f,d)),f=Yi(n,r),f!=null&&l.push(Wl(n,f,d))),n.tag===3)return l;n=n.return}return[]}function BS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function X_(n,r,a,l,f){for(var d=r._reactName,_=[];a!==null&&a!==l;){var w=a,O=w.alternate,K=w.stateNode;if(w=w.tag,O!==null&&O===l)break;w!==5&&w!==26&&w!==27||K===null||(O=K,f?(K=Yi(a,d),K!=null&&_.unshift(Wl(a,K,O))):f||(K=Yi(a,d),K!=null&&_.push(Wl(a,K,O)))),a=a.return}_.length!==0&&n.push({event:r,listeners:_})}var qS=/\r\n?/g,HS=/\u0000|\uFFFD/g;function J_(n){return(typeof n=="string"?n:""+n).replace(qS,`
`).replace(HS,"")}function Z_(n,r){return r=J_(r),J_(n)===r}function vt(n,r,a,l,f,d){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||si(n,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&si(n,""+l);break;case"className":X(n,"class",l);break;case"tabIndex":X(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":X(n,a,l);break;case"style":_l(n,l,d);break;case"data":if(r!=="object"){X(n,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=to(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(r!=="input"&&vt(n,r,"name",f.name,f,null),vt(n,r,"formEncType",f.formEncType,f,null),vt(n,r,"formMethod",f.formMethod,f,null),vt(n,r,"formTarget",f.formTarget,f,null)):(vt(n,r,"encType",f.encType,f,null),vt(n,r,"method",f.method,f,null),vt(n,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=to(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Qi);break;case"onScroll":l!=null&&Ke("scroll",n);break;case"onScrollEnd":l!=null&&Ke("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=to(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Ke("beforetoggle",n),Ke("toggle",n),q(n,"popover",l);break;case"xlinkActuate":$(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":$(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":$(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":$(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":$(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":$(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":$(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":$(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":$(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":q(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=mc.get(a)||a,q(n,a,l))}}function Rm(n,r,a,l,f,d){switch(a){case"style":_l(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"children":typeof l=="string"?si(n,l):(typeof l=="number"||typeof l=="bigint")&&si(n,""+l);break;case"onScroll":l!=null&&Ke("scroll",n);break;case"onScrollEnd":l!=null&&Ke("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Qi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ls.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),d=n[Kt]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(r,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(r,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):q(n,a,l)}}}function Nn(n,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",n),Ke("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:vt(n,r,d,_,a,null)}}f&&vt(n,r,"srcSet",a.srcSet,a,null),l&&vt(n,r,"src",a.src,a,null);return;case"input":Ke("invalid",n);var w=d=_=f=null,O=null,K=null;for(l in a)if(a.hasOwnProperty(l)){var se=a[l];if(se!=null)switch(l){case"name":f=se;break;case"type":_=se;break;case"checked":O=se;break;case"defaultChecked":K=se;break;case"value":d=se;break;case"defaultValue":w=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(s(137,r));break;default:vt(n,r,l,se,a,null)}}hc(n,d,w,O,K,_,f,!1);return;case"select":Ke("invalid",n),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(w=a[f],w!=null))switch(f){case"value":d=w;break;case"defaultValue":_=w;break;case"multiple":l=w;default:vt(n,r,f,w,a,null)}r=d,a=_,n.multiple=!!l,r!=null?cs(n,!!l,r,!1):a!=null&&cs(n,!!l,a,!0);return;case"textarea":Ke("invalid",n),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(w=a[_],w!=null))switch(_){case"value":l=w;break;case"defaultValue":f=w;break;case"children":d=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:vt(n,r,_,w,a,null)}hs(n,l,f,d);return;case"option":for(O in a)a.hasOwnProperty(O)&&(l=a[O],l!=null)&&(O==="selected"?n.selected=l&&typeof l!="function"&&typeof l!="symbol":vt(n,r,O,l,a,null));return;case"dialog":Ke("beforetoggle",n),Ke("toggle",n),Ke("cancel",n),Ke("close",n);break;case"iframe":case"object":Ke("load",n);break;case"video":case"audio":for(l=0;l<Zl.length;l++)Ke(Zl[l],n);break;case"image":Ke("error",n),Ke("load",n);break;case"details":Ke("toggle",n);break;case"embed":case"source":case"link":Ke("error",n),Ke("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(l=a[K],l!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:vt(n,r,K,l,a,null)}return;default:if(eo(r)){for(se in a)a.hasOwnProperty(se)&&(l=a[se],l!==void 0&&Rm(n,r,se,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&vt(n,r,w,l,a,null))}function FS(n,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,w=null,O=null,K=null,se=null;for(ee in a){var le=a[ee];if(a.hasOwnProperty(ee)&&le!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":O=le;default:l.hasOwnProperty(ee)||vt(n,r,ee,null,l,le)}}for(var Q in l){var ee=l[Q];if(le=a[Q],l.hasOwnProperty(Q)&&(ee!=null||le!=null))switch(Q){case"type":d=ee;break;case"name":f=ee;break;case"checked":K=ee;break;case"defaultChecked":se=ee;break;case"value":_=ee;break;case"defaultValue":w=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,r));break;default:ee!==le&&vt(n,r,Q,ee,l,le)}}Wa(n,_,w,O,K,se,d,f);return;case"select":ee=_=w=Q=null;for(d in a)if(O=a[d],a.hasOwnProperty(d)&&O!=null)switch(d){case"value":break;case"multiple":ee=O;default:l.hasOwnProperty(d)||vt(n,r,d,null,l,O)}for(f in l)if(d=l[f],O=a[f],l.hasOwnProperty(f)&&(d!=null||O!=null))switch(f){case"value":Q=d;break;case"defaultValue":w=d;break;case"multiple":_=d;default:d!==O&&vt(n,r,f,d,l,O)}r=w,a=_,l=ee,Q!=null?cs(n,!!a,Q,!1):!!l!=!!a&&(r!=null?cs(n,!!a,r,!0):cs(n,!!a,a?[]:"",!1));return;case"textarea":ee=Q=null;for(w in a)if(f=a[w],a.hasOwnProperty(w)&&f!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:vt(n,r,w,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":Q=f;break;case"defaultValue":ee=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&vt(n,r,_,f,l,d)}fc(n,Q,ee);return;case"option":for(var Te in a)Q=a[Te],a.hasOwnProperty(Te)&&Q!=null&&!l.hasOwnProperty(Te)&&(Te==="selected"?n.selected=!1:vt(n,r,Te,null,l,Q));for(O in l)Q=l[O],ee=a[O],l.hasOwnProperty(O)&&Q!==ee&&(Q!=null||ee!=null)&&(O==="selected"?n.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":vt(n,r,O,Q,l,ee));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in a)Q=a[Ne],a.hasOwnProperty(Ne)&&Q!=null&&!l.hasOwnProperty(Ne)&&vt(n,r,Ne,null,l,Q);for(K in l)if(Q=l[K],ee=a[K],l.hasOwnProperty(K)&&Q!==ee&&(Q!=null||ee!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:vt(n,r,K,Q,l,ee)}return;default:if(eo(r)){for(var bt in a)Q=a[bt],a.hasOwnProperty(bt)&&Q!==void 0&&!l.hasOwnProperty(bt)&&Rm(n,r,bt,void 0,l,Q);for(se in l)Q=l[se],ee=a[se],!l.hasOwnProperty(se)||Q===ee||Q===void 0&&ee===void 0||Rm(n,r,se,Q,l,ee);return}}for(var U in a)Q=a[U],a.hasOwnProperty(U)&&Q!=null&&!l.hasOwnProperty(U)&&vt(n,r,U,null,l,Q);for(le in l)Q=l[le],ee=a[le],!l.hasOwnProperty(le)||Q===ee||Q==null&&ee==null||vt(n,r,le,Q,l,ee)}function W_(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function GS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,w=f.duration;if(d&&w&&W_(_)){for(_=0,w=f.responseEnd,l+=1;l<a.length;l++){var O=a[l],K=O.startTime;if(K>w)break;var se=O.transferSize,le=O.initiatorType;se&&W_(le)&&(O=O.responseEnd,_+=se*(O<w?1:(w-K)/(O-K)))}if(--l,r+=8*(d+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Cm=null,Nm=null;function gh(n){return n.nodeType===9?n:n.ownerDocument}function ev(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tv(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Im(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Dm=null;function KS(){var n=window.event;return n&&n.type==="popstate"?n===Dm?!1:(Dm=n,!0):(Dm=null,!1)}var nv=typeof setTimeout=="function"?setTimeout:void 0,$S=typeof clearTimeout=="function"?clearTimeout:void 0,iv=typeof Promise=="function"?Promise:void 0,QS=typeof queueMicrotask=="function"?queueMicrotask:typeof iv<"u"?function(n){return iv.resolve(null).then(n).catch(YS)}:nv;function YS(n){setTimeout(function(){throw n})}function ks(n){return n==="head"}function rv(n,r){var a=r,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),Po(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")eu(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,eu(a);for(var d=a.firstChild;d;){var _=d.nextSibling,w=d.nodeName;d[Ai]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&eu(n.ownerDocument.body);a=f}while(a);Po(r)}function sv(n,r){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function Om(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Om(a),os(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function XS(n,r,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Ai])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=Ui(n.nextSibling),n===null)break}return null}function JS(n,r,a){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Ui(n.nextSibling),n===null))return null;return n}function av(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Ui(n.nextSibling),n===null))return null;return n}function Mm(n){return n.data==="$?"||n.data==="$~"}function km(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function ZS(n,r){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Ui(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var Vm=null;function ov(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(r===0)return Ui(n.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}n=n.nextSibling}return null}function lv(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return n;r--}else a!=="/$"&&a!=="/&"||r++}n=n.previousSibling}return null}function uv(n,r,a){switch(r=gh(a),n){case"html":if(n=r.documentElement,!n)throw Error(s(452));return n;case"head":if(n=r.head,!n)throw Error(s(453));return n;case"body":if(n=r.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function eu(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);os(n)}var zi=new Map,cv=new Set;function ph(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Qr=he.d;he.d={f:WS,r:eA,D:tA,C:nA,L:iA,m:rA,X:aA,S:sA,M:oA};function WS(){var n=Qr.f(),r=oh();return n||r}function eA(n){var r=$n(n);r!==null&&r.tag===5&&r.type==="form"?Ry(r):Qr.r(n)}var Mo=typeof document>"u"?null:document;function hv(n,r,a){var l=Mo;if(l&&typeof r=="string"&&r){var f=ri(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),cv.has(f)||(cv.add(f),n={rel:n,crossOrigin:a,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),Nn(r,"link",n),Ut(r),l.head.appendChild(r)))}}function tA(n){Qr.D(n),hv("dns-prefetch",n,null)}function nA(n,r){Qr.C(n,r),hv("preconnect",n,r)}function iA(n,r,a){Qr.L(n,r,a);var l=Mo;if(l&&n&&r){var f='link[rel="preload"][as="'+ri(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+ri(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+ri(a.imageSizes)+'"]')):f+='[href="'+ri(n)+'"]';var d=f;switch(r){case"style":d=ko(n);break;case"script":d=Vo(n)}zi.has(d)||(n=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:n,as:r},a),zi.set(d,n),l.querySelector(f)!==null||r==="style"&&l.querySelector(tu(d))||r==="script"&&l.querySelector(nu(d))||(r=l.createElement("link"),Nn(r,"link",n),Ut(r),l.head.appendChild(r)))}}function rA(n,r){Qr.m(n,r);var a=Mo;if(a&&n){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+ri(l)+'"][href="'+ri(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Vo(n)}if(!zi.has(d)&&(n=E({rel:"modulepreload",href:n},r),zi.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(nu(d)))return}l=a.createElement("link"),Nn(l,"link",n),Ut(l),a.head.appendChild(l)}}}function sA(n,r,a){Qr.S(n,r,a);var l=Mo;if(l&&n){var f=Ri(l).hoistableStyles,d=ko(n);r=r||"default";var _=f.get(d);if(!_){var w={loading:0,preload:null};if(_=l.querySelector(tu(d)))w.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":r},a),(a=zi.get(d))&&Pm(n,a);var O=_=l.createElement("link");Ut(O),Nn(O,"link",n),O._p=new Promise(function(K,se){O.onload=K,O.onerror=se}),O.addEventListener("load",function(){w.loading|=1}),O.addEventListener("error",function(){w.loading|=2}),w.loading|=4,yh(_,r,l)}_={type:"stylesheet",instance:_,count:1,state:w},f.set(d,_)}}}function aA(n,r){Qr.X(n,r);var a=Mo;if(a&&n){var l=Ri(a).hoistableScripts,f=Vo(n),d=l.get(f);d||(d=a.querySelector(nu(f)),d||(n=E({src:n,async:!0},r),(r=zi.get(f))&&Lm(n,r),d=a.createElement("script"),Ut(d),Nn(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function oA(n,r){Qr.M(n,r);var a=Mo;if(a&&n){var l=Ri(a).hoistableScripts,f=Vo(n),d=l.get(f);d||(d=a.querySelector(nu(f)),d||(n=E({src:n,async:!0,type:"module"},r),(r=zi.get(f))&&Lm(n,r),d=a.createElement("script"),Ut(d),Nn(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function fv(n,r,a,l){var f=(f=Ae.current)?ph(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=ko(a.href),a=Ri(f).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=ko(a.href);var d=Ri(f).hoistableStyles,_=d.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,_),(d=f.querySelector(tu(n)))&&!d._p&&(_.instance=d,_.state.loading=5),zi.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},zi.set(n,a),d||lA(f,n,a,_.state))),r&&l===null)throw Error(s(528,""));return _}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Vo(a),a=Ri(f).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function ko(n){return'href="'+ri(n)+'"'}function tu(n){return'link[rel="stylesheet"]['+n+"]"}function dv(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function lA(n,r,a,l){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=n.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Nn(r,"link",a),Ut(r),n.head.appendChild(r))}function Vo(n){return'[src="'+ri(n)+'"]'}function nu(n){return"script[async]"+n}function mv(n,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=n.querySelector('style[data-href~="'+ri(a.href)+'"]');if(l)return r.instance=l,Ut(l),l;var f=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Ut(l),Nn(l,"style",f),yh(l,a.precedence,n),r.instance=l;case"stylesheet":f=ko(a.href);var d=n.querySelector(tu(f));if(d)return r.state.loading|=4,r.instance=d,Ut(d),d;l=dv(a),(f=zi.get(f))&&Pm(l,f),d=(n.ownerDocument||n).createElement("link"),Ut(d);var _=d;return _._p=new Promise(function(w,O){_.onload=w,_.onerror=O}),Nn(d,"link",l),r.state.loading|=4,yh(d,a.precedence,n),r.instance=d;case"script":return d=Vo(a.src),(f=n.querySelector(nu(d)))?(r.instance=f,Ut(f),f):(l=a,(f=zi.get(d))&&(l=E({},a),Lm(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ut(f),Nn(f,"link",l),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,yh(l,a.precedence,n));return r.instance}function yh(n,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var w=l[_];if(w.dataset.precedence===r)d=w;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(n,r.firstChild))}function Pm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Lm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var _h=null;function gv(n,r,a){if(_h===null){var l=new Map,f=_h=new Map;f.set(a,l)}else f=_h,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[Ai]||d[Pt]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(r)||"";_=n+_;var w=l.get(_);w?w.push(d):l.set(_,[d])}}return l}function pv(n,r,a){n=n.ownerDocument||n,n.head.insertBefore(a,r==="title"?n.querySelector("head > title"):null)}function uA(n,r,a){if(a===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(n=r.disabled,typeof r.precedence=="string"&&n==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function yv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function cA(n,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=ko(l.href),d=r.querySelector(tu(f));if(d){r=d._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=vh.bind(n),r.then(n,n)),a.state.loading|=4,a.instance=d,Ut(d);return}d=r.ownerDocument||r,l=dv(l),(f=zi.get(f))&&Pm(l,f),d=d.createElement("link"),Ut(d);var _=d;_._p=new Promise(function(w,O){_.onload=w,_.onerror=O}),Nn(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=vh.bind(n),r.addEventListener("load",a),r.addEventListener("error",a))}}var jm=0;function hA(n,r){return n.stylesheets&&n.count===0&&Eh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&Eh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+r);0<n.imgBytes&&jm===0&&(jm=62500*GS());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Eh(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>jm?50:800)+r);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function vh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Eh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var bh=null;function Eh(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,bh=new Map,r.forEach(fA,n),bh=null,vh.call(n))}function fA(n,r){if(!(r.state.loading&4)){var a=bh.get(n);if(a)var l=a.get(null);else{a=new Map,bh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=r.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=vh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var iu={$$typeof:Z,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function dA(n,r,a,l,f,d,_,w,O){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vt(0),this.hiddenUpdates=Vt(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function _v(n,r,a,l,f,d,_,w,O,K,se,le){return n=new dA(n,r,a,_,O,K,se,le,w),r=1,d===!0&&(r|=24),d=mi(3,null,null,r),n.current=d,d.stateNode=n,r=yd(),r.refCount++,n.pooledCache=r,r.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:r},Ed(d),n}function vv(n){return n?(n=ho,n):ho}function bv(n,r,a,l,f,d){f=vv(f),l.context===null?l.context=f:l.pendingContext=f,l=ws(r),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Ss(n,l,r),a!==null&&(ci(a,n,r),Vl(a,n,r))}function Ev(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Um(n,r){Ev(n,r),(n=n.alternate)&&Ev(n,r)}function Tv(n){if(n.tag===13||n.tag===31){var r=Ra(n,67108864);r!==null&&ci(r,n,67108864),Um(n,67108864)}}function wv(n){if(n.tag===13||n.tag===31){var r=vi();r=cn(r);var a=Ra(n,r);a!==null&&ci(a,n,r),Um(n,r)}}var Th=!0;function mA(n,r,a,l){var f=te.T;te.T=null;var d=he.p;try{he.p=2,zm(n,r,a,l)}finally{he.p=d,te.T=f}}function gA(n,r,a,l){var f=te.T;te.T=null;var d=he.p;try{he.p=8,zm(n,r,a,l)}finally{he.p=d,te.T=f}}function zm(n,r,a,l){if(Th){var f=Bm(l);if(f===null)xm(n,r,l,wh,a),Av(n,l);else if(yA(f,n,r,a,l))l.stopPropagation();else if(Av(n,l),r&4&&-1<pA.indexOf(n)){for(;f!==null;){var d=$n(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=xt(d.pendingLanes);if(_!==0){var w=d;for(w.pendingLanes|=2,w.entangledLanes|=2;_;){var O=1<<31-At(_);w.entanglements[1]|=O,_&=~O}vr(d),(lt&6)===0&&(sh=Zt()+500,Jl(0))}}break;case 31:case 13:w=Ra(d,2),w!==null&&ci(w,d,2),oh(),Um(d,2)}if(d=Bm(l),d===null&&xm(n,r,l,wh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else xm(n,r,l,null,a)}}function Bm(n){return n=Ii(n),qm(n)}var wh=null;function qm(n){if(wh=null,n=xi(n),n!==null){var r=u(n);if(r===null)n=null;else{var a=r.tag;if(a===13){if(n=c(r),n!==null)return n;n=null}else if(a===31){if(n=m(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return wh=n,null}function Sv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fi()){case Rr:return 2;case Fn:return 8;case Sn:case Gi:return 32;case Cr:return 268435456;default:return 32}default:return 32}}var Hm=!1,Vs=null,Ps=null,Ls=null,ru=new Map,su=new Map,js=[],pA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Av(n,r){switch(n){case"focusin":case"focusout":Vs=null;break;case"dragenter":case"dragleave":Ps=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":ru.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":su.delete(r.pointerId)}}function au(n,r,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},r!==null&&(r=$n(r),r!==null&&Tv(r)),n):(n.eventSystemFlags|=l,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function yA(n,r,a,l,f){switch(r){case"focusin":return Vs=au(Vs,n,r,a,l,f),!0;case"dragenter":return Ps=au(Ps,n,r,a,l,f),!0;case"mouseover":return Ls=au(Ls,n,r,a,l,f),!0;case"pointerover":var d=f.pointerId;return ru.set(d,au(ru.get(d)||null,n,r,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,su.set(d,au(su.get(d)||null,n,r,a,l,f)),!0}return!1}function xv(n){var r=xi(n.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=c(a),r!==null){n.blockedOn=r,hn(n.priority,function(){wv(a)});return}}else if(r===31){if(r=m(a),r!==null){n.blockedOn=r,hn(n.priority,function(){wv(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Sh(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=Bm(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);vl=l,a.target.dispatchEvent(l),vl=null}else return r=$n(a),r!==null&&Tv(r),n.blockedOn=a,!1;r.shift()}return!0}function Rv(n,r,a){Sh(n)&&a.delete(r)}function _A(){Hm=!1,Vs!==null&&Sh(Vs)&&(Vs=null),Ps!==null&&Sh(Ps)&&(Ps=null),Ls!==null&&Sh(Ls)&&(Ls=null),ru.forEach(Rv),su.forEach(Rv)}function Ah(n,r){n.blockedOn===r&&(n.blockedOn=null,Hm||(Hm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,_A)))}var xh=null;function Cv(n){xh!==n&&(xh=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){xh===n&&(xh=null);for(var r=0;r<n.length;r+=3){var a=n[r],l=n[r+1],f=n[r+2];if(typeof l!="function"){if(qm(l||a)===null)continue;break}var d=$n(a);d!==null&&(n.splice(r,3),r-=3,Bd(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Po(n){function r(O){return Ah(O,n)}Vs!==null&&Ah(Vs,n),Ps!==null&&Ah(Ps,n),Ls!==null&&Ah(Ls,n),ru.forEach(r),su.forEach(r);for(var a=0;a<js.length;a++){var l=js[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<js.length&&(a=js[0],a.blockedOn===null);)xv(a),a.blockedOn===null&&js.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[Kt]||null;if(typeof d=="function")_||Cv(a);else if(_){var w=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[Kt]||null)w=_.formAction;else if(qm(f)!==null)continue}else w=_.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),Cv(a)}}}function Nv(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function Fm(n){this._internalRoot=n}Rh.prototype.render=Fm.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=vi();bv(a,l,n,r,null,null)},Rh.prototype.unmount=Fm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;bv(n.current,2,null,n,null,null),oh(),r[Ee]=null}};function Rh(n){this._internalRoot=n}Rh.prototype.unstable_scheduleHydration=function(n){if(n){var r=Ot();n={blockedOn:null,target:n,priority:r};for(var a=0;a<js.length&&r!==0&&r<js[a].priority;a++);js.splice(a,0,n),a===0&&xv(n)}};var Iv=e.version;if(Iv!=="19.2.3")throw Error(s(527,Iv,"19.2.3"));he.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(r),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var vA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ch.isDisabled&&Ch.supportsFiber)try{Kn=Ch.inject(vA),Ft=Ch}catch{}}return lu.createRoot=function(n,r){if(!o(n))throw Error(s(299));var a=!1,l="",f=Ly,d=jy,_=Uy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=_v(n,1,!1,null,null,a,l,null,f,d,_,Nv),n[Ee]=r.current,Am(n),new Fm(r)},lu.hydrateRoot=function(n,r,a){if(!o(n))throw Error(s(299));var l=!1,f="",d=Ly,_=jy,w=Uy,O=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),r=_v(n,1,!0,r,a??null,l,f,O,d,_,w,Nv),r.context=vv(null),a=r.current,l=vi(),l=cn(l),f=ws(l),f.callback=null,Ss(a,f,l),a=l,r.current.lanes=a,Y(r,a),vr(r),n[Ee]=r.current,Am(n),new Rh(r)},lu.version="19.2.3",lu}var zv;function NA(){if(zv)return $m.exports;zv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),$m.exports=CA(),$m.exports}var IA=NA();const DA=()=>T.jsxs("div",{className:"fixed inset-0 -z-50 overflow-hidden pointer-events-none bg-[#020617]",children:[T.jsx("div",{className:"bg-blob opacity-20 w-[800px] h-[800px] -top-96 -left-96 bg-indigo-600 blur-[120px]"}),T.jsx("div",{className:"bg-blob opacity-30 w-[600px] h-[600px] top-1/2 -right-48 bg-pink-600 blur-[100px]",style:{animationDelay:"-5s",animationDuration:"25s"}}),T.jsx("div",{className:"bg-blob opacity-10 w-[500px] h-[500px] bottom-0 left-1/4 bg-cyan-400 blur-[80px]",style:{animationDelay:"-12s",animationDuration:"18s"}}),T.jsx("div",{className:"absolute inset-0 bg-radial-at-t from-transparent via-slate-950/40 to-slate-950"}),T.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"})]});const OA=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MA=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Bv=i=>{const e=MA(i);return e.charAt(0).toUpperCase()+e.slice(1)},qE=(...i)=>i.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),kA=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var VA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const PA=H.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:c,...m},g)=>H.createElement("svg",{ref:g,...VA,width:e,height:e,stroke:i,strokeWidth:s?Number(t)*24/Number(e):t,className:qE("lucide",o),...!u&&!kA(m)&&{"aria-hidden":"true"},...m},[...c.map(([p,v])=>H.createElement(p,v)),...Array.isArray(u)?u:[u]]));const ei=(i,e)=>{const t=H.forwardRef(({className:s,...o},u)=>H.createElement(PA,{ref:u,iconNode:e,className:qE(`lucide-${OA(Bv(i))}`,`lucide-${i}`,s),...o}));return t.displayName=Bv(i),t};const LA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],yu=ei("arrow-left",LA);const jA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],UA=ei("circle-x",jA);const zA=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],HE=ei("copy",zA);const BA=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],FE=ei("flag",BA);const qA=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],HA=ei("house",qA);const FA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],GE=ei("loader-circle",FA);const GA=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],KA=ei("log-in",GA);const $A=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],QA=ei("log-out",$A);const YA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],XA=ei("plus",YA);const JA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],np=ei("rotate-ccw",JA);const ZA=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],KE=ei("share-2",ZA);const WA=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Eg=ei("trophy",WA);const ex=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Jm=ei("user",ex);const tx=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ip=ei("users",tx);const nx=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],$E=ei("zap",nx),ix=()=>{};var qv={};const QE=function(i){const e=[];let t=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},rx=function(i){const e=[];let t=0,s=0;for(;t<i.length;){const o=i[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[t++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[t++],c=i[t++],m=i[t++],g=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=i[t++],c=i[t++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return e.join("")},YE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],c=o+1<i.length,m=c?i[o+1]:0,g=o+2<i.length,p=g?i[o+2]:0,v=u>>2,E=(u&3)<<4|m>>4;let S=(m&15)<<2|p>>6,N=p&63;g||(N=64,c||(S=64)),s.push(t[v],t[E],t[S],t[N])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(QE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):rx(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=t[i.charAt(o++)],m=o<i.length?t[i.charAt(o)]:0;++o;const p=o<i.length?t[i.charAt(o)]:64;++o;const E=o<i.length?t[i.charAt(o)]:64;if(++o,u==null||m==null||p==null||E==null)throw new sx;const S=u<<2|m>>4;if(s.push(S),p!==64){const N=m<<4&240|p>>2;if(s.push(N),E!==64){const k=p<<6&192|E;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class sx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ax=function(i){const e=QE(i);return YE.encodeByteArray(e,!0)},Zh=function(i){return ax(i).replace(/\./g,"")},XE=function(i){try{return YE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ox(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const lx=()=>ox().__FIREBASE_DEFAULTS__,ux=()=>{if(typeof process>"u"||typeof qv>"u")return;const i=qv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},cx=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&XE(i[1]);return e&&JSON.parse(e)},xf=()=>{try{return ix()||lx()||ux()||cx()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},JE=i=>xf()?.emulatorHosts?.[i],hx=i=>{const e=JE(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},ZE=()=>xf()?.config,WE=i=>xf()?.[`_${i}`];class fx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function al(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function e1(i){return(await fetch(i,{credentials:"include"})).ok}function dx(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Zh(JSON.stringify(t)),Zh(JSON.stringify(c)),""].join(".")}const _u={};function mx(){const i={prod:[],emulator:[]};for(const e of Object.keys(_u))_u[e]?i.emulator.push(e):i.prod.push(e);return i}function gx(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let Hv=!1;function t1(i,e){if(typeof window>"u"||typeof document>"u"||!al(window.location.host)||_u[i]===e||_u[i]||Hv)return;_u[i]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",u=mx().prod.length>0;function c(){const S=document.getElementById(s);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,N){S.setAttribute("width","24"),S.setAttribute("id",N),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Hv=!0,c()},S}function v(S,N){S.setAttribute("id",N),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=gx(s),N=t("text"),k=document.getElementById(N)||document.createElement("span"),z=t("learnmore"),D=document.getElementById(z)||document.createElement("a"),B=t("preprendIcon"),ne=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Z=S.element;m(Z),v(D,z);const ce=p();g(ne,B),Z.append(ne,k,D,ce),document.body.appendChild(Z)}u?(k.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function px(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qn())}function yx(){const i=xf()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _x(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vx(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function bx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ex(){const i=qn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Tx(){return!yx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wx(){try{return typeof indexedDB=="object"}catch{return!1}}function Sx(){return new Promise((i,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const Ax="FirebaseError";class rs extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=Ax,Object.setPrototypeOf(this,rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ku.prototype.create)}}class Ku{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],c=u?xx(u,s):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new rs(o,m,s)}}function xx(i,e){return i.replace(Rx,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Rx=/\{\$([^}]+)}/g;function Cx(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Fa(i,e){if(i===e)return!0;const t=Object.keys(i),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const u=i[o],c=e[o];if(Fv(u)&&Fv(c)){if(!Fa(u,c))return!1}else if(u!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Fv(i){return i!==null&&typeof i=="object"}function $u(i){const e=[];for(const[t,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Nx(i,e){const t=new Ix(i,e);return t.subscribe.bind(t)}class Ix{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");Dx(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Zm),o.error===void 0&&(o.error=Zm),o.complete===void 0&&(o.complete=Zm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Dx(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function Zm(){}function wn(i){return i&&i._delegate?i._delegate:i}class Ga{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ba="[DEFAULT]";class Ox{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new fx;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kx(e))try{this.getOrInitializeService({instanceIdentifier:Ba})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Ba){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ba){return this.instances.has(e)}getOptions(e=Ba){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Mx(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ba){return this.component?this.component.multipleInstances?e:Ba:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Mx(i){return i===Ba?void 0:i}function kx(i){return i.instantiationMode==="EAGER"}class Vx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ox(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Xe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Xe||(Xe={}));const Px={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},Lx=Xe.INFO,jx={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},Ux=(i,e,...t)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=jx[e];if(o)console[o](`[${s}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rp{constructor(e){this.name=e,this._logLevel=Lx,this._logHandler=Ux,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Px[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const zx=(i,e)=>e.some(t=>i instanceof t);let Gv,Kv;function Bx(){return Gv||(Gv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qx(){return Kv||(Kv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const n1=new WeakMap,Tg=new WeakMap,i1=new WeakMap,Wm=new WeakMap,sp=new WeakMap;function Hx(i){const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",c)},u=()=>{t(Xs(i.result)),o()},c=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&n1.set(t,i)}).catch(()=>{}),sp.set(e,i),e}function Fx(i){if(Tg.has(i))return;const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",c),i.removeEventListener("abort",c)},u=()=>{t(),o()},c=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",c),i.addEventListener("abort",c)});Tg.set(i,e)}let wg={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Tg.get(i);if(e==="objectStoreNames")return i.objectStoreNames||i1.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xs(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Gx(i){wg=i(wg)}function Kx(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=i.call(eg(this),e,...t);return i1.set(s,e.sort?e.sort():[e]),Xs(s)}:qx().includes(i)?function(...e){return i.apply(eg(this),e),Xs(n1.get(this))}:function(...e){return Xs(i.apply(eg(this),e))}}function $x(i){return typeof i=="function"?Kx(i):(i instanceof IDBTransaction&&Fx(i),zx(i,Bx())?new Proxy(i,wg):i)}function Xs(i){if(i instanceof IDBRequest)return Hx(i);if(Wm.has(i))return Wm.get(i);const e=$x(i);return e!==i&&(Wm.set(i,e),sp.set(e,i)),e}const eg=i=>sp.get(i);function Qx(i,e,{blocked:t,upgrade:s,blocking:o,terminated:u}={}){const c=indexedDB.open(i,e),m=Xs(c);return s&&c.addEventListener("upgradeneeded",g=>{s(Xs(c.result),g.oldVersion,g.newVersion,Xs(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const Yx=["get","getKey","getAll","getAllKeys","count"],Xx=["put","add","delete","clear"],tg=new Map;function $v(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(tg.get(e))return tg.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=Xx.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Yx.includes(t)))return;const u=async function(c,...m){const g=this.transaction(c,o?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),o&&g.done]))[0]};return tg.set(e,u),u}Gx(i=>({...i,get:(e,t,s)=>$v(e,t)||i.get(e,t,s),has:(e,t)=>!!$v(e,t)||i.has(e,t)}));class Jx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Zx(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function Zx(i){return i.getComponent()?.type==="VERSION"}const Sg="@firebase/app",Qv="0.14.6";const Zr=new rp("@firebase/app"),Wx="@firebase/app-compat",e2="@firebase/analytics-compat",t2="@firebase/analytics",n2="@firebase/app-check-compat",i2="@firebase/app-check",r2="@firebase/auth",s2="@firebase/auth-compat",a2="@firebase/database",o2="@firebase/data-connect",l2="@firebase/database-compat",u2="@firebase/functions",c2="@firebase/functions-compat",h2="@firebase/installations",f2="@firebase/installations-compat",d2="@firebase/messaging",m2="@firebase/messaging-compat",g2="@firebase/performance",p2="@firebase/performance-compat",y2="@firebase/remote-config",_2="@firebase/remote-config-compat",v2="@firebase/storage",b2="@firebase/storage-compat",E2="@firebase/firestore",T2="@firebase/ai",w2="@firebase/firestore-compat",S2="firebase",A2="12.6.0";const Ag="[DEFAULT]",x2={[Sg]:"fire-core",[Wx]:"fire-core-compat",[t2]:"fire-analytics",[e2]:"fire-analytics-compat",[i2]:"fire-app-check",[n2]:"fire-app-check-compat",[r2]:"fire-auth",[s2]:"fire-auth-compat",[a2]:"fire-rtdb",[o2]:"fire-data-connect",[l2]:"fire-rtdb-compat",[u2]:"fire-fn",[c2]:"fire-fn-compat",[h2]:"fire-iid",[f2]:"fire-iid-compat",[d2]:"fire-fcm",[m2]:"fire-fcm-compat",[g2]:"fire-perf",[p2]:"fire-perf-compat",[y2]:"fire-rc",[_2]:"fire-rc-compat",[v2]:"fire-gcs",[b2]:"fire-gcs-compat",[E2]:"fire-fst",[w2]:"fire-fst-compat",[T2]:"fire-vertex","fire-js":"fire-js",[S2]:"fire-js-all"};const Ou=new Map,R2=new Map,xg=new Map;function Yv(i,e){try{i.container.addComponent(e)}catch(t){Zr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Xo(i){const e=i.name;if(xg.has(e))return Zr.debug(`There were multiple attempts to register component ${e}.`),!1;xg.set(e,i);for(const t of Ou.values())Yv(t,i);for(const t of R2.values())Yv(t,i);return!0}function ap(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function nr(i){return i==null?!1:i.settings!==void 0}const C2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Js=new Ku("app","Firebase",C2);class N2{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ga("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Js.create("app-deleted",{appName:this._name})}}const ol=A2;function r1(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const s={name:Ag,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Js.create("bad-app-name",{appName:String(o)});if(t||(t=ZE()),!t)throw Js.create("no-options");const u=Ou.get(o);if(u){if(Fa(t,u.options)&&Fa(s,u.config))return u;throw Js.create("duplicate-app",{appName:o})}const c=new Vx(o);for(const g of xg.values())c.addComponent(g);const m=new N2(t,s,c);return Ou.set(o,m),m}function s1(i=Ag){const e=Ou.get(i);if(!e&&i===Ag&&ZE())return r1();if(!e)throw Js.create("no-app",{appName:i});return e}function Xv(){return Array.from(Ou.values())}function Zs(i,e,t){let s=x2[i]??i;t&&(s+=`-${t}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zr.warn(c.join(" "));return}Xo(new Ga(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const I2="firebase-heartbeat-database",D2=1,Mu="firebase-heartbeat-store";let ng=null;function a1(){return ng||(ng=Qx(I2,D2,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Mu)}catch(t){console.warn(t)}}}}).catch(i=>{throw Js.create("idb-open",{originalErrorMessage:i.message})})),ng}async function O2(i){try{const t=(await a1()).transaction(Mu),s=await t.objectStore(Mu).get(o1(i));return await t.done,s}catch(e){if(e instanceof rs)Zr.warn(e.message);else{const t=Js.create("idb-get",{originalErrorMessage:e?.message});Zr.warn(t.message)}}}async function Jv(i,e){try{const s=(await a1()).transaction(Mu,"readwrite");await s.objectStore(Mu).put(e,o1(i)),await s.done}catch(t){if(t instanceof rs)Zr.warn(t.message);else{const s=Js.create("idb-set",{originalErrorMessage:t?.message});Zr.warn(s.message)}}}function o1(i){return`${i.name}!${i.options.appId}`}const M2=1024,k2=30;class V2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new L2(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Zv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>k2){const o=j2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Zr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Zv(),{heartbeatsToSend:t,unsentEntries:s}=P2(this._heartbeatsCache.heartbeats),o=Zh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Zr.warn(e),""}}}function Zv(){return new Date().toISOString().substring(0,10)}function P2(i,e=M2){const t=[];let s=i.slice();for(const o of i){const u=t.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),Wv(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Wv(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class L2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wx()?Sx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await O2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Jv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Jv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Wv(i){return Zh(JSON.stringify({version:2,heartbeats:i})).length}function j2(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let s=1;s<i.length;s++)i[s].date<t&&(t=i[s].date,e=s);return e}function U2(i){Xo(new Ga("platform-logger",e=>new Jx(e),"PRIVATE")),Xo(new Ga("heartbeat",e=>new V2(e),"PRIVATE")),Zs(Sg,Qv,i),Zs(Sg,Qv,"esm2020"),Zs("fire-js","")}U2("");var eb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ws,l1;(function(){var i;function e(x,R){function C(){}C.prototype=R.prototype,x.F=R.prototype,x.prototype=new C,x.prototype.constructor=x,x.D=function(V,M,j){for(var I=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)I[qe-2]=arguments[qe];return R.prototype[M].apply(V,I)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,R,C){C||(C=0);const V=Array(16);if(typeof R=="string")for(var M=0;M<16;++M)V[M]=R.charCodeAt(C++)|R.charCodeAt(C++)<<8|R.charCodeAt(C++)<<16|R.charCodeAt(C++)<<24;else for(M=0;M<16;++M)V[M]=R[C++]|R[C++]<<8|R[C++]<<16|R[C++]<<24;R=x.g[0],C=x.g[1],M=x.g[2];let j=x.g[3],I;I=R+(j^C&(M^j))+V[0]+3614090360&4294967295,R=C+(I<<7&4294967295|I>>>25),I=j+(M^R&(C^M))+V[1]+3905402710&4294967295,j=R+(I<<12&4294967295|I>>>20),I=M+(C^j&(R^C))+V[2]+606105819&4294967295,M=j+(I<<17&4294967295|I>>>15),I=C+(R^M&(j^R))+V[3]+3250441966&4294967295,C=M+(I<<22&4294967295|I>>>10),I=R+(j^C&(M^j))+V[4]+4118548399&4294967295,R=C+(I<<7&4294967295|I>>>25),I=j+(M^R&(C^M))+V[5]+1200080426&4294967295,j=R+(I<<12&4294967295|I>>>20),I=M+(C^j&(R^C))+V[6]+2821735955&4294967295,M=j+(I<<17&4294967295|I>>>15),I=C+(R^M&(j^R))+V[7]+4249261313&4294967295,C=M+(I<<22&4294967295|I>>>10),I=R+(j^C&(M^j))+V[8]+1770035416&4294967295,R=C+(I<<7&4294967295|I>>>25),I=j+(M^R&(C^M))+V[9]+2336552879&4294967295,j=R+(I<<12&4294967295|I>>>20),I=M+(C^j&(R^C))+V[10]+4294925233&4294967295,M=j+(I<<17&4294967295|I>>>15),I=C+(R^M&(j^R))+V[11]+2304563134&4294967295,C=M+(I<<22&4294967295|I>>>10),I=R+(j^C&(M^j))+V[12]+1804603682&4294967295,R=C+(I<<7&4294967295|I>>>25),I=j+(M^R&(C^M))+V[13]+4254626195&4294967295,j=R+(I<<12&4294967295|I>>>20),I=M+(C^j&(R^C))+V[14]+2792965006&4294967295,M=j+(I<<17&4294967295|I>>>15),I=C+(R^M&(j^R))+V[15]+1236535329&4294967295,C=M+(I<<22&4294967295|I>>>10),I=R+(M^j&(C^M))+V[1]+4129170786&4294967295,R=C+(I<<5&4294967295|I>>>27),I=j+(C^M&(R^C))+V[6]+3225465664&4294967295,j=R+(I<<9&4294967295|I>>>23),I=M+(R^C&(j^R))+V[11]+643717713&4294967295,M=j+(I<<14&4294967295|I>>>18),I=C+(j^R&(M^j))+V[0]+3921069994&4294967295,C=M+(I<<20&4294967295|I>>>12),I=R+(M^j&(C^M))+V[5]+3593408605&4294967295,R=C+(I<<5&4294967295|I>>>27),I=j+(C^M&(R^C))+V[10]+38016083&4294967295,j=R+(I<<9&4294967295|I>>>23),I=M+(R^C&(j^R))+V[15]+3634488961&4294967295,M=j+(I<<14&4294967295|I>>>18),I=C+(j^R&(M^j))+V[4]+3889429448&4294967295,C=M+(I<<20&4294967295|I>>>12),I=R+(M^j&(C^M))+V[9]+568446438&4294967295,R=C+(I<<5&4294967295|I>>>27),I=j+(C^M&(R^C))+V[14]+3275163606&4294967295,j=R+(I<<9&4294967295|I>>>23),I=M+(R^C&(j^R))+V[3]+4107603335&4294967295,M=j+(I<<14&4294967295|I>>>18),I=C+(j^R&(M^j))+V[8]+1163531501&4294967295,C=M+(I<<20&4294967295|I>>>12),I=R+(M^j&(C^M))+V[13]+2850285829&4294967295,R=C+(I<<5&4294967295|I>>>27),I=j+(C^M&(R^C))+V[2]+4243563512&4294967295,j=R+(I<<9&4294967295|I>>>23),I=M+(R^C&(j^R))+V[7]+1735328473&4294967295,M=j+(I<<14&4294967295|I>>>18),I=C+(j^R&(M^j))+V[12]+2368359562&4294967295,C=M+(I<<20&4294967295|I>>>12),I=R+(C^M^j)+V[5]+4294588738&4294967295,R=C+(I<<4&4294967295|I>>>28),I=j+(R^C^M)+V[8]+2272392833&4294967295,j=R+(I<<11&4294967295|I>>>21),I=M+(j^R^C)+V[11]+1839030562&4294967295,M=j+(I<<16&4294967295|I>>>16),I=C+(M^j^R)+V[14]+4259657740&4294967295,C=M+(I<<23&4294967295|I>>>9),I=R+(C^M^j)+V[1]+2763975236&4294967295,R=C+(I<<4&4294967295|I>>>28),I=j+(R^C^M)+V[4]+1272893353&4294967295,j=R+(I<<11&4294967295|I>>>21),I=M+(j^R^C)+V[7]+4139469664&4294967295,M=j+(I<<16&4294967295|I>>>16),I=C+(M^j^R)+V[10]+3200236656&4294967295,C=M+(I<<23&4294967295|I>>>9),I=R+(C^M^j)+V[13]+681279174&4294967295,R=C+(I<<4&4294967295|I>>>28),I=j+(R^C^M)+V[0]+3936430074&4294967295,j=R+(I<<11&4294967295|I>>>21),I=M+(j^R^C)+V[3]+3572445317&4294967295,M=j+(I<<16&4294967295|I>>>16),I=C+(M^j^R)+V[6]+76029189&4294967295,C=M+(I<<23&4294967295|I>>>9),I=R+(C^M^j)+V[9]+3654602809&4294967295,R=C+(I<<4&4294967295|I>>>28),I=j+(R^C^M)+V[12]+3873151461&4294967295,j=R+(I<<11&4294967295|I>>>21),I=M+(j^R^C)+V[15]+530742520&4294967295,M=j+(I<<16&4294967295|I>>>16),I=C+(M^j^R)+V[2]+3299628645&4294967295,C=M+(I<<23&4294967295|I>>>9),I=R+(M^(C|~j))+V[0]+4096336452&4294967295,R=C+(I<<6&4294967295|I>>>26),I=j+(C^(R|~M))+V[7]+1126891415&4294967295,j=R+(I<<10&4294967295|I>>>22),I=M+(R^(j|~C))+V[14]+2878612391&4294967295,M=j+(I<<15&4294967295|I>>>17),I=C+(j^(M|~R))+V[5]+4237533241&4294967295,C=M+(I<<21&4294967295|I>>>11),I=R+(M^(C|~j))+V[12]+1700485571&4294967295,R=C+(I<<6&4294967295|I>>>26),I=j+(C^(R|~M))+V[3]+2399980690&4294967295,j=R+(I<<10&4294967295|I>>>22),I=M+(R^(j|~C))+V[10]+4293915773&4294967295,M=j+(I<<15&4294967295|I>>>17),I=C+(j^(M|~R))+V[1]+2240044497&4294967295,C=M+(I<<21&4294967295|I>>>11),I=R+(M^(C|~j))+V[8]+1873313359&4294967295,R=C+(I<<6&4294967295|I>>>26),I=j+(C^(R|~M))+V[15]+4264355552&4294967295,j=R+(I<<10&4294967295|I>>>22),I=M+(R^(j|~C))+V[6]+2734768916&4294967295,M=j+(I<<15&4294967295|I>>>17),I=C+(j^(M|~R))+V[13]+1309151649&4294967295,C=M+(I<<21&4294967295|I>>>11),I=R+(M^(C|~j))+V[4]+4149444226&4294967295,R=C+(I<<6&4294967295|I>>>26),I=j+(C^(R|~M))+V[11]+3174756917&4294967295,j=R+(I<<10&4294967295|I>>>22),I=M+(R^(j|~C))+V[2]+718787259&4294967295,M=j+(I<<15&4294967295|I>>>17),I=C+(j^(M|~R))+V[9]+3951481745&4294967295,x.g[0]=x.g[0]+R&4294967295,x.g[1]=x.g[1]+(M+(I<<21&4294967295|I>>>11))&4294967295,x.g[2]=x.g[2]+M&4294967295,x.g[3]=x.g[3]+j&4294967295}s.prototype.v=function(x,R){R===void 0&&(R=x.length);const C=R-this.blockSize,V=this.C;let M=this.h,j=0;for(;j<R;){if(M==0)for(;j<=C;)o(this,x,j),j+=this.blockSize;if(typeof x=="string"){for(;j<R;)if(V[M++]=x.charCodeAt(j++),M==this.blockSize){o(this,V),M=0;break}}else for(;j<R;)if(V[M++]=x[j++],M==this.blockSize){o(this,V),M=0;break}}this.h=M,this.o+=R},s.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var R=1;R<x.length-8;++R)x[R]=0;R=this.o*8;for(var C=x.length-8;C<x.length;++C)x[C]=R&255,R/=256;for(this.v(x),x=Array(16),R=0,C=0;C<4;++C)for(let V=0;V<32;V+=8)x[R++]=this.g[C]>>>V&255;return x};function u(x,R){var C=m;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=R(x)}function c(x,R){this.h=R;const C=[];let V=!0;for(let M=x.length-1;M>=0;M--){const j=x[M]|0;V&&j==R||(C[M]=j,V=!1)}this.g=C}var m={};function g(x){return-128<=x&&x<128?u(x,function(R){return new c([R|0],R<0?-1:0)}):new c([x|0],x<0?-1:0)}function p(x){if(isNaN(x)||!isFinite(x))return E;if(x<0)return D(p(-x));const R=[];let C=1;for(let V=0;x>=C;V++)R[V]=x/C|0,C*=4294967296;return new c(R,0)}function v(x,R){if(x.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(x.charAt(0)=="-")return D(v(x.substring(1),R));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=p(Math.pow(R,8));let V=E;for(let j=0;j<x.length;j+=8){var M=Math.min(8,x.length-j);const I=parseInt(x.substring(j,j+M),R);M<8?(M=p(Math.pow(R,M)),V=V.j(M).add(p(I))):(V=V.j(C),V=V.add(p(I)))}return V}var E=g(0),S=g(1),N=g(16777216);i=c.prototype,i.m=function(){if(z(this))return-D(this).m();let x=0,R=1;for(let C=0;C<this.g.length;C++){const V=this.i(C);x+=(V>=0?V:4294967296+V)*R,R*=4294967296}return x},i.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(k(this))return"0";if(z(this))return"-"+D(this).toString(x);const R=p(Math.pow(x,6));var C=this;let V="";for(;;){const M=ce(C,R).g;C=B(C,M.j(R));let j=((C.g.length>0?C.g[0]:C.h)>>>0).toString(x);if(C=M,k(C))return j+V;for(;j.length<6;)j="0"+j;V=j+V}},i.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function k(x){if(x.h!=0)return!1;for(let R=0;R<x.g.length;R++)if(x.g[R]!=0)return!1;return!0}function z(x){return x.h==-1}i.l=function(x){return x=B(this,x),z(x)?-1:k(x)?0:1};function D(x){const R=x.g.length,C=[];for(let V=0;V<R;V++)C[V]=~x.g[V];return new c(C,~x.h).add(S)}i.abs=function(){return z(this)?D(this):this},i.add=function(x){const R=Math.max(this.g.length,x.g.length),C=[];let V=0;for(let M=0;M<=R;M++){let j=V+(this.i(M)&65535)+(x.i(M)&65535),I=(j>>>16)+(this.i(M)>>>16)+(x.i(M)>>>16);V=I>>>16,j&=65535,I&=65535,C[M]=I<<16|j}return new c(C,C[C.length-1]&-2147483648?-1:0)};function B(x,R){return x.add(D(R))}i.j=function(x){if(k(this)||k(x))return E;if(z(this))return z(x)?D(this).j(D(x)):D(D(this).j(x));if(z(x))return D(this.j(D(x)));if(this.l(N)<0&&x.l(N)<0)return p(this.m()*x.m());const R=this.g.length+x.g.length,C=[];for(var V=0;V<2*R;V++)C[V]=0;for(V=0;V<this.g.length;V++)for(let M=0;M<x.g.length;M++){const j=this.i(V)>>>16,I=this.i(V)&65535,qe=x.i(M)>>>16,dt=x.i(M)&65535;C[2*V+2*M]+=I*dt,ne(C,2*V+2*M),C[2*V+2*M+1]+=j*dt,ne(C,2*V+2*M+1),C[2*V+2*M+1]+=I*qe,ne(C,2*V+2*M+1),C[2*V+2*M+2]+=j*qe,ne(C,2*V+2*M+2)}for(x=0;x<R;x++)C[x]=C[2*x+1]<<16|C[2*x];for(x=R;x<2*R;x++)C[x]=0;return new c(C,0)};function ne(x,R){for(;(x[R]&65535)!=x[R];)x[R+1]+=x[R]>>>16,x[R]&=65535,R++}function Z(x,R){this.g=x,this.h=R}function ce(x,R){if(k(R))throw Error("division by zero");if(k(x))return new Z(E,E);if(z(x))return R=ce(D(x),R),new Z(D(R.g),D(R.h));if(z(R))return R=ce(x,D(R)),new Z(D(R.g),R.h);if(x.g.length>30){if(z(x)||z(R))throw Error("slowDivide_ only works with positive integers.");for(var C=S,V=R;V.l(x)<=0;)C=ie(C),V=ie(V);var M=W(C,1),j=W(V,1);for(V=W(V,2),C=W(C,2);!k(V);){var I=j.add(V);I.l(x)<=0&&(M=M.add(C),j=I),V=W(V,1),C=W(C,1)}return R=B(x,M.j(R)),new Z(M,R)}for(M=E;x.l(R)>=0;){for(C=Math.max(1,Math.floor(x.m()/R.m())),V=Math.ceil(Math.log(C)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),j=p(C),I=j.j(R);z(I)||I.l(x)>0;)C-=V,j=p(C),I=j.j(R);k(j)&&(j=S),M=M.add(j),x=B(x,I)}return new Z(M,x)}i.B=function(x){return ce(this,x).h},i.and=function(x){const R=Math.max(this.g.length,x.g.length),C=[];for(let V=0;V<R;V++)C[V]=this.i(V)&x.i(V);return new c(C,this.h&x.h)},i.or=function(x){const R=Math.max(this.g.length,x.g.length),C=[];for(let V=0;V<R;V++)C[V]=this.i(V)|x.i(V);return new c(C,this.h|x.h)},i.xor=function(x){const R=Math.max(this.g.length,x.g.length),C=[];for(let V=0;V<R;V++)C[V]=this.i(V)^x.i(V);return new c(C,this.h^x.h)};function ie(x){const R=x.g.length+1,C=[];for(let V=0;V<R;V++)C[V]=x.i(V)<<1|x.i(V-1)>>>31;return new c(C,x.h)}function W(x,R){const C=R>>5;R%=32;const V=x.g.length-C,M=[];for(let j=0;j<V;j++)M[j]=R>0?x.i(j+C)>>>R|x.i(j+C+1)<<32-R:x.i(j+C);return new c(M,x.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,l1=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,Ws=c}).apply(typeof eb<"u"?eb:typeof self<"u"?self:typeof window<"u"?window:{});var Nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var u1,cu,c1,jh,Rg,h1,f1,d1;(function(){var i,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nh=="object"&&Nh];for(var y=0;y<h.length;++y){var b=h[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var s=t(this);function o(h,y){if(y)e:{var b=s;h=h.split(".");for(var A=0;A<h.length-1;A++){var F=h[A];if(!(F in b))break e;b=b[F]}h=h[h.length-1],A=b[h],y=y(A),y!=A&&y!=null&&e(b,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var b=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&b.push([A,y[A]]);return b}});var u=u||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,b){return h.call.apply(h.bind,arguments)}function p(h,y,b){return p=g,p.apply(null,arguments)}function v(h,y){var b=Array.prototype.slice.call(arguments,1);return function(){var A=b.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function E(h,y){function b(){}b.prototype=y.prototype,h.Z=y.prototype,h.prototype=new b,h.prototype.constructor=h,h.Ob=function(A,F,J){for(var ge=Array(arguments.length-2),je=2;je<arguments.length;je++)ge[je-2]=arguments[je];return y.prototype[F].apply(A,ge)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function N(h){const y=h.length;if(y>0){const b=Array(y);for(let A=0;A<y;A++)b[A]=h[A];return b}return[]}function k(h,y){for(let A=1;A<arguments.length;A++){const F=arguments[A];var b=typeof F;if(b=b!="object"?b:F?Array.isArray(F)?"array":b:"null",b=="array"||b=="object"&&typeof F.length=="number"){b=h.length||0;const J=F.length||0;h.length=b+J;for(let ge=0;ge<J;ge++)h[b+ge]=F[ge]}else h.push(F)}}class z{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function D(h){c.setTimeout(()=>{throw h},0)}function B(){var h=x;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ne{constructor(){this.h=this.g=null}add(y,b){const A=Z.get();A.set(y,b),this.h?this.h.next=A:this.g=A,this.h=A}}var Z=new z(()=>new ce,h=>h.reset());class ce{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,W=!1,x=new ne,R=()=>{const h=Promise.resolve(void 0);ie=()=>{h.then(C)}};function C(){for(var h;h=B();){try{h.h.call(h.g)}catch(b){D(b)}var y=Z;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}W=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};c.addEventListener("test",b,y),c.removeEventListener("test",b,y)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function qe(h,y){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(qe,M),qe.prototype.init=function(h,y){const b=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(b=="mouseover"?y=h.fromElement:b=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&qe.Z.h.call(this)},qe.prototype.h=function(){qe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var dt="closure_listenable_"+(Math.random()*1e6|0),te=0;function he(h,y,b,A,F){this.listener=h,this.proxy=null,this.src=y,this.type=b,this.capture=!!A,this.ha=F,this.key=++te,this.da=this.fa=!1}function be(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Me(h,y,b){for(const A in h)y.call(b,h[A],A,h)}function ze(h,y){for(const b in h)y.call(void 0,h[b],b,h)}function P(h){const y={};for(const b in h)y[b]=h[b];return y}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(h,y){let b,A;for(let F=1;F<arguments.length;F++){A=arguments[F];for(b in A)h[b]=A[b];for(let J=0;J<re.length;J++)b=re[J],Object.prototype.hasOwnProperty.call(A,b)&&(h[b]=A[b])}}function de(h){this.src=h,this.g={},this.h=0}de.prototype.add=function(h,y,b,A,F){const J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);const ge=Ae(h,y,A,F);return ge>-1?(y=h[ge],b||(y.fa=!1)):(y=new he(y,this.src,J,!!A,F),y.fa=b,h.push(y)),y};function _e(h,y){const b=y.type;if(b in h.g){var A=h.g[b],F=Array.prototype.indexOf.call(A,y,void 0),J;(J=F>=0)&&Array.prototype.splice.call(A,F,1),J&&(be(y),h.g[b].length==0&&(delete h.g[b],h.h--))}}function Ae(h,y,b,A){for(let F=0;F<h.length;++F){const J=h[F];if(!J.da&&J.listener==y&&J.capture==!!b&&J.ha==A)return F}return-1}var Le="closure_lm_"+(Math.random()*1e6|0),Dt={};function ut(h,y,b,A,F){if(Array.isArray(y)){for(let J=0;J<y.length;J++)ut(h,y[J],b,A,F);return null}return b=Hi(b),h&&h[dt]?h.J(y,b,m(A)?!!A.capture:!1,F):Ht(h,y,b,!1,A,F)}function Ht(h,y,b,A,F,J){if(!y)throw Error("Invalid event type");const ge=m(F)?!!F.capture:!!F;let je=Pn(h);if(je||(h[Le]=je=new de(h)),b=je.add(y,b,A,ge,J),b.proxy)return b;if(A=Si(),b.proxy=A,A.src=h,A.listener=b,h.addEventListener)j||(F=ge),F===void 0&&(F=!1),h.addEventListener(y.toString(),A,F);else if(h.attachEvent)h.attachEvent(Jt(y.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Si(){function h(b){return y.call(h.src,h.listener,b)}const y=fi;return h}function Vn(h,y,b,A,F){if(Array.isArray(y))for(var J=0;J<y.length;J++)Vn(h,y[J],b,A,F);else A=m(A)?!!A.capture:!!A,b=Hi(b),h&&h[dt]?(h=h.i,J=String(y).toString(),J in h.g&&(y=h.g[J],b=Ae(y,b,A,F),b>-1&&(be(y[b]),Array.prototype.splice.call(y,b,1),y.length==0&&(delete h.g[J],h.h--)))):h&&(h=Pn(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ae(y,b,A,F)),(b=h>-1?y[h]:null)&&qi(b))}function qi(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[dt])_e(y.i,h);else{var b=h.type,A=h.proxy;y.removeEventListener?y.removeEventListener(b,A,h.capture):y.detachEvent?y.detachEvent(Jt(b),A):y.addListener&&y.removeListener&&y.removeListener(A),(b=Pn(y))?(_e(b,h),b.h==0&&(b.src=null,y[Le]=null)):be(h)}}}function Jt(h){return h in Dt?Dt[h]:Dt[h]="on"+h}function fi(h,y){if(h.da)h=!0;else{y=new qe(y,this);const b=h.listener,A=h.ha||h.src;h.fa&&qi(h),h=b.call(A,y)}return h}function Pn(h){return h=h[Le],h instanceof de?h:null}var ar="__closure_events_fn_"+(Math.random()*1e9>>>0);function Hi(h){return typeof h=="function"?h:(h[ar]||(h[ar]=function(y){return h.handleEvent(y)}),h[ar])}function St(){V.call(this),this.i=new de(this),this.M=this,this.G=null}E(St,V),St.prototype[dt]=!0,St.prototype.removeEventListener=function(h,y,b,A){Vn(this,h,y,b,A)};function ct(h,y){var b,A=h.G;if(A)for(b=[];A;A=A.G)b.push(A);if(h=h.M,A=y.type||y,typeof y=="string")y=new M(y,h);else if(y instanceof M)y.target=y.target||h;else{var F=y;y=new M(A,h),me(y,F)}F=!0;let J,ge;if(b)for(ge=b.length-1;ge>=0;ge--)J=y.g=b[ge],F=Hn(J,A,!0,y)&&F;if(J=y.g=h,F=Hn(J,A,!0,y)&&F,F=Hn(J,A,!1,y)&&F,b)for(ge=0;ge<b.length;ge++)J=y.g=b[ge],F=Hn(J,A,!1,y)&&F}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const b=h.g[y];for(let A=0;A<b.length;A++)be(b[A]);delete h.g[y],h.h--}}this.G=null},St.prototype.J=function(h,y,b,A){return this.i.add(String(h),y,!1,b,A)},St.prototype.K=function(h,y,b,A){return this.i.add(String(h),y,!0,b,A)};function Hn(h,y,b,A){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let F=!0;for(let J=0;J<y.length;++J){const ge=y[J];if(ge&&!ge.da&&ge.capture==b){const je=ge.listener,$t=ge.ha||ge.src;ge.fa&&_e(h.i,ge),F=je.call($t,A)!==!1&&F}}return F&&!A.defaultPrevented}function or(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function lr(h){h.g=or(()=>{h.g=null,h.i&&(h.i=!1,lr(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Zt extends V{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:lr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fi(h){V.call(this),this.h=h,this.g={}}E(Fi,V);var Rr=[];function Fn(h){Me(h.g,function(y,b){this.g.hasOwnProperty(b)&&qi(y)},h),h.g={}}Fi.prototype.N=function(){Fi.Z.N.call(this),Fn(this)},Fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sn=c.JSON.stringify,Gi=c.JSON.parse,Cr=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Gn(){}function Nr(){}var Kn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ft(){M.call(this,"d")}E(Ft,M);function pn(){M.call(this,"c")}E(pn,M);var At={},Ir=null;function Ki(){return Ir=Ir||new St}At.Ia="serverreachability";function ss(h){M.call(this,At.Ia,h)}E(ss,M);function ni(h){const y=Ki();ct(y,new ss(y))}At.STAT_EVENT="statevent";function $i(h,y){M.call(this,At.STAT_EVENT,h),this.stat=y}E($i,M);function He(h){const y=Ki();ct(y,new $i(y,h))}At.Ja="timingevent";function xt(h,y){M.call(this,At.Ja,h),this.size=y}E(xt,M);function Rt(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function jt(){this.g=!0}jt.prototype.ua=function(){this.g=!1};function yn(h,y,b,A,F,J){h.info(function(){if(h.g)if(J){var ge="",je=J.split("&");for(let ot=0;ot<je.length;ot++){var $t=je[ot].split("=");if($t.length>1){const Mt=$t[0];$t=$t[1];const Oi=Mt.split("_");ge=Oi.length>=2&&Oi[1]=="type"?ge+(Mt+"="+$t+"&"):ge+(Mt+"=redacted&")}}}else ge=null;else ge=J;return"XMLHTTP REQ ("+A+") [attempt "+F+"]: "+y+`
`+b+`
`+ge})}function Wt(h,y,b,A,F,J,ge){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+F+"]: "+y+`
`+b+`
`+J+" "+ge})}function Vt(h,y,b,A){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+mt(h,b)+(A?" "+A:"")})}function Y(h,y){h.info(function(){return"TIMEOUT: "+y})}jt.prototype.info=function(){};function mt(h,y){if(!h.g)return y;if(!y)return null;try{const J=JSON.parse(y);if(J){for(h=0;h<J.length;h++)if(Array.isArray(J[h])){var b=J[h];if(!(b.length<2)){var A=b[1];if(Array.isArray(A)&&!(A.length<1)){var F=A[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ge=1;ge<A.length;ge++)A[ge]=""}}}}return Sn(J)}catch{return y}}var gt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},fe;function cn(){}E(cn,Gn),cn.prototype.g=function(){return new XMLHttpRequest},fe=new cn;function tt(h){return encodeURIComponent(String(h))}function Ot(h){var y=1;h=h.split(":");const b=[];for(;y>0&&h.length;)b.push(h.shift()),y--;return h.length&&b.push(h.join(":")),b}function hn(h,y,b,A){this.j=h,this.i=y,this.l=b,this.S=A||1,this.V=new Fi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pt}function pt(){this.i=null,this.g="",this.h=!1}var Pt={},Kt={};function Ee(h,y,b){h.M=1,h.A=Ni($(y)),h.u=b,h.R=!0,as(h,null)}function as(h,y){h.F=Date.now(),Ai(h),h.B=$(h.A);var b=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),eo(b.i,"t",A),h.C=0,b=h.j.L,h.h=new pt,h.g=Tc(h.j,b?y:null,!h.u),h.P>0&&(h.O=new Zt(p(h.Y,h,h.g),h.P)),y=h.V,b=h.g,A=h.ba;var F="readystatechange";Array.isArray(F)||(F&&(Rr[0]=F.toString()),F=Rr);for(let J=0;J<F.length;J++){const ge=ut(b,F[J],A||y.handleEvent,!1,y.h||y);if(!ge)break;y.g[ge.key]=ge}y=h.J?P(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),ni(),yn(h.i,h.v,h.B,h.l,h.S,h.u)}hn.prototype.ba=function(h){h=h.target;const y=this.O;y&&Xi(h)==3?y.j():this.Y(h)},hn.prototype.Y=function(h){try{if(h==this.g)e:{const je=Xi(this.g),$t=this.g.ya(),ot=this.g.ca();if(!(je<3)&&(je!=3||this.g&&(this.h.h||this.g.la()||An(this.g)))){this.K||je!=4||$t==7||($t==8||ot<=0?ni(3):ni(2)),xi(this);var y=this.g.ca();this.X=y;var b=Ja(this);if(this.o=y==200,Wt(this.i,this.v,this.B,this.l,this.S,je,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,F=this.g;if((A=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(A)){var J=A;break t}}J=null}if(h=J)Vt(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ri(this,h);else{this.o=!1,this.m=3,He(12),Ln(this),$n(this);break e}}if(this.R){h=!0;let Mt;for(;!this.K&&this.C<b.length;)if(Mt=da(this,b),Mt==Kt){je==4&&(this.m=4,He(14),h=!1),Vt(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==Pt){this.m=4,He(15),Vt(this.i,this.l,b,"[Invalid Chunk]"),h=!1;break}else Vt(this.i,this.l,Mt,null),Ri(this,Mt);if(Za(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),je!=4||b.length!=0||this.h.h||(this.m=1,He(16),h=!1),this.o=this.o&&h,!h)Vt(this.i,this.l,b,"[Invalid Chunked Response]"),Ln(this),$n(this);else if(b.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Sl(ge),ge.P=!0,He(11))}}else Vt(this.i,this.l,b,null),Ri(this,b);je==4&&Ln(this),this.o&&!this.K&&(je==4?_c(this.j,this):(this.o=!1,Ai(this)))}else Or(this.g),y==400&&b.indexOf("Unknown SID")>0?(this.m=3,He(12)):(this.m=0,He(13)),Ln(this),$n(this)}}}catch{}};function Ja(h){if(!Za(h))return h.g.la();const y=An(h.g);if(y==="")return"";let b="";const A=y.length,F=Xi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Ln(h),$n(h),"";h.h.i=new c.TextDecoder}for(let J=0;J<A;J++)h.h.h=!0,b+=h.h.i.decode(y[J],{stream:!(F&&J==A-1)});return y.length=0,h.h.g+=b,h.C=0,h.h.g}function Za(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function da(h,y){var b=h.C,A=y.indexOf(`
`,b);return A==-1?Kt:(b=Number(y.substring(b,A)),isNaN(b)?Pt:(A+=1,A+b>y.length?Kt:(y=y.slice(A,A+b),h.C=A+b,y)))}hn.prototype.cancel=function(){this.K=!0,Ln(this)};function Ai(h){h.T=Date.now()+h.H,os(h,h.H)}function os(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Rt(p(h.aa,h),y)}function xi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}hn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Y(this.i,this.B),this.M!=2&&(ni(),He(17)),Ln(this),this.m=2,$n(this)):os(this,this.T-h)};function $n(h){h.j.I==0||h.K||_c(h.j,h)}function Ln(h){xi(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Fn(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Ri(h,y){try{var b=h.j;if(b.I!=0&&(b.g==h||Ci(b.h,h))){if(!h.L&&Ci(b.h,h)&&b.I==3){try{var A=b.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var F=A;if(F[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<h.F)so(b),ps(b);else break e;wa(b),He(18)}}else b.xa=F[1],0<b.xa-b.K&&F[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Rt(p(b.Va,b),6e3));ii(b.h)<=1&&b.ta&&(b.ta=void 0)}else mr(b,11)}else if((h.L||b.g==h)&&so(b),!I(y))for(F=b.Ba.g.parse(y),y=0;y<F.length;y++){let ot=F[y];const Mt=ot[0];if(!(Mt<=b.K))if(b.K=Mt,ot=ot[1],b.I==2)if(ot[0]=="c"){b.M=ot[1],b.ba=ot[2];const Oi=ot[3];Oi!=null&&(b.ka=Oi,b.j.info("VER="+b.ka));const gr=ot[4];gr!=null&&(b.za=gr,b.j.info("SVER="+b.za));const Ji=ot[5];Ji!=null&&typeof Ji=="number"&&Ji>0&&(A=1.5*Ji,b.O=A,b.j.info("backChannelRequestTimeoutMs_="+A)),A=b;const Zi=h.g;if(Zi){const Sa=Zi.g?Zi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sa){var J=A.h;J.g||Sa.indexOf("spdy")==-1&&Sa.indexOf("quic")==-1&&Sa.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(ga(J,J.h),J.h=null))}if(A.G){const ao=Zi.g?Zi.g.getResponseHeader("X-HTTP-Session-Id"):null;ao&&(A.wa=ao,Fe(A.J,A.G,ao))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-h.F,b.j.info("Handshake RTT: "+b.T+"ms")),A=b;var ge=h;if(A.na=Ec(A,A.L?A.ba:null,A.W),ge.L){us(A.h,ge);var je=ge,$t=A.O;$t&&(je.H=$t),je.D&&(xi(je),Ai(je)),A.g=ge}else pc(A);b.i.length>0&&dr(b)}else ot[0]!="stop"&&ot[0]!="close"||mr(b,7);else b.I==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?mr(b,7):Tl(b):ot[0]!="noop"&&b.l&&b.l.qa(ot),b.A=0)}}ni(4)}catch{}}var Ut=class{constructor(h,y){this.g=h,this.map=y}};function ma(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ls(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ii(h){return h.h?1:h.g?h.g.size:0}function Ci(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function ga(h,y){h.g?h.g.add(y):h.h=y}function us(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}ma.prototype.cancel=function(){if(this.i=pa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function pa(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const b of h.g.values())y=y.concat(b.G);return y}return N(h.i)}var en=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function q(h,y){if(h){h=h.split("&");for(let b=0;b<h.length;b++){const A=h[b].indexOf("=");let F,J=null;A>=0?(F=h[b].substring(0,A),J=h[b].substring(A+1)):F=h[b],y(F,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function X(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof X?(this.l=h.l,ye(this,h.j),this.o=h.o,this.g=h.g,Se(this,h.u),this.h=h.h,We(this,mc(h.i)),this.m=h.m):h&&(y=String(h).match(en))?(this.l=!1,ye(this,y[1]||"",!0),this.o=ur(y[2]||""),this.g=ur(y[3]||"",!0),Se(this,y[4]),this.h=ur(y[5]||"",!0),We(this,y[6]||"",!0),this.m=ur(y[7]||"")):(this.l=!1,this.i=new hs(null,this.l))}X.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(ya(y,Wa,!0),":");var b=this.g;return(b||y=="file")&&(h.push("//"),(y=this.o)&&h.push(ya(y,Wa,!0),"@"),h.push(tt(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&h.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(ya(b,b.charAt(0)=="/"?pl:hc,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",ya(b,fc)),h.join("")},X.prototype.resolve=function(h){const y=$(this);let b=!!h.j;b?ye(y,h.j):b=!!h.o,b?y.o=h.o:b=!!h.g,b?y.g=h.g:b=h.u!=null;var A=h.h;if(b)Se(y,h.u);else if(b=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var F=y.h.lastIndexOf("/");F!=-1&&(A=y.h.slice(0,F+1)+A)}if(F=A,F==".."||F==".")A="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){A=F.lastIndexOf("/",0)==0,F=F.split("/");const J=[];for(let ge=0;ge<F.length;){const je=F[ge++];je=="."?A&&ge==F.length&&J.push(""):je==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),A&&ge==F.length&&J.push("")):(J.push(je),A=!0)}A=J.join("/")}else A=F}return b?y.h=A:b=h.i.toString()!=="",b?We(y,mc(h.i)):b=!!h.m,b&&(y.m=h.m),y};function $(h){return new X(h)}function ye(h,y,b){h.j=b?ur(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Se(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function We(h,y,b){y instanceof hs?(h.i=y,to(h.i,h.l)):(b||(y=ya(y,cs)),h.i=new hs(y,h.l))}function Fe(h,y,b){h.i.set(y,b)}function Ni(h){return Fe(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function ur(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ya(h,y,b){return typeof h=="string"?(h=encodeURI(h).replace(y,ri),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ri(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Wa=/[#\/\?@]/g,hc=/[#\?:]/g,pl=/[#\?]/g,cs=/[#\?@]/g,fc=/#/g;function hs(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function si(h){h.g||(h.g=new Map,h.h=0,h.i&&q(h.i,function(y,b){h.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}i=hs.prototype,i.add=function(h,y){si(this),this.i=null,h=fs(this,h);let b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(y),this.h+=1,this};function dc(h,y){si(h),y=fs(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function yl(h,y){return si(h),y=fs(h,y),h.g.has(y)}i.forEach=function(h,y){si(this),this.g.forEach(function(b,A){b.forEach(function(F){h.call(y,F,A,this)},this)},this)};function _l(h,y){si(h);let b=[];if(typeof y=="string")yl(h,y)&&(b=b.concat(h.g.get(fs(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)b=b.concat(h[y]);return b}i.set=function(h,y){return si(this),this.i=null,h=fs(this,h),yl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=_l(this,h),h.length>0?String(h[0]):y):y};function eo(h,y,b){dc(h,y),b.length>0&&(h.i=null,h.g.set(fs(h,y),N(b)),h.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var b=y[A];const F=tt(b);b=_l(this,b);for(let J=0;J<b.length;J++){let ge=F;b[J]!==""&&(ge+="="+tt(b[J])),h.push(ge)}}return this.i=h.join("&")};function mc(h){const y=new hs;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function fs(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function to(h,y){y&&!h.j&&(si(h),h.i=null,h.g.forEach(function(b,A){const F=A.toLowerCase();A!=F&&(dc(this,A),eo(this,F,b))},h)),h.j=y}function Qi(h,y){const b=new jt;if(c.Image){const A=new Image;A.onload=v(Ii,b,"TestLoadImage: loaded",!0,y,A),A.onerror=v(Ii,b,"TestLoadImage: error",!1,y,A),A.onabort=v(Ii,b,"TestLoadImage: abort",!1,y,A),A.ontimeout=v(Ii,b,"TestLoadImage: timeout",!1,y,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else y(!1)}function vl(h,y){const b=new jt,A=new AbortController,F=setTimeout(()=>{A.abort(),Ii(b,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:A.signal}).then(J=>{clearTimeout(F),J.ok?Ii(b,"TestPingServer: ok",!0,y):Ii(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(F),Ii(b,"TestPingServer: error",!1,y)})}function Ii(h,y,b,A,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),A(b)}catch{}}function ds(){this.g=new Cr}function cr(h){this.i=h.Sb||null,this.h=h.ab||!1}E(cr,Gn),cr.prototype.g=function(){return new _a(this.i,this.h)};function _a(h,y){St.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(_a,St),i=_a.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Yi(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ms(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Yi(this)),this.g&&(this.readyState=3,Yi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;no(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function no(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?ms(this):Yi(this),this.readyState==3&&no(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,ms(this))},i.Na=function(h){this.g&&(this.response=h,ms(this))},i.ga=function(){this.g&&ms(this)};function ms(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Yi(h)}i.setRequestHeader=function(h,y){this.A.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=y.next();return h.join(`\r
`)};function Yi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(_a.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Di(h){let y="";return Me(h,function(b,A){y+=A,y+=":",y+=b,y+=`\r
`}),y}function va(h,y,b){e:{for(A in b){var A=!1;break e}A=!0}A||(b=Di(b),typeof h=="string"?b!=null&&tt(b):Fe(h,y,b))}function yt(h){St.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(yt,St);var hr=/^https?$/i,bl=["POST","PUT"];i=yt.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,y,b,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():fe.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(J){ba(this,J);return}if(h=b||"",b=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var F in A)b.set(F,A[F]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const J of A.keys())b.set(J,A.get(J));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(b.keys()).find(J=>J.toLowerCase()=="content-type"),F=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(bl,y,void 0)>=0)||A||F||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ge]of b)this.g.setRequestHeader(J,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(J){ba(this,J)}};function ba(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,El(h),Dr(h)}function El(h){h.A||(h.A=!0,ct(h,"complete"),ct(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,ct(this,"complete"),ct(this,"abort"),Dr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dr(this,!0)),yt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Ea(this):this.Xa())},i.Xa=function(){Ea(this)};function Ea(h){if(h.h&&typeof u<"u"){if(h.v&&Xi(h)==4)setTimeout(h.Ca.bind(h),0);else if(ct(h,"readystatechange"),Xi(h)==4){h.h=!1;try{const J=h.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var A;if(A=J===0){let ge=String(h.D).match(en)[1]||null;!ge&&c.self&&c.self.location&&(ge=c.self.location.protocol.slice(0,-1)),A=!hr.test(ge?ge.toLowerCase():"")}b=A}if(b)ct(h,"complete"),ct(h,"success");else{h.o=6;try{var F=Xi(h)>2?h.g.statusText:""}catch{F=""}h.l=F+" ["+h.ca()+"]",El(h)}}finally{Dr(h)}}}}function Dr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const b=h.g;h.g=null,y||ct(h,"ready");try{b.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Xi(h){return h.g?h.g.readyState:0}i.ca=function(){try{return Xi(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Gi(y)}};function An(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Or(h){const y={};h=(h.g&&Xi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(I(h[A]))continue;var b=Ot(h[A]);const F=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const J=y[F]||[];y[F]=J,J.push(b)}ze(y,function(A){return A.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fr(h,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||y}function gs(h){this.za=0,this.i=[],this.j=new jt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fr("baseRetryDelayMs",5e3,h),this.Za=fr("retryDelaySeedMs",1e4,h),this.Ta=fr("forwardChannelMaxRetries",2,h),this.va=fr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ma(h&&h.concurrentRequestLimit),this.Ba=new ds,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=gs.prototype,i.ka=8,i.I=1,i.connect=function(h,y,b,A){He(0),this.W=h,this.H=y||{},b&&A!==void 0&&(this.H.OSID=b,this.H.OAID=A),this.F=this.X,this.J=Ec(this,null,this.W),dr(this)};function Tl(h){if(io(h),h.I==3){var y=h.V++,b=$(h.J);if(Fe(b,"SID",h.M),Fe(b,"RID",y),Fe(b,"TYPE","terminate"),Ta(h,b),y=new hn(h,h.j,y),y.M=2,y.A=Ni($(b)),b=!1,c.navigator&&c.navigator.sendBeacon)try{b=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!b&&c.Image&&(new Image().src=y.A,b=!0),b||(y.g=Tc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ai(y)}bc(h)}function ps(h){h.g&&(Sl(h),h.g.cancel(),h.g=null)}function io(h){ps(h),h.v&&(c.clearTimeout(h.v),h.v=null),so(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function dr(h){if(!ls(h.h)&&!h.m){h.m=!0;var y=h.Ea;ie||R(),W||(ie(),W=!0),x.add(y,h),h.D=0}}function ro(h,y){return ii(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Rt(p(h.Ea,h,y),vc(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const F=new hn(this,this.j,h);let J=this.o;if(this.U&&(J?(J=P(J),me(J,this.U)):J=this.U),this.u!==null||this.R||(F.J=J,J=null),this.S)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var A=this.i[b];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=gc(this,F,y),b=$(this.J),Fe(b,"RID",h),Fe(b,"CVER",22),this.G&&Fe(b,"X-HTTP-Session-Id",this.G),Ta(this,b),J&&(this.R?y="headers="+tt(Di(J))+"&"+y:this.u&&va(b,this.u,J)),ga(this.h,F),this.Ra&&Fe(b,"TYPE","init"),this.S?(Fe(b,"$req",y),Fe(b,"SID","null"),F.U=!0,Ee(F,b,null)):Ee(F,b,y),this.I=2}}else this.I==3&&(h?wl(this,h):this.i.length==0||ls(this.h)||wl(this))};function wl(h,y){var b;y?b=y.l:b=h.V++;const A=$(h.J);Fe(A,"SID",h.M),Fe(A,"RID",b),Fe(A,"AID",h.K),Ta(h,A),h.u&&h.o&&va(A,h.u,h.o),b=new hn(h,h.j,b,h.D+1),h.u===null&&(b.J=h.o),y&&(h.i=y.G.concat(h.i)),y=gc(h,b,1e3),b.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),ga(h.h,b),Ee(b,A,y)}function Ta(h,y){h.H&&Me(h.H,function(b,A){Fe(y,A,b)}),h.l&&Me({},function(b,A){Fe(y,A,b)})}function gc(h,y,b){b=Math.min(h.i.length,b);const A=h.l?p(h.l.Ka,h.l,h):null;e:{var F=h.i;let je=-1;for(;;){const $t=["count="+b];je==-1?b>0?(je=F[0].g,$t.push("ofs="+je)):je=0:$t.push("ofs="+je);let ot=!0;for(let Mt=0;Mt<b;Mt++){var J=F[Mt].g;const Oi=F[Mt].map;if(J-=je,J<0)je=Math.max(0,F[Mt].g-100),ot=!1;else try{J="req"+J+"_"||"";try{var ge=Oi instanceof Map?Oi:Object.entries(Oi);for(const[gr,Ji]of ge){let Zi=Ji;m(Ji)&&(Zi=Sn(Ji)),$t.push(J+gr+"="+encodeURIComponent(Zi))}}catch(gr){throw $t.push(J+"type="+encodeURIComponent("_badmap")),gr}}catch{A&&A(Oi)}}if(ot){ge=$t.join("&");break e}}ge=void 0}return h=h.i.splice(0,b),y.G=h,ge}function pc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ie||R(),W||(ie(),W=!0),x.add(y,h),h.A=0}}function wa(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Rt(p(h.Da,h),vc(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,yc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Rt(p(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,He(10),ps(this),yc(this))};function Sl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function yc(h){h.g=new hn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=$(h.na);Fe(y,"RID","rpc"),Fe(y,"SID",h.M),Fe(y,"AID",h.K),Fe(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Fe(y,"TO",h.ia),Fe(y,"TYPE","xmlhttp"),Ta(h,y),h.u&&h.o&&va(y,h.u,h.o),h.O&&(h.g.H=h.O);var b=h.g;h=h.ba,b.M=1,b.A=Ni($(y)),b.u=null,b.R=!0,as(b,h)}i.Va=function(){this.C!=null&&(this.C=null,ps(this),wa(this),He(19))};function so(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function _c(h,y){var b=null;if(h.g==y){so(h),Sl(h),h.g=null;var A=2}else if(Ci(h.h,y))b=y.G,us(h.h,y),A=1;else return;if(h.I!=0){if(y.o)if(A==1){b=y.u?y.u.length:0,y=Date.now()-y.F;var F=h.D;A=Ki(),ct(A,new xt(A,b)),dr(h)}else pc(h);else if(F=y.m,F==3||F==0&&y.X>0||!(A==1&&ro(h,y)||A==2&&wa(h)))switch(b&&b.length>0&&(y=h.h,y.i=y.i.concat(b)),F){case 1:mr(h,5);break;case 4:mr(h,10);break;case 3:mr(h,6);break;default:mr(h,2)}}}function vc(h,y){let b=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(b*=2),b*y}function mr(h,y){if(h.j.info("Error code "+y),y==2){var b=p(h.bb,h),A=h.Ua;const F=!A;A=new X(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ye(A,"https"),Ni(A),F?Qi(A.toString(),b):vl(A.toString(),b)}else He(2);h.I=0,h.l&&h.l.pa(y),bc(h),io(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),He(2)):(this.j.info("Failed to ping google.com"),He(1))};function bc(h){if(h.I=0,h.ja=[],h.l){const y=pa(h.h);(y.length!=0||h.i.length!=0)&&(k(h.ja,y),k(h.ja,h.i),h.h.i.length=0,N(h.i),h.i.length=0),h.l.oa()}}function Ec(h,y,b){var A=b instanceof X?$(b):new X(b);if(A.g!="")y&&(A.g=y+"."+A.g),Se(A,A.u);else{var F=c.location;A=F.protocol,y=y?y+"."+F.hostname:F.hostname,F=+F.port;const J=new X(null);A&&ye(J,A),y&&(J.g=y),F&&Se(J,F),b&&(J.h=b),A=J}return b=h.G,y=h.wa,b&&y&&Fe(A,b,y),Fe(A,"VER",h.ka),Ta(h,A),A}function Tc(h,y,b){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new yt(new cr({ab:b})):new yt(h.ma),y.Fa(h.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function wc(){}i=wc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function ys(){}ys.prototype.g=function(h,y){return new Qn(h,y)};function Qn(h,y){St.call(this),this.g=new gs(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!I(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Mr(this)}E(Qn,St),Qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qn.prototype.close=function(){Tl(this.g)},Qn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.v&&(b={},b.__data__=Sn(h),h=b);y.i.push(new Ut(y.Ya++,h)),y.I==3&&dr(y)},Qn.prototype.N=function(){this.g.l=null,delete this.j,Tl(this.g),delete this.g,Qn.Z.N.call(this)};function Sc(h){Ft.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const b in y){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(Sc,Ft);function Ac(){pn.call(this),this.status=1}E(Ac,pn);function Mr(h){this.g=h}E(Mr,wc),Mr.prototype.ra=function(){ct(this.g,"a")},Mr.prototype.qa=function(h){ct(this.g,new Sc(h))},Mr.prototype.pa=function(h){ct(this.g,new Ac)},Mr.prototype.oa=function(){ct(this.g,"b")},ys.prototype.createWebChannel=ys.prototype.g,Qn.prototype.send=Qn.prototype.o,Qn.prototype.open=Qn.prototype.m,Qn.prototype.close=Qn.prototype.close,d1=function(){return new ys},f1=function(){return Ki()},h1=At,Rg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},gt.NO_ERROR=0,gt.TIMEOUT=8,gt.HTTP_ERROR=6,jh=gt,Gt.COMPLETE="complete",c1=Gt,Nr.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",St.prototype.listen=St.prototype.J,cu=Nr,yt.prototype.listenOnce=yt.prototype.K,yt.prototype.getLastError=yt.prototype.Ha,yt.prototype.getLastErrorCode=yt.prototype.ya,yt.prototype.getStatus=yt.prototype.ca,yt.prototype.getResponseJson=yt.prototype.La,yt.prototype.getResponseText=yt.prototype.la,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Fa,u1=yt}).apply(typeof Nh<"u"?Nh:typeof self<"u"?self:typeof window<"u"?window:{});const tb="@firebase/firestore",nb="4.9.3";class Bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");let ll="12.7.0";const Ka=new rp("@firebase/firestore");function Lo(){return Ka.logLevel}function ve(i,...e){if(Ka.logLevel<=Xe.DEBUG){const t=e.map(op);Ka.debug(`Firestore (${ll}): ${i}`,...t)}}function Wr(i,...e){if(Ka.logLevel<=Xe.ERROR){const t=e.map(op);Ka.error(`Firestore (${ll}): ${i}`,...t)}}function Jo(i,...e){if(Ka.logLevel<=Xe.WARN){const t=e.map(op);Ka.warn(`Firestore (${ll}): ${i}`,...t)}}function op(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}function Ce(i,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,m1(i,s,t)}function m1(i,e,t){let s=`FIRESTORE (${ll}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Wr(s),new Error(s)}function it(i,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,i||m1(e,o,s)}function Ve(i,e){return i}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends rs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ea{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class g1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class z2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Bn.UNAUTHENTICATED)))}shutdown(){}}class B2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class q2{constructor(e){this.t=e,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let u=new ea;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ea,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ea)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(it(typeof s.accessToken=="string",31837,{l:s}),new g1(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new Bn(e)}}class H2{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class F2{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new H2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ib{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class G2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){it(this.o===void 0,3512);const s=u=>{u.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ib(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(it(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ib(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function K2(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class lp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=K2(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<t&&(s+=e.charAt(o[u]%62))}return s}}function Je(i,e){return i<e?-1:i>e?1:0}function Cg(i,e){const t=Math.min(i.length,e.length);for(let s=0;s<t;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return ig(o)===ig(u)?Je(o,u):ig(o)?1:-1}return Je(i.length,e.length)}const $2=55296,Q2=57343;function ig(i){const e=i.charCodeAt(0);return e>=$2&&e<=Q2}function Zo(i,e,t){return i.length===e.length&&i.every(((s,o)=>t(s,e[o])))}const rb="__name__";class br{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ce(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return br.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof br?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const u=br.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return Je(e.length,t.length)}static compareSegments(e,t){const s=br.isNumericId(e),o=br.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?br.extractNumericId(e).compare(br.extractNumericId(t)):Cg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ws.fromString(e.substring(4,e.length-2))}}class Et extends br{construct(e,t,s){return new Et(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new pe(oe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Et(t)}static emptyPath(){return new Et([])}}const Y2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mn extends br{construct(e,t,s){return new Mn(e,t,s)}static isValidIdentifier(e){return Y2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rb}static keyField(){return new Mn([rb])}static fromServerFormat(e){const t=[];let s="",o=0;const u=()=>{if(s.length===0)throw new pe(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new pe(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new pe(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(s+=m,o++):(u(),o++)}if(u(),c)throw new pe(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mn(t)}static emptyPath(){return new Mn([])}}class xe{constructor(e){this.path=e}static fromPath(e){return new xe(Et.fromString(e))}static fromName(e){return new xe(Et.fromString(e).popFirst(5))}static empty(){return new xe(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new Et(e.slice()))}}function p1(i,e,t){if(!t)throw new pe(oe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function X2(i,e,t,s){if(e===!0&&s===!0)throw new pe(oe.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function sb(i){if(!xe.isDocumentKey(i))throw new pe(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function ab(i){if(xe.isDocumentKey(i))throw new pe(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function y1(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Rf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ce(12329,{type:typeof i})}function Jr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new pe(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Rf(i);throw new pe(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function un(i,e){const t={typeString:i};return e&&(t.value=e),t}function Qu(i,e){if(!y1(i))throw new pe(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){t=`JSON missing required field: '${s}'`;break}const c=i[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){t=`Expected '${s}' field to equal '${u.value}'`;break}}if(t)throw new pe(oe.INVALID_ARGUMENT,t);return!0}const ob=-62135596800,lb=1e6;class It{static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*lb);return new It(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ob)throw new pe(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lb}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:It._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Qu(e,It._jsonSchema))return new It(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ob;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}It._jsonSchemaVersion="firestore/timestamp/1.0",It._jsonSchema={type:un("string",It._jsonSchemaVersion),seconds:un("number"),nanoseconds:un("number")};class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new It(0,0))}static max(){return new Ie(new It(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ku=-1;function J2(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(s===1e9?new It(t+1,0):new It(t,s));return new ra(o,xe.empty(),e)}function Z2(i){return new ra(i.readTime,i.key,ku)}class ra{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ra(Ie.min(),xe.empty(),ku)}static max(){return new ra(Ie.max(),xe.empty(),ku)}}function W2(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(i.documentKey,e.documentKey),t!==0?t:Je(i.largestBatchId,e.largestBatchId))}const eR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ul(i){if(i.code!==oe.FAILED_PRECONDITION||i.message!==eR)throw i;ve("LocalStore","Unexpectedly lost primary lease")}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.reject(t)}static resolve(e){return new ue(((t,s)=>{t(e)}))}static reject(e){return new ue(((t,s)=>{s(e)}))}static waitFor(e){return new ue(((t,s)=>{let o=0,u=0,c=!1;e.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&t()}),(g=>s(g)))})),c=!0,u===o&&t()}))}static or(e){let t=ue.resolve(!1);for(const s of e)t=t.next((o=>o?ue.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,u)=>{s.push(t.call(this,o,u))})),this.waitFor(s)}static mapArray(e,t){return new ue(((s,o)=>{const u=e.length,c=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;t(e[p]).next((v=>{c[p]=v,++m,m===u&&s(c)}),(v=>o(v)))}}))}static doWhile(e,t){return new ue(((s,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):s()};u()}))}}function nR(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function cl(i){return i.name==="IndexedDbTransactionError"}class Cf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cf.ce=-1;const up=-1;function Yu(i){return i==null}function Wh(i){return i===0&&1/i==-1/0}function iR(i){return typeof i=="number"&&Number.isInteger(i)&&!Wh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const _1="";function rR(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=ub(e)),e=sR(i.get(t),e);return ub(e)}function sR(i,e){let t=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":t+="";break;case _1:t+="";break;default:t+=u}}return t}function ub(i){return i+_1+""}function cb(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function ha(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function v1(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Lt{constructor(e,t){this.comparator=e,this.root=t||Dn.EMPTY}insert(e,t){return new Lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ih(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ih(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ih(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ih(this.root,e,this.comparator,!0)}}class Ih{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?s(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dn{constructor(e,t,s,o,u){this.key=e,this.value=t,this.color=s??Dn.RED,this.left=o??Dn.EMPTY,this.right=u??Dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,u){return new Dn(e??this.key,t??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,s),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Dn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1;Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,s,o,u){return this}insert(e,t,s){return new Dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gn{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hb(this.data.getIterator())}getIteratorFrom(e){return new hb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof gn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new gn(this.comparator);return t.data=e,t}}class hb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ti{constructor(e){this.fields=e,e.sort(Mn.comparator)}static empty(){return new Ti([])}unionWith(e){let t=new gn(Mn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Ti(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class b1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class kn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new b1("Invalid base64 string: "+u):u}})(e);return new kn(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(e);return new kn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kn.EMPTY_BYTE_STRING=new kn("");const aR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sa(i){if(it(!!i,39018),typeof i=="string"){let e=0;const t=aR.exec(i);if(it(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Xt(i.seconds),nanos:Xt(i.nanos)}}function Xt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function aa(i){return typeof i=="string"?kn.fromBase64String(i):kn.fromUint8Array(i)}const E1="server_timestamp",T1="__type__",w1="__previous_value__",S1="__local_write_time__";function cp(i){return(i?.mapValue?.fields||{})[T1]?.stringValue===E1}function Nf(i){const e=i.mapValue.fields[w1];return cp(e)?Nf(e):e}function Vu(i){const e=sa(i.mapValue.fields[S1].timestampValue);return new It(e.seconds,e.nanos)}class oR{constructor(e,t,s,o,u,c,m,g,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=v}}const ef="(default)";class Pu{constructor(e,t){this.projectId=e,this.database=t||ef}static empty(){return new Pu("","")}get isDefaultDatabase(){return this.database===ef}isEqual(e){return e instanceof Pu&&e.projectId===this.projectId&&e.database===this.database}}const A1="__type__",lR="__max__",Dh={mapValue:{}},x1="__vector__",tf="value";function oa(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?cp(i)?4:cR(i)?9007199254740991:uR(i)?10:11:Ce(28295,{value:i})}function xr(i,e){if(i===e)return!0;const t=oa(i);if(t!==oa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Vu(i).isEqual(Vu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=sa(o.timestampValue),m=sa(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return aa(o.bytesValue).isEqual(aa(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return Xt(o.geoPointValue.latitude)===Xt(u.geoPointValue.latitude)&&Xt(o.geoPointValue.longitude)===Xt(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Xt(o.integerValue)===Xt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=Xt(o.doubleValue),m=Xt(u.doubleValue);return c===m?Wh(c)===Wh(m):isNaN(c)&&isNaN(m)}return!1})(i,e);case 9:return Zo(i.arrayValue.values||[],e.arrayValue.values||[],xr);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(cb(c)!==cb(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!xr(c[g],m[g])))return!1;return!0})(i,e);default:return Ce(52216,{left:i})}}function Lu(i,e){return(i.values||[]).find((t=>xr(t,e)))!==void 0}function Wo(i,e){if(i===e)return 0;const t=oa(i),s=oa(e);if(t!==s)return Je(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(i.booleanValue,e.booleanValue);case 2:return(function(u,c){const m=Xt(u.integerValue||u.doubleValue),g=Xt(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(i,e);case 3:return fb(i.timestampValue,e.timestampValue);case 4:return fb(Vu(i),Vu(e));case 5:return Cg(i.stringValue,e.stringValue);case 6:return(function(u,c){const m=aa(u),g=aa(c);return m.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(u,c){const m=u.split("/"),g=c.split("/");for(let p=0;p<m.length&&p<g.length;p++){const v=Je(m[p],g[p]);if(v!==0)return v}return Je(m.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,c){const m=Je(Xt(u.latitude),Xt(c.latitude));return m!==0?m:Je(Xt(u.longitude),Xt(c.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return db(i.arrayValue,e.arrayValue);case 10:return(function(u,c){const m=u.fields||{},g=c.fields||{},p=m[tf]?.arrayValue,v=g[tf]?.arrayValue,E=Je(p?.values?.length||0,v?.values?.length||0);return E!==0?E:db(p,v)})(i.mapValue,e.mapValue);case 11:return(function(u,c){if(u===Dh.mapValue&&c===Dh.mapValue)return 0;if(u===Dh.mapValue)return 1;if(c===Dh.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=c.fields||{},v=Object.keys(p);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const S=Cg(g[E],v[E]);if(S!==0)return S;const N=Wo(m[g[E]],p[v[E]]);if(N!==0)return N}return Je(g.length,v.length)})(i.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function fb(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Je(i,e);const t=sa(i),s=sa(e),o=Je(t.seconds,s.seconds);return o!==0?o:Je(t.nanos,s.nanos)}function db(i,e){const t=i.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const u=Wo(t[o],s[o]);if(u)return u}return Je(t.length,s.length)}function el(i){return Ng(i)}function Ng(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const s=sa(t);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return aa(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return xe.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let s="[",o=!0;for(const u of t.values||[])o?o=!1:s+=",",s+=Ng(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const c of s)u?u=!1:o+=",",o+=`${c}:${Ng(t.fields[c])}`;return o+"}"})(i.mapValue):Ce(61005,{value:i})}function Uh(i){switch(oa(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nf(i);return e?16+Uh(e):16;case 5:return 2*i.stringValue.length;case 6:return aa(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Uh(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return ha(s.fields,((u,c)=>{o+=u.length+Uh(c)})),o})(i.mapValue);default:throw Ce(13486,{value:i})}}function mb(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Ig(i){return!!i&&"integerValue"in i}function hp(i){return!!i&&"arrayValue"in i}function gb(i){return!!i&&"nullValue"in i}function pb(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function zh(i){return!!i&&"mapValue"in i}function uR(i){return(i?.mapValue?.fields||{})[A1]?.stringValue===x1}function vu(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return ha(i.mapValue.fields,((t,s)=>e.mapValue.fields[t]=vu(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vu(i.arrayValue.values[t]);return e}return{...i}}function cR(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===lR}class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!zh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vu(t)}setAll(e){let t=Mn.emptyPath(),s={},o=[];e.forEach(((c,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=m.popLast()}c?s[m.lastSegment()]=vu(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,s,o)}delete(e){const t=this.field(e.popLast());zh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];zh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){ha(t,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new Zn(vu(this.value))}}function R1(i){const e=[];return ha(i.fields,((t,s)=>{const o=new Mn([t]);if(zh(s)){const u=R1(s.mapValue).fields;if(u.length===0)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)})),new Ti(e)}class Tn{constructor(e,t,s,o,u,c,m){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(e){return new Tn(e,0,Ie.min(),Ie.min(),Ie.min(),Zn.empty(),0)}static newFoundDocument(e,t,s,o){return new Tn(e,1,t,Ie.min(),s,o,0)}static newNoDocument(e,t){return new Tn(e,2,t,Ie.min(),Ie.min(),Zn.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,Ie.min(),Ie.min(),Zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class nf{constructor(e,t){this.position=e,this.inclusive=t}}function yb(i,e,t){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],c=i.position[o];if(u.field.isKeyField()?s=xe.comparator(xe.fromName(c.referenceValue),t.key):s=Wo(c,t.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function _b(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!xr(i.position[t],e.position[t]))return!1;return!0}class rf{constructor(e,t="asc"){this.field=e,this.dir=t}}function hR(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class C1{}class ln extends C1{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new dR(e,t,s):t==="array-contains"?new pR(e,s):t==="in"?new yR(e,s):t==="not-in"?new _R(e,s):t==="array-contains-any"?new vR(e,s):new ln(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new mR(e,s):new gR(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Wo(t,this.value)):t!==null&&oa(this.value)===oa(t)&&this.matchesComparison(Wo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends C1{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new rr(e,t)}matches(e){return N1(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function N1(i){return i.op==="and"}function I1(i){return fR(i)&&N1(i)}function fR(i){for(const e of i.filters)if(e instanceof rr)return!1;return!0}function Dg(i){if(i instanceof ln)return i.field.canonicalString()+i.op.toString()+el(i.value);if(I1(i))return i.filters.map((e=>Dg(e))).join(",");{const e=i.filters.map((t=>Dg(t))).join(",");return`${i.op}(${e})`}}function D1(i,e){return i instanceof ln?(function(s,o){return o instanceof ln&&s.op===o.op&&s.field.isEqual(o.field)&&xr(s.value,o.value)})(i,e):i instanceof rr?(function(s,o){return o instanceof rr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,c,m)=>u&&D1(c,o.filters[m])),!0):!1})(i,e):void Ce(19439)}function O1(i){return i instanceof ln?(function(t){return`${t.field.canonicalString()} ${t.op} ${el(t.value)}`})(i):i instanceof rr?(function(t){return t.op.toString()+" {"+t.getFilters().map(O1).join(" ,")+"}"})(i):"Filter"}class dR extends ln{constructor(e,t,s){super(e,t,s),this.key=xe.fromName(s.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class mR extends ln{constructor(e,t){super(e,"in",t),this.keys=M1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class gR extends ln{constructor(e,t){super(e,"not-in",t),this.keys=M1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function M1(i,e){return(e.arrayValue?.values||[]).map((t=>xe.fromName(t.referenceValue)))}class pR extends ln{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hp(t)&&Lu(t.arrayValue,this.value)}}class yR extends ln{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Lu(this.value.arrayValue,t)}}class _R extends ln{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Lu(this.value.arrayValue,t)}}class vR extends ln{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Lu(this.value.arrayValue,s)))}}class bR{constructor(e,t=null,s=[],o=[],u=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function vb(i,e=null,t=[],s=[],o=null,u=null,c=null){return new bR(i,e,t,s,o,u,c)}function fp(i){const e=Ve(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Dg(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Yu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>el(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>el(s))).join(",")),e.Te=t}return e.Te}function dp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!hR(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!D1(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!_b(i.startAt,e.startAt)&&_b(i.endAt,e.endAt)}function Og(i){return xe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class Xu{constructor(e,t=null,s=[],o=[],u=null,c="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ER(i,e,t,s,o,u,c,m){return new Xu(i,e,t,s,o,u,c,m)}function mp(i){return new Xu(i)}function bb(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function k1(i){return i.collectionGroup!==null}function bu(i){const e=Ve(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new gn(Mn.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new rf(u,s))})),t.has(Mn.keyField().canonicalString())||e.Ie.push(new rf(Mn.keyField(),s))}return e.Ie}function Er(i){const e=Ve(i);return e.Ee||(e.Ee=TR(e,bu(i))),e.Ee}function TR(i,e){if(i.limitType==="F")return vb(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new rf(o.field,u)}));const t=i.endAt?new nf(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new nf(i.startAt.position,i.startAt.inclusive):null;return vb(i.path,i.collectionGroup,e,i.filters,i.limit,t,s)}}function Mg(i,e){const t=i.filters.concat([e]);return new Xu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function kg(i,e,t){return new Xu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function If(i,e){return dp(Er(i),Er(e))&&i.limitType===e.limitType}function V1(i){return`${fp(Er(i))}|lt:${i.limitType}`}function jo(i){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>O1(o))).join(", ")}]`),Yu(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>el(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>el(o))).join(",")),`Target(${s})`})(Er(i))}; limitType=${i.limitType})`}function Df(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):xe.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of bu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(c,m,g){const p=yb(c,m,g);return c.inclusive?p<=0:p<0})(s.startAt,bu(s),o)||s.endAt&&!(function(c,m,g){const p=yb(c,m,g);return c.inclusive?p>=0:p>0})(s.endAt,bu(s),o))})(i,e)}function wR(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function P1(i){return(e,t)=>{let s=!1;for(const o of bu(i)){const u=SR(o,e,t);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function SR(i,e,t){const s=i.field.isKeyField()?xe.comparator(e.key,t.key):(function(u,c,m){const g=c.data.field(u),p=m.data.field(u);return g!==null&&p!==null?Wo(g,p):Ce(42886)})(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ce(19790,{direction:i.dir})}}class Ya{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ha(this.inner,((t,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return v1(this.inner)}size(){return this.innerSize}}const AR=new Lt(xe.comparator);function es(){return AR}const L1=new Lt(xe.comparator);function hu(...i){let e=L1;for(const t of i)e=e.insert(t.key,t);return e}function j1(i){let e=L1;return i.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function qa(){return Eu()}function U1(){return Eu()}function Eu(){return new Ya((i=>i.toString()),((i,e)=>i.isEqual(e)))}const xR=new Lt(xe.comparator),RR=new gn(xe.comparator);function Ze(...i){let e=RR;for(const t of i)e=e.add(t);return e}const CR=new gn(Je);function NR(){return CR}function gp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wh(e)?"-0":e}}function z1(i){return{integerValue:""+i}}function IR(i,e){return iR(e)?z1(e):gp(i,e)}class Of{constructor(){this._=void 0}}function DR(i,e,t){return i instanceof sf?(function(o,u){const c={fields:{[T1]:{stringValue:E1},[S1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&cp(u)&&(u=Nf(u)),u&&(c.fields[w1]=u),{mapValue:c}})(t,e):i instanceof ju?q1(i,e):i instanceof Uu?H1(i,e):(function(o,u){const c=B1(o,u),m=Eb(c)+Eb(o.Ae);return Ig(c)&&Ig(o.Ae)?z1(m):gp(o.serializer,m)})(i,e)}function OR(i,e,t){return i instanceof ju?q1(i,e):i instanceof Uu?H1(i,e):t}function B1(i,e){return i instanceof af?(function(s){return Ig(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class sf extends Of{}class ju extends Of{constructor(e){super(),this.elements=e}}function q1(i,e){const t=F1(e);for(const s of i.elements)t.some((o=>xr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class Uu extends Of{constructor(e){super(),this.elements=e}}function H1(i,e){let t=F1(e);for(const s of i.elements)t=t.filter((o=>!xr(o,s)));return{arrayValue:{values:t}}}class af extends Of{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Eb(i){return Xt(i.integerValue||i.doubleValue)}function F1(i){return hp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function MR(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof ju&&o instanceof ju||s instanceof Uu&&o instanceof Uu?Zo(s.elements,o.elements,xr):s instanceof af&&o instanceof af?xr(s.Ae,o.Ae):s instanceof sf&&o instanceof sf})(i.transform,e.transform)}class kR{constructor(e,t){this.version=e,this.transformResults=t}}class Wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Mf{}function G1(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new pp(i.key,Wn.none()):new Ju(i.key,i.data,Wn.none());{const t=i.data,s=Zn.empty();let o=new gn(Mn.comparator);for(let u of e.fields)if(!o.has(u)){let c=t.field(u);c===null&&u.length>1&&(u=u.popLast(),c=t.field(u)),c===null?s.delete(u):s.set(u,c),o=o.add(u)}return new fa(i.key,s,new Ti(o.toArray()),Wn.none())}}function VR(i,e,t){i instanceof Ju?(function(o,u,c){const m=o.value.clone(),g=wb(o.fieldTransforms,u,c.transformResults);m.setAll(g),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(i,e,t):i instanceof fa?(function(o,u,c){if(!Bh(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=wb(o.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(K1(o)),g.setAll(m),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(i,e,t):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Tu(i,e,t,s){return i instanceof Ju?(function(u,c,m,g){if(!Bh(u.precondition,c))return m;const p=u.value.clone(),v=Sb(u.fieldTransforms,g,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(i,e,t,s):i instanceof fa?(function(u,c,m,g){if(!Bh(u.precondition,c))return m;const p=Sb(u.fieldTransforms,g,c),v=c.data;return v.setAll(K1(u)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(i,e,t,s):(function(u,c,m){return Bh(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(i,e,t)}function PR(i,e){let t=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=B1(s.transform,o||null);u!=null&&(t===null&&(t=Zn.empty()),t.set(s.field,u))}return t||null}function Tb(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Zo(s,o,((u,c)=>MR(u,c)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Ju extends Mf{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class fa extends Mf{constructor(e,t,s,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function K1(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}})),e}function wb(i,e,t){const s=new Map;it(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let o=0;o<t.length;o++){const u=i[o],c=u.transform,m=e.data.field(u.field);s.set(u.field,OR(c,m,t[o]))}return s}function Sb(i,e,t){const s=new Map;for(const o of i){const u=o.transform,c=t.data.field(o.field);s.set(o.field,DR(u,c,e))}return s}class pp extends Mf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $1 extends Mf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class LR{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&VR(u,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Tu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Tu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=U1();return this.mutations.forEach((o=>{const u=e.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=t.has(o.key)?null:m;const g=G1(c,m);g!==null&&s.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(Ie.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&Zo(this.mutations,e.mutations,((t,s)=>Tb(t,s)))&&Zo(this.baseMutations,e.baseMutations,((t,s)=>Tb(t,s)))}}class yp{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){it(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return xR})();const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,s[c].version);return new yp(e,t,s,o)}}class jR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class UR{constructor(e,t){this.count=e,this.unchangedNames=t}}var on,nt;function Q1(i){switch(i){case oe.OK:return Ce(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Ce(15467,{code:i})}}function Y1(i){if(i===void 0)return Wr("GRPC error has no .code"),oe.UNKNOWN;switch(i){case on.OK:return oe.OK;case on.CANCELLED:return oe.CANCELLED;case on.UNKNOWN:return oe.UNKNOWN;case on.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case on.INTERNAL:return oe.INTERNAL;case on.UNAVAILABLE:return oe.UNAVAILABLE;case on.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case on.NOT_FOUND:return oe.NOT_FOUND;case on.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case on.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case on.ABORTED:return oe.ABORTED;case on.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case on.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case on.DATA_LOSS:return oe.DATA_LOSS;default:return Ce(39323,{code:i})}}(nt=on||(on={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";function zR(){return new TextEncoder}const BR=new Ws([4294967295,4294967295],0);function Ab(i){const e=zR().encode(i),t=new l1;return t.update(e),new Uint8Array(t.digest())}function xb(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ws([t,s],0),new Ws([o,u],0)]}class _p{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new fu(`Invalid padding: ${t}`);if(s<0)throw new fu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new fu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new fu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ws.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Ws.fromNumber(s)));return o.compare(BR)===1&&(o=new Ws([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Ab(e),[s,o]=xb(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(s,o,u);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new _p(u,o,t);return s.forEach((m=>c.insert(m))),c}insert(e){if(this.ge===0)return;const t=Ab(e),[s,o]=xb(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(s,o,u);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class fu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class kf{constructor(e,t,s,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Zu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new kf(Ie.min(),o,new Lt(Je),es(),Ze())}}class Zu{constructor(e,t,s,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Zu(s,t,Ze(),Ze(),Ze())}}class qh{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class X1{constructor(e,t){this.targetId=e,this.Ce=t}}class J1{constructor(e,t,s=kn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Rb{constructor(){this.ve=0,this.Fe=Cb(),this.Me=kn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),t=Ze(),s=Ze();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ce(38017,{changeType:u})}})),new Zu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=Cb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class qR{constructor(e){this.Ge=e,this.ze=new Map,this.je=es(),this.Je=Oh(),this.He=Oh(),this.Ye=new Lt(Je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(Og(u))if(s===0){const c=new xe(u.path);this.et(t,c,Tn.newNoDocument(c,Ie.min()))}else it(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const m=this.ut(e),g=m?this.ct(m,e,c):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=t;let c,m;try{c=aa(s).toUint8Array()}catch(g){if(g instanceof b1)return Jo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new _p(c,o,u)}catch(g){return Jo(g instanceof fu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&Og(m.target)){const g=new xe(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,Tn.newNoDocument(g,e))}u.Be&&(t.set(c,u.ke()),u.qe())}}));let s=Ze();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(e)));const o=new kf(e,t,this.Ye,this.je,s);return this.je=es(),this.Je=Oh(),this.He=Oh(),this.Ye=new Lt(Je),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Rb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new gn(Je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new gn(Je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Rb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Oh(){return new Lt(xe.comparator)}function Cb(){return new Lt(xe.comparator)}const HR={asc:"ASCENDING",desc:"DESCENDING"},FR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GR={and:"AND",or:"OR"};class KR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Vg(i,e){return i.useProto3Json||Yu(e)?e:{value:e}}function of(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Z1(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function $R(i,e){return of(i,e.toTimestamp())}function wi(i){return it(!!i,49232),Ie.fromTimestamp((function(t){const s=sa(t);return new It(s.seconds,s.nanos)})(i))}function vp(i,e){return Pg(i,e).canonicalString()}function Pg(i,e){const t=(function(o){return new Et(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?t:t.child(e)}function W1(i){const e=Et.fromString(i);return it(sT(e),10190,{key:e.toString()}),e}function lf(i,e){return vp(i.databaseId,e.path)}function wu(i,e){const t=W1(e);if(t.get(1)!==i.databaseId.projectId)throw new pe(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new pe(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new xe(tT(t))}function eT(i,e){return vp(i.databaseId,e)}function QR(i){const e=W1(i);return e.length===4?Et.emptyPath():tT(e)}function Lg(i){return new Et(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function tT(i){return it(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Nb(i,e,t){return{name:lf(i,e),fields:t.value.mapValue.fields}}function YR(i,e){return"found"in e?(function(s,o){it(!!o.found,43571),o.found.name,o.found.updateTime;const u=wu(s,o.found.name),c=wi(o.found.updateTime),m=o.found.createTime?wi(o.found.createTime):Ie.min(),g=new Zn({mapValue:{fields:o.found.fields}});return Tn.newFoundDocument(u,c,m,g)})(i,e):"missing"in e?(function(s,o){it(!!o.missing,3894),it(!!o.readTime,22933);const u=wu(s,o.missing),c=wi(o.readTime);return Tn.newNoDocument(u,c)})(i,e):Ce(7234,{result:e})}function XR(i,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ce(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,v){return p.useProto3Json?(it(v===void 0||typeof v=="string",58123),kn.fromBase64String(v||"")):(it(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),kn.fromUint8Array(v||new Uint8Array))})(i,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&(function(p){const v=p.code===void 0?oe.UNKNOWN:Y1(p.code);return new pe(v,p.message||"")})(c);t=new J1(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=wu(i,s.document.name),u=wi(s.document.updateTime),c=s.document.createTime?wi(s.document.createTime):Ie.min(),m=new Zn({mapValue:{fields:s.document.fields}}),g=Tn.newFoundDocument(o,u,c,m),p=s.targetIds||[],v=s.removedTargetIds||[];t=new qh(p,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=wu(i,s.document),u=s.readTime?wi(s.readTime):Ie.min(),c=Tn.newNoDocument(o,u),m=s.removedTargetIds||[];t=new qh([],m,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=wu(i,s.document),u=s.removedTargetIds||[];t=new qh([],u,o,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,c=new UR(o,u),m=s.targetId;t=new X1(m,c)}}return t}function nT(i,e){let t;if(e instanceof Ju)t={update:Nb(i,e.key,e.value)};else if(e instanceof pp)t={delete:lf(i,e.key)};else if(e instanceof fa)t={update:Nb(i,e.key,e.data),updateMask:sC(e.fieldMask)};else{if(!(e instanceof $1))return Ce(16599,{Vt:e.type});t={verify:lf(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(u,c){const m=c.transform;if(m instanceof sf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ju)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Uu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof af)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw Ce(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:$R(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ce(27497)})(i,e.precondition)),t}function JR(i,e){return i&&i.length>0?(it(e!==void 0,14353),i.map((t=>(function(o,u){let c=o.updateTime?wi(o.updateTime):wi(u);return c.isEqual(Ie.min())&&(c=wi(u)),new kR(c,o.transformResults||[])})(t,e)))):[]}function ZR(i,e){return{documents:[eT(i,e.path)]}}function WR(i,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=eT(i,o);const u=(function(p){if(p.length!==0)return rT(rr.create(p,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const c=(function(p){if(p.length!==0)return p.map((v=>(function(S){return{field:Uo(S.field),direction:nC(S.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const m=Vg(i,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function eC(i){let e=QR(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){it(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let u=[];t.where&&(u=(function(E){const S=iT(E);return S instanceof rr&&I1(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((S=>(function(k){return new rf(zo(k.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(S)))})(t.orderBy));let m=null;t.limit&&(m=(function(E){let S;return S=typeof E=="object"?E.value:E,Yu(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(E){const S=!!E.before,N=E.values||[];return new nf(N,S)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const S=!E.before,N=E.values||[];return new nf(N,S)})(t.endAt)),ER(e,o,c,u,m,"F",g,p)}function tC(i,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function iT(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=zo(t.unaryFilter.field);return ln.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=zo(t.unaryFilter.field);return ln.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=zo(t.unaryFilter.field);return ln.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=zo(t.unaryFilter.field);return ln.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(i):i.fieldFilter!==void 0?(function(t){return ln.create(zo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return rr.create(t.compositeFilter.filters.map((s=>iT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(i):Ce(30097,{filter:i})}function nC(i){return HR[i]}function iC(i){return FR[i]}function rC(i){return GR[i]}function Uo(i){return{fieldPath:i.canonicalString()}}function zo(i){return Mn.fromServerFormat(i.fieldPath)}function rT(i){return i instanceof ln?(function(t){if(t.op==="=="){if(pb(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NAN"}};if(gb(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(pb(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NOT_NAN"}};if(gb(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uo(t.field),op:iC(t.op),value:t.value}}})(i):i instanceof rr?(function(t){const s=t.getFilters().map((o=>rT(o)));return s.length===1?s[0]:{compositeFilter:{op:rC(t.op),filters:s}}})(i):Ce(54877,{filter:i})}function sC(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function sT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class Ys{constructor(e,t,s,o,u=Ie.min(),c=Ie.min(),m=kn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class aC{constructor(e){this.yt=e}}function oC(i){const e=eC({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?kg(e,e.limit,"L"):e}class lC{constructor(){this.Cn=new uC}addToCollectionParentIndex(e,t){return this.Cn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(ra.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(ra.min())}updateCollectionGroup(e,t,s){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class uC{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new gn(Et.comparator),u=!o.has(s);return this.index[t]=o.add(s),u}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new gn(Et.comparator)).toArray()}}const Ib={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aT=41943040;class hi{static withCacheSize(e){return new hi(e,hi.DEFAULT_COLLECTION_PERCENTILE,hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}hi.DEFAULT_COLLECTION_PERCENTILE=10,hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hi.DEFAULT=new hi(aT,hi.DEFAULT_COLLECTION_PERCENTILE,hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hi.DISABLED=new hi(-1,0,0);class tl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new tl(0)}static cr(){return new tl(-1)}}const Db="LruGarbageCollector",cC=1048576;function Ob([i,e],[t,s]){const o=Je(i,t);return o===0?Je(e,s):o}class hC{constructor(e){this.Ir=e,this.buffer=new gn(Ob),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Ob(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fC{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(Db,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){cl(t)?ve(Db,"Ignoring IndexedDB error during garbage collection: ",t):await ul(t)}await this.Vr(3e5)}))}}class dC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(Cf.ce);const s=new hC(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(Ib)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ib):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,u,c,m,g,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,m=Date.now(),this.removeTargets(e,s,t)))).next((E=>(u=E,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(p=Date.now(),Lo()<=Xe.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${E} documents in `+(p-g)+`ms
Total Duration: ${p-v}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:E}))))}}function mC(i,e){return new dC(i,e)}class gC{constructor(){this.changes=new Ya((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ue.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class pC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class yC{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Tu(s.mutation,o,Ti.empty(),It.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Ze()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Ze()){const o=qa();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((u=>{let c=hu();return u.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=qa();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Ze())))}populateOverlays(e,t,s){const o=[];return s.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((c,m)=>{t.set(c,m)}))}))}computeViews(e,t,s,o){let u=es();const c=Eu(),m=(function(){return Eu()})();return t.forEach(((g,p)=>{const v=s.get(p.key);o.has(p.key)&&(v===void 0||v.mutation instanceof fa)?u=u.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),Tu(v.mutation,p,v.mutation.getFieldMask(),It.now())):c.set(p.key,Ti.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((p,v)=>c.set(p,v))),t.forEach(((p,v)=>m.set(p,new pC(v,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,t){const s=Eu();let o=new Lt(((c,m)=>c-m)),u=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const m of c)m.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let v=s.get(g)||Ti.empty();v=m.applyToLocalView(p,v),s.set(g,v);const E=(o.get(m.batchId)||Ze()).add(g);o=o.insert(m.batchId,E)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,v=g.value,E=U1();v.forEach((S=>{if(!u.has(S)){const N=G1(t.get(S),s.get(S));N!==null&&E.set(S,N),u=u.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,E))}return ue.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(c){return xe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):k1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-u.size):ue.resolve(qa());let m=ku,g=u;return c.next((p=>ue.forEach(p,((v,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),u.get(v)?ue.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{g=g.insert(v,S)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,g,p,Ze()))).next((v=>({batchId:m,changes:j1(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next((s=>{let o=hu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const u=t.collectionGroup;let c=hu();return this.indexManager.getCollectionParents(e,u).next((m=>ue.forEach(m,(g=>{const p=(function(E,S){return new Xu(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,s,o).next((v=>{v.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,u,o)))).next((c=>{u.forEach(((g,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,Tn.newInvalidDocument(v)))}));let m=hu();return c.forEach(((g,p)=>{const v=u.get(g);v!==void 0&&Tu(v.mutation,p,Ti.empty(),It.now()),Df(t,p)&&(m=m.insert(g,p))})),m}))}}class _C{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ue.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:wi(o.createTime)}})(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:oC(o.bundledQuery),readTime:wi(o.readTime)}})(t)),ue.resolve()}}class vC{constructor(){this.overlays=new Lt(xe.comparator),this.qr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const s=qa();return ue.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,u)=>{this.St(e,t,u)})),ue.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),ue.resolve()}getOverlaysForCollection(e,t,s){const o=qa(),u=t.length+1,c=new xe(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return ue.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let u=new Lt(((p,v)=>p-v));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let v=u.get(p.largestBatchId);v===null&&(v=qa(),u=u.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const m=qa(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,v)=>m.set(p,v))),!(m.size()>=o)););return ue.resolve(m)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new jR(t,s));let u=this.qr.get(t);u===void 0&&(u=Ze(),this.qr.set(t,u)),this.qr.set(t,u.add(s.key))}}class bC{constructor(){this.sessionToken=kn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}class bp{constructor(){this.Qr=new gn(bn.$r),this.Ur=new gn(bn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new bn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new bn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new xe(new Et([])),s=new bn(t,e),o=new bn(t,e+1),u=[];return this.Ur.forEachInRange([s,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new xe(new Et([])),s=new bn(t,e),o=new bn(t,e+1);let u=Ze();return this.Ur.forEachInRange([s,o],(c=>{u=u.add(c.key)})),u}containsKey(e){const t=new bn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class bn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return xe.comparator(e.key,t.key)||Je(e.Yr,t.Yr)}static Kr(e,t){return Je(e.Yr,t.Yr)||xe.comparator(e.key,t.key)}}class EC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new gn(bn.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new LR(u,t,s,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new bn(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ue.resolve(c)}lookupMutationBatch(e,t){return ue.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),u=o<0?0:o;return ue.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?up:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new bn(t,0),o=new bn(t,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(c=>{const m=this.Xr(c.Yr);u.push(m)})),ue.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new gn(Je);return t.forEach((o=>{const u=new bn(o,0),c=new bn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{s=s.add(m.Yr)}))})),ue.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let u=s;xe.isDocumentKey(u)||(u=u.child(""));const c=new bn(new xe(u),0);let m=new gn(Je);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),c),ue.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){it(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ue.forEach(t.mutations,(o=>{const u=new bn(o.key,t.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new bn(t,0),o=this.Zr.firstAfterOrEqual(s);return ue.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class TC{constructor(e){this.ri=e,this.docs=(function(){return new Lt(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),u=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ue.resolve(s?s.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let s=es();return t.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Tn.newInvalidDocument(o))})),ue.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let u=es();const c=t.path,m=new xe(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:v}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||W2(Z2(v),s)<=0||(o.has(v.key)||Df(t,v))&&(u=u.insert(v.key,v.mutableCopy()))}return ue.resolve(u)}getAllFromCollectionGroup(e,t,s,o){Ce(9500)}ii(e,t){return ue.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new wC(this)}getSize(e){return ue.resolve(this.size)}}class wC extends gC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ue.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class SC{constructor(e){this.persistence=e,this.si=new Ya((t=>fp(t)),dp),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.oi=0,this._i=new bp,this.targetCount=0,this.ai=tl.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ue.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new tl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Pr(t),ue.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,s){let o=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ue.waitFor(u).next((()=>o))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ue.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ue.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((c=>{u.push(o.markPotentiallyOrphaned(e,c))})),ue.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ue.resolve(s)}containsKey(e,t){return ue.resolve(this._i.containsKey(t))}}class oT{constructor(e,t){this.ui={},this.overlays={},this.ci=new Cf(0),this.li=!1,this.li=!0,this.hi=new bC,this.referenceDelegate=e(this),this.Pi=new SC(this),this.indexManager=new lC,this.remoteDocumentCache=(function(o){return new TC(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new aC(t),this.Ii=new _C(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new EC(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ve("MemoryPersistence","Starting transaction:",e);const o=new AC(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,t){return ue.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class AC extends tR{constructor(e){super(),this.currentSequenceNumber=e}}class Ep{constructor(e){this.persistence=e,this.Ri=new bp,this.Vi=null}static mi(e){return new Ep(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ue.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(s=>{const o=xe.fromPath(s);return this.gi(e,o).next((u=>{u||t.removeEntry(o,Ie.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ue.or([()=>ue.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class uf{constructor(e,t){this.persistence=e,this.pi=new Ya((s=>rR(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=mC(this,t)}static mi(e,t){return new uf(e,t)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return ue.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?ue.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((m=>{m||(s++,u.removeEntry(c,Ie.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Uh(e.data.value)),t}br(e,t,s){return ue.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ue.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Tp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Ze(),o=Ze();for(const u of t.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Tp(e,t.fromCache,s,o)}}class xC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class RC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Tx()?8:nR(qn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const u={result:null};return this.ys(e,t).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(e,t,o,s).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new xC;return this.Ss(e,t,c).next((m=>{if(u.result=m,this.Vs)return this.bs(e,t,c,m.size)}))})).next((()=>u.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(Lo()<=Xe.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",jo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(Lo()<=Xe.DEBUG&&ve("QueryEngine","Query:",jo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Lo()<=Xe.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",jo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Er(t))):ue.resolve())}ys(e,t){if(bb(t))return ue.resolve(null);let s=Er(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=kg(t,null,"F"),s=Er(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const c=Ze(...u);return this.ps.getDocuments(e,c).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const p=this.Ds(t,m);return this.Cs(t,p,c,g.readTime)?this.ys(e,kg(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,s,o){return bb(t)||o.isEqual(Ie.min())?ue.resolve(null):this.ps.getDocuments(e,s).next((u=>{const c=this.Ds(t,u);return this.Cs(t,c,s,o)?ue.resolve(null):(Lo()<=Xe.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),jo(t)),this.vs(e,c,t,J2(o,ku)).next((m=>m)))}))}Ds(e,t){let s=new gn(P1(e));return t.forEach(((o,u)=>{Df(e,u)&&(s=s.add(u))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,t,s){return Lo()<=Xe.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",jo(t)),this.ps.getDocumentsMatchingQuery(e,t,ra.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(t.forEach((c=>{u=u.insert(c.key,c)})),u)))}}const wp="LocalStore",CC=3e8;class NC{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Lt(Je),this.xs=new Ya((u=>fp(u)),dp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function IC(i,e,t,s){return new NC(i,e,t,s)}async function lT(i,e){const t=Ve(i);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((u=>{const c=[],m=[];let g=Ze();for(const p of o){c.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}for(const p of u){m.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function DC(i,e){const t=Ve(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,v){const E=p.batch,S=E.keys();let N=ue.resolve();return S.forEach((k=>{N=N.next((()=>v.getEntry(g,k))).next((z=>{const D=p.docVersions.get(k);it(D!==null,48541),z.version.compareTo(D)<0&&(E.applyToRemoteDocument(z,p),z.isValidDocument()&&(z.setReadTime(p.commitVersion),v.addEntry(z)))}))})),N.next((()=>m.mutationQueue.removeMutationBatch(g,E)))})(t,s,e,u).next((()=>u.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=Ze();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function uT(i){const e=Ve(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function OC(i,e){const t=Ve(i),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((v,E)=>{const S=o.get(E);if(!S)return;m.push(t.Pi.removeMatchingKeys(u,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(u,v.addedDocuments,E))));let N=S.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(E)!==null?N=N.withResumeToken(kn.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,s)),o=o.insert(E,N),(function(z,D,B){return z.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=CC?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(S,N,v)&&m.push(t.Pi.updateTargetData(u,N))}));let g=es(),p=Ze();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,v))})),m.push(MC(u,c,e.documentUpdates).next((v=>{g=v.ks,p=v.qs}))),!s.isEqual(Ie.min())){const v=t.Pi.getLastRemoteSnapshotVersion(u).next((E=>t.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(v)}return ue.waitFor(m).next((()=>c.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(t.Ms=o,u)))}function MC(i,e,t){let s=Ze(),o=Ze();return t.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let c=es();return t.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ie.min())?(e.removeEntry(m,g.readTime),c=c.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(m,g)):ve(wp,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:o}}))}function kC(i,e){const t=Ve(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=up),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function VC(i,e){const t=Ve(i);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((u=>u?(o=u,ue.resolve(o)):t.Pi.allocateTargetId(s).next((c=>(o=new Ys(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function jg(i,e,t){const s=Ve(i),o=s.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",u,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!cl(c))throw c;ve(wp,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function Mb(i,e,t){const s=Ve(i);let o=Ie.min(),u=Ze();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,v){const E=Ve(g),S=E.xs.get(v);return S!==void 0?ue.resolve(E.Ms.get(S)):E.Pi.getTargetData(p,v)})(s,c,Er(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{u=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?o:Ie.min(),t?u:Ze()))).next((m=>(PC(s,wR(e),m),{documents:m,Qs:u})))))}function PC(i,e,t){let s=i.Os.get(e)||Ie.min();t.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(e,s)}class kb{constructor(){this.activeTargetIds=NR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LC{constructor(){this.Mo=new kb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new kb,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class jC{Oo(e){}shutdown(){}}const Vb="ConnectivityMonitor";class Pb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(Vb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(Vb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Mh=null;function Ug(){return Mh===null?Mh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Mh++,"0x"+Mh.toString(16)}const rg="RestConnection",UC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===ef?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,u){const c=Ug(),m=this.zo(e,t.toUriEncodedString());ve(rg,`Sending RPC '${e}' ${c}:`,m,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(m),v=al(p);return this.Jo(e,m,g,s,v).then((E=>(ve(rg,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Jo(rg,`RPC '${e}' ${c} failed with error: `,E,"url: ",m,"request:",s),E}))}Ho(e,t,s,o,u,c){return this.Go(e,t,s,o,u)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ll})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,t){const s=UC[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class BC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Un="WebChannelConnection";class qC extends zC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,u){const c=Ug();return new Promise(((m,g)=>{const p=new u1;p.setWithCredentials(!0),p.listenOnce(c1.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case jh.NO_ERROR:const E=p.getResponseJson();ve(Un,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),m(E);break;case jh.TIMEOUT:ve(Un,`RPC '${e}' ${c} timed out`),g(new pe(oe.DEADLINE_EXCEEDED,"Request time out"));break;case jh.HTTP_ERROR:const S=p.getStatus();if(ve(Un,`RPC '${e}' ${c} failed with status:`,S,"response text:",p.getResponseText()),S>0){let N=p.getResponseJson();Array.isArray(N)&&(N=N[0]);const k=N?.error;if(k&&k.status&&k.message){const z=(function(B){const ne=B.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(ne)>=0?ne:oe.UNKNOWN})(k.status);g(new pe(z,k.message))}else g(new pe(oe.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new pe(oe.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ve(Un,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(o);ve(Un,`RPC '${e}' ${c} sending request:`,o),p.send(t,"POST",v,s,15)}))}T_(e,t,s){const o=Ug(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=d1(),m=f1(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=u.join("");ve(Un,`Creating RPC '${e}' stream ${o}: ${v}`,g);const E=c.createWebChannel(v,g);this.I_(E);let S=!1,N=!1;const k=new BC({Yo:D=>{N?ve(Un,`Not sending because RPC '${e}' stream ${o} is closed:`,D):(S||(ve(Un,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),ve(Un,`RPC '${e}' stream ${o} sending:`,D),E.send(D))},Zo:()=>E.close()}),z=(D,B,ne)=>{D.listen(B,(Z=>{try{ne(Z)}catch(ce){setTimeout((()=>{throw ce}),0)}}))};return z(E,cu.EventType.OPEN,(()=>{N||(ve(Un,`RPC '${e}' stream ${o} transport opened.`),k.o_())})),z(E,cu.EventType.CLOSE,(()=>{N||(N=!0,ve(Un,`RPC '${e}' stream ${o} transport closed`),k.a_(),this.E_(E))})),z(E,cu.EventType.ERROR,(D=>{N||(N=!0,Jo(Un,`RPC '${e}' stream ${o} transport errored. Name:`,D.name,"Message:",D.message),k.a_(new pe(oe.UNAVAILABLE,"The operation could not be completed")))})),z(E,cu.EventType.MESSAGE,(D=>{if(!N){const B=D.data[0];it(!!B,16349);const ne=B,Z=ne?.error||ne[0]?.error;if(Z){ve(Un,`RPC '${e}' stream ${o} received error:`,Z);const ce=Z.status;let ie=(function(R){const C=on[R];if(C!==void 0)return Y1(C)})(ce),W=Z.message;ie===void 0&&(ie=oe.INTERNAL,W="Unknown error status: "+ce+" with message "+Z.message),N=!0,k.a_(new pe(ie,W)),E.close()}else ve(Un,`RPC '${e}' stream ${o} received:`,B),k.u_(B)}})),z(m,h1.STAT_EVENT,(D=>{D.stat===Rg.PROXY?ve(Un,`RPC '${e}' stream ${o} detected buffering proxy`):D.stat===Rg.NOPROXY&&ve(Un,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function sg(){return typeof document<"u"?document:null}function Vf(i){return new KR(i,!0)}class Sp{constructor(e,t,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Lb="PersistentStream";class cT{constructor(e,t,s,o,u,c,m,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Sp(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(Wr(t.toString()),Wr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new pe(oe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(Lb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ve(Lb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class HC extends cT{constructor(e,t,s,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=XR(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Ie.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?Ie.min():c.readTime?wi(c.readTime):Ie.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Lg(this.serializer),t.addTarget=(function(u,c){let m;const g=c.target;if(m=Og(g)?{documents:ZR(u,g)}:{query:WR(u,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=Z1(u,c.resumeToken);const p=Vg(u,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(Ie.min())>0){m.readTime=of(u,c.snapshotVersion.toTimestamp());const p=Vg(u,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const s=tC(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Lg(this.serializer),t.removeTarget=e,this.q_(t)}}class FC extends cT{constructor(e,t,s,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=JR(e.writeResults,e.commitTime),s=wi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Lg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>nT(this.serializer,s)))};this.q_(t)}}class GC{}class KC extends GC{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new pe(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(e,Pg(t,s),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(oe.UNKNOWN,u.toString())}))}Ho(e,t,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(e,Pg(t,s),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(oe.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class $C{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wr(t),this.aa=!1):ve("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const $a="RemoteStore";class QC{constructor(e,t,s,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Xa(this)&&(ve($a,"Restarting streams for network reachability change."),await(async function(g){const p=Ve(g);p.Ea.add(4),await Wu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Pf(p)})(this))}))})),this.Ra=new $C(s,o)}}async function Pf(i){if(Xa(i))for(const e of i.da)await e(!0)}async function Wu(i){for(const e of i.da)await e(!1)}function hT(i,e){const t=Ve(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Cp(t)?Rp(t):hl(t).O_()&&xp(t,e))}function Ap(i,e){const t=Ve(i),s=hl(t);t.Ia.delete(e),s.O_()&&fT(t,e),t.Ia.size===0&&(s.O_()?s.L_():Xa(t)&&t.Ra.set("Unknown"))}function xp(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hl(i).Y_(e)}function fT(i,e){i.Va.Ue(e),hl(i).Z_(e)}function Rp(i){i.Va=new qR({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),hl(i).start(),i.Ra.ua()}function Cp(i){return Xa(i)&&!hl(i).x_()&&i.Ia.size>0}function Xa(i){return Ve(i).Ea.size===0}function dT(i){i.Va=void 0}async function YC(i){i.Ra.set("Online")}async function XC(i){i.Ia.forEach(((e,t)=>{xp(i,e)}))}async function JC(i,e){dT(i),Cp(i)?(i.Ra.ha(e),Rp(i)):i.Ra.set("Unknown")}async function ZC(i,e,t){if(i.Ra.set("Online"),e instanceof J1&&e.state===2&&e.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(i,e)}catch(s){ve($a,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await cf(i,s)}else if(e instanceof qh?i.Va.Ze(e):e instanceof X1?i.Va.st(e):i.Va.tt(e),!t.isEqual(Ie.min()))try{const s=await uT(i.localStore);t.compareTo(s)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const v=u.Ia.get(p);v&&u.Ia.set(p,v.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,p)=>{const v=u.Ia.get(g);if(!v)return;u.Ia.set(g,v.withResumeToken(kn.EMPTY_BYTE_STRING,v.snapshotVersion)),fT(u,g);const E=new Ys(v.target,g,p,v.sequenceNumber);xp(u,E)})),u.remoteSyncer.applyRemoteEvent(m)})(i,t)}catch(s){ve($a,"Failed to raise snapshot:",s),await cf(i,s)}}async function cf(i,e,t){if(!cl(e))throw e;i.Ea.add(1),await Wu(i),i.Ra.set("Offline"),t||(t=()=>uT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{ve($a,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await Pf(i)}))}function mT(i,e){return e().catch((t=>cf(i,t,e)))}async function Lf(i){const e=Ve(i),t=la(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:up;for(;WC(e);)try{const o=await kC(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,eN(e,o)}catch(o){await cf(e,o)}gT(e)&&pT(e)}function WC(i){return Xa(i)&&i.Ta.length<10}function eN(i,e){i.Ta.push(e);const t=la(i);t.O_()&&t.X_&&t.ea(e.mutations)}function gT(i){return Xa(i)&&!la(i).x_()&&i.Ta.length>0}function pT(i){la(i).start()}async function tN(i){la(i).ra()}async function nN(i){const e=la(i);for(const t of i.Ta)e.ea(t.mutations)}async function iN(i,e,t){const s=i.Ta.shift(),o=yp.from(s,e,t);await mT(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Lf(i)}async function rN(i,e){e&&la(i).X_&&await(async function(s,o){if((function(c){return Q1(c)&&c!==oe.ABORTED})(o.code)){const u=s.Ta.shift();la(s).B_(),await mT(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Lf(s)}})(i,e),gT(i)&&pT(i)}async function jb(i,e){const t=Ve(i);t.asyncQueue.verifyOperationInProgress(),ve($a,"RemoteStore received new credentials");const s=Xa(t);t.Ea.add(3),await Wu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Pf(t)}async function sN(i,e){const t=Ve(i);e?(t.Ea.delete(2),await Pf(t)):e||(t.Ea.add(2),await Wu(t),t.Ra.set("Unknown"))}function hl(i){return i.ma||(i.ma=(function(t,s,o){const u=Ve(t);return u.sa(),new HC(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:YC.bind(null,i),t_:XC.bind(null,i),r_:JC.bind(null,i),H_:ZC.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Cp(i)?Rp(i):i.Ra.set("Unknown")):(await i.ma.stop(),dT(i))}))),i.ma}function la(i){return i.fa||(i.fa=(function(t,s,o){const u=Ve(t);return u.sa(),new FC(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:tN.bind(null,i),r_:rN.bind(null,i),ta:nN.bind(null,i),na:iN.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Lf(i)):(await i.fa.stop(),i.Ta.length>0&&(ve($a,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class Np{constructor(e,t,s,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new ea,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,u){const c=Date.now()+s,m=new Np(e,t,c,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ip(i,e){if(Wr("AsyncQueue",`${e}: ${i}`),cl(i))return new pe(oe.UNAVAILABLE,`${e}: ${i}`);throw i}class Ho{static emptySet(e){return new Ho(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||xe.comparator(t.key,s.key):(t,s)=>xe.comparator(t.key,s.key),this.keyedMap=hu(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ho)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Ho;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Ub{constructor(){this.ga=new Lt(xe.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class nl{constructor(e,t,s,o,u,c,m,g,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,o,u){const c=[];return t.forEach((m=>{c.push({type:0,doc:m})})),new nl(e,t,Ho.emptySet(t),c,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&If(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class aN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class oN{constructor(){this.queries=zb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Ve(t),u=o.queries;o.queries=zb(),u.forEach(((c,m)=>{for(const g of m.Sa)g.onError(s)}))})(this,new pe(oe.ABORTED,"Firestore shutting down"))}}function zb(){return new Ya((i=>V1(i)),If)}async function lN(i,e){const t=Ve(i);let s=3;const o=e.query;let u=t.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new aN,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const m=Ip(c,`Initialization of query '${jo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.Sa.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&Dp(t)}async function uN(i,e){const t=Ve(i),s=e.query;let o=3;const u=t.queries.get(s);if(u){const c=u.Sa.indexOf(e);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function cN(i,e){const t=Ve(i);let s=!1;for(const o of e){const u=o.query,c=t.queries.get(u);if(c){for(const m of c.Sa)m.Fa(o)&&(s=!0);c.wa=o}}s&&Dp(t)}function hN(i,e,t){const s=Ve(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(t);s.queries.delete(e)}function Dp(i){i.Ca.forEach((e=>{e.next()}))}var zg,Bb;(Bb=zg||(zg={})).Ma="default",Bb.Cache="cache";class fN{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new nl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==zg.Cache}}class yT{constructor(e){this.key=e}}class _T{constructor(e){this.key=e}}class dN{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ze(),this.mutatedKeys=Ze(),this.eu=P1(e),this.tu=new Ho(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new Ub,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const S=o.get(v),N=Df(this.query,E)?E:null,k=!!S&&this.mutatedKeys.has(S.key),z=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let D=!1;S&&N?S.data.isEqual(N.data)?k!==z&&(s.track({type:3,doc:N}),D=!0):this.su(S,N)||(s.track({type:2,doc:N}),D=!0,(g&&this.eu(N,g)>0||p&&this.eu(N,p)<0)&&(m=!0)):!S&&N?(s.track({type:0,doc:N}),D=!0):S&&!N&&(s.track({type:1,doc:S}),D=!0,(g||p)&&(m=!0)),D&&(N?(c=c.add(N),u=z?u.add(v):u.delete(v)):(c=c.delete(v),u=u.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),u=u.delete(v.key),s.track({type:1,doc:v})}return{tu:c,iu:s,Cs:m,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(N,k){const z=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:D})}};return z(N)-z(k)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(s),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new nl(this.query,e.tu,u,c,e.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ub,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ze(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new _T(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new yT(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Op="SyncEngine";class mN{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class gN{constructor(e){this.key=e,this.hu=!1}}class pN{constructor(e,t,s,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ya((m=>V1(m)),If),this.Iu=new Map,this.Eu=new Set,this.du=new Lt(xe.comparator),this.Au=new Map,this.Ru=new bp,this.Vu={},this.mu=new Map,this.fu=tl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function yN(i,e,t=!0){const s=ST(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await vT(s,e,t,!0),o}async function _N(i,e){const t=ST(i);await vT(t,e,!0,!1)}async function vT(i,e,t,s){const o=await VC(i.localStore,Er(e)),u=o.targetId,c=i.sharedClientState.addLocalQueryTarget(u,t);let m;return s&&(m=await vN(i,e,u,c==="current",o.resumeToken)),i.isPrimaryClient&&t&&hT(i.remoteStore,o),m}async function vN(i,e,t,s,o){i.pu=(E,S,N)=>(async function(z,D,B,ne){let Z=D.view.ru(B);Z.Cs&&(Z=await Mb(z.localStore,D.query,!1).then((({documents:x})=>D.view.ru(x,Z))));const ce=ne&&ne.targetChanges.get(D.targetId),ie=ne&&ne.targetMismatches.get(D.targetId)!=null,W=D.view.applyChanges(Z,z.isPrimaryClient,ce,ie);return Hb(z,D.targetId,W.au),W.snapshot})(i,E,S,N);const u=await Mb(i.localStore,e,!0),c=new dN(e,u.Qs),m=c.ru(u.documents),g=Zu.createSynthesizedTargetChangeForCurrentChange(t,s&&i.onlineState!=="Offline",o),p=c.applyChanges(m,i.isPrimaryClient,g);Hb(i,t,p.au);const v=new mN(e,t,c);return i.Tu.set(e,v),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),p.snapshot}async function bN(i,e,t){const s=Ve(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((c=>!If(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await jg(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Ap(s.remoteStore,o.targetId),Bg(s,o.targetId)})).catch(ul)):(Bg(s,o.targetId),await jg(s.localStore,o.targetId,!0))}async function EN(i,e){const t=Ve(i),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Ap(t.remoteStore,s.targetId))}async function TN(i,e,t){const s=NN(i);try{const o=await(function(c,m){const g=Ve(c),p=It.now(),v=m.reduce(((N,k)=>N.add(k.key)),Ze());let E,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let k=es(),z=Ze();return g.Ns.getEntries(N,v).next((D=>{k=D,k.forEach(((B,ne)=>{ne.isValidDocument()||(z=z.add(B))}))})).next((()=>g.localDocuments.getOverlayedDocuments(N,k))).next((D=>{E=D;const B=[];for(const ne of m){const Z=PR(ne,E.get(ne.key).overlayedDocument);Z!=null&&B.push(new fa(ne.key,Z,R1(Z.value.mapValue),Wn.exists(!0)))}return g.mutationQueue.addMutationBatch(N,p,B,m)})).next((D=>{S=D;const B=D.applyToLocalDocumentSet(E,z);return g.documentOverlayCache.saveOverlays(N,D.batchId,B)}))})).then((()=>({batchId:S.batchId,changes:j1(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,m,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new Lt(Je)),p=p.insert(m,g),c.Vu[c.currentUser.toKey()]=p})(s,o.batchId,t),await ec(s,o.changes),await Lf(s.remoteStore)}catch(o){const u=Ip(o,"Failed to persist write");t.reject(u)}}async function bT(i,e){const t=Ve(i);try{const s=await OC(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const c=t.Au.get(u);c&&(it(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?it(c.hu,14607):o.removedDocuments.size>0&&(it(c.hu,42227),c.hu=!1))})),await ec(t,s,e)}catch(s){await ul(s)}}function qb(i,e,t){const s=Ve(i);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((u,c)=>{const m=c.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const g=Ve(c);g.onlineState=m;let p=!1;g.queries.forEach(((v,E)=>{for(const S of E.Sa)S.va(m)&&(p=!0)})),p&&Dp(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function wN(i,e,t){const s=Ve(i);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),u=o&&o.key;if(u){let c=new Lt(xe.comparator);c=c.insert(u,Tn.newNoDocument(u,Ie.min()));const m=Ze().add(u),g=new kf(Ie.min(),new Map,new Lt(Je),c,m);await bT(s,g),s.du=s.du.remove(u),s.Au.delete(e),Mp(s)}else await jg(s.localStore,e,!1).then((()=>Bg(s,e,t))).catch(ul)}async function SN(i,e){const t=Ve(i),s=e.batch.batchId;try{const o=await DC(t.localStore,e);TT(t,s,null),ET(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await ec(t,o)}catch(o){await ul(o)}}async function AN(i,e,t){const s=Ve(i);try{const o=await(function(c,m){const g=Ve(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return g.mutationQueue.lookupMutationBatch(p,m).next((E=>(it(E!==null,37113),v=E.keys(),g.mutationQueue.removeMutationBatch(p,E)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,v,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>g.localDocuments.getDocuments(p,v)))}))})(s.localStore,e);TT(s,e,t),ET(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await ec(s,o)}catch(o){await ul(o)}}function ET(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function TT(i,e,t){const s=Ve(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Bg(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),t&&i.Pu.yu(s,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||wT(i,s)}))}function wT(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(Ap(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),Mp(i))}function Hb(i,e,t){for(const s of t)s instanceof yT?(i.Ru.addReference(s.key,e),xN(i,s)):s instanceof _T?(ve(Op,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||wT(i,s.key)):Ce(19791,{wu:s})}function xN(i,e){const t=e.key,s=t.path.canonicalString();i.du.get(t)||i.Eu.has(s)||(ve(Op,"New document in limbo: "+t),i.Eu.add(s),Mp(i))}function Mp(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new xe(Et.fromString(e)),s=i.fu.next();i.Au.set(s,new gN(t)),i.du=i.du.insert(t,s),hT(i.remoteStore,new Ys(Er(mp(t.path)),s,"TargetPurposeLimboResolution",Cf.ce))}}async function ec(i,e,t){const s=Ve(i),o=[],u=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,g)=>{c.push(s.pu(g,e,t).then((p=>{if((p||t)&&s.isPrimaryClient){const v=p?!p.fromCache:t?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(p){o.push(p);const v=Tp.As(g.targetId,p);u.push(v)}})))})),await Promise.all(c),s.Pu.H_(o),await(async function(g,p){const v=Ve(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ue.forEach(p,(S=>ue.forEach(S.Es,(N=>v.persistence.referenceDelegate.addReference(E,S.targetId,N))).next((()=>ue.forEach(S.ds,(N=>v.persistence.referenceDelegate.removeReference(E,S.targetId,N)))))))))}catch(E){if(!cl(E))throw E;ve(wp,"Failed to update sequence numbers: "+E)}for(const E of p){const S=E.targetId;if(!E.fromCache){const N=v.Ms.get(S),k=N.snapshotVersion,z=N.withLastLimboFreeSnapshotVersion(k);v.Ms=v.Ms.insert(S,z)}}})(s.localStore,u))}async function RN(i,e){const t=Ve(i);if(!t.currentUser.isEqual(e)){ve(Op,"User change. New user:",e.toKey());const s=await lT(t.localStore,e);t.currentUser=e,(function(u,c){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new pe(oe.CANCELLED,c))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ec(t,s.Ls)}}function CN(i,e){const t=Ve(i),s=t.Au.get(e);if(s&&s.hu)return Ze().add(s.key);{let o=Ze();const u=t.Iu.get(e);if(!u)return o;for(const c of u){const m=t.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}function ST(i){const e=Ve(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=bT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wN.bind(null,e),e.Pu.H_=cN.bind(null,e.eventManager),e.Pu.yu=hN.bind(null,e.eventManager),e}function NN(i){const e=Ve(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AN.bind(null,e),e}class hf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return IC(this.persistence,new RC,e.initialUser,this.serializer)}Cu(e){return new oT(Ep.mi,this.serializer)}Du(e){return new LC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hf.provider={build:()=>new hf};class IN extends hf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){it(this.persistence.referenceDelegate instanceof uf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new fC(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?hi.withCacheSize(this.cacheSizeBytes):hi.DEFAULT;return new oT((s=>uf.mi(s,t)),this.serializer)}}class qg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>qb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=RN.bind(null,this.syncEngine),await sN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new oN})()}createDatastore(e){const t=Vf(e.databaseInfo.databaseId),s=(function(u){return new qC(u)})(e.databaseInfo);return(function(u,c,m,g){return new KC(u,c,m,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,u,c,m){return new QC(s,o,u,c,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>qb(this.syncEngine,t,0)),(function(){return Pb.v()?new Pb:new jC})())}createSyncEngine(e,t){return(function(o,u,c,m,g,p,v){const E=new pN(o,u,c,m,g,p);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Ve(t);ve($a,"RemoteStore shutting down."),s.Ea.add(5),await Wu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}qg.provider={build:()=>new qg};class DN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Wr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class ON{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new pe(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,u){const c=Ve(o),m={documents:u.map((E=>lf(c.serializer,E)))},g=await c.Ho("BatchGetDocuments",c.serializer.databaseId,Et.emptyPath(),m,u.length),p=new Map;g.forEach((E=>{const S=YR(c.serializer,E);p.set(S.key.toString(),S)}));const v=[];return u.forEach((E=>{const S=p.get(E.toString());it(!!S,55234,{key:E}),v.push(S)})),v})(this.datastore,e);return t.forEach((s=>this.recordVersion(s))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new pp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,s)=>{const o=xe.fromPath(s);this.mutations.push(new $1(o,this.precondition(o)))})),await(async function(s,o){const u=Ve(s),c={writes:o.map((m=>nT(u.serializer,m)))};await u.Go("Commit",u.serializer.databaseId,Et.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ce(50498,{Gu:e.constructor.name});t=Ie.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new pe(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ie.min())?Wn.exists(!1):Wn.updateTime(t):Wn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ie.min()))throw new pe(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wn.updateTime(t)}return Wn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class MN{constructor(e,t,s,o,u){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=o,this.deferred=u,this.zu=s.maxAttempts,this.M_=new Sp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new ON(this.datastore),t=this.Hu(e);t&&t.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Yu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Q1(t)}return!1}}const ua="FirestoreClient";class kN{constructor(e,t,s,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Bn.UNAUTHENTICATED,this.clientId=lp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async c=>{ve(ua,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(ve(ua,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ea;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Ip(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function ag(i,e){i.asyncQueue.verifyOperationInProgress(),ve(ua,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await lT(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Fb(i,e){i.asyncQueue.verifyOperationInProgress();const t=await VN(i);ve(ua,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((s=>jb(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>jb(e.remoteStore,o))),i._onlineComponents=e}async function VN(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ve(ua,"Using user provided OfflineComponentProvider");try{await ag(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===oe.FAILED_PRECONDITION||o.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Jo("Error using user provided cache. Falling back to memory cache: "+t),await ag(i,new hf)}}else ve(ua,"Using default OfflineComponentProvider"),await ag(i,new IN(void 0));return i._offlineComponents}async function kp(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ve(ua,"Using user provided OnlineComponentProvider"),await Fb(i,i._uninitializedComponentsProvider._online)):(ve(ua,"Using default OnlineComponentProvider"),await Fb(i,new qg))),i._onlineComponents}function PN(i){return kp(i).then((e=>e.syncEngine))}function LN(i){return kp(i).then((e=>e.datastore))}async function Gb(i){const e=await kp(i),t=e.eventManager;return t.onListen=yN.bind(null,e.syncEngine),t.onUnlisten=bN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_N.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=EN.bind(null,e.syncEngine),t}function AT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const Kb=new Map;const xT="firestore.googleapis.com",$b=!0;class Qb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xT,this.ssl=$b}else this.host=e.host,this.ssl=e.ssl??$b;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=aT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cC)throw new pe(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}X2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jf{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new z2;switch(s.type){case"firstParty":return new F2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Kb.get(t);s&&(ve("ComponentProvider","Removing Datastore"),Kb.delete(t),s.terminate())})(this),Promise.resolve()}}function jN(i,e,t,s={}){i=Jr(i,jf);const o=al(e),u=i._getSettings(),c={...u,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${t}`;o&&(e1(`https://${m}`),t1("Firestore",!0)),u.host!==xT&&u.host!==m&&Jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:s};if(!Fa(g,c)&&(i._setSettings(g),s.mockUserToken)){let p,v;if(typeof s.mockUserToken=="string")p=s.mockUserToken,v=Bn.MOCK_USER;else{p=dx(s.mockUserToken,i._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new pe(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Bn(E)}i._authCredentials=new B2(new g1(p,v))}}class fl{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new fl(this.firestore,e,this._query)}}class qt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ta(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Qu(t,qt._jsonSchema))return new qt(e,s||null,new xe(Et.fromString(t.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:un("string",qt._jsonSchemaVersion),referencePath:un("string")};class ta extends fl{constructor(e,t,s){super(e,t,mp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new xe(e))}withConverter(e){return new ta(this.firestore,e,this._path)}}function Xn(i,e,...t){if(i=wn(i),p1("collection","path",e),i instanceof jf){const s=Et.fromString(e,...t);return ab(s),new ta(i,null,s)}{if(!(i instanceof qt||i instanceof ta))throw new pe(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Et.fromString(e,...t));return ab(s),new ta(i.firestore,null,s)}}function Jn(i,e,...t){if(i=wn(i),arguments.length===1&&(e=lp.newId()),p1("doc","path",e),i instanceof jf){const s=Et.fromString(e,...t);return sb(s),new qt(i,null,new xe(s))}{if(!(i instanceof qt||i instanceof ta))throw new pe(oe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Et.fromString(e,...t));return sb(s),new qt(i.firestore,i instanceof ta?i.converter:null,new xe(s))}}const Yb="AsyncQueue";class Xb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Sp(this,"async_queue_retry"),this._c=()=>{const s=sg();s&&ve(Yb,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=sg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=sg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ea;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!cl(e))throw e;ve(Yb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Wr("INTERNAL UNHANDLED ERROR: ",Jb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Np.createAndSchedule(this,e,t,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ce(47125,{Pc:Jb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Jb(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}function Zb(i){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(i,["next","error","complete"])}class il extends jf{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Xb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xb(e),this._firestoreClient=void 0,await e}}}function UN(i,e){const t=typeof i=="object"?i:s1(),s=typeof i=="string"?i:ef,o=ap(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=hx("firestore");u&&jN(o,...u)}return o}function Vp(i){if(i._terminated)throw new pe(oe.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||zN(i),i._firestoreClient}function zN(i){const e=i._freezeSettings(),t=(function(o,u,c,m){return new oR(o,u,c,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,AT(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new kN(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class Ei{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ei(kn.fromBase64String(e))}catch(t){throw new pe(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ei(kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ei._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Qu(e,Ei._jsonSchema))return Ei.fromBase64String(e.bytes)}}Ei._jsonSchemaVersion="firestore/bytes/1.0",Ei._jsonSchema={type:un("string",Ei._jsonSchemaVersion),bytes:un("string")};class tc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Pp{constructor(e){this._methodName=e}}class Tr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Tr._jsonSchemaVersion}}static fromJSON(e){if(Qu(e,Tr._jsonSchema))return new Tr(e.latitude,e.longitude)}}Tr._jsonSchemaVersion="firestore/geoPoint/1.0",Tr._jsonSchema={type:un("string",Tr._jsonSchemaVersion),latitude:un("number"),longitude:un("number")};class wr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:wr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Qu(e,wr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new wr(e.vectorValues);throw new pe(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wr._jsonSchemaVersion="firestore/vectorValue/1.0",wr._jsonSchema={type:un("string",wr._jsonSchemaVersion),vectorValues:un("object")};const BN=/^__.*__$/;class qN{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new fa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ju(e,this.data,t,this.fieldTransforms)}}class RT{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new fa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function CT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:i})}}class Lp{constructor(e,t,s,o,u,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Lp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ff(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(CT(this.Ac)&&BN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class HN{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Vf(e)}Cc(e,t,s,o=!1){return new Lp({Ac:e,methodName:t,Dc:s,path:Mn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uf(i){const e=i._freezeSettings(),t=Vf(i._databaseId);return new HN(i._databaseId,!!e.ignoreUndefinedProperties,t)}function NT(i,e,t,s,o,u={}){const c=i.Cc(u.merge||u.mergeFields?2:0,e,t,o);jp("Data must be an object, but it was:",c,s);const m=OT(s,c);let g,p;if(u.merge)g=new Ti(c.fieldMask),p=c.fieldTransforms;else if(u.mergeFields){const v=[];for(const E of u.mergeFields){const S=Hg(e,E,t);if(!c.contains(S))throw new pe(oe.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);kT(v,S)||v.push(S)}g=new Ti(v),p=c.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,p=c.fieldTransforms;return new qN(new Zn(m),g,p)}class zf extends Pp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zf}}function IT(i,e,t,s){const o=i.Cc(1,e,t);jp("Data must be an object, but it was:",o,s);const u=[],c=Zn.empty();ha(s,((g,p)=>{const v=Up(e,g,t);p=wn(p);const E=o.yc(v);if(p instanceof zf)u.push(v);else{const S=nc(p,E);S!=null&&(u.push(v),c.set(v,S))}}));const m=new Ti(u);return new RT(c,m,o.fieldTransforms)}function DT(i,e,t,s,o,u){const c=i.Cc(1,e,t),m=[Hg(e,s,t)],g=[o];if(u.length%2!=0)throw new pe(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)m.push(Hg(e,u[S])),g.push(u[S+1]);const p=[],v=Zn.empty();for(let S=m.length-1;S>=0;--S)if(!kT(p,m[S])){const N=m[S];let k=g[S];k=wn(k);const z=c.yc(N);if(k instanceof zf)p.push(N);else{const D=nc(k,z);D!=null&&(p.push(N),v.set(N,D))}}const E=new Ti(p);return new RT(v,E,c.fieldTransforms)}function FN(i,e,t,s=!1){return nc(t,i.Cc(s?4:3,e))}function nc(i,e){if(MT(i=wn(i)))return jp("Unsupported field value:",e,i),OT(i,e);if(i instanceof Pp)return(function(s,o){if(!CT(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let c=0;for(const m of s){let g=nc(m,o.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=wn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return IR(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=It.fromDate(s);return{timestampValue:of(o.serializer,u)}}if(s instanceof It){const u=new It(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:of(o.serializer,u)}}if(s instanceof Tr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ei)return{bytesValue:Z1(o.serializer,s._byteString)};if(s instanceof qt){const u=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:vp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof wr)return(function(c,m){return{mapValue:{fields:{[A1]:{stringValue:x1},[tf]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return gp(m.serializer,p)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Rf(s)}`)})(i,e)}function OT(i,e){const t={};return v1(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ha(i,((s,o)=>{const u=nc(o,e.mc(s));u!=null&&(t[s]=u)})),{mapValue:{fields:t}}}function MT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof It||i instanceof Tr||i instanceof Ei||i instanceof qt||i instanceof Pp||i instanceof wr)}function jp(i,e,t){if(!MT(t)||!y1(t)){const s=Rf(t);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function Hg(i,e,t){if((e=wn(e))instanceof tc)return e._internalPath;if(typeof e=="string")return Up(i,e);throw ff("Field path arguments must be of type string or ",i,!1,void 0,t)}const GN=new RegExp("[~\\*/\\[\\]]");function Up(i,e,t){if(e.search(GN)>=0)throw ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new tc(...e.split("."))._internalPath}catch{throw ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function ff(i,e,t,s,o){const u=s&&!s.isEmpty(),c=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${s}`),c&&(g+=` in document ${o}`),g+=")"),new pe(oe.INVALID_ARGUMENT,m+i+g)}function kT(i,e){return i.some((t=>t.isEqual(e)))}class df{constructor(e,t,s,o,u){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class KN extends df{data(){return super.data()}}function zp(i,e){return typeof e=="string"?Up(i,e):e instanceof tc?e._internalPath:e._delegate._internalPath}function $N(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new pe(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bp{}class QN extends Bp{}function YN(i,e,...t){let s=[];e instanceof Bp&&s.push(e),s=s.concat(t),(function(u){const c=u.filter((g=>g instanceof qp)).length,m=u.filter((g=>g instanceof Bf)).length;if(c>1||c>0&&m>0)throw new pe(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class Bf extends QN{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Bf(e,t,s)}_apply(e){const t=this._parse(e);return VT(e._query,t),new fl(e.firestore,e.converter,Mg(e._query,t))}_parse(e){const t=Uf(e.firestore);return(function(u,c,m,g,p,v,E){let S;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new pe(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){eE(E,v);const k=[];for(const z of E)k.push(Wb(g,u,z));S={arrayValue:{values:k}}}else S=Wb(g,u,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||eE(E,v),S=FN(m,c,E,v==="in"||v==="not-in");return ln.create(p,v,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function XN(i,e,t){const s=e,o=zp("where",i);return Bf._create(o,s,t)}class qp extends Bp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:rr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,u){let c=o;const m=u.getFlattenedFilters();for(const g of m)VT(c,g),c=Mg(c,g)})(e._query,t),new fl(e.firestore,e.converter,Mg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Wb(i,e,t){if(typeof(t=wn(t))=="string"){if(t==="")throw new pe(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!k1(e)&&t.indexOf("/")!==-1)throw new pe(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Et.fromString(t));if(!xe.isDocumentKey(s))throw new pe(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return mb(i,new xe(s))}if(t instanceof qt)return mb(i,t._key);throw new pe(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rf(t)}.`)}function eE(i,e){if(!Array.isArray(i)||i.length===0)throw new pe(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VT(i,e){const t=(function(o,u){for(const c of o)for(const m of c.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new pe(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class PT{convertValue(e,t="none"){switch(oa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(aa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ha(e,((o,u)=>{s[o]=this.convertValue(u,t)})),s}convertVectorValue(e){const t=e.fields?.[tf].arrayValue?.values?.map((s=>Xt(s.doubleValue)));return new wr(t)}convertGeoPoint(e){return new Tr(Xt(e.latitude),Xt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Nf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Vu(e));default:return null}}convertTimestamp(e){const t=sa(e);return new It(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Et.fromString(e);it(sT(s),9688,{name:e});const o=new Pu(s.get(1),s.get(3)),u=new xe(s.popFirst(5));return o.isEqual(t)||Wr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function LT(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class JN extends PT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ei(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}class Bo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class na extends df{constructor(e,t,s,o,u,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(zp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=na._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}na._jsonSchemaVersion="firestore/documentSnapshot/1.0",na._jsonSchema={type:un("string",na._jsonSchemaVersion),bundleSource:un("string","DocumentSnapshot"),bundleName:un("string"),bundle:un("string")};class Hh extends na{data(e={}){return super.data(e)}}class Fo{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Bo(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Hh(this._firestore,this._userDataWriter,s.key,s,new Bo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const g=new Hh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Bo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new Hh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Bo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,v=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),v=c.indexOf(m.doc.key)),{type:ZN(m.type),doc:g,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=lp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ZN(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:i})}}Fo._jsonSchemaVersion="firestore/querySnapshot/1.0",Fo._jsonSchema={type:un("string",Fo._jsonSchemaVersion),bundleSource:un("string","QuerySnapshot"),bundleName:un("string"),bundle:un("string")};class Hp extends PT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ei(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}function Fp(i,e,t){i=Jr(i,qt);const s=Jr(i.firestore,il),o=LT(i.converter,e,t);return jT(s,[NT(Uf(s),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,Wn.none())])}function Su(i,e,t,...s){i=Jr(i,qt);const o=Jr(i.firestore,il),u=Uf(o);let c;return c=typeof(e=wn(e))=="string"||e instanceof tc?DT(u,"updateDoc",i._key,e,t,s):IT(u,"updateDoc",i._key,e),jT(o,[c.toMutation(i._key,Wn.exists(!0))])}function Gp(i,...e){i=wn(i);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Zb(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Zb(e[s])){const g=e[s];e[s]=g.next?.bind(g),e[s+1]=g.error?.bind(g),e[s+2]=g.complete?.bind(g)}let u,c,m;if(i instanceof qt)c=Jr(i.firestore,il),m=mp(i._key.path),u={next:g=>{e[s]&&e[s](WN(c,i,g))},error:e[s+1],complete:e[s+2]};else{const g=Jr(i,fl);c=Jr(g.firestore,il),m=g._query;const p=new Hp(c);u={next:v=>{e[s]&&e[s](new Fo(c,p,g,v))},error:e[s+1],complete:e[s+2]},$N(i._query)}return(function(p,v,E,S){const N=new DN(S),k=new fN(v,N,E);return p.asyncQueue.enqueueAndForget((async()=>lN(await Gb(p),k))),()=>{N.Nu(),p.asyncQueue.enqueueAndForget((async()=>uN(await Gb(p),k)))}})(Vp(c),m,o,u)}function jT(i,e){return(function(s,o){const u=new ea;return s.asyncQueue.enqueueAndForget((async()=>TN(await PN(s),o,u))),u.promise})(Vp(i),e)}function WN(i,e,t){const s=t.docs.get(e._key),o=new Hp(i);return new na(i,o,e._key,s,new Bo(t.hasPendingWrites,t.fromCache),e.converter)}const eI={maxAttempts:5};function du(i,e){if((i=wn(i)).firestore!==e)throw new pe(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class tI{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Uf(e)}get(e){const t=du(e,this._firestore),s=new JN(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return Ce(24041);const u=o[0];if(u.isFoundDocument())return new df(this._firestore,s,u.key,u,t.converter);if(u.isNoDocument())return new df(this._firestore,s,t._key,null,t.converter);throw Ce(18433,{doc:u})}))}set(e,t,s){const o=du(e,this._firestore),u=LT(o.converter,t,s),c=NT(this._dataReader,"Transaction.set",o._key,u,o.converter!==null,s);return this._transaction.set(o._key,c),this}update(e,t,s,...o){const u=du(e,this._firestore);let c;return c=typeof(t=wn(t))=="string"||t instanceof tc?DT(this._dataReader,"Transaction.update",u._key,t,s,o):IT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=du(e,this._firestore);return this._transaction.delete(t._key),this}}class nI extends tI{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=du(e,this._firestore),s=new Hp(this._firestore);return super.get(e).then((o=>new na(this._firestore,s,t._key,o._document,new Bo(!1,!1),t.converter)))}}function Au(i,e,t){i=Jr(i,il);const s={...eI,...t};return(function(u){if(u.maxAttempts<1)throw new pe(oe.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(u,c,m){const g=new ea;return u.asyncQueue.enqueueAndForget((async()=>{const p=await LN(u);new MN(u.asyncQueue,p,m,c,g).ju()})),g.promise})(Vp(i),(o=>e(new nI(i,o))),s)}(function(e,t=!0){(function(o){ll=o})(ol),Xo(new Ga("firestore",((s,{instanceIdentifier:o,options:u})=>{const c=s.getProvider("app").getImmediate(),m=new il(new q2(s.getProvider("auth-internal")),new G2(c,s.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new pe(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pu(p.options.projectId,v)})(c,o),c);return u={useFetchStreams:t,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Zs(tb,nb,e),Zs(tb,nb,"esm2020")})();function UT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iI=UT,zT=new Ku("auth","Firebase",UT());const mf=new rp("@firebase/auth");function rI(i,...e){mf.logLevel<=Xe.WARN&&mf.warn(`Auth (${ol}): ${i}`,...e)}function Fh(i,...e){mf.logLevel<=Xe.ERROR&&mf.error(`Auth (${ol}): ${i}`,...e)}function ts(i,...e){throw Kp(i,...e)}function Sr(i,...e){return Kp(i,...e)}function BT(i,e,t){const s={...iI(),[e]:t};return new Ku("auth","Firebase",s).create(e,{appName:i.name})}function ia(i){return BT(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kp(i,...e){if(typeof i!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(t,...s)}return zT.create(i,...e)}function Oe(i,e,...t){if(!i)throw Kp(e,...t)}function Yr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Fh(e),new Error(e)}function ns(i,e){i||Yr(e)}function Fg(){return typeof self<"u"&&self.location?.href||""}function sI(){return tE()==="http:"||tE()==="https:"}function tE(){return typeof self<"u"&&self.location?.protocol||null}function aI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sI()||vx()||"connection"in navigator)?navigator.onLine:!0}function oI(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class ic{constructor(e,t){this.shortDelay=e,this.longDelay=t,ns(t>e,"Short delay should be less than long delay!"),this.isMobile=px()||bx()}get(){return aI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function $p(i,e){ns(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class qT{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const lI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const uI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cI=new ic(3e4,6e4);function qf(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function dl(i,e,t,s,o={}){return HT(i,o,async()=>{let u={},c={};s&&(e==="GET"?c=s:u={body:JSON.stringify(s)});const m=$u({key:i.config.apiKey,...c}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const p={method:e,headers:g,...u};return _x()||(p.referrerPolicy="no-referrer"),i.emulatorConfig&&al(i.emulatorConfig.host)&&(p.credentials="include"),qT.fetch()(await GT(i,i.config.apiHost,t,m),p)})}async function HT(i,e,t){i._canInitEmulator=!1;const s={...lI,...e};try{const o=new hI(i),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw kh(i,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw kh(i,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw kh(i,"email-already-in-use",c);if(g==="USER_DISABLED")throw kh(i,"user-disabled",c);const v=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw BT(i,v,p);ts(i,v)}}catch(o){if(o instanceof rs)throw o;ts(i,"network-request-failed",{message:String(o)})}}async function FT(i,e,t,s,o={}){const u=await dl(i,e,t,s,o);return"mfaPendingCredential"in u&&ts(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function GT(i,e,t,s){const o=`${e}${t}?${s}`,u=i,c=u.config.emulator?$p(i.config,o):`${i.config.apiScheme}://${o}`;return uI.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}class hI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Sr(this.auth,"network-request-failed")),cI.get())})}}function kh(i,e,t){const s={appName:i.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Sr(i,e,s);return o.customData._tokenResponse=t,o}async function fI(i,e){return dl(i,"POST","/v1/accounts:delete",e)}async function gf(i,e){return dl(i,"POST","/v1/accounts:lookup",e)}function xu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dI(i,e=!1){const t=wn(i),s=await t.getIdToken(e),o=Qp(s);Oe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,c=u?.sign_in_provider;return{claims:o,token:s,authTime:xu(og(o.auth_time)),issuedAtTime:xu(og(o.iat)),expirationTime:xu(og(o.exp)),signInProvider:c||null,signInSecondFactor:u?.sign_in_second_factor||null}}function og(i){return Number(i)*1e3}function Qp(i){const[e,t,s]=i.split(".");if(e===void 0||t===void 0||s===void 0)return Fh("JWT malformed, contained fewer than 3 sections"),null;try{const o=XE(t);return o?JSON.parse(o):(Fh("Failed to decode base64 JWT payload"),null)}catch(o){return Fh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function nE(i){const e=Qp(i);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function zu(i,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof rs&&mI(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function mI({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class gI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Gg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=xu(this.lastLoginAt),this.creationTime=xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function pf(i){const e=i.auth,t=await i.getIdToken(),s=await zu(i,gf(e,{idToken:t}));Oe(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?KT(o.providerUserInfo):[],c=yI(i.providerData,u),m=i.isAnonymous,g=!(i.email&&o.passwordHash)&&!c?.length,p=m?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Gg(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(i,v)}async function pI(i){const e=wn(i);await pf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yI(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function KT(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function _I(i,e){const t=await HT(i,{},async()=>{const s=$u({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,c=await GT(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return i.emulatorConfig&&al(i.emulatorConfig.host)&&(g.credentials="include"),qT.fetch()(c,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function vI(i,e){return dl(i,"POST","/v2/accounts:revokeToken",qf(i,e))}class Go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const t=nE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:u}=await _I(e,t);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:u}=t,c=new Go;return s&&(Oe(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(Oe(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),u&&(Oe(typeof u=="number","internal-error",{appName:e}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Go,this.toJSON())}_performRefresh(){return Yr("not implemented")}}function zs(i,e){Oe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ir{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new gI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Gg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await zu(this,this.stsTokenManager.getToken(this.auth,e));return Oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return dI(this,e)}reload(){return pI(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ir({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await pf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nr(this.auth.app))return Promise.reject(ia(this.auth));const e=await this.getIdToken();return await zu(this,fI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,c=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:N,providerData:k,stsTokenManager:z}=t;Oe(E&&z,e,"internal-error");const D=Go.fromJSON(this.name,z);Oe(typeof E=="string",e,"internal-error"),zs(s,e.name),zs(o,e.name),Oe(typeof S=="boolean",e,"internal-error"),Oe(typeof N=="boolean",e,"internal-error"),zs(u,e.name),zs(c,e.name),zs(m,e.name),zs(g,e.name),zs(p,e.name),zs(v,e.name);const B=new ir({uid:E,auth:e,email:o,emailVerified:S,displayName:s,isAnonymous:N,photoURL:c,phoneNumber:u,tenantId:m,stsTokenManager:D,createdAt:p,lastLoginAt:v});return k&&Array.isArray(k)&&(B.providerData=k.map(ne=>({...ne}))),g&&(B._redirectEventId=g),B}static async _fromIdTokenResponse(e,t,s=!1){const o=new Go;o.updateFromServerResponse(t);const u=new ir({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await pf(u),u}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Oe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?KT(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!u?.length,m=new Go;m.updateFromIdToken(s);const g=new ir({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:c}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Gg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,p),g}}const iE=new Map;function Xr(i){ns(i instanceof Function,"Expected a class definition");let e=iE.get(i);return e?(ns(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,iE.set(i,e),e)}class $T{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$T.type="NONE";const rE=$T;function Gh(i,e,t){return`firebase:${i}:${e}:${t}`}class Ko{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Gh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Gh("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await gf(this.auth,{idToken:e}).catch(()=>{});return t?ir._fromGetAccountInfoResponse(this.auth,t,e):null}return ir._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Ko(Xr(rE),e,s);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||Xr(rE);const c=Gh(s,e.config.apiKey,e.name);let m=null;for(const p of t)try{const v=await p._get(c);if(v){let E;if(typeof v=="string"){const S=await gf(e,{idToken:v}).catch(()=>{});if(!S)break;E=await ir._fromGetAccountInfoResponse(e,S,v)}else E=ir._fromJSON(e,v);p!==u&&(m=E),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Ko(u,e,s):(u=g[0],m&&await u._set(c,m.toJSON()),await Promise.all(t.map(async p=>{if(p!==u)try{await p._remove(c)}catch{}})),new Ko(u,e,s))}}function sE(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(WT(e))return"Blackberry";if(ew(e))return"Webos";if(YT(e))return"Safari";if((e.includes("chrome/")||XT(e))&&!e.includes("edge/"))return"Chrome";if(ZT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(t);if(s?.length===2)return s[1]}return"Other"}function QT(i=qn()){return/firefox\//i.test(i)}function YT(i=qn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XT(i=qn()){return/crios\//i.test(i)}function JT(i=qn()){return/iemobile/i.test(i)}function ZT(i=qn()){return/android/i.test(i)}function WT(i=qn()){return/blackberry/i.test(i)}function ew(i=qn()){return/webos/i.test(i)}function Yp(i=qn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function bI(i=qn()){return Yp(i)&&!!window.navigator?.standalone}function EI(){return Ex()&&document.documentMode===10}function tw(i=qn()){return Yp(i)||ZT(i)||ew(i)||WT(i)||/windows phone/i.test(i)||JT(i)}function nw(i,e=[]){let t;switch(i){case"Browser":t=sE(qn());break;case"Worker":t=`${sE(qn())}-${i}`;break;default:t=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ol}/${s}`}class TI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=u=>new Promise((c,m)=>{try{const g=e(u);c(g)}catch(g){m(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function wI(i,e={}){return dl(i,"GET","/v2/passwordPolicy",qf(i,e))}const SI=6;class AI{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??SI,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class xI{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aE(this),this.idTokenSubscription=new aE(this),this.beforeStateQueue=new TI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ko.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await gf(this,{idToken:e}),s=await ir._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(nr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,c=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===c)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await pf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nr(this.app))return Promise.reject(ia(this));const t=e?wn(e):null;return t&&Oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nr(this.app)?Promise.reject(ia(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nr(this.app)?Promise.reject(ia(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wI(this),t=new AI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ku("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await vI(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xr(e)||this._popupRedirectResolver;Oe(t,this,"argument-error"),this.redirectPersistenceManager=await Ko.create(this,[Xr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{c=!0,g()}}else{const g=e.addObserver(t);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&rI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Hf(i){return wn(i)}class aE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Nx(t=>this.observer=t)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Xp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RI(i){Xp=i}function CI(i){return Xp.loadJS(i)}function NI(){return Xp.gapiScript}function II(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function DI(i,e){const t=ap(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(Fa(u,e??{}))return o;ts(o,"already-initialized")}return t.initialize({options:e})}function OI(i,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Xr);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function MI(i,e,t){const s=Hf(i);Oe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=iw(e),{host:c,port:m}=kI(e),g=m===null?"":`:${m}`,p={url:`${u}//${c}${g}/`},v=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Oe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Oe(Fa(p,s.config.emulator)&&Fa(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,al(c)?(e1(`${u}//${c}${g}`),t1("Auth",!0)):VI()}function iw(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function kI(i){const e=iw(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:oE(s.substr(u.length+1))}}else{const[u,c]=s.split(":");return{host:u,port:oE(c)}}}function oE(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function VI(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class rw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Yr("not implemented")}_getIdTokenResponse(e){return Yr("not implemented")}_linkToIdToken(e,t){return Yr("not implemented")}_getReauthenticationResolver(e){return Yr("not implemented")}}async function $o(i,e){return FT(i,"POST","/v1/accounts:signInWithIdp",qf(i,e))}const PI="http://localhost";class Qa extends rw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Qa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ts("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=t;if(!s||!o)return null;const c=new Qa(s,o);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return $o(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,$o(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,$o(e,t)}buildRequest(){const e={requestUri:PI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$u(t)}return e}}class sw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class rc extends sw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Gs extends rc{constructor(){super("facebook.com")}static credential(e){return Qa._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gs.credential(e.oauthAccessToken)}catch{return null}}}Gs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gs.PROVIDER_ID="facebook.com";class Ks extends rc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Qa._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Ks.credential(t,s)}catch{return null}}}Ks.GOOGLE_SIGN_IN_METHOD="google.com";Ks.PROVIDER_ID="google.com";class $s extends rc{constructor(){super("github.com")}static credential(e){return Qa._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $s.credential(e.oauthAccessToken)}catch{return null}}}$s.GITHUB_SIGN_IN_METHOD="github.com";$s.PROVIDER_ID="github.com";class Qs extends rc{constructor(){super("twitter.com")}static credential(e,t){return Qa._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Qs.credential(t,s)}catch{return null}}}Qs.TWITTER_SIGN_IN_METHOD="twitter.com";Qs.PROVIDER_ID="twitter.com";async function LI(i,e){return FT(i,"POST","/v1/accounts:signUp",qf(i,e))}class ca{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const u=await ir._fromIdTokenResponse(e,s,o),c=lE(s);return new ca({user:u,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=lE(s);return new ca({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function lE(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}async function Bu(i){if(nr(i.app))return Promise.reject(ia(i));const e=Hf(i);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new ca({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await LI(e,{returnSecureToken:!0}),s=await ca._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}class yf extends rs{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,yf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new yf(e,t,s,o)}}function aw(i,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?yf._fromErrorAndOperation(i,u,e,s):u})}async function jI(i,e,t=!1){const s=await zu(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return ca._forOperation(i,"link",s)}async function UI(i,e,t=!1){const{auth:s}=i;if(nr(s.app))return Promise.reject(ia(s));const o="reauthenticate";try{const u=await zu(i,aw(s,o,e,i),t);Oe(u.idToken,s,"internal-error");const c=Qp(u.idToken);Oe(c,s,"internal-error");const{sub:m}=c;return Oe(i.uid===m,s,"user-mismatch"),ca._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&ts(s,"user-mismatch"),u}}async function zI(i,e,t=!1){if(nr(i.app))return Promise.reject(ia(i));const s="signIn",o=await aw(i,s,e),u=await ca._fromIdTokenResponse(i,s,o);return t||await i._updateCurrentUser(u.user),u}function BI(i,e,t,s){return wn(i).onIdTokenChanged(e,t,s)}function qI(i,e,t){return wn(i).beforeAuthStateChanged(e,t)}const _f="__sak";class ow{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_f,"1"),this.storage.removeItem(_f),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const HI=1e3,FI=10;class lw extends ow{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,m,g)=>{this.notifyListeners(c,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},u=this.storage.getItem(s);EI()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,FI):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},HI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}lw.type="LOCAL";const GI=lw;class uw extends ow{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}uw.type="SESSION";const cw=uw;function KI(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Ff{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Ff(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:u}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(c).map(async p=>p(t.origin,u)),g=await KI(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ff.receivers=[];function Jp(i="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return i+t}class $I{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,c;return new Promise((m,g)=>{const p=Jp("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(v),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(S.data.response);break;default:clearTimeout(v),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Ar(){return window}function QI(i){Ar().location.href=i}function hw(){return typeof Ar().WorkerGlobalScope<"u"&&typeof Ar().importScripts=="function"}async function YI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XI(){return navigator?.serviceWorker?.controller||null}function JI(){return hw()?self:null}const fw="firebaseLocalStorageDb",ZI=1,vf="firebaseLocalStorage",dw="fbase_key";class sc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Gf(i,e){return i.transaction([vf],e?"readwrite":"readonly").objectStore(vf)}function WI(){const i=indexedDB.deleteDatabase(fw);return new sc(i).toPromise()}function Kg(){const i=indexedDB.open(fw,ZI);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(vf,{keyPath:dw})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(vf)?e(s):(s.close(),await WI(),e(await Kg()))})})}async function uE(i,e,t){const s=Gf(i,!0).put({[dw]:e,value:t});return new sc(s).toPromise()}async function eD(i,e){const t=Gf(i,!1).get(e),s=await new sc(t).toPromise();return s===void 0?null:s.value}function cE(i,e){const t=Gf(i,!0).delete(e);return new sc(t).toPromise()}const tD=800,nD=3;class mw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>nD)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ff._getInstance(JI()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await YI(),!this.activeServiceWorker)return;this.sender=new $I(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kg();return await uE(e,_f,"1"),await cE(e,_f),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>uE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>eD(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Gf(o,!1).getAll();return new sc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mw.type="LOCAL";const iD=mw;new ic(3e4,6e4);function rD(i,e){return e?Xr(e):(Oe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Zp extends rw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $o(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $o(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $o(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function sD(i){return zI(i.auth,new Zp(i),i.bypassAuthState)}function aD(i){const{auth:e,user:t}=i;return Oe(t,e,"internal-error"),UI(t,new Zp(i),i.bypassAuthState)}async function oD(i){const{auth:e,user:t}=i;return Oe(t,e,"internal-error"),jI(t,new Zp(i),i.bypassAuthState)}class gw{constructor(e,t,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:u,error:c,type:m}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sD;case"linkViaPopup":case"linkViaRedirect":return oD;case"reauthViaPopup":case"reauthViaRedirect":return aD;default:ts(this.auth,"internal-error")}}resolve(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const lD=new ic(2e3,1e4);class qo extends gw{constructor(e,t,s,o,u){super(e,t,o,u),this.provider=s,this.authWindow=null,this.pollId=null,qo.currentPopupAction&&qo.currentPopupAction.cancel(),qo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){ns(this.filter.length===1,"Popup operations only handle one event");const e=Jp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lD.get())};e()}}qo.currentPopupAction=null;const uD="pendingRedirect",Kh=new Map;class cD extends gw{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Kh.get(this.auth._key());if(!e){try{const s=await hD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Kh.set(this.auth._key(),e)}return this.bypassAuthState||Kh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hD(i,e){const t=mD(e),s=dD(i);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function fD(i,e){Kh.set(i._key(),e)}function dD(i){return Xr(i._redirectPersistence)}function mD(i){return Gh(uD,i.config.apiKey,i.name)}async function gD(i,e,t=!1){if(nr(i.app))return Promise.reject(ia(i));const s=Hf(i),o=rD(s,e),c=await new cD(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}const pD=600*1e3;class yD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_D(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!pw(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Sr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pD&&this.cachedEventUids.clear(),this.cachedEventUids.has(hE(e))}saveEventToCache(e){this.cachedEventUids.add(hE(e)),this.lastProcessedEventTime=Date.now()}}function hE(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function pw({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function _D(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pw(i);default:return!1}}async function vD(i,e={}){return dl(i,"GET","/v1/projects",e)}const bD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ED=/^https?/;async function TD(i){if(i.config.emulator)return;const{authorizedDomains:e}=await vD(i);for(const t of e)try{if(wD(t))return}catch{}ts(i,"unauthorized-domain")}function wD(i){const e=Fg(),{protocol:t,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&s===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!ED.test(t))return!1;if(bD.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const SD=new ic(3e4,6e4);function fE(){const i=Ar().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function AD(i){return new Promise((e,t)=>{function s(){fE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fE(),t(Sr(i,"network-request-failed"))},timeout:SD.get()})}if(Ar().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ar().gapi?.load)s();else{const o=II("iframefcb");return Ar()[o]=()=>{gapi.load?s():t(Sr(i,"network-request-failed"))},CI(`${NI()}?onload=${o}`).catch(u=>t(u))}}).catch(e=>{throw $h=null,e})}let $h=null;function xD(i){return $h=$h||AD(i),$h}const RD=new ic(5e3,15e3),CD="__/auth/iframe",ND="emulator/auth/iframe",ID={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OD(i){const e=i.config;Oe(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?$p(e,ND):`https://${i.config.authDomain}/${CD}`,s={apiKey:e.apiKey,appName:i.name,v:ol},o=DD.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${t}?${$u(s).slice(1)}`}async function MD(i){const e=await xD(i),t=Ar().gapi;return Oe(t,i,"internal-error"),e.open({where:document.body,url:OD(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ID,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const c=Sr(i,"network-request-failed"),m=Ar().setTimeout(()=>{u(c)},RD.get());function g(){Ar().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{u(c)})}))}const kD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VD=500,PD=600,LD="_blank",jD="http://localhost";class dE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UD(i,e,t,s=VD,o=PD){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...kD,width:s.toString(),height:o.toString(),top:u,left:c},p=qn().toLowerCase();t&&(m=XT(p)?LD:t),QT(p)&&(e=e||jD,g.scrollbars="yes");const v=Object.entries(g).reduce((S,[N,k])=>`${S}${N}=${k},`,"");if(bI(p)&&m!=="_self")return zD(e||"",m),new dE(null);const E=window.open(e||"",m,v);Oe(E,i,"popup-blocked");try{E.focus()}catch{}return new dE(E)}function zD(i,e){const t=document.createElement("a");t.href=i,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const BD="__/auth/handler",qD="emulator/auth/handler",HD=encodeURIComponent("fac");async function mE(i,e,t,s,o,u){Oe(i.config.authDomain,i,"auth-domain-config-required"),Oe(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:s,v:ol,eventId:o};if(e instanceof sw){e.setDefaultLanguage(i.languageCode),c.providerId=e.providerId||"",Cx(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof rc){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}i.tenantId&&(c.tid=i.tenantId);const m=c;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const g=await i._getAppCheckToken(),p=g?`#${HD}=${encodeURIComponent(g)}`:"";return`${FD(i)}?${$u(m).slice(1)}${p}`}function FD({config:i}){return i.emulator?$p(i,qD):`https://${i.authDomain}/${BD}`}const lg="webStorageSupport";class GD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cw,this._completeRedirectFn=gD,this._overrideRedirectResult=fD}async _openPopup(e,t,s,o){ns(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await mE(e,t,s,Fg(),o);return UD(e,u,Jp())}async _openRedirect(e,t,s,o){await this._originValidation(e);const u=await mE(e,t,s,Fg(),o);return QI(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(ns(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await MD(e),s=new yD(e);return t.register("authEvent",o=>(Oe(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(lg,{type:lg},o=>{const u=o?.[0]?.[lg];u!==void 0&&t(!!u),ts(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=TD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return tw()||YT()||Yp()}}const KD=GD;var gE="@firebase/auth",pE="1.12.0";class $D{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function QD(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YD(i){Xo(new Ga("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=s.options;Oe(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:c,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nw(i)},p=new xI(s,o,u,g);return OI(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Xo(new Ga("auth-internal",e=>{const t=Hf(e.getProvider("auth").getImmediate());return(s=>new $D(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zs(gE,pE,QD(i)),Zs(gE,pE,"esm2020")}const XD=300,JD=WE("authIdTokenMaxAge")||XD;let yE=null;const ZD=i=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>JD)return;const o=t?.token;yE!==o&&(yE=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function qu(i=s1()){const e=ap(i,"auth");if(e.isInitialized())return e.getImmediate();const t=DI(i,{popupRedirectResolver:KD,persistence:[iD,GI,cw]}),s=WE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const c=ZD(u.toString());qI(t,c,()=>c(t.currentUser)),BI(t,m=>c(m))}}const o=JE("auth");return o&&MI(t,`http://${o}`),t}function WD(){return document.getElementsByTagName("head")?.[0]??document}RI({loadJS(i){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=Sr("internal-error");u.customData=o,t(u)},s.type="text/javascript",s.charset="UTF-8",WD().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YD("Browser");var e4="firebase",t4="12.7.0";Zs(e4,t4,"app");const _E={apiKey:"AIzaSyB3ncjSdbTdaUqac5QvHon-Id5mCo3pByM",authDomain:"dragmate-af04d.firebaseapp.com",projectId:"dragmate-af04d",storageBucket:"dragmate-af04d.firebasestorage.app",messagingSenderId:"370425129874",appId:"1:370425129874:web:4c5c526a593e8fa45a6f4b"};let ug=null,$e=null,Qh=null,On=!1;try{Object.values(_E).every(Boolean)?(ug=Xv().length?Xv()[0]:r1(_E),$e=UN(ug),Qh=qu(ug),On=!0,console.log(" Firebase initialized for DragMate")):console.warn(" DEMO MODE: Firebase env vars missing. Global features will run in local/demo mode only.")}catch(i){console.error(" Firebase initialization failed:",i)}const vE=3e4;async function n4(i){return i?i.currentUser?i.currentUser:(await Bu(i)).user??null:null}async function bE(i,e){const t=Jn(i,"presence",e.uid);await Fp(t,{lastSeen:new Date,status:"online"},{merge:!0})}function i4(){const[i,e]=H.useState({count:null,loading:!0,error:null,isOnline:!1,isSupported:On&&!!$e&&!!Qh});return H.useEffect(()=>{if(!On||!$e||!Qh){e(g=>({...g,loading:!1,isSupported:!1}));return}const t=$e,s=Qh;let o=!1,u=null,c=null;return(async()=>{try{const g=await n4(s);if(!g||o)return;await bE(t,g),e(E=>({...E,isOnline:!0,isSupported:!0})),u=window.setInterval(()=>{bE(t,g).catch(E=>{console.error("Failed to update presence",E)})},vE/2);const p=new Date(Date.now()-vE),v=YN(Xn(t,"presence"),XN("lastSeen",">=",p));c=Gp(v,E=>{o||e(S=>({...S,count:E.size,loading:!1,error:null}))},E=>{console.error("Presence subscription error",E),!o&&e(S=>({...S,loading:!1,error:E.message??"Failed to subscribe to presence"}))})}catch(g){if(console.error("Presence initialization failed",g),o)return;e(p=>({...p,loading:!1,error:g?.message??"Presence initialization failed",isSupported:!1}))}})(),()=>{o=!0,u!==null&&window.clearInterval(u),c&&c()}},[]),i}const r4=({onCreateRoom:i,onJoinRoom:e,onStartLocal:t,isAuthLoading:s,onSelectGame:o})=>{const[u,c]=H.useState("game-select"),[m,g]=H.useState(""),[p,v]=H.useState(!1),{count:E,loading:S,isSupported:N}=i4(),k=async()=>{v(!0);try{await i()}finally{v(!1)}},z=()=>T.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-500",children:[T.jsx("h2",{className:"text-2xl font-bold text-white text-center",children:"Choose Your Game"}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[T.jsx("button",{onClick:()=>{o("chess"),c("mode-select")},className:"group relative w-full aspect-[4/3] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-indigo-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-indigo-500/20 overflow-hidden text-left p-6 flex flex-col justify-between",children:T.jsxs("div",{children:[T.jsx(Eg,{className:"w-10 h-10 text-indigo-400 mb-3 group-hover:scale-110 transition-transform"}),T.jsx("h3",{className:"text-2xl font-black text-white",children:"CHESS"}),T.jsx("p",{className:"text-slate-400 text-sm font-medium mt-1",children:"The classic strategy game."})]})}),T.jsxs("button",{onClick:()=>{o("backgammon"),c("mode-select")},className:"group relative w-full aspect-[4/3] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-emerald-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-emerald-500/20 overflow-hidden text-left p-6 flex flex-col justify-between",children:[T.jsx("div",{className:"absolute top-0 right-0 p-2 bg-emerald-500/10 text-emerald-300 rounded-bl-2xl text-[10px] font-black uppercase tracking-widest border-b border-l border-emerald-500/20",children:"New"}),T.jsxs("div",{children:[T.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 border-2 border-slate-600 mb-3 group-hover:border-emerald-500 transition-colors"}),T.jsx("h3",{className:"text-2xl font-black text-white",children:"TAVLA"}),T.jsx("p",{className:"text-slate-400 text-sm font-medium mt-1",children:"Classic Turkish Backgammon."})]})]}),T.jsxs("button",{onClick:()=>{o("okey"),c("mode-select")},className:"group relative w-full aspect-[4/3] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-amber-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-amber-500/20 overflow-hidden text-left p-6 flex flex-col justify-between",children:[T.jsx("div",{className:"absolute top-0 right-0 p-2 bg-amber-500/10 text-amber-300 rounded-bl-2xl text-[10px] font-black uppercase tracking-widest border-b border-l border-amber-500/20",children:"Top"}),T.jsxs("div",{children:[T.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 border-2 border-slate-600 mb-3 group-hover:border-amber-500 transition-colors"}),T.jsx("h3",{className:"text-2xl font-black text-white",children:"OKEY"}),T.jsx("p",{className:"text-slate-400 text-sm font-medium mt-1",children:"Turkish Rummy Style."})]})]})]})]}),D=()=>T.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-right-8 duration-500",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[T.jsx("button",{onClick:()=>c("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:T.jsx(yu,{size:20})}),T.jsx("h2",{className:"text-2xl font-bold text-white",children:"Select Threat Level"})]}),T.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[T.jsx("button",{onClick:()=>t("Easy"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-green-500/50 hover:bg-slate-800 transition-all",children:T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"p-3 rounded-full bg-green-500/10 text-green-400",children:T.jsx(Jm,{size:20})}),T.jsxs("div",{className:"text-left",children:[T.jsx("div",{className:"text-lg font-bold text-white",children:"Easy"}),T.jsx("div",{className:"text-xs text-slate-500",children:"Casual play"})]})]})}),T.jsx("button",{onClick:()=>t("Normal"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-indigo-500/50 hover:bg-slate-800 transition-all",children:T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"p-3 rounded-full bg-indigo-500/10 text-indigo-400",children:T.jsx(Jm,{size:20})}),T.jsxs("div",{className:"text-left",children:[T.jsx("div",{className:"text-lg font-bold text-white",children:"Normal"}),T.jsx("div",{className:"text-xs text-slate-500",children:"Balanced opponent"})]})]})}),T.jsx("button",{onClick:()=>t("Hard"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-red-500/50 hover:bg-slate-800 transition-all",children:T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"p-3 rounded-full bg-red-500/10 text-red-400",children:T.jsx(Eg,{size:20})}),T.jsxs("div",{className:"text-left",children:[T.jsx("div",{className:"text-lg font-bold text-white",children:"Hard"}),T.jsx("div",{className:"text-xs text-slate-500",children:"Ruthless tactics"})]})]})})]})]}),B=()=>T.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-right-8 duration-500",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[T.jsx("button",{onClick:()=>c("game-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:T.jsx(yu,{size:20})}),T.jsx("h2",{className:"text-2xl font-bold text-white",children:"Select Mode"})]}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[T.jsxs("button",{onClick:()=>c("difficulty-select"),className:"group flex flex-col items-center justify-center gap-4 p-8 bg-slate-800/50 rounded-2xl border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all",children:[T.jsx("div",{className:"p-4 rounded-full bg-emerald-500/10 text-emerald-400 group-hover:scale-110 transition-transform",children:T.jsx(Jm,{size:32})}),T.jsxs("div",{className:"text-center",children:[T.jsx("div",{className:"text-xl font-bold text-white",children:"Single Player"}),T.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"Vs Computer"})]})]}),T.jsxs("button",{onClick:()=>c("connection"),className:"group flex flex-col items-center justify-center gap-4 p-8 bg-slate-800/50 rounded-2xl border border-slate-700 hover:border-indigo-500/50 hover:bg-slate-800 transition-all",children:[T.jsx("div",{className:"p-4 rounded-full bg-indigo-500/10 text-indigo-400 group-hover:scale-110 transition-transform",children:T.jsx(ip,{size:32})}),T.jsxs("div",{className:"text-center",children:[T.jsx("div",{className:"text-xl font-bold text-white",children:"Multiplayer"}),T.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"Online PvP"})]})]})]})]}),ne=()=>T.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[T.jsx("button",{onClick:()=>c("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:T.jsx(yu,{size:20})}),T.jsx("h2",{className:"text-2xl font-bold text-white",children:"Multiplayer"})]}),T.jsxs("div",{className:"space-y-6",children:[T.jsxs("button",{onClick:k,disabled:p||s,className:"w-full btn-premium flex items-center justify-center gap-3 sm:gap-4 text-lg py-4 group disabled:opacity-50 disabled:cursor-not-allowed",children:[p||s?T.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"}):T.jsx(XA,{size:24,className:"transition-transform group-hover:rotate-90"}),T.jsx("span",{children:s?"Initializing...":p?"Creating Arena...":"Create New Room"})]}),T.jsxs("div",{className:"relative flex items-center gap-6",children:[T.jsx("div",{className:"flex-1 h-px bg-slate-800"}),T.jsx("span",{className:"text-slate-600 text-xs font-black uppercase tracking-[0.2em]",children:"OR JOIN"}),T.jsx("div",{className:"flex-1 h-px bg-slate-800"})]}),T.jsxs("div",{className:"flex gap-3",children:[T.jsx("input",{type:"text",placeholder:"Enter Room ID",value:m,onChange:Z=>g(Z.target.value),className:"flex-1 bg-slate-900/40 border border-slate-800/50 rounded-xl px-4 py-4 text-lg placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all"}),T.jsx("button",{onClick:()=>e(m),disabled:!m.trim()||s,className:"bg-slate-800 hover:bg-slate-700 text-white disabled:opacity-50 px-6 rounded-xl transition-all font-bold shadow-lg",children:T.jsx(KA,{size:24})})]})]})]});return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[85vh] gap-8 lg:gap-12 relative overflow-hidden px-4",children:[T.jsxs("div",{className:"text-center space-y-4 lg:space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-1000",children:[T.jsx("div",{className:"inline-flex items-center px-3 sm:px-4 py-1.5 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-400 text-xs sm:text-sm font-semibold tracking-wide",children:"PREMIUM MULTIPLAYER CHESS"}),T.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-8xl font-black tracking-tight bg-clip-text text-transparent bg-linear-to-b from-white via-indigo-100 to-indigo-400",children:"DragMate"})]}),T.jsxs("div",{className:"liquid-glass p-6 sm:p-8 w-full max-w-xl min-h-[400px] flex flex-col justify-center",children:[u==="game-select"&&z(),u==="mode-select"&&B(),u==="difficulty-select"&&D(),u==="connection"&&ne()]}),T.jsx("div",{className:"flex items-center gap-10 text-slate-600 font-bold uppercase tracking-widest text-[10px] animate-in fade-in duration-1000 delay-500",children:T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${N?"bg-green-500":"bg-slate-600"}`}),N?`${S?"...":(E??0).toLocaleString()} Online`:"Demo Mode"]})})]})};function s4(i){return i!==null?{comment:i,variations:[]}:{variations:[]}}function a4(i,e,t,s,o){const u={move:i,variations:o};return e&&(u.suffix=e),t&&(u.nag=t),s!==null&&(u.comment=s),u}function o4(...i){const[e,...t]=i;let s=e;for(const o of t)o!==null&&(s.variations=[o,...o.variations],o.variations=[],s=o);return e}function l4(i,e){if(e.marker&&e.marker.comment){let t=e.root;for(;;){const s=t.variations[0];if(!s){t.comment=e.marker.comment;break}t=s}}return{headers:i,root:e.root,result:(e.marker&&e.marker.result)??void 0}}function u4(i,e){function t(){this.constructor=i}t.prototype=e.prototype,i.prototype=new t}function rl(i,e,t,s){var o=Error.call(this,i);return Object.setPrototypeOf&&Object.setPrototypeOf(o,rl.prototype),o.expected=e,o.found=t,o.location=s,o.name="SyntaxError",o}u4(rl,Error);function cg(i,e,t){return t=t||" ",i.length>e?i:(e-=i.length,t+=t.repeat(e),i+t.slice(0,e))}rl.prototype.format=function(i){var e="Error: "+this.message;if(this.location){var t=null,s;for(s=0;s<i.length;s++)if(i[s].source===this.location.source){t=i[s].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,u=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(o):o,c=this.location.source+":"+u.line+":"+u.column;if(t){var m=this.location.end,g=cg("",u.line.toString().length," "),p=t[o.line-1],v=o.line===m.line?m.column:p.length+1,E=v-o.column||1;e+=`
 --> `+c+`
`+g+` |
`+u.line+" | "+p+`
`+g+" | "+cg("",o.column-1," ")+cg("",E,"^")}else e+=`
 at `+c}return e};rl.buildMessage=function(i,e){var t={literal:function(p){return'"'+o(p.text)+'"'},class:function(p){var v=p.parts.map(function(E){return Array.isArray(E)?u(E[0])+"-"+u(E[1]):u(E)});return"["+(p.inverted?"^":"")+v.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(p){return p.description}};function s(p){return p.charCodeAt(0).toString(16).toUpperCase()}function o(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+s(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+s(v)})}function u(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+s(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+s(v)})}function c(p){return t[p.type](p)}function m(p){var v=p.map(c),E,S;if(v.sort(),v.length>0){for(E=1,S=1;E<v.length;E++)v[E-1]!==v[E]&&(v[S]=v[E],S++);v.length=S}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}function g(p){return p?'"'+o(p)+'"':"end of input"}return"Expected "+m(i)+" but "+g(e)+" found."};function c4(i,e){e=e!==void 0?e:{};var t={},s=e.grammarSource,o={pgn:Ja},u=Ja,c="[",m='"',g="]",p=".",v="O-O-O",E="O-O",S="0-0-0",N="0-0",k="$",z="{",D="}",B=";",ne="(",Z=")",ce="1-0",ie="0-1",W="1/2-1/2",x="*",R=/^[a-zA-Z]/,C=/^[^"]/,V=/^[0-9]/,M=/^[.]/,j=/^[a-zA-Z1-8\-=]/,I=/^[+#]/,qe=/^[!?]/,dt=/^[^}]/,te=/^[^\r\n]/,he=/^[ \t\r\n]/,be=pt("tag pair"),Me=tt("[",!1),ze=tt('"',!1),P=tt("]",!1),re=pt("tag name"),me=Ot([["a","z"],["A","Z"]],!1,!1),de=pt("tag value"),_e=Ot(['"'],!0,!1),Ae=pt("move number"),Le=Ot([["0","9"]],!1,!1),Dt=tt(".",!1),ut=Ot(["."],!1,!1),Ht=pt("standard algebraic notation"),Si=tt("O-O-O",!1),Vn=tt("O-O",!1),qi=tt("0-0-0",!1),Jt=tt("0-0",!1),fi=Ot([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),Pn=Ot(["+","#"],!1,!1),ar=pt("suffix annotation"),Hi=Ot(["!","?"],!1,!1),St=pt("NAG"),ct=tt("$",!1),Hn=pt("brace comment"),or=tt("{",!1),lr=Ot(["}"],!0,!1),Zt=tt("}",!1),Fi=pt("rest of line comment"),Rr=tt(";",!1),Fn=Ot(["\r",`
`],!0,!1),Sn=pt("variation"),Gi=tt("(",!1),Cr=tt(")",!1),Gn=pt("game termination marker"),Nr=tt("1-0",!1),Kn=tt("0-1",!1),Ft=tt("1/2-1/2",!1),pn=tt("*",!1),At=pt("whitespace"),Ir=Ot([" ","	","\r",`
`],!1,!1),Ki=function(q,X){return l4(q,X)},ss=function(q){return Object.fromEntries(q)},ni=function(q,X){return[q,X]},$i=function(q,X){return{root:q,marker:X}},He=function(q,X){return o4(s4(q),...X.flat())},xt=function(q,X,$,ye,Se){return a4(q,X,$,ye,Se)},Rt=function(q){return q},jt=function(q){return q.replace(/[\r\n]+/g," ")},yn=function(q){return q.trim()},Wt=function(q){return q},Vt=function(q,X){return{result:q,comment:X}},Y=e.peg$currPos|0,mt=[{line:1,column:1}],gt=Y,Gt=e.peg$maxFailExpected||[],fe=e.peg$silentFails|0,cn;if(e.startRule){if(!(e.startRule in o))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');u=o[e.startRule]}function tt(q,X){return{type:"literal",text:q,ignoreCase:X}}function Ot(q,X,$){return{type:"class",parts:q,inverted:X,ignoreCase:$}}function hn(){return{type:"end"}}function pt(q){return{type:"other",description:q}}function Pt(q){var X=mt[q],$;if(X)return X;if(q>=mt.length)$=mt.length-1;else for($=q;!mt[--$];);for(X=mt[$],X={line:X.line,column:X.column};$<q;)i.charCodeAt($)===10?(X.line++,X.column=1):X.column++,$++;return mt[q]=X,X}function Kt(q,X,$){var ye=Pt(q),Se=Pt(X),We={source:s,start:{offset:q,line:ye.line,column:ye.column},end:{offset:X,line:Se.line,column:Se.column}};return We}function Ee(q){Y<gt||(Y>gt&&(gt=Y,Gt=[]),Gt.push(q))}function as(q,X,$){return new rl(rl.buildMessage(q,X),q,X,$)}function Ja(){var q,X,$;return q=Y,X=Za(),$=xi(),q=Ki(X,$),q}function Za(){var q,X,$;for(q=Y,X=[],$=da();$!==t;)X.push($),$=da();return $=en(),q=ss(X),q}function da(){var q,X,$,ye,Se,We,Fe;return fe++,q=Y,en(),i.charCodeAt(Y)===91?(X=c,Y++):(X=t,fe===0&&Ee(Me)),X!==t?(en(),$=Ai(),$!==t?(en(),i.charCodeAt(Y)===34?(ye=m,Y++):(ye=t,fe===0&&Ee(ze)),ye!==t?(Se=os(),i.charCodeAt(Y)===34?(We=m,Y++):(We=t,fe===0&&Ee(ze)),We!==t?(en(),i.charCodeAt(Y)===93?(Fe=g,Y++):(Fe=t,fe===0&&Ee(P)),Fe!==t?q=ni($,Se):(Y=q,q=t)):(Y=q,q=t)):(Y=q,q=t)):(Y=q,q=t)):(Y=q,q=t),fe--,q===t&&fe===0&&Ee(be),q}function Ai(){var q,X,$;if(fe++,q=Y,X=[],$=i.charAt(Y),R.test($)?Y++:($=t,fe===0&&Ee(me)),$!==t)for(;$!==t;)X.push($),$=i.charAt(Y),R.test($)?Y++:($=t,fe===0&&Ee(me));else X=t;return X!==t?q=i.substring(q,Y):q=X,fe--,q===t&&(X=t,fe===0&&Ee(re)),q}function os(){var q,X,$;for(fe++,q=Y,X=[],$=i.charAt(Y),C.test($)?Y++:($=t,fe===0&&Ee(_e));$!==t;)X.push($),$=i.charAt(Y),C.test($)?Y++:($=t,fe===0&&Ee(_e));return q=i.substring(q,Y),fe--,X=t,fe===0&&Ee(de),q}function xi(){var q,X,$;return q=Y,X=$n(),en(),$=pa(),$===t&&($=null),en(),q=$i(X,$),q}function $n(){var q,X,$,ye;for(q=Y,X=ii(),X===t&&(X=null),$=[],ye=Ln();ye!==t;)$.push(ye),ye=Ln();return q=He(X,$),q}function Ln(){var q,X,$,ye,Se,We,Fe,Ni;if(q=Y,en(),Ri(),en(),X=Ut(),X!==t){for($=ma(),$===t&&($=null),ye=[],Se=ls();Se!==t;)ye.push(Se),Se=ls();for(Se=en(),We=ii(),We===t&&(We=null),Fe=[],Ni=us();Ni!==t;)Fe.push(Ni),Ni=us();q=xt(X,$,ye,We,Fe)}else Y=q,q=t;return q}function Ri(){var q,X,$,ye,Se,We;for(fe++,q=Y,X=[],$=i.charAt(Y),V.test($)?Y++:($=t,fe===0&&Ee(Le));$!==t;)X.push($),$=i.charAt(Y),V.test($)?Y++:($=t,fe===0&&Ee(Le));if(i.charCodeAt(Y)===46?($=p,Y++):($=t,fe===0&&Ee(Dt)),$!==t){for(ye=en(),Se=[],We=i.charAt(Y),M.test(We)?Y++:(We=t,fe===0&&Ee(ut));We!==t;)Se.push(We),We=i.charAt(Y),M.test(We)?Y++:(We=t,fe===0&&Ee(ut));X=[X,$,ye,Se],q=X}else Y=q,q=t;return fe--,q===t&&(X=t,fe===0&&Ee(Ae)),q}function Ut(){var q,X,$,ye,Se,We;if(fe++,q=Y,X=Y,i.substr(Y,5)===v?($=v,Y+=5):($=t,fe===0&&Ee(Si)),$===t&&(i.substr(Y,3)===E?($=E,Y+=3):($=t,fe===0&&Ee(Vn)),$===t&&(i.substr(Y,5)===S?($=S,Y+=5):($=t,fe===0&&Ee(qi)),$===t&&(i.substr(Y,3)===N?($=N,Y+=3):($=t,fe===0&&Ee(Jt)),$===t))))if($=Y,ye=i.charAt(Y),R.test(ye)?Y++:(ye=t,fe===0&&Ee(me)),ye!==t){if(Se=[],We=i.charAt(Y),j.test(We)?Y++:(We=t,fe===0&&Ee(fi)),We!==t)for(;We!==t;)Se.push(We),We=i.charAt(Y),j.test(We)?Y++:(We=t,fe===0&&Ee(fi));else Se=t;Se!==t?(ye=[ye,Se],$=ye):(Y=$,$=t)}else Y=$,$=t;return $!==t?(ye=i.charAt(Y),I.test(ye)?Y++:(ye=t,fe===0&&Ee(Pn)),ye===t&&(ye=null),$=[$,ye],X=$):(Y=X,X=t),X!==t?q=i.substring(q,Y):q=X,fe--,q===t&&(X=t,fe===0&&Ee(Ht)),q}function ma(){var q,X,$;for(fe++,q=Y,X=[],$=i.charAt(Y),qe.test($)?Y++:($=t,fe===0&&Ee(Hi));$!==t;)X.push($),X.length>=2?$=t:($=i.charAt(Y),qe.test($)?Y++:($=t,fe===0&&Ee(Hi)));return X.length<1?(Y=q,q=t):q=X,fe--,q===t&&(X=t,fe===0&&Ee(ar)),q}function ls(){var q,X,$,ye,Se;if(fe++,q=Y,en(),i.charCodeAt(Y)===36?(X=k,Y++):(X=t,fe===0&&Ee(ct)),X!==t){if($=Y,ye=[],Se=i.charAt(Y),V.test(Se)?Y++:(Se=t,fe===0&&Ee(Le)),Se!==t)for(;Se!==t;)ye.push(Se),Se=i.charAt(Y),V.test(Se)?Y++:(Se=t,fe===0&&Ee(Le));else ye=t;ye!==t?$=i.substring($,Y):$=ye,$!==t?q=Rt($):(Y=q,q=t)}else Y=q,q=t;return fe--,q===t&&fe===0&&Ee(St),q}function ii(){var q;return q=Ci(),q===t&&(q=ga()),q}function Ci(){var q,X,$,ye,Se;if(fe++,q=Y,i.charCodeAt(Y)===123?(X=z,Y++):(X=t,fe===0&&Ee(or)),X!==t){for($=Y,ye=[],Se=i.charAt(Y),dt.test(Se)?Y++:(Se=t,fe===0&&Ee(lr));Se!==t;)ye.push(Se),Se=i.charAt(Y),dt.test(Se)?Y++:(Se=t,fe===0&&Ee(lr));$=i.substring($,Y),i.charCodeAt(Y)===125?(ye=D,Y++):(ye=t,fe===0&&Ee(Zt)),ye!==t?q=jt($):(Y=q,q=t)}else Y=q,q=t;return fe--,q===t&&(X=t,fe===0&&Ee(Hn)),q}function ga(){var q,X,$,ye,Se;if(fe++,q=Y,i.charCodeAt(Y)===59?(X=B,Y++):(X=t,fe===0&&Ee(Rr)),X!==t){for($=Y,ye=[],Se=i.charAt(Y),te.test(Se)?Y++:(Se=t,fe===0&&Ee(Fn));Se!==t;)ye.push(Se),Se=i.charAt(Y),te.test(Se)?Y++:(Se=t,fe===0&&Ee(Fn));$=i.substring($,Y),q=yn($)}else Y=q,q=t;return fe--,q===t&&(X=t,fe===0&&Ee(Fi)),q}function us(){var q,X,$,ye;return fe++,q=Y,en(),i.charCodeAt(Y)===40?(X=ne,Y++):(X=t,fe===0&&Ee(Gi)),X!==t?($=$n(),$!==t?(en(),i.charCodeAt(Y)===41?(ye=Z,Y++):(ye=t,fe===0&&Ee(Cr)),ye!==t?q=Wt($):(Y=q,q=t)):(Y=q,q=t)):(Y=q,q=t),fe--,q===t&&fe===0&&Ee(Sn),q}function pa(){var q,X,$;return fe++,q=Y,i.substr(Y,3)===ce?(X=ce,Y+=3):(X=t,fe===0&&Ee(Nr)),X===t&&(i.substr(Y,3)===ie?(X=ie,Y+=3):(X=t,fe===0&&Ee(Kn)),X===t&&(i.substr(Y,7)===W?(X=W,Y+=7):(X=t,fe===0&&Ee(Ft)),X===t&&(i.charCodeAt(Y)===42?(X=x,Y++):(X=t,fe===0&&Ee(pn))))),X!==t?(en(),$=ii(),$===t&&($=null),q=Vt(X,$)):(Y=q,q=t),fe--,q===t&&(X=t,fe===0&&Ee(Gn)),q}function en(){var q,X;for(fe++,q=[],X=i.charAt(Y),he.test(X)?Y++:(X=t,fe===0&&Ee(Ir));X!==t;)q.push(X),X=i.charAt(Y),he.test(X)?Y++:(X=t,fe===0&&Ee(Ir));return fe--,X=t,fe===0&&Ee(At),q}if(cn=u(),e.peg$library)return{peg$result:cn,peg$currPos:Y,peg$FAILED:t,peg$maxFailExpected:Gt,peg$maxFailPos:gt};if(cn!==t&&Y===i.length)return cn;throw cn!==t&&Y<i.length&&Ee(hn()),as(Gt,gt<i.length?i.charAt(gt):null,gt<i.length?Kt(gt,gt+1):Kt(gt,gt))}const Yh=0xffffffffffffffffn;function hg(i,e){return(i<<e|i>>64n-e)&0xffffffffffffffffn}function EE(i,e){return i*e&Yh}function h4(i){return function(){let e=BigInt(i&Yh),t=BigInt(i>>64n&Yh);const s=EE(hg(EE(e,5n),7n),9n);return t^=e,e=(hg(e,24n)^t^t<<16n)&Yh,t=hg(t,37n),i=t<<64n|e,s}}const Kf=h4(0xa187eb39cdcaed8f31c4b365b102e01en),f4=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>Kf()))),d4=Array.from({length:8},()=>Kf()),m4=Array.from({length:16},()=>Kf()),fg=Kf(),zn="w",bi="b",an="p",$g="n",Xh="b",mu="r",Hs="q",dn="k",dg="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Vh{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(e,t){const{color:s,piece:o,from:u,to:c,flags:m,captured:g,promotion:p}=t,v=vn(u),E=vn(c);this.color=s,this.piece=o,this.from=v,this.to=E,this.san=e._moveToSan(t,e._moves({legal:!0})),this.lan=v+E,this.before=e.fen(),e._makeMove(t),this.after=e.fen(),e._undoMove(),this.flags="";for(const S in ke)ke[S]&m&&(this.flags+=za[S]);g&&(this.captured=g),p&&(this.promotion=p,this.lan+=p)}isCapture(){return this.flags.indexOf(za.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(za.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(za.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(za.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(za.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(za.BIG_PAWN)>-1}}const In=-1,za={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},ke={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},Qg={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},g4={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},p4={...Qg,...g4},De={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},mg={b:[16,32,17,15],w:[-16,-32,-17,-15]},TE={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},y4=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],_4=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],v4={p:1,n:2,b:4,r:8,q:16,k:32},b4="pnbrqkPNBRQK",wE=[$g,Xh,mu,Hs],E4=7,T4=6,w4=1,S4=0,Ph={[dn]:ke.KSIDE_CASTLE,[Hs]:ke.QSIDE_CASTLE},Bs={w:[{square:De.a1,flag:ke.QSIDE_CASTLE},{square:De.h1,flag:ke.KSIDE_CASTLE}],b:[{square:De.a8,flag:ke.QSIDE_CASTLE},{square:De.h8,flag:ke.KSIDE_CASTLE}]},A4={b:w4,w:T4},gg="--";function Ha(i){return i>>4}function Hu(i){return i&15}function yw(i){return"0123456789".indexOf(i)!==-1}function vn(i){const e=Hu(i),t=Ha(i);return"abcdefgh".substring(e,e+1)+"87654321".substring(t,t+1)}function uu(i){return i===zn?bi:zn}function x4(i){const e=i.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const t=parseInt(e[5],10);if(isNaN(t)||t<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const s=parseInt(e[4],10);if(isNaN(s)||s<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const o=e[0].split("/");if(o.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let c=0;c<o.length;c++){let m=0,g=!1;for(let p=0;p<o[c].length;p++)if(yw(o[c][p])){if(g)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};m+=parseInt(o[c][p],10),g=!0}else{if(!/^[prnbqkPRNBQK]$/.test(o[c][p]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};m+=1,g=!1}if(m!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const u=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:c,regex:m}of u){if(!m.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${c} king`};if((e[0].match(m)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${c} kings`}}return Array.from(o[0]+o[7]).some(c=>c.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function R4(i,e){const t=i.from,s=i.to,o=i.piece;let u=0,c=0,m=0;for(let g=0,p=e.length;g<p;g++){const v=e[g].from,E=e[g].to,S=e[g].piece;o===S&&t!==v&&s===E&&(u++,Ha(t)===Ha(v)&&c++,Hu(t)===Hu(v)&&m++)}return u>0?c>0&&m>0?vn(t):m>0?vn(t).charAt(1):vn(t).charAt(0):""}function qs(i,e,t,s,o,u=void 0,c=ke.NORMAL){const m=Ha(s);if(o===an&&(m===E4||m===S4))for(let g=0;g<wE.length;g++){const p=wE[g];i.push({color:e,from:t,to:s,piece:o,captured:u,promotion:p,flags:c|ke.PROMOTION})}else i.push({color:e,from:t,to:s,piece:o,captured:u,flags:c})}function SE(i){let e=i.charAt(0);return e>="a"&&e<="h"?i.match(/[a-h]\d.*[a-h]\d/)?void 0:an:(e=e.toLowerCase(),e==="o"?dn:e)}function pg(i){return i.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class Wp{_board=new Array(128);_turn=zn;_header={};_kings={w:In,b:In};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_hash=0n;_positionCount=new Map;constructor(e=dg,{skipValidation:t=!1}={}){this.load(e,{skipValidation:t})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:In,b:In},this._turn=zn,this._castling={w:0,b:0},this._epSquare=In,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...p4},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:t=!1,preserveHeaders:s=!1}={}){let o=e.split(/\s+/);if(o.length>=2&&o.length<6){const m=["-","-","0","1"];e=o.concat(m.slice(-(6-o.length))).join(" ")}if(o=e.split(/\s+/),!t){const{ok:m,error:g}=x4(e);if(!m)throw new Error(g)}const u=o[0];let c=0;this.clear({preserveHeaders:s});for(let m=0;m<u.length;m++){const g=u.charAt(m);if(g==="/")c+=8;else if(yw(g))c+=parseInt(g,10);else{const p=g<"a"?zn:bi;this._put({type:g.toLowerCase(),color:p},vn(c)),c++}}this._turn=o[1],o[2].indexOf("K")>-1&&(this._castling.w|=ke.KSIDE_CASTLE),o[2].indexOf("Q")>-1&&(this._castling.w|=ke.QSIDE_CASTLE),o[2].indexOf("k")>-1&&(this._castling.b|=ke.KSIDE_CASTLE),o[2].indexOf("q")>-1&&(this._castling.b|=ke.QSIDE_CASTLE),this._epSquare=o[3]==="-"?In:De[o[3]],this._halfMoves=parseInt(o[4],10),this._moveNumber=parseInt(o[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){let t=0,s="";for(let c=De.a8;c<=De.h1;c++){if(this._board[c]){t>0&&(s+=t,t=0);const{color:m,type:g}=this._board[c];s+=m===zn?g.toUpperCase():g.toLowerCase()}else t++;c+1&136&&(t>0&&(s+=t),c!==De.h1&&(s+="/"),t=0,c+=8)}let o="";this._castling[zn]&ke.KSIDE_CASTLE&&(o+="K"),this._castling[zn]&ke.QSIDE_CASTLE&&(o+="Q"),this._castling[bi]&ke.KSIDE_CASTLE&&(o+="k"),this._castling[bi]&ke.QSIDE_CASTLE&&(o+="q"),o=o||"-";let u="-";if(this._epSquare!==In)if(e)u=vn(this._epSquare);else{const c=this._epSquare+(this._turn===zn?16:-16),m=[c+1,c-1];for(const g of m){if(g&136)continue;const p=this._turn;if(this._board[g]?.color===p&&this._board[g]?.type===an){this._makeMove({color:p,from:g,to:this._epSquare,piece:an,captured:an,flags:ke.EP_CAPTURE});const v=!this._isKingAttacked(p);if(this._undoMove(),v){u=vn(this._epSquare);break}}}}return[s,this._turn,o,u,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;const{color:t,type:s}=this._board[e],o={w:0,b:1}[t],u={p:0,n:1,b:2,r:3,q:4,k:5}[s];return f4[o][u][e]}_epKey(){return this._epSquare===In?0n:d4[this._epSquare&7]}_castlingKey(){const e=this._castling.w>>5|this._castling.b>>3;return m4[e]}_computeHash(){let e=0n;for(let t=De.a8;t<=De.h1;t++){if(t&136){t+=7;continue}this._board[t]&&(e^=this._pieceKey(t))}return e^=this._epKey(),e^=this._castlingKey(),this._turn==="b"&&(e^=fg),e}_updateSetup(e){this._history.length>0||(e!==dg?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(dg)}get(e){return this._board[De[e]]}findPiece(e){const t=[];for(let s=De.a8;s<=De.h1;s++){if(s&136){s+=7;continue}!this._board[s]||this._board[s]?.color!==e.color||this._board[s].color===e.color&&this._board[s].type===e.type&&t.push(vn(s))}return t}put({type:e,color:t},s){return this._put({type:e,color:t},s)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(e,t){this._hash^=this._pieceKey(e),this._board[e]=t,this._hash^=this._pieceKey(e)}_put({type:e,color:t},s){if(b4.indexOf(e.toLowerCase())===-1||!(s in De))return!1;const o=De[s];if(e==dn&&!(this._kings[t]==In||this._kings[t]==o))return!1;const u=this._board[o];return u&&u.type===dn&&(this._kings[u.color]=In),this._set(o,{type:e,color:t}),e===dn&&(this._kings[t]=o),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){const t=this.get(e);return this._clear(De[e]),t&&t.type===dn&&(this._kings[t.color]=In),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){this._hash^=this._castlingKey();const e=this._board[De.e1]?.type===dn&&this._board[De.e1]?.color===zn,t=this._board[De.e8]?.type===dn&&this._board[De.e8]?.color===bi;(!e||this._board[De.a1]?.type!==mu||this._board[De.a1]?.color!==zn)&&(this._castling.w&=-65),(!e||this._board[De.h1]?.type!==mu||this._board[De.h1]?.color!==zn)&&(this._castling.w&=-33),(!t||this._board[De.a8]?.type!==mu||this._board[De.a8]?.color!==bi)&&(this._castling.b&=-65),(!t||this._board[De.h8]?.type!==mu||this._board[De.h8]?.color!==bi)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){if(this._epSquare===In)return;const e=this._epSquare+(this._turn===zn?-16:16),t=this._epSquare+(this._turn===zn?16:-16),s=[t+1,t-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||this._board[t]?.color!==uu(this._turn)||this._board[t]?.type!==an){this._hash^=this._epKey(),this._epSquare=In;return}const o=u=>!(u&136)&&this._board[u]?.color===this._turn&&this._board[u]?.type===an;s.some(o)||(this._hash^=this._epKey(),this._epSquare=In)}_attacked(e,t,s){const o=[];for(let u=De.a8;u<=De.h1;u++){if(u&136){u+=7;continue}if(this._board[u]===void 0||this._board[u].color!==e)continue;const c=this._board[u],m=u-t;if(m===0)continue;const g=m+119;if(y4[g]&v4[c.type]){if(c.type===an){if(m>0&&c.color===zn||m<=0&&c.color===bi)if(s)o.push(vn(u));else return!0;continue}if(c.type==="n"||c.type==="k")if(s){o.push(vn(u));continue}else return!0;const p=_4[g];let v=u+p,E=!1;for(;v!==t;){if(this._board[v]!=null){E=!0;break}v+=p}if(!E)if(s){o.push(vn(u));continue}else return!0}}return s?o:!1}attackers(e,t){return t?this._attacked(t,De[e],!0):this._attacked(this._turn,De[e],!0)}_isKingAttacked(e){const t=this._kings[e];return t===-1?!1:this._attacked(uu(e),t)}hash(){return this._hash.toString(16)}isAttacked(e,t){return this._attacked(t,De[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},t=[];let s=0,o=0;for(let u=De.a8;u<=De.h1;u++){if(o=(o+1)%2,u&136){u+=7;continue}const c=this._board[u];c&&(e[c.type]=c.type in e?e[c.type]+1:1,c.type===Xh&&t.push(o),s++)}if(s===2)return!0;if(s===3&&(e[Xh]===1||e[$g]===1))return!0;if(s===e[Xh]+2){let u=0;const c=t.length;for(let m=0;m<c;m++)u+=t[m];if(u===0||u===c)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:t=void 0,piece:s=void 0}={}){const o=this._moves({square:t,piece:s});return e?o.map(u=>new Vh(this,u)):o.map(u=>this._moveToSan(u,o))}_moves({legal:e=!0,piece:t=void 0,square:s=void 0}={}){const o=s?s.toLowerCase():void 0,u=t?.toLowerCase(),c=[],m=this._turn,g=uu(m);let p=De.a8,v=De.h1,E=!1;if(o)if(o in De)p=v=De[o],E=!0;else return[];for(let N=p;N<=v;N++){if(N&136){N+=7;continue}if(!this._board[N]||this._board[N].color===g)continue;const{type:k}=this._board[N];let z;if(k===an){if(u&&u!==k)continue;z=N+mg[m][0],this._board[z]||(qs(c,m,N,z,an),z=N+mg[m][1],A4[m]===Ha(N)&&!this._board[z]&&qs(c,m,N,z,an,void 0,ke.BIG_PAWN));for(let D=2;D<4;D++)z=N+mg[m][D],!(z&136)&&(this._board[z]?.color===g?qs(c,m,N,z,an,this._board[z].type,ke.CAPTURE):z===this._epSquare&&qs(c,m,N,z,an,an,ke.EP_CAPTURE))}else{if(u&&u!==k)continue;for(let D=0,B=TE[k].length;D<B;D++){const ne=TE[k][D];for(z=N;z+=ne,!(z&136);){if(!this._board[z])qs(c,m,N,z,k);else{if(this._board[z].color===m)break;qs(c,m,N,z,k,this._board[z].type,ke.CAPTURE);break}if(k===$g||k===dn)break}}}}if((u===void 0||u===dn)&&(!E||v===this._kings[m])){if(this._castling[m]&ke.KSIDE_CASTLE){const N=this._kings[m],k=N+2;!this._board[N+1]&&!this._board[k]&&!this._attacked(g,this._kings[m])&&!this._attacked(g,N+1)&&!this._attacked(g,k)&&qs(c,m,this._kings[m],k,dn,void 0,ke.KSIDE_CASTLE)}if(this._castling[m]&ke.QSIDE_CASTLE){const N=this._kings[m],k=N-2;!this._board[N-1]&&!this._board[N-2]&&!this._board[N-3]&&!this._attacked(g,this._kings[m])&&!this._attacked(g,N-1)&&!this._attacked(g,k)&&qs(c,m,this._kings[m],k,dn,void 0,ke.QSIDE_CASTLE)}}if(!e||this._kings[m]===-1)return c;const S=[];for(let N=0,k=c.length;N<k;N++)this._makeMove(c[N]),this._isKingAttacked(m)||S.push(c[N]),this._undoMove();return S}move(e,{strict:t=!1}={}){let s=null;if(typeof e=="string")s=this._moveFromSan(e,t);else if(e===null)s=this._moveFromSan(gg,t);else if(typeof e=="object"){const u=this._moves();for(let c=0,m=u.length;c<m;c++)if(e.from===vn(u[c].from)&&e.to===vn(u[c].to)&&(!("promotion"in u[c])||e.promotion===u[c].promotion)){s=u[c];break}}if(!s)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&s.flags&ke.NULL_MOVE)throw new Error("Null move not allowed when in check");const o=new Vh(this,s);return this._makeMove(s),this._incPositionCount(),o}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,t){this._hash^=this._pieceKey(e),this._board[t]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(t)}_makeMove(e){const t=this._turn,s=uu(t);if(this._push(e),e.flags&ke.NULL_MOVE){t===bi&&this._moveNumber++,this._halfMoves++,this._turn=s,this._epSquare=In;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&ke.EP_CAPTURE&&(this._turn===bi?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:t})),this._board[e.to].type===dn){if(this._kings[t]=e.to,e.flags&ke.KSIDE_CASTLE){const o=e.to-1,u=e.to+1;this._movePiece(u,o)}else if(e.flags&ke.QSIDE_CASTLE){const o=e.to+1,u=e.to-2;this._movePiece(u,o)}this._castling[t]=0}if(this._castling[t]){for(let o=0,u=Bs[t].length;o<u;o++)if(e.from===Bs[t][o].square&&this._castling[t]&Bs[t][o].flag){this._castling[t]^=Bs[t][o].flag;break}}if(this._castling[s]){for(let o=0,u=Bs[s].length;o<u;o++)if(e.to===Bs[s][o].square&&this._castling[s]&Bs[s][o].flag){this._castling[s]^=Bs[s][o].flag;break}}if(this._hash^=this._castlingKey(),e.flags&ke.BIG_PAWN){let o;t===bi?o=e.to-16:o=e.to+16,!(e.to-1&136)&&this._board[e.to-1]?.type===an&&this._board[e.to-1]?.color===s||!(e.to+1&136)&&this._board[e.to+1]?.type===an&&this._board[e.to+1]?.color===s?(this._epSquare=o,this._hash^=this._epKey()):this._epSquare=In}else this._epSquare=In;e.piece===an?this._halfMoves=0:e.flags&(ke.CAPTURE|ke.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===bi&&this._moveNumber++,this._turn=s,this._hash^=fg}undo(){const e=this._hash,t=this._undoMove();if(t){const s=new Vh(this,t);return this._decPositionCount(e),s}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=fg;const s=this._turn,o=uu(s);if(t.flags&ke.NULL_MOVE)return t;if(this._movePiece(t.to,t.from),t.piece&&(this._clear(t.from),this._set(t.from,{type:t.piece,color:s})),t.captured)if(t.flags&ke.EP_CAPTURE){let u;s===bi?u=t.to-16:u=t.to+16,this._set(u,{type:an,color:o})}else this._set(t.to,{type:t.captured,color:o});if(t.flags&(ke.KSIDE_CASTLE|ke.QSIDE_CASTLE)){let u,c;t.flags&ke.KSIDE_CASTLE?(u=t.to+1,c=t.to-1):(u=t.to-2,c=t.to+1),this._movePiece(c,u)}return t}pgn({newline:e=`
`,maxWidth:t=0}={}){const s=[];let o=!1;for(const S in this._header)this._header[S]&&s.push(`[${S} "${this._header[S]}"]`+e),o=!0;o&&this._history.length&&s.push(e);const u=S=>{const N=this._comments[this.fen()];if(typeof N<"u"){const k=S.length>0?" ":"";S=`${S}${k}{${N}}`}return S},c=[];for(;this._history.length>0;)c.push(this._undoMove());const m=[];let g="";for(c.length===0&&m.push(u(""));c.length>0;){g=u(g);const S=c.pop();if(!S)break;if(!this._history.length&&S.color==="b"){const N=`${this._moveNumber}. ...`;g=g?`${g} ${N}`:N}else S.color==="w"&&(g.length&&m.push(g),g=this._moveNumber+".");g=g+" "+this._moveToSan(S,this._moves({legal:!0})),this._makeMove(S)}if(g.length&&m.push(u(g)),m.push(this._header.Result||"*"),t===0)return s.join("")+m.join(" ");const p=function(){return s.length>0&&s[s.length-1]===" "?(s.pop(),!0):!1},v=function(S,N){for(const k of N.split(" "))if(k){if(S+k.length>t){for(;p();)S--;s.push(e),S=0}s.push(k),S+=k.length,s.push(" "),S++}return p()&&S--,S};let E=0;for(let S=0;S<m.length;S++){if(E+m[S].length>t&&m[S].includes("{")){E=v(E,m[S]);continue}E+m[S].length>t&&S!==0?(s[s.length-1]===" "&&s.pop(),s.push(e),E=0):S!==0&&(s.push(" "),E++),s.push(m[S]),E+=m[S].length}return s.join("")}header(...e){for(let t=0;t<e.length;t+=2)typeof e[t]=="string"&&typeof e[t+1]=="string"&&(this._header[e[t]]=e[t+1]);return this._header}setHeader(e,t){return this._header[e]=t??Qg[e]??null,this.getHeaders()}removeHeader(e){return e in this._header?(this._header[e]=Qg[e]||null,!0):!1}getHeaders(){const e={};for(const[t,s]of Object.entries(this._header))s!==null&&(e[t]=s);return e}loadPgn(e,{strict:t=!1,newlineChar:s=`\r?
`}={}){s!==`\r?
`&&(e=e.replace(new RegExp(s,"g"),`
`));const o=c4(e);this.reset();const u=o.headers;let c="";for(const p in u)p.toLowerCase()==="fen"&&(c=u[p]),this.header(p,u[p]);if(!t)c&&this.load(c,{preserveHeaders:!0});else if(u.SetUp==="1"){if(!("FEN"in u))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(u.FEN,{preserveHeaders:!0})}let m=o.root;for(;m;){if(m.move){const p=this._moveFromSan(m.move,t);if(p==null)throw new Error(`Invalid move in PGN: ${m.move}`);this._makeMove(p),this._incPositionCount()}m.comment!==void 0&&(this._comments[this.fen()]=m.comment),m=m.variations[0]}const g=o.result;g&&Object.keys(this._header).length&&this._header.Result!==g&&this.setHeader("Result",g)}_moveToSan(e,t){let s="";if(e.flags&ke.KSIDE_CASTLE)s="O-O";else if(e.flags&ke.QSIDE_CASTLE)s="O-O-O";else{if(e.flags&ke.NULL_MOVE)return gg;if(e.piece!==an){const o=R4(e,t);s+=e.piece.toUpperCase()+o}e.flags&(ke.CAPTURE|ke.EP_CAPTURE)&&(e.piece===an&&(s+=vn(e.from)[0]),s+="x"),s+=vn(e.to),e.promotion&&(s+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?s+="#":s+="+"),this._undoMove(),s}_moveFromSan(e,t=!1){let s=pg(e);if(t||(s==="0-0"?s="O-O":s==="0-0-0"&&(s="O-O-O")),s==gg)return{color:this._turn,from:0,to:0,piece:"k",flags:ke.NULL_MOVE};let o=SE(s),u=this._moves({legal:!0,piece:o});for(let S=0,N=u.length;S<N;S++)if(s===pg(this._moveToSan(u[S],u)))return u[S];if(t)return null;let c,m,g,p,v,E=!1;if(m=s.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),m?(c=m[1],g=m[2],p=m[3],v=m[4],g.length==1&&(E=!0)):(m=s.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),m&&(c=m[1],g=m[2],p=m[3],v=m[4],g.length==1&&(E=!0))),o=SE(s),u=this._moves({legal:!0,piece:c||o}),!p)return null;for(let S=0,N=u.length;S<N;S++)if(g){if((!c||c.toLowerCase()==u[S].piece)&&De[g]==u[S].from&&De[p]==u[S].to&&(!v||v.toLowerCase()==u[S].promotion))return u[S];if(E){const k=vn(u[S].from);if((!c||c.toLowerCase()==u[S].piece)&&De[p]==u[S].to&&(g==k[0]||g==k[1])&&(!v||v.toLowerCase()==u[S].promotion))return u[S]}}else if(s===pg(this._moveToSan(u[S],u)).replace("x",""))return u[S];return null}ascii(){let e=`   +------------------------+
`;for(let t=De.a8;t<=De.h1;t++){if(Hu(t)===0&&(e+=" "+"87654321"[Ha(t)]+" |"),this._board[t]){const s=this._board[t].type,u=this._board[t].color===zn?s.toUpperCase():s.toLowerCase();e+=" "+u+" "}else e+=" . ";t+1&136&&(e+=`|
`,t+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const t=this._moves({legal:!1});let s=0;const o=this._turn;for(let u=0,c=t.length;u<c;u++)this._makeMove(t[u]),this._isKingAttacked(o)||(e-1>0?s+=this.perft(e-1):s++),this._undoMove();return s}setTurn(e){return this._turn==e?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const e=[];let t=[];for(let s=De.a8;s<=De.h1;s++)this._board[s]==null?t.push(null):t.push({square:vn(s),type:this._board[s].type,color:this._board[s].color}),s+1&136&&(e.push(t),t=[],s+=8);return e}squareColor(e){if(e in De){const t=De[e];return(Ha(t)+Hu(t))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const t=[],s=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){const o=t.pop();if(!o)break;e?s.push(new Vh(this,o)):s.push(this._moveToSan(o,this._moves())),this._makeMove(o)}return s}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){const t=this._positionCount.get(e)??0;t===1?this._positionCount.delete(e):this._positionCount.set(e,t-1)}_pruneComments(){const e=[],t={},s=o=>{o in this._comments&&(t[o]=this._comments[o])};for(;this._history.length>0;)e.push(this._undoMove());for(s(this.fen());;){const o=e.pop();if(!o)break;this._makeMove(o),s(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(const o of[dn,Hs])t[o]!==void 0&&(t[o]?this._castling[e]|=Ph[o]:this._castling[e]&=~Ph[o]);this._updateCastlingRights();const s=this.getCastlingRights(e);return(t[dn]===void 0||t[dn]===s[dn])&&(t[Hs]===void 0||t[Hs]===s[Hs])}getCastlingRights(e){return{[dn]:(this._castling[e]&Ph[dn])!==0,[Hs]:(this._castling[e]&Ph[Hs])!==0}}moveNumber(){return this._moveNumber}}var gu=BE();const $f=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ml(i){const e=Object.prototype.toString.call(i);return e==="[object Window]"||e==="[object global]"}function e0(i){return"nodeType"in i}function ti(i){var e,t;return i?ml(i)?i:e0(i)&&(e=(t=i.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function t0(i){const{Document:e}=ti(i);return i instanceof e}function ac(i){return ml(i)?!1:i instanceof ti(i).HTMLElement}function _w(i){return i instanceof ti(i).SVGElement}function gl(i){return i?ml(i)?i.document:e0(i)?t0(i)?i:ac(i)||_w(i)?i.ownerDocument:document:document:document}const is=$f?H.useLayoutEffect:H.useEffect;function Qf(i){const e=H.useRef(i);return is(()=>{e.current=i}),H.useCallback(function(){for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e.current==null?void 0:e.current(...s)},[])}function C4(){const i=H.useRef(null),e=H.useCallback((s,o)=>{i.current=setInterval(s,o)},[]),t=H.useCallback(()=>{i.current!==null&&(clearInterval(i.current),i.current=null)},[]);return[e,t]}function Fu(i,e){e===void 0&&(e=[i]);const t=H.useRef(i);return is(()=>{t.current!==i&&(t.current=i)},e),t}function oc(i,e){const t=H.useRef();return H.useMemo(()=>{const s=i(t.current);return t.current=s,s},[...e])}function bf(i){const e=Qf(i),t=H.useRef(null),s=H.useCallback(o=>{o!==t.current&&e?.(o,t.current),t.current=o},[]);return[t,s]}function Ef(i){const e=H.useRef();return H.useEffect(()=>{e.current=i},[i]),e.current}let yg={};function Yf(i,e){return H.useMemo(()=>{if(e)return e;const t=yg[i]==null?0:yg[i]+1;return yg[i]=t,i+"-"+t},[i,e])}function vw(i){return function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),o=1;o<t;o++)s[o-1]=arguments[o];return s.reduce((u,c)=>{const m=Object.entries(c);for(const[g,p]of m){const v=u[g];v!=null&&(u[g]=v+i*p)}return u},{...e})}}const Qo=vw(1),Tf=vw(-1);function N4(i){return"clientX"in i&&"clientY"in i}function n0(i){if(!i)return!1;const{KeyboardEvent:e}=ti(i.target);return e&&i instanceof e}function I4(i){if(!i)return!1;const{TouchEvent:e}=ti(i.target);return e&&i instanceof e}function wf(i){if(I4(i)){if(i.touches&&i.touches.length){const{clientX:e,clientY:t}=i.touches[0];return{x:e,y:t}}else if(i.changedTouches&&i.changedTouches.length){const{clientX:e,clientY:t}=i.changedTouches[0];return{x:e,y:t}}}return N4(i)?{x:i.clientX,y:i.clientY}:null}const sl=Object.freeze({Translate:{toString(i){if(!i)return;const{x:e,y:t}=i;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(i){if(!i)return;const{scaleX:e,scaleY:t}=i;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(i){if(i)return[sl.Translate.toString(i),sl.Scale.toString(i)].join(" ")}},Transition:{toString(i){let{property:e,duration:t,easing:s}=i;return e+" "+t+"ms "+s}}}),AE="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function D4(i){return i.matches(AE)?i:i.querySelector(AE)}const O4={display:"none"};function M4(i){let{id:e,value:t}=i;return at.createElement("div",{id:e,style:O4},t)}function k4(i){let{id:e,announcement:t,ariaLiveType:s="assertive"}=i;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return at.createElement("div",{id:e,style:o,role:"status","aria-live":s,"aria-atomic":!0},t)}function V4(){const[i,e]=H.useState("");return{announce:H.useCallback(s=>{s!=null&&e(s)},[]),announcement:i}}const bw=H.createContext(null);function P4(i){const e=H.useContext(bw);H.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(i)},[i,e])}function L4(){const[i]=H.useState(()=>new Set),e=H.useCallback(s=>(i.add(s),()=>i.delete(s)),[i]);return[H.useCallback(s=>{let{type:o,event:u}=s;i.forEach(c=>{var m;return(m=c[o])==null?void 0:m.call(c,u)})},[i]),e]}const j4={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},U4={onDragStart(i){let{active:e}=i;return"Picked up draggable item "+e.id+"."},onDragOver(i){let{active:e,over:t}=i;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(i){let{active:e,over:t}=i;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(i){let{active:e}=i;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function z4(i){let{announcements:e=U4,container:t,hiddenTextDescribedById:s,screenReaderInstructions:o=j4}=i;const{announce:u,announcement:c}=V4(),m=Yf("DndLiveRegion"),[g,p]=H.useState(!1);if(H.useEffect(()=>{p(!0)},[]),P4(H.useMemo(()=>({onDragStart(E){let{active:S}=E;u(e.onDragStart({active:S}))},onDragMove(E){let{active:S,over:N}=E;e.onDragMove&&u(e.onDragMove({active:S,over:N}))},onDragOver(E){let{active:S,over:N}=E;u(e.onDragOver({active:S,over:N}))},onDragEnd(E){let{active:S,over:N}=E;u(e.onDragEnd({active:S,over:N}))},onDragCancel(E){let{active:S,over:N}=E;u(e.onDragCancel({active:S,over:N}))}}),[u,e])),!g)return null;const v=at.createElement(at.Fragment,null,at.createElement(M4,{id:s,value:o.draggable}),at.createElement(k4,{id:m,announcement:c}));return t?gu.createPortal(v,t):v}var mn;(function(i){i.DragStart="dragStart",i.DragMove="dragMove",i.DragEnd="dragEnd",i.DragCancel="dragCancel",i.DragOver="dragOver",i.RegisterDroppable="registerDroppable",i.SetDroppableDisabled="setDroppableDisabled",i.UnregisterDroppable="unregisterDroppable"})(mn||(mn={}));function Sf(){}function Ru(i,e){return H.useMemo(()=>({sensor:i,options:e??{}}),[i,e])}function Ew(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return H.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const sr=Object.freeze({x:0,y:0});function B4(i,e){const t=wf(i);if(!t)return"0 0";const s={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return s.x+"% "+s.y+"%"}function q4(i,e){let{data:{value:t}}=i,{data:{value:s}}=e;return s-t}function H4(i,e){if(!i||i.length===0)return null;const[t]=i;return t[e]}function F4(i,e){const t=Math.max(e.top,i.top),s=Math.max(e.left,i.left),o=Math.min(e.left+e.width,i.left+i.width),u=Math.min(e.top+e.height,i.top+i.height),c=o-s,m=u-t;if(s<o&&t<u){const g=e.width*e.height,p=i.width*i.height,v=c*m,E=v/(g+p-v);return Number(E.toFixed(4))}return 0}const G4=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=i;const o=[];for(const u of s){const{id:c}=u,m=t.get(c);if(m){const g=F4(m,e);g>0&&o.push({id:c,data:{droppableContainer:u,value:g}})}}return o.sort(q4)};function K4(i,e,t){return{...i,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function Tw(i,e){return i&&e?{x:i.left-e.left,y:i.top-e.top}:sr}function $4(i){return function(t){for(var s=arguments.length,o=new Array(s>1?s-1:0),u=1;u<s;u++)o[u-1]=arguments[u];return o.reduce((c,m)=>({...c,top:c.top+i*m.y,bottom:c.bottom+i*m.y,left:c.left+i*m.x,right:c.right+i*m.x}),{...t})}}const Q4=$4(1);function ww(i){if(i.startsWith("matrix3d(")){const e=i.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(i.startsWith("matrix(")){const e=i.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Y4(i,e,t){const s=ww(e);if(!s)return i;const{scaleX:o,scaleY:u,x:c,y:m}=s,g=i.left-c-(1-o)*parseFloat(t),p=i.top-m-(1-u)*parseFloat(t.slice(t.indexOf(" ")+1)),v=o?i.width/o:i.width,E=u?i.height/u:i.height;return{width:v,height:E,top:p,right:g+v,bottom:p+E,left:g}}const X4={ignoreTransform:!1};function lc(i,e){e===void 0&&(e=X4);let t=i.getBoundingClientRect();if(e.ignoreTransform){const{transform:p,transformOrigin:v}=ti(i).getComputedStyle(i);p&&(t=Y4(t,p,v))}const{top:s,left:o,width:u,height:c,bottom:m,right:g}=t;return{top:s,left:o,width:u,height:c,bottom:m,right:g}}function xE(i){return lc(i,{ignoreTransform:!0})}function J4(i){const e=i.innerWidth,t=i.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function Z4(i,e){return e===void 0&&(e=ti(i).getComputedStyle(i)),e.position==="fixed"}function W4(i,e){e===void 0&&(e=ti(i).getComputedStyle(i));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const u=e[o];return typeof u=="string"?t.test(u):!1})}function i0(i,e){const t=[];function s(o){if(e!=null&&t.length>=e||!o)return t;if(t0(o)&&o.scrollingElement!=null&&!t.includes(o.scrollingElement))return t.push(o.scrollingElement),t;if(!ac(o)||_w(o)||t.includes(o))return t;const u=ti(i).getComputedStyle(o);return o!==i&&W4(o,u)&&t.push(o),Z4(o,u)?t:s(o.parentNode)}return i?s(i):t}function Sw(i){const[e]=i0(i,1);return e??null}function _g(i){return!$f||!i?null:ml(i)?i:e0(i)?t0(i)||i===gl(i).scrollingElement?window:ac(i)?i:null:null}function Aw(i){return ml(i)?i.scrollX:i.scrollLeft}function xw(i){return ml(i)?i.scrollY:i.scrollTop}function Yg(i){return{x:Aw(i),y:xw(i)}}var En;(function(i){i[i.Forward=1]="Forward",i[i.Backward=-1]="Backward"})(En||(En={}));function Rw(i){return!$f||!i?!1:i===document.scrollingElement}function Cw(i){const e={x:0,y:0},t=Rw(i)?{height:window.innerHeight,width:window.innerWidth}:{height:i.clientHeight,width:i.clientWidth},s={x:i.scrollWidth-t.width,y:i.scrollHeight-t.height},o=i.scrollTop<=e.y,u=i.scrollLeft<=e.x,c=i.scrollTop>=s.y,m=i.scrollLeft>=s.x;return{isTop:o,isLeft:u,isBottom:c,isRight:m,maxScroll:s,minScroll:e}}const eO={x:.2,y:.2};function tO(i,e,t,s,o){let{top:u,left:c,right:m,bottom:g}=t;s===void 0&&(s=10),o===void 0&&(o=eO);const{isTop:p,isBottom:v,isLeft:E,isRight:S}=Cw(i),N={x:0,y:0},k={x:0,y:0},z={height:e.height*o.y,width:e.width*o.x};return!p&&u<=e.top+z.height?(N.y=En.Backward,k.y=s*Math.abs((e.top+z.height-u)/z.height)):!v&&g>=e.bottom-z.height&&(N.y=En.Forward,k.y=s*Math.abs((e.bottom-z.height-g)/z.height)),!S&&m>=e.right-z.width?(N.x=En.Forward,k.x=s*Math.abs((e.right-z.width-m)/z.width)):!E&&c<=e.left+z.width&&(N.x=En.Backward,k.x=s*Math.abs((e.left+z.width-c)/z.width)),{direction:N,speed:k}}function nO(i){if(i===document.scrollingElement){const{innerWidth:u,innerHeight:c}=window;return{top:0,left:0,right:u,bottom:c,width:u,height:c}}const{top:e,left:t,right:s,bottom:o}=i.getBoundingClientRect();return{top:e,left:t,right:s,bottom:o,width:i.clientWidth,height:i.clientHeight}}function Nw(i){return i.reduce((e,t)=>Qo(e,Yg(t)),sr)}function iO(i){return i.reduce((e,t)=>e+Aw(t),0)}function rO(i){return i.reduce((e,t)=>e+xw(t),0)}function Iw(i,e){if(e===void 0&&(e=lc),!i)return;const{top:t,left:s,bottom:o,right:u}=e(i);Sw(i)&&(o<=0||u<=0||t>=window.innerHeight||s>=window.innerWidth)&&i.scrollIntoView({block:"center",inline:"center"})}const sO=[["x",["left","right"],iO],["y",["top","bottom"],rO]];class r0{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=i0(t),o=Nw(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[u,c,m]of sO)for(const g of c)Object.defineProperty(this,g,{get:()=>{const p=m(s),v=o[u]-p;return this.rect[g]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Cu{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...t)})},this.target=e}add(e,t,s){var o;(o=this.target)==null||o.addEventListener(e,t,s),this.listeners.push([e,t,s])}}function aO(i){const{EventTarget:e}=ti(i);return i instanceof e?i:gl(i)}function vg(i,e){const t=Math.abs(i.x),s=Math.abs(i.y);return typeof e=="number"?Math.sqrt(t**2+s**2)>e:"x"in e&&"y"in e?t>e.x&&s>e.y:"x"in e?t>e.x:"y"in e?s>e.y:!1}var Bi;(function(i){i.Click="click",i.DragStart="dragstart",i.Keydown="keydown",i.ContextMenu="contextmenu",i.Resize="resize",i.SelectionChange="selectionchange",i.VisibilityChange="visibilitychange"})(Bi||(Bi={}));function RE(i){i.preventDefault()}function oO(i){i.stopPropagation()}var wt;(function(i){i.Space="Space",i.Down="ArrowDown",i.Right="ArrowRight",i.Left="ArrowLeft",i.Up="ArrowUp",i.Esc="Escape",i.Enter="Enter",i.Tab="Tab"})(wt||(wt={}));const Dw={start:[wt.Space,wt.Enter],cancel:[wt.Esc],end:[wt.Space,wt.Enter,wt.Tab]},lO=(i,e)=>{let{currentCoordinates:t}=e;switch(i.code){case wt.Right:return{...t,x:t.x+25};case wt.Left:return{...t,x:t.x-25};case wt.Down:return{...t,y:t.y+25};case wt.Up:return{...t,y:t.y-25}}};class Ow{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Cu(gl(t)),this.windowListeners=new Cu(ti(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Bi.Resize,this.handleCancel),this.windowListeners.add(Bi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Bi.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,s=e.node.current;s&&Iw(s),t(sr)}handleKeyDown(e){if(n0(e)){const{active:t,context:s,options:o}=this.props,{keyboardCodes:u=Dw,coordinateGetter:c=lO,scrollBehavior:m="smooth"}=o,{code:g}=e;if(u.end.includes(g)){this.handleEnd(e);return}if(u.cancel.includes(g)){this.handleCancel(e);return}const{collisionRect:p}=s.current,v=p?{x:p.left,y:p.top}:sr;this.referenceCoordinates||(this.referenceCoordinates=v);const E=c(e,{active:t,context:s.current,currentCoordinates:v});if(E){const S=Tf(E,v),N={x:0,y:0},{scrollableAncestors:k}=s.current;for(const z of k){const D=e.code,{isTop:B,isRight:ne,isLeft:Z,isBottom:ce,maxScroll:ie,minScroll:W}=Cw(z),x=nO(z),R={x:Math.min(D===wt.Right?x.right-x.width/2:x.right,Math.max(D===wt.Right?x.left:x.left+x.width/2,E.x)),y:Math.min(D===wt.Down?x.bottom-x.height/2:x.bottom,Math.max(D===wt.Down?x.top:x.top+x.height/2,E.y))},C=D===wt.Right&&!ne||D===wt.Left&&!Z,V=D===wt.Down&&!ce||D===wt.Up&&!B;if(C&&R.x!==E.x){const M=z.scrollLeft+S.x,j=D===wt.Right&&M<=ie.x||D===wt.Left&&M>=W.x;if(j&&!S.y){z.scrollTo({left:M,behavior:m});return}j?N.x=z.scrollLeft-M:N.x=D===wt.Right?z.scrollLeft-ie.x:z.scrollLeft-W.x,N.x&&z.scrollBy({left:-N.x,behavior:m});break}else if(V&&R.y!==E.y){const M=z.scrollTop+S.y,j=D===wt.Down&&M<=ie.y||D===wt.Up&&M>=W.y;if(j&&!S.x){z.scrollTo({top:M,behavior:m});return}j?N.y=z.scrollTop-M:N.y=D===wt.Down?z.scrollTop-ie.y:z.scrollTop-W.y,N.y&&z.scrollBy({top:-N.y,behavior:m});break}}this.handleMove(e,Qo(Tf(E,this.referenceCoordinates),N))}}}handleMove(e,t){const{onMove:s}=this.props;e.preventDefault(),s(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Ow.activators=[{eventName:"onKeyDown",handler:(i,e,t)=>{let{keyboardCodes:s=Dw,onActivation:o}=e,{active:u}=t;const{code:c}=i.nativeEvent;if(s.start.includes(c)){const m=u.activatorNode.current;return m&&i.target!==m?!1:(i.preventDefault(),o?.({event:i.nativeEvent}),!0)}return!1}}];function CE(i){return!!(i&&"distance"in i)}function NE(i){return!!(i&&"delay"in i)}class s0{constructor(e,t,s){var o;s===void 0&&(s=aO(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:u}=e,{target:c}=u;this.props=e,this.events=t,this.document=gl(c),this.documentListeners=new Cu(this.document),this.listeners=new Cu(s),this.windowListeners=new Cu(ti(c)),this.initialCoordinates=(o=wf(u))!=null?o:sr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Bi.Resize,this.handleCancel),this.windowListeners.add(Bi.DragStart,RE),this.windowListeners.add(Bi.VisibilityChange,this.handleCancel),this.windowListeners.add(Bi.ContextMenu,RE),this.documentListeners.add(Bi.Keydown,this.handleKeydown),t){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(NE(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(CE(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:s,onPending:o}=this.props;o(s,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Bi.Click,oO,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Bi.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:s,initialCoordinates:o,props:u}=this,{onMove:c,options:{activationConstraint:m}}=u;if(!o)return;const g=(t=wf(e))!=null?t:sr,p=Tf(o,g);if(!s&&m){if(CE(m)){if(m.tolerance!=null&&vg(p,m.tolerance))return this.handleCancel();if(vg(p,m.distance))return this.handleStart()}if(NE(m)&&vg(p,m.tolerance))return this.handleCancel();this.handlePending(m,p);return}e.cancelable&&e.preventDefault(),c(g)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===wt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const uO={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class a0 extends s0{constructor(e){const{event:t}=e,s=gl(t.target);super(e,uO,s)}}a0.activators=[{eventName:"onPointerDown",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:s}=e;return!t.isPrimary||t.button!==0?!1:(s?.({event:t}),!0)}}];const cO={move:{name:"mousemove"},end:{name:"mouseup"}};var Xg;(function(i){i[i.RightClick=2]="RightClick"})(Xg||(Xg={}));class o0 extends s0{constructor(e){super(e,cO,gl(e.event.target))}}o0.activators=[{eventName:"onMouseDown",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:s}=e;return t.button===Xg.RightClick?!1:(s?.({event:t}),!0)}}];const bg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class l0 extends s0{constructor(e){super(e,bg)}static setup(){return window.addEventListener(bg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(bg.move.name,e)};function e(){}}}l0.activators=[{eventName:"onTouchStart",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:s}=e;const{touches:o}=t;return o.length>1?!1:(s?.({event:t}),!0)}}];var Nu;(function(i){i[i.Pointer=0]="Pointer",i[i.DraggableRect=1]="DraggableRect"})(Nu||(Nu={}));var Af;(function(i){i[i.TreeOrder=0]="TreeOrder",i[i.ReversedTreeOrder=1]="ReversedTreeOrder"})(Af||(Af={}));function hO(i){let{acceleration:e,activator:t=Nu.Pointer,canScroll:s,draggingRect:o,enabled:u,interval:c=5,order:m=Af.TreeOrder,pointerCoordinates:g,scrollableAncestors:p,scrollableAncestorRects:v,delta:E,threshold:S}=i;const N=dO({delta:E,disabled:!u}),[k,z]=C4(),D=H.useRef({x:0,y:0}),B=H.useRef({x:0,y:0}),ne=H.useMemo(()=>{switch(t){case Nu.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case Nu.DraggableRect:return o}},[t,o,g]),Z=H.useRef(null),ce=H.useCallback(()=>{const W=Z.current;if(!W)return;const x=D.current.x*B.current.x,R=D.current.y*B.current.y;W.scrollBy(x,R)},[]),ie=H.useMemo(()=>m===Af.TreeOrder?[...p].reverse():p,[m,p]);H.useEffect(()=>{if(!u||!p.length||!ne){z();return}for(const W of ie){if(s?.(W)===!1)continue;const x=p.indexOf(W),R=v[x];if(!R)continue;const{direction:C,speed:V}=tO(W,R,ne,e,S);for(const M of["x","y"])N[M][C[M]]||(V[M]=0,C[M]=0);if(V.x>0||V.y>0){z(),Z.current=W,k(ce,c),D.current=V,B.current=C;return}}D.current={x:0,y:0},B.current={x:0,y:0},z()},[e,ce,s,z,u,c,JSON.stringify(ne),JSON.stringify(N),k,p,ie,v,JSON.stringify(S)])}const fO={x:{[En.Backward]:!1,[En.Forward]:!1},y:{[En.Backward]:!1,[En.Forward]:!1}};function dO(i){let{delta:e,disabled:t}=i;const s=Ef(e);return oc(o=>{if(t||!s||!o)return fO;const u={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[En.Backward]:o.x[En.Backward]||u.x===-1,[En.Forward]:o.x[En.Forward]||u.x===1},y:{[En.Backward]:o.y[En.Backward]||u.y===-1,[En.Forward]:o.y[En.Forward]||u.y===1}}},[t,e,s])}function mO(i,e){const t=e!=null?i.get(e):void 0,s=t?t.node.current:null;return oc(o=>{var u;return e==null?null:(u=s??o)!=null?u:null},[s,e])}function gO(i,e){return H.useMemo(()=>i.reduce((t,s)=>{const{sensor:o}=s,u=o.activators.map(c=>({eventName:c.eventName,handler:e(c.handler,s)}));return[...t,...u]},[]),[i,e])}var Gu;(function(i){i[i.Always=0]="Always",i[i.BeforeDragging=1]="BeforeDragging",i[i.WhileDragging=2]="WhileDragging"})(Gu||(Gu={}));var Jg;(function(i){i.Optimized="optimized"})(Jg||(Jg={}));const IE=new Map;function pO(i,e){let{dragging:t,dependencies:s,config:o}=e;const[u,c]=H.useState(null),{frequency:m,measure:g,strategy:p}=o,v=H.useRef(i),E=D(),S=Fu(E),N=H.useCallback(function(B){B===void 0&&(B=[]),!S.current&&c(ne=>ne===null?B:ne.concat(B.filter(Z=>!ne.includes(Z))))},[S]),k=H.useRef(null),z=oc(B=>{if(E&&!t)return IE;if(!B||B===IE||v.current!==i||u!=null){const ne=new Map;for(let Z of i){if(!Z)continue;if(u&&u.length>0&&!u.includes(Z.id)&&Z.rect.current){ne.set(Z.id,Z.rect.current);continue}const ce=Z.node.current,ie=ce?new r0(g(ce),ce):null;Z.rect.current=ie,ie&&ne.set(Z.id,ie)}return ne}return B},[i,u,t,E,g]);return H.useEffect(()=>{v.current=i},[i]),H.useEffect(()=>{E||N()},[t,E]),H.useEffect(()=>{u&&u.length>0&&c(null)},[JSON.stringify(u)]),H.useEffect(()=>{E||typeof m!="number"||k.current!==null||(k.current=setTimeout(()=>{N(),k.current=null},m))},[m,E,N,...s]),{droppableRects:z,measureDroppableContainers:N,measuringScheduled:u!=null};function D(){switch(p){case Gu.Always:return!1;case Gu.BeforeDragging:return t;default:return!t}}}function u0(i,e){return oc(t=>i?t||(typeof e=="function"?e(i):i):null,[e,i])}function yO(i,e){return u0(i,e)}function _O(i){let{callback:e,disabled:t}=i;const s=Qf(e),o=H.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(s)},[s,t]);return H.useEffect(()=>()=>o?.disconnect(),[o]),o}function Xf(i){let{callback:e,disabled:t}=i;const s=Qf(e),o=H.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(s)},[t]);return H.useEffect(()=>()=>o?.disconnect(),[o]),o}function vO(i){return new r0(lc(i),i)}function DE(i,e,t){e===void 0&&(e=vO);const[s,o]=H.useState(null);function u(){o(g=>{if(!i)return null;if(i.isConnected===!1){var p;return(p=g??t)!=null?p:null}const v=e(i);return JSON.stringify(g)===JSON.stringify(v)?g:v})}const c=_O({callback(g){if(i)for(const p of g){const{type:v,target:E}=p;if(v==="childList"&&E instanceof HTMLElement&&E.contains(i)){u();break}}}}),m=Xf({callback:u});return is(()=>{u(),i?(m?.observe(i),c?.observe(document.body,{childList:!0,subtree:!0})):(m?.disconnect(),c?.disconnect())},[i]),s}function bO(i){const e=u0(i);return Tw(i,e)}const OE=[];function EO(i){const e=H.useRef(i),t=oc(s=>i?s&&s!==OE&&i&&e.current&&i.parentNode===e.current.parentNode?s:i0(i):OE,[i]);return H.useEffect(()=>{e.current=i},[i]),t}function TO(i){const[e,t]=H.useState(null),s=H.useRef(i),o=H.useCallback(u=>{const c=_g(u.target);c&&t(m=>m?(m.set(c,Yg(c)),new Map(m)):null)},[]);return H.useEffect(()=>{const u=s.current;if(i!==u){c(u);const m=i.map(g=>{const p=_g(g);return p?(p.addEventListener("scroll",o,{passive:!0}),[p,Yg(p)]):null}).filter(g=>g!=null);t(m.length?new Map(m):null),s.current=i}return()=>{c(i),c(u)};function c(m){m.forEach(g=>{const p=_g(g);p?.removeEventListener("scroll",o)})}},[o,i]),H.useMemo(()=>i.length?e?Array.from(e.values()).reduce((u,c)=>Qo(u,c),sr):Nw(i):sr,[i,e])}function ME(i,e){e===void 0&&(e=[]);const t=H.useRef(null);return H.useEffect(()=>{t.current=null},e),H.useEffect(()=>{const s=i!==sr;s&&!t.current&&(t.current=i),!s&&t.current&&(t.current=null)},[i]),t.current?Tf(i,t.current):sr}function wO(i){H.useEffect(()=>{if(!$f)return;const e=i.map(t=>{let{sensor:s}=t;return s.setup==null?void 0:s.setup()});return()=>{for(const t of e)t?.()}},i.map(e=>{let{sensor:t}=e;return t}))}function SO(i,e){return H.useMemo(()=>i.reduce((t,s)=>{let{eventName:o,handler:u}=s;return t[o]=c=>{u(c,e)},t},{}),[i,e])}function Mw(i){return H.useMemo(()=>i?J4(i):null,[i])}const kE=[];function AO(i,e){e===void 0&&(e=lc);const[t]=i,s=Mw(t?ti(t):null),[o,u]=H.useState(kE);function c(){u(()=>i.length?i.map(g=>Rw(g)?s:new r0(e(g),g)):kE)}const m=Xf({callback:c});return is(()=>{m?.disconnect(),c(),i.forEach(g=>m?.observe(g))},[i]),o}function kw(i){if(!i)return null;if(i.children.length>1)return i;const e=i.children[0];return ac(e)?e:i}function xO(i){let{measure:e}=i;const[t,s]=H.useState(null),o=H.useCallback(p=>{for(const{target:v}of p)if(ac(v)){s(E=>{const S=e(v);return E?{...E,width:S.width,height:S.height}:S});break}},[e]),u=Xf({callback:o}),c=H.useCallback(p=>{const v=kw(p);u?.disconnect(),v&&u?.observe(v),s(v?e(v):null)},[e,u]),[m,g]=bf(c);return H.useMemo(()=>({nodeRef:m,rect:t,setRef:g}),[t,m,g])}const RO=[{sensor:a0,options:{}},{sensor:Ow,options:{}}],CO={current:{}},Jh={draggable:{measure:xE},droppable:{measure:xE,strategy:Gu.WhileDragging,frequency:Jg.Optimized},dragOverlay:{measure:lc}};class Iu extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,s;return(t=(s=this.get(e))==null?void 0:s.node.current)!=null?t:void 0}}const NO={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Iu,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Sf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Jh,measureDroppableContainers:Sf,windowRect:null,measuringScheduled:!1},Vw={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Sf,draggableNodes:new Map,over:null,measureDroppableContainers:Sf},uc=H.createContext(Vw),Pw=H.createContext(NO);function IO(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Iu}}}function DO(i,e){switch(e.type){case mn.DragStart:return{...i,draggable:{...i.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case mn.DragMove:return i.draggable.active==null?i:{...i,draggable:{...i.draggable,translate:{x:e.coordinates.x-i.draggable.initialCoordinates.x,y:e.coordinates.y-i.draggable.initialCoordinates.y}}};case mn.DragEnd:case mn.DragCancel:return{...i,draggable:{...i.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case mn.RegisterDroppable:{const{element:t}=e,{id:s}=t,o=new Iu(i.droppable.containers);return o.set(s,t),{...i,droppable:{...i.droppable,containers:o}}}case mn.SetDroppableDisabled:{const{id:t,key:s,disabled:o}=e,u=i.droppable.containers.get(t);if(!u||s!==u.key)return i;const c=new Iu(i.droppable.containers);return c.set(t,{...u,disabled:o}),{...i,droppable:{...i.droppable,containers:c}}}case mn.UnregisterDroppable:{const{id:t,key:s}=e,o=i.droppable.containers.get(t);if(!o||s!==o.key)return i;const u=new Iu(i.droppable.containers);return u.delete(t),{...i,droppable:{...i.droppable,containers:u}}}default:return i}}function OO(i){let{disabled:e}=i;const{active:t,activatorEvent:s,draggableNodes:o}=H.useContext(uc),u=Ef(s),c=Ef(t?.id);return H.useEffect(()=>{if(!e&&!s&&u&&c!=null){if(!n0(u)||document.activeElement===u.target)return;const m=o.get(c);if(!m)return;const{activatorNode:g,node:p}=m;if(!g.current&&!p.current)return;requestAnimationFrame(()=>{for(const v of[g.current,p.current]){if(!v)continue;const E=D4(v);if(E){E.focus();break}}})}},[s,e,o,c,u]),null}function Lw(i,e){let{transform:t,...s}=e;return i!=null&&i.length?i.reduce((o,u)=>u({transform:o,...s}),t):t}function MO(i){return H.useMemo(()=>({draggable:{...Jh.draggable,...i?.draggable},droppable:{...Jh.droppable,...i?.droppable},dragOverlay:{...Jh.dragOverlay,...i?.dragOverlay}}),[i?.draggable,i?.droppable,i?.dragOverlay])}function kO(i){let{activeNode:e,measure:t,initialRect:s,config:o=!0}=i;const u=H.useRef(!1),{x:c,y:m}=typeof o=="boolean"?{x:o,y:o}:o;is(()=>{if(!c&&!m||!e){u.current=!1;return}if(u.current||!s)return;const p=e?.node.current;if(!p||p.isConnected===!1)return;const v=t(p),E=Tw(v,s);if(c||(E.x=0),m||(E.y=0),u.current=!0,Math.abs(E.x)>0||Math.abs(E.y)>0){const S=Sw(p);S&&S.scrollBy({top:E.y,left:E.x})}},[e,c,m,s,t])}const Jf=H.createContext({...sr,scaleX:1,scaleY:1});var Fs;(function(i){i[i.Uninitialized=0]="Uninitialized",i[i.Initializing=1]="Initializing",i[i.Initialized=2]="Initialized"})(Fs||(Fs={}));const jw=H.memo(function(e){var t,s,o,u;let{id:c,accessibility:m,autoScroll:g=!0,children:p,sensors:v=RO,collisionDetection:E=G4,measuring:S,modifiers:N,...k}=e;const z=H.useReducer(DO,void 0,IO),[D,B]=z,[ne,Z]=L4(),[ce,ie]=H.useState(Fs.Uninitialized),W=ce===Fs.Initialized,{draggable:{active:x,nodes:R,translate:C},droppable:{containers:V}}=D,M=x!=null?R.get(x):null,j=H.useRef({initial:null,translated:null}),I=H.useMemo(()=>{var He;return x!=null?{id:x,data:(He=M?.data)!=null?He:CO,rect:j}:null},[x,M]),qe=H.useRef(null),[dt,te]=H.useState(null),[he,be]=H.useState(null),Me=Fu(k,Object.values(k)),ze=Yf("DndDescribedBy",c),P=H.useMemo(()=>V.getEnabled(),[V]),re=MO(S),{droppableRects:me,measureDroppableContainers:de,measuringScheduled:_e}=pO(P,{dragging:W,dependencies:[C.x,C.y],config:re.droppable}),Ae=mO(R,x),Le=H.useMemo(()=>he?wf(he):null,[he]),Dt=$i(),ut=yO(Ae,re.draggable.measure);kO({activeNode:x!=null?R.get(x):null,config:Dt.layoutShiftCompensation,initialRect:ut,measure:re.draggable.measure});const Ht=DE(Ae,re.draggable.measure,ut),Si=DE(Ae?Ae.parentElement:null),Vn=H.useRef({activatorEvent:null,active:null,activeNode:Ae,collisionRect:null,collisions:null,droppableRects:me,draggableNodes:R,draggingNode:null,draggingNodeRect:null,droppableContainers:V,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),qi=V.getNodeFor((t=Vn.current.over)==null?void 0:t.id),Jt=xO({measure:re.dragOverlay.measure}),fi=(s=Jt.nodeRef.current)!=null?s:Ae,Pn=W?(o=Jt.rect)!=null?o:Ht:null,ar=!!(Jt.nodeRef.current&&Jt.rect),Hi=bO(ar?null:Ht),St=Mw(fi?ti(fi):null),ct=EO(W?qi??Ae:null),Hn=AO(ct),or=Lw(N,{transform:{x:C.x-Hi.x,y:C.y-Hi.y,scaleX:1,scaleY:1},activatorEvent:he,active:I,activeNodeRect:Ht,containerNodeRect:Si,draggingNodeRect:Pn,over:Vn.current.over,overlayNodeRect:Jt.rect,scrollableAncestors:ct,scrollableAncestorRects:Hn,windowRect:St}),lr=Le?Qo(Le,C):null,Zt=TO(ct),Fi=ME(Zt),Rr=ME(Zt,[Ht]),Fn=Qo(or,Fi),Sn=Pn?Q4(Pn,or):null,Gi=I&&Sn?E({active:I,collisionRect:Sn,droppableRects:me,droppableContainers:P,pointerCoordinates:lr}):null,Cr=H4(Gi,"id"),[Gn,Nr]=H.useState(null),Kn=ar?or:Qo(or,Rr),Ft=K4(Kn,(u=Gn?.rect)!=null?u:null,Ht),pn=H.useRef(null),At=H.useCallback((He,xt)=>{let{sensor:Rt,options:jt}=xt;if(qe.current==null)return;const yn=R.get(qe.current);if(!yn)return;const Wt=He.nativeEvent,Vt=new Rt({active:qe.current,activeNode:yn,event:Wt,options:jt,context:Vn,onAbort(mt){if(!R.get(mt))return;const{onDragAbort:Gt}=Me.current,fe={id:mt};Gt?.(fe),ne({type:"onDragAbort",event:fe})},onPending(mt,gt,Gt,fe){if(!R.get(mt))return;const{onDragPending:tt}=Me.current,Ot={id:mt,constraint:gt,initialCoordinates:Gt,offset:fe};tt?.(Ot),ne({type:"onDragPending",event:Ot})},onStart(mt){const gt=qe.current;if(gt==null)return;const Gt=R.get(gt);if(!Gt)return;const{onDragStart:fe}=Me.current,cn={activatorEvent:Wt,active:{id:gt,data:Gt.data,rect:j}};gu.unstable_batchedUpdates(()=>{fe?.(cn),ie(Fs.Initializing),B({type:mn.DragStart,initialCoordinates:mt,active:gt}),ne({type:"onDragStart",event:cn}),te(pn.current),be(Wt)})},onMove(mt){B({type:mn.DragMove,coordinates:mt})},onEnd:Y(mn.DragEnd),onCancel:Y(mn.DragCancel)});pn.current=Vt;function Y(mt){return async function(){const{active:Gt,collisions:fe,over:cn,scrollAdjustedTranslate:tt}=Vn.current;let Ot=null;if(Gt&&tt){const{cancelDrop:hn}=Me.current;Ot={activatorEvent:Wt,active:Gt,collisions:fe,delta:tt,over:cn},mt===mn.DragEnd&&typeof hn=="function"&&await Promise.resolve(hn(Ot))&&(mt=mn.DragCancel)}qe.current=null,gu.unstable_batchedUpdates(()=>{B({type:mt}),ie(Fs.Uninitialized),Nr(null),te(null),be(null),pn.current=null;const hn=mt===mn.DragEnd?"onDragEnd":"onDragCancel";if(Ot){const pt=Me.current[hn];pt?.(Ot),ne({type:hn,event:Ot})}})}}},[R]),Ir=H.useCallback((He,xt)=>(Rt,jt)=>{const yn=Rt.nativeEvent,Wt=R.get(jt);if(qe.current!==null||!Wt||yn.dndKit||yn.defaultPrevented)return;const Vt={active:Wt};He(Rt,xt.options,Vt)===!0&&(yn.dndKit={capturedBy:xt.sensor},qe.current=jt,At(Rt,xt))},[R,At]),Ki=gO(v,Ir);wO(v),is(()=>{Ht&&ce===Fs.Initializing&&ie(Fs.Initialized)},[Ht,ce]),H.useEffect(()=>{const{onDragMove:He}=Me.current,{active:xt,activatorEvent:Rt,collisions:jt,over:yn}=Vn.current;if(!xt||!Rt)return;const Wt={active:xt,activatorEvent:Rt,collisions:jt,delta:{x:Fn.x,y:Fn.y},over:yn};gu.unstable_batchedUpdates(()=>{He?.(Wt),ne({type:"onDragMove",event:Wt})})},[Fn.x,Fn.y]),H.useEffect(()=>{const{active:He,activatorEvent:xt,collisions:Rt,droppableContainers:jt,scrollAdjustedTranslate:yn}=Vn.current;if(!He||qe.current==null||!xt||!yn)return;const{onDragOver:Wt}=Me.current,Vt=jt.get(Cr),Y=Vt&&Vt.rect.current?{id:Vt.id,rect:Vt.rect.current,data:Vt.data,disabled:Vt.disabled}:null,mt={active:He,activatorEvent:xt,collisions:Rt,delta:{x:yn.x,y:yn.y},over:Y};gu.unstable_batchedUpdates(()=>{Nr(Y),Wt?.(mt),ne({type:"onDragOver",event:mt})})},[Cr]),is(()=>{Vn.current={activatorEvent:he,active:I,activeNode:Ae,collisionRect:Sn,collisions:Gi,droppableRects:me,draggableNodes:R,draggingNode:fi,draggingNodeRect:Pn,droppableContainers:V,over:Gn,scrollableAncestors:ct,scrollAdjustedTranslate:Fn},j.current={initial:Pn,translated:Sn}},[I,Ae,Gi,Sn,R,fi,Pn,me,V,Gn,ct,Fn]),hO({...Dt,delta:C,draggingRect:Sn,pointerCoordinates:lr,scrollableAncestors:ct,scrollableAncestorRects:Hn});const ss=H.useMemo(()=>({active:I,activeNode:Ae,activeNodeRect:Ht,activatorEvent:he,collisions:Gi,containerNodeRect:Si,dragOverlay:Jt,draggableNodes:R,droppableContainers:V,droppableRects:me,over:Gn,measureDroppableContainers:de,scrollableAncestors:ct,scrollableAncestorRects:Hn,measuringConfiguration:re,measuringScheduled:_e,windowRect:St}),[I,Ae,Ht,he,Gi,Si,Jt,R,V,me,Gn,de,ct,Hn,re,_e,St]),ni=H.useMemo(()=>({activatorEvent:he,activators:Ki,active:I,activeNodeRect:Ht,ariaDescribedById:{draggable:ze},dispatch:B,draggableNodes:R,over:Gn,measureDroppableContainers:de}),[he,Ki,I,Ht,B,ze,R,Gn,de]);return at.createElement(bw.Provider,{value:Z},at.createElement(uc.Provider,{value:ni},at.createElement(Pw.Provider,{value:ss},at.createElement(Jf.Provider,{value:Ft},p)),at.createElement(OO,{disabled:m?.restoreFocus===!1})),at.createElement(z4,{...m,hiddenTextDescribedById:ze}));function $i(){const He=dt?.autoScrollEnabled===!1,xt=typeof g=="object"?g.enabled===!1:g===!1,Rt=W&&!He&&!xt;return typeof g=="object"?{...g,enabled:Rt}:{enabled:Rt}}}),VO=H.createContext(null),VE="button",PO="Draggable";function Uw(i){let{id:e,data:t,disabled:s=!1,attributes:o}=i;const u=Yf(PO),{activators:c,activatorEvent:m,active:g,activeNodeRect:p,ariaDescribedById:v,draggableNodes:E,over:S}=H.useContext(uc),{role:N=VE,roleDescription:k="draggable",tabIndex:z=0}=o??{},D=g?.id===e,B=H.useContext(D?Jf:VO),[ne,Z]=bf(),[ce,ie]=bf(),W=SO(c,e),x=Fu(t);is(()=>(E.set(e,{id:e,key:u,node:ne,activatorNode:ce,data:x}),()=>{const C=E.get(e);C&&C.key===u&&E.delete(e)}),[E,e]);const R=H.useMemo(()=>({role:N,tabIndex:z,"aria-disabled":s,"aria-pressed":D&&N===VE?!0:void 0,"aria-roledescription":k,"aria-describedby":v.draggable}),[s,N,z,D,k,v.draggable]);return{active:g,activatorEvent:m,activeNodeRect:p,attributes:R,isDragging:D,listeners:s?void 0:W,node:ne,over:S,setNodeRef:Z,setActivatorNodeRef:ie,transform:B}}function LO(){return H.useContext(Pw)}const jO="Droppable",UO={timeout:25};function c0(i){let{data:e,disabled:t=!1,id:s,resizeObserverConfig:o}=i;const u=Yf(jO),{active:c,dispatch:m,over:g,measureDroppableContainers:p}=H.useContext(uc),v=H.useRef({disabled:t}),E=H.useRef(!1),S=H.useRef(null),N=H.useRef(null),{disabled:k,updateMeasurementsFor:z,timeout:D}={...UO,...o},B=Fu(z??s),ne=H.useCallback(()=>{if(!E.current){E.current=!0;return}N.current!=null&&clearTimeout(N.current),N.current=setTimeout(()=>{p(Array.isArray(B.current)?B.current:[B.current]),N.current=null},D)},[D]),Z=Xf({callback:ne,disabled:k||!c}),ce=H.useCallback((R,C)=>{Z&&(C&&(Z.unobserve(C),E.current=!1),R&&Z.observe(R))},[Z]),[ie,W]=bf(ce),x=Fu(e);return H.useEffect(()=>{!Z||!ie.current||(Z.disconnect(),E.current=!1,Z.observe(ie.current))},[ie,Z]),H.useEffect(()=>(m({type:mn.RegisterDroppable,element:{id:s,key:u,disabled:t,node:ie,rect:S,data:x}}),()=>m({type:mn.UnregisterDroppable,key:u,id:s})),[s]),H.useEffect(()=>{t!==v.current.disabled&&(m({type:mn.SetDroppableDisabled,id:s,key:u,disabled:t}),v.current.disabled=t)},[s,u,t,m]),{active:c,rect:S,isOver:g?.id===s,node:ie,over:g,setNodeRef:W}}function zO(i){let{animation:e,children:t}=i;const[s,o]=H.useState(null),[u,c]=H.useState(null),m=Ef(t);return!t&&!s&&m&&o(m),is(()=>{if(!u)return;const g=s?.key,p=s?.props.id;if(g==null||p==null){o(null);return}Promise.resolve(e(p,u)).then(()=>{o(null)})},[e,s,u]),at.createElement(at.Fragment,null,t,s?H.cloneElement(s,{ref:c}):null)}const BO={x:0,y:0,scaleX:1,scaleY:1};function qO(i){let{children:e}=i;return at.createElement(uc.Provider,{value:Vw},at.createElement(Jf.Provider,{value:BO},e))}const HO={position:"fixed",touchAction:"none"},FO=i=>n0(i)?"transform 250ms ease":void 0,GO=H.forwardRef((i,e)=>{let{as:t,activatorEvent:s,adjustScale:o,children:u,className:c,rect:m,style:g,transform:p,transition:v=FO}=i;if(!m)return null;const E=o?p:{...p,scaleX:1,scaleY:1},S={...HO,width:m.width,height:m.height,top:m.top,left:m.left,transform:sl.Transform.toString(E),transformOrigin:o&&s?B4(s,m):void 0,transition:typeof v=="function"?v(s):v,...g};return at.createElement(t,{className:c,style:S,ref:e},u)}),KO=i=>e=>{let{active:t,dragOverlay:s}=e;const o={},{styles:u,className:c}=i;if(u!=null&&u.active)for(const[m,g]of Object.entries(u.active))g!==void 0&&(o[m]=t.node.style.getPropertyValue(m),t.node.style.setProperty(m,g));if(u!=null&&u.dragOverlay)for(const[m,g]of Object.entries(u.dragOverlay))g!==void 0&&s.node.style.setProperty(m,g);return c!=null&&c.active&&t.node.classList.add(c.active),c!=null&&c.dragOverlay&&s.node.classList.add(c.dragOverlay),function(){for(const[g,p]of Object.entries(o))t.node.style.setProperty(g,p);c!=null&&c.active&&t.node.classList.remove(c.active)}},$O=i=>{let{transform:{initial:e,final:t}}=i;return[{transform:sl.Transform.toString(e)},{transform:sl.Transform.toString(t)}]},QO={duration:250,easing:"ease",keyframes:$O,sideEffects:KO({styles:{active:{opacity:"0"}}})};function YO(i){let{config:e,draggableNodes:t,droppableContainers:s,measuringConfiguration:o}=i;return Qf((u,c)=>{if(e===null)return;const m=t.get(u);if(!m)return;const g=m.node.current;if(!g)return;const p=kw(c);if(!p)return;const{transform:v}=ti(c).getComputedStyle(c),E=ww(v);if(!E)return;const S=typeof e=="function"?e:XO(e);return Iw(g,o.draggable.measure),S({active:{id:u,data:m.data,node:g,rect:o.draggable.measure(g)},draggableNodes:t,dragOverlay:{node:c,rect:o.dragOverlay.measure(p)},droppableContainers:s,measuringConfiguration:o,transform:E})})}function XO(i){const{duration:e,easing:t,sideEffects:s,keyframes:o}={...QO,...i};return u=>{let{active:c,dragOverlay:m,transform:g,...p}=u;if(!e)return;const v={x:m.rect.left-c.rect.left,y:m.rect.top-c.rect.top},E={scaleX:g.scaleX!==1?c.rect.width*g.scaleX/m.rect.width:1,scaleY:g.scaleY!==1?c.rect.height*g.scaleY/m.rect.height:1},S={x:g.x-v.x,y:g.y-v.y,...E},N=o({...p,active:c,dragOverlay:m,transform:{initial:g,final:S}}),[k]=N,z=N[N.length-1];if(JSON.stringify(k)===JSON.stringify(z))return;const D=s?.({active:c,dragOverlay:m,...p}),B=m.node.animate(N,{duration:e,easing:t,fill:"forwards"});return new Promise(ne=>{B.onfinish=()=>{D?.(),ne()}})}}let PE=0;function JO(i){return H.useMemo(()=>{if(i!=null)return PE++,PE},[i])}const ZO=at.memo(i=>{let{adjustScale:e=!1,children:t,dropAnimation:s,style:o,transition:u,modifiers:c,wrapperElement:m="div",className:g,zIndex:p=999}=i;const{activatorEvent:v,active:E,activeNodeRect:S,containerNodeRect:N,draggableNodes:k,droppableContainers:z,dragOverlay:D,over:B,measuringConfiguration:ne,scrollableAncestors:Z,scrollableAncestorRects:ce,windowRect:ie}=LO(),W=H.useContext(Jf),x=JO(E?.id),R=Lw(c,{activatorEvent:v,active:E,activeNodeRect:S,containerNodeRect:N,draggingNodeRect:D.rect,over:B,overlayNodeRect:D.rect,scrollableAncestors:Z,scrollableAncestorRects:ce,transform:W,windowRect:ie}),C=u0(S),V=YO({config:s,draggableNodes:k,droppableContainers:z,measuringConfiguration:ne}),M=C?D.setRef:void 0;return at.createElement(qO,null,at.createElement(zO,{animation:V},E&&x?at.createElement(GO,{key:x,id:E.id,ref:M,as:m,activatorEvent:v,adjustScale:e,className:g,transition:u,rect:C,style:{zIndex:p,...o},transform:R},t):null))}),Yo=i=>new Wp(i),WO=(i,e,t,s)=>{try{return i.move({from:e,to:t,promotion:s||"q"})}catch{return null}},eM=({id:i,isLight:e,isHighlighted:t=!1,isActive:s=!1,children:o})=>{const{isOver:u,setNodeRef:c}=c0({id:i});return T.jsxs("div",{ref:c,className:`chess-square ${s?"z-50 relative":"overflow-hidden"} ${u?"bg-indigo-500/60 shadow-[inset_0_0_20px_rgba(255,255,255,0.2)] z-10":t?e?"bg-indigo-400/50 shadow-inner":"bg-indigo-600/50 shadow-inner":e?"bg-[#cbd5e1] text-slate-700 shadow-[inset_0_1px_4px_rgba(255,255,255,0.3)]":"bg-[#334155] text-slate-400 shadow-[inset_0_2px_4px_rgba(0,0,0,0.3)]"}`,children:[T.jsx("div",{className:`absolute top-1 left-1 text-[10px] font-black uppercase tracking-tighter opacity-20 pointer-events-none ${e?"text-slate-900":"text-slate-100"}`,children:i}),T.jsx("div",{className:"relative w-full h-full overflow-visible z-10",children:o})]})},tM={w:{p:"",r:"",n:"",b:"",q:"",k:""},b:{p:"",r:"",n:"",b:"",q:"",k:""}},nM=({id:i,type:e,color:t,isDraggable:s=!0})=>{const{attributes:o,listeners:u,setNodeRef:c,transform:m,isDragging:g}=Uw({id:i,disabled:!s,data:{type:e,color:t}}),p={transform:sl.Translate.toString(m),transition:g?"none":"transform 120ms ease-out",zIndex:g?9999:20};return T.jsx("div",{ref:c,style:p,...u,...o,className:`chess-piece transition-transform duration-120 ease-out ${g?"scale-112 drop-shadow-2xl z-[9999]":"hover:scale-103 z-20"} ${s?"cursor-grab active:cursor-grabbing":"grayscale-[0.2] opacity-90 cursor-default"} text-slate-950 drop-shadow-sm`,children:T.jsx("div",{className:`
        flex items-center justify-center w-full h-full 
        ${t==="w"?"drop-shadow-[0_2px_0_rgba(255,255,255,0.8)]":"drop-shadow-[0_2px_0_rgba(0,0,0,0.5)]"}
      `,children:tM[t][e]})})},iM=({onMove:i,initialFen:e,playerColor:t="w",isGameOver:s=!1})=>{const[o,u]=H.useState(()=>Yo(e)),[c,m]=H.useState([]),[g,p]=H.useState(null);at.useEffect(()=>{e&&e!==o.fen()&&u(Yo(e))},[e]);const v=Ew(Ru(l0,{activationConstraint:{delay:80,tolerance:8}}),Ru(a0),Ru(o0)),E=H.useCallback(k=>{const{active:z,over:D}=k;if(m([]),p(null),!D)return;const B=z.id,ne=D.id,Z=Yo(o.fen());WO(Z,B,ne)&&(u(Z),i&&i(Z.fen()))},[o,i]),S=H.useCallback(k=>{p(k);const z=k,D=o.get(z);if(s||!D||D.color!==t||o.turn()!==t){m([]);return}const B=o.moves({square:z,verbose:!0}).map(ne=>ne.to);m(B)},[o,t]),N=()=>{const k=[],z=["a","b","c","d","e","f","g","h"],D=["8","7","6","5","4","3","2","1"],B=t==="w"?D:[...D].reverse(),ne=t==="w"?z:[...z].reverse();for(const Z of B)for(const ce of ne){const ie=`${ce}${Z}`,W=o.get(ie),x=(z.indexOf(ce)+D.indexOf(Z))%2===0,R=!!W&&W.color===t&&o.turn()===t&&!s,C=c.includes(ie),V=ie===g;k.push(T.jsx(eM,{id:ie,isLight:x,isHighlighted:C,isActive:V,children:W&&T.jsx(nM,{id:ie,type:W.type,color:W.color,isDraggable:R})},ie))}return k};return T.jsx(jw,{sensors:v,onDragEnd:E,onDragStart:k=>S(k.active.id),children:T.jsx("div",{className:"p-3 lg:p-4 bg-slate-800 rounded-[2rem] lg:rounded-[2.5rem] shadow-[0_0_50px_-12px_rgba(99,102,241,0.25)] border-4 border-slate-700/50 ring-4 ring-slate-900/50",style:{touchAction:"none"},children:T.jsx("div",{className:"grid grid-cols-8 gap-0 rounded-2xl lg:rounded-3xl overflow-hidden border border-slate-700/30 shadow-inner",style:{width:"min(92vw, 720px)",height:"min(92vw, 720px)",gridTemplateColumns:"repeat(8, 1fr)"},children:N()})})})},rM=()=>Math.random().toString(36).substring(2,8).toUpperCase(),LE="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",zw=i=>{const[e,t]=H.useState(null),[s,o]=H.useState(null),[u,c]=H.useState(!0),[m,g]=H.useState(!0);H.useEffect(()=>{const D=qu();Bu(D).then(B=>{o(B.user.uid)}).catch(B=>{console.error("Auth failed",B)}).finally(()=>g(!1))},[]);const p=async()=>{if(s)return s;const D=qu(),B=await Bu(D);return o(B.user.uid),B.user.uid};return H.useEffect(()=>{if(!On||!$e){console.warn("Firebase not configured; room sync disabled."),c(!1);return}if(!i){t(null),c(!1);return}c(!0);const D=Jn(Xn($e,"rooms"),i),B=Gp(D,ne=>{ne.exists()?t(ne.data()):t(null),c(!1)},ne=>{console.error("Room subscription error",ne),t(null),c(!1)});return()=>B()},[i]),{room:e,userId:s,loading:u,isAuthLoading:m,createRoom:async()=>{if(!On||!$e)throw new Error("Firebase not configured");const D=await p(),B=rM(),ne=Jn(Xn($e,"rooms"),B);return await Fp(ne,{fen:LE,whitePlayer:D,blackPlayer:"",turn:"w",status:"active",winner:"",resultReason:""}),B},joinRoom:async D=>{if(!On||!$e)throw new Error("Firebase not configured");const B=await p(),ne=Jn(Xn($e,"rooms"),D);await Au($e,async Z=>{const ce=await Z.get(ne);if(!ce.exists())throw new Error("Room not found");const W={...ce.data()};W.whitePlayer?!W.blackPlayer&&W.whitePlayer!==B&&(W.blackPlayer=B):W.whitePlayer=B,Z.update(ne,W)})},updateMove:async D=>{if(!On||!$e||!i)return;const B=Jn(Xn($e,"rooms"),i);await Au($e,async ne=>{const Z=await ne.get(B);if(!Z.exists())return;const ce=Z.data();if(ce.status&&ce.status!=="active")return;const ie=new Wp(D),W=ie.turn();let x="active",R="",C="";ie.isCheckmate()?(x="checkmate",R=W==="w"?"b":"w",C="checkmate"):ie.isStalemate&&ie.isStalemate()?(x="stalemate",R="",C="stalemate"):ie.isDraw()&&(x="draw",R="",C="draw"),ne.update(B,{fen:D,turn:W,status:x,winner:R,resultReason:C})})},resignGame:async D=>{if(!On||!$e||!i)return;const B=Jn(Xn($e,"rooms"),i);await Su(B,{status:"resigned",winner:D==="w"?"b":"w",resultReason:"resigned"})},resetGame:async()=>{if(!On||!$e||!i)return;const D=Jn(Xn($e,"rooms"),i);await Su(D,{fen:LE,turn:"w",status:"active",winner:"",resultReason:""})},leaveRoom:async()=>{if(!(!On||!$e)&&i)try{const D=await p(),B=Jn(Xn($e,"rooms"),i);await Au($e,async ne=>{const Z=await ne.get(B);if(!Z.exists())return;const ie={...Z.data()};ie.whitePlayer===D?ie.whitePlayer="":ie.blackPlayer===D&&(ie.blackPlayer=""),ne.update(B,ie)})}catch(D){console.error("Error leaving room:",D)}}}},sM={p:10,n:30,b:30,r:50,q:90,k:900},jE=[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,-.5,-1,0,0,-1,-.5,.5],[.5,1,1,-2,-2,1,1,.5],[0,0,0,0,0,0,0,0]],UE=[[-5,-4,-3,-3,-3,-3,-4,-5],[-4,-2,0,0,0,0,-2,-4],[-3,0,1,1.5,1.5,1,0,-3],[-3,.5,1.5,2,2,1.5,.5,-3],[-3,0,1.5,2,2,1.5,0,-3],[-3,.5,1,1.5,1.5,1,.5,-3],[-4,-2,0,.5,.5,0,-2,-4],[-5,-4,-3,-3,-3,-3,-4,-5]],aM=i=>{let e=0;const t=i.board();for(let s=0;s<8;s++)for(let o=0;o<8;o++){const u=t[s][o];if(u){const c=sM[u.type];let m=0;u.type==="p"&&(m=u.color==="w"?jE[s][o]:jE[7-s][o]),u.type==="n"&&(m=u.color==="w"?UE[s][o]:UE[7-s][o]),u.color==="w"?e+=c+m*.1:e-=c+m*.1}}return e},Zg=(i,e,t,s,o)=>{if(e===0||i.isGameOver())return-aM(i);const u=i.moves();if(o){let c=-1/0;for(const m of u){i.move(m);const g=Zg(i,e-1,t,s,!1);if(i.undo(),c=Math.max(c,g),t=Math.max(t,g),s<=t)break}return c}else{let c=1/0;for(const m of u){i.move(m);const g=Zg(i,e-1,t,s,!0);if(i.undo(),c=Math.min(c,g),s=Math.min(s,g),s<=t)break}return c}},oM=(i,e="Normal")=>{const t=i.moves();if(t.length===0)return null;if(e==="Easy"&&Math.random()>.2)return t[Math.floor(Math.random()*t.length)];let s=null,o=1/0;t.sort((c,m)=>{const g=c.includes("x")?1:0;return(m.includes("x")?1:0)-g});const u=e==="Easy"?1:e==="Hard"?3:2;for(const c of t){i.move(c);const m=Zg(i,u,-1/0,1/0,!0);i.undo(),m<o&&(o=m,s=c)}return s||t[0]},lM=({roomId:i="",mode:e="online",aiDifficulty:t="Normal",onExit:s})=>{const o=zw(e==="online"?i:null),[u,c]=H.useState(()=>Yo()),[m,g]=H.useState(u.fen()),[p,v]=H.useState("active"),[E,S]=H.useState(""),N=e==="local",k=N?{fen:m,turn:u.turn(),whitePlayer:"local-white",blackPlayer:"local-black",status:p,winner:E}:o.room,z=N?!1:o.loading,D=de=>{const _e=Yo(de);c(_e),g(de),_e.isCheckmate()?(v("checkmate"),S(_e.turn()==="w"?"b":"w")):_e.isDraw()?v("draw"):_e.isStalemate&&_e.isStalemate()&&v("stalemate")};H.useEffect(()=>{if(N&&u.turn()==="b"&&p==="active"){const de=setTimeout(()=>{const _e=oM(u,t);_e&&(u.move(_e),D(u.fen()))},500);return()=>clearTimeout(de)}},[m,N,p,t]);const B=()=>{const de=Yo();c(de),g(de.fen()),v("active"),S(""),x(0),C(0),M(0)},ne=N?D:o.updateMove,Z=N?de=>{v("active"),S(de==="w"?"b":"w"),alert(`${de==="w"?"White":"Black"} resigned.`)}:o.resignGame,ce=N?B:o.resetGame,ie=N?k?.turn==="w"?"local-white":"local-black":o.userId,[W,x]=at.useState(0),[R,C]=at.useState(0),[V,M]=at.useState(0);if(at.useEffect(()=>{!N&&i&&o.joinRoom&&o.joinRoom(i)},[i,N]),at.useEffect(()=>{if(!k||k.status&&k.status!=="active")return;const de=window.setInterval(()=>{x(_e=>_e+1),C(_e=>_e+(k.turn==="w"?1:0)),M(_e=>_e+(k.turn==="b"?1:0))},1e3);return()=>window.clearInterval(de)},[k?.turn,k?.status]),z)return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-6 animate-pulse",children:[T.jsx("div",{className:"relative shadow-2xl shadow-indigo-500/20 rounded-full p-4",children:T.jsx(GE,{className:"w-16 h-16 text-indigo-500 animate-spin"})}),T.jsxs("div",{className:"text-center space-y-2",children:[T.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest",children:"Entering Arena"}),T.jsx("p",{className:"text-slate-500 font-medium",children:"Synchronizing with the global lattice..."})]})]});if(!k)return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[T.jsxs("div",{className:"text-center space-y-4",children:[T.jsx("h2",{className:"text-5xl font-black text-white italic",children:"Room Dissolved"}),T.jsx("p",{className:"text-slate-400 text-lg",children:"The arena you seek no longer exists or the link is expired."})]}),T.jsx("button",{onClick:s,className:"btn-premium px-10 py-4 text-xl",children:"Return to Lobby"})]});const j=k.whitePlayer===ie||N,I=k.blackPlayer===ie,qe=N||ie===k.whitePlayer?"w":ie===k.blackPlayer?"b":"w",dt=k.turn===qe,te=new Wp(k.fen),he={isCheck:te.isCheck(),isCheckmate:te.isCheckmate(),isDraw:te.isDraw(),isStalemate:typeof te.isStalemate=="function"?te.isStalemate():!1,turn:te.turn()},be=k.status??"active",Me=k.winner??"",ze=be!=="active",P=de=>{const _e=Math.floor(de/60).toString().padStart(2,"0"),Ae=(de%60).toString().padStart(2,"0");return`${_e}:${Ae}`},re=be==="checkmate"?`Checkmate  ${Me==="w"?"White":"Black"} wins`:be==="stalemate"?"Stalemate  Draw":be==="draw"?"Draw":be==="resigned"?`Resigned  ${Me==="w"?"White":"Black"} wins`:he.isCheck?`${he.turn==="w"?"White":"Black"} is in check`:dt?"Your Turn":"Waiting...",me=()=>{navigator.clipboard.writeText(i),alert("Room ID copied to clipboard!")};return T.jsxs("div",{className:"flex flex-col items-center gap-8 lg:gap-12 py-6 lg:py-10 w-full animate-in fade-in duration-700",children:[T.jsxs("header",{className:"w-full max-w-6xl flex items-center justify-between px-4 lg:px-6",children:[T.jsxs("button",{onClick:()=>{!N&&o.leaveRoom&&o.leaveRoom(),s()},className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all font-bold uppercase tracking-widest text-xs",children:[T.jsx("div",{className:"p-2 rounded-xl bg-slate-900 border border-slate-800 group-hover:border-slate-700 group-hover:-translate-x-1 transition-transform",children:T.jsx(yu,{size:18})}),"Back"]}),!N&&T.jsx("div",{className:"flex items-center gap-4",children:T.jsxs("div",{className:"liquid-glass px-6 py-3 flex items-center gap-6",children:[T.jsxs("div",{className:"flex flex-col gap-0.5",children:[T.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-slate-500 font-black",children:"Arena ID"}),T.jsx("code",{className:"text-indigo-300 font-mono font-bold",children:i})]}),T.jsx("div",{className:"h-8 w-px bg-slate-800"}),T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("button",{onClick:me,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:T.jsx(HE,{size:18})}),T.jsx("button",{className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:T.jsx(KE,{size:18})})]})]})}),N&&T.jsx("div",{className:"px-6 py-3 liquid-glass text-indigo-300 font-bold uppercase tracking-widest text-xs",children:"Single Player Mode"})]}),T.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-6 lg:gap-16 w-full max-w-7xl px-4 lg:px-6",children:[T.jsxs("div",{className:"relative group w-full flex justify-center max-w-full overflow-visible",children:[T.jsx("div",{className:"absolute -inset-4 bg-linear-to-r from-indigo-500 to-pink-500 rounded-[2.5rem] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"}),T.jsx(iM,{initialFen:k.fen,onMove:ne,playerColor:qe,isGameOver:ze})]}),T.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-6 lg:gap-8 mt-0 lg:mt-0",children:[T.jsxs("div",{className:"liquid-glass p-5 lg:p-8 space-y-6 lg:space-y-8 border-l-4 border-l-indigo-500",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:"Game Status"}),T.jsxs("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-2 ${be==="active"?dt?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-slate-800 text-slate-500":"bg-indigo-500/10 text-indigo-300 border border-indigo-500/30"}`,children:[T.jsx("span",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${be==="active"?"bg-green-500":"bg-indigo-400"}`}),N?k.turn==="w"?" White Turn":" Black Turn":re]})]}),be==="active"&&he.isCheck&&T.jsxs("div",{className:"p-3 rounded-2xl bg-amber-500/10 border border-amber-500/30 text-amber-200 text-[10px] lg:text-xs font-black uppercase tracking-widest",children:["CHECK! ",he.turn==="w"?"White":"Black"," to move."]}),ze&&T.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/10 border border-indigo-500/30 text-indigo-100 text-sm lg:text-base font-bold",children:re}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 p-4 rounded-2xl bg-slate-900/60 border border-slate-800/80 text-[10px] lg:text-xs font-bold uppercase tracking-widest",children:[T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"Time"}),T.jsx("div",{className:"text-white text-base",children:P(W)})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"White"}),T.jsx("div",{className:"text-emerald-300 text-base",children:P(R)})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"Black"}),T.jsx("div",{className:"text-sky-300 text-base",children:P(V)})]})]}),!N&&T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex items-center gap-3 lg:gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[T.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${j?"bg-white text-slate-950":"bg-slate-800 text-slate-400"}`,children:"W"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"White Player"}),T.jsx("div",{className:"text-xs text-slate-500 font-medium",children:k.whitePlayer===ie?"Connected (You)":k.whitePlayer?"Opponent Ready":"Awaiting Entry..."})]})]}),T.jsxs("div",{className:"flex items-center gap-3 lg:gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[T.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${I?"bg-indigo-500 text-white":"bg-slate-800 text-slate-400"}`,children:"B"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"Black Player"}),T.jsx("div",{className:"text-xs text-slate-500 font-medium",children:k.blackPlayer===ie?"Connected (You)":k.blackPlayer?"Opponent Ready":"Awaiting Entry..."})]})]})]})]}),T.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[T.jsxs("button",{disabled:ze,onClick:()=>Z(qe),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-slate-800 bg-slate-900/60 text-slate-200 font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:border-red-500/50 hover:text-red-200 transition",children:[T.jsx(FE,{size:18}),"Resign"]}),T.jsxs("button",{disabled:!ze&&!N,onClick:()=>ce(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 text-indigo-100 font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:bg-indigo-500/20 transition",children:[T.jsx(np,{size:18}),"Rematch"]})]})]}),!N&&T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[T.jsx(ip,{size:20,className:"mx-auto text-slate-600"}),T.jsx("div",{className:"text-xl font-black text-white italic",children:k.whitePlayer&&k.blackPlayer?"2/2":k.whitePlayer||k.blackPlayer?"1/2":"0/2"}),T.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Connected"})]}),T.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[T.jsx($E,{size:20,className:"mx-auto text-indigo-400"}),T.jsx("div",{className:"text-xl font-black text-white italic",children:"24ms"}),T.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Latency"})]})]})]})]}),T.jsx("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10",children:"Transparent Strategy Arena"})]})},uM=[2,0,0,0,0,-5,0,-3,0,0,0,5,-5,0,0,0,3,0,5,0,0,0,0,-2],pu=()=>{const i=Math.floor(Math.random()*6)+1,e=Math.floor(Math.random()*6)+1;return i===e?[i,i,i,i]:[i,e]},Du=()=>{const i=pu();return{board:[...uM],bar:{white:0,black:0},off:{white:0,black:0},turn:"white",dice:i,movesLeft:[...i],validMoves:[],winner:null}},cM=(i,e)=>{const t=i.board;if(e==="white"){if(i.bar.white>0)return!1;for(let s=0;s<18;s++)if(t[s]>0)return!1;return!0}else{if(i.bar.black>0)return!1;for(let s=6;s<24;s++)if(t[s]<0)return!1;return!0}},Wg=i=>{if(i.winner)return[];const e=o=>{const u=[],{turn:c,board:m,bar:g,movesLeft:p}=o,v=Array.from(new Set(p));if(p.length===0)return[];const E=c==="white",S=E?1:-1;if((E?g.white:g.black)>0){for(const k of v){const z=E?k-1:24-k,D=m[z];(E?D<-1:D>1)||u.push({from:"bar",to:z,roll:k,isHit:E?D===-1:D===1})}return u}for(let k=0;k<24;k++){const z=m[k];if(!(E&&z<=0)&&!(!E&&z>=0))for(const D of v){const B=k+S*D;if(cM(o,c)){if(E&&B===24){u.push({from:k,to:"off",roll:D});continue}if(!E&&B===-1){u.push({from:k,to:"off",roll:D});continue}if(E&&B>24){let ie=!0;for(let W=18;W<k;W++)m[W]>0&&(ie=!1);ie&&u.push({from:k,to:"off",roll:D})}if(!E&&B<-1){let ie=!0;for(let W=5;W>k;W--)m[W]<0&&(ie=!1);ie&&u.push({from:k,to:"off",roll:D})}}if(B<0||B>23)continue;const Z=m[B];(E?Z<-1:Z>1)||u.push({from:k,to:B,roll:D,isHit:E?Z===-1:Z===1})}}return u},t=e(i),s=[...t];if(i.movesLeft.length>1)for(const o of t){const u=cc(i,o),c=e(u);if(o.to!=="off"){const m=c.filter(g=>g.from===o.to);for(const g of m)s.push({from:o.from,to:g.to,roll:o.roll+g.roll,isHit:g.isHit,subMoves:[o,g]})}}return s},cc=(i,e)=>{const t={...i,board:[...i.board],bar:{...i.bar},off:{...i.off},movesLeft:[...i.movesLeft]},s=i.turn==="white";if(e.subMoves&&e.subMoves.length>0){let u=i;for(const c of e.subMoves)u=cc(u,c);return u}if(e.from==="bar"?s?t.bar.white--:t.bar.black--:t.board[e.from]-=s?1:-1,e.to==="off")s?t.off.white++:t.off.black++;else{const u=e.to;e.isHit&&(s?t.bar.black++:t.bar.white++,t.board[u]=0),t.board[u]+=s?1:-1}const o=t.movesLeft.indexOf(e.roll);return o>-1&&t.movesLeft.splice(o,1),s&&t.off.white===15&&(t.winner="white"),!s&&t.off.black===15&&(t.winner="black"),t},hM=()=>Math.random().toString(36).substring(2,8).toUpperCase(),Bw=i=>{const[e,t]=H.useState(null),[s,o]=H.useState(null),[u,c]=H.useState(!0),[m,g]=H.useState(!0);H.useEffect(()=>{const D=qu();Bu(D).then(B=>{o(B.user.uid)}).catch(B=>{console.error("Auth failed",B)}).finally(()=>g(!1))},[]);const p=async()=>{if(s)return s;const D=qu(),B=await Bu(D);return o(B.user.uid),B.user.uid};return H.useEffect(()=>{if(!On||!$e){c(!1);return}if(!i){t(null),c(!1);return}c(!0);const D=Jn(Xn($e,"rooms_bg"),i),B=Gp(D,ne=>{ne.exists()?t(ne.data()):t(null),c(!1)},ne=>{console.error("Room subscription error",ne),t(null),c(!1)});return()=>B()},[i]),{room:e,userId:s,loading:u,isAuthLoading:m,createRoom:async()=>{if(!On||!$e)throw new Error("Firebase not configured");const D=await p(),B=hM(),ne=Jn(Xn($e,"rooms_bg"),B),Z=Du(),ce={board:Z.board,bar:Z.bar,off:Z.off,turn:Z.turn,dice:Z.dice,movesLeft:Z.movesLeft,whitePlayer:D,blackPlayer:"",winner:"",status:"active"};return await Fp(ne,ce),B},joinRoom:async D=>{if(!On||!$e)throw new Error("Firebase not configured");const B=await p(),ne=Jn(Xn($e,"rooms_bg"),D);await Au($e,async Z=>{const ce=await Z.get(ne);if(!ce.exists())throw new Error("Room not found");const W={...ce.data()};W.whitePlayer?!W.blackPlayer&&W.whitePlayer!==B&&(W.blackPlayer=B):W.whitePlayer=B,Z.update(ne,W)})},updateGameState:async D=>{if(!On||!$e||!i)return;const B=Jn(Xn($e,"rooms_bg"),i);let ne="active",Z="";D.winner&&(ne="finished",Z=D.winner),await Su(B,{board:D.board,bar:D.bar,off:D.off,turn:D.turn,dice:D.dice,movesLeft:D.movesLeft,winner:Z,status:ne})},resignGame:async D=>{if(!On||!$e||!i)return;const B=Jn(Xn($e,"rooms_bg"),i);await Su(B,{status:"resigned",winner:D==="white"?"black":"white"})},resetGame:async()=>{if(!On||!$e||!i)return;const D=Du(),B=Jn(Xn($e,"rooms_bg"),i);await Su(B,{board:D.board,bar:D.bar,off:D.off,turn:D.turn,dice:D.dice,movesLeft:D.movesLeft,status:"active",winner:""})},leaveRoom:async()=>{if(!(!On||!$e)&&i)try{const D=await p(),B=Jn(Xn($e,"rooms_bg"),i);await Au($e,async ne=>{const Z=await ne.get(B);if(!Z.exists())return;const ie={...Z.data()};ie.whitePlayer===D?ie.whitePlayer="":ie.blackPlayer===D&&(ie.blackPlayer=""),ne.update(B,ie)})}catch(D){console.error("Error leaving room:",D)}}}},qw=({color:i,style:e,className:t=""})=>{const s=i==="white"?"bg-slate-200 shadow-[inset_0_-4px_4px_rgba(0,0,0,0.2),0_4px_6px_rgba(0,0,0,0.3)] border-slate-300":"bg-slate-900 shadow-[inset_0_-4px_4px_rgba(0,0,0,0.5),0_4px_6px_rgba(0,0,0,0.4)] border-slate-700",o=i==="white"?"border-slate-300":"border-slate-700";return T.jsx("div",{style:e,className:`w-full h-full rounded-full border-4 ${s} relative flex items-center justify-center ${t}`,children:T.jsx("div",{className:`w-[70%] h-[70%] rounded-full border-2 ${o} opacity-30`})})},ep=({id:i,color:e,isDraggable:t=!1,style:s})=>{const{attributes:o,listeners:u,setNodeRef:c,isDragging:m}=Uw({id:i,disabled:!t}),g={opacity:m?0:1,touchAction:"none",...s};return T.jsx("div",{ref:c,style:g,...u,...o,className:"w-full aspect-square relative cursor-grab active:cursor-grabbing",children:T.jsx(qw,{color:e})})},fM=({index:i,count:e,isTop:t,isHighlighted:s,playerColor:o,canDragFrom:u,isHitTarget:c})=>{const{setNodeRef:m,isOver:g}=c0({id:i.toString()}),p=i%2===1,v=g||s?"bg-indigo-500/20 ring-2 ring-indigo-400/50":"",E=[],S=Math.abs(e),N=e>0?"white":"black";for(let k=0;k<S;k++){const z=k===S-1,D=u&&z&&N===o;E.push(T.jsx("div",{className:"w-[80%] max-w-[40px] -my-1 z-10 relative",children:T.jsx(ep,{id:`checker-${i}-${k}`,color:N,isDraggable:D})},`${i}-${k}`))}return T.jsxs("div",{ref:m,className:`relative flex-1 h-full flex ${t?"flex-col items-center justify-start":"flex-col-reverse items-center justify-start"} ${v} transition-colors rounded-sm`,children:[T.jsx("div",{className:"absolute inset-0 pointer-events-none w-full h-full opacity-60",style:{clipPath:t?"polygon(0 0, 50% 100%, 100% 0)":"polygon(0 100%, 50% 0, 100% 100%)",backgroundColor:p?"#334155":"#818cf8",opacity:p?.4:.15}}),T.jsx("div",{className:`z-10 w-full h-full flex ${t?"flex-col pt-2":"flex-col-reverse pb-2"} items-center`,children:E}),c&&T.jsxs("div",{className:`absolute ${t?"top-6":"bottom-6"} left-1/2 -translate-x-1/2 z-50 pointer-events-none`,children:[T.jsx("style",{children:`
                        @keyframes shatter-left {
                            0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
                            100% { transform: translate(-20px, -10px) rotate(-15deg); opacity: 0; }
                        }
                        @keyframes shatter-right {
                            0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
                            100% { transform: translate(20px, -10px) rotate(15deg); opacity: 0; }
                        }
                        @keyframes impact-flash {
                            0% { transform: scale(0.5); opacity: 0; }
                            10% { transform: scale(1.2); opacity: 1; }
                            100% { transform: scale(0); opacity: 0; }
                        }
                        `}),T.jsx("div",{className:"relative w-10 h-10 md:w-12 md:h-12",children:(()=>{const k=e>0?"black":"white",z=k==="white"?"bg-slate-200 border-slate-300 shadow-sm":"bg-slate-900 border-slate-700 shadow-xl",D=k==="white"?"border-slate-300":"border-slate-700";return T.jsxs(T.Fragment,{children:[T.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${z} overflow-hidden`,style:{clipPath:"polygon(0% 0%, 55% 0%, 45% 100%, 0% 100%)",animation:"shatter-left 0.6s ease-out forwards"},children:T.jsx("div",{className:`absolute inset-2 rounded-full border-2 ${D} opacity-30`})}),T.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${z} overflow-hidden`,style:{clipPath:"polygon(55% 0%, 100% 0%, 100% 100%, 45% 100%)",animation:"shatter-right 0.6s ease-out forwards"},children:T.jsx("div",{className:`absolute inset-2 rounded-full border-2 ${D} opacity-30`})}),T.jsx("div",{className:"absolute inset-0 bg-white rounded-full mix-blend-overlay",style:{animation:"impact-flash 0.4s ease-out forwards"}})]})})()})]}),T.jsx("span",{className:`absolute ${t?"top-0":"bottom-0"} text-[8px] text-slate-600 font-mono opacity-50`,children:i+1})]})},dM=({gameState:i,playerColor:e,onMove:t,validMoves:s})=>{const{board:o,bar:u,off:c,turn:m}=i,[g,p]=H.useState(null),[v,E]=H.useState([]),[S,N]=H.useState(null),k=Ew(Ru(o0,{activationConstraint:{distance:8}}),Ru(l0,{activationConstraint:{delay:100,tolerance:5}})),z=Z=>{const{active:ce}=Z,ie=ce.id;let W=-1;if(ie.startsWith("bar"))W="bar";else if(ie.startsWith("checker-")){const C=ie.split("-");W=parseInt(C[1])}else W=parseInt(ie);p(ie);const R=s.filter(C=>W==="bar"?C.from==="bar":C.from===W).map(C=>C.to==="off"?99:C.to);E(R)},D=at.useRef(i.board);at.useEffect(()=>{const Z=D.current,ce=i.board;for(let ie=0;ie<24;ie++){const W=Z[ie],x=ce[ie];W===-1&&x>=1&&(N(ie),setTimeout(()=>N(null),800)),W===1&&x<=-1&&(N(ie),setTimeout(()=>N(null),800))}D.current=i.board},[i.board]);const B=Z=>{const{active:ce,over:ie}=Z;if(p(null),E([]),!ie)return;const W=ce.id;let x=-1;if(W.startsWith("bar"))x="bar";else if(W.startsWith("checker-")){const V=W.split("-");x=parseInt(V[1])}else x=parseInt(W);let R=-1;ie.id==="off"?R="off":R=parseInt(ie.id);const C=s.find(V=>V.from===x&&V.to===R);if(C){const V=cc(i,C);t(V)}},ne=(Z,ce,ie)=>{const W=[];if(Z<ce)for(let x=Z;x<=ce;x++)W.push(x);else for(let x=Z;x>=ce;x--)W.push(x);return T.jsx("div",{className:`flex-1 flex ${ie?"border-b-2":"border-t-2"} border-slate-700/30`,children:W.map(x=>T.jsx(fM,{index:x,count:o[x],isTop:ie,isHighlighted:v.includes(x),playerColor:e,canDragFrom:e===m&&(e==="white"&&u.white===0||e==="black"&&u.black===0),isHitTarget:S===x},x))})};return T.jsxs(jw,{sensors:k,onDragStart:z,onDragEnd:B,children:[T.jsxs("div",{className:"flex flex-col md:flex-row w-full max-w-full md:max-w-7xl mx-auto gap-2 md:gap-4 items-stretch p-1 md:p-4",children:[T.jsxs("div",{className:"relative flex-1 aspect-square md:aspect-[4/3] bg-slate-800/80 rounded-xl border-4 md:border-[12px] border-slate-900 shadow-2xl flex flex-col overflow-hidden",children:[T.jsxs("div",{className:"flex-1 flex",children:[ne(e==="white"?11:12,e==="white"?6:17,!0),T.jsxs("div",{className:"w-12 md:w-20 bg-slate-900/50 border-x-4 border-slate-900 flex flex-col items-center justify-center gap-1 py-2",children:[Array.from({length:u.white}).map((Z,ce)=>T.jsx("div",{className:"w-10 md:w-12",children:T.jsx(ep,{id:`bar-white-${ce}`,color:"white",isDraggable:e==="white"&&m==="white"&&ce===u.white-1})},`bar-w-${ce}`)),Array.from({length:u.black}).map((Z,ce)=>T.jsx("div",{className:"w-10 md:w-12",children:T.jsx(ep,{id:`bar-black-${ce}`,color:"black",isDraggable:e==="black"&&m==="black"&&ce===u.black-1})},`bar-b-${ce}`))]}),ne(e==="white"?5:18,e==="white"?0:23,!0)]}),T.jsxs("div",{className:"flex-1 flex",children:[ne(e==="white"?12:11,e==="white"?17:6,!1),T.jsx("div",{className:"w-12 md:w-20 bg-slate-900/50 border-x-4 border-slate-900 flex flex-col-reverse items-center justify-start gap-1 py-2"}),ne(e==="white"?18:5,e==="white"?23:0,!1)]}),T.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center z-50",children:T.jsx("div",{className:"flex gap-3",children:i.movesLeft.map((Z,ce)=>T.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 rounded-lg shadow-xl flex items-center justify-center text-lg md:text-xl font-black border-2 animate-in zoom-in spin-in-3 duration-300 ${m==="white"?"bg-white text-slate-900 border-slate-200":"bg-slate-900 text-white border-slate-700"}`,children:Z},`${m}-${ce}-${Z}`))})})]}),T.jsxs("div",{className:"w-full h-20 md:w-32 md:h-auto bg-slate-900/40 rounded-xl border-4 border-slate-800 flex flex-row md:flex-col relative overflow-hidden shrink-0",children:[T.jsx("div",{className:"absolute inset-y-0 left-1/2 -translate-x-1/2 w-[2px] bg-slate-800/50 hidden md:block"}),T.jsx("div",{className:"absolute inset-x-0 top-1/2 -translate-y-1/2 h-[2px] bg-slate-800/50 md:hidden"}),T.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 md:-rotate-90 text-slate-700 font-bold text-xs md:text-sm tracking-[0.5em] pointer-events-none whitespace-nowrap opacity-50 z-0",children:"COLLECT"}),T.jsx("div",{className:"flex-1 w-full p-2 flex flex-col gap-1 z-10 border-r md:border-r-0 md:border-b border-slate-800/50",children:T.jsx(zE,{playerColor:"white",count:c.white,isTop:!0})}),T.jsx("div",{className:"flex-1 w-full p-2 flex flex-col-reverse gap-1 z-10",children:T.jsx(zE,{playerColor:"black",count:c.black,isTop:!1})}),T.jsx("div",{className:`absolute inset-0 z-20 ${g?"pointer-events-auto":"pointer-events-none"}`,children:T.jsx(mM,{isHighlighted:v.includes(99)})})]})]}),T.jsx(ZO,{children:g?T.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 cursor-grabbing",children:T.jsx(qw,{color:(function(){if(g.startsWith("bar-white"))return"white";if(g.startsWith("bar-black"))return"black";if(g.startsWith("checker-")){const Z=g.split("-"),ce=parseInt(Z[1]);return o[ce]>0?"white":"black"}return"white"})()})}):null})]})},mM=({isHighlighted:i})=>{const{setNodeRef:e,isOver:t}=c0({id:"off"}),s=t||i;return T.jsx("div",{ref:e,className:`w-full h-full flex items-center justify-center transition-all duration-300 ${s?"bg-indigo-500/30 backdrop-blur-sm border-2 border-dashed border-indigo-400":""}`,children:s&&T.jsx("div",{className:"text-indigo-200 font-bold text-xs rotate-90 whitespace-nowrap animate-pulse",children:"COLLECT"})})},zE=({playerColor:i,count:e,isTop:t})=>T.jsxs("div",{className:`w-full flex ${t?"flex-col":"flex-col-reverse"} gap-[2px] transition-colors rounded-lg p-1`,children:[e>0&&T.jsx("div",{className:`text-[10px] text-center mb-1 font-bold ${i==="white"?"text-slate-400":"text-slate-600"}`,children:e}),Array.from({length:Math.min(e,15)}).map((s,o)=>T.jsx("div",{className:`h-2 w-full rounded-sm opacity-80 ${i==="white"?"bg-slate-200 shadow-sm":"bg-slate-900 border border-slate-700 shadow-sm"}`},o))]}),gM=(i,e="Normal")=>{const t=Wg(i);if(t.length===0)return null;if(e==="Easy"){const u=Math.floor(Math.random()*t.length);return t[u]}let s=t[0],o=-1/0;for(const u of t){const c=pM(i,u,e);c>o&&(o=c,s=u)}return s},pM=(i,e,t)=>{let s=0;e.isHit&&(s+=100),e.to==="off"&&(s+=200);const o=cc({...i},e),u=i.turn==="white";if(typeof e.to=="number"){const c=o.board[e.to];u&&c===2&&(s+=50),!u&&c===-2&&(s+=50)}if(typeof e.to=="number"){const c=o.board[e.to];Math.abs(c)===1&&(s-=30)}if(typeof e.from=="number"){const c=o.board[e.from];Math.abs(c)===1&&(s-=40)}return t==="Hard"&&typeof e.to=="number"&&(u?e.to>=18:e.to<=5)&&Math.abs(o.board[e.to])>1&&(s+=30),s+=Math.random()*5,s},yM=({roomId:i="",mode:e="online",aiDifficulty:t="Normal",onExit:s})=>{const o=Bw(e==="online"?i:null),[u,c]=H.useState(()=>Du()),[m,g]=H.useState(null),p=e==="local",v=at.useMemo(()=>p?u:m||(o.room?{...o.room,validMoves:[]}:null),[p,u,o.room,m]);H.useEffect(()=>{if(!o.room||!m)return;const ie=o.room.turn===m.turn,W=JSON.stringify(o.room.board)===JSON.stringify(m.board),x=o.room.movesLeft.length===m.movesLeft.length;ie&&W&&x?g(null):ie||g(null)},[o.room,m]);const E=at.useMemo(()=>v?Wg(v):[],[v]),S=p?v?.turn==="white"?"local-white":"local-black":o.userId,N=p||o.room?.whitePlayer===S?"white":"black",k=N===v?.turn;H.useEffect(()=>{!p&&i&&o.joinRoom&&o.joinRoom(i)},[i,p]);const z=()=>{navigator.clipboard.writeText(i),alert("Room ID copied to clipboard!")},D=o.room?.whitePlayer===S||p,B=o.room?.blackPlayer===S,ne=!!v?.winner,Z=ie=>{let W={...ie};W.movesLeft.length===0?(W.turn=W.turn==="white"?"black":"white",W.dice=pu(),W.movesLeft=[...W.dice]):Wg(W).length===0&&(W.turn=W.turn==="white"?"black":"white",W.dice=pu(),W.movesLeft=[...W.dice]),p?c(W):(g(W),o.updateGameState(W))};if(H.useEffect(()=>{if(v&&v.movesLeft.length>0&&E.length===0&&!v.winner){const ie=setTimeout(()=>{let W={...v};W.turn=W.turn==="white"?"black":"white",W.dice=pu(),W.movesLeft=[...W.dice],p?c(W):(g(W),o.updateGameState(W))},1500);return()=>clearTimeout(ie)}},[v?.movesLeft,E.length,v?.winner,v?.turn,p,v]),H.useEffect(()=>{if(v&&p&&v.turn==="black"&&!v.winner){const ie=setTimeout(()=>{const W=gM(v,t);if(W){const x=cc(v,W);Z(x)}else{let x={...v};x.turn="white",x.dice=pu(),x.movesLeft=[...x.dice],c(x)}},800);return()=>clearTimeout(ie)}},[v,p,t]),!p&&o.loading)return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-6 animate-pulse",children:[T.jsx("div",{className:"relative shadow-2xl shadow-indigo-500/20 rounded-full p-4",children:T.jsx(GE,{className:"w-16 h-16 text-indigo-500 animate-spin"})}),T.jsxs("div",{className:"text-center space-y-2",children:[T.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest",children:"Entering Arena"}),T.jsx("p",{className:"text-slate-500 font-medium",children:"Synchronizing with the global lattice..."})]})]});if(!v)return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[T.jsxs("div",{className:"text-center space-y-4",children:[T.jsx("h2",{className:"text-5xl font-black text-white italic",children:"Room Dissolved"}),T.jsx("p",{className:"text-slate-400 text-lg",children:"The arena you seek no longer exists or the link is expired."})]}),T.jsx("button",{onClick:s,className:"btn-premium px-10 py-4 text-xl",children:"Return to Lobby"})]});const ce=v.winner?`${v.winner==="white"?"White":"Black"} Wins!`:k?"Your Turn":"Waiting...";return T.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center gap-8 lg:gap-12 py-6 lg:py-10 w-full animate-in fade-in duration-700",children:[T.jsxs("header",{className:"w-full max-w-6xl flex items-center justify-between px-4 lg:px-6",children:[T.jsxs("button",{onClick:()=>{!p&&o.leaveRoom&&o.leaveRoom(),s()},className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all font-bold uppercase tracking-widest text-xs",children:[T.jsx("div",{className:"p-2 rounded-xl bg-slate-900 border border-slate-800 group-hover:border-slate-700 group-hover:-translate-x-1 transition-transform",children:T.jsx(yu,{size:18})}),"Back"]}),!p&&T.jsx("div",{className:"flex items-center gap-4",children:T.jsxs("div",{className:"liquid-glass px-6 py-3 flex items-center gap-6",children:[T.jsxs("div",{className:"flex flex-col gap-0.5",children:[T.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-slate-500 font-black",children:"Arena ID"}),T.jsx("code",{className:"text-indigo-300 font-mono font-bold",children:i})]}),T.jsx("div",{className:"h-8 w-px bg-slate-800"}),T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("button",{onClick:z,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:T.jsx(HE,{size:18})}),T.jsx("button",{className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:T.jsx(KE,{size:18})})]})]})}),p&&T.jsx("div",{className:"px-6 py-3 liquid-glass text-indigo-300 font-bold uppercase tracking-widest text-xs",children:"Single Player Mode"})]}),T.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-6 lg:gap-16 w-full max-w-7xl px-0 lg:px-6",children:[T.jsxs("div",{className:"relative group w-full flex justify-center max-w-full overflow-visible",children:[T.jsx("div",{className:"absolute -inset-4 bg-linear-to-r from-indigo-500 to-pink-500 rounded-[2.5rem] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"}),T.jsx(dM,{gameState:v,playerColor:N,onMove:Z,onRollDice:()=>{},validMoves:E}),ne&&T.jsx(vM,{winner:v.winner,playerColor:N,onRematch:()=>{const ie=Du();g(null),p?c(ie):o.resetGame()},onExit:()=>{!p&&o.leaveRoom&&o.leaveRoom(),s()}})]}),T.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-3 lg:gap-8 mt-0 lg:mt-0",children:[T.jsxs("div",{className:"liquid-glass p-3 lg:p-8 space-y-3 lg:space-y-8 border-l-4 border-l-indigo-500",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:"Game Status"}),T.jsxs("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-2 ${v.winner?"bg-indigo-500/10 text-indigo-300 border border-indigo-500/30":k?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-slate-800 text-slate-500"}`,children:[T.jsx("span",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${v.winner?"bg-indigo-400":"bg-green-500"}`}),p?v.turn==="white"?" White Turn":" Black Turn":ce]})]}),ne&&T.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/10 border border-indigo-500/30 text-indigo-100 text-sm lg:text-base font-bold",children:ce}),T.jsxs("div",{className:"space-y-2 lg:space-y-4",children:[T.jsx(_M,{gameState:v}),!p&&T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex items-center gap-2 lg:gap-4 p-2 lg:p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[T.jsx("div",{className:`w-8 h-8 lg:w-12 lg:h-12 rounded-xl flex items-center justify-center text-lg lg:text-xl font-bold ${D?"bg-white text-slate-950":"bg-slate-800 text-slate-400"}`,children:"W"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("div",{className:"text-xs lg:text-sm font-bold text-white uppercase tracking-wide",children:"White Player"}),T.jsx("div",{className:"text-[10px] lg:text-xs text-slate-500 font-medium",children:o.room?.whitePlayer===S?"Connected (You)":o.room?.whitePlayer?"Opponent Ready":"Awaiting Entry..."})]})]}),T.jsxs("div",{className:"flex items-center gap-2 lg:gap-4 p-2 lg:p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[T.jsx("div",{className:`w-8 h-8 lg:w-12 lg:h-12 rounded-xl flex items-center justify-center text-lg lg:text-xl font-bold ${B?"bg-indigo-500 text-white":"bg-slate-800 text-slate-400"}`,children:"B"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("div",{className:"text-xs lg:text-sm font-bold text-white uppercase tracking-wide",children:"Black Player"}),T.jsx("div",{className:"text-[10px] lg:text-xs text-slate-500 font-medium",children:o.room?.blackPlayer===S?"Connected (You)":o.room?.blackPlayer?"Opponent Ready":"Awaiting Entry..."})]})]})]})]}),T.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 lg:gap-3",children:[T.jsxs("button",{disabled:ne,onClick:()=>{if(p){const ie={...v};ie.winner=N==="white"?"black":"white",c(ie)}else o.resignGame(N)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 lg:px-4 lg:py-3 rounded-xl border border-slate-800 bg-slate-900/60 text-slate-200 text-sm lg:text-base font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:border-red-500/50 hover:text-red-200 transition",children:[T.jsx(FE,{size:16,className:"lg:w-[18px] lg:h-[18px]"}),"Resign"]}),T.jsxs("button",{disabled:!ne&&!p,onClick:()=>{const ie=Du();g(null),p?c(ie):o.resetGame()},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 lg:px-4 lg:py-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 text-indigo-100 text-sm lg:text-base font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:bg-indigo-500/20 transition",children:[T.jsx(np,{size:16,className:"lg:w-[18px] lg:h-[18px]"}),"Rematch"]})]})]}),!p&&T.jsxs("div",{className:"hidden lg:grid grid-cols-2 gap-4",children:[T.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[T.jsx(ip,{size:20,className:"mx-auto text-slate-600"}),T.jsx("div",{className:"text-xl font-black text-white italic",children:o.room?.whitePlayer&&o.room?.blackPlayer?"2/2":o.room?.whitePlayer||o.room?.blackPlayer?"1/2":"0/2"}),T.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Connected"})]}),T.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[T.jsx($E,{size:20,className:"mx-auto text-indigo-400"}),T.jsx("div",{className:"text-xl font-black text-white italic",children:"24ms"}),T.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Latency"})]})]})]})]}),T.jsx("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10",children:"Transparent Strategy Arena"})]})},_M=({gameState:i})=>{const[e,t]=H.useState(0),[s,o]=H.useState(0),[u,c]=H.useState(0),m=at.useRef(i?.winner);H.useEffect(()=>{m.current&&!i?.winner&&(t(0),o(0),c(0)),m.current=i?.winner},[i?.winner]),H.useEffect(()=>{if(!i||i.winner)return;const p=window.setInterval(()=>{t(v=>v+1),o(v=>v+(i.turn==="white"?1:0)),c(v=>v+(i.turn==="black"?1:0))},1e3);return()=>window.clearInterval(p)},[i?.turn,i?.winner]);const g=p=>{const v=Math.floor(p/60).toString().padStart(2,"0"),E=(p%60).toString().padStart(2,"0");return`${v}:${E}`};return T.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-3 p-2 md:p-4 rounded-2xl bg-slate-900/60 border border-slate-800/80 text-[10px] lg:text-xs font-bold uppercase tracking-widest",children:[T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"Time"}),T.jsx("div",{className:"text-white text-base",children:g(e)})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"White"}),T.jsx("div",{className:"text-emerald-300 text-base",children:g(s)})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"Black"}),T.jsx("div",{className:"text-sky-300 text-base",children:g(u)})]})]})},vM=({winner:i,playerColor:e,onRematch:t,onExit:s})=>{const o=i===e;return T.jsxs("div",{className:"absolute inset-0 z-50 rounded-[2rem] bg-slate-900/80 backdrop-blur-md flex flex-col items-center justify-center p-6 text-center animate-in fade-in zoom-in duration-500",children:[T.jsx("div",{className:`p-6 rounded-full mb-6 ${o?"bg-amber-500/20 text-amber-400 shadow-[0_0_50px_-12px_rgba(245,158,11,0.5)]":"bg-red-500/20 text-red-400 shadow-[0_0_50px_-12px_rgba(239,68,68,0.5)]"}`,children:o?T.jsx(Eg,{size:64,className:"animate-bounce"}):T.jsx(UA,{size:64})}),T.jsx("h2",{className:`text-4xl md:text-5xl font-black uppercase tracking-widest mb-2 ${o?"text-transparent bg-clip-text bg-linear-to-b from-amber-300 to-amber-600":"text-slate-200"}`,children:o?"Victory!":"Defeat"}),T.jsx("p",{className:"text-slate-400 font-bold text-lg mb-8 uppercase tracking-widest",children:o?"You conquered the board.":"Better luck next time."}),T.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[T.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center gap-3 px-6 py-4 rounded-xl bg-indigo-500 hover:bg-indigo-400 text-white font-black uppercase tracking-widest transition-all hover:scale-105 active:scale-95 shadow-lg shadow-indigo-500/30",children:[T.jsx(np,{size:20}),"Rematch"]}),T.jsxs("button",{onClick:s,className:"w-full flex items-center justify-center gap-3 px-6 py-4 rounded-xl bg-slate-800 hover:bg-slate-700 text-slate-300 font-bold uppercase tracking-widest transition-all hover:scale-105 active:scale-95",children:[T.jsx(HA,{size:20}),"Return to Lobby"]})]})]})},bM=["red","black","blue","yellow"],EM=()=>{const i=[];let e=1;return bM.forEach(t=>{for(let s=1;s<=13;s++)i.push({id:`t-${e++}`,value:s,color:t}),i.push({id:`t-${e++}`,value:s,color:t})}),i.push({id:`t-${e++}`,value:0,color:null,isFakeOkey:!0}),i.push({id:`t-${e++}`,value:0,color:null,isFakeOkey:!0}),i},TM=i=>{const e=[...i];for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e},wM=i=>i.isFakeOkey||!i.color?{id:"virtual-okey",value:1,color:"red"}:{id:"virtual-okey",value:i.value===13?1:i.value+1,color:i.color},SM=()=>{let i=TM(EM());const e=i.pop(),t=wM(e),s=Array(4).fill(null).map(()=>({tiles:[]}));for(let o=0;o<15;o++)s[0].tiles.push(i.pop());for(let o=1;o<4;o++)for(let u=0;u<14;u++)s[o].tiles.push(i.pop());return s[0].tiles.sort((o,u)=>o.color===u.color?o.value-u.value:(o.color||"z").localeCompare(u.color||"z")),{phase:"playing",players:s,centerStack:i,discardPiles:[[],[],[],[]],indicatorTile:e,okeyTile:t,currentTurn:0,winner:null}},Hw=i=>{const[e,t]=H.useState(null),[s,o]=H.useState(!1);H.useEffect(()=>{if(!i)try{const g=SM();console.log("Okey Game Initialized",g),t(g)}catch(g){console.error("Failed to initialize Okey game",g)}},[i]);const u=H.useCallback((g,p)=>{t(v=>{if(!v)return null;const E=[...v.players],S=[...E[0].tiles],[N]=S.splice(g,1);return S.splice(p,0,N),E[0]={...E[0],tiles:S},{...v,players:E}})},[]);return{gameState:e,moveTileInRack:u,createRoom:async()=>(o(!0),await new Promise(g=>setTimeout(g,1e3)),o(!1),"okey-room-"+Math.random().toString(36).substr(2,6)),joinRoom:async g=>{o(!0),await new Promise(p=>setTimeout(p,1e3)),o(!1)},isAuthLoading:s}},Fw=({tile:i,isJoker:e,className:t="",dragging:s=!1})=>{const o=c=>{switch(c){case"red":return"text-red-600";case"black":return"text-slate-900";case"blue":return"text-blue-600";case"yellow":return"text-yellow-500";default:return"text-slate-400"}},u=()=>i.isFakeOkey?T.jsx("span",{className:"text-4xl text-emerald-600",children:""}):T.jsx("span",{className:`text-4xl font-black ${o(i.color)} drop-shadow-sm leading-none`,children:i.value});return T.jsxs("div",{className:`
        relative w-[3.2rem] h-[4.2rem] 
        bg-linear-to-br from-slate-50 to-slate-200
        rounded-md 
        shadow-[inset_0_1px_1px_rgba(255,255,255,0.8),0_2px_4px_rgba(0,0,0,0.3)]
        flex items-center justify-center
        select-none
        border border-slate-300
        ${s?"opacity-50 cursor-grabbing":"cursor-grab"}
        ${e?"ring-2 ring-emerald-400 ring-offset-1":""}
        ${t}
      `,children:[T.jsx("div",{className:"absolute inset-2 bg-slate-100 rounded-sm shadow-[inset_0_2px_3px_rgba(0,0,0,0.1)]"}),T.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center h-full pb-1",children:u()})]})},Lh=({tiles:i,isCurrentPlayer:e,okeyTile:t})=>e?T.jsxs("div",{className:"relative pt-6 pb-2 px-6 bg-linear-to-b from-amber-800 to-amber-900 rounded-t-xl rounded-b-md shadow-2xl border-t border-amber-700/50 mx-auto max-w-4xl",children:[T.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/wood-pattern.png')] opacity-20 pointer-events-none rounded-t-xl"}),T.jsx("div",{className:"relative z-10 flex flex-wrap justify-center gap-2 min-h-[5rem]",children:i.map(s=>{const o=t&&s.color===t.color&&s.value===t.value;return T.jsx("div",{className:"relative group",children:T.jsx(Fw,{tile:s,isJoker:o||!1})},s.id)})})]}):T.jsx("div",{className:"flex justify-center items-center gap-1 bg-amber-900/40 p-2 rounded-lg border border-amber-800/50 shadow-inner",children:Array.from({length:i.length}).map((s,o)=>T.jsx("div",{className:"w-8 h-12 bg-linear-to-br from-amber-100 to-amber-200 rounded-sm border border-amber-300 shadow-sm"},o))}),AM=({gameState:i})=>i?T.jsxs("div",{className:"relative w-full aspect-square max-h-[80vh] bg-emerald-900/80 rounded-3xl border-8 border-emerald-950/50 shadow-2xl flex flex-col justify-between p-8 overflow-hidden",children:[T.jsx("div",{className:"absolute inset-0 opacity-40 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-white/10 to-transparent pointer-events-none"}),T.jsx("div",{className:"flex justify-center -mt-4 opacity-70 scale-75",children:T.jsx(Lh,{tiles:i.players[2].tiles,playerId:2,okeyTile:i.okeyTile})}),T.jsxs("div",{className:"flex-1 flex items-center justify-between w-full px-4",children:[T.jsx("div",{className:"-ml-12 rotate-90 opacity-70 scale-75 origin-center",children:T.jsx(Lh,{tiles:i.players[1].tiles,playerId:1,okeyTile:i.okeyTile})}),T.jsxs("div",{className:"flex flex-col items-center gap-4 p-6 bg-black/20 rounded-full aspect-square justify-center backdrop-blur-sm border border-white/5",children:[T.jsx("div",{className:"text-emerald-200/50 font-bold uppercase tracking-widest text-xs",children:"Center Stack"}),T.jsxs("div",{className:"flex items-center gap-6",children:[T.jsxs("div",{className:"relative w-12 h-16 bg-amber-100 rounded-md shadow-lg border border-amber-200 flex items-center justify-center",children:[T.jsx("div",{className:"text-amber-900 font-bold opacity-30",children:i.centerStack.length}),T.jsx("div",{className:"absolute -top-1 -left-1 w-full h-full bg-amber-100 rounded-md border border-amber-200 -z-10"}),T.jsx("div",{className:"absolute -top-2 -left-2 w-full h-full bg-amber-100 rounded-md border border-amber-200 -z-20"})]}),T.jsxs("div",{className:"flex flex-col items-center",children:[T.jsx("span",{className:"text-xs text-emerald-300 font-bold mb-1",children:"Indicator"}),i.indicatorTile?T.jsx(Fw,{tile:i.indicatorTile}):T.jsx("div",{className:"w-12 h-16 border-2 border-dashed border-white/20 rounded-md"})]})]})]}),T.jsx("div",{className:"-mr-12 -rotate-90 opacity-70 scale-75 origin-center",children:T.jsx(Lh,{tiles:i.players[3].tiles,playerId:3,okeyTile:i.okeyTile})})]}),T.jsx("div",{className:"mt-auto z-10",children:T.jsx(Lh,{tiles:i.players[0].tiles,playerId:0,isCurrentPlayer:!0,okeyTile:i.okeyTile})})]}):T.jsx("div",{className:"text-white",children:"Loading Game..."}),xM=({roomId:i,mode:e,aiDifficulty:t,onExit:s})=>{const{gameState:o}=Hw(i);return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[85vh] fade-in animate-in duration-700",children:[T.jsx("div",{className:"w-full max-w-6xl mb-6 flex justify-between items-center text-white px-4",children:T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("button",{onClick:s,className:"p-3 bg-slate-800/80 hover:bg-red-500/20 text-slate-400 hover:text-red-400 rounded-xl transition-all border border-slate-700 hover:border-red-500/50",title:"Leave Game",children:T.jsx(QA,{size:20})}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-2xl font-black tracking-tight",children:"Okey Arena"}),T.jsxs("div",{className:"text-xs font-medium text-emerald-400 flex items-center gap-2",children:[T.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),e==="online"?`Room: ${i}`:`Local  ${t} AI`]})]})]})}),T.jsx(AM,{gameState:o})]})};function RM(){const[i,e]=H.useState("menu"),[t,s]=H.useState("chess"),[o,u]=H.useState(null),[c,m]=H.useState("Normal"),g=zw(null),p=Bw(null),v=Hw(null),E=t==="chess"?g.isAuthLoading:t==="backgammon"?p.isAuthLoading:v.isAuthLoading,S=async()=>{try{const B=t==="chess"?await g.createRoom():t==="backgammon"?await p.createRoom():await v.createRoom();B&&(u(B),e("online"))}catch(B){console.error("Failed to create room:",B)}},N=async B=>{if(B.trim())try{t==="chess"?await g.joinRoom(B):t==="backgammon"?await p.joinRoom(B):await v.joinRoom(B),u(B),e("online")}catch(ne){console.error("Failed to join room:",ne),alert("Room not found or could not join")}},k=B=>{s(B)},z=B=>{m(B),e("local"),u(null)},D=()=>{u(null),e("menu")};return T.jsxs("main",{className:"relative min-h-screen w-full flex flex-col items-center overflow-x-hidden",children:[T.jsx(DA,{}),T.jsx("div",{className:"container mx-auto px-4 py-8 max-w-7xl w-full overflow-visible",children:i!=="menu"?t==="chess"?T.jsx(lM,{roomId:o||"",mode:i==="online"?"online":"local",aiDifficulty:c,onExit:D}):t==="backgammon"?T.jsx(yM,{roomId:o||"",mode:i==="online"?"online":"local",aiDifficulty:c,onExit:D}):T.jsx(xM,{roomId:o||"",mode:i==="online"?"online":"local",aiDifficulty:c,onExit:D}):T.jsx(r4,{onCreateRoom:S,onJoinRoom:N,onStartLocal:z,isAuthLoading:E,onSelectGame:k})}),T.jsx("footer",{className:"mt-auto py-8 text-slate-500 text-sm",children:"DragMate  Premium Multiplayer Board Gaming"})]})}IA.createRoot(document.getElementById("root")).render(T.jsx(H.StrictMode,{children:T.jsx(RM,{})}));
