(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function PA(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Dm={exports:{}},iu={};var l0;function LA(){if(l0)return iu;l0=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:h,ref:o!==void 0?o:null,props:u}}return iu.Fragment=t,iu.jsx=n,iu.jsxs=n,iu}var u0;function UA(){return u0||(u0=1,Dm.exports=LA()),Dm.exports}var et=UA(),Nm={exports:{}},kt={};var c0;function zA(){if(c0)return kt;c0=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function D(M){return M===null||typeof M!="object"?null:(M=S&&M[S]||M["@@iterator"],typeof M=="function"?M:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,Y={};function lt(M,W,ut){this.props=M,this.context=W,this.refs=Y,this.updater=ut||U}lt.prototype.isReactComponent={},lt.prototype.setState=function(M,W){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,W,"setState")},lt.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ht(){}ht.prototype=lt.prototype;function at(M,W,ut){this.props=M,this.context=W,this.refs=Y,this.updater=ut||U}var Dt=at.prototype=new ht;Dt.constructor=at,j(Dt,lt.prototype),Dt.isPureReactComponent=!0;var wt=Array.isArray;function vt(){}var R={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function C(M,W,ut){var ft=ut.ref;return{$$typeof:r,type:M,key:W,ref:ft!==void 0?ft:null,props:ut}}function O(M,W){return C(M.type,W,M.props)}function x(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function k(M){var W={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ut){return W[ut]})}var I=/\/+/g;function Gt(M,W){return typeof M=="object"&&M!==null&&M.key!=null?k(""+M.key):W.toString(36)}function we(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(vt,vt):(M.status="pending",M.then(function(W){M.status==="pending"&&(M.status="fulfilled",M.value=W)},function(W){M.status==="pending"&&(M.status="rejected",M.reason=W)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function X(M,W,ut,ft,Ct){var St=typeof M;(St==="undefined"||St==="boolean")&&(M=null);var Lt=!1;if(M===null)Lt=!0;else switch(St){case"bigint":case"string":case"number":Lt=!0;break;case"object":switch(M.$$typeof){case r:case t:Lt=!0;break;case E:return Lt=M._init,X(Lt(M._payload),W,ut,ft,Ct)}}if(Lt)return Ct=Ct(M),Lt=ft===""?"."+Gt(M,0):ft,wt(Ct)?(ut="",Lt!=null&&(ut=Lt.replace(I,"$&/")+"/"),X(Ct,W,ut,"",function(Be){return Be})):Ct!=null&&(x(Ct)&&(Ct=O(Ct,ut+(Ct.key==null||M&&M.key===Ct.key?"":(""+Ct.key).replace(I,"$&/")+"/")+Lt)),W.push(Ct)),1;Lt=0;var De=ft===""?".":ft+":";if(wt(M))for(var oe=0;oe<M.length;oe++)ft=M[oe],St=De+Gt(ft,oe),Lt+=X(ft,W,ut,St,Ct);else if(oe=D(M),typeof oe=="function")for(M=oe.call(M),oe=0;!(ft=M.next()).done;)ft=ft.value,St=De+Gt(ft,oe++),Lt+=X(ft,W,ut,St,Ct);else if(St==="object"){if(typeof M.then=="function")return X(we(M),W,ut,ft,Ct);throw W=String(M),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Lt}function ot(M,W,ut){if(M==null)return M;var ft=[],Ct=0;return X(M,ft,"","",function(St){return W.call(ut,St,Ct++)}),ft}function Tt(M){if(M._status===-1){var W=M._result;W=W(),W.then(function(ut){(M._status===0||M._status===-1)&&(M._status=1,M._result=ut)},function(ut){(M._status===0||M._status===-1)&&(M._status=2,M._result=ut)}),M._status===-1&&(M._status=0,M._result=W)}if(M._status===1)return M._result.default;throw M._result}var Pt=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Kt={map:ot,forEach:function(M,W,ut){ot(M,function(){W.apply(this,arguments)},ut)},count:function(M){var W=0;return ot(M,function(){W++}),W},toArray:function(M){return ot(M,function(W){return W})||[]},only:function(M){if(!x(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return kt.Activity=T,kt.Children=Kt,kt.Component=lt,kt.Fragment=n,kt.Profiler=o,kt.PureComponent=at,kt.StrictMode=s,kt.Suspense=g,kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,kt.__COMPILER_RUNTIME={__proto__:null,c:function(M){return R.H.useMemoCache(M)}},kt.cache=function(M){return function(){return M.apply(null,arguments)}},kt.cacheSignal=function(){return null},kt.cloneElement=function(M,W,ut){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ft=j({},M.props),Ct=M.key;if(W!=null)for(St in W.key!==void 0&&(Ct=""+W.key),W)!w.call(W,St)||St==="key"||St==="__self"||St==="__source"||St==="ref"&&W.ref===void 0||(ft[St]=W[St]);var St=arguments.length-2;if(St===1)ft.children=ut;else if(1<St){for(var Lt=Array(St),De=0;De<St;De++)Lt[De]=arguments[De+2];ft.children=Lt}return C(M.type,Ct,ft)},kt.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},kt.createElement=function(M,W,ut){var ft,Ct={},St=null;if(W!=null)for(ft in W.key!==void 0&&(St=""+W.key),W)w.call(W,ft)&&ft!=="key"&&ft!=="__self"&&ft!=="__source"&&(Ct[ft]=W[ft]);var Lt=arguments.length-2;if(Lt===1)Ct.children=ut;else if(1<Lt){for(var De=Array(Lt),oe=0;oe<Lt;oe++)De[oe]=arguments[oe+2];Ct.children=De}if(M&&M.defaultProps)for(ft in Lt=M.defaultProps,Lt)Ct[ft]===void 0&&(Ct[ft]=Lt[ft]);return C(M,St,Ct)},kt.createRef=function(){return{current:null}},kt.forwardRef=function(M){return{$$typeof:m,render:M}},kt.isValidElement=x,kt.lazy=function(M){return{$$typeof:E,_payload:{_status:-1,_result:M},_init:Tt}},kt.memo=function(M,W){return{$$typeof:p,type:M,compare:W===void 0?null:W}},kt.startTransition=function(M){var W=R.T,ut={};R.T=ut;try{var ft=M(),Ct=R.S;Ct!==null&&Ct(ut,ft),typeof ft=="object"&&ft!==null&&typeof ft.then=="function"&&ft.then(vt,Pt)}catch(St){Pt(St)}finally{W!==null&&ut.types!==null&&(W.types=ut.types),R.T=W}},kt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},kt.use=function(M){return R.H.use(M)},kt.useActionState=function(M,W,ut){return R.H.useActionState(M,W,ut)},kt.useCallback=function(M,W){return R.H.useCallback(M,W)},kt.useContext=function(M){return R.H.useContext(M)},kt.useDebugValue=function(){},kt.useDeferredValue=function(M,W){return R.H.useDeferredValue(M,W)},kt.useEffect=function(M,W){return R.H.useEffect(M,W)},kt.useEffectEvent=function(M){return R.H.useEffectEvent(M)},kt.useId=function(){return R.H.useId()},kt.useImperativeHandle=function(M,W,ut){return R.H.useImperativeHandle(M,W,ut)},kt.useInsertionEffect=function(M,W){return R.H.useInsertionEffect(M,W)},kt.useLayoutEffect=function(M,W){return R.H.useLayoutEffect(M,W)},kt.useMemo=function(M,W){return R.H.useMemo(M,W)},kt.useOptimistic=function(M,W){return R.H.useOptimistic(M,W)},kt.useReducer=function(M,W,ut){return R.H.useReducer(M,W,ut)},kt.useRef=function(M){return R.H.useRef(M)},kt.useState=function(M){return R.H.useState(M)},kt.useSyncExternalStore=function(M,W,ut){return R.H.useSyncExternalStore(M,W,ut)},kt.useTransition=function(){return R.H.useTransition()},kt.version="19.2.3",kt}var h0;function Bg(){return h0||(h0=1,Nm.exports=zA()),Nm.exports}var Z=Bg();const si=PA(Z);var xm={exports:{}},ru={},Om={exports:{}},Mm={};var f0;function jA(){return f0||(f0=1,(function(r){function t(X,ot){var Tt=X.length;X.push(ot);t:for(;0<Tt;){var Pt=Tt-1>>>1,Kt=X[Pt];if(0<o(Kt,ot))X[Pt]=ot,X[Tt]=Kt,Tt=Pt;else break t}}function n(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var ot=X[0],Tt=X.pop();if(Tt!==ot){X[0]=Tt;t:for(var Pt=0,Kt=X.length,M=Kt>>>1;Pt<M;){var W=2*(Pt+1)-1,ut=X[W],ft=W+1,Ct=X[ft];if(0>o(ut,Tt))ft<Kt&&0>o(Ct,ut)?(X[Pt]=Ct,X[ft]=Tt,Pt=ft):(X[Pt]=ut,X[W]=Tt,Pt=W);else if(ft<Kt&&0>o(Ct,Tt))X[Pt]=Ct,X[ft]=Tt,Pt=ft;else break t}}return ot}function o(X,ot){var Tt=X.sortIndex-ot.sortIndex;return Tt!==0?Tt:X.id-ot.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var g=[],p=[],E=1,T=null,S=3,D=!1,U=!1,j=!1,Y=!1,lt=typeof setTimeout=="function"?setTimeout:null,ht=typeof clearTimeout=="function"?clearTimeout:null,at=typeof setImmediate<"u"?setImmediate:null;function Dt(X){for(var ot=n(p);ot!==null;){if(ot.callback===null)s(p);else if(ot.startTime<=X)s(p),ot.sortIndex=ot.expirationTime,t(g,ot);else break;ot=n(p)}}function wt(X){if(j=!1,Dt(X),!U)if(n(g)!==null)U=!0,vt||(vt=!0,k());else{var ot=n(p);ot!==null&&we(wt,ot.startTime-X)}}var vt=!1,R=-1,w=5,C=-1;function O(){return Y?!0:!(r.unstable_now()-C<w)}function x(){if(Y=!1,vt){var X=r.unstable_now();C=X;var ot=!0;try{t:{U=!1,j&&(j=!1,ht(R),R=-1),D=!0;var Tt=S;try{e:{for(Dt(X),T=n(g);T!==null&&!(T.expirationTime>X&&O());){var Pt=T.callback;if(typeof Pt=="function"){T.callback=null,S=T.priorityLevel;var Kt=Pt(T.expirationTime<=X);if(X=r.unstable_now(),typeof Kt=="function"){T.callback=Kt,Dt(X),ot=!0;break e}T===n(g)&&s(g),Dt(X)}else s(g);T=n(g)}if(T!==null)ot=!0;else{var M=n(p);M!==null&&we(wt,M.startTime-X),ot=!1}}break t}finally{T=null,S=Tt,D=!1}ot=void 0}}finally{ot?k():vt=!1}}}var k;if(typeof at=="function")k=function(){at(x)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Gt=I.port2;I.port1.onmessage=x,k=function(){Gt.postMessage(null)}}else k=function(){lt(x,0)};function we(X,ot){R=lt(function(){X(r.unstable_now())},ot)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(X){switch(S){case 1:case 2:case 3:var ot=3;break;default:ot=S}var Tt=S;S=ot;try{return X()}finally{S=Tt}},r.unstable_requestPaint=function(){Y=!0},r.unstable_runWithPriority=function(X,ot){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var Tt=S;S=X;try{return ot()}finally{S=Tt}},r.unstable_scheduleCallback=function(X,ot,Tt){var Pt=r.unstable_now();switch(typeof Tt=="object"&&Tt!==null?(Tt=Tt.delay,Tt=typeof Tt=="number"&&0<Tt?Pt+Tt:Pt):Tt=Pt,X){case 1:var Kt=-1;break;case 2:Kt=250;break;case 5:Kt=1073741823;break;case 4:Kt=1e4;break;default:Kt=5e3}return Kt=Tt+Kt,X={id:E++,callback:ot,priorityLevel:X,startTime:Tt,expirationTime:Kt,sortIndex:-1},Tt>Pt?(X.sortIndex=Tt,t(p,X),n(g)===null&&X===n(p)&&(j?(ht(R),R=-1):j=!0,we(wt,Tt-Pt))):(X.sortIndex=Kt,t(g,X),U||D||(U=!0,vt||(vt=!0,k()))),X},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(X){var ot=S;return function(){var Tt=S;S=ot;try{return X.apply(this,arguments)}finally{S=Tt}}}})(Mm)),Mm}var d0;function BA(){return d0||(d0=1,Om.exports=jA()),Om.exports}var Vm={exports:{}},kn={};var m0;function qA(){if(m0)return kn;m0=1;var r=Bg();function t(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:g,containerInfo:p,implementation:E}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,kn.createPortal=function(g,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return u(g,p,null,E)},kn.flushSync=function(g){var p=h.T,E=s.p;try{if(h.T=null,s.p=2,g)return g()}finally{h.T=p,s.p=E,s.d.f()}},kn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},kn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},kn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var E=p.as,T=m(E,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,D=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;E==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:D}):E==="script"&&s.d.X(g,{crossOrigin:T,integrity:S,fetchPriority:D,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},kn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var E=m(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},kn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var E=p.as,T=m(E,p.crossOrigin);s.d.L(g,E,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},kn.preloadModule=function(g,p){if(typeof g=="string")if(p){var E=m(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},kn.requestFormReset=function(g){s.d.r(g)},kn.unstable_batchedUpdates=function(g,p){return g(p)},kn.useFormState=function(g,p,E){return h.H.useFormState(g,p,E)},kn.useFormStatus=function(){return h.H.useHostTransitionStatus()},kn.version="19.2.3",kn}var g0;function dT(){if(g0)return Vm.exports;g0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Vm.exports=qA(),Vm.exports}var p0;function HA(){if(p0)return ru;p0=1;var r=BA(),t=Bg(),n=dT();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function h(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function m(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(s(188))}function p(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),e;if(d===l)return g(f),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,b=f.child;b;){if(b===a){_=!0,a=f,l=d;break}if(b===l){_=!0,l=f,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,l=f;break}if(b===l){_=!0,l=d,a=f;break}b=b.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function E(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=E(e),i!==null)return i;e=e.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),lt=Symbol.for("react.profiler"),ht=Symbol.for("react.consumer"),at=Symbol.for("react.context"),Dt=Symbol.for("react.forward_ref"),wt=Symbol.for("react.suspense"),vt=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function k(e){return e===null||typeof e!="object"?null:(e=x&&e[x]||e["@@iterator"],typeof e=="function"?e:null)}var I=Symbol.for("react.client.reference");function Gt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===I?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case j:return"Fragment";case lt:return"Profiler";case Y:return"StrictMode";case wt:return"Suspense";case vt:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case U:return"Portal";case at:return e.displayName||"Context";case ht:return(e._context.displayName||"Context")+".Consumer";case Dt:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case R:return i=e.displayName||null,i!==null?i:Gt(e.type)||"Memo";case w:i=e._payload,e=e._init;try{return Gt(e(i))}catch{}}return null}var we=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Tt={pending:!1,data:null,method:null,action:null},Pt=[],Kt=-1;function M(e){return{current:e}}function W(e){0>Kt||(e.current=Pt[Kt],Pt[Kt]=null,Kt--)}function ut(e,i){Kt++,Pt[Kt]=e.current,e.current=i}var ft=M(null),Ct=M(null),St=M(null),Lt=M(null);function De(e,i){switch(ut(St,i),ut(Ct,e),ut(ft,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?xv(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=xv(i),e=Ov(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}W(ft),ut(ft,e)}function oe(){W(ft),W(Ct),W(St)}function Be(e){e.memoizedState!==null&&ut(Lt,e);var i=ft.current,a=Ov(i,e.type);i!==a&&(ut(Ct,e),ut(ft,a))}function Ei(e){Ct.current===e&&(W(ft),W(Ct)),Lt.current===e&&(W(Lt),Wl._currentValue=Tt)}var On,Ui;function Ye(e){if(On===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);On=i&&i[1]||"",Ui=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+On+e+Ui}var oi=!1;function Mn(e,i){if(!e||oi)return"";oi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var it=function(){throw Error()};if(Object.defineProperty(it.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(it,[])}catch($){var F=$}Reflect.construct(e,[],it)}else{try{it.call()}catch($){F=$}e.call(it.prototype)}}else{try{throw Error()}catch($){F=$}(it=e())&&typeof it.catch=="function"&&it.catch(function(){})}}catch($){if($&&F&&typeof $.stack=="string")return[$.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var N=_.split(`
`),q=b.split(`
`);for(f=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;f<q.length&&!q[f].includes("DetermineComponentFrameRoot");)f++;if(l===N.length||f===q.length)for(l=N.length-1,f=q.length-1;1<=l&&0<=f&&N[l]!==q[f];)f--;for(;1<=l&&0<=f;l--,f--)if(N[l]!==q[f]){if(l!==1||f!==1)do if(l--,f--,0>f||N[l]!==q[f]){var J=`
`+N[l].replace(" at new "," at ");return e.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",e.displayName)),J}while(1<=l&&0<=f);break}}}finally{oi=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ye(a):""}function nr(e,i){switch(e.tag){case 26:case 27:case 5:return Ye(e.type);case 16:return Ye("Lazy");case 13:return e.child!==i&&i!==null?Ye("Suspense Fallback"):Ye("Suspense");case 19:return Ye("SuspenseList");case 0:case 15:return Mn(e.type,!1);case 11:return Mn(e.type.render,!1);case 1:return Mn(e.type,!0);case 31:return Ye("Activity");default:return""}}function zi(e){try{var i="",a=null;do i+=nr(e,a),a=e,e=e.return;while(e);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Te=Object.prototype.hasOwnProperty,le=r.unstable_scheduleCallback,jn=r.unstable_cancelCallback,ir=r.unstable_shouldYield,rr=r.unstable_requestPaint,Xe=r.unstable_now,ji=r.unstable_getCurrentPriorityLevel,Sr=r.unstable_ImmediatePriority,Bn=r.unstable_UserBlockingPriority,bn=r.unstable_NormalPriority,Bi=r.unstable_LowPriority,Ar=r.unstable_IdlePriority,qn=r.log,wr=r.unstable_setDisableYieldValue,Hn=null,qe=null;function mn(e){if(typeof qn=="function"&&wr(e),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(Hn,e)}catch{}}var be=Math.clz32?Math.clz32:es,Rr=Math.log,qi=Math.LN2;function es(e){return e>>>=0,e===0?32:31-(Rr(e)/qi|0)|0}var Yn=256,Hi=262144,Bt=4194304;function Se(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ae(e,i,a){var l=e.pendingLanes;if(l===0)return 0;var f=0,d=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?f=Se(l):(_&=b,_!==0?f=Se(_):a||(a=b&~e,a!==0&&(f=Se(a))))):(b=l&~d,b!==0?f=Se(b):_!==0?f=Se(_):a||(a=l&~e,a!==0&&(f=Se(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function Pe(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function gn(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ze(){var e=Bt;return Bt<<=1,(Bt&62914560)===0&&(Bt=4194304),e}function Me(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function G(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function he(e,i,a,l,f,d){var _=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var b=e.entanglements,N=e.expirationTimes,q=e.hiddenUpdates;for(a=_&~a;0<a;){var J=31-be(a),it=1<<J;b[J]=0,N[J]=-1;var F=q[J];if(F!==null)for(q[J]=null,J=0;J<F.length;J++){var $=F[J];$!==null&&($.lane&=-536870913)}a&=~it}l!==0&&fe(e,l,0),d!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=d&~(_&~i))}function fe(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var l=31-be(i);e.entangledLanes|=i,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function He(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var l=31-be(a),f=1<<l;f&i|e[l]&i&&(e[l]|=i),a&=~f}}function st(e,i){var a=i&-i;return a=(a&42)!==0?1:ln(a),(a&(e.suspendedLanes|i))!==0?0:a}function ln(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function te(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ne(){var e=ot.p;return e!==0?e:(e=window.event,e===void 0?32:e0(e.type))}function un(e,i){var a=ot.p;try{return ot.p=e,i()}finally{ot.p=a}}var de=Math.random().toString(36).slice(2),Ve="__reactFiber$"+de,Fe="__reactProps$"+de,pt="__reactContainer$"+de,ns="__reactEvents$"+de,Ya="__reactListeners$"+de,Xa="__reactHandles$"+de,ca="__reactResources$"+de,Ti="__reactMarker$"+de;function is(e){delete e[Ve],delete e[Fe],delete e[ns],delete e[Ya],delete e[Xa]}function bi(e){var i=e[Ve];if(i)return i;for(var a=e.parentNode;a;){if(i=a[pt]||a[Ve]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=zv(e);e!==null;){if(a=e[Ve])return a;e=zv(e)}return i}e=a,a=e.parentNode}return null}function Fn(e){if(e=e[Ve]||e[pt]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function Vn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function Si(e){var i=e[ca];return i||(i=e[ca]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Le(e){e[Ti]=!0}var ha=new Set,rs={};function Xn(e,i){Ai(e,i),Ai(e+"Capture",i)}function Ai(e,i){for(rs[e]=i,e=0;e<i.length;e++)ha.add(i[e])}var fa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ss={},da={};function Je(e){return Te.call(da,e)?!0:Te.call(ss,e)?!1:fa.test(e)?da[e]=!0:(ss[e]=!0,!1)}function L(e,i,a){if(Je(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function K(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function H(e,i,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+l)}}function mt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Et(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Jt(e,i,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(e,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function qt(e){if(!e._valueTracker){var i=Et(e)?"checked":"value";e._valueTracker=Jt(e,i,""+e[i])}}function wi(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return e&&(l=Et(e)?e.checked?"true":"false":e.value),e=l,e!==a?(i.setValue(e),!0):!1}function sr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ma=/[\n"\\]/g;function Zn(e){return e.replace(ma,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Za(e,i,a,l,f,d,_,b){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),i!=null?_==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+mt(i)):e.value!==""+mt(i)&&(e.value=""+mt(i)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),i!=null?fl(e,_,mt(i)):a!=null?fl(e,_,mt(a)):l!=null&&e.removeAttribute("value"),f==null&&d!=null&&(e.defaultChecked=!!d),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+mt(b):e.removeAttribute("name")}function Wu(e,i,a,l,f,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){qt(e);return}a=a!=null?""+mt(a):"",i=i!=null?""+mt(i):a,b||i===e.value||(e.value=i),e.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=b?e.checked:!!l,e.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_),qt(e)}function fl(e,i,a){i==="number"&&sr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function as(e,i,a,l){if(e=e.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=i.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&l&&(e[a].defaultSelected=!0)}else{for(a=""+mt(a),i=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,l&&(e[f].defaultSelected=!0);return}i!==null||e[f].disabled||(i=e[f])}i!==null&&(i.selected=!0)}}function tc(e,i,a){if(i!=null&&(i=""+mt(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+mt(a):""}function os(e,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(we(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=mt(i),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),qt(e)}function Jn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var ec=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dl(e,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":l?e.setProperty(i,a):typeof a!="number"||a===0||ec.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function ml(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&dl(e,f,l)}else for(var d in i)i.hasOwnProperty(d)&&dl(e,d,i[d])}function Ja(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ls=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wa(e){return ls.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Fi(){}var gl=null;function Ri(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var us=null,ar=null;function ga(e){var i=Fn(e);if(i&&(e=i.stateNode)){var a=e[Fe]||null;t:switch(e=i.stateNode,i.type){case"input":if(Za(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Zn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==e&&l.form===e.form){var f=l[Fe]||null;if(!f)throw Error(s(90));Za(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===e.form&&wi(l)}break t;case"textarea":tc(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&as(e,!!a.multiple,i,!1)}}}var to=!1;function cs(e,i,a){if(to)return e(i,a);to=!0;try{var l=e(i);return l}finally{if(to=!1,(us!==null||ar!==null)&&(Yc(),us&&(i=us,e=ar,ar=us=null,ga(i),e)))for(i=0;i<e.length;i++)ga(e[i])}}function Gi(e,i){var a=e.stateNode;if(a===null)return null;var l=a[Fe]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pa=!1;if(Ci)try{var me={};Object.defineProperty(me,"passive",{get:function(){pa=!0}}),window.addEventListener("test",me,me),window.removeEventListener("test",me,me)}catch{pa=!1}var or=null,pl=null,ya=null;function yl(){if(ya)return ya;var e,i=pl,a=i.length,l,f="value"in or?or.value:or.textContent,d=f.length;for(e=0;e<a&&i[e]===f[e];e++);var _=a-e;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return ya=f.slice(e,1<l?1-l:void 0)}function _a(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Cr(){return!0}function Ki(){return!1}function Sn(e){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(a=e[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Cr:Ki,this.isPropagationStopped=Ki,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Cr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Cr)},persist:function(){},isPersistent:Cr}),i}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lr=Sn(Ir),hs=T({},Ir,{view:0,detail:0}),_l=Sn(hs),fs,eo,ur,no=T({},hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ds,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ur&&(ur&&e.type==="mousemove"?(fs=e.screenX-ur.screenX,eo=e.screenY-ur.screenY):eo=fs=0,ur=e),fs)},movementY:function(e){return"movementY"in e?e.movementY:eo}}),vl=Sn(no),va=T({},no,{dataTransfer:0}),ic=Sn(va),rc=T({},hs,{relatedTarget:0}),Ea=Sn(rc),El=T({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),sc=Sn(El),io=T({},Ir,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ac=Sn(io),oc=T({},Ir,{data:0}),cr=Sn(oc),lc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hc(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=cc[e])?!!i[e]:!1}function ds(){return hc}var Gn=T({},hs,{key:function(e){if(e.key){var i=lc[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=_a(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?uc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ds,charCode:function(e){return e.type==="keypress"?_a(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_a(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fc=Sn(Gn),dc=T({},no,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dr=Sn(dc),c=T({},hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ds}),y=Sn(c),v=T({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Sn(v),z=T({},no,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Sn(z),ct=T({},Ir,{newState:0,oldState:0}),Ut=Sn(ct),Ge=[9,13,27,32],se=Ci&&"CompositionEvent"in window,xe=null;Ci&&"documentMode"in document&&(xe=document.documentMode);var Ii=Ci&&"TextEvent"in window&&!xe,hr=Ci&&(!se||xe&&8<xe&&11>=xe),Qi=" ",$i=!1;function Ta(e,i){switch(e){case"keyup":return Ge.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ro(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var so=!1;function aS(e,i){switch(e){case"compositionend":return ro(i);case"keypress":return i.which!==32?null:($i=!0,Qi);case"textInput":return e=i.data,e===Qi&&$i?null:e;default:return null}}function oS(e,i){if(so)return e==="compositionend"||!se&&Ta(e,i)?(e=yl(),ya=pl=or=null,so=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return hr&&i.locale!=="ko"?null:i.data;default:return null}}var lS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qp(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!lS[e.type]:i==="textarea"}function Hp(e,i,a,l){us?ar?ar.push(l):ar=[l]:us=l,i=nh(i,"onChange"),0<i.length&&(a=new lr("onChange","change",null,a,l),e.push({event:a,listeners:i}))}var Tl=null,bl=null;function uS(e){wv(e,0)}function mc(e){var i=Vn(e);if(wi(i))return e}function Fp(e,i){if(e==="change")return i}var Gp=!1;if(Ci){var Pf;if(Ci){var Lf="oninput"in document;if(!Lf){var Kp=document.createElement("div");Kp.setAttribute("oninput","return;"),Lf=typeof Kp.oninput=="function"}Pf=Lf}else Pf=!1;Gp=Pf&&(!document.documentMode||9<document.documentMode)}function Qp(){Tl&&(Tl.detachEvent("onpropertychange",$p),bl=Tl=null)}function $p(e){if(e.propertyName==="value"&&mc(bl)){var i=[];Hp(i,bl,e,Ri(e)),cs(uS,i)}}function cS(e,i,a){e==="focusin"?(Qp(),Tl=i,bl=a,Tl.attachEvent("onpropertychange",$p)):e==="focusout"&&Qp()}function hS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mc(bl)}function fS(e,i){if(e==="click")return mc(i)}function dS(e,i){if(e==="input"||e==="change")return mc(i)}function mS(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var li=typeof Object.is=="function"?Object.is:mS;function Sl(e,i){if(li(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Te.call(i,f)||!li(e[f],i[f]))return!1}return!0}function Yp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xp(e,i){var a=Yp(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=i&&l>=i)return{node:a,offset:i-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Yp(a)}}function Zp(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Zp(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Jp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=sr(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=sr(e.document)}return i}function Uf(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var gS=Ci&&"documentMode"in document&&11>=document.documentMode,ao=null,zf=null,Al=null,jf=!1;function Wp(e,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;jf||ao==null||ao!==sr(l)||(l=ao,"selectionStart"in l&&Uf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Al&&Sl(Al,l)||(Al=l,l=nh(zf,"onSelect"),0<l.length&&(i=new lr("onSelect","select",null,i,a),e.push({event:i,listeners:l}),i.target=ao)))}function ba(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var oo={animationend:ba("Animation","AnimationEnd"),animationiteration:ba("Animation","AnimationIteration"),animationstart:ba("Animation","AnimationStart"),transitionrun:ba("Transition","TransitionRun"),transitionstart:ba("Transition","TransitionStart"),transitioncancel:ba("Transition","TransitionCancel"),transitionend:ba("Transition","TransitionEnd")},Bf={},ty={};Ci&&(ty=document.createElement("div").style,"AnimationEvent"in window||(delete oo.animationend.animation,delete oo.animationiteration.animation,delete oo.animationstart.animation),"TransitionEvent"in window||delete oo.transitionend.transition);function Sa(e){if(Bf[e])return Bf[e];if(!oo[e])return e;var i=oo[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in ty)return Bf[e]=i[a];return e}var ey=Sa("animationend"),ny=Sa("animationiteration"),iy=Sa("animationstart"),pS=Sa("transitionrun"),yS=Sa("transitionstart"),_S=Sa("transitioncancel"),ry=Sa("transitionend"),sy=new Map,qf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qf.push("scrollEnd");function Yi(e,i){sy.set(e,i),Xn(i,[e])}var gc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Di=[],lo=0,Hf=0;function pc(){for(var e=lo,i=Hf=lo=0;i<e;){var a=Di[i];Di[i++]=null;var l=Di[i];Di[i++]=null;var f=Di[i];Di[i++]=null;var d=Di[i];if(Di[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&ay(a,f,d)}}function yc(e,i,a,l){Di[lo++]=e,Di[lo++]=i,Di[lo++]=a,Di[lo++]=l,Hf|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Ff(e,i,a,l){return yc(e,i,a,l),_c(e)}function Aa(e,i){return yc(e,null,null,i),_c(e)}function ay(e,i,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(f=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,f&&i!==null&&(f=31-be(a),e=d.hiddenUpdates,l=e[f],l===null?e[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function _c(e){if(50<Kl)throw Kl=0,Wd=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var uo={};function vS(e,i,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ui(e,i,a,l){return new vS(e,i,a,l)}function Gf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Nr(e,i){var a=e.alternate;return a===null?(a=ui(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function oy(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function vc(e,i,a,l,f,d){var _=0;if(l=e,typeof e=="function")Gf(e)&&(_=1);else if(typeof e=="string")_=AA(e,a,ft.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case C:return e=ui(31,a,i,f),e.elementType=C,e.lanes=d,e;case j:return wa(a.children,f,d,i);case Y:_=8,f|=24;break;case lt:return e=ui(12,a,i,f|2),e.elementType=lt,e.lanes=d,e;case wt:return e=ui(13,a,i,f),e.elementType=wt,e.lanes=d,e;case vt:return e=ui(19,a,i,f),e.elementType=vt,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case at:_=10;break t;case ht:_=9;break t;case Dt:_=11;break t;case R:_=14;break t;case w:_=16,l=null;break t}_=29,a=Error(s(130,e===null?"null":typeof e,"")),l=null}return i=ui(_,a,i,f),i.elementType=e,i.type=l,i.lanes=d,i}function wa(e,i,a,l){return e=ui(7,e,l,i),e.lanes=a,e}function Kf(e,i,a){return e=ui(6,e,null,i),e.lanes=a,e}function ly(e){var i=ui(18,null,null,0);return i.stateNode=e,i}function Qf(e,i,a){return i=ui(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var uy=new WeakMap;function Ni(e,i){if(typeof e=="object"&&e!==null){var a=uy.get(e);return a!==void 0?a:(i={value:e,source:i,stack:zi(i)},uy.set(e,i),i)}return{value:e,source:i,stack:zi(i)}}var co=[],ho=0,Ec=null,wl=0,xi=[],Oi=0,ms=null,fr=1,dr="";function xr(e,i){co[ho++]=wl,co[ho++]=Ec,Ec=e,wl=i}function cy(e,i,a){xi[Oi++]=fr,xi[Oi++]=dr,xi[Oi++]=ms,ms=e;var l=fr;e=dr;var f=32-be(l)-1;l&=~(1<<f),a+=1;var d=32-be(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,fr=1<<32-be(i)+f|a<<f|l,dr=d+e}else fr=1<<d|a<<f|l,dr=e}function $f(e){e.return!==null&&(xr(e,1),cy(e,1,0))}function Yf(e){for(;e===Ec;)Ec=co[--ho],co[ho]=null,wl=co[--ho],co[ho]=null;for(;e===ms;)ms=xi[--Oi],xi[Oi]=null,dr=xi[--Oi],xi[Oi]=null,fr=xi[--Oi],xi[Oi]=null}function hy(e,i){xi[Oi++]=fr,xi[Oi++]=dr,xi[Oi++]=ms,fr=i.id,dr=i.overflow,ms=e}var An=null,Re=null,Wt=!1,gs=null,Mi=!1,Xf=Error(s(519));function ps(e){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Rl(Ni(i,e)),Xf}function fy(e){var i=e.stateNode,a=e.type,l=e.memoizedProps;switch(i[Ve]=e,i[Fe]=l,a){case"dialog":Ft("cancel",i),Ft("close",i);break;case"iframe":case"object":case"embed":Ft("load",i);break;case"video":case"audio":for(a=0;a<$l.length;a++)Ft($l[a],i);break;case"source":Ft("error",i);break;case"img":case"image":case"link":Ft("error",i),Ft("load",i);break;case"details":Ft("toggle",i);break;case"input":Ft("invalid",i),Wu(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ft("invalid",i);break;case"textarea":Ft("invalid",i),os(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Dv(i.textContent,a)?(l.popover!=null&&(Ft("beforetoggle",i),Ft("toggle",i)),l.onScroll!=null&&Ft("scroll",i),l.onScrollEnd!=null&&Ft("scrollend",i),l.onClick!=null&&(i.onclick=Fi),i=!0):i=!1,i||ps(e,!0)}function dy(e){for(An=e.return;An;)switch(An.tag){case 5:case 31:case 13:Mi=!1;return;case 27:case 3:Mi=!0;return;default:An=An.return}}function fo(e){if(e!==An)return!1;if(!Wt)return dy(e),Wt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||mm(e.type,e.memoizedProps)),a=!a),a&&Re&&ps(e),dy(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Re=Uv(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Re=Uv(e)}else i===27?(i=Re,Ns(e.type)?(e=vm,vm=null,Re=e):Re=i):Re=An?ki(e.stateNode.nextSibling):null;return!0}function Ra(){Re=An=null,Wt=!1}function Zf(){var e=gs;return e!==null&&(ni===null?ni=e:ni.push.apply(ni,e),gs=null),e}function Rl(e){gs===null?gs=[e]:gs.push(e)}var Jf=M(null),Ca=null,Or=null;function ys(e,i,a){ut(Jf,i._currentValue),i._currentValue=a}function Mr(e){e._currentValue=Jf.current,W(Jf)}function Wf(e,i,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),e===a)break;e=e.return}}function td(e,i,a,l){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;t:for(;d!==null;){var b=d;d=f;for(var N=0;N<i.length;N++)if(b.context===i[N]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),Wf(d.return,a,e),l||(_=null);break t}d=b.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(s(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),Wf(_,a,e),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===e){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function mo(e,i,a,l){e=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var b=f.type;li(f.pendingProps.value,_.value)||(e!==null?e.push(b):e=[b])}}else if(f===Lt.current){if(_=f.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(Wl):e=[Wl])}f=f.return}e!==null&&td(i,e,a,l),i.flags|=262144}function Tc(e){for(e=e.firstContext;e!==null;){if(!li(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ia(e){Ca=e,Or=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function wn(e){return my(Ca,e)}function bc(e,i){return Ca===null&&Ia(e),my(e,i)}function my(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Or===null){if(e===null)throw Error(s(308));Or=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Or=Or.next=i;return a}var ES=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},TS=r.unstable_scheduleCallback,bS=r.unstable_NormalPriority,We={$$typeof:at,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ed(){return{controller:new ES,data:new Map,refCount:0}}function Cl(e){e.refCount--,e.refCount===0&&TS(bS,function(){e.controller.abort()})}var Il=null,nd=0,go=0,po=null;function SS(e,i){if(Il===null){var a=Il=[];nd=0,go=sm(),po={status:"pending",value:void 0,then:function(l){a.push(l)}}}return nd++,i.then(gy,gy),i}function gy(){if(--nd===0&&Il!==null){po!==null&&(po.status="fulfilled");var e=Il;Il=null,go=0,po=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function AS(e,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var py=X.S;X.S=function(e,i){W_=Xe(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&SS(e,i),py!==null&&py(e,i)};var Da=M(null);function id(){var e=Da.current;return e!==null?e:ve.pooledCache}function Sc(e,i){i===null?ut(Da,Da.current):ut(Da,i.pool)}function yy(){var e=id();return e===null?null:{parent:We._currentValue,pool:e}}var yo=Error(s(460)),rd=Error(s(474)),Ac=Error(s(542)),wc={then:function(){}};function _y(e){return e=e.status,e==="fulfilled"||e==="rejected"}function vy(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(Fi,Fi),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Ty(e),e;default:if(typeof i.status=="string")i.then(Fi,Fi);else{if(e=ve,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Ty(e),e}throw xa=i,yo}}function Na(e){try{var i=e._init;return i(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(xa=a,yo):a}}var xa=null;function Ey(){if(xa===null)throw Error(s(459));var e=xa;return xa=null,e}function Ty(e){if(e===yo||e===Ac)throw Error(s(483))}var _o=null,Dl=0;function Rc(e){var i=Dl;return Dl+=1,_o===null&&(_o=[]),vy(_o,e,i)}function Nl(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Cc(e,i){throw i.$$typeof===S?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function by(e){function i(P,V){if(e){var B=P.deletions;B===null?(P.deletions=[V],P.flags|=16):B.push(V)}}function a(P,V){if(!e)return null;for(;V!==null;)i(P,V),V=V.sibling;return null}function l(P){for(var V=new Map;P!==null;)P.key!==null?V.set(P.key,P):V.set(P.index,P),P=P.sibling;return V}function f(P,V){return P=Nr(P,V),P.index=0,P.sibling=null,P}function d(P,V,B){return P.index=B,e?(B=P.alternate,B!==null?(B=B.index,B<V?(P.flags|=67108866,V):B):(P.flags|=67108866,V)):(P.flags|=1048576,V)}function _(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function b(P,V,B,tt){return V===null||V.tag!==6?(V=Kf(B,P.mode,tt),V.return=P,V):(V=f(V,B),V.return=P,V)}function N(P,V,B,tt){var At=B.type;return At===j?J(P,V,B.props.children,tt,B.key):V!==null&&(V.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===w&&Na(At)===V.type)?(V=f(V,B.props),Nl(V,B),V.return=P,V):(V=vc(B.type,B.key,B.props,null,P.mode,tt),Nl(V,B),V.return=P,V)}function q(P,V,B,tt){return V===null||V.tag!==4||V.stateNode.containerInfo!==B.containerInfo||V.stateNode.implementation!==B.implementation?(V=Qf(B,P.mode,tt),V.return=P,V):(V=f(V,B.children||[]),V.return=P,V)}function J(P,V,B,tt,At){return V===null||V.tag!==7?(V=wa(B,P.mode,tt,At),V.return=P,V):(V=f(V,B),V.return=P,V)}function it(P,V,B){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Kf(""+V,P.mode,B),V.return=P,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case D:return B=vc(V.type,V.key,V.props,null,P.mode,B),Nl(B,V),B.return=P,B;case U:return V=Qf(V,P.mode,B),V.return=P,V;case w:return V=Na(V),it(P,V,B)}if(we(V)||k(V))return V=wa(V,P.mode,B,null),V.return=P,V;if(typeof V.then=="function")return it(P,Rc(V),B);if(V.$$typeof===at)return it(P,bc(P,V),B);Cc(P,V)}return null}function F(P,V,B,tt){var At=V!==null?V.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return At!==null?null:b(P,V,""+B,tt);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case D:return B.key===At?N(P,V,B,tt):null;case U:return B.key===At?q(P,V,B,tt):null;case w:return B=Na(B),F(P,V,B,tt)}if(we(B)||k(B))return At!==null?null:J(P,V,B,tt,null);if(typeof B.then=="function")return F(P,V,Rc(B),tt);if(B.$$typeof===at)return F(P,V,bc(P,B),tt);Cc(P,B)}return null}function $(P,V,B,tt,At){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return P=P.get(B)||null,b(V,P,""+tt,At);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case D:return P=P.get(tt.key===null?B:tt.key)||null,N(V,P,tt,At);case U:return P=P.get(tt.key===null?B:tt.key)||null,q(V,P,tt,At);case w:return tt=Na(tt),$(P,V,B,tt,At)}if(we(tt)||k(tt))return P=P.get(B)||null,J(V,P,tt,At,null);if(typeof tt.then=="function")return $(P,V,B,Rc(tt),At);if(tt.$$typeof===at)return $(P,V,B,bc(V,tt),At);Cc(V,tt)}return null}function yt(P,V,B,tt){for(var At=null,ie=null,_t=V,jt=V=0,$t=null;_t!==null&&jt<B.length;jt++){_t.index>jt?($t=_t,_t=null):$t=_t.sibling;var re=F(P,_t,B[jt],tt);if(re===null){_t===null&&(_t=$t);break}e&&_t&&re.alternate===null&&i(P,_t),V=d(re,V,jt),ie===null?At=re:ie.sibling=re,ie=re,_t=$t}if(jt===B.length)return a(P,_t),Wt&&xr(P,jt),At;if(_t===null){for(;jt<B.length;jt++)_t=it(P,B[jt],tt),_t!==null&&(V=d(_t,V,jt),ie===null?At=_t:ie.sibling=_t,ie=_t);return Wt&&xr(P,jt),At}for(_t=l(_t);jt<B.length;jt++)$t=$(_t,P,jt,B[jt],tt),$t!==null&&(e&&$t.alternate!==null&&_t.delete($t.key===null?jt:$t.key),V=d($t,V,jt),ie===null?At=$t:ie.sibling=$t,ie=$t);return e&&_t.forEach(function(ks){return i(P,ks)}),Wt&&xr(P,jt),At}function It(P,V,B,tt){if(B==null)throw Error(s(151));for(var At=null,ie=null,_t=V,jt=V=0,$t=null,re=B.next();_t!==null&&!re.done;jt++,re=B.next()){_t.index>jt?($t=_t,_t=null):$t=_t.sibling;var ks=F(P,_t,re.value,tt);if(ks===null){_t===null&&(_t=$t);break}e&&_t&&ks.alternate===null&&i(P,_t),V=d(ks,V,jt),ie===null?At=ks:ie.sibling=ks,ie=ks,_t=$t}if(re.done)return a(P,_t),Wt&&xr(P,jt),At;if(_t===null){for(;!re.done;jt++,re=B.next())re=it(P,re.value,tt),re!==null&&(V=d(re,V,jt),ie===null?At=re:ie.sibling=re,ie=re);return Wt&&xr(P,jt),At}for(_t=l(_t);!re.done;jt++,re=B.next())re=$(_t,P,jt,re.value,tt),re!==null&&(e&&re.alternate!==null&&_t.delete(re.key===null?jt:re.key),V=d(re,V,jt),ie===null?At=re:ie.sibling=re,ie=re);return e&&_t.forEach(function(kA){return i(P,kA)}),Wt&&xr(P,jt),At}function ye(P,V,B,tt){if(typeof B=="object"&&B!==null&&B.type===j&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case D:t:{for(var At=B.key;V!==null;){if(V.key===At){if(At=B.type,At===j){if(V.tag===7){a(P,V.sibling),tt=f(V,B.props.children),tt.return=P,P=tt;break t}}else if(V.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===w&&Na(At)===V.type){a(P,V.sibling),tt=f(V,B.props),Nl(tt,B),tt.return=P,P=tt;break t}a(P,V);break}else i(P,V);V=V.sibling}B.type===j?(tt=wa(B.props.children,P.mode,tt,B.key),tt.return=P,P=tt):(tt=vc(B.type,B.key,B.props,null,P.mode,tt),Nl(tt,B),tt.return=P,P=tt)}return _(P);case U:t:{for(At=B.key;V!==null;){if(V.key===At)if(V.tag===4&&V.stateNode.containerInfo===B.containerInfo&&V.stateNode.implementation===B.implementation){a(P,V.sibling),tt=f(V,B.children||[]),tt.return=P,P=tt;break t}else{a(P,V);break}else i(P,V);V=V.sibling}tt=Qf(B,P.mode,tt),tt.return=P,P=tt}return _(P);case w:return B=Na(B),ye(P,V,B,tt)}if(we(B))return yt(P,V,B,tt);if(k(B)){if(At=k(B),typeof At!="function")throw Error(s(150));return B=At.call(B),It(P,V,B,tt)}if(typeof B.then=="function")return ye(P,V,Rc(B),tt);if(B.$$typeof===at)return ye(P,V,bc(P,B),tt);Cc(P,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,V!==null&&V.tag===6?(a(P,V.sibling),tt=f(V,B),tt.return=P,P=tt):(a(P,V),tt=Kf(B,P.mode,tt),tt.return=P,P=tt),_(P)):a(P,V)}return function(P,V,B,tt){try{Dl=0;var At=ye(P,V,B,tt);return _o=null,At}catch(_t){if(_t===yo||_t===Ac)throw _t;var ie=ui(29,_t,null,P.mode);return ie.lanes=tt,ie.return=P,ie}}}var Oa=by(!0),Sy=by(!1),_s=!1;function sd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ad(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function vs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Es(e,i,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(ae&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=_c(e),ay(e,null,a),i}return yc(e,l,i,a),_c(e)}function xl(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,He(e,a)}}function od(e,i){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var ld=!1;function Ol(){if(ld){var e=po;if(e!==null)throw e}}function Ml(e,i,a,l){ld=!1;var f=e.updateQueue;_s=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var N=b,q=N.next;N.next=null,_===null?d=q:_.next=q,_=N;var J=e.alternate;J!==null&&(J=J.updateQueue,b=J.lastBaseUpdate,b!==_&&(b===null?J.firstBaseUpdate=q:b.next=q,J.lastBaseUpdate=N))}if(d!==null){var it=f.baseState;_=0,J=q=N=null,b=d;do{var F=b.lane&-536870913,$=F!==b.lane;if($?(Qt&F)===F:(l&F)===F){F!==0&&F===go&&(ld=!0),J!==null&&(J=J.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var yt=e,It=b;F=i;var ye=a;switch(It.tag){case 1:if(yt=It.payload,typeof yt=="function"){it=yt.call(ye,it,F);break t}it=yt;break t;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=It.payload,F=typeof yt=="function"?yt.call(ye,it,F):yt,F==null)break t;it=T({},it,F);break t;case 2:_s=!0}}F=b.callback,F!==null&&(e.flags|=64,$&&(e.flags|=8192),$=f.callbacks,$===null?f.callbacks=[F]:$.push(F))}else $={lane:F,tag:b.tag,payload:b.payload,callback:b.callback,next:null},J===null?(q=J=$,N=it):J=J.next=$,_|=F;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;$=b,b=$.next,$.next=null,f.lastBaseUpdate=$,f.shared.pending=null}}while(!0);J===null&&(N=it),f.baseState=N,f.firstBaseUpdate=q,f.lastBaseUpdate=J,d===null&&(f.shared.lanes=0),ws|=_,e.lanes=_,e.memoizedState=it}}function Ay(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function wy(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Ay(a[e],i)}var vo=M(null),Ic=M(0);function Ry(e,i){e=qr,ut(Ic,e),ut(vo,i),qr=e|i.baseLanes}function ud(){ut(Ic,qr),ut(vo,vo.current)}function cd(){qr=Ic.current,W(vo),W(Ic)}var ci=M(null),Vi=null;function Ts(e){var i=e.alternate;ut(Ke,Ke.current&1),ut(ci,e),Vi===null&&(i===null||vo.current!==null||i.memoizedState!==null)&&(Vi=e)}function hd(e){ut(Ke,Ke.current),ut(ci,e),Vi===null&&(Vi=e)}function Cy(e){e.tag===22?(ut(Ke,Ke.current),ut(ci,e),Vi===null&&(Vi=e)):bs()}function bs(){ut(Ke,Ke.current),ut(ci,ci.current)}function hi(e){W(ci),Vi===e&&(Vi=null),W(Ke)}var Ke=M(0);function Dc(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ym(a)||_m(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Vr=0,zt=null,ge=null,tn=null,Nc=!1,Eo=!1,Ma=!1,xc=0,Vl=0,To=null,wS=0;function Ue(){throw Error(s(321))}function fd(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!li(e[a],i[a]))return!1;return!0}function dd(e,i,a,l,f,d){return Vr=d,zt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,X.H=e===null||e.memoizedState===null?c_:Id,Ma=!1,d=a(l,f),Ma=!1,Eo&&(d=Dy(i,a,l,f)),Iy(e),d}function Iy(e){X.H=Ll;var i=ge!==null&&ge.next!==null;if(Vr=0,tn=ge=zt=null,Nc=!1,Vl=0,To=null,i)throw Error(s(300));e===null||en||(e=e.dependencies,e!==null&&Tc(e)&&(en=!0))}function Dy(e,i,a,l){zt=e;var f=0;do{if(Eo&&(To=null),Vl=0,Eo=!1,25<=f)throw Error(s(301));if(f+=1,tn=ge=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}X.H=h_,d=i(a,l)}while(Eo);return d}function RS(){var e=X.H,i=e.useState()[0];return i=typeof i.then=="function"?kl(i):i,e=e.useState()[0],(ge!==null?ge.memoizedState:null)!==e&&(zt.flags|=1024),i}function md(){var e=xc!==0;return xc=0,e}function gd(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function pd(e){if(Nc){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Nc=!1}Vr=0,tn=ge=zt=null,Eo=!1,Vl=xc=0,To=null}function Kn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?zt.memoizedState=tn=e:tn=tn.next=e,tn}function Qe(){if(ge===null){var e=zt.alternate;e=e!==null?e.memoizedState:null}else e=ge.next;var i=tn===null?zt.memoizedState:tn.next;if(i!==null)tn=i,ge=e;else{if(e===null)throw zt.alternate===null?Error(s(467)):Error(s(310));ge=e,e={memoizedState:ge.memoizedState,baseState:ge.baseState,baseQueue:ge.baseQueue,queue:ge.queue,next:null},tn===null?zt.memoizedState=tn=e:tn=tn.next=e}return tn}function Oc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kl(e){var i=Vl;return Vl+=1,To===null&&(To=[]),e=vy(To,e,i),i=zt,(tn===null?i.memoizedState:tn.next)===null&&(i=i.alternate,X.H=i===null||i.memoizedState===null?c_:Id),e}function Mc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return kl(e);if(e.$$typeof===at)return wn(e)}throw Error(s(438,String(e)))}function yd(e){var i=null,a=zt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=zt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Oc(),zt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),l=0;l<e;l++)a[l]=O;return i.index++,a}function kr(e,i){return typeof i=="function"?i(e):i}function Vc(e){var i=Qe();return _d(i,ge,e)}function _d(e,i,a){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=e.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=e.baseState,f===null)e.memoizedState=d;else{i=f.next;var b=_=null,N=null,q=i,J=!1;do{var it=q.lane&-536870913;if(it!==q.lane?(Qt&it)===it:(Vr&it)===it){var F=q.revertLane;if(F===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),it===go&&(J=!0);else if((Vr&F)===F){q=q.next,F===go&&(J=!0);continue}else it={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},N===null?(b=N=it,_=d):N=N.next=it,zt.lanes|=F,ws|=F;it=q.action,Ma&&a(d,it),d=q.hasEagerState?q.eagerState:a(d,it)}else F={lane:it,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},N===null?(b=N=F,_=d):N=N.next=F,zt.lanes|=it,ws|=it;q=q.next}while(q!==null&&q!==i);if(N===null?_=d:N.next=b,!li(d,e.memoizedState)&&(en=!0,J&&(a=po,a!==null)))throw a;e.memoizedState=d,e.baseState=_,e.baseQueue=N,l.lastRenderedState=d}return f===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function vd(e){var i=Qe(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=e(d,_.action),_=_.next;while(_!==f);li(d,i.memoizedState)||(en=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Ny(e,i,a){var l=zt,f=Qe(),d=Wt;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var _=!li((ge||f).memoizedState,a);if(_&&(f.memoizedState=a,en=!0),f=f.queue,bd(My.bind(null,l,f,e),[e]),f.getSnapshot!==i||_||tn!==null&&tn.memoizedState.tag&1){if(l.flags|=2048,bo(9,{destroy:void 0},Oy.bind(null,l,f,a,i),null),ve===null)throw Error(s(349));d||(Vr&127)!==0||xy(l,i,a)}return a}function xy(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=zt.updateQueue,i===null?(i=Oc(),zt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function Oy(e,i,a,l){i.value=a,i.getSnapshot=l,Vy(i)&&ky(e)}function My(e,i,a){return a(function(){Vy(i)&&ky(e)})}function Vy(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!li(e,a)}catch{return!0}}function ky(e){var i=Aa(e,2);i!==null&&ii(i,e,2)}function Ed(e){var i=Kn();if(typeof e=="function"){var a=e;if(e=a(),Ma){mn(!0);try{a()}finally{mn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kr,lastRenderedState:e},i}function Py(e,i,a,l){return e.baseState=a,_d(e,ge,typeof l=="function"?l:kr)}function CS(e,i,a,l,f){if(Lc(e))throw Error(s(485));if(e=i.action,e!==null){var d={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};X.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,Ly(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Ly(e,i){var a=i.action,l=i.payload,f=e.state;if(i.isTransition){var d=X.T,_={};X.T=_;try{var b=a(f,l),N=X.S;N!==null&&N(_,b),Uy(e,i,b)}catch(q){Td(e,i,q)}finally{d!==null&&_.types!==null&&(d.types=_.types),X.T=d}}else try{d=a(f,l),Uy(e,i,d)}catch(q){Td(e,i,q)}}function Uy(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){zy(e,i,l)},function(l){return Td(e,i,l)}):zy(e,i,a)}function zy(e,i,a){i.status="fulfilled",i.value=a,jy(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,Ly(e,a)))}function Td(e,i,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,jy(i),i=i.next;while(i!==l)}e.action=null}function jy(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function By(e,i){return i}function qy(e,i){if(Wt){var a=ve.formState;if(a!==null){t:{var l=zt;if(Wt){if(Re){e:{for(var f=Re,d=Mi;f.nodeType!==8;){if(!d){f=null;break e}if(f=ki(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){Re=ki(f.nextSibling),l=f.data==="F!";break t}}ps(l)}l=!1}l&&(i=a[0])}}return a=Kn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:By,lastRenderedState:i},a.queue=l,a=o_.bind(null,zt,l),l.dispatch=a,l=Ed(!1),d=Cd.bind(null,zt,!1,l.queue),l=Kn(),f={state:i,dispatch:null,action:e,pending:null},l.queue=f,a=CS.bind(null,zt,f,d,a),f.dispatch=a,l.memoizedState=e,[i,a,!1]}function Hy(e){var i=Qe();return Fy(i,ge,e)}function Fy(e,i,a){if(i=_d(e,i,By)[0],e=Vc(kr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=kl(i)}catch(_){throw _===yo?Ac:_}else l=i;i=Qe();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(zt.flags|=2048,bo(9,{destroy:void 0},IS.bind(null,f,a),null)),[l,d,e]}function IS(e,i){e.action=i}function Gy(e){var i=Qe(),a=ge;if(a!==null)return Fy(i,a,e);Qe(),i=i.memoizedState,a=Qe();var l=a.queue.dispatch;return a.memoizedState=e,[i,l,!1]}function bo(e,i,a,l){return e={tag:e,create:a,deps:l,inst:i,next:null},i=zt.updateQueue,i===null&&(i=Oc(),zt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,i.lastEffect=e),e}function Ky(){return Qe().memoizedState}function kc(e,i,a,l){var f=Kn();zt.flags|=e,f.memoizedState=bo(1|i,{destroy:void 0},a,l===void 0?null:l)}function Pc(e,i,a,l){var f=Qe();l=l===void 0?null:l;var d=f.memoizedState.inst;ge!==null&&l!==null&&fd(l,ge.memoizedState.deps)?f.memoizedState=bo(i,d,a,l):(zt.flags|=e,f.memoizedState=bo(1|i,d,a,l))}function Qy(e,i){kc(8390656,8,e,i)}function bd(e,i){Pc(2048,8,e,i)}function DS(e){zt.flags|=4;var i=zt.updateQueue;if(i===null)i=Oc(),zt.updateQueue=i,i.events=[e];else{var a=i.events;a===null?i.events=[e]:a.push(e)}}function $y(e){var i=Qe().memoizedState;return DS({ref:i,nextImpl:e}),function(){if((ae&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Yy(e,i){return Pc(4,2,e,i)}function Xy(e,i){return Pc(4,4,e,i)}function Zy(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Jy(e,i,a){a=a!=null?a.concat([e]):null,Pc(4,4,Zy.bind(null,i,e),a)}function Sd(){}function Wy(e,i){var a=Qe();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&fd(i,l[1])?l[0]:(a.memoizedState=[e,i],e)}function t_(e,i){var a=Qe();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&fd(i,l[1]))return l[0];if(l=e(),Ma){mn(!0);try{e()}finally{mn(!1)}}return a.memoizedState=[l,i],l}function Ad(e,i,a){return a===void 0||(Vr&1073741824)!==0&&(Qt&261930)===0?e.memoizedState=i:(e.memoizedState=a,e=ev(),zt.lanes|=e,ws|=e,a)}function e_(e,i,a,l){return li(a,i)?a:vo.current!==null?(e=Ad(e,a,l),li(e,i)||(en=!0),e):(Vr&42)===0||(Vr&1073741824)!==0&&(Qt&261930)===0?(en=!0,e.memoizedState=a):(e=ev(),zt.lanes|=e,ws|=e,i)}function n_(e,i,a,l,f){var d=ot.p;ot.p=d!==0&&8>d?d:8;var _=X.T,b={};X.T=b,Cd(e,!1,i,a);try{var N=f(),q=X.S;if(q!==null&&q(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var J=AS(N,l);Pl(e,i,J,mi(e))}else Pl(e,i,l,mi(e))}catch(it){Pl(e,i,{then:function(){},status:"rejected",reason:it},mi())}finally{ot.p=d,_!==null&&b.types!==null&&(_.types=b.types),X.T=_}}function NS(){}function wd(e,i,a,l){if(e.tag!==5)throw Error(s(476));var f=i_(e).queue;n_(e,f,i,Tt,a===null?NS:function(){return r_(e),a(l)})}function i_(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:Tt,baseState:Tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kr,lastRenderedState:Tt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kr,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function r_(e){var i=i_(e);i.next===null&&(i=e.alternate.memoizedState),Pl(e,i.next.queue,{},mi())}function Rd(){return wn(Wl)}function s_(){return Qe().memoizedState}function a_(){return Qe().memoizedState}function xS(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=mi();e=vs(a);var l=Es(i,e,a);l!==null&&(ii(l,i,a),xl(l,i,a)),i={cache:ed()},e.payload=i;return}i=i.return}}function OS(e,i,a){var l=mi();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Lc(e)?l_(i,a):(a=Ff(e,i,a,l),a!==null&&(ii(a,e,l),u_(a,i,l)))}function o_(e,i,a){var l=mi();Pl(e,i,a,l)}function Pl(e,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Lc(e))l_(i,f);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,b=d(_,a);if(f.hasEagerState=!0,f.eagerState=b,li(b,_))return yc(e,i,f,0),ve===null&&pc(),!1}catch{}if(a=Ff(e,i,f,l),a!==null)return ii(a,e,l),u_(a,i,l),!0}return!1}function Cd(e,i,a,l){if(l={lane:2,revertLane:sm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Lc(e)){if(i)throw Error(s(479))}else i=Ff(e,a,l,2),i!==null&&ii(i,e,2)}function Lc(e){var i=e.alternate;return e===zt||i!==null&&i===zt}function l_(e,i){Eo=Nc=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function u_(e,i,a){if((a&4194048)!==0){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,He(e,a)}}var Ll={readContext:wn,use:Mc,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useLayoutEffect:Ue,useInsertionEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useSyncExternalStore:Ue,useId:Ue,useHostTransitionStatus:Ue,useFormState:Ue,useActionState:Ue,useOptimistic:Ue,useMemoCache:Ue,useCacheRefresh:Ue};Ll.useEffectEvent=Ue;var c_={readContext:wn,use:Mc,useCallback:function(e,i){return Kn().memoizedState=[e,i===void 0?null:i],e},useContext:wn,useEffect:Qy,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,kc(4194308,4,Zy.bind(null,i,e),a)},useLayoutEffect:function(e,i){return kc(4194308,4,e,i)},useInsertionEffect:function(e,i){kc(4,2,e,i)},useMemo:function(e,i){var a=Kn();i=i===void 0?null:i;var l=e();if(Ma){mn(!0);try{e()}finally{mn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(e,i,a){var l=Kn();if(a!==void 0){var f=a(i);if(Ma){mn(!0);try{a(i)}finally{mn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},l.queue=e,e=e.dispatch=OS.bind(null,zt,e),[l.memoizedState,e]},useRef:function(e){var i=Kn();return e={current:e},i.memoizedState=e},useState:function(e){e=Ed(e);var i=e.queue,a=o_.bind(null,zt,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Sd,useDeferredValue:function(e,i){var a=Kn();return Ad(a,e,i)},useTransition:function(){var e=Ed(!1);return e=n_.bind(null,zt,e.queue,!0,!1),Kn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var l=zt,f=Kn();if(Wt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),ve===null)throw Error(s(349));(Qt&127)!==0||xy(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,Qy(My.bind(null,l,d,e),[e]),l.flags|=2048,bo(9,{destroy:void 0},Oy.bind(null,l,d,a,i),null),a},useId:function(){var e=Kn(),i=ve.identifierPrefix;if(Wt){var a=dr,l=fr;a=(l&~(1<<32-be(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=xc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=wS++,i="_"+i+"r_"+a.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:Rd,useFormState:qy,useActionState:qy,useOptimistic:function(e){var i=Kn();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Cd.bind(null,zt,!0,a),a.dispatch=i,[e,i]},useMemoCache:yd,useCacheRefresh:function(){return Kn().memoizedState=xS.bind(null,zt)},useEffectEvent:function(e){var i=Kn(),a={impl:e};return i.memoizedState=a,function(){if((ae&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Id={readContext:wn,use:Mc,useCallback:Wy,useContext:wn,useEffect:bd,useImperativeHandle:Jy,useInsertionEffect:Yy,useLayoutEffect:Xy,useMemo:t_,useReducer:Vc,useRef:Ky,useState:function(){return Vc(kr)},useDebugValue:Sd,useDeferredValue:function(e,i){var a=Qe();return e_(a,ge.memoizedState,e,i)},useTransition:function(){var e=Vc(kr)[0],i=Qe().memoizedState;return[typeof e=="boolean"?e:kl(e),i]},useSyncExternalStore:Ny,useId:s_,useHostTransitionStatus:Rd,useFormState:Hy,useActionState:Hy,useOptimistic:function(e,i){var a=Qe();return Py(a,ge,e,i)},useMemoCache:yd,useCacheRefresh:a_};Id.useEffectEvent=$y;var h_={readContext:wn,use:Mc,useCallback:Wy,useContext:wn,useEffect:bd,useImperativeHandle:Jy,useInsertionEffect:Yy,useLayoutEffect:Xy,useMemo:t_,useReducer:vd,useRef:Ky,useState:function(){return vd(kr)},useDebugValue:Sd,useDeferredValue:function(e,i){var a=Qe();return ge===null?Ad(a,e,i):e_(a,ge.memoizedState,e,i)},useTransition:function(){var e=vd(kr)[0],i=Qe().memoizedState;return[typeof e=="boolean"?e:kl(e),i]},useSyncExternalStore:Ny,useId:s_,useHostTransitionStatus:Rd,useFormState:Gy,useActionState:Gy,useOptimistic:function(e,i){var a=Qe();return ge!==null?Py(a,ge,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:yd,useCacheRefresh:a_};h_.useEffectEvent=$y;function Dd(e,i,a,l){i=e.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Nd={enqueueSetState:function(e,i,a){e=e._reactInternals;var l=mi(),f=vs(l);f.payload=i,a!=null&&(f.callback=a),i=Es(e,f,l),i!==null&&(ii(i,e,l),xl(i,e,l))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var l=mi(),f=vs(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Es(e,f,l),i!==null&&(ii(i,e,l),xl(i,e,l))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=mi(),l=vs(a);l.tag=2,i!=null&&(l.callback=i),i=Es(e,l,a),i!==null&&(ii(i,e,a),xl(i,e,a))}};function f_(e,i,a,l,f,d,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!Sl(a,l)||!Sl(f,d):!0}function d_(e,i,a,l){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==e&&Nd.enqueueReplaceState(i,i.state,null)}function Va(e,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(e=e.defaultProps){a===i&&(a=T({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}function m_(e){gc(e)}function g_(e){console.error(e)}function p_(e){gc(e)}function Uc(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function y_(e,i,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function xd(e,i,a){return a=vs(a),a.tag=3,a.payload={element:null},a.callback=function(){Uc(e,i)},a}function __(e){return e=vs(e),e.tag=3,e}function v_(e,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;e.payload=function(){return f(d)},e.callback=function(){y_(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){y_(i,a,l),typeof f!="function"&&(Rs===null?Rs=new Set([this]):Rs.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function MS(e,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&mo(i,a,f,!0),a=ci.current,a!==null){switch(a.tag){case 31:case 13:return Vi===null?Xc():a.alternate===null&&ze===0&&(ze=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===wc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),nm(e,l,f)),!1;case 22:return a.flags|=65536,l===wc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),nm(e,l,f)),!1}throw Error(s(435,a.tag))}return nm(e,l,f),Xc(),!1}if(Wt)return i=ci.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Xf&&(e=Error(s(422),{cause:l}),Rl(Ni(e,a)))):(l!==Xf&&(i=Error(s(423),{cause:l}),Rl(Ni(i,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,l=Ni(l,a),f=xd(e.stateNode,l,f),od(e,f),ze!==4&&(ze=2)),!1;var d=Error(s(520),{cause:l});if(d=Ni(d,a),Gl===null?Gl=[d]:Gl.push(d),ze!==4&&(ze=2),i===null)return!0;l=Ni(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=xd(a.stateNode,l,e),od(a,e),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Rs===null||!Rs.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=__(f),v_(f,e,a,l),od(a,f),!1}a=a.return}while(a!==null);return!1}var Od=Error(s(461)),en=!1;function Rn(e,i,a,l){i.child=e===null?Sy(i,null,a,l):Oa(i,e.child,a,l)}function E_(e,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var b in l)b!=="ref"&&(_[b]=l[b])}else _=l;return Ia(i),l=dd(e,i,a,_,d,f),b=md(),e!==null&&!en?(gd(e,i,f),Pr(e,i,f)):(Wt&&b&&$f(i),i.flags|=1,Rn(e,i,l,f),i.child)}function T_(e,i,a,l,f){if(e===null){var d=a.type;return typeof d=="function"&&!Gf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,b_(e,i,d,l,f)):(e=vc(a.type,null,l,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!jd(e,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Sl,a(_,l)&&e.ref===i.ref)return Pr(e,i,f)}return i.flags|=1,e=Nr(d,l),e.ref=i.ref,e.return=i,i.child=e}function b_(e,i,a,l,f){if(e!==null){var d=e.memoizedProps;if(Sl(d,l)&&e.ref===i.ref)if(en=!1,i.pendingProps=l=d,jd(e,f))(e.flags&131072)!==0&&(en=!0);else return i.lanes=e.lanes,Pr(e,i,f)}return Md(e,i,a,l,f)}function S_(e,i,a,l){var f=l.children,d=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(l=i.child=e.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return A_(e,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Sc(i,d!==null?d.cachePool:null),d!==null?Ry(i,d):ud(),Cy(i);else return l=i.lanes=536870912,A_(e,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Sc(i,d.cachePool),Ry(i,d),bs(),i.memoizedState=null):(e!==null&&Sc(i,null),ud(),bs());return Rn(e,i,f,a),i.child}function Ul(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function A_(e,i,a,l,f){var d=id();return d=d===null?null:{parent:We._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},e!==null&&Sc(i,null),ud(),Cy(i),e!==null&&mo(e,i,l,!0),i.childLanes=f,null}function zc(e,i){return i=Bc({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function w_(e,i,a){return Oa(i,e.child,null,a),e=zc(i,i.pendingProps),e.flags|=2,hi(i),i.memoizedState=null,e}function VS(e,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Wt){if(l.mode==="hidden")return e=zc(i,l),i.lanes=536870912,Ul(null,e);if(hd(i),(e=Re)?(e=Lv(e,Mi),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:ms!==null?{id:fr,overflow:dr}:null,retryLane:536870912,hydrationErrors:null},a=ly(e),a.return=i,i.child=a,An=i,Re=null)):e=null,e===null)throw ps(i);return i.lanes=536870912,null}return zc(i,l)}var d=e.memoizedState;if(d!==null){var _=d.dehydrated;if(hd(i),f)if(i.flags&256)i.flags&=-257,i=w_(e,i,a);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(s(558));else if(en||mo(e,i,a,!1),f=(a&e.childLanes)!==0,en||f){if(l=ve,l!==null&&(_=st(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Aa(e,_),ii(l,e,_),Od;Xc(),i=w_(e,i,a)}else e=d.treeContext,Re=ki(_.nextSibling),An=i,Wt=!0,gs=null,Mi=!1,e!==null&&hy(i,e),i=zc(i,l),i.flags|=4096;return i}return e=Nr(e.child,{mode:l.mode,children:l.children}),e.ref=i.ref,i.child=e,e.return=i,e}function jc(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Md(e,i,a,l,f){return Ia(i),a=dd(e,i,a,l,void 0,f),l=md(),e!==null&&!en?(gd(e,i,f),Pr(e,i,f)):(Wt&&l&&$f(i),i.flags|=1,Rn(e,i,a,f),i.child)}function R_(e,i,a,l,f,d){return Ia(i),i.updateQueue=null,a=Dy(i,l,a,f),Iy(e),l=md(),e!==null&&!en?(gd(e,i,d),Pr(e,i,d)):(Wt&&l&&$f(i),i.flags|=1,Rn(e,i,a,d),i.child)}function C_(e,i,a,l,f){if(Ia(i),i.stateNode===null){var d=uo,_=a.contextType;typeof _=="object"&&_!==null&&(d=wn(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Nd,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},sd(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?wn(_):uo,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Dd(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Nd.enqueueReplaceState(d,d.state,null),Ml(i,l,d,f),Ol(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(e===null){d=i.stateNode;var b=i.memoizedProps,N=Va(a,b);d.props=N;var q=d.context,J=a.contextType;_=uo,typeof J=="object"&&J!==null&&(_=wn(J));var it=a.getDerivedStateFromProps;J=typeof it=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,J||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||q!==_)&&d_(i,d,l,_),_s=!1;var F=i.memoizedState;d.state=F,Ml(i,l,d,f),Ol(),q=i.memoizedState,b||F!==q||_s?(typeof it=="function"&&(Dd(i,a,it,l),q=i.memoizedState),(N=_s||f_(i,a,N,l,F,q,_))?(J||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=q),d.props=l,d.state=q,d.context=_,l=N):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,ad(e,i),_=i.memoizedProps,J=Va(a,_),d.props=J,it=i.pendingProps,F=d.context,q=a.contextType,N=uo,typeof q=="object"&&q!==null&&(N=wn(q)),b=a.getDerivedStateFromProps,(q=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==it||F!==N)&&d_(i,d,l,N),_s=!1,F=i.memoizedState,d.state=F,Ml(i,l,d,f),Ol();var $=i.memoizedState;_!==it||F!==$||_s||e!==null&&e.dependencies!==null&&Tc(e.dependencies)?(typeof b=="function"&&(Dd(i,a,b,l),$=i.memoizedState),(J=_s||f_(i,a,J,l,F,$,N)||e!==null&&e.dependencies!==null&&Tc(e.dependencies))?(q||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,$,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,$,N)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=$),d.props=l,d.state=$,d.context=N,l=J):(typeof d.componentDidUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(i.flags|=1024),l=!1)}return d=l,jc(e,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&l?(i.child=Oa(i,e.child,null,f),i.child=Oa(i,null,a,f)):Rn(e,i,a,f),i.memoizedState=d.state,e=i.child):e=Pr(e,i,f),e}function I_(e,i,a,l){return Ra(),i.flags|=256,Rn(e,i,a,l),i.child}var Vd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kd(e){return{baseLanes:e,cachePool:yy()}}function Pd(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=di),e}function D_(e,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=e!==null&&e.memoizedState===null?!1:(Ke.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,e===null){if(Wt){if(f?Ts(i):bs(),(e=Re)?(e=Lv(e,Mi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:ms!==null?{id:fr,overflow:dr}:null,retryLane:536870912,hydrationErrors:null},a=ly(e),a.return=i,i.child=a,An=i,Re=null)):e=null,e===null)throw ps(i);return _m(e)?i.lanes=32:i.lanes=536870912,null}var b=l.children;return l=l.fallback,f?(bs(),f=i.mode,b=Bc({mode:"hidden",children:b},f),l=wa(l,f,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,l=i.child,l.memoizedState=kd(a),l.childLanes=Pd(e,_,a),i.memoizedState=Vd,Ul(null,l)):(Ts(i),Ld(i,b))}var N=e.memoizedState;if(N!==null&&(b=N.dehydrated,b!==null)){if(d)i.flags&256?(Ts(i),i.flags&=-257,i=Ud(e,i,a)):i.memoizedState!==null?(bs(),i.child=e.child,i.flags|=128,i=null):(bs(),b=l.fallback,f=i.mode,l=Bc({mode:"visible",children:l.children},f),b=wa(b,f,a,null),b.flags|=2,l.return=i,b.return=i,l.sibling=b,i.child=l,Oa(i,e.child,null,a),l=i.child,l.memoizedState=kd(a),l.childLanes=Pd(e,_,a),i.memoizedState=Vd,i=Ul(null,l));else if(Ts(i),_m(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var q=_.dgst;_=q,l=Error(s(419)),l.stack="",l.digest=_,Rl({value:l,source:null,stack:null}),i=Ud(e,i,a)}else if(en||mo(e,i,a,!1),_=(a&e.childLanes)!==0,en||_){if(_=ve,_!==null&&(l=st(_,a),l!==0&&l!==N.retryLane))throw N.retryLane=l,Aa(e,l),ii(_,e,l),Od;ym(b)||Xc(),i=Ud(e,i,a)}else ym(b)?(i.flags|=192,i.child=e.child,i=null):(e=N.treeContext,Re=ki(b.nextSibling),An=i,Wt=!0,gs=null,Mi=!1,e!==null&&hy(i,e),i=Ld(i,l.children),i.flags|=4096);return i}return f?(bs(),b=l.fallback,f=i.mode,N=e.child,q=N.sibling,l=Nr(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,q!==null?b=Nr(q,b):(b=wa(b,f,a,null),b.flags|=2),b.return=i,l.return=i,l.sibling=b,i.child=l,Ul(null,l),l=i.child,b=e.child.memoizedState,b===null?b=kd(a):(f=b.cachePool,f!==null?(N=We._currentValue,f=f.parent!==N?{parent:N,pool:N}:f):f=yy(),b={baseLanes:b.baseLanes|a,cachePool:f}),l.memoizedState=b,l.childLanes=Pd(e,_,a),i.memoizedState=Vd,Ul(e.child,l)):(Ts(i),a=e.child,e=a.sibling,a=Nr(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,e!==null&&(_=i.deletions,_===null?(i.deletions=[e],i.flags|=16):_.push(e)),i.child=a,i.memoizedState=null,a)}function Ld(e,i){return i=Bc({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Bc(e,i){return e=ui(22,e,null,i),e.lanes=0,e}function Ud(e,i,a){return Oa(i,e.child,null,a),e=Ld(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function N_(e,i,a){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i),Wf(e.return,i,a)}function zd(e,i,a,l,f,d){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function x_(e,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=Ke.current,b=(_&2)!==0;if(b?(_=_&1|2,i.flags|=128):_&=1,ut(Ke,_),Rn(e,i,l,a),l=Wt?wl:0,!b&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&N_(e,a,i);else if(e.tag===19)N_(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)e=a.alternate,e!==null&&Dc(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),zd(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&Dc(e)===null){i.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}zd(i,!0,a,null,d,l);break;case"together":zd(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Pr(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),ws|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(mo(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=Nr(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Nr(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function jd(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Tc(e)))}function kS(e,i,a){switch(i.tag){case 3:De(i,i.stateNode.containerInfo),ys(i,We,e.memoizedState.cache),Ra();break;case 27:case 5:Be(i);break;case 4:De(i,i.stateNode.containerInfo);break;case 10:ys(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,hd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Ts(i),i.flags|=128,null):(a&i.child.childLanes)!==0?D_(e,i,a):(Ts(i),e=Pr(e,i,a),e!==null?e.sibling:null);Ts(i);break;case 19:var f=(e.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(mo(e,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return x_(e,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ut(Ke,Ke.current),l)break;return null;case 22:return i.lanes=0,S_(e,i,a,i.pendingProps);case 24:ys(i,We,e.memoizedState.cache)}return Pr(e,i,a)}function O_(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)en=!0;else{if(!jd(e,a)&&(i.flags&128)===0)return en=!1,kS(e,i,a);en=(e.flags&131072)!==0}else en=!1,Wt&&(i.flags&1048576)!==0&&cy(i,wl,i.index);switch(i.lanes=0,i.tag){case 16:t:{var l=i.pendingProps;if(e=Na(i.elementType),i.type=e,typeof e=="function")Gf(e)?(l=Va(e,l),i.tag=1,i=C_(null,i,e,l,a)):(i.tag=0,i=Md(null,i,e,l,a));else{if(e!=null){var f=e.$$typeof;if(f===Dt){i.tag=11,i=E_(null,i,e,l,a);break t}else if(f===R){i.tag=14,i=T_(null,i,e,l,a);break t}}throw i=Gt(e)||e,Error(s(306,i,""))}}return i;case 0:return Md(e,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Va(l,i.pendingProps),C_(e,i,l,f,a);case 3:t:{if(De(i,i.stateNode.containerInfo),e===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,ad(e,i),Ml(i,l,null,a);var _=i.memoizedState;if(l=_.cache,ys(i,We,l),l!==d.cache&&td(i,[We],a,!0),Ol(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=I_(e,i,l,a);break t}else if(l!==f){f=Ni(Error(s(424)),i),Rl(f),i=I_(e,i,l,a);break t}else for(e=i.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Re=ki(e.firstChild),An=i,Wt=!0,gs=null,Mi=!0,a=Sy(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ra(),l===f){i=Pr(e,i,a);break t}Rn(e,i,l,a)}i=i.child}return i;case 26:return jc(e,i),e===null?(a=Hv(i.type,null,i.pendingProps,null))?i.memoizedState=a:Wt||(a=i.type,e=i.pendingProps,l=ih(St.current).createElement(a),l[Ve]=i,l[Fe]=e,Cn(l,a,e),Le(l),i.stateNode=l):i.memoizedState=Hv(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Be(i),e===null&&Wt&&(l=i.stateNode=jv(i.type,i.pendingProps,St.current),An=i,Mi=!0,f=Re,Ns(i.type)?(vm=f,Re=ki(l.firstChild)):Re=f),Rn(e,i,i.pendingProps.children,a),jc(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Wt&&((f=l=Re)&&(l=hA(l,i.type,i.pendingProps,Mi),l!==null?(i.stateNode=l,An=i,Re=ki(l.firstChild),Mi=!1,f=!0):f=!1),f||ps(i)),Be(i),f=i.type,d=i.pendingProps,_=e!==null?e.memoizedProps:null,l=d.children,mm(f,d)?l=null:_!==null&&mm(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=dd(e,i,RS,null,null,a),Wl._currentValue=f),jc(e,i),Rn(e,i,l,a),i.child;case 6:return e===null&&Wt&&((e=a=Re)&&(a=fA(a,i.pendingProps,Mi),a!==null?(i.stateNode=a,An=i,Re=null,e=!0):e=!1),e||ps(i)),null;case 13:return D_(e,i,a);case 4:return De(i,i.stateNode.containerInfo),l=i.pendingProps,e===null?i.child=Oa(i,null,l,a):Rn(e,i,l,a),i.child;case 11:return E_(e,i,i.type,i.pendingProps,a);case 7:return Rn(e,i,i.pendingProps,a),i.child;case 8:return Rn(e,i,i.pendingProps.children,a),i.child;case 12:return Rn(e,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,ys(i,i.type,l.value),Rn(e,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Ia(i),f=wn(f),l=l(f),i.flags|=1,Rn(e,i,l,a),i.child;case 14:return T_(e,i,i.type,i.pendingProps,a);case 15:return b_(e,i,i.type,i.pendingProps,a);case 19:return x_(e,i,a);case 31:return VS(e,i,a);case 22:return S_(e,i,a,i.pendingProps);case 24:return Ia(i),l=wn(We),e===null?(f=id(),f===null&&(f=ve,d=ed(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},sd(i),ys(i,We,f)):((e.lanes&a)!==0&&(ad(e,i),Ml(i,null,null,a),Ol()),f=e.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),ys(i,We,l)):(l=d.cache,ys(i,We,l),l!==f.cache&&td(i,[We],a,!0))),Rn(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Lr(e){e.flags|=4}function Bd(e,i,a,l,f){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(sv())e.flags|=8192;else throw xa=wc,rd}else e.flags&=-16777217}function M_(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!$v(i))if(sv())e.flags|=8192;else throw xa=wc,rd}function qc(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Ze():536870912,e.lanes|=i,Ro|=i)}function zl(e,i){if(!Wt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ce(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(i)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=l,e.childLanes=a,i}function PS(e,i,a){var l=i.pendingProps;switch(Yf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ce(i),null;case 1:return Ce(i),null;case 3:return a=i.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Mr(We),oe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(fo(i)?Lr(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Zf())),Ce(i),null;case 26:var f=i.type,d=i.memoizedState;return e===null?(Lr(i),d!==null?(Ce(i),M_(i,d)):(Ce(i),Bd(i,f,null,l,a))):d?d!==e.memoizedState?(Lr(i),Ce(i),M_(i,d)):(Ce(i),i.flags&=-16777217):(e=e.memoizedProps,e!==l&&Lr(i),Ce(i),Bd(i,f,e,l,a)),null;case 27:if(Ei(i),a=St.current,f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&Lr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return Ce(i),null}e=ft.current,fo(i)?fy(i):(e=jv(f,l,a),i.stateNode=e,Lr(i))}return Ce(i),null;case 5:if(Ei(i),f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&Lr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return Ce(i),null}if(d=ft.current,fo(i))fy(i);else{var _=ih(St.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[Ve]=i,d[Fe]=l;t:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break t;for(;_.sibling===null;){if(_.return===null||_.return===i)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;t:switch(Cn(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&Lr(i)}}return Ce(i),Bd(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,a),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==l&&Lr(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(e=St.current,fo(i)){if(e=i.stateNode,a=i.memoizedProps,l=null,f=An,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}e[Ve]=i,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Dv(e.nodeValue,a)),e||ps(i,!0)}else e=ih(e).createTextNode(l),e[Ve]=i,i.stateNode=e}return Ce(i),null;case 31:if(a=i.memoizedState,e===null||e.memoizedState!==null){if(l=fo(i),a!==null){if(e===null){if(!l)throw Error(s(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Ve]=i}else Ra(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ce(i),e=!1}else a=Zf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return i.flags&256?(hi(i),i):(hi(i),null);if((i.flags&128)!==0)throw Error(s(558))}return Ce(i),null;case 13:if(l=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=fo(i),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Ve]=i}else Ra(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ce(i),f=!1}else f=Zf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(hi(i),i):(hi(i),null)}return hi(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==e&&a&&(i.child.flags|=8192),qc(i,i.updateQueue),Ce(i),null);case 4:return oe(),e===null&&um(i.stateNode.containerInfo),Ce(i),null;case 10:return Mr(i.type),Ce(i),null;case 19:if(W(Ke),l=i.memoizedState,l===null)return Ce(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)zl(l,!1);else{if(ze!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=Dc(e),d!==null){for(i.flags|=128,zl(l,!1),e=d.updateQueue,i.updateQueue=e,qc(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)oy(a,e),a=a.sibling;return ut(Ke,Ke.current&1|2),Wt&&xr(i,l.treeForkCount),i.child}e=e.sibling}l.tail!==null&&Xe()>Qc&&(i.flags|=128,f=!0,zl(l,!1),i.lanes=4194304)}else{if(!f)if(e=Dc(d),e!==null){if(i.flags|=128,f=!0,e=e.updateQueue,i.updateQueue=e,qc(i,e),zl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Wt)return Ce(i),null}else 2*Xe()-l.renderingStartTime>Qc&&a!==536870912&&(i.flags|=128,f=!0,zl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(e=l.last,e!==null?e.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Xe(),e.sibling=null,a=Ke.current,ut(Ke,f?a&1|2:a&1),Wt&&xr(i,l.treeForkCount),e):(Ce(i),null);case 22:case 23:return hi(i),cd(),l=i.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(Ce(i),i.subtreeFlags&6&&(i.flags|=8192)):Ce(i),a=i.updateQueue,a!==null&&qc(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),e!==null&&W(Da),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Mr(We),Ce(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function LS(e,i){switch(Yf(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Mr(We),oe(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Ei(i),null;case 31:if(i.memoizedState!==null){if(hi(i),i.alternate===null)throw Error(s(340));Ra()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(hi(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Ra()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return W(Ke),null;case 4:return oe(),null;case 10:return Mr(i.type),null;case 22:case 23:return hi(i),cd(),e!==null&&W(Da),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Mr(We),null;case 25:return null;default:return null}}function V_(e,i){switch(Yf(i),i.tag){case 3:Mr(We),oe();break;case 26:case 27:case 5:Ei(i);break;case 4:oe();break;case 31:i.memoizedState!==null&&hi(i);break;case 13:hi(i);break;case 19:W(Ke);break;case 10:Mr(i.type);break;case 22:case 23:hi(i),cd(),e!==null&&W(Da);break;case 24:Mr(We)}}function jl(e,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&e)===e){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(b){ce(i,i.return,b)}}function Ss(e,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&e)===e){var _=l.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,f=i;var N=a,q=b;try{q()}catch(J){ce(f,N,J)}}}l=l.next}while(l!==d)}}catch(J){ce(i,i.return,J)}}function k_(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{wy(i,a)}catch(l){ce(e,e.return,l)}}}function P_(e,i,a){a.props=Va(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){ce(e,i,l)}}function Bl(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(f){ce(e,i,f)}}function mr(e,i){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){ce(e,i,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ce(e,i,f)}else a.current=null}function L_(e){var i=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){ce(e,e.return,f)}}function qd(e,i,a){try{var l=e.stateNode;sA(l,e.type,a,i),l[Fe]=i}catch(f){ce(e,e.return,f)}}function U_(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ns(e.type)||e.tag===4}function Hd(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||U_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ns(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fd(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Fi));else if(l!==4&&(l===27&&Ns(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(Fd(e,i,a),e=e.sibling;e!==null;)Fd(e,i,a),e=e.sibling}function Hc(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(l!==4&&(l===27&&Ns(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Hc(e,i,a),e=e.sibling;e!==null;)Hc(e,i,a),e=e.sibling}function z_(e){var i=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Cn(i,l,a),i[Ve]=e,i[Fe]=a}catch(d){ce(e,e.return,d)}}var Ur=!1,nn=!1,Gd=!1,j_=typeof WeakSet=="function"?WeakSet:Set,pn=null;function US(e,i){if(e=e.containerInfo,fm=ch,e=Jp(e),Uf(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var _=0,b=-1,N=-1,q=0,J=0,it=e,F=null;e:for(;;){for(var $;it!==a||f!==0&&it.nodeType!==3||(b=_+f),it!==d||l!==0&&it.nodeType!==3||(N=_+l),it.nodeType===3&&(_+=it.nodeValue.length),($=it.firstChild)!==null;)F=it,it=$;for(;;){if(it===e)break e;if(F===a&&++q===f&&(b=_),F===d&&++J===l&&(N=_),($=it.nextSibling)!==null)break;it=F,F=it.parentNode}it=$}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(dm={focusedElem:e,selectionRange:a},ch=!1,pn=i;pn!==null;)if(i=pn,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,pn=e;else for(;pn!==null;){switch(i=pn,d=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)f=e[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var yt=Va(a.type,f);e=l.getSnapshotBeforeUpdate(yt,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(It){ce(a,a.return,It)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)pm(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":pm(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,pn=e;break}pn=i.return}}function B_(e,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:jr(e,a),l&4&&jl(5,a);break;case 1:if(jr(e,a),l&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(_){ce(a,a.return,_)}else{var f=Va(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(f,i,e.__reactInternalSnapshotBeforeUpdate)}catch(_){ce(a,a.return,_)}}l&64&&k_(a),l&512&&Bl(a,a.return);break;case 3:if(jr(e,a),l&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{wy(e,i)}catch(_){ce(a,a.return,_)}}break;case 27:i===null&&l&4&&z_(a);case 26:case 5:jr(e,a),i===null&&l&4&&L_(a),l&512&&Bl(a,a.return);break;case 12:jr(e,a);break;case 31:jr(e,a),l&4&&F_(e,a);break;case 13:jr(e,a),l&4&&G_(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=QS.bind(null,a),dA(e,a))));break;case 22:if(l=a.memoizedState!==null||Ur,!l){i=i!==null&&i.memoizedState!==null||nn,f=Ur;var d=nn;Ur=l,(nn=i)&&!d?Br(e,a,(a.subtreeFlags&8772)!==0):jr(e,a),Ur=f,nn=d}break;case 30:break;default:jr(e,a)}}function q_(e){var i=e.alternate;i!==null&&(e.alternate=null,q_(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&is(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Oe=null,Wn=!1;function zr(e,i,a){for(a=a.child;a!==null;)H_(e,i,a),a=a.sibling}function H_(e,i,a){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(Hn,a)}catch{}switch(a.tag){case 26:nn||mr(a,i),zr(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:nn||mr(a,i);var l=Oe,f=Wn;Ns(a.type)&&(Oe=a.stateNode,Wn=!1),zr(e,i,a),Xl(a.stateNode),Oe=l,Wn=f;break;case 5:nn||mr(a,i);case 6:if(l=Oe,f=Wn,Oe=null,zr(e,i,a),Oe=l,Wn=f,Oe!==null)if(Wn)try{(Oe.nodeType===9?Oe.body:Oe.nodeName==="HTML"?Oe.ownerDocument.body:Oe).removeChild(a.stateNode)}catch(d){ce(a,i,d)}else try{Oe.removeChild(a.stateNode)}catch(d){ce(a,i,d)}break;case 18:Oe!==null&&(Wn?(e=Oe,kv(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Vo(e)):kv(Oe,a.stateNode));break;case 4:l=Oe,f=Wn,Oe=a.stateNode.containerInfo,Wn=!0,zr(e,i,a),Oe=l,Wn=f;break;case 0:case 11:case 14:case 15:Ss(2,a,i),nn||Ss(4,a,i),zr(e,i,a);break;case 1:nn||(mr(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&P_(a,i,l)),zr(e,i,a);break;case 21:zr(e,i,a);break;case 22:nn=(l=nn)||a.memoizedState!==null,zr(e,i,a),nn=l;break;default:zr(e,i,a)}}function F_(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Vo(e)}catch(a){ce(i,i.return,a)}}}function G_(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Vo(e)}catch(a){ce(i,i.return,a)}}function zS(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new j_),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new j_),i;default:throw Error(s(435,e.tag))}}function Fc(e,i){var a=zS(e);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=$S.bind(null,e,l);l.then(f,f)}})}function ti(e,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=e,_=i,b=_;t:for(;b!==null;){switch(b.tag){case 27:if(Ns(b.type)){Oe=b.stateNode,Wn=!1;break t}break;case 5:Oe=b.stateNode,Wn=!1;break t;case 3:case 4:Oe=b.stateNode.containerInfo,Wn=!0;break t}b=b.return}if(Oe===null)throw Error(s(160));H_(d,_,f),Oe=null,Wn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)K_(i,e),i=i.sibling}var Xi=null;function K_(e,i){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ti(i,e),ei(e),l&4&&(Ss(3,e,e.return),jl(3,e),Ss(5,e,e.return));break;case 1:ti(i,e),ei(e),l&512&&(nn||a===null||mr(a,a.return)),l&64&&Ur&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=Xi;if(ti(i,e),ei(e),l&512&&(nn||a===null||mr(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Ti]||d[Ve]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Cn(d,l,a),d[Ve]=e,Le(d),l=d;break t;case"link":var _=Kv("link","href",f).get(l+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break e}}d=f.createElement(l),Cn(d,l,a),f.head.appendChild(d);break;case"meta":if(_=Kv("meta","content",f).get(l+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break e}}d=f.createElement(l),Cn(d,l,a),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[Ve]=e,Le(d),l=d}e.stateNode=l}else Qv(f,e.type,e.stateNode);else e.stateNode=Gv(f,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?Qv(f,e.type,e.stateNode):Gv(f,l,e.memoizedProps)):l===null&&e.stateNode!==null&&qd(e,e.memoizedProps,a.memoizedProps)}break;case 27:ti(i,e),ei(e),l&512&&(nn||a===null||mr(a,a.return)),a!==null&&l&4&&qd(e,e.memoizedProps,a.memoizedProps);break;case 5:if(ti(i,e),ei(e),l&512&&(nn||a===null||mr(a,a.return)),e.flags&32){f=e.stateNode;try{Jn(f,"")}catch(yt){ce(e,e.return,yt)}}l&4&&e.stateNode!=null&&(f=e.memoizedProps,qd(e,f,a!==null?a.memoizedProps:f)),l&1024&&(Gd=!0);break;case 6:if(ti(i,e),ei(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(yt){ce(e,e.return,yt)}}break;case 3:if(ah=null,f=Xi,Xi=rh(i.containerInfo),ti(i,e),Xi=f,ei(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Vo(i.containerInfo)}catch(yt){ce(e,e.return,yt)}Gd&&(Gd=!1,Q_(e));break;case 4:l=Xi,Xi=rh(e.stateNode.containerInfo),ti(i,e),ei(e),Xi=l;break;case 12:ti(i,e),ei(e);break;case 31:ti(i,e),ei(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Fc(e,l)));break;case 13:ti(i,e),ei(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Kc=Xe()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Fc(e,l)));break;case 22:f=e.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,q=Ur,J=nn;if(Ur=q||f,nn=J||N,ti(i,e),nn=J,Ur=q,ei(e),l&8192)t:for(i=e.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||N||Ur||nn||ka(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){N=a=i;try{if(d=N.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=N.stateNode;var it=N.memoizedProps.style,F=it!=null&&it.hasOwnProperty("display")?it.display:null;b.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(yt){ce(N,N.return,yt)}}}else if(i.tag===6){if(a===null){N=i;try{N.stateNode.nodeValue=f?"":N.memoizedProps}catch(yt){ce(N,N.return,yt)}}}else if(i.tag===18){if(a===null){N=i;try{var $=N.stateNode;f?Pv($,!0):Pv(N.stateNode,!1)}catch(yt){ce(N,N.return,yt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Fc(e,a))));break;case 19:ti(i,e),ei(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Fc(e,l)));break;case 30:break;case 21:break;default:ti(i,e),ei(e)}}function ei(e){var i=e.flags;if(i&2){try{for(var a,l=e.return;l!==null;){if(U_(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,d=Hd(e);Hc(e,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(Jn(_,""),a.flags&=-33);var b=Hd(e);Hc(e,b,_);break;case 3:case 4:var N=a.stateNode.containerInfo,q=Hd(e);Fd(e,q,N);break;default:throw Error(s(161))}}catch(J){ce(e,e.return,J)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Q_(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Q_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function jr(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)B_(e,i.alternate,i),i=i.sibling}function ka(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Ss(4,i,i.return),ka(i);break;case 1:mr(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&P_(i,i.return,a),ka(i);break;case 27:Xl(i.stateNode);case 26:case 5:mr(i,i.return),ka(i);break;case 22:i.memoizedState===null&&ka(i);break;case 30:ka(i);break;default:ka(i)}e=e.sibling}}function Br(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=e,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:Br(f,d,a),jl(4,d);break;case 1:if(Br(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(q){ce(l,l.return,q)}if(l=d,f=l.updateQueue,f!==null){var b=l.stateNode;try{var N=f.shared.hiddenCallbacks;if(N!==null)for(f.shared.hiddenCallbacks=null,f=0;f<N.length;f++)Ay(N[f],b)}catch(q){ce(l,l.return,q)}}a&&_&64&&k_(d),Bl(d,d.return);break;case 27:z_(d);case 26:case 5:Br(f,d,a),a&&l===null&&_&4&&L_(d),Bl(d,d.return);break;case 12:Br(f,d,a);break;case 31:Br(f,d,a),a&&_&4&&F_(f,d);break;case 13:Br(f,d,a),a&&_&4&&G_(f,d);break;case 22:d.memoizedState===null&&Br(f,d,a),Bl(d,d.return);break;case 30:break;default:Br(f,d,a)}i=i.sibling}}function Kd(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Cl(a))}function Qd(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Cl(e))}function Zi(e,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)$_(e,i,a,l),i=i.sibling}function $_(e,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Zi(e,i,a,l),f&2048&&jl(9,i);break;case 1:Zi(e,i,a,l);break;case 3:Zi(e,i,a,l),f&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Cl(e)));break;case 12:if(f&2048){Zi(e,i,a,l),e=i.stateNode;try{var d=i.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){ce(i,i.return,N)}}else Zi(e,i,a,l);break;case 31:Zi(e,i,a,l);break;case 13:Zi(e,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?Zi(e,i,a,l):ql(e,i):d._visibility&2?Zi(e,i,a,l):(d._visibility|=2,So(e,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Kd(_,i);break;case 24:Zi(e,i,a,l),f&2048&&Qd(i.alternate,i);break;default:Zi(e,i,a,l)}}function So(e,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=e,_=i,b=a,N=l,q=_.flags;switch(_.tag){case 0:case 11:case 15:So(d,_,b,N,f),jl(8,_);break;case 23:break;case 22:var J=_.stateNode;_.memoizedState!==null?J._visibility&2?So(d,_,b,N,f):ql(d,_):(J._visibility|=2,So(d,_,b,N,f)),f&&q&2048&&Kd(_.alternate,_);break;case 24:So(d,_,b,N,f),f&&q&2048&&Qd(_.alternate,_);break;default:So(d,_,b,N,f)}i=i.sibling}}function ql(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,l=i,f=l.flags;switch(l.tag){case 22:ql(a,l),f&2048&&Kd(l.alternate,l);break;case 24:ql(a,l),f&2048&&Qd(l.alternate,l);break;default:ql(a,l)}i=i.sibling}}var Hl=8192;function Ao(e,i,a){if(e.subtreeFlags&Hl)for(e=e.child;e!==null;)Y_(e,i,a),e=e.sibling}function Y_(e,i,a){switch(e.tag){case 26:Ao(e,i,a),e.flags&Hl&&e.memoizedState!==null&&wA(a,Xi,e.memoizedState,e.memoizedProps);break;case 5:Ao(e,i,a);break;case 3:case 4:var l=Xi;Xi=rh(e.stateNode.containerInfo),Ao(e,i,a),Xi=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Hl,Hl=16777216,Ao(e,i,a),Hl=l):Ao(e,i,a));break;default:Ao(e,i,a)}}function X_(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Fl(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];pn=l,J_(l,e)}X_(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Z_(e),e=e.sibling}function Z_(e){switch(e.tag){case 0:case 11:case 15:Fl(e),e.flags&2048&&Ss(9,e,e.return);break;case 3:Fl(e);break;case 12:Fl(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Gc(e)):Fl(e);break;default:Fl(e)}}function Gc(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];pn=l,J_(l,e)}X_(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Ss(8,i,i.return),Gc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Gc(i));break;default:Gc(i)}e=e.sibling}}function J_(e,i){for(;pn!==null;){var a=pn;switch(a.tag){case 0:case 11:case 15:Ss(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Cl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,pn=l;else t:for(a=e;pn!==null;){l=pn;var f=l.sibling,d=l.return;if(q_(l),l===a){pn=null;break t}if(f!==null){f.return=d,pn=f;break t}pn=d}}}var jS={getCacheForType:function(e){var i=wn(We),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a},cacheSignal:function(){return wn(We).controller.signal}},BS=typeof WeakMap=="function"?WeakMap:Map,ae=0,ve=null,Ht=null,Qt=0,ue=0,fi=null,As=!1,wo=!1,$d=!1,qr=0,ze=0,ws=0,Pa=0,Yd=0,di=0,Ro=0,Gl=null,ni=null,Xd=!1,Kc=0,W_=0,Qc=1/0,$c=null,Rs=null,cn=0,Cs=null,Co=null,Hr=0,Zd=0,Jd=null,tv=null,Kl=0,Wd=null;function mi(){return(ae&2)!==0&&Qt!==0?Qt&-Qt:X.T!==null?sm():Ne()}function ev(){if(di===0)if((Qt&536870912)===0||Wt){var e=Hi;Hi<<=1,(Hi&3932160)===0&&(Hi=262144),di=e}else di=536870912;return e=ci.current,e!==null&&(e.flags|=32),di}function ii(e,i,a){(e===ve&&(ue===2||ue===9)||e.cancelPendingCommit!==null)&&(Io(e,0),Is(e,Qt,di,!1)),G(e,a),((ae&2)===0||e!==ve)&&(e===ve&&((ae&2)===0&&(Pa|=a),ze===4&&Is(e,Qt,di,!1)),gr(e))}function nv(e,i,a){if((ae&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&e.expiredLanes)===0||Pe(e,i),f=l?FS(e,i):em(e,i,!0),d=l;do{if(f===0){wo&&!l&&Is(e,i,0,!1);break}else{if(a=e.current.alternate,d&&!qS(a)){f=em(e,i,!1),d=!1;continue}if(f===2){if(d=i,e.errorRecoveryDisabledLanes&d)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;t:{var b=e;f=Gl;var N=b.current.memoizedState.isDehydrated;if(N&&(Io(b,_).flags|=256),_=em(b,_,!1),_!==2){if($d&&!N){b.errorRecoveryDisabledLanes|=d,Pa|=d,f=4;break t}d=ni,ni=f,d!==null&&(ni===null?ni=d:ni.push.apply(ni,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){Io(e,0),Is(e,i,0,!0);break}t:{switch(l=e,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Is(l,i,di,!As);break t;case 2:ni=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=Kc+300-Xe(),10<f)){if(Is(l,i,di,!As),Ae(l,0,!0)!==0)break t;Hr=i,l.timeoutHandle=Mv(iv.bind(null,l,a,ni,$c,Xd,i,di,Pa,Ro,As,d,"Throttled",-0,0),f);break t}iv(l,a,ni,$c,Xd,i,di,Pa,Ro,As,d,null,-0,0)}}break}while(!0);gr(e)}function iv(e,i,a,l,f,d,_,b,N,q,J,it,F,$){if(e.timeoutHandle=-1,it=i.subtreeFlags,it&8192||(it&16785408)===16785408){it={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fi},Y_(i,d,it);var yt=(d&62914560)===d?Kc-Xe():(d&4194048)===d?W_-Xe():0;if(yt=RA(it,yt),yt!==null){Hr=d,e.cancelPendingCommit=yt(hv.bind(null,e,i,d,a,l,f,_,b,N,J,it,null,F,$)),Is(e,d,_,!q);return}}hv(e,i,d,a,l,f,_,b,N)}function qS(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!li(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Is(e,i,a,l){i&=~Yd,i&=~Pa,e.suspendedLanes|=i,e.pingedLanes&=~i,l&&(e.warmLanes|=i),l=e.expirationTimes;for(var f=i;0<f;){var d=31-be(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&fe(e,a,i)}function Yc(){return(ae&6)===0?(Ql(0),!1):!0}function tm(){if(Ht!==null){if(ue===0)var e=Ht.return;else e=Ht,Or=Ca=null,pd(e),_o=null,Dl=0,e=Ht;for(;e!==null;)V_(e.alternate,e),e=e.return;Ht=null}}function Io(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,lA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Hr=0,tm(),ve=e,Ht=a=Nr(e.current,null),Qt=i,ue=0,fi=null,As=!1,wo=Pe(e,i),$d=!1,Ro=di=Yd=Pa=ws=ze=0,ni=Gl=null,Xd=!1,(i&8)!==0&&(i|=i&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=i;0<l;){var f=31-be(l),d=1<<f;i|=e[f],l&=~d}return qr=i,pc(),a}function rv(e,i){zt=null,X.H=Ll,i===yo||i===Ac?(i=Ey(),ue=3):i===rd?(i=Ey(),ue=4):ue=i===Od?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,fi=i,Ht===null&&(ze=1,Uc(e,Ni(i,e.current)))}function sv(){var e=ci.current;return e===null?!0:(Qt&4194048)===Qt?Vi===null:(Qt&62914560)===Qt||(Qt&536870912)!==0?e===Vi:!1}function av(){var e=X.H;return X.H=Ll,e===null?Ll:e}function ov(){var e=X.A;return X.A=jS,e}function Xc(){ze=4,As||(Qt&4194048)!==Qt&&ci.current!==null||(wo=!0),(ws&134217727)===0&&(Pa&134217727)===0||ve===null||Is(ve,Qt,di,!1)}function em(e,i,a){var l=ae;ae|=2;var f=av(),d=ov();(ve!==e||Qt!==i)&&($c=null,Io(e,i)),i=!1;var _=ze;t:do try{if(ue!==0&&Ht!==null){var b=Ht,N=fi;switch(ue){case 8:tm(),_=6;break t;case 3:case 2:case 9:case 6:ci.current===null&&(i=!0);var q=ue;if(ue=0,fi=null,Do(e,b,N,q),a&&wo){_=0;break t}break;default:q=ue,ue=0,fi=null,Do(e,b,N,q)}}HS(),_=ze;break}catch(J){rv(e,J)}while(!0);return i&&e.shellSuspendCounter++,Or=Ca=null,ae=l,X.H=f,X.A=d,Ht===null&&(ve=null,Qt=0,pc()),_}function HS(){for(;Ht!==null;)lv(Ht)}function FS(e,i){var a=ae;ae|=2;var l=av(),f=ov();ve!==e||Qt!==i?($c=null,Qc=Xe()+500,Io(e,i)):wo=Pe(e,i);t:do try{if(ue!==0&&Ht!==null){i=Ht;var d=fi;e:switch(ue){case 1:ue=0,fi=null,Do(e,i,d,1);break;case 2:case 9:if(_y(d)){ue=0,fi=null,uv(i);break}i=function(){ue!==2&&ue!==9||ve!==e||(ue=7),gr(e)},d.then(i,i);break t;case 3:ue=7;break t;case 4:ue=5;break t;case 7:_y(d)?(ue=0,fi=null,uv(i)):(ue=0,fi=null,Do(e,i,d,7));break;case 5:var _=null;switch(Ht.tag){case 26:_=Ht.memoizedState;case 5:case 27:var b=Ht;if(_?$v(_):b.stateNode.complete){ue=0,fi=null;var N=b.sibling;if(N!==null)Ht=N;else{var q=b.return;q!==null?(Ht=q,Zc(q)):Ht=null}break e}}ue=0,fi=null,Do(e,i,d,5);break;case 6:ue=0,fi=null,Do(e,i,d,6);break;case 8:tm(),ze=6;break t;default:throw Error(s(462))}}GS();break}catch(J){rv(e,J)}while(!0);return Or=Ca=null,X.H=l,X.A=f,ae=a,Ht!==null?0:(ve=null,Qt=0,pc(),ze)}function GS(){for(;Ht!==null&&!ir();)lv(Ht)}function lv(e){var i=O_(e.alternate,e,qr);e.memoizedProps=e.pendingProps,i===null?Zc(e):Ht=i}function uv(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=R_(a,i,i.pendingProps,i.type,void 0,Qt);break;case 11:i=R_(a,i,i.pendingProps,i.type.render,i.ref,Qt);break;case 5:pd(i);default:V_(a,i),i=Ht=oy(i,qr),i=O_(a,i,qr)}e.memoizedProps=e.pendingProps,i===null?Zc(e):Ht=i}function Do(e,i,a,l){Or=Ca=null,pd(i),_o=null,Dl=0;var f=i.return;try{if(MS(e,f,i,a,Qt)){ze=1,Uc(e,Ni(a,e.current)),Ht=null;return}}catch(d){if(f!==null)throw Ht=f,d;ze=1,Uc(e,Ni(a,e.current)),Ht=null;return}i.flags&32768?(Wt||l===1?e=!0:wo||(Qt&536870912)!==0?e=!1:(As=e=!0,(l===2||l===9||l===3||l===6)&&(l=ci.current,l!==null&&l.tag===13&&(l.flags|=16384))),cv(i,e)):Zc(i)}function Zc(e){var i=e;do{if((i.flags&32768)!==0){cv(i,As);return}e=i.return;var a=PS(i.alternate,i,qr);if(a!==null){Ht=a;return}if(i=i.sibling,i!==null){Ht=i;return}Ht=i=e}while(i!==null);ze===0&&(ze=5)}function cv(e,i){do{var a=LS(e.alternate,e);if(a!==null){a.flags&=32767,Ht=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Ht=e;return}Ht=e=a}while(e!==null);ze=6,Ht=null}function hv(e,i,a,l,f,d,_,b,N){e.cancelPendingCommit=null;do Jc();while(cn!==0);if((ae&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Hf,he(e,a,d,_,b,N),e===ve&&(Ht=ve=null,Qt=0),Co=i,Cs=e,Hr=a,Zd=d,Jd=f,tv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,YS(bn,function(){return pv(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,f=ot.p,ot.p=2,_=ae,ae|=4;try{US(e,i,a)}finally{ae=_,ot.p=f,X.T=l}}cn=1,fv(),dv(),mv()}}function fv(){if(cn===1){cn=0;var e=Cs,i=Co,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var l=ot.p;ot.p=2;var f=ae;ae|=4;try{K_(i,e);var d=dm,_=Jp(e.containerInfo),b=d.focusedElem,N=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&Zp(b.ownerDocument.documentElement,b)){if(N!==null&&Uf(b)){var q=N.start,J=N.end;if(J===void 0&&(J=q),"selectionStart"in b)b.selectionStart=q,b.selectionEnd=Math.min(J,b.value.length);else{var it=b.ownerDocument||document,F=it&&it.defaultView||window;if(F.getSelection){var $=F.getSelection(),yt=b.textContent.length,It=Math.min(N.start,yt),ye=N.end===void 0?It:Math.min(N.end,yt);!$.extend&&It>ye&&(_=ye,ye=It,It=_);var P=Xp(b,It),V=Xp(b,ye);if(P&&V&&($.rangeCount!==1||$.anchorNode!==P.node||$.anchorOffset!==P.offset||$.focusNode!==V.node||$.focusOffset!==V.offset)){var B=it.createRange();B.setStart(P.node,P.offset),$.removeAllRanges(),It>ye?($.addRange(B),$.extend(V.node,V.offset)):(B.setEnd(V.node,V.offset),$.addRange(B))}}}}for(it=[],$=b;$=$.parentNode;)$.nodeType===1&&it.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<it.length;b++){var tt=it[b];tt.element.scrollLeft=tt.left,tt.element.scrollTop=tt.top}}ch=!!fm,dm=fm=null}finally{ae=f,ot.p=l,X.T=a}}e.current=i,cn=2}}function dv(){if(cn===2){cn=0;var e=Cs,i=Co,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var l=ot.p;ot.p=2;var f=ae;ae|=4;try{B_(e,i.alternate,i)}finally{ae=f,ot.p=l,X.T=a}}cn=3}}function mv(){if(cn===4||cn===3){cn=0,rr();var e=Cs,i=Co,a=Hr,l=tv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?cn=5:(cn=0,Co=Cs=null,gv(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Rs=null),te(a),i=i.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(Hn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=X.T,f=ot.p,ot.p=2,X.T=null;try{for(var d=e.onRecoverableError,_=0;_<l.length;_++){var b=l[_];d(b.value,{componentStack:b.stack})}}finally{X.T=i,ot.p=f}}(Hr&3)!==0&&Jc(),gr(e),f=e.pendingLanes,(a&261930)!==0&&(f&42)!==0?e===Wd?Kl++:(Kl=0,Wd=e):Kl=0,Ql(0)}}function gv(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Cl(i)))}function Jc(){return fv(),dv(),mv(),pv()}function pv(){if(cn!==5)return!1;var e=Cs,i=Zd;Zd=0;var a=te(Hr),l=X.T,f=ot.p;try{ot.p=32>a?32:a,X.T=null,a=Jd,Jd=null;var d=Cs,_=Hr;if(cn=0,Co=Cs=null,Hr=0,(ae&6)!==0)throw Error(s(331));var b=ae;if(ae|=4,Z_(d.current),$_(d,d.current,_,a),ae=b,Ql(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(Hn,d)}catch{}return!0}finally{ot.p=f,X.T=l,gv(e,i)}}function yv(e,i,a){i=Ni(a,i),i=xd(e.stateNode,i,2),e=Es(e,i,2),e!==null&&(G(e,2),gr(e))}function ce(e,i,a){if(e.tag===3)yv(e,e,a);else for(;i!==null;){if(i.tag===3){yv(i,e,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Rs===null||!Rs.has(l))){e=Ni(a,e),a=__(2),l=Es(i,a,2),l!==null&&(v_(a,l,i,e),G(l,2),gr(l));break}}i=i.return}}function nm(e,i,a){var l=e.pingCache;if(l===null){l=e.pingCache=new BS;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||($d=!0,f.add(a),e=KS.bind(null,e,i,a),i.then(e,e))}function KS(e,i,a){var l=e.pingCache;l!==null&&l.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ve===e&&(Qt&a)===a&&(ze===4||ze===3&&(Qt&62914560)===Qt&&300>Xe()-Kc?(ae&2)===0&&Io(e,0):Yd|=a,Ro===Qt&&(Ro=0)),gr(e)}function _v(e,i){i===0&&(i=Ze()),e=Aa(e,i),e!==null&&(G(e,i),gr(e))}function QS(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),_v(e,a)}function $S(e,i){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),_v(e,a)}function YS(e,i){return le(e,i)}var Wc=null,No=null,im=!1,th=!1,rm=!1,Ds=0;function gr(e){e!==No&&e.next===null&&(No===null?Wc=No=e:No=No.next=e),th=!0,im||(im=!0,ZS())}function Ql(e,i){if(!rm&&th){rm=!0;do for(var a=!1,l=Wc;l!==null;){if(e!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-be(42|e)+1)-1,d&=f&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,bv(l,d))}else d=Qt,d=Ae(l,l===ve?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Pe(l,d)||(a=!0,bv(l,d));l=l.next}while(a);rm=!1}}function XS(){vv()}function vv(){th=im=!1;var e=0;Ds!==0&&oA()&&(e=Ds);for(var i=Xe(),a=null,l=Wc;l!==null;){var f=l.next,d=Ev(l,i);d===0?(l.next=null,a===null?Wc=f:a.next=f,f===null&&(No=a)):(a=l,(e!==0||(d&3)!==0)&&(th=!0)),l=f}cn!==0&&cn!==5||Ql(e),Ds!==0&&(Ds=0)}function Ev(e,i){for(var a=e.suspendedLanes,l=e.pingedLanes,f=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var _=31-be(d),b=1<<_,N=f[_];N===-1?((b&a)===0||(b&l)!==0)&&(f[_]=gn(b,i)):N<=i&&(e.expiredLanes|=b),d&=~b}if(i=ve,a=Qt,a=Ae(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===i&&(ue===2||ue===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&jn(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Pe(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(l!==null&&jn(l),te(a)){case 2:case 8:a=Bn;break;case 32:a=bn;break;case 268435456:a=Ar;break;default:a=bn}return l=Tv.bind(null,e),a=le(a,l),e.callbackPriority=i,e.callbackNode=a,i}return l!==null&&l!==null&&jn(l),e.callbackPriority=2,e.callbackNode=null,2}function Tv(e,i){if(cn!==0&&cn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Jc()&&e.callbackNode!==a)return null;var l=Qt;return l=Ae(e,e===ve?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(nv(e,l,i),Ev(e,Xe()),e.callbackNode!=null&&e.callbackNode===a?Tv.bind(null,e):null)}function bv(e,i){if(Jc())return null;nv(e,i,!0)}function ZS(){uA(function(){(ae&6)!==0?le(Sr,XS):vv()})}function sm(){if(Ds===0){var e=go;e===0&&(e=Yn,Yn<<=1,(Yn&261888)===0&&(Yn=256)),Ds=e}return Ds}function Sv(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Wa(""+e)}function Av(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function JS(e,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=Sv((f[Fe]||null).action),_=l.submitter;_&&(i=(i=_[Fe]||null)?Sv(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var b=new lr("action","action",null,l,f);e.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ds!==0){var N=_?Av(f,_):new FormData(f);wd(a,{pending:!0,data:N,method:f.method,action:d},null,N)}}else typeof d=="function"&&(b.preventDefault(),N=_?Av(f,_):new FormData(f),wd(a,{pending:!0,data:N,method:f.method,action:d},d,N))},currentTarget:f}]})}}for(var am=0;am<qf.length;am++){var om=qf[am],WS=om.toLowerCase(),tA=om[0].toUpperCase()+om.slice(1);Yi(WS,"on"+tA)}Yi(ey,"onAnimationEnd"),Yi(ny,"onAnimationIteration"),Yi(iy,"onAnimationStart"),Yi("dblclick","onDoubleClick"),Yi("focusin","onFocus"),Yi("focusout","onBlur"),Yi(pS,"onTransitionRun"),Yi(yS,"onTransitionStart"),Yi(_S,"onTransitionCancel"),Yi(ry,"onTransitionEnd"),Ai("onMouseEnter",["mouseout","mouseover"]),Ai("onMouseLeave",["mouseout","mouseover"]),Ai("onPointerEnter",["pointerout","pointerover"]),Ai("onPointerLeave",["pointerout","pointerover"]),Xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($l));function wv(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],f=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var b=l[_],N=b.instance,q=b.currentTarget;if(b=b.listener,N!==d&&f.isPropagationStopped())break t;d=b,f.currentTarget=q;try{d(f)}catch(J){gc(J)}f.currentTarget=null,d=N}else for(_=0;_<l.length;_++){if(b=l[_],N=b.instance,q=b.currentTarget,b=b.listener,N!==d&&f.isPropagationStopped())break t;d=b,f.currentTarget=q;try{d(f)}catch(J){gc(J)}f.currentTarget=null,d=N}}}}function Ft(e,i){var a=i[ns];a===void 0&&(a=i[ns]=new Set);var l=e+"__bubble";a.has(l)||(Rv(i,e,2,!1),a.add(l))}function lm(e,i,a){var l=0;i&&(l|=4),Rv(a,e,l,i)}var eh="_reactListening"+Math.random().toString(36).slice(2);function um(e){if(!e[eh]){e[eh]=!0,ha.forEach(function(a){a!=="selectionchange"&&(eA.has(a)||lm(a,!1,e),lm(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[eh]||(i[eh]=!0,lm("selectionchange",!1,i))}}function Rv(e,i,a,l){switch(e0(i)){case 2:var f=DA;break;case 8:f=NA;break;default:f=Am}a=f.bind(null,i,a,e),f=void 0,!pa||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?e.addEventListener(i,a,{capture:!0,passive:f}):e.addEventListener(i,a,!0):f!==void 0?e.addEventListener(i,a,{passive:f}):e.addEventListener(i,a,!1)}function cm(e,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===f)break;if(_===4)for(_=l.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;b!==null;){if(_=bi(b),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){l=d=_;continue t}b=b.parentNode}}l=l.return}cs(function(){var q=d,J=Ri(a),it=[];t:{var F=sy.get(e);if(F!==void 0){var $=lr,yt=e;switch(e){case"keypress":if(_a(a)===0)break t;case"keydown":case"keyup":$=fc;break;case"focusin":yt="focus",$=Ea;break;case"focusout":yt="blur",$=Ea;break;case"beforeblur":case"afterblur":$=Ea;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=vl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=ic;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=y;break;case ey:case ny:case iy:$=sc;break;case ry:$=A;break;case"scroll":case"scrollend":$=_l;break;case"wheel":$=Q;break;case"copy":case"cut":case"paste":$=ac;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Dr;break;case"toggle":case"beforetoggle":$=Ut}var It=(i&4)!==0,ye=!It&&(e==="scroll"||e==="scrollend"),P=It?F!==null?F+"Capture":null:F;It=[];for(var V=q,B;V!==null;){var tt=V;if(B=tt.stateNode,tt=tt.tag,tt!==5&&tt!==26&&tt!==27||B===null||P===null||(tt=Gi(V,P),tt!=null&&It.push(Yl(V,tt,B))),ye)break;V=V.return}0<It.length&&(F=new $(F,yt,null,a,J),it.push({event:F,listeners:It}))}}if((i&7)===0){t:{if(F=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",F&&a!==gl&&(yt=a.relatedTarget||a.fromElement)&&(bi(yt)||yt[pt]))break t;if(($||F)&&(F=J.window===J?J:(F=J.ownerDocument)?F.defaultView||F.parentWindow:window,$?(yt=a.relatedTarget||a.toElement,$=q,yt=yt?bi(yt):null,yt!==null&&(ye=u(yt),It=yt.tag,yt!==ye||It!==5&&It!==27&&It!==6)&&(yt=null)):($=null,yt=q),$!==yt)){if(It=vl,tt="onMouseLeave",P="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(It=Dr,tt="onPointerLeave",P="onPointerEnter",V="pointer"),ye=$==null?F:Vn($),B=yt==null?F:Vn(yt),F=new It(tt,V+"leave",$,a,J),F.target=ye,F.relatedTarget=B,tt=null,bi(J)===q&&(It=new It(P,V+"enter",yt,a,J),It.target=B,It.relatedTarget=ye,tt=It),ye=tt,$&&yt)e:{for(It=nA,P=$,V=yt,B=0,tt=P;tt;tt=It(tt))B++;tt=0;for(var At=V;At;At=It(At))tt++;for(;0<B-tt;)P=It(P),B--;for(;0<tt-B;)V=It(V),tt--;for(;B--;){if(P===V||V!==null&&P===V.alternate){It=P;break e}P=It(P),V=It(V)}It=null}else It=null;$!==null&&Cv(it,F,$,It,!1),yt!==null&&ye!==null&&Cv(it,ye,yt,It,!0)}}t:{if(F=q?Vn(q):window,$=F.nodeName&&F.nodeName.toLowerCase(),$==="select"||$==="input"&&F.type==="file")var ie=Fp;else if(qp(F))if(Gp)ie=dS;else{ie=hS;var _t=cS}else $=F.nodeName,!$||$.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?q&&Ja(q.elementType)&&(ie=Fp):ie=fS;if(ie&&(ie=ie(e,q))){Hp(it,ie,a,J);break t}_t&&_t(e,F,q),e==="focusout"&&q&&F.type==="number"&&q.memoizedProps.value!=null&&fl(F,"number",F.value)}switch(_t=q?Vn(q):window,e){case"focusin":(qp(_t)||_t.contentEditable==="true")&&(ao=_t,zf=q,Al=null);break;case"focusout":Al=zf=ao=null;break;case"mousedown":jf=!0;break;case"contextmenu":case"mouseup":case"dragend":jf=!1,Wp(it,a,J);break;case"selectionchange":if(gS)break;case"keydown":case"keyup":Wp(it,a,J)}var jt;if(se)t:{switch(e){case"compositionstart":var $t="onCompositionStart";break t;case"compositionend":$t="onCompositionEnd";break t;case"compositionupdate":$t="onCompositionUpdate";break t}$t=void 0}else so?Ta(e,a)&&($t="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&($t="onCompositionStart");$t&&(hr&&a.locale!=="ko"&&(so||$t!=="onCompositionStart"?$t==="onCompositionEnd"&&so&&(jt=yl()):(or=J,pl="value"in or?or.value:or.textContent,so=!0)),_t=nh(q,$t),0<_t.length&&($t=new cr($t,e,null,a,J),it.push({event:$t,listeners:_t}),jt?$t.data=jt:(jt=ro(a),jt!==null&&($t.data=jt)))),(jt=Ii?aS(e,a):oS(e,a))&&($t=nh(q,"onBeforeInput"),0<$t.length&&(_t=new cr("onBeforeInput","beforeinput",null,a,J),it.push({event:_t,listeners:$t}),_t.data=jt)),JS(it,e,q,a,J)}wv(it,i)})}function Yl(e,i,a){return{instance:e,listener:i,currentTarget:a}}function nh(e,i){for(var a=i+"Capture",l=[];e!==null;){var f=e,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Gi(e,a),f!=null&&l.unshift(Yl(e,f,d)),f=Gi(e,i),f!=null&&l.push(Yl(e,f,d))),e.tag===3)return l;e=e.return}return[]}function nA(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Cv(e,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var b=a,N=b.alternate,q=b.stateNode;if(b=b.tag,N!==null&&N===l)break;b!==5&&b!==26&&b!==27||q===null||(N=q,f?(q=Gi(a,d),q!=null&&_.unshift(Yl(a,q,N))):f||(q=Gi(a,d),q!=null&&_.push(Yl(a,q,N)))),a=a.return}_.length!==0&&e.push({event:i,listeners:_})}var iA=/\r\n?/g,rA=/\u0000|\uFFFD/g;function Iv(e){return(typeof e=="string"?e:""+e).replace(iA,`
`).replace(rA,"")}function Dv(e,i){return i=Iv(i),Iv(e)===i}function pe(e,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Jn(e,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Jn(e,""+l);break;case"className":K(e,"class",l);break;case"tabIndex":K(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":K(e,a,l);break;case"style":ml(e,l,d);break;case"data":if(i!=="object"){K(e,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Wa(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&pe(e,i,"name",f.name,f,null),pe(e,i,"formEncType",f.formEncType,f,null),pe(e,i,"formMethod",f.formMethod,f,null),pe(e,i,"formTarget",f.formTarget,f,null)):(pe(e,i,"encType",f.encType,f,null),pe(e,i,"method",f.method,f,null),pe(e,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Wa(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Fi);break;case"onScroll":l!=null&&Ft("scroll",e);break;case"onScrollEnd":l!=null&&Ft("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Wa(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Ft("beforetoggle",e),Ft("toggle",e),L(e,"popover",l);break;case"xlinkActuate":H(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":H(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":H(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":H(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":H(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":H(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":H(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":H(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":H(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":L(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=nc.get(a)||a,L(e,a,l))}}function hm(e,i,a,l,f,d){switch(a){case"style":ml(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof l=="string"?Jn(e,l):(typeof l=="number"||typeof l=="bigint")&&Jn(e,""+l);break;case"onScroll":l!=null&&Ft("scroll",e);break;case"onScrollEnd":l!=null&&Ft("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Fi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rs.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=e[Fe]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,l,f);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):L(e,a,l)}}}function Cn(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ft("error",e),Ft("load",e);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:pe(e,i,d,_,a,null)}}f&&pe(e,i,"srcSet",a.srcSet,a,null),l&&pe(e,i,"src",a.src,a,null);return;case"input":Ft("invalid",e);var b=d=_=f=null,N=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var J=a[l];if(J!=null)switch(l){case"name":f=J;break;case"type":_=J;break;case"checked":N=J;break;case"defaultChecked":q=J;break;case"value":d=J;break;case"defaultValue":b=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,i));break;default:pe(e,i,l,J,a,null)}}Wu(e,d,b,N,q,_,f,!1);return;case"select":Ft("invalid",e),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(b=a[f],b!=null))switch(f){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":l=b;default:pe(e,i,f,b,a,null)}i=d,a=_,e.multiple=!!l,i!=null?as(e,!!l,i,!1):a!=null&&as(e,!!l,a,!0);return;case"textarea":Ft("invalid",e),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":l=b;break;case"defaultValue":f=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:pe(e,i,_,b,a,null)}os(e,l,f,d);return;case"option":for(N in a)a.hasOwnProperty(N)&&(l=a[N],l!=null)&&(N==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":pe(e,i,N,l,a,null));return;case"dialog":Ft("beforetoggle",e),Ft("toggle",e),Ft("cancel",e),Ft("close",e);break;case"iframe":case"object":Ft("load",e);break;case"video":case"audio":for(l=0;l<$l.length;l++)Ft($l[l],e);break;case"image":Ft("error",e),Ft("load",e);break;case"details":Ft("toggle",e);break;case"embed":case"source":case"link":Ft("error",e),Ft("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:pe(e,i,q,l,a,null)}return;default:if(Ja(i)){for(J in a)a.hasOwnProperty(J)&&(l=a[J],l!==void 0&&hm(e,i,J,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&pe(e,i,b,l,a,null))}function sA(e,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,b=null,N=null,q=null,J=null;for($ in a){var it=a[$];if(a.hasOwnProperty($)&&it!=null)switch($){case"checked":break;case"value":break;case"defaultValue":N=it;default:l.hasOwnProperty($)||pe(e,i,$,null,l,it)}}for(var F in l){var $=l[F];if(it=a[F],l.hasOwnProperty(F)&&($!=null||it!=null))switch(F){case"type":d=$;break;case"name":f=$;break;case"checked":q=$;break;case"defaultChecked":J=$;break;case"value":_=$;break;case"defaultValue":b=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,i));break;default:$!==it&&pe(e,i,F,$,l,it)}}Za(e,_,b,N,q,J,d,f);return;case"select":$=_=b=F=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":$=N;default:l.hasOwnProperty(d)||pe(e,i,d,null,l,N)}for(f in l)if(d=l[f],N=a[f],l.hasOwnProperty(f)&&(d!=null||N!=null))switch(f){case"value":F=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==N&&pe(e,i,f,d,l,N)}i=b,a=_,l=$,F!=null?as(e,!!a,F,!1):!!l!=!!a&&(i!=null?as(e,!!a,i,!0):as(e,!!a,a?[]:"",!1));return;case"textarea":$=F=null;for(b in a)if(f=a[b],a.hasOwnProperty(b)&&f!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:pe(e,i,b,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":F=f;break;case"defaultValue":$=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&pe(e,i,_,f,l,d)}tc(e,F,$);return;case"option":for(var yt in a)F=a[yt],a.hasOwnProperty(yt)&&F!=null&&!l.hasOwnProperty(yt)&&(yt==="selected"?e.selected=!1:pe(e,i,yt,null,l,F));for(N in l)F=l[N],$=a[N],l.hasOwnProperty(N)&&F!==$&&(F!=null||$!=null)&&(N==="selected"?e.selected=F&&typeof F!="function"&&typeof F!="symbol":pe(e,i,N,F,l,$));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var It in a)F=a[It],a.hasOwnProperty(It)&&F!=null&&!l.hasOwnProperty(It)&&pe(e,i,It,null,l,F);for(q in l)if(F=l[q],$=a[q],l.hasOwnProperty(q)&&F!==$&&(F!=null||$!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:pe(e,i,q,F,l,$)}return;default:if(Ja(i)){for(var ye in a)F=a[ye],a.hasOwnProperty(ye)&&F!==void 0&&!l.hasOwnProperty(ye)&&hm(e,i,ye,void 0,l,F);for(J in l)F=l[J],$=a[J],!l.hasOwnProperty(J)||F===$||F===void 0&&$===void 0||hm(e,i,J,F,l,$);return}}for(var P in a)F=a[P],a.hasOwnProperty(P)&&F!=null&&!l.hasOwnProperty(P)&&pe(e,i,P,null,l,F);for(it in l)F=l[it],$=a[it],!l.hasOwnProperty(it)||F===$||F==null&&$==null||pe(e,i,it,F,l,$)}function Nv(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function aA(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,b=f.duration;if(d&&b&&Nv(_)){for(_=0,b=f.responseEnd,l+=1;l<a.length;l++){var N=a[l],q=N.startTime;if(q>b)break;var J=N.transferSize,it=N.initiatorType;J&&Nv(it)&&(N=N.responseEnd,_+=J*(N<b?1:(b-q)/(N-q)))}if(--l,i+=8*(d+_)/(f.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var fm=null,dm=null;function ih(e){return e.nodeType===9?e:e.ownerDocument}function xv(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ov(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function mm(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var gm=null;function oA(){var e=window.event;return e&&e.type==="popstate"?e===gm?!1:(gm=e,!0):(gm=null,!1)}var Mv=typeof setTimeout=="function"?setTimeout:void 0,lA=typeof clearTimeout=="function"?clearTimeout:void 0,Vv=typeof Promise=="function"?Promise:void 0,uA=typeof queueMicrotask=="function"?queueMicrotask:typeof Vv<"u"?function(e){return Vv.resolve(null).then(e).catch(cA)}:Mv;function cA(e){setTimeout(function(){throw e})}function Ns(e){return e==="head"}function kv(e,i){var a=i,l=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(f),Vo(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Xl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Xl(a);for(var d=a.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[Ti]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&Xl(e.ownerDocument.body);a=f}while(a);Vo(i)}function Pv(e,i){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function pm(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":pm(a),is(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function hA(e,i,a,l){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Ti])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=ki(e.nextSibling),e===null)break}return null}function fA(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ki(e.nextSibling),e===null))return null;return e}function Lv(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=ki(e.nextSibling),e===null))return null;return e}function ym(e){return e.data==="$?"||e.data==="$~"}function _m(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function dA(e,i){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function ki(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var vm=null;function Uv(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(i===0)return ki(e.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}e=e.nextSibling}return null}function zv(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return e;i--}else a!=="/$"&&a!=="/&"||i++}e=e.previousSibling}return null}function jv(e,i,a){switch(i=ih(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Xl(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);is(e)}var Pi=new Map,Bv=new Set;function rh(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Fr=ot.d;ot.d={f:mA,r:gA,D:pA,C:yA,L:_A,m:vA,X:TA,S:EA,M:bA};function mA(){var e=Fr.f(),i=Yc();return e||i}function gA(e){var i=Fn(e);i!==null&&i.tag===5&&i.type==="form"?r_(i):Fr.r(e)}var xo=typeof document>"u"?null:document;function qv(e,i,a){var l=xo;if(l&&typeof i=="string"&&i){var f=Zn(i);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),Bv.has(f)||(Bv.add(f),e={rel:e,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Cn(i,"link",e),Le(i),l.head.appendChild(i)))}}function pA(e){Fr.D(e),qv("dns-prefetch",e,null)}function yA(e,i){Fr.C(e,i),qv("preconnect",e,i)}function _A(e,i,a){Fr.L(e,i,a);var l=xo;if(l&&e&&i){var f='link[rel="preload"][as="'+Zn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Zn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Zn(a.imageSizes)+'"]')):f+='[href="'+Zn(e)+'"]';var d=f;switch(i){case"style":d=Oo(e);break;case"script":d=Mo(e)}Pi.has(d)||(e=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Pi.set(d,e),l.querySelector(f)!==null||i==="style"&&l.querySelector(Zl(d))||i==="script"&&l.querySelector(Jl(d))||(i=l.createElement("link"),Cn(i,"link",e),Le(i),l.head.appendChild(i)))}}function vA(e,i){Fr.m(e,i);var a=xo;if(a&&e){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Zn(l)+'"][href="'+Zn(e)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Mo(e)}if(!Pi.has(d)&&(e=T({rel:"modulepreload",href:e},i),Pi.set(d,e),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Jl(d)))return}l=a.createElement("link"),Cn(l,"link",e),Le(l),a.head.appendChild(l)}}}function EA(e,i,a){Fr.S(e,i,a);var l=xo;if(l&&e){var f=Si(l).hoistableStyles,d=Oo(e);i=i||"default";var _=f.get(d);if(!_){var b={loading:0,preload:null};if(_=l.querySelector(Zl(d)))b.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Pi.get(d))&&Em(e,a);var N=_=l.createElement("link");Le(N),Cn(N,"link",e),N._p=new Promise(function(q,J){N.onload=q,N.onerror=J}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,sh(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:b},f.set(d,_)}}}function TA(e,i){Fr.X(e,i);var a=xo;if(a&&e){var l=Si(a).hoistableScripts,f=Mo(e),d=l.get(f);d||(d=a.querySelector(Jl(f)),d||(e=T({src:e,async:!0},i),(i=Pi.get(f))&&Tm(e,i),d=a.createElement("script"),Le(d),Cn(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function bA(e,i){Fr.M(e,i);var a=xo;if(a&&e){var l=Si(a).hoistableScripts,f=Mo(e),d=l.get(f);d||(d=a.querySelector(Jl(f)),d||(e=T({src:e,async:!0,type:"module"},i),(i=Pi.get(f))&&Tm(e,i),d=a.createElement("script"),Le(d),Cn(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Hv(e,i,a,l){var f=(f=St.current)?rh(f):null;if(!f)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Oo(a.href),a=Si(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Oo(a.href);var d=Si(f).hoistableStyles,_=d.get(e);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,_),(d=f.querySelector(Zl(e)))&&!d._p&&(_.instance=d,_.state.loading=5),Pi.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Pi.set(e,a),d||SA(f,e,a,_.state))),i&&l===null)throw Error(s(528,""));return _}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Mo(a),a=Si(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Oo(e){return'href="'+Zn(e)+'"'}function Zl(e){return'link[rel="stylesheet"]['+e+"]"}function Fv(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function SA(e,i,a,l){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=e.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Cn(i,"link",a),Le(i),e.head.appendChild(i))}function Mo(e){return'[src="'+Zn(e)+'"]'}function Jl(e){return"script[async]"+e}function Gv(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=e.querySelector('style[data-href~="'+Zn(a.href)+'"]');if(l)return i.instance=l,Le(l),l;var f=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Le(l),Cn(l,"style",f),sh(l,a.precedence,e),i.instance=l;case"stylesheet":f=Oo(a.href);var d=e.querySelector(Zl(f));if(d)return i.state.loading|=4,i.instance=d,Le(d),d;l=Fv(a),(f=Pi.get(f))&&Em(l,f),d=(e.ownerDocument||e).createElement("link"),Le(d);var _=d;return _._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),Cn(d,"link",l),i.state.loading|=4,sh(d,a.precedence,e),i.instance=d;case"script":return d=Mo(a.src),(f=e.querySelector(Jl(d)))?(i.instance=f,Le(f),f):(l=a,(f=Pi.get(d))&&(l=T({},a),Tm(l,f)),e=e.ownerDocument||e,f=e.createElement("script"),Le(f),Cn(f,"link",l),e.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,sh(l,a.precedence,e));return i.instance}function sh(e,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var b=l[_];if(b.dataset.precedence===i)d=b;else if(d!==f)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Em(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Tm(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var ah=null;function Kv(e,i,a){if(ah===null){var l=new Map,f=ah=new Map;f.set(a,l)}else f=ah,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var d=a[f];if(!(d[Ti]||d[Ve]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=e+_;var b=l.get(_);b?b.push(d):l.set(_,[d])}}return l}function Qv(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function AA(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(e=i.disabled,typeof i.precedence=="string"&&e==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function $v(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function wA(e,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Oo(l.href),d=i.querySelector(Zl(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=oh.bind(e),i.then(e,e)),a.state.loading|=4,a.instance=d,Le(d);return}d=i.ownerDocument||i,l=Fv(l),(f=Pi.get(f))&&Em(l,f),d=d.createElement("link"),Le(d);var _=d;_._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),Cn(d,"link",l),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=oh.bind(e),i.addEventListener("load",a),i.addEventListener("error",a))}}var bm=0;function RA(e,i){return e.stylesheets&&e.count===0&&uh(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&uh(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+i);0<e.imgBytes&&bm===0&&(bm=62500*aA());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&uh(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>bm?50:800)+i);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function oh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var lh=null;function uh(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,lh=new Map,i.forEach(CA,e),lh=null,oh.call(e))}function CA(e,i){if(!(i.state.loading&4)){var a=lh.get(e);if(a)var l=a.get(null);else{a=new Map,lh.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=oh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),i.state.loading|=4}}var Wl={$$typeof:at,Provider:null,Consumer:null,_currentValue:Tt,_currentValue2:Tt,_threadCount:0};function IA(e,i,a,l,f,d,_,b,N){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Me(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Me(0),this.hiddenUpdates=Me(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function Yv(e,i,a,l,f,d,_,b,N,q,J,it){return e=new IA(e,i,a,_,N,q,J,it,b),i=1,d===!0&&(i|=24),d=ui(3,null,null,i),e.current=d,d.stateNode=e,i=ed(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},sd(d),e}function Xv(e){return e?(e=uo,e):uo}function Zv(e,i,a,l,f,d){f=Xv(f),l.context===null?l.context=f:l.pendingContext=f,l=vs(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Es(e,l,i),a!==null&&(ii(a,e,i),xl(a,e,i))}function Jv(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Sm(e,i){Jv(e,i),(e=e.alternate)&&Jv(e,i)}function Wv(e){if(e.tag===13||e.tag===31){var i=Aa(e,67108864);i!==null&&ii(i,e,67108864),Sm(e,67108864)}}function t0(e){if(e.tag===13||e.tag===31){var i=mi();i=ln(i);var a=Aa(e,i);a!==null&&ii(a,e,i),Sm(e,i)}}var ch=!0;function DA(e,i,a,l){var f=X.T;X.T=null;var d=ot.p;try{ot.p=2,Am(e,i,a,l)}finally{ot.p=d,X.T=f}}function NA(e,i,a,l){var f=X.T;X.T=null;var d=ot.p;try{ot.p=8,Am(e,i,a,l)}finally{ot.p=d,X.T=f}}function Am(e,i,a,l){if(ch){var f=wm(l);if(f===null)cm(e,i,l,hh,a),n0(e,l);else if(OA(f,e,i,a,l))l.stopPropagation();else if(n0(e,l),i&4&&-1<xA.indexOf(e)){for(;f!==null;){var d=Fn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=Se(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var N=1<<31-be(_);b.entanglements[1]|=N,_&=~N}gr(d),(ae&6)===0&&(Qc=Xe()+500,Ql(0))}}break;case 31:case 13:b=Aa(d,2),b!==null&&ii(b,d,2),Yc(),Sm(d,2)}if(d=wm(l),d===null&&cm(e,i,l,hh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else cm(e,i,l,null,a)}}function wm(e){return e=Ri(e),Rm(e)}var hh=null;function Rm(e){if(hh=null,e=bi(e),e!==null){var i=u(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=h(i),e!==null)return e;e=null}else if(a===31){if(e=m(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return hh=e,null}function e0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ji()){case Sr:return 2;case Bn:return 8;case bn:case Bi:return 32;case Ar:return 268435456;default:return 32}default:return 32}}var Cm=!1,xs=null,Os=null,Ms=null,tu=new Map,eu=new Map,Vs=[],xA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function n0(e,i){switch(e){case"focusin":case"focusout":xs=null;break;case"dragenter":case"dragleave":Os=null;break;case"mouseover":case"mouseout":Ms=null;break;case"pointerover":case"pointerout":tu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":eu.delete(i.pointerId)}}function nu(e,i,a,l,f,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Fn(i),i!==null&&Wv(i)),e):(e.eventSystemFlags|=l,i=e.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),e)}function OA(e,i,a,l,f){switch(i){case"focusin":return xs=nu(xs,e,i,a,l,f),!0;case"dragenter":return Os=nu(Os,e,i,a,l,f),!0;case"mouseover":return Ms=nu(Ms,e,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return tu.set(d,nu(tu.get(d)||null,e,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,eu.set(d,nu(eu.get(d)||null,e,i,a,l,f)),!0}return!1}function i0(e){var i=bi(e.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){e.blockedOn=i,un(e.priority,function(){t0(a)});return}}else if(i===31){if(i=m(a),i!==null){e.blockedOn=i,un(e.priority,function(){t0(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fh(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=wm(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);gl=l,a.target.dispatchEvent(l),gl=null}else return i=Fn(a),i!==null&&Wv(i),e.blockedOn=a,!1;i.shift()}return!0}function r0(e,i,a){fh(e)&&a.delete(i)}function MA(){Cm=!1,xs!==null&&fh(xs)&&(xs=null),Os!==null&&fh(Os)&&(Os=null),Ms!==null&&fh(Ms)&&(Ms=null),tu.forEach(r0),eu.forEach(r0)}function dh(e,i){e.blockedOn===i&&(e.blockedOn=null,Cm||(Cm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,MA)))}var mh=null;function s0(e){mh!==e&&(mh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){mh===e&&(mh=null);for(var i=0;i<e.length;i+=3){var a=e[i],l=e[i+1],f=e[i+2];if(typeof l!="function"){if(Rm(l||a)===null)continue;break}var d=Fn(a);d!==null&&(e.splice(i,3),i-=3,wd(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Vo(e){function i(N){return dh(N,e)}xs!==null&&dh(xs,e),Os!==null&&dh(Os,e),Ms!==null&&dh(Ms,e),tu.forEach(i),eu.forEach(i);for(var a=0;a<Vs.length;a++){var l=Vs[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Vs.length&&(a=Vs[0],a.blockedOn===null);)i0(a),a.blockedOn===null&&Vs.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[Fe]||null;if(typeof d=="function")_||s0(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[Fe]||null)b=_.formAction;else if(Rm(f)!==null)continue}else b=_.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),s0(a)}}}function a0(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Im(e){this._internalRoot=e}gh.prototype.render=Im.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=mi();Zv(a,l,e,i,null,null)},gh.prototype.unmount=Im.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Zv(e.current,2,null,e,null,null),Yc(),i[pt]=null}};function gh(e){this._internalRoot=e}gh.prototype.unstable_scheduleHydration=function(e){if(e){var i=Ne();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Vs.length&&i!==0&&i<Vs[a].priority;a++);Vs.splice(a,0,e),a===0&&i0(e)}};var o0=t.version;if(o0!=="19.2.3")throw Error(s(527,o0,"19.2.3"));ot.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=p(i),e=e!==null?E(e):null,e=e===null?null:e.stateNode,e};var VA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ph.isDisabled&&ph.supportsFiber)try{Hn=ph.inject(VA),qe=ph}catch{}}return ru.createRoot=function(e,i){if(!o(e))throw Error(s(299));var a=!1,l="",f=m_,d=g_,_=p_;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=Yv(e,1,!1,null,null,a,l,null,f,d,_,a0),e[pt]=i.current,um(e),new Im(i)},ru.hydrateRoot=function(e,i,a){if(!o(e))throw Error(s(299));var l=!1,f="",d=m_,_=g_,b=p_,N=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),i=Yv(e,1,!0,i,a??null,l,f,N,d,_,b,a0),i.context=Xv(null),a=i.current,l=mi(),l=ln(l),f=vs(l),f.callback=null,Es(a,f,l),a=l,i.current.lanes=a,G(i,a),gr(i),e[pt]=i.current,um(e),new gh(i)},ru.version="19.2.3",ru}var y0;function FA(){if(y0)return xm.exports;y0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),xm.exports=HA(),xm.exports}var GA=FA();const KA=()=>et.jsxs("div",{className:"fixed inset-0 -z-50 overflow-hidden pointer-events-none bg-[#020617]",children:[et.jsx("div",{className:"bg-blob opacity-20 w-[800px] h-[800px] -top-96 -left-96 bg-indigo-600 blur-[120px]"}),et.jsx("div",{className:"bg-blob opacity-30 w-[600px] h-[600px] top-1/2 -right-48 bg-pink-600 blur-[100px]",style:{animationDelay:"-5s",animationDuration:"25s"}}),et.jsx("div",{className:"bg-blob opacity-10 w-[500px] h-[500px] bottom-0 left-1/4 bg-cyan-400 blur-[80px]",style:{animationDelay:"-12s",animationDuration:"18s"}}),et.jsx("div",{className:"absolute inset-0 bg-radial-at-t from-transparent via-slate-950/40 to-slate-950"}),et.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"})]});const QA=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$A=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),_0=r=>{const t=$A(r);return t.charAt(0).toUpperCase()+t.slice(1)},mT=(...r)=>r.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim(),YA=r=>{for(const t in r)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var XA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ZA=Z.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:h,...m},g)=>Z.createElement("svg",{ref:g,...XA,width:t,height:t,stroke:r,strokeWidth:s?Number(n)*24/Number(t):n,className:mT("lucide",o),...!u&&!YA(m)&&{"aria-hidden":"true"},...m},[...h.map(([p,E])=>Z.createElement(p,E)),...Array.isArray(u)?u:[u]]));const Wr=(r,t)=>{const n=Z.forwardRef(({className:s,...o},u)=>Z.createElement(ZA,{ref:u,iconNode:t,className:mT(`lucide-${QA(_0(r))}`,`lucide-${r}`,s),...o}));return n.displayName=_0(r),n};const JA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],WA=Wr("arrow-left",JA);const tw=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ew=Wr("copy",tw);const nw=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],iw=Wr("loader-circle",nw);const rw=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],sw=Wr("log-in",rw);const aw=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ow=Wr("plus",aw);const lw=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],uw=Wr("share-2",lw);const cw=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],hw=Wr("trophy",cw);const fw=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],dw=Wr("users",fw);const mw=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],gw=Wr("zap",mw),pw=()=>{};var v0={};const gT=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},yw=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)t[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];t[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],h=r[n++],m=r[n++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;t[s++]=String.fromCharCode(55296+(g>>10)),t[s++]=String.fromCharCode(56320+(g&1023))}else{const u=r[n++],h=r[n++];t[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return t.join("")},pT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],h=o+1<r.length,m=h?r[o+1]:0,g=o+2<r.length,p=g?r[o+2]:0,E=u>>2,T=(u&3)<<4|m>>4;let S=(m&15)<<2|p>>6,D=p&63;g||(D=64,h||(S=64)),s.push(n[E],n[T],n[S],n[D])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(gT(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):yw(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const p=o<r.length?n[r.charAt(o)]:64;++o;const T=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||p==null||T==null)throw new _w;const S=u<<2|m>>4;if(s.push(S),p!==64){const D=m<<4&240|p>>2;if(s.push(D),T!==64){const U=p<<6&192|T;s.push(U)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class _w extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vw=function(r){const t=gT(r);return pT.encodeByteArray(t,!0)},zh=function(r){return vw(r).replace(/\./g,"")},yT=function(r){try{return pT.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ew(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Tw=()=>Ew().__FIREBASE_DEFAULTS__,bw=()=>{if(typeof process>"u"||typeof v0>"u")return;const r=v0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Sw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&yT(r[1]);return t&&JSON.parse(t)},hf=()=>{try{return pw()||Tw()||bw()||Sw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},_T=r=>hf()?.emulatorHosts?.[r],Aw=r=>{const t=_T(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},vT=()=>hf()?.config,ET=r=>hf()?.[`_${r}`];class ww{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}function nl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function TT(r){return(await fetch(r,{credentials:"include"})).ok}function Rw(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[zh(JSON.stringify(n)),zh(JSON.stringify(h)),""].join(".")}const mu={};function Cw(){const r={prod:[],emulator:[]};for(const t of Object.keys(mu))mu[t]?r.emulator.push(t):r.prod.push(t);return r}function Iw(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let E0=!1;function bT(r,t){if(typeof window>"u"||typeof document>"u"||!nl(window.location.host)||mu[r]===t||mu[r]||E0)return;mu[r]=t;function n(S){return`__firebase__banner__${S}`}const s="__firebase__banner",u=Cw().prod.length>0;function h(){const S=document.getElementById(s);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,D){S.setAttribute("width","24"),S.setAttribute("id",D),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{E0=!0,h()},S}function E(S,D){S.setAttribute("id",D),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=Iw(s),D=n("text"),U=document.getElementById(D)||document.createElement("span"),j=n("learnmore"),Y=document.getElementById(j)||document.createElement("a"),lt=n("preprendIcon"),ht=document.getElementById(lt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const at=S.element;m(at),E(Y,j);const Dt=p();g(ht,lt),at.append(ht,U,Y,Dt),document.body.appendChild(at)}u?(U.innerText="Preview backend disconnected.",ht.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ht.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Dw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zn())}function Nw(){const r=hf()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ow(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Mw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Vw(){const r=zn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function kw(){return!Nw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pw(){try{return typeof indexedDB=="object"}catch{return!1}}function Lw(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(n){t(n)}})}const Uw="FirebaseError";class ts extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=Uw,Object.setPrototypeOf(this,ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pu.prototype.create)}}class Pu{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},o=`${this.service}/${t}`,u=this.errors[t],h=u?zw(u,s):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new ts(o,m,s)}}function zw(r,t){return r.replace(jw,(n,s)=>{const o=t[s];return o!=null?String(o):`<${s}?>`})}const jw=/\{\$([^}]+)}/g;function Bw(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function qa(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const o of n){if(!s.includes(o))return!1;const u=r[o],h=t[o];if(T0(u)&&T0(h)){if(!qa(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function T0(r){return r!==null&&typeof r=="object"}function Lu(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function qw(r,t){const n=new Hw(r,t);return n.subscribe.bind(n)}class Hw{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let o;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Fw(t,["next","error","complete"])?o=t:o={next:t,error:n,complete:s},o.next===void 0&&(o.next=km),o.error===void 0&&(o.error=km),o.complete===void 0&&(o.complete=km);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fw(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function km(){}function Tn(r){return r&&r._delegate?r._delegate:r}class Ha{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Ua="[DEFAULT]";class Gw{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new ww;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Qw(t))try{this.getOrInitializeService({instanceIdentifier:Ua})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(t=Ua){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ua){return this.instances.has(t)}getOptions(t=Ua){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&h.resolve(o)}return o}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(t),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&t(u,s),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Kw(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Ua){return this.component?this.component.multipleInstances?t:Ua:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Kw(r){return r===Ua?void 0:r}function Qw(r){return r.instantiationMode==="EAGER"}class $w{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Gw(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}var Yt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Yt||(Yt={}));const Yw={debug:Yt.DEBUG,verbose:Yt.VERBOSE,info:Yt.INFO,warn:Yt.WARN,error:Yt.ERROR,silent:Yt.SILENT},Xw=Yt.INFO,Zw={[Yt.DEBUG]:"log",[Yt.VERBOSE]:"log",[Yt.INFO]:"info",[Yt.WARN]:"warn",[Yt.ERROR]:"error"},Jw=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),o=Zw[t];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class qg{constructor(t){this.name=t,this._logLevel=Xw,this._logHandler=Jw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Yt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Yw[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Yt.DEBUG,...t),this._logHandler(this,Yt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Yt.VERBOSE,...t),this._logHandler(this,Yt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Yt.INFO,...t),this._logHandler(this,Yt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Yt.WARN,...t),this._logHandler(this,Yt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Yt.ERROR,...t),this._logHandler(this,Yt.ERROR,...t)}}const Ww=(r,t)=>t.some(n=>r instanceof n);let b0,S0;function tR(){return b0||(b0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eR(){return S0||(S0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ST=new WeakMap,ag=new WeakMap,AT=new WeakMap,Pm=new WeakMap,Hg=new WeakMap;function nR(r){const t=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",h)},u=()=>{n(Ks(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",h)});return t.then(n=>{n instanceof IDBCursor&&ST.set(n,r)}).catch(()=>{}),Hg.set(t,r),t}function iR(r){if(ag.has(r))return;const t=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",h),r.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",h),r.addEventListener("abort",h)});ag.set(r,t)}let og={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return ag.get(r);if(t==="objectStoreNames")return r.objectStoreNames||AT.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ks(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function rR(r){og=r(og)}function sR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(Lm(this),t,...n);return AT.set(s,t.sort?t.sort():[t]),Ks(s)}:eR().includes(r)?function(...t){return r.apply(Lm(this),t),Ks(ST.get(this))}:function(...t){return Ks(r.apply(Lm(this),t))}}function aR(r){return typeof r=="function"?sR(r):(r instanceof IDBTransaction&&iR(r),Ww(r,tR())?new Proxy(r,og):r)}function Ks(r){if(r instanceof IDBRequest)return nR(r);if(Pm.has(r))return Pm.get(r);const t=aR(r);return t!==r&&(Pm.set(r,t),Hg.set(t,r)),t}const Lm=r=>Hg.get(r);function oR(r,t,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(r,t),m=Ks(h);return s&&h.addEventListener("upgradeneeded",g=>{s(Ks(h.result),g.oldVersion,g.newVersion,Ks(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const lR=["get","getKey","getAll","getAllKeys","count"],uR=["put","add","delete","clear"],Um=new Map;function A0(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Um.get(t))return Um.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,o=uR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||lR.includes(n)))return;const u=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(m.shift())),(await Promise.all([p[n](...m),o&&g.done]))[0]};return Um.set(t,u),u}rR(r=>({...r,get:(t,n,s)=>A0(t,n)||r.get(t,n,s),has:(t,n)=>!!A0(t,n)||r.has(t,n)}));class cR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function hR(r){return r.getComponent()?.type==="VERSION"}const lg="@firebase/app",w0="0.14.6";const $r=new qg("@firebase/app"),fR="@firebase/app-compat",dR="@firebase/analytics-compat",mR="@firebase/analytics",gR="@firebase/app-check-compat",pR="@firebase/app-check",yR="@firebase/auth",_R="@firebase/auth-compat",vR="@firebase/database",ER="@firebase/data-connect",TR="@firebase/database-compat",bR="@firebase/functions",SR="@firebase/functions-compat",AR="@firebase/installations",wR="@firebase/installations-compat",RR="@firebase/messaging",CR="@firebase/messaging-compat",IR="@firebase/performance",DR="@firebase/performance-compat",NR="@firebase/remote-config",xR="@firebase/remote-config-compat",OR="@firebase/storage",MR="@firebase/storage-compat",VR="@firebase/firestore",kR="@firebase/ai",PR="@firebase/firestore-compat",LR="firebase",UR="12.6.0";const ug="[DEFAULT]",zR={[lg]:"fire-core",[fR]:"fire-core-compat",[mR]:"fire-analytics",[dR]:"fire-analytics-compat",[pR]:"fire-app-check",[gR]:"fire-app-check-compat",[yR]:"fire-auth",[_R]:"fire-auth-compat",[vR]:"fire-rtdb",[ER]:"fire-data-connect",[TR]:"fire-rtdb-compat",[bR]:"fire-fn",[SR]:"fire-fn-compat",[AR]:"fire-iid",[wR]:"fire-iid-compat",[RR]:"fire-fcm",[CR]:"fire-fcm-compat",[IR]:"fire-perf",[DR]:"fire-perf-compat",[NR]:"fire-rc",[xR]:"fire-rc-compat",[OR]:"fire-gcs",[MR]:"fire-gcs-compat",[VR]:"fire-fst",[PR]:"fire-fst-compat",[kR]:"fire-vertex","fire-js":"fire-js",[LR]:"fire-js-all"};const Au=new Map,jR=new Map,cg=new Map;function R0(r,t){try{r.container.addComponent(t)}catch(n){$r.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function Qo(r){const t=r.name;if(cg.has(t))return $r.debug(`There were multiple attempts to register component ${t}.`),!1;cg.set(t,r);for(const n of Au.values())R0(n,r);for(const n of jR.values())R0(n,r);return!0}function Fg(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function Ji(r){return r==null?!1:r.settings!==void 0}const BR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qs=new Pu("app","Firebase",BR);class qR{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ha("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Qs.create("app-deleted",{appName:this._name})}}const il=UR;function wT(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s={name:ug,automaticDataCollectionEnabled:!0,...t},o=s.name;if(typeof o!="string"||!o)throw Qs.create("bad-app-name",{appName:String(o)});if(n||(n=vT()),!n)throw Qs.create("no-options");const u=Au.get(o);if(u){if(qa(n,u.options)&&qa(s,u.config))return u;throw Qs.create("duplicate-app",{appName:o})}const h=new $w(o);for(const g of cg.values())h.addComponent(g);const m=new qR(n,s,h);return Au.set(o,m),m}function RT(r=ug){const t=Au.get(r);if(!t&&r===ug&&vT())return wT();if(!t)throw Qs.create("no-app",{appName:r});return t}function C0(){return Array.from(Au.values())}function $s(r,t,n){let s=zR[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const h=[`Unable to register library "${s}" with version "${t}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),$r.warn(h.join(" "));return}Qo(new Ha(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const HR="firebase-heartbeat-database",FR=1,wu="firebase-heartbeat-store";let zm=null;function CT(){return zm||(zm=oR(HR,FR,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(wu)}catch(n){console.warn(n)}}}}).catch(r=>{throw Qs.create("idb-open",{originalErrorMessage:r.message})})),zm}async function GR(r){try{const n=(await CT()).transaction(wu),s=await n.objectStore(wu).get(IT(r));return await n.done,s}catch(t){if(t instanceof ts)$r.warn(t.message);else{const n=Qs.create("idb-get",{originalErrorMessage:t?.message});$r.warn(n.message)}}}async function I0(r,t){try{const s=(await CT()).transaction(wu,"readwrite");await s.objectStore(wu).put(t,IT(r)),await s.done}catch(n){if(n instanceof ts)$r.warn(n.message);else{const s=Qs.create("idb-set",{originalErrorMessage:n?.message});$r.warn(s.message)}}}function IT(r){return`${r.name}!${r.options.appId}`}const KR=1024,QR=30;class $R{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new XR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=D0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>QR){const o=ZR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){$r.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=D0(),{heartbeatsToSend:n,unsentEntries:s}=YR(this._heartbeatsCache.heartbeats),o=zh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return $r.warn(t),""}}}function D0(){return new Date().toISOString().substring(0,10)}function YR(r,t=KR){const n=[];let s=r.slice();for(const o of r){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),N0(n)>t){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),N0(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class XR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Pw()?Lw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await GR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return I0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return I0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function N0(r){return zh(JSON.stringify({version:2,heartbeats:r})).length}function ZR(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}function JR(r){Qo(new Ha("platform-logger",t=>new cR(t),"PRIVATE")),Qo(new Ha("heartbeat",t=>new $R(t),"PRIVATE")),$s(lg,w0,r),$s(lg,w0,"esm2020"),$s("fire-js","")}JR("");var x0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ys,DT;(function(){var r;function t(R,w){function C(){}C.prototype=w.prototype,R.F=w.prototype,R.prototype=new C,R.prototype.constructor=R,R.D=function(O,x,k){for(var I=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)I[Gt-2]=arguments[Gt];return w.prototype[x].apply(O,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,w,C){C||(C=0);const O=Array(16);if(typeof w=="string")for(var x=0;x<16;++x)O[x]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(x=0;x<16;++x)O[x]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=R.g[0],C=R.g[1],x=R.g[2];let k=R.g[3],I;I=w+(k^C&(x^k))+O[0]+3614090360&4294967295,w=C+(I<<7&4294967295|I>>>25),I=k+(x^w&(C^x))+O[1]+3905402710&4294967295,k=w+(I<<12&4294967295|I>>>20),I=x+(C^k&(w^C))+O[2]+606105819&4294967295,x=k+(I<<17&4294967295|I>>>15),I=C+(w^x&(k^w))+O[3]+3250441966&4294967295,C=x+(I<<22&4294967295|I>>>10),I=w+(k^C&(x^k))+O[4]+4118548399&4294967295,w=C+(I<<7&4294967295|I>>>25),I=k+(x^w&(C^x))+O[5]+1200080426&4294967295,k=w+(I<<12&4294967295|I>>>20),I=x+(C^k&(w^C))+O[6]+2821735955&4294967295,x=k+(I<<17&4294967295|I>>>15),I=C+(w^x&(k^w))+O[7]+4249261313&4294967295,C=x+(I<<22&4294967295|I>>>10),I=w+(k^C&(x^k))+O[8]+1770035416&4294967295,w=C+(I<<7&4294967295|I>>>25),I=k+(x^w&(C^x))+O[9]+2336552879&4294967295,k=w+(I<<12&4294967295|I>>>20),I=x+(C^k&(w^C))+O[10]+4294925233&4294967295,x=k+(I<<17&4294967295|I>>>15),I=C+(w^x&(k^w))+O[11]+2304563134&4294967295,C=x+(I<<22&4294967295|I>>>10),I=w+(k^C&(x^k))+O[12]+1804603682&4294967295,w=C+(I<<7&4294967295|I>>>25),I=k+(x^w&(C^x))+O[13]+4254626195&4294967295,k=w+(I<<12&4294967295|I>>>20),I=x+(C^k&(w^C))+O[14]+2792965006&4294967295,x=k+(I<<17&4294967295|I>>>15),I=C+(w^x&(k^w))+O[15]+1236535329&4294967295,C=x+(I<<22&4294967295|I>>>10),I=w+(x^k&(C^x))+O[1]+4129170786&4294967295,w=C+(I<<5&4294967295|I>>>27),I=k+(C^x&(w^C))+O[6]+3225465664&4294967295,k=w+(I<<9&4294967295|I>>>23),I=x+(w^C&(k^w))+O[11]+643717713&4294967295,x=k+(I<<14&4294967295|I>>>18),I=C+(k^w&(x^k))+O[0]+3921069994&4294967295,C=x+(I<<20&4294967295|I>>>12),I=w+(x^k&(C^x))+O[5]+3593408605&4294967295,w=C+(I<<5&4294967295|I>>>27),I=k+(C^x&(w^C))+O[10]+38016083&4294967295,k=w+(I<<9&4294967295|I>>>23),I=x+(w^C&(k^w))+O[15]+3634488961&4294967295,x=k+(I<<14&4294967295|I>>>18),I=C+(k^w&(x^k))+O[4]+3889429448&4294967295,C=x+(I<<20&4294967295|I>>>12),I=w+(x^k&(C^x))+O[9]+568446438&4294967295,w=C+(I<<5&4294967295|I>>>27),I=k+(C^x&(w^C))+O[14]+3275163606&4294967295,k=w+(I<<9&4294967295|I>>>23),I=x+(w^C&(k^w))+O[3]+4107603335&4294967295,x=k+(I<<14&4294967295|I>>>18),I=C+(k^w&(x^k))+O[8]+1163531501&4294967295,C=x+(I<<20&4294967295|I>>>12),I=w+(x^k&(C^x))+O[13]+2850285829&4294967295,w=C+(I<<5&4294967295|I>>>27),I=k+(C^x&(w^C))+O[2]+4243563512&4294967295,k=w+(I<<9&4294967295|I>>>23),I=x+(w^C&(k^w))+O[7]+1735328473&4294967295,x=k+(I<<14&4294967295|I>>>18),I=C+(k^w&(x^k))+O[12]+2368359562&4294967295,C=x+(I<<20&4294967295|I>>>12),I=w+(C^x^k)+O[5]+4294588738&4294967295,w=C+(I<<4&4294967295|I>>>28),I=k+(w^C^x)+O[8]+2272392833&4294967295,k=w+(I<<11&4294967295|I>>>21),I=x+(k^w^C)+O[11]+1839030562&4294967295,x=k+(I<<16&4294967295|I>>>16),I=C+(x^k^w)+O[14]+4259657740&4294967295,C=x+(I<<23&4294967295|I>>>9),I=w+(C^x^k)+O[1]+2763975236&4294967295,w=C+(I<<4&4294967295|I>>>28),I=k+(w^C^x)+O[4]+1272893353&4294967295,k=w+(I<<11&4294967295|I>>>21),I=x+(k^w^C)+O[7]+4139469664&4294967295,x=k+(I<<16&4294967295|I>>>16),I=C+(x^k^w)+O[10]+3200236656&4294967295,C=x+(I<<23&4294967295|I>>>9),I=w+(C^x^k)+O[13]+681279174&4294967295,w=C+(I<<4&4294967295|I>>>28),I=k+(w^C^x)+O[0]+3936430074&4294967295,k=w+(I<<11&4294967295|I>>>21),I=x+(k^w^C)+O[3]+3572445317&4294967295,x=k+(I<<16&4294967295|I>>>16),I=C+(x^k^w)+O[6]+76029189&4294967295,C=x+(I<<23&4294967295|I>>>9),I=w+(C^x^k)+O[9]+3654602809&4294967295,w=C+(I<<4&4294967295|I>>>28),I=k+(w^C^x)+O[12]+3873151461&4294967295,k=w+(I<<11&4294967295|I>>>21),I=x+(k^w^C)+O[15]+530742520&4294967295,x=k+(I<<16&4294967295|I>>>16),I=C+(x^k^w)+O[2]+3299628645&4294967295,C=x+(I<<23&4294967295|I>>>9),I=w+(x^(C|~k))+O[0]+4096336452&4294967295,w=C+(I<<6&4294967295|I>>>26),I=k+(C^(w|~x))+O[7]+1126891415&4294967295,k=w+(I<<10&4294967295|I>>>22),I=x+(w^(k|~C))+O[14]+2878612391&4294967295,x=k+(I<<15&4294967295|I>>>17),I=C+(k^(x|~w))+O[5]+4237533241&4294967295,C=x+(I<<21&4294967295|I>>>11),I=w+(x^(C|~k))+O[12]+1700485571&4294967295,w=C+(I<<6&4294967295|I>>>26),I=k+(C^(w|~x))+O[3]+2399980690&4294967295,k=w+(I<<10&4294967295|I>>>22),I=x+(w^(k|~C))+O[10]+4293915773&4294967295,x=k+(I<<15&4294967295|I>>>17),I=C+(k^(x|~w))+O[1]+2240044497&4294967295,C=x+(I<<21&4294967295|I>>>11),I=w+(x^(C|~k))+O[8]+1873313359&4294967295,w=C+(I<<6&4294967295|I>>>26),I=k+(C^(w|~x))+O[15]+4264355552&4294967295,k=w+(I<<10&4294967295|I>>>22),I=x+(w^(k|~C))+O[6]+2734768916&4294967295,x=k+(I<<15&4294967295|I>>>17),I=C+(k^(x|~w))+O[13]+1309151649&4294967295,C=x+(I<<21&4294967295|I>>>11),I=w+(x^(C|~k))+O[4]+4149444226&4294967295,w=C+(I<<6&4294967295|I>>>26),I=k+(C^(w|~x))+O[11]+3174756917&4294967295,k=w+(I<<10&4294967295|I>>>22),I=x+(w^(k|~C))+O[2]+718787259&4294967295,x=k+(I<<15&4294967295|I>>>17),I=C+(k^(x|~w))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+w&4294967295,R.g[1]=R.g[1]+(x+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+x&4294967295,R.g[3]=R.g[3]+k&4294967295}s.prototype.v=function(R,w){w===void 0&&(w=R.length);const C=w-this.blockSize,O=this.C;let x=this.h,k=0;for(;k<w;){if(x==0)for(;k<=C;)o(this,R,k),k+=this.blockSize;if(typeof R=="string"){for(;k<w;)if(O[x++]=R.charCodeAt(k++),x==this.blockSize){o(this,O),x=0;break}}else for(;k<w;)if(O[x++]=R[k++],x==this.blockSize){o(this,O),x=0;break}}this.h=x,this.o+=w},s.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var w=1;w<R.length-8;++w)R[w]=0;w=this.o*8;for(var C=R.length-8;C<R.length;++C)R[C]=w&255,w/=256;for(this.v(R),R=Array(16),w=0,C=0;C<4;++C)for(let O=0;O<32;O+=8)R[w++]=this.g[C]>>>O&255;return R};function u(R,w){var C=m;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=w(R)}function h(R,w){this.h=w;const C=[];let O=!0;for(let x=R.length-1;x>=0;x--){const k=R[x]|0;O&&k==w||(C[x]=k,O=!1)}this.g=C}var m={};function g(R){return-128<=R&&R<128?u(R,function(w){return new h([w|0],w<0?-1:0)}):new h([R|0],R<0?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return T;if(R<0)return Y(p(-R));const w=[];let C=1;for(let O=0;R>=C;O++)w[O]=R/C|0,C*=4294967296;return new h(w,0)}function E(R,w){if(R.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R.charAt(0)=="-")return Y(E(R.substring(1),w));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=p(Math.pow(w,8));let O=T;for(let k=0;k<R.length;k+=8){var x=Math.min(8,R.length-k);const I=parseInt(R.substring(k,k+x),w);x<8?(x=p(Math.pow(w,x)),O=O.j(x).add(p(I))):(O=O.j(C),O=O.add(p(I)))}return O}var T=g(0),S=g(1),D=g(16777216);r=h.prototype,r.m=function(){if(j(this))return-Y(this).m();let R=0,w=1;for(let C=0;C<this.g.length;C++){const O=this.i(C);R+=(O>=0?O:4294967296+O)*w,w*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(U(this))return"0";if(j(this))return"-"+Y(this).toString(R);const w=p(Math.pow(R,6));var C=this;let O="";for(;;){const x=Dt(C,w).g;C=lt(C,x.j(w));let k=((C.g.length>0?C.g[0]:C.h)>>>0).toString(R);if(C=x,U(C))return k+O;for(;k.length<6;)k="0"+k;O=k+O}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function U(R){if(R.h!=0)return!1;for(let w=0;w<R.g.length;w++)if(R.g[w]!=0)return!1;return!0}function j(R){return R.h==-1}r.l=function(R){return R=lt(this,R),j(R)?-1:U(R)?0:1};function Y(R){const w=R.g.length,C=[];for(let O=0;O<w;O++)C[O]=~R.g[O];return new h(C,~R.h).add(S)}r.abs=function(){return j(this)?Y(this):this},r.add=function(R){const w=Math.max(this.g.length,R.g.length),C=[];let O=0;for(let x=0;x<=w;x++){let k=O+(this.i(x)&65535)+(R.i(x)&65535),I=(k>>>16)+(this.i(x)>>>16)+(R.i(x)>>>16);O=I>>>16,k&=65535,I&=65535,C[x]=I<<16|k}return new h(C,C[C.length-1]&-2147483648?-1:0)};function lt(R,w){return R.add(Y(w))}r.j=function(R){if(U(this)||U(R))return T;if(j(this))return j(R)?Y(this).j(Y(R)):Y(Y(this).j(R));if(j(R))return Y(this.j(Y(R)));if(this.l(D)<0&&R.l(D)<0)return p(this.m()*R.m());const w=this.g.length+R.g.length,C=[];for(var O=0;O<2*w;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(let x=0;x<R.g.length;x++){const k=this.i(O)>>>16,I=this.i(O)&65535,Gt=R.i(x)>>>16,we=R.i(x)&65535;C[2*O+2*x]+=I*we,ht(C,2*O+2*x),C[2*O+2*x+1]+=k*we,ht(C,2*O+2*x+1),C[2*O+2*x+1]+=I*Gt,ht(C,2*O+2*x+1),C[2*O+2*x+2]+=k*Gt,ht(C,2*O+2*x+2)}for(R=0;R<w;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=w;R<2*w;R++)C[R]=0;return new h(C,0)};function ht(R,w){for(;(R[w]&65535)!=R[w];)R[w+1]+=R[w]>>>16,R[w]&=65535,w++}function at(R,w){this.g=R,this.h=w}function Dt(R,w){if(U(w))throw Error("division by zero");if(U(R))return new at(T,T);if(j(R))return w=Dt(Y(R),w),new at(Y(w.g),Y(w.h));if(j(w))return w=Dt(R,Y(w)),new at(Y(w.g),w.h);if(R.g.length>30){if(j(R)||j(w))throw Error("slowDivide_ only works with positive integers.");for(var C=S,O=w;O.l(R)<=0;)C=wt(C),O=wt(O);var x=vt(C,1),k=vt(O,1);for(O=vt(O,2),C=vt(C,2);!U(O);){var I=k.add(O);I.l(R)<=0&&(x=x.add(C),k=I),O=vt(O,1),C=vt(C,1)}return w=lt(R,x.j(w)),new at(x,w)}for(x=T;R.l(w)>=0;){for(C=Math.max(1,Math.floor(R.m()/w.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),k=p(C),I=k.j(w);j(I)||I.l(R)>0;)C-=O,k=p(C),I=k.j(w);U(k)&&(k=S),x=x.add(k),R=lt(R,I)}return new at(x,R)}r.B=function(R){return Dt(this,R).h},r.and=function(R){const w=Math.max(this.g.length,R.g.length),C=[];for(let O=0;O<w;O++)C[O]=this.i(O)&R.i(O);return new h(C,this.h&R.h)},r.or=function(R){const w=Math.max(this.g.length,R.g.length),C=[];for(let O=0;O<w;O++)C[O]=this.i(O)|R.i(O);return new h(C,this.h|R.h)},r.xor=function(R){const w=Math.max(this.g.length,R.g.length),C=[];for(let O=0;O<w;O++)C[O]=this.i(O)^R.i(O);return new h(C,this.h^R.h)};function wt(R){const w=R.g.length+1,C=[];for(let O=0;O<w;O++)C[O]=R.i(O)<<1|R.i(O-1)>>>31;return new h(C,R.h)}function vt(R,w){const C=w>>5;w%=32;const O=R.g.length-C,x=[];for(let k=0;k<O;k++)x[k]=w>0?R.i(k+C)>>>w|R.i(k+C+1)<<32-w:R.i(k+C);return new h(x,R.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,DT=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=p,h.fromString=E,Ys=h}).apply(typeof x0<"u"?x0:typeof self<"u"?self:typeof window<"u"?window:{});var yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var NT,au,xT,wh,hg,OT,MT,VT;(function(){var r,t=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof yh=="object"&&yh];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)t:{var v=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var z=c[A];if(!(z in v))break t;v=v[z]}c=c[c.length-1],A=v[c],y=y(A),y!=A&&y!=null&&t(v,c,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(y){var v=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&v.push([A,y[A]]);return v}});var u=u||{},h=this||self;function m(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function g(c,y,v){return c.call.apply(c.bind,arguments)}function p(c,y,v){return p=g,p.apply(null,arguments)}function E(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function T(c,y){function v(){}v.prototype=y.prototype,c.Z=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(A,z,Q){for(var ct=Array(arguments.length-2),Ut=2;Ut<arguments.length;Ut++)ct[Ut-2]=arguments[Ut];return y.prototype[z].apply(A,ct)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function D(c){const y=c.length;if(y>0){const v=Array(y);for(let A=0;A<y;A++)v[A]=c[A];return v}return[]}function U(c,y){for(let A=1;A<arguments.length;A++){const z=arguments[A];var v=typeof z;if(v=v!="object"?v:z?Array.isArray(z)?"array":v:"null",v=="array"||v=="object"&&typeof z.length=="number"){v=c.length||0;const Q=z.length||0;c.length=v+Q;for(let ct=0;ct<Q;ct++)c[v+ct]=z[ct]}else c.push(z)}}class j{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function Y(c){h.setTimeout(()=>{throw c},0)}function lt(){var c=R;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class ht{constructor(){this.h=this.g=null}add(y,v){const A=at.get();A.set(y,v),this.h?this.h.next=A:this.g=A,this.h=A}}var at=new j(()=>new Dt,c=>c.reset());class Dt{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let wt,vt=!1,R=new ht,w=()=>{const c=Promise.resolve(void 0);wt=()=>{c.then(C)}};function C(){for(var c;c=lt();){try{c.h.call(c.g)}catch(v){Y(v)}var y=at;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}vt=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};h.addEventListener("test",v,y),h.removeEventListener("test",v,y)}catch{}return c})();function I(c){return/^[\s\xa0]*$/.test(c)}function Gt(c,y){x.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}T(Gt,x),Gt.prototype.init=function(c,y){const v=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Gt.Z.h.call(this)},Gt.prototype.h=function(){Gt.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var we="closure_listenable_"+(Math.random()*1e6|0),X=0;function ot(c,y,v,A,z){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!A,this.ha=z,this.key=++X,this.da=this.fa=!1}function Tt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Pt(c,y,v){for(const A in c)y.call(v,c[A],A,c)}function Kt(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function M(c){const y={};for(const v in c)y[v]=c[v];return y}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ut(c,y){let v,A;for(let z=1;z<arguments.length;z++){A=arguments[z];for(v in A)c[v]=A[v];for(let Q=0;Q<W.length;Q++)v=W[Q],Object.prototype.hasOwnProperty.call(A,v)&&(c[v]=A[v])}}function ft(c){this.src=c,this.g={},this.h=0}ft.prototype.add=function(c,y,v,A,z){const Q=c.toString();c=this.g[Q],c||(c=this.g[Q]=[],this.h++);const ct=St(c,y,A,z);return ct>-1?(y=c[ct],v||(y.fa=!1)):(y=new ot(y,this.src,Q,!!A,z),y.fa=v,c.push(y)),y};function Ct(c,y){const v=y.type;if(v in c.g){var A=c.g[v],z=Array.prototype.indexOf.call(A,y,void 0),Q;(Q=z>=0)&&Array.prototype.splice.call(A,z,1),Q&&(Tt(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function St(c,y,v,A){for(let z=0;z<c.length;++z){const Q=c[z];if(!Q.da&&Q.listener==y&&Q.capture==!!v&&Q.ha==A)return z}return-1}var Lt="closure_lm_"+(Math.random()*1e6|0),De={};function oe(c,y,v,A,z){if(Array.isArray(y)){for(let Q=0;Q<y.length;Q++)oe(c,y[Q],v,A,z);return null}return v=zi(v),c&&c[we]?c.J(y,v,m(A)?!!A.capture:!1,z):Be(c,y,v,!1,A,z)}function Be(c,y,v,A,z,Q){if(!y)throw Error("Invalid event type");const ct=m(z)?!!z.capture:!!z;let Ut=Mn(c);if(Ut||(c[Lt]=Ut=new ft(c)),v=Ut.add(y,v,A,ct,Q),v.proxy)return v;if(A=Ei(),v.proxy=A,A.src=c,A.listener=v,c.addEventListener)k||(z=ct),z===void 0&&(z=!1),c.addEventListener(y.toString(),A,z);else if(c.attachEvent)c.attachEvent(Ye(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ei(){function c(v){return y.call(c.src,c.listener,v)}const y=oi;return c}function On(c,y,v,A,z){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)On(c,y[Q],v,A,z);else A=m(A)?!!A.capture:!!A,v=zi(v),c&&c[we]?(c=c.i,Q=String(y).toString(),Q in c.g&&(y=c.g[Q],v=St(y,v,A,z),v>-1&&(Tt(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete c.g[Q],c.h--)))):c&&(c=Mn(c))&&(y=c.g[y.toString()],c=-1,y&&(c=St(y,v,A,z)),(v=c>-1?y[c]:null)&&Ui(v))}function Ui(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[we])Ct(y.i,c);else{var v=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(v,A,c.capture):y.detachEvent?y.detachEvent(Ye(v),A):y.addListener&&y.removeListener&&y.removeListener(A),(v=Mn(y))?(Ct(v,c),v.h==0&&(v.src=null,y[Lt]=null)):Tt(c)}}}function Ye(c){return c in De?De[c]:De[c]="on"+c}function oi(c,y){if(c.da)c=!0;else{y=new Gt(y,this);const v=c.listener,A=c.ha||c.src;c.fa&&Ui(c),c=v.call(A,y)}return c}function Mn(c){return c=c[Lt],c instanceof ft?c:null}var nr="__closure_events_fn_"+(Math.random()*1e9>>>0);function zi(c){return typeof c=="function"?c:(c[nr]||(c[nr]=function(y){return c.handleEvent(y)}),c[nr])}function Te(){O.call(this),this.i=new ft(this),this.M=this,this.G=null}T(Te,O),Te.prototype[we]=!0,Te.prototype.removeEventListener=function(c,y,v,A){On(this,c,y,v,A)};function le(c,y){var v,A=c.G;if(A)for(v=[];A;A=A.G)v.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new x(y,c);else if(y instanceof x)y.target=y.target||c;else{var z=y;y=new x(A,c),ut(y,z)}z=!0;let Q,ct;if(v)for(ct=v.length-1;ct>=0;ct--)Q=y.g=v[ct],z=jn(Q,A,!0,y)&&z;if(Q=y.g=c,z=jn(Q,A,!0,y)&&z,z=jn(Q,A,!1,y)&&z,v)for(ct=0;ct<v.length;ct++)Q=y.g=v[ct],z=jn(Q,A,!1,y)&&z}Te.prototype.N=function(){if(Te.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const v=c.g[y];for(let A=0;A<v.length;A++)Tt(v[A]);delete c.g[y],c.h--}}this.G=null},Te.prototype.J=function(c,y,v,A){return this.i.add(String(c),y,!1,v,A)},Te.prototype.K=function(c,y,v,A){return this.i.add(String(c),y,!0,v,A)};function jn(c,y,v,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let z=!0;for(let Q=0;Q<y.length;++Q){const ct=y[Q];if(ct&&!ct.da&&ct.capture==v){const Ut=ct.listener,Ge=ct.ha||ct.src;ct.fa&&Ct(c.i,ct),z=Ut.call(Ge,A)!==!1&&z}}return z&&!A.defaultPrevented}function ir(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(c,y||0)}function rr(c){c.g=ir(()=>{c.g=null,c.i&&(c.i=!1,rr(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Xe extends O{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:rr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ji(c){O.call(this),this.h=c,this.g={}}T(ji,O);var Sr=[];function Bn(c){Pt(c.g,function(y,v){this.g.hasOwnProperty(v)&&Ui(y)},c),c.g={}}ji.prototype.N=function(){ji.Z.N.call(this),Bn(this)},ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bn=h.JSON.stringify,Bi=h.JSON.parse,Ar=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function qn(){}function wr(){}var Hn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function qe(){x.call(this,"d")}T(qe,x);function mn(){x.call(this,"c")}T(mn,x);var be={},Rr=null;function qi(){return Rr=Rr||new Te}be.Ia="serverreachability";function es(c){x.call(this,be.Ia,c)}T(es,x);function Yn(c){const y=qi();le(y,new es(y))}be.STAT_EVENT="statevent";function Hi(c,y){x.call(this,be.STAT_EVENT,c),this.stat=y}T(Hi,x);function Bt(c){const y=qi();le(y,new Hi(y,c))}be.Ja="timingevent";function Se(c,y){x.call(this,be.Ja,c),this.size=y}T(Se,x);function Ae(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},y)}function Pe(){this.g=!0}Pe.prototype.ua=function(){this.g=!1};function gn(c,y,v,A,z,Q){c.info(function(){if(c.g)if(Q){var ct="",Ut=Q.split("&");for(let se=0;se<Ut.length;se++){var Ge=Ut[se].split("=");if(Ge.length>1){const xe=Ge[0];Ge=Ge[1];const Ii=xe.split("_");ct=Ii.length>=2&&Ii[1]=="type"?ct+(xe+"="+Ge+"&"):ct+(xe+"=redacted&")}}}else ct=null;else ct=Q;return"XMLHTTP REQ ("+A+") [attempt "+z+"]: "+y+`
`+v+`
`+ct})}function Ze(c,y,v,A,z,Q,ct){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+z+"]: "+y+`
`+v+`
`+Q+" "+ct})}function Me(c,y,v,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+he(c,v)+(A?" "+A:"")})}function G(c,y){c.info(function(){return"TIMEOUT: "+y})}Pe.prototype.info=function(){};function he(c,y){if(!c.g)return y;if(!y)return null;try{const Q=JSON.parse(y);if(Q){for(c=0;c<Q.length;c++)if(Array.isArray(Q[c])){var v=Q[c];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var z=A[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ct=1;ct<A.length;ct++)A[ct]=""}}}}return bn(Q)}catch{return y}}var fe={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},He={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},st;function ln(){}T(ln,qn),ln.prototype.g=function(){return new XMLHttpRequest},st=new ln;function te(c){return encodeURIComponent(String(c))}function Ne(c){var y=1;c=c.split(":");const v=[];for(;y>0&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function un(c,y,v,A){this.j=c,this.i=y,this.l=v,this.S=A||1,this.V=new ji(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new de}function de(){this.i=null,this.g="",this.h=!1}var Ve={},Fe={};function pt(c,y,v){c.M=1,c.A=wi(H(y)),c.u=v,c.R=!0,ns(c,null)}function ns(c,y){c.F=Date.now(),Ti(c),c.B=H(c.A);var v=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),Ja(v.i,"t",A),c.C=0,v=c.j.L,c.h=new de,c.g=cc(c.j,v?y:null,!c.u),c.P>0&&(c.O=new Xe(p(c.Y,c,c.g),c.P)),y=c.V,v=c.g,A=c.ba;var z="readystatechange";Array.isArray(z)||(z&&(Sr[0]=z.toString()),z=Sr);for(let Q=0;Q<z.length;Q++){const ct=oe(v,z[Q],A||y.handleEvent,!1,y.h||y);if(!ct)break;y.g[ct.key]=ct}y=c.J?M(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),Yn(),gn(c.i,c.v,c.B,c.l,c.S,c.u)}un.prototype.ba=function(c){c=c.target;const y=this.O;y&&Ki(c)==3?y.j():this.Y(c)},un.prototype.Y=function(c){try{if(c==this.g)t:{const Ut=Ki(this.g),Ge=this.g.ya(),se=this.g.ca();if(!(Ut<3)&&(Ut!=3||this.g&&(this.h.h||this.g.la()||Sn(this.g)))){this.K||Ut!=4||Ge==7||(Ge==8||se<=0?Yn(3):Yn(2)),bi(this);var y=this.g.ca();this.X=y;var v=Ya(this);if(this.o=y==200,Ze(this.i,this.v,this.B,this.l,this.S,Ut,y),this.o){if(this.U&&!this.L){e:{if(this.g){var A,z=this.g;if((A=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(A)){var Q=A;break e}}Q=null}if(c=Q)Me(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Si(this,c);else{this.o=!1,this.m=3,Bt(12),Vn(this),Fn(this);break t}}if(this.R){c=!0;let xe;for(;!this.K&&this.C<v.length;)if(xe=ca(this,v),xe==Fe){Ut==4&&(this.m=4,Bt(14),c=!1),Me(this.i,this.l,null,"[Incomplete Response]");break}else if(xe==Ve){this.m=4,Bt(15),Me(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else Me(this.i,this.l,xe,null),Si(this,xe);if(Xa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||v.length!=0||this.h.h||(this.m=1,Bt(16),c=!1),this.o=this.o&&c,!c)Me(this.i,this.l,v,"[Invalid Chunked Response]"),Vn(this),Fn(this);else if(v.length>0&&!this.W){this.W=!0;var ct=this.j;ct.g==this&&ct.aa&&!ct.P&&(ct.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),El(ct),ct.P=!0,Bt(11))}}else Me(this.i,this.l,v,null),Si(this,v);Ut==4&&Vn(this),this.o&&!this.K&&(Ut==4?ac(this.j,this):(this.o=!1,Ti(this)))}else Ir(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,Bt(12)):(this.m=0,Bt(13)),Vn(this),Fn(this)}}}catch{}};function Ya(c){if(!Xa(c))return c.g.la();const y=Sn(c.g);if(y==="")return"";let v="";const A=y.length,z=Ki(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Vn(c),Fn(c),"";c.h.i=new h.TextDecoder}for(let Q=0;Q<A;Q++)c.h.h=!0,v+=c.h.i.decode(y[Q],{stream:!(z&&Q==A-1)});return y.length=0,c.h.g+=v,c.C=0,c.h.g}function Xa(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function ca(c,y){var v=c.C,A=y.indexOf(`
`,v);return A==-1?Fe:(v=Number(y.substring(v,A)),isNaN(v)?Ve:(A+=1,A+v>y.length?Fe:(y=y.slice(A,A+v),c.C=A+v,y)))}un.prototype.cancel=function(){this.K=!0,Vn(this)};function Ti(c){c.T=Date.now()+c.H,is(c,c.H)}function is(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Ae(p(c.aa,c),y)}function bi(c){c.D&&(h.clearTimeout(c.D),c.D=null)}un.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(G(this.i,this.B),this.M!=2&&(Yn(),Bt(17)),Vn(this),this.m=2,Fn(this)):is(this,this.T-c)};function Fn(c){c.j.I==0||c.K||ac(c.j,c)}function Vn(c){bi(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,Bn(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function Si(c,y){try{var v=c.j;if(v.I!=0&&(v.g==c||Ai(v.h,c))){if(!c.L&&Ai(v.h,c)&&v.I==3){try{var A=v.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var z=A;if(z[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)io(v),fs(v);else break t;Ea(v),Bt(18)}}else v.xa=z[1],0<v.xa-v.K&&z[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Ae(p(v.Va,v),6e3));Xn(v.h)<=1&&v.ta&&(v.ta=void 0)}else cr(v,11)}else if((c.L||v.g==c)&&io(v),!I(y))for(z=v.Ba.g.parse(y),y=0;y<z.length;y++){let se=z[y];const xe=se[0];if(!(xe<=v.K))if(v.K=xe,se=se[1],v.I==2)if(se[0]=="c"){v.M=se[1],v.ba=se[2];const Ii=se[3];Ii!=null&&(v.ka=Ii,v.j.info("VER="+v.ka));const hr=se[4];hr!=null&&(v.za=hr,v.j.info("SVER="+v.za));const Qi=se[5];Qi!=null&&typeof Qi=="number"&&Qi>0&&(A=1.5*Qi,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const $i=c.g;if($i){const Ta=$i.g?$i.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ta){var Q=A.h;Q.g||Ta.indexOf("spdy")==-1&&Ta.indexOf("quic")==-1&&Ta.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(fa(Q,Q.h),Q.h=null))}if(A.G){const ro=$i.g?$i.g.getResponseHeader("X-HTTP-Session-Id"):null;ro&&(A.wa=ro,qt(A.J,A.G,ro))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var ct=c;if(A.na=uc(A,A.L?A.ba:null,A.W),ct.L){ss(A.h,ct);var Ut=ct,Ge=A.O;Ge&&(Ut.H=Ge),Ut.D&&(bi(Ut),Ti(Ut)),A.g=ct}else rc(A);v.i.length>0&&ur(v)}else se[0]!="stop"&&se[0]!="close"||cr(v,7);else v.I==3&&(se[0]=="stop"||se[0]=="close"?se[0]=="stop"?cr(v,7):_l(v):se[0]!="noop"&&v.l&&v.l.qa(se),v.A=0)}}Yn(4)}catch{}}var Le=class{constructor(c,y){this.g=c,this.map=y}};function ha(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function rs(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Xn(c){return c.h?1:c.g?c.g.size:0}function Ai(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function fa(c,y){c.g?c.g.add(y):c.h=y}function ss(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}ha.prototype.cancel=function(){if(this.i=da(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function da(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.G);return y}return D(c.i)}var Je=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function L(c,y){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const A=c[v].indexOf("=");let z,Q=null;A>=0?(z=c[v].substring(0,A),Q=c[v].substring(A+1)):z=c[v],y(z,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function K(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof K?(this.l=c.l,mt(this,c.j),this.o=c.o,this.g=c.g,Et(this,c.u),this.h=c.h,Jt(this,nc(c.i)),this.m=c.m):c&&(y=String(c).match(Je))?(this.l=!1,mt(this,y[1]||"",!0),this.o=sr(y[2]||""),this.g=sr(y[3]||"",!0),Et(this,y[4]),this.h=sr(y[5]||"",!0),Jt(this,y[6]||"",!0),this.m=sr(y[7]||"")):(this.l=!1,this.i=new os(null,this.l))}K.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(ma(y,Za,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(ma(y,Za,!0),"@"),c.push(te(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(ma(v,v.charAt(0)=="/"?fl:Wu,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",ma(v,tc)),c.join("")},K.prototype.resolve=function(c){const y=H(this);let v=!!c.j;v?mt(y,c.j):v=!!c.o,v?y.o=c.o:v=!!c.g,v?y.g=c.g:v=c.u!=null;var A=c.h;if(v)Et(y,c.u);else if(v=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var z=y.h.lastIndexOf("/");z!=-1&&(A=y.h.slice(0,z+1)+A)}if(z=A,z==".."||z==".")A="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){A=z.lastIndexOf("/",0)==0,z=z.split("/");const Q=[];for(let ct=0;ct<z.length;){const Ut=z[ct++];Ut=="."?A&&ct==z.length&&Q.push(""):Ut==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),A&&ct==z.length&&Q.push("")):(Q.push(Ut),A=!0)}A=Q.join("/")}else A=z}return v?y.h=A:v=c.i.toString()!=="",v?Jt(y,nc(c.i)):v=!!c.m,v&&(y.m=c.m),y};function H(c){return new K(c)}function mt(c,y,v){c.j=v?sr(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Et(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Jt(c,y,v){y instanceof os?(c.i=y,Wa(c.i,c.l)):(v||(y=ma(y,as)),c.i=new os(y,c.l))}function qt(c,y,v){c.i.set(y,v)}function wi(c){return qt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function sr(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ma(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,Zn),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Zn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Za=/[#\/\?@]/g,Wu=/[#\?:]/g,fl=/[#\?]/g,as=/[#\?@]/g,tc=/#/g;function os(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Jn(c){c.g||(c.g=new Map,c.h=0,c.i&&L(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}r=os.prototype,r.add=function(c,y){Jn(this),this.i=null,c=ls(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function ec(c,y){Jn(c),y=ls(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function dl(c,y){return Jn(c),y=ls(c,y),c.g.has(y)}r.forEach=function(c,y){Jn(this),this.g.forEach(function(v,A){v.forEach(function(z){c.call(y,z,A,this)},this)},this)};function ml(c,y){Jn(c);let v=[];if(typeof y=="string")dl(c,y)&&(v=v.concat(c.g.get(ls(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)v=v.concat(c[y]);return v}r.set=function(c,y){return Jn(this),this.i=null,c=ls(this,c),dl(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=ml(this,c),c.length>0?String(c[0]):y):y};function Ja(c,y,v){ec(c,y),v.length>0&&(c.i=null,c.g.set(ls(c,y),D(v)),c.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var v=y[A];const z=te(v);v=ml(this,v);for(let Q=0;Q<v.length;Q++){let ct=z;v[Q]!==""&&(ct+="="+te(v[Q])),c.push(ct)}}return this.i=c.join("&")};function nc(c){const y=new os;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function ls(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Wa(c,y){y&&!c.j&&(Jn(c),c.i=null,c.g.forEach(function(v,A){const z=A.toLowerCase();A!=z&&(ec(this,A),Ja(this,z,v))},c)),c.j=y}function Fi(c,y){const v=new Pe;if(h.Image){const A=new Image;A.onload=E(Ri,v,"TestLoadImage: loaded",!0,y,A),A.onerror=E(Ri,v,"TestLoadImage: error",!1,y,A),A.onabort=E(Ri,v,"TestLoadImage: abort",!1,y,A),A.ontimeout=E(Ri,v,"TestLoadImage: timeout",!1,y,A),h.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function gl(c,y){const v=new Pe,A=new AbortController,z=setTimeout(()=>{A.abort(),Ri(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(Q=>{clearTimeout(z),Q.ok?Ri(v,"TestPingServer: ok",!0,y):Ri(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),Ri(v,"TestPingServer: error",!1,y)})}function Ri(c,y,v,A,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),A(v)}catch{}}function us(){this.g=new Ar}function ar(c){this.i=c.Sb||null,this.h=c.ab||!1}T(ar,qn),ar.prototype.g=function(){return new ga(this.i,this.h)};function ga(c,y){Te.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(ga,Te),r=ga.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,Gi(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,cs(this)),this.readyState=0},r.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Gi(this)),this.g&&(this.readyState=3,Gi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;to(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function to(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}r.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?cs(this):Gi(this),this.readyState==3&&to(this)}},r.Oa=function(c){this.g&&(this.response=this.responseText=c,cs(this))},r.Na=function(c){this.g&&(this.response=c,cs(this))},r.ga=function(){this.g&&cs(this)};function cs(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Gi(c)}r.setRequestHeader=function(c,y){this.A.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function Gi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ga.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ci(c){let y="";return Pt(c,function(v,A){y+=A,y+=":",y+=v,y+=`\r
`}),y}function pa(c,y,v){t:{for(A in v){var A=!1;break t}A=!0}A||(v=Ci(v),typeof c=="string"?v!=null&&te(v):qt(c,y,v))}function me(c){Te.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(me,Te);var or=/^https?$/i,pl=["POST","PUT"];r=me.prototype,r.Fa=function(c){this.H=c},r.ea=function(c,y,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():st.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Q){ya(this,Q);return}if(c=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var z in A)v.set(z,A[z]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Q of A.keys())v.set(Q,A.get(Q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(Q=>Q.toLowerCase()=="content-type"),z=h.FormData&&c instanceof h.FormData,!(Array.prototype.indexOf.call(pl,y,void 0)>=0)||A||z||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ct]of v)this.g.setRequestHeader(Q,ct);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(Q){ya(this,Q)}};function ya(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,yl(c),Cr(c)}function yl(c){c.A||(c.A=!0,le(c,"complete"),le(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,le(this,"complete"),le(this,"abort"),Cr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cr(this,!0)),me.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?_a(this):this.Xa())},r.Xa=function(){_a(this)};function _a(c){if(c.h&&typeof u<"u"){if(c.v&&Ki(c)==4)setTimeout(c.Ca.bind(c),0);else if(le(c,"readystatechange"),Ki(c)==4){c.h=!1;try{const Q=c.ca();t:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break t;default:y=!1}var v;if(!(v=y)){var A;if(A=Q===0){let ct=String(c.D).match(Je)[1]||null;!ct&&h.self&&h.self.location&&(ct=h.self.location.protocol.slice(0,-1)),A=!or.test(ct?ct.toLowerCase():"")}v=A}if(v)le(c,"complete"),le(c,"success");else{c.o=6;try{var z=Ki(c)>2?c.g.statusText:""}catch{z=""}c.l=z+" ["+c.ca()+"]",yl(c)}}finally{Cr(c)}}}}function Cr(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,y||le(c,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Ki(c){return c.g?c.g.readyState:0}r.ca=function(){try{return Ki(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Bi(y)}};function Sn(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ir(c){const y={};c=(c.g&&Ki(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(I(c[A]))continue;var v=Ne(c[A]);const z=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Q=y[z]||[];y[z]=Q,Q.push(v)}Kt(y,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function lr(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function hs(c){this.za=0,this.i=[],this.j=new Pe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=lr("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=lr("baseRetryDelayMs",5e3,c),this.Za=lr("retryDelaySeedMs",1e4,c),this.Ta=lr("forwardChannelMaxRetries",2,c),this.va=lr("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new ha(c&&c.concurrentRequestLimit),this.Ba=new us,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=hs.prototype,r.ka=8,r.I=1,r.connect=function(c,y,v,A){Bt(0),this.W=c,this.H=y||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=uc(this,null,this.W),ur(this)};function _l(c){if(eo(c),c.I==3){var y=c.V++,v=H(c.J);if(qt(v,"SID",c.M),qt(v,"RID",y),qt(v,"TYPE","terminate"),va(c,v),y=new un(c,c.j,y),y.M=2,y.A=wi(H(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&h.Image&&(new Image().src=y.A,v=!0),v||(y.g=cc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ti(y)}lc(c)}function fs(c){c.g&&(El(c),c.g.cancel(),c.g=null)}function eo(c){fs(c),c.v&&(h.clearTimeout(c.v),c.v=null),io(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&h.clearTimeout(c.m),c.m=null)}function ur(c){if(!rs(c.h)&&!c.m){c.m=!0;var y=c.Ea;wt||w(),vt||(wt(),vt=!0),R.add(y,c),c.D=0}}function no(c,y){return Xn(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Ae(p(c.Ea,c,y),oc(c,c.D)),c.D++,!0)}r.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const z=new un(this,this.j,c);let Q=this.o;if(this.U&&(Q?(Q=M(Q),ut(Q,this.U)):Q=this.U),this.u!==null||this.R||(z.J=Q,Q=null),this.S)t:{for(var y=0,v=0;v<this.i.length;v++){e:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=v;break t}if(y===4096||v===this.i.length-1){y=v+1;break t}}y=1e3}else y=1e3;y=ic(this,z,y),v=H(this.J),qt(v,"RID",c),qt(v,"CVER",22),this.G&&qt(v,"X-HTTP-Session-Id",this.G),va(this,v),Q&&(this.R?y="headers="+te(Ci(Q))+"&"+y:this.u&&pa(v,this.u,Q)),fa(this.h,z),this.Ra&&qt(v,"TYPE","init"),this.S?(qt(v,"$req",y),qt(v,"SID","null"),z.U=!0,pt(z,v,null)):pt(z,v,y),this.I=2}}else this.I==3&&(c?vl(this,c):this.i.length==0||rs(this.h)||vl(this))};function vl(c,y){var v;y?v=y.l:v=c.V++;const A=H(c.J);qt(A,"SID",c.M),qt(A,"RID",v),qt(A,"AID",c.K),va(c,A),c.u&&c.o&&pa(A,c.u,c.o),v=new un(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),y&&(c.i=y.G.concat(c.i)),y=ic(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),fa(c.h,v),pt(v,A,y)}function va(c,y){c.H&&Pt(c.H,function(v,A){qt(y,A,v)}),c.l&&Pt({},function(v,A){qt(y,A,v)})}function ic(c,y,v){v=Math.min(c.i.length,v);const A=c.l?p(c.l.Ka,c.l,c):null;t:{var z=c.i;let Ut=-1;for(;;){const Ge=["count="+v];Ut==-1?v>0?(Ut=z[0].g,Ge.push("ofs="+Ut)):Ut=0:Ge.push("ofs="+Ut);let se=!0;for(let xe=0;xe<v;xe++){var Q=z[xe].g;const Ii=z[xe].map;if(Q-=Ut,Q<0)Ut=Math.max(0,z[xe].g-100),se=!1;else try{Q="req"+Q+"_"||"";try{var ct=Ii instanceof Map?Ii:Object.entries(Ii);for(const[hr,Qi]of ct){let $i=Qi;m(Qi)&&($i=bn(Qi)),Ge.push(Q+hr+"="+encodeURIComponent($i))}}catch(hr){throw Ge.push(Q+"type="+encodeURIComponent("_badmap")),hr}}catch{A&&A(Ii)}}if(se){ct=Ge.join("&");break t}}ct=void 0}return c=c.i.splice(0,v),y.G=c,ct}function rc(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;wt||w(),vt||(wt(),vt=!0),R.add(y,c),c.A=0}}function Ea(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Ae(p(c.Da,c),oc(c,c.A)),c.A++,!0)}r.Da=function(){if(this.v=null,sc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Ae(p(this.Wa,this),c)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Bt(10),fs(this),sc(this))};function El(c){c.B!=null&&(h.clearTimeout(c.B),c.B=null)}function sc(c){c.g=new un(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=H(c.na);qt(y,"RID","rpc"),qt(y,"SID",c.M),qt(y,"AID",c.K),qt(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&qt(y,"TO",c.ia),qt(y,"TYPE","xmlhttp"),va(c,y),c.u&&c.o&&pa(y,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=wi(H(y)),v.u=null,v.R=!0,ns(v,c)}r.Va=function(){this.C!=null&&(this.C=null,fs(this),Ea(this),Bt(19))};function io(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function ac(c,y){var v=null;if(c.g==y){io(c),El(c),c.g=null;var A=2}else if(Ai(c.h,y))v=y.G,ss(c.h,y),A=1;else return;if(c.I!=0){if(y.o)if(A==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var z=c.D;A=qi(),le(A,new Se(A,v)),ur(c)}else rc(c);else if(z=y.m,z==3||z==0&&y.X>0||!(A==1&&no(c,y)||A==2&&Ea(c)))switch(v&&v.length>0&&(y=c.h,y.i=y.i.concat(v)),z){case 1:cr(c,5);break;case 4:cr(c,10);break;case 3:cr(c,6);break;default:cr(c,2)}}}function oc(c,y){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*y}function cr(c,y){if(c.j.info("Error code "+y),y==2){var v=p(c.bb,c),A=c.Ua;const z=!A;A=new K(A||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||mt(A,"https"),wi(A),z?Fi(A.toString(),v):gl(A.toString(),v)}else Bt(2);c.I=0,c.l&&c.l.pa(y),lc(c),eo(c)}r.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function lc(c){if(c.I=0,c.ja=[],c.l){const y=da(c.h);(y.length!=0||c.i.length!=0)&&(U(c.ja,y),U(c.ja,c.i),c.h.i.length=0,D(c.i),c.i.length=0),c.l.oa()}}function uc(c,y,v){var A=v instanceof K?H(v):new K(v);if(A.g!="")y&&(A.g=y+"."+A.g),Et(A,A.u);else{var z=h.location;A=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;const Q=new K(null);A&&mt(Q,A),y&&(Q.g=y),z&&Et(Q,z),v&&(Q.h=v),A=Q}return v=c.G,y=c.wa,v&&y&&qt(A,v,y),qt(A,"VER",c.ka),va(c,A),A}function cc(c,y,v){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new me(new ar({ab:v})):new me(c.ma),y.Fa(c.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function hc(){}r=hc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function ds(){}ds.prototype.g=function(c,y){return new Gn(c,y)};function Gn(c,y){Te.call(this),this.g=new hs(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!I(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Dr(this)}T(Gn,Te),Gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Gn.prototype.close=function(){_l(this.g)},Gn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=bn(c),c=v);y.i.push(new Le(y.Ya++,c)),y.I==3&&ur(y)},Gn.prototype.N=function(){this.g.l=null,delete this.j,_l(this.g),delete this.g,Gn.Z.N.call(this)};function fc(c){qe.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){t:{for(const v in y){c=v;break t}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}T(fc,qe);function dc(){mn.call(this),this.status=1}T(dc,mn);function Dr(c){this.g=c}T(Dr,hc),Dr.prototype.ra=function(){le(this.g,"a")},Dr.prototype.qa=function(c){le(this.g,new fc(c))},Dr.prototype.pa=function(c){le(this.g,new dc)},Dr.prototype.oa=function(){le(this.g,"b")},ds.prototype.createWebChannel=ds.prototype.g,Gn.prototype.send=Gn.prototype.o,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,VT=function(){return new ds},MT=function(){return qi()},OT=be,hg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},fe.NO_ERROR=0,fe.TIMEOUT=8,fe.HTTP_ERROR=6,wh=fe,He.COMPLETE="complete",xT=He,wr.EventType=Hn,Hn.OPEN="a",Hn.CLOSE="b",Hn.ERROR="c",Hn.MESSAGE="d",Te.prototype.listen=Te.prototype.J,au=wr,me.prototype.listenOnce=me.prototype.K,me.prototype.getLastError=me.prototype.Ha,me.prototype.getLastErrorCode=me.prototype.ya,me.prototype.getStatus=me.prototype.ca,me.prototype.getResponseJson=me.prototype.La,me.prototype.getResponseText=me.prototype.la,me.prototype.send=me.prototype.ea,me.prototype.setWithCredentials=me.prototype.Fa,NT=me}).apply(typeof yh<"u"?yh:typeof self<"u"?self:typeof window<"u"?window:{});const O0="@firebase/firestore",M0="4.9.3";class Un{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Un.UNAUTHENTICATED=new Un(null),Un.GOOGLE_CREDENTIALS=new Un("google-credentials-uid"),Un.FIRST_PARTY=new Un("first-party-uid"),Un.MOCK_USER=new Un("mock-user");let rl="12.7.0";const Fa=new qg("@firebase/firestore");function ko(){return Fa.logLevel}function gt(r,...t){if(Fa.logLevel<=Yt.DEBUG){const n=t.map(Gg);Fa.debug(`Firestore (${rl}): ${r}`,...n)}}function Yr(r,...t){if(Fa.logLevel<=Yt.ERROR){const n=t.map(Gg);Fa.error(`Firestore (${rl}): ${r}`,...n)}}function $o(r,...t){if(Fa.logLevel<=Yt.WARN){const n=t.map(Gg);Fa.warn(`Firestore (${rl}): ${r}`,...n)}}function Gg(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function Rt(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,kT(r,s,n)}function kT(r,t,n){let s=`FIRESTORE (${rl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Yr(s),new Error(s)}function ne(r,t,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||kT(t,o,s)}function Vt(r,t){return r}const nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class dt extends ts{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xs{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}class PT{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class WR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Un.UNAUTHENTICATED)))}shutdown(){}}class tC{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class eC{constructor(t){this.t=t,this.currentUser=Un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ne(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let u=new Xs;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Xs,t.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=u;t.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{gt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(gt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Xs)}}),0),h()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(gt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ne(typeof s.accessToken=="string",31837,{l:s}),new PT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ne(t===null||typeof t=="string",2055,{h:t}),new Un(t)}}class nC{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class iC{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new nC(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class V0{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rC{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ji(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ne(this.o===void 0,3512);const s=u=>{u.error!=null&&gt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,gt("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>s(u)))};const o=u=>{gt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):gt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new V0(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(ne(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new V0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function sC(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}class Kg{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=sC(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=t.charAt(o[u]%62))}return s}}function Xt(r,t){return r<t?-1:r>t?1:0}function fg(r,t){const n=Math.min(r.length,t.length);for(let s=0;s<n;s++){const o=r.charAt(s),u=t.charAt(s);if(o!==u)return jm(o)===jm(u)?Xt(o,u):jm(o)?1:-1}return Xt(r.length,t.length)}const aC=55296,oC=57343;function jm(r){const t=r.charCodeAt(0);return t>=aC&&t<=oC}function Yo(r,t,n){return r.length===t.length&&r.every(((s,o)=>n(s,t[o])))}const k0="__name__";class pr{constructor(t,n,s){n===void 0?n=0:n>t.length&&Rt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&Rt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return pr.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof pr?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let o=0;o<s;o++){const u=pr.compareSegments(t.get(o),n.get(o));if(u!==0)return u}return Xt(t.length,n.length)}static compareSegments(t,n){const s=pr.isNumericId(t),o=pr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?pr.extractNumericId(t).compare(pr.extractNumericId(n)):fg(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ys.fromString(t.substring(4,t.length-2))}}class _e extends pr{construct(t,n,s){return new _e(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new dt(nt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new _e(n)}static emptyPath(){return new _e([])}}const lC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nn extends pr{construct(t,n,s){return new Nn(t,n,s)}static isValidIdentifier(t){return lC.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k0}static keyField(){return new Nn([k0])}static fromServerFormat(t){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new dt(nt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new dt(nt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new dt(nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(s+=m,o++):(u(),o++)}if(u(),h)throw new dt(nt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Nn(n)}static emptyPath(){return new Nn([])}}class bt{constructor(t){this.path=t}static fromPath(t){return new bt(_e.fromString(t))}static fromName(t){return new bt(_e.fromString(t).popFirst(5))}static empty(){return new bt(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&_e.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return _e.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new bt(new _e(t.slice()))}}function LT(r,t,n){if(!n)throw new dt(nt.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function uC(r,t,n,s){if(t===!0&&s===!0)throw new dt(nt.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function P0(r){if(!bt.isDocumentKey(r))throw new dt(nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function L0(r){if(bt.isDocumentKey(r))throw new dt(nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function UT(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function ff(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Rt(12329,{type:typeof r})}function Qr(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new dt(nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ff(r);throw new dt(nt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}function on(r,t){const n={typeString:r};return t&&(n.value=t),n}function Uu(r,t){if(!UT(r))throw new dt(nt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const o=t[s].typeString,u="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new dt(nt.INVALID_ARGUMENT,n);return!0}const U0=-62135596800,z0=1e6;class Ie{static now(){return Ie.fromMillis(Date.now())}static fromDate(t){return Ie.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*z0);return new Ie(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new dt(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new dt(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<U0)throw new dt(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new dt(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/z0}_compareTo(t){return this.seconds===t.seconds?Xt(this.nanoseconds,t.nanoseconds):Xt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ie._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Uu(t,Ie._jsonSchema))return new Ie(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-U0;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ie._jsonSchemaVersion="firestore/timestamp/1.0",Ie._jsonSchema={type:on("string",Ie._jsonSchemaVersion),seconds:on("number"),nanoseconds:on("number")};class Nt{static fromTimestamp(t){return new Nt(t)}static min(){return new Nt(new Ie(0,0))}static max(){return new Nt(new Ie(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ru=-1;function cC(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Nt.fromTimestamp(s===1e9?new Ie(n+1,0):new Ie(n,s));return new ta(o,bt.empty(),t)}function hC(r){return new ta(r.readTime,r.key,Ru)}class ta{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new ta(Nt.min(),bt.empty(),Ru)}static max(){return new ta(Nt.max(),bt.empty(),Ru)}}function fC(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=bt.comparator(r.documentKey,t.documentKey),n!==0?n:Xt(r.largestBatchId,t.largestBatchId))}const dC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function sl(r){if(r.code!==nt.FAILED_PRECONDITION||r.message!==dC)throw r;gt("LocalStore","Unexpectedly lost primary lease")}class rt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Rt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new rt(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof rt?n:rt.resolve(n)}catch(n){return rt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):rt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):rt.reject(n)}static resolve(t){return new rt(((n,s)=>{n(t)}))}static reject(t){return new rt(((n,s)=>{s(t)}))}static waitFor(t){return new rt(((n,s)=>{let o=0,u=0,h=!1;t.forEach((m=>{++o,m.next((()=>{++u,h&&u===o&&n()}),(g=>s(g)))})),h=!0,u===o&&n()}))}static or(t){let n=rt.resolve(!1);for(const s of t)n=n.next((o=>o?rt.resolve(o):s()));return n}static forEach(t,n){const s=[];return t.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(t,n){return new rt(((s,o)=>{const u=t.length,h=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;n(t[p]).next((E=>{h[p]=E,++m,m===u&&s(h)}),(E=>o(E)))}}))}static doWhile(t,n){return new rt(((s,o)=>{const u=()=>{t()===!0?n().next((()=>{u()}),o):s()};u()}))}}function gC(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function al(r){return r.name==="IndexedDbTransactionError"}class df{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}df.ce=-1;const Qg=-1;function zu(r){return r==null}function jh(r){return r===0&&1/r==-1/0}function pC(r){return typeof r=="number"&&Number.isInteger(r)&&!jh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const zT="";function yC(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=j0(t)),t=_C(r.get(n),t);return j0(t)}function _C(r,t){let n=t;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case zT:n+="";break;default:n+=u}}return n}function j0(r){return r+zT+""}function B0(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function la(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function jT(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}class ke{constructor(t,n){this.comparator=t,this.root=n||Dn.EMPTY}insert(t,n){return new ke(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(t){return new ke(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(t,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new _h(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new _h(this.root,t,this.comparator,!1)}getReverseIterator(){return new _h(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new _h(this.root,t,this.comparator,!0)}}class _h{constructor(t,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?s(t.key,n):1,n&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Dn{constructor(t,n,s,o,u){this.key=t,this.value=n,this.color=s??Dn.RED,this.left=o??Dn.EMPTY,this.right=u??Dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,o,u){return new Dn(t??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let o=this;const u=s(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(t,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Dn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(t,o.key)===0){if(o.right.isEmpty())return Dn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Rt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Rt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Rt(27949);return t+(this.isRed()?0:1)}}Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1;Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Rt(57766)}get value(){throw Rt(16141)}get color(){throw Rt(16727)}get left(){throw Rt(29726)}get right(){throw Rt(36894)}copy(t,n,s,o,u){return this}insert(t,n,s){return new Dn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dn{constructor(t){this.comparator=t,this.data=new ke(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,t[1])>=0)return;n(o.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new q0(this.data.getIterator())}getIteratorFrom(t){return new q0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof dn)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new dn(this.comparator);return n.data=t,n}}class q0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class _i{constructor(t){this.fields=t,t.sort(Nn.comparator)}static empty(){return new _i([])}unionWith(t){let n=new dn(Nn.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new _i(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Yo(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}class BT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class xn{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new BT("Invalid base64 string: "+u):u}})(t);return new xn(n)}static fromUint8Array(t){const n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(t);return new xn(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Xt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}xn.EMPTY_BYTE_STRING=new xn("");const vC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ea(r){if(ne(!!r,39018),typeof r=="string"){let t=0;const n=vC.exec(r);if(ne(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),t=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:$e(r.seconds),nanos:$e(r.nanos)}}function $e(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function na(r){return typeof r=="string"?xn.fromBase64String(r):xn.fromUint8Array(r)}const qT="server_timestamp",HT="__type__",FT="__previous_value__",GT="__local_write_time__";function $g(r){return(r?.mapValue?.fields||{})[HT]?.stringValue===qT}function mf(r){const t=r.mapValue.fields[FT];return $g(t)?mf(t):t}function Cu(r){const t=ea(r.mapValue.fields[GT].timestampValue);return new Ie(t.seconds,t.nanos)}class EC{constructor(t,n,s,o,u,h,m,g,p,E){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=E}}const Bh="(default)";class Iu{constructor(t,n){this.projectId=t,this.database=n||Bh}static empty(){return new Iu("","")}get isDefaultDatabase(){return this.database===Bh}isEqual(t){return t instanceof Iu&&t.projectId===this.projectId&&t.database===this.database}}const KT="__type__",TC="__max__",vh={mapValue:{}},QT="__vector__",qh="value";function ia(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?$g(r)?4:SC(r)?9007199254740991:bC(r)?10:11:Rt(28295,{value:r})}function br(r,t){if(r===t)return!0;const n=ia(r);if(n!==ia(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Cu(r).isEqual(Cu(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=ea(o.timestampValue),m=ea(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(o,u){return na(o.bytesValue).isEqual(na(u.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(o,u){return $e(o.geoPointValue.latitude)===$e(u.geoPointValue.latitude)&&$e(o.geoPointValue.longitude)===$e(u.geoPointValue.longitude)})(r,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return $e(o.integerValue)===$e(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=$e(o.doubleValue),m=$e(u.doubleValue);return h===m?jh(h)===jh(m):isNaN(h)&&isNaN(m)}return!1})(r,t);case 9:return Yo(r.arrayValue.values||[],t.arrayValue.values||[],br);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(B0(h)!==B0(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!br(h[g],m[g])))return!1;return!0})(r,t);default:return Rt(52216,{left:r})}}function Du(r,t){return(r.values||[]).find((n=>br(n,t)))!==void 0}function Xo(r,t){if(r===t)return 0;const n=ia(r),s=ia(t);if(n!==s)return Xt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xt(r.booleanValue,t.booleanValue);case 2:return(function(u,h){const m=$e(u.integerValue||u.doubleValue),g=$e(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(r,t);case 3:return H0(r.timestampValue,t.timestampValue);case 4:return H0(Cu(r),Cu(t));case 5:return fg(r.stringValue,t.stringValue);case 6:return(function(u,h){const m=na(u),g=na(h);return m.compareTo(g)})(r.bytesValue,t.bytesValue);case 7:return(function(u,h){const m=u.split("/"),g=h.split("/");for(let p=0;p<m.length&&p<g.length;p++){const E=Xt(m[p],g[p]);if(E!==0)return E}return Xt(m.length,g.length)})(r.referenceValue,t.referenceValue);case 8:return(function(u,h){const m=Xt($e(u.latitude),$e(h.latitude));return m!==0?m:Xt($e(u.longitude),$e(h.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return F0(r.arrayValue,t.arrayValue);case 10:return(function(u,h){const m=u.fields||{},g=h.fields||{},p=m[qh]?.arrayValue,E=g[qh]?.arrayValue,T=Xt(p?.values?.length||0,E?.values?.length||0);return T!==0?T:F0(p,E)})(r.mapValue,t.mapValue);case 11:return(function(u,h){if(u===vh.mapValue&&h===vh.mapValue)return 0;if(u===vh.mapValue)return 1;if(h===vh.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=h.fields||{},E=Object.keys(p);g.sort(),E.sort();for(let T=0;T<g.length&&T<E.length;++T){const S=fg(g[T],E[T]);if(S!==0)return S;const D=Xo(m[g[T]],p[E[T]]);if(D!==0)return D}return Xt(g.length,E.length)})(r.mapValue,t.mapValue);default:throw Rt(23264,{he:n})}}function H0(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Xt(r,t);const n=ea(r),s=ea(t),o=Xt(n.seconds,s.seconds);return o!==0?o:Xt(n.nanos,s.nanos)}function F0(r,t){const n=r.values||[],s=t.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Xo(n[o],s[o]);if(u)return u}return Xt(n.length,s.length)}function Zo(r){return dg(r)}function dg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=ea(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return na(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return bt.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=dg(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${dg(n.fields[h])}`;return o+"}"})(r.mapValue):Rt(61005,{value:r})}function Rh(r){switch(ia(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=mf(r);return t?16+Rh(t):16;case 5:return 2*r.stringValue.length;case 6:return na(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Rh(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return la(s.fields,((u,h)=>{o+=u.length+Rh(h)})),o})(r.mapValue);default:throw Rt(13486,{value:r})}}function G0(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function mg(r){return!!r&&"integerValue"in r}function Yg(r){return!!r&&"arrayValue"in r}function K0(r){return!!r&&"nullValue"in r}function Q0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Ch(r){return!!r&&"mapValue"in r}function bC(r){return(r?.mapValue?.fields||{})[KT]?.stringValue===QT}function gu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return la(r.mapValue.fields,((n,s)=>t.mapValue.fields[n]=gu(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=gu(r.arrayValue.values[n]);return t}return{...r}}function SC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===TC}class Qn{constructor(t){this.value=t}static empty(){return new Qn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Ch(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=gu(n)}setAll(t){let n=Nn.emptyPath(),s={},o=[];t.forEach(((h,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=m.popLast()}h?s[m.lastSegment()]=gu(h):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(t){const n=this.field(t.popLast());Ch(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return br(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let o=n.mapValue.fields[t.get(s)];Ch(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(t,n,s){la(n,((o,u)=>t[o]=u));for(const o of s)delete t[o]}clone(){return new Qn(gu(this.value))}}function $T(r){const t=[];return la(r.fields,((n,s)=>{const o=new Nn([n]);if(Ch(s)){const u=$T(s.mapValue).fields;if(u.length===0)t.push(o);else for(const h of u)t.push(o.child(h))}else t.push(o)})),new _i(t)}class En{constructor(t,n,s,o,u,h,m){this.key=t,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(t){return new En(t,0,Nt.min(),Nt.min(),Nt.min(),Qn.empty(),0)}static newFoundDocument(t,n,s,o){return new En(t,1,n,Nt.min(),s,o,0)}static newNoDocument(t,n){return new En(t,2,n,Nt.min(),Nt.min(),Qn.empty(),0)}static newUnknownDocument(t,n){return new En(t,3,n,Nt.min(),Nt.min(),Qn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof En&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new En(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hh{constructor(t,n){this.position=t,this.inclusive=n}}function $0(r,t,n){let s=0;for(let o=0;o<r.position.length;o++){const u=t[o],h=r.position[o];if(u.field.isKeyField()?s=bt.comparator(bt.fromName(h.referenceValue),n.key):s=Xo(h,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function Y0(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!br(r.position[n],t.position[n]))return!1;return!0}class Fh{constructor(t,n="asc"){this.field=t,this.dir=n}}function AC(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}class YT{}class an extends YT{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new RC(t,n,s):n==="array-contains"?new DC(t,s):n==="in"?new NC(t,s):n==="not-in"?new xC(t,s):n==="array-contains-any"?new OC(t,s):new an(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new CC(t,s):new IC(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Xo(n,this.value)):n!==null&&ia(this.value)===ia(n)&&this.matchesComparison(Xo(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Rt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tr extends YT{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new tr(t,n)}matches(t){return XT(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function XT(r){return r.op==="and"}function ZT(r){return wC(r)&&XT(r)}function wC(r){for(const t of r.filters)if(t instanceof tr)return!1;return!0}function gg(r){if(r instanceof an)return r.field.canonicalString()+r.op.toString()+Zo(r.value);if(ZT(r))return r.filters.map((t=>gg(t))).join(",");{const t=r.filters.map((n=>gg(n))).join(",");return`${r.op}(${t})`}}function JT(r,t){return r instanceof an?(function(s,o){return o instanceof an&&s.op===o.op&&s.field.isEqual(o.field)&&br(s.value,o.value)})(r,t):r instanceof tr?(function(s,o){return o instanceof tr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,h,m)=>u&&JT(h,o.filters[m])),!0):!1})(r,t):void Rt(19439)}function WT(r){return r instanceof an?(function(n){return`${n.field.canonicalString()} ${n.op} ${Zo(n.value)}`})(r):r instanceof tr?(function(n){return n.op.toString()+" {"+n.getFilters().map(WT).join(" ,")+"}"})(r):"Filter"}class RC extends an{constructor(t,n,s){super(t,n,s),this.key=bt.fromName(s.referenceValue)}matches(t){const n=bt.comparator(t.key,this.key);return this.matchesComparison(n)}}class CC extends an{constructor(t,n){super(t,"in",n),this.keys=tb("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class IC extends an{constructor(t,n){super(t,"not-in",n),this.keys=tb("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function tb(r,t){return(t.arrayValue?.values||[]).map((n=>bt.fromName(n.referenceValue)))}class DC extends an{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Yg(n)&&Du(n.arrayValue,this.value)}}class NC extends an{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Du(this.value.arrayValue,n)}}class xC extends an{constructor(t,n){super(t,"not-in",n)}matches(t){if(Du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Du(this.value.arrayValue,n)}}class OC extends an{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Yg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Du(this.value.arrayValue,s)))}}class MC{constructor(t,n=null,s=[],o=[],u=null,h=null,m=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.Te=null}}function X0(r,t=null,n=[],s=[],o=null,u=null,h=null){return new MC(r,t,n,s,o,u,h)}function Xg(r){const t=Vt(r);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>gg(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),zu(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>Zo(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>Zo(s))).join(",")),t.Te=n}return t.Te}function Zg(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!AC(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!JT(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!Y0(r.startAt,t.startAt)&&Y0(r.endAt,t.endAt)}function pg(r){return bt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class ju{constructor(t,n=null,s=[],o=[],u=null,h="F",m=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function VC(r,t,n,s,o,u,h,m){return new ju(r,t,n,s,o,u,h,m)}function Jg(r){return new ju(r)}function Z0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function eb(r){return r.collectionGroup!==null}function pu(r){const t=Vt(r);if(t.Ie===null){t.Ie=[];const n=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),n.add(u.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new dn(Nn.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(t).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Fh(u,s))})),n.has(Nn.keyField().canonicalString())||t.Ie.push(new Fh(Nn.keyField(),s))}return t.Ie}function yr(r){const t=Vt(r);return t.Ee||(t.Ee=kC(t,pu(r))),t.Ee}function kC(r,t){if(r.limitType==="F")return X0(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Fh(o.field,u)}));const n=r.endAt?new Hh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Hh(r.startAt.position,r.startAt.inclusive):null;return X0(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function yg(r,t){const n=r.filters.concat([t]);return new ju(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function _g(r,t,n){return new ju(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function gf(r,t){return Zg(yr(r),yr(t))&&r.limitType===t.limitType}function nb(r){return`${Xg(yr(r))}|lt:${r.limitType}`}function Po(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>WT(o))).join(", ")}]`),zu(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>Zo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>Zo(o))).join(",")),`Target(${s})`})(yr(r))}; limitType=${r.limitType})`}function pf(r,t){return t.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):bt.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,t)&&(function(s,o){for(const u of pu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,t)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,t)&&(function(s,o){return!(s.startAt&&!(function(h,m,g){const p=$0(h,m,g);return h.inclusive?p<=0:p<0})(s.startAt,pu(s),o)||s.endAt&&!(function(h,m,g){const p=$0(h,m,g);return h.inclusive?p>=0:p>0})(s.endAt,pu(s),o))})(r,t)}function PC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function ib(r){return(t,n)=>{let s=!1;for(const o of pu(r)){const u=LC(o,t,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function LC(r,t,n){const s=r.field.isKeyField()?bt.comparator(t.key,n.key):(function(u,h,m){const g=h.data.field(u),p=m.data.field(u);return g!==null&&p!==null?Xo(g,p):Rt(42886)})(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Rt(19790,{direction:r.dir})}}class Qa{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),o=this.inner[s];if(o===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,n]);o.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(t){la(this.inner,((n,s)=>{for(const[o,u]of s)t(o,u)}))}isEmpty(){return jT(this.inner)}size(){return this.innerSize}}const UC=new ke(bt.comparator);function Xr(){return UC}const rb=new ke(bt.comparator);function ou(...r){let t=rb;for(const n of r)t=t.insert(n.key,n);return t}function sb(r){let t=rb;return r.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function za(){return yu()}function ab(){return yu()}function yu(){return new Qa((r=>r.toString()),((r,t)=>r.isEqual(t)))}const zC=new ke(bt.comparator),jC=new dn(bt.comparator);function Zt(...r){let t=jC;for(const n of r)t=t.add(n);return t}const BC=new dn(Xt);function qC(){return BC}function Wg(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jh(t)?"-0":t}}function ob(r){return{integerValue:""+r}}function HC(r,t){return pC(t)?ob(t):Wg(r,t)}class yf{constructor(){this._=void 0}}function FC(r,t,n){return r instanceof Gh?(function(o,u){const h={fields:{[HT]:{stringValue:qT},[GT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&$g(u)&&(u=mf(u)),u&&(h.fields[FT]=u),{mapValue:h}})(n,t):r instanceof Nu?ub(r,t):r instanceof xu?cb(r,t):(function(o,u){const h=lb(o,u),m=J0(h)+J0(o.Ae);return mg(h)&&mg(o.Ae)?ob(m):Wg(o.serializer,m)})(r,t)}function GC(r,t,n){return r instanceof Nu?ub(r,t):r instanceof xu?cb(r,t):n}function lb(r,t){return r instanceof Kh?(function(s){return mg(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(t)?t:{integerValue:0}:null}class Gh extends yf{}class Nu extends yf{constructor(t){super(),this.elements=t}}function ub(r,t){const n=hb(t);for(const s of r.elements)n.some((o=>br(o,s)))||n.push(s);return{arrayValue:{values:n}}}class xu extends yf{constructor(t){super(),this.elements=t}}function cb(r,t){let n=hb(t);for(const s of r.elements)n=n.filter((o=>!br(o,s)));return{arrayValue:{values:n}}}class Kh extends yf{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function J0(r){return $e(r.integerValue||r.doubleValue)}function hb(r){return Yg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function KC(r,t){return r.field.isEqual(t.field)&&(function(s,o){return s instanceof Nu&&o instanceof Nu||s instanceof xu&&o instanceof xu?Yo(s.elements,o.elements,br):s instanceof Kh&&o instanceof Kh?br(s.Ae,o.Ae):s instanceof Gh&&o instanceof Gh})(r.transform,t.transform)}class QC{constructor(t,n){this.version=t,this.transformResults=n}}class $n{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new $n}static exists(t){return new $n(void 0,t)}static updateTime(t){return new $n(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ih(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class _f{}function fb(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new tp(r.key,$n.none()):new Bu(r.key,r.data,$n.none());{const n=r.data,s=Qn.empty();let o=new dn(Nn.comparator);for(let u of t.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new ua(r.key,s,new _i(o.toArray()),$n.none())}}function $C(r,t,n){r instanceof Bu?(function(o,u,h){const m=o.value.clone(),g=tE(o.fieldTransforms,u,h.transformResults);m.setAll(g),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,t,n):r instanceof ua?(function(o,u,h){if(!Ih(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=tE(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(db(o)),g.setAll(m),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,t,n):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,t,n)}function _u(r,t,n,s){return r instanceof Bu?(function(u,h,m,g){if(!Ih(u.precondition,h))return m;const p=u.value.clone(),E=eE(u.fieldTransforms,g,h);return p.setAll(E),h.convertToFoundDocument(h.version,p).setHasLocalMutations(),null})(r,t,n,s):r instanceof ua?(function(u,h,m,g){if(!Ih(u.precondition,h))return m;const p=eE(u.fieldTransforms,g,h),E=h.data;return E.setAll(db(u)),E.setAll(p),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(r,t,n,s):(function(u,h,m){return Ih(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(r,t,n)}function YC(r,t){let n=null;for(const s of r.fieldTransforms){const o=t.data.field(s.field),u=lb(s.transform,o||null);u!=null&&(n===null&&(n=Qn.empty()),n.set(s.field,u))}return n||null}function W0(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Yo(s,o,((u,h)=>KC(u,h)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Bu extends _f{constructor(t,n,s,o=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ua extends _f{constructor(t,n,s,o,u=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function db(r){const t=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}})),t}function tE(r,t,n){const s=new Map;ne(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],h=u.transform,m=t.data.field(u.field);s.set(u.field,GC(h,m,n[o]))}return s}function eE(r,t,n){const s=new Map;for(const o of r){const u=o.transform,h=n.data.field(o.field);s.set(o.field,FC(u,h,t))}return s}class tp extends _f{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mb extends _f{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class XC{constructor(t,n,s,o){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&$C(u,t,s[o])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=_u(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=_u(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=ab();return this.mutations.forEach((o=>{const u=t.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=n.has(o.key)?null:m;const g=fb(h,m);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Nt.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Zt())}isEqual(t){return this.batchId===t.batchId&&Yo(this.mutations,t.mutations,((n,s)=>W0(n,s)))&&Yo(this.baseMutations,t.baseMutations,((n,s)=>W0(n,s)))}}class ep{constructor(t,n,s,o){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(t,n,s){ne(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let o=(function(){return zC})();const u=t.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new ep(t,n,s,o)}}class ZC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class JC{constructor(t,n){this.count=t,this.unchangedNames=n}}var sn,ee;function gb(r){switch(r){case nt.OK:return Rt(64938);case nt.CANCELLED:case nt.UNKNOWN:case nt.DEADLINE_EXCEEDED:case nt.RESOURCE_EXHAUSTED:case nt.INTERNAL:case nt.UNAVAILABLE:case nt.UNAUTHENTICATED:return!1;case nt.INVALID_ARGUMENT:case nt.NOT_FOUND:case nt.ALREADY_EXISTS:case nt.PERMISSION_DENIED:case nt.FAILED_PRECONDITION:case nt.ABORTED:case nt.OUT_OF_RANGE:case nt.UNIMPLEMENTED:case nt.DATA_LOSS:return!0;default:return Rt(15467,{code:r})}}function pb(r){if(r===void 0)return Yr("GRPC error has no .code"),nt.UNKNOWN;switch(r){case sn.OK:return nt.OK;case sn.CANCELLED:return nt.CANCELLED;case sn.UNKNOWN:return nt.UNKNOWN;case sn.DEADLINE_EXCEEDED:return nt.DEADLINE_EXCEEDED;case sn.RESOURCE_EXHAUSTED:return nt.RESOURCE_EXHAUSTED;case sn.INTERNAL:return nt.INTERNAL;case sn.UNAVAILABLE:return nt.UNAVAILABLE;case sn.UNAUTHENTICATED:return nt.UNAUTHENTICATED;case sn.INVALID_ARGUMENT:return nt.INVALID_ARGUMENT;case sn.NOT_FOUND:return nt.NOT_FOUND;case sn.ALREADY_EXISTS:return nt.ALREADY_EXISTS;case sn.PERMISSION_DENIED:return nt.PERMISSION_DENIED;case sn.FAILED_PRECONDITION:return nt.FAILED_PRECONDITION;case sn.ABORTED:return nt.ABORTED;case sn.OUT_OF_RANGE:return nt.OUT_OF_RANGE;case sn.UNIMPLEMENTED:return nt.UNIMPLEMENTED;case sn.DATA_LOSS:return nt.DATA_LOSS;default:return Rt(39323,{code:r})}}(ee=sn||(sn={}))[ee.OK=0]="OK",ee[ee.CANCELLED=1]="CANCELLED",ee[ee.UNKNOWN=2]="UNKNOWN",ee[ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ee[ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ee[ee.NOT_FOUND=5]="NOT_FOUND",ee[ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",ee[ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",ee[ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",ee[ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ee[ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ee[ee.ABORTED=10]="ABORTED",ee[ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",ee[ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",ee[ee.INTERNAL=13]="INTERNAL",ee[ee.UNAVAILABLE=14]="UNAVAILABLE",ee[ee.DATA_LOSS=15]="DATA_LOSS";function WC(){return new TextEncoder}const t2=new Ys([4294967295,4294967295],0);function nE(r){const t=WC().encode(r),n=new DT;return n.update(t),new Uint8Array(n.digest())}function iE(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Ys([n,s],0),new Ys([o,u],0)]}class np{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new lu(`Invalid padding: ${n}`);if(s<0)throw new lu(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new lu(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new lu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Ys.fromNumber(this.ge)}ye(t,n,s){let o=t.add(n.multiply(Ys.fromNumber(s)));return o.compare(t2)===1&&(o=new Ys([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=nE(t),[s,o]=iE(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);if(!this.we(h))return!1}return!0}static create(t,n,s){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),h=new np(u,o,n);return s.forEach((m=>h.insert(m))),h}insert(t){if(this.ge===0)return;const n=nE(t),[s,o]=iE(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);this.Se(h)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vf{constructor(t,n,s,o,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const o=new Map;return o.set(t,qu.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new vf(Nt.min(),o,new ke(Xt),Xr(),Zt())}}class qu{constructor(t,n,s,o,u){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new qu(s,n,Zt(),Zt(),Zt())}}class Dh{constructor(t,n,s,o){this.be=t,this.removedTargetIds=n,this.key=s,this.De=o}}class yb{constructor(t,n){this.targetId=t,this.Ce=n}}class _b{constructor(t,n,s=xn.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=o}}class rE{constructor(){this.ve=0,this.Fe=sE(),this.Me=xn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Zt(),n=Zt(),s=Zt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Rt(38017,{changeType:u})}})),new qu(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=sE()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ne(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class e2{constructor(t){this.Ge=t,this.ze=new Map,this.je=Xr(),this.Je=Eh(),this.He=Eh(),this.Ye=new ke(Xt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:Rt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(t){const n=t.targetId,s=t.Ce.count,o=this.ot(n);if(o){const u=o.target;if(pg(u))if(s===0){const h=new bt(u.path);this.et(n,h,En.newNoDocument(h,Nt.min()))}else ne(s===1,20013,{expectedCount:s});else{const h=this._t(n);if(h!==s){const m=this.ut(t),g=m?this.ct(m,t,h):1;if(g!==0){this.it(n);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let h,m;try{h=na(s).toUint8Array()}catch(g){if(g instanceof BT)return $o("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new np(h,o,u)}catch(g){return $o(g instanceof lu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(t){const n=new Map;this.ze.forEach(((u,h)=>{const m=this.ot(h);if(m){if(u.current&&pg(m.target)){const g=new bt(m.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,En.newNoDocument(g,t))}u.Be&&(n.set(h,u.ke()),u.qe())}}));let s=Zt();this.He.forEach(((u,h)=>{let m=!0;h.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(t)));const o=new vf(t,n,this.Ye,this.je,s);return this.je=Xr(),this.Je=Eh(),this.He=Eh(),this.Ye=new ke(Xt),o}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new rE,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new dn(Xt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new dn(Xt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||gt("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new rE),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Eh(){return new ke(bt.comparator)}function sE(){return new ke(bt.comparator)}const n2={asc:"ASCENDING",desc:"DESCENDING"},i2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},r2={and:"AND",or:"OR"};class s2{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function vg(r,t){return r.useProto3Json||zu(t)?t:{value:t}}function Qh(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function vb(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function a2(r,t){return Qh(r,t.toTimestamp())}function vi(r){return ne(!!r,49232),Nt.fromTimestamp((function(n){const s=ea(n);return new Ie(s.seconds,s.nanos)})(r))}function ip(r,t){return Eg(r,t).canonicalString()}function Eg(r,t){const n=(function(o){return new _e(["projects",o.projectId,"databases",o.database])})(r).child("documents");return t===void 0?n:n.child(t)}function Eb(r){const t=_e.fromString(r);return ne(Rb(t),10190,{key:t.toString()}),t}function $h(r,t){return ip(r.databaseId,t.path)}function vu(r,t){const n=Eb(t);if(n.get(1)!==r.databaseId.projectId)throw new dt(nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new dt(nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new bt(bb(n))}function Tb(r,t){return ip(r.databaseId,t)}function o2(r){const t=Eb(r);return t.length===4?_e.emptyPath():bb(t)}function Tg(r){return new _e(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function bb(r){return ne(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function aE(r,t,n){return{name:$h(r,t),fields:n.value.mapValue.fields}}function l2(r,t){return"found"in t?(function(s,o){ne(!!o.found,43571),o.found.name,o.found.updateTime;const u=vu(s,o.found.name),h=vi(o.found.updateTime),m=o.found.createTime?vi(o.found.createTime):Nt.min(),g=new Qn({mapValue:{fields:o.found.fields}});return En.newFoundDocument(u,h,m,g)})(r,t):"missing"in t?(function(s,o){ne(!!o.missing,3894),ne(!!o.readTime,22933);const u=vu(s,o.missing),h=vi(o.readTime);return En.newNoDocument(u,h)})(r,t):Rt(7234,{result:t})}function u2(r,t){let n;if("targetChange"in t){t.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Rt(39313,{state:p})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(p,E){return p.useProto3Json?(ne(E===void 0||typeof E=="string",58123),xn.fromBase64String(E||"")):(ne(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),xn.fromUint8Array(E||new Uint8Array))})(r,t.targetChange.resumeToken),h=t.targetChange.cause,m=h&&(function(p){const E=p.code===void 0?nt.UNKNOWN:pb(p.code);return new dt(E,p.message||"")})(h);n=new _b(s,o,u,m||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const o=vu(r,s.document.name),u=vi(s.document.updateTime),h=s.document.createTime?vi(s.document.createTime):Nt.min(),m=new Qn({mapValue:{fields:s.document.fields}}),g=En.newFoundDocument(o,u,h,m),p=s.targetIds||[],E=s.removedTargetIds||[];n=new Dh(p,E,g.key,g)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const o=vu(r,s.document),u=s.readTime?vi(s.readTime):Nt.min(),h=En.newNoDocument(o,u),m=s.removedTargetIds||[];n=new Dh([],m,h.key,h)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const o=vu(r,s.document),u=s.removedTargetIds||[];n=new Dh([],u,o,null)}else{if(!("filter"in t))return Rt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new JC(o,u),m=s.targetId;n=new yb(m,h)}}return n}function Sb(r,t){let n;if(t instanceof Bu)n={update:aE(r,t.key,t.value)};else if(t instanceof tp)n={delete:$h(r,t.key)};else if(t instanceof ua)n={update:aE(r,t.key,t.data),updateMask:_2(t.fieldMask)};else{if(!(t instanceof mb))return Rt(16599,{Vt:t.type});n={verify:$h(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(u,h){const m=h.transform;if(m instanceof Gh)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Nu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof xu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Kh)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw Rt(20930,{transform:h.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:a2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Rt(27497)})(r,t.precondition)),n}function c2(r,t){return r&&r.length>0?(ne(t!==void 0,14353),r.map((n=>(function(o,u){let h=o.updateTime?vi(o.updateTime):vi(u);return h.isEqual(Nt.min())&&(h=vi(u)),new QC(h,o.transformResults||[])})(n,t)))):[]}function h2(r,t){return{documents:[Tb(r,t.path)]}}function f2(r,t){const n={structuredQuery:{}},s=t.path;let o;t.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Tb(r,o);const u=(function(p){if(p.length!==0)return wb(tr.create(p,"and"))})(t.filters);u&&(n.structuredQuery.where=u);const h=(function(p){if(p.length!==0)return p.map((E=>(function(S){return{field:Lo(S.field),direction:g2(S.dir)}})(E)))})(t.orderBy);h&&(n.structuredQuery.orderBy=h);const m=vg(r,t.limit);return m!==null&&(n.structuredQuery.limit=m),t.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(t.endAt)),{ft:n,parent:o}}function d2(r){let t=o2(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){ne(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:t=t.child(E.collectionId)}let u=[];n.where&&(u=(function(T){const S=Ab(T);return S instanceof tr&&ZT(S)?S.getFilters():[S]})(n.where));let h=[];n.orderBy&&(h=(function(T){return T.map((S=>(function(U){return new Fh(Uo(U.field),(function(Y){switch(Y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(S)))})(n.orderBy));let m=null;n.limit&&(m=(function(T){let S;return S=typeof T=="object"?T.value:T,zu(S)?null:S})(n.limit));let g=null;n.startAt&&(g=(function(T){const S=!!T.before,D=T.values||[];return new Hh(D,S)})(n.startAt));let p=null;return n.endAt&&(p=(function(T){const S=!T.before,D=T.values||[];return new Hh(D,S)})(n.endAt)),VC(t,o,h,u,m,"F",g,p)}function m2(r,t){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Rt(28987,{purpose:o})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Ab(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Uo(n.unaryFilter.field);return an.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Uo(n.unaryFilter.field);return an.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Uo(n.unaryFilter.field);return an.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Uo(n.unaryFilter.field);return an.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Rt(61313);default:return Rt(60726)}})(r):r.fieldFilter!==void 0?(function(n){return an.create(Uo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Rt(58110);default:return Rt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return tr.create(n.compositeFilter.filters.map((s=>Ab(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Rt(1026)}})(n.compositeFilter.op))})(r):Rt(30097,{filter:r})}function g2(r){return n2[r]}function p2(r){return i2[r]}function y2(r){return r2[r]}function Lo(r){return{fieldPath:r.canonicalString()}}function Uo(r){return Nn.fromServerFormat(r.fieldPath)}function wb(r){return r instanceof an?(function(n){if(n.op==="=="){if(Q0(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NAN"}};if(K0(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Q0(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NAN"}};if(K0(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lo(n.field),op:p2(n.op),value:n.value}}})(r):r instanceof tr?(function(n){const s=n.getFilters().map((o=>wb(o)));return s.length===1?s[0]:{compositeFilter:{op:y2(n.op),filters:s}}})(r):Rt(54877,{filter:r})}function _2(r){const t=[];return r.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function Rb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Gs{constructor(t,n,s,o,u=Nt.min(),h=Nt.min(),m=xn.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new Gs(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class v2{constructor(t){this.yt=t}}function E2(r){const t=d2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?_g(t,t.limit,"L"):t}class T2{constructor(){this.Cn=new b2}addToCollectionParentIndex(t,n){return this.Cn.add(n),rt.resolve()}getCollectionParents(t,n){return rt.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return rt.resolve()}deleteFieldIndex(t,n){return rt.resolve()}deleteAllFieldIndexes(t){return rt.resolve()}createTargetIndexes(t,n){return rt.resolve()}getDocumentsMatchingTarget(t,n){return rt.resolve(null)}getIndexType(t,n){return rt.resolve(0)}getFieldIndexes(t,n){return rt.resolve([])}getNextCollectionGroupToUpdate(t){return rt.resolve(null)}getMinOffset(t,n){return rt.resolve(ta.min())}getMinOffsetFromCollectionGroup(t,n){return rt.resolve(ta.min())}updateCollectionGroup(t,n,s){return rt.resolve()}updateIndexEntries(t,n){return rt.resolve()}}class b2{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),o=this.index[n]||new dn(_e.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(t){const n=t.lastSegment(),s=t.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(t){return(this.index[t]||new dn(_e.comparator)).toArray()}}const oE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Cb=41943040;class ri{static withCacheSize(t){return new ri(t,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}ri.DEFAULT_COLLECTION_PERCENTILE=10,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ri.DEFAULT=new ri(Cb,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ri.DISABLED=new ri(-1,0,0);class Jo{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Jo(0)}static cr(){return new Jo(-1)}}const lE="LruGarbageCollector",S2=1048576;function uE([r,t],[n,s]){const o=Xt(r,n);return o===0?Xt(t,s):o}class A2{constructor(t){this.Ir=t,this.buffer=new dn(uE),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();uE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class w2{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){gt(lE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){al(n)?gt(lE,"Ignoring IndexedDB error during garbage collection: ",n):await sl(n)}await this.Vr(3e5)}))}}class R2{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return rt.resolve(df.ce);const s=new A2(n);return this.mr.forEachTarget(t,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(gt("LruGarbageCollector","Garbage collection skipped; disabled"),rt.resolve(oE)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(gt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oE):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,o,u,h,m,g,p;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(gt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(t,o)))).next((T=>(s=T,m=Date.now(),this.removeTargets(t,s,n)))).next((T=>(u=T,g=Date.now(),this.removeOrphanedDocuments(t,s)))).next((T=>(p=Date.now(),ko()<=Yt.DEBUG&&gt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${T} documents in `+(p-g)+`ms
Total Duration: ${p-E}ms`),rt.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function C2(r,t){return new R2(r,t)}class I2{constructor(){this.changes=new Qa((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,En.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?rt.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class D2{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}class N2{constructor(t,n,s,o){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(t,n)))).next((o=>(s!==null&&_u(s.mutation,o,_i.empty(),Ie.now()),o)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,Zt()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=Zt()){const o=za();return this.populateOverlays(t,o,n).next((()=>this.computeViews(t,n,o,s).next((u=>{let h=ou();return u.forEach(((m,g)=>{h=h.insert(m,g.overlayedDocument)})),h}))))}getOverlayedDocuments(t,n){const s=za();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,Zt())))}populateOverlays(t,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((h,m)=>{n.set(h,m)}))}))}computeViews(t,n,s,o){let u=Xr();const h=yu(),m=(function(){return yu()})();return n.forEach(((g,p)=>{const E=s.get(p.key);o.has(p.key)&&(E===void 0||E.mutation instanceof ua)?u=u.insert(p.key,p):E!==void 0?(h.set(p.key,E.mutation.getFieldMask()),_u(E.mutation,p,E.mutation.getFieldMask(),Ie.now())):h.set(p.key,_i.empty())})),this.recalculateAndSaveOverlays(t,u).next((g=>(g.forEach(((p,E)=>h.set(p,E))),n.forEach(((p,E)=>m.set(p,new D2(E,h.get(p)??null)))),m)))}recalculateAndSaveOverlays(t,n){const s=yu();let o=new ke(((h,m)=>h-m)),u=Zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((h=>{for(const m of h)m.keys().forEach((g=>{const p=n.get(g);if(p===null)return;let E=s.get(g)||_i.empty();E=m.applyToLocalView(p,E),s.set(g,E);const T=(o.get(m.batchId)||Zt()).add(g);o=o.insert(m.batchId,T)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,E=g.value,T=ab();E.forEach((S=>{if(!u.has(S)){const D=fb(n.get(S),s.get(S));D!==null&&T.set(S,D),u=u.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(t,p,T))}return rt.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,o){return(function(h){return bt.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):eb(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,o):this.getDocumentsMatchingCollectionQuery(t,n,s,o)}getNextDocuments(t,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,o-u.size):rt.resolve(za());let m=Ru,g=u;return h.next((p=>rt.forEach(p,((E,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(E)?rt.resolve():this.remoteDocumentCache.getEntry(t,E).next((S=>{g=g.insert(E,S)}))))).next((()=>this.populateOverlays(t,p,u))).next((()=>this.computeViews(t,g,p,Zt()))).next((E=>({batchId:m,changes:sb(E)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new bt(n)).next((s=>{let o=ou();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,o){const u=n.collectionGroup;let h=ou();return this.indexManager.getCollectionParents(t,u).next((m=>rt.forEach(m,(g=>{const p=(function(T,S){return new ju(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,p,s,o).next((E=>{E.forEach(((T,S)=>{h=h.insert(T,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(t,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,u,o)))).next((h=>{u.forEach(((g,p)=>{const E=p.getKey();h.get(E)===null&&(h=h.insert(E,En.newInvalidDocument(E)))}));let m=ou();return h.forEach(((g,p)=>{const E=u.get(g);E!==void 0&&_u(E.mutation,p,_i.empty(),Ie.now()),pf(n,p)&&(m=m.insert(g,p))})),m}))}}class x2{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return rt.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:vi(o.createTime)}})(n)),rt.resolve()}getNamedQuery(t,n){return rt.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:E2(o.bundledQuery),readTime:vi(o.readTime)}})(n)),rt.resolve()}}class O2{constructor(){this.overlays=new ke(bt.comparator),this.qr=new Map}getOverlay(t,n){return rt.resolve(this.overlays.get(n))}getOverlays(t,n){const s=za();return rt.forEach(n,(o=>this.getOverlay(t,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((o,u)=>{this.St(t,n,u)})),rt.resolve()}removeOverlaysForBatchId(t,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),rt.resolve()}getOverlaysForCollection(t,n,s){const o=za(),u=n.length+1,h=new bt(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return rt.resolve(o)}getOverlaysForCollectionGroup(t,n,s,o){let u=new ke(((p,E)=>p-E));const h=this.overlays.getIterator();for(;h.hasNext();){const p=h.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>s){let E=u.get(p.largestBatchId);E===null&&(E=za(),u=u.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const m=za(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,E)=>m.set(p,E))),!(m.size()>=o)););return rt.resolve(m)}St(t,n,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new ZC(n,s));let u=this.qr.get(n);u===void 0&&(u=Zt(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}class M2{constructor(){this.sessionToken=xn.EMPTY_BYTE_STRING}getSessionToken(t){return rt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,rt.resolve()}}class rp{constructor(){this.Qr=new dn(_n.$r),this.Ur=new dn(_n.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new _n(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new _n(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new bt(new _e([])),s=new _n(n,t),o=new _n(n,t+1),u=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new bt(new _e([])),s=new _n(n,t),o=new _n(n,t+1);let u=Zt();return this.Ur.forEachInRange([s,o],(h=>{u=u.add(h.key)})),u}containsKey(t){const n=new _n(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class _n{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return bt.comparator(t.key,n.key)||Xt(t.Yr,n.Yr)}static Kr(t,n){return Xt(t.Yr,n.Yr)||bt.comparator(t.key,n.key)}}class V2{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new dn(_n.$r)}checkEmpty(t){return rt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new XC(u,n,s,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new _n(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return rt.resolve(h)}lookupMutationBatch(t,n){return rt.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return rt.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return rt.resolve(this.mutationQueue.length===0?Qg:this.tr-1)}getAllMutationBatches(t){return rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new _n(n,0),o=new _n(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(h=>{const m=this.Xr(h.Yr);u.push(m)})),rt.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new dn(Xt);return n.forEach((o=>{const u=new _n(o,0),h=new _n(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(m=>{s=s.add(m.Yr)}))})),rt.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,o=s.length+1;let u=s;bt.isDocumentKey(u)||(u=u.child(""));const h=new _n(new bt(u),0);let m=new dn(Xt);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),h),rt.resolve(this.ti(m))}ti(t){const n=[];return t.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(t,n){ne(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return rt.forEach(n.mutations,(o=>{const u=new _n(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new _n(n,0),o=this.Zr.firstAfterOrEqual(s);return rt.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,rt.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class k2{constructor(t){this.ri=t,this.docs=(function(){return new ke(bt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return rt.resolve(s?s.document.mutableCopy():En.newInvalidDocument(n))}getEntries(t,n){let s=Xr();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():En.newInvalidDocument(o))})),rt.resolve(s)}getDocumentsMatchingQuery(t,n,s,o){let u=Xr();const h=n.path,m=new bt(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:E}}=g.getNext();if(!h.isPrefixOf(p.path))break;p.path.length>h.length+1||fC(hC(E),s)<=0||(o.has(E.key)||pf(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return rt.resolve(u)}getAllFromCollectionGroup(t,n,s,o){Rt(9500)}ii(t,n){return rt.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new P2(this)}getSize(t){return rt.resolve(this.size)}}class P2 extends I2{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(s)})),rt.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}class L2{constructor(t){this.persistence=t,this.si=new Qa((n=>Xg(n)),Zg),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.oi=0,this._i=new rp,this.targetCount=0,this.ai=Jo.ur()}forEachTarget(t,n){return this.si.forEach(((s,o)=>n(o))),rt.resolve()}getLastRemoteSnapshotVersion(t){return rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return rt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),rt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),rt.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Jo(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,rt.resolve()}updateTargetData(t,n){return this.Pr(n),rt.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,rt.resolve()}removeTargets(t,n,s){let o=0;const u=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)})),rt.waitFor(u).next((()=>o))}getTargetCount(t){return rt.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return rt.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),rt.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((h=>{u.push(o.markPotentiallyOrphaned(t,h))})),rt.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),rt.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return rt.resolve(s)}containsKey(t,n){return rt.resolve(this._i.containsKey(n))}}class Ib{constructor(t,n){this.ui={},this.overlays={},this.ci=new df(0),this.li=!1,this.li=!0,this.hi=new M2,this.referenceDelegate=t(this),this.Pi=new L2(this),this.indexManager=new T2,this.remoteDocumentCache=(function(o){return new k2(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new v2(n),this.Ii=new x2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new O2,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new V2(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){gt("MemoryPersistence","Starting transaction:",t);const o=new U2(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,n){return rt.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class U2 extends mC{constructor(t){super(),this.currentSequenceNumber=t}}class sp{constructor(t){this.persistence=t,this.Ri=new rp,this.Vi=null}static mi(t){return new sp(t)}get fi(){if(this.Vi)return this.Vi;throw Rt(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),rt.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),rt.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),rt.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rt.forEach(this.fi,(s=>{const o=bt.fromPath(s);return this.gi(t,o).next((u=>{u||n.removeEntry(o,Nt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return rt.or([()=>rt.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Yh{constructor(t,n){this.persistence=t,this.pi=new Qa((s=>yC(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=C2(this,n)}static mi(t,n){return new Yh(t,n)}Ei(){}di(t){return rt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((o=>s+o))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return rt.forEach(this.pi,((s,o)=>this.br(t,s,o).next((u=>u?rt.resolve():n(o)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(h=>this.br(t,h,n).next((m=>{m||(s++,u.removeEntry(h,Nt.min()))})))).next((()=>u.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),rt.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),rt.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),rt.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),rt.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Rh(t.data.value)),n}br(t,n,s){return rt.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const o=this.pi.get(n);return rt.resolve(o!==void 0&&o>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class ap{constructor(t,n,s,o){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=o}static As(t,n){let s=Zt(),o=Zt();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new ap(t,n.fromCache,s,o)}}class z2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class j2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return kw()?8:gC(zn())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,o){const u={result:null};return this.ys(t,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(t,n,o,s).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new z2;return this.Ss(t,n,h).next((m=>{if(u.result=m,this.Vs)return this.bs(t,n,h,m.size)}))})).next((()=>u.result))}bs(t,n,s,o){return s.documentReadCount<this.fs?(ko()<=Yt.DEBUG&&gt("QueryEngine","SDK will not create cache indexes for query:",Po(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),rt.resolve()):(ko()<=Yt.DEBUG&&gt("QueryEngine","Query:",Po(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(ko()<=Yt.DEBUG&&gt("QueryEngine","The SDK decides to create cache indexes for query:",Po(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,yr(n))):rt.resolve())}ys(t,n){if(Z0(n))return rt.resolve(null);let s=yr(n);return this.indexManager.getIndexType(t,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=_g(n,null,"F"),s=yr(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((u=>{const h=Zt(...u);return this.ps.getDocuments(t,h).next((m=>this.indexManager.getMinOffset(t,s).next((g=>{const p=this.Ds(n,m);return this.Cs(n,p,h,g.readTime)?this.ys(t,_g(n,null,"F")):this.vs(t,p,n,g)}))))})))))}ws(t,n,s,o){return Z0(n)||o.isEqual(Nt.min())?rt.resolve(null):this.ps.getDocuments(t,s).next((u=>{const h=this.Ds(n,u);return this.Cs(n,h,s,o)?rt.resolve(null):(ko()<=Yt.DEBUG&&gt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Po(n)),this.vs(t,h,n,cC(o,Ru)).next((m=>m)))}))}Ds(t,n){let s=new dn(ib(t));return n.forEach(((o,u)=>{pf(t,u)&&(s=s.add(u))})),s}Cs(t,n,s,o){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const u=t.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,n,s){return ko()<=Yt.DEBUG&&gt("QueryEngine","Using full collection scan to execute query:",Po(n)),this.ps.getDocumentsMatchingQuery(t,n,ta.min(),s)}vs(t,n,s,o){return this.ps.getDocumentsMatchingQuery(t,s,o).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const op="LocalStore",B2=3e8;class q2{constructor(t,n,s,o){this.persistence=t,this.Fs=n,this.serializer=o,this.Ms=new ke(Xt),this.xs=new Qa((u=>Xg(u)),Zg),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new N2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function H2(r,t,n,s){return new q2(r,t,n,s)}async function Db(r,t){const n=Vt(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const h=[],m=[];let g=Zt();for(const p of o){h.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}for(const p of u){m.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}return n.localDocuments.getDocuments(s,g).next((p=>({Ls:p,removedBatchIds:h,addedBatchIds:m})))}))}))}function F2(r,t){const n=Vt(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=t.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,E){const T=p.batch,S=T.keys();let D=rt.resolve();return S.forEach((U=>{D=D.next((()=>E.getEntry(g,U))).next((j=>{const Y=p.docVersions.get(U);ne(Y!==null,48541),j.version.compareTo(Y)<0&&(T.applyToRemoteDocument(j,p),j.isValidDocument()&&(j.setReadTime(p.commitVersion),E.addEntry(j)))}))})),D.next((()=>m.mutationQueue.removeMutationBatch(g,T)))})(n,s,t,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=Zt();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(t)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function Nb(r){const t=Vt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function G2(r,t){const n=Vt(r),s=t.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];t.targetChanges.forEach(((E,T)=>{const S=o.get(T);if(!S)return;m.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,E.addedDocuments,T))));let D=S.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(T)!==null?D=D.withResumeToken(xn.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):E.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(E.resumeToken,s)),o=o.insert(T,D),(function(j,Y,lt){return j.resumeToken.approximateByteSize()===0||Y.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=B2?!0:lt.addedDocuments.size+lt.modifiedDocuments.size+lt.removedDocuments.size>0})(S,D,E)&&m.push(n.Pi.updateTargetData(u,D))}));let g=Xr(),p=Zt();if(t.documentUpdates.forEach((E=>{t.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(K2(u,h,t.documentUpdates).next((E=>{g=E.ks,p=E.qs}))),!s.isEqual(Nt.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(E)}return rt.waitFor(m).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(n.Ms=o,u)))}function K2(r,t,n){let s=Zt(),o=Zt();return n.forEach((u=>s=s.add(u))),t.getEntries(r,s).next((u=>{let h=Xr();return n.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Nt.min())?(t.removeEntry(m,g.readTime),h=h.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(g),h=h.insert(m,g)):gt(op,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function Q2(r,t){const n=Vt(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Qg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function $2(r,t){const n=Vt(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,t).next((u=>u?(o=u,rt.resolve(o)):n.Pi.allocateTargetId(s).next((h=>(o=new Gs(t,h,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function bg(r,t,n){const s=Vt(r),o=s.Ms.get(t),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!al(h))throw h;gt(op,`Failed to update sequence numbers for target ${t}: ${h}`)}s.Ms=s.Ms.remove(t),s.xs.delete(o.target)}function cE(r,t,n){const s=Vt(r);let o=Nt.min(),u=Zt();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,p,E){const T=Vt(g),S=T.xs.get(E);return S!==void 0?rt.resolve(T.Ms.get(S)):T.Pi.getTargetData(p,E)})(s,h,yr(t)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,m.targetId).next((g=>{u=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,t,n?o:Nt.min(),n?u:Zt()))).next((m=>(Y2(s,PC(t),m),{documents:m,Qs:u})))))}function Y2(r,t,n){let s=r.Os.get(t)||Nt.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Os.set(t,s)}class hE{constructor(){this.activeTargetIds=qC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class X2{constructor(){this.Mo=new hE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new hE,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Z2{Oo(t){}shutdown(){}}const fE="ConnectivityMonitor";class dE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){gt(fE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){gt(fE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Th=null;function Sg(){return Th===null?Th=(function(){return 268435456+Math.round(2147483648*Math.random())})():Th++,"0x"+Th.toString(16)}const Bm="RestConnection",J2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class W2{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Bh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(t,n,s,o,u){const h=Sg(),m=this.zo(t,n.toUriEncodedString());gt(Bm,`Sending RPC '${t}' ${h}:`,m,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(m),E=nl(p);return this.Jo(t,m,g,s,E).then((T=>(gt(Bm,`Received RPC '${t}' ${h}: `,T),T)),(T=>{throw $o(Bm,`RPC '${t}' ${h} failed with error: `,T,"url: ",m,"request:",s),T}))}Ho(t,n,s,o,u,h){return this.Go(t,n,s,o,u)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+rl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>t[u]=o)),s&&s.headers.forEach(((o,u)=>t[u]=o))}zo(t,n){const s=J2[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class tI{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const Pn="WebChannelConnection";class eI extends W2{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,o,u){const h=Sg();return new Promise(((m,g)=>{const p=new NT;p.setWithCredentials(!0),p.listenOnce(xT.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case wh.NO_ERROR:const T=p.getResponseJson();gt(Pn,`XHR for RPC '${t}' ${h} received:`,JSON.stringify(T)),m(T);break;case wh.TIMEOUT:gt(Pn,`RPC '${t}' ${h} timed out`),g(new dt(nt.DEADLINE_EXCEEDED,"Request time out"));break;case wh.HTTP_ERROR:const S=p.getStatus();if(gt(Pn,`RPC '${t}' ${h} failed with status:`,S,"response text:",p.getResponseText()),S>0){let D=p.getResponseJson();Array.isArray(D)&&(D=D[0]);const U=D?.error;if(U&&U.status&&U.message){const j=(function(lt){const ht=lt.toLowerCase().replace(/_/g,"-");return Object.values(nt).indexOf(ht)>=0?ht:nt.UNKNOWN})(U.status);g(new dt(j,U.message))}else g(new dt(nt.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new dt(nt.UNAVAILABLE,"Connection failed."));break;default:Rt(9055,{l_:t,streamId:h,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{gt(Pn,`RPC '${t}' ${h} completed.`)}}));const E=JSON.stringify(o);gt(Pn,`RPC '${t}' ${h} sending request:`,o),p.send(n,"POST",E,s,15)}))}T_(t,n,s){const o=Sg(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],h=VT(),m=MT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const E=u.join("");gt(Pn,`Creating RPC '${t}' stream ${o}: ${E}`,g);const T=h.createWebChannel(E,g);this.I_(T);let S=!1,D=!1;const U=new tI({Yo:Y=>{D?gt(Pn,`Not sending because RPC '${t}' stream ${o} is closed:`,Y):(S||(gt(Pn,`Opening RPC '${t}' stream ${o} transport.`),T.open(),S=!0),gt(Pn,`RPC '${t}' stream ${o} sending:`,Y),T.send(Y))},Zo:()=>T.close()}),j=(Y,lt,ht)=>{Y.listen(lt,(at=>{try{ht(at)}catch(Dt){setTimeout((()=>{throw Dt}),0)}}))};return j(T,au.EventType.OPEN,(()=>{D||(gt(Pn,`RPC '${t}' stream ${o} transport opened.`),U.o_())})),j(T,au.EventType.CLOSE,(()=>{D||(D=!0,gt(Pn,`RPC '${t}' stream ${o} transport closed`),U.a_(),this.E_(T))})),j(T,au.EventType.ERROR,(Y=>{D||(D=!0,$o(Pn,`RPC '${t}' stream ${o} transport errored. Name:`,Y.name,"Message:",Y.message),U.a_(new dt(nt.UNAVAILABLE,"The operation could not be completed")))})),j(T,au.EventType.MESSAGE,(Y=>{if(!D){const lt=Y.data[0];ne(!!lt,16349);const ht=lt,at=ht?.error||ht[0]?.error;if(at){gt(Pn,`RPC '${t}' stream ${o} received error:`,at);const Dt=at.status;let wt=(function(w){const C=sn[w];if(C!==void 0)return pb(C)})(Dt),vt=at.message;wt===void 0&&(wt=nt.INTERNAL,vt="Unknown error status: "+Dt+" with message "+at.message),D=!0,U.a_(new dt(wt,vt)),T.close()}else gt(Pn,`RPC '${t}' stream ${o} received:`,lt),U.u_(lt)}})),j(m,OT.STAT_EVENT,(Y=>{Y.stat===hg.PROXY?gt(Pn,`RPC '${t}' stream ${o} detected buffering proxy`):Y.stat===hg.NOPROXY&&gt(Pn,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function qm(){return typeof document<"u"?document:null}function Ef(r){return new s2(r,!0)}class lp{constructor(t,n,s=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&gt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const mE="PersistentStream";class xb{constructor(t,n,s,o,u,h,m,g){this.Mi=t,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lp(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===nt.RESOURCE_EXHAUSTED?(Yr(n.toString()),Yr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===nt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{t((()=>{const o=new dt(nt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return gt(mE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(gt(mE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nI extends xb{constructor(t,n,s,o,u,h){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=u2(this.serializer,t),s=(function(u){if(!("targetChange"in u))return Nt.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Nt.min():h.readTime?vi(h.readTime):Nt.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=Tg(this.serializer),n.addTarget=(function(u,h){let m;const g=h.target;if(m=pg(g)?{documents:h2(u,g)}:{query:f2(u,g).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=vb(u,h.resumeToken);const p=vg(u,h.expectedCount);p!==null&&(m.expectedCount=p)}else if(h.snapshotVersion.compareTo(Nt.min())>0){m.readTime=Qh(u,h.snapshotVersion.toTimestamp());const p=vg(u,h.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,t);const s=m2(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=Tg(this.serializer),n.removeTarget=t,this.q_(n)}}class iI extends xb{constructor(t,n,s,o,u,h){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return ne(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ne(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ne(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=c2(t.writeResults,t.commitTime),s=vi(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=Tg(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>Sb(this.serializer,s)))};this.q_(n)}}class rI{}class sI extends rI{constructor(t,n,s,o){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new dt(nt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(t,Eg(n,s),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new dt(nt.UNKNOWN,u.toString())}))}Ho(t,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(t,Eg(n,s),o,h,m,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new dt(nt.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class aI{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Yr(n),this.aa=!1):gt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ga="RemoteStore";class oI{constructor(t,n,s,o,u){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{$a(this)&&(gt(Ga,"Restarting streams for network reachability change."),await(async function(g){const p=Vt(g);p.Ea.add(4),await Hu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Tf(p)})(this))}))})),this.Ra=new aI(s,o)}}async function Tf(r){if($a(r))for(const t of r.da)await t(!0)}async function Hu(r){for(const t of r.da)await t(!1)}function Ob(r,t){const n=Vt(r);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),fp(n)?hp(n):ol(n).O_()&&cp(n,t))}function up(r,t){const n=Vt(r),s=ol(n);n.Ia.delete(t),s.O_()&&Mb(n,t),n.Ia.size===0&&(s.O_()?s.L_():$a(n)&&n.Ra.set("Unknown"))}function cp(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Nt.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ol(r).Y_(t)}function Mb(r,t){r.Va.Ue(t),ol(r).Z_(t)}function hp(r){r.Va=new e2({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),ol(r).start(),r.Ra.ua()}function fp(r){return $a(r)&&!ol(r).x_()&&r.Ia.size>0}function $a(r){return Vt(r).Ea.size===0}function Vb(r){r.Va=void 0}async function lI(r){r.Ra.set("Online")}async function uI(r){r.Ia.forEach(((t,n)=>{cp(r,t)}))}async function cI(r,t){Vb(r),fp(r)?(r.Ra.ha(t),hp(r)):r.Ra.set("Unknown")}async function hI(r,t,n){if(r.Ra.set("Online"),t instanceof _b&&t.state===2&&t.cause)try{await(async function(o,u){const h=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))})(r,t)}catch(s){gt(Ga,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Xh(r,s)}else if(t instanceof Dh?r.Va.Ze(t):t instanceof yb?r.Va.st(t):r.Va.tt(t),!n.isEqual(Nt.min()))try{const s=await Nb(r.localStore);n.compareTo(s)>=0&&await(function(u,h){const m=u.Va.Tt(h);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(p);E&&u.Ia.set(p,E.withResumeToken(g.resumeToken,h))}})),m.targetMismatches.forEach(((g,p)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(xn.EMPTY_BYTE_STRING,E.snapshotVersion)),Mb(u,g);const T=new Gs(E.target,g,p,E.sequenceNumber);cp(u,T)})),u.remoteSyncer.applyRemoteEvent(m)})(r,n)}catch(s){gt(Ga,"Failed to raise snapshot:",s),await Xh(r,s)}}async function Xh(r,t,n){if(!al(t))throw t;r.Ea.add(1),await Hu(r),r.Ra.set("Offline"),n||(n=()=>Nb(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{gt(Ga,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Tf(r)}))}function kb(r,t){return t().catch((n=>Xh(r,n,t)))}async function bf(r){const t=Vt(r),n=ra(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Qg;for(;fI(t);)try{const o=await Q2(t.localStore,s);if(o===null){t.Ta.length===0&&n.L_();break}s=o.batchId,dI(t,o)}catch(o){await Xh(t,o)}Pb(t)&&Lb(t)}function fI(r){return $a(r)&&r.Ta.length<10}function dI(r,t){r.Ta.push(t);const n=ra(r);n.O_()&&n.X_&&n.ea(t.mutations)}function Pb(r){return $a(r)&&!ra(r).x_()&&r.Ta.length>0}function Lb(r){ra(r).start()}async function mI(r){ra(r).ra()}async function gI(r){const t=ra(r);for(const n of r.Ta)t.ea(n.mutations)}async function pI(r,t,n){const s=r.Ta.shift(),o=ep.from(s,t,n);await kb(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await bf(r)}async function yI(r,t){t&&ra(r).X_&&await(async function(s,o){if((function(h){return gb(h)&&h!==nt.ABORTED})(o.code)){const u=s.Ta.shift();ra(s).B_(),await kb(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await bf(s)}})(r,t),Pb(r)&&Lb(r)}async function gE(r,t){const n=Vt(r);n.asyncQueue.verifyOperationInProgress(),gt(Ga,"RemoteStore received new credentials");const s=$a(n);n.Ea.add(3),await Hu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Tf(n)}async function _I(r,t){const n=Vt(r);t?(n.Ea.delete(2),await Tf(n)):t||(n.Ea.add(2),await Hu(n),n.Ra.set("Unknown"))}function ol(r){return r.ma||(r.ma=(function(n,s,o){const u=Vt(n);return u.sa(),new nI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:lI.bind(null,r),t_:uI.bind(null,r),r_:cI.bind(null,r),H_:hI.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),fp(r)?hp(r):r.Ra.set("Unknown")):(await r.ma.stop(),Vb(r))}))),r.ma}function ra(r){return r.fa||(r.fa=(function(n,s,o){const u=Vt(n);return u.sa(),new iI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:mI.bind(null,r),r_:yI.bind(null,r),ta:gI.bind(null,r),na:pI.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await bf(r)):(await r.fa.stop(),r.Ta.length>0&&(gt(Ga,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class dp{constructor(t,n,s,o,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,o,u){const h=Date.now()+s,m=new dp(t,n,h,o,u);return m.start(s),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new dt(nt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mp(r,t){if(Yr("AsyncQueue",`${t}: ${r}`),al(r))return new dt(nt.UNAVAILABLE,`${t}: ${r}`);throw r}class Bo{static emptySet(t){return new Bo(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||bt.comparator(n.key,s.key):(n,s)=>bt.comparator(n.key,s.key),this.keyedMap=ou(),this.sortedSet=new ke(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Bo)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new Bo;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}class pE{constructor(){this.ga=new ke(bt.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Rt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class Wo{constructor(t,n,s,o,u,h,m,g,p){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(t,n,s,o,u){const h=[];return n.forEach((m=>{h.push({type:0,doc:m})})),new Wo(t,n,Bo.emptySet(n),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&gf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class vI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class EI{constructor(){this.queries=yE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Vt(n),u=o.queries;o.queries=yE(),u.forEach(((h,m)=>{for(const g of m.Sa)g.onError(s)}))})(this,new dt(nt.ABORTED,"Firestore shutting down"))}}function yE(){return new Qa((r=>nb(r)),gf)}async function TI(r,t){const n=Vt(r);let s=3;const o=t.query;let u=n.queries.get(o);u?!u.ba()&&t.Da()&&(s=2):(u=new vI,s=t.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const m=mp(h,`Initialization of query '${Po(t.query)}' failed`);return void t.onError(m)}n.queries.set(o,u),u.Sa.push(t),t.va(n.onlineState),u.wa&&t.Fa(u.wa)&&gp(n)}async function bI(r,t){const n=Vt(r),s=t.query;let o=3;const u=n.queries.get(s);if(u){const h=u.Sa.indexOf(t);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function SI(r,t){const n=Vt(r);let s=!1;for(const o of t){const u=o.query,h=n.queries.get(u);if(h){for(const m of h.Sa)m.Fa(o)&&(s=!0);h.wa=o}}s&&gp(n)}function AI(r,t,n){const s=Vt(r),o=s.queries.get(t);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(t)}function gp(r){r.Ca.forEach((t=>{t.next()}))}var Ag,_E;(_E=Ag||(Ag={})).Ma="default",_E.Cache="cache";class wI{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const o of t.docChanges)o.type!==3&&s.push(o);t=new Wo(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Wo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Ag.Cache}}class Ub{constructor(t){this.key=t}}class zb{constructor(t){this.key=t}}class RI{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Zt(),this.mutatedKeys=Zt(),this.eu=ib(t),this.tu=new Bo(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new pE,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((E,T)=>{const S=o.get(E),D=pf(this.query,T)?T:null,U=!!S&&this.mutatedKeys.has(S.key),j=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let Y=!1;S&&D?S.data.isEqual(D.data)?U!==j&&(s.track({type:3,doc:D}),Y=!0):this.su(S,D)||(s.track({type:2,doc:D}),Y=!0,(g&&this.eu(D,g)>0||p&&this.eu(D,p)<0)&&(m=!0)):!S&&D?(s.track({type:0,doc:D}),Y=!0):S&&!D&&(s.track({type:1,doc:S}),Y=!0,(g||p)&&(m=!0)),Y&&(D?(h=h.add(D),u=j?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{tu:h,iu:s,Cs:m,mutatedKeys:u}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const h=t.iu.ya();h.sort(((E,T)=>(function(D,U){const j=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rt(20277,{Rt:Y})}};return j(D)-j(U)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,h.length!==0||p?{snapshot:new Wo(this.query,t.tu,u,h,t.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new pE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Zt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new zb(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new Ub(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=Zt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Wo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const pp="SyncEngine";class CI{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class II{constructor(t){this.key=t,this.hu=!1}}class DI{constructor(t,n,s,o,u,h){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Qa((m=>nb(m)),gf),this.Iu=new Map,this.Eu=new Set,this.du=new ke(bt.comparator),this.Au=new Map,this.Ru=new rp,this.Vu={},this.mu=new Map,this.fu=Jo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function NI(r,t,n=!0){const s=Gb(r);let o;const u=s.Tu.get(t);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await jb(s,t,n,!0),o}async function xI(r,t){const n=Gb(r);await jb(n,t,!0,!1)}async function jb(r,t,n,s){const o=await $2(r.localStore,yr(t)),u=o.targetId,h=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await OI(r,t,u,h==="current",o.resumeToken)),r.isPrimaryClient&&n&&Ob(r.remoteStore,o),m}async function OI(r,t,n,s,o){r.pu=(T,S,D)=>(async function(j,Y,lt,ht){let at=Y.view.ru(lt);at.Cs&&(at=await cE(j.localStore,Y.query,!1).then((({documents:R})=>Y.view.ru(R,at))));const Dt=ht&&ht.targetChanges.get(Y.targetId),wt=ht&&ht.targetMismatches.get(Y.targetId)!=null,vt=Y.view.applyChanges(at,j.isPrimaryClient,Dt,wt);return EE(j,Y.targetId,vt.au),vt.snapshot})(r,T,S,D);const u=await cE(r.localStore,t,!0),h=new RI(t,u.Qs),m=h.ru(u.documents),g=qu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),p=h.applyChanges(m,r.isPrimaryClient,g);EE(r,n,p.au);const E=new CI(t,n,h);return r.Tu.set(t,E),r.Iu.has(n)?r.Iu.get(n).push(t):r.Iu.set(n,[t]),p.snapshot}async function MI(r,t,n){const s=Vt(r),o=s.Tu.get(t),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((h=>!gf(h,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await bg(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&up(s.remoteStore,o.targetId),wg(s,o.targetId)})).catch(sl)):(wg(s,o.targetId),await bg(s.localStore,o.targetId,!0))}async function VI(r,t){const n=Vt(r),s=n.Tu.get(t),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),up(n.remoteStore,s.targetId))}async function kI(r,t,n){const s=qI(r);try{const o=await(function(h,m){const g=Vt(h),p=Ie.now(),E=m.reduce(((D,U)=>D.add(U.key)),Zt());let T,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(D=>{let U=Xr(),j=Zt();return g.Ns.getEntries(D,E).next((Y=>{U=Y,U.forEach(((lt,ht)=>{ht.isValidDocument()||(j=j.add(lt))}))})).next((()=>g.localDocuments.getOverlayedDocuments(D,U))).next((Y=>{T=Y;const lt=[];for(const ht of m){const at=YC(ht,T.get(ht.key).overlayedDocument);at!=null&&lt.push(new ua(ht.key,at,$T(at.value.mapValue),$n.exists(!0)))}return g.mutationQueue.addMutationBatch(D,p,lt,m)})).next((Y=>{S=Y;const lt=Y.applyToLocalDocumentSet(T,j);return g.documentOverlayCache.saveOverlays(D,Y.batchId,lt)}))})).then((()=>({batchId:S.batchId,changes:sb(T)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(o.batchId),(function(h,m,g){let p=h.Vu[h.currentUser.toKey()];p||(p=new ke(Xt)),p=p.insert(m,g),h.Vu[h.currentUser.toKey()]=p})(s,o.batchId,n),await Fu(s,o.changes),await bf(s.remoteStore)}catch(o){const u=mp(o,"Failed to persist write");n.reject(u)}}async function Bb(r,t){const n=Vt(r);try{const s=await G2(n.localStore,t);t.targetChanges.forEach(((o,u)=>{const h=n.Au.get(u);h&&(ne(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?ne(h.hu,14607):o.removedDocuments.size>0&&(ne(h.hu,42227),h.hu=!1))})),await Fu(n,s,t)}catch(s){await sl(s)}}function vE(r,t,n){const s=Vt(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,h)=>{const m=h.view.va(t);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const g=Vt(h);g.onlineState=m;let p=!1;g.queries.forEach(((E,T)=>{for(const S of T.Sa)S.va(m)&&(p=!0)})),p&&gp(g)})(s.eventManager,t),o.length&&s.Pu.H_(o),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function PI(r,t,n){const s=Vt(r);s.sharedClientState.updateQueryState(t,"rejected",n);const o=s.Au.get(t),u=o&&o.key;if(u){let h=new ke(bt.comparator);h=h.insert(u,En.newNoDocument(u,Nt.min()));const m=Zt().add(u),g=new vf(Nt.min(),new Map,new ke(Xt),h,m);await Bb(s,g),s.du=s.du.remove(u),s.Au.delete(t),yp(s)}else await bg(s.localStore,t,!1).then((()=>wg(s,t,n))).catch(sl)}async function LI(r,t){const n=Vt(r),s=t.batch.batchId;try{const o=await F2(n.localStore,t);Hb(n,s,null),qb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Fu(n,o)}catch(o){await sl(o)}}async function UI(r,t,n){const s=Vt(r);try{const o=await(function(h,m){const g=Vt(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let E;return g.mutationQueue.lookupMutationBatch(p,m).next((T=>(ne(T!==null,37113),E=T.keys(),g.mutationQueue.removeMutationBatch(p,T)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E))).next((()=>g.localDocuments.getDocuments(p,E)))}))})(s.localStore,t);Hb(s,t,n),qb(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Fu(s,o)}catch(o){await sl(o)}}function qb(r,t){(r.mu.get(t)||[]).forEach((n=>{n.resolve()})),r.mu.delete(t)}function Hb(r,t,n){const s=Vt(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(t);u&&(n?u.reject(n):u.resolve(),o=o.remove(t)),s.Vu[s.currentUser.toKey()]=o}}function wg(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((s=>{r.Ru.containsKey(s)||Fb(r,s)}))}function Fb(r,t){r.Eu.delete(t.path.canonicalString());const n=r.du.get(t);n!==null&&(up(r.remoteStore,n),r.du=r.du.remove(t),r.Au.delete(n),yp(r))}function EE(r,t,n){for(const s of n)s instanceof Ub?(r.Ru.addReference(s.key,t),zI(r,s)):s instanceof zb?(gt(pp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||Fb(r,s.key)):Rt(19791,{wu:s})}function zI(r,t){const n=t.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(gt(pp,"New document in limbo: "+n),r.Eu.add(s),yp(r))}function yp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const n=new bt(_e.fromString(t)),s=r.fu.next();r.Au.set(s,new II(n)),r.du=r.du.insert(n,s),Ob(r.remoteStore,new Gs(yr(Jg(n.path)),s,"TargetPurposeLimboResolution",df.ce))}}async function Fu(r,t,n){const s=Vt(r),o=[],u=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,g)=>{h.push(s.pu(g,t,n).then((p=>{if((p||n)&&s.isPrimaryClient){const E=p?!p.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(p){o.push(p);const E=ap.As(g.targetId,p);u.push(E)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(g,p){const E=Vt(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>rt.forEach(p,(S=>rt.forEach(S.Es,(D=>E.persistence.referenceDelegate.addReference(T,S.targetId,D))).next((()=>rt.forEach(S.ds,(D=>E.persistence.referenceDelegate.removeReference(T,S.targetId,D)))))))))}catch(T){if(!al(T))throw T;gt(op,"Failed to update sequence numbers: "+T)}for(const T of p){const S=T.targetId;if(!T.fromCache){const D=E.Ms.get(S),U=D.snapshotVersion,j=D.withLastLimboFreeSnapshotVersion(U);E.Ms=E.Ms.insert(S,j)}}})(s.localStore,u))}async function jI(r,t){const n=Vt(r);if(!n.currentUser.isEqual(t)){gt(pp,"User change. New user:",t.toKey());const s=await Db(n.localStore,t);n.currentUser=t,(function(u,h){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new dt(nt.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Fu(n,s.Ls)}}function BI(r,t){const n=Vt(r),s=n.Au.get(t);if(s&&s.hu)return Zt().add(s.key);{let o=Zt();const u=n.Iu.get(t);if(!u)return o;for(const h of u){const m=n.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function Gb(r){const t=Vt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=Bb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=BI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=PI.bind(null,t),t.Pu.H_=SI.bind(null,t.eventManager),t.Pu.yu=AI.bind(null,t.eventManager),t}function qI(r){const t=Vt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=LI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=UI.bind(null,t),t}class Zh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ef(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return H2(this.persistence,new j2,t.initialUser,this.serializer)}Cu(t){return new Ib(sp.mi,this.serializer)}Du(t){return new X2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zh.provider={build:()=>new Zh};class HI extends Zh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){ne(this.persistence.referenceDelegate instanceof Yh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new w2(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?ri.withCacheSize(this.cacheSizeBytes):ri.DEFAULT;return new Ib((s=>Yh.mi(s,n)),this.serializer)}}class Rg{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>vE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=jI.bind(null,this.syncEngine),await _I(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new EI})()}createDatastore(t){const n=Ef(t.databaseInfo.databaseId),s=(function(u){return new eI(u)})(t.databaseInfo);return(function(u,h,m,g){return new sI(u,h,m,g)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,o,u,h,m){return new oI(s,o,u,h,m)})(this.localStore,this.datastore,t.asyncQueue,(n=>vE(this.syncEngine,n,0)),(function(){return dE.v()?new dE:new Z2})())}createSyncEngine(t,n){return(function(o,u,h,m,g,p,E){const T=new DI(o,u,h,m,g,p);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Vt(n);gt(Ga,"RemoteStore shutting down."),s.Ea.add(5),await Hu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Rg.provider={build:()=>new Rg};class FI{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Yr("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}class GI{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new dt(nt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(o,u){const h=Vt(o),m={documents:u.map((T=>$h(h.serializer,T)))},g=await h.Ho("BatchGetDocuments",h.serializer.databaseId,_e.emptyPath(),m,u.length),p=new Map;g.forEach((T=>{const S=l2(h.serializer,T);p.set(S.key.toString(),S)}));const E=[];return u.forEach((T=>{const S=p.get(T.toString());ne(!!S,55234,{key:T}),E.push(S)})),E})(this.datastore,t);return n.forEach((s=>this.recordVersion(s))),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(t.toString())}delete(t){this.write(new tp(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach((n=>{t.delete(n.key.toString())})),t.forEach(((n,s)=>{const o=bt.fromPath(s);this.mutations.push(new mb(o,this.precondition(o)))})),await(async function(s,o){const u=Vt(s),h={writes:o.map((m=>Sb(u.serializer,m)))};await u.Go("Commit",u.serializer.databaseId,_e.emptyPath(),h)})(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw Rt(50498,{Gu:t.constructor.name});n=Nt.min()}const s=this.readVersions.get(t.key.toString());if(s){if(!n.isEqual(s))throw new dt(nt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(Nt.min())?$n.exists(!1):$n.updateTime(n):$n.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(Nt.min()))throw new dt(nt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $n.updateTime(n)}return $n.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class KI{constructor(t,n,s,o,u){this.asyncQueue=t,this.datastore=n,this.options=s,this.updateFunction=o,this.deferred=u,this.zu=s.maxAttempts,this.M_=new lp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const t=new GI(this.datastore),n=this.Hu(t);n&&n.then((s=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(t){try{const n=this.updateFunction(t);return!zu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(t)}Zu(t){if(t?.name==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!gb(n)}return!1}}const sa="FirestoreClient";class QI{constructor(t,n,s,o,u){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Un.UNAUTHENTICATED,this.clientId=Kg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async h=>{gt(sa,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(gt(sa,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=mp(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function Hm(r,t){r.asyncQueue.verifyOperationInProgress(),gt(sa,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Db(t.localStore,o),s=o)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function TE(r,t){r.asyncQueue.verifyOperationInProgress();const n=await $I(r);gt(sa,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener((s=>gE(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>gE(t.remoteStore,o))),r._onlineComponents=t}async function $I(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){gt(sa,"Using user provided OfflineComponentProvider");try{await Hm(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(o){return o.name==="FirebaseError"?o.code===nt.FAILED_PRECONDITION||o.code===nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;$o("Error using user provided cache. Falling back to memory cache: "+n),await Hm(r,new Zh)}}else gt(sa,"Using default OfflineComponentProvider"),await Hm(r,new HI(void 0));return r._offlineComponents}async function _p(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(gt(sa,"Using user provided OnlineComponentProvider"),await TE(r,r._uninitializedComponentsProvider._online)):(gt(sa,"Using default OnlineComponentProvider"),await TE(r,new Rg))),r._onlineComponents}function YI(r){return _p(r).then((t=>t.syncEngine))}function XI(r){return _p(r).then((t=>t.datastore))}async function bE(r){const t=await _p(r),n=t.eventManager;return n.onListen=NI.bind(null,t.syncEngine),n.onUnlisten=MI.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=xI.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=VI.bind(null,t.syncEngine),n}function Kb(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}const SE=new Map;const Qb="firestore.googleapis.com",AE=!0;class wE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new dt(nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Qb,this.ssl=AE}else this.host=t.host,this.ssl=t.ssl??AE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Cb;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<S2)throw new dt(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}uC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kb(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new dt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new dt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new dt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Sf{constructor(t,n,s,o){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new dt(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new dt(nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new WR;switch(s.type){case"firstParty":return new iC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new dt(nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=SE.get(n);s&&(gt("ComponentProvider","Removing Datastore"),SE.delete(n),s.terminate())})(this),Promise.resolve()}}function ZI(r,t,n,s={}){r=Qr(r,Sf);const o=nl(t),u=r._getSettings(),h={...u,emulatorOptions:r._getEmulatorOptions()},m=`${t}:${n}`;o&&(TT(`https://${m}`),bT("Firestore",!0)),u.host!==Qb&&u.host!==m&&$o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:s};if(!qa(g,h)&&(r._setSettings(g),s.mockUserToken)){let p,E;if(typeof s.mockUserToken=="string")p=s.mockUserToken,E=Un.MOCK_USER;else{p=Rw(s.mockUserToken,r._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new dt(nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Un(T)}r._authCredentials=new tC(new PT(p,E))}}class ll{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new ll(this.firestore,t,this._query)}}class je{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new je(this.firestore,t,this._key)}toJSON(){return{type:je._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(Uu(n,je._jsonSchema))return new je(t,s||null,new bt(_e.fromString(n.referencePath)))}}je._jsonSchemaVersion="firestore/documentReference/1.0",je._jsonSchema={type:on("string",je._jsonSchemaVersion),referencePath:on("string")};class Zs extends ll{constructor(t,n,s){super(t,n,Jg(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new je(this.firestore,null,new bt(t))}withConverter(t){return new Zs(this.firestore,t,this._path)}}function uu(r,t,...n){if(r=Tn(r),LT("collection","path",t),r instanceof Sf){const s=_e.fromString(t,...n);return L0(s),new Zs(r,null,s)}{if(!(r instanceof je||r instanceof Zs))throw new dt(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(_e.fromString(t,...n));return L0(s),new Zs(r.firestore,null,s)}}function cu(r,t,...n){if(r=Tn(r),arguments.length===1&&(t=Kg.newId()),LT("doc","path",t),r instanceof Sf){const s=_e.fromString(t,...n);return P0(s),new je(r,null,new bt(s))}{if(!(r instanceof je||r instanceof Zs))throw new dt(nt.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(_e.fromString(t,...n));return P0(s),new je(r.firestore,r instanceof Zs?r.converter:null,new bt(s))}}const RE="AsyncQueue";class CE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lp(this,"async_queue_retry"),this._c=()=>{const s=qm();s&&gt(RE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=qm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=qm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Xs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!al(t))throw t;gt(RE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,Yr("INTERNAL UNHANDLED ERROR: ",IE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const o=dp.createAndSchedule(this,t,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Rt(47125,{Pc:IE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function IE(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}function DE(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(r,["next","error","complete"])}class tl extends Sf{constructor(t,n,s,o){super(t,n,s,o),this.type="firestore",this._queue=new CE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new CE(t),this._firestoreClient=void 0,await t}}}function JI(r,t){const n=typeof r=="object"?r:RT(),s=typeof r=="string"?r:Bh,o=Fg(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=Aw("firestore");u&&ZI(o,...u)}return o}function vp(r){if(r._terminated)throw new dt(nt.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||WI(r),r._firestoreClient}function WI(r){const t=r._freezeSettings(),n=(function(o,u,h,m){return new EC(o,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Kb(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new QI(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(r._componentsProvider))}class yi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new yi(xn.fromBase64String(t))}catch(n){throw new dt(nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new yi(xn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:yi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Uu(t,yi._jsonSchema))return yi.fromBase64String(t.bytes)}}yi._jsonSchemaVersion="firestore/bytes/1.0",yi._jsonSchema={type:on("string",yi._jsonSchemaVersion),bytes:on("string")};class Gu{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new dt(nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Ep{constructor(t){this._methodName=t}}class _r{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new dt(nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new dt(nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Xt(this._lat,t._lat)||Xt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_r._jsonSchemaVersion}}static fromJSON(t){if(Uu(t,_r._jsonSchema))return new _r(t.latitude,t.longitude)}}_r._jsonSchemaVersion="firestore/geoPoint/1.0",_r._jsonSchema={type:on("string",_r._jsonSchemaVersion),latitude:on("number"),longitude:on("number")};class vr{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:vr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Uu(t,vr._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new vr(t.vectorValues);throw new dt(nt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vr._jsonSchemaVersion="firestore/vectorValue/1.0",vr._jsonSchema={type:on("string",vr._jsonSchemaVersion),vectorValues:on("object")};const tD=/^__.*__$/;class eD{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new ua(t,this.data,this.fieldMask,n,this.fieldTransforms):new Bu(t,this.data,n,this.fieldTransforms)}}class $b{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new ua(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Yb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rt(40011,{Ac:r})}}class Tp{constructor(t,n,s,o,u,h){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Tp({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Jh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Yb(this.Ac)&&tD.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class nD{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Ef(t)}Cc(t,n,s,o=!1){return new Tp({Ac:t,methodName:n,Dc:s,path:Nn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Af(r){const t=r._freezeSettings(),n=Ef(r._databaseId);return new nD(r._databaseId,!!t.ignoreUndefinedProperties,n)}function Xb(r,t,n,s,o,u={}){const h=r.Cc(u.merge||u.mergeFields?2:0,t,n,o);bp("Data must be an object, but it was:",h,s);const m=Wb(s,h);let g,p;if(u.merge)g=new _i(h.fieldMask),p=h.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const S=Cg(t,T,n);if(!h.contains(S))throw new dt(nt.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);e1(E,S)||E.push(S)}g=new _i(E),p=h.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,p=h.fieldTransforms;return new eD(new Qn(m),g,p)}class wf extends Ep{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof wf}}function Zb(r,t,n,s){const o=r.Cc(1,t,n);bp("Data must be an object, but it was:",o,s);const u=[],h=Qn.empty();la(s,((g,p)=>{const E=Sp(t,g,n);p=Tn(p);const T=o.yc(E);if(p instanceof wf)u.push(E);else{const S=Ku(p,T);S!=null&&(u.push(E),h.set(E,S))}}));const m=new _i(u);return new $b(h,m,o.fieldTransforms)}function Jb(r,t,n,s,o,u){const h=r.Cc(1,t,n),m=[Cg(t,s,n)],g=[o];if(u.length%2!=0)throw new dt(nt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)m.push(Cg(t,u[S])),g.push(u[S+1]);const p=[],E=Qn.empty();for(let S=m.length-1;S>=0;--S)if(!e1(p,m[S])){const D=m[S];let U=g[S];U=Tn(U);const j=h.yc(D);if(U instanceof wf)p.push(D);else{const Y=Ku(U,j);Y!=null&&(p.push(D),E.set(D,Y))}}const T=new _i(p);return new $b(E,T,h.fieldTransforms)}function iD(r,t,n,s=!1){return Ku(n,r.Cc(s?4:3,t))}function Ku(r,t){if(t1(r=Tn(r)))return bp("Unsupported field value:",t,r),Wb(r,t);if(r instanceof Ep)return(function(s,o){if(!Yb(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let h=0;for(const m of s){let g=Ku(m,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(r,t)}return(function(s,o){if((s=Tn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return HC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Ie.fromDate(s);return{timestampValue:Qh(o.serializer,u)}}if(s instanceof Ie){const u=new Ie(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Qh(o.serializer,u)}}if(s instanceof _r)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof yi)return{bytesValue:vb(o.serializer,s._byteString)};if(s instanceof je){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ip(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof vr)return(function(h,m){return{mapValue:{fields:{[KT]:{stringValue:QT},[qh]:{arrayValue:{values:h.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return Wg(m.serializer,p)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${ff(s)}`)})(r,t)}function Wb(r,t){const n={};return jT(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):la(r,((s,o)=>{const u=Ku(o,t.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function t1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ie||r instanceof _r||r instanceof yi||r instanceof je||r instanceof Ep||r instanceof vr)}function bp(r,t,n){if(!t1(n)||!UT(n)){const s=ff(n);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function Cg(r,t,n){if((t=Tn(t))instanceof Gu)return t._internalPath;if(typeof t=="string")return Sp(r,t);throw Jh("Field path arguments must be of type string or ",r,!1,void 0,n)}const rD=new RegExp("[~\\*/\\[\\]]");function Sp(r,t,n){if(t.search(rD)>=0)throw Jh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Gu(...t.split("."))._internalPath}catch{throw Jh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Jh(r,t,n,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let m=`Function ${t}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new dt(nt.INVALID_ARGUMENT,m+r+g)}function e1(r,t){return r.some((n=>n.isEqual(t)))}class Wh{constructor(t,n,s,o,u){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new sD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Ap("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sD extends Wh{data(){return super.data()}}function Ap(r,t){return typeof t=="string"?Sp(r,t):t instanceof Gu?t._internalPath:t._delegate._internalPath}function aD(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new dt(nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wp{}class oD extends wp{}function lD(r,t,...n){let s=[];t instanceof wp&&s.push(t),s=s.concat(n),(function(u){const h=u.filter((g=>g instanceof Rp)).length,m=u.filter((g=>g instanceof Rf)).length;if(h>1||h>0&&m>0)throw new dt(nt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class Rf extends oD{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new Rf(t,n,s)}_apply(t){const n=this._parse(t);return n1(t._query,n),new ll(t.firestore,t.converter,yg(t._query,n))}_parse(t){const n=Af(t.firestore);return(function(u,h,m,g,p,E,T){let S;if(p.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new dt(nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){xE(T,E);const U=[];for(const j of T)U.push(NE(g,u,j));S={arrayValue:{values:U}}}else S=NE(g,u,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||xE(T,E),S=iD(m,h,T,E==="in"||E==="not-in");return an.create(p,E,S)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function uD(r,t,n){const s=t,o=Ap("where",r);return Rf._create(o,s,n)}class Rp extends wp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Rp(t,n)}_parse(t){const n=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:tr.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(o,u){let h=o;const m=u.getFlattenedFilters();for(const g of m)n1(h,g),h=yg(h,g)})(t._query,n),new ll(t.firestore,t.converter,yg(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function NE(r,t,n){if(typeof(n=Tn(n))=="string"){if(n==="")throw new dt(nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eb(t)&&n.indexOf("/")!==-1)throw new dt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(_e.fromString(n));if(!bt.isDocumentKey(s))throw new dt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return G0(r,new bt(s))}if(n instanceof je)return G0(r,n._key);throw new dt(nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ff(n)}.`)}function xE(r,t){if(!Array.isArray(r)||r.length===0)throw new dt(nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function n1(r,t){const n=(function(o,u){for(const h of o)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new dt(nt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new dt(nt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class i1{convertValue(t,n="none"){switch(ia(t)){case 0:return null;case 1:return t.booleanValue;case 2:return $e(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(na(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Rt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return la(t,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(t){const n=t.fields?.[qh].arrayValue?.values?.map((s=>$e(s.doubleValue)));return new vr(n)}convertGeoPoint(t){return new _r($e(t.latitude),$e(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=mf(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Cu(t));default:return null}}convertTimestamp(t){const n=ea(t);return new Ie(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=_e.fromString(t);ne(Rb(s),9688,{name:t});const o=new Iu(s.get(1),s.get(3)),u=new bt(s.popFirst(5));return o.isEqual(n)||Yr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function r1(r,t,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(t,n):r.toFirestore(t):t,s}class cD extends i1{constructor(t){super(),this.firestore=t}convertBytes(t){return new yi(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new je(this.firestore,null,n)}}class zo{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Js extends Wh{constructor(t,n,s,o,u,h){super(t,n,s,o,h),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Nh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(Ap("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new dt(nt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Js._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Js._jsonSchemaVersion="firestore/documentSnapshot/1.0",Js._jsonSchema={type:on("string",Js._jsonSchemaVersion),bundleSource:on("string","DocumentSnapshot"),bundleName:on("string"),bundle:on("string")};class Nh extends Js{data(t={}){return super.data(t)}}class qo{constructor(t,n,s,o){this._firestore=t,this._userDataWriter=n,this._snapshot=o,this.metadata=new zo(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new Nh(this._firestore,this._userDataWriter,s.key,s,new zo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new dt(nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const g=new Nh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new zo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new Nh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new zo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,E=-1;return m.type!==0&&(p=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:hD(m.type),doc:g,oldIndex:p,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new dt(nt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=qo._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Kg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function hD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rt(61501,{type:r})}}qo._jsonSchemaVersion="firestore/querySnapshot/1.0",qo._jsonSchema={type:on("string",qo._jsonSchemaVersion),bundleSource:on("string","QuerySnapshot"),bundleName:on("string"),bundle:on("string")};class Cp extends i1{constructor(t){super(),this.firestore=t}convertBytes(t){return new yi(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new je(this.firestore,null,n)}}function s1(r,t,n){r=Qr(r,je);const s=Qr(r.firestore,tl),o=r1(r.converter,t,n);return o1(s,[Xb(Af(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,$n.none())])}function fD(r,t,n,...s){r=Qr(r,je);const o=Qr(r.firestore,tl),u=Af(o);let h;return h=typeof(t=Tn(t))=="string"||t instanceof Gu?Jb(u,"updateDoc",r._key,t,n,s):Zb(u,"updateDoc",r._key,t),o1(o,[h.toMutation(r._key,$n.exists(!0))])}function a1(r,...t){r=Tn(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||DE(t[s])||(n=t[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(DE(t[s])){const g=t[s];t[s]=g.next?.bind(g),t[s+1]=g.error?.bind(g),t[s+2]=g.complete?.bind(g)}let u,h,m;if(r instanceof je)h=Qr(r.firestore,tl),m=Jg(r._key.path),u={next:g=>{t[s]&&t[s](dD(h,r,g))},error:t[s+1],complete:t[s+2]};else{const g=Qr(r,ll);h=Qr(g.firestore,tl),m=g._query;const p=new Cp(h);u={next:E=>{t[s]&&t[s](new qo(h,p,g,E))},error:t[s+1],complete:t[s+2]},aD(r._query)}return(function(p,E,T,S){const D=new FI(S),U=new wI(E,D,T);return p.asyncQueue.enqueueAndForget((async()=>TI(await bE(p),U))),()=>{D.Nu(),p.asyncQueue.enqueueAndForget((async()=>bI(await bE(p),U)))}})(vp(h),m,o,u)}function o1(r,t){return(function(s,o){const u=new Xs;return s.asyncQueue.enqueueAndForget((async()=>kI(await YI(s),o,u))),u.promise})(vp(r),t)}function dD(r,t,n){const s=n.docs.get(t._key),o=new Cp(r);return new Js(r,o,t._key,s,new zo(n.hasPendingWrites,n.fromCache),t.converter)}const mD={maxAttempts:5};function hu(r,t){if((r=Tn(r)).firestore!==t)throw new dt(nt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class gD{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=Af(t)}get(t){const n=hu(t,this._firestore),s=new cD(this._firestore);return this._transaction.lookup([n._key]).then((o=>{if(!o||o.length!==1)return Rt(24041);const u=o[0];if(u.isFoundDocument())return new Wh(this._firestore,s,u.key,u,n.converter);if(u.isNoDocument())return new Wh(this._firestore,s,n._key,null,n.converter);throw Rt(18433,{doc:u})}))}set(t,n,s){const o=hu(t,this._firestore),u=r1(o.converter,n,s),h=Xb(this._dataReader,"Transaction.set",o._key,u,o.converter!==null,s);return this._transaction.set(o._key,h),this}update(t,n,s,...o){const u=hu(t,this._firestore);let h;return h=typeof(n=Tn(n))=="string"||n instanceof Gu?Jb(this._dataReader,"Transaction.update",u._key,n,s,o):Zb(this._dataReader,"Transaction.update",u._key,n),this._transaction.update(u._key,h),this}delete(t){const n=hu(t,this._firestore);return this._transaction.delete(n._key),this}}class pD extends gD{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=hu(t,this._firestore),s=new Cp(this._firestore);return super.get(t).then((o=>new Js(this._firestore,s,n._key,o._document,new zo(!1,!1),n.converter)))}}function yD(r,t,n){r=Qr(r,tl);const s={...mD,...n};return(function(u){if(u.maxAttempts<1)throw new dt(nt.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(u,h,m){const g=new Xs;return u.asyncQueue.enqueueAndForget((async()=>{const p=await XI(u);new KI(u.asyncQueue,p,m,h,g).ju()})),g.promise})(vp(r),(o=>t(new pD(r,o))),s)}(function(t,n=!0){(function(o){rl=o})(il),Qo(new Ha("firestore",((s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),m=new tl(new eC(s.getProvider("auth-internal")),new rC(h,s.getProvider("app-check-internal")),(function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new dt(nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Iu(p.options.projectId,E)})(h,o),h);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),$s(O0,M0,t),$s(O0,M0,"esm2020")})();function l1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _D=l1,u1=new Pu("auth","Firebase",l1());const tf=new qg("@firebase/auth");function vD(r,...t){tf.logLevel<=Yt.WARN&&tf.warn(`Auth (${il}): ${r}`,...t)}function xh(r,...t){tf.logLevel<=Yt.ERROR&&tf.error(`Auth (${il}): ${r}`,...t)}function Zr(r,...t){throw Ip(r,...t)}function Er(r,...t){return Ip(r,...t)}function c1(r,t,n){const s={..._D(),[t]:n};return new Pu("auth","Firebase",s).create(t,{appName:r.name})}function Ws(r){return c1(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ip(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return u1.create(r,...t)}function Ot(r,t,...n){if(!r)throw Ip(t,...n)}function Gr(r){const t="INTERNAL ASSERTION FAILED: "+r;throw xh(t),new Error(t)}function Jr(r,t){r||Gr(t)}function Ig(){return typeof self<"u"&&self.location?.href||""}function ED(){return OE()==="http:"||OE()==="https:"}function OE(){return typeof self<"u"&&self.location?.protocol||null}function TD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ED()||Ow()||"connection"in navigator)?navigator.onLine:!0}function bD(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Qu{constructor(t,n){this.shortDelay=t,this.longDelay=n,Jr(n>t,"Short delay should be less than long delay!"),this.isMobile=Dw()||Mw()}get(){return TD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Dp(r,t){Jr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class h1{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const SD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const AD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wD=new Qu(3e4,6e4);function Cf(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function ul(r,t,n,s,o={}){return f1(r,o,async()=>{let u={},h={};s&&(t==="GET"?h=s:u={body:JSON.stringify(s)});const m=Lu({key:r.config.apiKey,...h}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const p={method:t,headers:g,...u};return xw()||(p.referrerPolicy="no-referrer"),r.emulatorConfig&&nl(r.emulatorConfig.host)&&(p.credentials="include"),h1.fetch()(await m1(r,r.config.apiHost,n,m),p)})}async function f1(r,t,n){r._canInitEmulator=!1;const s={...SD,...t};try{const o=new RD(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw bh(r,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw bh(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw bh(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw bh(r,"user-disabled",h);const E=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw c1(r,E,p);Zr(r,E)}}catch(o){if(o instanceof ts)throw o;Zr(r,"network-request-failed",{message:String(o)})}}async function d1(r,t,n,s,o={}){const u=await ul(r,t,n,s,o);return"mfaPendingCredential"in u&&Zr(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function m1(r,t,n,s){const o=`${t}${n}?${s}`,u=r,h=u.config.emulator?Dp(r.config,o):`${r.config.apiScheme}://${o}`;return AD.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}class RD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Er(this.auth,"network-request-failed")),wD.get())})}}function bh(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Er(r,t,s);return o.customData._tokenResponse=n,o}async function CD(r,t){return ul(r,"POST","/v1/accounts:delete",t)}async function ef(r,t){return ul(r,"POST","/v1/accounts:lookup",t)}function Eu(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function ID(r,t=!1){const n=Tn(r),s=await n.getIdToken(t),o=Np(s);Ot(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:s,authTime:Eu(Fm(o.auth_time)),issuedAtTime:Eu(Fm(o.iat)),expirationTime:Eu(Fm(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Fm(r){return Number(r)*1e3}function Np(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return xh("JWT malformed, contained fewer than 3 sections"),null;try{const o=yT(n);return o?JSON.parse(o):(xh("Failed to decode base64 JWT payload"),null)}catch(o){return xh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function ME(r){const t=Np(r);return Ot(t,"internal-error"),Ot(typeof t.exp<"u","internal-error"),Ot(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function Ou(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof ts&&DD(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function DD({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class ND{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Dg{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Eu(this.lastLoginAt),this.creationTime=Eu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function nf(r){const t=r.auth,n=await r.getIdToken(),s=await Ou(r,ef(t,{idToken:n}));Ot(s?.users.length,t,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?g1(o.providerUserInfo):[],h=OD(r.providerData,u),m=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!h?.length,p=m?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Dg(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(r,E)}async function xD(r){const t=Tn(r);await nf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function OD(r,t){return[...r.filter(s=>!t.some(o=>o.providerId===s.providerId)),...t]}function g1(r){return r.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function MD(r,t){const n=await f1(r,{},async()=>{const s=Lu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,h=await m1(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return r.emulatorConfig&&nl(r.emulatorConfig.host)&&(g.credentials="include"),h1.fetch()(h,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function VD(r,t){return ul(r,"POST","/v2/accounts:revokeToken",Cf(r,t))}class Ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Ot(t.idToken,"internal-error"),Ot(typeof t.idToken<"u","internal-error"),Ot(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):ME(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Ot(t.length!==0,"internal-error");const n=ME(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ot(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await MD(t,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,h=new Ho;return s&&(Ot(typeof s=="string","internal-error",{appName:t}),h.refreshToken=s),o&&(Ot(typeof o=="string","internal-error",{appName:t}),h.accessToken=o),u&&(Ot(typeof u=="number","internal-error",{appName:t}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ho,this.toJSON())}_performRefresh(){return Gr("not implemented")}}function Ps(r,t){Ot(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Wi{constructor({uid:t,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new ND(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Dg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const n=await Ou(this,this.stsTokenManager.getToken(this.auth,t));return Ot(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return ID(this,t)}reload(){return xD(this)}_assign(t){this!==t&&(Ot(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Wi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){Ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await nf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ji(this.auth.app))return Promise.reject(Ws(this.auth));const t=await this.getIdToken();return await Ou(this,CD(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,m=n.tenantId??void 0,g=n._redirectEventId??void 0,p=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:D,providerData:U,stsTokenManager:j}=n;Ot(T&&j,t,"internal-error");const Y=Ho.fromJSON(this.name,j);Ot(typeof T=="string",t,"internal-error"),Ps(s,t.name),Ps(o,t.name),Ot(typeof S=="boolean",t,"internal-error"),Ot(typeof D=="boolean",t,"internal-error"),Ps(u,t.name),Ps(h,t.name),Ps(m,t.name),Ps(g,t.name),Ps(p,t.name),Ps(E,t.name);const lt=new Wi({uid:T,auth:t,email:o,emailVerified:S,displayName:s,isAnonymous:D,photoURL:h,phoneNumber:u,tenantId:m,stsTokenManager:Y,createdAt:p,lastLoginAt:E});return U&&Array.isArray(U)&&(lt.providerData=U.map(ht=>({...ht}))),g&&(lt._redirectEventId=g),lt}static async _fromIdTokenResponse(t,n,s=!1){const o=new Ho;o.updateFromServerResponse(n);const u=new Wi({uid:n.localId,auth:t,stsTokenManager:o,isAnonymous:s});return await nf(u),u}static async _fromGetAccountInfoResponse(t,n,s){const o=n.users[0];Ot(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?g1(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,m=new Ho;m.updateFromIdToken(s);const g=new Wi({uid:o.localId,auth:t,stsTokenManager:m,isAnonymous:h}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Dg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,p),g}}const VE=new Map;function Kr(r){Jr(r instanceof Function,"Expected a class definition");let t=VE.get(r);return t?(Jr(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,VE.set(r,t),t)}class p1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}p1.type="NONE";const kE=p1;function Oh(r,t,n){return`firebase:${r}:${t}:${n}`}class Fo{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Oh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Oh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await ef(this.auth,{idToken:t}).catch(()=>{});return n?Wi._fromGetAccountInfoResponse(this.auth,n,t):null}return Wi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Fo(Kr(kE),t,s);const o=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||Kr(kE);const h=Oh(s,t.config.apiKey,t.name);let m=null;for(const p of n)try{const E=await p._get(h);if(E){let T;if(typeof E=="string"){const S=await ef(t,{idToken:E}).catch(()=>{});if(!S)break;T=await Wi._fromGetAccountInfoResponse(t,S,E)}else T=Wi._fromJSON(t,E);p!==u&&(m=T),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Fo(u,t,s):(u=g[0],m&&await u._set(h,m.toJSON()),await Promise.all(n.map(async p=>{if(p!==u)try{await p._remove(h)}catch{}})),new Fo(u,t,s))}}function PE(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(E1(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(y1(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(b1(t))return"Blackberry";if(S1(t))return"Webos";if(_1(t))return"Safari";if((t.includes("chrome/")||v1(t))&&!t.includes("edge/"))return"Chrome";if(T1(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function y1(r=zn()){return/firefox\//i.test(r)}function _1(r=zn()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function v1(r=zn()){return/crios\//i.test(r)}function E1(r=zn()){return/iemobile/i.test(r)}function T1(r=zn()){return/android/i.test(r)}function b1(r=zn()){return/blackberry/i.test(r)}function S1(r=zn()){return/webos/i.test(r)}function xp(r=zn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function kD(r=zn()){return xp(r)&&!!window.navigator?.standalone}function PD(){return Vw()&&document.documentMode===10}function A1(r=zn()){return xp(r)||T1(r)||S1(r)||b1(r)||/windows phone/i.test(r)||E1(r)}function w1(r,t=[]){let n;switch(r){case"Browser":n=PE(zn());break;case"Worker":n=`${PE(zn())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${il}/${s}`}class LD{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=u=>new Promise((h,m)=>{try{const g=t(u);h(g)}catch(g){m(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function UD(r,t={}){return ul(r,"GET","/v2/passwordPolicy",Cf(r,t))}const zD=6;class jD{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??zD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),o&&(n.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<t.length;o++)s=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}class BD{constructor(t,n,s,o){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new LE(this),this.idTokenSubscription=new LE(this),this.beforeStateQueue=new LD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Kr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Fo.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await ef(this,{idToken:t}),s=await Wi._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Ji(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=s?._redirectEventId,m=await this.tryRedirectSignIn(t);(!u||u===h)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await nf(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=bD()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ji(this.app))return Promise.reject(Ws(this));const n=t?Tn(t):null;return n&&Ot(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Ot(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ji(this.app)?Promise.reject(Ws(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ji(this.app)?Promise.reject(Ws(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await UD(this),n=new jD(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Pu("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await VD(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Kr(t)||this._popupRedirectResolver;Ot(n,this,"argument-error"),this.redirectPersistenceManager=await Fo.create(this,[Kr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ot(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const g=t.addObserver(n,s,o);return()=>{h=!0,g()}}else{const g=t.addObserver(n);return()=>{h=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=w1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(Ji(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&vD(`Error while retrieving App Check token: ${t.error}`),t?.token}}function If(r){return Tn(r)}class LE{constructor(t){this.auth=t,this.observer=null,this.addObserver=qw(n=>this.observer=n)}get next(){return Ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Op={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qD(r){Op=r}function HD(r){return Op.loadJS(r)}function FD(){return Op.gapiScript}function GD(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function KD(r,t){const n=Fg(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(qa(u,t??{}))return o;Zr(o,"already-initialized")}return n.initialize({options:t})}function QD(r,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Kr);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function $D(r,t,n){const s=If(r);Ot(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const o=!1,u=R1(t),{host:h,port:m}=YD(t),g=m===null?"":`:${m}`,p={url:`${u}//${h}${g}/`},E=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ot(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ot(qa(p,s.config.emulator)&&qa(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,nl(h)?(TT(`${u}//${h}${g}`),bT("Auth",!0)):XD()}function R1(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function YD(r){const t=R1(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:UE(s.substr(u.length+1))}}else{const[u,h]=s.split(":");return{host:u,port:UE(h)}}}function UE(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function XD(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class C1{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Gr("not implemented")}_getIdTokenResponse(t){return Gr("not implemented")}_linkToIdToken(t,n){return Gr("not implemented")}_getReauthenticationResolver(t){return Gr("not implemented")}}async function Go(r,t){return d1(r,"POST","/v1/accounts:signInWithIdp",Cf(r,t))}const ZD="http://localhost";class Ka extends C1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Ka(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Zr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const h=new Ka(s,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(t){const n=this.buildRequest();return Go(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,Go(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Go(t,n)}buildRequest(){const t={requestUri:ZD,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Lu(n)}return t}}class I1{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class $u extends I1{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Bs extends $u{constructor(){super("facebook.com")}static credential(t){return Ka._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Bs.credentialFromTaggedObject(t)}static credentialFromError(t){return Bs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Bs.credential(t.oauthAccessToken)}catch{return null}}}Bs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bs.PROVIDER_ID="facebook.com";class qs extends $u{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Ka._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return qs.credentialFromTaggedObject(t)}static credentialFromError(t){return qs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return qs.credential(n,s)}catch{return null}}}qs.GOOGLE_SIGN_IN_METHOD="google.com";qs.PROVIDER_ID="google.com";class Hs extends $u{constructor(){super("github.com")}static credential(t){return Ka._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Hs.credentialFromTaggedObject(t)}static credentialFromError(t){return Hs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Hs.credential(t.oauthAccessToken)}catch{return null}}}Hs.GITHUB_SIGN_IN_METHOD="github.com";Hs.PROVIDER_ID="github.com";class Fs extends $u{constructor(){super("twitter.com")}static credential(t,n){return Ka._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Fs.credentialFromTaggedObject(t)}static credentialFromError(t){return Fs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Fs.credential(n,s)}catch{return null}}}Fs.TWITTER_SIGN_IN_METHOD="twitter.com";Fs.PROVIDER_ID="twitter.com";async function JD(r,t){return d1(r,"POST","/v1/accounts:signUp",Cf(r,t))}class aa{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,o=!1){const u=await Wi._fromIdTokenResponse(t,s,o),h=zE(s);return new aa({user:u,providerId:h,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const o=zE(s);return new aa({user:t,providerId:o,_tokenResponse:s,operationType:n})}}function zE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}async function Ng(r){if(Ji(r.app))return Promise.reject(Ws(r));const t=If(r);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new aa({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await JD(t,{returnSecureToken:!0}),s=await aa._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(s.user),s}class rf extends ts{constructor(t,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,rf.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,o){return new rf(t,n,s,o)}}function D1(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?rf._fromErrorAndOperation(r,u,t,s):u})}async function WD(r,t,n=!1){const s=await Ou(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return aa._forOperation(r,"link",s)}async function tN(r,t,n=!1){const{auth:s}=r;if(Ji(s.app))return Promise.reject(Ws(s));const o="reauthenticate";try{const u=await Ou(r,D1(s,o,t,r),n);Ot(u.idToken,s,"internal-error");const h=Np(u.idToken);Ot(h,s,"internal-error");const{sub:m}=h;return Ot(r.uid===m,s,"user-mismatch"),aa._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Zr(s,"user-mismatch"),u}}async function eN(r,t,n=!1){if(Ji(r.app))return Promise.reject(Ws(r));const s="signIn",o=await D1(r,s,t),u=await aa._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}function nN(r,t,n,s){return Tn(r).onIdTokenChanged(t,n,s)}function iN(r,t,n){return Tn(r).beforeAuthStateChanged(t,n)}const sf="__sak";class N1{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sf,"1"),this.storage.removeItem(sf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const rN=1e3,sN=10;class x1 extends N1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=A1(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&t(n,o,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const s=t.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!n&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);PD()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,sN):o()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},rN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}x1.type="LOCAL";const aN=x1;class O1 extends N1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}O1.type="SESSION";const M1=O1;function oN(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}class Df{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(o=>o.isListeningto(t));if(n)return n;const s=new Df(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:o,data:u}=n.data,h=this.handlersMap[o];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(h).map(async p=>p(n.origin,u)),g=await oN(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Df.receivers=[];function Mp(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}class lN{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((m,g)=>{const p=Mp("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(S.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:t,eventId:p,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function Tr(){return window}function uN(r){Tr().location.href=r}function V1(){return typeof Tr().WorkerGlobalScope<"u"&&typeof Tr().importScripts=="function"}async function cN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hN(){return navigator?.serviceWorker?.controller||null}function fN(){return V1()?self:null}const k1="firebaseLocalStorageDb",dN=1,af="firebaseLocalStorage",P1="fbase_key";class Yu{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nf(r,t){return r.transaction([af],t?"readwrite":"readonly").objectStore(af)}function mN(){const r=indexedDB.deleteDatabase(k1);return new Yu(r).toPromise()}function xg(){const r=indexedDB.open(k1,dN);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(af,{keyPath:P1})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(af)?t(s):(s.close(),await mN(),t(await xg()))})})}async function jE(r,t,n){const s=Nf(r,!0).put({[P1]:t,value:n});return new Yu(s).toPromise()}async function gN(r,t){const n=Nf(r,!1).get(t),s=await new Yu(n).toPromise();return s===void 0?null:s.value}function BE(r,t){const n=Nf(r,!0).delete(t);return new Yu(n).toPromise()}const pN=800,yN=3;class L1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xg(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>yN)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return V1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Df._getInstance(fN()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await cN(),!this.activeServiceWorker)return;this.sender=new lN(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||hN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await xg();return await jE(t,sf,"1"),await BE(t,sf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>jE(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>gN(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>BE(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=Nf(o,!1).getAll();return new Yu(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}L1.type="LOCAL";const _N=L1;new Qu(3e4,6e4);function vN(r,t){return t?Kr(t):(Ot(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Vp extends C1{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Go(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Go(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Go(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function EN(r){return eN(r.auth,new Vp(r),r.bypassAuthState)}function TN(r){const{auth:t,user:n}=r;return Ot(n,t,"internal-error"),tN(n,new Vp(r),r.bypassAuthState)}async function bN(r){const{auth:t,user:n}=r;return Ot(n,t,"internal-error"),WD(n,new Vp(r),r.bypassAuthState)}class U1{constructor(t,n,s,o,u=!1){this.auth=t,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:h,type:m}=t;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return EN;case"linkViaPopup":case"linkViaRedirect":return bN;case"reauthViaPopup":case"reauthViaRedirect":return TN;default:Zr(this.auth,"internal-error")}}resolve(t){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const SN=new Qu(2e3,1e4);class jo extends U1{constructor(t,n,s,o,u){super(t,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,jo.currentPopupAction&&jo.currentPopupAction.cancel(),jo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Ot(t,this.auth,"internal-error"),t}async onExecution(){Jr(this.filter.length===1,"Popup operations only handle one event");const t=Mp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jo.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,SN.get())};t()}}jo.currentPopupAction=null;const AN="pendingRedirect",Mh=new Map;class wN extends U1{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Mh.get(this.auth._key());if(!t){try{const s=await RN(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Mh.set(this.auth._key(),t)}return this.bypassAuthState||Mh.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RN(r,t){const n=DN(t),s=IN(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function CN(r,t){Mh.set(r._key(),t)}function IN(r){return Kr(r._redirectPersistence)}function DN(r){return Oh(AN,r.config.apiKey,r.name)}async function NN(r,t,n=!1){if(Ji(r.app))return Promise.reject(Ws(r));const s=If(r),o=vN(s,t),h=await new wN(s,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,t)),h}const xN=600*1e3;class ON{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!MN(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!z1(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Er(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=xN&&this.cachedEventUids.clear(),this.cachedEventUids.has(qE(t))}saveEventToCache(t){this.cachedEventUids.add(qE(t)),this.lastProcessedEventTime=Date.now()}}function qE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function z1({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function MN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return z1(r);default:return!1}}async function VN(r,t={}){return ul(r,"GET","/v1/projects",t)}const kN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PN=/^https?/;async function LN(r){if(r.config.emulator)return;const{authorizedDomains:t}=await VN(r);for(const n of t)try{if(UN(n))return}catch{}Zr(r,"unauthorized-domain")}function UN(r){const t=Ig(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===s}if(!PN.test(n))return!1;if(kN.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const zN=new Qu(3e4,6e4);function HE(){const r=Tr().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function jN(r){return new Promise((t,n)=>{function s(){HE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{HE(),n(Er(r,"network-request-failed"))},timeout:zN.get()})}if(Tr().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Tr().gapi?.load)s();else{const o=GD("iframefcb");return Tr()[o]=()=>{gapi.load?s():n(Er(r,"network-request-failed"))},HD(`${FD()}?onload=${o}`).catch(u=>n(u))}}).catch(t=>{throw Vh=null,t})}let Vh=null;function BN(r){return Vh=Vh||jN(r),Vh}const qN=new Qu(5e3,15e3),HN="__/auth/iframe",FN="emulator/auth/iframe",GN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QN(r){const t=r.config;Ot(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?Dp(t,FN):`https://${r.config.authDomain}/${HN}`,s={apiKey:t.apiKey,appName:r.name,v:il},o=KN.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Lu(s).slice(1)}`}async function $N(r){const t=await BN(r),n=Tr().gapi;return Ot(n,r,"internal-error"),t.open({where:document.body,url:QN(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GN,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const h=Er(r,"network-request-failed"),m=Tr().setTimeout(()=>{u(h)},qN.get());function g(){Tr().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{u(h)})}))}const YN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XN=500,ZN=600,JN="_blank",WN="http://localhost";class FE{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tx(r,t,n,s=XN,o=ZN){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...YN,width:s.toString(),height:o.toString(),top:u,left:h},p=zn().toLowerCase();n&&(m=v1(p)?JN:n),y1(p)&&(t=t||WN,g.scrollbars="yes");const E=Object.entries(g).reduce((S,[D,U])=>`${S}${D}=${U},`,"");if(kD(p)&&m!=="_self")return ex(t||"",m),new FE(null);const T=window.open(t||"",m,E);Ot(T,r,"popup-blocked");try{T.focus()}catch{}return new FE(T)}function ex(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const nx="__/auth/handler",ix="emulator/auth/handler",rx=encodeURIComponent("fac");async function GE(r,t,n,s,o,u){Ot(r.config.authDomain,r,"auth-domain-config-required"),Ot(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:il,eventId:o};if(t instanceof I1){t.setDefaultLanguage(r.languageCode),h.providerId=t.providerId||"",Bw(t.getCustomParameters())||(h.customParameters=JSON.stringify(t.getCustomParameters()));for(const[E,T]of Object.entries({}))h[E]=T}if(t instanceof $u){const E=t.getScopes().filter(T=>T!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const m=h;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await r._getAppCheckToken(),p=g?`#${rx}=${encodeURIComponent(g)}`:"";return`${sx(r)}?${Lu(m).slice(1)}${p}`}function sx({config:r}){return r.emulator?Dp(r,ix):`https://${r.authDomain}/${nx}`}const Gm="webStorageSupport";class ax{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=M1,this._completeRedirectFn=NN,this._overrideRedirectResult=CN}async _openPopup(t,n,s,o){Jr(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const u=await GE(t,n,s,Ig(),o);return tx(t,u,Mp())}async _openRedirect(t,n,s,o){await this._originValidation(t);const u=await GE(t,n,s,Ig(),o);return uN(u),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Jr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await $N(t),s=new ON(t);return n.register("authEvent",o=>(Ot(o?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Gm,{type:Gm},o=>{const u=o?.[0]?.[Gm];u!==void 0&&n(!!u),Zr(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=LN(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return A1()||_1()||xp()}}const ox=ax;var KE="@firebase/auth",QE="1.12.0";class lx{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ux(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cx(r){Qo(new Ha("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=s.options;Ot(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:w1(r)},p=new BD(s,o,u,g);return QD(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Qo(new Ha("auth-internal",t=>{const n=If(t.getProvider("auth").getImmediate());return(s=>new lx(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$s(KE,QE,ux(r)),$s(KE,QE,"esm2020")}const hx=300,fx=ET("authIdTokenMaxAge")||hx;let $E=null;const dx=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>fx)return;const o=n?.token;$E!==o&&($E=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Og(r=RT()){const t=Fg(r,"auth");if(t.isInitialized())return t.getImmediate();const n=KD(r,{popupRedirectResolver:ox,persistence:[_N,aN,M1]}),s=ET("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const h=dx(u.toString());iN(n,h,()=>h(n.currentUser)),nN(n,m=>h(m))}}const o=_T("auth");return o&&$D(n,`http://${o}`),n}function mx(){return document.getElementsByTagName("head")?.[0]??document}qD({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=o=>{const u=Er("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",mx().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cx("Browser");var gx="firebase",px="12.7.0";$s(gx,px,"app");const YE={apiKey:"AIzaSyB3ncjSdbTdaUqac5QvHon-Id5mCo3pByM",authDomain:"dragmate-af04d.firebaseapp.com",projectId:"dragmate-af04d",storageBucket:"dragmate-af04d.firebasestorage.app",messagingSenderId:"370425129874",appId:"1:370425129874:web:4c5c526a593e8fa45a6f4b"};let Km=null,pi=null,kh=null,ja=!1;try{Object.values(YE).every(Boolean)?(Km=C0().length?C0()[0]:wT(YE),pi=JI(Km),kh=Og(Km),ja=!0,console.log(" Firebase initialized for DragMate")):console.warn(" DEMO MODE: Firebase env vars missing. Global features will run in local/demo mode only.")}catch(r){console.error(" Firebase initialization failed:",r)}const XE=3e4;async function yx(r){return r?r.currentUser?r.currentUser:(await Ng(r)).user??null:null}async function ZE(r,t){const n=cu(r,"presence",t.uid);await s1(n,{lastSeen:new Date,status:"online"},{merge:!0})}function _x(){const[r,t]=Z.useState({count:null,loading:!0,error:null,isOnline:!1,isSupported:ja&&!!pi&&!!kh});return Z.useEffect(()=>{if(!ja||!pi||!kh){t(g=>({...g,loading:!1,isSupported:!1}));return}const n=pi,s=kh;let o=!1,u=null,h=null;return(async()=>{try{const g=await yx(s);if(!g||o)return;await ZE(n,g),t(T=>({...T,isOnline:!0,isSupported:!0})),u=window.setInterval(()=>{ZE(n,g).catch(T=>{console.error("Failed to update presence",T)})},XE/2);const p=new Date(Date.now()-XE),E=lD(uu(n,"presence"),uD("lastSeen",">=",p));h=a1(E,T=>{o||t(S=>({...S,count:T.size,loading:!1,error:null}))},T=>{console.error("Presence subscription error",T),!o&&t(S=>({...S,loading:!1,error:T.message??"Failed to subscribe to presence"}))})}catch(g){if(console.error("Presence initialization failed",g),o)return;t(p=>({...p,loading:!1,error:g?.message??"Presence initialization failed",isSupported:!1}))}})(),()=>{o=!0,u!==null&&window.clearInterval(u),h&&h()}},[]),r}const vx=({onCreateRoom:r,onJoinRoom:t,isAuthLoading:n})=>{const[s,o]=Z.useState(""),[u,h]=Z.useState(!1),{count:m,loading:g,isSupported:p}=_x(),E=async()=>{h(!0);try{await r()}finally{h(!1)}};return et.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[85vh] gap-12 relative overflow-hidden",children:[et.jsxs("div",{className:"text-center space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-1000",children:[et.jsx("div",{className:"inline-flex items-center px-4 py-1.5 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-400 text-sm font-semibold tracking-wide",children:"PREMIUM MULTIPLAYER CHESS"}),et.jsx("h1",{className:"text-8xl font-black tracking-tight bg-clip-text text-transparent bg-linear-to-b from-white via-indigo-100 to-indigo-400",children:"DragMate"}),et.jsx("p",{className:"text-xl text-slate-400 max-w-xl mx-auto leading-relaxed font-medium",children:"Master the board with friends in a fluid, minimalist arena. Zero friction. Pure strategy."})]}),et.jsxs("div",{className:"liquid-glass p-12 w-full max-w-xl space-y-10 animate-in fade-in slide-in-from-bottom-12 duration-1000 delay-200",children:[et.jsxs("div",{className:"space-y-6",children:[et.jsxs("button",{onClick:E,disabled:u||n,className:"w-full btn-premium flex items-center justify-center gap-4 text-2xl py-5 group disabled:opacity-50 disabled:cursor-not-allowed",children:[u||n?et.jsx("div",{className:"w-7 h-7 border-3 border-white/20 border-t-white rounded-full animate-spin"}):et.jsx(ow,{size:28,className:"transition-transform group-hover:rotate-90"}),et.jsx("span",{children:n?"Initializing...":u?"Creating Arena...":"New Game"})]}),et.jsxs("div",{className:"relative flex items-center gap-6",children:[et.jsx("div",{className:"flex-1 h-px bg-slate-800"}),et.jsx("span",{className:"text-slate-600 text-xs font-black uppercase tracking-[0.2em]",children:"OR"}),et.jsx("div",{className:"flex-1 h-px bg-slate-800"})]}),et.jsxs("div",{className:"flex gap-4",children:[et.jsx("div",{className:"relative flex-1 group",children:et.jsx("input",{type:"text",placeholder:"Enter Room ID",value:s,onChange:T=>o(T.target.value),className:"w-full bg-slate-900/40 border border-slate-800/50 rounded-2xl px-8 py-5 text-xl placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all group-hover:border-slate-700"})}),et.jsx("button",{onClick:()=>t(s),disabled:!s.trim()||n,className:"bg-white text-slate-950 hover:bg-slate-100 disabled:opacity-20 disabled:grayscale px-8 py-5 rounded-2xl transition-all duration-300 font-black active:scale-95 shadow-2xl hover:shadow-white/10",children:et.jsx(sw,{size:28})})]})]}),et.jsxs("div",{className:"grid grid-cols-2 gap-6 pt-6 border-t border-slate-800/40",children:[et.jsxs("div",{className:"space-y-1",children:[et.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest",children:"Active Players"}),et.jsx("div",{className:"text-3xl font-bold text-white tracking-tight",children:p?g?"":(m??0).toLocaleString():"Demo"})]}),et.jsxs("div",{className:"space-y-1 text-right",children:[et.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest",children:"Global Sync"}),et.jsxs("div",{className:"text-3xl font-bold text-green-400 tracking-tight flex items-center justify-end gap-2",children:[et.jsx("span",{className:`w-2 h-2 rounded-full animate-pulse ${p?"bg-green-500":"bg-slate-600"}`}),p?"Live":"Demo"]})]})]})]}),et.jsxs("div",{className:"flex items-center gap-10 text-slate-600 font-bold uppercase tracking-widest text-[10px] animate-in fade-in duration-1000 delay-500",children:[et.jsx("a",{href:"#",className:"hover:text-indigo-400 transition-colors",children:"Documentation"}),et.jsx("a",{href:"#",className:"hover:text-indigo-400 transition-colors",children:"Leaderboard"}),et.jsx("a",{href:"#",className:"hover:text-indigo-400 transition-colors",children:"Source Code"})]})]})};var fu=dT();const xf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function cl(r){const t=Object.prototype.toString.call(r);return t==="[object Window]"||t==="[object global]"}function kp(r){return"nodeType"in r}function ai(r){var t,n;return r?cl(r)?r:kp(r)&&(t=(n=r.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Pp(r){const{Document:t}=ai(r);return r instanceof t}function Xu(r){return cl(r)?!1:r instanceof ai(r).HTMLElement}function j1(r){return r instanceof ai(r).SVGElement}function hl(r){return r?cl(r)?r.document:kp(r)?Pp(r)?r:Xu(r)||j1(r)?r.ownerDocument:document:document:document}const oa=xf?Z.useLayoutEffect:Z.useEffect;function Lp(r){const t=Z.useRef(r);return oa(()=>{t.current=r}),Z.useCallback(function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return t.current==null?void 0:t.current(...s)},[])}function Ex(){const r=Z.useRef(null),t=Z.useCallback((s,o)=>{r.current=setInterval(s,o)},[]),n=Z.useCallback(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[]);return[t,n]}function Mu(r,t){t===void 0&&(t=[r]);const n=Z.useRef(r);return oa(()=>{n.current!==r&&(n.current=r)},t),n}function Zu(r,t){const n=Z.useRef();return Z.useMemo(()=>{const s=r(n.current);return n.current=s,s},[...t])}function of(r){const t=Lp(r),n=Z.useRef(null),s=Z.useCallback(o=>{o!==n.current&&t?.(o,n.current),n.current=o},[]);return[n,s]}function Mg(r){const t=Z.useRef();return Z.useEffect(()=>{t.current=r},[r]),t.current}let Qm={};function Of(r,t){return Z.useMemo(()=>{if(t)return t;const n=Qm[r]==null?0:Qm[r]+1;return Qm[r]=n,r+"-"+n},[r,t])}function B1(r){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return s.reduce((u,h)=>{const m=Object.entries(h);for(const[g,p]of m){const E=u[g];E!=null&&(u[g]=E+r*p)}return u},{...t})}}const Ko=B1(1),lf=B1(-1);function Tx(r){return"clientX"in r&&"clientY"in r}function q1(r){if(!r)return!1;const{KeyboardEvent:t}=ai(r.target);return t&&r instanceof t}function bx(r){if(!r)return!1;const{TouchEvent:t}=ai(r.target);return t&&r instanceof t}function Vg(r){if(bx(r)){if(r.touches&&r.touches.length){const{clientX:t,clientY:n}=r.touches[0];return{x:t,y:n}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:t,clientY:n}=r.changedTouches[0];return{x:t,y:n}}}return Tx(r)?{x:r.clientX,y:r.clientY}:null}const kg=Object.freeze({Translate:{toString(r){if(!r)return;const{x:t,y:n}=r;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:t,scaleY:n}=r;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(r){if(r)return[kg.Translate.toString(r),kg.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:t,duration:n,easing:s}=r;return t+" "+n+"ms "+s}}}),JE="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Sx(r){return r.matches(JE)?r:r.querySelector(JE)}const Ax={display:"none"};function wx(r){let{id:t,value:n}=r;return si.createElement("div",{id:t,style:Ax},n)}function Rx(r){let{id:t,announcement:n,ariaLiveType:s="assertive"}=r;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return si.createElement("div",{id:t,style:o,role:"status","aria-live":s,"aria-atomic":!0},n)}function Cx(){const[r,t]=Z.useState("");return{announce:Z.useCallback(s=>{s!=null&&t(s)},[]),announcement:r}}const H1=Z.createContext(null);function Ix(r){const t=Z.useContext(H1);Z.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(r)},[r,t])}function Dx(){const[r]=Z.useState(()=>new Set),t=Z.useCallback(s=>(r.add(s),()=>r.delete(s)),[r]);return[Z.useCallback(s=>{let{type:o,event:u}=s;r.forEach(h=>{var m;return(m=h[o])==null?void 0:m.call(h,u)})},[r]),t]}const Nx={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},xx={onDragStart(r){let{active:t}=r;return"Picked up draggable item "+t.id+"."},onDragOver(r){let{active:t,over:n}=r;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(r){let{active:t,over:n}=r;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(r){let{active:t}=r;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Ox(r){let{announcements:t=xx,container:n,hiddenTextDescribedById:s,screenReaderInstructions:o=Nx}=r;const{announce:u,announcement:h}=Cx(),m=Of("DndLiveRegion"),[g,p]=Z.useState(!1);if(Z.useEffect(()=>{p(!0)},[]),Ix(Z.useMemo(()=>({onDragStart(T){let{active:S}=T;u(t.onDragStart({active:S}))},onDragMove(T){let{active:S,over:D}=T;t.onDragMove&&u(t.onDragMove({active:S,over:D}))},onDragOver(T){let{active:S,over:D}=T;u(t.onDragOver({active:S,over:D}))},onDragEnd(T){let{active:S,over:D}=T;u(t.onDragEnd({active:S,over:D}))},onDragCancel(T){let{active:S,over:D}=T;u(t.onDragCancel({active:S,over:D}))}}),[u,t])),!g)return null;const E=si.createElement(si.Fragment,null,si.createElement(wx,{id:s,value:o.draggable}),si.createElement(Rx,{id:m,announcement:h}));return n?fu.createPortal(E,n):E}var fn;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(fn||(fn={}));function uf(){}function $m(r,t){return Z.useMemo(()=>({sensor:r,options:{}}),[r,t])}function Mx(){for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return Z.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const er=Object.freeze({x:0,y:0});function Vx(r,t){let{data:{value:n}}=r,{data:{value:s}}=t;return s-n}function kx(r,t){if(!r||r.length===0)return null;const[n]=r;return n[t]}function Px(r,t){const n=Math.max(t.top,r.top),s=Math.max(t.left,r.left),o=Math.min(t.left+t.width,r.left+r.width),u=Math.min(t.top+t.height,r.top+r.height),h=o-s,m=u-n;if(s<o&&n<u){const g=t.width*t.height,p=r.width*r.height,E=h*m,T=E/(g+p-E);return Number(T.toFixed(4))}return 0}const Lx=r=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=r;const o=[];for(const u of s){const{id:h}=u,m=n.get(h);if(m){const g=Px(m,t);g>0&&o.push({id:h,data:{droppableContainer:u,value:g}})}}return o.sort(Vx)};function Ux(r,t,n){return{...r,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function F1(r,t){return r&&t?{x:r.left-t.left,y:r.top-t.top}:er}function zx(r){return function(n){for(var s=arguments.length,o=new Array(s>1?s-1:0),u=1;u<s;u++)o[u-1]=arguments[u];return o.reduce((h,m)=>({...h,top:h.top+r*m.y,bottom:h.bottom+r*m.y,left:h.left+r*m.x,right:h.right+r*m.x}),{...n})}}const jx=zx(1);function Bx(r){if(r.startsWith("matrix3d(")){const t=r.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(r.startsWith("matrix(")){const t=r.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function qx(r,t,n){const s=Bx(t);if(!s)return r;const{scaleX:o,scaleY:u,x:h,y:m}=s,g=r.left-h-(1-o)*parseFloat(n),p=r.top-m-(1-u)*parseFloat(n.slice(n.indexOf(" ")+1)),E=o?r.width/o:r.width,T=u?r.height/u:r.height;return{width:E,height:T,top:p,right:g+E,bottom:p+T,left:g}}const Hx={ignoreTransform:!1};function Ju(r,t){t===void 0&&(t=Hx);let n=r.getBoundingClientRect();if(t.ignoreTransform){const{transform:p,transformOrigin:E}=ai(r).getComputedStyle(r);p&&(n=qx(n,p,E))}const{top:s,left:o,width:u,height:h,bottom:m,right:g}=n;return{top:s,left:o,width:u,height:h,bottom:m,right:g}}function WE(r){return Ju(r,{ignoreTransform:!0})}function Fx(r){const t=r.innerWidth,n=r.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Gx(r,t){return t===void 0&&(t=ai(r).getComputedStyle(r)),t.position==="fixed"}function Kx(r,t){t===void 0&&(t=ai(r).getComputedStyle(r));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const u=t[o];return typeof u=="string"?n.test(u):!1})}function Up(r,t){const n=[];function s(o){if(t!=null&&n.length>=t||!o)return n;if(Pp(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!Xu(o)||j1(o)||n.includes(o))return n;const u=ai(r).getComputedStyle(o);return o!==r&&Kx(o,u)&&n.push(o),Gx(o,u)?n:s(o.parentNode)}return r?s(r):n}function G1(r){const[t]=Up(r,1);return t??null}function Ym(r){return!xf||!r?null:cl(r)?r:kp(r)?Pp(r)||r===hl(r).scrollingElement?window:Xu(r)?r:null:null}function K1(r){return cl(r)?r.scrollX:r.scrollLeft}function Q1(r){return cl(r)?r.scrollY:r.scrollTop}function Pg(r){return{x:K1(r),y:Q1(r)}}var vn;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(vn||(vn={}));function $1(r){return!xf||!r?!1:r===document.scrollingElement}function Y1(r){const t={x:0,y:0},n=$1(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},s={x:r.scrollWidth-n.width,y:r.scrollHeight-n.height},o=r.scrollTop<=t.y,u=r.scrollLeft<=t.x,h=r.scrollTop>=s.y,m=r.scrollLeft>=s.x;return{isTop:o,isLeft:u,isBottom:h,isRight:m,maxScroll:s,minScroll:t}}const Qx={x:.2,y:.2};function $x(r,t,n,s,o){let{top:u,left:h,right:m,bottom:g}=n;s===void 0&&(s=10),o===void 0&&(o=Qx);const{isTop:p,isBottom:E,isLeft:T,isRight:S}=Y1(r),D={x:0,y:0},U={x:0,y:0},j={height:t.height*o.y,width:t.width*o.x};return!p&&u<=t.top+j.height?(D.y=vn.Backward,U.y=s*Math.abs((t.top+j.height-u)/j.height)):!E&&g>=t.bottom-j.height&&(D.y=vn.Forward,U.y=s*Math.abs((t.bottom-j.height-g)/j.height)),!S&&m>=t.right-j.width?(D.x=vn.Forward,U.x=s*Math.abs((t.right-j.width-m)/j.width)):!T&&h<=t.left+j.width&&(D.x=vn.Backward,U.x=s*Math.abs((t.left+j.width-h)/j.width)),{direction:D,speed:U}}function Yx(r){if(r===document.scrollingElement){const{innerWidth:u,innerHeight:h}=window;return{top:0,left:0,right:u,bottom:h,width:u,height:h}}const{top:t,left:n,right:s,bottom:o}=r.getBoundingClientRect();return{top:t,left:n,right:s,bottom:o,width:r.clientWidth,height:r.clientHeight}}function X1(r){return r.reduce((t,n)=>Ko(t,Pg(n)),er)}function Xx(r){return r.reduce((t,n)=>t+K1(n),0)}function Zx(r){return r.reduce((t,n)=>t+Q1(n),0)}function Jx(r,t){if(t===void 0&&(t=Ju),!r)return;const{top:n,left:s,bottom:o,right:u}=t(r);G1(r)&&(o<=0||u<=0||n>=window.innerHeight||s>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const Wx=[["x",["left","right"],Xx],["y",["top","bottom"],Zx]];class zp{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=Up(n),o=X1(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[u,h,m]of Wx)for(const g of h)Object.defineProperty(this,g,{get:()=>{const p=m(s),E=o[u]-p;return this.rect[g]+E},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Tu{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=t}add(t,n,s){var o;(o=this.target)==null||o.addEventListener(t,n,s),this.listeners.push([t,n,s])}}function tO(r){const{EventTarget:t}=ai(r);return r instanceof t?r:hl(r)}function Xm(r,t){const n=Math.abs(r.x),s=Math.abs(r.y);return typeof t=="number"?Math.sqrt(n**2+s**2)>t:"x"in t&&"y"in t?n>t.x&&s>t.y:"x"in t?n>t.x:"y"in t?s>t.y:!1}var Li;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(Li||(Li={}));function tT(r){r.preventDefault()}function eO(r){r.stopPropagation()}var Ee;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter",r.Tab="Tab"})(Ee||(Ee={}));const Z1={start:[Ee.Space,Ee.Enter],cancel:[Ee.Esc],end:[Ee.Space,Ee.Enter,Ee.Tab]},nO=(r,t)=>{let{currentCoordinates:n}=t;switch(r.code){case Ee.Right:return{...n,x:n.x+25};case Ee.Left:return{...n,x:n.x-25};case Ee.Down:return{...n,y:n.y+25};case Ee.Up:return{...n,y:n.y-25}}};class J1{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Tu(hl(n)),this.windowListeners=new Tu(ai(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Li.Resize,this.handleCancel),this.windowListeners.add(Li.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Li.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,s=t.node.current;s&&Jx(s),n(er)}handleKeyDown(t){if(q1(t)){const{active:n,context:s,options:o}=this.props,{keyboardCodes:u=Z1,coordinateGetter:h=nO,scrollBehavior:m="smooth"}=o,{code:g}=t;if(u.end.includes(g)){this.handleEnd(t);return}if(u.cancel.includes(g)){this.handleCancel(t);return}const{collisionRect:p}=s.current,E=p?{x:p.left,y:p.top}:er;this.referenceCoordinates||(this.referenceCoordinates=E);const T=h(t,{active:n,context:s.current,currentCoordinates:E});if(T){const S=lf(T,E),D={x:0,y:0},{scrollableAncestors:U}=s.current;for(const j of U){const Y=t.code,{isTop:lt,isRight:ht,isLeft:at,isBottom:Dt,maxScroll:wt,minScroll:vt}=Y1(j),R=Yx(j),w={x:Math.min(Y===Ee.Right?R.right-R.width/2:R.right,Math.max(Y===Ee.Right?R.left:R.left+R.width/2,T.x)),y:Math.min(Y===Ee.Down?R.bottom-R.height/2:R.bottom,Math.max(Y===Ee.Down?R.top:R.top+R.height/2,T.y))},C=Y===Ee.Right&&!ht||Y===Ee.Left&&!at,O=Y===Ee.Down&&!Dt||Y===Ee.Up&&!lt;if(C&&w.x!==T.x){const x=j.scrollLeft+S.x,k=Y===Ee.Right&&x<=wt.x||Y===Ee.Left&&x>=vt.x;if(k&&!S.y){j.scrollTo({left:x,behavior:m});return}k?D.x=j.scrollLeft-x:D.x=Y===Ee.Right?j.scrollLeft-wt.x:j.scrollLeft-vt.x,D.x&&j.scrollBy({left:-D.x,behavior:m});break}else if(O&&w.y!==T.y){const x=j.scrollTop+S.y,k=Y===Ee.Down&&x<=wt.y||Y===Ee.Up&&x>=vt.y;if(k&&!S.x){j.scrollTo({top:x,behavior:m});return}k?D.y=j.scrollTop-x:D.y=Y===Ee.Down?j.scrollTop-wt.y:j.scrollTop-vt.y,D.y&&j.scrollBy({top:-D.y,behavior:m});break}}this.handleMove(t,Ko(lf(T,this.referenceCoordinates),D))}}}handleMove(t,n){const{onMove:s}=this.props;t.preventDefault(),s(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}J1.activators=[{eventName:"onKeyDown",handler:(r,t,n)=>{let{keyboardCodes:s=Z1,onActivation:o}=t,{active:u}=n;const{code:h}=r.nativeEvent;if(s.start.includes(h)){const m=u.activatorNode.current;return m&&r.target!==m?!1:(r.preventDefault(),o?.({event:r.nativeEvent}),!0)}return!1}}];function eT(r){return!!(r&&"distance"in r)}function nT(r){return!!(r&&"delay"in r)}class jp{constructor(t,n,s){var o;s===void 0&&(s=tO(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:u}=t,{target:h}=u;this.props=t,this.events=n,this.document=hl(h),this.documentListeners=new Tu(this.document),this.listeners=new Tu(s),this.windowListeners=new Tu(ai(h)),this.initialCoordinates=(o=Vg(u))!=null?o:er,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Li.Resize,this.handleCancel),this.windowListeners.add(Li.DragStart,tT),this.windowListeners.add(Li.VisibilityChange,this.handleCancel),this.windowListeners.add(Li.ContextMenu,tT),this.documentListeners.add(Li.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(nT(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(eT(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:s,onPending:o}=this.props;o(s,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Li.Click,eO,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Li.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:s,initialCoordinates:o,props:u}=this,{onMove:h,options:{activationConstraint:m}}=u;if(!o)return;const g=(n=Vg(t))!=null?n:er,p=lf(o,g);if(!s&&m){if(eT(m)){if(m.tolerance!=null&&Xm(p,m.tolerance))return this.handleCancel();if(Xm(p,m.distance))return this.handleStart()}if(nT(m)&&Xm(p,m.tolerance))return this.handleCancel();this.handlePending(m,p);return}t.cancelable&&t.preventDefault(),h(g)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Ee.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const iO={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Bp extends jp{constructor(t){const{event:n}=t,s=hl(n.target);super(t,iO,s)}}Bp.activators=[{eventName:"onPointerDown",handler:(r,t)=>{let{nativeEvent:n}=r,{onActivation:s}=t;return!n.isPrimary||n.button!==0?!1:(s?.({event:n}),!0)}}];const rO={move:{name:"mousemove"},end:{name:"mouseup"}};var Lg;(function(r){r[r.RightClick=2]="RightClick"})(Lg||(Lg={}));class W1 extends jp{constructor(t){super(t,rO,hl(t.event.target))}}W1.activators=[{eventName:"onMouseDown",handler:(r,t)=>{let{nativeEvent:n}=r,{onActivation:s}=t;return n.button===Lg.RightClick?!1:(s?.({event:n}),!0)}}];const Zm={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class tS extends jp{constructor(t){super(t,Zm)}static setup(){return window.addEventListener(Zm.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Zm.move.name,t)};function t(){}}}tS.activators=[{eventName:"onTouchStart",handler:(r,t)=>{let{nativeEvent:n}=r,{onActivation:s}=t;const{touches:o}=n;return o.length>1?!1:(s?.({event:n}),!0)}}];var bu;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(bu||(bu={}));var cf;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(cf||(cf={}));function sO(r){let{acceleration:t,activator:n=bu.Pointer,canScroll:s,draggingRect:o,enabled:u,interval:h=5,order:m=cf.TreeOrder,pointerCoordinates:g,scrollableAncestors:p,scrollableAncestorRects:E,delta:T,threshold:S}=r;const D=oO({delta:T,disabled:!u}),[U,j]=Ex(),Y=Z.useRef({x:0,y:0}),lt=Z.useRef({x:0,y:0}),ht=Z.useMemo(()=>{switch(n){case bu.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case bu.DraggableRect:return o}},[n,o,g]),at=Z.useRef(null),Dt=Z.useCallback(()=>{const vt=at.current;if(!vt)return;const R=Y.current.x*lt.current.x,w=Y.current.y*lt.current.y;vt.scrollBy(R,w)},[]),wt=Z.useMemo(()=>m===cf.TreeOrder?[...p].reverse():p,[m,p]);Z.useEffect(()=>{if(!u||!p.length||!ht){j();return}for(const vt of wt){if(s?.(vt)===!1)continue;const R=p.indexOf(vt),w=E[R];if(!w)continue;const{direction:C,speed:O}=$x(vt,w,ht,t,S);for(const x of["x","y"])D[x][C[x]]||(O[x]=0,C[x]=0);if(O.x>0||O.y>0){j(),at.current=vt,U(Dt,h),Y.current=O,lt.current=C;return}}Y.current={x:0,y:0},lt.current={x:0,y:0},j()},[t,Dt,s,j,u,h,JSON.stringify(ht),JSON.stringify(D),U,p,wt,E,JSON.stringify(S)])}const aO={x:{[vn.Backward]:!1,[vn.Forward]:!1},y:{[vn.Backward]:!1,[vn.Forward]:!1}};function oO(r){let{delta:t,disabled:n}=r;const s=Mg(t);return Zu(o=>{if(n||!s||!o)return aO;const u={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[vn.Backward]:o.x[vn.Backward]||u.x===-1,[vn.Forward]:o.x[vn.Forward]||u.x===1},y:{[vn.Backward]:o.y[vn.Backward]||u.y===-1,[vn.Forward]:o.y[vn.Forward]||u.y===1}}},[n,t,s])}function lO(r,t){const n=t!=null?r.get(t):void 0,s=n?n.node.current:null;return Zu(o=>{var u;return t==null?null:(u=s??o)!=null?u:null},[s,t])}function uO(r,t){return Z.useMemo(()=>r.reduce((n,s)=>{const{sensor:o}=s,u=o.activators.map(h=>({eventName:h.eventName,handler:t(h.handler,s)}));return[...n,...u]},[]),[r,t])}var Vu;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(Vu||(Vu={}));var Ug;(function(r){r.Optimized="optimized"})(Ug||(Ug={}));const iT=new Map;function cO(r,t){let{dragging:n,dependencies:s,config:o}=t;const[u,h]=Z.useState(null),{frequency:m,measure:g,strategy:p}=o,E=Z.useRef(r),T=Y(),S=Mu(T),D=Z.useCallback(function(lt){lt===void 0&&(lt=[]),!S.current&&h(ht=>ht===null?lt:ht.concat(lt.filter(at=>!ht.includes(at))))},[S]),U=Z.useRef(null),j=Zu(lt=>{if(T&&!n)return iT;if(!lt||lt===iT||E.current!==r||u!=null){const ht=new Map;for(let at of r){if(!at)continue;if(u&&u.length>0&&!u.includes(at.id)&&at.rect.current){ht.set(at.id,at.rect.current);continue}const Dt=at.node.current,wt=Dt?new zp(g(Dt),Dt):null;at.rect.current=wt,wt&&ht.set(at.id,wt)}return ht}return lt},[r,u,n,T,g]);return Z.useEffect(()=>{E.current=r},[r]),Z.useEffect(()=>{T||D()},[n,T]),Z.useEffect(()=>{u&&u.length>0&&h(null)},[JSON.stringify(u)]),Z.useEffect(()=>{T||typeof m!="number"||U.current!==null||(U.current=setTimeout(()=>{D(),U.current=null},m))},[m,T,D,...s]),{droppableRects:j,measureDroppableContainers:D,measuringScheduled:u!=null};function Y(){switch(p){case Vu.Always:return!1;case Vu.BeforeDragging:return n;default:return!n}}}function eS(r,t){return Zu(n=>r?n||(typeof t=="function"?t(r):r):null,[t,r])}function hO(r,t){return eS(r,t)}function fO(r){let{callback:t,disabled:n}=r;const s=Lp(t),o=Z.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(s)},[s,n]);return Z.useEffect(()=>()=>o?.disconnect(),[o]),o}function Mf(r){let{callback:t,disabled:n}=r;const s=Lp(t),o=Z.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(s)},[n]);return Z.useEffect(()=>()=>o?.disconnect(),[o]),o}function dO(r){return new zp(Ju(r),r)}function rT(r,t,n){t===void 0&&(t=dO);const[s,o]=Z.useState(null);function u(){o(g=>{if(!r)return null;if(r.isConnected===!1){var p;return(p=g??n)!=null?p:null}const E=t(r);return JSON.stringify(g)===JSON.stringify(E)?g:E})}const h=fO({callback(g){if(r)for(const p of g){const{type:E,target:T}=p;if(E==="childList"&&T instanceof HTMLElement&&T.contains(r)){u();break}}}}),m=Mf({callback:u});return oa(()=>{u(),r?(m?.observe(r),h?.observe(document.body,{childList:!0,subtree:!0})):(m?.disconnect(),h?.disconnect())},[r]),s}function mO(r){const t=eS(r);return F1(r,t)}const sT=[];function gO(r){const t=Z.useRef(r),n=Zu(s=>r?s&&s!==sT&&r&&t.current&&r.parentNode===t.current.parentNode?s:Up(r):sT,[r]);return Z.useEffect(()=>{t.current=r},[r]),n}function pO(r){const[t,n]=Z.useState(null),s=Z.useRef(r),o=Z.useCallback(u=>{const h=Ym(u.target);h&&n(m=>m?(m.set(h,Pg(h)),new Map(m)):null)},[]);return Z.useEffect(()=>{const u=s.current;if(r!==u){h(u);const m=r.map(g=>{const p=Ym(g);return p?(p.addEventListener("scroll",o,{passive:!0}),[p,Pg(p)]):null}).filter(g=>g!=null);n(m.length?new Map(m):null),s.current=r}return()=>{h(r),h(u)};function h(m){m.forEach(g=>{const p=Ym(g);p?.removeEventListener("scroll",o)})}},[o,r]),Z.useMemo(()=>r.length?t?Array.from(t.values()).reduce((u,h)=>Ko(u,h),er):X1(r):er,[r,t])}function aT(r,t){t===void 0&&(t=[]);const n=Z.useRef(null);return Z.useEffect(()=>{n.current=null},t),Z.useEffect(()=>{const s=r!==er;s&&!n.current&&(n.current=r),!s&&n.current&&(n.current=null)},[r]),n.current?lf(r,n.current):er}function yO(r){Z.useEffect(()=>{if(!xf)return;const t=r.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of t)n?.()}},r.map(t=>{let{sensor:n}=t;return n}))}function _O(r,t){return Z.useMemo(()=>r.reduce((n,s)=>{let{eventName:o,handler:u}=s;return n[o]=h=>{u(h,t)},n},{}),[r,t])}function nS(r){return Z.useMemo(()=>r?Fx(r):null,[r])}const oT=[];function vO(r,t){t===void 0&&(t=Ju);const[n]=r,s=nS(n?ai(n):null),[o,u]=Z.useState(oT);function h(){u(()=>r.length?r.map(g=>$1(g)?s:new zp(t(g),g)):oT)}const m=Mf({callback:h});return oa(()=>{m?.disconnect(),h(),r.forEach(g=>m?.observe(g))},[r]),o}function EO(r){if(!r)return null;if(r.children.length>1)return r;const t=r.children[0];return Xu(t)?t:r}function TO(r){let{measure:t}=r;const[n,s]=Z.useState(null),o=Z.useCallback(p=>{for(const{target:E}of p)if(Xu(E)){s(T=>{const S=t(E);return T?{...T,width:S.width,height:S.height}:S});break}},[t]),u=Mf({callback:o}),h=Z.useCallback(p=>{const E=EO(p);u?.disconnect(),E&&u?.observe(E),s(E?t(E):null)},[t,u]),[m,g]=of(h);return Z.useMemo(()=>({nodeRef:m,rect:n,setRef:g}),[n,m,g])}const bO=[{sensor:Bp,options:{}},{sensor:J1,options:{}}],SO={current:{}},Ph={draggable:{measure:WE},droppable:{measure:WE,strategy:Vu.WhileDragging,frequency:Ug.Optimized},dragOverlay:{measure:Ju}};class Su extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,s;return(n=(s=this.get(t))==null?void 0:s.node.current)!=null?n:void 0}}const AO={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Su,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:uf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ph,measureDroppableContainers:uf,windowRect:null,measuringScheduled:!1},wO={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:uf,draggableNodes:new Map,over:null,measureDroppableContainers:uf},Vf=Z.createContext(wO),RO=Z.createContext(AO);function CO(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Su}}}function IO(r,t){switch(t.type){case fn.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case fn.DragMove:return r.draggable.active==null?r:{...r,draggable:{...r.draggable,translate:{x:t.coordinates.x-r.draggable.initialCoordinates.x,y:t.coordinates.y-r.draggable.initialCoordinates.y}}};case fn.DragEnd:case fn.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case fn.RegisterDroppable:{const{element:n}=t,{id:s}=n,o=new Su(r.droppable.containers);return o.set(s,n),{...r,droppable:{...r.droppable,containers:o}}}case fn.SetDroppableDisabled:{const{id:n,key:s,disabled:o}=t,u=r.droppable.containers.get(n);if(!u||s!==u.key)return r;const h=new Su(r.droppable.containers);return h.set(n,{...u,disabled:o}),{...r,droppable:{...r.droppable,containers:h}}}case fn.UnregisterDroppable:{const{id:n,key:s}=t,o=r.droppable.containers.get(n);if(!o||s!==o.key)return r;const u=new Su(r.droppable.containers);return u.delete(n),{...r,droppable:{...r.droppable,containers:u}}}default:return r}}function DO(r){let{disabled:t}=r;const{active:n,activatorEvent:s,draggableNodes:o}=Z.useContext(Vf),u=Mg(s),h=Mg(n?.id);return Z.useEffect(()=>{if(!t&&!s&&u&&h!=null){if(!q1(u)||document.activeElement===u.target)return;const m=o.get(h);if(!m)return;const{activatorNode:g,node:p}=m;if(!g.current&&!p.current)return;requestAnimationFrame(()=>{for(const E of[g.current,p.current]){if(!E)continue;const T=Sx(E);if(T){T.focus();break}}})}},[s,t,o,h,u]),null}function NO(r,t){let{transform:n,...s}=t;return r!=null&&r.length?r.reduce((o,u)=>u({transform:o,...s}),n):n}function xO(r){return Z.useMemo(()=>({draggable:{...Ph.draggable,...r?.draggable},droppable:{...Ph.droppable,...r?.droppable},dragOverlay:{...Ph.dragOverlay,...r?.dragOverlay}}),[r?.draggable,r?.droppable,r?.dragOverlay])}function OO(r){let{activeNode:t,measure:n,initialRect:s,config:o=!0}=r;const u=Z.useRef(!1),{x:h,y:m}=typeof o=="boolean"?{x:o,y:o}:o;oa(()=>{if(!h&&!m||!t){u.current=!1;return}if(u.current||!s)return;const p=t?.node.current;if(!p||p.isConnected===!1)return;const E=n(p),T=F1(E,s);if(h||(T.x=0),m||(T.y=0),u.current=!0,Math.abs(T.x)>0||Math.abs(T.y)>0){const S=G1(p);S&&S.scrollBy({top:T.y,left:T.x})}},[t,h,m,s,n])}const iS=Z.createContext({...er,scaleX:1,scaleY:1});var zs;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(zs||(zs={}));const MO=Z.memo(function(t){var n,s,o,u;let{id:h,accessibility:m,autoScroll:g=!0,children:p,sensors:E=bO,collisionDetection:T=Lx,measuring:S,modifiers:D,...U}=t;const j=Z.useReducer(IO,void 0,CO),[Y,lt]=j,[ht,at]=Dx(),[Dt,wt]=Z.useState(zs.Uninitialized),vt=Dt===zs.Initialized,{draggable:{active:R,nodes:w,translate:C},droppable:{containers:O}}=Y,x=R!=null?w.get(R):null,k=Z.useRef({initial:null,translated:null}),I=Z.useMemo(()=>{var Bt;return R!=null?{id:R,data:(Bt=x?.data)!=null?Bt:SO,rect:k}:null},[R,x]),Gt=Z.useRef(null),[we,X]=Z.useState(null),[ot,Tt]=Z.useState(null),Pt=Mu(U,Object.values(U)),Kt=Of("DndDescribedBy",h),M=Z.useMemo(()=>O.getEnabled(),[O]),W=xO(S),{droppableRects:ut,measureDroppableContainers:ft,measuringScheduled:Ct}=cO(M,{dragging:vt,dependencies:[C.x,C.y],config:W.droppable}),St=lO(w,R),Lt=Z.useMemo(()=>ot?Vg(ot):null,[ot]),De=Hi(),oe=hO(St,W.draggable.measure);OO({activeNode:R!=null?w.get(R):null,config:De.layoutShiftCompensation,initialRect:oe,measure:W.draggable.measure});const Be=rT(St,W.draggable.measure,oe),Ei=rT(St?St.parentElement:null),On=Z.useRef({activatorEvent:null,active:null,activeNode:St,collisionRect:null,collisions:null,droppableRects:ut,draggableNodes:w,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ui=O.getNodeFor((n=On.current.over)==null?void 0:n.id),Ye=TO({measure:W.dragOverlay.measure}),oi=(s=Ye.nodeRef.current)!=null?s:St,Mn=vt?(o=Ye.rect)!=null?o:Be:null,nr=!!(Ye.nodeRef.current&&Ye.rect),zi=mO(nr?null:Be),Te=nS(oi?ai(oi):null),le=gO(vt?Ui??St:null),jn=vO(le),ir=NO(D,{transform:{x:C.x-zi.x,y:C.y-zi.y,scaleX:1,scaleY:1},activatorEvent:ot,active:I,activeNodeRect:Be,containerNodeRect:Ei,draggingNodeRect:Mn,over:On.current.over,overlayNodeRect:Ye.rect,scrollableAncestors:le,scrollableAncestorRects:jn,windowRect:Te}),rr=Lt?Ko(Lt,C):null,Xe=pO(le),ji=aT(Xe),Sr=aT(Xe,[Be]),Bn=Ko(ir,ji),bn=Mn?jx(Mn,ir):null,Bi=I&&bn?T({active:I,collisionRect:bn,droppableRects:ut,droppableContainers:M,pointerCoordinates:rr}):null,Ar=kx(Bi,"id"),[qn,wr]=Z.useState(null),Hn=nr?ir:Ko(ir,Sr),qe=Ux(Hn,(u=qn?.rect)!=null?u:null,Be),mn=Z.useRef(null),be=Z.useCallback((Bt,Se)=>{let{sensor:Ae,options:Pe}=Se;if(Gt.current==null)return;const gn=w.get(Gt.current);if(!gn)return;const Ze=Bt.nativeEvent,Me=new Ae({active:Gt.current,activeNode:gn,event:Ze,options:Pe,context:On,onAbort(he){if(!w.get(he))return;const{onDragAbort:He}=Pt.current,st={id:he};He?.(st),ht({type:"onDragAbort",event:st})},onPending(he,fe,He,st){if(!w.get(he))return;const{onDragPending:te}=Pt.current,Ne={id:he,constraint:fe,initialCoordinates:He,offset:st};te?.(Ne),ht({type:"onDragPending",event:Ne})},onStart(he){const fe=Gt.current;if(fe==null)return;const He=w.get(fe);if(!He)return;const{onDragStart:st}=Pt.current,ln={activatorEvent:Ze,active:{id:fe,data:He.data,rect:k}};fu.unstable_batchedUpdates(()=>{st?.(ln),wt(zs.Initializing),lt({type:fn.DragStart,initialCoordinates:he,active:fe}),ht({type:"onDragStart",event:ln}),X(mn.current),Tt(Ze)})},onMove(he){lt({type:fn.DragMove,coordinates:he})},onEnd:G(fn.DragEnd),onCancel:G(fn.DragCancel)});mn.current=Me;function G(he){return async function(){const{active:He,collisions:st,over:ln,scrollAdjustedTranslate:te}=On.current;let Ne=null;if(He&&te){const{cancelDrop:un}=Pt.current;Ne={activatorEvent:Ze,active:He,collisions:st,delta:te,over:ln},he===fn.DragEnd&&typeof un=="function"&&await Promise.resolve(un(Ne))&&(he=fn.DragCancel)}Gt.current=null,fu.unstable_batchedUpdates(()=>{lt({type:he}),wt(zs.Uninitialized),wr(null),X(null),Tt(null),mn.current=null;const un=he===fn.DragEnd?"onDragEnd":"onDragCancel";if(Ne){const de=Pt.current[un];de?.(Ne),ht({type:un,event:Ne})}})}}},[w]),Rr=Z.useCallback((Bt,Se)=>(Ae,Pe)=>{const gn=Ae.nativeEvent,Ze=w.get(Pe);if(Gt.current!==null||!Ze||gn.dndKit||gn.defaultPrevented)return;const Me={active:Ze};Bt(Ae,Se.options,Me)===!0&&(gn.dndKit={capturedBy:Se.sensor},Gt.current=Pe,be(Ae,Se))},[w,be]),qi=uO(E,Rr);yO(E),oa(()=>{Be&&Dt===zs.Initializing&&wt(zs.Initialized)},[Be,Dt]),Z.useEffect(()=>{const{onDragMove:Bt}=Pt.current,{active:Se,activatorEvent:Ae,collisions:Pe,over:gn}=On.current;if(!Se||!Ae)return;const Ze={active:Se,activatorEvent:Ae,collisions:Pe,delta:{x:Bn.x,y:Bn.y},over:gn};fu.unstable_batchedUpdates(()=>{Bt?.(Ze),ht({type:"onDragMove",event:Ze})})},[Bn.x,Bn.y]),Z.useEffect(()=>{const{active:Bt,activatorEvent:Se,collisions:Ae,droppableContainers:Pe,scrollAdjustedTranslate:gn}=On.current;if(!Bt||Gt.current==null||!Se||!gn)return;const{onDragOver:Ze}=Pt.current,Me=Pe.get(Ar),G=Me&&Me.rect.current?{id:Me.id,rect:Me.rect.current,data:Me.data,disabled:Me.disabled}:null,he={active:Bt,activatorEvent:Se,collisions:Ae,delta:{x:gn.x,y:gn.y},over:G};fu.unstable_batchedUpdates(()=>{wr(G),Ze?.(he),ht({type:"onDragOver",event:he})})},[Ar]),oa(()=>{On.current={activatorEvent:ot,active:I,activeNode:St,collisionRect:bn,collisions:Bi,droppableRects:ut,draggableNodes:w,draggingNode:oi,draggingNodeRect:Mn,droppableContainers:O,over:qn,scrollableAncestors:le,scrollAdjustedTranslate:Bn},k.current={initial:Mn,translated:bn}},[I,St,Bi,bn,w,oi,Mn,ut,O,qn,le,Bn]),sO({...De,delta:C,draggingRect:bn,pointerCoordinates:rr,scrollableAncestors:le,scrollableAncestorRects:jn});const es=Z.useMemo(()=>({active:I,activeNode:St,activeNodeRect:Be,activatorEvent:ot,collisions:Bi,containerNodeRect:Ei,dragOverlay:Ye,draggableNodes:w,droppableContainers:O,droppableRects:ut,over:qn,measureDroppableContainers:ft,scrollableAncestors:le,scrollableAncestorRects:jn,measuringConfiguration:W,measuringScheduled:Ct,windowRect:Te}),[I,St,Be,ot,Bi,Ei,Ye,w,O,ut,qn,ft,le,jn,W,Ct,Te]),Yn=Z.useMemo(()=>({activatorEvent:ot,activators:qi,active:I,activeNodeRect:Be,ariaDescribedById:{draggable:Kt},dispatch:lt,draggableNodes:w,over:qn,measureDroppableContainers:ft}),[ot,qi,I,Be,lt,Kt,w,qn,ft]);return si.createElement(H1.Provider,{value:at},si.createElement(Vf.Provider,{value:Yn},si.createElement(RO.Provider,{value:es},si.createElement(iS.Provider,{value:qe},p)),si.createElement(DO,{disabled:m?.restoreFocus===!1})),si.createElement(Ox,{...m,hiddenTextDescribedById:Kt}));function Hi(){const Bt=we?.autoScrollEnabled===!1,Se=typeof g=="object"?g.enabled===!1:g===!1,Ae=vt&&!Bt&&!Se;return typeof g=="object"?{...g,enabled:Ae}:{enabled:Ae}}}),VO=Z.createContext(null),lT="button",kO="Draggable";function PO(r){let{id:t,data:n,disabled:s=!1,attributes:o}=r;const u=Of(kO),{activators:h,activatorEvent:m,active:g,activeNodeRect:p,ariaDescribedById:E,draggableNodes:T,over:S}=Z.useContext(Vf),{role:D=lT,roleDescription:U="draggable",tabIndex:j=0}=o??{},Y=g?.id===t,lt=Z.useContext(Y?iS:VO),[ht,at]=of(),[Dt,wt]=of(),vt=_O(h,t),R=Mu(n);oa(()=>(T.set(t,{id:t,key:u,node:ht,activatorNode:Dt,data:R}),()=>{const C=T.get(t);C&&C.key===u&&T.delete(t)}),[T,t]);const w=Z.useMemo(()=>({role:D,tabIndex:j,"aria-disabled":s,"aria-pressed":Y&&D===lT?!0:void 0,"aria-roledescription":U,"aria-describedby":E.draggable}),[s,D,j,Y,U,E.draggable]);return{active:g,activatorEvent:m,activeNodeRect:p,attributes:w,isDragging:Y,listeners:s?void 0:vt,node:ht,over:S,setNodeRef:at,setActivatorNodeRef:wt,transform:lt}}const LO="Droppable",UO={timeout:25};function zO(r){let{data:t,disabled:n=!1,id:s,resizeObserverConfig:o}=r;const u=Of(LO),{active:h,dispatch:m,over:g,measureDroppableContainers:p}=Z.useContext(Vf),E=Z.useRef({disabled:n}),T=Z.useRef(!1),S=Z.useRef(null),D=Z.useRef(null),{disabled:U,updateMeasurementsFor:j,timeout:Y}={...UO,...o},lt=Mu(j??s),ht=Z.useCallback(()=>{if(!T.current){T.current=!0;return}D.current!=null&&clearTimeout(D.current),D.current=setTimeout(()=>{p(Array.isArray(lt.current)?lt.current:[lt.current]),D.current=null},Y)},[Y]),at=Mf({callback:ht,disabled:U||!h}),Dt=Z.useCallback((w,C)=>{at&&(C&&(at.unobserve(C),T.current=!1),w&&at.observe(w))},[at]),[wt,vt]=of(Dt),R=Mu(t);return Z.useEffect(()=>{!at||!wt.current||(at.disconnect(),T.current=!1,at.observe(wt.current))},[wt,at]),Z.useEffect(()=>(m({type:fn.RegisterDroppable,element:{id:s,key:u,disabled:n,node:wt,rect:S,data:R}}),()=>m({type:fn.UnregisterDroppable,key:u,id:s})),[s]),Z.useEffect(()=>{n!==E.current.disabled&&(m({type:fn.SetDroppableDisabled,id:s,key:u,disabled:n}),E.current.disabled=n)},[s,u,n,m]),{active:h,rect:S,isOver:g?.id===s,node:wt,over:g,setNodeRef:vt}}function jO(r){return r!==null?{comment:r,variations:[]}:{variations:[]}}function BO(r,t,n,s,o){const u={move:r,variations:o};return t&&(u.suffix=t),n&&(u.nag=n),s!==null&&(u.comment=s),u}function qO(...r){const[t,...n]=r;let s=t;for(const o of n)o!==null&&(s.variations=[o,...o.variations],o.variations=[],s=o);return t}function HO(r,t){if(t.marker&&t.marker.comment){let n=t.root;for(;;){const s=n.variations[0];if(!s){n.comment=t.marker.comment;break}n=s}}return{headers:r,root:t.root,result:(t.marker&&t.marker.result)??void 0}}function FO(r,t){function n(){this.constructor=r}n.prototype=t.prototype,r.prototype=new n}function el(r,t,n,s){var o=Error.call(this,r);return Object.setPrototypeOf&&Object.setPrototypeOf(o,el.prototype),o.expected=t,o.found=n,o.location=s,o.name="SyntaxError",o}FO(el,Error);function Jm(r,t,n){return n=n||" ",r.length>t?r:(t-=r.length,n+=n.repeat(t),r+n.slice(0,t))}el.prototype.format=function(r){var t="Error: "+this.message;if(this.location){var n=null,s;for(s=0;s<r.length;s++)if(r[s].source===this.location.source){n=r[s].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,u=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(o):o,h=this.location.source+":"+u.line+":"+u.column;if(n){var m=this.location.end,g=Jm("",u.line.toString().length," "),p=n[o.line-1],E=o.line===m.line?m.column:p.length+1,T=E-o.column||1;t+=`
 --> `+h+`
`+g+` |
`+u.line+" | "+p+`
`+g+" | "+Jm("",o.column-1," ")+Jm("",T,"^")}else t+=`
 at `+h}return t};el.buildMessage=function(r,t){var n={literal:function(p){return'"'+o(p.text)+'"'},class:function(p){var E=p.parts.map(function(T){return Array.isArray(T)?u(T[0])+"-"+u(T[1]):u(T)});return"["+(p.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(p){return p.description}};function s(p){return p.charCodeAt(0).toString(16).toUpperCase()}function o(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+s(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+s(E)})}function u(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+s(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+s(E)})}function h(p){return n[p.type](p)}function m(p){var E=p.map(h),T,S;if(E.sort(),E.length>0){for(T=1,S=1;T<E.length;T++)E[T-1]!==E[T]&&(E[S]=E[T],S++);E.length=S}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function g(p){return p?'"'+o(p)+'"':"end of input"}return"Expected "+m(r)+" but "+g(t)+" found."};function GO(r,t){t=t!==void 0?t:{};var n={},s=t.grammarSource,o={pgn:Ya},u=Ya,h="[",m='"',g="]",p=".",E="O-O-O",T="O-O",S="0-0-0",D="0-0",U="$",j="{",Y="}",lt=";",ht="(",at=")",Dt="1-0",wt="0-1",vt="1/2-1/2",R="*",w=/^[a-zA-Z]/,C=/^[^"]/,O=/^[0-9]/,x=/^[.]/,k=/^[a-zA-Z1-8\-=]/,I=/^[+#]/,Gt=/^[!?]/,we=/^[^}]/,X=/^[^\r\n]/,ot=/^[ \t\r\n]/,Tt=de("tag pair"),Pt=te("[",!1),Kt=te('"',!1),M=te("]",!1),W=de("tag name"),ut=Ne([["a","z"],["A","Z"]],!1,!1),ft=de("tag value"),Ct=Ne(['"'],!0,!1),St=de("move number"),Lt=Ne([["0","9"]],!1,!1),De=te(".",!1),oe=Ne(["."],!1,!1),Be=de("standard algebraic notation"),Ei=te("O-O-O",!1),On=te("O-O",!1),Ui=te("0-0-0",!1),Ye=te("0-0",!1),oi=Ne([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),Mn=Ne(["+","#"],!1,!1),nr=de("suffix annotation"),zi=Ne(["!","?"],!1,!1),Te=de("NAG"),le=te("$",!1),jn=de("brace comment"),ir=te("{",!1),rr=Ne(["}"],!0,!1),Xe=te("}",!1),ji=de("rest of line comment"),Sr=te(";",!1),Bn=Ne(["\r",`
`],!0,!1),bn=de("variation"),Bi=te("(",!1),Ar=te(")",!1),qn=de("game termination marker"),wr=te("1-0",!1),Hn=te("0-1",!1),qe=te("1/2-1/2",!1),mn=te("*",!1),be=de("whitespace"),Rr=Ne([" ","	","\r",`
`],!1,!1),qi=function(L,K){return HO(L,K)},es=function(L){return Object.fromEntries(L)},Yn=function(L,K){return[L,K]},Hi=function(L,K){return{root:L,marker:K}},Bt=function(L,K){return qO(jO(L),...K.flat())},Se=function(L,K,H,mt,Et){return BO(L,K,H,mt,Et)},Ae=function(L){return L},Pe=function(L){return L.replace(/[\r\n]+/g," ")},gn=function(L){return L.trim()},Ze=function(L){return L},Me=function(L,K){return{result:L,comment:K}},G=t.peg$currPos|0,he=[{line:1,column:1}],fe=G,He=t.peg$maxFailExpected||[],st=t.peg$silentFails|0,ln;if(t.startRule){if(!(t.startRule in o))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');u=o[t.startRule]}function te(L,K){return{type:"literal",text:L,ignoreCase:K}}function Ne(L,K,H){return{type:"class",parts:L,inverted:K,ignoreCase:H}}function un(){return{type:"end"}}function de(L){return{type:"other",description:L}}function Ve(L){var K=he[L],H;if(K)return K;if(L>=he.length)H=he.length-1;else for(H=L;!he[--H];);for(K=he[H],K={line:K.line,column:K.column};H<L;)r.charCodeAt(H)===10?(K.line++,K.column=1):K.column++,H++;return he[L]=K,K}function Fe(L,K,H){var mt=Ve(L),Et=Ve(K),Jt={source:s,start:{offset:L,line:mt.line,column:mt.column},end:{offset:K,line:Et.line,column:Et.column}};return Jt}function pt(L){G<fe||(G>fe&&(fe=G,He=[]),He.push(L))}function ns(L,K,H){return new el(el.buildMessage(L,K),L,K,H)}function Ya(){var L,K,H;return L=G,K=Xa(),H=bi(),L=qi(K,H),L}function Xa(){var L,K,H;for(L=G,K=[],H=ca();H!==n;)K.push(H),H=ca();return H=Je(),L=es(K),L}function ca(){var L,K,H,mt,Et,Jt,qt;return st++,L=G,Je(),r.charCodeAt(G)===91?(K=h,G++):(K=n,st===0&&pt(Pt)),K!==n?(Je(),H=Ti(),H!==n?(Je(),r.charCodeAt(G)===34?(mt=m,G++):(mt=n,st===0&&pt(Kt)),mt!==n?(Et=is(),r.charCodeAt(G)===34?(Jt=m,G++):(Jt=n,st===0&&pt(Kt)),Jt!==n?(Je(),r.charCodeAt(G)===93?(qt=g,G++):(qt=n,st===0&&pt(M)),qt!==n?L=Yn(H,Et):(G=L,L=n)):(G=L,L=n)):(G=L,L=n)):(G=L,L=n)):(G=L,L=n),st--,L===n&&st===0&&pt(Tt),L}function Ti(){var L,K,H;if(st++,L=G,K=[],H=r.charAt(G),w.test(H)?G++:(H=n,st===0&&pt(ut)),H!==n)for(;H!==n;)K.push(H),H=r.charAt(G),w.test(H)?G++:(H=n,st===0&&pt(ut));else K=n;return K!==n?L=r.substring(L,G):L=K,st--,L===n&&(K=n,st===0&&pt(W)),L}function is(){var L,K,H;for(st++,L=G,K=[],H=r.charAt(G),C.test(H)?G++:(H=n,st===0&&pt(Ct));H!==n;)K.push(H),H=r.charAt(G),C.test(H)?G++:(H=n,st===0&&pt(Ct));return L=r.substring(L,G),st--,K=n,st===0&&pt(ft),L}function bi(){var L,K,H;return L=G,K=Fn(),Je(),H=da(),H===n&&(H=null),Je(),L=Hi(K,H),L}function Fn(){var L,K,H,mt;for(L=G,K=Xn(),K===n&&(K=null),H=[],mt=Vn();mt!==n;)H.push(mt),mt=Vn();return L=Bt(K,H),L}function Vn(){var L,K,H,mt,Et,Jt,qt,wi;if(L=G,Je(),Si(),Je(),K=Le(),K!==n){for(H=ha(),H===n&&(H=null),mt=[],Et=rs();Et!==n;)mt.push(Et),Et=rs();for(Et=Je(),Jt=Xn(),Jt===n&&(Jt=null),qt=[],wi=ss();wi!==n;)qt.push(wi),wi=ss();L=Se(K,H,mt,Jt,qt)}else G=L,L=n;return L}function Si(){var L,K,H,mt,Et,Jt;for(st++,L=G,K=[],H=r.charAt(G),O.test(H)?G++:(H=n,st===0&&pt(Lt));H!==n;)K.push(H),H=r.charAt(G),O.test(H)?G++:(H=n,st===0&&pt(Lt));if(r.charCodeAt(G)===46?(H=p,G++):(H=n,st===0&&pt(De)),H!==n){for(mt=Je(),Et=[],Jt=r.charAt(G),x.test(Jt)?G++:(Jt=n,st===0&&pt(oe));Jt!==n;)Et.push(Jt),Jt=r.charAt(G),x.test(Jt)?G++:(Jt=n,st===0&&pt(oe));K=[K,H,mt,Et],L=K}else G=L,L=n;return st--,L===n&&(K=n,st===0&&pt(St)),L}function Le(){var L,K,H,mt,Et,Jt;if(st++,L=G,K=G,r.substr(G,5)===E?(H=E,G+=5):(H=n,st===0&&pt(Ei)),H===n&&(r.substr(G,3)===T?(H=T,G+=3):(H=n,st===0&&pt(On)),H===n&&(r.substr(G,5)===S?(H=S,G+=5):(H=n,st===0&&pt(Ui)),H===n&&(r.substr(G,3)===D?(H=D,G+=3):(H=n,st===0&&pt(Ye)),H===n))))if(H=G,mt=r.charAt(G),w.test(mt)?G++:(mt=n,st===0&&pt(ut)),mt!==n){if(Et=[],Jt=r.charAt(G),k.test(Jt)?G++:(Jt=n,st===0&&pt(oi)),Jt!==n)for(;Jt!==n;)Et.push(Jt),Jt=r.charAt(G),k.test(Jt)?G++:(Jt=n,st===0&&pt(oi));else Et=n;Et!==n?(mt=[mt,Et],H=mt):(G=H,H=n)}else G=H,H=n;return H!==n?(mt=r.charAt(G),I.test(mt)?G++:(mt=n,st===0&&pt(Mn)),mt===n&&(mt=null),H=[H,mt],K=H):(G=K,K=n),K!==n?L=r.substring(L,G):L=K,st--,L===n&&(K=n,st===0&&pt(Be)),L}function ha(){var L,K,H;for(st++,L=G,K=[],H=r.charAt(G),Gt.test(H)?G++:(H=n,st===0&&pt(zi));H!==n;)K.push(H),K.length>=2?H=n:(H=r.charAt(G),Gt.test(H)?G++:(H=n,st===0&&pt(zi)));return K.length<1?(G=L,L=n):L=K,st--,L===n&&(K=n,st===0&&pt(nr)),L}function rs(){var L,K,H,mt,Et;if(st++,L=G,Je(),r.charCodeAt(G)===36?(K=U,G++):(K=n,st===0&&pt(le)),K!==n){if(H=G,mt=[],Et=r.charAt(G),O.test(Et)?G++:(Et=n,st===0&&pt(Lt)),Et!==n)for(;Et!==n;)mt.push(Et),Et=r.charAt(G),O.test(Et)?G++:(Et=n,st===0&&pt(Lt));else mt=n;mt!==n?H=r.substring(H,G):H=mt,H!==n?L=Ae(H):(G=L,L=n)}else G=L,L=n;return st--,L===n&&st===0&&pt(Te),L}function Xn(){var L;return L=Ai(),L===n&&(L=fa()),L}function Ai(){var L,K,H,mt,Et;if(st++,L=G,r.charCodeAt(G)===123?(K=j,G++):(K=n,st===0&&pt(ir)),K!==n){for(H=G,mt=[],Et=r.charAt(G),we.test(Et)?G++:(Et=n,st===0&&pt(rr));Et!==n;)mt.push(Et),Et=r.charAt(G),we.test(Et)?G++:(Et=n,st===0&&pt(rr));H=r.substring(H,G),r.charCodeAt(G)===125?(mt=Y,G++):(mt=n,st===0&&pt(Xe)),mt!==n?L=Pe(H):(G=L,L=n)}else G=L,L=n;return st--,L===n&&(K=n,st===0&&pt(jn)),L}function fa(){var L,K,H,mt,Et;if(st++,L=G,r.charCodeAt(G)===59?(K=lt,G++):(K=n,st===0&&pt(Sr)),K!==n){for(H=G,mt=[],Et=r.charAt(G),X.test(Et)?G++:(Et=n,st===0&&pt(Bn));Et!==n;)mt.push(Et),Et=r.charAt(G),X.test(Et)?G++:(Et=n,st===0&&pt(Bn));H=r.substring(H,G),L=gn(H)}else G=L,L=n;return st--,L===n&&(K=n,st===0&&pt(ji)),L}function ss(){var L,K,H,mt;return st++,L=G,Je(),r.charCodeAt(G)===40?(K=ht,G++):(K=n,st===0&&pt(Bi)),K!==n?(H=Fn(),H!==n?(Je(),r.charCodeAt(G)===41?(mt=at,G++):(mt=n,st===0&&pt(Ar)),mt!==n?L=Ze(H):(G=L,L=n)):(G=L,L=n)):(G=L,L=n),st--,L===n&&st===0&&pt(bn),L}function da(){var L,K,H;return st++,L=G,r.substr(G,3)===Dt?(K=Dt,G+=3):(K=n,st===0&&pt(wr)),K===n&&(r.substr(G,3)===wt?(K=wt,G+=3):(K=n,st===0&&pt(Hn)),K===n&&(r.substr(G,7)===vt?(K=vt,G+=7):(K=n,st===0&&pt(qe)),K===n&&(r.charCodeAt(G)===42?(K=R,G++):(K=n,st===0&&pt(mn))))),K!==n?(Je(),H=Xn(),H===n&&(H=null),L=Me(K,H)):(G=L,L=n),st--,L===n&&(K=n,st===0&&pt(qn)),L}function Je(){var L,K;for(st++,L=[],K=r.charAt(G),ot.test(K)?G++:(K=n,st===0&&pt(Rr));K!==n;)L.push(K),K=r.charAt(G),ot.test(K)?G++:(K=n,st===0&&pt(Rr));return st--,K=n,st===0&&pt(be),L}if(ln=u(),t.peg$library)return{peg$result:ln,peg$currPos:G,peg$FAILED:n,peg$maxFailExpected:He,peg$maxFailPos:fe};if(ln!==n&&G===r.length)return ln;throw ln!==n&&G<r.length&&pt(un()),ns(He,fe<r.length?r.charAt(fe):null,fe<r.length?Fe(fe,fe+1):Fe(fe,fe))}const Lh=0xffffffffffffffffn;function Wm(r,t){return(r<<t|r>>64n-t)&0xffffffffffffffffn}function uT(r,t){return r*t&Lh}function KO(r){return function(){let t=BigInt(r&Lh),n=BigInt(r>>64n&Lh);const s=uT(Wm(uT(t,5n),7n),9n);return n^=t,t=(Wm(t,24n)^n^n<<16n)&Lh,n=Wm(n,37n),r=n<<64n|t,s}}const kf=KO(0xa187eb39cdcaed8f31c4b365b102e01en),QO=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>kf()))),$O=Array.from({length:8},()=>kf()),YO=Array.from({length:16},()=>kf()),tg=kf(),Ln="w",gi="b",rn="p",zg="n",Uh="b",du="r",js="q",hn="k",eg="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Sh{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(t,n){const{color:s,piece:o,from:u,to:h,flags:m,captured:g,promotion:p}=n,E=yn(u),T=yn(h);this.color=s,this.piece=o,this.from=E,this.to=T,this.san=t._moveToSan(n,t._moves({legal:!0})),this.lan=E+T,this.before=t.fen(),t._makeMove(n),this.after=t.fen(),t._undoMove(),this.flags="";for(const S in Mt)Mt[S]&m&&(this.flags+=La[S]);g&&(this.captured=g),p&&(this.promotion=p,this.lan+=p)}isCapture(){return this.flags.indexOf(La.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(La.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(La.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(La.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(La.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(La.BIG_PAWN)>-1}}const In=-1,La={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},Mt={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},jg={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},XO={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},ZO={...jg,...XO},xt={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},ng={b:[16,32,17,15],w:[-16,-32,-17,-15]},cT={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},JO=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],WO=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],tM={p:1,n:2,b:4,r:8,q:16,k:32},eM="pnbrqkPNBRQK",hT=[zg,Uh,du,js],nM=7,iM=6,rM=1,sM=0,Ah={[hn]:Mt.KSIDE_CASTLE,[js]:Mt.QSIDE_CASTLE},Ls={w:[{square:xt.a1,flag:Mt.QSIDE_CASTLE},{square:xt.h1,flag:Mt.KSIDE_CASTLE}],b:[{square:xt.a8,flag:Mt.QSIDE_CASTLE},{square:xt.h8,flag:Mt.KSIDE_CASTLE}]},aM={b:rM,w:iM},ig="--";function Ba(r){return r>>4}function ku(r){return r&15}function rS(r){return"0123456789".indexOf(r)!==-1}function yn(r){const t=ku(r),n=Ba(r);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function su(r){return r===Ln?gi:Ln}function oM(r){const t=r.split(/\s+/);if(t.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(t[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const s=parseInt(t[4],10);if(isNaN(s)||s<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const o=t[0].split("/");if(o.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let h=0;h<o.length;h++){let m=0,g=!1;for(let p=0;p<o[h].length;p++)if(rS(o[h][p])){if(g)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};m+=parseInt(o[h][p],10),g=!0}else{if(!/^[prnbqkPRNBQK]$/.test(o[h][p]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};m+=1,g=!1}if(m!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(t[3][1]=="3"&&t[1]=="w"||t[3][1]=="6"&&t[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const u=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:h,regex:m}of u){if(!m.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${h} king`};if((t[0].match(m)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${h} kings`}}return Array.from(o[0]+o[7]).some(h=>h.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function lM(r,t){const n=r.from,s=r.to,o=r.piece;let u=0,h=0,m=0;for(let g=0,p=t.length;g<p;g++){const E=t[g].from,T=t[g].to,S=t[g].piece;o===S&&n!==E&&s===T&&(u++,Ba(n)===Ba(E)&&h++,ku(n)===ku(E)&&m++)}return u>0?h>0&&m>0?yn(n):m>0?yn(n).charAt(1):yn(n).charAt(0):""}function Us(r,t,n,s,o,u=void 0,h=Mt.NORMAL){const m=Ba(s);if(o===rn&&(m===nM||m===sM))for(let g=0;g<hT.length;g++){const p=hT[g];r.push({color:t,from:n,to:s,piece:o,captured:u,promotion:p,flags:h|Mt.PROMOTION})}else r.push({color:t,from:n,to:s,piece:o,captured:u,flags:h})}function fT(r){let t=r.charAt(0);return t>="a"&&t<="h"?r.match(/[a-h]\d.*[a-h]\d/)?void 0:rn:(t=t.toLowerCase(),t==="o"?hn:t)}function rg(r){return r.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class uM{_board=new Array(128);_turn=Ln;_header={};_kings={w:In,b:In};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_hash=0n;_positionCount=new Map;constructor(t=eg,{skipValidation:n=!1}={}){this.load(t,{skipValidation:n})}clear({preserveHeaders:t=!1}={}){this._board=new Array(128),this._kings={w:In,b:In},this._turn=Ln,this._castling={w:0,b:0},this._epSquare=In,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=t?this._header:{...ZO},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(t,{skipValidation:n=!1,preserveHeaders:s=!1}={}){let o=t.split(/\s+/);if(o.length>=2&&o.length<6){const m=["-","-","0","1"];t=o.concat(m.slice(-(6-o.length))).join(" ")}if(o=t.split(/\s+/),!n){const{ok:m,error:g}=oM(t);if(!m)throw new Error(g)}const u=o[0];let h=0;this.clear({preserveHeaders:s});for(let m=0;m<u.length;m++){const g=u.charAt(m);if(g==="/")h+=8;else if(rS(g))h+=parseInt(g,10);else{const p=g<"a"?Ln:gi;this._put({type:g.toLowerCase(),color:p},yn(h)),h++}}this._turn=o[1],o[2].indexOf("K")>-1&&(this._castling.w|=Mt.KSIDE_CASTLE),o[2].indexOf("Q")>-1&&(this._castling.w|=Mt.QSIDE_CASTLE),o[2].indexOf("k")>-1&&(this._castling.b|=Mt.KSIDE_CASTLE),o[2].indexOf("q")>-1&&(this._castling.b|=Mt.QSIDE_CASTLE),this._epSquare=o[3]==="-"?In:xt[o[3]],this._halfMoves=parseInt(o[4],10),this._moveNumber=parseInt(o[5],10),this._hash=this._computeHash(),this._updateSetup(t),this._incPositionCount()}fen({forceEnpassantSquare:t=!1}={}){let n=0,s="";for(let h=xt.a8;h<=xt.h1;h++){if(this._board[h]){n>0&&(s+=n,n=0);const{color:m,type:g}=this._board[h];s+=m===Ln?g.toUpperCase():g.toLowerCase()}else n++;h+1&136&&(n>0&&(s+=n),h!==xt.h1&&(s+="/"),n=0,h+=8)}let o="";this._castling[Ln]&Mt.KSIDE_CASTLE&&(o+="K"),this._castling[Ln]&Mt.QSIDE_CASTLE&&(o+="Q"),this._castling[gi]&Mt.KSIDE_CASTLE&&(o+="k"),this._castling[gi]&Mt.QSIDE_CASTLE&&(o+="q"),o=o||"-";let u="-";if(this._epSquare!==In)if(t)u=yn(this._epSquare);else{const h=this._epSquare+(this._turn===Ln?16:-16),m=[h+1,h-1];for(const g of m){if(g&136)continue;const p=this._turn;if(this._board[g]?.color===p&&this._board[g]?.type===rn){this._makeMove({color:p,from:g,to:this._epSquare,piece:rn,captured:rn,flags:Mt.EP_CAPTURE});const E=!this._isKingAttacked(p);if(this._undoMove(),E){u=yn(this._epSquare);break}}}}return[s,this._turn,o,u,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(t){if(!this._board[t])return 0n;const{color:n,type:s}=this._board[t],o={w:0,b:1}[n],u={p:0,n:1,b:2,r:3,q:4,k:5}[s];return QO[o][u][t]}_epKey(){return this._epSquare===In?0n:$O[this._epSquare&7]}_castlingKey(){const t=this._castling.w>>5|this._castling.b>>3;return YO[t]}_computeHash(){let t=0n;for(let n=xt.a8;n<=xt.h1;n++){if(n&136){n+=7;continue}this._board[n]&&(t^=this._pieceKey(n))}return t^=this._epKey(),t^=this._castlingKey(),this._turn==="b"&&(t^=tg),t}_updateSetup(t){this._history.length>0||(t!==eg?(this._header.SetUp="1",this._header.FEN=t):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(eg)}get(t){return this._board[xt[t]]}findPiece(t){const n=[];for(let s=xt.a8;s<=xt.h1;s++){if(s&136){s+=7;continue}!this._board[s]||this._board[s]?.color!==t.color||this._board[s].color===t.color&&this._board[s].type===t.type&&n.push(yn(s))}return n}put({type:t,color:n},s){return this._put({type:t,color:n},s)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(t,n){this._hash^=this._pieceKey(t),this._board[t]=n,this._hash^=this._pieceKey(t)}_put({type:t,color:n},s){if(eM.indexOf(t.toLowerCase())===-1||!(s in xt))return!1;const o=xt[s];if(t==hn&&!(this._kings[n]==In||this._kings[n]==o))return!1;const u=this._board[o];return u&&u.type===hn&&(this._kings[u.color]=In),this._set(o,{type:t,color:n}),t===hn&&(this._kings[n]=o),!0}_clear(t){this._hash^=this._pieceKey(t),delete this._board[t]}remove(t){const n=this.get(t);return this._clear(xt[t]),n&&n.type===hn&&(this._kings[n.color]=In),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){this._hash^=this._castlingKey();const t=this._board[xt.e1]?.type===hn&&this._board[xt.e1]?.color===Ln,n=this._board[xt.e8]?.type===hn&&this._board[xt.e8]?.color===gi;(!t||this._board[xt.a1]?.type!==du||this._board[xt.a1]?.color!==Ln)&&(this._castling.w&=-65),(!t||this._board[xt.h1]?.type!==du||this._board[xt.h1]?.color!==Ln)&&(this._castling.w&=-33),(!n||this._board[xt.a8]?.type!==du||this._board[xt.a8]?.color!==gi)&&(this._castling.b&=-65),(!n||this._board[xt.h8]?.type!==du||this._board[xt.h8]?.color!==gi)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){if(this._epSquare===In)return;const t=this._epSquare+(this._turn===Ln?-16:16),n=this._epSquare+(this._turn===Ln?16:-16),s=[n+1,n-1];if(this._board[t]!==null||this._board[this._epSquare]!==null||this._board[n]?.color!==su(this._turn)||this._board[n]?.type!==rn){this._hash^=this._epKey(),this._epSquare=In;return}const o=u=>!(u&136)&&this._board[u]?.color===this._turn&&this._board[u]?.type===rn;s.some(o)||(this._hash^=this._epKey(),this._epSquare=In)}_attacked(t,n,s){const o=[];for(let u=xt.a8;u<=xt.h1;u++){if(u&136){u+=7;continue}if(this._board[u]===void 0||this._board[u].color!==t)continue;const h=this._board[u],m=u-n;if(m===0)continue;const g=m+119;if(JO[g]&tM[h.type]){if(h.type===rn){if(m>0&&h.color===Ln||m<=0&&h.color===gi)if(s)o.push(yn(u));else return!0;continue}if(h.type==="n"||h.type==="k")if(s){o.push(yn(u));continue}else return!0;const p=WO[g];let E=u+p,T=!1;for(;E!==n;){if(this._board[E]!=null){T=!0;break}E+=p}if(!T)if(s){o.push(yn(u));continue}else return!0}}return s?o:!1}attackers(t,n){return n?this._attacked(n,xt[t],!0):this._attacked(this._turn,xt[t],!0)}_isKingAttacked(t){const n=this._kings[t];return n===-1?!1:this._attacked(su(t),n)}hash(){return this._hash.toString(16)}isAttacked(t,n){return this._attacked(n,xt[t])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const t={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let s=0,o=0;for(let u=xt.a8;u<=xt.h1;u++){if(o=(o+1)%2,u&136){u+=7;continue}const h=this._board[u];h&&(t[h.type]=h.type in t?t[h.type]+1:1,h.type===Uh&&n.push(o),s++)}if(s===2)return!0;if(s===3&&(t[Uh]===1||t[zg]===1))return!0;if(s===t[Uh]+2){let u=0;const h=n.length;for(let m=0;m<h;m++)u+=n[m];if(u===0||u===h)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:t=!1,square:n=void 0,piece:s=void 0}={}){const o=this._moves({square:n,piece:s});return t?o.map(u=>new Sh(this,u)):o.map(u=>this._moveToSan(u,o))}_moves({legal:t=!0,piece:n=void 0,square:s=void 0}={}){const o=s?s.toLowerCase():void 0,u=n?.toLowerCase(),h=[],m=this._turn,g=su(m);let p=xt.a8,E=xt.h1,T=!1;if(o)if(o in xt)p=E=xt[o],T=!0;else return[];for(let D=p;D<=E;D++){if(D&136){D+=7;continue}if(!this._board[D]||this._board[D].color===g)continue;const{type:U}=this._board[D];let j;if(U===rn){if(u&&u!==U)continue;j=D+ng[m][0],this._board[j]||(Us(h,m,D,j,rn),j=D+ng[m][1],aM[m]===Ba(D)&&!this._board[j]&&Us(h,m,D,j,rn,void 0,Mt.BIG_PAWN));for(let Y=2;Y<4;Y++)j=D+ng[m][Y],!(j&136)&&(this._board[j]?.color===g?Us(h,m,D,j,rn,this._board[j].type,Mt.CAPTURE):j===this._epSquare&&Us(h,m,D,j,rn,rn,Mt.EP_CAPTURE))}else{if(u&&u!==U)continue;for(let Y=0,lt=cT[U].length;Y<lt;Y++){const ht=cT[U][Y];for(j=D;j+=ht,!(j&136);){if(!this._board[j])Us(h,m,D,j,U);else{if(this._board[j].color===m)break;Us(h,m,D,j,U,this._board[j].type,Mt.CAPTURE);break}if(U===zg||U===hn)break}}}}if((u===void 0||u===hn)&&(!T||E===this._kings[m])){if(this._castling[m]&Mt.KSIDE_CASTLE){const D=this._kings[m],U=D+2;!this._board[D+1]&&!this._board[U]&&!this._attacked(g,this._kings[m])&&!this._attacked(g,D+1)&&!this._attacked(g,U)&&Us(h,m,this._kings[m],U,hn,void 0,Mt.KSIDE_CASTLE)}if(this._castling[m]&Mt.QSIDE_CASTLE){const D=this._kings[m],U=D-2;!this._board[D-1]&&!this._board[D-2]&&!this._board[D-3]&&!this._attacked(g,this._kings[m])&&!this._attacked(g,D-1)&&!this._attacked(g,U)&&Us(h,m,this._kings[m],U,hn,void 0,Mt.QSIDE_CASTLE)}}if(!t||this._kings[m]===-1)return h;const S=[];for(let D=0,U=h.length;D<U;D++)this._makeMove(h[D]),this._isKingAttacked(m)||S.push(h[D]),this._undoMove();return S}move(t,{strict:n=!1}={}){let s=null;if(typeof t=="string")s=this._moveFromSan(t,n);else if(t===null)s=this._moveFromSan(ig,n);else if(typeof t=="object"){const u=this._moves();for(let h=0,m=u.length;h<m;h++)if(t.from===yn(u[h].from)&&t.to===yn(u[h].to)&&(!("promotion"in u[h])||t.promotion===u[h].promotion)){s=u[h];break}}if(!s)throw typeof t=="string"?new Error(`Invalid move: ${t}`):new Error(`Invalid move: ${JSON.stringify(t)}`);if(this.isCheck()&&s.flags&Mt.NULL_MOVE)throw new Error("Null move not allowed when in check");const o=new Sh(this,s);return this._makeMove(s),this._incPositionCount(),o}_push(t){this._history.push({move:t,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(t,n){this._hash^=this._pieceKey(t),this._board[n]=this._board[t],delete this._board[t],this._hash^=this._pieceKey(n)}_makeMove(t){const n=this._turn,s=su(n);if(this._push(t),t.flags&Mt.NULL_MOVE){n===gi&&this._moveNumber++,this._halfMoves++,this._turn=s,this._epSquare=In;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),t.captured&&(this._hash^=this._pieceKey(t.to)),this._movePiece(t.from,t.to),t.flags&Mt.EP_CAPTURE&&(this._turn===gi?this._clear(t.to-16):this._clear(t.to+16)),t.promotion&&(this._clear(t.to),this._set(t.to,{type:t.promotion,color:n})),this._board[t.to].type===hn){if(this._kings[n]=t.to,t.flags&Mt.KSIDE_CASTLE){const o=t.to-1,u=t.to+1;this._movePiece(u,o)}else if(t.flags&Mt.QSIDE_CASTLE){const o=t.to+1,u=t.to-2;this._movePiece(u,o)}this._castling[n]=0}if(this._castling[n]){for(let o=0,u=Ls[n].length;o<u;o++)if(t.from===Ls[n][o].square&&this._castling[n]&Ls[n][o].flag){this._castling[n]^=Ls[n][o].flag;break}}if(this._castling[s]){for(let o=0,u=Ls[s].length;o<u;o++)if(t.to===Ls[s][o].square&&this._castling[s]&Ls[s][o].flag){this._castling[s]^=Ls[s][o].flag;break}}if(this._hash^=this._castlingKey(),t.flags&Mt.BIG_PAWN){let o;n===gi?o=t.to-16:o=t.to+16,!(t.to-1&136)&&this._board[t.to-1]?.type===rn&&this._board[t.to-1]?.color===s||!(t.to+1&136)&&this._board[t.to+1]?.type===rn&&this._board[t.to+1]?.color===s?(this._epSquare=o,this._hash^=this._epKey()):this._epSquare=In}else this._epSquare=In;t.piece===rn?this._halfMoves=0:t.flags&(Mt.CAPTURE|Mt.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===gi&&this._moveNumber++,this._turn=s,this._hash^=tg}undo(){const t=this._hash,n=this._undoMove();if(n){const s=new Sh(this,n);return this._decPositionCount(t),s}return null}_undoMove(){const t=this._history.pop();if(t===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const n=t.move;this._kings=t.kings,this._turn=t.turn,this._castling=t.castling,this._epSquare=t.epSquare,this._halfMoves=t.halfMoves,this._moveNumber=t.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=tg;const s=this._turn,o=su(s);if(n.flags&Mt.NULL_MOVE)return n;if(this._movePiece(n.to,n.from),n.piece&&(this._clear(n.from),this._set(n.from,{type:n.piece,color:s})),n.captured)if(n.flags&Mt.EP_CAPTURE){let u;s===gi?u=n.to-16:u=n.to+16,this._set(u,{type:rn,color:o})}else this._set(n.to,{type:n.captured,color:o});if(n.flags&(Mt.KSIDE_CASTLE|Mt.QSIDE_CASTLE)){let u,h;n.flags&Mt.KSIDE_CASTLE?(u=n.to+1,h=n.to-1):(u=n.to-2,h=n.to+1),this._movePiece(h,u)}return n}pgn({newline:t=`
`,maxWidth:n=0}={}){const s=[];let o=!1;for(const S in this._header)this._header[S]&&s.push(`[${S} "${this._header[S]}"]`+t),o=!0;o&&this._history.length&&s.push(t);const u=S=>{const D=this._comments[this.fen()];if(typeof D<"u"){const U=S.length>0?" ":"";S=`${S}${U}{${D}}`}return S},h=[];for(;this._history.length>0;)h.push(this._undoMove());const m=[];let g="";for(h.length===0&&m.push(u(""));h.length>0;){g=u(g);const S=h.pop();if(!S)break;if(!this._history.length&&S.color==="b"){const D=`${this._moveNumber}. ...`;g=g?`${g} ${D}`:D}else S.color==="w"&&(g.length&&m.push(g),g=this._moveNumber+".");g=g+" "+this._moveToSan(S,this._moves({legal:!0})),this._makeMove(S)}if(g.length&&m.push(u(g)),m.push(this._header.Result||"*"),n===0)return s.join("")+m.join(" ");const p=function(){return s.length>0&&s[s.length-1]===" "?(s.pop(),!0):!1},E=function(S,D){for(const U of D.split(" "))if(U){if(S+U.length>n){for(;p();)S--;s.push(t),S=0}s.push(U),S+=U.length,s.push(" "),S++}return p()&&S--,S};let T=0;for(let S=0;S<m.length;S++){if(T+m[S].length>n&&m[S].includes("{")){T=E(T,m[S]);continue}T+m[S].length>n&&S!==0?(s[s.length-1]===" "&&s.pop(),s.push(t),T=0):S!==0&&(s.push(" "),T++),s.push(m[S]),T+=m[S].length}return s.join("")}header(...t){for(let n=0;n<t.length;n+=2)typeof t[n]=="string"&&typeof t[n+1]=="string"&&(this._header[t[n]]=t[n+1]);return this._header}setHeader(t,n){return this._header[t]=n??jg[t]??null,this.getHeaders()}removeHeader(t){return t in this._header?(this._header[t]=jg[t]||null,!0):!1}getHeaders(){const t={};for(const[n,s]of Object.entries(this._header))s!==null&&(t[n]=s);return t}loadPgn(t,{strict:n=!1,newlineChar:s=`\r?
`}={}){s!==`\r?
`&&(t=t.replace(new RegExp(s,"g"),`
`));const o=GO(t);this.reset();const u=o.headers;let h="";for(const p in u)p.toLowerCase()==="fen"&&(h=u[p]),this.header(p,u[p]);if(!n)h&&this.load(h,{preserveHeaders:!0});else if(u.SetUp==="1"){if(!("FEN"in u))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(u.FEN,{preserveHeaders:!0})}let m=o.root;for(;m;){if(m.move){const p=this._moveFromSan(m.move,n);if(p==null)throw new Error(`Invalid move in PGN: ${m.move}`);this._makeMove(p),this._incPositionCount()}m.comment!==void 0&&(this._comments[this.fen()]=m.comment),m=m.variations[0]}const g=o.result;g&&Object.keys(this._header).length&&this._header.Result!==g&&this.setHeader("Result",g)}_moveToSan(t,n){let s="";if(t.flags&Mt.KSIDE_CASTLE)s="O-O";else if(t.flags&Mt.QSIDE_CASTLE)s="O-O-O";else{if(t.flags&Mt.NULL_MOVE)return ig;if(t.piece!==rn){const o=lM(t,n);s+=t.piece.toUpperCase()+o}t.flags&(Mt.CAPTURE|Mt.EP_CAPTURE)&&(t.piece===rn&&(s+=yn(t.from)[0]),s+="x"),s+=yn(t.to),t.promotion&&(s+="="+t.promotion.toUpperCase())}return this._makeMove(t),this.isCheck()&&(this.isCheckmate()?s+="#":s+="+"),this._undoMove(),s}_moveFromSan(t,n=!1){let s=rg(t);if(n||(s==="0-0"?s="O-O":s==="0-0-0"&&(s="O-O-O")),s==ig)return{color:this._turn,from:0,to:0,piece:"k",flags:Mt.NULL_MOVE};let o=fT(s),u=this._moves({legal:!0,piece:o});for(let S=0,D=u.length;S<D;S++)if(s===rg(this._moveToSan(u[S],u)))return u[S];if(n)return null;let h,m,g,p,E,T=!1;if(m=s.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),m?(h=m[1],g=m[2],p=m[3],E=m[4],g.length==1&&(T=!0)):(m=s.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),m&&(h=m[1],g=m[2],p=m[3],E=m[4],g.length==1&&(T=!0))),o=fT(s),u=this._moves({legal:!0,piece:h||o}),!p)return null;for(let S=0,D=u.length;S<D;S++)if(g){if((!h||h.toLowerCase()==u[S].piece)&&xt[g]==u[S].from&&xt[p]==u[S].to&&(!E||E.toLowerCase()==u[S].promotion))return u[S];if(T){const U=yn(u[S].from);if((!h||h.toLowerCase()==u[S].piece)&&xt[p]==u[S].to&&(g==U[0]||g==U[1])&&(!E||E.toLowerCase()==u[S].promotion))return u[S]}}else if(s===rg(this._moveToSan(u[S],u)).replace("x",""))return u[S];return null}ascii(){let t=`   +------------------------+
`;for(let n=xt.a8;n<=xt.h1;n++){if(ku(n)===0&&(t+=" "+"87654321"[Ba(n)]+" |"),this._board[n]){const s=this._board[n].type,u=this._board[n].color===Ln?s.toUpperCase():s.toLowerCase();t+=" "+u+" "}else t+=" . ";n+1&136&&(t+=`|
`,n+=8)}return t+=`   +------------------------+
`,t+="     a  b  c  d  e  f  g  h",t}perft(t){const n=this._moves({legal:!1});let s=0;const o=this._turn;for(let u=0,h=n.length;u<h;u++)this._makeMove(n[u]),this._isKingAttacked(o)||(t-1>0?s+=this.perft(t-1):s++),this._undoMove();return s}setTurn(t){return this._turn==t?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const t=[];let n=[];for(let s=xt.a8;s<=xt.h1;s++)this._board[s]==null?n.push(null):n.push({square:yn(s),type:this._board[s].type,color:this._board[s].color}),s+1&136&&(t.push(n),n=[],s+=8);return t}squareColor(t){if(t in xt){const n=xt[t];return(Ba(n)+ku(n))%2===0?"light":"dark"}return null}history({verbose:t=!1}={}){const n=[],s=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const o=n.pop();if(!o)break;t?s.push(new Sh(this,o)):s.push(this._moveToSan(o,this._moves())),this._makeMove(o)}return s}_getPositionCount(t){return this._positionCount.get(t)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(t){const n=this._positionCount.get(t)??0;n===1?this._positionCount.delete(t):this._positionCount.set(t,n-1)}_pruneComments(){const t=[],n={},s=o=>{o in this._comments&&(n[o]=this._comments[o])};for(;this._history.length>0;)t.push(this._undoMove());for(s(this.fen());;){const o=t.pop();if(!o)break;this._makeMove(o),s(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(t){this._comments[this.fen()]=t.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const t=this._comments[this.fen()];return delete this._comments[this.fen()],t}getComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>({fen:t,comment:this._comments[t]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>{const n=this._comments[t];return delete this._comments[t],{fen:t,comment:n}})}setCastlingRights(t,n){for(const o of[hn,js])n[o]!==void 0&&(n[o]?this._castling[t]|=Ah[o]:this._castling[t]&=~Ah[o]);this._updateCastlingRights();const s=this.getCastlingRights(t);return(n[hn]===void 0||n[hn]===s[hn])&&(n[js]===void 0||n[js]===s[js])}getCastlingRights(t){return{[hn]:(this._castling[t]&Ah[hn])!==0,[js]:(this._castling[t]&Ah[js])!==0}}moveNumber(){return this._moveNumber}}const sg=r=>new uM(r),cM=(r,t,n,s)=>{try{return r.move({from:t,to:n,promotion:s||"q"})}catch{return null}},hM=({id:r,isLight:t,isHighlighted:n=!1,children:s})=>{const{isOver:o,setNodeRef:u}=zO({id:r});return et.jsxs("div",{ref:u,className:`chess-square relative transition-all duration-200 ${o?"bg-indigo-500/40 scale-95 z-10 rounded-xl shadow-[0_0_40px_rgba(99,102,241,0.5)]":n?t?"bg-emerald-300/70":"bg-emerald-500/70":t?"bg-slate-200":"bg-slate-400"}`,children:[et.jsx("div",{className:`absolute top-1 left-1 text-[10px] font-black uppercase tracking-tighter opacity-20 pointer-events-none ${t?"text-slate-900":"text-slate-100"}`,children:r}),s]})},fM={w:{p:"",r:"",n:"",b:"",q:"",k:""},b:{p:"",r:"",n:"",b:"",q:"",k:""}},dM=({id:r,type:t,color:n,isDraggable:s=!0})=>{const{attributes:o,listeners:u,setNodeRef:h,transform:m,isDragging:g}=PO({id:r,disabled:!s,data:{type:t,color:n}}),p={transform:kg.Translate.toString(m)};return et.jsx("div",{ref:h,style:p,...u,...o,className:`chess-piece relative z-20 transition-transform duration-100 ${g?"scale-125 z-50 drop-shadow-2xl":"hover:scale-110"} ${s?"cursor-grab active:cursor-grabbing":"grayscale-[0.2] opacity-90 cursor-default"} text-slate-950 drop-shadow-sm`,children:et.jsx("div",{className:`
        flex items-center justify-center w-full h-full 
        ${n==="w"?"drop-shadow-[0_2px_0_rgba(255,255,255,0.8)]":"drop-shadow-[0_2px_0_rgba(0,0,0,0.5)]"}
      `,children:fM[n][t]})})},mM=({onMove:r,initialFen:t,playerColor:n="w"})=>{const[s,o]=Z.useState(()=>sg(t)),[u,h]=Z.useState([]);si.useEffect(()=>{t&&t!==s.fen()&&o(sg(t))},[t]);const m=Mx($m(Bp),$m(W1),$m(tS)),g=Z.useCallback(T=>{const{active:S,over:D}=T;if(h([]),!D)return;const U=S.id,j=D.id,Y=sg(s.fen());cM(Y,U,j)&&(o(Y),r&&r(Y.fen()))},[s,r]),p=Z.useCallback(T=>{const S=T,D=s.get(S);if(!D||D.color!==n||s.turn()!==n){h([]);return}const U=s.moves({square:S,verbose:!0}).map(j=>j.to);h(U)},[s,n]),E=()=>{const T=[],S=["a","b","c","d","e","f","g","h"],D=["8","7","6","5","4","3","2","1"],U=n==="w"?D:[...D].reverse(),j=n==="w"?S:[...S].reverse();for(const Y of U)for(const lt of j){const ht=`${lt}${Y}`,at=s.get(ht),Dt=(S.indexOf(lt)+D.indexOf(Y))%2===0,wt=!!at&&at.color===n&&s.turn()===n,vt=u.includes(ht);T.push(et.jsx(hM,{id:ht,isLight:Dt,isHighlighted:vt,children:at&&et.jsx(dM,{id:ht,type:at.type,color:at.color,isDraggable:wt})},ht))}return T};return et.jsx(MO,{sensors:m,onDragEnd:g,onDragStart:T=>p(T.active.id),children:et.jsx("div",{className:"p-3 bg-slate-900 rounded-[2.5rem] shadow-2xl border border-slate-800 ring-1 ring-white/5",children:et.jsx("div",{className:"grid grid-cols-8 gap-0 rounded-3xl overflow-hidden border border-slate-900/50",style:{width:"min(90vw, 640px)",height:"min(90vw, 640px)",gridTemplateColumns:"repeat(8, 1fr)"},children:E()})})})},gM=()=>Math.random().toString(36).substring(2,8).toUpperCase(),pM="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",sS=r=>{const[t,n]=Z.useState(null),[s,o]=Z.useState(null),[u,h]=Z.useState(!0),[m,g]=Z.useState(!0);Z.useEffect(()=>{const D=Og();Ng(D).then(U=>{o(U.user.uid)}).catch(U=>{console.error("Auth failed",U)}).finally(()=>g(!1))},[]);const p=async()=>{if(s)return s;const D=Og(),U=await Ng(D);return o(U.user.uid),U.user.uid};return Z.useEffect(()=>{if(!ja||!pi){console.warn("Firebase not configured; room sync disabled."),h(!1);return}if(!r){n(null),h(!1);return}h(!0);const D=cu(uu(pi,"rooms"),r),U=a1(D,j=>{j.exists()?n(j.data()):n(null),h(!1)},j=>{console.error("Room subscription error",j),n(null),h(!1)});return()=>U()},[r]),{room:t,userId:s,loading:u,isAuthLoading:m,createRoom:async()=>{if(!ja||!pi)throw new Error("Firebase not configured");const D=await p(),U=gM(),j=cu(uu(pi,"rooms"),U);return await s1(j,{fen:pM,whitePlayer:D,blackPlayer:"",turn:"w"}),U},joinRoom:async D=>{if(!ja||!pi)throw new Error("Firebase not configured");const U=await p(),j=cu(uu(pi,"rooms"),D);await yD(pi,async Y=>{const lt=await Y.get(j);if(!lt.exists())throw new Error("Room not found");const at={...lt.data()};at.whitePlayer?!at.blackPlayer&&at.whitePlayer!==U&&(at.blackPlayer=U):at.whitePlayer=U,Y.update(j,at)})},updateMove:async D=>{if(!ja||!pi||!r)return;const U=D.split(" ")[1],j=cu(uu(pi,"rooms"),r);await fD(j,{fen:D,turn:U})}}},yM=({roomId:r,onExit:t})=>{const{room:n,userId:s,loading:o,updateMove:u,joinRoom:h}=sS(r);if(si.useEffect(()=>{r&&h(r)},[r,h]),o)return et.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-6 animate-pulse",children:[et.jsx("div",{className:"relative shadow-2xl shadow-indigo-500/20 rounded-full p-4",children:et.jsx(iw,{className:"w-16 h-16 text-indigo-500 animate-spin"})}),et.jsxs("div",{className:"text-center space-y-2",children:[et.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest",children:"Entering Arena"}),et.jsx("p",{className:"text-slate-500 font-medium",children:"Synchronizing with the global lattice..."})]})]});if(!n)return et.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[et.jsxs("div",{className:"text-center space-y-4",children:[et.jsx("h2",{className:"text-5xl font-black text-white italic",children:"Room Dissolved"}),et.jsx("p",{className:"text-slate-400 text-lg",children:"The arena you seek no longer exists or the link is expired."})]}),et.jsx("button",{onClick:t,className:"btn-premium px-10 py-4 text-xl",children:"Return to Lobby"})]});const m=n.whitePlayer===s,g=n.blackPlayer===s,p=m?"w":g?"b":"w",E=n.turn===p,T=!n.blackPlayer,S=()=>{navigator.clipboard.writeText(r),alert("Room ID copied to clipboard!")};return et.jsxs("div",{className:"flex flex-col items-center gap-12 py-10 w-full animate-in fade-in duration-700",children:[et.jsxs("header",{className:"w-full max-w-6xl flex items-center justify-between px-6",children:[et.jsxs("button",{onClick:t,className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all font-bold uppercase tracking-widest text-xs",children:[et.jsx("div",{className:"p-2 rounded-xl bg-slate-900 border border-slate-800 group-hover:border-slate-700 group-hover:-translate-x-1 transition-transform",children:et.jsx(WA,{size:18})}),"Back"]}),et.jsx("div",{className:"flex items-center gap-4",children:et.jsxs("div",{className:"liquid-glass px-6 py-3 flex items-center gap-6",children:[et.jsxs("div",{className:"flex flex-col gap-0.5",children:[et.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-slate-500 font-black",children:"Arena ID"}),et.jsx("code",{className:"text-indigo-300 font-mono font-bold",children:r})]}),et.jsx("div",{className:"h-8 w-px bg-slate-800"}),et.jsxs("div",{className:"flex items-center gap-3",children:[et.jsx("button",{onClick:S,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:et.jsx(ew,{size:18})}),et.jsx("button",{className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:et.jsx(uw,{size:18})})]})]})})]}),et.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-16 w-full max-w-7xl px-6",children:[et.jsxs("div",{className:"relative group",children:[et.jsx("div",{className:"absolute -inset-4 bg-linear-to-r from-indigo-500 to-pink-500 rounded-[2.5rem] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"}),et.jsx(mM,{initialFen:n.fen,onMove:u,playerColor:p})]}),et.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-8",children:[et.jsxs("div",{className:"liquid-glass p-8 space-y-8 border-l-4 border-l-indigo-500",children:[et.jsxs("div",{className:"flex items-center justify-between",children:[et.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:T?"Current Turn":"Player Status"}),et.jsxs("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-2 ${T?"bg-indigo-500/10 text-indigo-400 border border-indigo-500/20":E?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-slate-800 text-slate-500"}`,children:[et.jsx("span",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${T?"bg-indigo-500":"bg-green-500"}`}),T?n.turn==="w"?" White to Move":" Black to Move":E?"Your Turn":"Waiting..."]})]}),et.jsxs("div",{className:"space-y-4",children:[et.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[et.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${m?"bg-white text-slate-950":"bg-slate-800 text-slate-400"}`,children:"W"}),et.jsxs("div",{className:"flex-1",children:[et.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"White Player"}),et.jsx("div",{className:"text-xs text-slate-500 font-medium",children:n.whitePlayer===s?"Connected (You)":n.whitePlayer?"Opponent Ready":"Awaiting Entry..."})]})]}),et.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[et.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${g?"bg-indigo-500 text-white":"bg-slate-800 text-slate-400"}`,children:"B"}),et.jsxs("div",{className:"flex-1",children:[et.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"Black Player"}),et.jsx("div",{className:"text-xs text-slate-500 font-medium",children:n.blackPlayer===s?"Connected (You)":n.blackPlayer?"Opponent Ready":"Awaiting Entry..."})]})]})]})]}),et.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[et.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[et.jsx(dw,{size:20,className:"mx-auto text-slate-600"}),et.jsx("div",{className:"text-xl font-black text-white italic",children:n.whitePlayer&&n.blackPlayer?"2/2":n.whitePlayer||n.blackPlayer?"1/2":"0/2"}),et.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Connected"})]}),et.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[et.jsx(gw,{size:20,className:"mx-auto text-indigo-400"}),et.jsx("div",{className:"text-xl font-black text-white italic",children:"24ms"}),et.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Latency"})]})]}),et.jsxs("div",{className:"p-8 rounded-3xl bg-linear-to-br from-indigo-500/10 to-transparent border border-indigo-500/20 text-center",children:[et.jsx(hw,{size:32,className:"mx-auto text-indigo-400 mb-4"}),et.jsx("h4",{className:"text-lg font-black text-white italic mb-2",children:"Rule System v2.4"}),et.jsx("p",{className:"text-sm text-slate-400 font-medium px-4",children:"Moves are secured and validated by the distributed chess core."})]})]})]}),et.jsx("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10",children:"Transparent Strategy Arena"})]})};function _M(){const[r,t]=Z.useState(null),{createRoom:n,isAuthLoading:s}=sS(null),o=async()=>{const m=await n();m&&t(m)},u=m=>{m.trim()&&t(m)},h=()=>{t(null)};return et.jsxs("main",{className:"relative min-h-screen w-full flex flex-col items-center",children:[et.jsx(KA,{}),et.jsx("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:r?et.jsx(yM,{roomId:r,onExit:h}):et.jsx(vx,{onCreateRoom:o,onJoinRoom:u,isAuthLoading:s})}),et.jsx("footer",{className:"mt-auto py-8 text-slate-500 text-sm",children:"DragMate  Premium Multiplayer Board Gaming"})]})}GA.createRoot(document.getElementById("root")).render(et.jsx(Z.StrictMode,{children:et.jsx(_M,{})}));
