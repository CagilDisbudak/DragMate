(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();function OA(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Zm={exports:{}},lc={};var U_;function MA(){if(U_)return lc;U_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:i,type:r,key:u,ref:o!==void 0?o:null,props:c}}return lc.Fragment=e,lc.jsx=t,lc.jsxs=t,lc}var z_;function kA(){return z_||(z_=1,Zm.exports=MA()),Zm.exports}var T=kA(),eg={exports:{}},Le={};var B_;function VA(){if(B_)return Le;B_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),w=Symbol.iterator;function R(L){return L===null||typeof L!="object"?null:(L=w&&L[w]||L["@@iterator"],typeof L=="function"?L:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,I={};function U(L,se,me){this.props=L,this.context=se,this.refs=I,this.updater=me||D}U.prototype.isReactComponent={},U.prototype.setState=function(L,se){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,se,"setState")},U.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function F(){}F.prototype=U.prototype;function G(L,se,me){this.props=L,this.context=se,this.refs=I,this.updater=me||D}var ce=G.prototype=new F;ce.constructor=G,P(ce,U.prototype),ce.isPureReactComponent=!0;var ee=Array.isArray;function J(){}var C={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function N(L,se,me){var de=me.ref;return{$$typeof:i,type:L,key:se,ref:de!==void 0?de:null,props:me}}function k(L,se){return N(L.type,se,L.props)}function M(L){return typeof L=="object"&&L!==null&&L.$$typeof===i}function z(L){var se={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(me){return se[me]})}var O=/\/+/g;function Pe(L,se){return typeof L=="object"&&L!==null&&L.key!=null?z(""+L.key):se.toString(36)}function mt(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(J,J):(L.status="pending",L.then(function(se){L.status==="pending"&&(L.status="fulfilled",L.value=se)},function(se){L.status==="pending"&&(L.status="rejected",L.reason=se)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function ie(L,se,me,de,ve){var Ae=typeof L;(Ae==="undefined"||Ae==="boolean")&&(L=null);var je=!1;if(L===null)je=!0;else switch(Ae){case"bigint":case"string":case"number":je=!0;break;case"object":switch(L.$$typeof){case i:case e:je=!0;break;case _:return je=L._init,ie(je(L._payload),se,me,de,ve)}}if(je)return ve=ve(L),je=de===""?"."+Pe(L,0):de,ee(ve)?(me="",je!=null&&(me=je.replace(O,"$&/")+"/"),ie(ve,se,me,"",function(Ht){return Ht})):ve!=null&&(M(ve)&&(ve=k(ve,me+(ve.key==null||L&&L.key===ve.key?"":(""+ve.key).replace(O,"$&/")+"/")+je)),se.push(ve)),1;je=0;var Dt=de===""?".":de+":";if(ee(L))for(var ut=0;ut<L.length;ut++)de=L[ut],Ae=Dt+Pe(de,ut),je+=ie(de,se,me,Ae,ve);else if(ut=R(L),typeof ut=="function")for(L=ut.call(L),ut=0;!(de=L.next()).done;)de=de.value,Ae=Dt+Pe(de,ut++),je+=ie(de,se,me,Ae,ve);else if(Ae==="object"){if(typeof L.then=="function")return ie(mt(L),se,me,de,ve);throw se=String(L),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return je}function he(L,se,me){if(L==null)return L;var de=[],ve=0;return ie(L,de,"","",function(Ae){return se.call(me,Ae,ve++)}),de}function be(L){if(L._status===-1){var se=L._result;se=se(),se.then(function(me){(L._status===0||L._status===-1)&&(L._status=1,L._result=me)},function(me){(L._status===0||L._status===-1)&&(L._status=2,L._result=me)}),L._status===-1&&(L._status=0,L._result=se)}if(L._status===1)return L._result.default;throw L._result}var Me=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},Be={map:he,forEach:function(L,se,me){he(L,function(){se.apply(this,arguments)},me)},count:function(L){var se=0;return he(L,function(){se++}),se},toArray:function(L){return he(L,function(se){return se})||[]},only:function(L){if(!M(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Le.Activity=E,Le.Children=Be,Le.Component=U,Le.Fragment=t,Le.Profiler=o,Le.PureComponent=G,Le.StrictMode=r,Le.Suspense=g,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Le.__COMPILER_RUNTIME={__proto__:null,c:function(L){return C.H.useMemoCache(L)}},Le.cache=function(L){return function(){return L.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(L,se,me){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var de=P({},L.props),ve=L.key;if(se!=null)for(Ae in se.key!==void 0&&(ve=""+se.key),se)!A.call(se,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&se.ref===void 0||(de[Ae]=se[Ae]);var Ae=arguments.length-2;if(Ae===1)de.children=me;else if(1<Ae){for(var je=Array(Ae),Dt=0;Dt<Ae;Dt++)je[Dt]=arguments[Dt+2];de.children=je}return N(L.type,ve,de)},Le.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:c,_context:L},L},Le.createElement=function(L,se,me){var de,ve={},Ae=null;if(se!=null)for(de in se.key!==void 0&&(Ae=""+se.key),se)A.call(se,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(ve[de]=se[de]);var je=arguments.length-2;if(je===1)ve.children=me;else if(1<je){for(var Dt=Array(je),ut=0;ut<je;ut++)Dt[ut]=arguments[ut+2];ve.children=Dt}if(L&&L.defaultProps)for(de in je=L.defaultProps,je)ve[de]===void 0&&(ve[de]=je[de]);return N(L,Ae,ve)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(L){return{$$typeof:m,render:L}},Le.isValidElement=M,Le.lazy=function(L){return{$$typeof:_,_payload:{_status:-1,_result:L},_init:be}},Le.memo=function(L,se){return{$$typeof:p,type:L,compare:se===void 0?null:se}},Le.startTransition=function(L){var se=C.T,me={};C.T=me;try{var de=L(),ve=C.S;ve!==null&&ve(me,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(J,Me)}catch(Ae){Me(Ae)}finally{se!==null&&me.types!==null&&(se.types=me.types),C.T=se}},Le.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Le.use=function(L){return C.H.use(L)},Le.useActionState=function(L,se,me){return C.H.useActionState(L,se,me)},Le.useCallback=function(L,se){return C.H.useCallback(L,se)},Le.useContext=function(L){return C.H.useContext(L)},Le.useDebugValue=function(){},Le.useDeferredValue=function(L,se){return C.H.useDeferredValue(L,se)},Le.useEffect=function(L,se){return C.H.useEffect(L,se)},Le.useEffectEvent=function(L){return C.H.useEffectEvent(L)},Le.useId=function(){return C.H.useId()},Le.useImperativeHandle=function(L,se,me){return C.H.useImperativeHandle(L,se,me)},Le.useInsertionEffect=function(L,se){return C.H.useInsertionEffect(L,se)},Le.useLayoutEffect=function(L,se){return C.H.useLayoutEffect(L,se)},Le.useMemo=function(L,se){return C.H.useMemo(L,se)},Le.useOptimistic=function(L,se){return C.H.useOptimistic(L,se)},Le.useReducer=function(L,se,me){return C.H.useReducer(L,se,me)},Le.useRef=function(L){return C.H.useRef(L)},Le.useState=function(L){return C.H.useState(L)},Le.useSyncExternalStore=function(L,se,me){return C.H.useSyncExternalStore(L,se,me)},Le.useTransition=function(){return C.H.useTransition()},Le.version="19.2.3",Le}var q_;function cp(){return q_||(q_=1,eg.exports=VA()),eg.exports}var q=cp();const ot=OA(q);var tg={exports:{}},cc={},ng={exports:{}},ig={};var H_;function PA(){return H_||(H_=1,(function(i){function e(ie,he){var be=ie.length;ie.push(he);e:for(;0<be;){var Me=be-1>>>1,Be=ie[Me];if(0<o(Be,he))ie[Me]=he,ie[be]=Be,be=Me;else break e}}function t(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var he=ie[0],be=ie.pop();if(be!==he){ie[0]=be;e:for(var Me=0,Be=ie.length,L=Be>>>1;Me<L;){var se=2*(Me+1)-1,me=ie[se],de=se+1,ve=ie[de];if(0>o(me,be))de<Be&&0>o(ve,me)?(ie[Me]=ve,ie[de]=be,Me=de):(ie[Me]=me,ie[se]=be,Me=se);else if(de<Be&&0>o(ve,be))ie[Me]=ve,ie[de]=be,Me=de;else break e}}return he}function o(ie,he){var be=ie.sortIndex-he.sortIndex;return be!==0?be:ie.id-he.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var u=Date,m=u.now();i.unstable_now=function(){return u.now()-m}}var g=[],p=[],_=1,E=null,w=3,R=!1,D=!1,P=!1,I=!1,U=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function ce(ie){for(var he=t(p);he!==null;){if(he.callback===null)r(p);else if(he.startTime<=ie)r(p),he.sortIndex=he.expirationTime,e(g,he);else break;he=t(p)}}function ee(ie){if(P=!1,ce(ie),!D)if(t(g)!==null)D=!0,J||(J=!0,z());else{var he=t(p);he!==null&&mt(ee,he.startTime-ie)}}var J=!1,C=-1,A=5,N=-1;function k(){return I?!0:!(i.unstable_now()-N<A)}function M(){if(I=!1,J){var ie=i.unstable_now();N=ie;var he=!0;try{e:{D=!1,P&&(P=!1,F(C),C=-1),R=!0;var be=w;try{t:{for(ce(ie),E=t(g);E!==null&&!(E.expirationTime>ie&&k());){var Me=E.callback;if(typeof Me=="function"){E.callback=null,w=E.priorityLevel;var Be=Me(E.expirationTime<=ie);if(ie=i.unstable_now(),typeof Be=="function"){E.callback=Be,ce(ie),he=!0;break t}E===t(g)&&r(g),ce(ie)}else r(g);E=t(g)}if(E!==null)he=!0;else{var L=t(p);L!==null&&mt(ee,L.startTime-ie),he=!1}}break e}finally{E=null,w=be,R=!1}he=void 0}}finally{he?z():J=!1}}}var z;if(typeof G=="function")z=function(){G(M)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Pe=O.port2;O.port1.onmessage=M,z=function(){Pe.postMessage(null)}}else z=function(){U(M,0)};function mt(ie,he){C=U(function(){ie(i.unstable_now())},he)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ie){ie.callback=null},i.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ie?Math.floor(1e3/ie):5},i.unstable_getCurrentPriorityLevel=function(){return w},i.unstable_next=function(ie){switch(w){case 1:case 2:case 3:var he=3;break;default:he=w}var be=w;w=he;try{return ie()}finally{w=be}},i.unstable_requestPaint=function(){I=!0},i.unstable_runWithPriority=function(ie,he){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var be=w;w=ie;try{return he()}finally{w=be}},i.unstable_scheduleCallback=function(ie,he,be){var Me=i.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Me+be:Me):be=Me,ie){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=be+Be,ie={id:_++,callback:he,priorityLevel:ie,startTime:be,expirationTime:Be,sortIndex:-1},be>Me?(ie.sortIndex=be,e(p,ie),t(g)===null&&ie===t(p)&&(P?(F(C),C=-1):P=!0,mt(ee,be-Me))):(ie.sortIndex=Be,e(g,ie),D||R||(D=!0,J||(J=!0,z()))),ie},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(ie){var he=w;return function(){var be=w;w=he;try{return ie.apply(this,arguments)}finally{w=be}}}})(ig)),ig}var F_;function LA(){return F_||(F_=1,ng.exports=PA()),ng.exports}var sg={exports:{}},jn={};var G_;function jA(){if(G_)return jn;G_=1;var i=cp();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,p,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:p,implementation:_}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,jn.createPortal=function(g,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return c(g,p,null,_)},jn.flushSync=function(g){var p=u.T,_=r.p;try{if(u.T=null,r.p=2,g)return g()}finally{u.T=p,r.p=_,r.d.f()}},jn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},jn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},jn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var _=p.as,E=m(_,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,R=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:w,fetchPriority:R}):_==="script"&&r.d.X(g,{crossOrigin:E,integrity:w,fetchPriority:R,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},jn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=m(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},jn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,E=m(_,p.crossOrigin);r.d.L(g,_,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},jn.preloadModule=function(g,p){if(typeof g=="string")if(p){var _=m(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},jn.requestFormReset=function(g){r.d.r(g)},jn.unstable_batchedUpdates=function(g,p){return g(p)},jn.useFormState=function(g,p,_){return u.H.useFormState(g,p,_)},jn.useFormStatus=function(){return u.H.useHostTransitionStatus()},jn.version="19.2.3",jn}var $_;function W1(){if($_)return sg.exports;$_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),sg.exports=jA(),sg.exports}var K_;function UA(){if(K_)return cc;K_=1;var i=LA(),e=cp(),t=W1();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function u(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function g(n){if(c(n)!==n)throw Error(r(188))}function p(n){var s=n.alternate;if(!s){if(s=c(n),s===null)throw Error(r(188));return s!==n?null:n}for(var a=n,l=s;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),n;if(d===l)return g(f),s;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var v=!1,S=f.child;S;){if(S===a){v=!0,a=f,l=d;break}if(S===l){v=!0,l=f,a=d;break}S=S.sibling}if(!v){for(S=d.child;S;){if(S===a){v=!0,a=d,l=f;break}if(S===l){v=!0,l=d,a=f;break}S=S.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:s}function _(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=_(n),s!==null)return s;n=n.sibling}return null}var E=Object.assign,w=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),G=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function z(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var O=Symbol.for("react.client.reference");function Pe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===O?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case P:return"Fragment";case U:return"Profiler";case I:return"StrictMode";case ee:return"Suspense";case J:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case D:return"Portal";case G:return n.displayName||"Context";case F:return(n._context.displayName||"Context")+".Consumer";case ce:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return s=n.displayName||null,s!==null?s:Pe(n.type)||"Memo";case A:s=n._payload,n=n._init;try{return Pe(n(s))}catch{}}return null}var mt=Array.isArray,ie=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},Me=[],Be=-1;function L(n){return{current:n}}function se(n){0>Be||(n.current=Me[Be],Me[Be]=null,Be--)}function me(n,s){Be++,Me[Be]=n.current,n.current=s}var de=L(null),ve=L(null),Ae=L(null),je=L(null);function Dt(n,s){switch(me(Ae,s),me(ve,n),me(de,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?l_(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=l_(s),n=c_(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}se(de),me(de,n)}function ut(){se(de),se(ve),se(Ae)}function Ht(n){n.memoizedState!==null&&me(je,n);var s=de.current,a=c_(s,n.type);s!==a&&(me(ve,n),me(de,a))}function Si(n){ve.current===n&&(se(de),se(ve)),je.current===n&&(se(je),sc._currentValue=be)}var Vn,qi;function Jt(n){if(Vn===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Vn=s&&s[1]||"",qi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vn+n+qi}var fi=!1;function Pn(n,s){if(!n||fi)return"";fi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ne){var X=ne}Reflect.construct(n,[],le)}else{try{le.call()}catch(ne){X=ne}n.call(le.prototype)}}else{try{throw Error()}catch(ne){X=ne}(le=n())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ne){if(ne&&X&&typeof ne.stack=="string")return[ne.stack,X.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],S=d[1];if(v&&S){var V=v.split(`
`),Q=S.split(`
`);for(f=l=0;l<V.length&&!V[l].includes("DetermineComponentFrameRoot");)l++;for(;f<Q.length&&!Q[f].includes("DetermineComponentFrameRoot");)f++;if(l===V.length||f===Q.length)for(l=V.length-1,f=Q.length-1;1<=l&&0<=f&&V[l]!==Q[f];)f--;for(;1<=l&&0<=f;l--,f--)if(V[l]!==Q[f]){if(l!==1||f!==1)do if(l--,f--,0>f||V[l]!==Q[f]){var re=`
`+V[l].replace(" at new "," at ");return n.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",n.displayName)),re}while(1<=l&&0<=f);break}}}finally{fi=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Jt(a):""}function as(n,s){switch(n.tag){case 26:case 27:case 5:return Jt(n.type);case 16:return Jt("Lazy");case 13:return n.child!==s&&s!==null?Jt("Suspense Fallback"):Jt("Suspense");case 19:return Jt("SuspenseList");case 0:case 15:return Pn(n.type,!1);case 11:return Pn(n.type.render,!1);case 1:return Pn(n.type,!0);case 31:return Jt("Activity");default:return""}}function Hi(n){try{var s="",a=null;do s+=as(n,a),a=n,n=n.return;while(n);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var St=Object.prototype.hasOwnProperty,ht=i.unstable_scheduleCallback,Hn=i.unstable_cancelCallback,os=i.unstable_shouldYield,ls=i.unstable_requestPaint,Wt=i.unstable_now,Fi=i.unstable_getCurrentPriorityLevel,Rs=i.unstable_ImmediatePriority,Fn=i.unstable_UserBlockingPriority,Sn=i.unstable_NormalPriority,Gi=i.unstable_LowPriority,Cs=i.unstable_IdlePriority,Gn=i.log,Ns=i.unstable_setDisableYieldValue,$n=null,Ft=null;function pn(n){if(typeof Gn=="function"&&Ns(n),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode($n,n)}catch{}}var At=Math.clz32?Math.clz32:rr,Is=Math.log,$i=Math.LN2;function rr(n){return n>>>=0,n===0?32:31-(Is(n)/$i|0)|0}var ni=256,Ki=262144,He=4194304;function xt(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Rt(n,s,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var S=l&134217727;return S!==0?(l=S&~d,l!==0?f=xt(l):(v&=S,v!==0?f=xt(v):a||(a=S&~n,a!==0&&(f=xt(a))))):(S=l&~d,S!==0?f=xt(S):v!==0?f=xt(v):a||(a=l&~n,a!==0&&(f=xt(a)))),f===0?0:s!==0&&s!==f&&(s&d)===0&&(d=f&-f,a=s&-s,d>=a||d===32&&(a&4194048)!==0)?s:f}function jt(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function yn(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zt(){var n=He;return He<<=1,(He&62914560)===0&&(He=4194304),n}function Vt(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function W(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function gt(n,s,a,l,f,d){var v=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var S=n.entanglements,V=n.expirationTimes,Q=n.hiddenUpdates;for(a=v&~a;0<a;){var re=31-At(a),le=1<<re;S[re]=0,V[re]=-1;var X=Q[re];if(X!==null)for(Q[re]=null,re=0;re<X.length;re++){var ne=X[re];ne!==null&&(ne.lane&=-536870913)}a&=~le}l!==0&&pt(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(v&~s))}function pt(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var l=31-At(s);n.entangledLanes|=s,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function Gt(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var l=31-At(a),f=1<<l;f&s|n[l]&s&&(n[l]|=s),a&=~f}}function fe(n,s){var a=s&-s;return a=(a&42)!==0?1:un(a),(a&(n.suspendedLanes|s))!==0?0:a}function un(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function nt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ot(){var n=he.p;return n!==0?n:(n=window.event,n===void 0?32:O_(n.type))}function hn(n,s){var a=he.p;try{return he.p=n,s()}finally{he.p=a}}var yt=Math.random().toString(36).slice(2),Pt="__reactFiber$"+yt,$t="__reactProps$"+yt,Ee="__reactContainer$"+yt,ar="__reactEvents$"+yt,Wa="__reactListeners$"+yt,Za="__reactHandles$"+yt,da="__reactResources$"+yt,Ai="__reactMarker$"+yt;function or(n){delete n[Pt],delete n[$t],delete n[ar],delete n[Wa],delete n[Za]}function xi(n){var s=n[Pt];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Ee]||a[Pt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=p_(n);n!==null;){if(a=n[Pt])return a;n=p_(n)}return s}n=a,a=n.parentNode}return null}function Kn(n){if(n=n[Pt]||n[Ee]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Ln(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function Ri(n){var s=n[da];return s||(s=n[da]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ut(n){n[Ai]=!0}var ma=new Set,lr={};function ii(n,s){Ci(n,s),Ci(n+"Capture",s)}function Ci(n,s){for(lr[n]=s,n=0;n<s.length;n++)ma.add(s[n])}var ga=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cr={},pa={};function en(n){return St.call(pa,n)?!0:St.call(cr,n)?!1:ga.test(n)?pa[n]=!0:(cr[n]=!0,!1)}function H(n,s,a){if(en(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function Z(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function Y(n,s,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+l)}}function ye(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Se(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ze(n,s,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(v){a=""+v,d.call(this,v)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Fe(n){if(!n._valueTracker){var s=Se(n)?"checked":"value";n._valueTracker=Ze(n,s,""+n[s])}}function Ni(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return n&&(l=Se(n)?n.checked?"true":"false":n.value),n=l,n!==a?(s.setValue(n),!0):!1}function cs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ya=/[\n"\\]/g;function si(n){return n.replace(ya,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function eo(n,s,a,l,f,d,v,S){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),s!=null?v==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+ye(s)):n.value!==""+ye(s)&&(n.value=""+ye(s)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),s!=null?yl(n,v,ye(s)):a!=null?yl(n,v,ye(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+ye(S):n.removeAttribute("name")}function gu(n,s,a,l,f,d,v,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),s!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||s!=null)){Fe(n);return}a=a!=null?""+ye(a):"",s=s!=null?""+ye(s):a,S||s===n.value||(n.value=s),n.defaultValue=s}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=S?n.checked:!!l,n.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),Fe(n)}function yl(n,s,a){s==="number"&&cs(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function ur(n,s,a,l){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+ye(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function pu(n,s,a){if(s!=null&&(s=""+ye(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+ye(a):""}function hr(n,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(mt(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=ye(s),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),Fe(n)}function ri(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var yu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vl(n,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":l?n.setProperty(s,a):typeof a!="number"||a===0||yu.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function _l(n,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in s)l=s[f],s.hasOwnProperty(f)&&a[f]!==l&&vl(n,f,l)}else for(var d in s)s.hasOwnProperty(d)&&vl(n,d,s[d])}function to(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function no(n){return fr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Qi(){}var bl=null;function Ii(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var dr=null,us=null;function va(n){var s=Kn(n);if(s&&(n=s.stateNode)){var a=n[$t]||null;e:switch(n=s.stateNode,s.type){case"input":if(eo(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+si(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==n&&l.form===n.form){var f=l[$t]||null;if(!f)throw Error(r(90));eo(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===n.form&&Ni(l)}break e;case"textarea":pu(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&ur(n,!!a.multiple,s,!1)}}}var io=!1;function mr(n,s,a){if(io)return n(s,a);io=!0;try{var l=n(s);return l}finally{if(io=!1,(dr!==null||us!==null)&&(hh(),dr&&(s=dr,n=us,us=dr=null,va(s),n)))for(s=0;s<n.length;s++)va(n[s])}}function Yi(n,s){var a=n.stateNode;if(a===null)return null;var l=a[$t]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var Di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_a=!1;if(Di)try{var vt={};Object.defineProperty(vt,"passive",{get:function(){_a=!0}}),window.addEventListener("test",vt,vt),window.removeEventListener("test",vt,vt)}catch{_a=!1}var hs=null,El=null,ba=null;function Tl(){if(ba)return ba;var n,s=El,a=s.length,l,f="value"in hs?hs.value:hs.textContent,d=f.length;for(n=0;n<a&&s[n]===f[n];n++);var v=a-n;for(l=1;l<=v&&s[a-l]===f[d-l];l++);return ba=f.slice(n,1<l?1-l:void 0)}function Ea(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Ds(){return!0}function Xi(){return!1}function An(n){function s(a,l,f,d,v){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ds:Xi,this.isPropagationStopped=Xi,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ds)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ds)},persist:function(){},isPersistent:Ds}),s}var Os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fs=An(Os),gr=E({},Os,{view:0,detail:0}),wl=An(gr),pr,so,ds,ro=E({},gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ds&&(ds&&n.type==="mousemove"?(pr=n.screenX-ds.screenX,so=n.screenY-ds.screenY):so=pr=0,ds=n),pr)},movementY:function(n){return"movementY"in n?n.movementY:so}}),Sl=An(ro),Ta=E({},ro,{dataTransfer:0}),_u=An(Ta),bu=E({},gr,{relatedTarget:0}),wa=An(bu),Al=E({},Os,{animationName:0,elapsedTime:0,pseudoElement:0}),Eu=An(Al),ao=E({},Os,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Tu=An(ao),wu=E({},Os,{data:0}),ms=An(wu),Su={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Au={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ru(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=xu[n])?!!s[n]:!1}function yr(){return Ru}var Qn=E({},gr,{key:function(n){if(n.key){var s=Su[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ea(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Au[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yr,charCode:function(n){return n.type==="keypress"?Ea(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ea(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Cu=An(Qn),Nu=E({},ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ms=An(Nu),h=E({},gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yr}),y=An(h),b=E({},Os,{propertyName:0,elapsedTime:0,pseudoElement:0}),x=An(b),$=E({},ro,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),te=An($),ge=E({},Os,{newState:0,oldState:0}),Ue=An(ge),Kt=[9,13,27,32],lt=Di&&"CompositionEvent"in window,Mt=null;Di&&"documentMode"in document&&(Mt=document.documentMode);var Oi=Di&&"TextEvent"in window&&!Mt,gs=Di&&(!lt||Mt&&8<Mt&&11>=Mt),Ji=" ",Wi=!1;function Sa(n,s){switch(n){case"keyup":return Kt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var lo=!1;function nS(n,s){switch(n){case"compositionend":return oo(s);case"keypress":return s.which!==32?null:(Wi=!0,Ji);case"textInput":return n=s.data,n===Ji&&Wi?null:n;default:return null}}function iS(n,s){if(lo)return n==="compositionend"||!lt&&Sa(n,s)?(n=Tl(),ba=El=hs=null,lo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return gs&&s.locale!=="ko"?null:s.data;default:return null}}var sS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _0(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!sS[n.type]:s==="textarea"}function b0(n,s,a,l){dr?us?us.push(l):us=[l]:dr=l,s=vh(s,"onChange"),0<s.length&&(a=new fs("onChange","change",null,a,l),n.push({event:a,listeners:s}))}var xl=null,Rl=null;function rS(n){n_(n,0)}function Iu(n){var s=Ln(n);if(Ni(s))return n}function E0(n,s){if(n==="change")return s}var T0=!1;if(Di){var ad;if(Di){var od="oninput"in document;if(!od){var w0=document.createElement("div");w0.setAttribute("oninput","return;"),od=typeof w0.oninput=="function"}ad=od}else ad=!1;T0=ad&&(!document.documentMode||9<document.documentMode)}function S0(){xl&&(xl.detachEvent("onpropertychange",A0),Rl=xl=null)}function A0(n){if(n.propertyName==="value"&&Iu(Rl)){var s=[];b0(s,Rl,n,Ii(n)),mr(rS,s)}}function aS(n,s,a){n==="focusin"?(S0(),xl=s,Rl=a,xl.attachEvent("onpropertychange",A0)):n==="focusout"&&S0()}function oS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Iu(Rl)}function lS(n,s){if(n==="click")return Iu(s)}function cS(n,s){if(n==="input"||n==="change")return Iu(s)}function uS(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var di=typeof Object.is=="function"?Object.is:uS;function Cl(n,s){if(di(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!St.call(s,f)||!di(n[f],s[f]))return!1}return!0}function x0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function R0(n,s){var a=x0(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=s&&l>=s)return{node:a,offset:s-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=x0(a)}}function C0(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?C0(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function N0(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=cs(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=cs(n.document)}return s}function ld(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var hS=Di&&"documentMode"in document&&11>=document.documentMode,co=null,cd=null,Nl=null,ud=!1;function I0(n,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ud||co==null||co!==cs(l)||(l=co,"selectionStart"in l&&ld(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Nl&&Cl(Nl,l)||(Nl=l,l=vh(cd,"onSelect"),0<l.length&&(s=new fs("onSelect","select",null,s,a),n.push({event:s,listeners:l}),s.target=co)))}function Aa(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var uo={animationend:Aa("Animation","AnimationEnd"),animationiteration:Aa("Animation","AnimationIteration"),animationstart:Aa("Animation","AnimationStart"),transitionrun:Aa("Transition","TransitionRun"),transitionstart:Aa("Transition","TransitionStart"),transitioncancel:Aa("Transition","TransitionCancel"),transitionend:Aa("Transition","TransitionEnd")},hd={},D0={};Di&&(D0=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function xa(n){if(hd[n])return hd[n];if(!uo[n])return n;var s=uo[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in D0)return hd[n]=s[a];return n}var O0=xa("animationend"),M0=xa("animationiteration"),k0=xa("animationstart"),fS=xa("transitionrun"),dS=xa("transitionstart"),mS=xa("transitioncancel"),V0=xa("transitionend"),P0=new Map,fd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fd.push("scrollEnd");function Zi(n,s){P0.set(n,s),ii(s,[n])}var Du=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Mi=[],ho=0,dd=0;function Ou(){for(var n=ho,s=dd=ho=0;s<n;){var a=Mi[s];Mi[s++]=null;var l=Mi[s];Mi[s++]=null;var f=Mi[s];Mi[s++]=null;var d=Mi[s];if(Mi[s++]=null,l!==null&&f!==null){var v=l.pending;v===null?f.next=f:(f.next=v.next,v.next=f),l.pending=f}d!==0&&L0(a,f,d)}}function Mu(n,s,a,l){Mi[ho++]=n,Mi[ho++]=s,Mi[ho++]=a,Mi[ho++]=l,dd|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function md(n,s,a,l){return Mu(n,s,a,l),ku(n)}function Ra(n,s){return Mu(n,null,null,s),ku(n)}function L0(n,s,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&s!==null&&(f=31-At(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[s]:l.push(s),s.lane=a|536870912),d):null}function ku(n){if(50<Jl)throw Jl=0,wm=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var fo={};function gS(n,s,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(n,s,a,l){return new gS(n,s,a,l)}function gd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ks(n,s){var a=n.alternate;return a===null?(a=mi(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function j0(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Vu(n,s,a,l,f,d){var v=0;if(l=n,typeof n=="function")gd(n)&&(v=1);else if(typeof n=="string")v=bA(n,a,de.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case N:return n=mi(31,a,s,f),n.elementType=N,n.lanes=d,n;case P:return Ca(a.children,f,d,s);case I:v=8,f|=24;break;case U:return n=mi(12,a,s,f|2),n.elementType=U,n.lanes=d,n;case ee:return n=mi(13,a,s,f),n.elementType=ee,n.lanes=d,n;case J:return n=mi(19,a,s,f),n.elementType=J,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case G:v=10;break e;case F:v=9;break e;case ce:v=11;break e;case C:v=14;break e;case A:v=16,l=null;break e}v=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return s=mi(v,a,s,f),s.elementType=n,s.type=l,s.lanes=d,s}function Ca(n,s,a,l){return n=mi(7,n,l,s),n.lanes=a,n}function pd(n,s,a){return n=mi(6,n,null,s),n.lanes=a,n}function U0(n){var s=mi(18,null,null,0);return s.stateNode=n,s}function yd(n,s,a){return s=mi(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var z0=new WeakMap;function ki(n,s){if(typeof n=="object"&&n!==null){var a=z0.get(n);return a!==void 0?a:(s={value:n,source:s,stack:Hi(s)},z0.set(n,s),s)}return{value:n,source:s,stack:Hi(s)}}var mo=[],go=0,Pu=null,Il=0,Vi=[],Pi=0,vr=null,ps=1,ys="";function Vs(n,s){mo[go++]=Il,mo[go++]=Pu,Pu=n,Il=s}function B0(n,s,a){Vi[Pi++]=ps,Vi[Pi++]=ys,Vi[Pi++]=vr,vr=n;var l=ps;n=ys;var f=32-At(l)-1;l&=~(1<<f),a+=1;var d=32-At(s)+f;if(30<d){var v=f-f%5;d=(l&(1<<v)-1).toString(32),l>>=v,f-=v,ps=1<<32-At(s)+f|a<<f|l,ys=d+n}else ps=1<<d|a<<f|l,ys=n}function vd(n){n.return!==null&&(Vs(n,1),B0(n,1,0))}function _d(n){for(;n===Pu;)Pu=mo[--go],mo[go]=null,Il=mo[--go],mo[go]=null;for(;n===vr;)vr=Vi[--Pi],Vi[Pi]=null,ys=Vi[--Pi],Vi[Pi]=null,ps=Vi[--Pi],Vi[Pi]=null}function q0(n,s){Vi[Pi++]=ps,Vi[Pi++]=ys,Vi[Pi++]=vr,ps=s.id,ys=s.overflow,vr=n}var xn=null,Ct=null,et=!1,_r=null,Li=!1,bd=Error(r(519));function br(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Dl(ki(s,n)),bd}function H0(n){var s=n.stateNode,a=n.type,l=n.memoizedProps;switch(s[Pt]=n,s[$t]=l,a){case"dialog":$e("cancel",s),$e("close",s);break;case"iframe":case"object":case"embed":$e("load",s);break;case"video":case"audio":for(a=0;a<Zl.length;a++)$e(Zl[a],s);break;case"source":$e("error",s);break;case"img":case"image":case"link":$e("error",s),$e("load",s);break;case"details":$e("toggle",s);break;case"input":$e("invalid",s),gu(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":$e("invalid",s);break;case"textarea":$e("invalid",s),hr(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||a_(s.textContent,a)?(l.popover!=null&&($e("beforetoggle",s),$e("toggle",s)),l.onScroll!=null&&$e("scroll",s),l.onScrollEnd!=null&&$e("scrollend",s),l.onClick!=null&&(s.onclick=Qi),s=!0):s=!1,s||br(n,!0)}function F0(n){for(xn=n.return;xn;)switch(xn.tag){case 5:case 31:case 13:Li=!1;return;case 27:case 3:Li=!0;return;default:xn=xn.return}}function po(n){if(n!==xn)return!1;if(!et)return F0(n),et=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||jm(n.type,n.memoizedProps)),a=!a),a&&Ct&&br(n),F0(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Ct=g_(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Ct=g_(n)}else s===27?(s=Ct,kr(n.type)?(n=Hm,Hm=null,Ct=n):Ct=s):Ct=xn?Ui(n.stateNode.nextSibling):null;return!0}function Na(){Ct=xn=null,et=!1}function Ed(){var n=_r;return n!==null&&(ci===null?ci=n:ci.push.apply(ci,n),_r=null),n}function Dl(n){_r===null?_r=[n]:_r.push(n)}var Td=L(null),Ia=null,Ps=null;function Er(n,s,a){me(Td,s._currentValue),s._currentValue=a}function Ls(n){n._currentValue=Td.current,se(Td)}function wd(n,s,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),n===a)break;n=n.return}}function Sd(n,s,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var v=f.child;d=d.firstContext;e:for(;d!==null;){var S=d;d=f;for(var V=0;V<s.length;V++)if(S.context===s[V]){d.lanes|=a,S=d.alternate,S!==null&&(S.lanes|=a),wd(d.return,a,n),l||(v=null);break e}d=S.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(r(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),wd(v,a,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function yo(n,s,a,l){n=null;for(var f=s,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var S=f.type;di(f.pendingProps.value,v.value)||(n!==null?n.push(S):n=[S])}}else if(f===je.current){if(v=f.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(sc):n=[sc])}f=f.return}n!==null&&Sd(s,n,a,l),s.flags|=262144}function Lu(n){for(n=n.firstContext;n!==null;){if(!di(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Da(n){Ia=n,Ps=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Rn(n){return G0(Ia,n)}function ju(n,s){return Ia===null&&Da(n),G0(n,s)}function G0(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Ps===null){if(n===null)throw Error(r(308));Ps=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Ps=Ps.next=s;return a}var pS=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},yS=i.unstable_scheduleCallback,vS=i.unstable_NormalPriority,tn={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ad(){return{controller:new pS,data:new Map,refCount:0}}function Ol(n){n.refCount--,n.refCount===0&&yS(vS,function(){n.controller.abort()})}var Ml=null,xd=0,vo=0,_o=null;function _S(n,s){if(Ml===null){var a=Ml=[];xd=0,vo=Nm(),_o={status:"pending",value:void 0,then:function(l){a.push(l)}}}return xd++,s.then($0,$0),s}function $0(){if(--xd===0&&Ml!==null){_o!==null&&(_o.status="fulfilled");var n=Ml;Ml=null,vo=0,_o=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function bS(n,s){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var K0=ie.S;ie.S=function(n,s){Iv=Wt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&_S(n,s),K0!==null&&K0(n,s)};var Oa=L(null);function Rd(){var n=Oa.current;return n!==null?n:wt.pooledCache}function Uu(n,s){s===null?me(Oa,Oa.current):me(Oa,s.pool)}function Q0(){var n=Rd();return n===null?null:{parent:tn._currentValue,pool:n}}var bo=Error(r(460)),Cd=Error(r(474)),zu=Error(r(542)),Bu={then:function(){}};function Y0(n){return n=n.status,n==="fulfilled"||n==="rejected"}function X0(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(Qi,Qi),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,W0(n),n;default:if(typeof s.status=="string")s.then(Qi,Qi);else{if(n=wt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(l){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=l}},function(l){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,W0(n),n}throw ka=s,bo}}function Ma(n){try{var s=n._init;return s(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ka=a,bo):a}}var ka=null;function J0(){if(ka===null)throw Error(r(459));var n=ka;return ka=null,n}function W0(n){if(n===bo||n===zu)throw Error(r(483))}var Eo=null,kl=0;function qu(n){var s=kl;return kl+=1,Eo===null&&(Eo=[]),X0(Eo,n,s)}function Vl(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Hu(n,s){throw s.$$typeof===w?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Z0(n){function s(B,j){if(n){var K=B.deletions;K===null?(B.deletions=[j],B.flags|=16):K.push(j)}}function a(B,j){if(!n)return null;for(;j!==null;)s(B,j),j=j.sibling;return null}function l(B){for(var j=new Map;B!==null;)B.key!==null?j.set(B.key,B):j.set(B.index,B),B=B.sibling;return j}function f(B,j){return B=ks(B,j),B.index=0,B.sibling=null,B}function d(B,j,K){return B.index=K,n?(K=B.alternate,K!==null?(K=K.index,K<j?(B.flags|=67108866,j):K):(B.flags|=67108866,j)):(B.flags|=1048576,j)}function v(B){return n&&B.alternate===null&&(B.flags|=67108866),B}function S(B,j,K,ae){return j===null||j.tag!==6?(j=pd(K,B.mode,ae),j.return=B,j):(j=f(j,K),j.return=B,j)}function V(B,j,K,ae){var Re=K.type;return Re===P?re(B,j,K.props.children,ae,K.key):j!==null&&(j.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===A&&Ma(Re)===j.type)?(j=f(j,K.props),Vl(j,K),j.return=B,j):(j=Vu(K.type,K.key,K.props,null,B.mode,ae),Vl(j,K),j.return=B,j)}function Q(B,j,K,ae){return j===null||j.tag!==4||j.stateNode.containerInfo!==K.containerInfo||j.stateNode.implementation!==K.implementation?(j=yd(K,B.mode,ae),j.return=B,j):(j=f(j,K.children||[]),j.return=B,j)}function re(B,j,K,ae,Re){return j===null||j.tag!==7?(j=Ca(K,B.mode,ae,Re),j.return=B,j):(j=f(j,K),j.return=B,j)}function le(B,j,K){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=pd(""+j,B.mode,K),j.return=B,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case R:return K=Vu(j.type,j.key,j.props,null,B.mode,K),Vl(K,j),K.return=B,K;case D:return j=yd(j,B.mode,K),j.return=B,j;case A:return j=Ma(j),le(B,j,K)}if(mt(j)||z(j))return j=Ca(j,B.mode,K,null),j.return=B,j;if(typeof j.then=="function")return le(B,qu(j),K);if(j.$$typeof===G)return le(B,ju(B,j),K);Hu(B,j)}return null}function X(B,j,K,ae){var Re=j!==null?j.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Re!==null?null:S(B,j,""+K,ae);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case R:return K.key===Re?V(B,j,K,ae):null;case D:return K.key===Re?Q(B,j,K,ae):null;case A:return K=Ma(K),X(B,j,K,ae)}if(mt(K)||z(K))return Re!==null?null:re(B,j,K,ae,null);if(typeof K.then=="function")return X(B,j,qu(K),ae);if(K.$$typeof===G)return X(B,j,ju(B,K),ae);Hu(B,K)}return null}function ne(B,j,K,ae,Re){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return B=B.get(K)||null,S(j,B,""+ae,Re);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case R:return B=B.get(ae.key===null?K:ae.key)||null,V(j,B,ae,Re);case D:return B=B.get(ae.key===null?K:ae.key)||null,Q(j,B,ae,Re);case A:return ae=Ma(ae),ne(B,j,K,ae,Re)}if(mt(ae)||z(ae))return B=B.get(K)||null,re(j,B,ae,Re,null);if(typeof ae.then=="function")return ne(B,j,K,qu(ae),Re);if(ae.$$typeof===G)return ne(B,j,K,ju(j,ae),Re);Hu(j,ae)}return null}function Te(B,j,K,ae){for(var Re=null,rt=null,we=j,qe=j=0,Ye=null;we!==null&&qe<K.length;qe++){we.index>qe?(Ye=we,we=null):Ye=we.sibling;var at=X(B,we,K[qe],ae);if(at===null){we===null&&(we=Ye);break}n&&we&&at.alternate===null&&s(B,we),j=d(at,j,qe),rt===null?Re=at:rt.sibling=at,rt=at,we=Ye}if(qe===K.length)return a(B,we),et&&Vs(B,qe),Re;if(we===null){for(;qe<K.length;qe++)we=le(B,K[qe],ae),we!==null&&(j=d(we,j,qe),rt===null?Re=we:rt.sibling=we,rt=we);return et&&Vs(B,qe),Re}for(we=l(we);qe<K.length;qe++)Ye=ne(we,B,qe,K[qe],ae),Ye!==null&&(n&&Ye.alternate!==null&&we.delete(Ye.key===null?qe:Ye.key),j=d(Ye,j,qe),rt===null?Re=Ye:rt.sibling=Ye,rt=Ye);return n&&we.forEach(function(Ur){return s(B,Ur)}),et&&Vs(B,qe),Re}function Ne(B,j,K,ae){if(K==null)throw Error(r(151));for(var Re=null,rt=null,we=j,qe=j=0,Ye=null,at=K.next();we!==null&&!at.done;qe++,at=K.next()){we.index>qe?(Ye=we,we=null):Ye=we.sibling;var Ur=X(B,we,at.value,ae);if(Ur===null){we===null&&(we=Ye);break}n&&we&&Ur.alternate===null&&s(B,we),j=d(Ur,j,qe),rt===null?Re=Ur:rt.sibling=Ur,rt=Ur,we=Ye}if(at.done)return a(B,we),et&&Vs(B,qe),Re;if(we===null){for(;!at.done;qe++,at=K.next())at=le(B,at.value,ae),at!==null&&(j=d(at,j,qe),rt===null?Re=at:rt.sibling=at,rt=at);return et&&Vs(B,qe),Re}for(we=l(we);!at.done;qe++,at=K.next())at=ne(we,B,qe,at.value,ae),at!==null&&(n&&at.alternate!==null&&we.delete(at.key===null?qe:at.key),j=d(at,j,qe),rt===null?Re=at:rt.sibling=at,rt=at);return n&&we.forEach(function(DA){return s(B,DA)}),et&&Vs(B,qe),Re}function Et(B,j,K,ae){if(typeof K=="object"&&K!==null&&K.type===P&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case R:e:{for(var Re=K.key;j!==null;){if(j.key===Re){if(Re=K.type,Re===P){if(j.tag===7){a(B,j.sibling),ae=f(j,K.props.children),ae.return=B,B=ae;break e}}else if(j.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===A&&Ma(Re)===j.type){a(B,j.sibling),ae=f(j,K.props),Vl(ae,K),ae.return=B,B=ae;break e}a(B,j);break}else s(B,j);j=j.sibling}K.type===P?(ae=Ca(K.props.children,B.mode,ae,K.key),ae.return=B,B=ae):(ae=Vu(K.type,K.key,K.props,null,B.mode,ae),Vl(ae,K),ae.return=B,B=ae)}return v(B);case D:e:{for(Re=K.key;j!==null;){if(j.key===Re)if(j.tag===4&&j.stateNode.containerInfo===K.containerInfo&&j.stateNode.implementation===K.implementation){a(B,j.sibling),ae=f(j,K.children||[]),ae.return=B,B=ae;break e}else{a(B,j);break}else s(B,j);j=j.sibling}ae=yd(K,B.mode,ae),ae.return=B,B=ae}return v(B);case A:return K=Ma(K),Et(B,j,K,ae)}if(mt(K))return Te(B,j,K,ae);if(z(K)){if(Re=z(K),typeof Re!="function")throw Error(r(150));return K=Re.call(K),Ne(B,j,K,ae)}if(typeof K.then=="function")return Et(B,j,qu(K),ae);if(K.$$typeof===G)return Et(B,j,ju(B,K),ae);Hu(B,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,j!==null&&j.tag===6?(a(B,j.sibling),ae=f(j,K),ae.return=B,B=ae):(a(B,j),ae=pd(K,B.mode,ae),ae.return=B,B=ae),v(B)):a(B,j)}return function(B,j,K,ae){try{kl=0;var Re=Et(B,j,K,ae);return Eo=null,Re}catch(we){if(we===bo||we===zu)throw we;var rt=mi(29,we,null,B.mode);return rt.lanes=ae,rt.return=B,rt}}}var Va=Z0(!0),ey=Z0(!1),Tr=!1;function Nd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Id(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function wr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Sr(n,s,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(ct&2)!==0){var f=l.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),l.pending=s,s=ku(n),L0(n,null,a),s}return Mu(n,l,s,a),ku(n)}function Pl(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,Gt(n,a)}}function Dd(n,s){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?f=d=s:d=d.next=s}else f=d=s;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var Od=!1;function Ll(){if(Od){var n=_o;if(n!==null)throw n}}function jl(n,s,a,l){Od=!1;var f=n.updateQueue;Tr=!1;var d=f.firstBaseUpdate,v=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var V=S,Q=V.next;V.next=null,v===null?d=Q:v.next=Q,v=V;var re=n.alternate;re!==null&&(re=re.updateQueue,S=re.lastBaseUpdate,S!==v&&(S===null?re.firstBaseUpdate=Q:S.next=Q,re.lastBaseUpdate=V))}if(d!==null){var le=f.baseState;v=0,re=Q=V=null,S=d;do{var X=S.lane&-536870913,ne=X!==S.lane;if(ne?(Qe&X)===X:(l&X)===X){X!==0&&X===vo&&(Od=!0),re!==null&&(re=re.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Te=n,Ne=S;X=s;var Et=a;switch(Ne.tag){case 1:if(Te=Ne.payload,typeof Te=="function"){le=Te.call(Et,le,X);break e}le=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ne.payload,X=typeof Te=="function"?Te.call(Et,le,X):Te,X==null)break e;le=E({},le,X);break e;case 2:Tr=!0}}X=S.callback,X!==null&&(n.flags|=64,ne&&(n.flags|=8192),ne=f.callbacks,ne===null?f.callbacks=[X]:ne.push(X))}else ne={lane:X,tag:S.tag,payload:S.payload,callback:S.callback,next:null},re===null?(Q=re=ne,V=le):re=re.next=ne,v|=X;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;ne=S,S=ne.next,ne.next=null,f.lastBaseUpdate=ne,f.shared.pending=null}}while(!0);re===null&&(V=le),f.baseState=V,f.firstBaseUpdate=Q,f.lastBaseUpdate=re,d===null&&(f.shared.lanes=0),Nr|=v,n.lanes=v,n.memoizedState=le}}function ty(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function ny(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)ty(a[n],s)}var To=L(null),Fu=L(0);function iy(n,s){n=$s,me(Fu,n),me(To,s),$s=n|s.baseLanes}function Md(){me(Fu,$s),me(To,To.current)}function kd(){$s=Fu.current,se(To),se(Fu)}var gi=L(null),ji=null;function Ar(n){var s=n.alternate;me(Qt,Qt.current&1),me(gi,n),ji===null&&(s===null||To.current!==null||s.memoizedState!==null)&&(ji=n)}function Vd(n){me(Qt,Qt.current),me(gi,n),ji===null&&(ji=n)}function sy(n){n.tag===22?(me(Qt,Qt.current),me(gi,n),ji===null&&(ji=n)):xr()}function xr(){me(Qt,Qt.current),me(gi,gi.current)}function pi(n){se(gi),ji===n&&(ji=null),se(Qt)}var Qt=L(0);function Gu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Bm(a)||qm(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var js=0,ze=null,_t=null,nn=null,$u=!1,wo=!1,Pa=!1,Ku=0,Ul=0,So=null,ES=0;function zt(){throw Error(r(321))}function Pd(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!di(n[a],s[a]))return!1;return!0}function Ld(n,s,a,l,f,d){return js=d,ze=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ie.H=n===null||n.memoizedState===null?By:Wd,Pa=!1,d=a(l,f),Pa=!1,wo&&(d=ay(s,a,l,f)),ry(n),d}function ry(n){ie.H=ql;var s=_t!==null&&_t.next!==null;if(js=0,nn=_t=ze=null,$u=!1,Ul=0,So=null,s)throw Error(r(300));n===null||sn||(n=n.dependencies,n!==null&&Lu(n)&&(sn=!0))}function ay(n,s,a,l){ze=n;var f=0;do{if(wo&&(So=null),Ul=0,wo=!1,25<=f)throw Error(r(301));if(f+=1,nn=_t=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}ie.H=qy,d=s(a,l)}while(wo);return d}function TS(){var n=ie.H,s=n.useState()[0];return s=typeof s.then=="function"?zl(s):s,n=n.useState()[0],(_t!==null?_t.memoizedState:null)!==n&&(ze.flags|=1024),s}function jd(){var n=Ku!==0;return Ku=0,n}function Ud(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function zd(n){if($u){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}$u=!1}js=0,nn=_t=ze=null,wo=!1,Ul=Ku=0,So=null}function Yn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?ze.memoizedState=nn=n:nn=nn.next=n,nn}function Yt(){if(_t===null){var n=ze.alternate;n=n!==null?n.memoizedState:null}else n=_t.next;var s=nn===null?ze.memoizedState:nn.next;if(s!==null)nn=s,_t=n;else{if(n===null)throw ze.alternate===null?Error(r(467)):Error(r(310));_t=n,n={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},nn===null?ze.memoizedState=nn=n:nn=nn.next=n}return nn}function Qu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zl(n){var s=Ul;return Ul+=1,So===null&&(So=[]),n=X0(So,n,s),s=ze,(nn===null?s.memoizedState:nn.next)===null&&(s=s.alternate,ie.H=s===null||s.memoizedState===null?By:Wd),n}function Yu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return zl(n);if(n.$$typeof===G)return Rn(n)}throw Error(r(438,String(n)))}function Bd(n){var s=null,a=ze.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=ze.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Qu(),ze.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),l=0;l<n;l++)a[l]=k;return s.index++,a}function Us(n,s){return typeof s=="function"?s(n):s}function Xu(n){var s=Yt();return qd(s,_t,n)}function qd(n,s,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var v=f.next;f.next=d.next,d.next=v}s.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{s=f.next;var S=v=null,V=null,Q=s,re=!1;do{var le=Q.lane&-536870913;if(le!==Q.lane?(Qe&le)===le:(js&le)===le){var X=Q.revertLane;if(X===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),le===vo&&(re=!0);else if((js&X)===X){Q=Q.next,X===vo&&(re=!0);continue}else le={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},V===null?(S=V=le,v=d):V=V.next=le,ze.lanes|=X,Nr|=X;le=Q.action,Pa&&a(d,le),d=Q.hasEagerState?Q.eagerState:a(d,le)}else X={lane:le,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},V===null?(S=V=X,v=d):V=V.next=X,ze.lanes|=le,Nr|=le;Q=Q.next}while(Q!==null&&Q!==s);if(V===null?v=d:V.next=S,!di(d,n.memoizedState)&&(sn=!0,re&&(a=_o,a!==null)))throw a;n.memoizedState=d,n.baseState=v,n.baseQueue=V,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function Hd(n){var s=Yt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=s.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do d=n(d,v.action),v=v.next;while(v!==f);di(d,s.memoizedState)||(sn=!0),s.memoizedState=d,s.baseQueue===null&&(s.baseState=d),a.lastRenderedState=d}return[d,l]}function oy(n,s,a){var l=ze,f=Yt(),d=et;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=s();var v=!di((_t||f).memoizedState,a);if(v&&(f.memoizedState=a,sn=!0),f=f.queue,$d(uy.bind(null,l,f,n),[n]),f.getSnapshot!==s||v||nn!==null&&nn.memoizedState.tag&1){if(l.flags|=2048,Ao(9,{destroy:void 0},cy.bind(null,l,f,a,s),null),wt===null)throw Error(r(349));d||(js&127)!==0||ly(l,s,a)}return a}function ly(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=ze.updateQueue,s===null?(s=Qu(),ze.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function cy(n,s,a,l){s.value=a,s.getSnapshot=l,hy(s)&&fy(n)}function uy(n,s,a){return a(function(){hy(s)&&fy(n)})}function hy(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!di(n,a)}catch{return!0}}function fy(n){var s=Ra(n,2);s!==null&&ui(s,n,2)}function Fd(n){var s=Yn();if(typeof n=="function"){var a=n;if(n=a(),Pa){pn(!0);try{a()}finally{pn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:n},s}function dy(n,s,a,l){return n.baseState=a,qd(n,_t,typeof l=="function"?l:Us)}function wS(n,s,a,l,f){if(Zu(n))throw Error(r(485));if(n=s.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};ie.T!==null?a(!0):d.isTransition=!1,l(d),a=s.pending,a===null?(d.next=s.pending=d,my(s,d)):(d.next=a.next,s.pending=a.next=d)}}function my(n,s){var a=s.action,l=s.payload,f=n.state;if(s.isTransition){var d=ie.T,v={};ie.T=v;try{var S=a(f,l),V=ie.S;V!==null&&V(v,S),gy(n,s,S)}catch(Q){Gd(n,s,Q)}finally{d!==null&&v.types!==null&&(d.types=v.types),ie.T=d}}else try{d=a(f,l),gy(n,s,d)}catch(Q){Gd(n,s,Q)}}function gy(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){py(n,s,l)},function(l){return Gd(n,s,l)}):py(n,s,a)}function py(n,s,a){s.status="fulfilled",s.value=a,yy(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,my(n,a)))}function Gd(n,s,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,yy(s),s=s.next;while(s!==l)}n.action=null}function yy(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function vy(n,s){return s}function _y(n,s){if(et){var a=wt.formState;if(a!==null){e:{var l=ze;if(et){if(Ct){t:{for(var f=Ct,d=Li;f.nodeType!==8;){if(!d){f=null;break t}if(f=Ui(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){Ct=Ui(f.nextSibling),l=f.data==="F!";break e}}br(l)}l=!1}l&&(s=a[0])}}return a=Yn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vy,lastRenderedState:s},a.queue=l,a=jy.bind(null,ze,l),l.dispatch=a,l=Fd(!1),d=Jd.bind(null,ze,!1,l.queue),l=Yn(),f={state:s,dispatch:null,action:n,pending:null},l.queue=f,a=wS.bind(null,ze,f,d,a),f.dispatch=a,l.memoizedState=n,[s,a,!1]}function by(n){var s=Yt();return Ey(s,_t,n)}function Ey(n,s,a){if(s=qd(n,s,vy)[0],n=Xu(Us)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=zl(s)}catch(v){throw v===bo?zu:v}else l=s;s=Yt();var f=s.queue,d=f.dispatch;return a!==s.memoizedState&&(ze.flags|=2048,Ao(9,{destroy:void 0},SS.bind(null,f,a),null)),[l,d,n]}function SS(n,s){n.action=s}function Ty(n){var s=Yt(),a=_t;if(a!==null)return Ey(s,a,n);Yt(),s=s.memoizedState,a=Yt();var l=a.queue.dispatch;return a.memoizedState=n,[s,l,!1]}function Ao(n,s,a,l){return n={tag:n,create:a,deps:l,inst:s,next:null},s=ze.updateQueue,s===null&&(s=Qu(),ze.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,s.lastEffect=n),n}function wy(){return Yt().memoizedState}function Ju(n,s,a,l){var f=Yn();ze.flags|=n,f.memoizedState=Ao(1|s,{destroy:void 0},a,l===void 0?null:l)}function Wu(n,s,a,l){var f=Yt();l=l===void 0?null:l;var d=f.memoizedState.inst;_t!==null&&l!==null&&Pd(l,_t.memoizedState.deps)?f.memoizedState=Ao(s,d,a,l):(ze.flags|=n,f.memoizedState=Ao(1|s,d,a,l))}function Sy(n,s){Ju(8390656,8,n,s)}function $d(n,s){Wu(2048,8,n,s)}function AS(n){ze.flags|=4;var s=ze.updateQueue;if(s===null)s=Qu(),ze.updateQueue=s,s.events=[n];else{var a=s.events;a===null?s.events=[n]:a.push(n)}}function Ay(n){var s=Yt().memoizedState;return AS({ref:s,nextImpl:n}),function(){if((ct&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function xy(n,s){return Wu(4,2,n,s)}function Ry(n,s){return Wu(4,4,n,s)}function Cy(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Ny(n,s,a){a=a!=null?a.concat([n]):null,Wu(4,4,Cy.bind(null,s,n),a)}function Kd(){}function Iy(n,s){var a=Yt();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Pd(s,l[1])?l[0]:(a.memoizedState=[n,s],n)}function Dy(n,s){var a=Yt();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Pd(s,l[1]))return l[0];if(l=n(),Pa){pn(!0);try{n()}finally{pn(!1)}}return a.memoizedState=[l,s],l}function Qd(n,s,a){return a===void 0||(js&1073741824)!==0&&(Qe&261930)===0?n.memoizedState=s:(n.memoizedState=a,n=Ov(),ze.lanes|=n,Nr|=n,a)}function Oy(n,s,a,l){return di(a,s)?a:To.current!==null?(n=Qd(n,a,l),di(n,s)||(sn=!0),n):(js&42)===0||(js&1073741824)!==0&&(Qe&261930)===0?(sn=!0,n.memoizedState=a):(n=Ov(),ze.lanes|=n,Nr|=n,s)}function My(n,s,a,l,f){var d=he.p;he.p=d!==0&&8>d?d:8;var v=ie.T,S={};ie.T=S,Jd(n,!1,s,a);try{var V=f(),Q=ie.S;if(Q!==null&&Q(S,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var re=bS(V,l);Bl(n,s,re,_i(n))}else Bl(n,s,l,_i(n))}catch(le){Bl(n,s,{then:function(){},status:"rejected",reason:le},_i())}finally{he.p=d,v!==null&&S.types!==null&&(v.types=S.types),ie.T=v}}function xS(){}function Yd(n,s,a,l){if(n.tag!==5)throw Error(r(476));var f=ky(n).queue;My(n,f,s,be,a===null?xS:function(){return Vy(n),a(l)})}function ky(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:be},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Vy(n){var s=ky(n);s.next===null&&(s=n.alternate.memoizedState),Bl(n,s.next.queue,{},_i())}function Xd(){return Rn(sc)}function Py(){return Yt().memoizedState}function Ly(){return Yt().memoizedState}function RS(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=_i();n=wr(a);var l=Sr(s,n,a);l!==null&&(ui(l,s,a),Pl(l,s,a)),s={cache:Ad()},n.payload=s;return}s=s.return}}function CS(n,s,a){var l=_i();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Zu(n)?Uy(s,a):(a=md(n,s,a,l),a!==null&&(ui(a,n,l),zy(a,s,l)))}function jy(n,s,a){var l=_i();Bl(n,s,a,l)}function Bl(n,s,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Zu(n))Uy(s,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=s.lastRenderedReducer,d!==null))try{var v=s.lastRenderedState,S=d(v,a);if(f.hasEagerState=!0,f.eagerState=S,di(S,v))return Mu(n,s,f,0),wt===null&&Ou(),!1}catch{}if(a=md(n,s,f,l),a!==null)return ui(a,n,l),zy(a,s,l),!0}return!1}function Jd(n,s,a,l){if(l={lane:2,revertLane:Nm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Zu(n)){if(s)throw Error(r(479))}else s=md(n,a,l,2),s!==null&&ui(s,n,2)}function Zu(n){var s=n.alternate;return n===ze||s!==null&&s===ze}function Uy(n,s){wo=$u=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function zy(n,s,a){if((a&4194048)!==0){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,Gt(n,a)}}var ql={readContext:Rn,use:Yu,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useLayoutEffect:zt,useInsertionEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useSyncExternalStore:zt,useId:zt,useHostTransitionStatus:zt,useFormState:zt,useActionState:zt,useOptimistic:zt,useMemoCache:zt,useCacheRefresh:zt};ql.useEffectEvent=zt;var By={readContext:Rn,use:Yu,useCallback:function(n,s){return Yn().memoizedState=[n,s===void 0?null:s],n},useContext:Rn,useEffect:Sy,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,Ju(4194308,4,Cy.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Ju(4194308,4,n,s)},useInsertionEffect:function(n,s){Ju(4,2,n,s)},useMemo:function(n,s){var a=Yn();s=s===void 0?null:s;var l=n();if(Pa){pn(!0);try{n()}finally{pn(!1)}}return a.memoizedState=[l,s],l},useReducer:function(n,s,a){var l=Yn();if(a!==void 0){var f=a(s);if(Pa){pn(!0);try{a(s)}finally{pn(!1)}}}else f=s;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=CS.bind(null,ze,n),[l.memoizedState,n]},useRef:function(n){var s=Yn();return n={current:n},s.memoizedState=n},useState:function(n){n=Fd(n);var s=n.queue,a=jy.bind(null,ze,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:Kd,useDeferredValue:function(n,s){var a=Yn();return Qd(a,n,s)},useTransition:function(){var n=Fd(!1);return n=My.bind(null,ze,n.queue,!0,!1),Yn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var l=ze,f=Yn();if(et){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),wt===null)throw Error(r(349));(Qe&127)!==0||ly(l,s,a)}f.memoizedState=a;var d={value:a,getSnapshot:s};return f.queue=d,Sy(uy.bind(null,l,d,n),[n]),l.flags|=2048,Ao(9,{destroy:void 0},cy.bind(null,l,d,a,s),null),a},useId:function(){var n=Yn(),s=wt.identifierPrefix;if(et){var a=ys,l=ps;a=(l&~(1<<32-At(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Ku++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=ES++,s="_"+s+"r_"+a.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Xd,useFormState:_y,useActionState:_y,useOptimistic:function(n){var s=Yn();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Jd.bind(null,ze,!0,a),a.dispatch=s,[n,s]},useMemoCache:Bd,useCacheRefresh:function(){return Yn().memoizedState=RS.bind(null,ze)},useEffectEvent:function(n){var s=Yn(),a={impl:n};return s.memoizedState=a,function(){if((ct&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Wd={readContext:Rn,use:Yu,useCallback:Iy,useContext:Rn,useEffect:$d,useImperativeHandle:Ny,useInsertionEffect:xy,useLayoutEffect:Ry,useMemo:Dy,useReducer:Xu,useRef:wy,useState:function(){return Xu(Us)},useDebugValue:Kd,useDeferredValue:function(n,s){var a=Yt();return Oy(a,_t.memoizedState,n,s)},useTransition:function(){var n=Xu(Us)[0],s=Yt().memoizedState;return[typeof n=="boolean"?n:zl(n),s]},useSyncExternalStore:oy,useId:Py,useHostTransitionStatus:Xd,useFormState:by,useActionState:by,useOptimistic:function(n,s){var a=Yt();return dy(a,_t,n,s)},useMemoCache:Bd,useCacheRefresh:Ly};Wd.useEffectEvent=Ay;var qy={readContext:Rn,use:Yu,useCallback:Iy,useContext:Rn,useEffect:$d,useImperativeHandle:Ny,useInsertionEffect:xy,useLayoutEffect:Ry,useMemo:Dy,useReducer:Hd,useRef:wy,useState:function(){return Hd(Us)},useDebugValue:Kd,useDeferredValue:function(n,s){var a=Yt();return _t===null?Qd(a,n,s):Oy(a,_t.memoizedState,n,s)},useTransition:function(){var n=Hd(Us)[0],s=Yt().memoizedState;return[typeof n=="boolean"?n:zl(n),s]},useSyncExternalStore:oy,useId:Py,useHostTransitionStatus:Xd,useFormState:Ty,useActionState:Ty,useOptimistic:function(n,s){var a=Yt();return _t!==null?dy(a,_t,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Bd,useCacheRefresh:Ly};qy.useEffectEvent=Ay;function Zd(n,s,a,l){s=n.memoizedState,a=a(l,s),a=a==null?s:E({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var em={enqueueSetState:function(n,s,a){n=n._reactInternals;var l=_i(),f=wr(l);f.payload=s,a!=null&&(f.callback=a),s=Sr(n,f,l),s!==null&&(ui(s,n,l),Pl(s,n,l))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var l=_i(),f=wr(l);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=Sr(n,f,l),s!==null&&(ui(s,n,l),Pl(s,n,l))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=_i(),l=wr(a);l.tag=2,s!=null&&(l.callback=s),s=Sr(n,l,a),s!==null&&(ui(s,n,a),Pl(s,n,a))}};function Hy(n,s,a,l,f,d,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,v):s.prototype&&s.prototype.isPureReactComponent?!Cl(a,l)||!Cl(f,d):!0}function Fy(n,s,a,l){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==n&&em.enqueueReplaceState(s,s.state,null)}function La(n,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(n=n.defaultProps){a===s&&(a=E({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function Gy(n){Du(n)}function $y(n){console.error(n)}function Ky(n){Du(n)}function eh(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Qy(n,s,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function tm(n,s,a){return a=wr(a),a.tag=3,a.payload={element:null},a.callback=function(){eh(n,s)},a}function Yy(n){return n=wr(n),n.tag=3,n}function Xy(n,s,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){Qy(s,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){Qy(s,a,l),typeof f!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function NS(n,s,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&yo(s,a,f,!0),a=gi.current,a!==null){switch(a.tag){case 31:case 13:return ji===null?fh():a.alternate===null&&Bt===0&&(Bt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Bu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),xm(n,l,f)),!1;case 22:return a.flags|=65536,l===Bu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),xm(n,l,f)),!1}throw Error(r(435,a.tag))}return xm(n,l,f),fh(),!1}if(et)return s=gi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,l!==bd&&(n=Error(r(422),{cause:l}),Dl(ki(n,a)))):(l!==bd&&(s=Error(r(423),{cause:l}),Dl(ki(s,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=ki(l,a),f=tm(n.stateNode,l,f),Dd(n,f),Bt!==4&&(Bt=2)),!1;var d=Error(r(520),{cause:l});if(d=ki(d,a),Xl===null?Xl=[d]:Xl.push(d),Bt!==4&&(Bt=2),s===null)return!0;l=ki(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=tm(a.stateNode,l,n),Dd(a,n),!1;case 1:if(s=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ir===null||!Ir.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Yy(f),Xy(f,n,a,l),Dd(a,f),!1}a=a.return}while(a!==null);return!1}var nm=Error(r(461)),sn=!1;function Cn(n,s,a,l){s.child=n===null?ey(s,null,a,l):Va(s,n.child,a,l)}function Jy(n,s,a,l,f){a=a.render;var d=s.ref;if("ref"in l){var v={};for(var S in l)S!=="ref"&&(v[S]=l[S])}else v=l;return Da(s),l=Ld(n,s,a,v,d,f),S=jd(),n!==null&&!sn?(Ud(n,s,f),zs(n,s,f)):(et&&S&&vd(s),s.flags|=1,Cn(n,s,l,f),s.child)}function Wy(n,s,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!gd(d)&&d.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=d,Zy(n,s,d,l,f)):(n=Vu(a.type,null,l,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(d=n.child,!um(n,f)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Cl,a(v,l)&&n.ref===s.ref)return zs(n,s,f)}return s.flags|=1,n=ks(d,l),n.ref=s.ref,n.return=s,s.child=n}function Zy(n,s,a,l,f){if(n!==null){var d=n.memoizedProps;if(Cl(d,l)&&n.ref===s.ref)if(sn=!1,s.pendingProps=l=d,um(n,f))(n.flags&131072)!==0&&(sn=!0);else return s.lanes=n.lanes,zs(n,s,f)}return im(n,s,a,l,f)}function ev(n,s,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=s.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,s.child=null;return tv(n,s,d,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Uu(s,d!==null?d.cachePool:null),d!==null?iy(s,d):Md(),sy(s);else return l=s.lanes=536870912,tv(n,s,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Uu(s,d.cachePool),iy(s,d),xr(),s.memoizedState=null):(n!==null&&Uu(s,null),Md(),xr());return Cn(n,s,f,a),s.child}function Hl(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function tv(n,s,a,l,f){var d=Rd();return d=d===null?null:{parent:tn._currentValue,pool:d},s.memoizedState={baseLanes:a,cachePool:d},n!==null&&Uu(s,null),Md(),sy(s),n!==null&&yo(n,s,l,!0),s.childLanes=f,null}function th(n,s){return s=ih({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function nv(n,s,a){return Va(s,n.child,null,a),n=th(s,s.pendingProps),n.flags|=2,pi(s),s.memoizedState=null,n}function IS(n,s,a){var l=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(et){if(l.mode==="hidden")return n=th(s,l),s.lanes=536870912,Hl(null,n);if(Vd(s),(n=Ct)?(n=m_(n,Li),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:vr!==null?{id:ps,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},a=U0(n),a.return=s,s.child=a,xn=s,Ct=null)):n=null,n===null)throw br(s);return s.lanes=536870912,null}return th(s,l)}var d=n.memoizedState;if(d!==null){var v=d.dehydrated;if(Vd(s),f)if(s.flags&256)s.flags&=-257,s=nv(n,s,a);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(sn||yo(n,s,a,!1),f=(a&n.childLanes)!==0,sn||f){if(l=wt,l!==null&&(v=fe(l,a),v!==0&&v!==d.retryLane))throw d.retryLane=v,Ra(n,v),ui(l,n,v),nm;fh(),s=nv(n,s,a)}else n=d.treeContext,Ct=Ui(v.nextSibling),xn=s,et=!0,_r=null,Li=!1,n!==null&&q0(s,n),s=th(s,l),s.flags|=4096;return s}return n=ks(n.child,{mode:l.mode,children:l.children}),n.ref=s.ref,s.child=n,n.return=s,n}function nh(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function im(n,s,a,l,f){return Da(s),a=Ld(n,s,a,l,void 0,f),l=jd(),n!==null&&!sn?(Ud(n,s,f),zs(n,s,f)):(et&&l&&vd(s),s.flags|=1,Cn(n,s,a,f),s.child)}function iv(n,s,a,l,f,d){return Da(s),s.updateQueue=null,a=ay(s,l,a,f),ry(n),l=jd(),n!==null&&!sn?(Ud(n,s,d),zs(n,s,d)):(et&&l&&vd(s),s.flags|=1,Cn(n,s,a,d),s.child)}function sv(n,s,a,l,f){if(Da(s),s.stateNode===null){var d=fo,v=a.contextType;typeof v=="object"&&v!==null&&(d=Rn(v)),d=new a(l,d),s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=em,s.stateNode=d,d._reactInternals=s,d=s.stateNode,d.props=l,d.state=s.memoizedState,d.refs={},Nd(s),v=a.contextType,d.context=typeof v=="object"&&v!==null?Rn(v):fo,d.state=s.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Zd(s,a,v,l),d.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&em.enqueueReplaceState(d,d.state,null),jl(s,l,d,f),Ll(),d.state=s.memoizedState),typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(n===null){d=s.stateNode;var S=s.memoizedProps,V=La(a,S);d.props=V;var Q=d.context,re=a.contextType;v=fo,typeof re=="object"&&re!==null&&(v=Rn(re));var le=a.getDerivedStateFromProps;re=typeof le=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,re||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||Q!==v)&&Fy(s,d,l,v),Tr=!1;var X=s.memoizedState;d.state=X,jl(s,l,d,f),Ll(),Q=s.memoizedState,S||X!==Q||Tr?(typeof le=="function"&&(Zd(s,a,le,l),Q=s.memoizedState),(V=Tr||Hy(s,a,V,l,X,Q,v))?(re||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(s.flags|=4194308)):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=Q),d.props=l,d.state=Q,d.context=v,l=V):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{d=s.stateNode,Id(n,s),v=s.memoizedProps,re=La(a,v),d.props=re,le=s.pendingProps,X=d.context,Q=a.contextType,V=fo,typeof Q=="object"&&Q!==null&&(V=Rn(Q)),S=a.getDerivedStateFromProps,(Q=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==le||X!==V)&&Fy(s,d,l,V),Tr=!1,X=s.memoizedState,d.state=X,jl(s,l,d,f),Ll();var ne=s.memoizedState;v!==le||X!==ne||Tr||n!==null&&n.dependencies!==null&&Lu(n.dependencies)?(typeof S=="function"&&(Zd(s,a,S,l),ne=s.memoizedState),(re=Tr||Hy(s,a,re,l,X,ne,V)||n!==null&&n.dependencies!==null&&Lu(n.dependencies))?(Q||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,ne,V),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,ne,V)),typeof d.componentDidUpdate=="function"&&(s.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===n.memoizedProps&&X===n.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&X===n.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=ne),d.props=l,d.state=ne,d.context=V,l=re):(typeof d.componentDidUpdate!="function"||v===n.memoizedProps&&X===n.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&X===n.memoizedState||(s.flags|=1024),l=!1)}return d=l,nh(n,s),l=(s.flags&128)!==0,d||l?(d=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),s.flags|=1,n!==null&&l?(s.child=Va(s,n.child,null,f),s.child=Va(s,null,a,f)):Cn(n,s,a,f),s.memoizedState=d.state,n=s.child):n=zs(n,s,f),n}function rv(n,s,a,l){return Na(),s.flags|=256,Cn(n,s,a,l),s.child}var sm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rm(n){return{baseLanes:n,cachePool:Q0()}}function am(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=vi),n}function av(n,s,a){var l=s.pendingProps,f=!1,d=(s.flags&128)!==0,v;if((v=d)||(v=n!==null&&n.memoizedState===null?!1:(Qt.current&2)!==0),v&&(f=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,n===null){if(et){if(f?Ar(s):xr(),(n=Ct)?(n=m_(n,Li),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:vr!==null?{id:ps,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},a=U0(n),a.return=s,s.child=a,xn=s,Ct=null)):n=null,n===null)throw br(s);return qm(n)?s.lanes=32:s.lanes=536870912,null}var S=l.children;return l=l.fallback,f?(xr(),f=s.mode,S=ih({mode:"hidden",children:S},f),l=Ca(l,f,a,null),S.return=s,l.return=s,S.sibling=l,s.child=S,l=s.child,l.memoizedState=rm(a),l.childLanes=am(n,v,a),s.memoizedState=sm,Hl(null,l)):(Ar(s),om(s,S))}var V=n.memoizedState;if(V!==null&&(S=V.dehydrated,S!==null)){if(d)s.flags&256?(Ar(s),s.flags&=-257,s=lm(n,s,a)):s.memoizedState!==null?(xr(),s.child=n.child,s.flags|=128,s=null):(xr(),S=l.fallback,f=s.mode,l=ih({mode:"visible",children:l.children},f),S=Ca(S,f,a,null),S.flags|=2,l.return=s,S.return=s,l.sibling=S,s.child=l,Va(s,n.child,null,a),l=s.child,l.memoizedState=rm(a),l.childLanes=am(n,v,a),s.memoizedState=sm,s=Hl(null,l));else if(Ar(s),qm(S)){if(v=S.nextSibling&&S.nextSibling.dataset,v)var Q=v.dgst;v=Q,l=Error(r(419)),l.stack="",l.digest=v,Dl({value:l,source:null,stack:null}),s=lm(n,s,a)}else if(sn||yo(n,s,a,!1),v=(a&n.childLanes)!==0,sn||v){if(v=wt,v!==null&&(l=fe(v,a),l!==0&&l!==V.retryLane))throw V.retryLane=l,Ra(n,l),ui(v,n,l),nm;Bm(S)||fh(),s=lm(n,s,a)}else Bm(S)?(s.flags|=192,s.child=n.child,s=null):(n=V.treeContext,Ct=Ui(S.nextSibling),xn=s,et=!0,_r=null,Li=!1,n!==null&&q0(s,n),s=om(s,l.children),s.flags|=4096);return s}return f?(xr(),S=l.fallback,f=s.mode,V=n.child,Q=V.sibling,l=ks(V,{mode:"hidden",children:l.children}),l.subtreeFlags=V.subtreeFlags&65011712,Q!==null?S=ks(Q,S):(S=Ca(S,f,a,null),S.flags|=2),S.return=s,l.return=s,l.sibling=S,s.child=l,Hl(null,l),l=s.child,S=n.child.memoizedState,S===null?S=rm(a):(f=S.cachePool,f!==null?(V=tn._currentValue,f=f.parent!==V?{parent:V,pool:V}:f):f=Q0(),S={baseLanes:S.baseLanes|a,cachePool:f}),l.memoizedState=S,l.childLanes=am(n,v,a),s.memoizedState=sm,Hl(n.child,l)):(Ar(s),a=n.child,n=a.sibling,a=ks(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,n!==null&&(v=s.deletions,v===null?(s.deletions=[n],s.flags|=16):v.push(n)),s.child=a,s.memoizedState=null,a)}function om(n,s){return s=ih({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function ih(n,s){return n=mi(22,n,null,s),n.lanes=0,n}function lm(n,s,a){return Va(s,n.child,null,a),n=om(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function ov(n,s,a){n.lanes|=s;var l=n.alternate;l!==null&&(l.lanes|=s),wd(n.return,s,a)}function cm(n,s,a,l,f,d){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=f,v.treeForkCount=d)}function lv(n,s,a){var l=s.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var v=Qt.current,S=(v&2)!==0;if(S?(v=v&1|2,s.flags|=128):v&=1,me(Qt,v),Cn(n,s,l,a),l=et?Il:0,!S&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ov(n,a,s);else if(n.tag===19)ov(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&Gu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),cm(s,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Gu(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}cm(s,!0,a,null,d,l);break;case"together":cm(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function zs(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Nr|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(yo(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,a=ks(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=ks(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function um(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Lu(n)))}function DS(n,s,a){switch(s.tag){case 3:Dt(s,s.stateNode.containerInfo),Er(s,tn,n.memoizedState.cache),Na();break;case 27:case 5:Ht(s);break;case 4:Dt(s,s.stateNode.containerInfo);break;case 10:Er(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Vd(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Ar(s),s.flags|=128,null):(a&s.child.childLanes)!==0?av(n,s,a):(Ar(s),n=zs(n,s,a),n!==null?n.sibling:null);Ar(s);break;case 19:var f=(n.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(yo(n,s,a,!1),l=(a&s.childLanes)!==0),f){if(l)return lv(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),me(Qt,Qt.current),l)break;return null;case 22:return s.lanes=0,ev(n,s,a,s.pendingProps);case 24:Er(s,tn,n.memoizedState.cache)}return zs(n,s,a)}function cv(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)sn=!0;else{if(!um(n,a)&&(s.flags&128)===0)return sn=!1,DS(n,s,a);sn=(n.flags&131072)!==0}else sn=!1,et&&(s.flags&1048576)!==0&&B0(s,Il,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(n=Ma(s.elementType),s.type=n,typeof n=="function")gd(n)?(l=La(n,l),s.tag=1,s=sv(null,s,n,l,a)):(s.tag=0,s=im(null,s,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===ce){s.tag=11,s=Jy(null,s,n,l,a);break e}else if(f===C){s.tag=14,s=Wy(null,s,n,l,a);break e}}throw s=Pe(n)||n,Error(r(306,s,""))}}return s;case 0:return im(n,s,s.type,s.pendingProps,a);case 1:return l=s.type,f=La(l,s.pendingProps),sv(n,s,l,f,a);case 3:e:{if(Dt(s,s.stateNode.containerInfo),n===null)throw Error(r(387));l=s.pendingProps;var d=s.memoizedState;f=d.element,Id(n,s),jl(s,l,null,a);var v=s.memoizedState;if(l=v.cache,Er(s,tn,l),l!==d.cache&&Sd(s,[tn],a,!0),Ll(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=d,s.memoizedState=d,s.flags&256){s=rv(n,s,l,a);break e}else if(l!==f){f=ki(Error(r(424)),s),Dl(f),s=rv(n,s,l,a);break e}else for(n=s.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Ct=Ui(n.firstChild),xn=s,et=!0,_r=null,Li=!0,a=ey(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Na(),l===f){s=zs(n,s,a);break e}Cn(n,s,l,a)}s=s.child}return s;case 26:return nh(n,s),n===null?(a=b_(s.type,null,s.pendingProps,null))?s.memoizedState=a:et||(a=s.type,n=s.pendingProps,l=_h(Ae.current).createElement(a),l[Pt]=s,l[$t]=n,Nn(l,a,n),Ut(l),s.stateNode=l):s.memoizedState=b_(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Ht(s),n===null&&et&&(l=s.stateNode=y_(s.type,s.pendingProps,Ae.current),xn=s,Li=!0,f=Ct,kr(s.type)?(Hm=f,Ct=Ui(l.firstChild)):Ct=f),Cn(n,s,s.pendingProps.children,a),nh(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&et&&((f=l=Ct)&&(l=oA(l,s.type,s.pendingProps,Li),l!==null?(s.stateNode=l,xn=s,Ct=Ui(l.firstChild),Li=!1,f=!0):f=!1),f||br(s)),Ht(s),f=s.type,d=s.pendingProps,v=n!==null?n.memoizedProps:null,l=d.children,jm(f,d)?l=null:v!==null&&jm(f,v)&&(s.flags|=32),s.memoizedState!==null&&(f=Ld(n,s,TS,null,null,a),sc._currentValue=f),nh(n,s),Cn(n,s,l,a),s.child;case 6:return n===null&&et&&((n=a=Ct)&&(a=lA(a,s.pendingProps,Li),a!==null?(s.stateNode=a,xn=s,Ct=null,n=!0):n=!1),n||br(s)),null;case 13:return av(n,s,a);case 4:return Dt(s,s.stateNode.containerInfo),l=s.pendingProps,n===null?s.child=Va(s,null,l,a):Cn(n,s,l,a),s.child;case 11:return Jy(n,s,s.type,s.pendingProps,a);case 7:return Cn(n,s,s.pendingProps,a),s.child;case 8:return Cn(n,s,s.pendingProps.children,a),s.child;case 12:return Cn(n,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Er(s,s.type,l.value),Cn(n,s,l.children,a),s.child;case 9:return f=s.type._context,l=s.pendingProps.children,Da(s),f=Rn(f),l=l(f),s.flags|=1,Cn(n,s,l,a),s.child;case 14:return Wy(n,s,s.type,s.pendingProps,a);case 15:return Zy(n,s,s.type,s.pendingProps,a);case 19:return lv(n,s,a);case 31:return IS(n,s,a);case 22:return ev(n,s,a,s.pendingProps);case 24:return Da(s),l=Rn(tn),n===null?(f=Rd(),f===null&&(f=wt,d=Ad(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),s.memoizedState={parent:l,cache:f},Nd(s),Er(s,tn,f)):((n.lanes&a)!==0&&(Id(n,s),jl(s,null,null,a),Ll()),f=n.memoizedState,d=s.memoizedState,f.parent!==l?(f={parent:l,cache:l},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Er(s,tn,l)):(l=d.cache,Er(s,tn,l),l!==f.cache&&Sd(s,[tn],a,!0))),Cn(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Bs(n){n.flags|=4}function hm(n,s,a,l,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Pv())n.flags|=8192;else throw ka=Bu,Cd}else n.flags&=-16777217}function uv(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!A_(s))if(Pv())n.flags|=8192;else throw ka=Bu,Cd}function sh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Zt():536870912,n.lanes|=s,No|=s)}function Fl(n,s){if(!et)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function Nt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,s}function OS(n,s,a){var l=s.pendingProps;switch(_d(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(s),null;case 1:return Nt(s),null;case 3:return a=s.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Ls(tn),ut(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(po(s)?Bs(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ed())),Nt(s),null;case 26:var f=s.type,d=s.memoizedState;return n===null?(Bs(s),d!==null?(Nt(s),uv(s,d)):(Nt(s),hm(s,f,null,l,a))):d?d!==n.memoizedState?(Bs(s),Nt(s),uv(s,d)):(Nt(s),s.flags&=-16777217):(n=n.memoizedProps,n!==l&&Bs(s),Nt(s),hm(s,f,n,l,a)),null;case 27:if(Si(s),a=Ae.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&Bs(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return Nt(s),null}n=de.current,po(s)?H0(s):(n=y_(f,l,a),s.stateNode=n,Bs(s))}return Nt(s),null;case 5:if(Si(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&Bs(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return Nt(s),null}if(d=de.current,po(s))H0(s);else{var v=_h(Ae.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?v.createElement(f,{is:l.is}):v.createElement(f)}}d[Pt]=s,d[$t]=l;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=d;e:switch(Nn(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Bs(s)}}return Nt(s),hm(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,a),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==l&&Bs(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(n=Ae.current,po(s)){if(n=s.stateNode,a=s.memoizedProps,l=null,f=xn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Pt]=s,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||a_(n.nodeValue,a)),n||br(s,!0)}else n=_h(n).createTextNode(l),n[Pt]=s,s.stateNode=n}return Nt(s),null;case 31:if(a=s.memoizedState,n===null||n.memoizedState!==null){if(l=po(s),a!==null){if(n===null){if(!l)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Pt]=s}else Na(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Nt(s),n=!1}else a=Ed(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return s.flags&256?(pi(s),s):(pi(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Nt(s),null;case 13:if(l=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=po(s),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Pt]=s}else Na(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Nt(s),f=!1}else f=Ed(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(pi(s),s):(pi(s),null)}return pi(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=s.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(s.child.flags|=8192),sh(s,s.updateQueue),Nt(s),null);case 4:return ut(),n===null&&Mm(s.stateNode.containerInfo),Nt(s),null;case 10:return Ls(s.type),Nt(s),null;case 19:if(se(Qt),l=s.memoizedState,l===null)return Nt(s),null;if(f=(s.flags&128)!==0,d=l.rendering,d===null)if(f)Fl(l,!1);else{if(Bt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(d=Gu(n),d!==null){for(s.flags|=128,Fl(l,!1),n=d.updateQueue,s.updateQueue=n,sh(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)j0(a,n),a=a.sibling;return me(Qt,Qt.current&1|2),et&&Vs(s,l.treeForkCount),s.child}n=n.sibling}l.tail!==null&&Wt()>ch&&(s.flags|=128,f=!0,Fl(l,!1),s.lanes=4194304)}else{if(!f)if(n=Gu(d),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,sh(s,n),Fl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!et)return Nt(s),null}else 2*Wt()-l.renderingStartTime>ch&&a!==536870912&&(s.flags|=128,f=!0,Fl(l,!1),s.lanes=4194304);l.isBackwards?(d.sibling=s.child,s.child=d):(n=l.last,n!==null?n.sibling=d:s.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=Wt(),n.sibling=null,a=Qt.current,me(Qt,f?a&1|2:a&1),et&&Vs(s,l.treeForkCount),n):(Nt(s),null);case 22:case 23:return pi(s),kd(),l=s.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(Nt(s),s.subtreeFlags&6&&(s.flags|=8192)):Nt(s),a=s.updateQueue,a!==null&&sh(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),n!==null&&se(Oa),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Ls(tn),Nt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function MS(n,s){switch(_d(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Ls(tn),ut(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Si(s),null;case 31:if(s.memoizedState!==null){if(pi(s),s.alternate===null)throw Error(r(340));Na()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(pi(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Na()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return se(Qt),null;case 4:return ut(),null;case 10:return Ls(s.type),null;case 22:case 23:return pi(s),kd(),n!==null&&se(Oa),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Ls(tn),null;case 25:return null;default:return null}}function hv(n,s){switch(_d(s),s.tag){case 3:Ls(tn),ut();break;case 26:case 27:case 5:Si(s);break;case 4:ut();break;case 31:s.memoizedState!==null&&pi(s);break;case 13:pi(s);break;case 19:se(Qt);break;case 10:Ls(s.type);break;case 22:case 23:pi(s),kd(),n!==null&&se(Oa);break;case 24:Ls(tn)}}function Gl(n,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==f)}}catch(S){dt(s,s.return,S)}}function Rr(n,s,a){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var v=l.inst,S=v.destroy;if(S!==void 0){v.destroy=void 0,f=s;var V=a,Q=S;try{Q()}catch(re){dt(f,V,re)}}}l=l.next}while(l!==d)}}catch(re){dt(s,s.return,re)}}function fv(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{ny(s,a)}catch(l){dt(n,n.return,l)}}}function dv(n,s,a){a.props=La(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){dt(n,s,l)}}function $l(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){dt(n,s,f)}}function vs(n,s){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){dt(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){dt(n,s,f)}else a.current=null}function mv(n){var s=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){dt(n,n.return,f)}}function fm(n,s,a){try{var l=n.stateNode;tA(l,n.type,a,s),l[$t]=s}catch(f){dt(n,n.return,f)}}function gv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&kr(n.type)||n.tag===4}function dm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||gv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&kr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function mm(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Qi));else if(l!==4&&(l===27&&kr(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(mm(n,s,a),n=n.sibling;n!==null;)mm(n,s,a),n=n.sibling}function rh(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(l!==4&&(l===27&&kr(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(rh(n,s,a),n=n.sibling;n!==null;)rh(n,s,a),n=n.sibling}function pv(n){var s=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Nn(s,l,a),s[Pt]=n,s[$t]=a}catch(d){dt(n,n.return,d)}}var qs=!1,rn=!1,gm=!1,yv=typeof WeakSet=="function"?WeakSet:Set,vn=null;function kS(n,s){if(n=n.containerInfo,Pm=xh,n=N0(n),ld(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,S=-1,V=-1,Q=0,re=0,le=n,X=null;t:for(;;){for(var ne;le!==a||f!==0&&le.nodeType!==3||(S=v+f),le!==d||l!==0&&le.nodeType!==3||(V=v+l),le.nodeType===3&&(v+=le.nodeValue.length),(ne=le.firstChild)!==null;)X=le,le=ne;for(;;){if(le===n)break t;if(X===a&&++Q===f&&(S=v),X===d&&++re===l&&(V=v),(ne=le.nextSibling)!==null)break;le=X,X=le.parentNode}le=ne}a=S===-1||V===-1?null:{start:S,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(Lm={focusedElem:n,selectionRange:a},xh=!1,vn=s;vn!==null;)if(s=vn,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,vn=n;else for(;vn!==null;){switch(s=vn,d=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=s,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Te=La(a.type,f);n=l.getSnapshotBeforeUpdate(Te,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(Ne){dt(a,a.return,Ne)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)zm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":zm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,vn=n;break}vn=s.return}}function vv(n,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Fs(n,a),l&4&&Gl(5,a);break;case 1:if(Fs(n,a),l&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(v){dt(a,a.return,v)}else{var f=La(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(v){dt(a,a.return,v)}}l&64&&fv(a),l&512&&$l(a,a.return);break;case 3:if(Fs(n,a),l&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{ny(n,s)}catch(v){dt(a,a.return,v)}}break;case 27:s===null&&l&4&&pv(a);case 26:case 5:Fs(n,a),s===null&&l&4&&mv(a),l&512&&$l(a,a.return);break;case 12:Fs(n,a);break;case 31:Fs(n,a),l&4&&Ev(n,a);break;case 13:Fs(n,a),l&4&&Tv(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=HS.bind(null,a),cA(n,a))));break;case 22:if(l=a.memoizedState!==null||qs,!l){s=s!==null&&s.memoizedState!==null||rn,f=qs;var d=rn;qs=l,(rn=s)&&!d?Gs(n,a,(a.subtreeFlags&8772)!==0):Fs(n,a),qs=f,rn=d}break;case 30:break;default:Fs(n,a)}}function _v(n){var s=n.alternate;s!==null&&(n.alternate=null,_v(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&or(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var kt=null,ai=!1;function Hs(n,s,a){for(a=a.child;a!==null;)bv(n,s,a),a=a.sibling}function bv(n,s,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount($n,a)}catch{}switch(a.tag){case 26:rn||vs(a,s),Hs(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:rn||vs(a,s);var l=kt,f=ai;kr(a.type)&&(kt=a.stateNode,ai=!1),Hs(n,s,a),tc(a.stateNode),kt=l,ai=f;break;case 5:rn||vs(a,s);case 6:if(l=kt,f=ai,kt=null,Hs(n,s,a),kt=l,ai=f,kt!==null)if(ai)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(a.stateNode)}catch(d){dt(a,s,d)}else try{kt.removeChild(a.stateNode)}catch(d){dt(a,s,d)}break;case 18:kt!==null&&(ai?(n=kt,f_(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Lo(n)):f_(kt,a.stateNode));break;case 4:l=kt,f=ai,kt=a.stateNode.containerInfo,ai=!0,Hs(n,s,a),kt=l,ai=f;break;case 0:case 11:case 14:case 15:Rr(2,a,s),rn||Rr(4,a,s),Hs(n,s,a);break;case 1:rn||(vs(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&dv(a,s,l)),Hs(n,s,a);break;case 21:Hs(n,s,a);break;case 22:rn=(l=rn)||a.memoizedState!==null,Hs(n,s,a),rn=l;break;default:Hs(n,s,a)}}function Ev(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Lo(n)}catch(a){dt(s,s.return,a)}}}function Tv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Lo(n)}catch(a){dt(s,s.return,a)}}function VS(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new yv),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new yv),s;default:throw Error(r(435,n.tag))}}function ah(n,s){var a=VS(n);s.forEach(function(l){if(!a.has(l)){a.add(l);var f=FS.bind(null,n,l);l.then(f,f)}})}function oi(n,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,v=s,S=v;e:for(;S!==null;){switch(S.tag){case 27:if(kr(S.type)){kt=S.stateNode,ai=!1;break e}break;case 5:kt=S.stateNode,ai=!1;break e;case 3:case 4:kt=S.stateNode.containerInfo,ai=!0;break e}S=S.return}if(kt===null)throw Error(r(160));bv(d,v,f),kt=null,ai=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)wv(s,n),s=s.sibling}var es=null;function wv(n,s){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:oi(s,n),li(n),l&4&&(Rr(3,n,n.return),Gl(3,n),Rr(5,n,n.return));break;case 1:oi(s,n),li(n),l&512&&(rn||a===null||vs(a,a.return)),l&64&&qs&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=es;if(oi(s,n),li(n),l&512&&(rn||a===null||vs(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Ai]||d[Pt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Nn(d,l,a),d[Pt]=n,Ut(d),l=d;break e;case"link":var v=w_("link","href",f).get(l+(a.href||""));if(v){for(var S=0;S<v.length;S++)if(d=v[S],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(S,1);break t}}d=f.createElement(l),Nn(d,l,a),f.head.appendChild(d);break;case"meta":if(v=w_("meta","content",f).get(l+(a.content||""))){for(S=0;S<v.length;S++)if(d=v[S],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(S,1);break t}}d=f.createElement(l),Nn(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[Pt]=n,Ut(d),l=d}n.stateNode=l}else S_(f,n.type,n.stateNode);else n.stateNode=T_(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?S_(f,n.type,n.stateNode):T_(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&fm(n,n.memoizedProps,a.memoizedProps)}break;case 27:oi(s,n),li(n),l&512&&(rn||a===null||vs(a,a.return)),a!==null&&l&4&&fm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(oi(s,n),li(n),l&512&&(rn||a===null||vs(a,a.return)),n.flags&32){f=n.stateNode;try{ri(f,"")}catch(Te){dt(n,n.return,Te)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,fm(n,f,a!==null?a.memoizedProps:f)),l&1024&&(gm=!0);break;case 6:if(oi(s,n),li(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(Te){dt(n,n.return,Te)}}break;case 3:if(Th=null,f=es,es=bh(s.containerInfo),oi(s,n),es=f,li(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Lo(s.containerInfo)}catch(Te){dt(n,n.return,Te)}gm&&(gm=!1,Sv(n));break;case 4:l=es,es=bh(n.stateNode.containerInfo),oi(s,n),li(n),es=l;break;case 12:oi(s,n),li(n);break;case 31:oi(s,n),li(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,ah(n,l)));break;case 13:oi(s,n),li(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(lh=Wt()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,ah(n,l)));break;case 22:f=n.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,Q=qs,re=rn;if(qs=Q||f,rn=re||V,oi(s,n),rn=re,qs=Q,li(n),l&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||V||qs||rn||ja(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){V=a=s;try{if(d=V.stateNode,f)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{S=V.stateNode;var le=V.memoizedProps.style,X=le!=null&&le.hasOwnProperty("display")?le.display:null;S.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Te){dt(V,V.return,Te)}}}else if(s.tag===6){if(a===null){V=s;try{V.stateNode.nodeValue=f?"":V.memoizedProps}catch(Te){dt(V,V.return,Te)}}}else if(s.tag===18){if(a===null){V=s;try{var ne=V.stateNode;f?d_(ne,!0):d_(V.stateNode,!1)}catch(Te){dt(V,V.return,Te)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,ah(n,a))));break;case 19:oi(s,n),li(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,ah(n,l)));break;case 30:break;case 21:break;default:oi(s,n),li(n)}}function li(n){var s=n.flags;if(s&2){try{for(var a,l=n.return;l!==null;){if(gv(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=dm(n);rh(n,d,f);break;case 5:var v=a.stateNode;a.flags&32&&(ri(v,""),a.flags&=-33);var S=dm(n);rh(n,S,v);break;case 3:case 4:var V=a.stateNode.containerInfo,Q=dm(n);mm(n,Q,V);break;default:throw Error(r(161))}}catch(re){dt(n,n.return,re)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Sv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Sv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Fs(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)vv(n,s.alternate,s),s=s.sibling}function ja(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Rr(4,s,s.return),ja(s);break;case 1:vs(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&dv(s,s.return,a),ja(s);break;case 27:tc(s.stateNode);case 26:case 5:vs(s,s.return),ja(s);break;case 22:s.memoizedState===null&&ja(s);break;case 30:ja(s);break;default:ja(s)}n=n.sibling}}function Gs(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,f=n,d=s,v=d.flags;switch(d.tag){case 0:case 11:case 15:Gs(f,d,a),Gl(4,d);break;case 1:if(Gs(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Q){dt(l,l.return,Q)}if(l=d,f=l.updateQueue,f!==null){var S=l.stateNode;try{var V=f.shared.hiddenCallbacks;if(V!==null)for(f.shared.hiddenCallbacks=null,f=0;f<V.length;f++)ty(V[f],S)}catch(Q){dt(l,l.return,Q)}}a&&v&64&&fv(d),$l(d,d.return);break;case 27:pv(d);case 26:case 5:Gs(f,d,a),a&&l===null&&v&4&&mv(d),$l(d,d.return);break;case 12:Gs(f,d,a);break;case 31:Gs(f,d,a),a&&v&4&&Ev(f,d);break;case 13:Gs(f,d,a),a&&v&4&&Tv(f,d);break;case 22:d.memoizedState===null&&Gs(f,d,a),$l(d,d.return);break;case 30:break;default:Gs(f,d,a)}s=s.sibling}}function pm(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Ol(a))}function ym(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ol(n))}function ts(n,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Av(n,s,a,l),s=s.sibling}function Av(n,s,a,l){var f=s.flags;switch(s.tag){case 0:case 11:case 15:ts(n,s,a,l),f&2048&&Gl(9,s);break;case 1:ts(n,s,a,l);break;case 3:ts(n,s,a,l),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ol(n)));break;case 12:if(f&2048){ts(n,s,a,l),n=s.stateNode;try{var d=s.memoizedProps,v=d.id,S=d.onPostCommit;typeof S=="function"&&S(v,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(V){dt(s,s.return,V)}}else ts(n,s,a,l);break;case 31:ts(n,s,a,l);break;case 13:ts(n,s,a,l);break;case 23:break;case 22:d=s.stateNode,v=s.alternate,s.memoizedState!==null?d._visibility&2?ts(n,s,a,l):Kl(n,s):d._visibility&2?ts(n,s,a,l):(d._visibility|=2,xo(n,s,a,l,(s.subtreeFlags&10256)!==0||!1)),f&2048&&pm(v,s);break;case 24:ts(n,s,a,l),f&2048&&ym(s.alternate,s);break;default:ts(n,s,a,l)}}function xo(n,s,a,l,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var d=n,v=s,S=a,V=l,Q=v.flags;switch(v.tag){case 0:case 11:case 15:xo(d,v,S,V,f),Gl(8,v);break;case 23:break;case 22:var re=v.stateNode;v.memoizedState!==null?re._visibility&2?xo(d,v,S,V,f):Kl(d,v):(re._visibility|=2,xo(d,v,S,V,f)),f&&Q&2048&&pm(v.alternate,v);break;case 24:xo(d,v,S,V,f),f&&Q&2048&&ym(v.alternate,v);break;default:xo(d,v,S,V,f)}s=s.sibling}}function Kl(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,l=s,f=l.flags;switch(l.tag){case 22:Kl(a,l),f&2048&&pm(l.alternate,l);break;case 24:Kl(a,l),f&2048&&ym(l.alternate,l);break;default:Kl(a,l)}s=s.sibling}}var Ql=8192;function Ro(n,s,a){if(n.subtreeFlags&Ql)for(n=n.child;n!==null;)xv(n,s,a),n=n.sibling}function xv(n,s,a){switch(n.tag){case 26:Ro(n,s,a),n.flags&Ql&&n.memoizedState!==null&&EA(a,es,n.memoizedState,n.memoizedProps);break;case 5:Ro(n,s,a);break;case 3:case 4:var l=es;es=bh(n.stateNode.containerInfo),Ro(n,s,a),es=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=Ql,Ql=16777216,Ro(n,s,a),Ql=l):Ro(n,s,a));break;default:Ro(n,s,a)}}function Rv(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Yl(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];vn=l,Nv(l,n)}Rv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Cv(n),n=n.sibling}function Cv(n){switch(n.tag){case 0:case 11:case 15:Yl(n),n.flags&2048&&Rr(9,n,n.return);break;case 3:Yl(n);break;case 12:Yl(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,oh(n)):Yl(n);break;default:Yl(n)}}function oh(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];vn=l,Nv(l,n)}Rv(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Rr(8,s,s.return),oh(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,oh(s));break;default:oh(s)}n=n.sibling}}function Nv(n,s){for(;vn!==null;){var a=vn;switch(a.tag){case 0:case 11:case 15:Rr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ol(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,vn=l;else e:for(a=n;vn!==null;){l=vn;var f=l.sibling,d=l.return;if(_v(l),l===a){vn=null;break e}if(f!==null){f.return=d,vn=f;break e}vn=d}}}var PS={getCacheForType:function(n){var s=Rn(tn),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a},cacheSignal:function(){return Rn(tn).controller.signal}},LS=typeof WeakMap=="function"?WeakMap:Map,ct=0,wt=null,Ge=null,Qe=0,ft=0,yi=null,Cr=!1,Co=!1,vm=!1,$s=0,Bt=0,Nr=0,Ua=0,_m=0,vi=0,No=0,Xl=null,ci=null,bm=!1,lh=0,Iv=0,ch=1/0,uh=null,Ir=null,fn=0,Dr=null,Io=null,Ks=0,Em=0,Tm=null,Dv=null,Jl=0,wm=null;function _i(){return(ct&2)!==0&&Qe!==0?Qe&-Qe:ie.T!==null?Nm():Ot()}function Ov(){if(vi===0)if((Qe&536870912)===0||et){var n=Ki;Ki<<=1,(Ki&3932160)===0&&(Ki=262144),vi=n}else vi=536870912;return n=gi.current,n!==null&&(n.flags|=32),vi}function ui(n,s,a){(n===wt&&(ft===2||ft===9)||n.cancelPendingCommit!==null)&&(Do(n,0),Or(n,Qe,vi,!1)),W(n,a),((ct&2)===0||n!==wt)&&(n===wt&&((ct&2)===0&&(Ua|=a),Bt===4&&Or(n,Qe,vi,!1)),_s(n))}function Mv(n,s,a){if((ct&6)!==0)throw Error(r(327));var l=!a&&(s&127)===0&&(s&n.expiredLanes)===0||jt(n,s),f=l?zS(n,s):Am(n,s,!0),d=l;do{if(f===0){Co&&!l&&Or(n,s,0,!1);break}else{if(a=n.current.alternate,d&&!jS(a)){f=Am(n,s,!1),d=!1;continue}if(f===2){if(d=s,n.errorRecoveryDisabledLanes&d)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var S=n;f=Xl;var V=S.current.memoizedState.isDehydrated;if(V&&(Do(S,v).flags|=256),v=Am(S,v,!1),v!==2){if(vm&&!V){S.errorRecoveryDisabledLanes|=d,Ua|=d,f=4;break e}d=ci,ci=f,d!==null&&(ci===null?ci=d:ci.push.apply(ci,d))}f=v}if(d=!1,f!==2)continue}}if(f===1){Do(n,0),Or(n,s,0,!0);break}e:{switch(l=n,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Or(l,s,vi,!Cr);break e;case 2:ci=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=lh+300-Wt(),10<f)){if(Or(l,s,vi,!Cr),Rt(l,0,!0)!==0)break e;Ks=s,l.timeoutHandle=u_(kv.bind(null,l,a,ci,uh,bm,s,vi,Ua,No,Cr,d,"Throttled",-0,0),f);break e}kv(l,a,ci,uh,bm,s,vi,Ua,No,Cr,d,null,-0,0)}}break}while(!0);_s(n)}function kv(n,s,a,l,f,d,v,S,V,Q,re,le,X,ne){if(n.timeoutHandle=-1,le=s.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qi},xv(s,d,le);var Te=(d&62914560)===d?lh-Wt():(d&4194048)===d?Iv-Wt():0;if(Te=TA(le,Te),Te!==null){Ks=d,n.cancelPendingCommit=Te(qv.bind(null,n,s,d,a,l,f,v,S,V,re,le,null,X,ne)),Or(n,d,v,!Q);return}}qv(n,s,d,a,l,f,v,S,V)}function jS(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!di(d(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Or(n,s,a,l){s&=~_m,s&=~Ua,n.suspendedLanes|=s,n.pingedLanes&=~s,l&&(n.warmLanes|=s),l=n.expirationTimes;for(var f=s;0<f;){var d=31-At(f),v=1<<d;l[d]=-1,f&=~v}a!==0&&pt(n,a,s)}function hh(){return(ct&6)===0?(Wl(0),!1):!0}function Sm(){if(Ge!==null){if(ft===0)var n=Ge.return;else n=Ge,Ps=Ia=null,zd(n),Eo=null,kl=0,n=Ge;for(;n!==null;)hv(n.alternate,n),n=n.return;Ge=null}}function Do(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,sA(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Ks=0,Sm(),wt=n,Ge=a=ks(n.current,null),Qe=s,ft=0,yi=null,Cr=!1,Co=jt(n,s),vm=!1,No=vi=_m=Ua=Nr=Bt=0,ci=Xl=null,bm=!1,(s&8)!==0&&(s|=s&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=s;0<l;){var f=31-At(l),d=1<<f;s|=n[f],l&=~d}return $s=s,Ou(),a}function Vv(n,s){ze=null,ie.H=ql,s===bo||s===zu?(s=J0(),ft=3):s===Cd?(s=J0(),ft=4):ft=s===nm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,yi=s,Ge===null&&(Bt=1,eh(n,ki(s,n.current)))}function Pv(){var n=gi.current;return n===null?!0:(Qe&4194048)===Qe?ji===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?n===ji:!1}function Lv(){var n=ie.H;return ie.H=ql,n===null?ql:n}function jv(){var n=ie.A;return ie.A=PS,n}function fh(){Bt=4,Cr||(Qe&4194048)!==Qe&&gi.current!==null||(Co=!0),(Nr&134217727)===0&&(Ua&134217727)===0||wt===null||Or(wt,Qe,vi,!1)}function Am(n,s,a){var l=ct;ct|=2;var f=Lv(),d=jv();(wt!==n||Qe!==s)&&(uh=null,Do(n,s)),s=!1;var v=Bt;e:do try{if(ft!==0&&Ge!==null){var S=Ge,V=yi;switch(ft){case 8:Sm(),v=6;break e;case 3:case 2:case 9:case 6:gi.current===null&&(s=!0);var Q=ft;if(ft=0,yi=null,Oo(n,S,V,Q),a&&Co){v=0;break e}break;default:Q=ft,ft=0,yi=null,Oo(n,S,V,Q)}}US(),v=Bt;break}catch(re){Vv(n,re)}while(!0);return s&&n.shellSuspendCounter++,Ps=Ia=null,ct=l,ie.H=f,ie.A=d,Ge===null&&(wt=null,Qe=0,Ou()),v}function US(){for(;Ge!==null;)Uv(Ge)}function zS(n,s){var a=ct;ct|=2;var l=Lv(),f=jv();wt!==n||Qe!==s?(uh=null,ch=Wt()+500,Do(n,s)):Co=jt(n,s);e:do try{if(ft!==0&&Ge!==null){s=Ge;var d=yi;t:switch(ft){case 1:ft=0,yi=null,Oo(n,s,d,1);break;case 2:case 9:if(Y0(d)){ft=0,yi=null,zv(s);break}s=function(){ft!==2&&ft!==9||wt!==n||(ft=7),_s(n)},d.then(s,s);break e;case 3:ft=7;break e;case 4:ft=5;break e;case 7:Y0(d)?(ft=0,yi=null,zv(s)):(ft=0,yi=null,Oo(n,s,d,7));break;case 5:var v=null;switch(Ge.tag){case 26:v=Ge.memoizedState;case 5:case 27:var S=Ge;if(v?A_(v):S.stateNode.complete){ft=0,yi=null;var V=S.sibling;if(V!==null)Ge=V;else{var Q=S.return;Q!==null?(Ge=Q,dh(Q)):Ge=null}break t}}ft=0,yi=null,Oo(n,s,d,5);break;case 6:ft=0,yi=null,Oo(n,s,d,6);break;case 8:Sm(),Bt=6;break e;default:throw Error(r(462))}}BS();break}catch(re){Vv(n,re)}while(!0);return Ps=Ia=null,ie.H=l,ie.A=f,ct=a,Ge!==null?0:(wt=null,Qe=0,Ou(),Bt)}function BS(){for(;Ge!==null&&!os();)Uv(Ge)}function Uv(n){var s=cv(n.alternate,n,$s);n.memoizedProps=n.pendingProps,s===null?dh(n):Ge=s}function zv(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=iv(a,s,s.pendingProps,s.type,void 0,Qe);break;case 11:s=iv(a,s,s.pendingProps,s.type.render,s.ref,Qe);break;case 5:zd(s);default:hv(a,s),s=Ge=j0(s,$s),s=cv(a,s,$s)}n.memoizedProps=n.pendingProps,s===null?dh(n):Ge=s}function Oo(n,s,a,l){Ps=Ia=null,zd(s),Eo=null,kl=0;var f=s.return;try{if(NS(n,f,s,a,Qe)){Bt=1,eh(n,ki(a,n.current)),Ge=null;return}}catch(d){if(f!==null)throw Ge=f,d;Bt=1,eh(n,ki(a,n.current)),Ge=null;return}s.flags&32768?(et||l===1?n=!0:Co||(Qe&536870912)!==0?n=!1:(Cr=n=!0,(l===2||l===9||l===3||l===6)&&(l=gi.current,l!==null&&l.tag===13&&(l.flags|=16384))),Bv(s,n)):dh(s)}function dh(n){var s=n;do{if((s.flags&32768)!==0){Bv(s,Cr);return}n=s.return;var a=OS(s.alternate,s,$s);if(a!==null){Ge=a;return}if(s=s.sibling,s!==null){Ge=s;return}Ge=s=n}while(s!==null);Bt===0&&(Bt=5)}function Bv(n,s){do{var a=MS(n.alternate,n);if(a!==null){a.flags&=32767,Ge=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){Ge=n;return}Ge=n=a}while(n!==null);Bt=6,Ge=null}function qv(n,s,a,l,f,d,v,S,V){n.cancelPendingCommit=null;do mh();while(fn!==0);if((ct&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(d=s.lanes|s.childLanes,d|=dd,gt(n,a,d,v,S,V),n===wt&&(Ge=wt=null,Qe=0),Io=s,Dr=n,Ks=a,Em=d,Tm=f,Dv=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,GS(Sn,function(){return Kv(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=ie.T,ie.T=null,f=he.p,he.p=2,v=ct,ct|=4;try{kS(n,s,a)}finally{ct=v,he.p=f,ie.T=l}}fn=1,Hv(),Fv(),Gv()}}function Hv(){if(fn===1){fn=0;var n=Dr,s=Io,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=ie.T,ie.T=null;var l=he.p;he.p=2;var f=ct;ct|=4;try{wv(s,n);var d=Lm,v=N0(n.containerInfo),S=d.focusedElem,V=d.selectionRange;if(v!==S&&S&&S.ownerDocument&&C0(S.ownerDocument.documentElement,S)){if(V!==null&&ld(S)){var Q=V.start,re=V.end;if(re===void 0&&(re=Q),"selectionStart"in S)S.selectionStart=Q,S.selectionEnd=Math.min(re,S.value.length);else{var le=S.ownerDocument||document,X=le&&le.defaultView||window;if(X.getSelection){var ne=X.getSelection(),Te=S.textContent.length,Ne=Math.min(V.start,Te),Et=V.end===void 0?Ne:Math.min(V.end,Te);!ne.extend&&Ne>Et&&(v=Et,Et=Ne,Ne=v);var B=R0(S,Ne),j=R0(S,Et);if(B&&j&&(ne.rangeCount!==1||ne.anchorNode!==B.node||ne.anchorOffset!==B.offset||ne.focusNode!==j.node||ne.focusOffset!==j.offset)){var K=le.createRange();K.setStart(B.node,B.offset),ne.removeAllRanges(),Ne>Et?(ne.addRange(K),ne.extend(j.node,j.offset)):(K.setEnd(j.node,j.offset),ne.addRange(K))}}}}for(le=[],ne=S;ne=ne.parentNode;)ne.nodeType===1&&le.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<le.length;S++){var ae=le[S];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}xh=!!Pm,Lm=Pm=null}finally{ct=f,he.p=l,ie.T=a}}n.current=s,fn=2}}function Fv(){if(fn===2){fn=0;var n=Dr,s=Io,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=ie.T,ie.T=null;var l=he.p;he.p=2;var f=ct;ct|=4;try{vv(n,s.alternate,s)}finally{ct=f,he.p=l,ie.T=a}}fn=3}}function Gv(){if(fn===4||fn===3){fn=0,ls();var n=Dr,s=Io,a=Ks,l=Dv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?fn=5:(fn=0,Io=Dr=null,$v(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Ir=null),nt(a),s=s.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot($n,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=ie.T,f=he.p,he.p=2,ie.T=null;try{for(var d=n.onRecoverableError,v=0;v<l.length;v++){var S=l[v];d(S.value,{componentStack:S.stack})}}finally{ie.T=s,he.p=f}}(Ks&3)!==0&&mh(),_s(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===wm?Jl++:(Jl=0,wm=n):Jl=0,Wl(0)}}function $v(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Ol(s)))}function mh(){return Hv(),Fv(),Gv(),Kv()}function Kv(){if(fn!==5)return!1;var n=Dr,s=Em;Em=0;var a=nt(Ks),l=ie.T,f=he.p;try{he.p=32>a?32:a,ie.T=null,a=Tm,Tm=null;var d=Dr,v=Ks;if(fn=0,Io=Dr=null,Ks=0,(ct&6)!==0)throw Error(r(331));var S=ct;if(ct|=4,Cv(d.current),Av(d,d.current,v,a),ct=S,Wl(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot($n,d)}catch{}return!0}finally{he.p=f,ie.T=l,$v(n,s)}}function Qv(n,s,a){s=ki(a,s),s=tm(n.stateNode,s,2),n=Sr(n,s,2),n!==null&&(W(n,2),_s(n))}function dt(n,s,a){if(n.tag===3)Qv(n,n,a);else for(;s!==null;){if(s.tag===3){Qv(s,n,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ir===null||!Ir.has(l))){n=ki(a,n),a=Yy(2),l=Sr(s,a,2),l!==null&&(Xy(a,l,s,n),W(l,2),_s(l));break}}s=s.return}}function xm(n,s,a){var l=n.pingCache;if(l===null){l=n.pingCache=new LS;var f=new Set;l.set(s,f)}else f=l.get(s),f===void 0&&(f=new Set,l.set(s,f));f.has(a)||(vm=!0,f.add(a),n=qS.bind(null,n,s,a),s.then(n,n))}function qS(n,s,a){var l=n.pingCache;l!==null&&l.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,wt===n&&(Qe&a)===a&&(Bt===4||Bt===3&&(Qe&62914560)===Qe&&300>Wt()-lh?(ct&2)===0&&Do(n,0):_m|=a,No===Qe&&(No=0)),_s(n)}function Yv(n,s){s===0&&(s=Zt()),n=Ra(n,s),n!==null&&(W(n,s),_s(n))}function HS(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Yv(n,a)}function FS(n,s){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),Yv(n,a)}function GS(n,s){return ht(n,s)}var gh=null,Mo=null,Rm=!1,ph=!1,Cm=!1,Mr=0;function _s(n){n!==Mo&&n.next===null&&(Mo===null?gh=Mo=n:Mo=Mo.next=n),ph=!0,Rm||(Rm=!0,KS())}function Wl(n,s){if(!Cm&&ph){Cm=!0;do for(var a=!1,l=gh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var v=l.suspendedLanes,S=l.pingedLanes;d=(1<<31-At(42|n)+1)-1,d&=f&~(v&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Zv(l,d))}else d=Qe,d=Rt(l,l===wt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||jt(l,d)||(a=!0,Zv(l,d));l=l.next}while(a);Cm=!1}}function $S(){Xv()}function Xv(){ph=Rm=!1;var n=0;Mr!==0&&iA()&&(n=Mr);for(var s=Wt(),a=null,l=gh;l!==null;){var f=l.next,d=Jv(l,s);d===0?(l.next=null,a===null?gh=f:a.next=f,f===null&&(Mo=a)):(a=l,(n!==0||(d&3)!==0)&&(ph=!0)),l=f}fn!==0&&fn!==5||Wl(n),Mr!==0&&(Mr=0)}function Jv(n,s){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var v=31-At(d),S=1<<v,V=f[v];V===-1?((S&a)===0||(S&l)!==0)&&(f[v]=yn(S,s)):V<=s&&(n.expiredLanes|=S),d&=~S}if(s=wt,a=Qe,a=Rt(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===s&&(ft===2||ft===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Hn(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||jt(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(l!==null&&Hn(l),nt(a)){case 2:case 8:a=Fn;break;case 32:a=Sn;break;case 268435456:a=Cs;break;default:a=Sn}return l=Wv.bind(null,n),a=ht(a,l),n.callbackPriority=s,n.callbackNode=a,s}return l!==null&&l!==null&&Hn(l),n.callbackPriority=2,n.callbackNode=null,2}function Wv(n,s){if(fn!==0&&fn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(mh()&&n.callbackNode!==a)return null;var l=Qe;return l=Rt(n,n===wt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(Mv(n,l,s),Jv(n,Wt()),n.callbackNode!=null&&n.callbackNode===a?Wv.bind(null,n):null)}function Zv(n,s){if(mh())return null;Mv(n,s,!0)}function KS(){rA(function(){(ct&6)!==0?ht(Rs,$S):Xv()})}function Nm(){if(Mr===0){var n=vo;n===0&&(n=ni,ni<<=1,(ni&261888)===0&&(ni=256)),Mr=n}return Mr}function e_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:no(""+n)}function t_(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function QS(n,s,a,l,f){if(s==="submit"&&a&&a.stateNode===f){var d=e_((f[$t]||null).action),v=l.submitter;v&&(s=(s=v[$t]||null)?e_(s.formAction):v.getAttribute("formAction"),s!==null&&(d=s,v=null));var S=new fs("action","action",null,l,f);n.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Mr!==0){var V=v?t_(f,v):new FormData(f);Yd(a,{pending:!0,data:V,method:f.method,action:d},null,V)}}else typeof d=="function"&&(S.preventDefault(),V=v?t_(f,v):new FormData(f),Yd(a,{pending:!0,data:V,method:f.method,action:d},d,V))},currentTarget:f}]})}}for(var Im=0;Im<fd.length;Im++){var Dm=fd[Im],YS=Dm.toLowerCase(),XS=Dm[0].toUpperCase()+Dm.slice(1);Zi(YS,"on"+XS)}Zi(O0,"onAnimationEnd"),Zi(M0,"onAnimationIteration"),Zi(k0,"onAnimationStart"),Zi("dblclick","onDoubleClick"),Zi("focusin","onFocus"),Zi("focusout","onBlur"),Zi(fS,"onTransitionRun"),Zi(dS,"onTransitionStart"),Zi(mS,"onTransitionCancel"),Zi(V0,"onTransitionEnd"),Ci("onMouseEnter",["mouseout","mouseover"]),Ci("onMouseLeave",["mouseout","mouseover"]),Ci("onPointerEnter",["pointerout","pointerover"]),Ci("onPointerLeave",["pointerout","pointerover"]),ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zl));function n_(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var d=void 0;if(s)for(var v=l.length-1;0<=v;v--){var S=l[v],V=S.instance,Q=S.currentTarget;if(S=S.listener,V!==d&&f.isPropagationStopped())break e;d=S,f.currentTarget=Q;try{d(f)}catch(re){Du(re)}f.currentTarget=null,d=V}else for(v=0;v<l.length;v++){if(S=l[v],V=S.instance,Q=S.currentTarget,S=S.listener,V!==d&&f.isPropagationStopped())break e;d=S,f.currentTarget=Q;try{d(f)}catch(re){Du(re)}f.currentTarget=null,d=V}}}}function $e(n,s){var a=s[ar];a===void 0&&(a=s[ar]=new Set);var l=n+"__bubble";a.has(l)||(i_(s,n,2,!1),a.add(l))}function Om(n,s,a){var l=0;s&&(l|=4),i_(a,n,l,s)}var yh="_reactListening"+Math.random().toString(36).slice(2);function Mm(n){if(!n[yh]){n[yh]=!0,ma.forEach(function(a){a!=="selectionchange"&&(JS.has(a)||Om(a,!1,n),Om(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[yh]||(s[yh]=!0,Om("selectionchange",!1,s))}}function i_(n,s,a,l){switch(O_(s)){case 2:var f=AA;break;case 8:f=xA;break;default:f=Qm}a=f.bind(null,s,a,n),f=void 0,!_a||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function km(n,s,a,l,f){var d=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var S=l.stateNode.containerInfo;if(S===f)break;if(v===4)for(v=l.return;v!==null;){var V=v.tag;if((V===3||V===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;S!==null;){if(v=xi(S),v===null)return;if(V=v.tag,V===5||V===6||V===26||V===27){l=d=v;continue e}S=S.parentNode}}l=l.return}mr(function(){var Q=d,re=Ii(a),le=[];e:{var X=P0.get(n);if(X!==void 0){var ne=fs,Te=n;switch(n){case"keypress":if(Ea(a)===0)break e;case"keydown":case"keyup":ne=Cu;break;case"focusin":Te="focus",ne=wa;break;case"focusout":Te="blur",ne=wa;break;case"beforeblur":case"afterblur":ne=wa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Sl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=_u;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=y;break;case O0:case M0:case k0:ne=Eu;break;case V0:ne=x;break;case"scroll":case"scrollend":ne=wl;break;case"wheel":ne=te;break;case"copy":case"cut":case"paste":ne=Tu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Ms;break;case"toggle":case"beforetoggle":ne=Ue}var Ne=(s&4)!==0,Et=!Ne&&(n==="scroll"||n==="scrollend"),B=Ne?X!==null?X+"Capture":null:X;Ne=[];for(var j=Q,K;j!==null;){var ae=j;if(K=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||K===null||B===null||(ae=Yi(j,B),ae!=null&&Ne.push(ec(j,ae,K))),Et)break;j=j.return}0<Ne.length&&(X=new ne(X,Te,null,a,re),le.push({event:X,listeners:Ne}))}}if((s&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",ne=n==="mouseout"||n==="pointerout",X&&a!==bl&&(Te=a.relatedTarget||a.fromElement)&&(xi(Te)||Te[Ee]))break e;if((ne||X)&&(X=re.window===re?re:(X=re.ownerDocument)?X.defaultView||X.parentWindow:window,ne?(Te=a.relatedTarget||a.toElement,ne=Q,Te=Te?xi(Te):null,Te!==null&&(Et=c(Te),Ne=Te.tag,Te!==Et||Ne!==5&&Ne!==27&&Ne!==6)&&(Te=null)):(ne=null,Te=Q),ne!==Te)){if(Ne=Sl,ae="onMouseLeave",B="onMouseEnter",j="mouse",(n==="pointerout"||n==="pointerover")&&(Ne=Ms,ae="onPointerLeave",B="onPointerEnter",j="pointer"),Et=ne==null?X:Ln(ne),K=Te==null?X:Ln(Te),X=new Ne(ae,j+"leave",ne,a,re),X.target=Et,X.relatedTarget=K,ae=null,xi(re)===Q&&(Ne=new Ne(B,j+"enter",Te,a,re),Ne.target=K,Ne.relatedTarget=Et,ae=Ne),Et=ae,ne&&Te)t:{for(Ne=WS,B=ne,j=Te,K=0,ae=B;ae;ae=Ne(ae))K++;ae=0;for(var Re=j;Re;Re=Ne(Re))ae++;for(;0<K-ae;)B=Ne(B),K--;for(;0<ae-K;)j=Ne(j),ae--;for(;K--;){if(B===j||j!==null&&B===j.alternate){Ne=B;break t}B=Ne(B),j=Ne(j)}Ne=null}else Ne=null;ne!==null&&s_(le,X,ne,Ne,!1),Te!==null&&Et!==null&&s_(le,Et,Te,Ne,!0)}}e:{if(X=Q?Ln(Q):window,ne=X.nodeName&&X.nodeName.toLowerCase(),ne==="select"||ne==="input"&&X.type==="file")var rt=E0;else if(_0(X))if(T0)rt=cS;else{rt=oS;var we=aS}else ne=X.nodeName,!ne||ne.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&to(Q.elementType)&&(rt=E0):rt=lS;if(rt&&(rt=rt(n,Q))){b0(le,rt,a,re);break e}we&&we(n,X,Q),n==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&yl(X,"number",X.value)}switch(we=Q?Ln(Q):window,n){case"focusin":(_0(we)||we.contentEditable==="true")&&(co=we,cd=Q,Nl=null);break;case"focusout":Nl=cd=co=null;break;case"mousedown":ud=!0;break;case"contextmenu":case"mouseup":case"dragend":ud=!1,I0(le,a,re);break;case"selectionchange":if(hS)break;case"keydown":case"keyup":I0(le,a,re)}var qe;if(lt)e:{switch(n){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else lo?Sa(n,a)&&(Ye="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ye="onCompositionStart");Ye&&(gs&&a.locale!=="ko"&&(lo||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&lo&&(qe=Tl()):(hs=re,El="value"in hs?hs.value:hs.textContent,lo=!0)),we=vh(Q,Ye),0<we.length&&(Ye=new ms(Ye,n,null,a,re),le.push({event:Ye,listeners:we}),qe?Ye.data=qe:(qe=oo(a),qe!==null&&(Ye.data=qe)))),(qe=Oi?nS(n,a):iS(n,a))&&(Ye=vh(Q,"onBeforeInput"),0<Ye.length&&(we=new ms("onBeforeInput","beforeinput",null,a,re),le.push({event:we,listeners:Ye}),we.data=qe)),QS(le,n,Q,a,re)}n_(le,s)})}function ec(n,s,a){return{instance:n,listener:s,currentTarget:a}}function vh(n,s){for(var a=s+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Yi(n,a),f!=null&&l.unshift(ec(n,f,d)),f=Yi(n,s),f!=null&&l.push(ec(n,f,d))),n.tag===3)return l;n=n.return}return[]}function WS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function s_(n,s,a,l,f){for(var d=s._reactName,v=[];a!==null&&a!==l;){var S=a,V=S.alternate,Q=S.stateNode;if(S=S.tag,V!==null&&V===l)break;S!==5&&S!==26&&S!==27||Q===null||(V=Q,f?(Q=Yi(a,d),Q!=null&&v.unshift(ec(a,Q,V))):f||(Q=Yi(a,d),Q!=null&&v.push(ec(a,Q,V)))),a=a.return}v.length!==0&&n.push({event:s,listeners:v})}var ZS=/\r\n?/g,eA=/\u0000|\uFFFD/g;function r_(n){return(typeof n=="string"?n:""+n).replace(ZS,`
`).replace(eA,"")}function a_(n,s){return s=r_(s),r_(n)===s}function bt(n,s,a,l,f,d){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||ri(n,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&ri(n,""+l);break;case"className":Z(n,"class",l);break;case"tabIndex":Z(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Z(n,a,l);break;case"style":_l(n,l,d);break;case"data":if(s!=="object"){Z(n,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=no(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(s!=="input"&&bt(n,s,"name",f.name,f,null),bt(n,s,"formEncType",f.formEncType,f,null),bt(n,s,"formMethod",f.formMethod,f,null),bt(n,s,"formTarget",f.formTarget,f,null)):(bt(n,s,"encType",f.encType,f,null),bt(n,s,"method",f.method,f,null),bt(n,s,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=no(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Qi);break;case"onScroll":l!=null&&$e("scroll",n);break;case"onScrollEnd":l!=null&&$e("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=no(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":$e("beforetoggle",n),$e("toggle",n),H(n,"popover",l);break;case"xlinkActuate":Y(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Y(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Y(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Y(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Y(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Y(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Y(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Y(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Y(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":H(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=vu.get(a)||a,H(n,a,l))}}function Vm(n,s,a,l,f,d){switch(a){case"style":_l(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?ri(n,l):(typeof l=="number"||typeof l=="bigint")&&ri(n,""+l);break;case"onScroll":l!=null&&$e("scroll",n);break;case"onScrollEnd":l!=null&&$e("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Qi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),d=n[$t]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(s,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):H(n,a,l)}}}function Nn(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",n),$e("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:bt(n,s,d,v,a,null)}}f&&bt(n,s,"srcSet",a.srcSet,a,null),l&&bt(n,s,"src",a.src,a,null);return;case"input":$e("invalid",n);var S=d=v=f=null,V=null,Q=null;for(l in a)if(a.hasOwnProperty(l)){var re=a[l];if(re!=null)switch(l){case"name":f=re;break;case"type":v=re;break;case"checked":V=re;break;case"defaultChecked":Q=re;break;case"value":d=re;break;case"defaultValue":S=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,s));break;default:bt(n,s,l,re,a,null)}}gu(n,d,S,V,Q,v,f,!1);return;case"select":$e("invalid",n),l=v=d=null;for(f in a)if(a.hasOwnProperty(f)&&(S=a[f],S!=null))switch(f){case"value":d=S;break;case"defaultValue":v=S;break;case"multiple":l=S;default:bt(n,s,f,S,a,null)}s=d,a=v,n.multiple=!!l,s!=null?ur(n,!!l,s,!1):a!=null&&ur(n,!!l,a,!0);return;case"textarea":$e("invalid",n),d=f=l=null;for(v in a)if(a.hasOwnProperty(v)&&(S=a[v],S!=null))switch(v){case"value":l=S;break;case"defaultValue":f=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:bt(n,s,v,S,a,null)}hr(n,l,f,d);return;case"option":for(V in a)a.hasOwnProperty(V)&&(l=a[V],l!=null)&&(V==="selected"?n.selected=l&&typeof l!="function"&&typeof l!="symbol":bt(n,s,V,l,a,null));return;case"dialog":$e("beforetoggle",n),$e("toggle",n),$e("cancel",n),$e("close",n);break;case"iframe":case"object":$e("load",n);break;case"video":case"audio":for(l=0;l<Zl.length;l++)$e(Zl[l],n);break;case"image":$e("error",n),$e("load",n);break;case"details":$e("toggle",n);break;case"embed":case"source":case"link":$e("error",n),$e("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in a)if(a.hasOwnProperty(Q)&&(l=a[Q],l!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:bt(n,s,Q,l,a,null)}return;default:if(to(s)){for(re in a)a.hasOwnProperty(re)&&(l=a[re],l!==void 0&&Vm(n,s,re,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&bt(n,s,S,l,a,null))}function tA(n,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,v=null,S=null,V=null,Q=null,re=null;for(ne in a){var le=a[ne];if(a.hasOwnProperty(ne)&&le!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":V=le;default:l.hasOwnProperty(ne)||bt(n,s,ne,null,l,le)}}for(var X in l){var ne=l[X];if(le=a[X],l.hasOwnProperty(X)&&(ne!=null||le!=null))switch(X){case"type":d=ne;break;case"name":f=ne;break;case"checked":Q=ne;break;case"defaultChecked":re=ne;break;case"value":v=ne;break;case"defaultValue":S=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,s));break;default:ne!==le&&bt(n,s,X,ne,l,le)}}eo(n,v,S,V,Q,re,d,f);return;case"select":ne=v=S=X=null;for(d in a)if(V=a[d],a.hasOwnProperty(d)&&V!=null)switch(d){case"value":break;case"multiple":ne=V;default:l.hasOwnProperty(d)||bt(n,s,d,null,l,V)}for(f in l)if(d=l[f],V=a[f],l.hasOwnProperty(f)&&(d!=null||V!=null))switch(f){case"value":X=d;break;case"defaultValue":S=d;break;case"multiple":v=d;default:d!==V&&bt(n,s,f,d,l,V)}s=S,a=v,l=ne,X!=null?ur(n,!!a,X,!1):!!l!=!!a&&(s!=null?ur(n,!!a,s,!0):ur(n,!!a,a?[]:"",!1));return;case"textarea":ne=X=null;for(S in a)if(f=a[S],a.hasOwnProperty(S)&&f!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:bt(n,s,S,null,l,f)}for(v in l)if(f=l[v],d=a[v],l.hasOwnProperty(v)&&(f!=null||d!=null))switch(v){case"value":X=f;break;case"defaultValue":ne=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&bt(n,s,v,f,l,d)}pu(n,X,ne);return;case"option":for(var Te in a)X=a[Te],a.hasOwnProperty(Te)&&X!=null&&!l.hasOwnProperty(Te)&&(Te==="selected"?n.selected=!1:bt(n,s,Te,null,l,X));for(V in l)X=l[V],ne=a[V],l.hasOwnProperty(V)&&X!==ne&&(X!=null||ne!=null)&&(V==="selected"?n.selected=X&&typeof X!="function"&&typeof X!="symbol":bt(n,s,V,X,l,ne));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in a)X=a[Ne],a.hasOwnProperty(Ne)&&X!=null&&!l.hasOwnProperty(Ne)&&bt(n,s,Ne,null,l,X);for(Q in l)if(X=l[Q],ne=a[Q],l.hasOwnProperty(Q)&&X!==ne&&(X!=null||ne!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,s));break;default:bt(n,s,Q,X,l,ne)}return;default:if(to(s)){for(var Et in a)X=a[Et],a.hasOwnProperty(Et)&&X!==void 0&&!l.hasOwnProperty(Et)&&Vm(n,s,Et,void 0,l,X);for(re in l)X=l[re],ne=a[re],!l.hasOwnProperty(re)||X===ne||X===void 0&&ne===void 0||Vm(n,s,re,X,l,ne);return}}for(var B in a)X=a[B],a.hasOwnProperty(B)&&X!=null&&!l.hasOwnProperty(B)&&bt(n,s,B,null,l,X);for(le in l)X=l[le],ne=a[le],!l.hasOwnProperty(le)||X===ne||X==null&&ne==null||bt(n,s,le,X,l,ne)}function o_(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function nA(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,v=f.initiatorType,S=f.duration;if(d&&S&&o_(v)){for(v=0,S=f.responseEnd,l+=1;l<a.length;l++){var V=a[l],Q=V.startTime;if(Q>S)break;var re=V.transferSize,le=V.initiatorType;re&&o_(le)&&(V=V.responseEnd,v+=re*(V<S?1:(S-Q)/(V-Q)))}if(--l,s+=8*(d+v)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Pm=null,Lm=null;function _h(n){return n.nodeType===9?n:n.ownerDocument}function l_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function c_(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function jm(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Um=null;function iA(){var n=window.event;return n&&n.type==="popstate"?n===Um?!1:(Um=n,!0):(Um=null,!1)}var u_=typeof setTimeout=="function"?setTimeout:void 0,sA=typeof clearTimeout=="function"?clearTimeout:void 0,h_=typeof Promise=="function"?Promise:void 0,rA=typeof queueMicrotask=="function"?queueMicrotask:typeof h_<"u"?function(n){return h_.resolve(null).then(n).catch(aA)}:u_;function aA(n){setTimeout(function(){throw n})}function kr(n){return n==="head"}function f_(n,s){var a=s,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),Lo(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")tc(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,tc(a);for(var d=a.firstChild;d;){var v=d.nextSibling,S=d.nodeName;d[Ai]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=v}}else a==="body"&&tc(n.ownerDocument.body);a=f}while(a);Lo(s)}function d_(n,s){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function zm(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":zm(a),or(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function oA(n,s,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Ai])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=Ui(n.nextSibling),n===null)break}return null}function lA(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Ui(n.nextSibling),n===null))return null;return n}function m_(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Ui(n.nextSibling),n===null))return null;return n}function Bm(n){return n.data==="$?"||n.data==="$~"}function qm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function cA(n,s){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Ui(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Hm=null;function g_(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(s===0)return Ui(n.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}n=n.nextSibling}return null}function p_(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return n;s--}else a!=="/$"&&a!=="/&"||s++}n=n.previousSibling}return null}function y_(n,s,a){switch(s=_h(a),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function tc(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);or(n)}var zi=new Map,v_=new Set;function bh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Qs=he.d;he.d={f:uA,r:hA,D:fA,C:dA,L:mA,m:gA,X:yA,S:pA,M:vA};function uA(){var n=Qs.f(),s=hh();return n||s}function hA(n){var s=Kn(n);s!==null&&s.tag===5&&s.type==="form"?Vy(s):Qs.r(n)}var ko=typeof document>"u"?null:document;function __(n,s,a){var l=ko;if(l&&typeof s=="string"&&s){var f=si(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),v_.has(f)||(v_.add(f),n={rel:n,crossOrigin:a,href:s},l.querySelector(f)===null&&(s=l.createElement("link"),Nn(s,"link",n),Ut(s),l.head.appendChild(s)))}}function fA(n){Qs.D(n),__("dns-prefetch",n,null)}function dA(n,s){Qs.C(n,s),__("preconnect",n,s)}function mA(n,s,a){Qs.L(n,s,a);var l=ko;if(l&&n&&s){var f='link[rel="preload"][as="'+si(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+si(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+si(a.imageSizes)+'"]')):f+='[href="'+si(n)+'"]';var d=f;switch(s){case"style":d=Vo(n);break;case"script":d=Po(n)}zi.has(d)||(n=E({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),zi.set(d,n),l.querySelector(f)!==null||s==="style"&&l.querySelector(nc(d))||s==="script"&&l.querySelector(ic(d))||(s=l.createElement("link"),Nn(s,"link",n),Ut(s),l.head.appendChild(s)))}}function gA(n,s){Qs.m(n,s);var a=ko;if(a&&n){var l=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+si(l)+'"][href="'+si(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Po(n)}if(!zi.has(d)&&(n=E({rel:"modulepreload",href:n},s),zi.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ic(d)))return}l=a.createElement("link"),Nn(l,"link",n),Ut(l),a.head.appendChild(l)}}}function pA(n,s,a){Qs.S(n,s,a);var l=ko;if(l&&n){var f=Ri(l).hoistableStyles,d=Vo(n);s=s||"default";var v=f.get(d);if(!v){var S={loading:0,preload:null};if(v=l.querySelector(nc(d)))S.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":s},a),(a=zi.get(d))&&Fm(n,a);var V=v=l.createElement("link");Ut(V),Nn(V,"link",n),V._p=new Promise(function(Q,re){V.onload=Q,V.onerror=re}),V.addEventListener("load",function(){S.loading|=1}),V.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Eh(v,s,l)}v={type:"stylesheet",instance:v,count:1,state:S},f.set(d,v)}}}function yA(n,s){Qs.X(n,s);var a=ko;if(a&&n){var l=Ri(a).hoistableScripts,f=Po(n),d=l.get(f);d||(d=a.querySelector(ic(f)),d||(n=E({src:n,async:!0},s),(s=zi.get(f))&&Gm(n,s),d=a.createElement("script"),Ut(d),Nn(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function vA(n,s){Qs.M(n,s);var a=ko;if(a&&n){var l=Ri(a).hoistableScripts,f=Po(n),d=l.get(f);d||(d=a.querySelector(ic(f)),d||(n=E({src:n,async:!0,type:"module"},s),(s=zi.get(f))&&Gm(n,s),d=a.createElement("script"),Ut(d),Nn(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function b_(n,s,a,l){var f=(f=Ae.current)?bh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Vo(a.href),a=Ri(f).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Vo(a.href);var d=Ri(f).hoistableStyles,v=d.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,v),(d=f.querySelector(nc(n)))&&!d._p&&(v.instance=d,v.state.loading=5),zi.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},zi.set(n,a),d||_A(f,n,a,v.state))),s&&l===null)throw Error(r(528,""));return v}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Po(a),a=Ri(f).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Vo(n){return'href="'+si(n)+'"'}function nc(n){return'link[rel="stylesheet"]['+n+"]"}function E_(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function _A(n,s,a,l){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=n.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),Nn(s,"link",a),Ut(s),n.head.appendChild(s))}function Po(n){return'[src="'+si(n)+'"]'}function ic(n){return"script[async]"+n}function T_(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=n.querySelector('style[data-href~="'+si(a.href)+'"]');if(l)return s.instance=l,Ut(l),l;var f=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Ut(l),Nn(l,"style",f),Eh(l,a.precedence,n),s.instance=l;case"stylesheet":f=Vo(a.href);var d=n.querySelector(nc(f));if(d)return s.state.loading|=4,s.instance=d,Ut(d),d;l=E_(a),(f=zi.get(f))&&Fm(l,f),d=(n.ownerDocument||n).createElement("link"),Ut(d);var v=d;return v._p=new Promise(function(S,V){v.onload=S,v.onerror=V}),Nn(d,"link",l),s.state.loading|=4,Eh(d,a.precedence,n),s.instance=d;case"script":return d=Po(a.src),(f=n.querySelector(ic(d)))?(s.instance=f,Ut(f),f):(l=a,(f=zi.get(d))&&(l=E({},a),Gm(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ut(f),Nn(f,"link",l),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Eh(l,a.precedence,n));return s.instance}function Eh(n,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,v=0;v<l.length;v++){var S=l[v];if(S.dataset.precedence===s)d=S;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function Fm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Gm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Th=null;function w_(n,s,a){if(Th===null){var l=new Map,f=Th=new Map;f.set(a,l)}else f=Th,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[Ai]||d[Pt]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(s)||"";v=n+v;var S=l.get(v);S?S.push(d):l.set(v,[d])}}return l}function S_(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function bA(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(n=s.disabled,typeof s.precedence=="string"&&n==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function A_(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function EA(n,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Vo(l.href),d=s.querySelector(nc(f));if(d){s=d._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=wh.bind(n),s.then(n,n)),a.state.loading|=4,a.instance=d,Ut(d);return}d=s.ownerDocument||s,l=E_(l),(f=zi.get(f))&&Fm(l,f),d=d.createElement("link"),Ut(d);var v=d;v._p=new Promise(function(S,V){v.onload=S,v.onerror=V}),Nn(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=wh.bind(n),s.addEventListener("load",a),s.addEventListener("error",a))}}var $m=0;function TA(n,s){return n.stylesheets&&n.count===0&&Ah(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&Ah(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+s);0<n.imgBytes&&$m===0&&($m=62500*nA());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Ah(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>$m?50:800)+s);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function wh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ah(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Sh=null;function Ah(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Sh=new Map,s.forEach(wA,n),Sh=null,wh.call(n))}function wA(n,s){if(!(s.state.loading&4)){var a=Sh.get(n);if(a)var l=a.get(null);else{a=new Map,Sh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var v=f[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}f=s.instance,v=f.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,f),a.set(v,f),this.count++,l=wh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var sc={$$typeof:G,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function SA(n,s,a,l,f,d,v,S,V){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vt(0),this.hiddenUpdates=Vt(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function x_(n,s,a,l,f,d,v,S,V,Q,re,le){return n=new SA(n,s,a,v,V,Q,re,le,S),s=1,d===!0&&(s|=24),d=mi(3,null,null,s),n.current=d,d.stateNode=n,s=Ad(),s.refCount++,n.pooledCache=s,s.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:s},Nd(d),n}function R_(n){return n?(n=fo,n):fo}function C_(n,s,a,l,f,d){f=R_(f),l.context===null?l.context=f:l.pendingContext=f,l=wr(s),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Sr(n,l,s),a!==null&&(ui(a,n,s),Pl(a,n,s))}function N_(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Km(n,s){N_(n,s),(n=n.alternate)&&N_(n,s)}function I_(n){if(n.tag===13||n.tag===31){var s=Ra(n,67108864);s!==null&&ui(s,n,67108864),Km(n,67108864)}}function D_(n){if(n.tag===13||n.tag===31){var s=_i();s=un(s);var a=Ra(n,s);a!==null&&ui(a,n,s),Km(n,s)}}var xh=!0;function AA(n,s,a,l){var f=ie.T;ie.T=null;var d=he.p;try{he.p=2,Qm(n,s,a,l)}finally{he.p=d,ie.T=f}}function xA(n,s,a,l){var f=ie.T;ie.T=null;var d=he.p;try{he.p=8,Qm(n,s,a,l)}finally{he.p=d,ie.T=f}}function Qm(n,s,a,l){if(xh){var f=Ym(l);if(f===null)km(n,s,l,Rh,a),M_(n,l);else if(CA(f,n,s,a,l))l.stopPropagation();else if(M_(n,l),s&4&&-1<RA.indexOf(n)){for(;f!==null;){var d=Kn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=xt(d.pendingLanes);if(v!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;v;){var V=1<<31-At(v);S.entanglements[1]|=V,v&=~V}_s(d),(ct&6)===0&&(ch=Wt()+500,Wl(0))}}break;case 31:case 13:S=Ra(d,2),S!==null&&ui(S,d,2),hh(),Km(d,2)}if(d=Ym(l),d===null&&km(n,s,l,Rh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else km(n,s,l,null,a)}}function Ym(n){return n=Ii(n),Xm(n)}var Rh=null;function Xm(n){if(Rh=null,n=xi(n),n!==null){var s=c(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=u(s),n!==null)return n;n=null}else if(a===31){if(n=m(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Rh=n,null}function O_(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fi()){case Rs:return 2;case Fn:return 8;case Sn:case Gi:return 32;case Cs:return 268435456;default:return 32}default:return 32}}var Jm=!1,Vr=null,Pr=null,Lr=null,rc=new Map,ac=new Map,jr=[],RA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function M_(n,s){switch(n){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":Pr=null;break;case"mouseover":case"mouseout":Lr=null;break;case"pointerover":case"pointerout":rc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ac.delete(s.pointerId)}}function oc(n,s,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},s!==null&&(s=Kn(s),s!==null&&I_(s)),n):(n.eventSystemFlags|=l,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function CA(n,s,a,l,f){switch(s){case"focusin":return Vr=oc(Vr,n,s,a,l,f),!0;case"dragenter":return Pr=oc(Pr,n,s,a,l,f),!0;case"mouseover":return Lr=oc(Lr,n,s,a,l,f),!0;case"pointerover":var d=f.pointerId;return rc.set(d,oc(rc.get(d)||null,n,s,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,ac.set(d,oc(ac.get(d)||null,n,s,a,l,f)),!0}return!1}function k_(n){var s=xi(n.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){n.blockedOn=s,hn(n.priority,function(){D_(a)});return}}else if(s===31){if(s=m(a),s!==null){n.blockedOn=s,hn(n.priority,function(){D_(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ch(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Ym(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);bl=l,a.target.dispatchEvent(l),bl=null}else return s=Kn(a),s!==null&&I_(s),n.blockedOn=a,!1;s.shift()}return!0}function V_(n,s,a){Ch(n)&&a.delete(s)}function NA(){Jm=!1,Vr!==null&&Ch(Vr)&&(Vr=null),Pr!==null&&Ch(Pr)&&(Pr=null),Lr!==null&&Ch(Lr)&&(Lr=null),rc.forEach(V_),ac.forEach(V_)}function Nh(n,s){n.blockedOn===s&&(n.blockedOn=null,Jm||(Jm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,NA)))}var Ih=null;function P_(n){Ih!==n&&(Ih=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Ih===n&&(Ih=null);for(var s=0;s<n.length;s+=3){var a=n[s],l=n[s+1],f=n[s+2];if(typeof l!="function"){if(Xm(l||a)===null)continue;break}var d=Kn(a);d!==null&&(n.splice(s,3),s-=3,Yd(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Lo(n){function s(V){return Nh(V,n)}Vr!==null&&Nh(Vr,n),Pr!==null&&Nh(Pr,n),Lr!==null&&Nh(Lr,n),rc.forEach(s),ac.forEach(s);for(var a=0;a<jr.length;a++){var l=jr[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<jr.length&&(a=jr[0],a.blockedOn===null);)k_(a),a.blockedOn===null&&jr.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],v=f[$t]||null;if(typeof d=="function")v||P_(a);else if(v){var S=null;if(d&&d.hasAttribute("formAction")){if(f=d,v=d[$t]||null)S=v.formAction;else if(Xm(f)!==null)continue}else S=v.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),P_(a)}}}function L_(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function Wm(n){this._internalRoot=n}Dh.prototype.render=Wm.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=_i();C_(a,l,n,s,null,null)},Dh.prototype.unmount=Wm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;C_(n.current,2,null,n,null,null),hh(),s[Ee]=null}};function Dh(n){this._internalRoot=n}Dh.prototype.unstable_scheduleHydration=function(n){if(n){var s=Ot();n={blockedOn:null,target:n,priority:s};for(var a=0;a<jr.length&&s!==0&&s<jr[a].priority;a++);jr.splice(a,0,n),a===0&&k_(n)}};var j_=e.version;if(j_!=="19.2.3")throw Error(r(527,j_,"19.2.3"));he.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(s),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var IA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ie,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oh.isDisabled&&Oh.supportsFiber)try{$n=Oh.inject(IA),Ft=Oh}catch{}}return cc.createRoot=function(n,s){if(!o(n))throw Error(r(299));var a=!1,l="",f=Gy,d=$y,v=Ky;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(d=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=x_(n,1,!1,null,null,a,l,null,f,d,v,L_),n[Ee]=s.current,Mm(n),new Wm(s)},cc.hydrateRoot=function(n,s,a){if(!o(n))throw Error(r(299));var l=!1,f="",d=Gy,v=$y,S=Ky,V=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.formState!==void 0&&(V=a.formState)),s=x_(n,1,!0,s,a??null,l,f,V,d,v,S,L_),s.context=R_(null),a=s.current,l=_i(),l=un(l),f=wr(l),f.callback=null,Sr(a,f,l),a=l,s.current.lanes=a,W(s,a),_s(s),n[Ee]=s.current,Mm(n),new Dh(s)},cc.version="19.2.3",cc}var Q_;function zA(){if(Q_)return tg.exports;Q_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),tg.exports=UA(),tg.exports}var BA=zA();const qA=()=>T.jsxs("div",{className:"fixed inset-0 -z-50 overflow-hidden pointer-events-none bg-[#020617]",children:[T.jsx("div",{className:"bg-blob opacity-20 w-[800px] h-[800px] -top-96 -left-96 bg-indigo-600 blur-[120px]"}),T.jsx("div",{className:"bg-blob opacity-30 w-[600px] h-[600px] top-1/2 -right-48 bg-pink-600 blur-[100px]",style:{animationDelay:"-5s",animationDuration:"25s"}}),T.jsx("div",{className:"bg-blob opacity-10 w-[500px] h-[500px] bottom-0 left-1/4 bg-cyan-400 blur-[80px]",style:{animationDelay:"-12s",animationDuration:"18s"}}),T.jsx("div",{className:"absolute inset-0 bg-radial-at-t from-transparent via-slate-950/40 to-slate-950"}),T.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"})]});const HA=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),FA=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Y_=i=>{const e=FA(i);return e.charAt(0).toUpperCase()+e.slice(1)},Z1=(...i)=>i.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),GA=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var $A={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const KA=q.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:c,iconNode:u,...m},g)=>q.createElement("svg",{ref:g,...$A,width:e,height:e,stroke:i,strokeWidth:r?Number(t)*24/Number(e):t,className:Z1("lucide",o),...!c&&!GA(m)&&{"aria-hidden":"true"},...m},[...u.map(([p,_])=>q.createElement(p,_)),...Array.isArray(c)?c:[c]]));const ei=(i,e)=>{const t=q.forwardRef(({className:r,...o},c)=>q.createElement(KA,{ref:c,iconNode:e,className:Z1(`lucide-${HA(Y_(i))}`,`lucide-${i}`,r),...o}));return t.displayName=Y_(i),t};const QA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],vc=ei("arrow-left",QA);const YA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],XA=ei("circle-x",YA);const JA=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],eE=ei("copy",JA);const WA=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],tE=ei("flag",WA);const ZA=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],ex=ei("house",ZA);const tx=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],nE=ei("loader-circle",tx);const nx=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],ix=ei("log-in",nx);const sx=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],rx=ei("log-out",sx);const ax=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ox=ei("plus",ax);const lx=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],up=ei("rotate-ccw",lx);const cx=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],iE=ei("share-2",cx);const ux=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Ng=ei("trophy",ux);const hx=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],rg=ei("user",hx);const fx=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],hp=ei("users",fx);const dx=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],sE=ei("zap",dx),mx=()=>{};var X_={};const rE=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},gx=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const o=i[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[t++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[t++],u=i[t++],m=i[t++],g=((o&7)<<18|(c&63)<<12|(u&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const c=i[t++],u=i[t++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|u&63)}}return e.join("")},aE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const c=i[o],u=o+1<i.length,m=u?i[o+1]:0,g=o+2<i.length,p=g?i[o+2]:0,_=c>>2,E=(c&3)<<4|m>>4;let w=(m&15)<<2|p>>6,R=p&63;g||(R=64,u||(w=64)),r.push(t[_],t[E],t[w],t[R])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(rE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):gx(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const c=t[i.charAt(o++)],m=o<i.length?t[i.charAt(o)]:0;++o;const p=o<i.length?t[i.charAt(o)]:64;++o;const E=o<i.length?t[i.charAt(o)]:64;if(++o,c==null||m==null||p==null||E==null)throw new px;const w=c<<2|m>>4;if(r.push(w),p!==64){const R=m<<4&240|p>>2;if(r.push(R),E!==64){const D=p<<6&192|E;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class px extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yx=function(i){const e=rE(i);return aE.encodeByteArray(e,!0)},rf=function(i){return yx(i).replace(/\./g,"")},oE=function(i){try{return aE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const _x=()=>vx().__FIREBASE_DEFAULTS__,bx=()=>{if(typeof process>"u"||typeof X_>"u")return;const i=X_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Ex=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&oE(i[1]);return e&&JSON.parse(e)},Of=()=>{try{return mx()||_x()||bx()||Ex()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},lE=i=>Of()?.emulatorHosts?.[i],Tx=i=>{const e=lE(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},cE=()=>Of()?.config,uE=i=>Of()?.[`_${i}`];class wx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function ol(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hE(i){return(await fetch(i,{credentials:"include"})).ok}function Sx(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[rf(JSON.stringify(t)),rf(JSON.stringify(u)),""].join(".")}const _c={};function Ax(){const i={prod:[],emulator:[]};for(const e of Object.keys(_c))_c[e]?i.emulator.push(e):i.prod.push(e);return i}function xx(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let J_=!1;function fE(i,e){if(typeof window>"u"||typeof document>"u"||!ol(window.location.host)||_c[i]===e||_c[i]||J_)return;_c[i]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",c=Ax().prod.length>0;function u(){const w=document.getElementById(r);w&&w.remove()}function m(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function g(w,R){w.setAttribute("width","24"),w.setAttribute("id",R),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{J_=!0,u()},w}function _(w,R){w.setAttribute("id",R),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function E(){const w=xx(r),R=t("text"),D=document.getElementById(R)||document.createElement("span"),P=t("learnmore"),I=document.getElementById(P)||document.createElement("a"),U=t("preprendIcon"),F=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const G=w.element;m(G),_(I,P);const ce=p();g(F,U),G.append(F,D,I,ce),document.body.appendChild(G)}c?(D.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Rx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qn())}function Cx(){const i=Of()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Nx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ix(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Dx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ox(){const i=qn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Mx(){return!Cx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kx(){try{return typeof indexedDB=="object"}catch{return!1}}function Vx(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const Px="FirebaseError";class sr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Px,Object.setPrototypeOf(this,sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qc.prototype.create)}}class Qc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],u=c?Lx(c,r):"Error",m=`${this.serviceName}: ${u} (${o}).`;return new sr(o,m,r)}}function Lx(i,e){return i.replace(jx,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const jx=/\{\$([^}]+)}/g;function Ux(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ga(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const c=i[o],u=e[o];if(W_(c)&&W_(u)){if(!Ga(c,u))return!1}else if(c!==u)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function W_(i){return i!==null&&typeof i=="object"}function Yc(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function zx(i,e){const t=new Bx(i,e);return t.subscribe.bind(t)}class Bx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");qx(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=ag),o.error===void 0&&(o.error=ag),o.complete===void 0&&(o.complete=ag);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qx(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function ag(){}function wn(i){return i&&i._delegate?i._delegate:i}class $a{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ba="[DEFAULT]";class Hx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new wx;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Gx(e))try{this.getOrInitializeService({instanceIdentifier:Ba})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=Ba){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ba){return this.instances.has(e)}getOptions(e=Ba){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[c,u]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);r===m&&u.resolve(o)}return o}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&e(c,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Fx(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ba){return this.component?this.component.multipleInstances?e:Ba:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Fx(i){return i===Ba?void 0:i}function Gx(i){return i.instantiationMode==="EAGER"}class $x{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Hx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Xe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Xe||(Xe={}));const Kx={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},Qx=Xe.INFO,Yx={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},Xx=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=Yx[e];if(o)console[o](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fp{constructor(e){this.name=e,this._logLevel=Qx,this._logHandler=Xx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Kx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const Jx=(i,e)=>e.some(t=>i instanceof t);let Z_,eb;function Wx(){return Z_||(Z_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Zx(){return eb||(eb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dE=new WeakMap,Ig=new WeakMap,mE=new WeakMap,og=new WeakMap,dp=new WeakMap;function e2(i){const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",u)},c=()=>{t(Xr(i.result)),o()},u=()=>{r(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&dE.set(t,i)}).catch(()=>{}),dp.set(e,i),e}function t2(i){if(Ig.has(i))return;const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",u),i.removeEventListener("abort",u)},c=()=>{t(),o()},u=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",u),i.addEventListener("abort",u)});Ig.set(i,e)}let Dg={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Ig.get(i);if(e==="objectStoreNames")return i.objectStoreNames||mE.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xr(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function n2(i){Dg=i(Dg)}function i2(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(lg(this),e,...t);return mE.set(r,e.sort?e.sort():[e]),Xr(r)}:Zx().includes(i)?function(...e){return i.apply(lg(this),e),Xr(dE.get(this))}:function(...e){return Xr(i.apply(lg(this),e))}}function s2(i){return typeof i=="function"?i2(i):(i instanceof IDBTransaction&&t2(i),Jx(i,Wx())?new Proxy(i,Dg):i)}function Xr(i){if(i instanceof IDBRequest)return e2(i);if(og.has(i))return og.get(i);const e=s2(i);return e!==i&&(og.set(i,e),dp.set(e,i)),e}const lg=i=>dp.get(i);function r2(i,e,{blocked:t,upgrade:r,blocking:o,terminated:c}={}){const u=indexedDB.open(i,e),m=Xr(u);return r&&u.addEventListener("upgradeneeded",g=>{r(Xr(u.result),g.oldVersion,g.newVersion,Xr(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const a2=["get","getKey","getAll","getAllKeys","count"],o2=["put","add","delete","clear"],cg=new Map;function tb(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(cg.get(e))return cg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=o2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||a2.includes(t)))return;const c=async function(u,...m){const g=this.transaction(u,o?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),o&&g.done]))[0]};return cg.set(e,c),c}n2(i=>({...i,get:(e,t,r)=>tb(e,t)||i.get(e,t,r),has:(e,t)=>!!tb(e,t)||i.has(e,t)}));class l2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(c2(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function c2(i){return i.getComponent()?.type==="VERSION"}const Og="@firebase/app",nb="0.14.6";const Ws=new fp("@firebase/app"),u2="@firebase/app-compat",h2="@firebase/analytics-compat",f2="@firebase/analytics",d2="@firebase/app-check-compat",m2="@firebase/app-check",g2="@firebase/auth",p2="@firebase/auth-compat",y2="@firebase/database",v2="@firebase/data-connect",_2="@firebase/database-compat",b2="@firebase/functions",E2="@firebase/functions-compat",T2="@firebase/installations",w2="@firebase/installations-compat",S2="@firebase/messaging",A2="@firebase/messaging-compat",x2="@firebase/performance",R2="@firebase/performance-compat",C2="@firebase/remote-config",N2="@firebase/remote-config-compat",I2="@firebase/storage",D2="@firebase/storage-compat",O2="@firebase/firestore",M2="@firebase/ai",k2="@firebase/firestore-compat",V2="firebase",P2="12.6.0";const Mg="[DEFAULT]",L2={[Og]:"fire-core",[u2]:"fire-core-compat",[f2]:"fire-analytics",[h2]:"fire-analytics-compat",[m2]:"fire-app-check",[d2]:"fire-app-check-compat",[g2]:"fire-auth",[p2]:"fire-auth-compat",[y2]:"fire-rtdb",[v2]:"fire-data-connect",[_2]:"fire-rtdb-compat",[b2]:"fire-fn",[E2]:"fire-fn-compat",[T2]:"fire-iid",[w2]:"fire-iid-compat",[S2]:"fire-fcm",[A2]:"fire-fcm-compat",[x2]:"fire-perf",[R2]:"fire-perf-compat",[C2]:"fire-rc",[N2]:"fire-rc-compat",[I2]:"fire-gcs",[D2]:"fire-gcs-compat",[O2]:"fire-fst",[k2]:"fire-fst-compat",[M2]:"fire-vertex","fire-js":"fire-js",[V2]:"fire-js-all"};const Mc=new Map,j2=new Map,kg=new Map;function ib(i,e){try{i.container.addComponent(e)}catch(t){Ws.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Jo(i){const e=i.name;if(kg.has(e))return Ws.debug(`There were multiple attempts to register component ${e}.`),!1;kg.set(e,i);for(const t of Mc.values())ib(t,i);for(const t of j2.values())ib(t,i);return!0}function mp(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function ns(i){return i==null?!1:i.settings!==void 0}const U2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jr=new Qc("app","Firebase",U2);class z2{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jr.create("app-deleted",{appName:this._name})}}const ll=P2;function gE(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r={name:Mg,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Jr.create("bad-app-name",{appName:String(o)});if(t||(t=cE()),!t)throw Jr.create("no-options");const c=Mc.get(o);if(c){if(Ga(t,c.options)&&Ga(r,c.config))return c;throw Jr.create("duplicate-app",{appName:o})}const u=new $x(o);for(const g of kg.values())u.addComponent(g);const m=new z2(t,r,u);return Mc.set(o,m),m}function pE(i=Mg){const e=Mc.get(i);if(!e&&i===Mg&&cE())return gE();if(!e)throw Jr.create("no-app",{appName:i});return e}function sb(){return Array.from(Mc.values())}function Wr(i,e,t){let r=L2[i]??i;t&&(r+=`-${t}`);const o=r.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${r}" with version "${e}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ws.warn(u.join(" "));return}Jo(new $a(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const B2="firebase-heartbeat-database",q2=1,kc="firebase-heartbeat-store";let ug=null;function yE(){return ug||(ug=r2(B2,q2,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(kc)}catch(t){console.warn(t)}}}}).catch(i=>{throw Jr.create("idb-open",{originalErrorMessage:i.message})})),ug}async function H2(i){try{const t=(await yE()).transaction(kc),r=await t.objectStore(kc).get(vE(i));return await t.done,r}catch(e){if(e instanceof sr)Ws.warn(e.message);else{const t=Jr.create("idb-get",{originalErrorMessage:e?.message});Ws.warn(t.message)}}}async function rb(i,e){try{const r=(await yE()).transaction(kc,"readwrite");await r.objectStore(kc).put(e,vE(i)),await r.done}catch(t){if(t instanceof sr)Ws.warn(t.message);else{const r=Jr.create("idb-set",{originalErrorMessage:t?.message});Ws.warn(r.message)}}}function vE(i){return`${i.name}!${i.options.appId}`}const F2=1024,G2=30;class $2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Q2(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ab();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>G2){const o=Y2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ws.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ab(),{heartbeatsToSend:t,unsentEntries:r}=K2(this._heartbeatsCache.heartbeats),o=rf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ws.warn(e),""}}}function ab(){return new Date().toISOString().substring(0,10)}function K2(i,e=F2){const t=[];let r=i.slice();for(const o of i){const c=t.find(u=>u.agent===o.agent);if(c){if(c.dates.push(o.date),ob(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ob(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Q2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kx()?Vx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await H2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ob(i){return rf(JSON.stringify({version:2,heartbeats:i})).length}function Y2(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}function X2(i){Jo(new $a("platform-logger",e=>new l2(e),"PRIVATE")),Jo(new $a("heartbeat",e=>new $2(e),"PRIVATE")),Wr(Og,nb,i),Wr(Og,nb,"esm2020"),Wr("fire-js","")}X2("");var lb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Zr,_E;(function(){var i;function e(C,A){function N(){}N.prototype=A.prototype,C.F=A.prototype,C.prototype=new N,C.prototype.constructor=C,C.D=function(k,M,z){for(var O=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)O[Pe-2]=arguments[Pe];return A.prototype[M].apply(k,O)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,A,N){N||(N=0);const k=Array(16);if(typeof A=="string")for(var M=0;M<16;++M)k[M]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(M=0;M<16;++M)k[M]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=C.g[0],N=C.g[1],M=C.g[2];let z=C.g[3],O;O=A+(z^N&(M^z))+k[0]+3614090360&4294967295,A=N+(O<<7&4294967295|O>>>25),O=z+(M^A&(N^M))+k[1]+3905402710&4294967295,z=A+(O<<12&4294967295|O>>>20),O=M+(N^z&(A^N))+k[2]+606105819&4294967295,M=z+(O<<17&4294967295|O>>>15),O=N+(A^M&(z^A))+k[3]+3250441966&4294967295,N=M+(O<<22&4294967295|O>>>10),O=A+(z^N&(M^z))+k[4]+4118548399&4294967295,A=N+(O<<7&4294967295|O>>>25),O=z+(M^A&(N^M))+k[5]+1200080426&4294967295,z=A+(O<<12&4294967295|O>>>20),O=M+(N^z&(A^N))+k[6]+2821735955&4294967295,M=z+(O<<17&4294967295|O>>>15),O=N+(A^M&(z^A))+k[7]+4249261313&4294967295,N=M+(O<<22&4294967295|O>>>10),O=A+(z^N&(M^z))+k[8]+1770035416&4294967295,A=N+(O<<7&4294967295|O>>>25),O=z+(M^A&(N^M))+k[9]+2336552879&4294967295,z=A+(O<<12&4294967295|O>>>20),O=M+(N^z&(A^N))+k[10]+4294925233&4294967295,M=z+(O<<17&4294967295|O>>>15),O=N+(A^M&(z^A))+k[11]+2304563134&4294967295,N=M+(O<<22&4294967295|O>>>10),O=A+(z^N&(M^z))+k[12]+1804603682&4294967295,A=N+(O<<7&4294967295|O>>>25),O=z+(M^A&(N^M))+k[13]+4254626195&4294967295,z=A+(O<<12&4294967295|O>>>20),O=M+(N^z&(A^N))+k[14]+2792965006&4294967295,M=z+(O<<17&4294967295|O>>>15),O=N+(A^M&(z^A))+k[15]+1236535329&4294967295,N=M+(O<<22&4294967295|O>>>10),O=A+(M^z&(N^M))+k[1]+4129170786&4294967295,A=N+(O<<5&4294967295|O>>>27),O=z+(N^M&(A^N))+k[6]+3225465664&4294967295,z=A+(O<<9&4294967295|O>>>23),O=M+(A^N&(z^A))+k[11]+643717713&4294967295,M=z+(O<<14&4294967295|O>>>18),O=N+(z^A&(M^z))+k[0]+3921069994&4294967295,N=M+(O<<20&4294967295|O>>>12),O=A+(M^z&(N^M))+k[5]+3593408605&4294967295,A=N+(O<<5&4294967295|O>>>27),O=z+(N^M&(A^N))+k[10]+38016083&4294967295,z=A+(O<<9&4294967295|O>>>23),O=M+(A^N&(z^A))+k[15]+3634488961&4294967295,M=z+(O<<14&4294967295|O>>>18),O=N+(z^A&(M^z))+k[4]+3889429448&4294967295,N=M+(O<<20&4294967295|O>>>12),O=A+(M^z&(N^M))+k[9]+568446438&4294967295,A=N+(O<<5&4294967295|O>>>27),O=z+(N^M&(A^N))+k[14]+3275163606&4294967295,z=A+(O<<9&4294967295|O>>>23),O=M+(A^N&(z^A))+k[3]+4107603335&4294967295,M=z+(O<<14&4294967295|O>>>18),O=N+(z^A&(M^z))+k[8]+1163531501&4294967295,N=M+(O<<20&4294967295|O>>>12),O=A+(M^z&(N^M))+k[13]+2850285829&4294967295,A=N+(O<<5&4294967295|O>>>27),O=z+(N^M&(A^N))+k[2]+4243563512&4294967295,z=A+(O<<9&4294967295|O>>>23),O=M+(A^N&(z^A))+k[7]+1735328473&4294967295,M=z+(O<<14&4294967295|O>>>18),O=N+(z^A&(M^z))+k[12]+2368359562&4294967295,N=M+(O<<20&4294967295|O>>>12),O=A+(N^M^z)+k[5]+4294588738&4294967295,A=N+(O<<4&4294967295|O>>>28),O=z+(A^N^M)+k[8]+2272392833&4294967295,z=A+(O<<11&4294967295|O>>>21),O=M+(z^A^N)+k[11]+1839030562&4294967295,M=z+(O<<16&4294967295|O>>>16),O=N+(M^z^A)+k[14]+4259657740&4294967295,N=M+(O<<23&4294967295|O>>>9),O=A+(N^M^z)+k[1]+2763975236&4294967295,A=N+(O<<4&4294967295|O>>>28),O=z+(A^N^M)+k[4]+1272893353&4294967295,z=A+(O<<11&4294967295|O>>>21),O=M+(z^A^N)+k[7]+4139469664&4294967295,M=z+(O<<16&4294967295|O>>>16),O=N+(M^z^A)+k[10]+3200236656&4294967295,N=M+(O<<23&4294967295|O>>>9),O=A+(N^M^z)+k[13]+681279174&4294967295,A=N+(O<<4&4294967295|O>>>28),O=z+(A^N^M)+k[0]+3936430074&4294967295,z=A+(O<<11&4294967295|O>>>21),O=M+(z^A^N)+k[3]+3572445317&4294967295,M=z+(O<<16&4294967295|O>>>16),O=N+(M^z^A)+k[6]+76029189&4294967295,N=M+(O<<23&4294967295|O>>>9),O=A+(N^M^z)+k[9]+3654602809&4294967295,A=N+(O<<4&4294967295|O>>>28),O=z+(A^N^M)+k[12]+3873151461&4294967295,z=A+(O<<11&4294967295|O>>>21),O=M+(z^A^N)+k[15]+530742520&4294967295,M=z+(O<<16&4294967295|O>>>16),O=N+(M^z^A)+k[2]+3299628645&4294967295,N=M+(O<<23&4294967295|O>>>9),O=A+(M^(N|~z))+k[0]+4096336452&4294967295,A=N+(O<<6&4294967295|O>>>26),O=z+(N^(A|~M))+k[7]+1126891415&4294967295,z=A+(O<<10&4294967295|O>>>22),O=M+(A^(z|~N))+k[14]+2878612391&4294967295,M=z+(O<<15&4294967295|O>>>17),O=N+(z^(M|~A))+k[5]+4237533241&4294967295,N=M+(O<<21&4294967295|O>>>11),O=A+(M^(N|~z))+k[12]+1700485571&4294967295,A=N+(O<<6&4294967295|O>>>26),O=z+(N^(A|~M))+k[3]+2399980690&4294967295,z=A+(O<<10&4294967295|O>>>22),O=M+(A^(z|~N))+k[10]+4293915773&4294967295,M=z+(O<<15&4294967295|O>>>17),O=N+(z^(M|~A))+k[1]+2240044497&4294967295,N=M+(O<<21&4294967295|O>>>11),O=A+(M^(N|~z))+k[8]+1873313359&4294967295,A=N+(O<<6&4294967295|O>>>26),O=z+(N^(A|~M))+k[15]+4264355552&4294967295,z=A+(O<<10&4294967295|O>>>22),O=M+(A^(z|~N))+k[6]+2734768916&4294967295,M=z+(O<<15&4294967295|O>>>17),O=N+(z^(M|~A))+k[13]+1309151649&4294967295,N=M+(O<<21&4294967295|O>>>11),O=A+(M^(N|~z))+k[4]+4149444226&4294967295,A=N+(O<<6&4294967295|O>>>26),O=z+(N^(A|~M))+k[11]+3174756917&4294967295,z=A+(O<<10&4294967295|O>>>22),O=M+(A^(z|~N))+k[2]+718787259&4294967295,M=z+(O<<15&4294967295|O>>>17),O=N+(z^(M|~A))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(M+(O<<21&4294967295|O>>>11))&4294967295,C.g[2]=C.g[2]+M&4294967295,C.g[3]=C.g[3]+z&4294967295}r.prototype.v=function(C,A){A===void 0&&(A=C.length);const N=A-this.blockSize,k=this.C;let M=this.h,z=0;for(;z<A;){if(M==0)for(;z<=N;)o(this,C,z),z+=this.blockSize;if(typeof C=="string"){for(;z<A;)if(k[M++]=C.charCodeAt(z++),M==this.blockSize){o(this,k),M=0;break}}else for(;z<A;)if(k[M++]=C[z++],M==this.blockSize){o(this,k),M=0;break}}this.h=M,this.o+=A},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;A=this.o*8;for(var N=C.length-8;N<C.length;++N)C[N]=A&255,A/=256;for(this.v(C),C=Array(16),A=0,N=0;N<4;++N)for(let k=0;k<32;k+=8)C[A++]=this.g[N]>>>k&255;return C};function c(C,A){var N=m;return Object.prototype.hasOwnProperty.call(N,C)?N[C]:N[C]=A(C)}function u(C,A){this.h=A;const N=[];let k=!0;for(let M=C.length-1;M>=0;M--){const z=C[M]|0;k&&z==A||(N[M]=z,k=!1)}this.g=N}var m={};function g(C){return-128<=C&&C<128?c(C,function(A){return new u([A|0],A<0?-1:0)}):new u([C|0],C<0?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return E;if(C<0)return I(p(-C));const A=[];let N=1;for(let k=0;C>=N;k++)A[k]=C/N|0,N*=4294967296;return new u(A,0)}function _(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return I(_(C.substring(1),A));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=p(Math.pow(A,8));let k=E;for(let z=0;z<C.length;z+=8){var M=Math.min(8,C.length-z);const O=parseInt(C.substring(z,z+M),A);M<8?(M=p(Math.pow(A,M)),k=k.j(M).add(p(O))):(k=k.j(N),k=k.add(p(O)))}return k}var E=g(0),w=g(1),R=g(16777216);i=u.prototype,i.m=function(){if(P(this))return-I(this).m();let C=0,A=1;for(let N=0;N<this.g.length;N++){const k=this.i(N);C+=(k>=0?k:4294967296+k)*A,A*=4294967296}return C},i.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(D(this))return"0";if(P(this))return"-"+I(this).toString(C);const A=p(Math.pow(C,6));var N=this;let k="";for(;;){const M=ce(N,A).g;N=U(N,M.j(A));let z=((N.g.length>0?N.g[0]:N.h)>>>0).toString(C);if(N=M,D(N))return z+k;for(;z.length<6;)z="0"+z;k=z+k}},i.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function D(C){if(C.h!=0)return!1;for(let A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function P(C){return C.h==-1}i.l=function(C){return C=U(this,C),P(C)?-1:D(C)?0:1};function I(C){const A=C.g.length,N=[];for(let k=0;k<A;k++)N[k]=~C.g[k];return new u(N,~C.h).add(w)}i.abs=function(){return P(this)?I(this):this},i.add=function(C){const A=Math.max(this.g.length,C.g.length),N=[];let k=0;for(let M=0;M<=A;M++){let z=k+(this.i(M)&65535)+(C.i(M)&65535),O=(z>>>16)+(this.i(M)>>>16)+(C.i(M)>>>16);k=O>>>16,z&=65535,O&=65535,N[M]=O<<16|z}return new u(N,N[N.length-1]&-2147483648?-1:0)};function U(C,A){return C.add(I(A))}i.j=function(C){if(D(this)||D(C))return E;if(P(this))return P(C)?I(this).j(I(C)):I(I(this).j(C));if(P(C))return I(this.j(I(C)));if(this.l(R)<0&&C.l(R)<0)return p(this.m()*C.m());const A=this.g.length+C.g.length,N=[];for(var k=0;k<2*A;k++)N[k]=0;for(k=0;k<this.g.length;k++)for(let M=0;M<C.g.length;M++){const z=this.i(k)>>>16,O=this.i(k)&65535,Pe=C.i(M)>>>16,mt=C.i(M)&65535;N[2*k+2*M]+=O*mt,F(N,2*k+2*M),N[2*k+2*M+1]+=z*mt,F(N,2*k+2*M+1),N[2*k+2*M+1]+=O*Pe,F(N,2*k+2*M+1),N[2*k+2*M+2]+=z*Pe,F(N,2*k+2*M+2)}for(C=0;C<A;C++)N[C]=N[2*C+1]<<16|N[2*C];for(C=A;C<2*A;C++)N[C]=0;return new u(N,0)};function F(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function G(C,A){this.g=C,this.h=A}function ce(C,A){if(D(A))throw Error("division by zero");if(D(C))return new G(E,E);if(P(C))return A=ce(I(C),A),new G(I(A.g),I(A.h));if(P(A))return A=ce(C,I(A)),new G(I(A.g),A.h);if(C.g.length>30){if(P(C)||P(A))throw Error("slowDivide_ only works with positive integers.");for(var N=w,k=A;k.l(C)<=0;)N=ee(N),k=ee(k);var M=J(N,1),z=J(k,1);for(k=J(k,2),N=J(N,2);!D(k);){var O=z.add(k);O.l(C)<=0&&(M=M.add(N),z=O),k=J(k,1),N=J(N,1)}return A=U(C,M.j(A)),new G(M,A)}for(M=E;C.l(A)>=0;){for(N=Math.max(1,Math.floor(C.m()/A.m())),k=Math.ceil(Math.log(N)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),z=p(N),O=z.j(A);P(O)||O.l(C)>0;)N-=k,z=p(N),O=z.j(A);D(z)&&(z=w),M=M.add(z),C=U(C,O)}return new G(M,C)}i.B=function(C){return ce(this,C).h},i.and=function(C){const A=Math.max(this.g.length,C.g.length),N=[];for(let k=0;k<A;k++)N[k]=this.i(k)&C.i(k);return new u(N,this.h&C.h)},i.or=function(C){const A=Math.max(this.g.length,C.g.length),N=[];for(let k=0;k<A;k++)N[k]=this.i(k)|C.i(k);return new u(N,this.h|C.h)},i.xor=function(C){const A=Math.max(this.g.length,C.g.length),N=[];for(let k=0;k<A;k++)N[k]=this.i(k)^C.i(k);return new u(N,this.h^C.h)};function ee(C){const A=C.g.length+1,N=[];for(let k=0;k<A;k++)N[k]=C.i(k)<<1|C.i(k-1)>>>31;return new u(N,C.h)}function J(C,A){const N=A>>5;A%=32;const k=C.g.length-N,M=[];for(let z=0;z<k;z++)M[z]=A>0?C.i(z+N)>>>A|C.i(z+N+1)<<32-A:C.i(z+N);return new u(M,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,_E=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=_,Zr=u}).apply(typeof lb<"u"?lb:typeof self<"u"?self:typeof window<"u"?window:{});var Mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var bE,hc,EE,Fh,Vg,TE,wE,SE;(function(){var i,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mh=="object"&&Mh];for(var y=0;y<h.length;++y){var b=h[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=t(this);function o(h,y){if(y)e:{var b=r;h=h.split(".");for(var x=0;x<h.length-1;x++){var $=h[x];if(!($ in b))break e;b=b[$]}h=h[h.length-1],x=b[h],y=y(x),y!=x&&y!=null&&e(b,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var b=[],x;for(x in y)Object.prototype.hasOwnProperty.call(y,x)&&b.push([x,y[x]]);return b}});var c=c||{},u=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,b){return h.call.apply(h.bind,arguments)}function p(h,y,b){return p=g,p.apply(null,arguments)}function _(h,y){var b=Array.prototype.slice.call(arguments,1);return function(){var x=b.slice();return x.push.apply(x,arguments),h.apply(this,x)}}function E(h,y){function b(){}b.prototype=y.prototype,h.Z=y.prototype,h.prototype=new b,h.prototype.constructor=h,h.Ob=function(x,$,te){for(var ge=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)ge[Ue-2]=arguments[Ue];return y.prototype[$].apply(x,ge)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function R(h){const y=h.length;if(y>0){const b=Array(y);for(let x=0;x<y;x++)b[x]=h[x];return b}return[]}function D(h,y){for(let x=1;x<arguments.length;x++){const $=arguments[x];var b=typeof $;if(b=b!="object"?b:$?Array.isArray($)?"array":b:"null",b=="array"||b=="object"&&typeof $.length=="number"){b=h.length||0;const te=$.length||0;h.length=b+te;for(let ge=0;ge<te;ge++)h[b+ge]=$[ge]}else h.push($)}}class P{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function I(h){u.setTimeout(()=>{throw h},0)}function U(){var h=C;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class F{constructor(){this.h=this.g=null}add(y,b){const x=G.get();x.set(y,b),this.h?this.h.next=x:this.g=x,this.h=x}}var G=new P(()=>new ce,h=>h.reset());class ce{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,J=!1,C=new F,A=()=>{const h=Promise.resolve(void 0);ee=()=>{h.then(N)}};function N(){for(var h;h=U();){try{h.h.call(h.g)}catch(b){I(b)}var y=G;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}J=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};u.addEventListener("test",b,y),u.removeEventListener("test",b,y)}catch{}return h})();function O(h){return/^[\s\xa0]*$/.test(h)}function Pe(h,y){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(Pe,M),Pe.prototype.init=function(h,y){const b=this.type=h.type,x=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(b=="mouseover"?y=h.fromElement:b=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Pe.Z.h.call(this)},Pe.prototype.h=function(){Pe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var mt="closure_listenable_"+(Math.random()*1e6|0),ie=0;function he(h,y,b,x,$){this.listener=h,this.proxy=null,this.src=y,this.type=b,this.capture=!!x,this.ha=$,this.key=++ie,this.da=this.fa=!1}function be(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Me(h,y,b){for(const x in h)y.call(b,h[x],x,h)}function Be(h,y){for(const b in h)y.call(void 0,h[b],b,h)}function L(h){const y={};for(const b in h)y[b]=h[b];return y}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(h,y){let b,x;for(let $=1;$<arguments.length;$++){x=arguments[$];for(b in x)h[b]=x[b];for(let te=0;te<se.length;te++)b=se[te],Object.prototype.hasOwnProperty.call(x,b)&&(h[b]=x[b])}}function de(h){this.src=h,this.g={},this.h=0}de.prototype.add=function(h,y,b,x,$){const te=h.toString();h=this.g[te],h||(h=this.g[te]=[],this.h++);const ge=Ae(h,y,x,$);return ge>-1?(y=h[ge],b||(y.fa=!1)):(y=new he(y,this.src,te,!!x,$),y.fa=b,h.push(y)),y};function ve(h,y){const b=y.type;if(b in h.g){var x=h.g[b],$=Array.prototype.indexOf.call(x,y,void 0),te;(te=$>=0)&&Array.prototype.splice.call(x,$,1),te&&(be(y),h.g[b].length==0&&(delete h.g[b],h.h--))}}function Ae(h,y,b,x){for(let $=0;$<h.length;++$){const te=h[$];if(!te.da&&te.listener==y&&te.capture==!!b&&te.ha==x)return $}return-1}var je="closure_lm_"+(Math.random()*1e6|0),Dt={};function ut(h,y,b,x,$){if(Array.isArray(y)){for(let te=0;te<y.length;te++)ut(h,y[te],b,x,$);return null}return b=Hi(b),h&&h[mt]?h.J(y,b,m(x)?!!x.capture:!1,$):Ht(h,y,b,!1,x,$)}function Ht(h,y,b,x,$,te){if(!y)throw Error("Invalid event type");const ge=m($)?!!$.capture:!!$;let Ue=Pn(h);if(Ue||(h[je]=Ue=new de(h)),b=Ue.add(y,b,x,ge,te),b.proxy)return b;if(x=Si(),b.proxy=x,x.src=h,x.listener=b,h.addEventListener)z||($=ge),$===void 0&&($=!1),h.addEventListener(y.toString(),x,$);else if(h.attachEvent)h.attachEvent(Jt(y.toString()),x);else if(h.addListener&&h.removeListener)h.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Si(){function h(b){return y.call(h.src,h.listener,b)}const y=fi;return h}function Vn(h,y,b,x,$){if(Array.isArray(y))for(var te=0;te<y.length;te++)Vn(h,y[te],b,x,$);else x=m(x)?!!x.capture:!!x,b=Hi(b),h&&h[mt]?(h=h.i,te=String(y).toString(),te in h.g&&(y=h.g[te],b=Ae(y,b,x,$),b>-1&&(be(y[b]),Array.prototype.splice.call(y,b,1),y.length==0&&(delete h.g[te],h.h--)))):h&&(h=Pn(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ae(y,b,x,$)),(b=h>-1?y[h]:null)&&qi(b))}function qi(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[mt])ve(y.i,h);else{var b=h.type,x=h.proxy;y.removeEventListener?y.removeEventListener(b,x,h.capture):y.detachEvent?y.detachEvent(Jt(b),x):y.addListener&&y.removeListener&&y.removeListener(x),(b=Pn(y))?(ve(b,h),b.h==0&&(b.src=null,y[je]=null)):be(h)}}}function Jt(h){return h in Dt?Dt[h]:Dt[h]="on"+h}function fi(h,y){if(h.da)h=!0;else{y=new Pe(y,this);const b=h.listener,x=h.ha||h.src;h.fa&&qi(h),h=b.call(x,y)}return h}function Pn(h){return h=h[je],h instanceof de?h:null}var as="__closure_events_fn_"+(Math.random()*1e9>>>0);function Hi(h){return typeof h=="function"?h:(h[as]||(h[as]=function(y){return h.handleEvent(y)}),h[as])}function St(){k.call(this),this.i=new de(this),this.M=this,this.G=null}E(St,k),St.prototype[mt]=!0,St.prototype.removeEventListener=function(h,y,b,x){Vn(this,h,y,b,x)};function ht(h,y){var b,x=h.G;if(x)for(b=[];x;x=x.G)b.push(x);if(h=h.M,x=y.type||y,typeof y=="string")y=new M(y,h);else if(y instanceof M)y.target=y.target||h;else{var $=y;y=new M(x,h),me(y,$)}$=!0;let te,ge;if(b)for(ge=b.length-1;ge>=0;ge--)te=y.g=b[ge],$=Hn(te,x,!0,y)&&$;if(te=y.g=h,$=Hn(te,x,!0,y)&&$,$=Hn(te,x,!1,y)&&$,b)for(ge=0;ge<b.length;ge++)te=y.g=b[ge],$=Hn(te,x,!1,y)&&$}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const b=h.g[y];for(let x=0;x<b.length;x++)be(b[x]);delete h.g[y],h.h--}}this.G=null},St.prototype.J=function(h,y,b,x){return this.i.add(String(h),y,!1,b,x)},St.prototype.K=function(h,y,b,x){return this.i.add(String(h),y,!0,b,x)};function Hn(h,y,b,x){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let $=!0;for(let te=0;te<y.length;++te){const ge=y[te];if(ge&&!ge.da&&ge.capture==b){const Ue=ge.listener,Kt=ge.ha||ge.src;ge.fa&&ve(h.i,ge),$=Ue.call(Kt,x)!==!1&&$}}return $&&!x.defaultPrevented}function os(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:u.setTimeout(h,y||0)}function ls(h){h.g=os(()=>{h.g=null,h.i&&(h.i=!1,ls(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Wt extends k{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ls(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fi(h){k.call(this),this.h=h,this.g={}}E(Fi,k);var Rs=[];function Fn(h){Me(h.g,function(y,b){this.g.hasOwnProperty(b)&&qi(y)},h),h.g={}}Fi.prototype.N=function(){Fi.Z.N.call(this),Fn(this)},Fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sn=u.JSON.stringify,Gi=u.JSON.parse,Cs=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function Gn(){}function Ns(){}var $n={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ft(){M.call(this,"d")}E(Ft,M);function pn(){M.call(this,"c")}E(pn,M);var At={},Is=null;function $i(){return Is=Is||new St}At.Ia="serverreachability";function rr(h){M.call(this,At.Ia,h)}E(rr,M);function ni(h){const y=$i();ht(y,new rr(y))}At.STAT_EVENT="statevent";function Ki(h,y){M.call(this,At.STAT_EVENT,h),this.stat=y}E(Ki,M);function He(h){const y=$i();ht(y,new Ki(y,h))}At.Ja="timingevent";function xt(h,y){M.call(this,At.Ja,h),this.size=y}E(xt,M);function Rt(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},y)}function jt(){this.g=!0}jt.prototype.ua=function(){this.g=!1};function yn(h,y,b,x,$,te){h.info(function(){if(h.g)if(te){var ge="",Ue=te.split("&");for(let lt=0;lt<Ue.length;lt++){var Kt=Ue[lt].split("=");if(Kt.length>1){const Mt=Kt[0];Kt=Kt[1];const Oi=Mt.split("_");ge=Oi.length>=2&&Oi[1]=="type"?ge+(Mt+"="+Kt+"&"):ge+(Mt+"=redacted&")}}}else ge=null;else ge=te;return"XMLHTTP REQ ("+x+") [attempt "+$+"]: "+y+`
`+b+`
`+ge})}function Zt(h,y,b,x,$,te,ge){h.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+$+"]: "+y+`
`+b+`
`+te+" "+ge})}function Vt(h,y,b,x){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+gt(h,b)+(x?" "+x:"")})}function W(h,y){h.info(function(){return"TIMEOUT: "+y})}jt.prototype.info=function(){};function gt(h,y){if(!h.g)return y;if(!y)return null;try{const te=JSON.parse(y);if(te){for(h=0;h<te.length;h++)if(Array.isArray(te[h])){var b=te[h];if(!(b.length<2)){var x=b[1];if(Array.isArray(x)&&!(x.length<1)){var $=x[0];if($!="noop"&&$!="stop"&&$!="close")for(let ge=1;ge<x.length;ge++)x[ge]=""}}}}return Sn(te)}catch{return y}}var pt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},fe;function un(){}E(un,Gn),un.prototype.g=function(){return new XMLHttpRequest},fe=new un;function nt(h){return encodeURIComponent(String(h))}function Ot(h){var y=1;h=h.split(":");const b=[];for(;y>0&&h.length;)b.push(h.shift()),y--;return h.length&&b.push(h.join(":")),b}function hn(h,y,b,x){this.j=h,this.i=y,this.l=b,this.S=x||1,this.V=new Fi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new yt}function yt(){this.i=null,this.g="",this.h=!1}var Pt={},$t={};function Ee(h,y,b){h.M=1,h.A=Ni(Y(y)),h.u=b,h.R=!0,ar(h,null)}function ar(h,y){h.F=Date.now(),Ai(h),h.B=Y(h.A);var b=h.B,x=h.S;Array.isArray(x)||(x=[String(x)]),to(b.i,"t",x),h.C=0,b=h.j.L,h.h=new yt,h.g=xu(h.j,b?y:null,!h.u),h.P>0&&(h.O=new Wt(p(h.Y,h,h.g),h.P)),y=h.V,b=h.g,x=h.ba;var $="readystatechange";Array.isArray($)||($&&(Rs[0]=$.toString()),$=Rs);for(let te=0;te<$.length;te++){const ge=ut(b,$[te],x||y.handleEvent,!1,y.h||y);if(!ge)break;y.g[ge.key]=ge}y=h.J?L(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),ni(),yn(h.i,h.v,h.B,h.l,h.S,h.u)}hn.prototype.ba=function(h){h=h.target;const y=this.O;y&&Xi(h)==3?y.j():this.Y(h)},hn.prototype.Y=function(h){try{if(h==this.g)e:{const Ue=Xi(this.g),Kt=this.g.ya(),lt=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||An(this.g)))){this.K||Ue!=4||Kt==7||(Kt==8||lt<=0?ni(3):ni(2)),xi(this);var y=this.g.ca();this.X=y;var b=Wa(this);if(this.o=y==200,Zt(this.i,this.v,this.B,this.l,this.S,Ue,y),this.o){if(this.U&&!this.L){t:{if(this.g){var x,$=this.g;if((x=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(x)){var te=x;break t}}te=null}if(h=te)Vt(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ri(this,h);else{this.o=!1,this.m=3,He(12),Ln(this),Kn(this);break e}}if(this.R){h=!0;let Mt;for(;!this.K&&this.C<b.length;)if(Mt=da(this,b),Mt==$t){Ue==4&&(this.m=4,He(14),h=!1),Vt(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==Pt){this.m=4,He(15),Vt(this.i,this.l,b,"[Invalid Chunk]"),h=!1;break}else Vt(this.i,this.l,Mt,null),Ri(this,Mt);if(Za(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||b.length!=0||this.h.h||(this.m=1,He(16),h=!1),this.o=this.o&&h,!h)Vt(this.i,this.l,b,"[Invalid Chunked Response]"),Ln(this),Kn(this);else if(b.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Al(ge),ge.P=!0,He(11))}}else Vt(this.i,this.l,b,null),Ri(this,b);Ue==4&&Ln(this),this.o&&!this.K&&(Ue==4?Tu(this.j,this):(this.o=!1,Ai(this)))}else Os(this.g),y==400&&b.indexOf("Unknown SID")>0?(this.m=3,He(12)):(this.m=0,He(13)),Ln(this),Kn(this)}}}catch{}};function Wa(h){if(!Za(h))return h.g.la();const y=An(h.g);if(y==="")return"";let b="";const x=y.length,$=Xi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Ln(h),Kn(h),"";h.h.i=new u.TextDecoder}for(let te=0;te<x;te++)h.h.h=!0,b+=h.h.i.decode(y[te],{stream:!($&&te==x-1)});return y.length=0,h.h.g+=b,h.C=0,h.h.g}function Za(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function da(h,y){var b=h.C,x=y.indexOf(`
`,b);return x==-1?$t:(b=Number(y.substring(b,x)),isNaN(b)?Pt:(x+=1,x+b>y.length?$t:(y=y.slice(x,x+b),h.C=x+b,y)))}hn.prototype.cancel=function(){this.K=!0,Ln(this)};function Ai(h){h.T=Date.now()+h.H,or(h,h.H)}function or(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Rt(p(h.aa,h),y)}function xi(h){h.D&&(u.clearTimeout(h.D),h.D=null)}hn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(W(this.i,this.B),this.M!=2&&(ni(),He(17)),Ln(this),this.m=2,Kn(this)):or(this,this.T-h)};function Kn(h){h.j.I==0||h.K||Tu(h.j,h)}function Ln(h){xi(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Fn(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Ri(h,y){try{var b=h.j;if(b.I!=0&&(b.g==h||Ci(b.h,h))){if(!h.L&&Ci(b.h,h)&&b.I==3){try{var x=b.Ba.g.parse(y)}catch{x=null}if(Array.isArray(x)&&x.length==3){var $=x;if($[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<h.F)ao(b),pr(b);else break e;wa(b),He(18)}}else b.xa=$[1],0<b.xa-b.K&&$[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Rt(p(b.Va,b),6e3));ii(b.h)<=1&&b.ta&&(b.ta=void 0)}else ms(b,11)}else if((h.L||b.g==h)&&ao(b),!O(y))for($=b.Ba.g.parse(y),y=0;y<$.length;y++){let lt=$[y];const Mt=lt[0];if(!(Mt<=b.K))if(b.K=Mt,lt=lt[1],b.I==2)if(lt[0]=="c"){b.M=lt[1],b.ba=lt[2];const Oi=lt[3];Oi!=null&&(b.ka=Oi,b.j.info("VER="+b.ka));const gs=lt[4];gs!=null&&(b.za=gs,b.j.info("SVER="+b.za));const Ji=lt[5];Ji!=null&&typeof Ji=="number"&&Ji>0&&(x=1.5*Ji,b.O=x,b.j.info("backChannelRequestTimeoutMs_="+x)),x=b;const Wi=h.g;if(Wi){const Sa=Wi.g?Wi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sa){var te=x.h;te.g||Sa.indexOf("spdy")==-1&&Sa.indexOf("quic")==-1&&Sa.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(ga(te,te.h),te.h=null))}if(x.G){const oo=Wi.g?Wi.g.getResponseHeader("X-HTTP-Session-Id"):null;oo&&(x.wa=oo,Fe(x.J,x.G,oo))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-h.F,b.j.info("Handshake RTT: "+b.T+"ms")),x=b;var ge=h;if(x.na=Au(x,x.L?x.ba:null,x.W),ge.L){cr(x.h,ge);var Ue=ge,Kt=x.O;Kt&&(Ue.H=Kt),Ue.D&&(xi(Ue),Ai(Ue)),x.g=ge}else bu(x);b.i.length>0&&ds(b)}else lt[0]!="stop"&&lt[0]!="close"||ms(b,7);else b.I==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?ms(b,7):wl(b):lt[0]!="noop"&&b.l&&b.l.qa(lt),b.A=0)}}ni(4)}catch{}}var Ut=class{constructor(h,y){this.g=h,this.map=y}};function ma(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function lr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ii(h){return h.h?1:h.g?h.g.size:0}function Ci(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function ga(h,y){h.g?h.g.add(y):h.h=y}function cr(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}ma.prototype.cancel=function(){if(this.i=pa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function pa(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const b of h.g.values())y=y.concat(b.G);return y}return R(h.i)}var en=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function H(h,y){if(h){h=h.split("&");for(let b=0;b<h.length;b++){const x=h[b].indexOf("=");let $,te=null;x>=0?($=h[b].substring(0,x),te=h[b].substring(x+1)):$=h[b],y($,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function Z(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Z?(this.l=h.l,ye(this,h.j),this.o=h.o,this.g=h.g,Se(this,h.u),this.h=h.h,Ze(this,vu(h.i)),this.m=h.m):h&&(y=String(h).match(en))?(this.l=!1,ye(this,y[1]||"",!0),this.o=cs(y[2]||""),this.g=cs(y[3]||"",!0),Se(this,y[4]),this.h=cs(y[5]||"",!0),Ze(this,y[6]||"",!0),this.m=cs(y[7]||"")):(this.l=!1,this.i=new hr(null,this.l))}Z.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(ya(y,eo,!0),":");var b=this.g;return(b||y=="file")&&(h.push("//"),(y=this.o)&&h.push(ya(y,eo,!0),"@"),h.push(nt(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&h.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(ya(b,b.charAt(0)=="/"?yl:gu,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",ya(b,pu)),h.join("")},Z.prototype.resolve=function(h){const y=Y(this);let b=!!h.j;b?ye(y,h.j):b=!!h.o,b?y.o=h.o:b=!!h.g,b?y.g=h.g:b=h.u!=null;var x=h.h;if(b)Se(y,h.u);else if(b=!!h.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var $=y.h.lastIndexOf("/");$!=-1&&(x=y.h.slice(0,$+1)+x)}if($=x,$==".."||$==".")x="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){x=$.lastIndexOf("/",0)==0,$=$.split("/");const te=[];for(let ge=0;ge<$.length;){const Ue=$[ge++];Ue=="."?x&&ge==$.length&&te.push(""):Ue==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),x&&ge==$.length&&te.push("")):(te.push(Ue),x=!0)}x=te.join("/")}else x=$}return b?y.h=x:b=h.i.toString()!=="",b?Ze(y,vu(h.i)):b=!!h.m,b&&(y.m=h.m),y};function Y(h){return new Z(h)}function ye(h,y,b){h.j=b?cs(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Se(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Ze(h,y,b){y instanceof hr?(h.i=y,no(h.i,h.l)):(b||(y=ya(y,ur)),h.i=new hr(y,h.l))}function Fe(h,y,b){h.i.set(y,b)}function Ni(h){return Fe(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function cs(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ya(h,y,b){return typeof h=="string"?(h=encodeURI(h).replace(y,si),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function si(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var eo=/[#\/\?@]/g,gu=/[#\?:]/g,yl=/[#\?]/g,ur=/[#\?@]/g,pu=/#/g;function hr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function ri(h){h.g||(h.g=new Map,h.h=0,h.i&&H(h.i,function(y,b){h.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}i=hr.prototype,i.add=function(h,y){ri(this),this.i=null,h=fr(this,h);let b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(y),this.h+=1,this};function yu(h,y){ri(h),y=fr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function vl(h,y){return ri(h),y=fr(h,y),h.g.has(y)}i.forEach=function(h,y){ri(this),this.g.forEach(function(b,x){b.forEach(function($){h.call(y,$,x,this)},this)},this)};function _l(h,y){ri(h);let b=[];if(typeof y=="string")vl(h,y)&&(b=b.concat(h.g.get(fr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)b=b.concat(h[y]);return b}i.set=function(h,y){return ri(this),this.i=null,h=fr(this,h),vl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=_l(this,h),h.length>0?String(h[0]):y):y};function to(h,y,b){yu(h,y),b.length>0&&(h.i=null,h.g.set(fr(h,y),R(b)),h.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let x=0;x<y.length;x++){var b=y[x];const $=nt(b);b=_l(this,b);for(let te=0;te<b.length;te++){let ge=$;b[te]!==""&&(ge+="="+nt(b[te])),h.push(ge)}}return this.i=h.join("&")};function vu(h){const y=new hr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function fr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function no(h,y){y&&!h.j&&(ri(h),h.i=null,h.g.forEach(function(b,x){const $=x.toLowerCase();x!=$&&(yu(this,x),to(this,$,b))},h)),h.j=y}function Qi(h,y){const b=new jt;if(u.Image){const x=new Image;x.onload=_(Ii,b,"TestLoadImage: loaded",!0,y,x),x.onerror=_(Ii,b,"TestLoadImage: error",!1,y,x),x.onabort=_(Ii,b,"TestLoadImage: abort",!1,y,x),x.ontimeout=_(Ii,b,"TestLoadImage: timeout",!1,y,x),u.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=h}else y(!1)}function bl(h,y){const b=new jt,x=new AbortController,$=setTimeout(()=>{x.abort(),Ii(b,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:x.signal}).then(te=>{clearTimeout($),te.ok?Ii(b,"TestPingServer: ok",!0,y):Ii(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout($),Ii(b,"TestPingServer: error",!1,y)})}function Ii(h,y,b,x,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),x(b)}catch{}}function dr(){this.g=new Cs}function us(h){this.i=h.Sb||null,this.h=h.ab||!1}E(us,Gn),us.prototype.g=function(){return new va(this.i,this.h)};function va(h,y){St.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(va,St),i=va.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Yi(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||u).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,mr(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Yi(this)),this.g&&(this.readyState=3,Yi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;io(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function io(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?mr(this):Yi(this),this.readyState==3&&io(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,mr(this))},i.Na=function(h){this.g&&(this.response=h,mr(this))},i.ga=function(){this.g&&mr(this)};function mr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Yi(h)}i.setRequestHeader=function(h,y){this.A.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=y.next();return h.join(`\r
`)};function Yi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(va.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Di(h){let y="";return Me(h,function(b,x){y+=x,y+=":",y+=b,y+=`\r
`}),y}function _a(h,y,b){e:{for(x in b){var x=!1;break e}x=!0}x||(b=Di(b),typeof h=="string"?b!=null&&nt(b):Fe(h,y,b))}function vt(h){St.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(vt,St);var hs=/^https?$/i,El=["POST","PUT"];i=vt.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,y,b,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():fe.g(),this.g.onreadystatechange=w(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(te){ba(this,te);return}if(h=b||"",b=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var $ in x)b.set($,x[$]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const te of x.keys())b.set(te,x.get(te));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(b.keys()).find(te=>te.toLowerCase()=="content-type"),$=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(El,y,void 0)>=0)||x||$||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,ge]of b)this.g.setRequestHeader(te,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(te){ba(this,te)}};function ba(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Tl(h),Ds(h)}function Tl(h){h.A||(h.A=!0,ht(h,"complete"),ht(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,ht(this,"complete"),ht(this,"abort"),Ds(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ds(this,!0)),vt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Ea(this):this.Xa())},i.Xa=function(){Ea(this)};function Ea(h){if(h.h&&typeof c<"u"){if(h.v&&Xi(h)==4)setTimeout(h.Ca.bind(h),0);else if(ht(h,"readystatechange"),Xi(h)==4){h.h=!1;try{const te=h.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var x;if(x=te===0){let ge=String(h.D).match(en)[1]||null;!ge&&u.self&&u.self.location&&(ge=u.self.location.protocol.slice(0,-1)),x=!hs.test(ge?ge.toLowerCase():"")}b=x}if(b)ht(h,"complete"),ht(h,"success");else{h.o=6;try{var $=Xi(h)>2?h.g.statusText:""}catch{$=""}h.l=$+" ["+h.ca()+"]",Tl(h)}}finally{Ds(h)}}}}function Ds(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const b=h.g;h.g=null,y||ht(h,"ready");try{b.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Xi(h){return h.g?h.g.readyState:0}i.ca=function(){try{return Xi(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Gi(y)}};function An(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Os(h){const y={};h=(h.g&&Xi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<h.length;x++){if(O(h[x]))continue;var b=Ot(h[x]);const $=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const te=y[$]||[];y[$]=te,te.push(b)}Be(y,function(x){return x.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fs(h,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||y}function gr(h){this.za=0,this.i=[],this.j=new jt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fs("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fs("baseRetryDelayMs",5e3,h),this.Za=fs("retryDelaySeedMs",1e4,h),this.Ta=fs("forwardChannelMaxRetries",2,h),this.va=fs("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ma(h&&h.concurrentRequestLimit),this.Ba=new dr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=gr.prototype,i.ka=8,i.I=1,i.connect=function(h,y,b,x){He(0),this.W=h,this.H=y||{},b&&x!==void 0&&(this.H.OSID=b,this.H.OAID=x),this.F=this.X,this.J=Au(this,null,this.W),ds(this)};function wl(h){if(so(h),h.I==3){var y=h.V++,b=Y(h.J);if(Fe(b,"SID",h.M),Fe(b,"RID",y),Fe(b,"TYPE","terminate"),Ta(h,b),y=new hn(h,h.j,y),y.M=2,y.A=Ni(Y(b)),b=!1,u.navigator&&u.navigator.sendBeacon)try{b=u.navigator.sendBeacon(y.A.toString(),"")}catch{}!b&&u.Image&&(new Image().src=y.A,b=!0),b||(y.g=xu(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ai(y)}Su(h)}function pr(h){h.g&&(Al(h),h.g.cancel(),h.g=null)}function so(h){pr(h),h.v&&(u.clearTimeout(h.v),h.v=null),ao(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function ds(h){if(!lr(h.h)&&!h.m){h.m=!0;var y=h.Ea;ee||A(),J||(ee(),J=!0),C.add(y,h),h.D=0}}function ro(h,y){return ii(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Rt(p(h.Ea,h,y),wu(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const $=new hn(this,this.j,h);let te=this.o;if(this.U&&(te?(te=L(te),me(te,this.U)):te=this.U),this.u!==null||this.R||($.J=te,te=null),this.S)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var x=this.i[b];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(y+=x,y>4096){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=_u(this,$,y),b=Y(this.J),Fe(b,"RID",h),Fe(b,"CVER",22),this.G&&Fe(b,"X-HTTP-Session-Id",this.G),Ta(this,b),te&&(this.R?y="headers="+nt(Di(te))+"&"+y:this.u&&_a(b,this.u,te)),ga(this.h,$),this.Ra&&Fe(b,"TYPE","init"),this.S?(Fe(b,"$req",y),Fe(b,"SID","null"),$.U=!0,Ee($,b,null)):Ee($,b,y),this.I=2}}else this.I==3&&(h?Sl(this,h):this.i.length==0||lr(this.h)||Sl(this))};function Sl(h,y){var b;y?b=y.l:b=h.V++;const x=Y(h.J);Fe(x,"SID",h.M),Fe(x,"RID",b),Fe(x,"AID",h.K),Ta(h,x),h.u&&h.o&&_a(x,h.u,h.o),b=new hn(h,h.j,b,h.D+1),h.u===null&&(b.J=h.o),y&&(h.i=y.G.concat(h.i)),y=_u(h,b,1e3),b.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),ga(h.h,b),Ee(b,x,y)}function Ta(h,y){h.H&&Me(h.H,function(b,x){Fe(y,x,b)}),h.l&&Me({},function(b,x){Fe(y,x,b)})}function _u(h,y,b){b=Math.min(h.i.length,b);const x=h.l?p(h.l.Ka,h.l,h):null;e:{var $=h.i;let Ue=-1;for(;;){const Kt=["count="+b];Ue==-1?b>0?(Ue=$[0].g,Kt.push("ofs="+Ue)):Ue=0:Kt.push("ofs="+Ue);let lt=!0;for(let Mt=0;Mt<b;Mt++){var te=$[Mt].g;const Oi=$[Mt].map;if(te-=Ue,te<0)Ue=Math.max(0,$[Mt].g-100),lt=!1;else try{te="req"+te+"_"||"";try{var ge=Oi instanceof Map?Oi:Object.entries(Oi);for(const[gs,Ji]of ge){let Wi=Ji;m(Ji)&&(Wi=Sn(Ji)),Kt.push(te+gs+"="+encodeURIComponent(Wi))}}catch(gs){throw Kt.push(te+"type="+encodeURIComponent("_badmap")),gs}}catch{x&&x(Oi)}}if(lt){ge=Kt.join("&");break e}}ge=void 0}return h=h.i.splice(0,b),y.G=h,ge}function bu(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ee||A(),J||(ee(),J=!0),C.add(y,h),h.A=0}}function wa(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Rt(p(h.Da,h),wu(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,Eu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Rt(p(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,He(10),pr(this),Eu(this))};function Al(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function Eu(h){h.g=new hn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Y(h.na);Fe(y,"RID","rpc"),Fe(y,"SID",h.M),Fe(y,"AID",h.K),Fe(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Fe(y,"TO",h.ia),Fe(y,"TYPE","xmlhttp"),Ta(h,y),h.u&&h.o&&_a(y,h.u,h.o),h.O&&(h.g.H=h.O);var b=h.g;h=h.ba,b.M=1,b.A=Ni(Y(y)),b.u=null,b.R=!0,ar(b,h)}i.Va=function(){this.C!=null&&(this.C=null,pr(this),wa(this),He(19))};function ao(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function Tu(h,y){var b=null;if(h.g==y){ao(h),Al(h),h.g=null;var x=2}else if(Ci(h.h,y))b=y.G,cr(h.h,y),x=1;else return;if(h.I!=0){if(y.o)if(x==1){b=y.u?y.u.length:0,y=Date.now()-y.F;var $=h.D;x=$i(),ht(x,new xt(x,b)),ds(h)}else bu(h);else if($=y.m,$==3||$==0&&y.X>0||!(x==1&&ro(h,y)||x==2&&wa(h)))switch(b&&b.length>0&&(y=h.h,y.i=y.i.concat(b)),$){case 1:ms(h,5);break;case 4:ms(h,10);break;case 3:ms(h,6);break;default:ms(h,2)}}}function wu(h,y){let b=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(b*=2),b*y}function ms(h,y){if(h.j.info("Error code "+y),y==2){var b=p(h.bb,h),x=h.Ua;const $=!x;x=new Z(x||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||ye(x,"https"),Ni(x),$?Qi(x.toString(),b):bl(x.toString(),b)}else He(2);h.I=0,h.l&&h.l.pa(y),Su(h),so(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),He(2)):(this.j.info("Failed to ping google.com"),He(1))};function Su(h){if(h.I=0,h.ja=[],h.l){const y=pa(h.h);(y.length!=0||h.i.length!=0)&&(D(h.ja,y),D(h.ja,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.oa()}}function Au(h,y,b){var x=b instanceof Z?Y(b):new Z(b);if(x.g!="")y&&(x.g=y+"."+x.g),Se(x,x.u);else{var $=u.location;x=$.protocol,y=y?y+"."+$.hostname:$.hostname,$=+$.port;const te=new Z(null);x&&ye(te,x),y&&(te.g=y),$&&Se(te,$),b&&(te.h=b),x=te}return b=h.G,y=h.wa,b&&y&&Fe(x,b,y),Fe(x,"VER",h.ka),Ta(h,x),x}function xu(h,y,b){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new vt(new us({ab:b})):new vt(h.ma),y.Fa(h.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ru(){}i=Ru.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function yr(){}yr.prototype.g=function(h,y){return new Qn(h,y)};function Qn(h,y){St.call(this),this.g=new gr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!O(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!O(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Ms(this)}E(Qn,St),Qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qn.prototype.close=function(){wl(this.g)},Qn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.v&&(b={},b.__data__=Sn(h),h=b);y.i.push(new Ut(y.Ya++,h)),y.I==3&&ds(y)},Qn.prototype.N=function(){this.g.l=null,delete this.j,wl(this.g),delete this.g,Qn.Z.N.call(this)};function Cu(h){Ft.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const b in y){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(Cu,Ft);function Nu(){pn.call(this),this.status=1}E(Nu,pn);function Ms(h){this.g=h}E(Ms,Ru),Ms.prototype.ra=function(){ht(this.g,"a")},Ms.prototype.qa=function(h){ht(this.g,new Cu(h))},Ms.prototype.pa=function(h){ht(this.g,new Nu)},Ms.prototype.oa=function(){ht(this.g,"b")},yr.prototype.createWebChannel=yr.prototype.g,Qn.prototype.send=Qn.prototype.o,Qn.prototype.open=Qn.prototype.m,Qn.prototype.close=Qn.prototype.close,SE=function(){return new yr},wE=function(){return $i()},TE=At,Vg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},pt.NO_ERROR=0,pt.TIMEOUT=8,pt.HTTP_ERROR=6,Fh=pt,Gt.COMPLETE="complete",EE=Gt,Ns.EventType=$n,$n.OPEN="a",$n.CLOSE="b",$n.ERROR="c",$n.MESSAGE="d",St.prototype.listen=St.prototype.J,hc=Ns,vt.prototype.listenOnce=vt.prototype.K,vt.prototype.getLastError=vt.prototype.Ha,vt.prototype.getLastErrorCode=vt.prototype.ya,vt.prototype.getStatus=vt.prototype.ca,vt.prototype.getResponseJson=vt.prototype.La,vt.prototype.getResponseText=vt.prototype.la,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Fa,bE=vt}).apply(typeof Mh<"u"?Mh:typeof self<"u"?self:typeof window<"u"?window:{});const cb="@firebase/firestore",ub="4.9.3";class Bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");let cl="12.7.0";const Ka=new fp("@firebase/firestore");function jo(){return Ka.logLevel}function _e(i,...e){if(Ka.logLevel<=Xe.DEBUG){const t=e.map(gp);Ka.debug(`Firestore (${cl}): ${i}`,...t)}}function Zs(i,...e){if(Ka.logLevel<=Xe.ERROR){const t=e.map(gp);Ka.error(`Firestore (${cl}): ${i}`,...t)}}function Wo(i,...e){if(Ka.logLevel<=Xe.WARN){const t=e.map(gp);Ka.warn(`Firestore (${cl}): ${i}`,...t)}}function gp(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}function Ce(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,AE(i,r,t)}function AE(i,e,t){let r=`FIRESTORE (${cl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Zs(r),new Error(r)}function st(i,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,i||AE(e,o,r)}function Ve(i,e){return i}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends sr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ea{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class xE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Bn.UNAUTHENTICATED)))}shutdown(){}}class W2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Z2{constructor(e){this.t=e,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){st(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let c=new ea;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ea,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ea)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(st(typeof r.accessToken=="string",31837,{l:r}),new xE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string",2055,{h:e}),new Bn(e)}}class eR{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tR{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new eR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class hb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ns(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){st(this.o===void 0,3512);const r=c=>{c.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,_e("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const o=c=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new hb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(st(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new hb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function iR(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}class pp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=iR(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<t&&(r+=e.charAt(o[c]%62))}return r}}function Je(i,e){return i<e?-1:i>e?1:0}function Pg(i,e){const t=Math.min(i.length,e.length);for(let r=0;r<t;r++){const o=i.charAt(r),c=e.charAt(r);if(o!==c)return hg(o)===hg(c)?Je(o,c):hg(o)?1:-1}return Je(i.length,e.length)}const sR=55296,rR=57343;function hg(i){const e=i.charCodeAt(0);return e>=sR&&e<=rR}function Zo(i,e,t){return i.length===e.length&&i.every(((r,o)=>t(r,e[o])))}const fb="__name__";class bs{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ce(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return bs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bs?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const c=bs.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return Je(e.length,t.length)}static compareSegments(e,t){const r=bs.isNumericId(e),o=bs.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?bs.extractNumericId(e).compare(bs.extractNumericId(t)):Pg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zr.fromString(e.substring(4,e.length-2))}}class Tt extends bs{construct(e,t,r){return new Tt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new Tt(t)}static emptyPath(){return new Tt([])}}const aR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mn extends bs{construct(e,t,r){return new Mn(e,t,r)}static isValidIdentifier(e){return aR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fb}static keyField(){return new Mn([fb])}static fromServerFormat(e){const t=[];let r="",o=0;const c=()=>{if(r.length===0)throw new pe(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new pe(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new pe(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else m==="`"?(u=!u,o++):m!=="."||u?(r+=m,o++):(c(),o++)}if(c(),u)throw new pe(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mn(t)}static emptyPath(){return new Mn([])}}class xe{constructor(e){this.path=e}static fromPath(e){return new xe(Tt.fromString(e))}static fromName(e){return new xe(Tt.fromString(e).popFirst(5))}static empty(){return new xe(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new Tt(e.slice()))}}function RE(i,e,t){if(!t)throw new pe(oe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function oR(i,e,t,r){if(e===!0&&r===!0)throw new pe(oe.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function db(i){if(!xe.isDocumentKey(i))throw new pe(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function mb(i){if(xe.isDocumentKey(i))throw new pe(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function CE(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Mf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ce(12329,{type:typeof i})}function Js(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new pe(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Mf(i);throw new pe(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function cn(i,e){const t={typeString:i};return e&&(t.value=e),t}function Xc(i,e){if(!CE(i))throw new pe(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const u=i[r];if(o&&typeof u!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&u!==c.value){t=`Expected '${r}' field to equal '${c.value}'`;break}}if(t)throw new pe(oe.INVALID_ARGUMENT,t);return!0}const gb=-62135596800,pb=1e6;class It{static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*pb);return new It(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<gb)throw new pe(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pb}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:It._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xc(e,It._jsonSchema))return new It(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}It._jsonSchemaVersion="firestore/timestamp/1.0",It._jsonSchema={type:cn("string",It._jsonSchemaVersion),seconds:cn("number"),nanoseconds:cn("number")};class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new It(0,0))}static max(){return new Ie(new It(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Vc=-1;function lR(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(r===1e9?new It(t+1,0):new It(t,r));return new sa(o,xe.empty(),e)}function cR(i){return new sa(i.readTime,i.key,Vc)}class sa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new sa(Ie.min(),xe.empty(),Vc)}static max(){return new sa(Ie.max(),xe.empty(),Vc)}}function uR(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(i.documentKey,e.documentKey),t!==0?t:Je(i.largestBatchId,e.largestBatchId))}const hR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ul(i){if(i.code!==oe.FAILED_PRECONDITION||i.message!==hR)throw i;_e("LocalStore","Unexpectedly lost primary lease")}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue(((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.reject(t)}static resolve(e){return new ue(((t,r)=>{t(e)}))}static reject(e){return new ue(((t,r)=>{r(e)}))}static waitFor(e){return new ue(((t,r)=>{let o=0,c=0,u=!1;e.forEach((m=>{++o,m.next((()=>{++c,u&&c===o&&t()}),(g=>r(g)))})),u=!0,c===o&&t()}))}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next((o=>o?ue.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,c)=>{r.push(t.call(this,o,c))})),this.waitFor(r)}static mapArray(e,t){return new ue(((r,o)=>{const c=e.length,u=new Array(c);let m=0;for(let g=0;g<c;g++){const p=g;t(e[p]).next((_=>{u[p]=_,++m,m===c&&r(u)}),(_=>o(_)))}}))}static doWhile(e,t){return new ue(((r,o)=>{const c=()=>{e()===!0?t().next((()=>{c()}),o):r()};c()}))}}function dR(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function hl(i){return i.name==="IndexedDbTransactionError"}class kf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}kf.ce=-1;const yp=-1;function Jc(i){return i==null}function af(i){return i===0&&1/i==-1/0}function mR(i){return typeof i=="number"&&Number.isInteger(i)&&!af(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const NE="";function gR(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=yb(e)),e=pR(i.get(t),e);return yb(e)}function pR(i,e){let t=e;const r=i.length;for(let o=0;o<r;o++){const c=i.charAt(o);switch(c){case"\0":t+="";break;case NE:t+="";break;default:t+=c}}return t}function yb(i){return i+NE+""}function vb(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function ha(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function IE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Lt{constructor(e,t){this.comparator=e,this.root=t||Dn.EMPTY}insert(e,t){return new Lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kh(this.root,e,this.comparator,!1)}getReverseIterator(){return new kh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kh(this.root,e,this.comparator,!0)}}class kh{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dn{constructor(e,t,r,o,c){this.key=e,this.value=t,this.color=r??Dn.RED,this.left=o??Dn.EMPTY,this.right=c??Dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,c){return new Dn(e??this.key,t??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,r),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Dn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1;Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,r,o,c){return this}insert(e,t,r){return new Dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gn{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _b(this.data.getIterator())}getIteratorFrom(e){return new _b(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof gn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new gn(this.comparator);return t.data=e,t}}class _b{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ti{constructor(e){this.fields=e,e.sort(Mn.comparator)}static empty(){return new Ti([])}unionWith(e){let t=new gn(Mn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ti(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zo(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class DE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class kn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new DE("Invalid base64 string: "+c):c}})(e);return new kn(t)}static fromUint8Array(e){const t=(function(o){let c="";for(let u=0;u<o.length;++u)c+=String.fromCharCode(o[u]);return c})(e);return new kn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kn.EMPTY_BYTE_STRING=new kn("");const yR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ra(i){if(st(!!i,39018),typeof i=="string"){let e=0;const t=yR.exec(i);if(st(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xt(i.seconds),nanos:Xt(i.nanos)}}function Xt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function aa(i){return typeof i=="string"?kn.fromBase64String(i):kn.fromUint8Array(i)}const OE="server_timestamp",ME="__type__",kE="__previous_value__",VE="__local_write_time__";function vp(i){return(i?.mapValue?.fields||{})[ME]?.stringValue===OE}function Vf(i){const e=i.mapValue.fields[kE];return vp(e)?Vf(e):e}function Pc(i){const e=ra(i.mapValue.fields[VE].timestampValue);return new It(e.seconds,e.nanos)}class vR{constructor(e,t,r,o,c,u,m,g,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=_}}const of="(default)";class Lc{constructor(e,t){this.projectId=e,this.database=t||of}static empty(){return new Lc("","")}get isDefaultDatabase(){return this.database===of}isEqual(e){return e instanceof Lc&&e.projectId===this.projectId&&e.database===this.database}}const PE="__type__",_R="__max__",Vh={mapValue:{}},LE="__vector__",lf="value";function oa(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?vp(i)?4:ER(i)?9007199254740991:bR(i)?10:11:Ce(28295,{value:i})}function xs(i,e){if(i===e)return!0;const t=oa(i);if(t!==oa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Pc(i).isEqual(Pc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const u=ra(o.timestampValue),m=ra(c.timestampValue);return u.seconds===m.seconds&&u.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return aa(o.bytesValue).isEqual(aa(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return Xt(o.geoPointValue.latitude)===Xt(c.geoPointValue.latitude)&&Xt(o.geoPointValue.longitude)===Xt(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Xt(o.integerValue)===Xt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const u=Xt(o.doubleValue),m=Xt(c.doubleValue);return u===m?af(u)===af(m):isNaN(u)&&isNaN(m)}return!1})(i,e);case 9:return Zo(i.arrayValue.values||[],e.arrayValue.values||[],xs);case 10:case 11:return(function(o,c){const u=o.mapValue.fields||{},m=c.mapValue.fields||{};if(vb(u)!==vb(m))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(m[g]===void 0||!xs(u[g],m[g])))return!1;return!0})(i,e);default:return Ce(52216,{left:i})}}function jc(i,e){return(i.values||[]).find((t=>xs(t,e)))!==void 0}function el(i,e){if(i===e)return 0;const t=oa(i),r=oa(e);if(t!==r)return Je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(i.booleanValue,e.booleanValue);case 2:return(function(c,u){const m=Xt(c.integerValue||c.doubleValue),g=Xt(u.integerValue||u.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(i,e);case 3:return bb(i.timestampValue,e.timestampValue);case 4:return bb(Pc(i),Pc(e));case 5:return Pg(i.stringValue,e.stringValue);case 6:return(function(c,u){const m=aa(c),g=aa(u);return m.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(c,u){const m=c.split("/"),g=u.split("/");for(let p=0;p<m.length&&p<g.length;p++){const _=Je(m[p],g[p]);if(_!==0)return _}return Je(m.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,u){const m=Je(Xt(c.latitude),Xt(u.latitude));return m!==0?m:Je(Xt(c.longitude),Xt(u.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Eb(i.arrayValue,e.arrayValue);case 10:return(function(c,u){const m=c.fields||{},g=u.fields||{},p=m[lf]?.arrayValue,_=g[lf]?.arrayValue,E=Je(p?.values?.length||0,_?.values?.length||0);return E!==0?E:Eb(p,_)})(i.mapValue,e.mapValue);case 11:return(function(c,u){if(c===Vh.mapValue&&u===Vh.mapValue)return 0;if(c===Vh.mapValue)return 1;if(u===Vh.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),p=u.fields||{},_=Object.keys(p);g.sort(),_.sort();for(let E=0;E<g.length&&E<_.length;++E){const w=Pg(g[E],_[E]);if(w!==0)return w;const R=el(m[g[E]],p[_[E]]);if(R!==0)return R}return Je(g.length,_.length)})(i.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function bb(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Je(i,e);const t=ra(i),r=ra(e),o=Je(t.seconds,r.seconds);return o!==0?o:Je(t.nanos,r.nanos)}function Eb(i,e){const t=i.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const c=el(t[o],r[o]);if(c)return c}return Je(t.length,r.length)}function tl(i){return Lg(i)}function Lg(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=ra(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return aa(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return xe.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",o=!0;for(const c of t.values||[])o?o=!1:r+=",",r+=Lg(c);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const u of r)c?c=!1:o+=",",o+=`${u}:${Lg(t.fields[u])}`;return o+"}"})(i.mapValue):Ce(61005,{value:i})}function Gh(i){switch(oa(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vf(i);return e?16+Gh(e):16;case 5:return 2*i.stringValue.length;case 6:return aa(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,c)=>o+Gh(c)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return ha(r.fields,((c,u)=>{o+=c.length+Gh(u)})),o})(i.mapValue);default:throw Ce(13486,{value:i})}}function Tb(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function jg(i){return!!i&&"integerValue"in i}function _p(i){return!!i&&"arrayValue"in i}function wb(i){return!!i&&"nullValue"in i}function Sb(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function $h(i){return!!i&&"mapValue"in i}function bR(i){return(i?.mapValue?.fields||{})[PE]?.stringValue===LE}function bc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return ha(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=bc(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=bc(i.arrayValue.values[t]);return e}return{...i}}function ER(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===_R}class Wn{constructor(e){this.value=e}static empty(){return new Wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!$h(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bc(t)}setAll(e){let t=Mn.emptyPath(),r={},o=[];e.forEach(((u,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,r,o),r={},o=[],t=m.popLast()}u?r[m.lastSegment()]=bc(u):o.push(m.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,r,o)}delete(e){const t=this.field(e.popLast());$h(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];$h(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){ha(t,((o,c)=>e[o]=c));for(const o of r)delete e[o]}clone(){return new Wn(bc(this.value))}}function jE(i){const e=[];return ha(i.fields,((t,r)=>{const o=new Mn([t]);if($h(r)){const c=jE(r.mapValue).fields;if(c.length===0)e.push(o);else for(const u of c)e.push(o.child(u))}else e.push(o)})),new Ti(e)}class Tn{constructor(e,t,r,o,c,u,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=c,this.data=u,this.documentState=m}static newInvalidDocument(e){return new Tn(e,0,Ie.min(),Ie.min(),Ie.min(),Wn.empty(),0)}static newFoundDocument(e,t,r,o){return new Tn(e,1,t,Ie.min(),r,o,0)}static newNoDocument(e,t){return new Tn(e,2,t,Ie.min(),Ie.min(),Wn.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,Ie.min(),Ie.min(),Wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class cf{constructor(e,t){this.position=e,this.inclusive=t}}function Ab(i,e,t){let r=0;for(let o=0;o<i.position.length;o++){const c=e[o],u=i.position[o];if(c.field.isKeyField()?r=xe.comparator(xe.fromName(u.referenceValue),t.key):r=el(u,t.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function xb(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!xs(i.position[t],e.position[t]))return!1;return!0}class uf{constructor(e,t="asc"){this.field=e,this.dir=t}}function TR(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class UE{}class ln extends UE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new SR(e,t,r):t==="array-contains"?new RR(e,r):t==="in"?new CR(e,r):t==="not-in"?new NR(e,r):t==="array-contains-any"?new IR(e,r):new ln(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new AR(e,r):new xR(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(el(t,this.value)):t!==null&&oa(this.value)===oa(t)&&this.matchesComparison(el(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ss extends UE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ss(e,t)}matches(e){return zE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zE(i){return i.op==="and"}function BE(i){return wR(i)&&zE(i)}function wR(i){for(const e of i.filters)if(e instanceof ss)return!1;return!0}function Ug(i){if(i instanceof ln)return i.field.canonicalString()+i.op.toString()+tl(i.value);if(BE(i))return i.filters.map((e=>Ug(e))).join(",");{const e=i.filters.map((t=>Ug(t))).join(",");return`${i.op}(${e})`}}function qE(i,e){return i instanceof ln?(function(r,o){return o instanceof ln&&r.op===o.op&&r.field.isEqual(o.field)&&xs(r.value,o.value)})(i,e):i instanceof ss?(function(r,o){return o instanceof ss&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((c,u,m)=>c&&qE(u,o.filters[m])),!0):!1})(i,e):void Ce(19439)}function HE(i){return i instanceof ln?(function(t){return`${t.field.canonicalString()} ${t.op} ${tl(t.value)}`})(i):i instanceof ss?(function(t){return t.op.toString()+" {"+t.getFilters().map(HE).join(" ,")+"}"})(i):"Filter"}class SR extends ln{constructor(e,t,r){super(e,t,r),this.key=xe.fromName(r.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class AR extends ln{constructor(e,t){super(e,"in",t),this.keys=FE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class xR extends ln{constructor(e,t){super(e,"not-in",t),this.keys=FE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function FE(i,e){return(e.arrayValue?.values||[]).map((t=>xe.fromName(t.referenceValue)))}class RR extends ln{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _p(t)&&jc(t.arrayValue,this.value)}}class CR extends ln{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&jc(this.value.arrayValue,t)}}class NR extends ln{constructor(e,t){super(e,"not-in",t)}matches(e){if(jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!jc(this.value.arrayValue,t)}}class IR extends ln{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_p(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>jc(this.value.arrayValue,r)))}}class DR{constructor(e,t=null,r=[],o=[],c=null,u=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=u,this.endAt=m,this.Te=null}}function Rb(i,e=null,t=[],r=[],o=null,c=null,u=null){return new DR(i,e,t,r,o,c,u)}function bp(i){const e=Ve(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Ug(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),Jc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>tl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>tl(r))).join(",")),e.Te=t}return e.Te}function Ep(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!TR(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!qE(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!xb(i.startAt,e.startAt)&&xb(i.endAt,e.endAt)}function zg(i){return xe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class Wc{constructor(e,t=null,r=[],o=[],c=null,u="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=u,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function OR(i,e,t,r,o,c,u,m){return new Wc(i,e,t,r,o,c,u,m)}function Tp(i){return new Wc(i)}function Cb(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function GE(i){return i.collectionGroup!==null}function Ec(i){const e=Ve(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let m=new gn(Mn.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new uf(c,r))})),t.has(Mn.keyField().canonicalString())||e.Ie.push(new uf(Mn.keyField(),r))}return e.Ie}function Es(i){const e=Ve(i);return e.Ee||(e.Ee=MR(e,Ec(i))),e.Ee}function MR(i,e){if(i.limitType==="F")return Rb(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new uf(o.field,c)}));const t=i.endAt?new cf(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new cf(i.startAt.position,i.startAt.inclusive):null;return Rb(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function Bg(i,e){const t=i.filters.concat([e]);return new Wc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function qg(i,e,t){return new Wc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Pf(i,e){return Ep(Es(i),Es(e))&&i.limitType===e.limitType}function $E(i){return`${bp(Es(i))}|lt:${i.limitType}`}function Uo(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>HE(o))).join(", ")}]`),Jc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>tl(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>tl(o))).join(",")),`Target(${r})`})(Es(i))}; limitType=${i.limitType})`}function Lf(i,e){return e.isFoundDocument()&&(function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):xe.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(i,e)&&(function(r,o){for(const c of Ec(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(u,m,g){const p=Ab(u,m,g);return u.inclusive?p<=0:p<0})(r.startAt,Ec(r),o)||r.endAt&&!(function(u,m,g){const p=Ab(u,m,g);return u.inclusive?p>=0:p>0})(r.endAt,Ec(r),o))})(i,e)}function kR(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function KE(i){return(e,t)=>{let r=!1;for(const o of Ec(i)){const c=VR(o,e,t);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function VR(i,e,t){const r=i.field.isKeyField()?xe.comparator(e.key,t.key):(function(c,u,m){const g=u.data.field(c),p=m.data.field(c);return g!==null&&p!==null?el(g,p):Ce(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Ce(19790,{direction:i.dir})}}class Xa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ha(this.inner,((t,r)=>{for(const[o,c]of r)e(o,c)}))}isEmpty(){return IE(this.inner)}size(){return this.innerSize}}const PR=new Lt(xe.comparator);function er(){return PR}const QE=new Lt(xe.comparator);function fc(...i){let e=QE;for(const t of i)e=e.insert(t.key,t);return e}function YE(i){let e=QE;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function qa(){return Tc()}function XE(){return Tc()}function Tc(){return new Xa((i=>i.toString()),((i,e)=>i.isEqual(e)))}const LR=new Lt(xe.comparator),jR=new gn(xe.comparator);function We(...i){let e=jR;for(const t of i)e=e.add(t);return e}const UR=new gn(Je);function zR(){return UR}function wp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:af(e)?"-0":e}}function JE(i){return{integerValue:""+i}}function BR(i,e){return mR(e)?JE(e):wp(i,e)}class jf{constructor(){this._=void 0}}function qR(i,e,t){return i instanceof hf?(function(o,c){const u={fields:{[ME]:{stringValue:OE},[VE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&vp(c)&&(c=Vf(c)),c&&(u.fields[kE]=c),{mapValue:u}})(t,e):i instanceof Uc?ZE(i,e):i instanceof zc?eT(i,e):(function(o,c){const u=WE(o,c),m=Nb(u)+Nb(o.Ae);return jg(u)&&jg(o.Ae)?JE(m):wp(o.serializer,m)})(i,e)}function HR(i,e,t){return i instanceof Uc?ZE(i,e):i instanceof zc?eT(i,e):t}function WE(i,e){return i instanceof ff?(function(r){return jg(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class hf extends jf{}class Uc extends jf{constructor(e){super(),this.elements=e}}function ZE(i,e){const t=tT(e);for(const r of i.elements)t.some((o=>xs(o,r)))||t.push(r);return{arrayValue:{values:t}}}class zc extends jf{constructor(e){super(),this.elements=e}}function eT(i,e){let t=tT(e);for(const r of i.elements)t=t.filter((o=>!xs(o,r)));return{arrayValue:{values:t}}}class ff extends jf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Nb(i){return Xt(i.integerValue||i.doubleValue)}function tT(i){return _p(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function FR(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof Uc&&o instanceof Uc||r instanceof zc&&o instanceof zc?Zo(r.elements,o.elements,xs):r instanceof ff&&o instanceof ff?xs(r.Ae,o.Ae):r instanceof hf&&o instanceof hf})(i.transform,e.transform)}class GR{constructor(e,t){this.version=e,this.transformResults=t}}class Zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Uf{}function nT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Sp(i.key,Zn.none()):new Zc(i.key,i.data,Zn.none());{const t=i.data,r=Wn.empty();let o=new gn(Mn.comparator);for(let c of e.fields)if(!o.has(c)){let u=t.field(c);u===null&&c.length>1&&(c=c.popLast(),u=t.field(c)),u===null?r.delete(c):r.set(c,u),o=o.add(c)}return new fa(i.key,r,new Ti(o.toArray()),Zn.none())}}function $R(i,e,t){i instanceof Zc?(function(o,c,u){const m=o.value.clone(),g=Db(o.fieldTransforms,c,u.transformResults);m.setAll(g),c.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(i,e,t):i instanceof fa?(function(o,c,u){if(!Kh(o.precondition,c))return void c.convertToUnknownDocument(u.version);const m=Db(o.fieldTransforms,c,u.transformResults),g=c.data;g.setAll(iT(o)),g.setAll(m),c.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(i,e,t):(function(o,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function wc(i,e,t,r){return i instanceof Zc?(function(c,u,m,g){if(!Kh(c.precondition,u))return m;const p=c.value.clone(),_=Ob(c.fieldTransforms,g,u);return p.setAll(_),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(i,e,t,r):i instanceof fa?(function(c,u,m,g){if(!Kh(c.precondition,u))return m;const p=Ob(c.fieldTransforms,g,u),_=u.data;return _.setAll(iT(c)),_.setAll(p),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((E=>E.field)))})(i,e,t,r):(function(c,u,m){return Kh(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):m})(i,e,t)}function KR(i,e){let t=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),c=WE(r.transform,o||null);c!=null&&(t===null&&(t=Wn.empty()),t.set(r.field,c))}return t||null}function Ib(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Zo(r,o,((c,u)=>FR(c,u)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Zc extends Uf{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class fa extends Uf{constructor(e,t,r,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function iT(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function Db(i,e,t){const r=new Map;st(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let o=0;o<t.length;o++){const c=i[o],u=c.transform,m=e.data.field(c.field);r.set(c.field,HR(u,m,t[o]))}return r}function Ob(i,e,t){const r=new Map;for(const o of i){const c=o.transform,u=t.data.field(o.field);r.set(o.field,qR(c,u,e))}return r}class Sp extends Uf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sT extends Uf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class QR{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&$R(c,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=wc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=wc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=XE();return this.mutations.forEach((o=>{const c=e.get(o.key),u=c.overlayedDocument;let m=this.applyToLocalView(u,c.mutatedFields);m=t.has(o.key)?null:m;const g=nT(u,m);g!==null&&r.set(o.key,g),u.isValidDocument()||u.convertToNoDocument(Ie.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),We())}isEqual(e){return this.batchId===e.batchId&&Zo(this.mutations,e.mutations,((t,r)=>Ib(t,r)))&&Zo(this.baseMutations,e.baseMutations,((t,r)=>Ib(t,r)))}}class Ap{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){st(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return LR})();const c=e.mutations;for(let u=0;u<c.length;u++)o=o.insert(c[u].key,r[u].version);return new Ap(e,t,r,o)}}class YR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class XR{constructor(e,t){this.count=e,this.unchangedNames=t}}var on,it;function rT(i){switch(i){case oe.OK:return Ce(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Ce(15467,{code:i})}}function aT(i){if(i===void 0)return Zs("GRPC error has no .code"),oe.UNKNOWN;switch(i){case on.OK:return oe.OK;case on.CANCELLED:return oe.CANCELLED;case on.UNKNOWN:return oe.UNKNOWN;case on.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case on.INTERNAL:return oe.INTERNAL;case on.UNAVAILABLE:return oe.UNAVAILABLE;case on.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case on.NOT_FOUND:return oe.NOT_FOUND;case on.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case on.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case on.ABORTED:return oe.ABORTED;case on.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case on.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case on.DATA_LOSS:return oe.DATA_LOSS;default:return Ce(39323,{code:i})}}(it=on||(on={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";function JR(){return new TextEncoder}const WR=new Zr([4294967295,4294967295],0);function Mb(i){const e=JR().encode(i),t=new _E;return t.update(e),new Uint8Array(t.digest())}function kb(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Zr([t,r],0),new Zr([o,c],0)]}class xp{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new dc(`Invalid padding: ${t}`);if(r<0)throw new dc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new dc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new dc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Zr.fromNumber(this.ge)}ye(e,t,r){let o=e.add(t.multiply(Zr.fromNumber(r)));return o.compare(WR)===1&&(o=new Zr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Mb(e),[r,o]=kb(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(r,o,c);if(!this.we(u))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new xp(c,o,t);return r.forEach((m=>u.insert(m))),u}insert(e){if(this.ge===0)return;const t=Mb(e),[r,o]=kb(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(r,o,c);this.Se(u)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class dc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zf{constructor(e,t,r,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new zf(Ie.min(),o,new Lt(Je),er(),We())}}class eu{constructor(e,t,r,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new eu(r,t,We(),We(),We())}}class Qh{constructor(e,t,r,o){this.be=e,this.removedTargetIds=t,this.key=r,this.De=o}}class oT{constructor(e,t){this.targetId=e,this.Ce=t}}class lT{constructor(e,t,r=kn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Vb{constructor(){this.ve=0,this.Fe=Pb(),this.Me=kn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=We(),t=We(),r=We();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Ce(38017,{changeType:c})}})),new eu(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Pb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,st(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ZR{constructor(e){this.Ge=e,this.ze=new Map,this.je=er(),this.Je=Ph(),this.He=Ph(),this.Ye=new Lt(Je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,r=e.Ce.count,o=this.ot(t);if(o){const c=o.target;if(zg(c))if(r===0){const u=new xe(c.path);this.et(t,u,Tn.newNoDocument(u,Ie.min()))}else st(r===1,20013,{expectedCount:r});else{const u=this._t(t);if(u!==r){const m=this.ut(e),g=m?this.ct(m,e,u):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=t;let u,m;try{u=aa(r).toUint8Array()}catch(g){if(g instanceof DE)return Wo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new xp(u,o,c)}catch(g){return Wo(g instanceof dc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let o=0;return r.forEach((c=>{const u=this.Ge.ht(),m=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(t,c,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((c,u)=>{const m=this.ot(u);if(m){if(c.current&&zg(m.target)){const g=new xe(m.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,Tn.newNoDocument(g,e))}c.Be&&(t.set(u,c.ke()),c.qe())}}));let r=We();this.He.forEach(((c,u)=>{let m=!0;u.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const o=new zf(e,t,this.Ye,this.je,r);return this.je=er(),this.Je=Ph(),this.He=Ph(),this.Ye=new Lt(Je),o}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Vb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new gn(Je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new gn(Je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||_e("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Vb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ph(){return new Lt(xe.comparator)}function Pb(){return new Lt(xe.comparator)}const eC={asc:"ASCENDING",desc:"DESCENDING"},tC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nC={and:"AND",or:"OR"};class iC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hg(i,e){return i.useProto3Json||Jc(e)?e:{value:e}}function df(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function sC(i,e){return df(i,e.toTimestamp())}function wi(i){return st(!!i,49232),Ie.fromTimestamp((function(t){const r=ra(t);return new It(r.seconds,r.nanos)})(i))}function Rp(i,e){return Fg(i,e).canonicalString()}function Fg(i,e){const t=(function(o){return new Tt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?t:t.child(e)}function uT(i){const e=Tt.fromString(i);return st(pT(e),10190,{key:e.toString()}),e}function mf(i,e){return Rp(i.databaseId,e.path)}function Sc(i,e){const t=uT(e);if(t.get(1)!==i.databaseId.projectId)throw new pe(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new pe(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new xe(fT(t))}function hT(i,e){return Rp(i.databaseId,e)}function rC(i){const e=uT(i);return e.length===4?Tt.emptyPath():fT(e)}function Gg(i){return new Tt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function fT(i){return st(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Lb(i,e,t){return{name:mf(i,e),fields:t.value.mapValue.fields}}function aC(i,e){return"found"in e?(function(r,o){st(!!o.found,43571),o.found.name,o.found.updateTime;const c=Sc(r,o.found.name),u=wi(o.found.updateTime),m=o.found.createTime?wi(o.found.createTime):Ie.min(),g=new Wn({mapValue:{fields:o.found.fields}});return Tn.newFoundDocument(c,u,m,g)})(i,e):"missing"in e?(function(r,o){st(!!o.missing,3894),st(!!o.readTime,22933);const c=Sc(r,o.missing),u=wi(o.readTime);return Tn.newNoDocument(c,u)})(i,e):Ce(7234,{result:e})}function oC(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ce(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(p,_){return p.useProto3Json?(st(_===void 0||typeof _=="string",58123),kn.fromBase64String(_||"")):(st(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),kn.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),u=e.targetChange.cause,m=u&&(function(p){const _=p.code===void 0?oe.UNKNOWN:aT(p.code);return new pe(_,p.message||"")})(u);t=new lT(r,o,c,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Sc(i,r.document.name),c=wi(r.document.updateTime),u=r.document.createTime?wi(r.document.createTime):Ie.min(),m=new Wn({mapValue:{fields:r.document.fields}}),g=Tn.newFoundDocument(o,c,u,m),p=r.targetIds||[],_=r.removedTargetIds||[];t=new Qh(p,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Sc(i,r.document),c=r.readTime?wi(r.readTime):Ie.min(),u=Tn.newNoDocument(o,c),m=r.removedTargetIds||[];t=new Qh([],m,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Sc(i,r.document),c=r.removedTargetIds||[];t=new Qh([],c,o,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,u=new XR(o,c),m=r.targetId;t=new oT(m,u)}}return t}function dT(i,e){let t;if(e instanceof Zc)t={update:Lb(i,e.key,e.value)};else if(e instanceof Sp)t={delete:mf(i,e.key)};else if(e instanceof fa)t={update:Lb(i,e.key,e.data),updateMask:pC(e.fieldMask)};else{if(!(e instanceof sT))return Ce(16599,{Vt:e.type});t={verify:mf(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(c,u){const m=u.transform;if(m instanceof hf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Uc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof zc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof ff)return{fieldPath:u.field.canonicalString(),increment:m.Ae};throw Ce(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:sC(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ce(27497)})(i,e.precondition)),t}function lC(i,e){return i&&i.length>0?(st(e!==void 0,14353),i.map((t=>(function(o,c){let u=o.updateTime?wi(o.updateTime):wi(c);return u.isEqual(Ie.min())&&(u=wi(c)),new GR(u,o.transformResults||[])})(t,e)))):[]}function cC(i,e){return{documents:[hT(i,e.path)]}}function uC(i,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=hT(i,o);const c=(function(p){if(p.length!==0)return gT(ss.create(p,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const u=(function(p){if(p.length!==0)return p.map((_=>(function(w){return{field:zo(w.field),direction:dC(w.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const m=Hg(i,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function hC(i){let e=rC(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){st(r===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let c=[];t.where&&(c=(function(E){const w=mT(E);return w instanceof ss&&BE(w)?w.getFilters():[w]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((w=>(function(D){return new uf(Bo(D.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(w)))})(t.orderBy));let m=null;t.limit&&(m=(function(E){let w;return w=typeof E=="object"?E.value:E,Jc(w)?null:w})(t.limit));let g=null;t.startAt&&(g=(function(E){const w=!!E.before,R=E.values||[];return new cf(R,w)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const w=!E.before,R=E.values||[];return new cf(R,w)})(t.endAt)),OR(e,o,u,c,m,"F",g,p)}function fC(i,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function mT(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Bo(t.unaryFilter.field);return ln.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Bo(t.unaryFilter.field);return ln.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Bo(t.unaryFilter.field);return ln.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Bo(t.unaryFilter.field);return ln.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(i):i.fieldFilter!==void 0?(function(t){return ln.create(Bo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return ss.create(t.compositeFilter.filters.map((r=>mT(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(i):Ce(30097,{filter:i})}function dC(i){return eC[i]}function mC(i){return tC[i]}function gC(i){return nC[i]}function zo(i){return{fieldPath:i.canonicalString()}}function Bo(i){return Mn.fromServerFormat(i.fieldPath)}function gT(i){return i instanceof ln?(function(t){if(t.op==="=="){if(Sb(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NAN"}};if(wb(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Sb(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NAN"}};if(wb(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(t.field),op:mC(t.op),value:t.value}}})(i):i instanceof ss?(function(t){const r=t.getFilters().map((o=>gT(o)));return r.length===1?r[0]:{compositeFilter:{op:gC(t.op),filters:r}}})(i):Ce(54877,{filter:i})}function pC(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function pT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class Yr{constructor(e,t,r,o,c=Ie.min(),u=Ie.min(),m=kn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class yC{constructor(e){this.yt=e}}function vC(i){const e=hC({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?qg(e,e.limit,"L"):e}class _C{constructor(){this.Cn=new bC}addToCollectionParentIndex(e,t){return this.Cn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(sa.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(sa.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class bC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new gn(Tt.comparator),c=!o.has(r);return this.index[t]=o.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new gn(Tt.comparator)).toArray()}}const jb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yT=41943040;class hi{static withCacheSize(e){return new hi(e,hi.DEFAULT_COLLECTION_PERCENTILE,hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}hi.DEFAULT_COLLECTION_PERCENTILE=10,hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hi.DEFAULT=new hi(yT,hi.DEFAULT_COLLECTION_PERCENTILE,hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hi.DISABLED=new hi(-1,0,0);class nl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new nl(0)}static cr(){return new nl(-1)}}const Ub="LruGarbageCollector",EC=1048576;function zb([i,e],[t,r]){const o=Je(i,t);return o===0?Je(e,r):o}class TC{constructor(e){this.Ir=e,this.buffer=new gn(zb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();zb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class wC{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){_e(Ub,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){hl(t)?_e(Ub,"Ignoring IndexedDB error during garbage collection: ",t):await ul(t)}await this.Vr(3e5)}))}}class SC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(kf.ce);const r=new TC(t);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(jb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,o,c,u,m,g,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,u=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(r=E,m=Date.now(),this.removeTargets(e,r,t)))).next((E=>(c=E,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(p=Date.now(),jo()<=Xe.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${o} in `+(m-u)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${E} documents in `+(p-g)+`ms
Total Duration: ${p-_}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:E}))))}}function AC(i,e){return new SC(i,e)}class xC{constructor(){this.changes=new Xa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class RC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class CC{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&wc(r.mutation,o,Ti.empty(),It.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,We()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=We()){const o=qa();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((c=>{let u=fc();return c.forEach(((m,g)=>{u=u.insert(m,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=qa();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,We())))}populateOverlays(e,t,r){const o=[];return r.forEach((c=>{t.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((u,m)=>{t.set(u,m)}))}))}computeViews(e,t,r,o){let c=er();const u=Tc(),m=(function(){return Tc()})();return t.forEach(((g,p)=>{const _=r.get(p.key);o.has(p.key)&&(_===void 0||_.mutation instanceof fa)?c=c.insert(p.key,p):_!==void 0?(u.set(p.key,_.mutation.getFieldMask()),wc(_.mutation,p,_.mutation.getFieldMask(),It.now())):u.set(p.key,Ti.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((p,_)=>u.set(p,_))),t.forEach(((p,_)=>m.set(p,new RC(_,u.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,t){const r=Tc();let o=new Lt(((u,m)=>u-m)),c=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const m of u)m.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let _=r.get(g)||Ti.empty();_=m.applyToLocalView(p,_),r.set(g,_);const E=(o.get(m.batchId)||We()).add(g);o=o.insert(m.batchId,E)}))})).next((()=>{const u=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,_=g.value,E=XE();_.forEach((w=>{if(!c.has(w)){const R=nT(t.get(w),r.get(w));R!==null&&E.set(w,R),c=c.add(w)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,E))}return ue.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(u){return xe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):GE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((c=>{const u=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-c.size):ue.resolve(qa());let m=Vc,g=c;return u.next((p=>ue.forEach(p,((_,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),c.get(_)?ue.resolve():this.remoteDocumentCache.getEntry(e,_).next((w=>{g=g.insert(_,w)}))))).next((()=>this.populateOverlays(e,p,c))).next((()=>this.computeViews(e,g,p,We()))).next((_=>({batchId:m,changes:YE(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next((r=>{let o=fc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const c=t.collectionGroup;let u=fc();return this.indexManager.getCollectionParents(e,c).next((m=>ue.forEach(m,(g=>{const p=(function(E,w){return new Wc(w,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,p,r,o).next((_=>{_.forEach(((E,w)=>{u=u.insert(E,w)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,c,o)))).next((u=>{c.forEach(((g,p)=>{const _=p.getKey();u.get(_)===null&&(u=u.insert(_,Tn.newInvalidDocument(_)))}));let m=fc();return u.forEach(((g,p)=>{const _=c.get(g);_!==void 0&&wc(_.mutation,p,Ti.empty(),It.now()),Lf(t,p)&&(m=m.insert(g,p))})),m}))}}class NC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ue.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:wi(o.createTime)}})(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:vC(o.bundledQuery),readTime:wi(o.readTime)}})(t)),ue.resolve()}}class IC{constructor(){this.overlays=new Lt(xe.comparator),this.qr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=qa();return ue.forEach(t,(o=>this.getOverlay(e,o).next((c=>{c!==null&&r.set(o,c)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,c)=>{this.St(e,t,c)})),ue.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const o=qa(),c=t.length+1,u=new xe(t.child("")),m=this.overlays.getIteratorFrom(u);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===c&&g.largestBatchId>r&&o.set(g.getKey(),g)}return ue.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let c=new Lt(((p,_)=>p-_));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let _=c.get(p.largestBatchId);_===null&&(_=qa(),c=c.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const m=qa(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,_)=>m.set(p,_))),!(m.size()>=o)););return ue.resolve(m)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new YR(t,r));let c=this.qr.get(t);c===void 0&&(c=We(),this.qr.set(t,c)),this.qr.set(t,c.add(r.key))}}class DC{constructor(){this.sessionToken=kn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}class Cp{constructor(){this.Qr=new gn(bn.$r),this.Ur=new gn(bn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new bn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new bn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new xe(new Tt([])),r=new bn(t,e),o=new bn(t,e+1),c=[];return this.Ur.forEachInRange([r,o],(u=>{this.Gr(u),c.push(u.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new xe(new Tt([])),r=new bn(t,e),o=new bn(t,e+1);let c=We();return this.Ur.forEachInRange([r,o],(u=>{c=c.add(u.key)})),c}containsKey(e){const t=new bn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class bn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return xe.comparator(e.key,t.key)||Je(e.Yr,t.Yr)}static Kr(e,t){return Je(e.Yr,t.Yr)||xe.comparator(e.key,t.key)}}class OC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new gn(bn.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new QR(c,t,r,o);this.mutationQueue.push(u);for(const m of o)this.Zr=this.Zr.add(new bn(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ue.resolve(u)}lookupMutationBatch(e,t){return ue.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ei(r),c=o<0?0:o;return ue.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?yp:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new bn(t,0),o=new bn(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,o],(u=>{const m=this.Xr(u.Yr);c.push(m)})),ue.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gn(Je);return t.forEach((o=>{const c=new bn(o,0),u=new bn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,u],(m=>{r=r.add(m.Yr)}))})),ue.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let c=r;xe.isDocumentKey(c)||(c=c.child(""));const u=new bn(new xe(c),0);let m=new gn(Je);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),u),ue.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){st(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ue.forEach(t.mutations,(o=>{const c=new bn(o.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new bn(t,0),o=this.Zr.firstAfterOrEqual(r);return ue.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class MC{constructor(e){this.ri=e,this.docs=(function(){return new Lt(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),c=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let r=er();return t.forEach((o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():Tn.newInvalidDocument(o))})),ue.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let c=er();const u=t.path,m=new xe(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:_}}=g.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||uR(cR(_),r)<=0||(o.has(_.key)||Lf(t,_))&&(c=c.insert(_.key,_.mutableCopy()))}return ue.resolve(c)}getAllFromCollectionGroup(e,t,r,o){Ce(9500)}ii(e,t){return ue.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new kC(this)}getSize(e){return ue.resolve(this.size)}}class kC extends xC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),ue.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class VC{constructor(e){this.persistence=e,this.si=new Xa((t=>bp(t)),Ep),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.oi=0,this._i=new Cp,this.targetCount=0,this.ai=nl.ur()}forEachTarget(e,t){return this.si.forEach(((r,o)=>t(o))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ue.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new nl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Pr(t),ue.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let o=0;const c=[];return this.si.forEach(((u,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.si.delete(u),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ue.waitFor(c).next((()=>o))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach((u=>{c.push(o.markPotentiallyOrphaned(e,u))})),ue.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this._i.containsKey(t))}}class vT{constructor(e,t){this.ui={},this.overlays={},this.ci=new kf(0),this.li=!1,this.li=!0,this.hi=new DC,this.referenceDelegate=e(this),this.Pi=new VC(this),this.indexManager=new _C,this.remoteDocumentCache=(function(o){return new MC(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new yC(t),this.Ii=new NC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new IC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new OC(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){_e("MemoryPersistence","Starting transaction:",e);const o=new PC(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,t){return ue.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class PC extends fR{constructor(e){super(),this.currentSequenceNumber=e}}class Np{constructor(e){this.persistence=e,this.Ri=new Cp,this.Vi=null}static mi(e){return new Np(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(r=>{const o=xe.fromPath(r);return this.gi(e,o).next((c=>{c||t.removeEntry(o,Ie.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ue.or([()=>ue.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class gf{constructor(e,t){this.persistence=e,this.pi=new Xa((r=>gR(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=AC(this,t)}static mi(e,t){return new gf(e,t)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ue.forEach(this.pi,((r,o)=>this.br(e,r,o).next((c=>c?ue.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((m=>{m||(r++,c.removeEntry(u,Ie.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Gh(e.data.value)),t}br(e,t,r){return ue.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ue.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ip{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=o}static As(e,t){let r=We(),o=We();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Ip(e,t.fromCache,r,o)}}class LC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class jC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Mx()?8:dR(qn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,o){const c={result:null};return this.ys(e,t).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ws(e,t,o,r).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new LC;return this.Ss(e,t,u).next((m=>{if(c.result=m,this.Vs)return this.bs(e,t,u,m.size)}))})).next((()=>c.result))}bs(e,t,r,o){return r.documentReadCount<this.fs?(jo()<=Xe.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",Uo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(jo()<=Xe.DEBUG&&_e("QueryEngine","Query:",Uo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(jo()<=Xe.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",Uo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Es(t))):ue.resolve())}ys(e,t){if(Cb(t))return ue.resolve(null);let r=Es(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=qg(t,null,"F"),r=Es(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const u=We(...c);return this.ps.getDocuments(e,u).next((m=>this.indexManager.getMinOffset(e,r).next((g=>{const p=this.Ds(t,m);return this.Cs(t,p,u,g.readTime)?this.ys(e,qg(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,r,o){return Cb(t)||o.isEqual(Ie.min())?ue.resolve(null):this.ps.getDocuments(e,r).next((c=>{const u=this.Ds(t,c);return this.Cs(t,u,r,o)?ue.resolve(null):(jo()<=Xe.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Uo(t)),this.vs(e,u,t,lR(o,Vc)).next((m=>m)))}))}Ds(e,t){let r=new gn(KE(e));return t.forEach(((o,c)=>{Lf(e,c)&&(r=r.add(c))})),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,t,r){return jo()<=Xe.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",Uo(t)),this.ps.getDocumentsMatchingQuery(e,t,sa.min(),r)}vs(e,t,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((c=>(t.forEach((u=>{c=c.insert(u.key,u)})),c)))}}const Dp="LocalStore",UC=3e8;class zC{constructor(e,t,r,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Lt(Je),this.xs=new Xa((c=>bp(c)),Ep),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function BC(i,e,t,r){return new zC(i,e,t,r)}async function _T(i,e){const t=Ve(i);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((c=>(o=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((c=>{const u=[],m=[];let g=We();for(const p of o){u.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}for(const p of c){m.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(r,g).next((p=>({Ls:p,removedBatchIds:u,addedBatchIds:m})))}))}))}function qC(i,e){const t=Ve(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,_){const E=p.batch,w=E.keys();let R=ue.resolve();return w.forEach((D=>{R=R.next((()=>_.getEntry(g,D))).next((P=>{const I=p.docVersions.get(D);st(I!==null,48541),P.version.compareTo(I)<0&&(E.applyToRemoteDocument(P,p),P.isValidDocument()&&(P.setReadTime(p.commitVersion),_.addEntry(P)))}))})),R.next((()=>m.mutationQueue.removeMutationBatch(g,E)))})(t,r,e,c).next((()=>c.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=We();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function bT(i){const e=Ve(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function HC(i,e){const t=Ve(i),r=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((_,E)=>{const w=o.get(E);if(!w)return;m.push(t.Pi.removeMatchingKeys(c,_.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(c,_.addedDocuments,E))));let R=w.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(E)!==null?R=R.withResumeToken(kn.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,r)),o=o.insert(E,R),(function(P,I,U){return P.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=UC?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(w,R,_)&&m.push(t.Pi.updateTargetData(c,R))}));let g=er(),p=We();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,_))})),m.push(FC(c,u,e.documentUpdates).next((_=>{g=_.ks,p=_.qs}))),!r.isEqual(Ie.min())){const _=t.Pi.getLastRemoteSnapshotVersion(c).next((E=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));m.push(_)}return ue.waitFor(m).next((()=>u.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,p))).next((()=>g))})).then((c=>(t.Ms=o,c)))}function FC(i,e,t){let r=We(),o=We();return t.forEach((c=>r=r.add(c))),e.getEntries(i,r).next((c=>{let u=er();return t.forEach(((m,g)=>{const p=c.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ie.min())?(e.removeEntry(m,g.readTime),u=u.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),u=u.insert(m,g)):_e(Dp,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:u,qs:o}}))}function GC(i,e){const t=Ve(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=yp),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function $C(i,e){const t=Ve(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.Pi.getTargetData(r,e).next((c=>c?(o=c,ue.resolve(o)):t.Pi.allocateTargetId(r).next((u=>(o=new Yr(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function $g(i,e,t){const r=Ve(i),o=r.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",c,(u=>r.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!hl(u))throw u;_e(Dp,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function Bb(i,e,t){const r=Ve(i);let o=Ie.min(),c=We();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,p,_){const E=Ve(g),w=E.xs.get(_);return w!==void 0?ue.resolve(E.Ms.get(w)):E.Pi.getTargetData(p,_)})(r,u,Es(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(u,m.targetId).next((g=>{c=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(u,e,t?o:Ie.min(),t?c:We()))).next((m=>(KC(r,kR(e),m),{documents:m,Qs:c})))))}function KC(i,e,t){let r=i.Os.get(e)||Ie.min();t.forEach(((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),i.Os.set(e,r)}class qb{constructor(){this.activeTargetIds=zR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QC{constructor(){this.Mo=new qb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new qb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class YC{Oo(e){}shutdown(){}}const Hb="ConnectivityMonitor";class Fb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){_e(Hb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){_e(Hb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Lh=null;function Kg(){return Lh===null?Lh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Lh++,"0x"+Lh.toString(16)}const fg="RestConnection",XC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===of?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,t,r,o,c){const u=Kg(),m=this.zo(e,t.toUriEncodedString());_e(fg,`Sending RPC '${e}' ${u}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:p}=new URL(m),_=ol(p);return this.Jo(e,m,g,r,_).then((E=>(_e(fg,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw Wo(fg,`RPC '${e}' ${u} failed with error: `,E,"url: ",m,"request:",r),E}))}Ho(e,t,r,o,c,u){return this.Go(e,t,r,o,c)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+cl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,c)=>e[c]=o)),r&&r.headers.forEach(((o,c)=>e[c]=o))}zo(e,t){const r=XC[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class WC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Un="WebChannelConnection";class ZC extends JC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,c){const u=Kg();return new Promise(((m,g)=>{const p=new bE;p.setWithCredentials(!0),p.listenOnce(EE.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Fh.NO_ERROR:const E=p.getResponseJson();_e(Un,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),m(E);break;case Fh.TIMEOUT:_e(Un,`RPC '${e}' ${u} timed out`),g(new pe(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Fh.HTTP_ERROR:const w=p.getStatus();if(_e(Un,`RPC '${e}' ${u} failed with status:`,w,"response text:",p.getResponseText()),w>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const D=R?.error;if(D&&D.status&&D.message){const P=(function(U){const F=U.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(F)>=0?F:oe.UNKNOWN})(D.status);g(new pe(P,D.message))}else g(new pe(oe.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new pe(oe.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{_e(Un,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(o);_e(Un,`RPC '${e}' ${u} sending request:`,o),p.send(t,"POST",_,r,15)}))}T_(e,t,r){const o=Kg(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=SE(),m=wE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const _=c.join("");_e(Un,`Creating RPC '${e}' stream ${o}: ${_}`,g);const E=u.createWebChannel(_,g);this.I_(E);let w=!1,R=!1;const D=new WC({Yo:I=>{R?_e(Un,`Not sending because RPC '${e}' stream ${o} is closed:`,I):(w||(_e(Un,`Opening RPC '${e}' stream ${o} transport.`),E.open(),w=!0),_e(Un,`RPC '${e}' stream ${o} sending:`,I),E.send(I))},Zo:()=>E.close()}),P=(I,U,F)=>{I.listen(U,(G=>{try{F(G)}catch(ce){setTimeout((()=>{throw ce}),0)}}))};return P(E,hc.EventType.OPEN,(()=>{R||(_e(Un,`RPC '${e}' stream ${o} transport opened.`),D.o_())})),P(E,hc.EventType.CLOSE,(()=>{R||(R=!0,_e(Un,`RPC '${e}' stream ${o} transport closed`),D.a_(),this.E_(E))})),P(E,hc.EventType.ERROR,(I=>{R||(R=!0,Wo(Un,`RPC '${e}' stream ${o} transport errored. Name:`,I.name,"Message:",I.message),D.a_(new pe(oe.UNAVAILABLE,"The operation could not be completed")))})),P(E,hc.EventType.MESSAGE,(I=>{if(!R){const U=I.data[0];st(!!U,16349);const F=U,G=F?.error||F[0]?.error;if(G){_e(Un,`RPC '${e}' stream ${o} received error:`,G);const ce=G.status;let ee=(function(A){const N=on[A];if(N!==void 0)return aT(N)})(ce),J=G.message;ee===void 0&&(ee=oe.INTERNAL,J="Unknown error status: "+ce+" with message "+G.message),R=!0,D.a_(new pe(ee,J)),E.close()}else _e(Un,`RPC '${e}' stream ${o} received:`,U),D.u_(U)}})),P(m,TE.STAT_EVENT,(I=>{I.stat===Vg.PROXY?_e(Un,`RPC '${e}' stream ${o} detected buffering proxy`):I.stat===Vg.NOPROXY&&_e(Un,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{D.__()}),0),D}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function dg(){return typeof document<"u"?document:null}function Bf(i){return new iC(i,!0)}class Op{constructor(e,t,r=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-r);o>0&&_e("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Gb="PersistentStream";class ET{constructor(e,t,r,o,c,u,m,g){this.Mi=e,this.S_=r,this.b_=o,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Op(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(Zs(t.toString()),Zs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===t&&this.G_(r,o)}),(r=>{e((()=>{const o=new pe(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return _e(Gb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(_e(Gb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class eN extends ET{constructor(e,t,r,o,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,u),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=oC(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Ie.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?Ie.min():u.readTime?wi(u.readTime):Ie.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Gg(this.serializer),t.addTarget=(function(c,u){let m;const g=u.target;if(m=zg(g)?{documents:cC(c,g)}:{query:uC(c,g).ft},m.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){m.resumeToken=cT(c,u.resumeToken);const p=Hg(c,u.expectedCount);p!==null&&(m.expectedCount=p)}else if(u.snapshotVersion.compareTo(Ie.min())>0){m.readTime=df(c,u.snapshotVersion.toTimestamp());const p=Hg(c,u.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const r=fC(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Gg(this.serializer),t.removeTarget=e,this.q_(t)}}class tN extends ET{constructor(e,t,r,o,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,u),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return st(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){st(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=lC(e.writeResults,e.commitTime),r=wi(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Gg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>dT(this.serializer,r)))};this.q_(t)}}class nN{}class iN extends nN{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new pe(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Go(e,Fg(t,r),o,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(oe.UNKNOWN,c.toString())}))}Ho(e,t,r,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,m])=>this.connection.Ho(e,Fg(t,r),o,u,m,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(oe.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class sN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Zs(t),this.aa=!1):_e("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Qa="RemoteStore";class rN{constructor(e,t,r,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((u=>{r.enqueueAndForget((async()=>{Ja(this)&&(_e(Qa,"Restarting streams for network reachability change."),await(async function(g){const p=Ve(g);p.Ea.add(4),await tu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await qf(p)})(this))}))})),this.Ra=new sN(r,o)}}async function qf(i){if(Ja(i))for(const e of i.da)await e(!0)}async function tu(i){for(const e of i.da)await e(!1)}function TT(i,e){const t=Ve(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Pp(t)?Vp(t):fl(t).O_()&&kp(t,e))}function Mp(i,e){const t=Ve(i),r=fl(t);t.Ia.delete(e),r.O_()&&wT(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ja(t)&&t.Ra.set("Unknown"))}function kp(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fl(i).Y_(e)}function wT(i,e){i.Va.Ue(e),fl(i).Z_(e)}function Vp(i){i.Va=new ZR({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),fl(i).start(),i.Ra.ua()}function Pp(i){return Ja(i)&&!fl(i).x_()&&i.Ia.size>0}function Ja(i){return Ve(i).Ea.size===0}function ST(i){i.Va=void 0}async function aN(i){i.Ra.set("Online")}async function oN(i){i.Ia.forEach(((e,t)=>{kp(i,e)}))}async function lN(i,e){ST(i),Pp(i)?(i.Ra.ha(e),Vp(i)):i.Ra.set("Unknown")}async function cN(i,e,t){if(i.Ra.set("Online"),e instanceof lT&&e.state===2&&e.cause)try{await(async function(o,c){const u=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,u),o.Ia.delete(m),o.Va.removeTarget(m))})(i,e)}catch(r){_e(Qa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await pf(i,r)}else if(e instanceof Qh?i.Va.Ze(e):e instanceof oT?i.Va.st(e):i.Va.tt(e),!t.isEqual(Ie.min()))try{const r=await bT(i.localStore);t.compareTo(r)>=0&&await(function(c,u){const m=c.Va.Tt(u);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const _=c.Ia.get(p);_&&c.Ia.set(p,_.withResumeToken(g.resumeToken,u))}})),m.targetMismatches.forEach(((g,p)=>{const _=c.Ia.get(g);if(!_)return;c.Ia.set(g,_.withResumeToken(kn.EMPTY_BYTE_STRING,_.snapshotVersion)),wT(c,g);const E=new Yr(_.target,g,p,_.sequenceNumber);kp(c,E)})),c.remoteSyncer.applyRemoteEvent(m)})(i,t)}catch(r){_e(Qa,"Failed to raise snapshot:",r),await pf(i,r)}}async function pf(i,e,t){if(!hl(e))throw e;i.Ea.add(1),await tu(i),i.Ra.set("Offline"),t||(t=()=>bT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{_e(Qa,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await qf(i)}))}function AT(i,e){return e().catch((t=>pf(i,t,e)))}async function Hf(i){const e=Ve(i),t=la(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:yp;for(;uN(e);)try{const o=await GC(e.localStore,r);if(o===null){e.Ta.length===0&&t.L_();break}r=o.batchId,hN(e,o)}catch(o){await pf(e,o)}xT(e)&&RT(e)}function uN(i){return Ja(i)&&i.Ta.length<10}function hN(i,e){i.Ta.push(e);const t=la(i);t.O_()&&t.X_&&t.ea(e.mutations)}function xT(i){return Ja(i)&&!la(i).x_()&&i.Ta.length>0}function RT(i){la(i).start()}async function fN(i){la(i).ra()}async function dN(i){const e=la(i);for(const t of i.Ta)e.ea(t.mutations)}async function mN(i,e,t){const r=i.Ta.shift(),o=Ap.from(r,e,t);await AT(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Hf(i)}async function gN(i,e){e&&la(i).X_&&await(async function(r,o){if((function(u){return rT(u)&&u!==oe.ABORTED})(o.code)){const c=r.Ta.shift();la(r).B_(),await AT(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Hf(r)}})(i,e),xT(i)&&RT(i)}async function $b(i,e){const t=Ve(i);t.asyncQueue.verifyOperationInProgress(),_e(Qa,"RemoteStore received new credentials");const r=Ja(t);t.Ea.add(3),await tu(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await qf(t)}async function pN(i,e){const t=Ve(i);e?(t.Ea.delete(2),await qf(t)):e||(t.Ea.add(2),await tu(t),t.Ra.set("Unknown"))}function fl(i){return i.ma||(i.ma=(function(t,r,o){const c=Ve(t);return c.sa(),new eN(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:aN.bind(null,i),t_:oN.bind(null,i),r_:lN.bind(null,i),H_:cN.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Pp(i)?Vp(i):i.Ra.set("Unknown")):(await i.ma.stop(),ST(i))}))),i.ma}function la(i){return i.fa||(i.fa=(function(t,r,o){const c=Ve(t);return c.sa(),new tN(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:fN.bind(null,i),r_:gN.bind(null,i),ta:dN.bind(null,i),na:mN.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Hf(i)):(await i.fa.stop(),i.Ta.length>0&&(_e(Qa,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class Lp{constructor(e,t,r,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new ea,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,c){const u=Date.now()+r,m=new Lp(e,t,u,o,c);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jp(i,e){if(Zs("AsyncQueue",`${e}: ${i}`),hl(i))return new pe(oe.UNAVAILABLE,`${e}: ${i}`);throw i}class Fo{static emptySet(e){return new Fo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||xe.comparator(t.key,r.key):(t,r)=>xe.comparator(t.key,r.key),this.keyedMap=fc(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Fo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Kb{constructor(){this.ga=new Lt(xe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class il{constructor(e,t,r,o,c,u,m,g,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,o,c){const u=[];return t.forEach((m=>{u.push({type:0,doc:m})})),new il(e,t,Fo.emptySet(t),u,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class yN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class vN{constructor(){this.queries=Qb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=Ve(t),c=o.queries;o.queries=Qb(),c.forEach(((u,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new pe(oe.ABORTED,"Firestore shutting down"))}}function Qb(){return new Xa((i=>$E(i)),Pf)}async function _N(i,e){const t=Ve(i);let r=3;const o=e.query;let c=t.queries.get(o);c?!c.ba()&&e.Da()&&(r=2):(c=new yN,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await t.onListen(o,!0);break;case 1:c.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const m=jp(u,`Initialization of query '${Uo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Up(t)}async function bN(i,e){const t=Ve(i),r=e.query;let o=3;const c=t.queries.get(r);if(c){const u=c.Sa.indexOf(e);u>=0&&(c.Sa.splice(u,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function EN(i,e){const t=Ve(i);let r=!1;for(const o of e){const c=o.query,u=t.queries.get(c);if(u){for(const m of u.Sa)m.Fa(o)&&(r=!0);u.wa=o}}r&&Up(t)}function TN(i,e,t){const r=Ve(i),o=r.queries.get(e);if(o)for(const c of o.Sa)c.onError(t);r.queries.delete(e)}function Up(i){i.Ca.forEach((e=>{e.next()}))}var Qg,Yb;(Yb=Qg||(Qg={})).Ma="default",Yb.Cache="cache";class wN{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new il(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qg.Cache}}class CT{constructor(e){this.key=e}}class NT{constructor(e){this.key=e}}class SN{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=We(),this.mutatedKeys=We(),this.eu=KE(e),this.tu=new Fo(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Kb,o=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,u=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const w=o.get(_),R=Lf(this.query,E)?E:null,D=!!w&&this.mutatedKeys.has(w.key),P=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let I=!1;w&&R?w.data.isEqual(R.data)?D!==P&&(r.track({type:3,doc:R}),I=!0):this.su(w,R)||(r.track({type:2,doc:R}),I=!0,(g&&this.eu(R,g)>0||p&&this.eu(R,p)<0)&&(m=!0)):!w&&R?(r.track({type:0,doc:R}),I=!0):w&&!R&&(r.track({type:1,doc:w}),I=!0,(g||p)&&(m=!0)),I&&(R?(u=u.add(R),c=P?c.add(_):c.delete(_)):(u=u.delete(_),c=c.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),c=c.delete(_.key),r.track({type:1,doc:_})}return{tu:u,iu:r,Cs:m,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,E)=>(function(R,D){const P=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:I})}};return P(R)-P(D)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(r),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,u.length!==0||p?{snapshot:new il(this.query,e.tu,c,u,e.mutatedKeys,g===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Kb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=We(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new NT(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new CT(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=We();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return il.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const zp="SyncEngine";class AN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class xN{constructor(e){this.key=e,this.hu=!1}}class RN{constructor(e,t,r,o,c,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Xa((m=>$E(m)),Pf),this.Iu=new Map,this.Eu=new Set,this.du=new Lt(xe.comparator),this.Au=new Map,this.Ru=new Cp,this.Vu={},this.mu=new Map,this.fu=nl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function CN(i,e,t=!0){const r=VT(i);let o;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await IT(r,e,t,!0),o}async function NN(i,e){const t=VT(i);await IT(t,e,!0,!1)}async function IT(i,e,t,r){const o=await $C(i.localStore,Es(e)),c=o.targetId,u=i.sharedClientState.addLocalQueryTarget(c,t);let m;return r&&(m=await IN(i,e,c,u==="current",o.resumeToken)),i.isPrimaryClient&&t&&TT(i.remoteStore,o),m}async function IN(i,e,t,r,o){i.pu=(E,w,R)=>(async function(P,I,U,F){let G=I.view.ru(U);G.Cs&&(G=await Bb(P.localStore,I.query,!1).then((({documents:C})=>I.view.ru(C,G))));const ce=F&&F.targetChanges.get(I.targetId),ee=F&&F.targetMismatches.get(I.targetId)!=null,J=I.view.applyChanges(G,P.isPrimaryClient,ce,ee);return Jb(P,I.targetId,J.au),J.snapshot})(i,E,w,R);const c=await Bb(i.localStore,e,!0),u=new SN(e,c.Qs),m=u.ru(c.documents),g=eu.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",o),p=u.applyChanges(m,i.isPrimaryClient,g);Jb(i,t,p.au);const _=new AN(e,t,u);return i.Tu.set(e,_),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),p.snapshot}async function DN(i,e,t){const r=Ve(i),o=r.Tu.get(e),c=r.Iu.get(o.targetId);if(c.length>1)return r.Iu.set(o.targetId,c.filter((u=>!Pf(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await $g(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&Mp(r.remoteStore,o.targetId),Yg(r,o.targetId)})).catch(ul)):(Yg(r,o.targetId),await $g(r.localStore,o.targetId,!0))}async function ON(i,e){const t=Ve(i),r=t.Tu.get(e),o=t.Iu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Mp(t.remoteStore,r.targetId))}async function MN(i,e,t){const r=zN(i);try{const o=await(function(u,m){const g=Ve(u),p=It.now(),_=m.reduce(((R,D)=>R.add(D.key)),We());let E,w;return g.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let D=er(),P=We();return g.Ns.getEntries(R,_).next((I=>{D=I,D.forEach(((U,F)=>{F.isValidDocument()||(P=P.add(U))}))})).next((()=>g.localDocuments.getOverlayedDocuments(R,D))).next((I=>{E=I;const U=[];for(const F of m){const G=KR(F,E.get(F.key).overlayedDocument);G!=null&&U.push(new fa(F.key,G,jE(G.value.mapValue),Zn.exists(!0)))}return g.mutationQueue.addMutationBatch(R,p,U,m)})).next((I=>{w=I;const U=I.applyToLocalDocumentSet(E,P);return g.documentOverlayCache.saveOverlays(R,I.batchId,U)}))})).then((()=>({batchId:w.batchId,changes:YE(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(u,m,g){let p=u.Vu[u.currentUser.toKey()];p||(p=new Lt(Je)),p=p.insert(m,g),u.Vu[u.currentUser.toKey()]=p})(r,o.batchId,t),await nu(r,o.changes),await Hf(r.remoteStore)}catch(o){const c=jp(o,"Failed to persist write");t.reject(c)}}async function DT(i,e){const t=Ve(i);try{const r=await HC(t.localStore,e);e.targetChanges.forEach(((o,c)=>{const u=t.Au.get(c);u&&(st(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?st(u.hu,14607):o.removedDocuments.size>0&&(st(u.hu,42227),u.hu=!1))})),await nu(t,r,e)}catch(r){await ul(r)}}function Xb(i,e,t){const r=Ve(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Tu.forEach(((c,u)=>{const m=u.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(u,m){const g=Ve(u);g.onlineState=m;let p=!1;g.queries.forEach(((_,E)=>{for(const w of E.Sa)w.va(m)&&(p=!0)})),p&&Up(g)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kN(i,e,t){const r=Ve(i);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Au.get(e),c=o&&o.key;if(c){let u=new Lt(xe.comparator);u=u.insert(c,Tn.newNoDocument(c,Ie.min()));const m=We().add(c),g=new zf(Ie.min(),new Map,new Lt(Je),u,m);await DT(r,g),r.du=r.du.remove(c),r.Au.delete(e),Bp(r)}else await $g(r.localStore,e,!1).then((()=>Yg(r,e,t))).catch(ul)}async function VN(i,e){const t=Ve(i),r=e.batch.batchId;try{const o=await qC(t.localStore,e);MT(t,r,null),OT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await nu(t,o)}catch(o){await ul(o)}}async function PN(i,e,t){const r=Ve(i);try{const o=await(function(u,m){const g=Ve(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return g.mutationQueue.lookupMutationBatch(p,m).next((E=>(st(E!==null,37113),_=E.keys(),g.mutationQueue.removeMutationBatch(p,E)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,_,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>g.localDocuments.getDocuments(p,_)))}))})(r.localStore,e);MT(r,e,t),OT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await nu(r,o)}catch(o){await ul(o)}}function OT(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function MT(i,e,t){const r=Ve(i);let o=r.Vu[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function Yg(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),t&&i.Pu.yu(r,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||kT(i,r)}))}function kT(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(Mp(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),Bp(i))}function Jb(i,e,t){for(const r of t)r instanceof CT?(i.Ru.addReference(r.key,e),LN(i,r)):r instanceof NT?(_e(zp,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||kT(i,r.key)):Ce(19791,{wu:r})}function LN(i,e){const t=e.key,r=t.path.canonicalString();i.du.get(t)||i.Eu.has(r)||(_e(zp,"New document in limbo: "+t),i.Eu.add(r),Bp(i))}function Bp(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new xe(Tt.fromString(e)),r=i.fu.next();i.Au.set(r,new xN(t)),i.du=i.du.insert(t,r),TT(i.remoteStore,new Yr(Es(Tp(t.path)),r,"TargetPurposeLimboResolution",kf.ce))}}async function nu(i,e,t){const r=Ve(i),o=[],c=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{u.push(r.pu(g,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const _=p?!p.fromCache:t?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,_?"current":"not-current")}if(p){o.push(p);const _=Ip.As(g.targetId,p);c.push(_)}})))})),await Promise.all(u),r.Pu.H_(o),await(async function(g,p){const _=Ve(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ue.forEach(p,(w=>ue.forEach(w.Es,(R=>_.persistence.referenceDelegate.addReference(E,w.targetId,R))).next((()=>ue.forEach(w.ds,(R=>_.persistence.referenceDelegate.removeReference(E,w.targetId,R)))))))))}catch(E){if(!hl(E))throw E;_e(Dp,"Failed to update sequence numbers: "+E)}for(const E of p){const w=E.targetId;if(!E.fromCache){const R=_.Ms.get(w),D=R.snapshotVersion,P=R.withLastLimboFreeSnapshotVersion(D);_.Ms=_.Ms.insert(w,P)}}})(r.localStore,c))}async function jN(i,e){const t=Ve(i);if(!t.currentUser.isEqual(e)){_e(zp,"User change. New user:",e.toKey());const r=await _T(t.localStore,e);t.currentUser=e,(function(c,u){c.mu.forEach((m=>{m.forEach((g=>{g.reject(new pe(oe.CANCELLED,u))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await nu(t,r.Ls)}}function UN(i,e){const t=Ve(i),r=t.Au.get(e);if(r&&r.hu)return We().add(r.key);{let o=We();const c=t.Iu.get(e);if(!c)return o;for(const u of c){const m=t.Tu.get(u);o=o.unionWith(m.view.nu)}return o}}function VT(i){const e=Ve(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=DT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kN.bind(null,e),e.Pu.H_=EN.bind(null,e.eventManager),e.Pu.yu=TN.bind(null,e.eventManager),e}function zN(i){const e=Ve(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PN.bind(null,e),e}class yf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return BC(this.persistence,new jC,e.initialUser,this.serializer)}Cu(e){return new vT(Np.mi,this.serializer)}Du(e){return new QC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yf.provider={build:()=>new yf};class BN extends yf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){st(this.persistence.referenceDelegate instanceof gf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new wC(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?hi.withCacheSize(this.cacheSizeBytes):hi.DEFAULT;return new vT((r=>gf.mi(r,t)),this.serializer)}}class Xg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jN.bind(null,this.syncEngine),await pN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new vN})()}createDatastore(e){const t=Bf(e.databaseInfo.databaseId),r=(function(c){return new ZC(c)})(e.databaseInfo);return(function(c,u,m,g){return new iN(c,u,m,g)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,c,u,m){return new rN(r,o,c,u,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>Xb(this.syncEngine,t,0)),(function(){return Fb.v()?new Fb:new YC})())}createSyncEngine(e,t){return(function(o,c,u,m,g,p,_){const E=new RN(o,c,u,m,g,p);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ve(t);_e(Qa,"RemoteStore shutting down."),r.Ea.add(5),await tu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Xg.provider={build:()=>new Xg};class qN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Zs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class HN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new pe(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,c){const u=Ve(o),m={documents:c.map((E=>mf(u.serializer,E)))},g=await u.Ho("BatchGetDocuments",u.serializer.databaseId,Tt.emptyPath(),m,c.length),p=new Map;g.forEach((E=>{const w=aC(u.serializer,E);p.set(w.key.toString(),w)}));const _=[];return c.forEach((E=>{const w=p.get(E.toString());st(!!w,55234,{key:E}),_.push(w)})),_})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Sp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const o=xe.fromPath(r);this.mutations.push(new sT(o,this.precondition(o)))})),await(async function(r,o){const c=Ve(r),u={writes:o.map((m=>dT(c.serializer,m)))};await c.Go("Commit",c.serializer.databaseId,Tt.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ce(50498,{Gu:e.constructor.name});t=Ie.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new pe(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ie.min())?Zn.exists(!1):Zn.updateTime(t):Zn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ie.min()))throw new pe(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zn.updateTime(t)}return Zn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class FN{constructor(e,t,r,o,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=c,this.zu=r.maxAttempts,this.M_=new Op(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new HN(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((o=>{this.Yu(o)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Jc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!rT(t)}return!1}}const ca="FirestoreClient";class GN{constructor(e,t,r,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Bn.UNAUTHENTICATED,this.clientId=pp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async u=>{_e(ca,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(_e(ca,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ea;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=jp(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function mg(i,e){i.asyncQueue.verifyOperationInProgress(),_e(ca,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await _T(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Wb(i,e){i.asyncQueue.verifyOperationInProgress();const t=await $N(i);_e(ca,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>$b(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>$b(e.remoteStore,o))),i._onlineComponents=e}async function $N(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){_e(ca,"Using user provided OfflineComponentProvider");try{await mg(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===oe.FAILED_PRECONDITION||o.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Wo("Error using user provided cache. Falling back to memory cache: "+t),await mg(i,new yf)}}else _e(ca,"Using default OfflineComponentProvider"),await mg(i,new BN(void 0));return i._offlineComponents}async function qp(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(_e(ca,"Using user provided OnlineComponentProvider"),await Wb(i,i._uninitializedComponentsProvider._online)):(_e(ca,"Using default OnlineComponentProvider"),await Wb(i,new Xg))),i._onlineComponents}function KN(i){return qp(i).then((e=>e.syncEngine))}function QN(i){return qp(i).then((e=>e.datastore))}async function Zb(i){const e=await qp(i),t=e.eventManager;return t.onListen=CN.bind(null,e.syncEngine),t.onUnlisten=DN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=NN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ON.bind(null,e.syncEngine),t}function PT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const e1=new Map;const LT="firestore.googleapis.com",t1=!0;class n1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=LT,this.ssl=t1}else this.host=e.host,this.ssl=e.ssl??t1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<EC)throw new pe(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ff{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new J2;switch(r.type){case"firstParty":return new tR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=e1.get(t);r&&(_e("ComponentProvider","Removing Datastore"),e1.delete(t),r.terminate())})(this),Promise.resolve()}}function YN(i,e,t,r={}){i=Js(i,Ff);const o=ol(e),c=i._getSettings(),u={...c,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${t}`;o&&(hE(`https://${m}`),fE("Firestore",!0)),c.host!==LT&&c.host!==m&&Wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:m,ssl:o,emulatorOptions:r};if(!Ga(g,u)&&(i._setSettings(g),r.mockUserToken)){let p,_;if(typeof r.mockUserToken=="string")p=r.mockUserToken,_=Bn.MOCK_USER;else{p=Sx(r.mockUserToken,i._app?.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new pe(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Bn(E)}i._authCredentials=new W2(new xE(p,_))}}class dl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new dl(this.firestore,e,this._query)}}class qt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ta(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Xc(t,qt._jsonSchema))return new qt(e,r||null,new xe(Tt.fromString(t.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:cn("string",qt._jsonSchemaVersion),referencePath:cn("string")};class ta extends dl{constructor(e,t,r){super(e,t,Tp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new xe(e))}withConverter(e){return new ta(this.firestore,e,this._path)}}function Xn(i,e,...t){if(i=wn(i),RE("collection","path",e),i instanceof Ff){const r=Tt.fromString(e,...t);return mb(r),new ta(i,null,r)}{if(!(i instanceof qt||i instanceof ta))throw new pe(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Tt.fromString(e,...t));return mb(r),new ta(i.firestore,null,r)}}function Jn(i,e,...t){if(i=wn(i),arguments.length===1&&(e=pp.newId()),RE("doc","path",e),i instanceof Ff){const r=Tt.fromString(e,...t);return db(r),new qt(i,null,new xe(r))}{if(!(i instanceof qt||i instanceof ta))throw new pe(oe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Tt.fromString(e,...t));return db(r),new qt(i.firestore,i instanceof ta?i.converter:null,new xe(r))}}const i1="AsyncQueue";class s1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Op(this,"async_queue_retry"),this._c=()=>{const r=dg();r&&_e(i1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=dg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=dg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ea;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!hl(e))throw e;_e(i1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Zs("INTERNAL UNHANDLED ERROR: ",r1(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Lp.createAndSchedule(this,e,t,r,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Ce(47125,{Pc:r1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function r1(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}function a1(i){return(function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const c of r)if(c in o&&typeof o[c]=="function")return!0;return!1})(i,["next","error","complete"])}class sl extends Ff{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new s1,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new s1(e),this._firestoreClient=void 0,await e}}}function XN(i,e){const t=typeof i=="object"?i:pE(),r=typeof i=="string"?i:of,o=mp(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=Tx("firestore");c&&YN(o,...c)}return o}function Hp(i){if(i._terminated)throw new pe(oe.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||JN(i),i._firestoreClient}function JN(i){const e=i._freezeSettings(),t=(function(o,c,u,m){return new vR(o,c,u,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,PT(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new GN(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(i._componentsProvider))}class Ei{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ei(kn.fromBase64String(e))}catch(t){throw new pe(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ei(kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ei._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xc(e,Ei._jsonSchema))return Ei.fromBase64String(e.bytes)}}Ei._jsonSchemaVersion="firestore/bytes/1.0",Ei._jsonSchema={type:cn("string",Ei._jsonSchemaVersion),bytes:cn("string")};class iu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Fp{constructor(e){this._methodName=e}}class Ts{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ts._jsonSchemaVersion}}static fromJSON(e){if(Xc(e,Ts._jsonSchema))return new Ts(e.latitude,e.longitude)}}Ts._jsonSchemaVersion="firestore/geoPoint/1.0",Ts._jsonSchema={type:cn("string",Ts._jsonSchemaVersion),latitude:cn("number"),longitude:cn("number")};class ws{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ws._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xc(e,ws._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ws(e.vectorValues);throw new pe(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ws._jsonSchemaVersion="firestore/vectorValue/1.0",ws._jsonSchema={type:cn("string",ws._jsonSchemaVersion),vectorValues:cn("object")};const WN=/^__.*__$/;class ZN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new fa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zc(e,this.data,t,this.fieldTransforms)}}class jT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new fa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function UT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:i})}}class Gp{constructor(e,t,r,o,c,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Gp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(UT(this.Ac)&&WN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class eI{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Bf(e)}Cc(e,t,r,o=!1){return new Gp({Ac:e,methodName:t,Dc:r,path:Mn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gf(i){const e=i._freezeSettings(),t=Bf(i._databaseId);return new eI(i._databaseId,!!e.ignoreUndefinedProperties,t)}function zT(i,e,t,r,o,c={}){const u=i.Cc(c.merge||c.mergeFields?2:0,e,t,o);$p("Data must be an object, but it was:",u,r);const m=HT(r,u);let g,p;if(c.merge)g=new Ti(u.fieldMask),p=u.fieldTransforms;else if(c.mergeFields){const _=[];for(const E of c.mergeFields){const w=Jg(e,E,t);if(!u.contains(w))throw new pe(oe.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);GT(_,w)||_.push(w)}g=new Ti(_),p=u.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,p=u.fieldTransforms;return new ZN(new Wn(m),g,p)}class $f extends Fp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $f}}function BT(i,e,t,r){const o=i.Cc(1,e,t);$p("Data must be an object, but it was:",o,r);const c=[],u=Wn.empty();ha(r,((g,p)=>{const _=Kp(e,g,t);p=wn(p);const E=o.yc(_);if(p instanceof $f)c.push(_);else{const w=su(p,E);w!=null&&(c.push(_),u.set(_,w))}}));const m=new Ti(c);return new jT(u,m,o.fieldTransforms)}function qT(i,e,t,r,o,c){const u=i.Cc(1,e,t),m=[Jg(e,r,t)],g=[o];if(c.length%2!=0)throw new pe(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<c.length;w+=2)m.push(Jg(e,c[w])),g.push(c[w+1]);const p=[],_=Wn.empty();for(let w=m.length-1;w>=0;--w)if(!GT(p,m[w])){const R=m[w];let D=g[w];D=wn(D);const P=u.yc(R);if(D instanceof $f)p.push(R);else{const I=su(D,P);I!=null&&(p.push(R),_.set(R,I))}}const E=new Ti(p);return new jT(_,E,u.fieldTransforms)}function tI(i,e,t,r=!1){return su(t,i.Cc(r?4:3,e))}function su(i,e){if(FT(i=wn(i)))return $p("Unsupported field value:",e,i),HT(i,e);if(i instanceof Fp)return(function(r,o){if(!UT(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const c=[];let u=0;for(const m of r){let g=su(m,o.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),u++}return{arrayValue:{values:c}}})(i,e)}return(function(r,o){if((r=wn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return BR(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=It.fromDate(r);return{timestampValue:df(o.serializer,c)}}if(r instanceof It){const c=new It(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:df(o.serializer,c)}}if(r instanceof Ts)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ei)return{bytesValue:cT(o.serializer,r._byteString)};if(r instanceof qt){const c=o.databaseId,u=r.firestore._databaseId;if(!u.isEqual(c))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Rp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof ws)return(function(u,m){return{mapValue:{fields:{[PE]:{stringValue:LE},[lf]:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return wp(m.serializer,p)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Mf(r)}`)})(i,e)}function HT(i,e){const t={};return IE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ha(i,((r,o)=>{const c=su(o,e.mc(r));c!=null&&(t[r]=c)})),{mapValue:{fields:t}}}function FT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof It||i instanceof Ts||i instanceof Ei||i instanceof qt||i instanceof Fp||i instanceof ws)}function $p(i,e,t){if(!FT(t)||!CE(t)){const r=Mf(t);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function Jg(i,e,t){if((e=wn(e))instanceof iu)return e._internalPath;if(typeof e=="string")return Kp(i,e);throw vf("Field path arguments must be of type string or ",i,!1,void 0,t)}const nI=new RegExp("[~\\*/\\[\\]]");function Kp(i,e,t){if(e.search(nI)>=0)throw vf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new iu(...e.split("."))._internalPath}catch{throw vf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function vf(i,e,t,r,o){const c=r&&!r.isEmpty(),u=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||u)&&(g+=" (found",c&&(g+=` in field ${r}`),u&&(g+=` in document ${o}`),g+=")"),new pe(oe.INVALID_ARGUMENT,m+i+g)}function GT(i,e){return i.some((t=>t.isEqual(e)))}class _f{constructor(e,t,r,o,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Qp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class iI extends _f{data(){return super.data()}}function Qp(i,e){return typeof e=="string"?Kp(i,e):e instanceof iu?e._internalPath:e._delegate._internalPath}function sI(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new pe(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yp{}class rI extends Yp{}function aI(i,e,...t){let r=[];e instanceof Yp&&r.push(e),r=r.concat(t),(function(c){const u=c.filter((g=>g instanceof Xp)).length,m=c.filter((g=>g instanceof Kf)).length;if(u>1||u>0&&m>0)throw new pe(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)i=o._apply(i);return i}class Kf extends rI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Kf(e,t,r)}_apply(e){const t=this._parse(e);return $T(e._query,t),new dl(e.firestore,e.converter,Bg(e._query,t))}_parse(e){const t=Gf(e.firestore);return(function(c,u,m,g,p,_,E){let w;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new pe(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){l1(E,_);const D=[];for(const P of E)D.push(o1(g,c,P));w={arrayValue:{values:D}}}else w=o1(g,c,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||l1(E,_),w=tI(m,u,E,_==="in"||_==="not-in");return ln.create(p,_,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function oI(i,e,t){const r=e,o=Qp("where",i);return Kf._create(o,r,t)}class Xp extends Yp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Xp(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:ss.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,c){let u=o;const m=c.getFlattenedFilters();for(const g of m)$T(u,g),u=Bg(u,g)})(e._query,t),new dl(e.firestore,e.converter,Bg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function o1(i,e,t){if(typeof(t=wn(t))=="string"){if(t==="")throw new pe(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GE(e)&&t.indexOf("/")!==-1)throw new pe(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Tt.fromString(t));if(!xe.isDocumentKey(r))throw new pe(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tb(i,new xe(r))}if(t instanceof qt)return Tb(i,t._key);throw new pe(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mf(t)}.`)}function l1(i,e){if(!Array.isArray(i)||i.length===0)throw new pe(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $T(i,e){const t=(function(o,c){for(const u of o)for(const m of u.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new pe(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class KT{convertValue(e,t="none"){switch(oa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(aa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ha(e,((o,c)=>{r[o]=this.convertValue(c,t)})),r}convertVectorValue(e){const t=e.fields?.[lf].arrayValue?.values?.map((r=>Xt(r.doubleValue)));return new ws(t)}convertGeoPoint(e){return new Ts(Xt(e.latitude),Xt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Vf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Pc(e));default:return null}}convertTimestamp(e){const t=ra(e);return new It(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Tt.fromString(e);st(pT(r),9688,{name:e});const o=new Lc(r.get(1),r.get(3)),c=new xe(r.popFirst(5));return o.isEqual(t)||Zs(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function QT(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class lI extends KT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ei(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}class qo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class na extends _f{constructor(e,t,r,o,c,u){super(e,t,r,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Yh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Qp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=na._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}na._jsonSchemaVersion="firestore/documentSnapshot/1.0",na._jsonSchema={type:cn("string",na._jsonSchemaVersion),bundleSource:cn("string","DocumentSnapshot"),bundleName:cn("string"),bundle:cn("string")};class Yh extends na{data(e={}){return super.data(e)}}class Go{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new qo(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Yh(this._firestore,this._userDataWriter,r.key,r,new qo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((m=>{const g=new Yh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new qo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const g=new Yh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new qo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,_=-1;return m.type!==0&&(p=u.indexOf(m.doc.key),u=u.delete(m.doc.key)),m.type!==1&&(u=u.add(m.doc),_=u.indexOf(m.doc.key)),{type:cI(m.type),doc:g,oldIndex:p,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Go._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function cI(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:i})}}Go._jsonSchemaVersion="firestore/querySnapshot/1.0",Go._jsonSchema={type:cn("string",Go._jsonSchemaVersion),bundleSource:cn("string","QuerySnapshot"),bundleName:cn("string"),bundle:cn("string")};class Jp extends KT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ei(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}function Wp(i,e,t){i=Js(i,qt);const r=Js(i.firestore,sl),o=QT(i.converter,e,t);return YT(r,[zT(Gf(r),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,Zn.none())])}function Ac(i,e,t,...r){i=Js(i,qt);const o=Js(i.firestore,sl),c=Gf(o);let u;return u=typeof(e=wn(e))=="string"||e instanceof iu?qT(c,"updateDoc",i._key,e,t,r):BT(c,"updateDoc",i._key,e),YT(o,[u.toMutation(i._key,Zn.exists(!0))])}function Zp(i,...e){i=wn(i);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||a1(e[r])||(t=e[r++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(a1(e[r])){const g=e[r];e[r]=g.next?.bind(g),e[r+1]=g.error?.bind(g),e[r+2]=g.complete?.bind(g)}let c,u,m;if(i instanceof qt)u=Js(i.firestore,sl),m=Tp(i._key.path),c={next:g=>{e[r]&&e[r](uI(u,i,g))},error:e[r+1],complete:e[r+2]};else{const g=Js(i,dl);u=Js(g.firestore,sl),m=g._query;const p=new Jp(u);c={next:_=>{e[r]&&e[r](new Go(u,p,g,_))},error:e[r+1],complete:e[r+2]},sI(i._query)}return(function(p,_,E,w){const R=new qN(w),D=new wN(_,R,E);return p.asyncQueue.enqueueAndForget((async()=>_N(await Zb(p),D))),()=>{R.Nu(),p.asyncQueue.enqueueAndForget((async()=>bN(await Zb(p),D)))}})(Hp(u),m,o,c)}function YT(i,e){return(function(r,o){const c=new ea;return r.asyncQueue.enqueueAndForget((async()=>MN(await KN(r),o,c))),c.promise})(Hp(i),e)}function uI(i,e,t){const r=t.docs.get(e._key),o=new Jp(i);return new na(i,o,e._key,r,new qo(t.hasPendingWrites,t.fromCache),e.converter)}const hI={maxAttempts:5};function mc(i,e){if((i=wn(i)).firestore!==e)throw new pe(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class fI{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Gf(e)}get(e){const t=mc(e,this._firestore),r=new lI(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return Ce(24041);const c=o[0];if(c.isFoundDocument())return new _f(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new _f(this._firestore,r,t._key,null,t.converter);throw Ce(18433,{doc:c})}))}set(e,t,r){const o=mc(e,this._firestore),c=QT(o.converter,t,r),u=zT(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,r);return this._transaction.set(o._key,u),this}update(e,t,r,...o){const c=mc(e,this._firestore);let u;return u=typeof(t=wn(t))=="string"||t instanceof iu?qT(this._dataReader,"Transaction.update",c._key,t,r,o):BT(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,u),this}delete(e){const t=mc(e,this._firestore);return this._transaction.delete(t._key),this}}class dI extends fI{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=mc(e,this._firestore),r=new Jp(this._firestore);return super.get(e).then((o=>new na(this._firestore,r,t._key,o._document,new qo(!1,!1),t.converter)))}}function xc(i,e,t){i=Js(i,sl);const r={...hI,...t};return(function(c){if(c.maxAttempts<1)throw new pe(oe.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(c,u,m){const g=new ea;return c.asyncQueue.enqueueAndForget((async()=>{const p=await QN(c);new FN(c.asyncQueue,p,m,u,g).ju()})),g.promise})(Hp(i),(o=>e(new dI(i,o))),r)}(function(e,t=!0){(function(o){cl=o})(ll),Jo(new $a("firestore",((r,{instanceIdentifier:o,options:c})=>{const u=r.getProvider("app").getImmediate(),m=new sl(new Z2(r.getProvider("auth-internal")),new nR(u,r.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new pe(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lc(p.options.projectId,_)})(u,o),u);return c={useFetchStreams:t,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),Wr(cb,ub,e),Wr(cb,ub,"esm2020")})();function XT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mI=XT,JT=new Qc("auth","Firebase",XT());const bf=new fp("@firebase/auth");function gI(i,...e){bf.logLevel<=Xe.WARN&&bf.warn(`Auth (${ll}): ${i}`,...e)}function Xh(i,...e){bf.logLevel<=Xe.ERROR&&bf.error(`Auth (${ll}): ${i}`,...e)}function tr(i,...e){throw e0(i,...e)}function Ss(i,...e){return e0(i,...e)}function WT(i,e,t){const r={...mI(),[e]:t};return new Qc("auth","Firebase",r).create(e,{appName:i.name})}function ia(i){return WT(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function e0(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return JT.create(i,...e)}function Oe(i,e,...t){if(!i)throw e0(e,...t)}function Ys(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Xh(e),new Error(e)}function nr(i,e){i||Ys(e)}function Wg(){return typeof self<"u"&&self.location?.href||""}function pI(){return c1()==="http:"||c1()==="https:"}function c1(){return typeof self<"u"&&self.location?.protocol||null}function yI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pI()||Ix()||"connection"in navigator)?navigator.onLine:!0}function vI(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class ru{constructor(e,t){this.shortDelay=e,this.longDelay=t,nr(t>e,"Short delay should be less than long delay!"),this.isMobile=Rx()||Dx()}get(){return yI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function t0(i,e){nr(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class ZT{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _I={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const bI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],EI=new ru(3e4,6e4);function Qf(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function ml(i,e,t,r,o={}){return ew(i,o,async()=>{let c={},u={};r&&(e==="GET"?u=r:c={body:JSON.stringify(r)});const m=Yc({key:i.config.apiKey,...u}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const p={method:e,headers:g,...c};return Nx()||(p.referrerPolicy="no-referrer"),i.emulatorConfig&&ol(i.emulatorConfig.host)&&(p.credentials="include"),ZT.fetch()(await nw(i,i.config.apiHost,t,m),p)})}async function ew(i,e,t){i._canInitEmulator=!1;const r={..._I,...e};try{const o=new TI(i),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw jh(i,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const m=c.ok?u.errorMessage:u.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw jh(i,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw jh(i,"email-already-in-use",u);if(g==="USER_DISABLED")throw jh(i,"user-disabled",u);const _=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw WT(i,_,p);tr(i,_)}}catch(o){if(o instanceof sr)throw o;tr(i,"network-request-failed",{message:String(o)})}}async function tw(i,e,t,r,o={}){const c=await ml(i,e,t,r,o);return"mfaPendingCredential"in c&&tr(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function nw(i,e,t,r){const o=`${e}${t}?${r}`,c=i,u=c.config.emulator?t0(i.config,o):`${i.config.apiScheme}://${o}`;return bI.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}class TI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ss(this.auth,"network-request-failed")),EI.get())})}}function jh(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=Ss(i,e,r);return o.customData._tokenResponse=t,o}async function wI(i,e){return ml(i,"POST","/v1/accounts:delete",e)}async function Ef(i,e){return ml(i,"POST","/v1/accounts:lookup",e)}function Rc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SI(i,e=!1){const t=wn(i),r=await t.getIdToken(e),o=n0(r);Oe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,u=c?.sign_in_provider;return{claims:o,token:r,authTime:Rc(gg(o.auth_time)),issuedAtTime:Rc(gg(o.iat)),expirationTime:Rc(gg(o.exp)),signInProvider:u||null,signInSecondFactor:c?.sign_in_second_factor||null}}function gg(i){return Number(i)*1e3}function n0(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Xh("JWT malformed, contained fewer than 3 sections"),null;try{const o=oE(t);return o?JSON.parse(o):(Xh("Failed to decode base64 JWT payload"),null)}catch(o){return Xh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function u1(i){const e=n0(i);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Bc(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof sr&&AI(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function AI({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class xI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Zg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rc(this.lastLoginAt),this.creationTime=Rc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Tf(i){const e=i.auth,t=await i.getIdToken(),r=await Bc(i,Ef(e,{idToken:t}));Oe(r?.users.length,e,"internal-error");const o=r.users[0];i._notifyReloadListener(o);const c=o.providerUserInfo?.length?iw(o.providerUserInfo):[],u=CI(i.providerData,c),m=i.isAnonymous,g=!(i.email&&o.passwordHash)&&!u?.length,p=m?g:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Zg(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(i,_)}async function RI(i){const e=wn(i);await Tf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CI(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function iw(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function NI(i,e){const t=await ew(i,{},async()=>{const r=Yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,u=await nw(i,o,"/v1/token",`key=${c}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return i.emulatorConfig&&ol(i.emulatorConfig.host)&&(g.credentials="include"),ZT.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function II(i,e){return ml(i,"POST","/v2/accounts:revokeToken",Qf(i,e))}class $o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):u1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const t=u1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:c}=await NI(e,t);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:c}=t,u=new $o;return r&&(Oe(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),o&&(Oe(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),c&&(Oe(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $o,this.toJSON())}_performRefresh(){return Ys("not implemented")}}function zr(i,e){Oe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class is{constructor({uid:e,auth:t,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new xI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Zg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Bc(this,this.stsTokenManager.getToken(this.auth,e));return Oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return SI(this,e)}reload(){return RI(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new is({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Tf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ns(this.auth.app))return Promise.reject(ia(this.auth));const e=await this.getIdToken();return await Bc(this,wI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,u=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:w,isAnonymous:R,providerData:D,stsTokenManager:P}=t;Oe(E&&P,e,"internal-error");const I=$o.fromJSON(this.name,P);Oe(typeof E=="string",e,"internal-error"),zr(r,e.name),zr(o,e.name),Oe(typeof w=="boolean",e,"internal-error"),Oe(typeof R=="boolean",e,"internal-error"),zr(c,e.name),zr(u,e.name),zr(m,e.name),zr(g,e.name),zr(p,e.name),zr(_,e.name);const U=new is({uid:E,auth:e,email:o,emailVerified:w,displayName:r,isAnonymous:R,photoURL:u,phoneNumber:c,tenantId:m,stsTokenManager:I,createdAt:p,lastLoginAt:_});return D&&Array.isArray(D)&&(U.providerData=D.map(F=>({...F}))),g&&(U._redirectEventId=g),U}static async _fromIdTokenResponse(e,t,r=!1){const o=new $o;o.updateFromServerResponse(t);const c=new is({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Tf(c),c}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Oe(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?iw(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!c?.length,m=new $o;m.updateFromIdToken(r);const g=new is({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:u}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Zg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,p),g}}const h1=new Map;function Xs(i){nr(i instanceof Function,"Expected a class definition");let e=h1.get(i);return e?(nr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,h1.set(i,e),e)}class sw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}sw.type="NONE";const f1=sw;function Jh(i,e,t){return`firebase:${i}:${e}:${t}`}class Ko{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=Jh(this.userKey,o.apiKey,c),this.fullPersistenceKey=Jh("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ef(this.auth,{idToken:e}).catch(()=>{});return t?is._fromGetAccountInfoResponse(this.auth,t,e):null}return is._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ko(Xs(f1),e,r);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let c=o[0]||Xs(f1);const u=Jh(r,e.config.apiKey,e.name);let m=null;for(const p of t)try{const _=await p._get(u);if(_){let E;if(typeof _=="string"){const w=await Ef(e,{idToken:_}).catch(()=>{});if(!w)break;E=await is._fromGetAccountInfoResponse(e,w,_)}else E=is._fromJSON(e,_);p!==c&&(m=E),c=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Ko(c,e,r):(c=g[0],m&&await c._set(u,m.toJSON()),await Promise.all(t.map(async p=>{if(p!==c)try{await p._remove(u)}catch{}})),new Ko(c,e,r))}}function d1(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uw(e))return"Blackberry";if(hw(e))return"Webos";if(aw(e))return"Safari";if((e.includes("chrome/")||ow(e))&&!e.includes("edge/"))return"Chrome";if(cw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if(r?.length===2)return r[1]}return"Other"}function rw(i=qn()){return/firefox\//i.test(i)}function aw(i=qn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ow(i=qn()){return/crios\//i.test(i)}function lw(i=qn()){return/iemobile/i.test(i)}function cw(i=qn()){return/android/i.test(i)}function uw(i=qn()){return/blackberry/i.test(i)}function hw(i=qn()){return/webos/i.test(i)}function i0(i=qn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function DI(i=qn()){return i0(i)&&!!window.navigator?.standalone}function OI(){return Ox()&&document.documentMode===10}function fw(i=qn()){return i0(i)||cw(i)||hw(i)||uw(i)||/windows phone/i.test(i)||lw(i)}function dw(i,e=[]){let t;switch(i){case"Browser":t=d1(qn());break;case"Worker":t=`${d1(qn())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ll}/${r}`}class MI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=c=>new Promise((u,m)=>{try{const g=e(c);u(g)}catch(g){m(g)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function kI(i,e={}){return ml(i,"GET","/v2/passwordPolicy",Qf(i,e))}const VI=6;class PI{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??VI,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class LI{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new m1(this),this.idTokenSubscription=new m1(this),this.beforeStateQueue=new MI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ko.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ef(this,{idToken:e}),r=await is._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ns(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,u=r?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===u)&&m?.user&&(r=m.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Tf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ns(this.app))return Promise.reject(ia(this));const t=e?wn(e):null;return t&&Oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ns(this.app)?Promise.reject(ia(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ns(this.app)?Promise.reject(ia(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kI(this),t=new PI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await II(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xs(e)||this._popupRedirectResolver;Oe(t,this,"argument-error"),this.redirectPersistenceManager=await Ko.create(this,[Xs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let u=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(m,this,"internal-error"),m.then(()=>{u||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,r,o);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ns(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&gI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Yf(i){return wn(i)}class m1{constructor(e){this.auth=e,this.observer=null,this.addObserver=zx(t=>this.observer=t)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let s0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jI(i){s0=i}function UI(i){return s0.loadJS(i)}function zI(){return s0.gapiScript}function BI(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function qI(i,e){const t=mp(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(Ga(c,e??{}))return o;tr(o,"already-initialized")}return t.initialize({options:e})}function HI(i,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Xs);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function FI(i,e,t){const r=Yf(i);Oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=mw(e),{host:u,port:m}=GI(e),g=m===null?"":`:${m}`,p={url:`${c}//${u}${g}/`},_=Object.freeze({host:u,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Oe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Oe(Ga(p,r.config.emulator)&&Ga(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,ol(u)?(hE(`${c}//${u}${g}`),fE("Auth",!0)):$I()}function mw(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function GI(i){const e=mw(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:g1(r.substr(c.length+1))}}else{const[c,u]=r.split(":");return{host:c,port:g1(u)}}}function g1(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function $I(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class gw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ys("not implemented")}_getIdTokenResponse(e){return Ys("not implemented")}_linkToIdToken(e,t){return Ys("not implemented")}_getReauthenticationResolver(e){return Ys("not implemented")}}async function Qo(i,e){return tw(i,"POST","/v1/accounts:signInWithIdp",Qf(i,e))}const KI="http://localhost";class Ya extends gw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ya(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):tr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...c}=t;if(!r||!o)return null;const u=new Ya(r,o);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Qo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Qo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qo(e,t)}buildRequest(){const e={requestUri:KI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yc(t)}return e}}class pw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class au extends pw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Gr extends au{constructor(){super("facebook.com")}static credential(e){return Ya._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gr.credential(e.oauthAccessToken)}catch{return null}}}Gr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gr.PROVIDER_ID="facebook.com";class $r extends au{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ya._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return $r.credential(t,r)}catch{return null}}}$r.GOOGLE_SIGN_IN_METHOD="google.com";$r.PROVIDER_ID="google.com";class Kr extends au{constructor(){super("github.com")}static credential(e){return Ya._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kr.credential(e.oauthAccessToken)}catch{return null}}}Kr.GITHUB_SIGN_IN_METHOD="github.com";Kr.PROVIDER_ID="github.com";class Qr extends au{constructor(){super("twitter.com")}static credential(e,t){return Ya._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Qr.credential(t,r)}catch{return null}}}Qr.TWITTER_SIGN_IN_METHOD="twitter.com";Qr.PROVIDER_ID="twitter.com";async function QI(i,e){return tw(i,"POST","/v1/accounts:signUp",Qf(i,e))}class ua{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const c=await is._fromIdTokenResponse(e,r,o),u=p1(r);return new ua({user:c,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=p1(r);return new ua({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function p1(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}async function qc(i){if(ns(i.app))return Promise.reject(ia(i));const e=Yf(i);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new ua({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await QI(e,{returnSecureToken:!0}),r=await ua._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class wf extends sr{constructor(e,t,r,o){super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,wf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new wf(e,t,r,o)}}function yw(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?wf._fromErrorAndOperation(i,c,e,r):c})}async function YI(i,e,t=!1){const r=await Bc(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return ua._forOperation(i,"link",r)}async function XI(i,e,t=!1){const{auth:r}=i;if(ns(r.app))return Promise.reject(ia(r));const o="reauthenticate";try{const c=await Bc(i,yw(r,o,e,i),t);Oe(c.idToken,r,"internal-error");const u=n0(c.idToken);Oe(u,r,"internal-error");const{sub:m}=u;return Oe(i.uid===m,r,"user-mismatch"),ua._forOperation(i,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&tr(r,"user-mismatch"),c}}async function JI(i,e,t=!1){if(ns(i.app))return Promise.reject(ia(i));const r="signIn",o=await yw(i,r,e),c=await ua._fromIdTokenResponse(i,r,o);return t||await i._updateCurrentUser(c.user),c}function WI(i,e,t,r){return wn(i).onIdTokenChanged(e,t,r)}function ZI(i,e,t){return wn(i).beforeAuthStateChanged(e,t)}const Sf="__sak";class vw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sf,"1"),this.storage.removeItem(Sf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const eD=1e3,tD=10;class _w extends vw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,m,g)=>{this.notifyListeners(u,g)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},c=this.storage.getItem(r);OI()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,tD):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},eD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}_w.type="LOCAL";const nD=_w;class bw extends vw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}bw.type="SESSION";const Ew=bw;function iD(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Xf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new Xf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:c}=t.data,u=this.handlersMap[o];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(u).map(async p=>p(t.origin,c)),g=await iD(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xf.receivers=[];function r0(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}class sD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,u;return new Promise((m,g)=>{const p=r0("",20);o.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},r);u={messageChannel:o,onMessage(E){const w=E;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(_),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(w.data.response);break;default:clearTimeout(_),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function As(){return window}function rD(i){As().location.href=i}function Tw(){return typeof As().WorkerGlobalScope<"u"&&typeof As().importScripts=="function"}async function aD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oD(){return navigator?.serviceWorker?.controller||null}function lD(){return Tw()?self:null}const ww="firebaseLocalStorageDb",cD=1,Af="firebaseLocalStorage",Sw="fbase_key";class ou{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jf(i,e){return i.transaction([Af],e?"readwrite":"readonly").objectStore(Af)}function uD(){const i=indexedDB.deleteDatabase(ww);return new ou(i).toPromise()}function ep(){const i=indexedDB.open(ww,cD);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Af,{keyPath:Sw})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Af)?e(r):(r.close(),await uD(),e(await ep()))})})}async function y1(i,e,t){const r=Jf(i,!0).put({[Sw]:e,value:t});return new ou(r).toPromise()}async function hD(i,e){const t=Jf(i,!1).get(e),r=await new ou(t).toPromise();return r===void 0?null:r.value}function v1(i,e){const t=Jf(i,!0).delete(e);return new ou(t).toPromise()}const fD=800,dD=3;class Aw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ep(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>dD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Tw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xf._getInstance(lD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await aD(),!this.activeServiceWorker)return;this.sender=new sD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ep();return await y1(e,Sf,"1"),await v1(e,Sf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>y1(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>hD(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>v1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Jf(o,!1).getAll();return new ou(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Aw.type="LOCAL";const mD=Aw;new ru(3e4,6e4);function gD(i,e){return e?Xs(e):(Oe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class a0 extends gw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function pD(i){return JI(i.auth,new a0(i),i.bypassAuthState)}function yD(i){const{auth:e,user:t}=i;return Oe(t,e,"internal-error"),XI(t,new a0(i),i.bypassAuthState)}async function vD(i){const{auth:e,user:t}=i;return Oe(t,e,"internal-error"),YI(t,new a0(i),i.bypassAuthState)}class xw{constructor(e,t,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:c,error:u,type:m}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pD;case"linkViaPopup":case"linkViaRedirect":return vD;case"reauthViaPopup":case"reauthViaRedirect":return yD;default:tr(this.auth,"internal-error")}}resolve(e){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _D=new ru(2e3,1e4);class Ho extends xw{constructor(e,t,r,o,c){super(e,t,o,c),this.provider=r,this.authWindow=null,this.pollId=null,Ho.currentPopupAction&&Ho.currentPopupAction.cancel(),Ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){nr(this.filter.length===1,"Popup operations only handle one event");const e=r0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ss(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ss(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ss(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_D.get())};e()}}Ho.currentPopupAction=null;const bD="pendingRedirect",Wh=new Map;class ED extends xw{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Wh.get(this.auth._key());if(!e){try{const r=await TD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Wh.set(this.auth._key(),e)}return this.bypassAuthState||Wh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TD(i,e){const t=AD(e),r=SD(i);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function wD(i,e){Wh.set(i._key(),e)}function SD(i){return Xs(i._redirectPersistence)}function AD(i){return Jh(bD,i.config.apiKey,i.name)}async function xD(i,e,t=!1){if(ns(i.app))return Promise.reject(ia(i));const r=Yf(i),o=gD(r,e),u=await new ED(r,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}const RD=600*1e3;class CD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ND(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Rw(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ss(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RD&&this.cachedEventUids.clear(),this.cachedEventUids.has(_1(e))}saveEventToCache(e){this.cachedEventUids.add(_1(e)),this.lastProcessedEventTime=Date.now()}}function _1(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Rw({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function ND(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rw(i);default:return!1}}async function ID(i,e={}){return ml(i,"GET","/v1/projects",e)}const DD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OD=/^https?/;async function MD(i){if(i.config.emulator)return;const{authorizedDomains:e}=await ID(i);for(const t of e)try{if(kD(t))return}catch{}tr(i,"unauthorized-domain")}function kD(i){const e=Wg(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const u=new URL(i);return u.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!OD.test(t))return!1;if(DD.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const VD=new ru(3e4,6e4);function b1(){const i=As().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function PD(i){return new Promise((e,t)=>{function r(){b1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{b1(),t(Ss(i,"network-request-failed"))},timeout:VD.get()})}if(As().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(As().gapi?.load)r();else{const o=BI("iframefcb");return As()[o]=()=>{gapi.load?r():t(Ss(i,"network-request-failed"))},UI(`${zI()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw Zh=null,e})}let Zh=null;function LD(i){return Zh=Zh||PD(i),Zh}const jD=new ru(5e3,15e3),UD="__/auth/iframe",zD="emulator/auth/iframe",BD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HD(i){const e=i.config;Oe(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?t0(e,zD):`https://${i.config.authDomain}/${UD}`,r={apiKey:e.apiKey,appName:i.name,v:ll},o=qD.get(i.config.apiHost);o&&(r.eid=o);const c=i._getFrameworks();return c.length&&(r.fw=c.join(",")),`${t}?${Yc(r).slice(1)}`}async function FD(i){const e=await LD(i),t=As().gapi;return Oe(t,i,"internal-error"),e.open({where:document.body,url:HD(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BD,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const u=Ss(i,"network-request-failed"),m=As().setTimeout(()=>{c(u)},jD.get());function g(){As().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{c(u)})}))}const GD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$D=500,KD=600,QD="_blank",YD="http://localhost";class E1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XD(i,e,t,r=$D,o=KD){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...GD,width:r.toString(),height:o.toString(),top:c,left:u},p=qn().toLowerCase();t&&(m=ow(p)?QD:t),rw(p)&&(e=e||YD,g.scrollbars="yes");const _=Object.entries(g).reduce((w,[R,D])=>`${w}${R}=${D},`,"");if(DI(p)&&m!=="_self")return JD(e||"",m),new E1(null);const E=window.open(e||"",m,_);Oe(E,i,"popup-blocked");try{E.focus()}catch{}return new E1(E)}function JD(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const WD="__/auth/handler",ZD="emulator/auth/handler",e4=encodeURIComponent("fac");async function T1(i,e,t,r,o,c){Oe(i.config.authDomain,i,"auth-domain-config-required"),Oe(i.config.apiKey,i,"invalid-api-key");const u={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:ll,eventId:o};if(e instanceof pw){e.setDefaultLanguage(i.languageCode),u.providerId=e.providerId||"",Ux(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))u[_]=E}if(e instanceof au){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(u.scopes=_.join(","))}i.tenantId&&(u.tid=i.tenantId);const m=u;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const g=await i._getAppCheckToken(),p=g?`#${e4}=${encodeURIComponent(g)}`:"";return`${t4(i)}?${Yc(m).slice(1)}${p}`}function t4({config:i}){return i.emulator?t0(i,ZD):`https://${i.authDomain}/${WD}`}const pg="webStorageSupport";class n4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ew,this._completeRedirectFn=xD,this._overrideRedirectResult=wD}async _openPopup(e,t,r,o){nr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await T1(e,t,r,Wg(),o);return XD(e,c,r0())}async _openRedirect(e,t,r,o){await this._originValidation(e);const c=await T1(e,t,r,Wg(),o);return rD(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(nr(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await FD(e),r=new CD(e);return t.register("authEvent",o=>(Oe(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pg,{type:pg},o=>{const c=o?.[0]?.[pg];c!==void 0&&t(!!c),tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=MD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fw()||aw()||i0()}}const i4=n4;var w1="@firebase/auth",S1="1.12.0";class s4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function r4(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function a4(i){Jo(new $a("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:m}=r.options;Oe(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:u,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dw(i)},p=new LI(r,o,c,g);return HI(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Jo(new $a("auth-internal",e=>{const t=Yf(e.getProvider("auth").getImmediate());return(r=>new s4(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wr(w1,S1,r4(i)),Wr(w1,S1,"esm2020")}const o4=300,l4=uE("authIdTokenMaxAge")||o4;let A1=null;const c4=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>l4)return;const o=t?.token;A1!==o&&(A1=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Hc(i=pE()){const e=mp(i,"auth");if(e.isInitialized())return e.getImmediate();const t=qI(i,{popupRedirectResolver:i4,persistence:[mD,nD,Ew]}),r=uE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const u=c4(c.toString());ZI(t,u,()=>u(t.currentUser)),WI(t,m=>u(m))}}const o=lE("auth");return o&&FI(t,`http://${o}`),t}function u4(){return document.getElementsByTagName("head")?.[0]??document}jI({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const c=Ss("internal-error");c.customData=o,t(c)},r.type="text/javascript",r.charset="UTF-8",u4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});a4("Browser");var h4="firebase",f4="12.7.0";Wr(h4,f4,"app");const x1={apiKey:"AIzaSyB3ncjSdbTdaUqac5QvHon-Id5mCo3pByM",authDomain:"dragmate-af04d.firebaseapp.com",projectId:"dragmate-af04d",storageBucket:"dragmate-af04d.firebasestorage.app",messagingSenderId:"370425129874",appId:"1:370425129874:web:4c5c526a593e8fa45a6f4b"};let yg=null,Ke=null,ef=null,On=!1;try{Object.values(x1).every(Boolean)?(yg=sb().length?sb()[0]:gE(x1),Ke=XN(yg),ef=Hc(yg),On=!0,console.log(" Firebase initialized for DragMate")):console.warn(" DEMO MODE: Firebase env vars missing. Global features will run in local/demo mode only.")}catch(i){console.error(" Firebase initialization failed:",i)}const R1=3e4;async function d4(i){return i?i.currentUser?i.currentUser:(await qc(i)).user??null:null}async function C1(i,e){const t=Jn(i,"presence",e.uid);await Wp(t,{lastSeen:new Date,status:"online"},{merge:!0})}function m4(){const[i,e]=q.useState({count:null,loading:!0,error:null,isOnline:!1,isSupported:On&&!!Ke&&!!ef});return q.useEffect(()=>{if(!On||!Ke||!ef){e(g=>({...g,loading:!1,isSupported:!1}));return}const t=Ke,r=ef;let o=!1,c=null,u=null;return(async()=>{try{const g=await d4(r);if(!g||o)return;await C1(t,g),e(E=>({...E,isOnline:!0,isSupported:!0})),c=window.setInterval(()=>{C1(t,g).catch(E=>{console.error("Failed to update presence",E)})},R1/2);const p=new Date(Date.now()-R1),_=aI(Xn(t,"presence"),oI("lastSeen",">=",p));u=Zp(_,E=>{o||e(w=>({...w,count:E.size,loading:!1,error:null}))},E=>{console.error("Presence subscription error",E),!o&&e(w=>({...w,loading:!1,error:E.message??"Failed to subscribe to presence"}))})}catch(g){if(console.error("Presence initialization failed",g),o)return;e(p=>({...p,loading:!1,error:g?.message??"Presence initialization failed",isSupported:!1}))}})(),()=>{o=!0,c!==null&&window.clearInterval(c),u&&u()}},[]),i}const g4=({onCreateRoom:i,onJoinRoom:e,onStartLocal:t,isAuthLoading:r,onSelectGame:o})=>{const[c,u]=q.useState("game-select"),[m,g]=q.useState(""),[p,_]=q.useState(!1),{count:E,loading:w,isSupported:R}=m4(),D=async()=>{_(!0);try{await i()}finally{_(!1)}},P=()=>T.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-500",children:[T.jsx("h2",{className:"text-2xl font-bold text-white text-center",children:"Choose Your Game"}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[T.jsx("button",{onClick:()=>{o("chess"),u("mode-select")},className:"group relative w-full aspect-[4/3] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-indigo-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-indigo-500/20 overflow-hidden text-left p-6 flex flex-col justify-between",children:T.jsxs("div",{children:[T.jsx(Ng,{className:"w-10 h-10 text-indigo-400 mb-3 group-hover:scale-110 transition-transform"}),T.jsx("h3",{className:"text-2xl font-black text-white",children:"CHESS"}),T.jsx("p",{className:"text-slate-400 text-sm font-medium mt-1",children:"The classic strategy game."})]})}),T.jsxs("button",{onClick:()=>{o("backgammon"),u("mode-select")},className:"group relative w-full aspect-[4/3] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-emerald-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-emerald-500/20 overflow-hidden text-left p-6 flex flex-col justify-between",children:[T.jsx("div",{className:"absolute top-0 right-0 p-2 bg-emerald-500/10 text-emerald-300 rounded-bl-2xl text-[10px] font-black uppercase tracking-widest border-b border-l border-emerald-500/20",children:"New"}),T.jsxs("div",{children:[T.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 border-2 border-slate-600 mb-3 group-hover:border-emerald-500 transition-colors"}),T.jsx("h3",{className:"text-2xl font-black text-white",children:"TAVLA"}),T.jsx("p",{className:"text-slate-400 text-sm font-medium mt-1",children:"Classic Turkish Backgammon."})]})]}),T.jsxs("button",{onClick:()=>{o("okey"),u("mode-select")},className:"group relative w-full aspect-[4/3] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-amber-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-amber-500/20 overflow-hidden text-left p-6 flex flex-col justify-between",children:[T.jsx("div",{className:"absolute top-0 right-0 p-2 bg-amber-500/10 text-amber-300 rounded-bl-2xl text-[10px] font-black uppercase tracking-widest border-b border-l border-amber-500/20",children:"Top"}),T.jsxs("div",{children:[T.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 border-2 border-slate-600 mb-3 group-hover:border-amber-500 transition-colors"}),T.jsx("h3",{className:"text-2xl font-black text-white",children:"OKEY"}),T.jsx("p",{className:"text-slate-400 text-sm font-medium mt-1",children:"Turkish Rummy Style."})]})]})]})]}),I=()=>T.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-right-8 duration-500",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[T.jsx("button",{onClick:()=>u("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:T.jsx(vc,{size:20})}),T.jsx("h2",{className:"text-2xl font-bold text-white",children:"Select Threat Level"})]}),T.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[T.jsx("button",{onClick:()=>t("Easy"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-green-500/50 hover:bg-slate-800 transition-all",children:T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"p-3 rounded-full bg-green-500/10 text-green-400",children:T.jsx(rg,{size:20})}),T.jsxs("div",{className:"text-left",children:[T.jsx("div",{className:"text-lg font-bold text-white",children:"Easy"}),T.jsx("div",{className:"text-xs text-slate-500",children:"Casual play"})]})]})}),T.jsx("button",{onClick:()=>t("Normal"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-indigo-500/50 hover:bg-slate-800 transition-all",children:T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"p-3 rounded-full bg-indigo-500/10 text-indigo-400",children:T.jsx(rg,{size:20})}),T.jsxs("div",{className:"text-left",children:[T.jsx("div",{className:"text-lg font-bold text-white",children:"Normal"}),T.jsx("div",{className:"text-xs text-slate-500",children:"Balanced opponent"})]})]})}),T.jsx("button",{onClick:()=>t("Hard"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-red-500/50 hover:bg-slate-800 transition-all",children:T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"p-3 rounded-full bg-red-500/10 text-red-400",children:T.jsx(Ng,{size:20})}),T.jsxs("div",{className:"text-left",children:[T.jsx("div",{className:"text-lg font-bold text-white",children:"Hard"}),T.jsx("div",{className:"text-xs text-slate-500",children:"Ruthless tactics"})]})]})})]})]}),U=()=>T.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-right-8 duration-500",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[T.jsx("button",{onClick:()=>u("game-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:T.jsx(vc,{size:20})}),T.jsx("h2",{className:"text-2xl font-bold text-white",children:"Select Mode"})]}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[T.jsxs("button",{onClick:()=>u("difficulty-select"),className:"group flex flex-col items-center justify-center gap-4 p-8 bg-slate-800/50 rounded-2xl border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all",children:[T.jsx("div",{className:"p-4 rounded-full bg-emerald-500/10 text-emerald-400 group-hover:scale-110 transition-transform",children:T.jsx(rg,{size:32})}),T.jsxs("div",{className:"text-center",children:[T.jsx("div",{className:"text-xl font-bold text-white",children:"Single Player"}),T.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"Vs Computer"})]})]}),T.jsxs("button",{onClick:()=>u("connection"),className:"group flex flex-col items-center justify-center gap-4 p-8 bg-slate-800/50 rounded-2xl border border-slate-700 hover:border-indigo-500/50 hover:bg-slate-800 transition-all",children:[T.jsx("div",{className:"p-4 rounded-full bg-indigo-500/10 text-indigo-400 group-hover:scale-110 transition-transform",children:T.jsx(hp,{size:32})}),T.jsxs("div",{className:"text-center",children:[T.jsx("div",{className:"text-xl font-bold text-white",children:"Multiplayer"}),T.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"Online PvP"})]})]})]})]}),F=()=>T.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[T.jsx("button",{onClick:()=>u("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:T.jsx(vc,{size:20})}),T.jsx("h2",{className:"text-2xl font-bold text-white",children:"Multiplayer"})]}),T.jsxs("div",{className:"space-y-6",children:[T.jsxs("button",{onClick:D,disabled:p||r,className:"w-full btn-premium flex items-center justify-center gap-3 sm:gap-4 text-lg py-4 group disabled:opacity-50 disabled:cursor-not-allowed",children:[p||r?T.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"}):T.jsx(ox,{size:24,className:"transition-transform group-hover:rotate-90"}),T.jsx("span",{children:r?"Initializing...":p?"Creating Arena...":"Create New Room"})]}),T.jsxs("div",{className:"relative flex items-center gap-6",children:[T.jsx("div",{className:"flex-1 h-px bg-slate-800"}),T.jsx("span",{className:"text-slate-600 text-xs font-black uppercase tracking-[0.2em]",children:"OR JOIN"}),T.jsx("div",{className:"flex-1 h-px bg-slate-800"})]}),T.jsxs("div",{className:"flex gap-3",children:[T.jsx("input",{type:"text",placeholder:"Enter Room ID",value:m,onChange:G=>g(G.target.value),className:"flex-1 bg-slate-900/40 border border-slate-800/50 rounded-xl px-4 py-4 text-lg placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all"}),T.jsx("button",{onClick:()=>e(m),disabled:!m.trim()||r,className:"bg-slate-800 hover:bg-slate-700 text-white disabled:opacity-50 px-6 rounded-xl transition-all font-bold shadow-lg",children:T.jsx(ix,{size:24})})]})]})]});return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[85vh] gap-8 lg:gap-12 relative overflow-hidden px-4",children:[T.jsxs("div",{className:"text-center space-y-4 lg:space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-1000",children:[T.jsx("div",{className:"inline-flex items-center px-3 sm:px-4 py-1.5 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-400 text-xs sm:text-sm font-semibold tracking-wide",children:"PREMIUM MULTIPLAYER CHESS"}),T.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-8xl font-black tracking-tight bg-clip-text text-transparent bg-linear-to-b from-white via-indigo-100 to-indigo-400",children:"DragMate"})]}),T.jsxs("div",{className:"liquid-glass p-6 sm:p-8 w-full max-w-xl min-h-[400px] flex flex-col justify-center",children:[c==="game-select"&&P(),c==="mode-select"&&U(),c==="difficulty-select"&&I(),c==="connection"&&F()]}),T.jsx("div",{className:"flex items-center gap-10 text-slate-600 font-bold uppercase tracking-widest text-[10px] animate-in fade-in duration-1000 delay-500",children:T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${R?"bg-green-500":"bg-slate-600"}`}),R?`${w?"...":(E??0).toLocaleString()} Online`:"Demo Mode"]})})]})};function p4(i){return i!==null?{comment:i,variations:[]}:{variations:[]}}function y4(i,e,t,r,o){const c={move:i,variations:o};return e&&(c.suffix=e),t&&(c.nag=t),r!==null&&(c.comment=r),c}function v4(...i){const[e,...t]=i;let r=e;for(const o of t)o!==null&&(r.variations=[o,...o.variations],o.variations=[],r=o);return e}function _4(i,e){if(e.marker&&e.marker.comment){let t=e.root;for(;;){const r=t.variations[0];if(!r){t.comment=e.marker.comment;break}t=r}}return{headers:i,root:e.root,result:(e.marker&&e.marker.result)??void 0}}function b4(i,e){function t(){this.constructor=i}t.prototype=e.prototype,i.prototype=new t}function rl(i,e,t,r){var o=Error.call(this,i);return Object.setPrototypeOf&&Object.setPrototypeOf(o,rl.prototype),o.expected=e,o.found=t,o.location=r,o.name="SyntaxError",o}b4(rl,Error);function vg(i,e,t){return t=t||" ",i.length>e?i:(e-=i.length,t+=t.repeat(e),i+t.slice(0,e))}rl.prototype.format=function(i){var e="Error: "+this.message;if(this.location){var t=null,r;for(r=0;r<i.length;r++)if(i[r].source===this.location.source){t=i[r].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,c=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(o):o,u=this.location.source+":"+c.line+":"+c.column;if(t){var m=this.location.end,g=vg("",c.line.toString().length," "),p=t[o.line-1],_=o.line===m.line?m.column:p.length+1,E=_-o.column||1;e+=`
 --> `+u+`
`+g+` |
`+c.line+" | "+p+`
`+g+" | "+vg("",o.column-1," ")+vg("",E,"^")}else e+=`
 at `+u}return e};rl.buildMessage=function(i,e){var t={literal:function(p){return'"'+o(p.text)+'"'},class:function(p){var _=p.parts.map(function(E){return Array.isArray(E)?c(E[0])+"-"+c(E[1]):c(E)});return"["+(p.inverted?"^":"")+_.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(p){return p.description}};function r(p){return p.charCodeAt(0).toString(16).toUpperCase()}function o(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+r(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+r(_)})}function c(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+r(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+r(_)})}function u(p){return t[p.type](p)}function m(p){var _=p.map(u),E,w;if(_.sort(),_.length>0){for(E=1,w=1;E<_.length;E++)_[E-1]!==_[E]&&(_[w]=_[E],w++);_.length=w}switch(_.length){case 1:return _[0];case 2:return _[0]+" or "+_[1];default:return _.slice(0,-1).join(", ")+", or "+_[_.length-1]}}function g(p){return p?'"'+o(p)+'"':"end of input"}return"Expected "+m(i)+" but "+g(e)+" found."};function E4(i,e){e=e!==void 0?e:{};var t={},r=e.grammarSource,o={pgn:Wa},c=Wa,u="[",m='"',g="]",p=".",_="O-O-O",E="O-O",w="0-0-0",R="0-0",D="$",P="{",I="}",U=";",F="(",G=")",ce="1-0",ee="0-1",J="1/2-1/2",C="*",A=/^[a-zA-Z]/,N=/^[^"]/,k=/^[0-9]/,M=/^[.]/,z=/^[a-zA-Z1-8\-=]/,O=/^[+#]/,Pe=/^[!?]/,mt=/^[^}]/,ie=/^[^\r\n]/,he=/^[ \t\r\n]/,be=yt("tag pair"),Me=nt("[",!1),Be=nt('"',!1),L=nt("]",!1),se=yt("tag name"),me=Ot([["a","z"],["A","Z"]],!1,!1),de=yt("tag value"),ve=Ot(['"'],!0,!1),Ae=yt("move number"),je=Ot([["0","9"]],!1,!1),Dt=nt(".",!1),ut=Ot(["."],!1,!1),Ht=yt("standard algebraic notation"),Si=nt("O-O-O",!1),Vn=nt("O-O",!1),qi=nt("0-0-0",!1),Jt=nt("0-0",!1),fi=Ot([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),Pn=Ot(["+","#"],!1,!1),as=yt("suffix annotation"),Hi=Ot(["!","?"],!1,!1),St=yt("NAG"),ht=nt("$",!1),Hn=yt("brace comment"),os=nt("{",!1),ls=Ot(["}"],!0,!1),Wt=nt("}",!1),Fi=yt("rest of line comment"),Rs=nt(";",!1),Fn=Ot(["\r",`
`],!0,!1),Sn=yt("variation"),Gi=nt("(",!1),Cs=nt(")",!1),Gn=yt("game termination marker"),Ns=nt("1-0",!1),$n=nt("0-1",!1),Ft=nt("1/2-1/2",!1),pn=nt("*",!1),At=yt("whitespace"),Is=Ot([" ","	","\r",`
`],!1,!1),$i=function(H,Z){return _4(H,Z)},rr=function(H){return Object.fromEntries(H)},ni=function(H,Z){return[H,Z]},Ki=function(H,Z){return{root:H,marker:Z}},He=function(H,Z){return v4(p4(H),...Z.flat())},xt=function(H,Z,Y,ye,Se){return y4(H,Z,Y,ye,Se)},Rt=function(H){return H},jt=function(H){return H.replace(/[\r\n]+/g," ")},yn=function(H){return H.trim()},Zt=function(H){return H},Vt=function(H,Z){return{result:H,comment:Z}},W=e.peg$currPos|0,gt=[{line:1,column:1}],pt=W,Gt=e.peg$maxFailExpected||[],fe=e.peg$silentFails|0,un;if(e.startRule){if(!(e.startRule in o))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');c=o[e.startRule]}function nt(H,Z){return{type:"literal",text:H,ignoreCase:Z}}function Ot(H,Z,Y){return{type:"class",parts:H,inverted:Z,ignoreCase:Y}}function hn(){return{type:"end"}}function yt(H){return{type:"other",description:H}}function Pt(H){var Z=gt[H],Y;if(Z)return Z;if(H>=gt.length)Y=gt.length-1;else for(Y=H;!gt[--Y];);for(Z=gt[Y],Z={line:Z.line,column:Z.column};Y<H;)i.charCodeAt(Y)===10?(Z.line++,Z.column=1):Z.column++,Y++;return gt[H]=Z,Z}function $t(H,Z,Y){var ye=Pt(H),Se=Pt(Z),Ze={source:r,start:{offset:H,line:ye.line,column:ye.column},end:{offset:Z,line:Se.line,column:Se.column}};return Ze}function Ee(H){W<pt||(W>pt&&(pt=W,Gt=[]),Gt.push(H))}function ar(H,Z,Y){return new rl(rl.buildMessage(H,Z),H,Z,Y)}function Wa(){var H,Z,Y;return H=W,Z=Za(),Y=xi(),H=$i(Z,Y),H}function Za(){var H,Z,Y;for(H=W,Z=[],Y=da();Y!==t;)Z.push(Y),Y=da();return Y=en(),H=rr(Z),H}function da(){var H,Z,Y,ye,Se,Ze,Fe;return fe++,H=W,en(),i.charCodeAt(W)===91?(Z=u,W++):(Z=t,fe===0&&Ee(Me)),Z!==t?(en(),Y=Ai(),Y!==t?(en(),i.charCodeAt(W)===34?(ye=m,W++):(ye=t,fe===0&&Ee(Be)),ye!==t?(Se=or(),i.charCodeAt(W)===34?(Ze=m,W++):(Ze=t,fe===0&&Ee(Be)),Ze!==t?(en(),i.charCodeAt(W)===93?(Fe=g,W++):(Fe=t,fe===0&&Ee(L)),Fe!==t?H=ni(Y,Se):(W=H,H=t)):(W=H,H=t)):(W=H,H=t)):(W=H,H=t)):(W=H,H=t),fe--,H===t&&fe===0&&Ee(be),H}function Ai(){var H,Z,Y;if(fe++,H=W,Z=[],Y=i.charAt(W),A.test(Y)?W++:(Y=t,fe===0&&Ee(me)),Y!==t)for(;Y!==t;)Z.push(Y),Y=i.charAt(W),A.test(Y)?W++:(Y=t,fe===0&&Ee(me));else Z=t;return Z!==t?H=i.substring(H,W):H=Z,fe--,H===t&&(Z=t,fe===0&&Ee(se)),H}function or(){var H,Z,Y;for(fe++,H=W,Z=[],Y=i.charAt(W),N.test(Y)?W++:(Y=t,fe===0&&Ee(ve));Y!==t;)Z.push(Y),Y=i.charAt(W),N.test(Y)?W++:(Y=t,fe===0&&Ee(ve));return H=i.substring(H,W),fe--,Z=t,fe===0&&Ee(de),H}function xi(){var H,Z,Y;return H=W,Z=Kn(),en(),Y=pa(),Y===t&&(Y=null),en(),H=Ki(Z,Y),H}function Kn(){var H,Z,Y,ye;for(H=W,Z=ii(),Z===t&&(Z=null),Y=[],ye=Ln();ye!==t;)Y.push(ye),ye=Ln();return H=He(Z,Y),H}function Ln(){var H,Z,Y,ye,Se,Ze,Fe,Ni;if(H=W,en(),Ri(),en(),Z=Ut(),Z!==t){for(Y=ma(),Y===t&&(Y=null),ye=[],Se=lr();Se!==t;)ye.push(Se),Se=lr();for(Se=en(),Ze=ii(),Ze===t&&(Ze=null),Fe=[],Ni=cr();Ni!==t;)Fe.push(Ni),Ni=cr();H=xt(Z,Y,ye,Ze,Fe)}else W=H,H=t;return H}function Ri(){var H,Z,Y,ye,Se,Ze;for(fe++,H=W,Z=[],Y=i.charAt(W),k.test(Y)?W++:(Y=t,fe===0&&Ee(je));Y!==t;)Z.push(Y),Y=i.charAt(W),k.test(Y)?W++:(Y=t,fe===0&&Ee(je));if(i.charCodeAt(W)===46?(Y=p,W++):(Y=t,fe===0&&Ee(Dt)),Y!==t){for(ye=en(),Se=[],Ze=i.charAt(W),M.test(Ze)?W++:(Ze=t,fe===0&&Ee(ut));Ze!==t;)Se.push(Ze),Ze=i.charAt(W),M.test(Ze)?W++:(Ze=t,fe===0&&Ee(ut));Z=[Z,Y,ye,Se],H=Z}else W=H,H=t;return fe--,H===t&&(Z=t,fe===0&&Ee(Ae)),H}function Ut(){var H,Z,Y,ye,Se,Ze;if(fe++,H=W,Z=W,i.substr(W,5)===_?(Y=_,W+=5):(Y=t,fe===0&&Ee(Si)),Y===t&&(i.substr(W,3)===E?(Y=E,W+=3):(Y=t,fe===0&&Ee(Vn)),Y===t&&(i.substr(W,5)===w?(Y=w,W+=5):(Y=t,fe===0&&Ee(qi)),Y===t&&(i.substr(W,3)===R?(Y=R,W+=3):(Y=t,fe===0&&Ee(Jt)),Y===t))))if(Y=W,ye=i.charAt(W),A.test(ye)?W++:(ye=t,fe===0&&Ee(me)),ye!==t){if(Se=[],Ze=i.charAt(W),z.test(Ze)?W++:(Ze=t,fe===0&&Ee(fi)),Ze!==t)for(;Ze!==t;)Se.push(Ze),Ze=i.charAt(W),z.test(Ze)?W++:(Ze=t,fe===0&&Ee(fi));else Se=t;Se!==t?(ye=[ye,Se],Y=ye):(W=Y,Y=t)}else W=Y,Y=t;return Y!==t?(ye=i.charAt(W),O.test(ye)?W++:(ye=t,fe===0&&Ee(Pn)),ye===t&&(ye=null),Y=[Y,ye],Z=Y):(W=Z,Z=t),Z!==t?H=i.substring(H,W):H=Z,fe--,H===t&&(Z=t,fe===0&&Ee(Ht)),H}function ma(){var H,Z,Y;for(fe++,H=W,Z=[],Y=i.charAt(W),Pe.test(Y)?W++:(Y=t,fe===0&&Ee(Hi));Y!==t;)Z.push(Y),Z.length>=2?Y=t:(Y=i.charAt(W),Pe.test(Y)?W++:(Y=t,fe===0&&Ee(Hi)));return Z.length<1?(W=H,H=t):H=Z,fe--,H===t&&(Z=t,fe===0&&Ee(as)),H}function lr(){var H,Z,Y,ye,Se;if(fe++,H=W,en(),i.charCodeAt(W)===36?(Z=D,W++):(Z=t,fe===0&&Ee(ht)),Z!==t){if(Y=W,ye=[],Se=i.charAt(W),k.test(Se)?W++:(Se=t,fe===0&&Ee(je)),Se!==t)for(;Se!==t;)ye.push(Se),Se=i.charAt(W),k.test(Se)?W++:(Se=t,fe===0&&Ee(je));else ye=t;ye!==t?Y=i.substring(Y,W):Y=ye,Y!==t?H=Rt(Y):(W=H,H=t)}else W=H,H=t;return fe--,H===t&&fe===0&&Ee(St),H}function ii(){var H;return H=Ci(),H===t&&(H=ga()),H}function Ci(){var H,Z,Y,ye,Se;if(fe++,H=W,i.charCodeAt(W)===123?(Z=P,W++):(Z=t,fe===0&&Ee(os)),Z!==t){for(Y=W,ye=[],Se=i.charAt(W),mt.test(Se)?W++:(Se=t,fe===0&&Ee(ls));Se!==t;)ye.push(Se),Se=i.charAt(W),mt.test(Se)?W++:(Se=t,fe===0&&Ee(ls));Y=i.substring(Y,W),i.charCodeAt(W)===125?(ye=I,W++):(ye=t,fe===0&&Ee(Wt)),ye!==t?H=jt(Y):(W=H,H=t)}else W=H,H=t;return fe--,H===t&&(Z=t,fe===0&&Ee(Hn)),H}function ga(){var H,Z,Y,ye,Se;if(fe++,H=W,i.charCodeAt(W)===59?(Z=U,W++):(Z=t,fe===0&&Ee(Rs)),Z!==t){for(Y=W,ye=[],Se=i.charAt(W),ie.test(Se)?W++:(Se=t,fe===0&&Ee(Fn));Se!==t;)ye.push(Se),Se=i.charAt(W),ie.test(Se)?W++:(Se=t,fe===0&&Ee(Fn));Y=i.substring(Y,W),H=yn(Y)}else W=H,H=t;return fe--,H===t&&(Z=t,fe===0&&Ee(Fi)),H}function cr(){var H,Z,Y,ye;return fe++,H=W,en(),i.charCodeAt(W)===40?(Z=F,W++):(Z=t,fe===0&&Ee(Gi)),Z!==t?(Y=Kn(),Y!==t?(en(),i.charCodeAt(W)===41?(ye=G,W++):(ye=t,fe===0&&Ee(Cs)),ye!==t?H=Zt(Y):(W=H,H=t)):(W=H,H=t)):(W=H,H=t),fe--,H===t&&fe===0&&Ee(Sn),H}function pa(){var H,Z,Y;return fe++,H=W,i.substr(W,3)===ce?(Z=ce,W+=3):(Z=t,fe===0&&Ee(Ns)),Z===t&&(i.substr(W,3)===ee?(Z=ee,W+=3):(Z=t,fe===0&&Ee($n)),Z===t&&(i.substr(W,7)===J?(Z=J,W+=7):(Z=t,fe===0&&Ee(Ft)),Z===t&&(i.charCodeAt(W)===42?(Z=C,W++):(Z=t,fe===0&&Ee(pn))))),Z!==t?(en(),Y=ii(),Y===t&&(Y=null),H=Vt(Z,Y)):(W=H,H=t),fe--,H===t&&(Z=t,fe===0&&Ee(Gn)),H}function en(){var H,Z;for(fe++,H=[],Z=i.charAt(W),he.test(Z)?W++:(Z=t,fe===0&&Ee(Is));Z!==t;)H.push(Z),Z=i.charAt(W),he.test(Z)?W++:(Z=t,fe===0&&Ee(Is));return fe--,Z=t,fe===0&&Ee(At),H}if(un=c(),e.peg$library)return{peg$result:un,peg$currPos:W,peg$FAILED:t,peg$maxFailExpected:Gt,peg$maxFailPos:pt};if(un!==t&&W===i.length)return un;throw un!==t&&W<i.length&&Ee(hn()),ar(Gt,pt<i.length?i.charAt(pt):null,pt<i.length?$t(pt,pt+1):$t(pt,pt))}const tf=0xffffffffffffffffn;function _g(i,e){return(i<<e|i>>64n-e)&0xffffffffffffffffn}function N1(i,e){return i*e&tf}function T4(i){return function(){let e=BigInt(i&tf),t=BigInt(i>>64n&tf);const r=N1(_g(N1(e,5n),7n),9n);return t^=e,e=(_g(e,24n)^t^t<<16n)&tf,t=_g(t,37n),i=t<<64n|e,r}}const Wf=T4(0xa187eb39cdcaed8f31c4b365b102e01en),w4=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>Wf()))),S4=Array.from({length:8},()=>Wf()),A4=Array.from({length:16},()=>Wf()),bg=Wf(),zn="w",bi="b",an="p",tp="n",nf="b",gc="r",Hr="q",dn="k",Eg="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Uh{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(e,t){const{color:r,piece:o,from:c,to:u,flags:m,captured:g,promotion:p}=t,_=_n(c),E=_n(u);this.color=r,this.piece=o,this.from=_,this.to=E,this.san=e._moveToSan(t,e._moves({legal:!0})),this.lan=_+E,this.before=e.fen(),e._makeMove(t),this.after=e.fen(),e._undoMove(),this.flags="";for(const w in ke)ke[w]&m&&(this.flags+=za[w]);g&&(this.captured=g),p&&(this.promotion=p,this.lan+=p)}isCapture(){return this.flags.indexOf(za.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(za.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(za.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(za.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(za.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(za.BIG_PAWN)>-1}}const In=-1,za={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},ke={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},np={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},x4={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},R4={...np,...x4},De={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Tg={b:[16,32,17,15],w:[-16,-32,-17,-15]},I1={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},C4=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],N4=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],I4={p:1,n:2,b:4,r:8,q:16,k:32},D4="pnbrqkPNBRQK",D1=[tp,nf,gc,Hr],O4=7,M4=6,k4=1,V4=0,zh={[dn]:ke.KSIDE_CASTLE,[Hr]:ke.QSIDE_CASTLE},Br={w:[{square:De.a1,flag:ke.QSIDE_CASTLE},{square:De.h1,flag:ke.KSIDE_CASTLE}],b:[{square:De.a8,flag:ke.QSIDE_CASTLE},{square:De.h8,flag:ke.KSIDE_CASTLE}]},P4={b:k4,w:M4},wg="--";function Ha(i){return i>>4}function Fc(i){return i&15}function Cw(i){return"0123456789".indexOf(i)!==-1}function _n(i){const e=Fc(i),t=Ha(i);return"abcdefgh".substring(e,e+1)+"87654321".substring(t,t+1)}function uc(i){return i===zn?bi:zn}function L4(i){const e=i.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const t=parseInt(e[5],10);if(isNaN(t)||t<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(e[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const o=e[0].split("/");if(o.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let u=0;u<o.length;u++){let m=0,g=!1;for(let p=0;p<o[u].length;p++)if(Cw(o[u][p])){if(g)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};m+=parseInt(o[u][p],10),g=!0}else{if(!/^[prnbqkPRNBQK]$/.test(o[u][p]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};m+=1,g=!1}if(m!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const c=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:u,regex:m}of c){if(!m.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${u} king`};if((e[0].match(m)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${u} kings`}}return Array.from(o[0]+o[7]).some(u=>u.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function j4(i,e){const t=i.from,r=i.to,o=i.piece;let c=0,u=0,m=0;for(let g=0,p=e.length;g<p;g++){const _=e[g].from,E=e[g].to,w=e[g].piece;o===w&&t!==_&&r===E&&(c++,Ha(t)===Ha(_)&&u++,Fc(t)===Fc(_)&&m++)}return c>0?u>0&&m>0?_n(t):m>0?_n(t).charAt(1):_n(t).charAt(0):""}function qr(i,e,t,r,o,c=void 0,u=ke.NORMAL){const m=Ha(r);if(o===an&&(m===O4||m===V4))for(let g=0;g<D1.length;g++){const p=D1[g];i.push({color:e,from:t,to:r,piece:o,captured:c,promotion:p,flags:u|ke.PROMOTION})}else i.push({color:e,from:t,to:r,piece:o,captured:c,flags:u})}function O1(i){let e=i.charAt(0);return e>="a"&&e<="h"?i.match(/[a-h]\d.*[a-h]\d/)?void 0:an:(e=e.toLowerCase(),e==="o"?dn:e)}function Sg(i){return i.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class o0{_board=new Array(128);_turn=zn;_header={};_kings={w:In,b:In};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_hash=0n;_positionCount=new Map;constructor(e=Eg,{skipValidation:t=!1}={}){this.load(e,{skipValidation:t})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:In,b:In},this._turn=zn,this._castling={w:0,b:0},this._epSquare=In,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...R4},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:t=!1,preserveHeaders:r=!1}={}){let o=e.split(/\s+/);if(o.length>=2&&o.length<6){const m=["-","-","0","1"];e=o.concat(m.slice(-(6-o.length))).join(" ")}if(o=e.split(/\s+/),!t){const{ok:m,error:g}=L4(e);if(!m)throw new Error(g)}const c=o[0];let u=0;this.clear({preserveHeaders:r});for(let m=0;m<c.length;m++){const g=c.charAt(m);if(g==="/")u+=8;else if(Cw(g))u+=parseInt(g,10);else{const p=g<"a"?zn:bi;this._put({type:g.toLowerCase(),color:p},_n(u)),u++}}this._turn=o[1],o[2].indexOf("K")>-1&&(this._castling.w|=ke.KSIDE_CASTLE),o[2].indexOf("Q")>-1&&(this._castling.w|=ke.QSIDE_CASTLE),o[2].indexOf("k")>-1&&(this._castling.b|=ke.KSIDE_CASTLE),o[2].indexOf("q")>-1&&(this._castling.b|=ke.QSIDE_CASTLE),this._epSquare=o[3]==="-"?In:De[o[3]],this._halfMoves=parseInt(o[4],10),this._moveNumber=parseInt(o[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){let t=0,r="";for(let u=De.a8;u<=De.h1;u++){if(this._board[u]){t>0&&(r+=t,t=0);const{color:m,type:g}=this._board[u];r+=m===zn?g.toUpperCase():g.toLowerCase()}else t++;u+1&136&&(t>0&&(r+=t),u!==De.h1&&(r+="/"),t=0,u+=8)}let o="";this._castling[zn]&ke.KSIDE_CASTLE&&(o+="K"),this._castling[zn]&ke.QSIDE_CASTLE&&(o+="Q"),this._castling[bi]&ke.KSIDE_CASTLE&&(o+="k"),this._castling[bi]&ke.QSIDE_CASTLE&&(o+="q"),o=o||"-";let c="-";if(this._epSquare!==In)if(e)c=_n(this._epSquare);else{const u=this._epSquare+(this._turn===zn?16:-16),m=[u+1,u-1];for(const g of m){if(g&136)continue;const p=this._turn;if(this._board[g]?.color===p&&this._board[g]?.type===an){this._makeMove({color:p,from:g,to:this._epSquare,piece:an,captured:an,flags:ke.EP_CAPTURE});const _=!this._isKingAttacked(p);if(this._undoMove(),_){c=_n(this._epSquare);break}}}}return[r,this._turn,o,c,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;const{color:t,type:r}=this._board[e],o={w:0,b:1}[t],c={p:0,n:1,b:2,r:3,q:4,k:5}[r];return w4[o][c][e]}_epKey(){return this._epSquare===In?0n:S4[this._epSquare&7]}_castlingKey(){const e=this._castling.w>>5|this._castling.b>>3;return A4[e]}_computeHash(){let e=0n;for(let t=De.a8;t<=De.h1;t++){if(t&136){t+=7;continue}this._board[t]&&(e^=this._pieceKey(t))}return e^=this._epKey(),e^=this._castlingKey(),this._turn==="b"&&(e^=bg),e}_updateSetup(e){this._history.length>0||(e!==Eg?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(Eg)}get(e){return this._board[De[e]]}findPiece(e){const t=[];for(let r=De.a8;r<=De.h1;r++){if(r&136){r+=7;continue}!this._board[r]||this._board[r]?.color!==e.color||this._board[r].color===e.color&&this._board[r].type===e.type&&t.push(_n(r))}return t}put({type:e,color:t},r){return this._put({type:e,color:t},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(e,t){this._hash^=this._pieceKey(e),this._board[e]=t,this._hash^=this._pieceKey(e)}_put({type:e,color:t},r){if(D4.indexOf(e.toLowerCase())===-1||!(r in De))return!1;const o=De[r];if(e==dn&&!(this._kings[t]==In||this._kings[t]==o))return!1;const c=this._board[o];return c&&c.type===dn&&(this._kings[c.color]=In),this._set(o,{type:e,color:t}),e===dn&&(this._kings[t]=o),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){const t=this.get(e);return this._clear(De[e]),t&&t.type===dn&&(this._kings[t.color]=In),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){this._hash^=this._castlingKey();const e=this._board[De.e1]?.type===dn&&this._board[De.e1]?.color===zn,t=this._board[De.e8]?.type===dn&&this._board[De.e8]?.color===bi;(!e||this._board[De.a1]?.type!==gc||this._board[De.a1]?.color!==zn)&&(this._castling.w&=-65),(!e||this._board[De.h1]?.type!==gc||this._board[De.h1]?.color!==zn)&&(this._castling.w&=-33),(!t||this._board[De.a8]?.type!==gc||this._board[De.a8]?.color!==bi)&&(this._castling.b&=-65),(!t||this._board[De.h8]?.type!==gc||this._board[De.h8]?.color!==bi)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){if(this._epSquare===In)return;const e=this._epSquare+(this._turn===zn?-16:16),t=this._epSquare+(this._turn===zn?16:-16),r=[t+1,t-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||this._board[t]?.color!==uc(this._turn)||this._board[t]?.type!==an){this._hash^=this._epKey(),this._epSquare=In;return}const o=c=>!(c&136)&&this._board[c]?.color===this._turn&&this._board[c]?.type===an;r.some(o)||(this._hash^=this._epKey(),this._epSquare=In)}_attacked(e,t,r){const o=[];for(let c=De.a8;c<=De.h1;c++){if(c&136){c+=7;continue}if(this._board[c]===void 0||this._board[c].color!==e)continue;const u=this._board[c],m=c-t;if(m===0)continue;const g=m+119;if(C4[g]&I4[u.type]){if(u.type===an){if(m>0&&u.color===zn||m<=0&&u.color===bi)if(r)o.push(_n(c));else return!0;continue}if(u.type==="n"||u.type==="k")if(r){o.push(_n(c));continue}else return!0;const p=N4[g];let _=c+p,E=!1;for(;_!==t;){if(this._board[_]!=null){E=!0;break}_+=p}if(!E)if(r){o.push(_n(c));continue}else return!0}}return r?o:!1}attackers(e,t){return t?this._attacked(t,De[e],!0):this._attacked(this._turn,De[e],!0)}_isKingAttacked(e){const t=this._kings[e];return t===-1?!1:this._attacked(uc(e),t)}hash(){return this._hash.toString(16)}isAttacked(e,t){return this._attacked(t,De[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},t=[];let r=0,o=0;for(let c=De.a8;c<=De.h1;c++){if(o=(o+1)%2,c&136){c+=7;continue}const u=this._board[c];u&&(e[u.type]=u.type in e?e[u.type]+1:1,u.type===nf&&t.push(o),r++)}if(r===2)return!0;if(r===3&&(e[nf]===1||e[tp]===1))return!0;if(r===e[nf]+2){let c=0;const u=t.length;for(let m=0;m<u;m++)c+=t[m];if(c===0||c===u)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:t=void 0,piece:r=void 0}={}){const o=this._moves({square:t,piece:r});return e?o.map(c=>new Uh(this,c)):o.map(c=>this._moveToSan(c,o))}_moves({legal:e=!0,piece:t=void 0,square:r=void 0}={}){const o=r?r.toLowerCase():void 0,c=t?.toLowerCase(),u=[],m=this._turn,g=uc(m);let p=De.a8,_=De.h1,E=!1;if(o)if(o in De)p=_=De[o],E=!0;else return[];for(let R=p;R<=_;R++){if(R&136){R+=7;continue}if(!this._board[R]||this._board[R].color===g)continue;const{type:D}=this._board[R];let P;if(D===an){if(c&&c!==D)continue;P=R+Tg[m][0],this._board[P]||(qr(u,m,R,P,an),P=R+Tg[m][1],P4[m]===Ha(R)&&!this._board[P]&&qr(u,m,R,P,an,void 0,ke.BIG_PAWN));for(let I=2;I<4;I++)P=R+Tg[m][I],!(P&136)&&(this._board[P]?.color===g?qr(u,m,R,P,an,this._board[P].type,ke.CAPTURE):P===this._epSquare&&qr(u,m,R,P,an,an,ke.EP_CAPTURE))}else{if(c&&c!==D)continue;for(let I=0,U=I1[D].length;I<U;I++){const F=I1[D][I];for(P=R;P+=F,!(P&136);){if(!this._board[P])qr(u,m,R,P,D);else{if(this._board[P].color===m)break;qr(u,m,R,P,D,this._board[P].type,ke.CAPTURE);break}if(D===tp||D===dn)break}}}}if((c===void 0||c===dn)&&(!E||_===this._kings[m])){if(this._castling[m]&ke.KSIDE_CASTLE){const R=this._kings[m],D=R+2;!this._board[R+1]&&!this._board[D]&&!this._attacked(g,this._kings[m])&&!this._attacked(g,R+1)&&!this._attacked(g,D)&&qr(u,m,this._kings[m],D,dn,void 0,ke.KSIDE_CASTLE)}if(this._castling[m]&ke.QSIDE_CASTLE){const R=this._kings[m],D=R-2;!this._board[R-1]&&!this._board[R-2]&&!this._board[R-3]&&!this._attacked(g,this._kings[m])&&!this._attacked(g,R-1)&&!this._attacked(g,D)&&qr(u,m,this._kings[m],D,dn,void 0,ke.QSIDE_CASTLE)}}if(!e||this._kings[m]===-1)return u;const w=[];for(let R=0,D=u.length;R<D;R++)this._makeMove(u[R]),this._isKingAttacked(m)||w.push(u[R]),this._undoMove();return w}move(e,{strict:t=!1}={}){let r=null;if(typeof e=="string")r=this._moveFromSan(e,t);else if(e===null)r=this._moveFromSan(wg,t);else if(typeof e=="object"){const c=this._moves();for(let u=0,m=c.length;u<m;u++)if(e.from===_n(c[u].from)&&e.to===_n(c[u].to)&&(!("promotion"in c[u])||e.promotion===c[u].promotion)){r=c[u];break}}if(!r)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&r.flags&ke.NULL_MOVE)throw new Error("Null move not allowed when in check");const o=new Uh(this,r);return this._makeMove(r),this._incPositionCount(),o}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,t){this._hash^=this._pieceKey(e),this._board[t]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(t)}_makeMove(e){const t=this._turn,r=uc(t);if(this._push(e),e.flags&ke.NULL_MOVE){t===bi&&this._moveNumber++,this._halfMoves++,this._turn=r,this._epSquare=In;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&ke.EP_CAPTURE&&(this._turn===bi?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:t})),this._board[e.to].type===dn){if(this._kings[t]=e.to,e.flags&ke.KSIDE_CASTLE){const o=e.to-1,c=e.to+1;this._movePiece(c,o)}else if(e.flags&ke.QSIDE_CASTLE){const o=e.to+1,c=e.to-2;this._movePiece(c,o)}this._castling[t]=0}if(this._castling[t]){for(let o=0,c=Br[t].length;o<c;o++)if(e.from===Br[t][o].square&&this._castling[t]&Br[t][o].flag){this._castling[t]^=Br[t][o].flag;break}}if(this._castling[r]){for(let o=0,c=Br[r].length;o<c;o++)if(e.to===Br[r][o].square&&this._castling[r]&Br[r][o].flag){this._castling[r]^=Br[r][o].flag;break}}if(this._hash^=this._castlingKey(),e.flags&ke.BIG_PAWN){let o;t===bi?o=e.to-16:o=e.to+16,!(e.to-1&136)&&this._board[e.to-1]?.type===an&&this._board[e.to-1]?.color===r||!(e.to+1&136)&&this._board[e.to+1]?.type===an&&this._board[e.to+1]?.color===r?(this._epSquare=o,this._hash^=this._epKey()):this._epSquare=In}else this._epSquare=In;e.piece===an?this._halfMoves=0:e.flags&(ke.CAPTURE|ke.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===bi&&this._moveNumber++,this._turn=r,this._hash^=bg}undo(){const e=this._hash,t=this._undoMove();if(t){const r=new Uh(this,t);return this._decPositionCount(e),r}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=bg;const r=this._turn,o=uc(r);if(t.flags&ke.NULL_MOVE)return t;if(this._movePiece(t.to,t.from),t.piece&&(this._clear(t.from),this._set(t.from,{type:t.piece,color:r})),t.captured)if(t.flags&ke.EP_CAPTURE){let c;r===bi?c=t.to-16:c=t.to+16,this._set(c,{type:an,color:o})}else this._set(t.to,{type:t.captured,color:o});if(t.flags&(ke.KSIDE_CASTLE|ke.QSIDE_CASTLE)){let c,u;t.flags&ke.KSIDE_CASTLE?(c=t.to+1,u=t.to-1):(c=t.to-2,u=t.to+1),this._movePiece(u,c)}return t}pgn({newline:e=`
`,maxWidth:t=0}={}){const r=[];let o=!1;for(const w in this._header)this._header[w]&&r.push(`[${w} "${this._header[w]}"]`+e),o=!0;o&&this._history.length&&r.push(e);const c=w=>{const R=this._comments[this.fen()];if(typeof R<"u"){const D=w.length>0?" ":"";w=`${w}${D}{${R}}`}return w},u=[];for(;this._history.length>0;)u.push(this._undoMove());const m=[];let g="";for(u.length===0&&m.push(c(""));u.length>0;){g=c(g);const w=u.pop();if(!w)break;if(!this._history.length&&w.color==="b"){const R=`${this._moveNumber}. ...`;g=g?`${g} ${R}`:R}else w.color==="w"&&(g.length&&m.push(g),g=this._moveNumber+".");g=g+" "+this._moveToSan(w,this._moves({legal:!0})),this._makeMove(w)}if(g.length&&m.push(c(g)),m.push(this._header.Result||"*"),t===0)return r.join("")+m.join(" ");const p=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},_=function(w,R){for(const D of R.split(" "))if(D){if(w+D.length>t){for(;p();)w--;r.push(e),w=0}r.push(D),w+=D.length,r.push(" "),w++}return p()&&w--,w};let E=0;for(let w=0;w<m.length;w++){if(E+m[w].length>t&&m[w].includes("{")){E=_(E,m[w]);continue}E+m[w].length>t&&w!==0?(r[r.length-1]===" "&&r.pop(),r.push(e),E=0):w!==0&&(r.push(" "),E++),r.push(m[w]),E+=m[w].length}return r.join("")}header(...e){for(let t=0;t<e.length;t+=2)typeof e[t]=="string"&&typeof e[t+1]=="string"&&(this._header[e[t]]=e[t+1]);return this._header}setHeader(e,t){return this._header[e]=t??np[e]??null,this.getHeaders()}removeHeader(e){return e in this._header?(this._header[e]=np[e]||null,!0):!1}getHeaders(){const e={};for(const[t,r]of Object.entries(this._header))r!==null&&(e[t]=r);return e}loadPgn(e,{strict:t=!1,newlineChar:r=`\r?
`}={}){r!==`\r?
`&&(e=e.replace(new RegExp(r,"g"),`
`));const o=E4(e);this.reset();const c=o.headers;let u="";for(const p in c)p.toLowerCase()==="fen"&&(u=c[p]),this.header(p,c[p]);if(!t)u&&this.load(u,{preserveHeaders:!0});else if(c.SetUp==="1"){if(!("FEN"in c))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(c.FEN,{preserveHeaders:!0})}let m=o.root;for(;m;){if(m.move){const p=this._moveFromSan(m.move,t);if(p==null)throw new Error(`Invalid move in PGN: ${m.move}`);this._makeMove(p),this._incPositionCount()}m.comment!==void 0&&(this._comments[this.fen()]=m.comment),m=m.variations[0]}const g=o.result;g&&Object.keys(this._header).length&&this._header.Result!==g&&this.setHeader("Result",g)}_moveToSan(e,t){let r="";if(e.flags&ke.KSIDE_CASTLE)r="O-O";else if(e.flags&ke.QSIDE_CASTLE)r="O-O-O";else{if(e.flags&ke.NULL_MOVE)return wg;if(e.piece!==an){const o=j4(e,t);r+=e.piece.toUpperCase()+o}e.flags&(ke.CAPTURE|ke.EP_CAPTURE)&&(e.piece===an&&(r+=_n(e.from)[0]),r+="x"),r+=_n(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,t=!1){let r=Sg(e);if(t||(r==="0-0"?r="O-O":r==="0-0-0"&&(r="O-O-O")),r==wg)return{color:this._turn,from:0,to:0,piece:"k",flags:ke.NULL_MOVE};let o=O1(r),c=this._moves({legal:!0,piece:o});for(let w=0,R=c.length;w<R;w++)if(r===Sg(this._moveToSan(c[w],c)))return c[w];if(t)return null;let u,m,g,p,_,E=!1;if(m=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),m?(u=m[1],g=m[2],p=m[3],_=m[4],g.length==1&&(E=!0)):(m=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),m&&(u=m[1],g=m[2],p=m[3],_=m[4],g.length==1&&(E=!0))),o=O1(r),c=this._moves({legal:!0,piece:u||o}),!p)return null;for(let w=0,R=c.length;w<R;w++)if(g){if((!u||u.toLowerCase()==c[w].piece)&&De[g]==c[w].from&&De[p]==c[w].to&&(!_||_.toLowerCase()==c[w].promotion))return c[w];if(E){const D=_n(c[w].from);if((!u||u.toLowerCase()==c[w].piece)&&De[p]==c[w].to&&(g==D[0]||g==D[1])&&(!_||_.toLowerCase()==c[w].promotion))return c[w]}}else if(r===Sg(this._moveToSan(c[w],c)).replace("x",""))return c[w];return null}ascii(){let e=`   +------------------------+
`;for(let t=De.a8;t<=De.h1;t++){if(Fc(t)===0&&(e+=" "+"87654321"[Ha(t)]+" |"),this._board[t]){const r=this._board[t].type,c=this._board[t].color===zn?r.toUpperCase():r.toLowerCase();e+=" "+c+" "}else e+=" . ";t+1&136&&(e+=`|
`,t+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const t=this._moves({legal:!1});let r=0;const o=this._turn;for(let c=0,u=t.length;c<u;c++)this._makeMove(t[c]),this._isKingAttacked(o)||(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}setTurn(e){return this._turn==e?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const e=[];let t=[];for(let r=De.a8;r<=De.h1;r++)this._board[r]==null?t.push(null):t.push({square:_n(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(t),t=[],r+=8);return e}squareColor(e){if(e in De){const t=De[e];return(Ha(t)+Fc(t))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const t=[],r=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){const o=t.pop();if(!o)break;e?r.push(new Uh(this,o)):r.push(this._moveToSan(o,this._moves())),this._makeMove(o)}return r}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){const t=this._positionCount.get(e)??0;t===1?this._positionCount.delete(e):this._positionCount.set(e,t-1)}_pruneComments(){const e=[],t={},r=o=>{o in this._comments&&(t[o]=this._comments[o])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){const o=e.pop();if(!o)break;this._makeMove(o),r(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(const o of[dn,Hr])t[o]!==void 0&&(t[o]?this._castling[e]|=zh[o]:this._castling[e]&=~zh[o]);this._updateCastlingRights();const r=this.getCastlingRights(e);return(t[dn]===void 0||t[dn]===r[dn])&&(t[Hr]===void 0||t[Hr]===r[Hr])}getCastlingRights(e){return{[dn]:(this._castling[e]&zh[dn])!==0,[Hr]:(this._castling[e]&zh[Hr])!==0}}moveNumber(){return this._moveNumber}}var pc=W1();const Zf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function gl(i){const e=Object.prototype.toString.call(i);return e==="[object Window]"||e==="[object global]"}function l0(i){return"nodeType"in i}function ti(i){var e,t;return i?gl(i)?i:l0(i)&&(e=(t=i.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function c0(i){const{Document:e}=ti(i);return i instanceof e}function lu(i){return gl(i)?!1:i instanceof ti(i).HTMLElement}function Nw(i){return i instanceof ti(i).SVGElement}function pl(i){return i?gl(i)?i.document:l0(i)?c0(i)?i:lu(i)||Nw(i)?i.ownerDocument:document:document:document}const ir=Zf?q.useLayoutEffect:q.useEffect;function ed(i){const e=q.useRef(i);return ir(()=>{e.current=i}),q.useCallback(function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}function U4(){const i=q.useRef(null),e=q.useCallback((r,o)=>{i.current=setInterval(r,o)},[]),t=q.useCallback(()=>{i.current!==null&&(clearInterval(i.current),i.current=null)},[]);return[e,t]}function Gc(i,e){e===void 0&&(e=[i]);const t=q.useRef(i);return ir(()=>{t.current!==i&&(t.current=i)},e),t}function cu(i,e){const t=q.useRef();return q.useMemo(()=>{const r=i(t.current);return t.current=r,r},[...e])}function xf(i){const e=ed(i),t=q.useRef(null),r=q.useCallback(o=>{o!==t.current&&e?.(o,t.current),t.current=o},[]);return[t,r]}function Rf(i){const e=q.useRef();return q.useEffect(()=>{e.current=i},[i]),e.current}let Ag={};function td(i,e){return q.useMemo(()=>{if(e)return e;const t=Ag[i]==null?0:Ag[i]+1;return Ag[i]=t,i+"-"+t},[i,e])}function Iw(i){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return r.reduce((c,u)=>{const m=Object.entries(u);for(const[g,p]of m){const _=c[g];_!=null&&(c[g]=_+i*p)}return c},{...e})}}const Yo=Iw(1),$c=Iw(-1);function z4(i){return"clientX"in i&&"clientY"in i}function u0(i){if(!i)return!1;const{KeyboardEvent:e}=ti(i.target);return e&&i instanceof e}function B4(i){if(!i)return!1;const{TouchEvent:e}=ti(i.target);return e&&i instanceof e}function Cf(i){if(B4(i)){if(i.touches&&i.touches.length){const{clientX:e,clientY:t}=i.touches[0];return{x:e,y:t}}else if(i.changedTouches&&i.changedTouches.length){const{clientX:e,clientY:t}=i.changedTouches[0];return{x:e,y:t}}}return z4(i)?{x:i.clientX,y:i.clientY}:null}const al=Object.freeze({Translate:{toString(i){if(!i)return;const{x:e,y:t}=i;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(i){if(!i)return;const{scaleX:e,scaleY:t}=i;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(i){if(i)return[al.Translate.toString(i),al.Scale.toString(i)].join(" ")}},Transition:{toString(i){let{property:e,duration:t,easing:r}=i;return e+" "+t+"ms "+r}}}),M1="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function q4(i){return i.matches(M1)?i:i.querySelector(M1)}const H4={display:"none"};function F4(i){let{id:e,value:t}=i;return ot.createElement("div",{id:e,style:H4},t)}function G4(i){let{id:e,announcement:t,ariaLiveType:r="assertive"}=i;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ot.createElement("div",{id:e,style:o,role:"status","aria-live":r,"aria-atomic":!0},t)}function $4(){const[i,e]=q.useState("");return{announce:q.useCallback(r=>{r!=null&&e(r)},[]),announcement:i}}const Dw=q.createContext(null);function K4(i){const e=q.useContext(Dw);q.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(i)},[i,e])}function Q4(){const[i]=q.useState(()=>new Set),e=q.useCallback(r=>(i.add(r),()=>i.delete(r)),[i]);return[q.useCallback(r=>{let{type:o,event:c}=r;i.forEach(u=>{var m;return(m=u[o])==null?void 0:m.call(u,c)})},[i]),e]}const Y4={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},X4={onDragStart(i){let{active:e}=i;return"Picked up draggable item "+e.id+"."},onDragOver(i){let{active:e,over:t}=i;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(i){let{active:e,over:t}=i;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(i){let{active:e}=i;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function J4(i){let{announcements:e=X4,container:t,hiddenTextDescribedById:r,screenReaderInstructions:o=Y4}=i;const{announce:c,announcement:u}=$4(),m=td("DndLiveRegion"),[g,p]=q.useState(!1);if(q.useEffect(()=>{p(!0)},[]),K4(q.useMemo(()=>({onDragStart(E){let{active:w}=E;c(e.onDragStart({active:w}))},onDragMove(E){let{active:w,over:R}=E;e.onDragMove&&c(e.onDragMove({active:w,over:R}))},onDragOver(E){let{active:w,over:R}=E;c(e.onDragOver({active:w,over:R}))},onDragEnd(E){let{active:w,over:R}=E;c(e.onDragEnd({active:w,over:R}))},onDragCancel(E){let{active:w,over:R}=E;c(e.onDragCancel({active:w,over:R}))}}),[c,e])),!g)return null;const _=ot.createElement(ot.Fragment,null,ot.createElement(F4,{id:r,value:o.draggable}),ot.createElement(G4,{id:m,announcement:u}));return t?pc.createPortal(_,t):_}var mn;(function(i){i.DragStart="dragStart",i.DragMove="dragMove",i.DragEnd="dragEnd",i.DragCancel="dragCancel",i.DragOver="dragOver",i.RegisterDroppable="registerDroppable",i.SetDroppableDisabled="setDroppableDisabled",i.UnregisterDroppable="unregisterDroppable"})(mn||(mn={}));function Nf(){}function Fa(i,e){return q.useMemo(()=>({sensor:i,options:e??{}}),[i,e])}function h0(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return q.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const rs=Object.freeze({x:0,y:0});function Ow(i,e){return Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2))}function W4(i,e){const t=Cf(i);if(!t)return"0 0";const r={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function Mw(i,e){let{data:{value:t}}=i,{data:{value:r}}=e;return t-r}function Z4(i,e){let{data:{value:t}}=i,{data:{value:r}}=e;return r-t}function k1(i){let{left:e,top:t,height:r,width:o}=i;return[{x:e,y:t},{x:e+o,y:t},{x:e,y:t+r},{x:e+o,y:t+r}]}function kw(i,e){if(!i||i.length===0)return null;const[t]=i;return t[e]}function V1(i,e,t){return e===void 0&&(e=i.left),t===void 0&&(t=i.top),{x:e+i.width*.5,y:t+i.height*.5}}const eO=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=i;const o=V1(e,e.left,e.top),c=[];for(const u of r){const{id:m}=u,g=t.get(m);if(g){const p=Ow(V1(g),o);c.push({id:m,data:{droppableContainer:u,value:p}})}}return c.sort(Mw)},tO=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=i;const o=k1(e),c=[];for(const u of r){const{id:m}=u,g=t.get(m);if(g){const p=k1(g),_=o.reduce((w,R,D)=>w+Ow(p[D],R),0),E=Number((_/4).toFixed(4));c.push({id:m,data:{droppableContainer:u,value:E}})}}return c.sort(Mw)};function nO(i,e){const t=Math.max(e.top,i.top),r=Math.max(e.left,i.left),o=Math.min(e.left+e.width,i.left+i.width),c=Math.min(e.top+e.height,i.top+i.height),u=o-r,m=c-t;if(r<o&&t<c){const g=e.width*e.height,p=i.width*i.height,_=u*m,E=_/(g+p-_);return Number(E.toFixed(4))}return 0}const iO=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=i;const o=[];for(const c of r){const{id:u}=c,m=t.get(u);if(m){const g=nO(m,e);g>0&&o.push({id:u,data:{droppableContainer:c,value:g}})}}return o.sort(Z4)};function sO(i,e,t){return{...i,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function Vw(i,e){return i&&e?{x:i.left-e.left,y:i.top-e.top}:rs}function rO(i){return function(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),c=1;c<r;c++)o[c-1]=arguments[c];return o.reduce((u,m)=>({...u,top:u.top+i*m.y,bottom:u.bottom+i*m.y,left:u.left+i*m.x,right:u.right+i*m.x}),{...t})}}const aO=rO(1);function Pw(i){if(i.startsWith("matrix3d(")){const e=i.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(i.startsWith("matrix(")){const e=i.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function oO(i,e,t){const r=Pw(e);if(!r)return i;const{scaleX:o,scaleY:c,x:u,y:m}=r,g=i.left-u-(1-o)*parseFloat(t),p=i.top-m-(1-c)*parseFloat(t.slice(t.indexOf(" ")+1)),_=o?i.width/o:i.width,E=c?i.height/c:i.height;return{width:_,height:E,top:p,right:g+_,bottom:p+E,left:g}}const lO={ignoreTransform:!1};function uu(i,e){e===void 0&&(e=lO);let t=i.getBoundingClientRect();if(e.ignoreTransform){const{transform:p,transformOrigin:_}=ti(i).getComputedStyle(i);p&&(t=oO(t,p,_))}const{top:r,left:o,width:c,height:u,bottom:m,right:g}=t;return{top:r,left:o,width:c,height:u,bottom:m,right:g}}function P1(i){return uu(i,{ignoreTransform:!0})}function cO(i){const e=i.innerWidth,t=i.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function uO(i,e){return e===void 0&&(e=ti(i).getComputedStyle(i)),e.position==="fixed"}function hO(i,e){e===void 0&&(e=ti(i).getComputedStyle(i));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const c=e[o];return typeof c=="string"?t.test(c):!1})}function nd(i,e){const t=[];function r(o){if(e!=null&&t.length>=e||!o)return t;if(c0(o)&&o.scrollingElement!=null&&!t.includes(o.scrollingElement))return t.push(o.scrollingElement),t;if(!lu(o)||Nw(o)||t.includes(o))return t;const c=ti(i).getComputedStyle(o);return o!==i&&hO(o,c)&&t.push(o),uO(o,c)?t:r(o.parentNode)}return i?r(i):t}function Lw(i){const[e]=nd(i,1);return e??null}function xg(i){return!Zf||!i?null:gl(i)?i:l0(i)?c0(i)||i===pl(i).scrollingElement?window:lu(i)?i:null:null}function jw(i){return gl(i)?i.scrollX:i.scrollLeft}function Uw(i){return gl(i)?i.scrollY:i.scrollTop}function ip(i){return{x:jw(i),y:Uw(i)}}var En;(function(i){i[i.Forward=1]="Forward",i[i.Backward=-1]="Backward"})(En||(En={}));function zw(i){return!Zf||!i?!1:i===document.scrollingElement}function Bw(i){const e={x:0,y:0},t=zw(i)?{height:window.innerHeight,width:window.innerWidth}:{height:i.clientHeight,width:i.clientWidth},r={x:i.scrollWidth-t.width,y:i.scrollHeight-t.height},o=i.scrollTop<=e.y,c=i.scrollLeft<=e.x,u=i.scrollTop>=r.y,m=i.scrollLeft>=r.x;return{isTop:o,isLeft:c,isBottom:u,isRight:m,maxScroll:r,minScroll:e}}const fO={x:.2,y:.2};function dO(i,e,t,r,o){let{top:c,left:u,right:m,bottom:g}=t;r===void 0&&(r=10),o===void 0&&(o=fO);const{isTop:p,isBottom:_,isLeft:E,isRight:w}=Bw(i),R={x:0,y:0},D={x:0,y:0},P={height:e.height*o.y,width:e.width*o.x};return!p&&c<=e.top+P.height?(R.y=En.Backward,D.y=r*Math.abs((e.top+P.height-c)/P.height)):!_&&g>=e.bottom-P.height&&(R.y=En.Forward,D.y=r*Math.abs((e.bottom-P.height-g)/P.height)),!w&&m>=e.right-P.width?(R.x=En.Forward,D.x=r*Math.abs((e.right-P.width-m)/P.width)):!E&&u<=e.left+P.width&&(R.x=En.Backward,D.x=r*Math.abs((e.left+P.width-u)/P.width)),{direction:R,speed:D}}function mO(i){if(i===document.scrollingElement){const{innerWidth:c,innerHeight:u}=window;return{top:0,left:0,right:c,bottom:u,width:c,height:u}}const{top:e,left:t,right:r,bottom:o}=i.getBoundingClientRect();return{top:e,left:t,right:r,bottom:o,width:i.clientWidth,height:i.clientHeight}}function qw(i){return i.reduce((e,t)=>Yo(e,ip(t)),rs)}function gO(i){return i.reduce((e,t)=>e+jw(t),0)}function pO(i){return i.reduce((e,t)=>e+Uw(t),0)}function Hw(i,e){if(e===void 0&&(e=uu),!i)return;const{top:t,left:r,bottom:o,right:c}=e(i);Lw(i)&&(o<=0||c<=0||t>=window.innerHeight||r>=window.innerWidth)&&i.scrollIntoView({block:"center",inline:"center"})}const yO=[["x",["left","right"],gO],["y",["top","bottom"],pO]];class f0{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=nd(t),o=qw(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[c,u,m]of yO)for(const g of u)Object.defineProperty(this,g,{get:()=>{const p=m(r),_=o[c]-p;return this.rect[g]+_},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Cc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...t)})},this.target=e}add(e,t,r){var o;(o=this.target)==null||o.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function vO(i){const{EventTarget:e}=ti(i);return i instanceof e?i:pl(i)}function Rg(i,e){const t=Math.abs(i.x),r=Math.abs(i.y);return typeof e=="number"?Math.sqrt(t**2+r**2)>e:"x"in e&&"y"in e?t>e.x&&r>e.y:"x"in e?t>e.x:"y"in e?r>e.y:!1}var Bi;(function(i){i.Click="click",i.DragStart="dragstart",i.Keydown="keydown",i.ContextMenu="contextmenu",i.Resize="resize",i.SelectionChange="selectionchange",i.VisibilityChange="visibilitychange"})(Bi||(Bi={}));function L1(i){i.preventDefault()}function _O(i){i.stopPropagation()}var tt;(function(i){i.Space="Space",i.Down="ArrowDown",i.Right="ArrowRight",i.Left="ArrowLeft",i.Up="ArrowUp",i.Esc="Escape",i.Enter="Enter",i.Tab="Tab"})(tt||(tt={}));const Fw={start:[tt.Space,tt.Enter],cancel:[tt.Esc],end:[tt.Space,tt.Enter,tt.Tab]},bO=(i,e)=>{let{currentCoordinates:t}=e;switch(i.code){case tt.Right:return{...t,x:t.x+25};case tt.Left:return{...t,x:t.x-25};case tt.Down:return{...t,y:t.y+25};case tt.Up:return{...t,y:t.y-25}}};class d0{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Cc(pl(t)),this.windowListeners=new Cc(ti(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Bi.Resize,this.handleCancel),this.windowListeners.add(Bi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Bi.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&Hw(r),t(rs)}handleKeyDown(e){if(u0(e)){const{active:t,context:r,options:o}=this.props,{keyboardCodes:c=Fw,coordinateGetter:u=bO,scrollBehavior:m="smooth"}=o,{code:g}=e;if(c.end.includes(g)){this.handleEnd(e);return}if(c.cancel.includes(g)){this.handleCancel(e);return}const{collisionRect:p}=r.current,_=p?{x:p.left,y:p.top}:rs;this.referenceCoordinates||(this.referenceCoordinates=_);const E=u(e,{active:t,context:r.current,currentCoordinates:_});if(E){const w=$c(E,_),R={x:0,y:0},{scrollableAncestors:D}=r.current;for(const P of D){const I=e.code,{isTop:U,isRight:F,isLeft:G,isBottom:ce,maxScroll:ee,minScroll:J}=Bw(P),C=mO(P),A={x:Math.min(I===tt.Right?C.right-C.width/2:C.right,Math.max(I===tt.Right?C.left:C.left+C.width/2,E.x)),y:Math.min(I===tt.Down?C.bottom-C.height/2:C.bottom,Math.max(I===tt.Down?C.top:C.top+C.height/2,E.y))},N=I===tt.Right&&!F||I===tt.Left&&!G,k=I===tt.Down&&!ce||I===tt.Up&&!U;if(N&&A.x!==E.x){const M=P.scrollLeft+w.x,z=I===tt.Right&&M<=ee.x||I===tt.Left&&M>=J.x;if(z&&!w.y){P.scrollTo({left:M,behavior:m});return}z?R.x=P.scrollLeft-M:R.x=I===tt.Right?P.scrollLeft-ee.x:P.scrollLeft-J.x,R.x&&P.scrollBy({left:-R.x,behavior:m});break}else if(k&&A.y!==E.y){const M=P.scrollTop+w.y,z=I===tt.Down&&M<=ee.y||I===tt.Up&&M>=J.y;if(z&&!w.x){P.scrollTo({top:M,behavior:m});return}z?R.y=P.scrollTop-M:R.y=I===tt.Down?P.scrollTop-ee.y:P.scrollTop-J.y,R.y&&P.scrollBy({top:-R.y,behavior:m});break}}this.handleMove(e,Yo($c(E,this.referenceCoordinates),R))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}d0.activators=[{eventName:"onKeyDown",handler:(i,e,t)=>{let{keyboardCodes:r=Fw,onActivation:o}=e,{active:c}=t;const{code:u}=i.nativeEvent;if(r.start.includes(u)){const m=c.activatorNode.current;return m&&i.target!==m?!1:(i.preventDefault(),o?.({event:i.nativeEvent}),!0)}return!1}}];function j1(i){return!!(i&&"distance"in i)}function U1(i){return!!(i&&"delay"in i)}class m0{constructor(e,t,r){var o;r===void 0&&(r=vO(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:c}=e,{target:u}=c;this.props=e,this.events=t,this.document=pl(u),this.documentListeners=new Cc(this.document),this.listeners=new Cc(r),this.windowListeners=new Cc(ti(u)),this.initialCoordinates=(o=Cf(c))!=null?o:rs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Bi.Resize,this.handleCancel),this.windowListeners.add(Bi.DragStart,L1),this.windowListeners.add(Bi.VisibilityChange,this.handleCancel),this.windowListeners.add(Bi.ContextMenu,L1),this.documentListeners.add(Bi.Keydown,this.handleKeydown),t){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(U1(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(j1(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:o}=this.props;o(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Bi.Click,_O,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Bi.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:o,props:c}=this,{onMove:u,options:{activationConstraint:m}}=c;if(!o)return;const g=(t=Cf(e))!=null?t:rs,p=$c(o,g);if(!r&&m){if(j1(m)){if(m.tolerance!=null&&Rg(p,m.tolerance))return this.handleCancel();if(Rg(p,m.distance))return this.handleStart()}if(U1(m)&&Rg(p,m.tolerance))return this.handleCancel();this.handlePending(m,p);return}e.cancelable&&e.preventDefault(),u(g)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===tt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const EO={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class id extends m0{constructor(e){const{event:t}=e,r=pl(t.target);super(e,EO,r)}}id.activators=[{eventName:"onPointerDown",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:r}=e;return!t.isPrimary||t.button!==0?!1:(r?.({event:t}),!0)}}];const TO={move:{name:"mousemove"},end:{name:"mouseup"}};var sp;(function(i){i[i.RightClick=2]="RightClick"})(sp||(sp={}));class g0 extends m0{constructor(e){super(e,TO,pl(e.event.target))}}g0.activators=[{eventName:"onMouseDown",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:r}=e;return t.button===sp.RightClick?!1:(r?.({event:t}),!0)}}];const Cg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class p0 extends m0{constructor(e){super(e,Cg)}static setup(){return window.addEventListener(Cg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Cg.move.name,e)};function e(){}}}p0.activators=[{eventName:"onTouchStart",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:r}=e;const{touches:o}=t;return o.length>1?!1:(r?.({event:t}),!0)}}];var Nc;(function(i){i[i.Pointer=0]="Pointer",i[i.DraggableRect=1]="DraggableRect"})(Nc||(Nc={}));var If;(function(i){i[i.TreeOrder=0]="TreeOrder",i[i.ReversedTreeOrder=1]="ReversedTreeOrder"})(If||(If={}));function wO(i){let{acceleration:e,activator:t=Nc.Pointer,canScroll:r,draggingRect:o,enabled:c,interval:u=5,order:m=If.TreeOrder,pointerCoordinates:g,scrollableAncestors:p,scrollableAncestorRects:_,delta:E,threshold:w}=i;const R=AO({delta:E,disabled:!c}),[D,P]=U4(),I=q.useRef({x:0,y:0}),U=q.useRef({x:0,y:0}),F=q.useMemo(()=>{switch(t){case Nc.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case Nc.DraggableRect:return o}},[t,o,g]),G=q.useRef(null),ce=q.useCallback(()=>{const J=G.current;if(!J)return;const C=I.current.x*U.current.x,A=I.current.y*U.current.y;J.scrollBy(C,A)},[]),ee=q.useMemo(()=>m===If.TreeOrder?[...p].reverse():p,[m,p]);q.useEffect(()=>{if(!c||!p.length||!F){P();return}for(const J of ee){if(r?.(J)===!1)continue;const C=p.indexOf(J),A=_[C];if(!A)continue;const{direction:N,speed:k}=dO(J,A,F,e,w);for(const M of["x","y"])R[M][N[M]]||(k[M]=0,N[M]=0);if(k.x>0||k.y>0){P(),G.current=J,D(ce,u),I.current=k,U.current=N;return}}I.current={x:0,y:0},U.current={x:0,y:0},P()},[e,ce,r,P,c,u,JSON.stringify(F),JSON.stringify(R),D,p,ee,_,JSON.stringify(w)])}const SO={x:{[En.Backward]:!1,[En.Forward]:!1},y:{[En.Backward]:!1,[En.Forward]:!1}};function AO(i){let{delta:e,disabled:t}=i;const r=Rf(e);return cu(o=>{if(t||!r||!o)return SO;const c={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[En.Backward]:o.x[En.Backward]||c.x===-1,[En.Forward]:o.x[En.Forward]||c.x===1},y:{[En.Backward]:o.y[En.Backward]||c.y===-1,[En.Forward]:o.y[En.Forward]||c.y===1}}},[t,e,r])}function xO(i,e){const t=e!=null?i.get(e):void 0,r=t?t.node.current:null;return cu(o=>{var c;return e==null?null:(c=r??o)!=null?c:null},[r,e])}function RO(i,e){return q.useMemo(()=>i.reduce((t,r)=>{const{sensor:o}=r,c=o.activators.map(u=>({eventName:u.eventName,handler:e(u.handler,r)}));return[...t,...c]},[]),[i,e])}var Kc;(function(i){i[i.Always=0]="Always",i[i.BeforeDragging=1]="BeforeDragging",i[i.WhileDragging=2]="WhileDragging"})(Kc||(Kc={}));var rp;(function(i){i.Optimized="optimized"})(rp||(rp={}));const z1=new Map;function CO(i,e){let{dragging:t,dependencies:r,config:o}=e;const[c,u]=q.useState(null),{frequency:m,measure:g,strategy:p}=o,_=q.useRef(i),E=I(),w=Gc(E),R=q.useCallback(function(U){U===void 0&&(U=[]),!w.current&&u(F=>F===null?U:F.concat(U.filter(G=>!F.includes(G))))},[w]),D=q.useRef(null),P=cu(U=>{if(E&&!t)return z1;if(!U||U===z1||_.current!==i||c!=null){const F=new Map;for(let G of i){if(!G)continue;if(c&&c.length>0&&!c.includes(G.id)&&G.rect.current){F.set(G.id,G.rect.current);continue}const ce=G.node.current,ee=ce?new f0(g(ce),ce):null;G.rect.current=ee,ee&&F.set(G.id,ee)}return F}return U},[i,c,t,E,g]);return q.useEffect(()=>{_.current=i},[i]),q.useEffect(()=>{E||R()},[t,E]),q.useEffect(()=>{c&&c.length>0&&u(null)},[JSON.stringify(c)]),q.useEffect(()=>{E||typeof m!="number"||D.current!==null||(D.current=setTimeout(()=>{R(),D.current=null},m))},[m,E,R,...r]),{droppableRects:P,measureDroppableContainers:R,measuringScheduled:c!=null};function I(){switch(p){case Kc.Always:return!1;case Kc.BeforeDragging:return t;default:return!t}}}function y0(i,e){return cu(t=>i?t||(typeof e=="function"?e(i):i):null,[e,i])}function NO(i,e){return y0(i,e)}function IO(i){let{callback:e,disabled:t}=i;const r=ed(e),o=q.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:c}=window;return new c(r)},[r,t]);return q.useEffect(()=>()=>o?.disconnect(),[o]),o}function sd(i){let{callback:e,disabled:t}=i;const r=ed(e),o=q.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:c}=window;return new c(r)},[t]);return q.useEffect(()=>()=>o?.disconnect(),[o]),o}function DO(i){return new f0(uu(i),i)}function B1(i,e,t){e===void 0&&(e=DO);const[r,o]=q.useState(null);function c(){o(g=>{if(!i)return null;if(i.isConnected===!1){var p;return(p=g??t)!=null?p:null}const _=e(i);return JSON.stringify(g)===JSON.stringify(_)?g:_})}const u=IO({callback(g){if(i)for(const p of g){const{type:_,target:E}=p;if(_==="childList"&&E instanceof HTMLElement&&E.contains(i)){c();break}}}}),m=sd({callback:c});return ir(()=>{c(),i?(m?.observe(i),u?.observe(document.body,{childList:!0,subtree:!0})):(m?.disconnect(),u?.disconnect())},[i]),r}function OO(i){const e=y0(i);return Vw(i,e)}const q1=[];function MO(i){const e=q.useRef(i),t=cu(r=>i?r&&r!==q1&&i&&e.current&&i.parentNode===e.current.parentNode?r:nd(i):q1,[i]);return q.useEffect(()=>{e.current=i},[i]),t}function kO(i){const[e,t]=q.useState(null),r=q.useRef(i),o=q.useCallback(c=>{const u=xg(c.target);u&&t(m=>m?(m.set(u,ip(u)),new Map(m)):null)},[]);return q.useEffect(()=>{const c=r.current;if(i!==c){u(c);const m=i.map(g=>{const p=xg(g);return p?(p.addEventListener("scroll",o,{passive:!0}),[p,ip(p)]):null}).filter(g=>g!=null);t(m.length?new Map(m):null),r.current=i}return()=>{u(i),u(c)};function u(m){m.forEach(g=>{const p=xg(g);p?.removeEventListener("scroll",o)})}},[o,i]),q.useMemo(()=>i.length?e?Array.from(e.values()).reduce((c,u)=>Yo(c,u),rs):qw(i):rs,[i,e])}function H1(i,e){e===void 0&&(e=[]);const t=q.useRef(null);return q.useEffect(()=>{t.current=null},e),q.useEffect(()=>{const r=i!==rs;r&&!t.current&&(t.current=i),!r&&t.current&&(t.current=null)},[i]),t.current?$c(i,t.current):rs}function VO(i){q.useEffect(()=>{if(!Zf)return;const e=i.map(t=>{let{sensor:r}=t;return r.setup==null?void 0:r.setup()});return()=>{for(const t of e)t?.()}},i.map(e=>{let{sensor:t}=e;return t}))}function PO(i,e){return q.useMemo(()=>i.reduce((t,r)=>{let{eventName:o,handler:c}=r;return t[o]=u=>{c(u,e)},t},{}),[i,e])}function Gw(i){return q.useMemo(()=>i?cO(i):null,[i])}const F1=[];function LO(i,e){e===void 0&&(e=uu);const[t]=i,r=Gw(t?ti(t):null),[o,c]=q.useState(F1);function u(){c(()=>i.length?i.map(g=>zw(g)?r:new f0(e(g),g)):F1)}const m=sd({callback:u});return ir(()=>{m?.disconnect(),u(),i.forEach(g=>m?.observe(g))},[i]),o}function $w(i){if(!i)return null;if(i.children.length>1)return i;const e=i.children[0];return lu(e)?e:i}function jO(i){let{measure:e}=i;const[t,r]=q.useState(null),o=q.useCallback(p=>{for(const{target:_}of p)if(lu(_)){r(E=>{const w=e(_);return E?{...E,width:w.width,height:w.height}:w});break}},[e]),c=sd({callback:o}),u=q.useCallback(p=>{const _=$w(p);c?.disconnect(),_&&c?.observe(_),r(_?e(_):null)},[e,c]),[m,g]=xf(u);return q.useMemo(()=>({nodeRef:m,rect:t,setRef:g}),[t,m,g])}const UO=[{sensor:id,options:{}},{sensor:d0,options:{}}],zO={current:{}},sf={draggable:{measure:P1},droppable:{measure:P1,strategy:Kc.WhileDragging,frequency:rp.Optimized},dragOverlay:{measure:uu}};class Ic extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return(t=(r=this.get(e))==null?void 0:r.node.current)!=null?t:void 0}}const BO={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ic,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Nf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:sf,measureDroppableContainers:Nf,windowRect:null,measuringScheduled:!1},Kw={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Nf,draggableNodes:new Map,over:null,measureDroppableContainers:Nf},hu=q.createContext(Kw),Qw=q.createContext(BO);function qO(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ic}}}function HO(i,e){switch(e.type){case mn.DragStart:return{...i,draggable:{...i.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case mn.DragMove:return i.draggable.active==null?i:{...i,draggable:{...i.draggable,translate:{x:e.coordinates.x-i.draggable.initialCoordinates.x,y:e.coordinates.y-i.draggable.initialCoordinates.y}}};case mn.DragEnd:case mn.DragCancel:return{...i,draggable:{...i.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case mn.RegisterDroppable:{const{element:t}=e,{id:r}=t,o=new Ic(i.droppable.containers);return o.set(r,t),{...i,droppable:{...i.droppable,containers:o}}}case mn.SetDroppableDisabled:{const{id:t,key:r,disabled:o}=e,c=i.droppable.containers.get(t);if(!c||r!==c.key)return i;const u=new Ic(i.droppable.containers);return u.set(t,{...c,disabled:o}),{...i,droppable:{...i.droppable,containers:u}}}case mn.UnregisterDroppable:{const{id:t,key:r}=e,o=i.droppable.containers.get(t);if(!o||r!==o.key)return i;const c=new Ic(i.droppable.containers);return c.delete(t),{...i,droppable:{...i.droppable,containers:c}}}default:return i}}function FO(i){let{disabled:e}=i;const{active:t,activatorEvent:r,draggableNodes:o}=q.useContext(hu),c=Rf(r),u=Rf(t?.id);return q.useEffect(()=>{if(!e&&!r&&c&&u!=null){if(!u0(c)||document.activeElement===c.target)return;const m=o.get(u);if(!m)return;const{activatorNode:g,node:p}=m;if(!g.current&&!p.current)return;requestAnimationFrame(()=>{for(const _ of[g.current,p.current]){if(!_)continue;const E=q4(_);if(E){E.focus();break}}})}},[r,e,o,u,c]),null}function Yw(i,e){let{transform:t,...r}=e;return i!=null&&i.length?i.reduce((o,c)=>c({transform:o,...r}),t):t}function GO(i){return q.useMemo(()=>({draggable:{...sf.draggable,...i?.draggable},droppable:{...sf.droppable,...i?.droppable},dragOverlay:{...sf.dragOverlay,...i?.dragOverlay}}),[i?.draggable,i?.droppable,i?.dragOverlay])}function $O(i){let{activeNode:e,measure:t,initialRect:r,config:o=!0}=i;const c=q.useRef(!1),{x:u,y:m}=typeof o=="boolean"?{x:o,y:o}:o;ir(()=>{if(!u&&!m||!e){c.current=!1;return}if(c.current||!r)return;const p=e?.node.current;if(!p||p.isConnected===!1)return;const _=t(p),E=Vw(_,r);if(u||(E.x=0),m||(E.y=0),c.current=!0,Math.abs(E.x)>0||Math.abs(E.y)>0){const w=Lw(p);w&&w.scrollBy({top:E.y,left:E.x})}},[e,u,m,r,t])}const rd=q.createContext({...rs,scaleX:1,scaleY:1});var Fr;(function(i){i[i.Uninitialized=0]="Uninitialized",i[i.Initializing=1]="Initializing",i[i.Initialized=2]="Initialized"})(Fr||(Fr={}));const v0=q.memo(function(e){var t,r,o,c;let{id:u,accessibility:m,autoScroll:g=!0,children:p,sensors:_=UO,collisionDetection:E=iO,measuring:w,modifiers:R,...D}=e;const P=q.useReducer(HO,void 0,qO),[I,U]=P,[F,G]=Q4(),[ce,ee]=q.useState(Fr.Uninitialized),J=ce===Fr.Initialized,{draggable:{active:C,nodes:A,translate:N},droppable:{containers:k}}=I,M=C!=null?A.get(C):null,z=q.useRef({initial:null,translated:null}),O=q.useMemo(()=>{var He;return C!=null?{id:C,data:(He=M?.data)!=null?He:zO,rect:z}:null},[C,M]),Pe=q.useRef(null),[mt,ie]=q.useState(null),[he,be]=q.useState(null),Me=Gc(D,Object.values(D)),Be=td("DndDescribedBy",u),L=q.useMemo(()=>k.getEnabled(),[k]),se=GO(w),{droppableRects:me,measureDroppableContainers:de,measuringScheduled:ve}=CO(L,{dragging:J,dependencies:[N.x,N.y],config:se.droppable}),Ae=xO(A,C),je=q.useMemo(()=>he?Cf(he):null,[he]),Dt=Ki(),ut=NO(Ae,se.draggable.measure);$O({activeNode:C!=null?A.get(C):null,config:Dt.layoutShiftCompensation,initialRect:ut,measure:se.draggable.measure});const Ht=B1(Ae,se.draggable.measure,ut),Si=B1(Ae?Ae.parentElement:null),Vn=q.useRef({activatorEvent:null,active:null,activeNode:Ae,collisionRect:null,collisions:null,droppableRects:me,draggableNodes:A,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),qi=k.getNodeFor((t=Vn.current.over)==null?void 0:t.id),Jt=jO({measure:se.dragOverlay.measure}),fi=(r=Jt.nodeRef.current)!=null?r:Ae,Pn=J?(o=Jt.rect)!=null?o:Ht:null,as=!!(Jt.nodeRef.current&&Jt.rect),Hi=OO(as?null:Ht),St=Gw(fi?ti(fi):null),ht=MO(J?qi??Ae:null),Hn=LO(ht),os=Yw(R,{transform:{x:N.x-Hi.x,y:N.y-Hi.y,scaleX:1,scaleY:1},activatorEvent:he,active:O,activeNodeRect:Ht,containerNodeRect:Si,draggingNodeRect:Pn,over:Vn.current.over,overlayNodeRect:Jt.rect,scrollableAncestors:ht,scrollableAncestorRects:Hn,windowRect:St}),ls=je?Yo(je,N):null,Wt=kO(ht),Fi=H1(Wt),Rs=H1(Wt,[Ht]),Fn=Yo(os,Fi),Sn=Pn?aO(Pn,os):null,Gi=O&&Sn?E({active:O,collisionRect:Sn,droppableRects:me,droppableContainers:L,pointerCoordinates:ls}):null,Cs=kw(Gi,"id"),[Gn,Ns]=q.useState(null),$n=as?os:Yo(os,Rs),Ft=sO($n,(c=Gn?.rect)!=null?c:null,Ht),pn=q.useRef(null),At=q.useCallback((He,xt)=>{let{sensor:Rt,options:jt}=xt;if(Pe.current==null)return;const yn=A.get(Pe.current);if(!yn)return;const Zt=He.nativeEvent,Vt=new Rt({active:Pe.current,activeNode:yn,event:Zt,options:jt,context:Vn,onAbort(gt){if(!A.get(gt))return;const{onDragAbort:Gt}=Me.current,fe={id:gt};Gt?.(fe),F({type:"onDragAbort",event:fe})},onPending(gt,pt,Gt,fe){if(!A.get(gt))return;const{onDragPending:nt}=Me.current,Ot={id:gt,constraint:pt,initialCoordinates:Gt,offset:fe};nt?.(Ot),F({type:"onDragPending",event:Ot})},onStart(gt){const pt=Pe.current;if(pt==null)return;const Gt=A.get(pt);if(!Gt)return;const{onDragStart:fe}=Me.current,un={activatorEvent:Zt,active:{id:pt,data:Gt.data,rect:z}};pc.unstable_batchedUpdates(()=>{fe?.(un),ee(Fr.Initializing),U({type:mn.DragStart,initialCoordinates:gt,active:pt}),F({type:"onDragStart",event:un}),ie(pn.current),be(Zt)})},onMove(gt){U({type:mn.DragMove,coordinates:gt})},onEnd:W(mn.DragEnd),onCancel:W(mn.DragCancel)});pn.current=Vt;function W(gt){return async function(){const{active:Gt,collisions:fe,over:un,scrollAdjustedTranslate:nt}=Vn.current;let Ot=null;if(Gt&&nt){const{cancelDrop:hn}=Me.current;Ot={activatorEvent:Zt,active:Gt,collisions:fe,delta:nt,over:un},gt===mn.DragEnd&&typeof hn=="function"&&await Promise.resolve(hn(Ot))&&(gt=mn.DragCancel)}Pe.current=null,pc.unstable_batchedUpdates(()=>{U({type:gt}),ee(Fr.Uninitialized),Ns(null),ie(null),be(null),pn.current=null;const hn=gt===mn.DragEnd?"onDragEnd":"onDragCancel";if(Ot){const yt=Me.current[hn];yt?.(Ot),F({type:hn,event:Ot})}})}}},[A]),Is=q.useCallback((He,xt)=>(Rt,jt)=>{const yn=Rt.nativeEvent,Zt=A.get(jt);if(Pe.current!==null||!Zt||yn.dndKit||yn.defaultPrevented)return;const Vt={active:Zt};He(Rt,xt.options,Vt)===!0&&(yn.dndKit={capturedBy:xt.sensor},Pe.current=jt,At(Rt,xt))},[A,At]),$i=RO(_,Is);VO(_),ir(()=>{Ht&&ce===Fr.Initializing&&ee(Fr.Initialized)},[Ht,ce]),q.useEffect(()=>{const{onDragMove:He}=Me.current,{active:xt,activatorEvent:Rt,collisions:jt,over:yn}=Vn.current;if(!xt||!Rt)return;const Zt={active:xt,activatorEvent:Rt,collisions:jt,delta:{x:Fn.x,y:Fn.y},over:yn};pc.unstable_batchedUpdates(()=>{He?.(Zt),F({type:"onDragMove",event:Zt})})},[Fn.x,Fn.y]),q.useEffect(()=>{const{active:He,activatorEvent:xt,collisions:Rt,droppableContainers:jt,scrollAdjustedTranslate:yn}=Vn.current;if(!He||Pe.current==null||!xt||!yn)return;const{onDragOver:Zt}=Me.current,Vt=jt.get(Cs),W=Vt&&Vt.rect.current?{id:Vt.id,rect:Vt.rect.current,data:Vt.data,disabled:Vt.disabled}:null,gt={active:He,activatorEvent:xt,collisions:Rt,delta:{x:yn.x,y:yn.y},over:W};pc.unstable_batchedUpdates(()=>{Ns(W),Zt?.(gt),F({type:"onDragOver",event:gt})})},[Cs]),ir(()=>{Vn.current={activatorEvent:he,active:O,activeNode:Ae,collisionRect:Sn,collisions:Gi,droppableRects:me,draggableNodes:A,draggingNode:fi,draggingNodeRect:Pn,droppableContainers:k,over:Gn,scrollableAncestors:ht,scrollAdjustedTranslate:Fn},z.current={initial:Pn,translated:Sn}},[O,Ae,Gi,Sn,A,fi,Pn,me,k,Gn,ht,Fn]),wO({...Dt,delta:N,draggingRect:Sn,pointerCoordinates:ls,scrollableAncestors:ht,scrollableAncestorRects:Hn});const rr=q.useMemo(()=>({active:O,activeNode:Ae,activeNodeRect:Ht,activatorEvent:he,collisions:Gi,containerNodeRect:Si,dragOverlay:Jt,draggableNodes:A,droppableContainers:k,droppableRects:me,over:Gn,measureDroppableContainers:de,scrollableAncestors:ht,scrollableAncestorRects:Hn,measuringConfiguration:se,measuringScheduled:ve,windowRect:St}),[O,Ae,Ht,he,Gi,Si,Jt,A,k,me,Gn,de,ht,Hn,se,ve,St]),ni=q.useMemo(()=>({activatorEvent:he,activators:$i,active:O,activeNodeRect:Ht,ariaDescribedById:{draggable:Be},dispatch:U,draggableNodes:A,over:Gn,measureDroppableContainers:de}),[he,$i,O,Ht,U,Be,A,Gn,de]);return ot.createElement(Dw.Provider,{value:G},ot.createElement(hu.Provider,{value:ni},ot.createElement(Qw.Provider,{value:rr},ot.createElement(rd.Provider,{value:Ft},p)),ot.createElement(FO,{disabled:m?.restoreFocus===!1})),ot.createElement(J4,{...m,hiddenTextDescribedById:Be}));function Ki(){const He=mt?.autoScrollEnabled===!1,xt=typeof g=="object"?g.enabled===!1:g===!1,Rt=J&&!He&&!xt;return typeof g=="object"?{...g,enabled:Rt}:{enabled:Rt}}}),KO=q.createContext(null),G1="button",QO="Draggable";function fu(i){let{id:e,data:t,disabled:r=!1,attributes:o}=i;const c=td(QO),{activators:u,activatorEvent:m,active:g,activeNodeRect:p,ariaDescribedById:_,draggableNodes:E,over:w}=q.useContext(hu),{role:R=G1,roleDescription:D="draggable",tabIndex:P=0}=o??{},I=g?.id===e,U=q.useContext(I?rd:KO),[F,G]=xf(),[ce,ee]=xf(),J=PO(u,e),C=Gc(t);ir(()=>(E.set(e,{id:e,key:c,node:F,activatorNode:ce,data:C}),()=>{const N=E.get(e);N&&N.key===c&&E.delete(e)}),[E,e]);const A=q.useMemo(()=>({role:R,tabIndex:P,"aria-disabled":r,"aria-pressed":I&&R===G1?!0:void 0,"aria-roledescription":D,"aria-describedby":_.draggable}),[r,R,P,I,D,_.draggable]);return{active:g,activatorEvent:m,activeNodeRect:p,attributes:A,isDragging:I,listeners:r?void 0:J,node:F,over:w,setNodeRef:G,setActivatorNodeRef:ee,transform:U}}function YO(){return q.useContext(Qw)}const XO="Droppable",JO={timeout:25};function du(i){let{data:e,disabled:t=!1,id:r,resizeObserverConfig:o}=i;const c=td(XO),{active:u,dispatch:m,over:g,measureDroppableContainers:p}=q.useContext(hu),_=q.useRef({disabled:t}),E=q.useRef(!1),w=q.useRef(null),R=q.useRef(null),{disabled:D,updateMeasurementsFor:P,timeout:I}={...JO,...o},U=Gc(P??r),F=q.useCallback(()=>{if(!E.current){E.current=!0;return}R.current!=null&&clearTimeout(R.current),R.current=setTimeout(()=>{p(Array.isArray(U.current)?U.current:[U.current]),R.current=null},I)},[I]),G=sd({callback:F,disabled:D||!u}),ce=q.useCallback((A,N)=>{G&&(N&&(G.unobserve(N),E.current=!1),A&&G.observe(A))},[G]),[ee,J]=xf(ce),C=Gc(e);return q.useEffect(()=>{!G||!ee.current||(G.disconnect(),E.current=!1,G.observe(ee.current))},[ee,G]),q.useEffect(()=>(m({type:mn.RegisterDroppable,element:{id:r,key:c,disabled:t,node:ee,rect:w,data:C}}),()=>m({type:mn.UnregisterDroppable,key:c,id:r})),[r]),q.useEffect(()=>{t!==_.current.disabled&&(m({type:mn.SetDroppableDisabled,id:r,key:c,disabled:t}),_.current.disabled=t)},[r,c,t,m]),{active:u,rect:w,isOver:g?.id===r,node:ee,over:g,setNodeRef:J}}function WO(i){let{animation:e,children:t}=i;const[r,o]=q.useState(null),[c,u]=q.useState(null),m=Rf(t);return!t&&!r&&m&&o(m),ir(()=>{if(!c)return;const g=r?.key,p=r?.props.id;if(g==null||p==null){o(null);return}Promise.resolve(e(p,c)).then(()=>{o(null)})},[e,r,c]),ot.createElement(ot.Fragment,null,t,r?q.cloneElement(r,{ref:u}):null)}const ZO={x:0,y:0,scaleX:1,scaleY:1};function eM(i){let{children:e}=i;return ot.createElement(hu.Provider,{value:Kw},ot.createElement(rd.Provider,{value:ZO},e))}const tM={position:"fixed",touchAction:"none"},nM=i=>u0(i)?"transform 250ms ease":void 0,iM=q.forwardRef((i,e)=>{let{as:t,activatorEvent:r,adjustScale:o,children:c,className:u,rect:m,style:g,transform:p,transition:_=nM}=i;if(!m)return null;const E=o?p:{...p,scaleX:1,scaleY:1},w={...tM,width:m.width,height:m.height,top:m.top,left:m.left,transform:al.Transform.toString(E),transformOrigin:o&&r?W4(r,m):void 0,transition:typeof _=="function"?_(r):_,...g};return ot.createElement(t,{className:u,style:w,ref:e},c)}),sM=i=>e=>{let{active:t,dragOverlay:r}=e;const o={},{styles:c,className:u}=i;if(c!=null&&c.active)for(const[m,g]of Object.entries(c.active))g!==void 0&&(o[m]=t.node.style.getPropertyValue(m),t.node.style.setProperty(m,g));if(c!=null&&c.dragOverlay)for(const[m,g]of Object.entries(c.dragOverlay))g!==void 0&&r.node.style.setProperty(m,g);return u!=null&&u.active&&t.node.classList.add(u.active),u!=null&&u.dragOverlay&&r.node.classList.add(u.dragOverlay),function(){for(const[g,p]of Object.entries(o))t.node.style.setProperty(g,p);u!=null&&u.active&&t.node.classList.remove(u.active)}},rM=i=>{let{transform:{initial:e,final:t}}=i;return[{transform:al.Transform.toString(e)},{transform:al.Transform.toString(t)}]},aM={duration:250,easing:"ease",keyframes:rM,sideEffects:sM({styles:{active:{opacity:"0"}}})};function oM(i){let{config:e,draggableNodes:t,droppableContainers:r,measuringConfiguration:o}=i;return ed((c,u)=>{if(e===null)return;const m=t.get(c);if(!m)return;const g=m.node.current;if(!g)return;const p=$w(u);if(!p)return;const{transform:_}=ti(u).getComputedStyle(u),E=Pw(_);if(!E)return;const w=typeof e=="function"?e:lM(e);return Hw(g,o.draggable.measure),w({active:{id:c,data:m.data,node:g,rect:o.draggable.measure(g)},draggableNodes:t,dragOverlay:{node:u,rect:o.dragOverlay.measure(p)},droppableContainers:r,measuringConfiguration:o,transform:E})})}function lM(i){const{duration:e,easing:t,sideEffects:r,keyframes:o}={...aM,...i};return c=>{let{active:u,dragOverlay:m,transform:g,...p}=c;if(!e)return;const _={x:m.rect.left-u.rect.left,y:m.rect.top-u.rect.top},E={scaleX:g.scaleX!==1?u.rect.width*g.scaleX/m.rect.width:1,scaleY:g.scaleY!==1?u.rect.height*g.scaleY/m.rect.height:1},w={x:g.x-_.x,y:g.y-_.y,...E},R=o({...p,active:u,dragOverlay:m,transform:{initial:g,final:w}}),[D]=R,P=R[R.length-1];if(JSON.stringify(D)===JSON.stringify(P))return;const I=r?.({active:u,dragOverlay:m,...p}),U=m.node.animate(R,{duration:e,easing:t,fill:"forwards"});return new Promise(F=>{U.onfinish=()=>{I?.(),F()}})}}let $1=0;function cM(i){return q.useMemo(()=>{if(i!=null)return $1++,$1},[i])}const Xw=ot.memo(i=>{let{adjustScale:e=!1,children:t,dropAnimation:r,style:o,transition:c,modifiers:u,wrapperElement:m="div",className:g,zIndex:p=999}=i;const{activatorEvent:_,active:E,activeNodeRect:w,containerNodeRect:R,draggableNodes:D,droppableContainers:P,dragOverlay:I,over:U,measuringConfiguration:F,scrollableAncestors:G,scrollableAncestorRects:ce,windowRect:ee}=YO(),J=q.useContext(rd),C=cM(E?.id),A=Yw(u,{activatorEvent:_,active:E,activeNodeRect:w,containerNodeRect:R,draggingNodeRect:I.rect,over:U,overlayNodeRect:I.rect,scrollableAncestors:G,scrollableAncestorRects:ce,transform:J,windowRect:ee}),N=y0(w),k=oM({config:r,draggableNodes:D,droppableContainers:P,measuringConfiguration:F}),M=N?I.setRef:void 0;return ot.createElement(eM,null,ot.createElement(WO,{animation:k},E&&C?ot.createElement(iM,{key:C,id:E.id,ref:M,as:m,activatorEvent:_,adjustScale:e,className:g,transition:c,rect:N,style:{zIndex:p,...o},transform:A},t):null))}),Xo=i=>new o0(i),uM=(i,e,t,r)=>{try{return i.move({from:e,to:t,promotion:r||"q"})}catch{return null}},hM=({id:i,isLight:e,isHighlighted:t=!1,isActive:r=!1,children:o})=>{const{isOver:c,setNodeRef:u}=du({id:i});return T.jsxs("div",{ref:u,className:`chess-square ${r?"z-50 relative":"overflow-hidden"} ${c?"bg-indigo-500/60 shadow-[inset_0_0_20px_rgba(255,255,255,0.2)] z-10":t?e?"bg-indigo-400/50 shadow-inner":"bg-indigo-600/50 shadow-inner":e?"bg-[#cbd5e1] text-slate-700 shadow-[inset_0_1px_4px_rgba(255,255,255,0.3)]":"bg-[#334155] text-slate-400 shadow-[inset_0_2px_4px_rgba(0,0,0,0.3)]"}`,children:[T.jsx("div",{className:`absolute top-1 left-1 text-[10px] font-black uppercase tracking-tighter opacity-20 pointer-events-none ${e?"text-slate-900":"text-slate-100"}`,children:i}),T.jsx("div",{className:"relative w-full h-full overflow-visible z-10",children:o})]})},fM={w:{p:"",r:"",n:"",b:"",q:"",k:""},b:{p:"",r:"",n:"",b:"",q:"",k:""}},dM=({id:i,type:e,color:t,isDraggable:r=!0})=>{const{attributes:o,listeners:c,setNodeRef:u,transform:m,isDragging:g}=fu({id:i,disabled:!r,data:{type:e,color:t}}),p={transform:al.Translate.toString(m),transition:g?"none":"transform 120ms ease-out",zIndex:g?9999:20};return T.jsx("div",{ref:u,style:p,...c,...o,className:`chess-piece transition-transform duration-120 ease-out ${g?"scale-112 drop-shadow-2xl z-[9999]":"hover:scale-103 z-20"} ${r?"cursor-grab active:cursor-grabbing":"grayscale-[0.2] opacity-90 cursor-default"} text-slate-950 drop-shadow-sm`,children:T.jsx("div",{className:`
        flex items-center justify-center w-full h-full 
        ${t==="w"?"drop-shadow-[0_2px_0_rgba(255,255,255,0.8)]":"drop-shadow-[0_2px_0_rgba(0,0,0,0.5)]"}
      `,children:fM[t][e]})})},mM=({onMove:i,initialFen:e,playerColor:t="w",isGameOver:r=!1})=>{const[o,c]=q.useState(()=>Xo(e)),[u,m]=q.useState([]),[g,p]=q.useState(null);ot.useEffect(()=>{e&&e!==o.fen()&&c(Xo(e))},[e]);const _=h0(Fa(p0,{activationConstraint:{delay:80,tolerance:8}}),Fa(id),Fa(g0)),E=q.useCallback(D=>{const{active:P,over:I}=D;if(m([]),p(null),!I)return;const U=P.id,F=I.id,G=Xo(o.fen());uM(G,U,F)&&(c(G),i&&i(G.fen()))},[o,i]),w=q.useCallback(D=>{p(D);const P=D,I=o.get(P);if(r||!I||I.color!==t||o.turn()!==t){m([]);return}const U=o.moves({square:P,verbose:!0}).map(F=>F.to);m(U)},[o,t]),R=()=>{const D=[],P=["a","b","c","d","e","f","g","h"],I=["8","7","6","5","4","3","2","1"],U=t==="w"?I:[...I].reverse(),F=t==="w"?P:[...P].reverse();for(const G of U)for(const ce of F){const ee=`${ce}${G}`,J=o.get(ee),C=(P.indexOf(ce)+I.indexOf(G))%2===0,A=!!J&&J.color===t&&o.turn()===t&&!r,N=u.includes(ee),k=ee===g;D.push(T.jsx(hM,{id:ee,isLight:C,isHighlighted:N,isActive:k,children:J&&T.jsx(dM,{id:ee,type:J.type,color:J.color,isDraggable:A})},ee))}return D};return T.jsx(v0,{sensors:_,onDragEnd:E,onDragStart:D=>w(D.active.id),children:T.jsx("div",{className:"p-3 lg:p-4 bg-slate-800 rounded-[2rem] lg:rounded-[2.5rem] shadow-[0_0_50px_-12px_rgba(99,102,241,0.25)] border-4 border-slate-700/50 ring-4 ring-slate-900/50",style:{touchAction:"none"},children:T.jsx("div",{className:"grid grid-cols-8 gap-0 rounded-2xl lg:rounded-3xl overflow-hidden border border-slate-700/30 shadow-inner",style:{width:"min(92vw, 720px)",height:"min(92vw, 720px)",gridTemplateColumns:"repeat(8, 1fr)"},children:R()})})})},gM=()=>Math.random().toString(36).substring(2,8).toUpperCase(),K1="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",Jw=i=>{const[e,t]=q.useState(null),[r,o]=q.useState(null),[c,u]=q.useState(!0),[m,g]=q.useState(!0);q.useEffect(()=>{const I=Hc();qc(I).then(U=>{o(U.user.uid)}).catch(U=>{console.error("Auth failed",U)}).finally(()=>g(!1))},[]);const p=async()=>{if(r)return r;const I=Hc(),U=await qc(I);return o(U.user.uid),U.user.uid};return q.useEffect(()=>{if(!On||!Ke){console.warn("Firebase not configured; room sync disabled."),u(!1);return}if(!i){t(null),u(!1);return}u(!0);const I=Jn(Xn(Ke,"rooms"),i),U=Zp(I,F=>{F.exists()?t(F.data()):t(null),u(!1)},F=>{console.error("Room subscription error",F),t(null),u(!1)});return()=>U()},[i]),{room:e,userId:r,loading:c,isAuthLoading:m,createRoom:async()=>{if(!On||!Ke)throw new Error("Firebase not configured");const I=await p(),U=gM(),F=Jn(Xn(Ke,"rooms"),U);return await Wp(F,{fen:K1,whitePlayer:I,blackPlayer:"",turn:"w",status:"active",winner:"",resultReason:""}),U},joinRoom:async I=>{if(!On||!Ke)throw new Error("Firebase not configured");const U=await p(),F=Jn(Xn(Ke,"rooms"),I);await xc(Ke,async G=>{const ce=await G.get(F);if(!ce.exists())throw new Error("Room not found");const J={...ce.data()};J.whitePlayer?!J.blackPlayer&&J.whitePlayer!==U&&(J.blackPlayer=U):J.whitePlayer=U,G.update(F,J)})},updateMove:async I=>{if(!On||!Ke||!i)return;const U=Jn(Xn(Ke,"rooms"),i);await xc(Ke,async F=>{const G=await F.get(U);if(!G.exists())return;const ce=G.data();if(ce.status&&ce.status!=="active")return;const ee=new o0(I),J=ee.turn();let C="active",A="",N="";ee.isCheckmate()?(C="checkmate",A=J==="w"?"b":"w",N="checkmate"):ee.isStalemate&&ee.isStalemate()?(C="stalemate",A="",N="stalemate"):ee.isDraw()&&(C="draw",A="",N="draw"),F.update(U,{fen:I,turn:J,status:C,winner:A,resultReason:N})})},resignGame:async I=>{if(!On||!Ke||!i)return;const U=Jn(Xn(Ke,"rooms"),i);await Ac(U,{status:"resigned",winner:I==="w"?"b":"w",resultReason:"resigned"})},resetGame:async()=>{if(!On||!Ke||!i)return;const I=Jn(Xn(Ke,"rooms"),i);await Ac(I,{fen:K1,turn:"w",status:"active",winner:"",resultReason:""})},leaveRoom:async()=>{if(!(!On||!Ke)&&i)try{const I=await p(),U=Jn(Xn(Ke,"rooms"),i);await xc(Ke,async F=>{const G=await F.get(U);if(!G.exists())return;const ee={...G.data()};ee.whitePlayer===I?ee.whitePlayer="":ee.blackPlayer===I&&(ee.blackPlayer=""),F.update(U,ee)})}catch(I){console.error("Error leaving room:",I)}}}},pM={p:10,n:30,b:30,r:50,q:90,k:900},Q1=[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,-.5,-1,0,0,-1,-.5,.5],[.5,1,1,-2,-2,1,1,.5],[0,0,0,0,0,0,0,0]],Y1=[[-5,-4,-3,-3,-3,-3,-4,-5],[-4,-2,0,0,0,0,-2,-4],[-3,0,1,1.5,1.5,1,0,-3],[-3,.5,1.5,2,2,1.5,.5,-3],[-3,0,1.5,2,2,1.5,0,-3],[-3,.5,1,1.5,1.5,1,.5,-3],[-4,-2,0,.5,.5,0,-2,-4],[-5,-4,-3,-3,-3,-3,-4,-5]],yM=i=>{let e=0;const t=i.board();for(let r=0;r<8;r++)for(let o=0;o<8;o++){const c=t[r][o];if(c){const u=pM[c.type];let m=0;c.type==="p"&&(m=c.color==="w"?Q1[r][o]:Q1[7-r][o]),c.type==="n"&&(m=c.color==="w"?Y1[r][o]:Y1[7-r][o]),c.color==="w"?e+=u+m*.1:e-=u+m*.1}}return e},ap=(i,e,t,r,o)=>{if(e===0||i.isGameOver())return-yM(i);const c=i.moves();if(o){let u=-1/0;for(const m of c){i.move(m);const g=ap(i,e-1,t,r,!1);if(i.undo(),u=Math.max(u,g),t=Math.max(t,g),r<=t)break}return u}else{let u=1/0;for(const m of c){i.move(m);const g=ap(i,e-1,t,r,!0);if(i.undo(),u=Math.min(u,g),r=Math.min(r,g),r<=t)break}return u}},vM=(i,e="Normal")=>{const t=i.moves();if(t.length===0)return null;if(e==="Easy"&&Math.random()>.2)return t[Math.floor(Math.random()*t.length)];let r=null,o=1/0;t.sort((u,m)=>{const g=u.includes("x")?1:0;return(m.includes("x")?1:0)-g});const c=e==="Easy"?1:e==="Hard"?3:2;for(const u of t){i.move(u);const m=ap(i,c,-1/0,1/0,!0);i.undo(),m<o&&(o=m,r=u)}return r||t[0]},_M=({roomId:i="",mode:e="online",aiDifficulty:t="Normal",onExit:r})=>{const o=Jw(e==="online"?i:null),[c,u]=q.useState(()=>Xo()),[m,g]=q.useState(c.fen()),[p,_]=q.useState("active"),[E,w]=q.useState(""),R=e==="local",D=R?{fen:m,turn:c.turn(),whitePlayer:"local-white",blackPlayer:"local-black",status:p,winner:E}:o.room,P=R?!1:o.loading,I=de=>{const ve=Xo(de);u(ve),g(de),ve.isCheckmate()?(_("checkmate"),w(ve.turn()==="w"?"b":"w")):ve.isDraw()?_("draw"):ve.isStalemate&&ve.isStalemate()&&_("stalemate")};q.useEffect(()=>{if(R&&c.turn()==="b"&&p==="active"){const de=setTimeout(()=>{const ve=vM(c,t);ve&&(c.move(ve),I(c.fen()))},500);return()=>clearTimeout(de)}},[m,R,p,t]);const U=()=>{const de=Xo();u(de),g(de.fen()),_("active"),w(""),C(0),N(0),M(0)},F=R?I:o.updateMove,G=R?de=>{_("active"),w(de==="w"?"b":"w"),alert(`${de==="w"?"White":"Black"} resigned.`)}:o.resignGame,ce=R?U:o.resetGame,ee=R?D?.turn==="w"?"local-white":"local-black":o.userId,[J,C]=ot.useState(0),[A,N]=ot.useState(0),[k,M]=ot.useState(0);if(ot.useEffect(()=>{!R&&i&&o.joinRoom&&o.joinRoom(i)},[i,R]),ot.useEffect(()=>{if(!D||D.status&&D.status!=="active")return;const de=window.setInterval(()=>{C(ve=>ve+1),N(ve=>ve+(D.turn==="w"?1:0)),M(ve=>ve+(D.turn==="b"?1:0))},1e3);return()=>window.clearInterval(de)},[D?.turn,D?.status]),P)return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-6 animate-pulse",children:[T.jsx("div",{className:"relative shadow-2xl shadow-indigo-500/20 rounded-full p-4",children:T.jsx(nE,{className:"w-16 h-16 text-indigo-500 animate-spin"})}),T.jsxs("div",{className:"text-center space-y-2",children:[T.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest",children:"Entering Arena"}),T.jsx("p",{className:"text-slate-500 font-medium",children:"Synchronizing with the global lattice..."})]})]});if(!D)return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[T.jsxs("div",{className:"text-center space-y-4",children:[T.jsx("h2",{className:"text-5xl font-black text-white italic",children:"Room Dissolved"}),T.jsx("p",{className:"text-slate-400 text-lg",children:"The arena you seek no longer exists or the link is expired."})]}),T.jsx("button",{onClick:r,className:"btn-premium px-10 py-4 text-xl",children:"Return to Lobby"})]});const z=D.whitePlayer===ee||R,O=D.blackPlayer===ee,Pe=R||ee===D.whitePlayer?"w":ee===D.blackPlayer?"b":"w",mt=D.turn===Pe,ie=new o0(D.fen),he={isCheck:ie.isCheck(),isCheckmate:ie.isCheckmate(),isDraw:ie.isDraw(),isStalemate:typeof ie.isStalemate=="function"?ie.isStalemate():!1,turn:ie.turn()},be=D.status??"active",Me=D.winner??"",Be=be!=="active",L=de=>{const ve=Math.floor(de/60).toString().padStart(2,"0"),Ae=(de%60).toString().padStart(2,"0");return`${ve}:${Ae}`},se=be==="checkmate"?`Checkmate  ${Me==="w"?"White":"Black"} wins`:be==="stalemate"?"Stalemate  Draw":be==="draw"?"Draw":be==="resigned"?`Resigned  ${Me==="w"?"White":"Black"} wins`:he.isCheck?`${he.turn==="w"?"White":"Black"} is in check`:mt?"Your Turn":"Waiting...",me=()=>{navigator.clipboard.writeText(i),alert("Room ID copied to clipboard!")};return T.jsxs("div",{className:"flex flex-col items-center gap-8 lg:gap-12 py-6 lg:py-10 w-full animate-in fade-in duration-700",children:[T.jsxs("header",{className:"w-full max-w-6xl flex items-center justify-between px-4 lg:px-6",children:[T.jsxs("button",{onClick:()=>{!R&&o.leaveRoom&&o.leaveRoom(),r()},className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all font-bold uppercase tracking-widest text-xs",children:[T.jsx("div",{className:"p-2 rounded-xl bg-slate-900 border border-slate-800 group-hover:border-slate-700 group-hover:-translate-x-1 transition-transform",children:T.jsx(vc,{size:18})}),"Back"]}),!R&&T.jsx("div",{className:"flex items-center gap-4",children:T.jsxs("div",{className:"liquid-glass px-6 py-3 flex items-center gap-6",children:[T.jsxs("div",{className:"flex flex-col gap-0.5",children:[T.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-slate-500 font-black",children:"Arena ID"}),T.jsx("code",{className:"text-indigo-300 font-mono font-bold",children:i})]}),T.jsx("div",{className:"h-8 w-px bg-slate-800"}),T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("button",{onClick:me,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:T.jsx(eE,{size:18})}),T.jsx("button",{className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:T.jsx(iE,{size:18})})]})]})}),R&&T.jsx("div",{className:"px-6 py-3 liquid-glass text-indigo-300 font-bold uppercase tracking-widest text-xs",children:"Single Player Mode"})]}),T.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-6 lg:gap-16 w-full max-w-7xl px-4 lg:px-6",children:[T.jsxs("div",{className:"relative group w-full flex justify-center max-w-full overflow-visible",children:[T.jsx("div",{className:"absolute -inset-4 bg-linear-to-r from-indigo-500 to-pink-500 rounded-[2.5rem] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"}),T.jsx(mM,{initialFen:D.fen,onMove:F,playerColor:Pe,isGameOver:Be})]}),T.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-6 lg:gap-8 mt-0 lg:mt-0",children:[T.jsxs("div",{className:"liquid-glass p-5 lg:p-8 space-y-6 lg:space-y-8 border-l-4 border-l-indigo-500",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:"Game Status"}),T.jsxs("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-2 ${be==="active"?mt?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-slate-800 text-slate-500":"bg-indigo-500/10 text-indigo-300 border border-indigo-500/30"}`,children:[T.jsx("span",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${be==="active"?"bg-green-500":"bg-indigo-400"}`}),R?D.turn==="w"?" White Turn":" Black Turn":se]})]}),be==="active"&&he.isCheck&&T.jsxs("div",{className:"p-3 rounded-2xl bg-amber-500/10 border border-amber-500/30 text-amber-200 text-[10px] lg:text-xs font-black uppercase tracking-widest",children:["CHECK! ",he.turn==="w"?"White":"Black"," to move."]}),Be&&T.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/10 border border-indigo-500/30 text-indigo-100 text-sm lg:text-base font-bold",children:se}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 p-4 rounded-2xl bg-slate-900/60 border border-slate-800/80 text-[10px] lg:text-xs font-bold uppercase tracking-widest",children:[T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"Time"}),T.jsx("div",{className:"text-white text-base",children:L(J)})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"White"}),T.jsx("div",{className:"text-emerald-300 text-base",children:L(A)})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"Black"}),T.jsx("div",{className:"text-sky-300 text-base",children:L(k)})]})]}),!R&&T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex items-center gap-3 lg:gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[T.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${z?"bg-white text-slate-950":"bg-slate-800 text-slate-400"}`,children:"W"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"White Player"}),T.jsx("div",{className:"text-xs text-slate-500 font-medium",children:D.whitePlayer===ee?"Connected (You)":D.whitePlayer?"Opponent Ready":"Awaiting Entry..."})]})]}),T.jsxs("div",{className:"flex items-center gap-3 lg:gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[T.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${O?"bg-indigo-500 text-white":"bg-slate-800 text-slate-400"}`,children:"B"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"Black Player"}),T.jsx("div",{className:"text-xs text-slate-500 font-medium",children:D.blackPlayer===ee?"Connected (You)":D.blackPlayer?"Opponent Ready":"Awaiting Entry..."})]})]})]})]}),T.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[T.jsxs("button",{disabled:Be,onClick:()=>G(Pe),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-slate-800 bg-slate-900/60 text-slate-200 font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:border-red-500/50 hover:text-red-200 transition",children:[T.jsx(tE,{size:18}),"Resign"]}),T.jsxs("button",{disabled:!Be&&!R,onClick:()=>ce(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 text-indigo-100 font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:bg-indigo-500/20 transition",children:[T.jsx(up,{size:18}),"Rematch"]})]})]}),!R&&T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[T.jsx(hp,{size:20,className:"mx-auto text-slate-600"}),T.jsx("div",{className:"text-xl font-black text-white italic",children:D.whitePlayer&&D.blackPlayer?"2/2":D.whitePlayer||D.blackPlayer?"1/2":"0/2"}),T.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Connected"})]}),T.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[T.jsx(sE,{size:20,className:"mx-auto text-indigo-400"}),T.jsx("div",{className:"text-xl font-black text-white italic",children:"24ms"}),T.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Latency"})]})]})]})]}),T.jsx("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10",children:"Transparent Strategy Arena"})]})},bM=[2,0,0,0,0,-5,0,-3,0,0,0,5,-5,0,0,0,3,0,5,0,0,0,0,-2],yc=()=>{const i=Math.floor(Math.random()*6)+1,e=Math.floor(Math.random()*6)+1;return i===e?[i,i,i,i]:[i,e]},Dc=()=>{const i=yc();return{board:[...bM],bar:{white:0,black:0},off:{white:0,black:0},turn:"white",dice:i,movesLeft:[...i],validMoves:[],winner:null}},EM=(i,e)=>{const t=i.board;if(e==="white"){if(i.bar.white>0)return!1;for(let r=0;r<18;r++)if(t[r]>0)return!1;return!0}else{if(i.bar.black>0)return!1;for(let r=6;r<24;r++)if(t[r]<0)return!1;return!0}},op=i=>{if(i.winner)return[];const e=o=>{const c=[],{turn:u,board:m,bar:g,movesLeft:p}=o,_=Array.from(new Set(p));if(p.length===0)return[];const E=u==="white",w=E?1:-1;if((E?g.white:g.black)>0){for(const D of _){const P=E?D-1:24-D,I=m[P];(E?I<-1:I>1)||c.push({from:"bar",to:P,roll:D,isHit:E?I===-1:I===1})}return c}for(let D=0;D<24;D++){const P=m[D];if(!(E&&P<=0)&&!(!E&&P>=0))for(const I of _){const U=D+w*I;if(EM(o,u)){if(E&&U===24){c.push({from:D,to:"off",roll:I});continue}if(!E&&U===-1){c.push({from:D,to:"off",roll:I});continue}if(E&&U>24){let ee=!0;for(let J=18;J<D;J++)m[J]>0&&(ee=!1);ee&&c.push({from:D,to:"off",roll:I})}if(!E&&U<-1){let ee=!0;for(let J=5;J>D;J--)m[J]<0&&(ee=!1);ee&&c.push({from:D,to:"off",roll:I})}}if(U<0||U>23)continue;const G=m[U];(E?G<-1:G>1)||c.push({from:D,to:U,roll:I,isHit:E?G===-1:G===1})}}return c},t=e(i),r=[...t];if(i.movesLeft.length>1)for(const o of t){const c=mu(i,o),u=e(c);if(o.to!=="off"){const m=u.filter(g=>g.from===o.to);for(const g of m)r.push({from:o.from,to:g.to,roll:o.roll+g.roll,isHit:g.isHit,subMoves:[o,g]})}}return r},mu=(i,e)=>{const t={...i,board:[...i.board],bar:{...i.bar},off:{...i.off},movesLeft:[...i.movesLeft]},r=i.turn==="white";if(e.subMoves&&e.subMoves.length>0){let c=i;for(const u of e.subMoves)c=mu(c,u);return c}if(e.from==="bar"?r?t.bar.white--:t.bar.black--:t.board[e.from]-=r?1:-1,e.to==="off")r?t.off.white++:t.off.black++;else{const c=e.to;e.isHit&&(r?t.bar.black++:t.bar.white++,t.board[c]=0),t.board[c]+=r?1:-1}const o=t.movesLeft.indexOf(e.roll);return o>-1&&t.movesLeft.splice(o,1),r&&t.off.white===15&&(t.winner="white"),!r&&t.off.black===15&&(t.winner="black"),t},TM=()=>Math.random().toString(36).substring(2,8).toUpperCase(),Ww=i=>{const[e,t]=q.useState(null),[r,o]=q.useState(null),[c,u]=q.useState(!0),[m,g]=q.useState(!0);q.useEffect(()=>{const I=Hc();qc(I).then(U=>{o(U.user.uid)}).catch(U=>{console.error("Auth failed",U)}).finally(()=>g(!1))},[]);const p=async()=>{if(r)return r;const I=Hc(),U=await qc(I);return o(U.user.uid),U.user.uid};return q.useEffect(()=>{if(!On||!Ke){u(!1);return}if(!i){t(null),u(!1);return}u(!0);const I=Jn(Xn(Ke,"rooms_bg"),i),U=Zp(I,F=>{F.exists()?t(F.data()):t(null),u(!1)},F=>{console.error("Room subscription error",F),t(null),u(!1)});return()=>U()},[i]),{room:e,userId:r,loading:c,isAuthLoading:m,createRoom:async()=>{if(!On||!Ke)throw new Error("Firebase not configured");const I=await p(),U=TM(),F=Jn(Xn(Ke,"rooms_bg"),U),G=Dc(),ce={board:G.board,bar:G.bar,off:G.off,turn:G.turn,dice:G.dice,movesLeft:G.movesLeft,whitePlayer:I,blackPlayer:"",winner:"",status:"active"};return await Wp(F,ce),U},joinRoom:async I=>{if(!On||!Ke)throw new Error("Firebase not configured");const U=await p(),F=Jn(Xn(Ke,"rooms_bg"),I);await xc(Ke,async G=>{const ce=await G.get(F);if(!ce.exists())throw new Error("Room not found");const J={...ce.data()};J.whitePlayer?!J.blackPlayer&&J.whitePlayer!==U&&(J.blackPlayer=U):J.whitePlayer=U,G.update(F,J)})},updateGameState:async I=>{if(!On||!Ke||!i)return;const U=Jn(Xn(Ke,"rooms_bg"),i);let F="active",G="";I.winner&&(F="finished",G=I.winner),await Ac(U,{board:I.board,bar:I.bar,off:I.off,turn:I.turn,dice:I.dice,movesLeft:I.movesLeft,winner:G,status:F})},resignGame:async I=>{if(!On||!Ke||!i)return;const U=Jn(Xn(Ke,"rooms_bg"),i);await Ac(U,{status:"resigned",winner:I==="white"?"black":"white"})},resetGame:async()=>{if(!On||!Ke||!i)return;const I=Dc(),U=Jn(Xn(Ke,"rooms_bg"),i);await Ac(U,{board:I.board,bar:I.bar,off:I.off,turn:I.turn,dice:I.dice,movesLeft:I.movesLeft,status:"active",winner:""})},leaveRoom:async()=>{if(!(!On||!Ke)&&i)try{const I=await p(),U=Jn(Xn(Ke,"rooms_bg"),i);await xc(Ke,async F=>{const G=await F.get(U);if(!G.exists())return;const ee={...G.data()};ee.whitePlayer===I?ee.whitePlayer="":ee.blackPlayer===I&&(ee.blackPlayer=""),F.update(U,ee)})}catch(I){console.error("Error leaving room:",I)}}}},Zw=({color:i,style:e,className:t=""})=>{const r=i==="white"?"bg-slate-200 shadow-[inset_0_-4px_4px_rgba(0,0,0,0.2),0_4px_6px_rgba(0,0,0,0.3)] border-slate-300":"bg-slate-900 shadow-[inset_0_-4px_4px_rgba(0,0,0,0.5),0_4px_6px_rgba(0,0,0,0.4)] border-slate-700",o=i==="white"?"border-slate-300":"border-slate-700";return T.jsx("div",{style:e,className:`w-full h-full rounded-full border-4 ${r} relative flex items-center justify-center ${t}`,children:T.jsx("div",{className:`w-[70%] h-[70%] rounded-full border-2 ${o} opacity-30`})})},lp=({id:i,color:e,isDraggable:t=!1,style:r})=>{const{attributes:o,listeners:c,setNodeRef:u,isDragging:m}=fu({id:i,disabled:!t}),g={opacity:m?0:1,touchAction:"none",...r};return T.jsx("div",{ref:u,style:g,...c,...o,className:"w-full aspect-square relative cursor-grab active:cursor-grabbing",children:T.jsx(Zw,{color:e})})},wM=({index:i,count:e,isTop:t,isHighlighted:r,playerColor:o,canDragFrom:c,isHitTarget:u})=>{const{setNodeRef:m,isOver:g}=du({id:i.toString()}),p=i%2===1,_=g||r?"bg-indigo-500/20 ring-2 ring-indigo-400/50":"",E=[],w=Math.abs(e),R=e>0?"white":"black";for(let D=0;D<w;D++){const P=D===w-1,I=c&&P&&R===o;E.push(T.jsx("div",{className:"w-[80%] max-w-[40px] -my-1 z-10 relative",children:T.jsx(lp,{id:`checker-${i}-${D}`,color:R,isDraggable:I})},`${i}-${D}`))}return T.jsxs("div",{ref:m,className:`relative flex-1 h-full flex ${t?"flex-col items-center justify-start":"flex-col-reverse items-center justify-start"} ${_} transition-colors rounded-sm`,children:[T.jsx("div",{className:"absolute inset-0 pointer-events-none w-full h-full opacity-60",style:{clipPath:t?"polygon(0 0, 50% 100%, 100% 0)":"polygon(0 100%, 50% 0, 100% 100%)",backgroundColor:p?"#334155":"#818cf8",opacity:p?.4:.15}}),T.jsx("div",{className:`z-10 w-full h-full flex ${t?"flex-col pt-2":"flex-col-reverse pb-2"} items-center`,children:E}),u&&T.jsxs("div",{className:`absolute ${t?"top-6":"bottom-6"} left-1/2 -translate-x-1/2 z-50 pointer-events-none`,children:[T.jsx("style",{children:`
                        @keyframes shatter-left {
                            0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
                            100% { transform: translate(-20px, -10px) rotate(-15deg); opacity: 0; }
                        }
                        @keyframes shatter-right {
                            0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
                            100% { transform: translate(20px, -10px) rotate(15deg); opacity: 0; }
                        }
                        @keyframes impact-flash {
                            0% { transform: scale(0.5); opacity: 0; }
                            10% { transform: scale(1.2); opacity: 1; }
                            100% { transform: scale(0); opacity: 0; }
                        }
                        `}),T.jsx("div",{className:"relative w-10 h-10 md:w-12 md:h-12",children:(()=>{const D=e>0?"black":"white",P=D==="white"?"bg-slate-200 border-slate-300 shadow-sm":"bg-slate-900 border-slate-700 shadow-xl",I=D==="white"?"border-slate-300":"border-slate-700";return T.jsxs(T.Fragment,{children:[T.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${P} overflow-hidden`,style:{clipPath:"polygon(0% 0%, 55% 0%, 45% 100%, 0% 100%)",animation:"shatter-left 0.6s ease-out forwards"},children:T.jsx("div",{className:`absolute inset-2 rounded-full border-2 ${I} opacity-30`})}),T.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${P} overflow-hidden`,style:{clipPath:"polygon(55% 0%, 100% 0%, 100% 100%, 45% 100%)",animation:"shatter-right 0.6s ease-out forwards"},children:T.jsx("div",{className:`absolute inset-2 rounded-full border-2 ${I} opacity-30`})}),T.jsx("div",{className:"absolute inset-0 bg-white rounded-full mix-blend-overlay",style:{animation:"impact-flash 0.4s ease-out forwards"}})]})})()})]}),T.jsx("span",{className:`absolute ${t?"top-0":"bottom-0"} text-[8px] text-slate-600 font-mono opacity-50`,children:i+1})]})},SM=({gameState:i,playerColor:e,onMove:t,validMoves:r})=>{const{board:o,bar:c,off:u,turn:m}=i,[g,p]=q.useState(null),[_,E]=q.useState([]),[w,R]=q.useState(null),D=h0(Fa(g0,{activationConstraint:{distance:8}}),Fa(p0,{activationConstraint:{delay:100,tolerance:5}})),P=G=>{const{active:ce}=G,ee=ce.id;let J=-1;if(ee.startsWith("bar"))J="bar";else if(ee.startsWith("checker-")){const N=ee.split("-");J=parseInt(N[1])}else J=parseInt(ee);p(ee);const A=r.filter(N=>J==="bar"?N.from==="bar":N.from===J).map(N=>N.to==="off"?99:N.to);E(A)},I=ot.useRef(i.board);ot.useEffect(()=>{const G=I.current,ce=i.board;for(let ee=0;ee<24;ee++){const J=G[ee],C=ce[ee];J===-1&&C>=1&&(R(ee),setTimeout(()=>R(null),800)),J===1&&C<=-1&&(R(ee),setTimeout(()=>R(null),800))}I.current=i.board},[i.board]);const U=G=>{const{active:ce,over:ee}=G;if(p(null),E([]),!ee)return;const J=ce.id;let C=-1;if(J.startsWith("bar"))C="bar";else if(J.startsWith("checker-")){const k=J.split("-");C=parseInt(k[1])}else C=parseInt(J);let A=-1;ee.id==="off"?A="off":A=parseInt(ee.id);const N=r.find(k=>k.from===C&&k.to===A);if(N){const k=mu(i,N);t(k)}},F=(G,ce,ee)=>{const J=[];if(G<ce)for(let C=G;C<=ce;C++)J.push(C);else for(let C=G;C>=ce;C--)J.push(C);return T.jsx("div",{className:`flex-1 flex ${ee?"border-b-2":"border-t-2"} border-slate-700/30`,children:J.map(C=>T.jsx(wM,{index:C,count:o[C],isTop:ee,isHighlighted:_.includes(C),playerColor:e,canDragFrom:e===m&&(e==="white"&&c.white===0||e==="black"&&c.black===0),isHitTarget:w===C},C))})};return T.jsxs(v0,{sensors:D,onDragStart:P,onDragEnd:U,children:[T.jsxs("div",{className:"flex flex-col md:flex-row w-full max-w-full md:max-w-7xl mx-auto gap-2 md:gap-4 items-stretch p-1 md:p-4",children:[T.jsxs("div",{className:"relative flex-1 aspect-square md:aspect-[4/3] bg-slate-800/80 rounded-xl border-4 md:border-[12px] border-slate-900 shadow-2xl flex flex-col overflow-hidden",children:[T.jsxs("div",{className:"flex-1 flex",children:[F(e==="white"?11:12,e==="white"?6:17,!0),T.jsxs("div",{className:"w-12 md:w-20 bg-slate-900/50 border-x-4 border-slate-900 flex flex-col items-center justify-center gap-1 py-2",children:[Array.from({length:c.white}).map((G,ce)=>T.jsx("div",{className:"w-10 md:w-12",children:T.jsx(lp,{id:`bar-white-${ce}`,color:"white",isDraggable:e==="white"&&m==="white"&&ce===c.white-1})},`bar-w-${ce}`)),Array.from({length:c.black}).map((G,ce)=>T.jsx("div",{className:"w-10 md:w-12",children:T.jsx(lp,{id:`bar-black-${ce}`,color:"black",isDraggable:e==="black"&&m==="black"&&ce===c.black-1})},`bar-b-${ce}`))]}),F(e==="white"?5:18,e==="white"?0:23,!0)]}),T.jsxs("div",{className:"flex-1 flex",children:[F(e==="white"?12:11,e==="white"?17:6,!1),T.jsx("div",{className:"w-12 md:w-20 bg-slate-900/50 border-x-4 border-slate-900 flex flex-col-reverse items-center justify-start gap-1 py-2"}),F(e==="white"?18:5,e==="white"?23:0,!1)]}),T.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center z-50",children:T.jsx("div",{className:"flex gap-3",children:i.movesLeft.map((G,ce)=>T.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 rounded-lg shadow-xl flex items-center justify-center text-lg md:text-xl font-black border-2 animate-in zoom-in spin-in-3 duration-300 ${m==="white"?"bg-white text-slate-900 border-slate-200":"bg-slate-900 text-white border-slate-700"}`,children:G},`${m}-${ce}-${G}`))})})]}),T.jsxs("div",{className:"w-full h-20 md:w-32 md:h-auto bg-slate-900/40 rounded-xl border-4 border-slate-800 flex flex-row md:flex-col relative overflow-hidden shrink-0",children:[T.jsx("div",{className:"absolute inset-y-0 left-1/2 -translate-x-1/2 w-[2px] bg-slate-800/50 hidden md:block"}),T.jsx("div",{className:"absolute inset-x-0 top-1/2 -translate-y-1/2 h-[2px] bg-slate-800/50 md:hidden"}),T.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 md:-rotate-90 text-slate-700 font-bold text-xs md:text-sm tracking-[0.5em] pointer-events-none whitespace-nowrap opacity-50 z-0",children:"COLLECT"}),T.jsx("div",{className:"flex-1 w-full p-2 flex flex-col gap-1 z-10 border-r md:border-r-0 md:border-b border-slate-800/50",children:T.jsx(X1,{playerColor:"white",count:u.white,isTop:!0})}),T.jsx("div",{className:"flex-1 w-full p-2 flex flex-col-reverse gap-1 z-10",children:T.jsx(X1,{playerColor:"black",count:u.black,isTop:!1})}),T.jsx("div",{className:`absolute inset-0 z-20 ${g?"pointer-events-auto":"pointer-events-none"}`,children:T.jsx(AM,{isHighlighted:_.includes(99)})})]})]}),T.jsx(Xw,{children:g?T.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 cursor-grabbing",children:T.jsx(Zw,{color:(function(){if(g.startsWith("bar-white"))return"white";if(g.startsWith("bar-black"))return"black";if(g.startsWith("checker-")){const G=g.split("-"),ce=parseInt(G[1]);return o[ce]>0?"white":"black"}return"white"})()})}):null})]})},AM=({isHighlighted:i})=>{const{setNodeRef:e,isOver:t}=du({id:"off"}),r=t||i;return T.jsx("div",{ref:e,className:`w-full h-full flex items-center justify-center transition-all duration-300 ${r?"bg-indigo-500/30 backdrop-blur-sm border-2 border-dashed border-indigo-400":""}`,children:r&&T.jsx("div",{className:"text-indigo-200 font-bold text-xs rotate-90 whitespace-nowrap animate-pulse",children:"COLLECT"})})},X1=({playerColor:i,count:e,isTop:t})=>T.jsxs("div",{className:`w-full flex ${t?"flex-col":"flex-col-reverse"} gap-[2px] transition-colors rounded-lg p-1`,children:[e>0&&T.jsx("div",{className:`text-[10px] text-center mb-1 font-bold ${i==="white"?"text-slate-400":"text-slate-600"}`,children:e}),Array.from({length:Math.min(e,15)}).map((r,o)=>T.jsx("div",{className:`h-2 w-full rounded-sm opacity-80 ${i==="white"?"bg-slate-200 shadow-sm":"bg-slate-900 border border-slate-700 shadow-sm"}`},o))]}),xM=(i,e="Normal")=>{const t=op(i);if(t.length===0)return null;if(e==="Easy"){const c=Math.floor(Math.random()*t.length);return t[c]}let r=t[0],o=-1/0;for(const c of t){const u=RM(i,c,e);u>o&&(o=u,r=c)}return r},RM=(i,e,t)=>{let r=0;e.isHit&&(r+=100),e.to==="off"&&(r+=200);const o=mu({...i},e),c=i.turn==="white";if(typeof e.to=="number"){const u=o.board[e.to];c&&u===2&&(r+=50),!c&&u===-2&&(r+=50)}if(typeof e.to=="number"){const u=o.board[e.to];Math.abs(u)===1&&(r-=30)}if(typeof e.from=="number"){const u=o.board[e.from];Math.abs(u)===1&&(r-=40)}return t==="Hard"&&typeof e.to=="number"&&(c?e.to>=18:e.to<=5)&&Math.abs(o.board[e.to])>1&&(r+=30),r+=Math.random()*5,r},CM=({roomId:i="",mode:e="online",aiDifficulty:t="Normal",onExit:r})=>{const o=Ww(e==="online"?i:null),[c,u]=q.useState(()=>Dc()),[m,g]=q.useState(null),p=e==="local",_=ot.useMemo(()=>p?c:m||(o.room?{...o.room,validMoves:[]}:null),[p,c,o.room,m]);q.useEffect(()=>{if(!o.room||!m)return;const ee=o.room.turn===m.turn,J=JSON.stringify(o.room.board)===JSON.stringify(m.board),C=o.room.movesLeft.length===m.movesLeft.length;ee&&J&&C?g(null):ee||g(null)},[o.room,m]);const E=ot.useMemo(()=>_?op(_):[],[_]),w=p?_?.turn==="white"?"local-white":"local-black":o.userId,R=p||o.room?.whitePlayer===w?"white":"black",D=R===_?.turn;q.useEffect(()=>{!p&&i&&o.joinRoom&&o.joinRoom(i)},[i,p]);const P=()=>{navigator.clipboard.writeText(i),alert("Room ID copied to clipboard!")},I=o.room?.whitePlayer===w||p,U=o.room?.blackPlayer===w,F=!!_?.winner,G=ee=>{let J={...ee};J.movesLeft.length===0?(J.turn=J.turn==="white"?"black":"white",J.dice=yc(),J.movesLeft=[...J.dice]):op(J).length===0&&(J.turn=J.turn==="white"?"black":"white",J.dice=yc(),J.movesLeft=[...J.dice]),p?u(J):(g(J),o.updateGameState(J))};if(q.useEffect(()=>{if(_&&_.movesLeft.length>0&&E.length===0&&!_.winner){const ee=setTimeout(()=>{let J={..._};J.turn=J.turn==="white"?"black":"white",J.dice=yc(),J.movesLeft=[...J.dice],p?u(J):(g(J),o.updateGameState(J))},1500);return()=>clearTimeout(ee)}},[_?.movesLeft,E.length,_?.winner,_?.turn,p,_]),q.useEffect(()=>{if(_&&p&&_.turn==="black"&&!_.winner){const ee=setTimeout(()=>{const J=xM(_,t);if(J){const C=mu(_,J);G(C)}else{let C={..._};C.turn="white",C.dice=yc(),C.movesLeft=[...C.dice],u(C)}},800);return()=>clearTimeout(ee)}},[_,p,t]),!p&&o.loading)return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-6 animate-pulse",children:[T.jsx("div",{className:"relative shadow-2xl shadow-indigo-500/20 rounded-full p-4",children:T.jsx(nE,{className:"w-16 h-16 text-indigo-500 animate-spin"})}),T.jsxs("div",{className:"text-center space-y-2",children:[T.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest",children:"Entering Arena"}),T.jsx("p",{className:"text-slate-500 font-medium",children:"Synchronizing with the global lattice..."})]})]});if(!_)return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[T.jsxs("div",{className:"text-center space-y-4",children:[T.jsx("h2",{className:"text-5xl font-black text-white italic",children:"Room Dissolved"}),T.jsx("p",{className:"text-slate-400 text-lg",children:"The arena you seek no longer exists or the link is expired."})]}),T.jsx("button",{onClick:r,className:"btn-premium px-10 py-4 text-xl",children:"Return to Lobby"})]});const ce=_.winner?`${_.winner==="white"?"White":"Black"} Wins!`:D?"Your Turn":"Waiting...";return T.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center gap-8 lg:gap-12 py-6 lg:py-10 w-full animate-in fade-in duration-700",children:[T.jsxs("header",{className:"w-full max-w-6xl flex items-center justify-between px-4 lg:px-6",children:[T.jsxs("button",{onClick:()=>{!p&&o.leaveRoom&&o.leaveRoom(),r()},className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all font-bold uppercase tracking-widest text-xs",children:[T.jsx("div",{className:"p-2 rounded-xl bg-slate-900 border border-slate-800 group-hover:border-slate-700 group-hover:-translate-x-1 transition-transform",children:T.jsx(vc,{size:18})}),"Back"]}),!p&&T.jsx("div",{className:"flex items-center gap-4",children:T.jsxs("div",{className:"liquid-glass px-6 py-3 flex items-center gap-6",children:[T.jsxs("div",{className:"flex flex-col gap-0.5",children:[T.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-slate-500 font-black",children:"Arena ID"}),T.jsx("code",{className:"text-indigo-300 font-mono font-bold",children:i})]}),T.jsx("div",{className:"h-8 w-px bg-slate-800"}),T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("button",{onClick:P,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:T.jsx(eE,{size:18})}),T.jsx("button",{className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:T.jsx(iE,{size:18})})]})]})}),p&&T.jsx("div",{className:"px-6 py-3 liquid-glass text-indigo-300 font-bold uppercase tracking-widest text-xs",children:"Single Player Mode"})]}),T.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-6 lg:gap-16 w-full max-w-7xl px-0 lg:px-6",children:[T.jsxs("div",{className:"relative group w-full flex justify-center max-w-full overflow-visible",children:[T.jsx("div",{className:"absolute -inset-4 bg-linear-to-r from-indigo-500 to-pink-500 rounded-[2.5rem] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"}),T.jsx(SM,{gameState:_,playerColor:R,onMove:G,onRollDice:()=>{},validMoves:E}),F&&T.jsx(IM,{winner:_.winner,playerColor:R,onRematch:()=>{const ee=Dc();g(null),p?u(ee):o.resetGame()},onExit:()=>{!p&&o.leaveRoom&&o.leaveRoom(),r()}})]}),T.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-3 lg:gap-8 mt-0 lg:mt-0",children:[T.jsxs("div",{className:"liquid-glass p-3 lg:p-8 space-y-3 lg:space-y-8 border-l-4 border-l-indigo-500",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:"Game Status"}),T.jsxs("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-2 ${_.winner?"bg-indigo-500/10 text-indigo-300 border border-indigo-500/30":D?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-slate-800 text-slate-500"}`,children:[T.jsx("span",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${_.winner?"bg-indigo-400":"bg-green-500"}`}),p?_.turn==="white"?" White Turn":" Black Turn":ce]})]}),F&&T.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/10 border border-indigo-500/30 text-indigo-100 text-sm lg:text-base font-bold",children:ce}),T.jsxs("div",{className:"space-y-2 lg:space-y-4",children:[T.jsx(NM,{gameState:_}),!p&&T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex items-center gap-2 lg:gap-4 p-2 lg:p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[T.jsx("div",{className:`w-8 h-8 lg:w-12 lg:h-12 rounded-xl flex items-center justify-center text-lg lg:text-xl font-bold ${I?"bg-white text-slate-950":"bg-slate-800 text-slate-400"}`,children:"W"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("div",{className:"text-xs lg:text-sm font-bold text-white uppercase tracking-wide",children:"White Player"}),T.jsx("div",{className:"text-[10px] lg:text-xs text-slate-500 font-medium",children:o.room?.whitePlayer===w?"Connected (You)":o.room?.whitePlayer?"Opponent Ready":"Awaiting Entry..."})]})]}),T.jsxs("div",{className:"flex items-center gap-2 lg:gap-4 p-2 lg:p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[T.jsx("div",{className:`w-8 h-8 lg:w-12 lg:h-12 rounded-xl flex items-center justify-center text-lg lg:text-xl font-bold ${U?"bg-indigo-500 text-white":"bg-slate-800 text-slate-400"}`,children:"B"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("div",{className:"text-xs lg:text-sm font-bold text-white uppercase tracking-wide",children:"Black Player"}),T.jsx("div",{className:"text-[10px] lg:text-xs text-slate-500 font-medium",children:o.room?.blackPlayer===w?"Connected (You)":o.room?.blackPlayer?"Opponent Ready":"Awaiting Entry..."})]})]})]})]}),T.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 lg:gap-3",children:[T.jsxs("button",{disabled:F,onClick:()=>{if(p){const ee={..._};ee.winner=R==="white"?"black":"white",u(ee)}else o.resignGame(R)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 lg:px-4 lg:py-3 rounded-xl border border-slate-800 bg-slate-900/60 text-slate-200 text-sm lg:text-base font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:border-red-500/50 hover:text-red-200 transition",children:[T.jsx(tE,{size:16,className:"lg:w-[18px] lg:h-[18px]"}),"Resign"]}),T.jsxs("button",{disabled:!F&&!p,onClick:()=>{const ee=Dc();g(null),p?u(ee):o.resetGame()},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 lg:px-4 lg:py-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 text-indigo-100 text-sm lg:text-base font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:bg-indigo-500/20 transition",children:[T.jsx(up,{size:16,className:"lg:w-[18px] lg:h-[18px]"}),"Rematch"]})]})]}),!p&&T.jsxs("div",{className:"hidden lg:grid grid-cols-2 gap-4",children:[T.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[T.jsx(hp,{size:20,className:"mx-auto text-slate-600"}),T.jsx("div",{className:"text-xl font-black text-white italic",children:o.room?.whitePlayer&&o.room?.blackPlayer?"2/2":o.room?.whitePlayer||o.room?.blackPlayer?"1/2":"0/2"}),T.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Connected"})]}),T.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[T.jsx(sE,{size:20,className:"mx-auto text-indigo-400"}),T.jsx("div",{className:"text-xl font-black text-white italic",children:"24ms"}),T.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Latency"})]})]})]})]}),T.jsx("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10",children:"Transparent Strategy Arena"})]})},NM=({gameState:i})=>{const[e,t]=q.useState(0),[r,o]=q.useState(0),[c,u]=q.useState(0),m=ot.useRef(i?.winner);q.useEffect(()=>{m.current&&!i?.winner&&(t(0),o(0),u(0)),m.current=i?.winner},[i?.winner]),q.useEffect(()=>{if(!i||i.winner)return;const p=window.setInterval(()=>{t(_=>_+1),o(_=>_+(i.turn==="white"?1:0)),u(_=>_+(i.turn==="black"?1:0))},1e3);return()=>window.clearInterval(p)},[i?.turn,i?.winner]);const g=p=>{const _=Math.floor(p/60).toString().padStart(2,"0"),E=(p%60).toString().padStart(2,"0");return`${_}:${E}`};return T.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-3 p-2 md:p-4 rounded-2xl bg-slate-900/60 border border-slate-800/80 text-[10px] lg:text-xs font-bold uppercase tracking-widest",children:[T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"Time"}),T.jsx("div",{className:"text-white text-base",children:g(e)})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"White"}),T.jsx("div",{className:"text-emerald-300 text-base",children:g(r)})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"Black"}),T.jsx("div",{className:"text-sky-300 text-base",children:g(c)})]})]})},IM=({winner:i,playerColor:e,onRematch:t,onExit:r})=>{const o=i===e;return T.jsxs("div",{className:"absolute inset-0 z-50 rounded-[2rem] bg-slate-900/80 backdrop-blur-md flex flex-col items-center justify-center p-6 text-center animate-in fade-in zoom-in duration-500",children:[T.jsx("div",{className:`p-6 rounded-full mb-6 ${o?"bg-amber-500/20 text-amber-400 shadow-[0_0_50px_-12px_rgba(245,158,11,0.5)]":"bg-red-500/20 text-red-400 shadow-[0_0_50px_-12px_rgba(239,68,68,0.5)]"}`,children:o?T.jsx(Ng,{size:64,className:"animate-bounce"}):T.jsx(XA,{size:64})}),T.jsx("h2",{className:`text-4xl md:text-5xl font-black uppercase tracking-widest mb-2 ${o?"text-transparent bg-clip-text bg-linear-to-b from-amber-300 to-amber-600":"text-slate-200"}`,children:o?"Victory!":"Defeat"}),T.jsx("p",{className:"text-slate-400 font-bold text-lg mb-8 uppercase tracking-widest",children:o?"You conquered the board.":"Better luck next time."}),T.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[T.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center gap-3 px-6 py-4 rounded-xl bg-indigo-500 hover:bg-indigo-400 text-white font-black uppercase tracking-widest transition-all hover:scale-105 active:scale-95 shadow-lg shadow-indigo-500/30",children:[T.jsx(up,{size:20}),"Rematch"]}),T.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center gap-3 px-6 py-4 rounded-xl bg-slate-800 hover:bg-slate-700 text-slate-300 font-bold uppercase tracking-widest transition-all hover:scale-105 active:scale-95",children:[T.jsx(ex,{size:20}),"Return to Lobby"]})]})]})},DM=30,OM=["red","black","blue","yellow"],MM=()=>{const i=[];let e=1;return OM.forEach(t=>{for(let r=1;r<=13;r++)i.push({id:`t-${e++}`,value:r,color:t}),i.push({id:`t-${e++}`,value:r,color:t})}),i.push({id:`t-${e++}`,value:0,color:null,isFakeOkey:!0}),i.push({id:`t-${e++}`,value:0,color:null,isFakeOkey:!0}),i},kM=i=>{const e=[...i];for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e},VM=i=>i.isFakeOkey||!i.color?{id:"virtual-okey",value:1,color:"red"}:{id:"virtual-okey",value:i.value===13?1:i.value+1,color:i.color},PM=()=>{let i=kM(MM());const e=i.pop(),t=VM(e),r=Array(4).fill(null).map(()=>({tiles:Array(DM).fill(null)}));for(let o=0;o<15;o++)r[0].tiles[o]=i.pop();for(let o=1;o<4;o++)for(let c=0;c<14;c++)r[o].tiles[c]=i.pop();return{phase:"playing",players:r,centerStack:i,discardPiles:[[],[],[],[]],indicatorTile:e,okeyTile:t,currentTurn:0,winner:null}},eS=i=>{const[e,t]=q.useState(null),[r,o]=q.useState(!1);q.useEffect(()=>{if(!i)try{const w=PM();console.log("Okey Game Initialized",w),t(w)}catch(w){console.error("Failed to initialize Okey game",w)}},[i]);const c=q.useCallback(()=>{t(w=>{if(!w)return null;if(w.currentTurn!==0||w.players[0].tiles.filter(G=>G!==null).length>=15)return w;const D=[...w.centerStack],P=D.pop();if(!P)return w;const I=[...w.players],U=[...I[0].tiles],F=U.findIndex(G=>G===null);return F!==-1&&(U[F]=P),I[0]={...I[0],tiles:U},{...w,players:I,centerStack:D}})},[]),u=q.useCallback(()=>{t(w=>{if(!w||w.currentTurn!==0||w.players[0].tiles.filter(ee=>ee!==null).length>=15)return w;const D=3;if(w.discardPiles[D].length===0)return w;const I=[...w.discardPiles],U=I[D][I[D].length-1];I[D]=I[D].slice(0,-1);const F=[...w.players],G=[...F[0].tiles],ce=G.findIndex(ee=>ee===null);return ce!==-1&&(G[ce]=U),F[0]={...F[0],tiles:G},{...w,players:F,discardPiles:I}})},[]),m=q.useCallback((w,R)=>{t(D=>{if(!D)return null;const P=[...D.players],I=[...P[0].tiles],U=I[w];return I[w]=I[R],I[R]=U,P[0]={...P[0],tiles:I},{...D,players:P}})},[]),g=q.useCallback(w=>{t(R=>{if(!R||R.currentTurn!==0)return R;if(R.players[0].tiles.filter(ce=>ce!==null).length!==15)return console.log("Discard blocked: Must have 15 tiles to discard."),R;const P=[...R.players],I=[...R.players[0].tiles],U=I[w];if(!U)return R;I[w]=null,P[0]={...P[0],tiles:I};const F=[...R.discardPiles];F[0]=[...F[0],U];const G=(R.currentTurn+1)%4;return{...R,players:P,discardPiles:F,currentTurn:G}})},[]);q.useEffect(()=>{if(e&&e.currentTurn!==0&&e.phase==="playing"){const w=setTimeout(()=>{t(R=>{if(!R||R.currentTurn===0)return R;const D=R.currentTurn,P=[...R.players],I=(D+1)%4,U=[...R.centerStack],F=U.pop();if(F){const G=[...P[D].tiles],ce=G.findIndex(A=>A===null);ce!==-1&&(G[ce]=F);const ee=G.findIndex(A=>A!==null),J=G[ee];G[ee]=null,P[D]={...P[D],tiles:G};const C=[...R.discardPiles];return C[D]=[...C[D],J],{...R,centerStack:U,players:P,discardPiles:C,currentTurn:I}}return{...R,currentTurn:I}})},1500);return()=>clearTimeout(w)}},[e?.currentTurn]);const p=async()=>(o(!0),await new Promise(w=>setTimeout(w,1e3)),o(!1),"okey-room-"+Math.random().toString(36).substr(2,6)),_=async w=>{o(!0),await new Promise(R=>setTimeout(R,1e3)),o(!1)},E=q.useCallback(()=>{t(w=>{if(!w)return null;const R=w.players[0],D=R.tiles.filter(A=>A!==null),P=D.filter(A=>!A.isFakeOkey&&!(w.okeyTile&&A.color===w.okeyTile.color&&A.value===w.okeyTile.value)),I=D.filter(A=>A.isFakeOkey||w.okeyTile&&A.color===w.okeyTile.color&&A.value===w.okeyTile.value),U=[],F=[...P];["red","blue","black","yellow"].forEach(A=>{const N=F.filter(M=>M.color===A).sort((M,z)=>M.value-z.value);let k=[];for(let M=0;M<N.length;M++)k.length===0||N[M].value===k[k.length-1].value+1?k.push(N[M]):(k.length>=3&&(U.push([...k]),k.forEach(z=>{const O=F.findIndex(Pe=>Pe.id===z.id);O!==-1&&F.splice(O,1)})),k=[N[M]]);k.length>=3&&(U.push([...k]),k.forEach(M=>{const z=F.findIndex(O=>O.id===M.id);z!==-1&&F.splice(z,1)}))});for(let A=1;A<=13;A++){const N=F.filter(M=>M.value===A),k=Array.from(new Set(N.map(M=>M.color)));if(k.length>=3){const M=k.map(z=>N.find(O=>O.color===z));U.push(M),M.forEach(z=>{const O=F.findIndex(Pe=>Pe.id===z.id);O!==-1&&F.splice(O,1)})}}let ce=new Array(30).fill(null),ee=0;I.forEach(A=>{ce[ee++]=A}),I.length>0&&ee++,U.forEach(A=>{A.forEach(N=>{ce[ee++]=N}),ee++});let J=15;for(;ce[J]!==null&&J<30;)J++;F.forEach(A=>{J<30&&(ce[J++]=A)});const C=[...w.players];return C[0]={...R,tiles:ce},{...w,players:C}})},[e?.okeyTile]);return{gameState:e,moveTileInRack:m,drawFromCenter:c,drawFromDiscard:u,discardTile:g,autoSortTiles:E,createRoom:p,joinRoom:_,isAuthLoading:r}},Oc=({tile:i,isJoker:e,className:t="",dragging:r=!1,size:o="md"})=>{const c=p=>{switch(p){case"red":return"text-[#d32f2f]";case"black":return"text-[#212121]";case"blue":return"text-[#1976d2]";case"yellow":return"text-[#ffa000]";default:return"text-slate-400"}},u=o==="sm"?"w-10 h-13":o==="lg"?"w-16 h-22":"w-14 h-19",m=o==="sm"?"text-2xl":o==="lg"?"text-5xl":"text-4xl",g=()=>i.isFakeOkey?T.jsx("div",{className:"flex flex-col items-center justify-center",children:T.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-emerald-500/30 flex items-center justify-center",children:T.jsx("div",{className:"w-4 h-4 rounded-full bg-emerald-500/20"})})}):T.jsxs("div",{className:"flex flex-col items-center justify-center leading-none",children:[T.jsx("span",{className:`${m} font-bold ${c(i.color)} tracking-tighter`,children:i.value}),T.jsx("div",{className:`w-2 h-2 rounded-full mt-1 ${i.color==="red"?"bg-red-500":i.color==="blue"?"bg-blue-500":i.color==="yellow"?"bg-yellow-500":"bg-black"} shadow-sm`})]});return T.jsxs("div",{className:`
        relative ${u}
        bg-[#fffdfa]
        rounded-md
        shadow-[0_2px_0_#d1cfca,0_4px_8px_rgba(0,0,0,0.2)]
        flex items-center justify-center
        select-none
        border border-[#e5e3de]
        ${r?"opacity-90 cursor-grabbing scale-110 -rotate-2 z-50":"cursor-grab hover:-translate-y-1"}
        ${e?"ring-4 ring-green-400/80 ring-offset-2":""}
        transition-all duration-200
        ${t}
      `,children:[T.jsx("div",{className:"absolute inset-[2px] rounded-[3px] bg-gradient-to-br from-white to-transparent opacity-50 pointer-events-none"}),T.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center w-full h-full pb-0.5",children:g()})]})},J1=({tile:i,isJoker:e,index:t})=>{const r=`slot-${t}`,{setNodeRef:o,isOver:c}=du({id:r}),{attributes:u,listeners:m,setNodeRef:g,isDragging:p}=fu({id:r,disabled:!i});return T.jsxs("div",{ref:o,className:`
                relative w-12 h-16 rounded shadow-inner flex items-center justify-center transition-all duration-200
                ${c?"bg-green-500/20 ring-2 ring-green-400 scale-105 z-20":"bg-black/10 border border-black/5"}
            `,children:[i&&T.jsx("div",{ref:g,...u,...m,className:`relative z-10 ${p?"opacity-20":""}`,children:T.jsx(Oc,{tile:i,isJoker:e,dragging:p})}),!i&&!c&&T.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-black/5"})]})},LM=({tiles:i,isCurrentPlayer:e,okeyTile:t})=>{if(!e){const r=i.filter(o=>o!==null);return T.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[T.jsx("div",{className:"flex justify-center items-center gap-1 bg-[#2a1b0e] p-2 rounded border border-[#3d2a1a] shadow-2xl",children:Array.from({length:Math.min(r.length,11)}).map((o,c)=>T.jsx("div",{className:"w-6 h-8 bg-[#f5f5f5] rounded-sm transform -skew-x-2 border-b-2 border-slate-400 shadow-sm"},c))}),T.jsx("div",{className:"flex justify-center items-center gap-1 bg-[#2a1b0e] p-2 rounded border border-[#3d2a1a] shadow-2xl -mt-1 scale-95 opacity-80",children:Array.from({length:Math.max(0,r.length-11)}).map((o,c)=>T.jsx("div",{className:"w-6 h-8 bg-[#f5f5f5] rounded-sm transform -skew-x-1 border-b-2 border-slate-400 shadow-sm"},c))})]})}return T.jsxs("div",{className:"relative w-full max-w-none mx-auto flex flex-col items-center select-none",children:[T.jsxs("div",{className:"relative w-[85%] bg-[#8d5b3e] rounded-sm shadow-[0_20px_40px_rgba(0,0,0,0.6)] border-b-8 border-[#3d251e] p-4 flex flex-col gap-1",children:[T.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/wood-pattern.png')] opacity-20 pointer-events-none mix-blend-overlay scale-x-150"}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-black/30 pointer-events-none"}),T.jsx("div",{className:"relative flex justify-center gap-1 pb-2 min-h-[5.5rem] border-b-4 border-black/20 z-10",children:i.slice(0,15).map((r,o)=>{const c=t&&r&&r.color===t.color&&r.value===t.value;return T.jsx(J1,{index:o,tile:r,isJoker:c||!1},o)})}),T.jsx("div",{className:"relative flex justify-center gap-1 pt-2 min-h-[5.5rem] z-10",children:i.slice(15,30).map((r,o)=>{const c=o+15,u=t&&r&&r.color===t.color&&r.value===t.value;return T.jsx(J1,{index:c,tile:r,isJoker:u||!1},c)})})]}),T.jsx("div",{className:"mt-4 px-6 py-1 bg-amber-500/20 rounded-full border border-amber-500/30 text-[10px] font-black text-amber-500 uppercase tracking-widest animate-pulse",children:"Talar Srkleyerek Dzenleyebilirsiniz"})]})};function Df(i){if(!i)return!1;const e=i.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const jM=[tt.Down,tt.Right,tt.Up,tt.Left],UM=(i,e)=>{let{context:{active:t,collisionRect:r,droppableRects:o,droppableContainers:c,over:u,scrollableAncestors:m}}=e;if(jM.includes(i.code)){if(i.preventDefault(),!t||!r)return;const g=[];c.getEnabled().forEach(E=>{if(!E||E!=null&&E.disabled)return;const w=o.get(E.id);if(w)switch(i.code){case tt.Down:r.top<w.top&&g.push(E);break;case tt.Up:r.top>w.top&&g.push(E);break;case tt.Left:r.left>w.left&&g.push(E);break;case tt.Right:r.left<w.left&&g.push(E);break}});const p=tO({collisionRect:r,droppableRects:o,droppableContainers:g});let _=kw(p,"id");if(_===u?.id&&p.length>1&&(_=p[1].id),_!=null){const E=c.get(t.id),w=c.get(_),R=w?o.get(w.id):null,D=w?.node.current;if(D&&R&&E&&w){const I=nd(D).some((J,C)=>m[C]!==J),U=tS(E,w),F=zM(E,w),G=I||!U?{x:0,y:0}:{x:F?r.width-R.width:0,y:F?r.height-R.height:0},ce={x:R.left,y:R.top};return G.x&&G.y?ce:$c(ce,G)}}}};function tS(i,e){return!Df(i)||!Df(e)?!1:i.data.current.sortable.containerId===e.data.current.sortable.containerId}function zM(i,e){return!Df(i)||!Df(e)||!tS(i,e)?!1:i.data.current.sortable.index<e.data.current.sortable.index}const Bh=[{name:"Siz",color:"from-blue-400 to-indigo-600",avatar:"https://api.dicebear.com/7.x/lorelei/svg?seed=Felix&backgroundColor=b6e3f4"},{name:"Esat",color:"from-emerald-400 to-teal-600",avatar:"https://api.dicebear.com/7.x/lorelei/svg?seed=Cuddles&backgroundColor=c0aede"},{name:"Zeynep",color:"from-amber-400 to-orange-600",avatar:"https://api.dicebear.com/7.x/lorelei/svg?seed=Shadow&backgroundColor=ffdfbf"},{name:"Emirhan",color:"from-rose-400 to-pink-600",avatar:"https://api.dicebear.com/7.x/lorelei/svg?seed=Fluffy&backgroundColor=ffd5dc"}],qh=({playerId:i,currentTurn:e,className:t=""})=>{const r=e===i,o=Bh[i];return T.jsx("div",{className:`transition-all duration-300 ${r?"scale-110":"opacity-90"} ${t}`,children:T.jsxs("div",{className:`
                relative flex items-center min-w-[160px] h-9 px-4 bg-[#ede0d4] rounded-sm border-2 shadow-xl transition-all
                ${r?"border-green-500 bg-white ring-8 ring-green-500/20":"border-[#8d5b3e]"}
            `,children:[T.jsxs("div",{className:`flex-1 font-bold text-xs text-center uppercase tracking-tight ${r?"text-green-700":"text-[#3d251e]"}`,children:[r&&T.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-green-500 mr-2 animate-ping"}),o.name]}),i!==0&&T.jsxs("div",{className:`absolute -bottom-5 left-1/2 -translate-x-1/2 px-2 py-0.5 rounded text-white text-[9px] font-bold shadow-md ${r?"bg-green-600":"bg-[#3d251e]"}`,children:["TA: ",(Bh[i].name==="Esat"||Bh[i].name==="Emirhan"||Bh[i].name==="Zeynep",14)," "]})]})})},Hh=({playerId:i,position:e,discardPiles:t,currentTurn:r,userTileCount:o,onDrawDiscard:c})=>{const{setNodeRef:u,isOver:m}=du({id:`discard-${i}`}),g=t[i][t[i].length-1],p=i===1&&r===0&&o===15,_=i===3&&r===0&&o===14,{attributes:E,listeners:w,setNodeRef:R,isDragging:D}=fu({id:`pick-discard-${i}`,disabled:!_||!g}),P={top:"absolute top-[18%] left-1/2 -translate-x-1/2",bottom:"absolute bottom-[35%] right-[22%]",left:"absolute left-[20%] top-1/2 -translate-y-1/2",right:"absolute right-[20%] top-1/2 -translate-y-1/2"};return T.jsxs("div",{ref:u,onClick:()=>_&&c(),className:`
                ${P[e]} w-20 h-28 rounded-lg transition-all duration-300 flex items-center justify-center
                ${m?"bg-green-400/20 scale-110 ring-4 ring-green-400 shadow-2xl":""}
                ${_?"cursor-grab active:cursor-grabbing hover:ring-4 hover:ring-amber-400 shadow-[0_0_20px_rgba(251,191,36,0.3)] bg-amber-400/10":""}
            `,children:[g?T.jsxs("div",{ref:R,...E,...w,className:`rotate-3 shadow-xl transform transition-transform ${_&&!D?"hover:scale-110 -translate-y-2":""} ${D?"opacity-20":""}`,children:[T.jsx(Oc,{tile:g,size:"sm"}),_&&!D&&T.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-amber-500 text-white text-[8px] font-black px-2 py-1 rounded animate-bounce whitespace-nowrap",children:"SRKLE VEYA TIKLA"})]}):T.jsx("div",{className:"w-16 h-24 border-2 border-white/10 rounded-lg flex items-center justify-center",children:T.jsx("div",{className:"w-2 h-2 rounded-full bg-white/5"})}),p&&T.jsx("div",{className:"absolute -inset-2 border-2 border-dashed border-green-400 rounded-xl animate-pulse"})]})},BM=({currentTurn:i,userTileCount:e,centerStackCount:t,onDraw:r})=>{const o=i===0&&e<15,{attributes:c,listeners:u,setNodeRef:m,isDragging:g}=fu({id:"draw-pile",disabled:!o});return T.jsx("div",{className:"relative group",children:T.jsxs("div",{ref:m,...c,...u,onClick:()=>o&&r(),className:`
                    relative w-16 h-20 bg-[#fffdfa] rounded-sm shadow-2xl flex items-center justify-center transition-all
                    ${o?"hover:-translate-y-2 cursor-grab active:cursor-grabbing ring-4 ring-green-500 bg-white":"cursor-wait opacity-60"}
                    ${g?"opacity-20":""}
                `,children:[T.jsx("div",{className:`absolute inset-0 bg-[#e5e3de] border border-[#ccc] rounded-sm transform translate-x-1 translate-y-1 -z-10 shadow-lg ${o?"bg-green-100":""}`}),T.jsx("div",{className:`absolute inset-0 bg-[#d1cfca] border border-[#bbb] rounded-sm transform translate-x-2 translate-y-2 -z-20 shadow-lg ${o?"bg-green-200":""}`}),T.jsx("div",{className:"text-[#3d251e] font-bold text-2xl",children:t}),o&&!g&&T.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-green-500 text-white text-[10px] font-black px-3 py-1 rounded-full animate-bounce shadow-lg flex items-center gap-1",children:[T.jsx("span",{className:"w-2 h-2 rounded-full bg-white animate-pulse"}),"TAI SRKLE"]})]})})},qM=({gameState:i,onDraw:e,onDrawDiscard:t,onMoveTile:r,onDiscard:o,onAutoSort:c})=>{const[u,m]=q.useState(null),g=h0(Fa(id,{activationConstraint:{distance:5}}),Fa(d0,{coordinateGetter:UM}));if(!i)return T.jsx("div",{className:"w-full aspect-[4/3] flex items-center justify-center text-white text-2xl font-black font-sans",children:"ARENA HAZIRLANIYOR..."});const p=w=>{m(w.active.id)},_=w=>{m(null);const{active:R,over:D}=w;if(!D)return;const P=R.id,I=D.id;if(I==="discard-1"||I==="discard-area"){if(P.startsWith("slot-")){const U=parseInt(P.split("-")[1]);o(U)}}else if(P==="draw-pile")I.startsWith("slot-")&&e();else if(P==="pick-discard-3")I.startsWith("slot-")&&t();else if(P!==I&&P.startsWith("slot-")&&I.startsWith("slot-")){const U=parseInt(P.split("-")[1]),F=parseInt(I.split("-")[1]);r(U,F)}},E=()=>{if(!u)return null;if(u==="draw-pile")return T.jsx("div",{className:"opacity-90 scale-110 shadow-2xl rotate-3",children:T.jsx("div",{className:"w-16 h-20 bg-[#fffdfa] rounded-sm flex items-center justify-center border border-[#ccc]",children:T.jsx("div",{className:"text-[#3d251e] font-bold text-2xl opacity-20",children:"?"})})});if(u==="pick-discard-3"){const w=i?.discardPiles[3][i.discardPiles[3].length-1];return w?T.jsx("div",{className:"opacity-90 scale-110 shadow-2xl rotate-3",children:T.jsx(Oc,{tile:w,size:"sm"})}):null}if(u.startsWith("slot-")){const w=parseInt(u.split("-")[1]),R=i?.players[0].tiles[w];return R?T.jsx("div",{className:"opacity-90 scale-110 shadow-2xl rotate-3",children:T.jsx(Oc,{tile:R})}):null}return null};return T.jsx(v0,{sensors:g,collisionDetection:eO,onDragStart:p,onDragEnd:_,children:T.jsxs("div",{className:"relative w-full aspect-[16/10] bg-[#357a38] overflow-hidden mx-auto font-sans shadow-2xl rounded-lg border-x-[12px] border-y-[6px] border-[#3d251e]",children:[T.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/dark-matter.png')] opacity-30 pointer-events-none"}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/10 to-transparent pointer-events-none"}),T.jsx("div",{className:"absolute inset-0 border-[40px] border-black/5 pointer-events-none"}),T.jsx(qh,{playerId:2,currentTurn:i.currentTurn,className:"absolute top-4 left-1/2 -translate-x-1/2 z-30"}),T.jsx(qh,{playerId:3,currentTurn:i.currentTurn,className:"absolute left-4 top-1/2 -translate-y-1/2 -rotate-90 origin-center z-30"}),T.jsx(qh,{playerId:1,currentTurn:i.currentTurn,className:"absolute right-4 top-1/2 -translate-y-1/2 rotate-90 origin-center z-30"}),T.jsx(Hh,{playerId:2,position:"top",discardPiles:i.discardPiles,currentTurn:i.currentTurn,userTileCount:i.players[0].tiles.filter(w=>w!==null).length,onDrawDiscard:t}),T.jsx(Hh,{playerId:3,position:"left",discardPiles:i.discardPiles,currentTurn:i.currentTurn,userTileCount:i.players[0].tiles.filter(w=>w!==null).length,onDrawDiscard:t}),T.jsx(Hh,{playerId:1,position:"right",discardPiles:i.discardPiles,currentTurn:i.currentTurn,userTileCount:i.players[0].tiles.filter(w=>w!==null).length,onDrawDiscard:t}),T.jsx(Hh,{playerId:0,position:"bottom",discardPiles:i.discardPiles,currentTurn:i.currentTurn,userTileCount:i.players[0].tiles.filter(w=>w!==null).length,onDrawDiscard:t}),T.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center gap-12",children:[T.jsx("div",{className:"flex flex-col items-center gap-2",children:T.jsx(Oc,{tile:i.indicatorTile,size:"md",className:"shadow-2xl"})}),T.jsx(BM,{currentTurn:i.currentTurn,userTileCount:i.players[0].tiles.filter(w=>w!==null).length,centerStackCount:i.centerStack.length,onDraw:e})]}),T.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-40 p-2 flex flex-col items-center gap-3",children:[T.jsxs("div",{className:"flex items-center gap-6",children:[T.jsx(qh,{playerId:0,currentTurn:i.currentTurn,className:"scale-105"}),T.jsx("button",{onClick:c,className:"px-8 py-2 bg-[#ede0d4] hover:bg-white text-[#3d251e] border-2 border-[#8d5b3e] rounded shadow-lg text-[11px] font-black tracking-widest uppercase transition-all hover:scale-105 active:scale-95",children:"Dzenle"})]}),T.jsx(LM,{tiles:i.players[0].tiles,playerId:0,isCurrentPlayer:!0,okeyTile:i.okeyTile})]}),T.jsxs("div",{className:"absolute top-4 left-4 flex gap-2",children:[T.jsx("div",{className:"w-10 h-10 bg-white rounded shadow-md flex items-center justify-center text-xl text-[#3d251e] cursor-pointer hover:bg-slate-50",children:""}),T.jsx("div",{className:"w-10 h-10 bg-white rounded shadow-md flex items-center justify-center text-xl text-[#3d251e] cursor-pointer hover:bg-slate-50",children:"?"}),T.jsx("div",{className:"w-10 h-10 bg-white rounded shadow-md flex items-center justify-center text-xl text-[#3d251e] cursor-pointer hover:bg-slate-50",children:""})]}),T.jsx("div",{className:"absolute top-4 right-4",children:T.jsx("div",{className:"w-10 h-10 bg-[#e53935] rounded shadow-md flex items-center justify-center text-white text-xl font-bold cursor-pointer hover:bg-red-600",children:""})}),T.jsx(Xw,{dropAnimation:null,children:E()})]})})},HM=({roomId:i,mode:e,aiDifficulty:t,onExit:r})=>{const{gameState:o,drawFromCenter:c,drawFromDiscard:u,moveTileInRack:m,discardTile:g,autoSortTiles:p}=eS(i);return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[85vh] fade-in animate-in duration-700",children:[T.jsx("div",{className:"w-full max-w-6xl mb-6 flex justify-between items-center text-white px-4",children:T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("button",{onClick:r,className:"p-3 bg-slate-800/80 hover:bg-red-500/20 text-slate-400 hover:text-red-400 rounded-xl transition-all border border-slate-700 hover:border-red-500/50",title:"Leave Game",children:T.jsx(rx,{size:20})}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-2xl font-black tracking-tight",children:"Okey Arena"}),T.jsxs("div",{className:"text-xs font-medium text-emerald-400 flex items-center gap-2",children:[T.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),e==="online"?`Room: ${i}`:`Local  ${t} AI`]})]})]})}),T.jsx(qM,{gameState:o,onDraw:c,onDrawDiscard:u,onMoveTile:m,onDiscard:g,onAutoSort:p})]})};function FM(){const[i,e]=q.useState("menu"),[t,r]=q.useState("chess"),[o,c]=q.useState(null),[u,m]=q.useState("Normal"),g=Jw(null),p=Ww(null),_=eS(null),E=t==="chess"?g.isAuthLoading:t==="backgammon"?p.isAuthLoading:_.isAuthLoading,w=async()=>{try{const U=t==="chess"?await g.createRoom():t==="backgammon"?await p.createRoom():await _.createRoom();U&&(c(U),e("online"))}catch(U){console.error("Failed to create room:",U)}},R=async U=>{if(U.trim())try{t==="chess"?await g.joinRoom(U):t==="backgammon"?await p.joinRoom(U):await _.joinRoom(U),c(U),e("online")}catch(F){console.error("Failed to join room:",F),alert("Room not found or could not join")}},D=U=>{r(U)},P=U=>{m(U),e("local"),c(null)},I=()=>{c(null),e("menu")};return T.jsxs("main",{className:"relative min-h-screen w-full flex flex-col items-center overflow-x-hidden",children:[T.jsx(qA,{}),T.jsx("div",{className:"container mx-auto px-4 py-8 max-w-7xl w-full overflow-visible",children:i!=="menu"?t==="chess"?T.jsx(_M,{roomId:o||"",mode:i==="online"?"online":"local",aiDifficulty:u,onExit:I}):t==="backgammon"?T.jsx(CM,{roomId:o||"",mode:i==="online"?"online":"local",aiDifficulty:u,onExit:I}):T.jsx(HM,{roomId:o||"",mode:i==="online"?"online":"local",aiDifficulty:u,onExit:I}):T.jsx(g4,{onCreateRoom:w,onJoinRoom:R,onStartLocal:P,isAuthLoading:E,onSelectGame:D})}),T.jsx("footer",{className:"mt-auto py-8 text-slate-500 text-sm",children:"DragMate  Premium Multiplayer Board Gaming"})]})}BA.createRoot(document.getElementById("root")).render(T.jsx(q.StrictMode,{children:T.jsx(FM,{})}));
