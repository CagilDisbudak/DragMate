(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();function LS(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var rg={exports:{}},gc={};var F_;function US(){if(F_)return gc;F_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var d in o)d!=="key"&&(c[d]=o[d])}else c=o;return o=c.ref,{$$typeof:i,type:r,key:u,ref:o!==void 0?o:null,props:c}}return gc.Fragment=e,gc.jsx=t,gc.jsxs=t,gc}var G_;function zS(){return G_||(G_=1,rg.exports=US()),rg.exports}var _=zS(),ag={exports:{}},Be={};var $_;function BS(){if($_)return Be;$_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),w=Symbol.iterator;function I(V){return V===null||typeof V!="object"?null:(V=w&&V[w]||V["@@iterator"],typeof V=="function"?V:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,D={};function j(V,$,ue){this.props=V,this.context=$,this.refs=D,this.updater=ue||P}j.prototype.isReactComponent={},j.prototype.setState=function(V,$){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,$,"setState")},j.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function Q(){}Q.prototype=j.prototype;function F(V,$,ue){this.props=V,this.context=$,this.refs=D,this.updater=ue||P}var ce=F.prototype=new Q;ce.constructor=F,q(ce,j.prototype),ce.isPureReactComponent=!0;var G=Array.isArray;function U(){}var S={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function C(V,$,ue){var ge=ue.ref;return{$$typeof:i,type:V,key:$,ref:ge!==void 0?ge:null,props:ue}}function M(V,$){return C(V.type,$,V.props)}function R(V){return typeof V=="object"&&V!==null&&V.$$typeof===i}function O(V){var $={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ue){return $[ue]})}var k=/\/+/g;function be(V,$){return typeof V=="object"&&V!==null&&V.key!=null?O(""+V.key):$.toString(36)}function me(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(U,U):(V.status="pending",V.then(function($){V.status==="pending"&&(V.status="fulfilled",V.value=$)},function($){V.status==="pending"&&(V.status="rejected",V.reason=$)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function H(V,$,ue,ge,Ee){var Re=typeof V;(Re==="undefined"||Re==="boolean")&&(V=null);var Ve=!1;if(V===null)Ve=!0;else switch(Re){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch(V.$$typeof){case i:case e:Ve=!0;break;case v:return Ve=V._init,H(Ve(V._payload),$,ue,ge,Ee)}}if(Ve)return Ee=Ee(V),Ve=ge===""?"."+be(V,0):ge,G(Ee)?(ue="",Ve!=null&&(ue=Ve.replace(k,"$&/")+"/"),H(Ee,$,ue,"",function(Ft){return Ft})):Ee!=null&&(R(Ee)&&(Ee=M(Ee,ue+(Ee.key==null||V&&V.key===Ee.key?"":(""+Ee.key).replace(k,"$&/")+"/")+Ve)),$.push(Ee)),1;Ve=0;var xt=ge===""?".":ge+":";if(G(V))for(var ht=0;ht<V.length;ht++)ge=V[ht],Re=xt+be(ge,ht),Ve+=H(ge,$,ue,Re,Ee);else if(ht=I(V),typeof ht=="function")for(V=ht.call(V),ht=0;!(ge=V.next()).done;)ge=ge.value,Re=xt+be(ge,ht++),Ve+=H(ge,$,ue,Re,Ee);else if(Re==="object"){if(typeof V.then=="function")return H(me(V),$,ue,ge,Ee);throw $=String(V),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function Z(V,$,ue){if(V==null)return V;var ge=[],Ee=0;return H(V,ge,"","",function(Re){return $.call(ue,Re,Ee++)}),ge}function se(V){if(V._status===-1){var $=V._result;$=$(),$.then(function(ue){(V._status===0||V._status===-1)&&(V._status=1,V._result=ue)},function(ue){(V._status===0||V._status===-1)&&(V._status=2,V._result=ue)}),V._status===-1&&(V._status=0,V._result=$)}if(V._status===1)return V._result.default;throw V._result}var pe=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},ye={map:Z,forEach:function(V,$,ue){Z(V,function(){$.apply(this,arguments)},ue)},count:function(V){var $=0;return Z(V,function(){$++}),$},toArray:function(V){return Z(V,function($){return $})||[]},only:function(V){if(!R(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Be.Activity=E,Be.Children=ye,Be.Component=j,Be.Fragment=t,Be.Profiler=o,Be.PureComponent=F,Be.StrictMode=r,Be.Suspense=g,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Be.__COMPILER_RUNTIME={__proto__:null,c:function(V){return S.H.useMemoCache(V)}},Be.cache=function(V){return function(){return V.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(V,$,ue){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ge=q({},V.props),Ee=V.key;if($!=null)for(Re in $.key!==void 0&&(Ee=""+$.key),$)!x.call($,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&$.ref===void 0||(ge[Re]=$[Re]);var Re=arguments.length-2;if(Re===1)ge.children=ue;else if(1<Re){for(var Ve=Array(Re),xt=0;xt<Re;xt++)Ve[xt]=arguments[xt+2];ge.children=Ve}return C(V.type,Ee,ge)},Be.createContext=function(V){return V={$$typeof:u,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:c,_context:V},V},Be.createElement=function(V,$,ue){var ge,Ee={},Re=null;if($!=null)for(ge in $.key!==void 0&&(Re=""+$.key),$)x.call($,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(Ee[ge]=$[ge]);var Ve=arguments.length-2;if(Ve===1)Ee.children=ue;else if(1<Ve){for(var xt=Array(Ve),ht=0;ht<Ve;ht++)xt[ht]=arguments[ht+2];Ee.children=xt}if(V&&V.defaultProps)for(ge in Ve=V.defaultProps,Ve)Ee[ge]===void 0&&(Ee[ge]=Ve[ge]);return C(V,Re,Ee)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(V){return{$$typeof:d,render:V}},Be.isValidElement=R,Be.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:se}},Be.memo=function(V,$){return{$$typeof:p,type:V,compare:$===void 0?null:$}},Be.startTransition=function(V){var $=S.T,ue={};S.T=ue;try{var ge=V(),Ee=S.S;Ee!==null&&Ee(ue,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(U,pe)}catch(Re){pe(Re)}finally{$!==null&&ue.types!==null&&($.types=ue.types),S.T=$}},Be.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Be.use=function(V){return S.H.use(V)},Be.useActionState=function(V,$,ue){return S.H.useActionState(V,$,ue)},Be.useCallback=function(V,$){return S.H.useCallback(V,$)},Be.useContext=function(V){return S.H.useContext(V)},Be.useDebugValue=function(){},Be.useDeferredValue=function(V,$){return S.H.useDeferredValue(V,$)},Be.useEffect=function(V,$){return S.H.useEffect(V,$)},Be.useEffectEvent=function(V){return S.H.useEffectEvent(V)},Be.useId=function(){return S.H.useId()},Be.useImperativeHandle=function(V,$,ue){return S.H.useImperativeHandle(V,$,ue)},Be.useInsertionEffect=function(V,$){return S.H.useInsertionEffect(V,$)},Be.useLayoutEffect=function(V,$){return S.H.useLayoutEffect(V,$)},Be.useMemo=function(V,$){return S.H.useMemo(V,$)},Be.useOptimistic=function(V,$){return S.H.useOptimistic(V,$)},Be.useReducer=function(V,$,ue){return S.H.useReducer(V,$,ue)},Be.useRef=function(V){return S.H.useRef(V)},Be.useState=function(V){return S.H.useState(V)},Be.useSyncExternalStore=function(V,$,ue){return S.H.useSyncExternalStore(V,$,ue)},Be.useTransition=function(){return S.H.useTransition()},Be.version="19.2.3",Be}var K_;function pp(){return K_||(K_=1,ag.exports=BS()),ag.exports}var z=pp();const rt=LS(z);var og={exports:{}},pc={},lg={exports:{}},cg={};var Q_;function qS(){return Q_||(Q_=1,(function(i){function e(H,Z){var se=H.length;H.push(Z);e:for(;0<se;){var pe=se-1>>>1,ye=H[pe];if(0<o(ye,Z))H[pe]=Z,H[se]=ye,se=pe;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Z=H[0],se=H.pop();if(se!==Z){H[0]=se;e:for(var pe=0,ye=H.length,V=ye>>>1;pe<V;){var $=2*(pe+1)-1,ue=H[$],ge=$+1,Ee=H[ge];if(0>o(ue,se))ge<ye&&0>o(Ee,ue)?(H[pe]=Ee,H[ge]=se,pe=ge):(H[pe]=ue,H[$]=se,pe=$);else if(ge<ye&&0>o(Ee,se))H[pe]=Ee,H[ge]=se,pe=ge;else break e}}return Z}function o(H,Z){var se=H.sortIndex-Z.sortIndex;return se!==0?se:H.id-Z.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var u=Date,d=u.now();i.unstable_now=function(){return u.now()-d}}var g=[],p=[],v=1,E=null,w=3,I=!1,P=!1,q=!1,D=!1,j=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function ce(H){for(var Z=t(p);Z!==null;){if(Z.callback===null)r(p);else if(Z.startTime<=H)r(p),Z.sortIndex=Z.expirationTime,e(g,Z);else break;Z=t(p)}}function G(H){if(q=!1,ce(H),!P)if(t(g)!==null)P=!0,U||(U=!0,O());else{var Z=t(p);Z!==null&&me(G,Z.startTime-H)}}var U=!1,S=-1,x=5,C=-1;function M(){return D?!0:!(i.unstable_now()-C<x)}function R(){if(D=!1,U){var H=i.unstable_now();C=H;var Z=!0;try{e:{P=!1,q&&(q=!1,Q(S),S=-1),I=!0;var se=w;try{t:{for(ce(H),E=t(g);E!==null&&!(E.expirationTime>H&&M());){var pe=E.callback;if(typeof pe=="function"){E.callback=null,w=E.priorityLevel;var ye=pe(E.expirationTime<=H);if(H=i.unstable_now(),typeof ye=="function"){E.callback=ye,ce(H),Z=!0;break t}E===t(g)&&r(g),ce(H)}else r(g);E=t(g)}if(E!==null)Z=!0;else{var V=t(p);V!==null&&me(G,V.startTime-H),Z=!1}}break e}finally{E=null,w=se,I=!1}Z=void 0}}finally{Z?O():U=!1}}}var O;if(typeof F=="function")O=function(){F(R)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,be=k.port2;k.port1.onmessage=R,O=function(){be.postMessage(null)}}else O=function(){j(R,0)};function me(H,Z){S=j(function(){H(i.unstable_now())},Z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return w},i.unstable_next=function(H){switch(w){case 1:case 2:case 3:var Z=3;break;default:Z=w}var se=w;w=Z;try{return H()}finally{w=se}},i.unstable_requestPaint=function(){D=!0},i.unstable_runWithPriority=function(H,Z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var se=w;w=H;try{return Z()}finally{w=se}},i.unstable_scheduleCallback=function(H,Z,se){var pe=i.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?pe+se:pe):se=pe,H){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=se+ye,H={id:v++,callback:Z,priorityLevel:H,startTime:se,expirationTime:ye,sortIndex:-1},se>pe?(H.sortIndex=se,e(p,H),t(g)===null&&H===t(p)&&(q?(Q(S),S=-1):q=!0,me(G,se-pe))):(H.sortIndex=ye,e(g,H),P||I||(P=!0,U||(U=!0,O()))),H},i.unstable_shouldYield=M,i.unstable_wrapCallback=function(H){var Z=w;return function(){var se=w;w=Z;try{return H.apply(this,arguments)}finally{w=se}}}})(cg)),cg}var Y_;function HS(){return Y_||(Y_=1,lg.exports=qS()),lg.exports}var ug={exports:{}},Bn={};var X_;function FS(){if(X_)return Bn;X_=1;var i=pp();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:p,implementation:v}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Bn.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return c(g,p,null,v)},Bn.flushSync=function(g){var p=u.T,v=r.p;try{if(u.T=null,r.p=2,g)return g()}finally{u.T=p,r.p=v,r.d.f()}},Bn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},Bn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Bn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,E=d(v,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,I=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:w,fetchPriority:I}):v==="script"&&r.d.X(g,{crossOrigin:E,integrity:w,fetchPriority:I,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Bn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=d(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},Bn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=d(v,p.crossOrigin);r.d.L(g,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Bn.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=d(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},Bn.requestFormReset=function(g){r.d.r(g)},Bn.unstable_batchedUpdates=function(g,p){return g(p)},Bn.useFormState=function(g,p,v){return u.H.useFormState(g,p,v)},Bn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Bn.version="19.2.3",Bn}var W_;function rE(){if(W_)return ug.exports;W_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ug.exports=FS(),ug.exports}var J_;function GS(){if(J_)return pc;J_=1;var i=HS(),e=pp(),t=rE();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function u(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function g(n){if(c(n)!==n)throw Error(r(188))}function p(n){var s=n.alternate;if(!s){if(s=c(n),s===null)throw Error(r(188));return s!==n?null:n}for(var a=n,l=s;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return g(f),n;if(m===l)return g(f),s;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=m;else{for(var b=!1,A=f.child;A;){if(A===a){b=!0,a=f,l=m;break}if(A===l){b=!0,l=f,a=m;break}A=A.sibling}if(!b){for(A=m.child;A;){if(A===a){b=!0,a=m,l=f;break}if(A===l){b=!0,l=m,a=f;break}A=A.sibling}if(!b)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:s}function v(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=v(n),s!==null)return s;n=n.sibling}return null}var E=Object.assign,w=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),Q=Symbol.for("react.consumer"),F=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function O(n){return n===null||typeof n!="object"?null:(n=R&&n[R]||n["@@iterator"],typeof n=="function"?n:null)}var k=Symbol.for("react.client.reference");function be(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===k?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case q:return"Fragment";case j:return"Profiler";case D:return"StrictMode";case G:return"Suspense";case U:return"SuspenseList";case C:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case P:return"Portal";case F:return n.displayName||"Context";case Q:return(n._context.displayName||"Context")+".Consumer";case ce:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case S:return s=n.displayName||null,s!==null?s:be(n.type)||"Memo";case x:s=n._payload,n=n._init;try{return be(n(s))}catch{}}return null}var me=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},pe=[],ye=-1;function V(n){return{current:n}}function $(n){0>ye||(n.current=pe[ye],pe[ye]=null,ye--)}function ue(n,s){ye++,pe[ye]=n.current,n.current=s}var ge=V(null),Ee=V(null),Re=V(null),Ve=V(null);function xt(n,s){switch(ue(Re,s),ue(Ee,n),ue(ge,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?d_(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=d_(s),n=m_(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}$(ge),ue(ge,n)}function ht(){$(ge),$(Ee),$(Re)}function Ft(n){n.memoizedState!==null&&ue(Ve,n);var s=ge.current,a=m_(s,n.type);s!==a&&(ue(Ee,n),ue(ge,a))}function xi(n){Ee.current===n&&($(ge),$(Ee)),Ve.current===n&&($(Ve),hc._currentValue=se)}var Ln,qi;function en(n){if(Ln===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Ln=s&&s[1]||"",qi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ln+n+qi}var fi=!1;function Un(n,s){if(!n||fi)return"";fi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ae){var te=ae}Reflect.construct(n,[],fe)}else{try{fe.call()}catch(ae){te=ae}n.call(fe.prototype)}}else{try{throw Error()}catch(ae){te=ae}(fe=n())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ae){if(ae&&te&&typeof ae.stack=="string")return[ae.stack,te.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),b=m[0],A=m[1];if(b&&A){var L=b.split(`
`),J=A.split(`
`);for(f=l=0;l<L.length&&!L[l].includes("DetermineComponentFrameRoot");)l++;for(;f<J.length&&!J[f].includes("DetermineComponentFrameRoot");)f++;if(l===L.length||f===J.length)for(l=L.length-1,f=J.length-1;1<=l&&0<=f&&L[l]!==J[f];)f--;for(;1<=l&&0<=f;l--,f--)if(L[l]!==J[f]){if(l!==1||f!==1)do if(l--,f--,0>f||L[l]!==J[f]){var oe=`
`+L[l].replace(" at new "," at ");return n.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",n.displayName)),oe}while(1<=l&&0<=f);break}}}finally{fi=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?en(a):""}function as(n,s){switch(n.tag){case 26:case 27:case 5:return en(n.type);case 16:return en("Lazy");case 13:return n.child!==s&&s!==null?en("Suspense Fallback"):en("Suspense");case 19:return en("SuspenseList");case 0:case 15:return Un(n.type,!1);case 11:return Un(n.type.render,!1);case 1:return Un(n.type,!0);case 31:return en("Activity");default:return""}}function Hi(n){try{var s="",a=null;do s+=as(n,a),a=n,n=n.return;while(n);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var St=Object.prototype.hasOwnProperty,ft=i.unstable_scheduleCallback,$n=i.unstable_cancelCallback,os=i.unstable_shouldYield,ls=i.unstable_requestPaint,tn=i.unstable_now,Fi=i.unstable_getCurrentPriorityLevel,Rs=i.unstable_ImmediatePriority,Kn=i.unstable_UserBlockingPriority,Cn=i.unstable_NormalPriority,Gi=i.unstable_LowPriority,Cs=i.unstable_IdlePriority,Qn=i.log,Ns=i.unstable_setDisableYieldValue,Yn=null,Gt=null;function bn(n){if(typeof Qn=="function"&&Ns(n),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(Yn,n)}catch{}}var At=Math.clz32?Math.clz32:rr,Is=Math.log,$i=Math.LN2;function rr(n){return n>>>=0,n===0?32:31-(Is(n)/$i|0)|0}var ni=256,Ki=262144,Ge=4194304;function Rt(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ct(n,s,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,m=n.suspendedLanes,b=n.pingedLanes;n=n.warmLanes;var A=l&134217727;return A!==0?(l=A&~m,l!==0?f=Rt(l):(b&=A,b!==0?f=Rt(b):a||(a=A&~n,a!==0&&(f=Rt(a))))):(A=l&~m,A!==0?f=Rt(A):b!==0?f=Rt(b):a||(a=l&~n,a!==0&&(f=Rt(a)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:f}function Ut(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function En(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nn(){var n=Ge;return Ge<<=1,(Ge&62914560)===0&&(Ge=4194304),n}function Vt(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function ne(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function gt(n,s,a,l,f,m){var b=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var A=n.entanglements,L=n.expirationTimes,J=n.hiddenUpdates;for(a=b&~a;0<a;){var oe=31-At(a),fe=1<<oe;A[oe]=0,L[oe]=-1;var te=J[oe];if(te!==null)for(J[oe]=null,oe=0;oe<te.length;oe++){var ae=te[oe];ae!==null&&(ae.lane&=-536870913)}a&=~fe}l!==0&&pt(n,l,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(b&~s))}function pt(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var l=31-At(s);n.entangledLanes|=s,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function $t(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var l=31-At(a),f=1<<l;f&s|n[l]&s&&(n[l]|=s),a&=~f}}function ve(n,s){var a=s&-s;return a=(a&42)!==0?1:mn(a),(a&(n.suspendedLanes|s))!==0?0:a}function mn(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function it(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function kt(){var n=Z.p;return n!==0?n:(n=window.event,n===void 0?32:j_(n.type))}function gn(n,s){var a=Z.p;try{return Z.p=n,s()}finally{Z.p=a}}var yt=Math.random().toString(36).slice(2),Pt="__reactFiber$"+yt,Kt="__reactProps$"+yt,Se="__reactContainer$"+yt,ar="__reactEvents$"+yt,io="__reactListeners$"+yt,so="__reactHandles$"+yt,ma="__reactResources$"+yt,Si="__reactMarker$"+yt;function or(n){delete n[Pt],delete n[Kt],delete n[ar],delete n[io],delete n[so]}function Ai(n){var s=n[Pt];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Se]||a[Pt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=E_(n);n!==null;){if(a=n[Pt])return a;n=E_(n)}return s}n=a,a=n.parentNode}return null}function Xn(n){if(n=n[Pt]||n[Se]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function zn(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function Ri(n){var s=n[ma];return s||(s=n[ma]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function zt(n){n[Si]=!0}var ga=new Set,lr={};function ii(n,s){Ci(n,s),Ci(n+"Capture",s)}function Ci(n,s){for(lr[n]=s,n=0;n<s.length;n++)ga.add(s[n])}var pa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cr={},ya={};function sn(n){return St.call(ya,n)?!0:St.call(cr,n)?!1:pa.test(n)?ya[n]=!0:(cr[n]=!0,!1)}function Y(n,s,a){if(sn(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function ie(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function ee(n,s,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+l)}}function we(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ne(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function et(n,s,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(b){a=""+b,m.call(this,b)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(b){a=""+b},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function $e(n){if(!n._valueTracker){var s=Ne(n)?"checked":"value";n._valueTracker=et(n,s,""+n[s])}}function Ni(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return n&&(l=Ne(n)?n.checked?"true":"false":n.value),n=l,n!==a?(s.setValue(n),!0):!1}function cs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var va=/[\n"\\]/g;function si(n){return n.replace(va,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ro(n,s,a,l,f,m,b,A){n.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.type=b:n.removeAttribute("type"),s!=null?b==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+we(s)):n.value!==""+we(s)&&(n.value=""+we(s)):b!=="submit"&&b!=="reset"||n.removeAttribute("value"),s!=null?xl(n,b,we(s)):a!=null?xl(n,b,we(a)):l!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+we(A):n.removeAttribute("name")}function yu(n,s,a,l,f,m,b,A){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){$e(n);return}a=a!=null?""+we(a):"",s=s!=null?""+we(s):a,A||s===n.value||(n.value=s),n.defaultValue=s}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=A?n.checked:!!l,n.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.name=b),$e(n)}function xl(n,s,a){s==="number"&&cs(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function ur(n,s,a,l){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+we(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function vu(n,s,a){if(s!=null&&(s=""+we(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+we(a):""}function hr(n,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(me(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=we(s),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),$e(n)}function ri(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var _u=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sl(n,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":l?n.setProperty(s,a):typeof a!="number"||a===0||_u.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function Al(n,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in s)l=s[f],s.hasOwnProperty(f)&&a[f]!==l&&Sl(n,f,l)}else for(var m in s)s.hasOwnProperty(m)&&Sl(n,m,s[m])}function ao(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function oo(n){return fr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Qi(){}var Rl=null;function Ii(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var dr=null,us=null;function _a(n){var s=Xn(n);if(s&&(n=s.stateNode)){var a=n[Kt]||null;e:switch(n=s.stateNode,s.type){case"input":if(ro(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+si(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==n&&l.form===n.form){var f=l[Kt]||null;if(!f)throw Error(r(90));ro(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===n.form&&Ni(l)}break e;case"textarea":vu(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&ur(n,!!a.multiple,s,!1)}}}var lo=!1;function mr(n,s,a){if(lo)return n(s,a);lo=!0;try{var l=n(s);return l}finally{if(lo=!1,(dr!==null||us!==null)&&(dh(),dr&&(s=dr,n=us,us=dr=null,_a(s),n)))for(s=0;s<n.length;s++)_a(n[s])}}function Yi(n,s){var a=n.stateNode;if(a===null)return null;var l=a[Kt]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var Di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ba=!1;if(Di)try{var vt={};Object.defineProperty(vt,"passive",{get:function(){ba=!0}}),window.addEventListener("test",vt,vt),window.removeEventListener("test",vt,vt)}catch{ba=!1}var hs=null,Cl=null,Ea=null;function Nl(){if(Ea)return Ea;var n,s=Cl,a=s.length,l,f="value"in hs?hs.value:hs.textContent,m=f.length;for(n=0;n<a&&s[n]===f[n];n++);var b=a-n;for(l=1;l<=b&&s[a-l]===f[m-l];l++);return Ea=f.slice(n,1<l?1-l:void 0)}function Ta(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Ds(){return!0}function Xi(){return!1}function Nn(n){function s(a,l,f,m,b){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ds:Xi,this.isPropagationStopped=Xi,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ds)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ds)},persist:function(){},isPersistent:Ds}),s}var ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fs=Nn(ks),gr=E({},ks,{view:0,detail:0}),Il=Nn(gr),pr,co,ds,uo=E({},gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ds&&(ds&&n.type==="mousemove"?(pr=n.screenX-ds.screenX,co=n.screenY-ds.screenY):co=pr=0,ds=n),pr)},movementY:function(n){return"movementY"in n?n.movementY:co}}),Dl=Nn(uo),wa=E({},uo,{dataTransfer:0}),Eu=Nn(wa),Tu=E({},gr,{relatedTarget:0}),xa=Nn(Tu),kl=E({},ks,{animationName:0,elapsedTime:0,pseudoElement:0}),wu=Nn(kl),ho=E({},ks,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),xu=Nn(ho),Su=E({},ks,{data:0}),ms=Nn(Su),Au={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ru={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nu(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Cu[n])?!!s[n]:!1}function yr(){return Nu}var Wn=E({},gr,{key:function(n){if(n.key){var s=Au[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ta(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ru[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yr,charCode:function(n){return n.type==="keypress"?Ta(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ta(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Iu=Nn(Wn),Du=E({},uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Os=Nn(Du),h=E({},gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yr}),y=Nn(h),T=E({},ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=Nn(T),X=E({},uo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),re=Nn(X),_e=E({},ks,{newState:0,oldState:0}),qe=Nn(_e),Qt=[9,13,27,32],ct=Di&&"CompositionEvent"in window,Ot=null;Di&&"documentMode"in document&&(Ot=document.documentMode);var ki=Di&&"TextEvent"in window&&!Ot,gs=Di&&(!ct||Ot&&8<Ot&&11>=Ot),Wi=" ",Ji=!1;function Sa(n,s){switch(n){case"keyup":return Qt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var mo=!1;function lx(n,s){switch(n){case"compositionend":return fo(s);case"keypress":return s.which!==32?null:(Ji=!0,Wi);case"textInput":return n=s.data,n===Wi&&Ji?null:n;default:return null}}function cx(n,s){if(mo)return n==="compositionend"||!ct&&Sa(n,s)?(n=Nl(),Ea=Cl=hs=null,mo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return gs&&s.locale!=="ko"?null:s.data;default:return null}}var ux={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x0(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!ux[n.type]:s==="textarea"}function S0(n,s,a,l){dr?us?us.push(l):us=[l]:dr=l,s=bh(s,"onChange"),0<s.length&&(a=new fs("onChange","change",null,a,l),n.push({event:a,listeners:s}))}var Ol=null,Ml=null;function hx(n){o_(n,0)}function ku(n){var s=zn(n);if(Ni(s))return n}function A0(n,s){if(n==="change")return s}var R0=!1;if(Di){var fd;if(Di){var dd="oninput"in document;if(!dd){var C0=document.createElement("div");C0.setAttribute("oninput","return;"),dd=typeof C0.oninput=="function"}fd=dd}else fd=!1;R0=fd&&(!document.documentMode||9<document.documentMode)}function N0(){Ol&&(Ol.detachEvent("onpropertychange",I0),Ml=Ol=null)}function I0(n){if(n.propertyName==="value"&&ku(Ml)){var s=[];S0(s,Ml,n,Ii(n)),mr(hx,s)}}function fx(n,s,a){n==="focusin"?(N0(),Ol=s,Ml=a,Ol.attachEvent("onpropertychange",I0)):n==="focusout"&&N0()}function dx(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ku(Ml)}function mx(n,s){if(n==="click")return ku(s)}function gx(n,s){if(n==="input"||n==="change")return ku(s)}function px(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var di=typeof Object.is=="function"?Object.is:px;function Vl(n,s){if(di(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!St.call(s,f)||!di(n[f],s[f]))return!1}return!0}function D0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function k0(n,s){var a=D0(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=s&&l>=s)return{node:a,offset:s-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=D0(a)}}function O0(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?O0(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function M0(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=cs(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=cs(n.document)}return s}function md(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var yx=Di&&"documentMode"in document&&11>=document.documentMode,go=null,gd=null,Pl=null,pd=!1;function V0(n,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;pd||go==null||go!==cs(l)||(l=go,"selectionStart"in l&&md(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Pl&&Vl(Pl,l)||(Pl=l,l=bh(gd,"onSelect"),0<l.length&&(s=new fs("onSelect","select",null,s,a),n.push({event:s,listeners:l}),s.target=go)))}function Aa(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var po={animationend:Aa("Animation","AnimationEnd"),animationiteration:Aa("Animation","AnimationIteration"),animationstart:Aa("Animation","AnimationStart"),transitionrun:Aa("Transition","TransitionRun"),transitionstart:Aa("Transition","TransitionStart"),transitioncancel:Aa("Transition","TransitionCancel"),transitionend:Aa("Transition","TransitionEnd")},yd={},P0={};Di&&(P0=document.createElement("div").style,"AnimationEvent"in window||(delete po.animationend.animation,delete po.animationiteration.animation,delete po.animationstart.animation),"TransitionEvent"in window||delete po.transitionend.transition);function Ra(n){if(yd[n])return yd[n];if(!po[n])return n;var s=po[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in P0)return yd[n]=s[a];return n}var j0=Ra("animationend"),L0=Ra("animationiteration"),U0=Ra("animationstart"),vx=Ra("transitionrun"),_x=Ra("transitionstart"),bx=Ra("transitioncancel"),z0=Ra("transitionend"),B0=new Map,vd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vd.push("scrollEnd");function Zi(n,s){B0.set(n,s),ii(s,[n])}var Ou=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Oi=[],yo=0,_d=0;function Mu(){for(var n=yo,s=_d=yo=0;s<n;){var a=Oi[s];Oi[s++]=null;var l=Oi[s];Oi[s++]=null;var f=Oi[s];Oi[s++]=null;var m=Oi[s];if(Oi[s++]=null,l!==null&&f!==null){var b=l.pending;b===null?f.next=f:(f.next=b.next,b.next=f),l.pending=f}m!==0&&q0(a,f,m)}}function Vu(n,s,a,l){Oi[yo++]=n,Oi[yo++]=s,Oi[yo++]=a,Oi[yo++]=l,_d|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function bd(n,s,a,l){return Vu(n,s,a,l),Pu(n)}function Ca(n,s){return Vu(n,null,null,s),Pu(n)}function q0(n,s,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,m=n.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&s!==null&&(f=31-At(a),n=m.hiddenUpdates,l=n[f],l===null?n[f]=[s]:l.push(s),s.lane=a|536870912),m):null}function Pu(n){if(50<sc)throw sc=0,Nm=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var vo={};function Ex(n,s,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(n,s,a,l){return new Ex(n,s,a,l)}function Ed(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ms(n,s){var a=n.alternate;return a===null?(a=mi(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function H0(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function ju(n,s,a,l,f,m){var b=0;if(l=n,typeof n=="function")Ed(n)&&(b=1);else if(typeof n=="string")b=AS(n,a,ge.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case C:return n=mi(31,a,s,f),n.elementType=C,n.lanes=m,n;case q:return Na(a.children,f,m,s);case D:b=8,f|=24;break;case j:return n=mi(12,a,s,f|2),n.elementType=j,n.lanes=m,n;case G:return n=mi(13,a,s,f),n.elementType=G,n.lanes=m,n;case U:return n=mi(19,a,s,f),n.elementType=U,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case F:b=10;break e;case Q:b=9;break e;case ce:b=11;break e;case S:b=14;break e;case x:b=16,l=null;break e}b=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return s=mi(b,a,s,f),s.elementType=n,s.type=l,s.lanes=m,s}function Na(n,s,a,l){return n=mi(7,n,l,s),n.lanes=a,n}function Td(n,s,a){return n=mi(6,n,null,s),n.lanes=a,n}function F0(n){var s=mi(18,null,null,0);return s.stateNode=n,s}function wd(n,s,a){return s=mi(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var G0=new WeakMap;function Mi(n,s){if(typeof n=="object"&&n!==null){var a=G0.get(n);return a!==void 0?a:(s={value:n,source:s,stack:Hi(s)},G0.set(n,s),s)}return{value:n,source:s,stack:Hi(s)}}var _o=[],bo=0,Lu=null,jl=0,Vi=[],Pi=0,vr=null,ps=1,ys="";function Vs(n,s){_o[bo++]=jl,_o[bo++]=Lu,Lu=n,jl=s}function $0(n,s,a){Vi[Pi++]=ps,Vi[Pi++]=ys,Vi[Pi++]=vr,vr=n;var l=ps;n=ys;var f=32-At(l)-1;l&=~(1<<f),a+=1;var m=32-At(s)+f;if(30<m){var b=f-f%5;m=(l&(1<<b)-1).toString(32),l>>=b,f-=b,ps=1<<32-At(s)+f|a<<f|l,ys=m+n}else ps=1<<m|a<<f|l,ys=n}function xd(n){n.return!==null&&(Vs(n,1),$0(n,1,0))}function Sd(n){for(;n===Lu;)Lu=_o[--bo],_o[bo]=null,jl=_o[--bo],_o[bo]=null;for(;n===vr;)vr=Vi[--Pi],Vi[Pi]=null,ys=Vi[--Pi],Vi[Pi]=null,ps=Vi[--Pi],Vi[Pi]=null}function K0(n,s){Vi[Pi++]=ps,Vi[Pi++]=ys,Vi[Pi++]=vr,ps=s.id,ys=s.overflow,vr=n}var In=null,Nt=null,tt=!1,_r=null,ji=!1,Ad=Error(r(519));function br(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ll(Mi(s,n)),Ad}function Q0(n){var s=n.stateNode,a=n.type,l=n.memoizedProps;switch(s[Pt]=n,s[Kt]=l,a){case"dialog":Qe("cancel",s),Qe("close",s);break;case"iframe":case"object":case"embed":Qe("load",s);break;case"video":case"audio":for(a=0;a<ac.length;a++)Qe(ac[a],s);break;case"source":Qe("error",s);break;case"img":case"image":case"link":Qe("error",s),Qe("load",s);break;case"details":Qe("toggle",s);break;case"input":Qe("invalid",s),yu(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Qe("invalid",s);break;case"textarea":Qe("invalid",s),hr(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||h_(s.textContent,a)?(l.popover!=null&&(Qe("beforetoggle",s),Qe("toggle",s)),l.onScroll!=null&&Qe("scroll",s),l.onScrollEnd!=null&&Qe("scrollend",s),l.onClick!=null&&(s.onclick=Qi),s=!0):s=!1,s||br(n,!0)}function Y0(n){for(In=n.return;In;)switch(In.tag){case 5:case 31:case 13:ji=!1;return;case 27:case 3:ji=!0;return;default:In=In.return}}function Eo(n){if(n!==In)return!1;if(!tt)return Y0(n),tt=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Fm(n.type,n.memoizedProps)),a=!a),a&&Nt&&br(n),Y0(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Nt=b_(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Nt=b_(n)}else s===27?(s=Nt,Mr(n.type)?(n=Ym,Ym=null,Nt=n):Nt=s):Nt=In?Ui(n.stateNode.nextSibling):null;return!0}function Ia(){Nt=In=null,tt=!1}function Rd(){var n=_r;return n!==null&&(ci===null?ci=n:ci.push.apply(ci,n),_r=null),n}function Ll(n){_r===null?_r=[n]:_r.push(n)}var Cd=V(null),Da=null,Ps=null;function Er(n,s,a){ue(Cd,s._currentValue),s._currentValue=a}function js(n){n._currentValue=Cd.current,$(Cd)}function Nd(n,s,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),n===a)break;n=n.return}}function Id(n,s,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var b=f.child;m=m.firstContext;e:for(;m!==null;){var A=m;m=f;for(var L=0;L<s.length;L++)if(A.context===s[L]){m.lanes|=a,A=m.alternate,A!==null&&(A.lanes|=a),Nd(m.return,a,n),l||(b=null);break e}m=A.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(r(341));b.lanes|=a,m=b.alternate,m!==null&&(m.lanes|=a),Nd(b,a,n),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===n){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function To(n,s,a,l){n=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(r(387));if(b=b.memoizedProps,b!==null){var A=f.type;di(f.pendingProps.value,b.value)||(n!==null?n.push(A):n=[A])}}else if(f===Ve.current){if(b=f.alternate,b===null)throw Error(r(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(hc):n=[hc])}f=f.return}n!==null&&Id(s,n,a,l),s.flags|=262144}function Uu(n){for(n=n.firstContext;n!==null;){if(!di(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ka(n){Da=n,Ps=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Dn(n){return X0(Da,n)}function zu(n,s){return Da===null&&ka(n),X0(n,s)}function X0(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Ps===null){if(n===null)throw Error(r(308));Ps=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Ps=Ps.next=s;return a}var Tx=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},wx=i.unstable_scheduleCallback,xx=i.unstable_NormalPriority,rn={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dd(){return{controller:new Tx,data:new Map,refCount:0}}function Ul(n){n.refCount--,n.refCount===0&&wx(xx,function(){n.controller.abort()})}var zl=null,kd=0,wo=0,xo=null;function Sx(n,s){if(zl===null){var a=zl=[];kd=0,wo=Vm(),xo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return kd++,s.then(W0,W0),s}function W0(){if(--kd===0&&zl!==null){xo!==null&&(xo.status="fulfilled");var n=zl;zl=null,wo=0,xo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function Ax(n,s){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var J0=H.S;H.S=function(n,s){Vv=tn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Sx(n,s),J0!==null&&J0(n,s)};var Oa=V(null);function Od(){var n=Oa.current;return n!==null?n:wt.pooledCache}function Bu(n,s){s===null?ue(Oa,Oa.current):ue(Oa,s.pool)}function Z0(){var n=Od();return n===null?null:{parent:rn._currentValue,pool:n}}var So=Error(r(460)),Md=Error(r(474)),qu=Error(r(542)),Hu={then:function(){}};function ey(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ty(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(Qi,Qi),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,iy(n),n;default:if(typeof s.status=="string")s.then(Qi,Qi);else{if(n=wt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(l){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=l}},function(l){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,iy(n),n}throw Va=s,So}}function Ma(n){try{var s=n._init;return s(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Va=a,So):a}}var Va=null;function ny(){if(Va===null)throw Error(r(459));var n=Va;return Va=null,n}function iy(n){if(n===So||n===qu)throw Error(r(483))}var Ao=null,Bl=0;function Fu(n){var s=Bl;return Bl+=1,Ao===null&&(Ao=[]),ty(Ao,n,s)}function ql(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Gu(n,s){throw s.$$typeof===w?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function sy(n){function s(K,B){if(n){var W=K.deletions;W===null?(K.deletions=[B],K.flags|=16):W.push(B)}}function a(K,B){if(!n)return null;for(;B!==null;)s(K,B),B=B.sibling;return null}function l(K){for(var B=new Map;K!==null;)K.key!==null?B.set(K.key,K):B.set(K.index,K),K=K.sibling;return B}function f(K,B){return K=Ms(K,B),K.index=0,K.sibling=null,K}function m(K,B,W){return K.index=W,n?(W=K.alternate,W!==null?(W=W.index,W<B?(K.flags|=67108866,B):W):(K.flags|=67108866,B)):(K.flags|=1048576,B)}function b(K){return n&&K.alternate===null&&(K.flags|=67108866),K}function A(K,B,W,le){return B===null||B.tag!==6?(B=Td(W,K.mode,le),B.return=K,B):(B=f(B,W),B.return=K,B)}function L(K,B,W,le){var De=W.type;return De===q?oe(K,B,W.props.children,le,W.key):B!==null&&(B.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===x&&Ma(De)===B.type)?(B=f(B,W.props),ql(B,W),B.return=K,B):(B=ju(W.type,W.key,W.props,null,K.mode,le),ql(B,W),B.return=K,B)}function J(K,B,W,le){return B===null||B.tag!==4||B.stateNode.containerInfo!==W.containerInfo||B.stateNode.implementation!==W.implementation?(B=wd(W,K.mode,le),B.return=K,B):(B=f(B,W.children||[]),B.return=K,B)}function oe(K,B,W,le,De){return B===null||B.tag!==7?(B=Na(W,K.mode,le,De),B.return=K,B):(B=f(B,W),B.return=K,B)}function fe(K,B,W){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Td(""+B,K.mode,W),B.return=K,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case I:return W=ju(B.type,B.key,B.props,null,K.mode,W),ql(W,B),W.return=K,W;case P:return B=wd(B,K.mode,W),B.return=K,B;case x:return B=Ma(B),fe(K,B,W)}if(me(B)||O(B))return B=Na(B,K.mode,W,null),B.return=K,B;if(typeof B.then=="function")return fe(K,Fu(B),W);if(B.$$typeof===F)return fe(K,zu(K,B),W);Gu(K,B)}return null}function te(K,B,W,le){var De=B!==null?B.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return De!==null?null:A(K,B,""+W,le);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case I:return W.key===De?L(K,B,W,le):null;case P:return W.key===De?J(K,B,W,le):null;case x:return W=Ma(W),te(K,B,W,le)}if(me(W)||O(W))return De!==null?null:oe(K,B,W,le,null);if(typeof W.then=="function")return te(K,B,Fu(W),le);if(W.$$typeof===F)return te(K,B,zu(K,W),le);Gu(K,W)}return null}function ae(K,B,W,le,De){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return K=K.get(W)||null,A(B,K,""+le,De);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case I:return K=K.get(le.key===null?W:le.key)||null,L(B,K,le,De);case P:return K=K.get(le.key===null?W:le.key)||null,J(B,K,le,De);case x:return le=Ma(le),ae(K,B,W,le,De)}if(me(le)||O(le))return K=K.get(W)||null,oe(B,K,le,De,null);if(typeof le.then=="function")return ae(K,B,W,Fu(le),De);if(le.$$typeof===F)return ae(K,B,W,zu(B,le),De);Gu(B,le)}return null}function Ae(K,B,W,le){for(var De=null,ot=null,Ce=B,Fe=B=0,Xe=null;Ce!==null&&Fe<W.length;Fe++){Ce.index>Fe?(Xe=Ce,Ce=null):Xe=Ce.sibling;var lt=te(K,Ce,W[Fe],le);if(lt===null){Ce===null&&(Ce=Xe);break}n&&Ce&&lt.alternate===null&&s(K,Ce),B=m(lt,B,Fe),ot===null?De=lt:ot.sibling=lt,ot=lt,Ce=Xe}if(Fe===W.length)return a(K,Ce),tt&&Vs(K,Fe),De;if(Ce===null){for(;Fe<W.length;Fe++)Ce=fe(K,W[Fe],le),Ce!==null&&(B=m(Ce,B,Fe),ot===null?De=Ce:ot.sibling=Ce,ot=Ce);return tt&&Vs(K,Fe),De}for(Ce=l(Ce);Fe<W.length;Fe++)Xe=ae(Ce,K,Fe,W[Fe],le),Xe!==null&&(n&&Xe.alternate!==null&&Ce.delete(Xe.key===null?Fe:Xe.key),B=m(Xe,B,Fe),ot===null?De=Xe:ot.sibling=Xe,ot=Xe);return n&&Ce.forEach(function(Ur){return s(K,Ur)}),tt&&Vs(K,Fe),De}function Me(K,B,W,le){if(W==null)throw Error(r(151));for(var De=null,ot=null,Ce=B,Fe=B=0,Xe=null,lt=W.next();Ce!==null&&!lt.done;Fe++,lt=W.next()){Ce.index>Fe?(Xe=Ce,Ce=null):Xe=Ce.sibling;var Ur=te(K,Ce,lt.value,le);if(Ur===null){Ce===null&&(Ce=Xe);break}n&&Ce&&Ur.alternate===null&&s(K,Ce),B=m(Ur,B,Fe),ot===null?De=Ur:ot.sibling=Ur,ot=Ur,Ce=Xe}if(lt.done)return a(K,Ce),tt&&Vs(K,Fe),De;if(Ce===null){for(;!lt.done;Fe++,lt=W.next())lt=fe(K,lt.value,le),lt!==null&&(B=m(lt,B,Fe),ot===null?De=lt:ot.sibling=lt,ot=lt);return tt&&Vs(K,Fe),De}for(Ce=l(Ce);!lt.done;Fe++,lt=W.next())lt=ae(Ce,K,Fe,lt.value,le),lt!==null&&(n&&lt.alternate!==null&&Ce.delete(lt.key===null?Fe:lt.key),B=m(lt,B,Fe),ot===null?De=lt:ot.sibling=lt,ot=lt);return n&&Ce.forEach(function(jS){return s(K,jS)}),tt&&Vs(K,Fe),De}function Et(K,B,W,le){if(typeof W=="object"&&W!==null&&W.type===q&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case I:e:{for(var De=W.key;B!==null;){if(B.key===De){if(De=W.type,De===q){if(B.tag===7){a(K,B.sibling),le=f(B,W.props.children),le.return=K,K=le;break e}}else if(B.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===x&&Ma(De)===B.type){a(K,B.sibling),le=f(B,W.props),ql(le,W),le.return=K,K=le;break e}a(K,B);break}else s(K,B);B=B.sibling}W.type===q?(le=Na(W.props.children,K.mode,le,W.key),le.return=K,K=le):(le=ju(W.type,W.key,W.props,null,K.mode,le),ql(le,W),le.return=K,K=le)}return b(K);case P:e:{for(De=W.key;B!==null;){if(B.key===De)if(B.tag===4&&B.stateNode.containerInfo===W.containerInfo&&B.stateNode.implementation===W.implementation){a(K,B.sibling),le=f(B,W.children||[]),le.return=K,K=le;break e}else{a(K,B);break}else s(K,B);B=B.sibling}le=wd(W,K.mode,le),le.return=K,K=le}return b(K);case x:return W=Ma(W),Et(K,B,W,le)}if(me(W))return Ae(K,B,W,le);if(O(W)){if(De=O(W),typeof De!="function")throw Error(r(150));return W=De.call(W),Me(K,B,W,le)}if(typeof W.then=="function")return Et(K,B,Fu(W),le);if(W.$$typeof===F)return Et(K,B,zu(K,W),le);Gu(K,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,B!==null&&B.tag===6?(a(K,B.sibling),le=f(B,W),le.return=K,K=le):(a(K,B),le=Td(W,K.mode,le),le.return=K,K=le),b(K)):a(K,B)}return function(K,B,W,le){try{Bl=0;var De=Et(K,B,W,le);return Ao=null,De}catch(Ce){if(Ce===So||Ce===qu)throw Ce;var ot=mi(29,Ce,null,K.mode);return ot.lanes=le,ot.return=K,ot}}}var Pa=sy(!0),ry=sy(!1),Tr=!1;function Vd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pd(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function wr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function xr(n,s,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(ut&2)!==0){var f=l.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),l.pending=s,s=Pu(n),q0(n,null,a),s}return Vu(n,l,s,a),Pu(n)}function Hl(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,$t(n,a)}}function jd(n,s){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=b:m=m.next=b,a=a.next}while(a!==null);m===null?f=m=s:m=m.next=s}else f=m=s;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var Ld=!1;function Fl(){if(Ld){var n=xo;if(n!==null)throw n}}function Gl(n,s,a,l){Ld=!1;var f=n.updateQueue;Tr=!1;var m=f.firstBaseUpdate,b=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var L=A,J=L.next;L.next=null,b===null?m=J:b.next=J,b=L;var oe=n.alternate;oe!==null&&(oe=oe.updateQueue,A=oe.lastBaseUpdate,A!==b&&(A===null?oe.firstBaseUpdate=J:A.next=J,oe.lastBaseUpdate=L))}if(m!==null){var fe=f.baseState;b=0,oe=J=L=null,A=m;do{var te=A.lane&-536870913,ae=te!==A.lane;if(ae?(Ye&te)===te:(l&te)===te){te!==0&&te===wo&&(Ld=!0),oe!==null&&(oe=oe.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Ae=n,Me=A;te=s;var Et=a;switch(Me.tag){case 1:if(Ae=Me.payload,typeof Ae=="function"){fe=Ae.call(Et,fe,te);break e}fe=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Me.payload,te=typeof Ae=="function"?Ae.call(Et,fe,te):Ae,te==null)break e;fe=E({},fe,te);break e;case 2:Tr=!0}}te=A.callback,te!==null&&(n.flags|=64,ae&&(n.flags|=8192),ae=f.callbacks,ae===null?f.callbacks=[te]:ae.push(te))}else ae={lane:te,tag:A.tag,payload:A.payload,callback:A.callback,next:null},oe===null?(J=oe=ae,L=fe):oe=oe.next=ae,b|=te;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;ae=A,A=ae.next,ae.next=null,f.lastBaseUpdate=ae,f.shared.pending=null}}while(!0);oe===null&&(L=fe),f.baseState=L,f.firstBaseUpdate=J,f.lastBaseUpdate=oe,m===null&&(f.shared.lanes=0),Nr|=b,n.lanes=b,n.memoizedState=fe}}function ay(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function oy(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)ay(a[n],s)}var Ro=V(null),$u=V(0);function ly(n,s){n=$s,ue($u,n),ue(Ro,s),$s=n|s.baseLanes}function Ud(){ue($u,$s),ue(Ro,Ro.current)}function zd(){$s=$u.current,$(Ro),$($u)}var gi=V(null),Li=null;function Sr(n){var s=n.alternate;ue(Yt,Yt.current&1),ue(gi,n),Li===null&&(s===null||Ro.current!==null||s.memoizedState!==null)&&(Li=n)}function Bd(n){ue(Yt,Yt.current),ue(gi,n),Li===null&&(Li=n)}function cy(n){n.tag===22?(ue(Yt,Yt.current),ue(gi,n),Li===null&&(Li=n)):Ar()}function Ar(){ue(Yt,Yt.current),ue(gi,gi.current)}function pi(n){$(gi),Li===n&&(Li=null),$(Yt)}var Yt=V(0);function Ku(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Km(a)||Qm(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ls=0,He=null,_t=null,an=null,Qu=!1,Co=!1,ja=!1,Yu=0,$l=0,No=null,Rx=0;function Bt(){throw Error(r(321))}function qd(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!di(n[a],s[a]))return!1;return!0}function Hd(n,s,a,l,f,m){return Ls=m,He=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,H.H=n===null||n.memoizedState===null?$y:sm,ja=!1,m=a(l,f),ja=!1,Co&&(m=hy(s,a,l,f)),uy(n),m}function uy(n){H.H=Yl;var s=_t!==null&&_t.next!==null;if(Ls=0,an=_t=He=null,Qu=!1,$l=0,No=null,s)throw Error(r(300));n===null||on||(n=n.dependencies,n!==null&&Uu(n)&&(on=!0))}function hy(n,s,a,l){He=n;var f=0;do{if(Co&&(No=null),$l=0,Co=!1,25<=f)throw Error(r(301));if(f+=1,an=_t=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}H.H=Ky,m=s(a,l)}while(Co);return m}function Cx(){var n=H.H,s=n.useState()[0];return s=typeof s.then=="function"?Kl(s):s,n=n.useState()[0],(_t!==null?_t.memoizedState:null)!==n&&(He.flags|=1024),s}function Fd(){var n=Yu!==0;return Yu=0,n}function Gd(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function $d(n){if(Qu){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Qu=!1}Ls=0,an=_t=He=null,Co=!1,$l=Yu=0,No=null}function Jn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?He.memoizedState=an=n:an=an.next=n,an}function Xt(){if(_t===null){var n=He.alternate;n=n!==null?n.memoizedState:null}else n=_t.next;var s=an===null?He.memoizedState:an.next;if(s!==null)an=s,_t=n;else{if(n===null)throw He.alternate===null?Error(r(467)):Error(r(310));_t=n,n={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},an===null?He.memoizedState=an=n:an=an.next=n}return an}function Xu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kl(n){var s=$l;return $l+=1,No===null&&(No=[]),n=ty(No,n,s),s=He,(an===null?s.memoizedState:an.next)===null&&(s=s.alternate,H.H=s===null||s.memoizedState===null?$y:sm),n}function Wu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Kl(n);if(n.$$typeof===F)return Dn(n)}throw Error(r(438,String(n)))}function Kd(n){var s=null,a=He.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=He.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Xu(),He.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),l=0;l<n;l++)a[l]=M;return s.index++,a}function Us(n,s){return typeof s=="function"?s(n):s}function Ju(n){var s=Xt();return Qd(s,_t,n)}function Qd(n,s,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,m=l.pending;if(m!==null){if(f!==null){var b=f.next;f.next=m.next,m.next=b}s.baseQueue=f=m,l.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{s=f.next;var A=b=null,L=null,J=s,oe=!1;do{var fe=J.lane&-536870913;if(fe!==J.lane?(Ye&fe)===fe:(Ls&fe)===fe){var te=J.revertLane;if(te===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),fe===wo&&(oe=!0);else if((Ls&te)===te){J=J.next,te===wo&&(oe=!0);continue}else fe={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},L===null?(A=L=fe,b=m):L=L.next=fe,He.lanes|=te,Nr|=te;fe=J.action,ja&&a(m,fe),m=J.hasEagerState?J.eagerState:a(m,fe)}else te={lane:fe,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},L===null?(A=L=te,b=m):L=L.next=te,He.lanes|=fe,Nr|=fe;J=J.next}while(J!==null&&J!==s);if(L===null?b=m:L.next=A,!di(m,n.memoizedState)&&(on=!0,oe&&(a=xo,a!==null)))throw a;n.memoizedState=m,n.baseState=b,n.baseQueue=L,l.lastRenderedState=m}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function Yd(n){var s=Xt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,m=s.memoizedState;if(f!==null){a.pending=null;var b=f=f.next;do m=n(m,b.action),b=b.next;while(b!==f);di(m,s.memoizedState)||(on=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,l]}function fy(n,s,a){var l=He,f=Xt(),m=tt;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=s();var b=!di((_t||f).memoizedState,a);if(b&&(f.memoizedState=a,on=!0),f=f.queue,Jd(gy.bind(null,l,f,n),[n]),f.getSnapshot!==s||b||an!==null&&an.memoizedState.tag&1){if(l.flags|=2048,Io(9,{destroy:void 0},my.bind(null,l,f,a,s),null),wt===null)throw Error(r(349));m||(Ls&127)!==0||dy(l,s,a)}return a}function dy(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=He.updateQueue,s===null?(s=Xu(),He.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function my(n,s,a,l){s.value=a,s.getSnapshot=l,py(s)&&yy(n)}function gy(n,s,a){return a(function(){py(s)&&yy(n)})}function py(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!di(n,a)}catch{return!0}}function yy(n){var s=Ca(n,2);s!==null&&ui(s,n,2)}function Xd(n){var s=Jn();if(typeof n=="function"){var a=n;if(n=a(),ja){bn(!0);try{a()}finally{bn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:n},s}function vy(n,s,a,l){return n.baseState=a,Qd(n,_t,typeof l=="function"?l:Us)}function Nx(n,s,a,l,f){if(th(n))throw Error(r(485));if(n=s.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};H.T!==null?a(!0):m.isTransition=!1,l(m),a=s.pending,a===null?(m.next=s.pending=m,_y(s,m)):(m.next=a.next,s.pending=a.next=m)}}function _y(n,s){var a=s.action,l=s.payload,f=n.state;if(s.isTransition){var m=H.T,b={};H.T=b;try{var A=a(f,l),L=H.S;L!==null&&L(b,A),by(n,s,A)}catch(J){Wd(n,s,J)}finally{m!==null&&b.types!==null&&(m.types=b.types),H.T=m}}else try{m=a(f,l),by(n,s,m)}catch(J){Wd(n,s,J)}}function by(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Ey(n,s,l)},function(l){return Wd(n,s,l)}):Ey(n,s,a)}function Ey(n,s,a){s.status="fulfilled",s.value=a,Ty(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,_y(n,a)))}function Wd(n,s,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,Ty(s),s=s.next;while(s!==l)}n.action=null}function Ty(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function wy(n,s){return s}function xy(n,s){if(tt){var a=wt.formState;if(a!==null){e:{var l=He;if(tt){if(Nt){t:{for(var f=Nt,m=ji;f.nodeType!==8;){if(!m){f=null;break t}if(f=Ui(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Nt=Ui(f.nextSibling),l=f.data==="F!";break e}}br(l)}l=!1}l&&(s=a[0])}}return a=Jn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wy,lastRenderedState:s},a.queue=l,a=Hy.bind(null,He,l),l.dispatch=a,l=Xd(!1),m=im.bind(null,He,!1,l.queue),l=Jn(),f={state:s,dispatch:null,action:n,pending:null},l.queue=f,a=Nx.bind(null,He,f,m,a),f.dispatch=a,l.memoizedState=n,[s,a,!1]}function Sy(n){var s=Xt();return Ay(s,_t,n)}function Ay(n,s,a){if(s=Qd(n,s,wy)[0],n=Ju(Us)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Kl(s)}catch(b){throw b===So?qu:b}else l=s;s=Xt();var f=s.queue,m=f.dispatch;return a!==s.memoizedState&&(He.flags|=2048,Io(9,{destroy:void 0},Ix.bind(null,f,a),null)),[l,m,n]}function Ix(n,s){n.action=s}function Ry(n){var s=Xt(),a=_t;if(a!==null)return Ay(s,a,n);Xt(),s=s.memoizedState,a=Xt();var l=a.queue.dispatch;return a.memoizedState=n,[s,l,!1]}function Io(n,s,a,l){return n={tag:n,create:a,deps:l,inst:s,next:null},s=He.updateQueue,s===null&&(s=Xu(),He.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,s.lastEffect=n),n}function Cy(){return Xt().memoizedState}function Zu(n,s,a,l){var f=Jn();He.flags|=n,f.memoizedState=Io(1|s,{destroy:void 0},a,l===void 0?null:l)}function eh(n,s,a,l){var f=Xt();l=l===void 0?null:l;var m=f.memoizedState.inst;_t!==null&&l!==null&&qd(l,_t.memoizedState.deps)?f.memoizedState=Io(s,m,a,l):(He.flags|=n,f.memoizedState=Io(1|s,m,a,l))}function Ny(n,s){Zu(8390656,8,n,s)}function Jd(n,s){eh(2048,8,n,s)}function Dx(n){He.flags|=4;var s=He.updateQueue;if(s===null)s=Xu(),He.updateQueue=s,s.events=[n];else{var a=s.events;a===null?s.events=[n]:a.push(n)}}function Iy(n){var s=Xt().memoizedState;return Dx({ref:s,nextImpl:n}),function(){if((ut&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function Dy(n,s){return eh(4,2,n,s)}function ky(n,s){return eh(4,4,n,s)}function Oy(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function My(n,s,a){a=a!=null?a.concat([n]):null,eh(4,4,Oy.bind(null,s,n),a)}function Zd(){}function Vy(n,s){var a=Xt();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&qd(s,l[1])?l[0]:(a.memoizedState=[n,s],n)}function Py(n,s){var a=Xt();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&qd(s,l[1]))return l[0];if(l=n(),ja){bn(!0);try{n()}finally{bn(!1)}}return a.memoizedState=[l,s],l}function em(n,s,a){return a===void 0||(Ls&1073741824)!==0&&(Ye&261930)===0?n.memoizedState=s:(n.memoizedState=a,n=jv(),He.lanes|=n,Nr|=n,a)}function jy(n,s,a,l){return di(a,s)?a:Ro.current!==null?(n=em(n,a,l),di(n,s)||(on=!0),n):(Ls&42)===0||(Ls&1073741824)!==0&&(Ye&261930)===0?(on=!0,n.memoizedState=a):(n=jv(),He.lanes|=n,Nr|=n,s)}function Ly(n,s,a,l,f){var m=Z.p;Z.p=m!==0&&8>m?m:8;var b=H.T,A={};H.T=A,im(n,!1,s,a);try{var L=f(),J=H.S;if(J!==null&&J(A,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var oe=Ax(L,l);Ql(n,s,oe,_i(n))}else Ql(n,s,l,_i(n))}catch(fe){Ql(n,s,{then:function(){},status:"rejected",reason:fe},_i())}finally{Z.p=m,b!==null&&A.types!==null&&(b.types=A.types),H.T=b}}function kx(){}function tm(n,s,a,l){if(n.tag!==5)throw Error(r(476));var f=Uy(n).queue;Ly(n,f,s,se,a===null?kx:function(){return zy(n),a(l)})}function Uy(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:se},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function zy(n){var s=Uy(n);s.next===null&&(s=n.alternate.memoizedState),Ql(n,s.next.queue,{},_i())}function nm(){return Dn(hc)}function By(){return Xt().memoizedState}function qy(){return Xt().memoizedState}function Ox(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=_i();n=wr(a);var l=xr(s,n,a);l!==null&&(ui(l,s,a),Hl(l,s,a)),s={cache:Dd()},n.payload=s;return}s=s.return}}function Mx(n,s,a){var l=_i();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},th(n)?Fy(s,a):(a=bd(n,s,a,l),a!==null&&(ui(a,n,l),Gy(a,s,l)))}function Hy(n,s,a){var l=_i();Ql(n,s,a,l)}function Ql(n,s,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(th(n))Fy(s,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var b=s.lastRenderedState,A=m(b,a);if(f.hasEagerState=!0,f.eagerState=A,di(A,b))return Vu(n,s,f,0),wt===null&&Mu(),!1}catch{}if(a=bd(n,s,f,l),a!==null)return ui(a,n,l),Gy(a,s,l),!0}return!1}function im(n,s,a,l){if(l={lane:2,revertLane:Vm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},th(n)){if(s)throw Error(r(479))}else s=bd(n,a,l,2),s!==null&&ui(s,n,2)}function th(n){var s=n.alternate;return n===He||s!==null&&s===He}function Fy(n,s){Co=Qu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Gy(n,s,a){if((a&4194048)!==0){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,$t(n,a)}}var Yl={readContext:Dn,use:Wu,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useLayoutEffect:Bt,useInsertionEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useSyncExternalStore:Bt,useId:Bt,useHostTransitionStatus:Bt,useFormState:Bt,useActionState:Bt,useOptimistic:Bt,useMemoCache:Bt,useCacheRefresh:Bt};Yl.useEffectEvent=Bt;var $y={readContext:Dn,use:Wu,useCallback:function(n,s){return Jn().memoizedState=[n,s===void 0?null:s],n},useContext:Dn,useEffect:Ny,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,Zu(4194308,4,Oy.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Zu(4194308,4,n,s)},useInsertionEffect:function(n,s){Zu(4,2,n,s)},useMemo:function(n,s){var a=Jn();s=s===void 0?null:s;var l=n();if(ja){bn(!0);try{n()}finally{bn(!1)}}return a.memoizedState=[l,s],l},useReducer:function(n,s,a){var l=Jn();if(a!==void 0){var f=a(s);if(ja){bn(!0);try{a(s)}finally{bn(!1)}}}else f=s;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=Mx.bind(null,He,n),[l.memoizedState,n]},useRef:function(n){var s=Jn();return n={current:n},s.memoizedState=n},useState:function(n){n=Xd(n);var s=n.queue,a=Hy.bind(null,He,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:Zd,useDeferredValue:function(n,s){var a=Jn();return em(a,n,s)},useTransition:function(){var n=Xd(!1);return n=Ly.bind(null,He,n.queue,!0,!1),Jn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var l=He,f=Jn();if(tt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),wt===null)throw Error(r(349));(Ye&127)!==0||dy(l,s,a)}f.memoizedState=a;var m={value:a,getSnapshot:s};return f.queue=m,Ny(gy.bind(null,l,m,n),[n]),l.flags|=2048,Io(9,{destroy:void 0},my.bind(null,l,m,a,s),null),a},useId:function(){var n=Jn(),s=wt.identifierPrefix;if(tt){var a=ys,l=ps;a=(l&~(1<<32-At(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Yu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=Rx++,s="_"+s+"r_"+a.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:nm,useFormState:xy,useActionState:xy,useOptimistic:function(n){var s=Jn();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=im.bind(null,He,!0,a),a.dispatch=s,[n,s]},useMemoCache:Kd,useCacheRefresh:function(){return Jn().memoizedState=Ox.bind(null,He)},useEffectEvent:function(n){var s=Jn(),a={impl:n};return s.memoizedState=a,function(){if((ut&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},sm={readContext:Dn,use:Wu,useCallback:Vy,useContext:Dn,useEffect:Jd,useImperativeHandle:My,useInsertionEffect:Dy,useLayoutEffect:ky,useMemo:Py,useReducer:Ju,useRef:Cy,useState:function(){return Ju(Us)},useDebugValue:Zd,useDeferredValue:function(n,s){var a=Xt();return jy(a,_t.memoizedState,n,s)},useTransition:function(){var n=Ju(Us)[0],s=Xt().memoizedState;return[typeof n=="boolean"?n:Kl(n),s]},useSyncExternalStore:fy,useId:By,useHostTransitionStatus:nm,useFormState:Sy,useActionState:Sy,useOptimistic:function(n,s){var a=Xt();return vy(a,_t,n,s)},useMemoCache:Kd,useCacheRefresh:qy};sm.useEffectEvent=Iy;var Ky={readContext:Dn,use:Wu,useCallback:Vy,useContext:Dn,useEffect:Jd,useImperativeHandle:My,useInsertionEffect:Dy,useLayoutEffect:ky,useMemo:Py,useReducer:Yd,useRef:Cy,useState:function(){return Yd(Us)},useDebugValue:Zd,useDeferredValue:function(n,s){var a=Xt();return _t===null?em(a,n,s):jy(a,_t.memoizedState,n,s)},useTransition:function(){var n=Yd(Us)[0],s=Xt().memoizedState;return[typeof n=="boolean"?n:Kl(n),s]},useSyncExternalStore:fy,useId:By,useHostTransitionStatus:nm,useFormState:Ry,useActionState:Ry,useOptimistic:function(n,s){var a=Xt();return _t!==null?vy(a,_t,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Kd,useCacheRefresh:qy};Ky.useEffectEvent=Iy;function rm(n,s,a,l){s=n.memoizedState,a=a(l,s),a=a==null?s:E({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var am={enqueueSetState:function(n,s,a){n=n._reactInternals;var l=_i(),f=wr(l);f.payload=s,a!=null&&(f.callback=a),s=xr(n,f,l),s!==null&&(ui(s,n,l),Hl(s,n,l))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var l=_i(),f=wr(l);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=xr(n,f,l),s!==null&&(ui(s,n,l),Hl(s,n,l))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=_i(),l=wr(a);l.tag=2,s!=null&&(l.callback=s),s=xr(n,l,a),s!==null&&(ui(s,n,a),Hl(s,n,a))}};function Qy(n,s,a,l,f,m,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,m,b):s.prototype&&s.prototype.isPureReactComponent?!Vl(a,l)||!Vl(f,m):!0}function Yy(n,s,a,l){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==n&&am.enqueueReplaceState(s,s.state,null)}function La(n,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(n=n.defaultProps){a===s&&(a=E({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function Xy(n){Ou(n)}function Wy(n){console.error(n)}function Jy(n){Ou(n)}function nh(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Zy(n,s,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function om(n,s,a){return a=wr(a),a.tag=3,a.payload={element:null},a.callback=function(){nh(n,s)},a}function ev(n){return n=wr(n),n.tag=3,n}function tv(n,s,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;n.payload=function(){return f(m)},n.callback=function(){Zy(s,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(n.callback=function(){Zy(s,a,l),typeof f!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function Vx(n,s,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&To(s,a,f,!0),a=gi.current,a!==null){switch(a.tag){case 31:case 13:return Li===null?mh():a.alternate===null&&qt===0&&(qt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Hu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),km(n,l,f)),!1;case 22:return a.flags|=65536,l===Hu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),km(n,l,f)),!1}throw Error(r(435,a.tag))}return km(n,l,f),mh(),!1}if(tt)return s=gi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,l!==Ad&&(n=Error(r(422),{cause:l}),Ll(Mi(n,a)))):(l!==Ad&&(s=Error(r(423),{cause:l}),Ll(Mi(s,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Mi(l,a),f=om(n.stateNode,l,f),jd(n,f),qt!==4&&(qt=2)),!1;var m=Error(r(520),{cause:l});if(m=Mi(m,a),ic===null?ic=[m]:ic.push(m),qt!==4&&(qt=2),s===null)return!0;l=Mi(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=om(a.stateNode,l,n),jd(a,n),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ir===null||!Ir.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=ev(f),tv(f,n,a,l),jd(a,f),!1}a=a.return}while(a!==null);return!1}var lm=Error(r(461)),on=!1;function kn(n,s,a,l){s.child=n===null?ry(s,null,a,l):Pa(s,n.child,a,l)}function nv(n,s,a,l,f){a=a.render;var m=s.ref;if("ref"in l){var b={};for(var A in l)A!=="ref"&&(b[A]=l[A])}else b=l;return ka(s),l=Hd(n,s,a,b,m,f),A=Fd(),n!==null&&!on?(Gd(n,s,f),zs(n,s,f)):(tt&&A&&xd(s),s.flags|=1,kn(n,s,l,f),s.child)}function iv(n,s,a,l,f){if(n===null){var m=a.type;return typeof m=="function"&&!Ed(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,sv(n,s,m,l,f)):(n=ju(a.type,null,l,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!pm(n,f)){var b=m.memoizedProps;if(a=a.compare,a=a!==null?a:Vl,a(b,l)&&n.ref===s.ref)return zs(n,s,f)}return s.flags|=1,n=Ms(m,l),n.ref=s.ref,n.return=s,s.child=n}function sv(n,s,a,l,f){if(n!==null){var m=n.memoizedProps;if(Vl(m,l)&&n.ref===s.ref)if(on=!1,s.pendingProps=l=m,pm(n,f))(n.flags&131072)!==0&&(on=!0);else return s.lanes=n.lanes,zs(n,s,f)}return cm(n,s,a,l,f)}function rv(n,s,a,l){var f=l.children,m=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,n!==null){for(l=s.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~m}else l=0,s.child=null;return av(n,s,m,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Bu(s,m!==null?m.cachePool:null),m!==null?ly(s,m):Ud(),cy(s);else return l=s.lanes=536870912,av(n,s,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(Bu(s,m.cachePool),ly(s,m),Ar(),s.memoizedState=null):(n!==null&&Bu(s,null),Ud(),Ar());return kn(n,s,f,a),s.child}function Xl(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function av(n,s,a,l,f){var m=Od();return m=m===null?null:{parent:rn._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},n!==null&&Bu(s,null),Ud(),cy(s),n!==null&&To(n,s,l,!0),s.childLanes=f,null}function ih(n,s){return s=rh({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function ov(n,s,a){return Pa(s,n.child,null,a),n=ih(s,s.pendingProps),n.flags|=2,pi(s),s.memoizedState=null,n}function Px(n,s,a){var l=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(tt){if(l.mode==="hidden")return n=ih(s,l),s.lanes=536870912,Xl(null,n);if(Bd(s),(n=Nt)?(n=__(n,ji),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:vr!==null?{id:ps,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},a=F0(n),a.return=s,s.child=a,In=s,Nt=null)):n=null,n===null)throw br(s);return s.lanes=536870912,null}return ih(s,l)}var m=n.memoizedState;if(m!==null){var b=m.dehydrated;if(Bd(s),f)if(s.flags&256)s.flags&=-257,s=ov(n,s,a);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(on||To(n,s,a,!1),f=(a&n.childLanes)!==0,on||f){if(l=wt,l!==null&&(b=ve(l,a),b!==0&&b!==m.retryLane))throw m.retryLane=b,Ca(n,b),ui(l,n,b),lm;mh(),s=ov(n,s,a)}else n=m.treeContext,Nt=Ui(b.nextSibling),In=s,tt=!0,_r=null,ji=!1,n!==null&&K0(s,n),s=ih(s,l),s.flags|=4096;return s}return n=Ms(n.child,{mode:l.mode,children:l.children}),n.ref=s.ref,s.child=n,n.return=s,n}function sh(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function cm(n,s,a,l,f){return ka(s),a=Hd(n,s,a,l,void 0,f),l=Fd(),n!==null&&!on?(Gd(n,s,f),zs(n,s,f)):(tt&&l&&xd(s),s.flags|=1,kn(n,s,a,f),s.child)}function lv(n,s,a,l,f,m){return ka(s),s.updateQueue=null,a=hy(s,l,a,f),uy(n),l=Fd(),n!==null&&!on?(Gd(n,s,m),zs(n,s,m)):(tt&&l&&xd(s),s.flags|=1,kn(n,s,a,m),s.child)}function cv(n,s,a,l,f){if(ka(s),s.stateNode===null){var m=vo,b=a.contextType;typeof b=="object"&&b!==null&&(m=Dn(b)),m=new a(l,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=am,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=l,m.state=s.memoizedState,m.refs={},Vd(s),b=a.contextType,m.context=typeof b=="object"&&b!==null?Dn(b):vo,m.state=s.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(rm(s,a,b,l),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&am.enqueueReplaceState(m,m.state,null),Gl(s,l,m,f),Fl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(n===null){m=s.stateNode;var A=s.memoizedProps,L=La(a,A);m.props=L;var J=m.context,oe=a.contextType;b=vo,typeof oe=="object"&&oe!==null&&(b=Dn(oe));var fe=a.getDerivedStateFromProps;oe=typeof fe=="function"||typeof m.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,oe||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A||J!==b)&&Yy(s,m,l,b),Tr=!1;var te=s.memoizedState;m.state=te,Gl(s,l,m,f),Fl(),J=s.memoizedState,A||te!==J||Tr?(typeof fe=="function"&&(rm(s,a,fe,l),J=s.memoizedState),(L=Tr||Qy(s,a,L,l,te,J,b))?(oe||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=J),m.props=l,m.state=J,m.context=b,l=L):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{m=s.stateNode,Pd(n,s),b=s.memoizedProps,oe=La(a,b),m.props=oe,fe=s.pendingProps,te=m.context,J=a.contextType,L=vo,typeof J=="object"&&J!==null&&(L=Dn(J)),A=a.getDerivedStateFromProps,(J=typeof A=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==fe||te!==L)&&Yy(s,m,l,L),Tr=!1,te=s.memoizedState,m.state=te,Gl(s,l,m,f),Fl();var ae=s.memoizedState;b!==fe||te!==ae||Tr||n!==null&&n.dependencies!==null&&Uu(n.dependencies)?(typeof A=="function"&&(rm(s,a,A,l),ae=s.memoizedState),(oe=Tr||Qy(s,a,oe,l,te,ae,L)||n!==null&&n.dependencies!==null&&Uu(n.dependencies))?(J||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,ae,L),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,ae,L)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===n.memoizedProps&&te===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&te===n.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=ae),m.props=l,m.state=ae,m.context=L,l=oe):(typeof m.componentDidUpdate!="function"||b===n.memoizedProps&&te===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&te===n.memoizedState||(s.flags|=1024),l=!1)}return m=l,sh(n,s),l=(s.flags&128)!==0,m||l?(m=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&l?(s.child=Pa(s,n.child,null,f),s.child=Pa(s,null,a,f)):kn(n,s,a,f),s.memoizedState=m.state,n=s.child):n=zs(n,s,f),n}function uv(n,s,a,l){return Ia(),s.flags|=256,kn(n,s,a,l),s.child}var um={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hm(n){return{baseLanes:n,cachePool:Z0()}}function fm(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=vi),n}function hv(n,s,a){var l=s.pendingProps,f=!1,m=(s.flags&128)!==0,b;if((b=m)||(b=n!==null&&n.memoizedState===null?!1:(Yt.current&2)!==0),b&&(f=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,n===null){if(tt){if(f?Sr(s):Ar(),(n=Nt)?(n=__(n,ji),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:vr!==null?{id:ps,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},a=F0(n),a.return=s,s.child=a,In=s,Nt=null)):n=null,n===null)throw br(s);return Qm(n)?s.lanes=32:s.lanes=536870912,null}var A=l.children;return l=l.fallback,f?(Ar(),f=s.mode,A=rh({mode:"hidden",children:A},f),l=Na(l,f,a,null),A.return=s,l.return=s,A.sibling=l,s.child=A,l=s.child,l.memoizedState=hm(a),l.childLanes=fm(n,b,a),s.memoizedState=um,Xl(null,l)):(Sr(s),dm(s,A))}var L=n.memoizedState;if(L!==null&&(A=L.dehydrated,A!==null)){if(m)s.flags&256?(Sr(s),s.flags&=-257,s=mm(n,s,a)):s.memoizedState!==null?(Ar(),s.child=n.child,s.flags|=128,s=null):(Ar(),A=l.fallback,f=s.mode,l=rh({mode:"visible",children:l.children},f),A=Na(A,f,a,null),A.flags|=2,l.return=s,A.return=s,l.sibling=A,s.child=l,Pa(s,n.child,null,a),l=s.child,l.memoizedState=hm(a),l.childLanes=fm(n,b,a),s.memoizedState=um,s=Xl(null,l));else if(Sr(s),Qm(A)){if(b=A.nextSibling&&A.nextSibling.dataset,b)var J=b.dgst;b=J,l=Error(r(419)),l.stack="",l.digest=b,Ll({value:l,source:null,stack:null}),s=mm(n,s,a)}else if(on||To(n,s,a,!1),b=(a&n.childLanes)!==0,on||b){if(b=wt,b!==null&&(l=ve(b,a),l!==0&&l!==L.retryLane))throw L.retryLane=l,Ca(n,l),ui(b,n,l),lm;Km(A)||mh(),s=mm(n,s,a)}else Km(A)?(s.flags|=192,s.child=n.child,s=null):(n=L.treeContext,Nt=Ui(A.nextSibling),In=s,tt=!0,_r=null,ji=!1,n!==null&&K0(s,n),s=dm(s,l.children),s.flags|=4096);return s}return f?(Ar(),A=l.fallback,f=s.mode,L=n.child,J=L.sibling,l=Ms(L,{mode:"hidden",children:l.children}),l.subtreeFlags=L.subtreeFlags&65011712,J!==null?A=Ms(J,A):(A=Na(A,f,a,null),A.flags|=2),A.return=s,l.return=s,l.sibling=A,s.child=l,Xl(null,l),l=s.child,A=n.child.memoizedState,A===null?A=hm(a):(f=A.cachePool,f!==null?(L=rn._currentValue,f=f.parent!==L?{parent:L,pool:L}:f):f=Z0(),A={baseLanes:A.baseLanes|a,cachePool:f}),l.memoizedState=A,l.childLanes=fm(n,b,a),s.memoizedState=um,Xl(n.child,l)):(Sr(s),a=n.child,n=a.sibling,a=Ms(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,n!==null&&(b=s.deletions,b===null?(s.deletions=[n],s.flags|=16):b.push(n)),s.child=a,s.memoizedState=null,a)}function dm(n,s){return s=rh({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function rh(n,s){return n=mi(22,n,null,s),n.lanes=0,n}function mm(n,s,a){return Pa(s,n.child,null,a),n=dm(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function fv(n,s,a){n.lanes|=s;var l=n.alternate;l!==null&&(l.lanes|=s),Nd(n.return,s,a)}function gm(n,s,a,l,f,m){var b=n.memoizedState;b===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:m}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=l,b.tail=a,b.tailMode=f,b.treeForkCount=m)}function dv(n,s,a){var l=s.pendingProps,f=l.revealOrder,m=l.tail;l=l.children;var b=Yt.current,A=(b&2)!==0;if(A?(b=b&1|2,s.flags|=128):b&=1,ue(Yt,b),kn(n,s,l,a),l=tt?jl:0,!A&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&fv(n,a,s);else if(n.tag===19)fv(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&Ku(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),gm(s,!1,f,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Ku(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}gm(s,!0,a,null,m,l);break;case"together":gm(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function zs(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Nr|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(To(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,a=Ms(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Ms(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function pm(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Uu(n)))}function jx(n,s,a){switch(s.tag){case 3:xt(s,s.stateNode.containerInfo),Er(s,rn,n.memoizedState.cache),Ia();break;case 27:case 5:Ft(s);break;case 4:xt(s,s.stateNode.containerInfo);break;case 10:Er(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Bd(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Sr(s),s.flags|=128,null):(a&s.child.childLanes)!==0?hv(n,s,a):(Sr(s),n=zs(n,s,a),n!==null?n.sibling:null);Sr(s);break;case 19:var f=(n.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(To(n,s,a,!1),l=(a&s.childLanes)!==0),f){if(l)return dv(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ue(Yt,Yt.current),l)break;return null;case 22:return s.lanes=0,rv(n,s,a,s.pendingProps);case 24:Er(s,rn,n.memoizedState.cache)}return zs(n,s,a)}function mv(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)on=!0;else{if(!pm(n,a)&&(s.flags&128)===0)return on=!1,jx(n,s,a);on=(n.flags&131072)!==0}else on=!1,tt&&(s.flags&1048576)!==0&&$0(s,jl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(n=Ma(s.elementType),s.type=n,typeof n=="function")Ed(n)?(l=La(n,l),s.tag=1,s=cv(null,s,n,l,a)):(s.tag=0,s=cm(null,s,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===ce){s.tag=11,s=nv(null,s,n,l,a);break e}else if(f===S){s.tag=14,s=iv(null,s,n,l,a);break e}}throw s=be(n)||n,Error(r(306,s,""))}}return s;case 0:return cm(n,s,s.type,s.pendingProps,a);case 1:return l=s.type,f=La(l,s.pendingProps),cv(n,s,l,f,a);case 3:e:{if(xt(s,s.stateNode.containerInfo),n===null)throw Error(r(387));l=s.pendingProps;var m=s.memoizedState;f=m.element,Pd(n,s),Gl(s,l,null,a);var b=s.memoizedState;if(l=b.cache,Er(s,rn,l),l!==m.cache&&Id(s,[rn],a,!0),Fl(),l=b.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=uv(n,s,l,a);break e}else if(l!==f){f=Mi(Error(r(424)),s),Ll(f),s=uv(n,s,l,a);break e}else for(n=s.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Nt=Ui(n.firstChild),In=s,tt=!0,_r=null,ji=!0,a=ry(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ia(),l===f){s=zs(n,s,a);break e}kn(n,s,l,a)}s=s.child}return s;case 26:return sh(n,s),n===null?(a=S_(s.type,null,s.pendingProps,null))?s.memoizedState=a:tt||(a=s.type,n=s.pendingProps,l=Eh(Re.current).createElement(a),l[Pt]=s,l[Kt]=n,On(l,a,n),zt(l),s.stateNode=l):s.memoizedState=S_(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Ft(s),n===null&&tt&&(l=s.stateNode=T_(s.type,s.pendingProps,Re.current),In=s,ji=!0,f=Nt,Mr(s.type)?(Ym=f,Nt=Ui(l.firstChild)):Nt=f),kn(n,s,s.pendingProps.children,a),sh(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&tt&&((f=l=Nt)&&(l=dS(l,s.type,s.pendingProps,ji),l!==null?(s.stateNode=l,In=s,Nt=Ui(l.firstChild),ji=!1,f=!0):f=!1),f||br(s)),Ft(s),f=s.type,m=s.pendingProps,b=n!==null?n.memoizedProps:null,l=m.children,Fm(f,m)?l=null:b!==null&&Fm(f,b)&&(s.flags|=32),s.memoizedState!==null&&(f=Hd(n,s,Cx,null,null,a),hc._currentValue=f),sh(n,s),kn(n,s,l,a),s.child;case 6:return n===null&&tt&&((n=a=Nt)&&(a=mS(a,s.pendingProps,ji),a!==null?(s.stateNode=a,In=s,Nt=null,n=!0):n=!1),n||br(s)),null;case 13:return hv(n,s,a);case 4:return xt(s,s.stateNode.containerInfo),l=s.pendingProps,n===null?s.child=Pa(s,null,l,a):kn(n,s,l,a),s.child;case 11:return nv(n,s,s.type,s.pendingProps,a);case 7:return kn(n,s,s.pendingProps,a),s.child;case 8:return kn(n,s,s.pendingProps.children,a),s.child;case 12:return kn(n,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Er(s,s.type,l.value),kn(n,s,l.children,a),s.child;case 9:return f=s.type._context,l=s.pendingProps.children,ka(s),f=Dn(f),l=l(f),s.flags|=1,kn(n,s,l,a),s.child;case 14:return iv(n,s,s.type,s.pendingProps,a);case 15:return sv(n,s,s.type,s.pendingProps,a);case 19:return dv(n,s,a);case 31:return Px(n,s,a);case 22:return rv(n,s,a,s.pendingProps);case 24:return ka(s),l=Dn(rn),n===null?(f=Od(),f===null&&(f=wt,m=Dd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),s.memoizedState={parent:l,cache:f},Vd(s),Er(s,rn,f)):((n.lanes&a)!==0&&(Pd(n,s),Gl(s,null,null,a),Fl()),f=n.memoizedState,m=s.memoizedState,f.parent!==l?(f={parent:l,cache:l},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Er(s,rn,l)):(l=m.cache,Er(s,rn,l),l!==f.cache&&Id(s,[rn],a,!0))),kn(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Bs(n){n.flags|=4}function ym(n,s,a,l,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Bv())n.flags|=8192;else throw Va=Hu,Md}else n.flags&=-16777217}function gv(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!I_(s))if(Bv())n.flags|=8192;else throw Va=Hu,Md}function ah(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?nn():536870912,n.lanes|=s,Mo|=s)}function Wl(n,s){if(!tt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function It(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,s}function Lx(n,s,a){var l=s.pendingProps;switch(Sd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(s),null;case 1:return It(s),null;case 3:return a=s.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),js(rn),ht(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Eo(s)?Bs(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Rd())),It(s),null;case 26:var f=s.type,m=s.memoizedState;return n===null?(Bs(s),m!==null?(It(s),gv(s,m)):(It(s),ym(s,f,null,l,a))):m?m!==n.memoizedState?(Bs(s),It(s),gv(s,m)):(It(s),s.flags&=-16777217):(n=n.memoizedProps,n!==l&&Bs(s),It(s),ym(s,f,n,l,a)),null;case 27:if(xi(s),a=Re.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&Bs(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return It(s),null}n=ge.current,Eo(s)?Q0(s):(n=T_(f,l,a),s.stateNode=n,Bs(s))}return It(s),null;case 5:if(xi(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&Bs(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return It(s),null}if(m=ge.current,Eo(s))Q0(s);else{var b=Eh(Re.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?b.createElement("select",{is:l.is}):b.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?b.createElement(f,{is:l.is}):b.createElement(f)}}m[Pt]=s,m[Kt]=l;e:for(b=s.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===s)break e;for(;b.sibling===null;){if(b.return===null||b.return===s)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}s.stateNode=m;e:switch(On(m,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Bs(s)}}return It(s),ym(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,a),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==l&&Bs(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(n=Re.current,Eo(s)){if(n=s.stateNode,a=s.memoizedProps,l=null,f=In,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Pt]=s,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||h_(n.nodeValue,a)),n||br(s,!0)}else n=Eh(n).createTextNode(l),n[Pt]=s,s.stateNode=n}return It(s),null;case 31:if(a=s.memoizedState,n===null||n.memoizedState!==null){if(l=Eo(s),a!==null){if(n===null){if(!l)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Pt]=s}else Ia(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;It(s),n=!1}else a=Rd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return s.flags&256?(pi(s),s):(pi(s),null);if((s.flags&128)!==0)throw Error(r(558))}return It(s),null;case 13:if(l=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Eo(s),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Pt]=s}else Ia(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;It(s),f=!1}else f=Rd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(pi(s),s):(pi(s),null)}return pi(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=s.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)),a!==n&&a&&(s.child.flags|=8192),ah(s,s.updateQueue),It(s),null);case 4:return ht(),n===null&&Um(s.stateNode.containerInfo),It(s),null;case 10:return js(s.type),It(s),null;case 19:if($(Yt),l=s.memoizedState,l===null)return It(s),null;if(f=(s.flags&128)!==0,m=l.rendering,m===null)if(f)Wl(l,!1);else{if(qt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=Ku(n),m!==null){for(s.flags|=128,Wl(l,!1),n=m.updateQueue,s.updateQueue=n,ah(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)H0(a,n),a=a.sibling;return ue(Yt,Yt.current&1|2),tt&&Vs(s,l.treeForkCount),s.child}n=n.sibling}l.tail!==null&&tn()>hh&&(s.flags|=128,f=!0,Wl(l,!1),s.lanes=4194304)}else{if(!f)if(n=Ku(m),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,ah(s,n),Wl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!tt)return It(s),null}else 2*tn()-l.renderingStartTime>hh&&a!==536870912&&(s.flags|=128,f=!0,Wl(l,!1),s.lanes=4194304);l.isBackwards?(m.sibling=s.child,s.child=m):(n=l.last,n!==null?n.sibling=m:s.child=m,l.last=m)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=tn(),n.sibling=null,a=Yt.current,ue(Yt,f?a&1|2:a&1),tt&&Vs(s,l.treeForkCount),n):(It(s),null);case 22:case 23:return pi(s),zd(),l=s.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(It(s),s.subtreeFlags&6&&(s.flags|=8192)):It(s),a=s.updateQueue,a!==null&&ah(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),n!==null&&$(Oa),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),js(rn),It(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Ux(n,s){switch(Sd(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return js(rn),ht(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return xi(s),null;case 31:if(s.memoizedState!==null){if(pi(s),s.alternate===null)throw Error(r(340));Ia()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(pi(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ia()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return $(Yt),null;case 4:return ht(),null;case 10:return js(s.type),null;case 22:case 23:return pi(s),zd(),n!==null&&$(Oa),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return js(rn),null;case 25:return null;default:return null}}function pv(n,s){switch(Sd(s),s.tag){case 3:js(rn),ht();break;case 26:case 27:case 5:xi(s);break;case 4:ht();break;case 31:s.memoizedState!==null&&pi(s);break;case 13:pi(s);break;case 19:$(Yt);break;case 10:js(s.type);break;case 22:case 23:pi(s),zd(),n!==null&&$(Oa);break;case 24:js(rn)}}function Jl(n,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var m=a.create,b=a.inst;l=m(),b.destroy=l}a=a.next}while(a!==f)}}catch(A){mt(s,s.return,A)}}function Rr(n,s,a){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&n)===n){var b=l.inst,A=b.destroy;if(A!==void 0){b.destroy=void 0,f=s;var L=a,J=A;try{J()}catch(oe){mt(f,L,oe)}}}l=l.next}while(l!==m)}}catch(oe){mt(s,s.return,oe)}}function yv(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{oy(s,a)}catch(l){mt(n,n.return,l)}}}function vv(n,s,a){a.props=La(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){mt(n,s,l)}}function Zl(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){mt(n,s,f)}}function vs(n,s){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){mt(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){mt(n,s,f)}else a.current=null}function _v(n){var s=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){mt(n,n.return,f)}}function vm(n,s,a){try{var l=n.stateNode;oS(l,n.type,a,s),l[Kt]=s}catch(f){mt(n,n.return,f)}}function bv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Mr(n.type)||n.tag===4}function _m(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||bv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Mr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function bm(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Qi));else if(l!==4&&(l===27&&Mr(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(bm(n,s,a),n=n.sibling;n!==null;)bm(n,s,a),n=n.sibling}function oh(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(l!==4&&(l===27&&Mr(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(oh(n,s,a),n=n.sibling;n!==null;)oh(n,s,a),n=n.sibling}function Ev(n){var s=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);On(s,l,a),s[Pt]=n,s[Kt]=a}catch(m){mt(n,n.return,m)}}var qs=!1,ln=!1,Em=!1,Tv=typeof WeakSet=="function"?WeakSet:Set,Tn=null;function zx(n,s){if(n=n.containerInfo,qm=Ch,n=M0(n),md(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var b=0,A=-1,L=-1,J=0,oe=0,fe=n,te=null;t:for(;;){for(var ae;fe!==a||f!==0&&fe.nodeType!==3||(A=b+f),fe!==m||l!==0&&fe.nodeType!==3||(L=b+l),fe.nodeType===3&&(b+=fe.nodeValue.length),(ae=fe.firstChild)!==null;)te=fe,fe=ae;for(;;){if(fe===n)break t;if(te===a&&++J===f&&(A=b),te===m&&++oe===l&&(L=b),(ae=fe.nextSibling)!==null)break;fe=te,te=fe.parentNode}fe=ae}a=A===-1||L===-1?null:{start:A,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(Hm={focusedElem:n,selectionRange:a},Ch=!1,Tn=s;Tn!==null;)if(s=Tn,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Tn=n;else for(;Tn!==null;){switch(s=Tn,m=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,a=s,f=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Ae=La(a.type,f);n=l.getSnapshotBeforeUpdate(Ae,m),l.__reactInternalSnapshotBeforeUpdate=n}catch(Me){mt(a,a.return,Me)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)$m(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":$m(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,Tn=n;break}Tn=s.return}}function wv(n,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Fs(n,a),l&4&&Jl(5,a);break;case 1:if(Fs(n,a),l&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(b){mt(a,a.return,b)}else{var f=La(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(b){mt(a,a.return,b)}}l&64&&yv(a),l&512&&Zl(a,a.return);break;case 3:if(Fs(n,a),l&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{oy(n,s)}catch(b){mt(a,a.return,b)}}break;case 27:s===null&&l&4&&Ev(a);case 26:case 5:Fs(n,a),s===null&&l&4&&_v(a),l&512&&Zl(a,a.return);break;case 12:Fs(n,a);break;case 31:Fs(n,a),l&4&&Av(n,a);break;case 13:Fs(n,a),l&4&&Rv(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=Yx.bind(null,a),gS(n,a))));break;case 22:if(l=a.memoizedState!==null||qs,!l){s=s!==null&&s.memoizedState!==null||ln,f=qs;var m=ln;qs=l,(ln=s)&&!m?Gs(n,a,(a.subtreeFlags&8772)!==0):Fs(n,a),qs=f,ln=m}break;case 30:break;default:Fs(n,a)}}function xv(n){var s=n.alternate;s!==null&&(n.alternate=null,xv(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&or(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Mt=null,ai=!1;function Hs(n,s,a){for(a=a.child;a!==null;)Sv(n,s,a),a=a.sibling}function Sv(n,s,a){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(Yn,a)}catch{}switch(a.tag){case 26:ln||vs(a,s),Hs(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ln||vs(a,s);var l=Mt,f=ai;Mr(a.type)&&(Mt=a.stateNode,ai=!1),Hs(n,s,a),lc(a.stateNode),Mt=l,ai=f;break;case 5:ln||vs(a,s);case 6:if(l=Mt,f=ai,Mt=null,Hs(n,s,a),Mt=l,ai=f,Mt!==null)if(ai)try{(Mt.nodeType===9?Mt.body:Mt.nodeName==="HTML"?Mt.ownerDocument.body:Mt).removeChild(a.stateNode)}catch(m){mt(a,s,m)}else try{Mt.removeChild(a.stateNode)}catch(m){mt(a,s,m)}break;case 18:Mt!==null&&(ai?(n=Mt,y_(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),qo(n)):y_(Mt,a.stateNode));break;case 4:l=Mt,f=ai,Mt=a.stateNode.containerInfo,ai=!0,Hs(n,s,a),Mt=l,ai=f;break;case 0:case 11:case 14:case 15:Rr(2,a,s),ln||Rr(4,a,s),Hs(n,s,a);break;case 1:ln||(vs(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&vv(a,s,l)),Hs(n,s,a);break;case 21:Hs(n,s,a);break;case 22:ln=(l=ln)||a.memoizedState!==null,Hs(n,s,a),ln=l;break;default:Hs(n,s,a)}}function Av(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{qo(n)}catch(a){mt(s,s.return,a)}}}function Rv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{qo(n)}catch(a){mt(s,s.return,a)}}function Bx(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new Tv),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new Tv),s;default:throw Error(r(435,n.tag))}}function lh(n,s){var a=Bx(n);s.forEach(function(l){if(!a.has(l)){a.add(l);var f=Xx.bind(null,n,l);l.then(f,f)}})}function oi(n,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],m=n,b=s,A=b;e:for(;A!==null;){switch(A.tag){case 27:if(Mr(A.type)){Mt=A.stateNode,ai=!1;break e}break;case 5:Mt=A.stateNode,ai=!1;break e;case 3:case 4:Mt=A.stateNode.containerInfo,ai=!0;break e}A=A.return}if(Mt===null)throw Error(r(160));Sv(m,b,f),Mt=null,ai=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Cv(s,n),s=s.sibling}var es=null;function Cv(n,s){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:oi(s,n),li(n),l&4&&(Rr(3,n,n.return),Jl(3,n),Rr(5,n,n.return));break;case 1:oi(s,n),li(n),l&512&&(ln||a===null||vs(a,a.return)),l&64&&qs&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=es;if(oi(s,n),li(n),l&512&&(ln||a===null||vs(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Si]||m[Pt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),On(m,l,a),m[Pt]=n,zt(m),l=m;break e;case"link":var b=C_("link","href",f).get(l+(a.href||""));if(b){for(var A=0;A<b.length;A++)if(m=b[A],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(A,1);break t}}m=f.createElement(l),On(m,l,a),f.head.appendChild(m);break;case"meta":if(b=C_("meta","content",f).get(l+(a.content||""))){for(A=0;A<b.length;A++)if(m=b[A],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(A,1);break t}}m=f.createElement(l),On(m,l,a),f.head.appendChild(m);break;default:throw Error(r(468,l))}m[Pt]=n,zt(m),l=m}n.stateNode=l}else N_(f,n.type,n.stateNode);else n.stateNode=R_(f,l,n.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?N_(f,n.type,n.stateNode):R_(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&vm(n,n.memoizedProps,a.memoizedProps)}break;case 27:oi(s,n),li(n),l&512&&(ln||a===null||vs(a,a.return)),a!==null&&l&4&&vm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(oi(s,n),li(n),l&512&&(ln||a===null||vs(a,a.return)),n.flags&32){f=n.stateNode;try{ri(f,"")}catch(Ae){mt(n,n.return,Ae)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,vm(n,f,a!==null?a.memoizedProps:f)),l&1024&&(Em=!0);break;case 6:if(oi(s,n),li(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(Ae){mt(n,n.return,Ae)}}break;case 3:if(xh=null,f=es,es=Th(s.containerInfo),oi(s,n),es=f,li(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{qo(s.containerInfo)}catch(Ae){mt(n,n.return,Ae)}Em&&(Em=!1,Nv(n));break;case 4:l=es,es=Th(n.stateNode.containerInfo),oi(s,n),li(n),es=l;break;case 12:oi(s,n),li(n);break;case 31:oi(s,n),li(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,lh(n,l)));break;case 13:oi(s,n),li(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(uh=tn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,lh(n,l)));break;case 22:f=n.memoizedState!==null;var L=a!==null&&a.memoizedState!==null,J=qs,oe=ln;if(qs=J||f,ln=oe||L,oi(s,n),ln=oe,qs=J,li(n),l&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||L||qs||ln||Ua(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){L=a=s;try{if(m=L.stateNode,f)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{A=L.stateNode;var fe=L.memoizedProps.style,te=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;A.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Ae){mt(L,L.return,Ae)}}}else if(s.tag===6){if(a===null){L=s;try{L.stateNode.nodeValue=f?"":L.memoizedProps}catch(Ae){mt(L,L.return,Ae)}}}else if(s.tag===18){if(a===null){L=s;try{var ae=L.stateNode;f?v_(ae,!0):v_(L.stateNode,!1)}catch(Ae){mt(L,L.return,Ae)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,lh(n,a))));break;case 19:oi(s,n),li(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,lh(n,l)));break;case 30:break;case 21:break;default:oi(s,n),li(n)}}function li(n){var s=n.flags;if(s&2){try{for(var a,l=n.return;l!==null;){if(bv(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,m=_m(n);oh(n,m,f);break;case 5:var b=a.stateNode;a.flags&32&&(ri(b,""),a.flags&=-33);var A=_m(n);oh(n,A,b);break;case 3:case 4:var L=a.stateNode.containerInfo,J=_m(n);bm(n,J,L);break;default:throw Error(r(161))}}catch(oe){mt(n,n.return,oe)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Nv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Nv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Fs(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)wv(n,s.alternate,s),s=s.sibling}function Ua(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Rr(4,s,s.return),Ua(s);break;case 1:vs(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&vv(s,s.return,a),Ua(s);break;case 27:lc(s.stateNode);case 26:case 5:vs(s,s.return),Ua(s);break;case 22:s.memoizedState===null&&Ua(s);break;case 30:Ua(s);break;default:Ua(s)}n=n.sibling}}function Gs(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,f=n,m=s,b=m.flags;switch(m.tag){case 0:case 11:case 15:Gs(f,m,a),Jl(4,m);break;case 1:if(Gs(f,m,a),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(J){mt(l,l.return,J)}if(l=m,f=l.updateQueue,f!==null){var A=l.stateNode;try{var L=f.shared.hiddenCallbacks;if(L!==null)for(f.shared.hiddenCallbacks=null,f=0;f<L.length;f++)ay(L[f],A)}catch(J){mt(l,l.return,J)}}a&&b&64&&yv(m),Zl(m,m.return);break;case 27:Ev(m);case 26:case 5:Gs(f,m,a),a&&l===null&&b&4&&_v(m),Zl(m,m.return);break;case 12:Gs(f,m,a);break;case 31:Gs(f,m,a),a&&b&4&&Av(f,m);break;case 13:Gs(f,m,a),a&&b&4&&Rv(f,m);break;case 22:m.memoizedState===null&&Gs(f,m,a),Zl(m,m.return);break;case 30:break;default:Gs(f,m,a)}s=s.sibling}}function Tm(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Ul(a))}function wm(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ul(n))}function ts(n,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Iv(n,s,a,l),s=s.sibling}function Iv(n,s,a,l){var f=s.flags;switch(s.tag){case 0:case 11:case 15:ts(n,s,a,l),f&2048&&Jl(9,s);break;case 1:ts(n,s,a,l);break;case 3:ts(n,s,a,l),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ul(n)));break;case 12:if(f&2048){ts(n,s,a,l),n=s.stateNode;try{var m=s.memoizedProps,b=m.id,A=m.onPostCommit;typeof A=="function"&&A(b,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(L){mt(s,s.return,L)}}else ts(n,s,a,l);break;case 31:ts(n,s,a,l);break;case 13:ts(n,s,a,l);break;case 23:break;case 22:m=s.stateNode,b=s.alternate,s.memoizedState!==null?m._visibility&2?ts(n,s,a,l):ec(n,s):m._visibility&2?ts(n,s,a,l):(m._visibility|=2,Do(n,s,a,l,(s.subtreeFlags&10256)!==0||!1)),f&2048&&Tm(b,s);break;case 24:ts(n,s,a,l),f&2048&&wm(s.alternate,s);break;default:ts(n,s,a,l)}}function Do(n,s,a,l,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=n,b=s,A=a,L=l,J=b.flags;switch(b.tag){case 0:case 11:case 15:Do(m,b,A,L,f),Jl(8,b);break;case 23:break;case 22:var oe=b.stateNode;b.memoizedState!==null?oe._visibility&2?Do(m,b,A,L,f):ec(m,b):(oe._visibility|=2,Do(m,b,A,L,f)),f&&J&2048&&Tm(b.alternate,b);break;case 24:Do(m,b,A,L,f),f&&J&2048&&wm(b.alternate,b);break;default:Do(m,b,A,L,f)}s=s.sibling}}function ec(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,l=s,f=l.flags;switch(l.tag){case 22:ec(a,l),f&2048&&Tm(l.alternate,l);break;case 24:ec(a,l),f&2048&&wm(l.alternate,l);break;default:ec(a,l)}s=s.sibling}}var tc=8192;function ko(n,s,a){if(n.subtreeFlags&tc)for(n=n.child;n!==null;)Dv(n,s,a),n=n.sibling}function Dv(n,s,a){switch(n.tag){case 26:ko(n,s,a),n.flags&tc&&n.memoizedState!==null&&RS(a,es,n.memoizedState,n.memoizedProps);break;case 5:ko(n,s,a);break;case 3:case 4:var l=es;es=Th(n.stateNode.containerInfo),ko(n,s,a),es=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=tc,tc=16777216,ko(n,s,a),tc=l):ko(n,s,a));break;default:ko(n,s,a)}}function kv(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function nc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Tn=l,Mv(l,n)}kv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ov(n),n=n.sibling}function Ov(n){switch(n.tag){case 0:case 11:case 15:nc(n),n.flags&2048&&Rr(9,n,n.return);break;case 3:nc(n);break;case 12:nc(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,ch(n)):nc(n);break;default:nc(n)}}function ch(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Tn=l,Mv(l,n)}kv(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Rr(8,s,s.return),ch(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,ch(s));break;default:ch(s)}n=n.sibling}}function Mv(n,s){for(;Tn!==null;){var a=Tn;switch(a.tag){case 0:case 11:case 15:Rr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ul(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Tn=l;else e:for(a=n;Tn!==null;){l=Tn;var f=l.sibling,m=l.return;if(xv(l),l===a){Tn=null;break e}if(f!==null){f.return=m,Tn=f;break e}Tn=m}}}var qx={getCacheForType:function(n){var s=Dn(rn),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a},cacheSignal:function(){return Dn(rn).controller.signal}},Hx=typeof WeakMap=="function"?WeakMap:Map,ut=0,wt=null,Ke=null,Ye=0,dt=0,yi=null,Cr=!1,Oo=!1,xm=!1,$s=0,qt=0,Nr=0,za=0,Sm=0,vi=0,Mo=0,ic=null,ci=null,Am=!1,uh=0,Vv=0,hh=1/0,fh=null,Ir=null,pn=0,Dr=null,Vo=null,Ks=0,Rm=0,Cm=null,Pv=null,sc=0,Nm=null;function _i(){return(ut&2)!==0&&Ye!==0?Ye&-Ye:H.T!==null?Vm():kt()}function jv(){if(vi===0)if((Ye&536870912)===0||tt){var n=Ki;Ki<<=1,(Ki&3932160)===0&&(Ki=262144),vi=n}else vi=536870912;return n=gi.current,n!==null&&(n.flags|=32),vi}function ui(n,s,a){(n===wt&&(dt===2||dt===9)||n.cancelPendingCommit!==null)&&(Po(n,0),kr(n,Ye,vi,!1)),ne(n,a),((ut&2)===0||n!==wt)&&(n===wt&&((ut&2)===0&&(za|=a),qt===4&&kr(n,Ye,vi,!1)),_s(n))}function Lv(n,s,a){if((ut&6)!==0)throw Error(r(327));var l=!a&&(s&127)===0&&(s&n.expiredLanes)===0||Ut(n,s),f=l?$x(n,s):Dm(n,s,!0),m=l;do{if(f===0){Oo&&!l&&kr(n,s,0,!1);break}else{if(a=n.current.alternate,m&&!Fx(a)){f=Dm(n,s,!1),m=!1;continue}if(f===2){if(m=s,n.errorRecoveryDisabledLanes&m)var b=0;else b=n.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;e:{var A=n;f=ic;var L=A.current.memoizedState.isDehydrated;if(L&&(Po(A,b).flags|=256),b=Dm(A,b,!1),b!==2){if(xm&&!L){A.errorRecoveryDisabledLanes|=m,za|=m,f=4;break e}m=ci,ci=f,m!==null&&(ci===null?ci=m:ci.push.apply(ci,m))}f=b}if(m=!1,f!==2)continue}}if(f===1){Po(n,0),kr(n,s,0,!0);break}e:{switch(l=n,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:kr(l,s,vi,!Cr);break e;case 2:ci=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=uh+300-tn(),10<f)){if(kr(l,s,vi,!Cr),Ct(l,0,!0)!==0)break e;Ks=s,l.timeoutHandle=g_(Uv.bind(null,l,a,ci,fh,Am,s,vi,za,Mo,Cr,m,"Throttled",-0,0),f);break e}Uv(l,a,ci,fh,Am,s,vi,za,Mo,Cr,m,null,-0,0)}}break}while(!0);_s(n)}function Uv(n,s,a,l,f,m,b,A,L,J,oe,fe,te,ae){if(n.timeoutHandle=-1,fe=s.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qi},Dv(s,m,fe);var Ae=(m&62914560)===m?uh-tn():(m&4194048)===m?Vv-tn():0;if(Ae=CS(fe,Ae),Ae!==null){Ks=m,n.cancelPendingCommit=Ae(Kv.bind(null,n,s,m,a,l,f,b,A,L,oe,fe,null,te,ae)),kr(n,m,b,!J);return}}Kv(n,s,m,a,l,f,b,A,L)}function Fx(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],m=f.getSnapshot;f=f.value;try{if(!di(m(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function kr(n,s,a,l){s&=~Sm,s&=~za,n.suspendedLanes|=s,n.pingedLanes&=~s,l&&(n.warmLanes|=s),l=n.expirationTimes;for(var f=s;0<f;){var m=31-At(f),b=1<<m;l[m]=-1,f&=~b}a!==0&&pt(n,a,s)}function dh(){return(ut&6)===0?(rc(0),!1):!0}function Im(){if(Ke!==null){if(dt===0)var n=Ke.return;else n=Ke,Ps=Da=null,$d(n),Ao=null,Bl=0,n=Ke;for(;n!==null;)pv(n.alternate,n),n=n.return;Ke=null}}function Po(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,uS(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Ks=0,Im(),wt=n,Ke=a=Ms(n.current,null),Ye=s,dt=0,yi=null,Cr=!1,Oo=Ut(n,s),xm=!1,Mo=vi=Sm=za=Nr=qt=0,ci=ic=null,Am=!1,(s&8)!==0&&(s|=s&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=s;0<l;){var f=31-At(l),m=1<<f;s|=n[f],l&=~m}return $s=s,Mu(),a}function zv(n,s){He=null,H.H=Yl,s===So||s===qu?(s=ny(),dt=3):s===Md?(s=ny(),dt=4):dt=s===lm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,yi=s,Ke===null&&(qt=1,nh(n,Mi(s,n.current)))}function Bv(){var n=gi.current;return n===null?!0:(Ye&4194048)===Ye?Li===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?n===Li:!1}function qv(){var n=H.H;return H.H=Yl,n===null?Yl:n}function Hv(){var n=H.A;return H.A=qx,n}function mh(){qt=4,Cr||(Ye&4194048)!==Ye&&gi.current!==null||(Oo=!0),(Nr&134217727)===0&&(za&134217727)===0||wt===null||kr(wt,Ye,vi,!1)}function Dm(n,s,a){var l=ut;ut|=2;var f=qv(),m=Hv();(wt!==n||Ye!==s)&&(fh=null,Po(n,s)),s=!1;var b=qt;e:do try{if(dt!==0&&Ke!==null){var A=Ke,L=yi;switch(dt){case 8:Im(),b=6;break e;case 3:case 2:case 9:case 6:gi.current===null&&(s=!0);var J=dt;if(dt=0,yi=null,jo(n,A,L,J),a&&Oo){b=0;break e}break;default:J=dt,dt=0,yi=null,jo(n,A,L,J)}}Gx(),b=qt;break}catch(oe){zv(n,oe)}while(!0);return s&&n.shellSuspendCounter++,Ps=Da=null,ut=l,H.H=f,H.A=m,Ke===null&&(wt=null,Ye=0,Mu()),b}function Gx(){for(;Ke!==null;)Fv(Ke)}function $x(n,s){var a=ut;ut|=2;var l=qv(),f=Hv();wt!==n||Ye!==s?(fh=null,hh=tn()+500,Po(n,s)):Oo=Ut(n,s);e:do try{if(dt!==0&&Ke!==null){s=Ke;var m=yi;t:switch(dt){case 1:dt=0,yi=null,jo(n,s,m,1);break;case 2:case 9:if(ey(m)){dt=0,yi=null,Gv(s);break}s=function(){dt!==2&&dt!==9||wt!==n||(dt=7),_s(n)},m.then(s,s);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:ey(m)?(dt=0,yi=null,Gv(s)):(dt=0,yi=null,jo(n,s,m,7));break;case 5:var b=null;switch(Ke.tag){case 26:b=Ke.memoizedState;case 5:case 27:var A=Ke;if(b?I_(b):A.stateNode.complete){dt=0,yi=null;var L=A.sibling;if(L!==null)Ke=L;else{var J=A.return;J!==null?(Ke=J,gh(J)):Ke=null}break t}}dt=0,yi=null,jo(n,s,m,5);break;case 6:dt=0,yi=null,jo(n,s,m,6);break;case 8:Im(),qt=6;break e;default:throw Error(r(462))}}Kx();break}catch(oe){zv(n,oe)}while(!0);return Ps=Da=null,H.H=l,H.A=f,ut=a,Ke!==null?0:(wt=null,Ye=0,Mu(),qt)}function Kx(){for(;Ke!==null&&!os();)Fv(Ke)}function Fv(n){var s=mv(n.alternate,n,$s);n.memoizedProps=n.pendingProps,s===null?gh(n):Ke=s}function Gv(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=lv(a,s,s.pendingProps,s.type,void 0,Ye);break;case 11:s=lv(a,s,s.pendingProps,s.type.render,s.ref,Ye);break;case 5:$d(s);default:pv(a,s),s=Ke=H0(s,$s),s=mv(a,s,$s)}n.memoizedProps=n.pendingProps,s===null?gh(n):Ke=s}function jo(n,s,a,l){Ps=Da=null,$d(s),Ao=null,Bl=0;var f=s.return;try{if(Vx(n,f,s,a,Ye)){qt=1,nh(n,Mi(a,n.current)),Ke=null;return}}catch(m){if(f!==null)throw Ke=f,m;qt=1,nh(n,Mi(a,n.current)),Ke=null;return}s.flags&32768?(tt||l===1?n=!0:Oo||(Ye&536870912)!==0?n=!1:(Cr=n=!0,(l===2||l===9||l===3||l===6)&&(l=gi.current,l!==null&&l.tag===13&&(l.flags|=16384))),$v(s,n)):gh(s)}function gh(n){var s=n;do{if((s.flags&32768)!==0){$v(s,Cr);return}n=s.return;var a=Lx(s.alternate,s,$s);if(a!==null){Ke=a;return}if(s=s.sibling,s!==null){Ke=s;return}Ke=s=n}while(s!==null);qt===0&&(qt=5)}function $v(n,s){do{var a=Ux(n.alternate,n);if(a!==null){a.flags&=32767,Ke=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){Ke=n;return}Ke=n=a}while(n!==null);qt=6,Ke=null}function Kv(n,s,a,l,f,m,b,A,L){n.cancelPendingCommit=null;do ph();while(pn!==0);if((ut&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=_d,gt(n,a,m,b,A,L),n===wt&&(Ke=wt=null,Ye=0),Vo=s,Dr=n,Ks=a,Rm=m,Cm=f,Pv=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Wx(Cn,function(){return Jv(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=H.T,H.T=null,f=Z.p,Z.p=2,b=ut,ut|=4;try{zx(n,s,a)}finally{ut=b,Z.p=f,H.T=l}}pn=1,Qv(),Yv(),Xv()}}function Qv(){if(pn===1){pn=0;var n=Dr,s=Vo,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var l=Z.p;Z.p=2;var f=ut;ut|=4;try{Cv(s,n);var m=Hm,b=M0(n.containerInfo),A=m.focusedElem,L=m.selectionRange;if(b!==A&&A&&A.ownerDocument&&O0(A.ownerDocument.documentElement,A)){if(L!==null&&md(A)){var J=L.start,oe=L.end;if(oe===void 0&&(oe=J),"selectionStart"in A)A.selectionStart=J,A.selectionEnd=Math.min(oe,A.value.length);else{var fe=A.ownerDocument||document,te=fe&&fe.defaultView||window;if(te.getSelection){var ae=te.getSelection(),Ae=A.textContent.length,Me=Math.min(L.start,Ae),Et=L.end===void 0?Me:Math.min(L.end,Ae);!ae.extend&&Me>Et&&(b=Et,Et=Me,Me=b);var K=k0(A,Me),B=k0(A,Et);if(K&&B&&(ae.rangeCount!==1||ae.anchorNode!==K.node||ae.anchorOffset!==K.offset||ae.focusNode!==B.node||ae.focusOffset!==B.offset)){var W=fe.createRange();W.setStart(K.node,K.offset),ae.removeAllRanges(),Me>Et?(ae.addRange(W),ae.extend(B.node,B.offset)):(W.setEnd(B.node,B.offset),ae.addRange(W))}}}}for(fe=[],ae=A;ae=ae.parentNode;)ae.nodeType===1&&fe.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<fe.length;A++){var le=fe[A];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Ch=!!qm,Hm=qm=null}finally{ut=f,Z.p=l,H.T=a}}n.current=s,pn=2}}function Yv(){if(pn===2){pn=0;var n=Dr,s=Vo,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var l=Z.p;Z.p=2;var f=ut;ut|=4;try{wv(n,s.alternate,s)}finally{ut=f,Z.p=l,H.T=a}}pn=3}}function Xv(){if(pn===4||pn===3){pn=0,ls();var n=Dr,s=Vo,a=Ks,l=Pv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?pn=5:(pn=0,Vo=Dr=null,Wv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Ir=null),it(a),s=s.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(Yn,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=H.T,f=Z.p,Z.p=2,H.T=null;try{for(var m=n.onRecoverableError,b=0;b<l.length;b++){var A=l[b];m(A.value,{componentStack:A.stack})}}finally{H.T=s,Z.p=f}}(Ks&3)!==0&&ph(),_s(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===Nm?sc++:(sc=0,Nm=n):sc=0,rc(0)}}function Wv(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Ul(s)))}function ph(){return Qv(),Yv(),Xv(),Jv()}function Jv(){if(pn!==5)return!1;var n=Dr,s=Rm;Rm=0;var a=it(Ks),l=H.T,f=Z.p;try{Z.p=32>a?32:a,H.T=null,a=Cm,Cm=null;var m=Dr,b=Ks;if(pn=0,Vo=Dr=null,Ks=0,(ut&6)!==0)throw Error(r(331));var A=ut;if(ut|=4,Ov(m.current),Iv(m,m.current,b,a),ut=A,rc(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(Yn,m)}catch{}return!0}finally{Z.p=f,H.T=l,Wv(n,s)}}function Zv(n,s,a){s=Mi(a,s),s=om(n.stateNode,s,2),n=xr(n,s,2),n!==null&&(ne(n,2),_s(n))}function mt(n,s,a){if(n.tag===3)Zv(n,n,a);else for(;s!==null;){if(s.tag===3){Zv(s,n,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ir===null||!Ir.has(l))){n=Mi(a,n),a=ev(2),l=xr(s,a,2),l!==null&&(tv(a,l,s,n),ne(l,2),_s(l));break}}s=s.return}}function km(n,s,a){var l=n.pingCache;if(l===null){l=n.pingCache=new Hx;var f=new Set;l.set(s,f)}else f=l.get(s),f===void 0&&(f=new Set,l.set(s,f));f.has(a)||(xm=!0,f.add(a),n=Qx.bind(null,n,s,a),s.then(n,n))}function Qx(n,s,a){var l=n.pingCache;l!==null&&l.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,wt===n&&(Ye&a)===a&&(qt===4||qt===3&&(Ye&62914560)===Ye&&300>tn()-uh?(ut&2)===0&&Po(n,0):Sm|=a,Mo===Ye&&(Mo=0)),_s(n)}function e_(n,s){s===0&&(s=nn()),n=Ca(n,s),n!==null&&(ne(n,s),_s(n))}function Yx(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),e_(n,a)}function Xx(n,s){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),e_(n,a)}function Wx(n,s){return ft(n,s)}var yh=null,Lo=null,Om=!1,vh=!1,Mm=!1,Or=0;function _s(n){n!==Lo&&n.next===null&&(Lo===null?yh=Lo=n:Lo=Lo.next=n),vh=!0,Om||(Om=!0,Zx())}function rc(n,s){if(!Mm&&vh){Mm=!0;do for(var a=!1,l=yh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var b=l.suspendedLanes,A=l.pingedLanes;m=(1<<31-At(42|n)+1)-1,m&=f&~(b&~A),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,s_(l,m))}else m=Ye,m=Ct(l,l===wt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Ut(l,m)||(a=!0,s_(l,m));l=l.next}while(a);Mm=!1}}function Jx(){t_()}function t_(){vh=Om=!1;var n=0;Or!==0&&cS()&&(n=Or);for(var s=tn(),a=null,l=yh;l!==null;){var f=l.next,m=n_(l,s);m===0?(l.next=null,a===null?yh=f:a.next=f,f===null&&(Lo=a)):(a=l,(n!==0||(m&3)!==0)&&(vh=!0)),l=f}pn!==0&&pn!==5||rc(n),Or!==0&&(Or=0)}function n_(n,s){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var b=31-At(m),A=1<<b,L=f[b];L===-1?((A&a)===0||(A&l)!==0)&&(f[b]=En(A,s)):L<=s&&(n.expiredLanes|=A),m&=~A}if(s=wt,a=Ye,a=Ct(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===s&&(dt===2||dt===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&$n(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Ut(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(l!==null&&$n(l),it(a)){case 2:case 8:a=Kn;break;case 32:a=Cn;break;case 268435456:a=Cs;break;default:a=Cn}return l=i_.bind(null,n),a=ft(a,l),n.callbackPriority=s,n.callbackNode=a,s}return l!==null&&l!==null&&$n(l),n.callbackPriority=2,n.callbackNode=null,2}function i_(n,s){if(pn!==0&&pn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(ph()&&n.callbackNode!==a)return null;var l=Ye;return l=Ct(n,n===wt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(Lv(n,l,s),n_(n,tn()),n.callbackNode!=null&&n.callbackNode===a?i_.bind(null,n):null)}function s_(n,s){if(ph())return null;Lv(n,s,!0)}function Zx(){hS(function(){(ut&6)!==0?ft(Rs,Jx):t_()})}function Vm(){if(Or===0){var n=wo;n===0&&(n=ni,ni<<=1,(ni&261888)===0&&(ni=256)),Or=n}return Or}function r_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:oo(""+n)}function a_(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function eS(n,s,a,l,f){if(s==="submit"&&a&&a.stateNode===f){var m=r_((f[Kt]||null).action),b=l.submitter;b&&(s=(s=b[Kt]||null)?r_(s.formAction):b.getAttribute("formAction"),s!==null&&(m=s,b=null));var A=new fs("action","action",null,l,f);n.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Or!==0){var L=b?a_(f,b):new FormData(f);tm(a,{pending:!0,data:L,method:f.method,action:m},null,L)}}else typeof m=="function"&&(A.preventDefault(),L=b?a_(f,b):new FormData(f),tm(a,{pending:!0,data:L,method:f.method,action:m},m,L))},currentTarget:f}]})}}for(var Pm=0;Pm<vd.length;Pm++){var jm=vd[Pm],tS=jm.toLowerCase(),nS=jm[0].toUpperCase()+jm.slice(1);Zi(tS,"on"+nS)}Zi(j0,"onAnimationEnd"),Zi(L0,"onAnimationIteration"),Zi(U0,"onAnimationStart"),Zi("dblclick","onDoubleClick"),Zi("focusin","onFocus"),Zi("focusout","onBlur"),Zi(vx,"onTransitionRun"),Zi(_x,"onTransitionStart"),Zi(bx,"onTransitionCancel"),Zi(z0,"onTransitionEnd"),Ci("onMouseEnter",["mouseout","mouseover"]),Ci("onMouseLeave",["mouseout","mouseover"]),Ci("onPointerEnter",["pointerout","pointerover"]),Ci("onPointerLeave",["pointerout","pointerover"]),ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ac));function o_(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var m=void 0;if(s)for(var b=l.length-1;0<=b;b--){var A=l[b],L=A.instance,J=A.currentTarget;if(A=A.listener,L!==m&&f.isPropagationStopped())break e;m=A,f.currentTarget=J;try{m(f)}catch(oe){Ou(oe)}f.currentTarget=null,m=L}else for(b=0;b<l.length;b++){if(A=l[b],L=A.instance,J=A.currentTarget,A=A.listener,L!==m&&f.isPropagationStopped())break e;m=A,f.currentTarget=J;try{m(f)}catch(oe){Ou(oe)}f.currentTarget=null,m=L}}}}function Qe(n,s){var a=s[ar];a===void 0&&(a=s[ar]=new Set);var l=n+"__bubble";a.has(l)||(l_(s,n,2,!1),a.add(l))}function Lm(n,s,a){var l=0;s&&(l|=4),l_(a,n,l,s)}var _h="_reactListening"+Math.random().toString(36).slice(2);function Um(n){if(!n[_h]){n[_h]=!0,ga.forEach(function(a){a!=="selectionchange"&&(iS.has(a)||Lm(a,!1,n),Lm(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[_h]||(s[_h]=!0,Lm("selectionchange",!1,s))}}function l_(n,s,a,l){switch(j_(s)){case 2:var f=DS;break;case 8:f=kS;break;default:f=eg}a=f.bind(null,s,a,n),f=void 0,!ba||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function zm(n,s,a,l,f){var m=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var A=l.stateNode.containerInfo;if(A===f)break;if(b===4)for(b=l.return;b!==null;){var L=b.tag;if((L===3||L===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;A!==null;){if(b=Ai(A),b===null)return;if(L=b.tag,L===5||L===6||L===26||L===27){l=m=b;continue e}A=A.parentNode}}l=l.return}mr(function(){var J=m,oe=Ii(a),fe=[];e:{var te=B0.get(n);if(te!==void 0){var ae=fs,Ae=n;switch(n){case"keypress":if(Ta(a)===0)break e;case"keydown":case"keyup":ae=Iu;break;case"focusin":Ae="focus",ae=xa;break;case"focusout":Ae="blur",ae=xa;break;case"beforeblur":case"afterblur":ae=xa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Dl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Eu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=y;break;case j0:case L0:case U0:ae=wu;break;case z0:ae=N;break;case"scroll":case"scrollend":ae=Il;break;case"wheel":ae=re;break;case"copy":case"cut":case"paste":ae=xu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Os;break;case"toggle":case"beforetoggle":ae=qe}var Me=(s&4)!==0,Et=!Me&&(n==="scroll"||n==="scrollend"),K=Me?te!==null?te+"Capture":null:te;Me=[];for(var B=J,W;B!==null;){var le=B;if(W=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||W===null||K===null||(le=Yi(B,K),le!=null&&Me.push(oc(B,le,W))),Et)break;B=B.return}0<Me.length&&(te=new ae(te,Ae,null,a,oe),fe.push({event:te,listeners:Me}))}}if((s&7)===0){e:{if(te=n==="mouseover"||n==="pointerover",ae=n==="mouseout"||n==="pointerout",te&&a!==Rl&&(Ae=a.relatedTarget||a.fromElement)&&(Ai(Ae)||Ae[Se]))break e;if((ae||te)&&(te=oe.window===oe?oe:(te=oe.ownerDocument)?te.defaultView||te.parentWindow:window,ae?(Ae=a.relatedTarget||a.toElement,ae=J,Ae=Ae?Ai(Ae):null,Ae!==null&&(Et=c(Ae),Me=Ae.tag,Ae!==Et||Me!==5&&Me!==27&&Me!==6)&&(Ae=null)):(ae=null,Ae=J),ae!==Ae)){if(Me=Dl,le="onMouseLeave",K="onMouseEnter",B="mouse",(n==="pointerout"||n==="pointerover")&&(Me=Os,le="onPointerLeave",K="onPointerEnter",B="pointer"),Et=ae==null?te:zn(ae),W=Ae==null?te:zn(Ae),te=new Me(le,B+"leave",ae,a,oe),te.target=Et,te.relatedTarget=W,le=null,Ai(oe)===J&&(Me=new Me(K,B+"enter",Ae,a,oe),Me.target=W,Me.relatedTarget=Et,le=Me),Et=le,ae&&Ae)t:{for(Me=sS,K=ae,B=Ae,W=0,le=K;le;le=Me(le))W++;le=0;for(var De=B;De;De=Me(De))le++;for(;0<W-le;)K=Me(K),W--;for(;0<le-W;)B=Me(B),le--;for(;W--;){if(K===B||B!==null&&K===B.alternate){Me=K;break t}K=Me(K),B=Me(B)}Me=null}else Me=null;ae!==null&&c_(fe,te,ae,Me,!1),Ae!==null&&Et!==null&&c_(fe,Et,Ae,Me,!0)}}e:{if(te=J?zn(J):window,ae=te.nodeName&&te.nodeName.toLowerCase(),ae==="select"||ae==="input"&&te.type==="file")var ot=A0;else if(x0(te))if(R0)ot=gx;else{ot=dx;var Ce=fx}else ae=te.nodeName,!ae||ae.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?J&&ao(J.elementType)&&(ot=A0):ot=mx;if(ot&&(ot=ot(n,J))){S0(fe,ot,a,oe);break e}Ce&&Ce(n,te,J),n==="focusout"&&J&&te.type==="number"&&J.memoizedProps.value!=null&&xl(te,"number",te.value)}switch(Ce=J?zn(J):window,n){case"focusin":(x0(Ce)||Ce.contentEditable==="true")&&(go=Ce,gd=J,Pl=null);break;case"focusout":Pl=gd=go=null;break;case"mousedown":pd=!0;break;case"contextmenu":case"mouseup":case"dragend":pd=!1,V0(fe,a,oe);break;case"selectionchange":if(yx)break;case"keydown":case"keyup":V0(fe,a,oe)}var Fe;if(ct)e:{switch(n){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else mo?Sa(n,a)&&(Xe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Xe="onCompositionStart");Xe&&(gs&&a.locale!=="ko"&&(mo||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&mo&&(Fe=Nl()):(hs=oe,Cl="value"in hs?hs.value:hs.textContent,mo=!0)),Ce=bh(J,Xe),0<Ce.length&&(Xe=new ms(Xe,n,null,a,oe),fe.push({event:Xe,listeners:Ce}),Fe?Xe.data=Fe:(Fe=fo(a),Fe!==null&&(Xe.data=Fe)))),(Fe=ki?lx(n,a):cx(n,a))&&(Xe=bh(J,"onBeforeInput"),0<Xe.length&&(Ce=new ms("onBeforeInput","beforeinput",null,a,oe),fe.push({event:Ce,listeners:Xe}),Ce.data=Fe)),eS(fe,n,J,a,oe)}o_(fe,s)})}function oc(n,s,a){return{instance:n,listener:s,currentTarget:a}}function bh(n,s){for(var a=s+"Capture",l=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Yi(n,a),f!=null&&l.unshift(oc(n,f,m)),f=Yi(n,s),f!=null&&l.push(oc(n,f,m))),n.tag===3)return l;n=n.return}return[]}function sS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function c_(n,s,a,l,f){for(var m=s._reactName,b=[];a!==null&&a!==l;){var A=a,L=A.alternate,J=A.stateNode;if(A=A.tag,L!==null&&L===l)break;A!==5&&A!==26&&A!==27||J===null||(L=J,f?(J=Yi(a,m),J!=null&&b.unshift(oc(a,J,L))):f||(J=Yi(a,m),J!=null&&b.push(oc(a,J,L)))),a=a.return}b.length!==0&&n.push({event:s,listeners:b})}var rS=/\r\n?/g,aS=/\u0000|\uFFFD/g;function u_(n){return(typeof n=="string"?n:""+n).replace(rS,`
`).replace(aS,"")}function h_(n,s){return s=u_(s),u_(n)===s}function bt(n,s,a,l,f,m){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||ri(n,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&ri(n,""+l);break;case"className":ie(n,"class",l);break;case"tabIndex":ie(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ie(n,a,l);break;case"style":Al(n,l,m);break;case"data":if(s!=="object"){ie(n,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=oo(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&bt(n,s,"name",f.name,f,null),bt(n,s,"formEncType",f.formEncType,f,null),bt(n,s,"formMethod",f.formMethod,f,null),bt(n,s,"formTarget",f.formTarget,f,null)):(bt(n,s,"encType",f.encType,f,null),bt(n,s,"method",f.method,f,null),bt(n,s,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=oo(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Qi);break;case"onScroll":l!=null&&Qe("scroll",n);break;case"onScrollEnd":l!=null&&Qe("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=oo(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Qe("beforetoggle",n),Qe("toggle",n),Y(n,"popover",l);break;case"xlinkActuate":ee(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ee(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ee(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ee(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ee(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ee(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ee(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ee(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ee(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Y(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=bu.get(a)||a,Y(n,a,l))}}function Bm(n,s,a,l,f,m){switch(a){case"style":Al(n,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?ri(n,l):(typeof l=="number"||typeof l=="bigint")&&ri(n,""+l);break;case"onScroll":l!=null&&Qe("scroll",n);break;case"onScrollEnd":l!=null&&Qe("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Qi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),m=n[Kt]||null,m=m!=null?m[a]:null,typeof m=="function"&&n.removeEventListener(s,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Y(n,a,l)}}}function On(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",n),Qe("load",n);var l=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var b=a[m];if(b!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:bt(n,s,m,b,a,null)}}f&&bt(n,s,"srcSet",a.srcSet,a,null),l&&bt(n,s,"src",a.src,a,null);return;case"input":Qe("invalid",n);var A=m=b=f=null,L=null,J=null;for(l in a)if(a.hasOwnProperty(l)){var oe=a[l];if(oe!=null)switch(l){case"name":f=oe;break;case"type":b=oe;break;case"checked":L=oe;break;case"defaultChecked":J=oe;break;case"value":m=oe;break;case"defaultValue":A=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,s));break;default:bt(n,s,l,oe,a,null)}}yu(n,m,A,L,J,b,f,!1);return;case"select":Qe("invalid",n),l=b=m=null;for(f in a)if(a.hasOwnProperty(f)&&(A=a[f],A!=null))switch(f){case"value":m=A;break;case"defaultValue":b=A;break;case"multiple":l=A;default:bt(n,s,f,A,a,null)}s=m,a=b,n.multiple=!!l,s!=null?ur(n,!!l,s,!1):a!=null&&ur(n,!!l,a,!0);return;case"textarea":Qe("invalid",n),m=f=l=null;for(b in a)if(a.hasOwnProperty(b)&&(A=a[b],A!=null))switch(b){case"value":l=A;break;case"defaultValue":f=A;break;case"children":m=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:bt(n,s,b,A,a,null)}hr(n,l,f,m);return;case"option":for(L in a)a.hasOwnProperty(L)&&(l=a[L],l!=null)&&(L==="selected"?n.selected=l&&typeof l!="function"&&typeof l!="symbol":bt(n,s,L,l,a,null));return;case"dialog":Qe("beforetoggle",n),Qe("toggle",n),Qe("cancel",n),Qe("close",n);break;case"iframe":case"object":Qe("load",n);break;case"video":case"audio":for(l=0;l<ac.length;l++)Qe(ac[l],n);break;case"image":Qe("error",n),Qe("load",n);break;case"details":Qe("toggle",n);break;case"embed":case"source":case"link":Qe("error",n),Qe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in a)if(a.hasOwnProperty(J)&&(l=a[J],l!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:bt(n,s,J,l,a,null)}return;default:if(ao(s)){for(oe in a)a.hasOwnProperty(oe)&&(l=a[oe],l!==void 0&&Bm(n,s,oe,l,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(l=a[A],l!=null&&bt(n,s,A,l,a,null))}function oS(n,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,b=null,A=null,L=null,J=null,oe=null;for(ae in a){var fe=a[ae];if(a.hasOwnProperty(ae)&&fe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":L=fe;default:l.hasOwnProperty(ae)||bt(n,s,ae,null,l,fe)}}for(var te in l){var ae=l[te];if(fe=a[te],l.hasOwnProperty(te)&&(ae!=null||fe!=null))switch(te){case"type":m=ae;break;case"name":f=ae;break;case"checked":J=ae;break;case"defaultChecked":oe=ae;break;case"value":b=ae;break;case"defaultValue":A=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,s));break;default:ae!==fe&&bt(n,s,te,ae,l,fe)}}ro(n,b,A,L,J,oe,m,f);return;case"select":ae=b=A=te=null;for(m in a)if(L=a[m],a.hasOwnProperty(m)&&L!=null)switch(m){case"value":break;case"multiple":ae=L;default:l.hasOwnProperty(m)||bt(n,s,m,null,l,L)}for(f in l)if(m=l[f],L=a[f],l.hasOwnProperty(f)&&(m!=null||L!=null))switch(f){case"value":te=m;break;case"defaultValue":A=m;break;case"multiple":b=m;default:m!==L&&bt(n,s,f,m,l,L)}s=A,a=b,l=ae,te!=null?ur(n,!!a,te,!1):!!l!=!!a&&(s!=null?ur(n,!!a,s,!0):ur(n,!!a,a?[]:"",!1));return;case"textarea":ae=te=null;for(A in a)if(f=a[A],a.hasOwnProperty(A)&&f!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:bt(n,s,A,null,l,f)}for(b in l)if(f=l[b],m=a[b],l.hasOwnProperty(b)&&(f!=null||m!=null))switch(b){case"value":te=f;break;case"defaultValue":ae=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&bt(n,s,b,f,l,m)}vu(n,te,ae);return;case"option":for(var Ae in a)te=a[Ae],a.hasOwnProperty(Ae)&&te!=null&&!l.hasOwnProperty(Ae)&&(Ae==="selected"?n.selected=!1:bt(n,s,Ae,null,l,te));for(L in l)te=l[L],ae=a[L],l.hasOwnProperty(L)&&te!==ae&&(te!=null||ae!=null)&&(L==="selected"?n.selected=te&&typeof te!="function"&&typeof te!="symbol":bt(n,s,L,te,l,ae));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in a)te=a[Me],a.hasOwnProperty(Me)&&te!=null&&!l.hasOwnProperty(Me)&&bt(n,s,Me,null,l,te);for(J in l)if(te=l[J],ae=a[J],l.hasOwnProperty(J)&&te!==ae&&(te!=null||ae!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,s));break;default:bt(n,s,J,te,l,ae)}return;default:if(ao(s)){for(var Et in a)te=a[Et],a.hasOwnProperty(Et)&&te!==void 0&&!l.hasOwnProperty(Et)&&Bm(n,s,Et,void 0,l,te);for(oe in l)te=l[oe],ae=a[oe],!l.hasOwnProperty(oe)||te===ae||te===void 0&&ae===void 0||Bm(n,s,oe,te,l,ae);return}}for(var K in a)te=a[K],a.hasOwnProperty(K)&&te!=null&&!l.hasOwnProperty(K)&&bt(n,s,K,null,l,te);for(fe in l)te=l[fe],ae=a[fe],!l.hasOwnProperty(fe)||te===ae||te==null&&ae==null||bt(n,s,fe,te,l,ae)}function f_(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],m=f.transferSize,b=f.initiatorType,A=f.duration;if(m&&A&&f_(b)){for(b=0,A=f.responseEnd,l+=1;l<a.length;l++){var L=a[l],J=L.startTime;if(J>A)break;var oe=L.transferSize,fe=L.initiatorType;oe&&f_(fe)&&(L=L.responseEnd,b+=oe*(L<A?1:(A-J)/(L-J)))}if(--l,s+=8*(m+b)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var qm=null,Hm=null;function Eh(n){return n.nodeType===9?n:n.ownerDocument}function d_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function m_(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Fm(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Gm=null;function cS(){var n=window.event;return n&&n.type==="popstate"?n===Gm?!1:(Gm=n,!0):(Gm=null,!1)}var g_=typeof setTimeout=="function"?setTimeout:void 0,uS=typeof clearTimeout=="function"?clearTimeout:void 0,p_=typeof Promise=="function"?Promise:void 0,hS=typeof queueMicrotask=="function"?queueMicrotask:typeof p_<"u"?function(n){return p_.resolve(null).then(n).catch(fS)}:g_;function fS(n){setTimeout(function(){throw n})}function Mr(n){return n==="head"}function y_(n,s){var a=s,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),qo(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")lc(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,lc(a);for(var m=a.firstChild;m;){var b=m.nextSibling,A=m.nodeName;m[Si]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=b}}else a==="body"&&lc(n.ownerDocument.body);a=f}while(a);qo(s)}function v_(n,s){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function $m(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":$m(a),or(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function dS(n,s,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Si])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Ui(n.nextSibling),n===null)break}return null}function mS(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Ui(n.nextSibling),n===null))return null;return n}function __(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Ui(n.nextSibling),n===null))return null;return n}function Km(n){return n.data==="$?"||n.data==="$~"}function Qm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function gS(n,s){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Ui(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Ym=null;function b_(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(s===0)return Ui(n.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}n=n.nextSibling}return null}function E_(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return n;s--}else a!=="/$"&&a!=="/&"||s++}n=n.previousSibling}return null}function T_(n,s,a){switch(s=Eh(a),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function lc(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);or(n)}var zi=new Map,w_=new Set;function Th(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Qs=Z.d;Z.d={f:pS,r:yS,D:vS,C:_S,L:bS,m:ES,X:wS,S:TS,M:xS};function pS(){var n=Qs.f(),s=dh();return n||s}function yS(n){var s=Xn(n);s!==null&&s.tag===5&&s.type==="form"?zy(s):Qs.r(n)}var Uo=typeof document>"u"?null:document;function x_(n,s,a){var l=Uo;if(l&&typeof s=="string"&&s){var f=si(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),w_.has(f)||(w_.add(f),n={rel:n,crossOrigin:a,href:s},l.querySelector(f)===null&&(s=l.createElement("link"),On(s,"link",n),zt(s),l.head.appendChild(s)))}}function vS(n){Qs.D(n),x_("dns-prefetch",n,null)}function _S(n,s){Qs.C(n,s),x_("preconnect",n,s)}function bS(n,s,a){Qs.L(n,s,a);var l=Uo;if(l&&n&&s){var f='link[rel="preload"][as="'+si(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+si(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+si(a.imageSizes)+'"]')):f+='[href="'+si(n)+'"]';var m=f;switch(s){case"style":m=zo(n);break;case"script":m=Bo(n)}zi.has(m)||(n=E({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),zi.set(m,n),l.querySelector(f)!==null||s==="style"&&l.querySelector(cc(m))||s==="script"&&l.querySelector(uc(m))||(s=l.createElement("link"),On(s,"link",n),zt(s),l.head.appendChild(s)))}}function ES(n,s){Qs.m(n,s);var a=Uo;if(a&&n){var l=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+si(l)+'"][href="'+si(n)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Bo(n)}if(!zi.has(m)&&(n=E({rel:"modulepreload",href:n},s),zi.set(m,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(uc(m)))return}l=a.createElement("link"),On(l,"link",n),zt(l),a.head.appendChild(l)}}}function TS(n,s,a){Qs.S(n,s,a);var l=Uo;if(l&&n){var f=Ri(l).hoistableStyles,m=zo(n);s=s||"default";var b=f.get(m);if(!b){var A={loading:0,preload:null};if(b=l.querySelector(cc(m)))A.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":s},a),(a=zi.get(m))&&Xm(n,a);var L=b=l.createElement("link");zt(L),On(L,"link",n),L._p=new Promise(function(J,oe){L.onload=J,L.onerror=oe}),L.addEventListener("load",function(){A.loading|=1}),L.addEventListener("error",function(){A.loading|=2}),A.loading|=4,wh(b,s,l)}b={type:"stylesheet",instance:b,count:1,state:A},f.set(m,b)}}}function wS(n,s){Qs.X(n,s);var a=Uo;if(a&&n){var l=Ri(a).hoistableScripts,f=Bo(n),m=l.get(f);m||(m=a.querySelector(uc(f)),m||(n=E({src:n,async:!0},s),(s=zi.get(f))&&Wm(n,s),m=a.createElement("script"),zt(m),On(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function xS(n,s){Qs.M(n,s);var a=Uo;if(a&&n){var l=Ri(a).hoistableScripts,f=Bo(n),m=l.get(f);m||(m=a.querySelector(uc(f)),m||(n=E({src:n,async:!0,type:"module"},s),(s=zi.get(f))&&Wm(n,s),m=a.createElement("script"),zt(m),On(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function S_(n,s,a,l){var f=(f=Re.current)?Th(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=zo(a.href),a=Ri(f).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=zo(a.href);var m=Ri(f).hoistableStyles,b=m.get(n);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,b),(m=f.querySelector(cc(n)))&&!m._p&&(b.instance=m,b.state.loading=5),zi.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},zi.set(n,a),m||SS(f,n,a,b.state))),s&&l===null)throw Error(r(528,""));return b}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Bo(a),a=Ri(f).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function zo(n){return'href="'+si(n)+'"'}function cc(n){return'link[rel="stylesheet"]['+n+"]"}function A_(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function SS(n,s,a,l){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=n.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),On(s,"link",a),zt(s),n.head.appendChild(s))}function Bo(n){return'[src="'+si(n)+'"]'}function uc(n){return"script[async]"+n}function R_(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=n.querySelector('style[data-href~="'+si(a.href)+'"]');if(l)return s.instance=l,zt(l),l;var f=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),zt(l),On(l,"style",f),wh(l,a.precedence,n),s.instance=l;case"stylesheet":f=zo(a.href);var m=n.querySelector(cc(f));if(m)return s.state.loading|=4,s.instance=m,zt(m),m;l=A_(a),(f=zi.get(f))&&Xm(l,f),m=(n.ownerDocument||n).createElement("link"),zt(m);var b=m;return b._p=new Promise(function(A,L){b.onload=A,b.onerror=L}),On(m,"link",l),s.state.loading|=4,wh(m,a.precedence,n),s.instance=m;case"script":return m=Bo(a.src),(f=n.querySelector(uc(m)))?(s.instance=f,zt(f),f):(l=a,(f=zi.get(m))&&(l=E({},a),Wm(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),zt(f),On(f,"link",l),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,wh(l,a.precedence,n));return s.instance}function wh(n,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,b=0;b<l.length;b++){var A=l[b];if(A.dataset.precedence===s)m=A;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function Xm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Wm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var xh=null;function C_(n,s,a){if(xh===null){var l=new Map,f=xh=new Map;f.set(a,l)}else f=xh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var m=a[f];if(!(m[Si]||m[Pt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(s)||"";b=n+b;var A=l.get(b);A?A.push(m):l.set(b,[m])}}return l}function N_(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function AS(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(n=s.disabled,typeof s.precedence=="string"&&n==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function I_(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function RS(n,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=zo(l.href),m=s.querySelector(cc(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=Sh.bind(n),s.then(n,n)),a.state.loading|=4,a.instance=m,zt(m);return}m=s.ownerDocument||s,l=A_(l),(f=zi.get(f))&&Xm(l,f),m=m.createElement("link"),zt(m);var b=m;b._p=new Promise(function(A,L){b.onload=A,b.onerror=L}),On(m,"link",l),a.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Sh.bind(n),s.addEventListener("load",a),s.addEventListener("error",a))}}var Jm=0;function CS(n,s){return n.stylesheets&&n.count===0&&Rh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&Rh(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+s);0<n.imgBytes&&Jm===0&&(Jm=62500*lS());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Rh(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>Jm?50:800)+s);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Sh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Ah=null;function Rh(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Ah=new Map,s.forEach(NS,n),Ah=null,Sh.call(n))}function NS(n,s){if(!(s.state.loading&4)){var a=Ah.get(n);if(a)var l=a.get(null);else{a=new Map,Ah.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var b=f[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}f=s.instance,b=f.getAttribute("data-precedence"),m=a.get(b)||l,m===l&&a.set(null,f),a.set(b,f),this.count++,l=Sh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var hc={$$typeof:F,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function IS(n,s,a,l,f,m,b,A,L){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vt(0),this.hiddenUpdates=Vt(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function D_(n,s,a,l,f,m,b,A,L,J,oe,fe){return n=new IS(n,s,a,b,L,J,oe,fe,A),s=1,m===!0&&(s|=24),m=mi(3,null,null,s),n.current=m,m.stateNode=n,s=Dd(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:s},Vd(m),n}function k_(n){return n?(n=vo,n):vo}function O_(n,s,a,l,f,m){f=k_(f),l.context===null?l.context=f:l.pendingContext=f,l=wr(s),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=xr(n,l,s),a!==null&&(ui(a,n,s),Hl(a,n,s))}function M_(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Zm(n,s){M_(n,s),(n=n.alternate)&&M_(n,s)}function V_(n){if(n.tag===13||n.tag===31){var s=Ca(n,67108864);s!==null&&ui(s,n,67108864),Zm(n,67108864)}}function P_(n){if(n.tag===13||n.tag===31){var s=_i();s=mn(s);var a=Ca(n,s);a!==null&&ui(a,n,s),Zm(n,s)}}var Ch=!0;function DS(n,s,a,l){var f=H.T;H.T=null;var m=Z.p;try{Z.p=2,eg(n,s,a,l)}finally{Z.p=m,H.T=f}}function kS(n,s,a,l){var f=H.T;H.T=null;var m=Z.p;try{Z.p=8,eg(n,s,a,l)}finally{Z.p=m,H.T=f}}function eg(n,s,a,l){if(Ch){var f=tg(l);if(f===null)zm(n,s,l,Nh,a),L_(n,l);else if(MS(f,n,s,a,l))l.stopPropagation();else if(L_(n,l),s&4&&-1<OS.indexOf(n)){for(;f!==null;){var m=Xn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=Rt(m.pendingLanes);if(b!==0){var A=m;for(A.pendingLanes|=2,A.entangledLanes|=2;b;){var L=1<<31-At(b);A.entanglements[1]|=L,b&=~L}_s(m),(ut&6)===0&&(hh=tn()+500,rc(0))}}break;case 31:case 13:A=Ca(m,2),A!==null&&ui(A,m,2),dh(),Zm(m,2)}if(m=tg(l),m===null&&zm(n,s,l,Nh,a),m===f)break;f=m}f!==null&&l.stopPropagation()}else zm(n,s,l,null,a)}}function tg(n){return n=Ii(n),ng(n)}var Nh=null;function ng(n){if(Nh=null,n=Ai(n),n!==null){var s=c(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=u(s),n!==null)return n;n=null}else if(a===31){if(n=d(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Nh=n,null}function j_(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fi()){case Rs:return 2;case Kn:return 8;case Cn:case Gi:return 32;case Cs:return 268435456;default:return 32}default:return 32}}var ig=!1,Vr=null,Pr=null,jr=null,fc=new Map,dc=new Map,Lr=[],OS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function L_(n,s){switch(n){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":Pr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":fc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":dc.delete(s.pointerId)}}function mc(n,s,a,l,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Xn(s),s!==null&&V_(s)),n):(n.eventSystemFlags|=l,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function MS(n,s,a,l,f){switch(s){case"focusin":return Vr=mc(Vr,n,s,a,l,f),!0;case"dragenter":return Pr=mc(Pr,n,s,a,l,f),!0;case"mouseover":return jr=mc(jr,n,s,a,l,f),!0;case"pointerover":var m=f.pointerId;return fc.set(m,mc(fc.get(m)||null,n,s,a,l,f)),!0;case"gotpointercapture":return m=f.pointerId,dc.set(m,mc(dc.get(m)||null,n,s,a,l,f)),!0}return!1}function U_(n){var s=Ai(n.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){n.blockedOn=s,gn(n.priority,function(){P_(a)});return}}else if(s===31){if(s=d(a),s!==null){n.blockedOn=s,gn(n.priority,function(){P_(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ih(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=tg(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Rl=l,a.target.dispatchEvent(l),Rl=null}else return s=Xn(a),s!==null&&V_(s),n.blockedOn=a,!1;s.shift()}return!0}function z_(n,s,a){Ih(n)&&a.delete(s)}function VS(){ig=!1,Vr!==null&&Ih(Vr)&&(Vr=null),Pr!==null&&Ih(Pr)&&(Pr=null),jr!==null&&Ih(jr)&&(jr=null),fc.forEach(z_),dc.forEach(z_)}function Dh(n,s){n.blockedOn===s&&(n.blockedOn=null,ig||(ig=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,VS)))}var kh=null;function B_(n){kh!==n&&(kh=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){kh===n&&(kh=null);for(var s=0;s<n.length;s+=3){var a=n[s],l=n[s+1],f=n[s+2];if(typeof l!="function"){if(ng(l||a)===null)continue;break}var m=Xn(a);m!==null&&(n.splice(s,3),s-=3,tm(m,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function qo(n){function s(L){return Dh(L,n)}Vr!==null&&Dh(Vr,n),Pr!==null&&Dh(Pr,n),jr!==null&&Dh(jr,n),fc.forEach(s),dc.forEach(s);for(var a=0;a<Lr.length;a++){var l=Lr[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Lr.length&&(a=Lr[0],a.blockedOn===null);)U_(a),a.blockedOn===null&&Lr.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],m=a[l+1],b=f[Kt]||null;if(typeof m=="function")b||B_(a);else if(b){var A=null;if(m&&m.hasAttribute("formAction")){if(f=m,b=m[Kt]||null)A=b.formAction;else if(ng(f)!==null)continue}else A=b.action;typeof A=="function"?a[l+1]=A:(a.splice(l,3),l-=3),B_(a)}}}function q_(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function sg(n){this._internalRoot=n}Oh.prototype.render=sg.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=_i();O_(a,l,n,s,null,null)},Oh.prototype.unmount=sg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;O_(n.current,2,null,n,null,null),dh(),s[Se]=null}};function Oh(n){this._internalRoot=n}Oh.prototype.unstable_scheduleHydration=function(n){if(n){var s=kt();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Lr.length&&s!==0&&s<Lr[a].priority;a++);Lr.splice(a,0,n),a===0&&U_(n)}};var H_=e.version;if(H_!=="19.2.3")throw Error(r(527,H_,"19.2.3"));Z.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(s),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var PS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mh.isDisabled&&Mh.supportsFiber)try{Yn=Mh.inject(PS),Gt=Mh}catch{}}return pc.createRoot=function(n,s){if(!o(n))throw Error(r(299));var a=!1,l="",f=Xy,m=Wy,b=Jy;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError)),s=D_(n,1,!1,null,null,a,l,null,f,m,b,q_),n[Se]=s.current,Um(n),new sg(s)},pc.hydrateRoot=function(n,s,a){if(!o(n))throw Error(r(299));var l=!1,f="",m=Xy,b=Wy,A=Jy,L=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.formState!==void 0&&(L=a.formState)),s=D_(n,1,!0,s,a??null,l,f,L,m,b,A,q_),s.context=k_(null),a=s.current,l=_i(),l=mn(l),f=wr(l),f.callback=null,xr(a,f,l),a=l,s.current.lanes=a,ne(s,a),_s(s),n[Se]=s.current,Um(n),new Oh(s)},pc.version="19.2.3",pc}var Z_;function $S(){if(Z_)return og.exports;Z_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),og.exports=GS(),og.exports}var KS=$S();const QS=()=>_.jsxs("div",{className:"fixed inset-0 -z-50 overflow-hidden pointer-events-none bg-[#020617]",children:[_.jsx("div",{className:"bg-blob opacity-20 w-[800px] h-[800px] -top-96 -left-96 bg-indigo-600 blur-[120px]"}),_.jsx("div",{className:"bg-blob opacity-30 w-[600px] h-[600px] top-1/2 -right-48 bg-pink-600 blur-[100px]",style:{animationDelay:"-5s",animationDuration:"25s"}}),_.jsx("div",{className:"bg-blob opacity-10 w-[500px] h-[500px] bottom-0 left-1/4 bg-cyan-400 blur-[80px]",style:{animationDelay:"-12s",animationDuration:"18s"}}),_.jsx("div",{className:"absolute inset-0 bg-radial-at-t from-transparent via-slate-950/40 to-slate-950"}),_.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"})]});const YS=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),XS=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),eb=i=>{const e=XS(i);return e.charAt(0).toUpperCase()+e.slice(1)},aE=(...i)=>i.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),WS=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var JS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ZS=z.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:c,iconNode:u,...d},g)=>z.createElement("svg",{ref:g,...JS,width:e,height:e,stroke:i,strokeWidth:r?Number(t)*24/Number(e):t,className:aE("lucide",o),...!c&&!WS(d)&&{"aria-hidden":"true"},...d},[...u.map(([p,v])=>z.createElement(p,v)),...Array.isArray(c)?c:[c]]));const dn=(i,e)=>{const t=z.forwardRef(({className:r,...o},c)=>z.createElement(ZS,{ref:c,iconNode:e,className:aE(`lucide-${YS(eb(i))}`,`lucide-${i}`,r),...o}));return t.displayName=eb(i),t};const eA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ha=dn("arrow-left",eA);const tA=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],of=dn("bot",tA);const nA=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],iA=dn("check",nA);const sA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],rA=dn("circle-x",sA);const aA=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],yp=dn("copy",aA);const oA=[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]],lA=dn("dices",oA);const cA=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],oE=dn("flag",cA);const uA=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],hA=dn("house",uA);const fA=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],dA=dn("layout-grid",fA);const mA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],lE=dn("loader-circle",mA);const gA=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],tb=dn("log-in",gA);const pA=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],yA=dn("log-out",pA);const vA=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],_A=dn("play",vA);const bA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],nb=dn("plus",bA);const EA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],vp=dn("rotate-ccw",EA);const TA=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],cE=dn("share-2",TA);const wA=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Vg=dn("trophy",wA);const xA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Fa=dn("user",xA);const SA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Vf=dn("users",SA);const AA=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],uE=dn("zap",AA),RA=()=>{};var ib={};const hE=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},CA=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const o=i[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[t++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[t++],u=i[t++],d=i[t++],g=((o&7)<<18|(c&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const c=i[t++],u=i[t++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|u&63)}}return e.join("")},fE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const c=i[o],u=o+1<i.length,d=u?i[o+1]:0,g=o+2<i.length,p=g?i[o+2]:0,v=c>>2,E=(c&3)<<4|d>>4;let w=(d&15)<<2|p>>6,I=p&63;g||(I=64,u||(w=64)),r.push(t[v],t[E],t[w],t[I])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(hE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):CA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const c=t[i.charAt(o++)],d=o<i.length?t[i.charAt(o)]:0;++o;const p=o<i.length?t[i.charAt(o)]:64;++o;const E=o<i.length?t[i.charAt(o)]:64;if(++o,c==null||d==null||p==null||E==null)throw new NA;const w=c<<2|d>>4;if(r.push(w),p!==64){const I=d<<4&240|p>>2;if(r.push(I),E!==64){const P=p<<6&192|E;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class NA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IA=function(i){const e=hE(i);return fE.encodeByteArray(e,!0)},lf=function(i){return IA(i).replace(/\./g,"")},dE=function(i){try{return fE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function DA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const kA=()=>DA().__FIREBASE_DEFAULTS__,OA=()=>{if(typeof process>"u"||typeof ib>"u")return;const i=ib.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},MA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&dE(i[1]);return e&&JSON.parse(e)},Pf=()=>{try{return RA()||kA()||OA()||MA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},mE=i=>Pf()?.emulatorHosts?.[i],VA=i=>{const e=mE(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},gE=()=>Pf()?.config,pE=i=>Pf()?.[`_${i}`];class PA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function dl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yE(i){return(await fetch(i,{credentials:"include"})).ok}function jA(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[lf(JSON.stringify(t)),lf(JSON.stringify(u)),""].join(".")}const Ac={};function LA(){const i={prod:[],emulator:[]};for(const e of Object.keys(Ac))Ac[e]?i.emulator.push(e):i.prod.push(e);return i}function UA(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let sb=!1;function vE(i,e){if(typeof window>"u"||typeof document>"u"||!dl(window.location.host)||Ac[i]===e||Ac[i]||sb)return;Ac[i]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",c=LA().prod.length>0;function u(){const w=document.getElementById(r);w&&w.remove()}function d(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function g(w,I){w.setAttribute("width","24"),w.setAttribute("id",I),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{sb=!0,u()},w}function v(w,I){w.setAttribute("id",I),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function E(){const w=UA(r),I=t("text"),P=document.getElementById(I)||document.createElement("span"),q=t("learnmore"),D=document.getElementById(q)||document.createElement("a"),j=t("preprendIcon"),Q=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const F=w.element;d(F),v(D,q);const ce=p();g(Q,j),F.append(Q,P,D,ce),document.body.appendChild(F)}c?(P.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gn())}function BA(){const i=Pf()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HA(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function FA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GA(){const i=Gn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function $A(){return!BA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function KA(){try{return typeof indexedDB=="object"}catch{return!1}}function QA(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const YA="FirebaseError";class sr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=YA,Object.setPrototypeOf(this,sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wc.prototype.create)}}class Wc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],u=c?XA(c,r):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new sr(o,d,r)}}function XA(i,e){return i.replace(WA,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const WA=/\{\$([^}]+)}/g;function JA(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Qa(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const c=i[o],u=e[o];if(rb(c)&&rb(u)){if(!Qa(c,u))return!1}else if(c!==u)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function rb(i){return i!==null&&typeof i=="object"}function Jc(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ZA(i,e){const t=new e2(i,e);return t.subscribe.bind(t)}class e2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");t2(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=hg),o.error===void 0&&(o.error=hg),o.complete===void 0&&(o.complete=hg);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function t2(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function hg(){}function Rn(i){return i&&i._delegate?i._delegate:i}class Ya{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const qa="[DEFAULT]";class n2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new PA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(s2(e))try{this.getOrInitializeService({instanceIdentifier:qa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=qa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qa){return this.instances.has(e)}getOptions(e=qa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[c,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(c);r===d&&u.resolve(o)}return o}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&e(c,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:i2(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qa){return this.component?this.component.multipleInstances?e:qa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function i2(i){return i===qa?void 0:i}function s2(i){return i.instantiationMode==="EAGER"}class r2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new n2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var We;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(We||(We={}));const a2={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},o2=We.INFO,l2={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},c2=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=l2[e];if(o)console[o](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _p{constructor(e){this.name=e,this._logLevel=o2,this._logHandler=c2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?a2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const u2=(i,e)=>e.some(t=>i instanceof t);let ab,ob;function h2(){return ab||(ab=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function f2(){return ob||(ob=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _E=new WeakMap,Pg=new WeakMap,bE=new WeakMap,fg=new WeakMap,bp=new WeakMap;function d2(i){const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",u)},c=()=>{t(Xr(i.result)),o()},u=()=>{r(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&_E.set(t,i)}).catch(()=>{}),bp.set(e,i),e}function m2(i){if(Pg.has(i))return;const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",u),i.removeEventListener("abort",u)},c=()=>{t(),o()},u=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",u),i.addEventListener("abort",u)});Pg.set(i,e)}let jg={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Pg.get(i);if(e==="objectStoreNames")return i.objectStoreNames||bE.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xr(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function g2(i){jg=i(jg)}function p2(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(dg(this),e,...t);return bE.set(r,e.sort?e.sort():[e]),Xr(r)}:f2().includes(i)?function(...e){return i.apply(dg(this),e),Xr(_E.get(this))}:function(...e){return Xr(i.apply(dg(this),e))}}function y2(i){return typeof i=="function"?p2(i):(i instanceof IDBTransaction&&m2(i),u2(i,h2())?new Proxy(i,jg):i)}function Xr(i){if(i instanceof IDBRequest)return d2(i);if(fg.has(i))return fg.get(i);const e=y2(i);return e!==i&&(fg.set(i,e),bp.set(e,i)),e}const dg=i=>bp.get(i);function v2(i,e,{blocked:t,upgrade:r,blocking:o,terminated:c}={}){const u=indexedDB.open(i,e),d=Xr(u);return r&&u.addEventListener("upgradeneeded",g=>{r(Xr(u.result),g.oldVersion,g.newVersion,Xr(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),d.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const _2=["get","getKey","getAll","getAllKeys","count"],b2=["put","add","delete","clear"],mg=new Map;function lb(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(mg.get(e))return mg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=b2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||_2.includes(t)))return;const c=async function(u,...d){const g=this.transaction(u,o?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),o&&g.done]))[0]};return mg.set(e,c),c}g2(i=>({...i,get:(e,t,r)=>lb(e,t)||i.get(e,t,r),has:(e,t)=>!!lb(e,t)||i.has(e,t)}));class E2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(T2(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function T2(i){return i.getComponent()?.type==="VERSION"}const Lg="@firebase/app",cb="0.14.6";const Js=new _p("@firebase/app"),w2="@firebase/app-compat",x2="@firebase/analytics-compat",S2="@firebase/analytics",A2="@firebase/app-check-compat",R2="@firebase/app-check",C2="@firebase/auth",N2="@firebase/auth-compat",I2="@firebase/database",D2="@firebase/data-connect",k2="@firebase/database-compat",O2="@firebase/functions",M2="@firebase/functions-compat",V2="@firebase/installations",P2="@firebase/installations-compat",j2="@firebase/messaging",L2="@firebase/messaging-compat",U2="@firebase/performance",z2="@firebase/performance-compat",B2="@firebase/remote-config",q2="@firebase/remote-config-compat",H2="@firebase/storage",F2="@firebase/storage-compat",G2="@firebase/firestore",$2="@firebase/ai",K2="@firebase/firestore-compat",Q2="firebase",Y2="12.6.0";const Ug="[DEFAULT]",X2={[Lg]:"fire-core",[w2]:"fire-core-compat",[S2]:"fire-analytics",[x2]:"fire-analytics-compat",[R2]:"fire-app-check",[A2]:"fire-app-check-compat",[C2]:"fire-auth",[N2]:"fire-auth-compat",[I2]:"fire-rtdb",[D2]:"fire-data-connect",[k2]:"fire-rtdb-compat",[O2]:"fire-fn",[M2]:"fire-fn-compat",[V2]:"fire-iid",[P2]:"fire-iid-compat",[j2]:"fire-fcm",[L2]:"fire-fcm-compat",[U2]:"fire-perf",[z2]:"fire-perf-compat",[B2]:"fire-rc",[q2]:"fire-rc-compat",[H2]:"fire-gcs",[F2]:"fire-gcs-compat",[G2]:"fire-fst",[K2]:"fire-fst-compat",[$2]:"fire-vertex","fire-js":"fire-js",[Q2]:"fire-js-all"};const Lc=new Map,W2=new Map,zg=new Map;function ub(i,e){try{i.container.addComponent(e)}catch(t){Js.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function il(i){const e=i.name;if(zg.has(e))return Js.debug(`There were multiple attempts to register component ${e}.`),!1;zg.set(e,i);for(const t of Lc.values())ub(t,i);for(const t of W2.values())ub(t,i);return!0}function Ep(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function ns(i){return i==null?!1:i.settings!==void 0}const J2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wr=new Wc("app","Firebase",J2);class Z2{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ya("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wr.create("app-deleted",{appName:this._name})}}const ml=Y2;function EE(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r={name:Ug,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Wr.create("bad-app-name",{appName:String(o)});if(t||(t=gE()),!t)throw Wr.create("no-options");const c=Lc.get(o);if(c){if(Qa(t,c.options)&&Qa(r,c.config))return c;throw Wr.create("duplicate-app",{appName:o})}const u=new r2(o);for(const g of zg.values())u.addComponent(g);const d=new Z2(t,r,u);return Lc.set(o,d),d}function TE(i=Ug){const e=Lc.get(i);if(!e&&i===Ug&&gE())return EE();if(!e)throw Wr.create("no-app",{appName:i});return e}function hb(){return Array.from(Lc.values())}function Jr(i,e,t){let r=X2[i]??i;t&&(r+=`-${t}`);const o=r.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${r}" with version "${e}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Js.warn(u.join(" "));return}il(new Ya(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const eR="firebase-heartbeat-database",tR=1,Uc="firebase-heartbeat-store";let gg=null;function wE(){return gg||(gg=v2(eR,tR,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Uc)}catch(t){console.warn(t)}}}}).catch(i=>{throw Wr.create("idb-open",{originalErrorMessage:i.message})})),gg}async function nR(i){try{const t=(await wE()).transaction(Uc),r=await t.objectStore(Uc).get(xE(i));return await t.done,r}catch(e){if(e instanceof sr)Js.warn(e.message);else{const t=Wr.create("idb-get",{originalErrorMessage:e?.message});Js.warn(t.message)}}}async function fb(i,e){try{const r=(await wE()).transaction(Uc,"readwrite");await r.objectStore(Uc).put(e,xE(i)),await r.done}catch(t){if(t instanceof sr)Js.warn(t.message);else{const r=Wr.create("idb-set",{originalErrorMessage:t?.message});Js.warn(r.message)}}}function xE(i){return`${i.name}!${i.options.appId}`}const iR=1024,sR=30;class rR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new oR(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=db();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>sR){const o=lR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Js.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=db(),{heartbeatsToSend:t,unsentEntries:r}=aR(this._heartbeatsCache.heartbeats),o=lf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Js.warn(e),""}}}function db(){return new Date().toISOString().substring(0,10)}function aR(i,e=iR){const t=[];let r=i.slice();for(const o of i){const c=t.find(u=>u.agent===o.agent);if(c){if(c.dates.push(o.date),mb(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),mb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class oR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return KA()?QA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await nR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return fb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return fb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function mb(i){return lf(JSON.stringify({version:2,heartbeats:i})).length}function lR(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}function cR(i){il(new Ya("platform-logger",e=>new E2(e),"PRIVATE")),il(new Ya("heartbeat",e=>new rR(e),"PRIVATE")),Jr(Lg,cb,i),Jr(Lg,cb,"esm2020"),Jr("fire-js","")}cR("");var gb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Zr,SE;(function(){var i;function e(S,x){function C(){}C.prototype=x.prototype,S.F=x.prototype,S.prototype=new C,S.prototype.constructor=S,S.D=function(M,R,O){for(var k=Array(arguments.length-2),be=2;be<arguments.length;be++)k[be-2]=arguments[be];return x.prototype[R].apply(M,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(S,x,C){C||(C=0);const M=Array(16);if(typeof x=="string")for(var R=0;R<16;++R)M[R]=x.charCodeAt(C++)|x.charCodeAt(C++)<<8|x.charCodeAt(C++)<<16|x.charCodeAt(C++)<<24;else for(R=0;R<16;++R)M[R]=x[C++]|x[C++]<<8|x[C++]<<16|x[C++]<<24;x=S.g[0],C=S.g[1],R=S.g[2];let O=S.g[3],k;k=x+(O^C&(R^O))+M[0]+3614090360&4294967295,x=C+(k<<7&4294967295|k>>>25),k=O+(R^x&(C^R))+M[1]+3905402710&4294967295,O=x+(k<<12&4294967295|k>>>20),k=R+(C^O&(x^C))+M[2]+606105819&4294967295,R=O+(k<<17&4294967295|k>>>15),k=C+(x^R&(O^x))+M[3]+3250441966&4294967295,C=R+(k<<22&4294967295|k>>>10),k=x+(O^C&(R^O))+M[4]+4118548399&4294967295,x=C+(k<<7&4294967295|k>>>25),k=O+(R^x&(C^R))+M[5]+1200080426&4294967295,O=x+(k<<12&4294967295|k>>>20),k=R+(C^O&(x^C))+M[6]+2821735955&4294967295,R=O+(k<<17&4294967295|k>>>15),k=C+(x^R&(O^x))+M[7]+4249261313&4294967295,C=R+(k<<22&4294967295|k>>>10),k=x+(O^C&(R^O))+M[8]+1770035416&4294967295,x=C+(k<<7&4294967295|k>>>25),k=O+(R^x&(C^R))+M[9]+2336552879&4294967295,O=x+(k<<12&4294967295|k>>>20),k=R+(C^O&(x^C))+M[10]+4294925233&4294967295,R=O+(k<<17&4294967295|k>>>15),k=C+(x^R&(O^x))+M[11]+2304563134&4294967295,C=R+(k<<22&4294967295|k>>>10),k=x+(O^C&(R^O))+M[12]+1804603682&4294967295,x=C+(k<<7&4294967295|k>>>25),k=O+(R^x&(C^R))+M[13]+4254626195&4294967295,O=x+(k<<12&4294967295|k>>>20),k=R+(C^O&(x^C))+M[14]+2792965006&4294967295,R=O+(k<<17&4294967295|k>>>15),k=C+(x^R&(O^x))+M[15]+1236535329&4294967295,C=R+(k<<22&4294967295|k>>>10),k=x+(R^O&(C^R))+M[1]+4129170786&4294967295,x=C+(k<<5&4294967295|k>>>27),k=O+(C^R&(x^C))+M[6]+3225465664&4294967295,O=x+(k<<9&4294967295|k>>>23),k=R+(x^C&(O^x))+M[11]+643717713&4294967295,R=O+(k<<14&4294967295|k>>>18),k=C+(O^x&(R^O))+M[0]+3921069994&4294967295,C=R+(k<<20&4294967295|k>>>12),k=x+(R^O&(C^R))+M[5]+3593408605&4294967295,x=C+(k<<5&4294967295|k>>>27),k=O+(C^R&(x^C))+M[10]+38016083&4294967295,O=x+(k<<9&4294967295|k>>>23),k=R+(x^C&(O^x))+M[15]+3634488961&4294967295,R=O+(k<<14&4294967295|k>>>18),k=C+(O^x&(R^O))+M[4]+3889429448&4294967295,C=R+(k<<20&4294967295|k>>>12),k=x+(R^O&(C^R))+M[9]+568446438&4294967295,x=C+(k<<5&4294967295|k>>>27),k=O+(C^R&(x^C))+M[14]+3275163606&4294967295,O=x+(k<<9&4294967295|k>>>23),k=R+(x^C&(O^x))+M[3]+4107603335&4294967295,R=O+(k<<14&4294967295|k>>>18),k=C+(O^x&(R^O))+M[8]+1163531501&4294967295,C=R+(k<<20&4294967295|k>>>12),k=x+(R^O&(C^R))+M[13]+2850285829&4294967295,x=C+(k<<5&4294967295|k>>>27),k=O+(C^R&(x^C))+M[2]+4243563512&4294967295,O=x+(k<<9&4294967295|k>>>23),k=R+(x^C&(O^x))+M[7]+1735328473&4294967295,R=O+(k<<14&4294967295|k>>>18),k=C+(O^x&(R^O))+M[12]+2368359562&4294967295,C=R+(k<<20&4294967295|k>>>12),k=x+(C^R^O)+M[5]+4294588738&4294967295,x=C+(k<<4&4294967295|k>>>28),k=O+(x^C^R)+M[8]+2272392833&4294967295,O=x+(k<<11&4294967295|k>>>21),k=R+(O^x^C)+M[11]+1839030562&4294967295,R=O+(k<<16&4294967295|k>>>16),k=C+(R^O^x)+M[14]+4259657740&4294967295,C=R+(k<<23&4294967295|k>>>9),k=x+(C^R^O)+M[1]+2763975236&4294967295,x=C+(k<<4&4294967295|k>>>28),k=O+(x^C^R)+M[4]+1272893353&4294967295,O=x+(k<<11&4294967295|k>>>21),k=R+(O^x^C)+M[7]+4139469664&4294967295,R=O+(k<<16&4294967295|k>>>16),k=C+(R^O^x)+M[10]+3200236656&4294967295,C=R+(k<<23&4294967295|k>>>9),k=x+(C^R^O)+M[13]+681279174&4294967295,x=C+(k<<4&4294967295|k>>>28),k=O+(x^C^R)+M[0]+3936430074&4294967295,O=x+(k<<11&4294967295|k>>>21),k=R+(O^x^C)+M[3]+3572445317&4294967295,R=O+(k<<16&4294967295|k>>>16),k=C+(R^O^x)+M[6]+76029189&4294967295,C=R+(k<<23&4294967295|k>>>9),k=x+(C^R^O)+M[9]+3654602809&4294967295,x=C+(k<<4&4294967295|k>>>28),k=O+(x^C^R)+M[12]+3873151461&4294967295,O=x+(k<<11&4294967295|k>>>21),k=R+(O^x^C)+M[15]+530742520&4294967295,R=O+(k<<16&4294967295|k>>>16),k=C+(R^O^x)+M[2]+3299628645&4294967295,C=R+(k<<23&4294967295|k>>>9),k=x+(R^(C|~O))+M[0]+4096336452&4294967295,x=C+(k<<6&4294967295|k>>>26),k=O+(C^(x|~R))+M[7]+1126891415&4294967295,O=x+(k<<10&4294967295|k>>>22),k=R+(x^(O|~C))+M[14]+2878612391&4294967295,R=O+(k<<15&4294967295|k>>>17),k=C+(O^(R|~x))+M[5]+4237533241&4294967295,C=R+(k<<21&4294967295|k>>>11),k=x+(R^(C|~O))+M[12]+1700485571&4294967295,x=C+(k<<6&4294967295|k>>>26),k=O+(C^(x|~R))+M[3]+2399980690&4294967295,O=x+(k<<10&4294967295|k>>>22),k=R+(x^(O|~C))+M[10]+4293915773&4294967295,R=O+(k<<15&4294967295|k>>>17),k=C+(O^(R|~x))+M[1]+2240044497&4294967295,C=R+(k<<21&4294967295|k>>>11),k=x+(R^(C|~O))+M[8]+1873313359&4294967295,x=C+(k<<6&4294967295|k>>>26),k=O+(C^(x|~R))+M[15]+4264355552&4294967295,O=x+(k<<10&4294967295|k>>>22),k=R+(x^(O|~C))+M[6]+2734768916&4294967295,R=O+(k<<15&4294967295|k>>>17),k=C+(O^(R|~x))+M[13]+1309151649&4294967295,C=R+(k<<21&4294967295|k>>>11),k=x+(R^(C|~O))+M[4]+4149444226&4294967295,x=C+(k<<6&4294967295|k>>>26),k=O+(C^(x|~R))+M[11]+3174756917&4294967295,O=x+(k<<10&4294967295|k>>>22),k=R+(x^(O|~C))+M[2]+718787259&4294967295,R=O+(k<<15&4294967295|k>>>17),k=C+(O^(R|~x))+M[9]+3951481745&4294967295,S.g[0]=S.g[0]+x&4294967295,S.g[1]=S.g[1]+(R+(k<<21&4294967295|k>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+O&4294967295}r.prototype.v=function(S,x){x===void 0&&(x=S.length);const C=x-this.blockSize,M=this.C;let R=this.h,O=0;for(;O<x;){if(R==0)for(;O<=C;)o(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<x;)if(M[R++]=S.charCodeAt(O++),R==this.blockSize){o(this,M),R=0;break}}else for(;O<x;)if(M[R++]=S[O++],R==this.blockSize){o(this,M),R=0;break}}this.h=R,this.o+=x},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var x=1;x<S.length-8;++x)S[x]=0;x=this.o*8;for(var C=S.length-8;C<S.length;++C)S[C]=x&255,x/=256;for(this.v(S),S=Array(16),x=0,C=0;C<4;++C)for(let M=0;M<32;M+=8)S[x++]=this.g[C]>>>M&255;return S};function c(S,x){var C=d;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=x(S)}function u(S,x){this.h=x;const C=[];let M=!0;for(let R=S.length-1;R>=0;R--){const O=S[R]|0;M&&O==x||(C[R]=O,M=!1)}this.g=C}var d={};function g(S){return-128<=S&&S<128?c(S,function(x){return new u([x|0],x<0?-1:0)}):new u([S|0],S<0?-1:0)}function p(S){if(isNaN(S)||!isFinite(S))return E;if(S<0)return D(p(-S));const x=[];let C=1;for(let M=0;S>=C;M++)x[M]=S/C|0,C*=4294967296;return new u(x,0)}function v(S,x){if(S.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(S.charAt(0)=="-")return D(v(S.substring(1),x));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=p(Math.pow(x,8));let M=E;for(let O=0;O<S.length;O+=8){var R=Math.min(8,S.length-O);const k=parseInt(S.substring(O,O+R),x);R<8?(R=p(Math.pow(x,R)),M=M.j(R).add(p(k))):(M=M.j(C),M=M.add(p(k)))}return M}var E=g(0),w=g(1),I=g(16777216);i=u.prototype,i.m=function(){if(q(this))return-D(this).m();let S=0,x=1;for(let C=0;C<this.g.length;C++){const M=this.i(C);S+=(M>=0?M:4294967296+M)*x,x*=4294967296}return S},i.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(P(this))return"0";if(q(this))return"-"+D(this).toString(S);const x=p(Math.pow(S,6));var C=this;let M="";for(;;){const R=ce(C,x).g;C=j(C,R.j(x));let O=((C.g.length>0?C.g[0]:C.h)>>>0).toString(S);if(C=R,P(C))return O+M;for(;O.length<6;)O="0"+O;M=O+M}},i.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function P(S){if(S.h!=0)return!1;for(let x=0;x<S.g.length;x++)if(S.g[x]!=0)return!1;return!0}function q(S){return S.h==-1}i.l=function(S){return S=j(this,S),q(S)?-1:P(S)?0:1};function D(S){const x=S.g.length,C=[];for(let M=0;M<x;M++)C[M]=~S.g[M];return new u(C,~S.h).add(w)}i.abs=function(){return q(this)?D(this):this},i.add=function(S){const x=Math.max(this.g.length,S.g.length),C=[];let M=0;for(let R=0;R<=x;R++){let O=M+(this.i(R)&65535)+(S.i(R)&65535),k=(O>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);M=k>>>16,O&=65535,k&=65535,C[R]=k<<16|O}return new u(C,C[C.length-1]&-2147483648?-1:0)};function j(S,x){return S.add(D(x))}i.j=function(S){if(P(this)||P(S))return E;if(q(this))return q(S)?D(this).j(D(S)):D(D(this).j(S));if(q(S))return D(this.j(D(S)));if(this.l(I)<0&&S.l(I)<0)return p(this.m()*S.m());const x=this.g.length+S.g.length,C=[];for(var M=0;M<2*x;M++)C[M]=0;for(M=0;M<this.g.length;M++)for(let R=0;R<S.g.length;R++){const O=this.i(M)>>>16,k=this.i(M)&65535,be=S.i(R)>>>16,me=S.i(R)&65535;C[2*M+2*R]+=k*me,Q(C,2*M+2*R),C[2*M+2*R+1]+=O*me,Q(C,2*M+2*R+1),C[2*M+2*R+1]+=k*be,Q(C,2*M+2*R+1),C[2*M+2*R+2]+=O*be,Q(C,2*M+2*R+2)}for(S=0;S<x;S++)C[S]=C[2*S+1]<<16|C[2*S];for(S=x;S<2*x;S++)C[S]=0;return new u(C,0)};function Q(S,x){for(;(S[x]&65535)!=S[x];)S[x+1]+=S[x]>>>16,S[x]&=65535,x++}function F(S,x){this.g=S,this.h=x}function ce(S,x){if(P(x))throw Error("division by zero");if(P(S))return new F(E,E);if(q(S))return x=ce(D(S),x),new F(D(x.g),D(x.h));if(q(x))return x=ce(S,D(x)),new F(D(x.g),x.h);if(S.g.length>30){if(q(S)||q(x))throw Error("slowDivide_ only works with positive integers.");for(var C=w,M=x;M.l(S)<=0;)C=G(C),M=G(M);var R=U(C,1),O=U(M,1);for(M=U(M,2),C=U(C,2);!P(M);){var k=O.add(M);k.l(S)<=0&&(R=R.add(C),O=k),M=U(M,1),C=U(C,1)}return x=j(S,R.j(x)),new F(R,x)}for(R=E;S.l(x)>=0;){for(C=Math.max(1,Math.floor(S.m()/x.m())),M=Math.ceil(Math.log(C)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),O=p(C),k=O.j(x);q(k)||k.l(S)>0;)C-=M,O=p(C),k=O.j(x);P(O)&&(O=w),R=R.add(O),S=j(S,k)}return new F(R,S)}i.B=function(S){return ce(this,S).h},i.and=function(S){const x=Math.max(this.g.length,S.g.length),C=[];for(let M=0;M<x;M++)C[M]=this.i(M)&S.i(M);return new u(C,this.h&S.h)},i.or=function(S){const x=Math.max(this.g.length,S.g.length),C=[];for(let M=0;M<x;M++)C[M]=this.i(M)|S.i(M);return new u(C,this.h|S.h)},i.xor=function(S){const x=Math.max(this.g.length,S.g.length),C=[];for(let M=0;M<x;M++)C[M]=this.i(M)^S.i(M);return new u(C,this.h^S.h)};function G(S){const x=S.g.length+1,C=[];for(let M=0;M<x;M++)C[M]=S.i(M)<<1|S.i(M-1)>>>31;return new u(C,S.h)}function U(S,x){const C=x>>5;x%=32;const M=S.g.length-C,R=[];for(let O=0;O<M;O++)R[O]=x>0?S.i(O+C)>>>x|S.i(O+C+1)<<32-x:S.i(O+C);return new u(R,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,SE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=v,Zr=u}).apply(typeof gb<"u"?gb:typeof self<"u"?self:typeof window<"u"?window:{});var Vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var AE,vc,RE,Gh,Bg,CE,NE,IE;(function(){var i,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vh=="object"&&Vh];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function o(h,y){if(y)e:{var T=r;h=h.split(".");for(var N=0;N<h.length-1;N++){var X=h[N];if(!(X in T))break e;T=T[X]}h=h[h.length-1],N=T[h],y=y(N),y!=N&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var T=[],N;for(N in y)Object.prototype.hasOwnProperty.call(y,N)&&T.push([N,y[N]]);return T}});var c=c||{},u=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,T){return h.call.apply(h.bind,arguments)}function p(h,y,T){return p=g,p.apply(null,arguments)}function v(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var N=T.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function E(h,y){function T(){}T.prototype=y.prototype,h.Z=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(N,X,re){for(var _e=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)_e[qe-2]=arguments[qe];return y.prototype[X].apply(N,_e)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function I(h){const y=h.length;if(y>0){const T=Array(y);for(let N=0;N<y;N++)T[N]=h[N];return T}return[]}function P(h,y){for(let N=1;N<arguments.length;N++){const X=arguments[N];var T=typeof X;if(T=T!="object"?T:X?Array.isArray(X)?"array":T:"null",T=="array"||T=="object"&&typeof X.length=="number"){T=h.length||0;const re=X.length||0;h.length=T+re;for(let _e=0;_e<re;_e++)h[T+_e]=X[_e]}else h.push(X)}}class q{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function D(h){u.setTimeout(()=>{throw h},0)}function j(){var h=S;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Q{constructor(){this.h=this.g=null}add(y,T){const N=F.get();N.set(y,T),this.h?this.h.next=N:this.g=N,this.h=N}}var F=new q(()=>new ce,h=>h.reset());class ce{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let G,U=!1,S=new Q,x=()=>{const h=Promise.resolve(void 0);G=()=>{h.then(C)}};function C(){for(var h;h=j();){try{h.h.call(h.g)}catch(T){D(T)}var y=F;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}U=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};u.addEventListener("test",T,y),u.removeEventListener("test",T,y)}catch{}return h})();function k(h){return/^[\s\xa0]*$/.test(h)}function be(h,y){R.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(be,R),be.prototype.init=function(h,y){const T=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&be.Z.h.call(this)},be.prototype.h=function(){be.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var me="closure_listenable_"+(Math.random()*1e6|0),H=0;function Z(h,y,T,N,X){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!N,this.ha=X,this.key=++H,this.da=this.fa=!1}function se(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function pe(h,y,T){for(const N in h)y.call(T,h[N],N,h)}function ye(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function V(h){const y={};for(const T in h)y[T]=h[T];return y}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(h,y){let T,N;for(let X=1;X<arguments.length;X++){N=arguments[X];for(T in N)h[T]=N[T];for(let re=0;re<$.length;re++)T=$[re],Object.prototype.hasOwnProperty.call(N,T)&&(h[T]=N[T])}}function ge(h){this.src=h,this.g={},this.h=0}ge.prototype.add=function(h,y,T,N,X){const re=h.toString();h=this.g[re],h||(h=this.g[re]=[],this.h++);const _e=Re(h,y,N,X);return _e>-1?(y=h[_e],T||(y.fa=!1)):(y=new Z(y,this.src,re,!!N,X),y.fa=T,h.push(y)),y};function Ee(h,y){const T=y.type;if(T in h.g){var N=h.g[T],X=Array.prototype.indexOf.call(N,y,void 0),re;(re=X>=0)&&Array.prototype.splice.call(N,X,1),re&&(se(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Re(h,y,T,N){for(let X=0;X<h.length;++X){const re=h[X];if(!re.da&&re.listener==y&&re.capture==!!T&&re.ha==N)return X}return-1}var Ve="closure_lm_"+(Math.random()*1e6|0),xt={};function ht(h,y,T,N,X){if(Array.isArray(y)){for(let re=0;re<y.length;re++)ht(h,y[re],T,N,X);return null}return T=Hi(T),h&&h[me]?h.J(y,T,d(N)?!!N.capture:!1,X):Ft(h,y,T,!1,N,X)}function Ft(h,y,T,N,X,re){if(!y)throw Error("Invalid event type");const _e=d(X)?!!X.capture:!!X;let qe=Un(h);if(qe||(h[Ve]=qe=new ge(h)),T=qe.add(y,T,N,_e,re),T.proxy)return T;if(N=xi(),T.proxy=N,N.src=h,N.listener=T,h.addEventListener)O||(X=_e),X===void 0&&(X=!1),h.addEventListener(y.toString(),N,X);else if(h.attachEvent)h.attachEvent(en(y.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return T}function xi(){function h(T){return y.call(h.src,h.listener,T)}const y=fi;return h}function Ln(h,y,T,N,X){if(Array.isArray(y))for(var re=0;re<y.length;re++)Ln(h,y[re],T,N,X);else N=d(N)?!!N.capture:!!N,T=Hi(T),h&&h[me]?(h=h.i,re=String(y).toString(),re in h.g&&(y=h.g[re],T=Re(y,T,N,X),T>-1&&(se(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete h.g[re],h.h--)))):h&&(h=Un(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Re(y,T,N,X)),(T=h>-1?y[h]:null)&&qi(T))}function qi(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[me])Ee(y.i,h);else{var T=h.type,N=h.proxy;y.removeEventListener?y.removeEventListener(T,N,h.capture):y.detachEvent?y.detachEvent(en(T),N):y.addListener&&y.removeListener&&y.removeListener(N),(T=Un(y))?(Ee(T,h),T.h==0&&(T.src=null,y[Ve]=null)):se(h)}}}function en(h){return h in xt?xt[h]:xt[h]="on"+h}function fi(h,y){if(h.da)h=!0;else{y=new be(y,this);const T=h.listener,N=h.ha||h.src;h.fa&&qi(h),h=T.call(N,y)}return h}function Un(h){return h=h[Ve],h instanceof ge?h:null}var as="__closure_events_fn_"+(Math.random()*1e9>>>0);function Hi(h){return typeof h=="function"?h:(h[as]||(h[as]=function(y){return h.handleEvent(y)}),h[as])}function St(){M.call(this),this.i=new ge(this),this.M=this,this.G=null}E(St,M),St.prototype[me]=!0,St.prototype.removeEventListener=function(h,y,T,N){Ln(this,h,y,T,N)};function ft(h,y){var T,N=h.G;if(N)for(T=[];N;N=N.G)T.push(N);if(h=h.M,N=y.type||y,typeof y=="string")y=new R(y,h);else if(y instanceof R)y.target=y.target||h;else{var X=y;y=new R(N,h),ue(y,X)}X=!0;let re,_e;if(T)for(_e=T.length-1;_e>=0;_e--)re=y.g=T[_e],X=$n(re,N,!0,y)&&X;if(re=y.g=h,X=$n(re,N,!0,y)&&X,X=$n(re,N,!1,y)&&X,T)for(_e=0;_e<T.length;_e++)re=y.g=T[_e],X=$n(re,N,!1,y)&&X}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const T=h.g[y];for(let N=0;N<T.length;N++)se(T[N]);delete h.g[y],h.h--}}this.G=null},St.prototype.J=function(h,y,T,N){return this.i.add(String(h),y,!1,T,N)},St.prototype.K=function(h,y,T,N){return this.i.add(String(h),y,!0,T,N)};function $n(h,y,T,N){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let X=!0;for(let re=0;re<y.length;++re){const _e=y[re];if(_e&&!_e.da&&_e.capture==T){const qe=_e.listener,Qt=_e.ha||_e.src;_e.fa&&Ee(h.i,_e),X=qe.call(Qt,N)!==!1&&X}}return X&&!N.defaultPrevented}function os(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:u.setTimeout(h,y||0)}function ls(h){h.g=os(()=>{h.g=null,h.i&&(h.i=!1,ls(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class tn extends M{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ls(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fi(h){M.call(this),this.h=h,this.g={}}E(Fi,M);var Rs=[];function Kn(h){pe(h.g,function(y,T){this.g.hasOwnProperty(T)&&qi(y)},h),h.g={}}Fi.prototype.N=function(){Fi.Z.N.call(this),Kn(this)},Fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cn=u.JSON.stringify,Gi=u.JSON.parse,Cs=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function Qn(){}function Ns(){}var Yn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gt(){R.call(this,"d")}E(Gt,R);function bn(){R.call(this,"c")}E(bn,R);var At={},Is=null;function $i(){return Is=Is||new St}At.Ia="serverreachability";function rr(h){R.call(this,At.Ia,h)}E(rr,R);function ni(h){const y=$i();ft(y,new rr(y))}At.STAT_EVENT="statevent";function Ki(h,y){R.call(this,At.STAT_EVENT,h),this.stat=y}E(Ki,R);function Ge(h){const y=$i();ft(y,new Ki(y,h))}At.Ja="timingevent";function Rt(h,y){R.call(this,At.Ja,h),this.size=y}E(Rt,R);function Ct(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},y)}function Ut(){this.g=!0}Ut.prototype.ua=function(){this.g=!1};function En(h,y,T,N,X,re){h.info(function(){if(h.g)if(re){var _e="",qe=re.split("&");for(let ct=0;ct<qe.length;ct++){var Qt=qe[ct].split("=");if(Qt.length>1){const Ot=Qt[0];Qt=Qt[1];const ki=Ot.split("_");_e=ki.length>=2&&ki[1]=="type"?_e+(Ot+"="+Qt+"&"):_e+(Ot+"=redacted&")}}}else _e=null;else _e=re;return"XMLHTTP REQ ("+N+") [attempt "+X+"]: "+y+`
`+T+`
`+_e})}function nn(h,y,T,N,X,re,_e){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+X+"]: "+y+`
`+T+`
`+re+" "+_e})}function Vt(h,y,T,N){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+gt(h,T)+(N?" "+N:"")})}function ne(h,y){h.info(function(){return"TIMEOUT: "+y})}Ut.prototype.info=function(){};function gt(h,y){if(!h.g)return y;if(!y)return null;try{const re=JSON.parse(y);if(re){for(h=0;h<re.length;h++)if(Array.isArray(re[h])){var T=re[h];if(!(T.length<2)){var N=T[1];if(Array.isArray(N)&&!(N.length<1)){var X=N[0];if(X!="noop"&&X!="stop"&&X!="close")for(let _e=1;_e<N.length;_e++)N[_e]=""}}}}return Cn(re)}catch{return y}}var pt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$t={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ve;function mn(){}E(mn,Qn),mn.prototype.g=function(){return new XMLHttpRequest},ve=new mn;function it(h){return encodeURIComponent(String(h))}function kt(h){var y=1;h=h.split(":");const T=[];for(;y>0&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function gn(h,y,T,N){this.j=h,this.i=y,this.l=T,this.S=N||1,this.V=new Fi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new yt}function yt(){this.i=null,this.g="",this.h=!1}var Pt={},Kt={};function Se(h,y,T){h.M=1,h.A=Ni(ee(y)),h.u=T,h.R=!0,ar(h,null)}function ar(h,y){h.F=Date.now(),Si(h),h.B=ee(h.A);var T=h.B,N=h.S;Array.isArray(N)||(N=[String(N)]),ao(T.i,"t",N),h.C=0,T=h.j.L,h.h=new yt,h.g=Cu(h.j,T?y:null,!h.u),h.P>0&&(h.O=new tn(p(h.Y,h,h.g),h.P)),y=h.V,T=h.g,N=h.ba;var X="readystatechange";Array.isArray(X)||(X&&(Rs[0]=X.toString()),X=Rs);for(let re=0;re<X.length;re++){const _e=ht(T,X[re],N||y.handleEvent,!1,y.h||y);if(!_e)break;y.g[_e.key]=_e}y=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),ni(),En(h.i,h.v,h.B,h.l,h.S,h.u)}gn.prototype.ba=function(h){h=h.target;const y=this.O;y&&Xi(h)==3?y.j():this.Y(h)},gn.prototype.Y=function(h){try{if(h==this.g)e:{const qe=Xi(this.g),Qt=this.g.ya(),ct=this.g.ca();if(!(qe<3)&&(qe!=3||this.g&&(this.h.h||this.g.la()||Nn(this.g)))){this.K||qe!=4||Qt==7||(Qt==8||ct<=0?ni(3):ni(2)),Ai(this);var y=this.g.ca();this.X=y;var T=io(this);if(this.o=y==200,nn(this.i,this.v,this.B,this.l,this.S,qe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var N,X=this.g;if((N=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(N)){var re=N;break t}}re=null}if(h=re)Vt(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ri(this,h);else{this.o=!1,this.m=3,Ge(12),zn(this),Xn(this);break e}}if(this.R){h=!0;let Ot;for(;!this.K&&this.C<T.length;)if(Ot=ma(this,T),Ot==Kt){qe==4&&(this.m=4,Ge(14),h=!1),Vt(this.i,this.l,null,"[Incomplete Response]");break}else if(Ot==Pt){this.m=4,Ge(15),Vt(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else Vt(this.i,this.l,Ot,null),Ri(this,Ot);if(so(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qe!=4||T.length!=0||this.h.h||(this.m=1,Ge(16),h=!1),this.o=this.o&&h,!h)Vt(this.i,this.l,T,"[Invalid Chunked Response]"),zn(this),Xn(this);else if(T.length>0&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.aa&&!_e.P&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),kl(_e),_e.P=!0,Ge(11))}}else Vt(this.i,this.l,T,null),Ri(this,T);qe==4&&zn(this),this.o&&!this.K&&(qe==4?xu(this.j,this):(this.o=!1,Si(this)))}else ks(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,Ge(12)):(this.m=0,Ge(13)),zn(this),Xn(this)}}}catch{}};function io(h){if(!so(h))return h.g.la();const y=Nn(h.g);if(y==="")return"";let T="";const N=y.length,X=Xi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return zn(h),Xn(h),"";h.h.i=new u.TextDecoder}for(let re=0;re<N;re++)h.h.h=!0,T+=h.h.i.decode(y[re],{stream:!(X&&re==N-1)});return y.length=0,h.h.g+=T,h.C=0,h.h.g}function so(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function ma(h,y){var T=h.C,N=y.indexOf(`
`,T);return N==-1?Kt:(T=Number(y.substring(T,N)),isNaN(T)?Pt:(N+=1,N+T>y.length?Kt:(y=y.slice(N,N+T),h.C=N+T,y)))}gn.prototype.cancel=function(){this.K=!0,zn(this)};function Si(h){h.T=Date.now()+h.H,or(h,h.H)}function or(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ct(p(h.aa,h),y)}function Ai(h){h.D&&(u.clearTimeout(h.D),h.D=null)}gn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(ne(this.i,this.B),this.M!=2&&(ni(),Ge(17)),zn(this),this.m=2,Xn(this)):or(this,this.T-h)};function Xn(h){h.j.I==0||h.K||xu(h.j,h)}function zn(h){Ai(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Kn(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Ri(h,y){try{var T=h.j;if(T.I!=0&&(T.g==h||Ci(T.h,h))){if(!h.L&&Ci(T.h,h)&&T.I==3){try{var N=T.Ba.g.parse(y)}catch{N=null}if(Array.isArray(N)&&N.length==3){var X=N;if(X[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)ho(T),pr(T);else break e;xa(T),Ge(18)}}else T.xa=X[1],0<T.xa-T.K&&X[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Ct(p(T.Va,T),6e3));ii(T.h)<=1&&T.ta&&(T.ta=void 0)}else ms(T,11)}else if((h.L||T.g==h)&&ho(T),!k(y))for(X=T.Ba.g.parse(y),y=0;y<X.length;y++){let ct=X[y];const Ot=ct[0];if(!(Ot<=T.K))if(T.K=Ot,ct=ct[1],T.I==2)if(ct[0]=="c"){T.M=ct[1],T.ba=ct[2];const ki=ct[3];ki!=null&&(T.ka=ki,T.j.info("VER="+T.ka));const gs=ct[4];gs!=null&&(T.za=gs,T.j.info("SVER="+T.za));const Wi=ct[5];Wi!=null&&typeof Wi=="number"&&Wi>0&&(N=1.5*Wi,T.O=N,T.j.info("backChannelRequestTimeoutMs_="+N)),N=T;const Ji=h.g;if(Ji){const Sa=Ji.g?Ji.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sa){var re=N.h;re.g||Sa.indexOf("spdy")==-1&&Sa.indexOf("quic")==-1&&Sa.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(pa(re,re.h),re.h=null))}if(N.G){const fo=Ji.g?Ji.g.getResponseHeader("X-HTTP-Session-Id"):null;fo&&(N.wa=fo,$e(N.J,N.G,fo))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),N=T;var _e=h;if(N.na=Ru(N,N.L?N.ba:null,N.W),_e.L){cr(N.h,_e);var qe=_e,Qt=N.O;Qt&&(qe.H=Qt),qe.D&&(Ai(qe),Si(qe)),N.g=_e}else Tu(N);T.i.length>0&&ds(T)}else ct[0]!="stop"&&ct[0]!="close"||ms(T,7);else T.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?ms(T,7):Il(T):ct[0]!="noop"&&T.l&&T.l.qa(ct),T.A=0)}}ni(4)}catch{}}var zt=class{constructor(h,y){this.g=h,this.map=y}};function ga(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function lr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ii(h){return h.h?1:h.g?h.g.size:0}function Ci(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function pa(h,y){h.g?h.g.add(y):h.h=y}function cr(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}ga.prototype.cancel=function(){if(this.i=ya(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ya(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.G);return y}return I(h.i)}var sn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Y(h,y){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const N=h[T].indexOf("=");let X,re=null;N>=0?(X=h[T].substring(0,N),re=h[T].substring(N+1)):X=h[T],y(X,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function ie(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof ie?(this.l=h.l,we(this,h.j),this.o=h.o,this.g=h.g,Ne(this,h.u),this.h=h.h,et(this,bu(h.i)),this.m=h.m):h&&(y=String(h).match(sn))?(this.l=!1,we(this,y[1]||"",!0),this.o=cs(y[2]||""),this.g=cs(y[3]||"",!0),Ne(this,y[4]),this.h=cs(y[5]||"",!0),et(this,y[6]||"",!0),this.m=cs(y[7]||"")):(this.l=!1,this.i=new hr(null,this.l))}ie.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(va(y,ro,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(va(y,ro,!0),"@"),h.push(it(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(va(T,T.charAt(0)=="/"?xl:yu,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",va(T,vu)),h.join("")},ie.prototype.resolve=function(h){const y=ee(this);let T=!!h.j;T?we(y,h.j):T=!!h.o,T?y.o=h.o:T=!!h.g,T?y.g=h.g:T=h.u!=null;var N=h.h;if(T)Ne(y,h.u);else if(T=!!h.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var X=y.h.lastIndexOf("/");X!=-1&&(N=y.h.slice(0,X+1)+N)}if(X=N,X==".."||X==".")N="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){N=X.lastIndexOf("/",0)==0,X=X.split("/");const re=[];for(let _e=0;_e<X.length;){const qe=X[_e++];qe=="."?N&&_e==X.length&&re.push(""):qe==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),N&&_e==X.length&&re.push("")):(re.push(qe),N=!0)}N=re.join("/")}else N=X}return T?y.h=N:T=h.i.toString()!=="",T?et(y,bu(h.i)):T=!!h.m,T&&(y.m=h.m),y};function ee(h){return new ie(h)}function we(h,y,T){h.j=T?cs(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ne(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function et(h,y,T){y instanceof hr?(h.i=y,oo(h.i,h.l)):(T||(y=va(y,ur)),h.i=new hr(y,h.l))}function $e(h,y,T){h.i.set(y,T)}function Ni(h){return $e(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function cs(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function va(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,si),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function si(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ro=/[#\/\?@]/g,yu=/[#\?:]/g,xl=/[#\?]/g,ur=/[#\?@]/g,vu=/#/g;function hr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function ri(h){h.g||(h.g=new Map,h.h=0,h.i&&Y(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}i=hr.prototype,i.add=function(h,y){ri(this),this.i=null,h=fr(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function _u(h,y){ri(h),y=fr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Sl(h,y){return ri(h),y=fr(h,y),h.g.has(y)}i.forEach=function(h,y){ri(this),this.g.forEach(function(T,N){T.forEach(function(X){h.call(y,X,N,this)},this)},this)};function Al(h,y){ri(h);let T=[];if(typeof y=="string")Sl(h,y)&&(T=T.concat(h.g.get(fr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)T=T.concat(h[y]);return T}i.set=function(h,y){return ri(this),this.i=null,h=fr(this,h),Sl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=Al(this,h),h.length>0?String(h[0]):y):y};function ao(h,y,T){_u(h,y),T.length>0&&(h.i=null,h.g.set(fr(h,y),I(T)),h.h+=T.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let N=0;N<y.length;N++){var T=y[N];const X=it(T);T=Al(this,T);for(let re=0;re<T.length;re++){let _e=X;T[re]!==""&&(_e+="="+it(T[re])),h.push(_e)}}return this.i=h.join("&")};function bu(h){const y=new hr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function fr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function oo(h,y){y&&!h.j&&(ri(h),h.i=null,h.g.forEach(function(T,N){const X=N.toLowerCase();N!=X&&(_u(this,N),ao(this,X,T))},h)),h.j=y}function Qi(h,y){const T=new Ut;if(u.Image){const N=new Image;N.onload=v(Ii,T,"TestLoadImage: loaded",!0,y,N),N.onerror=v(Ii,T,"TestLoadImage: error",!1,y,N),N.onabort=v(Ii,T,"TestLoadImage: abort",!1,y,N),N.ontimeout=v(Ii,T,"TestLoadImage: timeout",!1,y,N),u.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else y(!1)}function Rl(h,y){const T=new Ut,N=new AbortController,X=setTimeout(()=>{N.abort(),Ii(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:N.signal}).then(re=>{clearTimeout(X),re.ok?Ii(T,"TestPingServer: ok",!0,y):Ii(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(X),Ii(T,"TestPingServer: error",!1,y)})}function Ii(h,y,T,N,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),N(T)}catch{}}function dr(){this.g=new Cs}function us(h){this.i=h.Sb||null,this.h=h.ab||!1}E(us,Qn),us.prototype.g=function(){return new _a(this.i,this.h)};function _a(h,y){St.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(_a,St),i=_a.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Yi(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||u).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,mr(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Yi(this)),this.g&&(this.readyState=3,Yi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;lo(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function lo(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?mr(this):Yi(this),this.readyState==3&&lo(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,mr(this))},i.Na=function(h){this.g&&(this.response=h,mr(this))},i.ga=function(){this.g&&mr(this)};function mr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Yi(h)}i.setRequestHeader=function(h,y){this.A.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function Yi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(_a.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Di(h){let y="";return pe(h,function(T,N){y+=N,y+=":",y+=T,y+=`\r
`}),y}function ba(h,y,T){e:{for(N in T){var N=!1;break e}N=!0}N||(T=Di(T),typeof h=="string"?T!=null&&it(T):$e(h,y,T))}function vt(h){St.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(vt,St);var hs=/^https?$/i,Cl=["POST","PUT"];i=vt.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,y,T,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ve.g(),this.g.onreadystatechange=w(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(re){Ea(this,re);return}if(h=T||"",T=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var X in N)T.set(X,N[X]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const re of N.keys())T.set(re,N.get(re));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(T.keys()).find(re=>re.toLowerCase()=="content-type"),X=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(Cl,y,void 0)>=0)||N||X||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,_e]of T)this.g.setRequestHeader(re,_e);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(re){Ea(this,re)}};function Ea(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Nl(h),Ds(h)}function Nl(h){h.A||(h.A=!0,ft(h,"complete"),ft(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,ft(this,"complete"),ft(this,"abort"),Ds(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ds(this,!0)),vt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Ta(this):this.Xa())},i.Xa=function(){Ta(this)};function Ta(h){if(h.h&&typeof c<"u"){if(h.v&&Xi(h)==4)setTimeout(h.Ca.bind(h),0);else if(ft(h,"readystatechange"),Xi(h)==4){h.h=!1;try{const re=h.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var N;if(N=re===0){let _e=String(h.D).match(sn)[1]||null;!_e&&u.self&&u.self.location&&(_e=u.self.location.protocol.slice(0,-1)),N=!hs.test(_e?_e.toLowerCase():"")}T=N}if(T)ft(h,"complete"),ft(h,"success");else{h.o=6;try{var X=Xi(h)>2?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.ca()+"]",Nl(h)}}finally{Ds(h)}}}}function Ds(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,y||ft(h,"ready");try{T.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Xi(h){return h.g?h.g.readyState:0}i.ca=function(){try{return Xi(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Gi(y)}};function Nn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ks(h){const y={};h=(h.g&&Xi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(k(h[N]))continue;var T=kt(h[N]);const X=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const re=y[X]||[];y[X]=re,re.push(T)}ye(y,function(N){return N.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fs(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function gr(h){this.za=0,this.i=[],this.j=new Ut,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fs("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fs("baseRetryDelayMs",5e3,h),this.Za=fs("retryDelaySeedMs",1e4,h),this.Ta=fs("forwardChannelMaxRetries",2,h),this.va=fs("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ga(h&&h.concurrentRequestLimit),this.Ba=new dr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=gr.prototype,i.ka=8,i.I=1,i.connect=function(h,y,T,N){Ge(0),this.W=h,this.H=y||{},T&&N!==void 0&&(this.H.OSID=T,this.H.OAID=N),this.F=this.X,this.J=Ru(this,null,this.W),ds(this)};function Il(h){if(co(h),h.I==3){var y=h.V++,T=ee(h.J);if($e(T,"SID",h.M),$e(T,"RID",y),$e(T,"TYPE","terminate"),wa(h,T),y=new gn(h,h.j,y),y.M=2,y.A=Ni(ee(T)),T=!1,u.navigator&&u.navigator.sendBeacon)try{T=u.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&u.Image&&(new Image().src=y.A,T=!0),T||(y.g=Cu(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Si(y)}Au(h)}function pr(h){h.g&&(kl(h),h.g.cancel(),h.g=null)}function co(h){pr(h),h.v&&(u.clearTimeout(h.v),h.v=null),ho(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function ds(h){if(!lr(h.h)&&!h.m){h.m=!0;var y=h.Ea;G||x(),U||(G(),U=!0),S.add(y,h),h.D=0}}function uo(h,y){return ii(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ct(p(h.Ea,h,y),Su(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const X=new gn(this,this.j,h);let re=this.o;if(this.U&&(re?(re=V(re),ue(re,this.U)):re=this.U),this.u!==null||this.R||(X.J=re,re=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var N=this.i[T];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(y+=N,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=Eu(this,X,y),T=ee(this.J),$e(T,"RID",h),$e(T,"CVER",22),this.G&&$e(T,"X-HTTP-Session-Id",this.G),wa(this,T),re&&(this.R?y="headers="+it(Di(re))+"&"+y:this.u&&ba(T,this.u,re)),pa(this.h,X),this.Ra&&$e(T,"TYPE","init"),this.S?($e(T,"$req",y),$e(T,"SID","null"),X.U=!0,Se(X,T,null)):Se(X,T,y),this.I=2}}else this.I==3&&(h?Dl(this,h):this.i.length==0||lr(this.h)||Dl(this))};function Dl(h,y){var T;y?T=y.l:T=h.V++;const N=ee(h.J);$e(N,"SID",h.M),$e(N,"RID",T),$e(N,"AID",h.K),wa(h,N),h.u&&h.o&&ba(N,h.u,h.o),T=new gn(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Eu(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),pa(h.h,T),Se(T,N,y)}function wa(h,y){h.H&&pe(h.H,function(T,N){$e(y,N,T)}),h.l&&pe({},function(T,N){$e(y,N,T)})}function Eu(h,y,T){T=Math.min(h.i.length,T);const N=h.l?p(h.l.Ka,h.l,h):null;e:{var X=h.i;let qe=-1;for(;;){const Qt=["count="+T];qe==-1?T>0?(qe=X[0].g,Qt.push("ofs="+qe)):qe=0:Qt.push("ofs="+qe);let ct=!0;for(let Ot=0;Ot<T;Ot++){var re=X[Ot].g;const ki=X[Ot].map;if(re-=qe,re<0)qe=Math.max(0,X[Ot].g-100),ct=!1;else try{re="req"+re+"_"||"";try{var _e=ki instanceof Map?ki:Object.entries(ki);for(const[gs,Wi]of _e){let Ji=Wi;d(Wi)&&(Ji=Cn(Wi)),Qt.push(re+gs+"="+encodeURIComponent(Ji))}}catch(gs){throw Qt.push(re+"type="+encodeURIComponent("_badmap")),gs}}catch{N&&N(ki)}}if(ct){_e=Qt.join("&");break e}}_e=void 0}return h=h.i.splice(0,T),y.G=h,_e}function Tu(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;G||x(),U||(G(),U=!0),S.add(y,h),h.A=0}}function xa(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ct(p(h.Da,h),Su(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,wu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ct(p(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ge(10),pr(this),wu(this))};function kl(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function wu(h){h.g=new gn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=ee(h.na);$e(y,"RID","rpc"),$e(y,"SID",h.M),$e(y,"AID",h.K),$e(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&$e(y,"TO",h.ia),$e(y,"TYPE","xmlhttp"),wa(h,y),h.u&&h.o&&ba(y,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=Ni(ee(y)),T.u=null,T.R=!0,ar(T,h)}i.Va=function(){this.C!=null&&(this.C=null,pr(this),xa(this),Ge(19))};function ho(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function xu(h,y){var T=null;if(h.g==y){ho(h),kl(h),h.g=null;var N=2}else if(Ci(h.h,y))T=y.G,cr(h.h,y),N=1;else return;if(h.I!=0){if(y.o)if(N==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var X=h.D;N=$i(),ft(N,new Rt(N,T)),ds(h)}else Tu(h);else if(X=y.m,X==3||X==0&&y.X>0||!(N==1&&uo(h,y)||N==2&&xa(h)))switch(T&&T.length>0&&(y=h.h,y.i=y.i.concat(T)),X){case 1:ms(h,5);break;case 4:ms(h,10);break;case 3:ms(h,6);break;default:ms(h,2)}}}function Su(h,y){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*y}function ms(h,y){if(h.j.info("Error code "+y),y==2){var T=p(h.bb,h),N=h.Ua;const X=!N;N=new ie(N||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||we(N,"https"),Ni(N),X?Qi(N.toString(),T):Rl(N.toString(),T)}else Ge(2);h.I=0,h.l&&h.l.pa(y),Au(h),co(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ge(2)):(this.j.info("Failed to ping google.com"),Ge(1))};function Au(h){if(h.I=0,h.ja=[],h.l){const y=ya(h.h);(y.length!=0||h.i.length!=0)&&(P(h.ja,y),P(h.ja,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.oa()}}function Ru(h,y,T){var N=T instanceof ie?ee(T):new ie(T);if(N.g!="")y&&(N.g=y+"."+N.g),Ne(N,N.u);else{var X=u.location;N=X.protocol,y=y?y+"."+X.hostname:X.hostname,X=+X.port;const re=new ie(null);N&&we(re,N),y&&(re.g=y),X&&Ne(re,X),T&&(re.h=T),N=re}return T=h.G,y=h.wa,T&&y&&$e(N,T,y),$e(N,"VER",h.ka),wa(h,N),N}function Cu(h,y,T){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new vt(new us({ab:T})):new vt(h.ma),y.Fa(h.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nu(){}i=Nu.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function yr(){}yr.prototype.g=function(h,y){return new Wn(h,y)};function Wn(h,y){St.call(this),this.g=new gr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!k(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!k(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Os(this)}E(Wn,St),Wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Wn.prototype.close=function(){Il(this.g)},Wn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=Cn(h),h=T);y.i.push(new zt(y.Ya++,h)),y.I==3&&ds(y)},Wn.prototype.N=function(){this.g.l=null,delete this.j,Il(this.g),delete this.g,Wn.Z.N.call(this)};function Iu(h){Gt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(Iu,Gt);function Du(){bn.call(this),this.status=1}E(Du,bn);function Os(h){this.g=h}E(Os,Nu),Os.prototype.ra=function(){ft(this.g,"a")},Os.prototype.qa=function(h){ft(this.g,new Iu(h))},Os.prototype.pa=function(h){ft(this.g,new Du)},Os.prototype.oa=function(){ft(this.g,"b")},yr.prototype.createWebChannel=yr.prototype.g,Wn.prototype.send=Wn.prototype.o,Wn.prototype.open=Wn.prototype.m,Wn.prototype.close=Wn.prototype.close,IE=function(){return new yr},NE=function(){return $i()},CE=At,Bg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},pt.NO_ERROR=0,pt.TIMEOUT=8,pt.HTTP_ERROR=6,Gh=pt,$t.COMPLETE="complete",RE=$t,Ns.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",St.prototype.listen=St.prototype.J,vc=Ns,vt.prototype.listenOnce=vt.prototype.K,vt.prototype.getLastError=vt.prototype.Ha,vt.prototype.getLastErrorCode=vt.prototype.ya,vt.prototype.getStatus=vt.prototype.ca,vt.prototype.getResponseJson=vt.prototype.La,vt.prototype.getResponseText=vt.prototype.la,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Fa,AE=vt}).apply(typeof Vh<"u"?Vh:typeof self<"u"?self:typeof window<"u"?window:{});const pb="@firebase/firestore",yb="4.9.3";class Fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fn.UNAUTHENTICATED=new Fn(null),Fn.GOOGLE_CREDENTIALS=new Fn("google-credentials-uid"),Fn.FIRST_PARTY=new Fn("first-party-uid"),Fn.MOCK_USER=new Fn("mock-user");let gl="12.7.0";const Xa=new _p("@firebase/firestore");function Ho(){return Xa.logLevel}function xe(i,...e){if(Xa.logLevel<=We.DEBUG){const t=e.map(Tp);Xa.debug(`Firestore (${gl}): ${i}`,...t)}}function Zs(i,...e){if(Xa.logLevel<=We.ERROR){const t=e.map(Tp);Xa.error(`Firestore (${gl}): ${i}`,...t)}}function sl(i,...e){if(Xa.logLevel<=We.WARN){const t=e.map(Tp);Xa.warn(`Firestore (${gl}): ${i}`,...t)}}function Tp(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}function ke(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,DE(i,r,t)}function DE(i,e,t){let r=`FIRESTORE (${gl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Zs(r),new Error(r)}function at(i,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,i||DE(e,o,r)}function ze(i,e){return i}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends sr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ea{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class kE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Fn.UNAUTHENTICATED)))}shutdown(){}}class hR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class fR{constructor(e){this.t=e,this.currentUser=Fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){at(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let c=new ea;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ea,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},d=g=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ea)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(at(typeof r.accessToken=="string",31837,{l:r}),new kE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string",2055,{h:e}),new Fn(e)}}class dR{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class mR{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new dR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ns(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){at(this.o===void 0,3512);const r=c=>{c.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,xe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const o=c=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new vb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(at(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function pR(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}class wp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=pR(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<t&&(r+=e.charAt(o[c]%62))}return r}}function Je(i,e){return i<e?-1:i>e?1:0}function qg(i,e){const t=Math.min(i.length,e.length);for(let r=0;r<t;r++){const o=i.charAt(r),c=e.charAt(r);if(o!==c)return pg(o)===pg(c)?Je(o,c):pg(o)?1:-1}return Je(i.length,e.length)}const yR=55296,vR=57343;function pg(i){const e=i.charCodeAt(0);return e>=yR&&e<=vR}function rl(i,e,t){return i.length===e.length&&i.every(((r,o)=>t(r,e[o])))}const _b="__name__";class bs{constructor(e,t,r){t===void 0?t=0:t>e.length&&ke(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ke(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return bs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bs?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const c=bs.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return Je(e.length,t.length)}static compareSegments(e,t){const r=bs.isNumericId(e),o=bs.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?bs.extractNumericId(e).compare(bs.extractNumericId(t)):qg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zr.fromString(e.substring(4,e.length-2))}}class Tt extends bs{construct(e,t,r){return new Tt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new Tt(t)}static emptyPath(){return new Tt([])}}const _R=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pn extends bs{construct(e,t,r){return new Pn(e,t,r)}static isValidIdentifier(e){return _R.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_b}static keyField(){return new Pn([_b])}static fromServerFormat(e){const t=[];let r="",o=0;const c=()=>{if(r.length===0)throw new Te(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new Te(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Te(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(r+=d,o++):(c(),o++)}if(c(),u)throw new Te(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pn(t)}static emptyPath(){return new Pn([])}}class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(Tt.fromString(e))}static fromName(e){return new Ie(Tt.fromString(e).popFirst(5))}static empty(){return new Ie(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new Tt(e.slice()))}}function OE(i,e,t){if(!t)throw new Te(he.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function bR(i,e,t,r){if(e===!0&&r===!0)throw new Te(he.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function bb(i){if(!Ie.isDocumentKey(i))throw new Te(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Eb(i){if(Ie.isDocumentKey(i))throw new Te(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ME(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function jf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ke(12329,{type:typeof i})}function Ws(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Te(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jf(i);throw new Te(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function fn(i,e){const t={typeString:i};return e&&(t.value=e),t}function Zc(i,e){if(!ME(i))throw new Te(he.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const u=i[r];if(o&&typeof u!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&u!==c.value){t=`Expected '${r}' field to equal '${c.value}'`;break}}if(t)throw new Te(he.INVALID_ARGUMENT,t);return!0}const Tb=-62135596800,wb=1e6;class Dt{static now(){return Dt.fromMillis(Date.now())}static fromDate(e){return Dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*wb);return new Dt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Tb)throw new Te(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wb}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zc(e,Dt._jsonSchema))return new Dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Tb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Dt._jsonSchemaVersion="firestore/timestamp/1.0",Dt._jsonSchema={type:fn("string",Dt._jsonSchemaVersion),seconds:fn("number"),nanoseconds:fn("number")};class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new Dt(0,0))}static max(){return new Pe(new Dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const zc=-1;function ER(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Pe.fromTimestamp(r===1e9?new Dt(t+1,0):new Dt(t,r));return new ra(o,Ie.empty(),e)}function TR(i){return new ra(i.readTime,i.key,zc)}class ra{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ra(Pe.min(),Ie.empty(),zc)}static max(){return new ra(Pe.max(),Ie.empty(),zc)}}function wR(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=Ie.comparator(i.documentKey,e.documentKey),t!==0?t:Je(i.largestBatchId,e.largestBatchId))}const xR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function pl(i){if(i.code!==he.FAILED_PRECONDITION||i.message!==xR)throw i;xe("LocalStore","Unexpectedly lost primary lease")}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de(((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):de.reject(t)}static resolve(e){return new de(((t,r)=>{t(e)}))}static reject(e){return new de(((t,r)=>{r(e)}))}static waitFor(e){return new de(((t,r)=>{let o=0,c=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++c,u&&c===o&&t()}),(g=>r(g)))})),u=!0,c===o&&t()}))}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next((o=>o?de.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,c)=>{r.push(t.call(this,o,c))})),this.waitFor(r)}static mapArray(e,t){return new de(((r,o)=>{const c=e.length,u=new Array(c);let d=0;for(let g=0;g<c;g++){const p=g;t(e[p]).next((v=>{u[p]=v,++d,d===c&&r(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new de(((r,o)=>{const c=()=>{e()===!0?t().next((()=>{c()}),o):r()};c()}))}}function AR(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function yl(i){return i.name==="IndexedDbTransactionError"}class Lf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Lf.ce=-1;const xp=-1;function eu(i){return i==null}function cf(i){return i===0&&1/i==-1/0}function RR(i){return typeof i=="number"&&Number.isInteger(i)&&!cf(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const VE="";function CR(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=xb(e)),e=NR(i.get(t),e);return xb(e)}function NR(i,e){let t=e;const r=i.length;for(let o=0;o<r;o++){const c=i.charAt(o);switch(c){case"\0":t+="";break;case VE:t+="";break;default:t+=c}}return t}function xb(i){return i+VE+""}function Sb(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function fa(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function PE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Lt{constructor(e,t){this.comparator=e,this.root=t||Vn.EMPTY}insert(e,t){return new Lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ph(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ph(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ph(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ph(this.root,e,this.comparator,!0)}}class Ph{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vn{constructor(e,t,r,o,c){this.key=e,this.value=t,this.color=r??Vn.RED,this.left=o??Vn.EMPTY,this.right=c??Vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,c){return new Vn(e??this.key,t??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,r),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Vn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}Vn.EMPTY=null,Vn.RED=!0,Vn.BLACK=!1;Vn.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,t,r,o,c){return this}insert(e,t,r){return new Vn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _n{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ab(this.data.getIterator())}getIteratorFrom(e){return new Ab(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new _n(this.comparator);return t.data=e,t}}class Ab{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ti{constructor(e){this.fields=e,e.sort(Pn.comparator)}static empty(){return new Ti([])}unionWith(e){let t=new _n(Pn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ti(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class jE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class jn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new jE("Invalid base64 string: "+c):c}})(e);return new jn(t)}static fromUint8Array(e){const t=(function(o){let c="";for(let u=0;u<o.length;++u)c+=String.fromCharCode(o[u]);return c})(e);return new jn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jn.EMPTY_BYTE_STRING=new jn("");const IR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function aa(i){if(at(!!i,39018),typeof i=="string"){let e=0;const t=IR.exec(i);if(at(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Wt(i.seconds),nanos:Wt(i.nanos)}}function Wt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function oa(i){return typeof i=="string"?jn.fromBase64String(i):jn.fromUint8Array(i)}const LE="server_timestamp",UE="__type__",zE="__previous_value__",BE="__local_write_time__";function Sp(i){return(i?.mapValue?.fields||{})[UE]?.stringValue===LE}function Uf(i){const e=i.mapValue.fields[zE];return Sp(e)?Uf(e):e}function Bc(i){const e=aa(i.mapValue.fields[BE].timestampValue);return new Dt(e.seconds,e.nanos)}class DR{constructor(e,t,r,o,c,u,d,g,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=v}}const uf="(default)";class qc{constructor(e,t){this.projectId=e,this.database=t||uf}static empty(){return new qc("","")}get isDefaultDatabase(){return this.database===uf}isEqual(e){return e instanceof qc&&e.projectId===this.projectId&&e.database===this.database}}const qE="__type__",kR="__max__",jh={mapValue:{}},HE="__vector__",hf="value";function la(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Sp(i)?4:MR(i)?9007199254740991:OR(i)?10:11:ke(28295,{value:i})}function As(i,e){if(i===e)return!0;const t=la(i);if(t!==la(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Bc(i).isEqual(Bc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const u=aa(o.timestampValue),d=aa(c.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return oa(o.bytesValue).isEqual(oa(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return Wt(o.geoPointValue.latitude)===Wt(c.geoPointValue.latitude)&&Wt(o.geoPointValue.longitude)===Wt(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Wt(o.integerValue)===Wt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const u=Wt(o.doubleValue),d=Wt(c.doubleValue);return u===d?cf(u)===cf(d):isNaN(u)&&isNaN(d)}return!1})(i,e);case 9:return rl(i.arrayValue.values||[],e.arrayValue.values||[],As);case 10:case 11:return(function(o,c){const u=o.mapValue.fields||{},d=c.mapValue.fields||{};if(Sb(u)!==Sb(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(d[g]===void 0||!As(u[g],d[g])))return!1;return!0})(i,e);default:return ke(52216,{left:i})}}function Hc(i,e){return(i.values||[]).find((t=>As(t,e)))!==void 0}function al(i,e){if(i===e)return 0;const t=la(i),r=la(e);if(t!==r)return Je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(i.booleanValue,e.booleanValue);case 2:return(function(c,u){const d=Wt(c.integerValue||c.doubleValue),g=Wt(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(i,e);case 3:return Rb(i.timestampValue,e.timestampValue);case 4:return Rb(Bc(i),Bc(e));case 5:return qg(i.stringValue,e.stringValue);case 6:return(function(c,u){const d=oa(c),g=oa(u);return d.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(c,u){const d=c.split("/"),g=u.split("/");for(let p=0;p<d.length&&p<g.length;p++){const v=Je(d[p],g[p]);if(v!==0)return v}return Je(d.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,u){const d=Je(Wt(c.latitude),Wt(u.latitude));return d!==0?d:Je(Wt(c.longitude),Wt(u.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Cb(i.arrayValue,e.arrayValue);case 10:return(function(c,u){const d=c.fields||{},g=u.fields||{},p=d[hf]?.arrayValue,v=g[hf]?.arrayValue,E=Je(p?.values?.length||0,v?.values?.length||0);return E!==0?E:Cb(p,v)})(i.mapValue,e.mapValue);case 11:return(function(c,u){if(c===jh.mapValue&&u===jh.mapValue)return 0;if(c===jh.mapValue)return 1;if(u===jh.mapValue)return-1;const d=c.fields||{},g=Object.keys(d),p=u.fields||{},v=Object.keys(p);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const w=qg(g[E],v[E]);if(w!==0)return w;const I=al(d[g[E]],p[v[E]]);if(I!==0)return I}return Je(g.length,v.length)})(i.mapValue,e.mapValue);default:throw ke(23264,{he:t})}}function Rb(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Je(i,e);const t=aa(i),r=aa(e),o=Je(t.seconds,r.seconds);return o!==0?o:Je(t.nanos,r.nanos)}function Cb(i,e){const t=i.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const c=al(t[o],r[o]);if(c)return c}return Je(t.length,r.length)}function ol(i){return Hg(i)}function Hg(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=aa(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return oa(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return Ie.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",o=!0;for(const c of t.values||[])o?o=!1:r+=",",r+=Hg(c);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const u of r)c?c=!1:o+=",",o+=`${u}:${Hg(t.fields[u])}`;return o+"}"})(i.mapValue):ke(61005,{value:i})}function $h(i){switch(la(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uf(i);return e?16+$h(e):16;case 5:return 2*i.stringValue.length;case 6:return oa(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,c)=>o+$h(c)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return fa(r.fields,((c,u)=>{o+=c.length+$h(u)})),o})(i.mapValue);default:throw ke(13486,{value:i})}}function Nb(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Fg(i){return!!i&&"integerValue"in i}function Ap(i){return!!i&&"arrayValue"in i}function Ib(i){return!!i&&"nullValue"in i}function Db(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Kh(i){return!!i&&"mapValue"in i}function OR(i){return(i?.mapValue?.fields||{})[qE]?.stringValue===HE}function Rc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return fa(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Rc(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rc(i.arrayValue.values[t]);return e}return{...i}}function MR(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===kR}class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Kh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rc(t)}setAll(e){let t=Pn.emptyPath(),r={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,r,o),r={},o=[],t=d.popLast()}u?r[d.lastSegment()]=Rc(u):o.push(d.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,r,o)}delete(e){const t=this.field(e.popLast());Kh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return As(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Kh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){fa(t,((o,c)=>e[o]=c));for(const o of r)delete e[o]}clone(){return new Zn(Rc(this.value))}}function FE(i){const e=[];return fa(i.fields,((t,r)=>{const o=new Pn([t]);if(Kh(r)){const c=FE(r.mapValue).fields;if(c.length===0)e.push(o);else for(const u of c)e.push(o.child(u))}else e.push(o)})),new Ti(e)}class An{constructor(e,t,r,o,c,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=c,this.data=u,this.documentState=d}static newInvalidDocument(e){return new An(e,0,Pe.min(),Pe.min(),Pe.min(),Zn.empty(),0)}static newFoundDocument(e,t,r,o){return new An(e,1,t,Pe.min(),r,o,0)}static newNoDocument(e,t){return new An(e,2,t,Pe.min(),Pe.min(),Zn.empty(),0)}static newUnknownDocument(e,t){return new An(e,3,t,Pe.min(),Pe.min(),Zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ff{constructor(e,t){this.position=e,this.inclusive=t}}function kb(i,e,t){let r=0;for(let o=0;o<i.position.length;o++){const c=e[o],u=i.position[o];if(c.field.isKeyField()?r=Ie.comparator(Ie.fromName(u.referenceValue),t.key):r=al(u,t.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ob(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!As(i.position[t],e.position[t]))return!1;return!0}class df{constructor(e,t="asc"){this.field=e,this.dir=t}}function VR(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class GE{}class hn extends GE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new jR(e,t,r):t==="array-contains"?new zR(e,r):t==="in"?new BR(e,r):t==="not-in"?new qR(e,r):t==="array-contains-any"?new HR(e,r):new hn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new LR(e,r):new UR(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(al(t,this.value)):t!==null&&la(this.value)===la(t)&&this.matchesComparison(al(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ss extends GE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ss(e,t)}matches(e){return $E(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $E(i){return i.op==="and"}function KE(i){return PR(i)&&$E(i)}function PR(i){for(const e of i.filters)if(e instanceof ss)return!1;return!0}function Gg(i){if(i instanceof hn)return i.field.canonicalString()+i.op.toString()+ol(i.value);if(KE(i))return i.filters.map((e=>Gg(e))).join(",");{const e=i.filters.map((t=>Gg(t))).join(",");return`${i.op}(${e})`}}function QE(i,e){return i instanceof hn?(function(r,o){return o instanceof hn&&r.op===o.op&&r.field.isEqual(o.field)&&As(r.value,o.value)})(i,e):i instanceof ss?(function(r,o){return o instanceof ss&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((c,u,d)=>c&&QE(u,o.filters[d])),!0):!1})(i,e):void ke(19439)}function YE(i){return i instanceof hn?(function(t){return`${t.field.canonicalString()} ${t.op} ${ol(t.value)}`})(i):i instanceof ss?(function(t){return t.op.toString()+" {"+t.getFilters().map(YE).join(" ,")+"}"})(i):"Filter"}class jR extends hn{constructor(e,t,r){super(e,t,r),this.key=Ie.fromName(r.referenceValue)}matches(e){const t=Ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class LR extends hn{constructor(e,t){super(e,"in",t),this.keys=XE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class UR extends hn{constructor(e,t){super(e,"not-in",t),this.keys=XE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function XE(i,e){return(e.arrayValue?.values||[]).map((t=>Ie.fromName(t.referenceValue)))}class zR extends hn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ap(t)&&Hc(t.arrayValue,this.value)}}class BR extends hn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Hc(this.value.arrayValue,t)}}class qR extends hn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Hc(this.value.arrayValue,t)}}class HR extends hn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ap(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Hc(this.value.arrayValue,r)))}}class FR{constructor(e,t=null,r=[],o=[],c=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=u,this.endAt=d,this.Te=null}}function Mb(i,e=null,t=[],r=[],o=null,c=null,u=null){return new FR(i,e,t,r,o,c,u)}function Rp(i){const e=ze(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Gg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),eu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>ol(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>ol(r))).join(",")),e.Te=t}return e.Te}function Cp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!VR(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!QE(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Ob(i.startAt,e.startAt)&&Ob(i.endAt,e.endAt)}function $g(i){return Ie.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class tu{constructor(e,t=null,r=[],o=[],c=null,u="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=u,this.startAt=d,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function GR(i,e,t,r,o,c,u,d){return new tu(i,e,t,r,o,c,u,d)}function Np(i){return new tu(i)}function Vb(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function WE(i){return i.collectionGroup!==null}function Cc(i){const e=ze(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new _n(Pn.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new df(c,r))})),t.has(Pn.keyField().canonicalString())||e.Ie.push(new df(Pn.keyField(),r))}return e.Ie}function Es(i){const e=ze(i);return e.Ee||(e.Ee=$R(e,Cc(i))),e.Ee}function $R(i,e){if(i.limitType==="F")return Mb(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new df(o.field,c)}));const t=i.endAt?new ff(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new ff(i.startAt.position,i.startAt.inclusive):null;return Mb(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function Kg(i,e){const t=i.filters.concat([e]);return new tu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Qg(i,e,t){return new tu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function zf(i,e){return Cp(Es(i),Es(e))&&i.limitType===e.limitType}function JE(i){return`${Rp(Es(i))}|lt:${i.limitType}`}function Fo(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>YE(o))).join(", ")}]`),eu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>ol(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>ol(o))).join(",")),`Target(${r})`})(Es(i))}; limitType=${i.limitType})`}function Bf(i,e){return e.isFoundDocument()&&(function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Ie.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(i,e)&&(function(r,o){for(const c of Cc(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(u,d,g){const p=kb(u,d,g);return u.inclusive?p<=0:p<0})(r.startAt,Cc(r),o)||r.endAt&&!(function(u,d,g){const p=kb(u,d,g);return u.inclusive?p>=0:p>0})(r.endAt,Cc(r),o))})(i,e)}function KR(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function ZE(i){return(e,t)=>{let r=!1;for(const o of Cc(i)){const c=QR(o,e,t);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function QR(i,e,t){const r=i.field.isKeyField()?Ie.comparator(e.key,t.key):(function(c,u,d){const g=u.data.field(c),p=d.data.field(c);return g!==null&&p!==null?al(g,p):ke(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return ke(19790,{direction:i.dir})}}class to{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){fa(this.inner,((t,r)=>{for(const[o,c]of r)e(o,c)}))}isEmpty(){return PE(this.inner)}size(){return this.innerSize}}const YR=new Lt(Ie.comparator);function er(){return YR}const eT=new Lt(Ie.comparator);function _c(...i){let e=eT;for(const t of i)e=e.insert(t.key,t);return e}function tT(i){let e=eT;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ga(){return Nc()}function nT(){return Nc()}function Nc(){return new to((i=>i.toString()),((i,e)=>i.isEqual(e)))}const XR=new Lt(Ie.comparator),WR=new _n(Ie.comparator);function Ze(...i){let e=WR;for(const t of i)e=e.add(t);return e}const JR=new _n(Je);function ZR(){return JR}function Ip(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cf(e)?"-0":e}}function iT(i){return{integerValue:""+i}}function eC(i,e){return RR(e)?iT(e):Ip(i,e)}class qf{constructor(){this._=void 0}}function tC(i,e,t){return i instanceof mf?(function(o,c){const u={fields:{[UE]:{stringValue:LE},[BE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Sp(c)&&(c=Uf(c)),c&&(u.fields[zE]=c),{mapValue:u}})(t,e):i instanceof Fc?rT(i,e):i instanceof Gc?aT(i,e):(function(o,c){const u=sT(o,c),d=Pb(u)+Pb(o.Ae);return Fg(u)&&Fg(o.Ae)?iT(d):Ip(o.serializer,d)})(i,e)}function nC(i,e,t){return i instanceof Fc?rT(i,e):i instanceof Gc?aT(i,e):t}function sT(i,e){return i instanceof gf?(function(r){return Fg(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class mf extends qf{}class Fc extends qf{constructor(e){super(),this.elements=e}}function rT(i,e){const t=oT(e);for(const r of i.elements)t.some((o=>As(o,r)))||t.push(r);return{arrayValue:{values:t}}}class Gc extends qf{constructor(e){super(),this.elements=e}}function aT(i,e){let t=oT(e);for(const r of i.elements)t=t.filter((o=>!As(o,r)));return{arrayValue:{values:t}}}class gf extends qf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Pb(i){return Wt(i.integerValue||i.doubleValue)}function oT(i){return Ap(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function iC(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof Fc&&o instanceof Fc||r instanceof Gc&&o instanceof Gc?rl(r.elements,o.elements,As):r instanceof gf&&o instanceof gf?As(r.Ae,o.Ae):r instanceof mf&&o instanceof mf})(i.transform,e.transform)}class sC{constructor(e,t){this.version=e,this.transformResults=t}}class ei{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ei}static exists(e){return new ei(void 0,e)}static updateTime(e){return new ei(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Hf{}function lT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Dp(i.key,ei.none()):new nu(i.key,i.data,ei.none());{const t=i.data,r=Zn.empty();let o=new _n(Pn.comparator);for(let c of e.fields)if(!o.has(c)){let u=t.field(c);u===null&&c.length>1&&(c=c.popLast(),u=t.field(c)),u===null?r.delete(c):r.set(c,u),o=o.add(c)}return new da(i.key,r,new Ti(o.toArray()),ei.none())}}function rC(i,e,t){i instanceof nu?(function(o,c,u){const d=o.value.clone(),g=Lb(o.fieldTransforms,c,u.transformResults);d.setAll(g),c.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(i,e,t):i instanceof da?(function(o,c,u){if(!Qh(o.precondition,c))return void c.convertToUnknownDocument(u.version);const d=Lb(o.fieldTransforms,c,u.transformResults),g=c.data;g.setAll(cT(o)),g.setAll(d),c.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(i,e,t):(function(o,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Ic(i,e,t,r){return i instanceof nu?(function(c,u,d,g){if(!Qh(c.precondition,u))return d;const p=c.value.clone(),v=Ub(c.fieldTransforms,g,u);return p.setAll(v),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(i,e,t,r):i instanceof da?(function(c,u,d,g){if(!Qh(c.precondition,u))return d;const p=Ub(c.fieldTransforms,g,u),v=u.data;return v.setAll(cT(c)),v.setAll(p),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((E=>E.field)))})(i,e,t,r):(function(c,u,d){return Qh(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(i,e,t)}function aC(i,e){let t=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),c=sT(r.transform,o||null);c!=null&&(t===null&&(t=Zn.empty()),t.set(r.field,c))}return t||null}function jb(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&rl(r,o,((c,u)=>iC(c,u)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class nu extends Hf{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class da extends Hf{constructor(e,t,r,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function cT(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function Lb(i,e,t){const r=new Map;at(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let o=0;o<t.length;o++){const c=i[o],u=c.transform,d=e.data.field(c.field);r.set(c.field,nC(u,d,t[o]))}return r}function Ub(i,e,t){const r=new Map;for(const o of i){const c=o.transform,u=t.data.field(o.field);r.set(o.field,tC(c,u,e))}return r}class Dp extends Hf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uT extends Hf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class oC{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&rC(c,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ic(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ic(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=nT();return this.mutations.forEach((o=>{const c=e.get(o.key),u=c.overlayedDocument;let d=this.applyToLocalView(u,c.mutatedFields);d=t.has(o.key)?null:d;const g=lT(u,d);g!==null&&r.set(o.key,g),u.isValidDocument()||u.convertToNoDocument(Pe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&rl(this.mutations,e.mutations,((t,r)=>jb(t,r)))&&rl(this.baseMutations,e.baseMutations,((t,r)=>jb(t,r)))}}class kp{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){at(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return XR})();const c=e.mutations;for(let u=0;u<c.length;u++)o=o.insert(c[u].key,r[u].version);return new kp(e,t,r,o)}}class lC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class cC{constructor(e,t){this.count=e,this.unchangedNames=t}}var un,st;function hT(i){switch(i){case he.OK:return ke(64938);case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0;default:return ke(15467,{code:i})}}function fT(i){if(i===void 0)return Zs("GRPC error has no .code"),he.UNKNOWN;switch(i){case un.OK:return he.OK;case un.CANCELLED:return he.CANCELLED;case un.UNKNOWN:return he.UNKNOWN;case un.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case un.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case un.INTERNAL:return he.INTERNAL;case un.UNAVAILABLE:return he.UNAVAILABLE;case un.UNAUTHENTICATED:return he.UNAUTHENTICATED;case un.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case un.NOT_FOUND:return he.NOT_FOUND;case un.ALREADY_EXISTS:return he.ALREADY_EXISTS;case un.PERMISSION_DENIED:return he.PERMISSION_DENIED;case un.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case un.ABORTED:return he.ABORTED;case un.OUT_OF_RANGE:return he.OUT_OF_RANGE;case un.UNIMPLEMENTED:return he.UNIMPLEMENTED;case un.DATA_LOSS:return he.DATA_LOSS;default:return ke(39323,{code:i})}}(st=un||(un={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";function uC(){return new TextEncoder}const hC=new Zr([4294967295,4294967295],0);function zb(i){const e=uC().encode(i),t=new SE;return t.update(e),new Uint8Array(t.digest())}function Bb(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Zr([t,r],0),new Zr([o,c],0)]}class Op{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new bc(`Invalid padding: ${t}`);if(r<0)throw new bc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new bc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Zr.fromNumber(this.ge)}ye(e,t,r){let o=e.add(t.multiply(Zr.fromNumber(r)));return o.compare(hC)===1&&(o=new Zr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=zb(e),[r,o]=Bb(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(r,o,c);if(!this.we(u))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new Op(c,o,t);return r.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=zb(e),[r,o]=Bb(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(r,o,c);this.Se(u)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class bc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ff{constructor(e,t,r,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,iu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ff(Pe.min(),o,new Lt(Je),er(),Ze())}}class iu{constructor(e,t,r,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new iu(r,t,Ze(),Ze(),Ze())}}class Yh{constructor(e,t,r,o){this.be=e,this.removedTargetIds=t,this.key=r,this.De=o}}class dT{constructor(e,t){this.targetId=e,this.Ce=t}}class mT{constructor(e,t,r=jn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class qb{constructor(){this.ve=0,this.Fe=Hb(),this.Me=jn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),t=Ze(),r=Ze();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:ke(38017,{changeType:c})}})),new iu(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Hb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,at(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class fC{constructor(e){this.Ge=e,this.ze=new Map,this.je=er(),this.Je=Lh(),this.He=Lh(),this.Ye=new Lt(Je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ke(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,r=e.Ce.count,o=this.ot(t);if(o){const c=o.target;if($g(c))if(r===0){const u=new Ie(c.path);this.et(t,u,An.newNoDocument(u,Pe.min()))}else at(r===1,20013,{expectedCount:r});else{const u=this._t(t);if(u!==r){const d=this.ut(e),g=d?this.ct(d,e,u):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=t;let u,d;try{u=oa(r).toUint8Array()}catch(g){if(g instanceof jE)return sl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new Op(u,o,c)}catch(g){return sl(g instanceof bc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let o=0;return r.forEach((c=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(d)||(this.et(t,c,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((c,u)=>{const d=this.ot(u);if(d){if(c.current&&$g(d.target)){const g=new Ie(d.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,An.newNoDocument(g,e))}c.Be&&(t.set(u,c.ke()),c.qe())}}));let r=Ze();this.He.forEach(((c,u)=>{let d=!0;u.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const o=new Ff(e,t,this.Ye,this.je,r);return this.je=er(),this.Je=Lh(),this.He=Lh(),this.Ye=new Lt(Je),o}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new qb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new _n(Je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new _n(Je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||xe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new qb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Lh(){return new Lt(Ie.comparator)}function Hb(){return new Lt(Ie.comparator)}const dC={asc:"ASCENDING",desc:"DESCENDING"},mC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gC={and:"AND",or:"OR"};class pC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yg(i,e){return i.useProto3Json||eu(e)?e:{value:e}}function pf(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function yC(i,e){return pf(i,e.toTimestamp())}function wi(i){return at(!!i,49232),Pe.fromTimestamp((function(t){const r=aa(t);return new Dt(r.seconds,r.nanos)})(i))}function Mp(i,e){return Xg(i,e).canonicalString()}function Xg(i,e){const t=(function(o){return new Tt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?t:t.child(e)}function pT(i){const e=Tt.fromString(i);return at(TT(e),10190,{key:e.toString()}),e}function yf(i,e){return Mp(i.databaseId,e.path)}function Dc(i,e){const t=pT(e);if(t.get(1)!==i.databaseId.projectId)throw new Te(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Te(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Ie(vT(t))}function yT(i,e){return Mp(i.databaseId,e)}function vC(i){const e=pT(i);return e.length===4?Tt.emptyPath():vT(e)}function Wg(i){return new Tt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function vT(i){return at(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Fb(i,e,t){return{name:yf(i,e),fields:t.value.mapValue.fields}}function _C(i,e){return"found"in e?(function(r,o){at(!!o.found,43571),o.found.name,o.found.updateTime;const c=Dc(r,o.found.name),u=wi(o.found.updateTime),d=o.found.createTime?wi(o.found.createTime):Pe.min(),g=new Zn({mapValue:{fields:o.found.fields}});return An.newFoundDocument(c,u,d,g)})(i,e):"missing"in e?(function(r,o){at(!!o.missing,3894),at(!!o.readTime,22933);const c=Dc(r,o.missing),u=wi(o.readTime);return An.newNoDocument(c,u)})(i,e):ke(7234,{result:e})}function bC(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ke(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(p,v){return p.useProto3Json?(at(v===void 0||typeof v=="string",58123),jn.fromBase64String(v||"")):(at(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),jn.fromUint8Array(v||new Uint8Array))})(i,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(p){const v=p.code===void 0?he.UNKNOWN:fT(p.code);return new Te(v,p.message||"")})(u);t=new mT(r,o,c,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Dc(i,r.document.name),c=wi(r.document.updateTime),u=r.document.createTime?wi(r.document.createTime):Pe.min(),d=new Zn({mapValue:{fields:r.document.fields}}),g=An.newFoundDocument(o,c,u,d),p=r.targetIds||[],v=r.removedTargetIds||[];t=new Yh(p,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Dc(i,r.document),c=r.readTime?wi(r.readTime):Pe.min(),u=An.newNoDocument(o,c),d=r.removedTargetIds||[];t=new Yh([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Dc(i,r.document),c=r.removedTargetIds||[];t=new Yh([],c,o,null)}else{if(!("filter"in e))return ke(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,u=new cC(o,c),d=r.targetId;t=new dT(d,u)}}return t}function _T(i,e){let t;if(e instanceof nu)t={update:Fb(i,e.key,e.value)};else if(e instanceof Dp)t={delete:yf(i,e.key)};else if(e instanceof da)t={update:Fb(i,e.key,e.data),updateMask:NC(e.fieldMask)};else{if(!(e instanceof uT))return ke(16599,{Vt:e.type});t={verify:yf(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(c,u){const d=u.transform;if(d instanceof mf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Fc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Gc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof gf)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw ke(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:yC(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:ke(27497)})(i,e.precondition)),t}function EC(i,e){return i&&i.length>0?(at(e!==void 0,14353),i.map((t=>(function(o,c){let u=o.updateTime?wi(o.updateTime):wi(c);return u.isEqual(Pe.min())&&(u=wi(c)),new sC(u,o.transformResults||[])})(t,e)))):[]}function TC(i,e){return{documents:[yT(i,e.path)]}}function wC(i,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=yT(i,o);const c=(function(p){if(p.length!==0)return ET(ss.create(p,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const u=(function(p){if(p.length!==0)return p.map((v=>(function(w){return{field:Go(w.field),direction:AC(w.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Yg(i,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function xC(i){let e=vC(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){at(r===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let c=[];t.where&&(c=(function(E){const w=bT(E);return w instanceof ss&&KE(w)?w.getFilters():[w]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((w=>(function(P){return new df($o(P.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(w)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let w;return w=typeof E=="object"?E.value:E,eu(w)?null:w})(t.limit));let g=null;t.startAt&&(g=(function(E){const w=!!E.before,I=E.values||[];return new ff(I,w)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const w=!E.before,I=E.values||[];return new ff(I,w)})(t.endAt)),GR(e,o,u,c,d,"F",g,p)}function SC(i,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function bT(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=$o(t.unaryFilter.field);return hn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=$o(t.unaryFilter.field);return hn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=$o(t.unaryFilter.field);return hn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=$o(t.unaryFilter.field);return hn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}})(i):i.fieldFilter!==void 0?(function(t){return hn.create($o(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return ss.create(t.compositeFilter.filters.map((r=>bT(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ke(1026)}})(t.compositeFilter.op))})(i):ke(30097,{filter:i})}function AC(i){return dC[i]}function RC(i){return mC[i]}function CC(i){return gC[i]}function Go(i){return{fieldPath:i.canonicalString()}}function $o(i){return Pn.fromServerFormat(i.fieldPath)}function ET(i){return i instanceof hn?(function(t){if(t.op==="=="){if(Db(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NAN"}};if(Ib(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Db(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NOT_NAN"}};if(Ib(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Go(t.field),op:RC(t.op),value:t.value}}})(i):i instanceof ss?(function(t){const r=t.getFilters().map((o=>ET(o)));return r.length===1?r[0]:{compositeFilter:{op:CC(t.op),filters:r}}})(i):ke(54877,{filter:i})}function NC(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function TT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class Yr{constructor(e,t,r,o,c=Pe.min(),u=Pe.min(),d=jn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new Yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class IC{constructor(e){this.yt=e}}function DC(i){const e=xC({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Qg(e,e.limit,"L"):e}class kC{constructor(){this.Cn=new OC}addToCollectionParentIndex(e,t){return this.Cn.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(ra.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(ra.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class OC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new _n(Tt.comparator),c=!o.has(r);return this.index[t]=o.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new _n(Tt.comparator)).toArray()}}const Gb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wT=41943040;class hi{static withCacheSize(e){return new hi(e,hi.DEFAULT_COLLECTION_PERCENTILE,hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}hi.DEFAULT_COLLECTION_PERCENTILE=10,hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hi.DEFAULT=new hi(wT,hi.DEFAULT_COLLECTION_PERCENTILE,hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hi.DISABLED=new hi(-1,0,0);class ll{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ll(0)}static cr(){return new ll(-1)}}const $b="LruGarbageCollector",MC=1048576;function Kb([i,e],[t,r]){const o=Je(i,t);return o===0?Je(e,r):o}class VC{constructor(e){this.Ir=e,this.buffer=new _n(Kb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Kb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class PC{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){xe($b,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){yl(t)?xe($b,"Ignoring IndexedDB error during garbage collection: ",t):await pl(t)}await this.Vr(3e5)}))}}class jC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return de.resolve(Lf.ce);const r=new VC(t);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(Gb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,o,c,u,d,g,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,u=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(r=E,d=Date.now(),this.removeTargets(e,r,t)))).next((E=>(c=E,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(p=Date.now(),Ho()<=We.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${c} targets in `+(g-d)+`ms
	Removed ${E} documents in `+(p-g)+`ms
Total Duration: ${p-v}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:E}))))}}function LC(i,e){return new jC(i,e)}class UC{constructor(){this.changes=new to((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class BC{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&Ic(r.mutation,o,Ti.empty(),Dt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ze()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ze()){const o=Ga();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((c=>{let u=_c();return c.forEach(((d,g)=>{u=u.insert(d,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=Ga();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ze())))}populateOverlays(e,t,r){const o=[];return r.forEach((c=>{t.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,r,o){let c=er();const u=Nc(),d=(function(){return Nc()})();return t.forEach(((g,p)=>{const v=r.get(p.key);o.has(p.key)&&(v===void 0||v.mutation instanceof da)?c=c.insert(p.key,p):v!==void 0?(u.set(p.key,v.mutation.getFieldMask()),Ic(v.mutation,p,v.mutation.getFieldMask(),Dt.now())):u.set(p.key,Ti.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((p,v)=>u.set(p,v))),t.forEach(((p,v)=>d.set(p,new zC(v,u.get(p)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=Nc();let o=new Lt(((u,d)=>u-d)),c=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let v=r.get(g)||Ti.empty();v=d.applyToLocalView(p,v),r.set(g,v);const E=(o.get(d.batchId)||Ze()).add(g);o=o.insert(d.batchId,E)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),p=g.key,v=g.value,E=nT();v.forEach((w=>{if(!c.has(w)){const I=lT(t.get(w),r.get(w));I!==null&&E.set(w,I),c=c.add(w)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,E))}return de.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(u){return Ie.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):WE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((c=>{const u=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-c.size):de.resolve(Ga());let d=zc,g=c;return u.next((p=>de.forEach(p,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),c.get(v)?de.resolve():this.remoteDocumentCache.getEntry(e,v).next((w=>{g=g.insert(v,w)}))))).next((()=>this.populateOverlays(e,p,c))).next((()=>this.computeViews(e,g,p,Ze()))).next((v=>({batchId:d,changes:tT(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ie(t)).next((r=>{let o=_c();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const c=t.collectionGroup;let u=_c();return this.indexManager.getCollectionParents(e,c).next((d=>de.forEach(d,(g=>{const p=(function(E,w){return new tu(w,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,p,r,o).next((v=>{v.forEach(((E,w)=>{u=u.insert(E,w)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,c,o)))).next((u=>{c.forEach(((g,p)=>{const v=p.getKey();u.get(v)===null&&(u=u.insert(v,An.newInvalidDocument(v)))}));let d=_c();return u.forEach(((g,p)=>{const v=c.get(g);v!==void 0&&Ic(v.mutation,p,Ti.empty(),Dt.now()),Bf(t,p)&&(d=d.insert(g,p))})),d}))}}class qC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return de.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:wi(o.createTime)}})(t)),de.resolve()}getNamedQuery(e,t){return de.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:DC(o.bundledQuery),readTime:wi(o.readTime)}})(t)),de.resolve()}}class HC{constructor(){this.overlays=new Lt(Ie.comparator),this.qr=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ga();return de.forEach(t,(o=>this.getOverlay(e,o).next((c=>{c!==null&&r.set(o,c)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,c)=>{this.St(e,t,c)})),de.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const o=Ga(),c=t.length+1,u=new Ie(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const g=d.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===c&&g.largestBatchId>r&&o.set(g.getKey(),g)}return de.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let c=new Lt(((p,v)=>p-v));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let v=c.get(p.largestBatchId);v===null&&(v=Ga(),c=c.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const d=Ga(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,v)=>d.set(p,v))),!(d.size()>=o)););return de.resolve(d)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new lC(t,r));let c=this.qr.get(t);c===void 0&&(c=Ze(),this.qr.set(t,c)),this.qr.set(t,c.add(r.key))}}class FC{constructor(){this.sessionToken=jn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,de.resolve()}}class Vp{constructor(){this.Qr=new _n(xn.$r),this.Ur=new _n(xn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new xn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new xn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Ie(new Tt([])),r=new xn(t,e),o=new xn(t,e+1),c=[];return this.Ur.forEachInRange([r,o],(u=>{this.Gr(u),c.push(u.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ie(new Tt([])),r=new xn(t,e),o=new xn(t,e+1);let c=Ze();return this.Ur.forEachInRange([r,o],(u=>{c=c.add(u.key)})),c}containsKey(e){const t=new xn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class xn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ie.comparator(e.key,t.key)||Je(e.Yr,t.Yr)}static Kr(e,t){return Je(e.Yr,t.Yr)||Ie.comparator(e.key,t.key)}}class GC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new _n(xn.$r)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new oC(c,t,r,o);this.mutationQueue.push(u);for(const d of o)this.Zr=this.Zr.add(new xn(d.key,c)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return de.resolve(u)}lookupMutationBatch(e,t){return de.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ei(r),c=o<0?0:o;return de.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?xp:this.tr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new xn(t,0),o=new xn(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,o],(u=>{const d=this.Xr(u.Yr);c.push(d)})),de.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(Je);return t.forEach((o=>{const c=new xn(o,0),u=new xn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,u],(d=>{r=r.add(d.Yr)}))})),de.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let c=r;Ie.isDocumentKey(c)||(c=c.child(""));const u=new xn(new Ie(c),0);let d=new _n(Je);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(d=d.add(g.Yr)),!0)}),u),de.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){at(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return de.forEach(t.mutations,(o=>{const c=new xn(o.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new xn(t,0),o=this.Zr.firstAfterOrEqual(r);return de.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class $C{constructor(e){this.ri=e,this.docs=(function(){return new Lt(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),c=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():An.newInvalidDocument(t))}getEntries(e,t){let r=er();return t.forEach((o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():An.newInvalidDocument(o))})),de.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let c=er();const u=t.path,d=new Ie(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:p,value:{document:v}}=g.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||wR(TR(v),r)<=0||(o.has(v.key)||Bf(t,v))&&(c=c.insert(v.key,v.mutableCopy()))}return de.resolve(c)}getAllFromCollectionGroup(e,t,r,o){ke(9500)}ii(e,t){return de.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new KC(this)}getSize(e){return de.resolve(this.size)}}class KC extends UC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),de.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class QC{constructor(e){this.persistence=e,this.si=new to((t=>Rp(t)),Cp),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.oi=0,this._i=new Vp,this.targetCount=0,this.ai=ll.ur()}forEachTarget(e,t){return this.si.forEach(((r,o)=>t(o))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),de.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ll(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Pr(t),de.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let o=0;const c=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.si.delete(u),c.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),de.waitFor(c).next((()=>o))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),de.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach((u=>{c.push(o.markPotentiallyOrphaned(e,u))})),de.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this._i.containsKey(t))}}class xT{constructor(e,t){this.ui={},this.overlays={},this.ci=new Lf(0),this.li=!1,this.li=!0,this.hi=new FC,this.referenceDelegate=e(this),this.Pi=new QC(this),this.indexManager=new kC,this.remoteDocumentCache=(function(o){return new $C(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new IC(t),this.Ii=new qC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new GC(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){xe("MemoryPersistence","Starting transaction:",e);const o=new YC(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,t){return de.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class YC extends SR{constructor(e){super(),this.currentSequenceNumber=e}}class Pp{constructor(e){this.persistence=e,this.Ri=new Vp,this.Vi=null}static mi(e){return new Pp(e)}get fi(){if(this.Vi)return this.Vi;throw ke(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),de.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.fi,(r=>{const o=Ie.fromPath(r);return this.gi(e,o).next((c=>{c||t.removeEntry(o,Pe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return de.or([()=>de.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class vf{constructor(e,t){this.persistence=e,this.pi=new to((r=>CR(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=LC(this,t)}static mi(e,t){return new vf(e,t)}Ei(){}di(e){return de.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return de.forEach(this.pi,((r,o)=>this.br(e,r,o).next((c=>c?de.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((d=>{d||(r++,c.removeEntry(u,Pe.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),de.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),de.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),de.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=$h(e.data.value)),t}br(e,t,r){return de.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return de.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class jp{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=o}static As(e,t){let r=Ze(),o=Ze();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new jp(e,t.fromCache,r,o)}}class XC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class WC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return $A()?8:AR(Gn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,o){const c={result:null};return this.ys(e,t).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ws(e,t,o,r).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new XC;return this.Ss(e,t,u).next((d=>{if(c.result=d,this.Vs)return this.bs(e,t,u,d.size)}))})).next((()=>c.result))}bs(e,t,r,o){return r.documentReadCount<this.fs?(Ho()<=We.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",Fo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),de.resolve()):(Ho()<=We.DEBUG&&xe("QueryEngine","Query:",Fo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(Ho()<=We.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",Fo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Es(t))):de.resolve())}ys(e,t){if(Vb(t))return de.resolve(null);let r=Es(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Qg(t,null,"F"),r=Es(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const u=Ze(...c);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,r).next((g=>{const p=this.Ds(t,d);return this.Cs(t,p,u,g.readTime)?this.ys(e,Qg(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,r,o){return Vb(t)||o.isEqual(Pe.min())?de.resolve(null):this.ps.getDocuments(e,r).next((c=>{const u=this.Ds(t,c);return this.Cs(t,u,r,o)?de.resolve(null):(Ho()<=We.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Fo(t)),this.vs(e,u,t,ER(o,zc)).next((d=>d)))}))}Ds(e,t){let r=new _n(ZE(e));return t.forEach(((o,c)=>{Bf(e,c)&&(r=r.add(c))})),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,t,r){return Ho()<=We.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",Fo(t)),this.ps.getDocumentsMatchingQuery(e,t,ra.min(),r)}vs(e,t,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((c=>(t.forEach((u=>{c=c.insert(u.key,u)})),c)))}}const Lp="LocalStore",JC=3e8;class ZC{constructor(e,t,r,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Lt(Je),this.xs=new to((c=>Rp(c)),Cp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function eN(i,e,t,r){return new ZC(i,e,t,r)}async function ST(i,e){const t=ze(i);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((c=>(o=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((c=>{const u=[],d=[];let g=Ze();for(const p of o){u.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}for(const p of c){d.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(r,g).next((p=>({Ls:p,removedBatchIds:u,addedBatchIds:d})))}))}))}function tN(i,e){const t=ze(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,g,p,v){const E=p.batch,w=E.keys();let I=de.resolve();return w.forEach((P=>{I=I.next((()=>v.getEntry(g,P))).next((q=>{const D=p.docVersions.get(P);at(D!==null,48541),q.version.compareTo(D)<0&&(E.applyToRemoteDocument(q,p),q.isValidDocument()&&(q.setReadTime(p.commitVersion),v.addEntry(q)))}))})),I.next((()=>d.mutationQueue.removeMutationBatch(g,E)))})(t,r,e,c).next((()=>c.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let g=Ze();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(g=g.add(d.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function AT(i){const e=ze(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function nN(i,e){const t=ze(i),r=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((v,E)=>{const w=o.get(E);if(!w)return;d.push(t.Pi.removeMatchingKeys(c,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(c,v.addedDocuments,E))));let I=w.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(jn.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,r)),o=o.insert(E,I),(function(q,D,j){return q.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=JC?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(w,I,v)&&d.push(t.Pi.updateTargetData(c,I))}));let g=er(),p=Ze();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(c,v))})),d.push(iN(c,u,e.documentUpdates).next((v=>{g=v.ks,p=v.qs}))),!r.isEqual(Pe.min())){const v=t.Pi.getLastRemoteSnapshotVersion(c).next((E=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));d.push(v)}return de.waitFor(d).next((()=>u.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,p))).next((()=>g))})).then((c=>(t.Ms=o,c)))}function iN(i,e,t){let r=Ze(),o=Ze();return t.forEach((c=>r=r.add(c))),e.getEntries(i,r).next((c=>{let u=er();return t.forEach(((d,g)=>{const p=c.get(d);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(d)),g.isNoDocument()&&g.version.isEqual(Pe.min())?(e.removeEntry(d,g.readTime),u=u.insert(d,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),u=u.insert(d,g)):xe(Lp,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",g.version)})),{ks:u,qs:o}}))}function sN(i,e){const t=ze(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=xp),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function rN(i,e){const t=ze(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.Pi.getTargetData(r,e).next((c=>c?(o=c,de.resolve(o)):t.Pi.allocateTargetId(r).next((u=>(o=new Yr(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Jg(i,e,t){const r=ze(i),o=r.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",c,(u=>r.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!yl(u))throw u;xe(Lp,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function Qb(i,e,t){const r=ze(i);let o=Pe.min(),c=Ze();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,p,v){const E=ze(g),w=E.xs.get(v);return w!==void 0?de.resolve(E.Ms.get(w)):E.Pi.getTargetData(p,v)})(r,u,Es(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(u,d.targetId).next((g=>{c=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(u,e,t?o:Pe.min(),t?c:Ze()))).next((d=>(aN(r,KR(e),d),{documents:d,Qs:c})))))}function aN(i,e,t){let r=i.Os.get(e)||Pe.min();t.forEach(((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),i.Os.set(e,r)}class Yb{constructor(){this.activeTargetIds=ZR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oN{constructor(){this.Mo=new Yb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Yb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class lN{Oo(e){}shutdown(){}}const Xb="ConnectivityMonitor";class Wb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){xe(Xb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){xe(Xb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Uh=null;function Zg(){return Uh===null?Uh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uh++,"0x"+Uh.toString(16)}const yg="RestConnection",cN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class uN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===uf?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,t,r,o,c){const u=Zg(),d=this.zo(e,t.toUriEncodedString());xe(yg,`Sending RPC '${e}' ${u}:`,d,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:p}=new URL(d),v=dl(p);return this.Jo(e,d,g,r,v).then((E=>(xe(yg,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw sl(yg,`RPC '${e}' ${u} failed with error: `,E,"url: ",d,"request:",r),E}))}Ho(e,t,r,o,c,u){return this.Go(e,t,r,o,c)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+gl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,c)=>e[c]=o)),r&&r.headers.forEach(((o,c)=>e[c]=o))}zo(e,t){const r=cN[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class hN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const qn="WebChannelConnection";class fN extends uN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,c){const u=Zg();return new Promise(((d,g)=>{const p=new AE;p.setWithCredentials(!0),p.listenOnce(RE.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Gh.NO_ERROR:const E=p.getResponseJson();xe(qn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case Gh.TIMEOUT:xe(qn,`RPC '${e}' ${u} timed out`),g(new Te(he.DEADLINE_EXCEEDED,"Request time out"));break;case Gh.HTTP_ERROR:const w=p.getStatus();if(xe(qn,`RPC '${e}' ${u} failed with status:`,w,"response text:",p.getResponseText()),w>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const P=I?.error;if(P&&P.status&&P.message){const q=(function(j){const Q=j.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(Q)>=0?Q:he.UNKNOWN})(P.status);g(new Te(q,P.message))}else g(new Te(he.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new Te(he.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{xe(qn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);xe(qn,`RPC '${e}' ${u} sending request:`,o),p.send(t,"POST",v,r,15)}))}T_(e,t,r){const o=Zg(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=IE(),d=NE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const v=c.join("");xe(qn,`Creating RPC '${e}' stream ${o}: ${v}`,g);const E=u.createWebChannel(v,g);this.I_(E);let w=!1,I=!1;const P=new hN({Yo:D=>{I?xe(qn,`Not sending because RPC '${e}' stream ${o} is closed:`,D):(w||(xe(qn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),w=!0),xe(qn,`RPC '${e}' stream ${o} sending:`,D),E.send(D))},Zo:()=>E.close()}),q=(D,j,Q)=>{D.listen(j,(F=>{try{Q(F)}catch(ce){setTimeout((()=>{throw ce}),0)}}))};return q(E,vc.EventType.OPEN,(()=>{I||(xe(qn,`RPC '${e}' stream ${o} transport opened.`),P.o_())})),q(E,vc.EventType.CLOSE,(()=>{I||(I=!0,xe(qn,`RPC '${e}' stream ${o} transport closed`),P.a_(),this.E_(E))})),q(E,vc.EventType.ERROR,(D=>{I||(I=!0,sl(qn,`RPC '${e}' stream ${o} transport errored. Name:`,D.name,"Message:",D.message),P.a_(new Te(he.UNAVAILABLE,"The operation could not be completed")))})),q(E,vc.EventType.MESSAGE,(D=>{if(!I){const j=D.data[0];at(!!j,16349);const Q=j,F=Q?.error||Q[0]?.error;if(F){xe(qn,`RPC '${e}' stream ${o} received error:`,F);const ce=F.status;let G=(function(x){const C=un[x];if(C!==void 0)return fT(C)})(ce),U=F.message;G===void 0&&(G=he.INTERNAL,U="Unknown error status: "+ce+" with message "+F.message),I=!0,P.a_(new Te(G,U)),E.close()}else xe(qn,`RPC '${e}' stream ${o} received:`,j),P.u_(j)}})),q(d,CE.STAT_EVENT,(D=>{D.stat===Bg.PROXY?xe(qn,`RPC '${e}' stream ${o} detected buffering proxy`):D.stat===Bg.NOPROXY&&xe(qn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{P.__()}),0),P}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function vg(){return typeof document<"u"?document:null}function Gf(i){return new pC(i,!0)}class Up{constructor(e,t,r=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-r);o>0&&xe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Jb="PersistentStream";class RT{constructor(e,t,r,o,c,u,d,g){this.Mi=e,this.S_=r,this.b_=o,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Up(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(Zs(t.toString()),Zs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===he.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===t&&this.G_(r,o)}),(r=>{e((()=>{const o=new Te(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return xe(Jb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(xe(Jb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class dN extends RT{constructor(e,t,r,o,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,u),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=bC(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Pe.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?Pe.min():u.readTime?wi(u.readTime):Pe.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Wg(this.serializer),t.addTarget=(function(c,u){let d;const g=u.target;if(d=$g(g)?{documents:TC(c,g)}:{query:wC(c,g).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=gT(c,u.resumeToken);const p=Yg(c,u.expectedCount);p!==null&&(d.expectedCount=p)}else if(u.snapshotVersion.compareTo(Pe.min())>0){d.readTime=pf(c,u.snapshotVersion.toTimestamp());const p=Yg(c,u.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const r=SC(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Wg(this.serializer),t.removeTarget=e,this.q_(t)}}class mN extends RT{constructor(e,t,r,o,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,u),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return at(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,at(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){at(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=EC(e.writeResults,e.commitTime),r=wi(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Wg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>_T(this.serializer,r)))};this.q_(t)}}class gN{}class pN extends gN{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Te(he.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Go(e,Xg(t,r),o,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Te(he.UNKNOWN,c.toString())}))}Ho(e,t,r,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,Xg(t,r),o,u,d,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Te(he.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class yN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Zs(t),this.aa=!1):xe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Wa="RemoteStore";class vN{constructor(e,t,r,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((u=>{r.enqueueAndForget((async()=>{no(this)&&(xe(Wa,"Restarting streams for network reachability change."),await(async function(g){const p=ze(g);p.Ea.add(4),await su(p),p.Ra.set("Unknown"),p.Ea.delete(4),await $f(p)})(this))}))})),this.Ra=new yN(r,o)}}async function $f(i){if(no(i))for(const e of i.da)await e(!0)}async function su(i){for(const e of i.da)await e(!1)}function CT(i,e){const t=ze(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Hp(t)?qp(t):vl(t).O_()&&Bp(t,e))}function zp(i,e){const t=ze(i),r=vl(t);t.Ia.delete(e),r.O_()&&NT(t,e),t.Ia.size===0&&(r.O_()?r.L_():no(t)&&t.Ra.set("Unknown"))}function Bp(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vl(i).Y_(e)}function NT(i,e){i.Va.Ue(e),vl(i).Z_(e)}function qp(i){i.Va=new fC({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),vl(i).start(),i.Ra.ua()}function Hp(i){return no(i)&&!vl(i).x_()&&i.Ia.size>0}function no(i){return ze(i).Ea.size===0}function IT(i){i.Va=void 0}async function _N(i){i.Ra.set("Online")}async function bN(i){i.Ia.forEach(((e,t)=>{Bp(i,e)}))}async function EN(i,e){IT(i),Hp(i)?(i.Ra.ha(e),qp(i)):i.Ra.set("Unknown")}async function TN(i,e,t){if(i.Ra.set("Online"),e instanceof mT&&e.state===2&&e.cause)try{await(async function(o,c){const u=c.cause;for(const d of c.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ia.delete(d),o.Va.removeTarget(d))})(i,e)}catch(r){xe(Wa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _f(i,r)}else if(e instanceof Yh?i.Va.Ze(e):e instanceof dT?i.Va.st(e):i.Va.tt(e),!t.isEqual(Pe.min()))try{const r=await AT(i.localStore);t.compareTo(r)>=0&&await(function(c,u){const d=c.Va.Tt(u);return d.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const v=c.Ia.get(p);v&&c.Ia.set(p,v.withResumeToken(g.resumeToken,u))}})),d.targetMismatches.forEach(((g,p)=>{const v=c.Ia.get(g);if(!v)return;c.Ia.set(g,v.withResumeToken(jn.EMPTY_BYTE_STRING,v.snapshotVersion)),NT(c,g);const E=new Yr(v.target,g,p,v.sequenceNumber);Bp(c,E)})),c.remoteSyncer.applyRemoteEvent(d)})(i,t)}catch(r){xe(Wa,"Failed to raise snapshot:",r),await _f(i,r)}}async function _f(i,e,t){if(!yl(e))throw e;i.Ea.add(1),await su(i),i.Ra.set("Offline"),t||(t=()=>AT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{xe(Wa,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await $f(i)}))}function DT(i,e){return e().catch((t=>_f(i,t,e)))}async function Kf(i){const e=ze(i),t=ca(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xp;for(;wN(e);)try{const o=await sN(e.localStore,r);if(o===null){e.Ta.length===0&&t.L_();break}r=o.batchId,xN(e,o)}catch(o){await _f(e,o)}kT(e)&&OT(e)}function wN(i){return no(i)&&i.Ta.length<10}function xN(i,e){i.Ta.push(e);const t=ca(i);t.O_()&&t.X_&&t.ea(e.mutations)}function kT(i){return no(i)&&!ca(i).x_()&&i.Ta.length>0}function OT(i){ca(i).start()}async function SN(i){ca(i).ra()}async function AN(i){const e=ca(i);for(const t of i.Ta)e.ea(t.mutations)}async function RN(i,e,t){const r=i.Ta.shift(),o=kp.from(r,e,t);await DT(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Kf(i)}async function CN(i,e){e&&ca(i).X_&&await(async function(r,o){if((function(u){return hT(u)&&u!==he.ABORTED})(o.code)){const c=r.Ta.shift();ca(r).B_(),await DT(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Kf(r)}})(i,e),kT(i)&&OT(i)}async function Zb(i,e){const t=ze(i);t.asyncQueue.verifyOperationInProgress(),xe(Wa,"RemoteStore received new credentials");const r=no(t);t.Ea.add(3),await su(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await $f(t)}async function NN(i,e){const t=ze(i);e?(t.Ea.delete(2),await $f(t)):e||(t.Ea.add(2),await su(t),t.Ra.set("Unknown"))}function vl(i){return i.ma||(i.ma=(function(t,r,o){const c=ze(t);return c.sa(),new dN(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:_N.bind(null,i),t_:bN.bind(null,i),r_:EN.bind(null,i),H_:TN.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Hp(i)?qp(i):i.Ra.set("Unknown")):(await i.ma.stop(),IT(i))}))),i.ma}function ca(i){return i.fa||(i.fa=(function(t,r,o){const c=ze(t);return c.sa(),new mN(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:SN.bind(null,i),r_:CN.bind(null,i),ta:AN.bind(null,i),na:RN.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Kf(i)):(await i.fa.stop(),i.Ta.length>0&&(xe(Wa,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class Fp{constructor(e,t,r,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new ea,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,c){const u=Date.now()+r,d=new Fp(e,t,u,o,c);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gp(i,e){if(Zs("AsyncQueue",`${e}: ${i}`),yl(i))return new Te(he.UNAVAILABLE,`${e}: ${i}`);throw i}class Yo{static emptySet(e){return new Yo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ie.comparator(t.key,r.key):(t,r)=>Ie.comparator(t.key,r.key),this.keyedMap=_c(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Yo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class e1{constructor(){this.ga=new Lt(Ie.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ke(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class cl{constructor(e,t,r,o,c,u,d,g,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,o,c){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new cl(e,t,Yo.emptySet(t),u,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class IN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class DN{constructor(){this.queries=t1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=ze(t),c=o.queries;o.queries=t1(),c.forEach(((u,d)=>{for(const g of d.Sa)g.onError(r)}))})(this,new Te(he.ABORTED,"Firestore shutting down"))}}function t1(){return new to((i=>JE(i)),zf)}async function kN(i,e){const t=ze(i);let r=3;const o=e.query;let c=t.queries.get(o);c?!c.ba()&&e.Da()&&(r=2):(c=new IN,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await t.onListen(o,!0);break;case 1:c.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=Gp(u,`Initialization of query '${Fo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&$p(t)}async function ON(i,e){const t=ze(i),r=e.query;let o=3;const c=t.queries.get(r);if(c){const u=c.Sa.indexOf(e);u>=0&&(c.Sa.splice(u,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function MN(i,e){const t=ze(i);let r=!1;for(const o of e){const c=o.query,u=t.queries.get(c);if(u){for(const d of u.Sa)d.Fa(o)&&(r=!0);u.wa=o}}r&&$p(t)}function VN(i,e,t){const r=ze(i),o=r.queries.get(e);if(o)for(const c of o.Sa)c.onError(t);r.queries.delete(e)}function $p(i){i.Ca.forEach((e=>{e.next()}))}var ep,n1;(n1=ep||(ep={})).Ma="default",n1.Cache="cache";class PN{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new cl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ep.Cache}}class MT{constructor(e){this.key=e}}class VT{constructor(e){this.key=e}}class jN{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ze(),this.mutatedKeys=Ze(),this.eu=ZE(e),this.tu=new Yo(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new e1,o=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const w=o.get(v),I=Bf(this.query,E)?E:null,P=!!w&&this.mutatedKeys.has(w.key),q=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let D=!1;w&&I?w.data.isEqual(I.data)?P!==q&&(r.track({type:3,doc:I}),D=!0):this.su(w,I)||(r.track({type:2,doc:I}),D=!0,(g&&this.eu(I,g)>0||p&&this.eu(I,p)<0)&&(d=!0)):!w&&I?(r.track({type:0,doc:I}),D=!0):w&&!I&&(r.track({type:1,doc:w}),D=!0,(g||p)&&(d=!0)),D&&(I?(u=u.add(I),c=q?c.add(v):c.delete(v)):(u=u.delete(v),c=c.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),c=c.delete(v.key),r.track({type:1,doc:v})}return{tu:u,iu:r,Cs:d,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,E)=>(function(I,P){const q=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{Rt:D})}};return q(I)-q(P)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(r),o=o??!1;const d=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,u.length!==0||p?{snapshot:new cl(this.query,e.tu,c,u,e.mutatedKeys,g===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new e1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ze(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new VT(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new MT(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return cl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Kp="SyncEngine";class LN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class UN{constructor(e){this.key=e,this.hu=!1}}class zN{constructor(e,t,r,o,c,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new to((d=>JE(d)),zf),this.Iu=new Map,this.Eu=new Set,this.du=new Lt(Ie.comparator),this.Au=new Map,this.Ru=new Vp,this.Vu={},this.mu=new Map,this.fu=ll.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function BN(i,e,t=!0){const r=BT(i);let o;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await PT(r,e,t,!0),o}async function qN(i,e){const t=BT(i);await PT(t,e,!0,!1)}async function PT(i,e,t,r){const o=await rN(i.localStore,Es(e)),c=o.targetId,u=i.sharedClientState.addLocalQueryTarget(c,t);let d;return r&&(d=await HN(i,e,c,u==="current",o.resumeToken)),i.isPrimaryClient&&t&&CT(i.remoteStore,o),d}async function HN(i,e,t,r,o){i.pu=(E,w,I)=>(async function(q,D,j,Q){let F=D.view.ru(j);F.Cs&&(F=await Qb(q.localStore,D.query,!1).then((({documents:S})=>D.view.ru(S,F))));const ce=Q&&Q.targetChanges.get(D.targetId),G=Q&&Q.targetMismatches.get(D.targetId)!=null,U=D.view.applyChanges(F,q.isPrimaryClient,ce,G);return s1(q,D.targetId,U.au),U.snapshot})(i,E,w,I);const c=await Qb(i.localStore,e,!0),u=new jN(e,c.Qs),d=u.ru(c.documents),g=iu.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",o),p=u.applyChanges(d,i.isPrimaryClient,g);s1(i,t,p.au);const v=new LN(e,t,u);return i.Tu.set(e,v),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),p.snapshot}async function FN(i,e,t){const r=ze(i),o=r.Tu.get(e),c=r.Iu.get(o.targetId);if(c.length>1)return r.Iu.set(o.targetId,c.filter((u=>!zf(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Jg(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&zp(r.remoteStore,o.targetId),tp(r,o.targetId)})).catch(pl)):(tp(r,o.targetId),await Jg(r.localStore,o.targetId,!0))}async function GN(i,e){const t=ze(i),r=t.Tu.get(e),o=t.Iu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),zp(t.remoteStore,r.targetId))}async function $N(i,e,t){const r=ZN(i);try{const o=await(function(u,d){const g=ze(u),p=Dt.now(),v=d.reduce(((I,P)=>I.add(P.key)),Ze());let E,w;return g.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let P=er(),q=Ze();return g.Ns.getEntries(I,v).next((D=>{P=D,P.forEach(((j,Q)=>{Q.isValidDocument()||(q=q.add(j))}))})).next((()=>g.localDocuments.getOverlayedDocuments(I,P))).next((D=>{E=D;const j=[];for(const Q of d){const F=aC(Q,E.get(Q.key).overlayedDocument);F!=null&&j.push(new da(Q.key,F,FE(F.value.mapValue),ei.exists(!0)))}return g.mutationQueue.addMutationBatch(I,p,j,d)})).next((D=>{w=D;const j=D.applyToLocalDocumentSet(E,q);return g.documentOverlayCache.saveOverlays(I,D.batchId,j)}))})).then((()=>({batchId:w.batchId,changes:tT(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(u,d,g){let p=u.Vu[u.currentUser.toKey()];p||(p=new Lt(Je)),p=p.insert(d,g),u.Vu[u.currentUser.toKey()]=p})(r,o.batchId,t),await ru(r,o.changes),await Kf(r.remoteStore)}catch(o){const c=Gp(o,"Failed to persist write");t.reject(c)}}async function jT(i,e){const t=ze(i);try{const r=await nN(t.localStore,e);e.targetChanges.forEach(((o,c)=>{const u=t.Au.get(c);u&&(at(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?at(u.hu,14607):o.removedDocuments.size>0&&(at(u.hu,42227),u.hu=!1))})),await ru(t,r,e)}catch(r){await pl(r)}}function i1(i,e,t){const r=ze(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Tu.forEach(((c,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const g=ze(u);g.onlineState=d;let p=!1;g.queries.forEach(((v,E)=>{for(const w of E.Sa)w.va(d)&&(p=!0)})),p&&$p(g)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KN(i,e,t){const r=ze(i);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Au.get(e),c=o&&o.key;if(c){let u=new Lt(Ie.comparator);u=u.insert(c,An.newNoDocument(c,Pe.min()));const d=Ze().add(c),g=new Ff(Pe.min(),new Map,new Lt(Je),u,d);await jT(r,g),r.du=r.du.remove(c),r.Au.delete(e),Qp(r)}else await Jg(r.localStore,e,!1).then((()=>tp(r,e,t))).catch(pl)}async function QN(i,e){const t=ze(i),r=e.batch.batchId;try{const o=await tN(t.localStore,e);UT(t,r,null),LT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ru(t,o)}catch(o){await pl(o)}}async function YN(i,e,t){const r=ze(i);try{const o=await(function(u,d){const g=ze(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return g.mutationQueue.lookupMutationBatch(p,d).next((E=>(at(E!==null,37113),v=E.keys(),g.mutationQueue.removeMutationBatch(p,E)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,v,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>g.localDocuments.getDocuments(p,v)))}))})(r.localStore,e);UT(r,e,t),LT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ru(r,o)}catch(o){await pl(o)}}function LT(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function UT(i,e,t){const r=ze(i);let o=r.Vu[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function tp(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),t&&i.Pu.yu(r,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||zT(i,r)}))}function zT(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(zp(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),Qp(i))}function s1(i,e,t){for(const r of t)r instanceof MT?(i.Ru.addReference(r.key,e),XN(i,r)):r instanceof VT?(xe(Kp,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||zT(i,r.key)):ke(19791,{wu:r})}function XN(i,e){const t=e.key,r=t.path.canonicalString();i.du.get(t)||i.Eu.has(r)||(xe(Kp,"New document in limbo: "+t),i.Eu.add(r),Qp(i))}function Qp(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new Ie(Tt.fromString(e)),r=i.fu.next();i.Au.set(r,new UN(t)),i.du=i.du.insert(t,r),CT(i.remoteStore,new Yr(Es(Np(t.path)),r,"TargetPurposeLimboResolution",Lf.ce))}}async function ru(i,e,t){const r=ze(i),o=[],c=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,g)=>{u.push(r.pu(g,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const v=p?!p.fromCache:t?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(p){o.push(p);const v=jp.As(g.targetId,p);c.push(v)}})))})),await Promise.all(u),r.Pu.H_(o),await(async function(g,p){const v=ze(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>de.forEach(p,(w=>de.forEach(w.Es,(I=>v.persistence.referenceDelegate.addReference(E,w.targetId,I))).next((()=>de.forEach(w.ds,(I=>v.persistence.referenceDelegate.removeReference(E,w.targetId,I)))))))))}catch(E){if(!yl(E))throw E;xe(Lp,"Failed to update sequence numbers: "+E)}for(const E of p){const w=E.targetId;if(!E.fromCache){const I=v.Ms.get(w),P=I.snapshotVersion,q=I.withLastLimboFreeSnapshotVersion(P);v.Ms=v.Ms.insert(w,q)}}})(r.localStore,c))}async function WN(i,e){const t=ze(i);if(!t.currentUser.isEqual(e)){xe(Kp,"User change. New user:",e.toKey());const r=await ST(t.localStore,e);t.currentUser=e,(function(c,u){c.mu.forEach((d=>{d.forEach((g=>{g.reject(new Te(he.CANCELLED,u))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ru(t,r.Ls)}}function JN(i,e){const t=ze(i),r=t.Au.get(e);if(r&&r.hu)return Ze().add(r.key);{let o=Ze();const c=t.Iu.get(e);if(!c)return o;for(const u of c){const d=t.Tu.get(u);o=o.unionWith(d.view.nu)}return o}}function BT(i){const e=ze(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=jT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KN.bind(null,e),e.Pu.H_=MN.bind(null,e.eventManager),e.Pu.yu=VN.bind(null,e.eventManager),e}function ZN(i){const e=ze(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YN.bind(null,e),e}class bf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return eN(this.persistence,new WC,e.initialUser,this.serializer)}Cu(e){return new xT(Pp.mi,this.serializer)}Du(e){return new oN}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bf.provider={build:()=>new bf};class eI extends bf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){at(this.persistence.referenceDelegate instanceof vf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new PC(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?hi.withCacheSize(this.cacheSizeBytes):hi.DEFAULT;return new xT((r=>vf.mi(r,t)),this.serializer)}}class np{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>i1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WN.bind(null,this.syncEngine),await NN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new DN})()}createDatastore(e){const t=Gf(e.databaseInfo.databaseId),r=(function(c){return new fN(c)})(e.databaseInfo);return(function(c,u,d,g){return new pN(c,u,d,g)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,c,u,d){return new vN(r,o,c,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>i1(this.syncEngine,t,0)),(function(){return Wb.v()?new Wb:new lN})())}createSyncEngine(e,t){return(function(o,c,u,d,g,p,v){const E=new zN(o,c,u,d,g,p);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=ze(t);xe(Wa,"RemoteStore shutting down."),r.Ea.add(5),await su(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}np.provider={build:()=>new np};class tI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Zs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class nI{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Te(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,c){const u=ze(o),d={documents:c.map((E=>yf(u.serializer,E)))},g=await u.Ho("BatchGetDocuments",u.serializer.databaseId,Tt.emptyPath(),d,c.length),p=new Map;g.forEach((E=>{const w=_C(u.serializer,E);p.set(w.key.toString(),w)}));const v=[];return c.forEach((E=>{const w=p.get(E.toString());at(!!w,55234,{key:E}),v.push(w)})),v})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Dp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const o=Ie.fromPath(r);this.mutations.push(new uT(o,this.precondition(o)))})),await(async function(r,o){const c=ze(r),u={writes:o.map((d=>_T(c.serializer,d)))};await c.Go("Commit",c.serializer.databaseId,Tt.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ke(50498,{Gu:e.constructor.name});t=Pe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Te(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Pe.min())?ei.exists(!1):ei.updateTime(t):ei.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Pe.min()))throw new Te(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ei.updateTime(t)}return ei.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class iI{constructor(e,t,r,o,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=c,this.zu=r.maxAttempts,this.M_=new Up(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new nI(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((o=>{this.Yu(o)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!eu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!hT(t)}return!1}}const ua="FirestoreClient";class sI{constructor(e,t,r,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Fn.UNAUTHENTICATED,this.clientId=wp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async u=>{xe(ua,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(xe(ua,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ea;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Gp(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function _g(i,e){i.asyncQueue.verifyOperationInProgress(),xe(ua,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await ST(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function r1(i,e){i.asyncQueue.verifyOperationInProgress();const t=await rI(i);xe(ua,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>Zb(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>Zb(e.remoteStore,o))),i._onlineComponents=e}async function rI(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){xe(ua,"Using user provided OfflineComponentProvider");try{await _g(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===he.FAILED_PRECONDITION||o.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;sl("Error using user provided cache. Falling back to memory cache: "+t),await _g(i,new bf)}}else xe(ua,"Using default OfflineComponentProvider"),await _g(i,new eI(void 0));return i._offlineComponents}async function Yp(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(xe(ua,"Using user provided OnlineComponentProvider"),await r1(i,i._uninitializedComponentsProvider._online)):(xe(ua,"Using default OnlineComponentProvider"),await r1(i,new np))),i._onlineComponents}function aI(i){return Yp(i).then((e=>e.syncEngine))}function oI(i){return Yp(i).then((e=>e.datastore))}async function a1(i){const e=await Yp(i),t=e.eventManager;return t.onListen=BN.bind(null,e.syncEngine),t.onUnlisten=FN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=qN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=GN.bind(null,e.syncEngine),t}function qT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const o1=new Map;const HT="firestore.googleapis.com",l1=!0;class c1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Te(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=HT,this.ssl=l1}else this.host=e.host,this.ssl=e.ssl??l1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<MC)throw new Te(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Te(he.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Te(he.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Te(he.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qf{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new c1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new c1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new uR;switch(r.type){case"firstParty":return new mR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Te(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=o1.get(t);r&&(xe("ComponentProvider","Removing Datastore"),o1.delete(t),r.terminate())})(this),Promise.resolve()}}function lI(i,e,t,r={}){i=Ws(i,Qf);const o=dl(e),c=i._getSettings(),u={...c,emulatorOptions:i._getEmulatorOptions()},d=`${e}:${t}`;o&&(yE(`https://${d}`),vE("Firestore",!0)),c.host!==HT&&c.host!==d&&sl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:d,ssl:o,emulatorOptions:r};if(!Qa(g,u)&&(i._setSettings(g),r.mockUserToken)){let p,v;if(typeof r.mockUserToken=="string")p=r.mockUserToken,v=Fn.MOCK_USER;else{p=jA(r.mockUserToken,i._app?.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Te(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Fn(E)}i._authCredentials=new hR(new kE(p,v))}}class _l{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _l(this.firestore,e,this._query)}}class Ht{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ta(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}toJSON(){return{type:Ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Zc(t,Ht._jsonSchema))return new Ht(e,r||null,new Ie(Tt.fromString(t.referencePath)))}}Ht._jsonSchemaVersion="firestore/documentReference/1.0",Ht._jsonSchema={type:fn("string",Ht._jsonSchemaVersion),referencePath:fn("string")};class ta extends _l{constructor(e,t,r){super(e,t,Np(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new Ie(e))}withConverter(e){return new ta(this.firestore,e,this._path)}}function Jt(i,e,...t){if(i=Rn(i),OE("collection","path",e),i instanceof Qf){const r=Tt.fromString(e,...t);return Eb(r),new ta(i,null,r)}{if(!(i instanceof Ht||i instanceof ta))throw new Te(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Tt.fromString(e,...t));return Eb(r),new ta(i.firestore,null,r)}}function Zt(i,e,...t){if(i=Rn(i),arguments.length===1&&(e=wp.newId()),OE("doc","path",e),i instanceof Qf){const r=Tt.fromString(e,...t);return bb(r),new Ht(i,null,new Ie(r))}{if(!(i instanceof Ht||i instanceof ta))throw new Te(he.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Tt.fromString(e,...t));return bb(r),new Ht(i.firestore,i instanceof ta?i.converter:null,new Ie(r))}}const u1="AsyncQueue";class h1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Up(this,"async_queue_retry"),this._c=()=>{const r=vg();r&&xe(u1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=vg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=vg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ea;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!yl(e))throw e;xe(u1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Zs("INTERNAL UNHANDLED ERROR: ",f1(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Fp.createAndSchedule(this,e,t,r,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&ke(47125,{Pc:f1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function f1(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}function d1(i){return(function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const c of r)if(c in o&&typeof o[c]=="function")return!0;return!1})(i,["next","error","complete"])}class ul extends Qf{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new h1,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new h1(e),this._firestoreClient=void 0,await e}}}function cI(i,e){const t=typeof i=="object"?i:TE(),r=typeof i=="string"?i:uf,o=Ep(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=VA("firestore");c&&lI(o,...c)}return o}function Xp(i){if(i._terminated)throw new Te(he.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||uI(i),i._firestoreClient}function uI(i){const e=i._freezeSettings(),t=(function(o,c,u,d){return new DR(o,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,qT(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new sI(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(i._componentsProvider))}class Ei{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ei(jn.fromBase64String(e))}catch(t){throw new Te(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ei(jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ei._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zc(e,Ei._jsonSchema))return Ei.fromBase64String(e.bytes)}}Ei._jsonSchemaVersion="firestore/bytes/1.0",Ei._jsonSchema={type:fn("string",Ei._jsonSchemaVersion),bytes:fn("string")};class au{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Te(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Wp{constructor(e){this._methodName=e}}class Ts{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ts._jsonSchemaVersion}}static fromJSON(e){if(Zc(e,Ts._jsonSchema))return new Ts(e.latitude,e.longitude)}}Ts._jsonSchemaVersion="firestore/geoPoint/1.0",Ts._jsonSchema={type:fn("string",Ts._jsonSchemaVersion),latitude:fn("number"),longitude:fn("number")};class ws{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ws._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zc(e,ws._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ws(e.vectorValues);throw new Te(he.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ws._jsonSchemaVersion="firestore/vectorValue/1.0",ws._jsonSchema={type:fn("string",ws._jsonSchemaVersion),vectorValues:fn("object")};const hI=/^__.*__$/;class fI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new da(e,this.data,this.fieldMask,t,this.fieldTransforms):new nu(e,this.data,t,this.fieldTransforms)}}class FT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new da(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function GT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ac:i})}}class Jp{constructor(e,t,r,o,c,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Jp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ef(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(GT(this.Ac)&&hI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class dI{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Gf(e)}Cc(e,t,r,o=!1){return new Jp({Ac:e,methodName:t,Dc:r,path:Pn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yf(i){const e=i._freezeSettings(),t=Gf(i._databaseId);return new dI(i._databaseId,!!e.ignoreUndefinedProperties,t)}function $T(i,e,t,r,o,c={}){const u=i.Cc(c.merge||c.mergeFields?2:0,e,t,o);Zp("Data must be an object, but it was:",u,r);const d=YT(r,u);let g,p;if(c.merge)g=new Ti(u.fieldMask),p=u.fieldTransforms;else if(c.mergeFields){const v=[];for(const E of c.mergeFields){const w=ip(e,E,t);if(!u.contains(w))throw new Te(he.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);WT(v,w)||v.push(w)}g=new Ti(v),p=u.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,p=u.fieldTransforms;return new fI(new Zn(d),g,p)}class Xf extends Wp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xf}}function KT(i,e,t,r){const o=i.Cc(1,e,t);Zp("Data must be an object, but it was:",o,r);const c=[],u=Zn.empty();fa(r,((g,p)=>{const v=e0(e,g,t);p=Rn(p);const E=o.yc(v);if(p instanceof Xf)c.push(v);else{const w=ou(p,E);w!=null&&(c.push(v),u.set(v,w))}}));const d=new Ti(c);return new FT(u,d,o.fieldTransforms)}function QT(i,e,t,r,o,c){const u=i.Cc(1,e,t),d=[ip(e,r,t)],g=[o];if(c.length%2!=0)throw new Te(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<c.length;w+=2)d.push(ip(e,c[w])),g.push(c[w+1]);const p=[],v=Zn.empty();for(let w=d.length-1;w>=0;--w)if(!WT(p,d[w])){const I=d[w];let P=g[w];P=Rn(P);const q=u.yc(I);if(P instanceof Xf)p.push(I);else{const D=ou(P,q);D!=null&&(p.push(I),v.set(I,D))}}const E=new Ti(p);return new FT(v,E,u.fieldTransforms)}function mI(i,e,t,r=!1){return ou(t,i.Cc(r?4:3,e))}function ou(i,e){if(XT(i=Rn(i)))return Zp("Unsupported field value:",e,i),YT(i,e);if(i instanceof Wp)return(function(r,o){if(!GT(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const c=[];let u=0;for(const d of r){let g=ou(d,o.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),u++}return{arrayValue:{values:c}}})(i,e)}return(function(r,o){if((r=Rn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return eC(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=Dt.fromDate(r);return{timestampValue:pf(o.serializer,c)}}if(r instanceof Dt){const c=new Dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pf(o.serializer,c)}}if(r instanceof Ts)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ei)return{bytesValue:gT(o.serializer,r._byteString)};if(r instanceof Ht){const c=o.databaseId,u=r.firestore._databaseId;if(!u.isEqual(c))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Mp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof ws)return(function(u,d){return{mapValue:{fields:{[qE]:{stringValue:HE},[hf]:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw d.Sc("VectorValues must only contain numeric values.");return Ip(d.serializer,p)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${jf(r)}`)})(i,e)}function YT(i,e){const t={};return PE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fa(i,((r,o)=>{const c=ou(o,e.mc(r));c!=null&&(t[r]=c)})),{mapValue:{fields:t}}}function XT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Dt||i instanceof Ts||i instanceof Ei||i instanceof Ht||i instanceof Wp||i instanceof ws)}function Zp(i,e,t){if(!XT(t)||!ME(t)){const r=jf(t);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function ip(i,e,t){if((e=Rn(e))instanceof au)return e._internalPath;if(typeof e=="string")return e0(i,e);throw Ef("Field path arguments must be of type string or ",i,!1,void 0,t)}const gI=new RegExp("[~\\*/\\[\\]]");function e0(i,e,t){if(e.search(gI)>=0)throw Ef(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new au(...e.split("."))._internalPath}catch{throw Ef(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Ef(i,e,t,r,o){const c=r&&!r.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(c||u)&&(g+=" (found",c&&(g+=` in field ${r}`),u&&(g+=` in document ${o}`),g+=")"),new Te(he.INVALID_ARGUMENT,d+i+g)}function WT(i,e){return i.some((t=>t.isEqual(e)))}class Tf{constructor(e,t,r,o,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(t0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class pI extends Tf{data(){return super.data()}}function t0(i,e){return typeof e=="string"?e0(i,e):e instanceof au?e._internalPath:e._delegate._internalPath}function yI(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Te(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class n0{}class vI extends n0{}function _I(i,e,...t){let r=[];e instanceof n0&&r.push(e),r=r.concat(t),(function(c){const u=c.filter((g=>g instanceof i0)).length,d=c.filter((g=>g instanceof Wf)).length;if(u>1||u>0&&d>0)throw new Te(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)i=o._apply(i);return i}class Wf extends vI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Wf(e,t,r)}_apply(e){const t=this._parse(e);return JT(e._query,t),new _l(e.firestore,e.converter,Kg(e._query,t))}_parse(e){const t=Yf(e.firestore);return(function(c,u,d,g,p,v,E){let w;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Te(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){g1(E,v);const P=[];for(const q of E)P.push(m1(g,c,q));w={arrayValue:{values:P}}}else w=m1(g,c,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||g1(E,v),w=mI(d,u,E,v==="in"||v==="not-in");return hn.create(p,v,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function bI(i,e,t){const r=e,o=t0("where",i);return Wf._create(o,r,t)}class i0 extends n0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new i0(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:ss.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,c){let u=o;const d=c.getFlattenedFilters();for(const g of d)JT(u,g),u=Kg(u,g)})(e._query,t),new _l(e.firestore,e.converter,Kg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function m1(i,e,t){if(typeof(t=Rn(t))=="string"){if(t==="")throw new Te(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WE(e)&&t.indexOf("/")!==-1)throw new Te(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Tt.fromString(t));if(!Ie.isDocumentKey(r))throw new Te(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nb(i,new Ie(r))}if(t instanceof Ht)return Nb(i,t._key);throw new Te(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jf(t)}.`)}function g1(i,e){if(!Array.isArray(i)||i.length===0)throw new Te(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JT(i,e){const t=(function(o,c){for(const u of o)for(const d of u.getFlattenedFilters())if(c.indexOf(d.op)>=0)return d.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Te(he.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Te(he.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class ZT{convertValue(e,t="none"){switch(la(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return fa(e,((o,c)=>{r[o]=this.convertValue(c,t)})),r}convertVectorValue(e){const t=e.fields?.[hf].arrayValue?.values?.map((r=>Wt(r.doubleValue)));return new ws(t)}convertGeoPoint(e){return new Ts(Wt(e.latitude),Wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Uf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Bc(e));default:return null}}convertTimestamp(e){const t=aa(e);return new Dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Tt.fromString(e);at(TT(r),9688,{name:e});const o=new qc(r.get(1),r.get(3)),c=new Ie(r.popFirst(5));return o.isEqual(t)||Zs(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function ew(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class EI extends ZT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ei(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}class Ko{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class na extends Tf{constructor(e,t,r,o,c,u){super(e,t,r,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Xh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(t0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(he.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=na._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}na._jsonSchemaVersion="firestore/documentSnapshot/1.0",na._jsonSchema={type:fn("string",na._jsonSchemaVersion),bundleSource:fn("string","DocumentSnapshot"),bundleName:fn("string"),bundle:fn("string")};class Xh extends na{data(e={}){return super.data(e)}}class Xo{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ko(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Xh(this._firestore,this._userDataWriter,r.key,r,new Ko(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const g=new Xh(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Ko(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>c||d.type!==3)).map((d=>{const g=new Xh(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Ko(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,v=-1;return d.type!==0&&(p=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:TI(d.type),doc:g,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(he.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function TI(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:i})}}Xo._jsonSchemaVersion="firestore/querySnapshot/1.0",Xo._jsonSchema={type:fn("string",Xo._jsonSchemaVersion),bundleSource:fn("string","QuerySnapshot"),bundleName:fn("string"),bundle:fn("string")};class s0 extends ZT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ei(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}function Jf(i,e,t){i=Ws(i,Ht);const r=Ws(i.firestore,ul),o=ew(i.converter,e,t);return tw(r,[$T(Yf(r),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,ei.none())])}function Wo(i,e,t,...r){i=Ws(i,Ht);const o=Ws(i.firestore,ul),c=Yf(o);let u;return u=typeof(e=Rn(e))=="string"||e instanceof au?QT(c,"updateDoc",i._key,e,t,r):KT(c,"updateDoc",i._key,e),tw(o,[u.toMutation(i._key,ei.exists(!0))])}function Zf(i,...e){i=Rn(i);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||d1(e[r])||(t=e[r++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(d1(e[r])){const g=e[r];e[r]=g.next?.bind(g),e[r+1]=g.error?.bind(g),e[r+2]=g.complete?.bind(g)}let c,u,d;if(i instanceof Ht)u=Ws(i.firestore,ul),d=Np(i._key.path),c={next:g=>{e[r]&&e[r](wI(u,i,g))},error:e[r+1],complete:e[r+2]};else{const g=Ws(i,_l);u=Ws(g.firestore,ul),d=g._query;const p=new s0(u);c={next:v=>{e[r]&&e[r](new Xo(u,p,g,v))},error:e[r+1],complete:e[r+2]},yI(i._query)}return(function(p,v,E,w){const I=new tI(w),P=new PN(v,I,E);return p.asyncQueue.enqueueAndForget((async()=>kN(await a1(p),P))),()=>{I.Nu(),p.asyncQueue.enqueueAndForget((async()=>ON(await a1(p),P)))}})(Xp(u),d,o,c)}function tw(i,e){return(function(r,o){const c=new ea;return r.asyncQueue.enqueueAndForget((async()=>$N(await aI(r),o,c))),c.promise})(Xp(i),e)}function wI(i,e,t){const r=t.docs.get(e._key),o=new s0(i);return new na(i,o,e._key,r,new Ko(t.hasPendingWrites,t.fromCache),e.converter)}const xI={maxAttempts:5};function Ec(i,e){if((i=Rn(i)).firestore!==e)throw new Te(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class SI{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Yf(e)}get(e){const t=Ec(e,this._firestore),r=new EI(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return ke(24041);const c=o[0];if(c.isFoundDocument())return new Tf(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new Tf(this._firestore,r,t._key,null,t.converter);throw ke(18433,{doc:c})}))}set(e,t,r){const o=Ec(e,this._firestore),c=ew(o.converter,t,r),u=$T(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,r);return this._transaction.set(o._key,u),this}update(e,t,r,...o){const c=Ec(e,this._firestore);let u;return u=typeof(t=Rn(t))=="string"||t instanceof au?QT(this._dataReader,"Transaction.update",c._key,t,r,o):KT(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,u),this}delete(e){const t=Ec(e,this._firestore);return this._transaction.delete(t._key),this}}class AI extends SI{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ec(e,this._firestore),r=new s0(this._firestore);return super.get(e).then((o=>new na(this._firestore,r,t._key,o._document,new Ko(!1,!1),t.converter)))}}function ia(i,e,t){i=Ws(i,ul);const r={...xI,...t};return(function(c){if(c.maxAttempts<1)throw new Te(he.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(c,u,d){const g=new ea;return c.asyncQueue.enqueueAndForget((async()=>{const p=await oI(c);new iI(c.asyncQueue,p,d,u,g).ju()})),g.promise})(Xp(i),(o=>e(new AI(i,o))),r)}(function(e,t=!0){(function(o){gl=o})(ml),il(new Ya("firestore",((r,{instanceIdentifier:o,options:c})=>{const u=r.getProvider("app").getImmediate(),d=new ul(new fR(r.getProvider("auth-internal")),new gR(u,r.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Te(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qc(p.options.projectId,v)})(u,o),u);return c={useFetchStreams:t,...c},d._setSettings(c),d}),"PUBLIC").setMultipleInstances(!0)),Jr(pb,yb,e),Jr(pb,yb,"esm2020")})();function nw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RI=nw,iw=new Wc("auth","Firebase",nw());const wf=new _p("@firebase/auth");function CI(i,...e){wf.logLevel<=We.WARN&&wf.warn(`Auth (${ml}): ${i}`,...e)}function Wh(i,...e){wf.logLevel<=We.ERROR&&wf.error(`Auth (${ml}): ${i}`,...e)}function tr(i,...e){throw r0(i,...e)}function xs(i,...e){return r0(i,...e)}function sw(i,e,t){const r={...RI(),[e]:t};return new Wc("auth","Firebase",r).create(e,{appName:i.name})}function sa(i){return sw(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function r0(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return iw.create(i,...e)}function Le(i,e,...t){if(!i)throw r0(e,...t)}function Ys(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Wh(e),new Error(e)}function nr(i,e){i||Ys(e)}function sp(){return typeof self<"u"&&self.location?.href||""}function NI(){return p1()==="http:"||p1()==="https:"}function p1(){return typeof self<"u"&&self.location?.protocol||null}function II(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NI()||HA()||"connection"in navigator)?navigator.onLine:!0}function DI(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class lu{constructor(e,t){this.shortDelay=e,this.longDelay=t,nr(t>e,"Short delay should be less than long delay!"),this.isMobile=zA()||FA()}get(){return II()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function a0(i,e){nr(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class rw{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const kI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const OI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],MI=new lu(3e4,6e4);function ed(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function bl(i,e,t,r,o={}){return aw(i,o,async()=>{let c={},u={};r&&(e==="GET"?u=r:c={body:JSON.stringify(r)});const d=Jc({key:i.config.apiKey,...u}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const p={method:e,headers:g,...c};return qA()||(p.referrerPolicy="no-referrer"),i.emulatorConfig&&dl(i.emulatorConfig.host)&&(p.credentials="include"),rw.fetch()(await lw(i,i.config.apiHost,t,d),p)})}async function aw(i,e,t){i._canInitEmulator=!1;const r={...kI,...e};try{const o=new VI(i),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw zh(i,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const d=c.ok?u.errorMessage:u.error.message,[g,p]=d.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw zh(i,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw zh(i,"email-already-in-use",u);if(g==="USER_DISABLED")throw zh(i,"user-disabled",u);const v=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw sw(i,v,p);tr(i,v)}}catch(o){if(o instanceof sr)throw o;tr(i,"network-request-failed",{message:String(o)})}}async function ow(i,e,t,r,o={}){const c=await bl(i,e,t,r,o);return"mfaPendingCredential"in c&&tr(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function lw(i,e,t,r){const o=`${e}${t}?${r}`,c=i,u=c.config.emulator?a0(i.config,o):`${i.config.apiScheme}://${o}`;return OI.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}class VI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(xs(this.auth,"network-request-failed")),MI.get())})}}function zh(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=xs(i,e,r);return o.customData._tokenResponse=t,o}async function PI(i,e){return bl(i,"POST","/v1/accounts:delete",e)}async function xf(i,e){return bl(i,"POST","/v1/accounts:lookup",e)}function kc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jI(i,e=!1){const t=Rn(i),r=await t.getIdToken(e),o=o0(r);Le(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,u=c?.sign_in_provider;return{claims:o,token:r,authTime:kc(bg(o.auth_time)),issuedAtTime:kc(bg(o.iat)),expirationTime:kc(bg(o.exp)),signInProvider:u||null,signInSecondFactor:c?.sign_in_second_factor||null}}function bg(i){return Number(i)*1e3}function o0(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Wh("JWT malformed, contained fewer than 3 sections"),null;try{const o=dE(t);return o?JSON.parse(o):(Wh("Failed to decode base64 JWT payload"),null)}catch(o){return Wh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function y1(i){const e=o0(i);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function $c(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof sr&&LI(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function LI({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class UI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class rp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=kc(this.lastLoginAt),this.creationTime=kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Sf(i){const e=i.auth,t=await i.getIdToken(),r=await $c(i,xf(e,{idToken:t}));Le(r?.users.length,e,"internal-error");const o=r.users[0];i._notifyReloadListener(o);const c=o.providerUserInfo?.length?cw(o.providerUserInfo):[],u=BI(i.providerData,c),d=i.isAnonymous,g=!(i.email&&o.passwordHash)&&!u?.length,p=d?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new rp(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(i,v)}async function zI(i){const e=Rn(i);await Sf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BI(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function cw(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function qI(i,e){const t=await aw(i,{},async()=>{const r=Jc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,u=await lw(i,o,"/v1/token",`key=${c}`),d=await i._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:d,body:r};return i.emulatorConfig&&dl(i.emulatorConfig.host)&&(g.credentials="include"),rw.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function HI(i,e){return bl(i,"POST","/v2/accounts:revokeToken",ed(i,e))}class Jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):y1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const t=y1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:c}=await qI(e,t);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:c}=t,u=new Jo;return r&&(Le(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),o&&(Le(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),c&&(Le(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jo,this.toJSON())}_performRefresh(){return Ys("not implemented")}}function zr(i,e){Le(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class is{constructor({uid:e,auth:t,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new UI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new rp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await $c(this,this.stsTokenManager.getToken(this.auth,e));return Le(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return jI(this,e)}reload(){return zI(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new is({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Sf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ns(this.auth.app))return Promise.reject(sa(this.auth));const e=await this.getIdToken();return await $c(this,PI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:w,isAnonymous:I,providerData:P,stsTokenManager:q}=t;Le(E&&q,e,"internal-error");const D=Jo.fromJSON(this.name,q);Le(typeof E=="string",e,"internal-error"),zr(r,e.name),zr(o,e.name),Le(typeof w=="boolean",e,"internal-error"),Le(typeof I=="boolean",e,"internal-error"),zr(c,e.name),zr(u,e.name),zr(d,e.name),zr(g,e.name),zr(p,e.name),zr(v,e.name);const j=new is({uid:E,auth:e,email:o,emailVerified:w,displayName:r,isAnonymous:I,photoURL:u,phoneNumber:c,tenantId:d,stsTokenManager:D,createdAt:p,lastLoginAt:v});return P&&Array.isArray(P)&&(j.providerData=P.map(Q=>({...Q}))),g&&(j._redirectEventId=g),j}static async _fromIdTokenResponse(e,t,r=!1){const o=new Jo;o.updateFromServerResponse(t);const c=new is({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Sf(c),c}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Le(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?cw(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!c?.length,d=new Jo;d.updateFromIdToken(r);const g=new is({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new rp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,p),g}}const v1=new Map;function Xs(i){nr(i instanceof Function,"Expected a class definition");let e=v1.get(i);return e?(nr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,v1.set(i,e),e)}class uw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}uw.type="NONE";const _1=uw;function Jh(i,e,t){return`firebase:${i}:${e}:${t}`}class Zo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=Jh(this.userKey,o.apiKey,c),this.fullPersistenceKey=Jh("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await xf(this.auth,{idToken:e}).catch(()=>{});return t?is._fromGetAccountInfoResponse(this.auth,t,e):null}return is._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Zo(Xs(_1),e,r);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let c=o[0]||Xs(_1);const u=Jh(r,e.config.apiKey,e.name);let d=null;for(const p of t)try{const v=await p._get(u);if(v){let E;if(typeof v=="string"){const w=await xf(e,{idToken:v}).catch(()=>{});if(!w)break;E=await is._fromGetAccountInfoResponse(e,w,v)}else E=is._fromJSON(e,v);p!==c&&(d=E),c=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Zo(c,e,r):(c=g[0],d&&await c._set(u,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==c)try{await p._remove(u)}catch{}})),new Zo(c,e,r))}}function b1(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pw(e))return"Blackberry";if(yw(e))return"Webos";if(fw(e))return"Safari";if((e.includes("chrome/")||dw(e))&&!e.includes("edge/"))return"Chrome";if(gw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if(r?.length===2)return r[1]}return"Other"}function hw(i=Gn()){return/firefox\//i.test(i)}function fw(i=Gn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dw(i=Gn()){return/crios\//i.test(i)}function mw(i=Gn()){return/iemobile/i.test(i)}function gw(i=Gn()){return/android/i.test(i)}function pw(i=Gn()){return/blackberry/i.test(i)}function yw(i=Gn()){return/webos/i.test(i)}function l0(i=Gn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function FI(i=Gn()){return l0(i)&&!!window.navigator?.standalone}function GI(){return GA()&&document.documentMode===10}function vw(i=Gn()){return l0(i)||gw(i)||yw(i)||pw(i)||/windows phone/i.test(i)||mw(i)}function _w(i,e=[]){let t;switch(i){case"Browser":t=b1(Gn());break;case"Worker":t=`${b1(Gn())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ml}/${r}`}class $I{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=c=>new Promise((u,d)=>{try{const g=e(c);u(g)}catch(g){d(g)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function KI(i,e={}){return bl(i,"GET","/v2/passwordPolicy",ed(i,e))}const QI=6;class YI{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??QI,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class XI{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new E1(this),this.idTokenSubscription=new E1(this),this.beforeStateQueue=new $I(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Zo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await xf(this,{idToken:e}),r=await is._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ns(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,u=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!c||c===u)&&d?.user&&(r=d.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Sf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ns(this.app))return Promise.reject(sa(this));const t=e?Rn(e):null;return t&&Le(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ns(this.app)?Promise.reject(sa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ns(this.app)?Promise.reject(sa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KI(this),t=new YI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await HI(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xs(e)||this._popupRedirectResolver;Le(t,this,"argument-error"),this.redirectPersistenceManager=await Zo.create(this,[Xs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(d,this,"internal-error"),d.then(()=>{u||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,r,o);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_w(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ns(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&CI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function td(i){return Rn(i)}class E1{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZA(t=>this.observer=t)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let c0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WI(i){c0=i}function JI(i){return c0.loadJS(i)}function ZI(){return c0.gapiScript}function eD(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function tD(i,e){const t=Ep(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(Qa(c,e??{}))return o;tr(o,"already-initialized")}return t.initialize({options:e})}function nD(i,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Xs);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function iD(i,e,t){const r=td(i);Le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=bw(e),{host:u,port:d}=sD(e),g=d===null?"":`:${d}`,p={url:`${c}//${u}${g}/`},v=Object.freeze({host:u,port:d,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Le(Qa(p,r.config.emulator)&&Qa(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,dl(u)?(yE(`${c}//${u}${g}`),vE("Auth",!0)):rD()}function bw(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function sD(i){const e=bw(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:T1(r.substr(c.length+1))}}else{const[c,u]=r.split(":");return{host:c,port:T1(u)}}}function T1(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function rD(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class Ew{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ys("not implemented")}_getIdTokenResponse(e){return Ys("not implemented")}_linkToIdToken(e,t){return Ys("not implemented")}_getReauthenticationResolver(e){return Ys("not implemented")}}async function el(i,e){return ow(i,"POST","/v1/accounts:signInWithIdp",ed(i,e))}const aD="http://localhost";class Ja extends Ew{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ja(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):tr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...c}=t;if(!r||!o)return null;const u=new Ja(r,o);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return el(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,el(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,el(e,t)}buildRequest(){const e={requestUri:aD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Jc(t)}return e}}class Tw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class cu extends Tw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Gr extends cu{constructor(){super("facebook.com")}static credential(e){return Ja._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gr.credential(e.oauthAccessToken)}catch{return null}}}Gr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gr.PROVIDER_ID="facebook.com";class $r extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ja._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return $r.credential(t,r)}catch{return null}}}$r.GOOGLE_SIGN_IN_METHOD="google.com";$r.PROVIDER_ID="google.com";class Kr extends cu{constructor(){super("github.com")}static credential(e){return Ja._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kr.credential(e.oauthAccessToken)}catch{return null}}}Kr.GITHUB_SIGN_IN_METHOD="github.com";Kr.PROVIDER_ID="github.com";class Qr extends cu{constructor(){super("twitter.com")}static credential(e,t){return Ja._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Qr.credential(t,r)}catch{return null}}}Qr.TWITTER_SIGN_IN_METHOD="twitter.com";Qr.PROVIDER_ID="twitter.com";async function oD(i,e){return ow(i,"POST","/v1/accounts:signUp",ed(i,e))}class ha{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const c=await is._fromIdTokenResponse(e,r,o),u=w1(r);return new ha({user:c,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=w1(r);return new ha({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function w1(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}async function Za(i){if(ns(i.app))return Promise.reject(sa(i));const e=td(i);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new ha({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await oD(e,{returnSecureToken:!0}),r=await ha._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class Af extends sr{constructor(e,t,r,o){super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Af.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new Af(e,t,r,o)}}function ww(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Af._fromErrorAndOperation(i,c,e,r):c})}async function lD(i,e,t=!1){const r=await $c(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return ha._forOperation(i,"link",r)}async function cD(i,e,t=!1){const{auth:r}=i;if(ns(r.app))return Promise.reject(sa(r));const o="reauthenticate";try{const c=await $c(i,ww(r,o,e,i),t);Le(c.idToken,r,"internal-error");const u=o0(c.idToken);Le(u,r,"internal-error");const{sub:d}=u;return Le(i.uid===d,r,"user-mismatch"),ha._forOperation(i,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&tr(r,"user-mismatch"),c}}async function uD(i,e,t=!1){if(ns(i.app))return Promise.reject(sa(i));const r="signIn",o=await ww(i,r,e),c=await ha._fromIdTokenResponse(i,r,o);return t||await i._updateCurrentUser(c.user),c}function hD(i,e,t,r){return Rn(i).onIdTokenChanged(e,t,r)}function fD(i,e,t){return Rn(i).beforeAuthStateChanged(e,t)}const Rf="__sak";class xw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Rf,"1"),this.storage.removeItem(Rf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const dD=1e3,mD=10;class Sw extends xw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,g)=>{this.notifyListeners(u,g)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},c=this.storage.getItem(r);GI()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,mD):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},dD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Sw.type="LOCAL";const gD=Sw;class Aw extends xw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Aw.type="SESSION";const Rw=Aw;function pD(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class nd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new nd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:c}=t.data,u=this.handlersMap[o];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const d=Array.from(u).map(async p=>p(t.origin,c)),g=await pD(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nd.receivers=[];function u0(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}class yD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,u;return new Promise((d,g)=>{const p=u0("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},r);u={messageChannel:o,onMessage(E){const w=E;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(v),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),d(w.data.response);break;default:clearTimeout(v),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function Ss(){return window}function vD(i){Ss().location.href=i}function Cw(){return typeof Ss().WorkerGlobalScope<"u"&&typeof Ss().importScripts=="function"}async function _D(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bD(){return navigator?.serviceWorker?.controller||null}function ED(){return Cw()?self:null}const Nw="firebaseLocalStorageDb",TD=1,Cf="firebaseLocalStorage",Iw="fbase_key";class uu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function id(i,e){return i.transaction([Cf],e?"readwrite":"readonly").objectStore(Cf)}function wD(){const i=indexedDB.deleteDatabase(Nw);return new uu(i).toPromise()}function ap(){const i=indexedDB.open(Nw,TD);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Cf,{keyPath:Iw})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Cf)?e(r):(r.close(),await wD(),e(await ap()))})})}async function x1(i,e,t){const r=id(i,!0).put({[Iw]:e,value:t});return new uu(r).toPromise()}async function xD(i,e){const t=id(i,!1).get(e),r=await new uu(t).toPromise();return r===void 0?null:r.value}function S1(i,e){const t=id(i,!0).delete(e);return new uu(t).toPromise()}const SD=800,AD=3;class Dw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ap(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>AD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Cw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nd._getInstance(ED()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _D(),!this.activeServiceWorker)return;this.sender=new yD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ap();return await x1(e,Rf,"1"),await S1(e,Rf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>x1(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>xD(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>S1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=id(o,!1).getAll();return new uu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Dw.type="LOCAL";const RD=Dw;new lu(3e4,6e4);function CD(i,e){return e?Xs(e):(Le(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class h0 extends Ew{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return el(e,this._buildIdpRequest())}_linkToIdToken(e,t){return el(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return el(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ND(i){return uD(i.auth,new h0(i),i.bypassAuthState)}function ID(i){const{auth:e,user:t}=i;return Le(t,e,"internal-error"),cD(t,new h0(i),i.bypassAuthState)}async function DD(i){const{auth:e,user:t}=i;return Le(t,e,"internal-error"),lD(t,new h0(i),i.bypassAuthState)}class kw{constructor(e,t,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:c,error:u,type:d}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ND;case"linkViaPopup":case"linkViaRedirect":return DD;case"reauthViaPopup":case"reauthViaRedirect":return ID;default:tr(this.auth,"internal-error")}}resolve(e){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const kD=new lu(2e3,1e4);class Qo extends kw{constructor(e,t,r,o,c){super(e,t,o,c),this.provider=r,this.authWindow=null,this.pollId=null,Qo.currentPopupAction&&Qo.currentPopupAction.cancel(),Qo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){nr(this.filter.length===1,"Popup operations only handle one event");const e=u0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(xs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(xs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kD.get())};e()}}Qo.currentPopupAction=null;const OD="pendingRedirect",Zh=new Map;class MD extends kw{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Zh.get(this.auth._key());if(!e){try{const r=await VD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Zh.set(this.auth._key(),e)}return this.bypassAuthState||Zh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VD(i,e){const t=LD(e),r=jD(i);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function PD(i,e){Zh.set(i._key(),e)}function jD(i){return Xs(i._redirectPersistence)}function LD(i){return Jh(OD,i.config.apiKey,i.name)}async function UD(i,e,t=!1){if(ns(i.app))return Promise.reject(sa(i));const r=td(i),o=CD(r,e),u=await new MD(r,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}const zD=600*1e3;class BD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Ow(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(xs(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zD&&this.cachedEventUids.clear(),this.cachedEventUids.has(A1(e))}saveEventToCache(e){this.cachedEventUids.add(A1(e)),this.lastProcessedEventTime=Date.now()}}function A1(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Ow({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function qD(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ow(i);default:return!1}}async function HD(i,e={}){return bl(i,"GET","/v1/projects",e)}const FD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GD=/^https?/;async function $D(i){if(i.config.emulator)return;const{authorizedDomains:e}=await HD(i);for(const t of e)try{if(KD(t))return}catch{}tr(i,"unauthorized-domain")}function KD(i){const e=sp(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const u=new URL(i);return u.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!GD.test(t))return!1;if(FD.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const QD=new lu(3e4,6e4);function R1(){const i=Ss().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function YD(i){return new Promise((e,t)=>{function r(){R1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{R1(),t(xs(i,"network-request-failed"))},timeout:QD.get()})}if(Ss().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ss().gapi?.load)r();else{const o=eD("iframefcb");return Ss()[o]=()=>{gapi.load?r():t(xs(i,"network-request-failed"))},JI(`${ZI()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw ef=null,e})}let ef=null;function XD(i){return ef=ef||YD(i),ef}const WD=new lu(5e3,15e3),JD="__/auth/iframe",ZD="emulator/auth/iframe",e4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},t4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function n4(i){const e=i.config;Le(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?a0(e,ZD):`https://${i.config.authDomain}/${JD}`,r={apiKey:e.apiKey,appName:i.name,v:ml},o=t4.get(i.config.apiHost);o&&(r.eid=o);const c=i._getFrameworks();return c.length&&(r.fw=c.join(",")),`${t}?${Jc(r).slice(1)}`}async function i4(i){const e=await XD(i),t=Ss().gapi;return Le(t,i,"internal-error"),e.open({where:document.body,url:n4(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:e4,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const u=xs(i,"network-request-failed"),d=Ss().setTimeout(()=>{c(u)},WD.get());function g(){Ss().clearTimeout(d),o(r)}r.ping(g).then(g,()=>{c(u)})}))}const s4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},r4=500,a4=600,o4="_blank",l4="http://localhost";class C1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function c4(i,e,t,r=r4,o=a4){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const g={...s4,width:r.toString(),height:o.toString(),top:c,left:u},p=Gn().toLowerCase();t&&(d=dw(p)?o4:t),hw(p)&&(e=e||l4,g.scrollbars="yes");const v=Object.entries(g).reduce((w,[I,P])=>`${w}${I}=${P},`,"");if(FI(p)&&d!=="_self")return u4(e||"",d),new C1(null);const E=window.open(e||"",d,v);Le(E,i,"popup-blocked");try{E.focus()}catch{}return new C1(E)}function u4(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const h4="__/auth/handler",f4="emulator/auth/handler",d4=encodeURIComponent("fac");async function N1(i,e,t,r,o,c){Le(i.config.authDomain,i,"auth-domain-config-required"),Le(i.config.apiKey,i,"invalid-api-key");const u={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:ml,eventId:o};if(e instanceof Tw){e.setDefaultLanguage(i.languageCode),u.providerId=e.providerId||"",JA(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))u[v]=E}if(e instanceof cu){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(u.scopes=v.join(","))}i.tenantId&&(u.tid=i.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const g=await i._getAppCheckToken(),p=g?`#${d4}=${encodeURIComponent(g)}`:"";return`${m4(i)}?${Jc(d).slice(1)}${p}`}function m4({config:i}){return i.emulator?a0(i,f4):`https://${i.authDomain}/${h4}`}const Eg="webStorageSupport";class g4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rw,this._completeRedirectFn=UD,this._overrideRedirectResult=PD}async _openPopup(e,t,r,o){nr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await N1(e,t,r,sp(),o);return c4(e,c,u0())}async _openRedirect(e,t,r,o){await this._originValidation(e);const c=await N1(e,t,r,sp(),o);return vD(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(nr(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await i4(e),r=new BD(e);return t.register("authEvent",o=>(Le(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Eg,{type:Eg},o=>{const c=o?.[0]?.[Eg];c!==void 0&&t(!!c),tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$D(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vw()||fw()||l0()}}const p4=g4;var I1="@firebase/auth",D1="1.12.0";class y4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function v4(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _4(i){il(new Ya("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;Le(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:u,authDomain:d,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_w(i)},p=new XI(r,o,c,g);return nD(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),il(new Ya("auth-internal",e=>{const t=td(e.getProvider("auth").getImmediate());return(r=>new y4(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jr(I1,D1,v4(i)),Jr(I1,D1,"esm2020")}const b4=300,E4=pE("authIdTokenMaxAge")||b4;let k1=null;const T4=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>E4)return;const o=t?.token;k1!==o&&(k1=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function eo(i=TE()){const e=Ep(i,"auth");if(e.isInitialized())return e.getImmediate();const t=tD(i,{popupRedirectResolver:p4,persistence:[RD,gD,Rw]}),r=pE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const u=T4(c.toString());fD(t,u,()=>u(t.currentUser)),hD(t,d=>u(d))}}const o=mE("auth");return o&&iD(t,`http://${o}`),t}function w4(){return document.getElementsByTagName("head")?.[0]??document}WI({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const c=xs("internal-error");c.customData=o,t(c)},r.type="text/javascript",r.charset="UTF-8",w4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_4("Browser");var x4="firebase",S4="12.7.0";Jr(x4,S4,"app");const O1={apiKey:"AIzaSyB3ncjSdbTdaUqac5QvHon-Id5mCo3pByM",authDomain:"dragmate-af04d.firebaseapp.com",projectId:"dragmate-af04d",storageBucket:"dragmate-af04d.firebasestorage.app",messagingSenderId:"370425129874",appId:"1:370425129874:web:4c5c526a593e8fa45a6f4b"};let Tg=null,Oe=null,tf=null,jt=!1;try{Object.values(O1).every(Boolean)?(Tg=hb().length?hb()[0]:EE(O1),Oe=cI(Tg),tf=eo(Tg),jt=!0,console.log(" Firebase initialized for DragMate")):console.warn(" DEMO MODE: Firebase env vars missing. Global features will run in local/demo mode only.")}catch(i){console.error(" Firebase initialization failed:",i)}const M1=3e4;async function A4(i){return i?i.currentUser?i.currentUser:(await Za(i)).user??null:null}async function V1(i,e){const t=Zt(i,"presence",e.uid);await Jf(t,{lastSeen:new Date,status:"online"},{merge:!0})}function R4(){const[i,e]=z.useState({count:null,loading:!0,error:null,isOnline:!1,isSupported:jt&&!!Oe&&!!tf});return z.useEffect(()=>{if(!jt||!Oe||!tf){e(g=>({...g,loading:!1,isSupported:!1}));return}const t=Oe,r=tf;let o=!1,c=null,u=null;return(async()=>{try{const g=await A4(r);if(!g||o)return;await V1(t,g),e(E=>({...E,isOnline:!0,isSupported:!0})),c=window.setInterval(()=>{V1(t,g).catch(E=>{console.error("Failed to update presence",E)})},M1/2);const p=new Date(Date.now()-M1),v=_I(Jt(t,"presence"),bI("lastSeen",">=",p));u=Zf(v,E=>{o||e(w=>({...w,count:E.size,loading:!1,error:null}))},E=>{console.error("Presence subscription error",E),!o&&e(w=>({...w,loading:!1,error:E.message??"Failed to subscribe to presence"}))})}catch(g){if(console.error("Presence initialization failed",g),o)return;e(p=>({...p,loading:!1,error:g?.message??"Presence initialization failed",isSupported:!1}))}})(),()=>{o=!0,c!==null&&window.clearInterval(c),u&&u()}},[]),i}const C4=({onCreateRoom:i,onJoinRoom:e,onStartLocal:t,isAuthLoading:r,onSelectGame:o,selectedGame:c,onCreateOkeyRoom:u,onJoinOkeyRoom:d,onStartOkeyGame:g,okeyRoom:p,okeyUserId:v})=>{const[E,w]=z.useState("game-select"),[I,P]=z.useState(""),[q,D]=z.useState(!1),[j,Q]=z.useState(""),[F,ce]=z.useState(!1),[G,U]=z.useState(""),[S,x]=z.useState(!1),{count:C,loading:M,isSupported:R}=R4(),O=async()=>{D(!0);try{await i()}finally{D(!1)}},k=async()=>{if(!(!j.trim()||!u)){D(!0);try{await u(j.trim())&&w("okey-waiting")}finally{D(!1)}}},be=async()=>{if(!(!j.trim()||!G.trim()||!d)){ce(!0);try{await d(G.trim().toUpperCase(),j.trim())&&w("okey-waiting")}finally{ce(!1)}}},me=()=>{p?.roomId&&(navigator.clipboard.writeText(p.roomId),x(!0),setTimeout(()=>x(!1),2e3))},H=p?.hostUserId===v,Z=()=>_.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-500",children:[_.jsx("h2",{className:"text-2xl font-bold text-white text-center",children:"Choose Your Game"}),_.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[_.jsx("button",{onClick:()=>{o("chess"),w("mode-select")},className:"group relative w-full aspect-square sm:aspect-[4/5] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-indigo-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-indigo-500/20 overflow-hidden text-left p-4 sm:p-6 flex flex-col justify-between",children:_.jsxs("div",{children:[_.jsx(Vg,{className:"w-8 h-8 sm:w-10 sm:h-10 text-indigo-400 mb-2 sm:mb-3 group-hover:scale-110 transition-transform"}),_.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white",children:"CHESS"}),_.jsx("p",{className:"text-slate-400 text-xs sm:text-sm font-medium mt-1",children:"Classic strategy."})]})}),_.jsxs("button",{onClick:()=>{o("backgammon"),w("mode-select")},className:"group relative w-full aspect-square sm:aspect-[4/5] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-emerald-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-emerald-500/20 overflow-hidden text-left p-4 sm:p-6 flex flex-col justify-between",children:[_.jsx("div",{className:"absolute top-0 right-0 p-1.5 sm:p-2 bg-emerald-500/10 text-emerald-300 rounded-bl-2xl text-[8px] sm:text-[10px] font-black uppercase tracking-widest border-b border-l border-emerald-500/20",children:"New"}),_.jsxs("div",{children:[_.jsx(lA,{className:"w-8 h-8 sm:w-10 sm:h-10 text-emerald-400 mb-2 sm:mb-3 group-hover:scale-110 transition-transform"}),_.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white",children:"TAVLA"}),_.jsx("p",{className:"text-slate-400 text-xs sm:text-sm font-medium mt-1",children:"Persian legacy."})]})]}),_.jsxs("button",{onClick:()=>{o("okey"),w("mode-select")},className:"group relative w-full aspect-square sm:aspect-[4/5] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-amber-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-amber-500/20 overflow-hidden text-left p-4 sm:p-6 flex flex-col justify-between",children:[_.jsx("div",{className:"absolute top-0 right-0 p-1.5 sm:p-2 bg-amber-500/10 text-amber-300 rounded-bl-2xl text-[8px] sm:text-[10px] font-black uppercase tracking-widest border-b border-l border-amber-500/20",children:"Top"}),_.jsxs("div",{children:[_.jsx(dA,{className:"w-8 h-8 sm:w-10 sm:h-10 text-amber-400 mb-2 sm:mb-3 group-hover:scale-110 transition-transform"}),_.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white",children:"OKEY"}),_.jsx("p",{className:"text-slate-400 text-xs sm:text-sm font-medium mt-1",children:"Turkish Rummy."})]})]})]})]}),se=()=>_.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-right-8 duration-500",children:[_.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[_.jsx("button",{onClick:()=>w("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:_.jsx(Ha,{size:20})}),_.jsx("h2",{className:"text-2xl font-bold text-white",children:"Select Threat Level"})]}),_.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[_.jsx("button",{onClick:()=>t("Easy"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-green-500/50 hover:bg-slate-800 transition-all",children:_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("div",{className:"p-3 rounded-full bg-green-500/10 text-green-400",children:_.jsx(Fa,{size:20})}),_.jsxs("div",{className:"text-left",children:[_.jsx("div",{className:"text-lg font-bold text-white",children:"Easy"}),_.jsx("div",{className:"text-xs text-slate-500",children:"Casual play"})]})]})}),_.jsx("button",{onClick:()=>t("Normal"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-indigo-500/50 hover:bg-slate-800 transition-all",children:_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("div",{className:"p-3 rounded-full bg-indigo-500/10 text-indigo-400",children:_.jsx(Fa,{size:20})}),_.jsxs("div",{className:"text-left",children:[_.jsx("div",{className:"text-lg font-bold text-white",children:"Normal"}),_.jsx("div",{className:"text-xs text-slate-500",children:"Balanced opponent"})]})]})}),_.jsx("button",{onClick:()=>t("Hard"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-red-500/50 hover:bg-slate-800 transition-all",children:_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("div",{className:"p-3 rounded-full bg-red-500/10 text-red-400",children:_.jsx(Vg,{size:20})}),_.jsxs("div",{className:"text-left",children:[_.jsx("div",{className:"text-lg font-bold text-white",children:"Hard"}),_.jsx("div",{className:"text-xs text-slate-500",children:"Ruthless tactics"})]})]})})]})]}),pe=()=>_.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-right-8 duration-500",children:[_.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[_.jsx("button",{onClick:()=>w("game-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:_.jsx(Ha,{size:20})}),_.jsx("h2",{className:"text-2xl font-bold text-white",children:"Select Mode"})]}),_.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[_.jsxs("button",{onClick:()=>w("difficulty-select"),className:"group flex flex-col items-center justify-center gap-4 p-8 bg-slate-800/50 rounded-2xl border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all",children:[_.jsx("div",{className:"p-4 rounded-full bg-emerald-500/10 text-emerald-400 group-hover:scale-110 transition-transform",children:_.jsx(Fa,{size:32})}),_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"text-xl font-bold text-white",children:"Single Player"}),_.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"Vs Computer"})]})]}),_.jsxs("button",{onClick:()=>w(c==="okey"?"okey-name":"connection"),className:"group flex flex-col items-center justify-center gap-4 p-8 bg-slate-800/50 rounded-2xl border border-slate-700 hover:border-indigo-500/50 hover:bg-slate-800 transition-all",children:[_.jsx("div",{className:"p-4 rounded-full bg-indigo-500/10 text-indigo-400 group-hover:scale-110 transition-transform",children:_.jsx(Vf,{size:32})}),_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"text-xl font-bold text-white",children:"Multiplayer"}),_.jsx("div",{className:"text-sm text-slate-500 mt-1",children:c==="okey"?"1-4 Players":"Online PvP"})]})]})]})]}),ye=()=>_.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500",children:[_.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[_.jsx("button",{onClick:()=>w("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:_.jsx(Ha,{size:20})}),_.jsx("h2",{className:"text-2xl font-bold text-white",children:"Multiplayer"})]}),_.jsxs("div",{className:"space-y-6",children:[_.jsxs("button",{onClick:O,disabled:q||r,className:"w-full btn-premium flex items-center justify-center gap-3 sm:gap-4 text-lg py-4 group disabled:opacity-50 disabled:cursor-not-allowed",children:[q||r?_.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"}):_.jsx(nb,{size:24,className:"transition-transform group-hover:rotate-90"}),_.jsx("span",{children:r?"Initializing...":q?"Creating Arena...":"Create New Room"})]}),_.jsxs("div",{className:"relative flex items-center gap-6",children:[_.jsx("div",{className:"flex-1 h-px bg-slate-800"}),_.jsx("span",{className:"text-slate-600 text-xs font-black uppercase tracking-[0.2em]",children:"OR JOIN"}),_.jsx("div",{className:"flex-1 h-px bg-slate-800"})]}),_.jsxs("div",{className:"flex gap-3",children:[_.jsx("input",{type:"text",placeholder:"Enter Room ID",value:I,onChange:ue=>P(ue.target.value),className:"flex-1 bg-slate-900/40 border border-slate-800/50 rounded-xl px-4 py-4 text-lg placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all"}),_.jsx("button",{onClick:()=>e(I),disabled:!I.trim()||r,className:"bg-slate-800 hover:bg-slate-700 text-white disabled:opacity-50 px-6 rounded-xl transition-all font-bold shadow-lg",children:_.jsx(tb,{size:24})})]})]})]}),V=()=>_.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500",children:[_.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[_.jsx("button",{onClick:()=>w("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:_.jsx(Ha,{size:20})}),_.jsx("h2",{className:"text-2xl font-bold text-white",children:"Okey Multiplayer"})]}),_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{className:"text-sm font-medium text-slate-400",children:"Your Name"}),_.jsx("input",{type:"text",placeholder:"Enter your name...",value:j,onChange:ue=>Q(ue.target.value),maxLength:20,className:"w-full bg-slate-900/40 border border-slate-800/50 rounded-xl px-4 py-4 text-lg placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-amber-500/30 transition-all"})]}),_.jsxs("button",{onClick:k,disabled:!j.trim()||q||r,className:"w-full bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-bold flex items-center justify-center gap-3 text-lg py-4 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg shadow-amber-500/20",children:[q?_.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"}):_.jsx(nb,{size:24}),_.jsx("span",{children:q?"Creating Room...":"Create New Room"})]}),_.jsxs("div",{className:"relative flex items-center gap-6",children:[_.jsx("div",{className:"flex-1 h-px bg-slate-800"}),_.jsx("span",{className:"text-slate-600 text-xs font-black uppercase tracking-[0.2em]",children:"OR JOIN"}),_.jsx("div",{className:"flex-1 h-px bg-slate-800"})]}),_.jsxs("div",{className:"flex gap-3",children:[_.jsx("input",{type:"text",placeholder:"Room ID",value:G,onChange:ue=>U(ue.target.value.toUpperCase()),maxLength:10,className:"flex-1 bg-slate-900/40 border border-slate-800/50 rounded-xl px-4 py-4 text-lg placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-amber-500/30 transition-all uppercase"}),_.jsx("button",{onClick:be,disabled:!j.trim()||!G.trim()||F||r,className:"bg-slate-800 hover:bg-slate-700 text-white disabled:opacity-50 px-6 rounded-xl transition-all font-bold shadow-lg",children:F?_.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"}):_.jsx(tb,{size:24})})]}),_.jsx("p",{className:"text-xs text-slate-600 text-center",children:"Create a room and share the ID with friends. Empty slots will be filled with AI."})]})]}),$=()=>{if(!p)return _.jsx("div",{className:"flex items-center justify-center py-20",children:_.jsx("div",{className:"w-8 h-8 border-2 border-amber-500/20 border-t-amber-500 rounded-full animate-spin"})});const ue=p.players.filter(ge=>ge.odaUserId&&!ge.adIsAI).length;return _.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500",children:[_.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[_.jsx("button",{onClick:()=>w("okey-name"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:_.jsx(Ha,{size:20})}),_.jsx("h2",{className:"text-2xl font-bold text-white",children:"Waiting Room"})]}),_.jsx("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-bold",children:"Room ID"}),_.jsx("p",{className:"text-2xl font-black text-amber-400 tracking-widest",children:p.roomId})]}),_.jsx("button",{onClick:me,className:"p-3 bg-slate-700/50 hover:bg-slate-700 rounded-lg transition-colors",children:S?_.jsx(iA,{size:20,className:"text-green-400"}):_.jsx(yp,{size:20,className:"text-slate-400"})})]})}),_.jsxs("div",{className:"space-y-3",children:[_.jsxs("p",{className:"text-sm font-medium text-slate-400",children:["Players (",ue,"/4)"]}),_.jsx("div",{className:"grid grid-cols-2 gap-3",children:p.players.map((ge,Ee)=>{const Re=ge.odaUserId===v,Ve=!ge.odaUserId,xt=ge.odaUserId===p.hostUserId;return _.jsx("div",{className:`p-4 rounded-xl border transition-all ${Ve?"bg-slate-900/30 border-slate-800 border-dashed":Re?"bg-amber-500/10 border-amber-500/50":"bg-slate-800/50 border-slate-700"}`,children:_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:`p-2 rounded-full ${Ve?"bg-slate-800":Re?"bg-amber-500/20":"bg-slate-700"}`,children:Ve?_.jsx(of,{size:18,className:"text-slate-600"}):_.jsx(Fa,{size:18,className:Re?"text-amber-400":"text-slate-400"})}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsx("p",{className:`font-bold truncate ${Ve?"text-slate-600":Re?"text-amber-400":"text-white"}`,children:Ve?"Waiting...":ge.adPlayerName}),_.jsx("p",{className:"text-xs text-slate-500",children:xt?" Host":Ve?"Will be AI":`Seat ${Ee+1}`})]})]})},Ee)})})]}),H&&_.jsxs("button",{onClick:g,className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-bold flex items-center justify-center gap-3 text-lg py-4 rounded-xl transition-all shadow-lg shadow-green-500/20",children:[_.jsx(_A,{size:24}),_.jsx("span",{children:"Start Game"})]}),!H&&_.jsx("div",{className:"text-center py-4",children:_.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[_.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full animate-pulse"}),_.jsx("span",{className:"text-sm",children:"Waiting for host to start..."})]})}),_.jsx("p",{className:"text-xs text-slate-600 text-center",children:"Share the Room ID with friends. Empty seats will be filled with AI players."})]})};return _.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[85vh] gap-8 lg:gap-12 relative overflow-hidden px-4",children:[_.jsx("div",{className:"text-center space-y-4 lg:space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-1000",children:_.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-8xl font-black tracking-normal pb-4 bg-clip-text text-transparent bg-linear-to-b from-white via-indigo-100 to-indigo-400",children:"DragMate"})}),_.jsxs("div",{className:"liquid-glass p-6 sm:p-8 w-full max-w-xl min-h-[400px] flex flex-col justify-center",children:[E==="game-select"&&Z(),E==="mode-select"&&pe(),E==="difficulty-select"&&se(),E==="connection"&&ye(),E==="okey-name"&&V(),E==="okey-waiting"&&$()]}),_.jsx("div",{className:"flex items-center gap-10 text-slate-600 font-bold uppercase tracking-widest text-[10px] animate-in fade-in duration-1000 delay-500",children:_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${R?"bg-green-500":"bg-slate-600"}`}),R?`${M?"...":(C??0).toLocaleString()} Online`:"Demo Mode"]})})]})};function N4(i){return i!==null?{comment:i,variations:[]}:{variations:[]}}function I4(i,e,t,r,o){const c={move:i,variations:o};return e&&(c.suffix=e),t&&(c.nag=t),r!==null&&(c.comment=r),c}function D4(...i){const[e,...t]=i;let r=e;for(const o of t)o!==null&&(r.variations=[o,...o.variations],o.variations=[],r=o);return e}function k4(i,e){if(e.marker&&e.marker.comment){let t=e.root;for(;;){const r=t.variations[0];if(!r){t.comment=e.marker.comment;break}t=r}}return{headers:i,root:e.root,result:(e.marker&&e.marker.result)??void 0}}function O4(i,e){function t(){this.constructor=i}t.prototype=e.prototype,i.prototype=new t}function hl(i,e,t,r){var o=Error.call(this,i);return Object.setPrototypeOf&&Object.setPrototypeOf(o,hl.prototype),o.expected=e,o.found=t,o.location=r,o.name="SyntaxError",o}O4(hl,Error);function wg(i,e,t){return t=t||" ",i.length>e?i:(e-=i.length,t+=t.repeat(e),i+t.slice(0,e))}hl.prototype.format=function(i){var e="Error: "+this.message;if(this.location){var t=null,r;for(r=0;r<i.length;r++)if(i[r].source===this.location.source){t=i[r].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,c=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(o):o,u=this.location.source+":"+c.line+":"+c.column;if(t){var d=this.location.end,g=wg("",c.line.toString().length," "),p=t[o.line-1],v=o.line===d.line?d.column:p.length+1,E=v-o.column||1;e+=`
 --> `+u+`
`+g+` |
`+c.line+" | "+p+`
`+g+" | "+wg("",o.column-1," ")+wg("",E,"^")}else e+=`
 at `+u}return e};hl.buildMessage=function(i,e){var t={literal:function(p){return'"'+o(p.text)+'"'},class:function(p){var v=p.parts.map(function(E){return Array.isArray(E)?c(E[0])+"-"+c(E[1]):c(E)});return"["+(p.inverted?"^":"")+v.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(p){return p.description}};function r(p){return p.charCodeAt(0).toString(16).toUpperCase()}function o(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+r(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+r(v)})}function c(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+r(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+r(v)})}function u(p){return t[p.type](p)}function d(p){var v=p.map(u),E,w;if(v.sort(),v.length>0){for(E=1,w=1;E<v.length;E++)v[E-1]!==v[E]&&(v[w]=v[E],w++);v.length=w}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}function g(p){return p?'"'+o(p)+'"':"end of input"}return"Expected "+d(i)+" but "+g(e)+" found."};function M4(i,e){e=e!==void 0?e:{};var t={},r=e.grammarSource,o={pgn:io},c=io,u="[",d='"',g="]",p=".",v="O-O-O",E="O-O",w="0-0-0",I="0-0",P="$",q="{",D="}",j=";",Q="(",F=")",ce="1-0",G="0-1",U="1/2-1/2",S="*",x=/^[a-zA-Z]/,C=/^[^"]/,M=/^[0-9]/,R=/^[.]/,O=/^[a-zA-Z1-8\-=]/,k=/^[+#]/,be=/^[!?]/,me=/^[^}]/,H=/^[^\r\n]/,Z=/^[ \t\r\n]/,se=yt("tag pair"),pe=it("[",!1),ye=it('"',!1),V=it("]",!1),$=yt("tag name"),ue=kt([["a","z"],["A","Z"]],!1,!1),ge=yt("tag value"),Ee=kt(['"'],!0,!1),Re=yt("move number"),Ve=kt([["0","9"]],!1,!1),xt=it(".",!1),ht=kt(["."],!1,!1),Ft=yt("standard algebraic notation"),xi=it("O-O-O",!1),Ln=it("O-O",!1),qi=it("0-0-0",!1),en=it("0-0",!1),fi=kt([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),Un=kt(["+","#"],!1,!1),as=yt("suffix annotation"),Hi=kt(["!","?"],!1,!1),St=yt("NAG"),ft=it("$",!1),$n=yt("brace comment"),os=it("{",!1),ls=kt(["}"],!0,!1),tn=it("}",!1),Fi=yt("rest of line comment"),Rs=it(";",!1),Kn=kt(["\r",`
`],!0,!1),Cn=yt("variation"),Gi=it("(",!1),Cs=it(")",!1),Qn=yt("game termination marker"),Ns=it("1-0",!1),Yn=it("0-1",!1),Gt=it("1/2-1/2",!1),bn=it("*",!1),At=yt("whitespace"),Is=kt([" ","	","\r",`
`],!1,!1),$i=function(Y,ie){return k4(Y,ie)},rr=function(Y){return Object.fromEntries(Y)},ni=function(Y,ie){return[Y,ie]},Ki=function(Y,ie){return{root:Y,marker:ie}},Ge=function(Y,ie){return D4(N4(Y),...ie.flat())},Rt=function(Y,ie,ee,we,Ne){return I4(Y,ie,ee,we,Ne)},Ct=function(Y){return Y},Ut=function(Y){return Y.replace(/[\r\n]+/g," ")},En=function(Y){return Y.trim()},nn=function(Y){return Y},Vt=function(Y,ie){return{result:Y,comment:ie}},ne=e.peg$currPos|0,gt=[{line:1,column:1}],pt=ne,$t=e.peg$maxFailExpected||[],ve=e.peg$silentFails|0,mn;if(e.startRule){if(!(e.startRule in o))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');c=o[e.startRule]}function it(Y,ie){return{type:"literal",text:Y,ignoreCase:ie}}function kt(Y,ie,ee){return{type:"class",parts:Y,inverted:ie,ignoreCase:ee}}function gn(){return{type:"end"}}function yt(Y){return{type:"other",description:Y}}function Pt(Y){var ie=gt[Y],ee;if(ie)return ie;if(Y>=gt.length)ee=gt.length-1;else for(ee=Y;!gt[--ee];);for(ie=gt[ee],ie={line:ie.line,column:ie.column};ee<Y;)i.charCodeAt(ee)===10?(ie.line++,ie.column=1):ie.column++,ee++;return gt[Y]=ie,ie}function Kt(Y,ie,ee){var we=Pt(Y),Ne=Pt(ie),et={source:r,start:{offset:Y,line:we.line,column:we.column},end:{offset:ie,line:Ne.line,column:Ne.column}};return et}function Se(Y){ne<pt||(ne>pt&&(pt=ne,$t=[]),$t.push(Y))}function ar(Y,ie,ee){return new hl(hl.buildMessage(Y,ie),Y,ie,ee)}function io(){var Y,ie,ee;return Y=ne,ie=so(),ee=Ai(),Y=$i(ie,ee),Y}function so(){var Y,ie,ee;for(Y=ne,ie=[],ee=ma();ee!==t;)ie.push(ee),ee=ma();return ee=sn(),Y=rr(ie),Y}function ma(){var Y,ie,ee,we,Ne,et,$e;return ve++,Y=ne,sn(),i.charCodeAt(ne)===91?(ie=u,ne++):(ie=t,ve===0&&Se(pe)),ie!==t?(sn(),ee=Si(),ee!==t?(sn(),i.charCodeAt(ne)===34?(we=d,ne++):(we=t,ve===0&&Se(ye)),we!==t?(Ne=or(),i.charCodeAt(ne)===34?(et=d,ne++):(et=t,ve===0&&Se(ye)),et!==t?(sn(),i.charCodeAt(ne)===93?($e=g,ne++):($e=t,ve===0&&Se(V)),$e!==t?Y=ni(ee,Ne):(ne=Y,Y=t)):(ne=Y,Y=t)):(ne=Y,Y=t)):(ne=Y,Y=t)):(ne=Y,Y=t),ve--,Y===t&&ve===0&&Se(se),Y}function Si(){var Y,ie,ee;if(ve++,Y=ne,ie=[],ee=i.charAt(ne),x.test(ee)?ne++:(ee=t,ve===0&&Se(ue)),ee!==t)for(;ee!==t;)ie.push(ee),ee=i.charAt(ne),x.test(ee)?ne++:(ee=t,ve===0&&Se(ue));else ie=t;return ie!==t?Y=i.substring(Y,ne):Y=ie,ve--,Y===t&&(ie=t,ve===0&&Se($)),Y}function or(){var Y,ie,ee;for(ve++,Y=ne,ie=[],ee=i.charAt(ne),C.test(ee)?ne++:(ee=t,ve===0&&Se(Ee));ee!==t;)ie.push(ee),ee=i.charAt(ne),C.test(ee)?ne++:(ee=t,ve===0&&Se(Ee));return Y=i.substring(Y,ne),ve--,ie=t,ve===0&&Se(ge),Y}function Ai(){var Y,ie,ee;return Y=ne,ie=Xn(),sn(),ee=ya(),ee===t&&(ee=null),sn(),Y=Ki(ie,ee),Y}function Xn(){var Y,ie,ee,we;for(Y=ne,ie=ii(),ie===t&&(ie=null),ee=[],we=zn();we!==t;)ee.push(we),we=zn();return Y=Ge(ie,ee),Y}function zn(){var Y,ie,ee,we,Ne,et,$e,Ni;if(Y=ne,sn(),Ri(),sn(),ie=zt(),ie!==t){for(ee=ga(),ee===t&&(ee=null),we=[],Ne=lr();Ne!==t;)we.push(Ne),Ne=lr();for(Ne=sn(),et=ii(),et===t&&(et=null),$e=[],Ni=cr();Ni!==t;)$e.push(Ni),Ni=cr();Y=Rt(ie,ee,we,et,$e)}else ne=Y,Y=t;return Y}function Ri(){var Y,ie,ee,we,Ne,et;for(ve++,Y=ne,ie=[],ee=i.charAt(ne),M.test(ee)?ne++:(ee=t,ve===0&&Se(Ve));ee!==t;)ie.push(ee),ee=i.charAt(ne),M.test(ee)?ne++:(ee=t,ve===0&&Se(Ve));if(i.charCodeAt(ne)===46?(ee=p,ne++):(ee=t,ve===0&&Se(xt)),ee!==t){for(we=sn(),Ne=[],et=i.charAt(ne),R.test(et)?ne++:(et=t,ve===0&&Se(ht));et!==t;)Ne.push(et),et=i.charAt(ne),R.test(et)?ne++:(et=t,ve===0&&Se(ht));ie=[ie,ee,we,Ne],Y=ie}else ne=Y,Y=t;return ve--,Y===t&&(ie=t,ve===0&&Se(Re)),Y}function zt(){var Y,ie,ee,we,Ne,et;if(ve++,Y=ne,ie=ne,i.substr(ne,5)===v?(ee=v,ne+=5):(ee=t,ve===0&&Se(xi)),ee===t&&(i.substr(ne,3)===E?(ee=E,ne+=3):(ee=t,ve===0&&Se(Ln)),ee===t&&(i.substr(ne,5)===w?(ee=w,ne+=5):(ee=t,ve===0&&Se(qi)),ee===t&&(i.substr(ne,3)===I?(ee=I,ne+=3):(ee=t,ve===0&&Se(en)),ee===t))))if(ee=ne,we=i.charAt(ne),x.test(we)?ne++:(we=t,ve===0&&Se(ue)),we!==t){if(Ne=[],et=i.charAt(ne),O.test(et)?ne++:(et=t,ve===0&&Se(fi)),et!==t)for(;et!==t;)Ne.push(et),et=i.charAt(ne),O.test(et)?ne++:(et=t,ve===0&&Se(fi));else Ne=t;Ne!==t?(we=[we,Ne],ee=we):(ne=ee,ee=t)}else ne=ee,ee=t;return ee!==t?(we=i.charAt(ne),k.test(we)?ne++:(we=t,ve===0&&Se(Un)),we===t&&(we=null),ee=[ee,we],ie=ee):(ne=ie,ie=t),ie!==t?Y=i.substring(Y,ne):Y=ie,ve--,Y===t&&(ie=t,ve===0&&Se(Ft)),Y}function ga(){var Y,ie,ee;for(ve++,Y=ne,ie=[],ee=i.charAt(ne),be.test(ee)?ne++:(ee=t,ve===0&&Se(Hi));ee!==t;)ie.push(ee),ie.length>=2?ee=t:(ee=i.charAt(ne),be.test(ee)?ne++:(ee=t,ve===0&&Se(Hi)));return ie.length<1?(ne=Y,Y=t):Y=ie,ve--,Y===t&&(ie=t,ve===0&&Se(as)),Y}function lr(){var Y,ie,ee,we,Ne;if(ve++,Y=ne,sn(),i.charCodeAt(ne)===36?(ie=P,ne++):(ie=t,ve===0&&Se(ft)),ie!==t){if(ee=ne,we=[],Ne=i.charAt(ne),M.test(Ne)?ne++:(Ne=t,ve===0&&Se(Ve)),Ne!==t)for(;Ne!==t;)we.push(Ne),Ne=i.charAt(ne),M.test(Ne)?ne++:(Ne=t,ve===0&&Se(Ve));else we=t;we!==t?ee=i.substring(ee,ne):ee=we,ee!==t?Y=Ct(ee):(ne=Y,Y=t)}else ne=Y,Y=t;return ve--,Y===t&&ve===0&&Se(St),Y}function ii(){var Y;return Y=Ci(),Y===t&&(Y=pa()),Y}function Ci(){var Y,ie,ee,we,Ne;if(ve++,Y=ne,i.charCodeAt(ne)===123?(ie=q,ne++):(ie=t,ve===0&&Se(os)),ie!==t){for(ee=ne,we=[],Ne=i.charAt(ne),me.test(Ne)?ne++:(Ne=t,ve===0&&Se(ls));Ne!==t;)we.push(Ne),Ne=i.charAt(ne),me.test(Ne)?ne++:(Ne=t,ve===0&&Se(ls));ee=i.substring(ee,ne),i.charCodeAt(ne)===125?(we=D,ne++):(we=t,ve===0&&Se(tn)),we!==t?Y=Ut(ee):(ne=Y,Y=t)}else ne=Y,Y=t;return ve--,Y===t&&(ie=t,ve===0&&Se($n)),Y}function pa(){var Y,ie,ee,we,Ne;if(ve++,Y=ne,i.charCodeAt(ne)===59?(ie=j,ne++):(ie=t,ve===0&&Se(Rs)),ie!==t){for(ee=ne,we=[],Ne=i.charAt(ne),H.test(Ne)?ne++:(Ne=t,ve===0&&Se(Kn));Ne!==t;)we.push(Ne),Ne=i.charAt(ne),H.test(Ne)?ne++:(Ne=t,ve===0&&Se(Kn));ee=i.substring(ee,ne),Y=En(ee)}else ne=Y,Y=t;return ve--,Y===t&&(ie=t,ve===0&&Se(Fi)),Y}function cr(){var Y,ie,ee,we;return ve++,Y=ne,sn(),i.charCodeAt(ne)===40?(ie=Q,ne++):(ie=t,ve===0&&Se(Gi)),ie!==t?(ee=Xn(),ee!==t?(sn(),i.charCodeAt(ne)===41?(we=F,ne++):(we=t,ve===0&&Se(Cs)),we!==t?Y=nn(ee):(ne=Y,Y=t)):(ne=Y,Y=t)):(ne=Y,Y=t),ve--,Y===t&&ve===0&&Se(Cn),Y}function ya(){var Y,ie,ee;return ve++,Y=ne,i.substr(ne,3)===ce?(ie=ce,ne+=3):(ie=t,ve===0&&Se(Ns)),ie===t&&(i.substr(ne,3)===G?(ie=G,ne+=3):(ie=t,ve===0&&Se(Yn)),ie===t&&(i.substr(ne,7)===U?(ie=U,ne+=7):(ie=t,ve===0&&Se(Gt)),ie===t&&(i.charCodeAt(ne)===42?(ie=S,ne++):(ie=t,ve===0&&Se(bn))))),ie!==t?(sn(),ee=ii(),ee===t&&(ee=null),Y=Vt(ie,ee)):(ne=Y,Y=t),ve--,Y===t&&(ie=t,ve===0&&Se(Qn)),Y}function sn(){var Y,ie;for(ve++,Y=[],ie=i.charAt(ne),Z.test(ie)?ne++:(ie=t,ve===0&&Se(Is));ie!==t;)Y.push(ie),ie=i.charAt(ne),Z.test(ie)?ne++:(ie=t,ve===0&&Se(Is));return ve--,ie=t,ve===0&&Se(At),Y}if(mn=c(),e.peg$library)return{peg$result:mn,peg$currPos:ne,peg$FAILED:t,peg$maxFailExpected:$t,peg$maxFailPos:pt};if(mn!==t&&ne===i.length)return mn;throw mn!==t&&ne<i.length&&Se(gn()),ar($t,pt<i.length?i.charAt(pt):null,pt<i.length?Kt(pt,pt+1):Kt(pt,pt))}const nf=0xffffffffffffffffn;function xg(i,e){return(i<<e|i>>64n-e)&0xffffffffffffffffn}function P1(i,e){return i*e&nf}function V4(i){return function(){let e=BigInt(i&nf),t=BigInt(i>>64n&nf);const r=P1(xg(P1(e,5n),7n),9n);return t^=e,e=(xg(e,24n)^t^t<<16n)&nf,t=xg(t,37n),i=t<<64n|e,r}}const sd=V4(0xa187eb39cdcaed8f31c4b365b102e01en),P4=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>sd()))),j4=Array.from({length:8},()=>sd()),L4=Array.from({length:16},()=>sd()),Sg=sd(),Hn="w",bi="b",cn="p",op="n",sf="b",Tc="r",Hr="q",yn="k",Ag="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Bh{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(e,t){const{color:r,piece:o,from:c,to:u,flags:d,captured:g,promotion:p}=t,v=wn(c),E=wn(u);this.color=r,this.piece=o,this.from=v,this.to=E,this.san=e._moveToSan(t,e._moves({legal:!0})),this.lan=v+E,this.before=e.fen(),e._makeMove(t),this.after=e.fen(),e._undoMove(),this.flags="";for(const w in Ue)Ue[w]&d&&(this.flags+=Ba[w]);g&&(this.captured=g),p&&(this.promotion=p,this.lan+=p)}isCapture(){return this.flags.indexOf(Ba.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(Ba.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(Ba.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(Ba.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(Ba.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(Ba.BIG_PAWN)>-1}}const Mn=-1,Ba={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},Ue={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},lp={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},U4={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},z4={...lp,...U4},je={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Rg={b:[16,32,17,15],w:[-16,-32,-17,-15]},j1={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},B4=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],q4=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],H4={p:1,n:2,b:4,r:8,q:16,k:32},F4="pnbrqkPNBRQK",L1=[op,sf,Tc,Hr],G4=7,$4=6,K4=1,Q4=0,qh={[yn]:Ue.KSIDE_CASTLE,[Hr]:Ue.QSIDE_CASTLE},Br={w:[{square:je.a1,flag:Ue.QSIDE_CASTLE},{square:je.h1,flag:Ue.KSIDE_CASTLE}],b:[{square:je.a8,flag:Ue.QSIDE_CASTLE},{square:je.h8,flag:Ue.KSIDE_CASTLE}]},Y4={b:K4,w:$4},Cg="--";function $a(i){return i>>4}function Kc(i){return i&15}function Mw(i){return"0123456789".indexOf(i)!==-1}function wn(i){const e=Kc(i),t=$a(i);return"abcdefgh".substring(e,e+1)+"87654321".substring(t,t+1)}function yc(i){return i===Hn?bi:Hn}function X4(i){const e=i.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const t=parseInt(e[5],10);if(isNaN(t)||t<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(e[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const o=e[0].split("/");if(o.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let u=0;u<o.length;u++){let d=0,g=!1;for(let p=0;p<o[u].length;p++)if(Mw(o[u][p])){if(g)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};d+=parseInt(o[u][p],10),g=!0}else{if(!/^[prnbqkPRNBQK]$/.test(o[u][p]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};d+=1,g=!1}if(d!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const c=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:u,regex:d}of c){if(!d.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${u} king`};if((e[0].match(d)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${u} kings`}}return Array.from(o[0]+o[7]).some(u=>u.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function W4(i,e){const t=i.from,r=i.to,o=i.piece;let c=0,u=0,d=0;for(let g=0,p=e.length;g<p;g++){const v=e[g].from,E=e[g].to,w=e[g].piece;o===w&&t!==v&&r===E&&(c++,$a(t)===$a(v)&&u++,Kc(t)===Kc(v)&&d++)}return c>0?u>0&&d>0?wn(t):d>0?wn(t).charAt(1):wn(t).charAt(0):""}function qr(i,e,t,r,o,c=void 0,u=Ue.NORMAL){const d=$a(r);if(o===cn&&(d===G4||d===Q4))for(let g=0;g<L1.length;g++){const p=L1[g];i.push({color:e,from:t,to:r,piece:o,captured:c,promotion:p,flags:u|Ue.PROMOTION})}else i.push({color:e,from:t,to:r,piece:o,captured:c,flags:u})}function U1(i){let e=i.charAt(0);return e>="a"&&e<="h"?i.match(/[a-h]\d.*[a-h]\d/)?void 0:cn:(e=e.toLowerCase(),e==="o"?yn:e)}function Ng(i){return i.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class f0{_board=new Array(128);_turn=Hn;_header={};_kings={w:Mn,b:Mn};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_hash=0n;_positionCount=new Map;constructor(e=Ag,{skipValidation:t=!1}={}){this.load(e,{skipValidation:t})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:Mn,b:Mn},this._turn=Hn,this._castling={w:0,b:0},this._epSquare=Mn,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...z4},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:t=!1,preserveHeaders:r=!1}={}){let o=e.split(/\s+/);if(o.length>=2&&o.length<6){const d=["-","-","0","1"];e=o.concat(d.slice(-(6-o.length))).join(" ")}if(o=e.split(/\s+/),!t){const{ok:d,error:g}=X4(e);if(!d)throw new Error(g)}const c=o[0];let u=0;this.clear({preserveHeaders:r});for(let d=0;d<c.length;d++){const g=c.charAt(d);if(g==="/")u+=8;else if(Mw(g))u+=parseInt(g,10);else{const p=g<"a"?Hn:bi;this._put({type:g.toLowerCase(),color:p},wn(u)),u++}}this._turn=o[1],o[2].indexOf("K")>-1&&(this._castling.w|=Ue.KSIDE_CASTLE),o[2].indexOf("Q")>-1&&(this._castling.w|=Ue.QSIDE_CASTLE),o[2].indexOf("k")>-1&&(this._castling.b|=Ue.KSIDE_CASTLE),o[2].indexOf("q")>-1&&(this._castling.b|=Ue.QSIDE_CASTLE),this._epSquare=o[3]==="-"?Mn:je[o[3]],this._halfMoves=parseInt(o[4],10),this._moveNumber=parseInt(o[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){let t=0,r="";for(let u=je.a8;u<=je.h1;u++){if(this._board[u]){t>0&&(r+=t,t=0);const{color:d,type:g}=this._board[u];r+=d===Hn?g.toUpperCase():g.toLowerCase()}else t++;u+1&136&&(t>0&&(r+=t),u!==je.h1&&(r+="/"),t=0,u+=8)}let o="";this._castling[Hn]&Ue.KSIDE_CASTLE&&(o+="K"),this._castling[Hn]&Ue.QSIDE_CASTLE&&(o+="Q"),this._castling[bi]&Ue.KSIDE_CASTLE&&(o+="k"),this._castling[bi]&Ue.QSIDE_CASTLE&&(o+="q"),o=o||"-";let c="-";if(this._epSquare!==Mn)if(e)c=wn(this._epSquare);else{const u=this._epSquare+(this._turn===Hn?16:-16),d=[u+1,u-1];for(const g of d){if(g&136)continue;const p=this._turn;if(this._board[g]?.color===p&&this._board[g]?.type===cn){this._makeMove({color:p,from:g,to:this._epSquare,piece:cn,captured:cn,flags:Ue.EP_CAPTURE});const v=!this._isKingAttacked(p);if(this._undoMove(),v){c=wn(this._epSquare);break}}}}return[r,this._turn,o,c,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;const{color:t,type:r}=this._board[e],o={w:0,b:1}[t],c={p:0,n:1,b:2,r:3,q:4,k:5}[r];return P4[o][c][e]}_epKey(){return this._epSquare===Mn?0n:j4[this._epSquare&7]}_castlingKey(){const e=this._castling.w>>5|this._castling.b>>3;return L4[e]}_computeHash(){let e=0n;for(let t=je.a8;t<=je.h1;t++){if(t&136){t+=7;continue}this._board[t]&&(e^=this._pieceKey(t))}return e^=this._epKey(),e^=this._castlingKey(),this._turn==="b"&&(e^=Sg),e}_updateSetup(e){this._history.length>0||(e!==Ag?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(Ag)}get(e){return this._board[je[e]]}findPiece(e){const t=[];for(let r=je.a8;r<=je.h1;r++){if(r&136){r+=7;continue}!this._board[r]||this._board[r]?.color!==e.color||this._board[r].color===e.color&&this._board[r].type===e.type&&t.push(wn(r))}return t}put({type:e,color:t},r){return this._put({type:e,color:t},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(e,t){this._hash^=this._pieceKey(e),this._board[e]=t,this._hash^=this._pieceKey(e)}_put({type:e,color:t},r){if(F4.indexOf(e.toLowerCase())===-1||!(r in je))return!1;const o=je[r];if(e==yn&&!(this._kings[t]==Mn||this._kings[t]==o))return!1;const c=this._board[o];return c&&c.type===yn&&(this._kings[c.color]=Mn),this._set(o,{type:e,color:t}),e===yn&&(this._kings[t]=o),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){const t=this.get(e);return this._clear(je[e]),t&&t.type===yn&&(this._kings[t.color]=Mn),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){this._hash^=this._castlingKey();const e=this._board[je.e1]?.type===yn&&this._board[je.e1]?.color===Hn,t=this._board[je.e8]?.type===yn&&this._board[je.e8]?.color===bi;(!e||this._board[je.a1]?.type!==Tc||this._board[je.a1]?.color!==Hn)&&(this._castling.w&=-65),(!e||this._board[je.h1]?.type!==Tc||this._board[je.h1]?.color!==Hn)&&(this._castling.w&=-33),(!t||this._board[je.a8]?.type!==Tc||this._board[je.a8]?.color!==bi)&&(this._castling.b&=-65),(!t||this._board[je.h8]?.type!==Tc||this._board[je.h8]?.color!==bi)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){if(this._epSquare===Mn)return;const e=this._epSquare+(this._turn===Hn?-16:16),t=this._epSquare+(this._turn===Hn?16:-16),r=[t+1,t-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||this._board[t]?.color!==yc(this._turn)||this._board[t]?.type!==cn){this._hash^=this._epKey(),this._epSquare=Mn;return}const o=c=>!(c&136)&&this._board[c]?.color===this._turn&&this._board[c]?.type===cn;r.some(o)||(this._hash^=this._epKey(),this._epSquare=Mn)}_attacked(e,t,r){const o=[];for(let c=je.a8;c<=je.h1;c++){if(c&136){c+=7;continue}if(this._board[c]===void 0||this._board[c].color!==e)continue;const u=this._board[c],d=c-t;if(d===0)continue;const g=d+119;if(B4[g]&H4[u.type]){if(u.type===cn){if(d>0&&u.color===Hn||d<=0&&u.color===bi)if(r)o.push(wn(c));else return!0;continue}if(u.type==="n"||u.type==="k")if(r){o.push(wn(c));continue}else return!0;const p=q4[g];let v=c+p,E=!1;for(;v!==t;){if(this._board[v]!=null){E=!0;break}v+=p}if(!E)if(r){o.push(wn(c));continue}else return!0}}return r?o:!1}attackers(e,t){return t?this._attacked(t,je[e],!0):this._attacked(this._turn,je[e],!0)}_isKingAttacked(e){const t=this._kings[e];return t===-1?!1:this._attacked(yc(e),t)}hash(){return this._hash.toString(16)}isAttacked(e,t){return this._attacked(t,je[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},t=[];let r=0,o=0;for(let c=je.a8;c<=je.h1;c++){if(o=(o+1)%2,c&136){c+=7;continue}const u=this._board[c];u&&(e[u.type]=u.type in e?e[u.type]+1:1,u.type===sf&&t.push(o),r++)}if(r===2)return!0;if(r===3&&(e[sf]===1||e[op]===1))return!0;if(r===e[sf]+2){let c=0;const u=t.length;for(let d=0;d<u;d++)c+=t[d];if(c===0||c===u)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:t=void 0,piece:r=void 0}={}){const o=this._moves({square:t,piece:r});return e?o.map(c=>new Bh(this,c)):o.map(c=>this._moveToSan(c,o))}_moves({legal:e=!0,piece:t=void 0,square:r=void 0}={}){const o=r?r.toLowerCase():void 0,c=t?.toLowerCase(),u=[],d=this._turn,g=yc(d);let p=je.a8,v=je.h1,E=!1;if(o)if(o in je)p=v=je[o],E=!0;else return[];for(let I=p;I<=v;I++){if(I&136){I+=7;continue}if(!this._board[I]||this._board[I].color===g)continue;const{type:P}=this._board[I];let q;if(P===cn){if(c&&c!==P)continue;q=I+Rg[d][0],this._board[q]||(qr(u,d,I,q,cn),q=I+Rg[d][1],Y4[d]===$a(I)&&!this._board[q]&&qr(u,d,I,q,cn,void 0,Ue.BIG_PAWN));for(let D=2;D<4;D++)q=I+Rg[d][D],!(q&136)&&(this._board[q]?.color===g?qr(u,d,I,q,cn,this._board[q].type,Ue.CAPTURE):q===this._epSquare&&qr(u,d,I,q,cn,cn,Ue.EP_CAPTURE))}else{if(c&&c!==P)continue;for(let D=0,j=j1[P].length;D<j;D++){const Q=j1[P][D];for(q=I;q+=Q,!(q&136);){if(!this._board[q])qr(u,d,I,q,P);else{if(this._board[q].color===d)break;qr(u,d,I,q,P,this._board[q].type,Ue.CAPTURE);break}if(P===op||P===yn)break}}}}if((c===void 0||c===yn)&&(!E||v===this._kings[d])){if(this._castling[d]&Ue.KSIDE_CASTLE){const I=this._kings[d],P=I+2;!this._board[I+1]&&!this._board[P]&&!this._attacked(g,this._kings[d])&&!this._attacked(g,I+1)&&!this._attacked(g,P)&&qr(u,d,this._kings[d],P,yn,void 0,Ue.KSIDE_CASTLE)}if(this._castling[d]&Ue.QSIDE_CASTLE){const I=this._kings[d],P=I-2;!this._board[I-1]&&!this._board[I-2]&&!this._board[I-3]&&!this._attacked(g,this._kings[d])&&!this._attacked(g,I-1)&&!this._attacked(g,P)&&qr(u,d,this._kings[d],P,yn,void 0,Ue.QSIDE_CASTLE)}}if(!e||this._kings[d]===-1)return u;const w=[];for(let I=0,P=u.length;I<P;I++)this._makeMove(u[I]),this._isKingAttacked(d)||w.push(u[I]),this._undoMove();return w}move(e,{strict:t=!1}={}){let r=null;if(typeof e=="string")r=this._moveFromSan(e,t);else if(e===null)r=this._moveFromSan(Cg,t);else if(typeof e=="object"){const c=this._moves();for(let u=0,d=c.length;u<d;u++)if(e.from===wn(c[u].from)&&e.to===wn(c[u].to)&&(!("promotion"in c[u])||e.promotion===c[u].promotion)){r=c[u];break}}if(!r)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&r.flags&Ue.NULL_MOVE)throw new Error("Null move not allowed when in check");const o=new Bh(this,r);return this._makeMove(r),this._incPositionCount(),o}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,t){this._hash^=this._pieceKey(e),this._board[t]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(t)}_makeMove(e){const t=this._turn,r=yc(t);if(this._push(e),e.flags&Ue.NULL_MOVE){t===bi&&this._moveNumber++,this._halfMoves++,this._turn=r,this._epSquare=Mn;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&Ue.EP_CAPTURE&&(this._turn===bi?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:t})),this._board[e.to].type===yn){if(this._kings[t]=e.to,e.flags&Ue.KSIDE_CASTLE){const o=e.to-1,c=e.to+1;this._movePiece(c,o)}else if(e.flags&Ue.QSIDE_CASTLE){const o=e.to+1,c=e.to-2;this._movePiece(c,o)}this._castling[t]=0}if(this._castling[t]){for(let o=0,c=Br[t].length;o<c;o++)if(e.from===Br[t][o].square&&this._castling[t]&Br[t][o].flag){this._castling[t]^=Br[t][o].flag;break}}if(this._castling[r]){for(let o=0,c=Br[r].length;o<c;o++)if(e.to===Br[r][o].square&&this._castling[r]&Br[r][o].flag){this._castling[r]^=Br[r][o].flag;break}}if(this._hash^=this._castlingKey(),e.flags&Ue.BIG_PAWN){let o;t===bi?o=e.to-16:o=e.to+16,!(e.to-1&136)&&this._board[e.to-1]?.type===cn&&this._board[e.to-1]?.color===r||!(e.to+1&136)&&this._board[e.to+1]?.type===cn&&this._board[e.to+1]?.color===r?(this._epSquare=o,this._hash^=this._epKey()):this._epSquare=Mn}else this._epSquare=Mn;e.piece===cn?this._halfMoves=0:e.flags&(Ue.CAPTURE|Ue.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===bi&&this._moveNumber++,this._turn=r,this._hash^=Sg}undo(){const e=this._hash,t=this._undoMove();if(t){const r=new Bh(this,t);return this._decPositionCount(e),r}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=Sg;const r=this._turn,o=yc(r);if(t.flags&Ue.NULL_MOVE)return t;if(this._movePiece(t.to,t.from),t.piece&&(this._clear(t.from),this._set(t.from,{type:t.piece,color:r})),t.captured)if(t.flags&Ue.EP_CAPTURE){let c;r===bi?c=t.to-16:c=t.to+16,this._set(c,{type:cn,color:o})}else this._set(t.to,{type:t.captured,color:o});if(t.flags&(Ue.KSIDE_CASTLE|Ue.QSIDE_CASTLE)){let c,u;t.flags&Ue.KSIDE_CASTLE?(c=t.to+1,u=t.to-1):(c=t.to-2,u=t.to+1),this._movePiece(u,c)}return t}pgn({newline:e=`
`,maxWidth:t=0}={}){const r=[];let o=!1;for(const w in this._header)this._header[w]&&r.push(`[${w} "${this._header[w]}"]`+e),o=!0;o&&this._history.length&&r.push(e);const c=w=>{const I=this._comments[this.fen()];if(typeof I<"u"){const P=w.length>0?" ":"";w=`${w}${P}{${I}}`}return w},u=[];for(;this._history.length>0;)u.push(this._undoMove());const d=[];let g="";for(u.length===0&&d.push(c(""));u.length>0;){g=c(g);const w=u.pop();if(!w)break;if(!this._history.length&&w.color==="b"){const I=`${this._moveNumber}. ...`;g=g?`${g} ${I}`:I}else w.color==="w"&&(g.length&&d.push(g),g=this._moveNumber+".");g=g+" "+this._moveToSan(w,this._moves({legal:!0})),this._makeMove(w)}if(g.length&&d.push(c(g)),d.push(this._header.Result||"*"),t===0)return r.join("")+d.join(" ");const p=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},v=function(w,I){for(const P of I.split(" "))if(P){if(w+P.length>t){for(;p();)w--;r.push(e),w=0}r.push(P),w+=P.length,r.push(" "),w++}return p()&&w--,w};let E=0;for(let w=0;w<d.length;w++){if(E+d[w].length>t&&d[w].includes("{")){E=v(E,d[w]);continue}E+d[w].length>t&&w!==0?(r[r.length-1]===" "&&r.pop(),r.push(e),E=0):w!==0&&(r.push(" "),E++),r.push(d[w]),E+=d[w].length}return r.join("")}header(...e){for(let t=0;t<e.length;t+=2)typeof e[t]=="string"&&typeof e[t+1]=="string"&&(this._header[e[t]]=e[t+1]);return this._header}setHeader(e,t){return this._header[e]=t??lp[e]??null,this.getHeaders()}removeHeader(e){return e in this._header?(this._header[e]=lp[e]||null,!0):!1}getHeaders(){const e={};for(const[t,r]of Object.entries(this._header))r!==null&&(e[t]=r);return e}loadPgn(e,{strict:t=!1,newlineChar:r=`\r?
`}={}){r!==`\r?
`&&(e=e.replace(new RegExp(r,"g"),`
`));const o=M4(e);this.reset();const c=o.headers;let u="";for(const p in c)p.toLowerCase()==="fen"&&(u=c[p]),this.header(p,c[p]);if(!t)u&&this.load(u,{preserveHeaders:!0});else if(c.SetUp==="1"){if(!("FEN"in c))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(c.FEN,{preserveHeaders:!0})}let d=o.root;for(;d;){if(d.move){const p=this._moveFromSan(d.move,t);if(p==null)throw new Error(`Invalid move in PGN: ${d.move}`);this._makeMove(p),this._incPositionCount()}d.comment!==void 0&&(this._comments[this.fen()]=d.comment),d=d.variations[0]}const g=o.result;g&&Object.keys(this._header).length&&this._header.Result!==g&&this.setHeader("Result",g)}_moveToSan(e,t){let r="";if(e.flags&Ue.KSIDE_CASTLE)r="O-O";else if(e.flags&Ue.QSIDE_CASTLE)r="O-O-O";else{if(e.flags&Ue.NULL_MOVE)return Cg;if(e.piece!==cn){const o=W4(e,t);r+=e.piece.toUpperCase()+o}e.flags&(Ue.CAPTURE|Ue.EP_CAPTURE)&&(e.piece===cn&&(r+=wn(e.from)[0]),r+="x"),r+=wn(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,t=!1){let r=Ng(e);if(t||(r==="0-0"?r="O-O":r==="0-0-0"&&(r="O-O-O")),r==Cg)return{color:this._turn,from:0,to:0,piece:"k",flags:Ue.NULL_MOVE};let o=U1(r),c=this._moves({legal:!0,piece:o});for(let w=0,I=c.length;w<I;w++)if(r===Ng(this._moveToSan(c[w],c)))return c[w];if(t)return null;let u,d,g,p,v,E=!1;if(d=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),d?(u=d[1],g=d[2],p=d[3],v=d[4],g.length==1&&(E=!0)):(d=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),d&&(u=d[1],g=d[2],p=d[3],v=d[4],g.length==1&&(E=!0))),o=U1(r),c=this._moves({legal:!0,piece:u||o}),!p)return null;for(let w=0,I=c.length;w<I;w++)if(g){if((!u||u.toLowerCase()==c[w].piece)&&je[g]==c[w].from&&je[p]==c[w].to&&(!v||v.toLowerCase()==c[w].promotion))return c[w];if(E){const P=wn(c[w].from);if((!u||u.toLowerCase()==c[w].piece)&&je[p]==c[w].to&&(g==P[0]||g==P[1])&&(!v||v.toLowerCase()==c[w].promotion))return c[w]}}else if(r===Ng(this._moveToSan(c[w],c)).replace("x",""))return c[w];return null}ascii(){let e=`   +------------------------+
`;for(let t=je.a8;t<=je.h1;t++){if(Kc(t)===0&&(e+=" "+"87654321"[$a(t)]+" |"),this._board[t]){const r=this._board[t].type,c=this._board[t].color===Hn?r.toUpperCase():r.toLowerCase();e+=" "+c+" "}else e+=" . ";t+1&136&&(e+=`|
`,t+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const t=this._moves({legal:!1});let r=0;const o=this._turn;for(let c=0,u=t.length;c<u;c++)this._makeMove(t[c]),this._isKingAttacked(o)||(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}setTurn(e){return this._turn==e?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const e=[];let t=[];for(let r=je.a8;r<=je.h1;r++)this._board[r]==null?t.push(null):t.push({square:wn(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(t),t=[],r+=8);return e}squareColor(e){if(e in je){const t=je[e];return($a(t)+Kc(t))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const t=[],r=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){const o=t.pop();if(!o)break;e?r.push(new Bh(this,o)):r.push(this._moveToSan(o,this._moves())),this._makeMove(o)}return r}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){const t=this._positionCount.get(e)??0;t===1?this._positionCount.delete(e):this._positionCount.set(e,t-1)}_pruneComments(){const e=[],t={},r=o=>{o in this._comments&&(t[o]=this._comments[o])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){const o=e.pop();if(!o)break;this._makeMove(o),r(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(const o of[yn,Hr])t[o]!==void 0&&(t[o]?this._castling[e]|=qh[o]:this._castling[e]&=~qh[o]);this._updateCastlingRights();const r=this.getCastlingRights(e);return(t[yn]===void 0||t[yn]===r[yn])&&(t[Hr]===void 0||t[Hr]===r[Hr])}getCastlingRights(e){return{[yn]:(this._castling[e]&qh[yn])!==0,[Hr]:(this._castling[e]&qh[Hr])!==0}}moveNumber(){return this._moveNumber}}var wc=rE();const rd=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function El(i){const e=Object.prototype.toString.call(i);return e==="[object Window]"||e==="[object global]"}function d0(i){return"nodeType"in i}function ti(i){var e,t;return i?El(i)?i:d0(i)&&(e=(t=i.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function m0(i){const{Document:e}=ti(i);return i instanceof e}function hu(i){return El(i)?!1:i instanceof ti(i).HTMLElement}function Vw(i){return i instanceof ti(i).SVGElement}function Tl(i){return i?El(i)?i.document:d0(i)?m0(i)?i:hu(i)||Vw(i)?i.ownerDocument:document:document:document}const ir=rd?z.useLayoutEffect:z.useEffect;function ad(i){const e=z.useRef(i);return ir(()=>{e.current=i}),z.useCallback(function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}function J4(){const i=z.useRef(null),e=z.useCallback((r,o)=>{i.current=setInterval(r,o)},[]),t=z.useCallback(()=>{i.current!==null&&(clearInterval(i.current),i.current=null)},[]);return[e,t]}function Qc(i,e){e===void 0&&(e=[i]);const t=z.useRef(i);return ir(()=>{t.current!==i&&(t.current=i)},e),t}function fu(i,e){const t=z.useRef();return z.useMemo(()=>{const r=i(t.current);return t.current=r,r},[...e])}function Nf(i){const e=ad(i),t=z.useRef(null),r=z.useCallback(o=>{o!==t.current&&e?.(o,t.current),t.current=o},[]);return[t,r]}function If(i){const e=z.useRef();return z.useEffect(()=>{e.current=i},[i]),e.current}let Ig={};function od(i,e){return z.useMemo(()=>{if(e)return e;const t=Ig[i]==null?0:Ig[i]+1;return Ig[i]=t,i+"-"+t},[i,e])}function Pw(i){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return r.reduce((c,u)=>{const d=Object.entries(u);for(const[g,p]of d){const v=c[g];v!=null&&(c[g]=v+i*p)}return c},{...e})}}const tl=Pw(1),Yc=Pw(-1);function Z4(i){return"clientX"in i&&"clientY"in i}function g0(i){if(!i)return!1;const{KeyboardEvent:e}=ti(i.target);return e&&i instanceof e}function ek(i){if(!i)return!1;const{TouchEvent:e}=ti(i.target);return e&&i instanceof e}function Df(i){if(ek(i)){if(i.touches&&i.touches.length){const{clientX:e,clientY:t}=i.touches[0];return{x:e,y:t}}else if(i.changedTouches&&i.changedTouches.length){const{clientX:e,clientY:t}=i.changedTouches[0];return{x:e,y:t}}}return Z4(i)?{x:i.clientX,y:i.clientY}:null}const fl=Object.freeze({Translate:{toString(i){if(!i)return;const{x:e,y:t}=i;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(i){if(!i)return;const{scaleX:e,scaleY:t}=i;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(i){if(i)return[fl.Translate.toString(i),fl.Scale.toString(i)].join(" ")}},Transition:{toString(i){let{property:e,duration:t,easing:r}=i;return e+" "+t+"ms "+r}}}),z1="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function tk(i){return i.matches(z1)?i:i.querySelector(z1)}const nk={display:"none"};function ik(i){let{id:e,value:t}=i;return rt.createElement("div",{id:e,style:nk},t)}function sk(i){let{id:e,announcement:t,ariaLiveType:r="assertive"}=i;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return rt.createElement("div",{id:e,style:o,role:"status","aria-live":r,"aria-atomic":!0},t)}function rk(){const[i,e]=z.useState("");return{announce:z.useCallback(r=>{r!=null&&e(r)},[]),announcement:i}}const jw=z.createContext(null);function ak(i){const e=z.useContext(jw);z.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(i)},[i,e])}function ok(){const[i]=z.useState(()=>new Set),e=z.useCallback(r=>(i.add(r),()=>i.delete(r)),[i]);return[z.useCallback(r=>{let{type:o,event:c}=r;i.forEach(u=>{var d;return(d=u[o])==null?void 0:d.call(u,c)})},[i]),e]}const lk={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},ck={onDragStart(i){let{active:e}=i;return"Picked up draggable item "+e.id+"."},onDragOver(i){let{active:e,over:t}=i;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(i){let{active:e,over:t}=i;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(i){let{active:e}=i;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function uk(i){let{announcements:e=ck,container:t,hiddenTextDescribedById:r,screenReaderInstructions:o=lk}=i;const{announce:c,announcement:u}=rk(),d=od("DndLiveRegion"),[g,p]=z.useState(!1);if(z.useEffect(()=>{p(!0)},[]),ak(z.useMemo(()=>({onDragStart(E){let{active:w}=E;c(e.onDragStart({active:w}))},onDragMove(E){let{active:w,over:I}=E;e.onDragMove&&c(e.onDragMove({active:w,over:I}))},onDragOver(E){let{active:w,over:I}=E;c(e.onDragOver({active:w,over:I}))},onDragEnd(E){let{active:w,over:I}=E;c(e.onDragEnd({active:w,over:I}))},onDragCancel(E){let{active:w,over:I}=E;c(e.onDragCancel({active:w,over:I}))}}),[c,e])),!g)return null;const v=rt.createElement(rt.Fragment,null,rt.createElement(ik,{id:r,value:o.draggable}),rt.createElement(sk,{id:d,announcement:u}));return t?wc.createPortal(v,t):v}var vn;(function(i){i.DragStart="dragStart",i.DragMove="dragMove",i.DragEnd="dragEnd",i.DragCancel="dragCancel",i.DragOver="dragOver",i.RegisterDroppable="registerDroppable",i.SetDroppableDisabled="setDroppableDisabled",i.UnregisterDroppable="unregisterDroppable"})(vn||(vn={}));function kf(){}function Ka(i,e){return z.useMemo(()=>({sensor:i,options:e??{}}),[i,e])}function p0(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return z.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const rs=Object.freeze({x:0,y:0});function Lw(i,e){return Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2))}function hk(i,e){const t=Df(i);if(!t)return"0 0";const r={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function Uw(i,e){let{data:{value:t}}=i,{data:{value:r}}=e;return t-r}function fk(i,e){let{data:{value:t}}=i,{data:{value:r}}=e;return r-t}function B1(i){let{left:e,top:t,height:r,width:o}=i;return[{x:e,y:t},{x:e+o,y:t},{x:e,y:t+r},{x:e+o,y:t+r}]}function zw(i,e){if(!i||i.length===0)return null;const[t]=i;return t[e]}function q1(i,e,t){return e===void 0&&(e=i.left),t===void 0&&(t=i.top),{x:e+i.width*.5,y:t+i.height*.5}}const dk=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=i;const o=q1(e,e.left,e.top),c=[];for(const u of r){const{id:d}=u,g=t.get(d);if(g){const p=Lw(q1(g),o);c.push({id:d,data:{droppableContainer:u,value:p}})}}return c.sort(Uw)},mk=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=i;const o=B1(e),c=[];for(const u of r){const{id:d}=u,g=t.get(d);if(g){const p=B1(g),v=o.reduce((w,I,P)=>w+Lw(p[P],I),0),E=Number((v/4).toFixed(4));c.push({id:d,data:{droppableContainer:u,value:E}})}}return c.sort(Uw)};function gk(i,e){const t=Math.max(e.top,i.top),r=Math.max(e.left,i.left),o=Math.min(e.left+e.width,i.left+i.width),c=Math.min(e.top+e.height,i.top+i.height),u=o-r,d=c-t;if(r<o&&t<c){const g=e.width*e.height,p=i.width*i.height,v=u*d,E=v/(g+p-v);return Number(E.toFixed(4))}return 0}const pk=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=i;const o=[];for(const c of r){const{id:u}=c,d=t.get(u);if(d){const g=gk(d,e);g>0&&o.push({id:u,data:{droppableContainer:c,value:g}})}}return o.sort(fk)};function yk(i,e,t){return{...i,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function Bw(i,e){return i&&e?{x:i.left-e.left,y:i.top-e.top}:rs}function vk(i){return function(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),c=1;c<r;c++)o[c-1]=arguments[c];return o.reduce((u,d)=>({...u,top:u.top+i*d.y,bottom:u.bottom+i*d.y,left:u.left+i*d.x,right:u.right+i*d.x}),{...t})}}const _k=vk(1);function qw(i){if(i.startsWith("matrix3d(")){const e=i.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(i.startsWith("matrix(")){const e=i.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function bk(i,e,t){const r=qw(e);if(!r)return i;const{scaleX:o,scaleY:c,x:u,y:d}=r,g=i.left-u-(1-o)*parseFloat(t),p=i.top-d-(1-c)*parseFloat(t.slice(t.indexOf(" ")+1)),v=o?i.width/o:i.width,E=c?i.height/c:i.height;return{width:v,height:E,top:p,right:g+v,bottom:p+E,left:g}}const Ek={ignoreTransform:!1};function du(i,e){e===void 0&&(e=Ek);let t=i.getBoundingClientRect();if(e.ignoreTransform){const{transform:p,transformOrigin:v}=ti(i).getComputedStyle(i);p&&(t=bk(t,p,v))}const{top:r,left:o,width:c,height:u,bottom:d,right:g}=t;return{top:r,left:o,width:c,height:u,bottom:d,right:g}}function H1(i){return du(i,{ignoreTransform:!0})}function Tk(i){const e=i.innerWidth,t=i.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function wk(i,e){return e===void 0&&(e=ti(i).getComputedStyle(i)),e.position==="fixed"}function xk(i,e){e===void 0&&(e=ti(i).getComputedStyle(i));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const c=e[o];return typeof c=="string"?t.test(c):!1})}function ld(i,e){const t=[];function r(o){if(e!=null&&t.length>=e||!o)return t;if(m0(o)&&o.scrollingElement!=null&&!t.includes(o.scrollingElement))return t.push(o.scrollingElement),t;if(!hu(o)||Vw(o)||t.includes(o))return t;const c=ti(i).getComputedStyle(o);return o!==i&&xk(o,c)&&t.push(o),wk(o,c)?t:r(o.parentNode)}return i?r(i):t}function Hw(i){const[e]=ld(i,1);return e??null}function Dg(i){return!rd||!i?null:El(i)?i:d0(i)?m0(i)||i===Tl(i).scrollingElement?window:hu(i)?i:null:null}function Fw(i){return El(i)?i.scrollX:i.scrollLeft}function Gw(i){return El(i)?i.scrollY:i.scrollTop}function cp(i){return{x:Fw(i),y:Gw(i)}}var Sn;(function(i){i[i.Forward=1]="Forward",i[i.Backward=-1]="Backward"})(Sn||(Sn={}));function $w(i){return!rd||!i?!1:i===document.scrollingElement}function Kw(i){const e={x:0,y:0},t=$w(i)?{height:window.innerHeight,width:window.innerWidth}:{height:i.clientHeight,width:i.clientWidth},r={x:i.scrollWidth-t.width,y:i.scrollHeight-t.height},o=i.scrollTop<=e.y,c=i.scrollLeft<=e.x,u=i.scrollTop>=r.y,d=i.scrollLeft>=r.x;return{isTop:o,isLeft:c,isBottom:u,isRight:d,maxScroll:r,minScroll:e}}const Sk={x:.2,y:.2};function Ak(i,e,t,r,o){let{top:c,left:u,right:d,bottom:g}=t;r===void 0&&(r=10),o===void 0&&(o=Sk);const{isTop:p,isBottom:v,isLeft:E,isRight:w}=Kw(i),I={x:0,y:0},P={x:0,y:0},q={height:e.height*o.y,width:e.width*o.x};return!p&&c<=e.top+q.height?(I.y=Sn.Backward,P.y=r*Math.abs((e.top+q.height-c)/q.height)):!v&&g>=e.bottom-q.height&&(I.y=Sn.Forward,P.y=r*Math.abs((e.bottom-q.height-g)/q.height)),!w&&d>=e.right-q.width?(I.x=Sn.Forward,P.x=r*Math.abs((e.right-q.width-d)/q.width)):!E&&u<=e.left+q.width&&(I.x=Sn.Backward,P.x=r*Math.abs((e.left+q.width-u)/q.width)),{direction:I,speed:P}}function Rk(i){if(i===document.scrollingElement){const{innerWidth:c,innerHeight:u}=window;return{top:0,left:0,right:c,bottom:u,width:c,height:u}}const{top:e,left:t,right:r,bottom:o}=i.getBoundingClientRect();return{top:e,left:t,right:r,bottom:o,width:i.clientWidth,height:i.clientHeight}}function Qw(i){return i.reduce((e,t)=>tl(e,cp(t)),rs)}function Ck(i){return i.reduce((e,t)=>e+Fw(t),0)}function Nk(i){return i.reduce((e,t)=>e+Gw(t),0)}function Yw(i,e){if(e===void 0&&(e=du),!i)return;const{top:t,left:r,bottom:o,right:c}=e(i);Hw(i)&&(o<=0||c<=0||t>=window.innerHeight||r>=window.innerWidth)&&i.scrollIntoView({block:"center",inline:"center"})}const Ik=[["x",["left","right"],Ck],["y",["top","bottom"],Nk]];class y0{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=ld(t),o=Qw(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[c,u,d]of Ik)for(const g of u)Object.defineProperty(this,g,{get:()=>{const p=d(r),v=o[c]-p;return this.rect[g]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Oc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...t)})},this.target=e}add(e,t,r){var o;(o=this.target)==null||o.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function Dk(i){const{EventTarget:e}=ti(i);return i instanceof e?i:Tl(i)}function kg(i,e){const t=Math.abs(i.x),r=Math.abs(i.y);return typeof e=="number"?Math.sqrt(t**2+r**2)>e:"x"in e&&"y"in e?t>e.x&&r>e.y:"x"in e?t>e.x:"y"in e?r>e.y:!1}var Bi;(function(i){i.Click="click",i.DragStart="dragstart",i.Keydown="keydown",i.ContextMenu="contextmenu",i.Resize="resize",i.SelectionChange="selectionchange",i.VisibilityChange="visibilitychange"})(Bi||(Bi={}));function F1(i){i.preventDefault()}function kk(i){i.stopPropagation()}var nt;(function(i){i.Space="Space",i.Down="ArrowDown",i.Right="ArrowRight",i.Left="ArrowLeft",i.Up="ArrowUp",i.Esc="Escape",i.Enter="Enter",i.Tab="Tab"})(nt||(nt={}));const Xw={start:[nt.Space,nt.Enter],cancel:[nt.Esc],end:[nt.Space,nt.Enter,nt.Tab]},Ok=(i,e)=>{let{currentCoordinates:t}=e;switch(i.code){case nt.Right:return{...t,x:t.x+25};case nt.Left:return{...t,x:t.x-25};case nt.Down:return{...t,y:t.y+25};case nt.Up:return{...t,y:t.y-25}}};class v0{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Oc(Tl(t)),this.windowListeners=new Oc(ti(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Bi.Resize,this.handleCancel),this.windowListeners.add(Bi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Bi.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&Yw(r),t(rs)}handleKeyDown(e){if(g0(e)){const{active:t,context:r,options:o}=this.props,{keyboardCodes:c=Xw,coordinateGetter:u=Ok,scrollBehavior:d="smooth"}=o,{code:g}=e;if(c.end.includes(g)){this.handleEnd(e);return}if(c.cancel.includes(g)){this.handleCancel(e);return}const{collisionRect:p}=r.current,v=p?{x:p.left,y:p.top}:rs;this.referenceCoordinates||(this.referenceCoordinates=v);const E=u(e,{active:t,context:r.current,currentCoordinates:v});if(E){const w=Yc(E,v),I={x:0,y:0},{scrollableAncestors:P}=r.current;for(const q of P){const D=e.code,{isTop:j,isRight:Q,isLeft:F,isBottom:ce,maxScroll:G,minScroll:U}=Kw(q),S=Rk(q),x={x:Math.min(D===nt.Right?S.right-S.width/2:S.right,Math.max(D===nt.Right?S.left:S.left+S.width/2,E.x)),y:Math.min(D===nt.Down?S.bottom-S.height/2:S.bottom,Math.max(D===nt.Down?S.top:S.top+S.height/2,E.y))},C=D===nt.Right&&!Q||D===nt.Left&&!F,M=D===nt.Down&&!ce||D===nt.Up&&!j;if(C&&x.x!==E.x){const R=q.scrollLeft+w.x,O=D===nt.Right&&R<=G.x||D===nt.Left&&R>=U.x;if(O&&!w.y){q.scrollTo({left:R,behavior:d});return}O?I.x=q.scrollLeft-R:I.x=D===nt.Right?q.scrollLeft-G.x:q.scrollLeft-U.x,I.x&&q.scrollBy({left:-I.x,behavior:d});break}else if(M&&x.y!==E.y){const R=q.scrollTop+w.y,O=D===nt.Down&&R<=G.y||D===nt.Up&&R>=U.y;if(O&&!w.x){q.scrollTo({top:R,behavior:d});return}O?I.y=q.scrollTop-R:I.y=D===nt.Down?q.scrollTop-G.y:q.scrollTop-U.y,I.y&&q.scrollBy({top:-I.y,behavior:d});break}}this.handleMove(e,tl(Yc(E,this.referenceCoordinates),I))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}v0.activators=[{eventName:"onKeyDown",handler:(i,e,t)=>{let{keyboardCodes:r=Xw,onActivation:o}=e,{active:c}=t;const{code:u}=i.nativeEvent;if(r.start.includes(u)){const d=c.activatorNode.current;return d&&i.target!==d?!1:(i.preventDefault(),o?.({event:i.nativeEvent}),!0)}return!1}}];function G1(i){return!!(i&&"distance"in i)}function $1(i){return!!(i&&"delay"in i)}class _0{constructor(e,t,r){var o;r===void 0&&(r=Dk(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:c}=e,{target:u}=c;this.props=e,this.events=t,this.document=Tl(u),this.documentListeners=new Oc(this.document),this.listeners=new Oc(r),this.windowListeners=new Oc(ti(u)),this.initialCoordinates=(o=Df(c))!=null?o:rs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Bi.Resize,this.handleCancel),this.windowListeners.add(Bi.DragStart,F1),this.windowListeners.add(Bi.VisibilityChange,this.handleCancel),this.windowListeners.add(Bi.ContextMenu,F1),this.documentListeners.add(Bi.Keydown,this.handleKeydown),t){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if($1(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(G1(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:o}=this.props;o(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Bi.Click,kk,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Bi.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:o,props:c}=this,{onMove:u,options:{activationConstraint:d}}=c;if(!o)return;const g=(t=Df(e))!=null?t:rs,p=Yc(o,g);if(!r&&d){if(G1(d)){if(d.tolerance!=null&&kg(p,d.tolerance))return this.handleCancel();if(kg(p,d.distance))return this.handleStart()}if($1(d)&&kg(p,d.tolerance))return this.handleCancel();this.handlePending(d,p);return}e.cancelable&&e.preventDefault(),u(g)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===nt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Mk={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class cd extends _0{constructor(e){const{event:t}=e,r=Tl(t.target);super(e,Mk,r)}}cd.activators=[{eventName:"onPointerDown",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:r}=e;return!t.isPrimary||t.button!==0?!1:(r?.({event:t}),!0)}}];const Vk={move:{name:"mousemove"},end:{name:"mouseup"}};var up;(function(i){i[i.RightClick=2]="RightClick"})(up||(up={}));class b0 extends _0{constructor(e){super(e,Vk,Tl(e.event.target))}}b0.activators=[{eventName:"onMouseDown",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:r}=e;return t.button===up.RightClick?!1:(r?.({event:t}),!0)}}];const Og={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class E0 extends _0{constructor(e){super(e,Og)}static setup(){return window.addEventListener(Og.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Og.move.name,e)};function e(){}}}E0.activators=[{eventName:"onTouchStart",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:r}=e;const{touches:o}=t;return o.length>1?!1:(r?.({event:t}),!0)}}];var Mc;(function(i){i[i.Pointer=0]="Pointer",i[i.DraggableRect=1]="DraggableRect"})(Mc||(Mc={}));var Of;(function(i){i[i.TreeOrder=0]="TreeOrder",i[i.ReversedTreeOrder=1]="ReversedTreeOrder"})(Of||(Of={}));function Pk(i){let{acceleration:e,activator:t=Mc.Pointer,canScroll:r,draggingRect:o,enabled:c,interval:u=5,order:d=Of.TreeOrder,pointerCoordinates:g,scrollableAncestors:p,scrollableAncestorRects:v,delta:E,threshold:w}=i;const I=Lk({delta:E,disabled:!c}),[P,q]=J4(),D=z.useRef({x:0,y:0}),j=z.useRef({x:0,y:0}),Q=z.useMemo(()=>{switch(t){case Mc.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case Mc.DraggableRect:return o}},[t,o,g]),F=z.useRef(null),ce=z.useCallback(()=>{const U=F.current;if(!U)return;const S=D.current.x*j.current.x,x=D.current.y*j.current.y;U.scrollBy(S,x)},[]),G=z.useMemo(()=>d===Of.TreeOrder?[...p].reverse():p,[d,p]);z.useEffect(()=>{if(!c||!p.length||!Q){q();return}for(const U of G){if(r?.(U)===!1)continue;const S=p.indexOf(U),x=v[S];if(!x)continue;const{direction:C,speed:M}=Ak(U,x,Q,e,w);for(const R of["x","y"])I[R][C[R]]||(M[R]=0,C[R]=0);if(M.x>0||M.y>0){q(),F.current=U,P(ce,u),D.current=M,j.current=C;return}}D.current={x:0,y:0},j.current={x:0,y:0},q()},[e,ce,r,q,c,u,JSON.stringify(Q),JSON.stringify(I),P,p,G,v,JSON.stringify(w)])}const jk={x:{[Sn.Backward]:!1,[Sn.Forward]:!1},y:{[Sn.Backward]:!1,[Sn.Forward]:!1}};function Lk(i){let{delta:e,disabled:t}=i;const r=If(e);return fu(o=>{if(t||!r||!o)return jk;const c={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Sn.Backward]:o.x[Sn.Backward]||c.x===-1,[Sn.Forward]:o.x[Sn.Forward]||c.x===1},y:{[Sn.Backward]:o.y[Sn.Backward]||c.y===-1,[Sn.Forward]:o.y[Sn.Forward]||c.y===1}}},[t,e,r])}function Uk(i,e){const t=e!=null?i.get(e):void 0,r=t?t.node.current:null;return fu(o=>{var c;return e==null?null:(c=r??o)!=null?c:null},[r,e])}function zk(i,e){return z.useMemo(()=>i.reduce((t,r)=>{const{sensor:o}=r,c=o.activators.map(u=>({eventName:u.eventName,handler:e(u.handler,r)}));return[...t,...c]},[]),[i,e])}var Xc;(function(i){i[i.Always=0]="Always",i[i.BeforeDragging=1]="BeforeDragging",i[i.WhileDragging=2]="WhileDragging"})(Xc||(Xc={}));var hp;(function(i){i.Optimized="optimized"})(hp||(hp={}));const K1=new Map;function Bk(i,e){let{dragging:t,dependencies:r,config:o}=e;const[c,u]=z.useState(null),{frequency:d,measure:g,strategy:p}=o,v=z.useRef(i),E=D(),w=Qc(E),I=z.useCallback(function(j){j===void 0&&(j=[]),!w.current&&u(Q=>Q===null?j:Q.concat(j.filter(F=>!Q.includes(F))))},[w]),P=z.useRef(null),q=fu(j=>{if(E&&!t)return K1;if(!j||j===K1||v.current!==i||c!=null){const Q=new Map;for(let F of i){if(!F)continue;if(c&&c.length>0&&!c.includes(F.id)&&F.rect.current){Q.set(F.id,F.rect.current);continue}const ce=F.node.current,G=ce?new y0(g(ce),ce):null;F.rect.current=G,G&&Q.set(F.id,G)}return Q}return j},[i,c,t,E,g]);return z.useEffect(()=>{v.current=i},[i]),z.useEffect(()=>{E||I()},[t,E]),z.useEffect(()=>{c&&c.length>0&&u(null)},[JSON.stringify(c)]),z.useEffect(()=>{E||typeof d!="number"||P.current!==null||(P.current=setTimeout(()=>{I(),P.current=null},d))},[d,E,I,...r]),{droppableRects:q,measureDroppableContainers:I,measuringScheduled:c!=null};function D(){switch(p){case Xc.Always:return!1;case Xc.BeforeDragging:return t;default:return!t}}}function T0(i,e){return fu(t=>i?t||(typeof e=="function"?e(i):i):null,[e,i])}function qk(i,e){return T0(i,e)}function Hk(i){let{callback:e,disabled:t}=i;const r=ad(e),o=z.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:c}=window;return new c(r)},[r,t]);return z.useEffect(()=>()=>o?.disconnect(),[o]),o}function ud(i){let{callback:e,disabled:t}=i;const r=ad(e),o=z.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:c}=window;return new c(r)},[t]);return z.useEffect(()=>()=>o?.disconnect(),[o]),o}function Fk(i){return new y0(du(i),i)}function Q1(i,e,t){e===void 0&&(e=Fk);const[r,o]=z.useState(null);function c(){o(g=>{if(!i)return null;if(i.isConnected===!1){var p;return(p=g??t)!=null?p:null}const v=e(i);return JSON.stringify(g)===JSON.stringify(v)?g:v})}const u=Hk({callback(g){if(i)for(const p of g){const{type:v,target:E}=p;if(v==="childList"&&E instanceof HTMLElement&&E.contains(i)){c();break}}}}),d=ud({callback:c});return ir(()=>{c(),i?(d?.observe(i),u?.observe(document.body,{childList:!0,subtree:!0})):(d?.disconnect(),u?.disconnect())},[i]),r}function Gk(i){const e=T0(i);return Bw(i,e)}const Y1=[];function $k(i){const e=z.useRef(i),t=fu(r=>i?r&&r!==Y1&&i&&e.current&&i.parentNode===e.current.parentNode?r:ld(i):Y1,[i]);return z.useEffect(()=>{e.current=i},[i]),t}function Kk(i){const[e,t]=z.useState(null),r=z.useRef(i),o=z.useCallback(c=>{const u=Dg(c.target);u&&t(d=>d?(d.set(u,cp(u)),new Map(d)):null)},[]);return z.useEffect(()=>{const c=r.current;if(i!==c){u(c);const d=i.map(g=>{const p=Dg(g);return p?(p.addEventListener("scroll",o,{passive:!0}),[p,cp(p)]):null}).filter(g=>g!=null);t(d.length?new Map(d):null),r.current=i}return()=>{u(i),u(c)};function u(d){d.forEach(g=>{const p=Dg(g);p?.removeEventListener("scroll",o)})}},[o,i]),z.useMemo(()=>i.length?e?Array.from(e.values()).reduce((c,u)=>tl(c,u),rs):Qw(i):rs,[i,e])}function X1(i,e){e===void 0&&(e=[]);const t=z.useRef(null);return z.useEffect(()=>{t.current=null},e),z.useEffect(()=>{const r=i!==rs;r&&!t.current&&(t.current=i),!r&&t.current&&(t.current=null)},[i]),t.current?Yc(i,t.current):rs}function Qk(i){z.useEffect(()=>{if(!rd)return;const e=i.map(t=>{let{sensor:r}=t;return r.setup==null?void 0:r.setup()});return()=>{for(const t of e)t?.()}},i.map(e=>{let{sensor:t}=e;return t}))}function Yk(i,e){return z.useMemo(()=>i.reduce((t,r)=>{let{eventName:o,handler:c}=r;return t[o]=u=>{c(u,e)},t},{}),[i,e])}function Ww(i){return z.useMemo(()=>i?Tk(i):null,[i])}const W1=[];function Xk(i,e){e===void 0&&(e=du);const[t]=i,r=Ww(t?ti(t):null),[o,c]=z.useState(W1);function u(){c(()=>i.length?i.map(g=>$w(g)?r:new y0(e(g),g)):W1)}const d=ud({callback:u});return ir(()=>{d?.disconnect(),u(),i.forEach(g=>d?.observe(g))},[i]),o}function Jw(i){if(!i)return null;if(i.children.length>1)return i;const e=i.children[0];return hu(e)?e:i}function Wk(i){let{measure:e}=i;const[t,r]=z.useState(null),o=z.useCallback(p=>{for(const{target:v}of p)if(hu(v)){r(E=>{const w=e(v);return E?{...E,width:w.width,height:w.height}:w});break}},[e]),c=ud({callback:o}),u=z.useCallback(p=>{const v=Jw(p);c?.disconnect(),v&&c?.observe(v),r(v?e(v):null)},[e,c]),[d,g]=Nf(u);return z.useMemo(()=>({nodeRef:d,rect:t,setRef:g}),[t,d,g])}const Jk=[{sensor:cd,options:{}},{sensor:v0,options:{}}],Zk={current:{}},rf={draggable:{measure:H1},droppable:{measure:H1,strategy:Xc.WhileDragging,frequency:hp.Optimized},dragOverlay:{measure:du}};class Vc extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return(t=(r=this.get(e))==null?void 0:r.node.current)!=null?t:void 0}}const eO={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Vc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:kf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:rf,measureDroppableContainers:kf,windowRect:null,measuringScheduled:!1},Zw={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:kf,draggableNodes:new Map,over:null,measureDroppableContainers:kf},mu=z.createContext(Zw),ex=z.createContext(eO);function tO(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Vc}}}function nO(i,e){switch(e.type){case vn.DragStart:return{...i,draggable:{...i.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case vn.DragMove:return i.draggable.active==null?i:{...i,draggable:{...i.draggable,translate:{x:e.coordinates.x-i.draggable.initialCoordinates.x,y:e.coordinates.y-i.draggable.initialCoordinates.y}}};case vn.DragEnd:case vn.DragCancel:return{...i,draggable:{...i.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case vn.RegisterDroppable:{const{element:t}=e,{id:r}=t,o=new Vc(i.droppable.containers);return o.set(r,t),{...i,droppable:{...i.droppable,containers:o}}}case vn.SetDroppableDisabled:{const{id:t,key:r,disabled:o}=e,c=i.droppable.containers.get(t);if(!c||r!==c.key)return i;const u=new Vc(i.droppable.containers);return u.set(t,{...c,disabled:o}),{...i,droppable:{...i.droppable,containers:u}}}case vn.UnregisterDroppable:{const{id:t,key:r}=e,o=i.droppable.containers.get(t);if(!o||r!==o.key)return i;const c=new Vc(i.droppable.containers);return c.delete(t),{...i,droppable:{...i.droppable,containers:c}}}default:return i}}function iO(i){let{disabled:e}=i;const{active:t,activatorEvent:r,draggableNodes:o}=z.useContext(mu),c=If(r),u=If(t?.id);return z.useEffect(()=>{if(!e&&!r&&c&&u!=null){if(!g0(c)||document.activeElement===c.target)return;const d=o.get(u);if(!d)return;const{activatorNode:g,node:p}=d;if(!g.current&&!p.current)return;requestAnimationFrame(()=>{for(const v of[g.current,p.current]){if(!v)continue;const E=tk(v);if(E){E.focus();break}}})}},[r,e,o,u,c]),null}function tx(i,e){let{transform:t,...r}=e;return i!=null&&i.length?i.reduce((o,c)=>c({transform:o,...r}),t):t}function sO(i){return z.useMemo(()=>({draggable:{...rf.draggable,...i?.draggable},droppable:{...rf.droppable,...i?.droppable},dragOverlay:{...rf.dragOverlay,...i?.dragOverlay}}),[i?.draggable,i?.droppable,i?.dragOverlay])}function rO(i){let{activeNode:e,measure:t,initialRect:r,config:o=!0}=i;const c=z.useRef(!1),{x:u,y:d}=typeof o=="boolean"?{x:o,y:o}:o;ir(()=>{if(!u&&!d||!e){c.current=!1;return}if(c.current||!r)return;const p=e?.node.current;if(!p||p.isConnected===!1)return;const v=t(p),E=Bw(v,r);if(u||(E.x=0),d||(E.y=0),c.current=!0,Math.abs(E.x)>0||Math.abs(E.y)>0){const w=Hw(p);w&&w.scrollBy({top:E.y,left:E.x})}},[e,u,d,r,t])}const hd=z.createContext({...rs,scaleX:1,scaleY:1});var Fr;(function(i){i[i.Uninitialized=0]="Uninitialized",i[i.Initializing=1]="Initializing",i[i.Initialized=2]="Initialized"})(Fr||(Fr={}));const w0=z.memo(function(e){var t,r,o,c;let{id:u,accessibility:d,autoScroll:g=!0,children:p,sensors:v=Jk,collisionDetection:E=pk,measuring:w,modifiers:I,...P}=e;const q=z.useReducer(nO,void 0,tO),[D,j]=q,[Q,F]=ok(),[ce,G]=z.useState(Fr.Uninitialized),U=ce===Fr.Initialized,{draggable:{active:S,nodes:x,translate:C},droppable:{containers:M}}=D,R=S!=null?x.get(S):null,O=z.useRef({initial:null,translated:null}),k=z.useMemo(()=>{var Ge;return S!=null?{id:S,data:(Ge=R?.data)!=null?Ge:Zk,rect:O}:null},[S,R]),be=z.useRef(null),[me,H]=z.useState(null),[Z,se]=z.useState(null),pe=Qc(P,Object.values(P)),ye=od("DndDescribedBy",u),V=z.useMemo(()=>M.getEnabled(),[M]),$=sO(w),{droppableRects:ue,measureDroppableContainers:ge,measuringScheduled:Ee}=Bk(V,{dragging:U,dependencies:[C.x,C.y],config:$.droppable}),Re=Uk(x,S),Ve=z.useMemo(()=>Z?Df(Z):null,[Z]),xt=Ki(),ht=qk(Re,$.draggable.measure);rO({activeNode:S!=null?x.get(S):null,config:xt.layoutShiftCompensation,initialRect:ht,measure:$.draggable.measure});const Ft=Q1(Re,$.draggable.measure,ht),xi=Q1(Re?Re.parentElement:null),Ln=z.useRef({activatorEvent:null,active:null,activeNode:Re,collisionRect:null,collisions:null,droppableRects:ue,draggableNodes:x,draggingNode:null,draggingNodeRect:null,droppableContainers:M,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),qi=M.getNodeFor((t=Ln.current.over)==null?void 0:t.id),en=Wk({measure:$.dragOverlay.measure}),fi=(r=en.nodeRef.current)!=null?r:Re,Un=U?(o=en.rect)!=null?o:Ft:null,as=!!(en.nodeRef.current&&en.rect),Hi=Gk(as?null:Ft),St=Ww(fi?ti(fi):null),ft=$k(U?qi??Re:null),$n=Xk(ft),os=tx(I,{transform:{x:C.x-Hi.x,y:C.y-Hi.y,scaleX:1,scaleY:1},activatorEvent:Z,active:k,activeNodeRect:Ft,containerNodeRect:xi,draggingNodeRect:Un,over:Ln.current.over,overlayNodeRect:en.rect,scrollableAncestors:ft,scrollableAncestorRects:$n,windowRect:St}),ls=Ve?tl(Ve,C):null,tn=Kk(ft),Fi=X1(tn),Rs=X1(tn,[Ft]),Kn=tl(os,Fi),Cn=Un?_k(Un,os):null,Gi=k&&Cn?E({active:k,collisionRect:Cn,droppableRects:ue,droppableContainers:V,pointerCoordinates:ls}):null,Cs=zw(Gi,"id"),[Qn,Ns]=z.useState(null),Yn=as?os:tl(os,Rs),Gt=yk(Yn,(c=Qn?.rect)!=null?c:null,Ft),bn=z.useRef(null),At=z.useCallback((Ge,Rt)=>{let{sensor:Ct,options:Ut}=Rt;if(be.current==null)return;const En=x.get(be.current);if(!En)return;const nn=Ge.nativeEvent,Vt=new Ct({active:be.current,activeNode:En,event:nn,options:Ut,context:Ln,onAbort(gt){if(!x.get(gt))return;const{onDragAbort:$t}=pe.current,ve={id:gt};$t?.(ve),Q({type:"onDragAbort",event:ve})},onPending(gt,pt,$t,ve){if(!x.get(gt))return;const{onDragPending:it}=pe.current,kt={id:gt,constraint:pt,initialCoordinates:$t,offset:ve};it?.(kt),Q({type:"onDragPending",event:kt})},onStart(gt){const pt=be.current;if(pt==null)return;const $t=x.get(pt);if(!$t)return;const{onDragStart:ve}=pe.current,mn={activatorEvent:nn,active:{id:pt,data:$t.data,rect:O}};wc.unstable_batchedUpdates(()=>{ve?.(mn),G(Fr.Initializing),j({type:vn.DragStart,initialCoordinates:gt,active:pt}),Q({type:"onDragStart",event:mn}),H(bn.current),se(nn)})},onMove(gt){j({type:vn.DragMove,coordinates:gt})},onEnd:ne(vn.DragEnd),onCancel:ne(vn.DragCancel)});bn.current=Vt;function ne(gt){return async function(){const{active:$t,collisions:ve,over:mn,scrollAdjustedTranslate:it}=Ln.current;let kt=null;if($t&&it){const{cancelDrop:gn}=pe.current;kt={activatorEvent:nn,active:$t,collisions:ve,delta:it,over:mn},gt===vn.DragEnd&&typeof gn=="function"&&await Promise.resolve(gn(kt))&&(gt=vn.DragCancel)}be.current=null,wc.unstable_batchedUpdates(()=>{j({type:gt}),G(Fr.Uninitialized),Ns(null),H(null),se(null),bn.current=null;const gn=gt===vn.DragEnd?"onDragEnd":"onDragCancel";if(kt){const yt=pe.current[gn];yt?.(kt),Q({type:gn,event:kt})}})}}},[x]),Is=z.useCallback((Ge,Rt)=>(Ct,Ut)=>{const En=Ct.nativeEvent,nn=x.get(Ut);if(be.current!==null||!nn||En.dndKit||En.defaultPrevented)return;const Vt={active:nn};Ge(Ct,Rt.options,Vt)===!0&&(En.dndKit={capturedBy:Rt.sensor},be.current=Ut,At(Ct,Rt))},[x,At]),$i=zk(v,Is);Qk(v),ir(()=>{Ft&&ce===Fr.Initializing&&G(Fr.Initialized)},[Ft,ce]),z.useEffect(()=>{const{onDragMove:Ge}=pe.current,{active:Rt,activatorEvent:Ct,collisions:Ut,over:En}=Ln.current;if(!Rt||!Ct)return;const nn={active:Rt,activatorEvent:Ct,collisions:Ut,delta:{x:Kn.x,y:Kn.y},over:En};wc.unstable_batchedUpdates(()=>{Ge?.(nn),Q({type:"onDragMove",event:nn})})},[Kn.x,Kn.y]),z.useEffect(()=>{const{active:Ge,activatorEvent:Rt,collisions:Ct,droppableContainers:Ut,scrollAdjustedTranslate:En}=Ln.current;if(!Ge||be.current==null||!Rt||!En)return;const{onDragOver:nn}=pe.current,Vt=Ut.get(Cs),ne=Vt&&Vt.rect.current?{id:Vt.id,rect:Vt.rect.current,data:Vt.data,disabled:Vt.disabled}:null,gt={active:Ge,activatorEvent:Rt,collisions:Ct,delta:{x:En.x,y:En.y},over:ne};wc.unstable_batchedUpdates(()=>{Ns(ne),nn?.(gt),Q({type:"onDragOver",event:gt})})},[Cs]),ir(()=>{Ln.current={activatorEvent:Z,active:k,activeNode:Re,collisionRect:Cn,collisions:Gi,droppableRects:ue,draggableNodes:x,draggingNode:fi,draggingNodeRect:Un,droppableContainers:M,over:Qn,scrollableAncestors:ft,scrollAdjustedTranslate:Kn},O.current={initial:Un,translated:Cn}},[k,Re,Gi,Cn,x,fi,Un,ue,M,Qn,ft,Kn]),Pk({...xt,delta:C,draggingRect:Cn,pointerCoordinates:ls,scrollableAncestors:ft,scrollableAncestorRects:$n});const rr=z.useMemo(()=>({active:k,activeNode:Re,activeNodeRect:Ft,activatorEvent:Z,collisions:Gi,containerNodeRect:xi,dragOverlay:en,draggableNodes:x,droppableContainers:M,droppableRects:ue,over:Qn,measureDroppableContainers:ge,scrollableAncestors:ft,scrollableAncestorRects:$n,measuringConfiguration:$,measuringScheduled:Ee,windowRect:St}),[k,Re,Ft,Z,Gi,xi,en,x,M,ue,Qn,ge,ft,$n,$,Ee,St]),ni=z.useMemo(()=>({activatorEvent:Z,activators:$i,active:k,activeNodeRect:Ft,ariaDescribedById:{draggable:ye},dispatch:j,draggableNodes:x,over:Qn,measureDroppableContainers:ge}),[Z,$i,k,Ft,j,ye,x,Qn,ge]);return rt.createElement(jw.Provider,{value:F},rt.createElement(mu.Provider,{value:ni},rt.createElement(ex.Provider,{value:rr},rt.createElement(hd.Provider,{value:Gt},p)),rt.createElement(iO,{disabled:d?.restoreFocus===!1})),rt.createElement(uk,{...d,hiddenTextDescribedById:ye}));function Ki(){const Ge=me?.autoScrollEnabled===!1,Rt=typeof g=="object"?g.enabled===!1:g===!1,Ct=U&&!Ge&&!Rt;return typeof g=="object"?{...g,enabled:Ct}:{enabled:Ct}}}),aO=z.createContext(null),J1="button",oO="Draggable";function gu(i){let{id:e,data:t,disabled:r=!1,attributes:o}=i;const c=od(oO),{activators:u,activatorEvent:d,active:g,activeNodeRect:p,ariaDescribedById:v,draggableNodes:E,over:w}=z.useContext(mu),{role:I=J1,roleDescription:P="draggable",tabIndex:q=0}=o??{},D=g?.id===e,j=z.useContext(D?hd:aO),[Q,F]=Nf(),[ce,G]=Nf(),U=Yk(u,e),S=Qc(t);ir(()=>(E.set(e,{id:e,key:c,node:Q,activatorNode:ce,data:S}),()=>{const C=E.get(e);C&&C.key===c&&E.delete(e)}),[E,e]);const x=z.useMemo(()=>({role:I,tabIndex:q,"aria-disabled":r,"aria-pressed":D&&I===J1?!0:void 0,"aria-roledescription":P,"aria-describedby":v.draggable}),[r,I,q,D,P,v.draggable]);return{active:g,activatorEvent:d,activeNodeRect:p,attributes:x,isDragging:D,listeners:r?void 0:U,node:Q,over:w,setNodeRef:F,setActivatorNodeRef:G,transform:j}}function lO(){return z.useContext(ex)}const cO="Droppable",uO={timeout:25};function wl(i){let{data:e,disabled:t=!1,id:r,resizeObserverConfig:o}=i;const c=od(cO),{active:u,dispatch:d,over:g,measureDroppableContainers:p}=z.useContext(mu),v=z.useRef({disabled:t}),E=z.useRef(!1),w=z.useRef(null),I=z.useRef(null),{disabled:P,updateMeasurementsFor:q,timeout:D}={...uO,...o},j=Qc(q??r),Q=z.useCallback(()=>{if(!E.current){E.current=!0;return}I.current!=null&&clearTimeout(I.current),I.current=setTimeout(()=>{p(Array.isArray(j.current)?j.current:[j.current]),I.current=null},D)},[D]),F=ud({callback:Q,disabled:P||!u}),ce=z.useCallback((x,C)=>{F&&(C&&(F.unobserve(C),E.current=!1),x&&F.observe(x))},[F]),[G,U]=Nf(ce),S=Qc(e);return z.useEffect(()=>{!F||!G.current||(F.disconnect(),E.current=!1,F.observe(G.current))},[G,F]),z.useEffect(()=>(d({type:vn.RegisterDroppable,element:{id:r,key:c,disabled:t,node:G,rect:w,data:S}}),()=>d({type:vn.UnregisterDroppable,key:c,id:r})),[r]),z.useEffect(()=>{t!==v.current.disabled&&(d({type:vn.SetDroppableDisabled,id:r,key:c,disabled:t}),v.current.disabled=t)},[r,c,t,d]),{active:u,rect:w,isOver:g?.id===r,node:G,over:g,setNodeRef:U}}function hO(i){let{animation:e,children:t}=i;const[r,o]=z.useState(null),[c,u]=z.useState(null),d=If(t);return!t&&!r&&d&&o(d),ir(()=>{if(!c)return;const g=r?.key,p=r?.props.id;if(g==null||p==null){o(null);return}Promise.resolve(e(p,c)).then(()=>{o(null)})},[e,r,c]),rt.createElement(rt.Fragment,null,t,r?z.cloneElement(r,{ref:u}):null)}const fO={x:0,y:0,scaleX:1,scaleY:1};function dO(i){let{children:e}=i;return rt.createElement(mu.Provider,{value:Zw},rt.createElement(hd.Provider,{value:fO},e))}const mO={position:"fixed",touchAction:"none"},gO=i=>g0(i)?"transform 250ms ease":void 0,pO=z.forwardRef((i,e)=>{let{as:t,activatorEvent:r,adjustScale:o,children:c,className:u,rect:d,style:g,transform:p,transition:v=gO}=i;if(!d)return null;const E=o?p:{...p,scaleX:1,scaleY:1},w={...mO,width:d.width,height:d.height,top:d.top,left:d.left,transform:fl.Transform.toString(E),transformOrigin:o&&r?hk(r,d):void 0,transition:typeof v=="function"?v(r):v,...g};return rt.createElement(t,{className:u,style:w,ref:e},c)}),yO=i=>e=>{let{active:t,dragOverlay:r}=e;const o={},{styles:c,className:u}=i;if(c!=null&&c.active)for(const[d,g]of Object.entries(c.active))g!==void 0&&(o[d]=t.node.style.getPropertyValue(d),t.node.style.setProperty(d,g));if(c!=null&&c.dragOverlay)for(const[d,g]of Object.entries(c.dragOverlay))g!==void 0&&r.node.style.setProperty(d,g);return u!=null&&u.active&&t.node.classList.add(u.active),u!=null&&u.dragOverlay&&r.node.classList.add(u.dragOverlay),function(){for(const[g,p]of Object.entries(o))t.node.style.setProperty(g,p);u!=null&&u.active&&t.node.classList.remove(u.active)}},vO=i=>{let{transform:{initial:e,final:t}}=i;return[{transform:fl.Transform.toString(e)},{transform:fl.Transform.toString(t)}]},_O={duration:250,easing:"ease",keyframes:vO,sideEffects:yO({styles:{active:{opacity:"0"}}})};function bO(i){let{config:e,draggableNodes:t,droppableContainers:r,measuringConfiguration:o}=i;return ad((c,u)=>{if(e===null)return;const d=t.get(c);if(!d)return;const g=d.node.current;if(!g)return;const p=Jw(u);if(!p)return;const{transform:v}=ti(u).getComputedStyle(u),E=qw(v);if(!E)return;const w=typeof e=="function"?e:EO(e);return Yw(g,o.draggable.measure),w({active:{id:c,data:d.data,node:g,rect:o.draggable.measure(g)},draggableNodes:t,dragOverlay:{node:u,rect:o.dragOverlay.measure(p)},droppableContainers:r,measuringConfiguration:o,transform:E})})}function EO(i){const{duration:e,easing:t,sideEffects:r,keyframes:o}={..._O,...i};return c=>{let{active:u,dragOverlay:d,transform:g,...p}=c;if(!e)return;const v={x:d.rect.left-u.rect.left,y:d.rect.top-u.rect.top},E={scaleX:g.scaleX!==1?u.rect.width*g.scaleX/d.rect.width:1,scaleY:g.scaleY!==1?u.rect.height*g.scaleY/d.rect.height:1},w={x:g.x-v.x,y:g.y-v.y,...E},I=o({...p,active:u,dragOverlay:d,transform:{initial:g,final:w}}),[P]=I,q=I[I.length-1];if(JSON.stringify(P)===JSON.stringify(q))return;const D=r?.({active:u,dragOverlay:d,...p}),j=d.node.animate(I,{duration:e,easing:t,fill:"forwards"});return new Promise(Q=>{j.onfinish=()=>{D?.(),Q()}})}}let Z1=0;function TO(i){return z.useMemo(()=>{if(i!=null)return Z1++,Z1},[i])}const nx=rt.memo(i=>{let{adjustScale:e=!1,children:t,dropAnimation:r,style:o,transition:c,modifiers:u,wrapperElement:d="div",className:g,zIndex:p=999}=i;const{activatorEvent:v,active:E,activeNodeRect:w,containerNodeRect:I,draggableNodes:P,droppableContainers:q,dragOverlay:D,over:j,measuringConfiguration:Q,scrollableAncestors:F,scrollableAncestorRects:ce,windowRect:G}=lO(),U=z.useContext(hd),S=TO(E?.id),x=tx(u,{activatorEvent:v,active:E,activeNodeRect:w,containerNodeRect:I,draggingNodeRect:D.rect,over:j,overlayNodeRect:D.rect,scrollableAncestors:F,scrollableAncestorRects:ce,transform:U,windowRect:G}),C=T0(w),M=bO({config:r,draggableNodes:P,droppableContainers:q,measuringConfiguration:Q}),R=C?D.setRef:void 0;return rt.createElement(dO,null,rt.createElement(hO,{animation:M},E&&S?rt.createElement(pO,{key:S,id:E.id,ref:R,as:d,activatorEvent:v,adjustScale:e,className:g,transition:c,rect:C,style:{zIndex:p,...o},transform:x},t):null))}),nl=i=>new f0(i),wO=(i,e,t,r)=>{try{return i.move({from:e,to:t,promotion:r||"q"})}catch{return null}},xO=({id:i,isLight:e,isHighlighted:t=!1,isActive:r=!1,children:o})=>{const{isOver:c,setNodeRef:u}=wl({id:i});return _.jsxs("div",{ref:u,className:`chess-square ${r?"z-50 relative":"overflow-hidden"} ${c?"bg-indigo-500/60 shadow-[inset_0_0_20px_rgba(255,255,255,0.2)] z-10":t?e?"bg-indigo-400/50 shadow-inner":"bg-indigo-600/50 shadow-inner":e?"bg-[#cbd5e1] text-slate-700 shadow-[inset_0_1px_4px_rgba(255,255,255,0.3)]":"bg-[#334155] text-slate-400 shadow-[inset_0_2px_4px_rgba(0,0,0,0.3)]"}`,children:[_.jsx("div",{className:`absolute top-1 left-1 text-[10px] font-black uppercase tracking-tighter opacity-20 pointer-events-none ${e?"text-slate-900":"text-slate-100"}`,children:i}),_.jsx("div",{className:"relative w-full h-full overflow-visible z-10",children:o})]})},SO={w:{p:"",r:"",n:"",b:"",q:"",k:""},b:{p:"",r:"",n:"",b:"",q:"",k:""}},AO=({id:i,type:e,color:t,isDraggable:r=!0})=>{const{attributes:o,listeners:c,setNodeRef:u,transform:d,isDragging:g}=gu({id:i,disabled:!r,data:{type:e,color:t}}),p={transform:fl.Translate.toString(d),transition:g?"none":"transform 120ms ease-out",zIndex:g?9999:20};return _.jsx("div",{ref:u,style:p,...c,...o,className:`chess-piece transition-transform duration-120 ease-out ${g?"scale-112 drop-shadow-2xl z-[9999]":"hover:scale-103 z-20"} ${r?"cursor-grab active:cursor-grabbing":"grayscale-[0.2] opacity-90 cursor-default"} text-slate-950 drop-shadow-sm`,children:_.jsx("div",{className:`
        flex items-center justify-center w-full h-full 
        ${t==="w"?"drop-shadow-[0_2px_0_rgba(255,255,255,0.8)]":"drop-shadow-[0_2px_0_rgba(0,0,0,0.5)]"}
      `,children:SO[t][e]})})},RO=({onMove:i,initialFen:e,playerColor:t="w",isGameOver:r=!1})=>{const[o,c]=z.useState(()=>nl(e)),[u,d]=z.useState([]),[g,p]=z.useState(null);rt.useEffect(()=>{e&&e!==o.fen()&&c(nl(e))},[e]);const v=p0(Ka(E0,{activationConstraint:{delay:80,tolerance:8}}),Ka(cd),Ka(b0)),E=z.useCallback(P=>{const{active:q,over:D}=P;if(d([]),p(null),!D)return;const j=q.id,Q=D.id,F=nl(o.fen());wO(F,j,Q)&&(c(F),i&&i(F.fen()))},[o,i]),w=z.useCallback(P=>{p(P);const q=P,D=o.get(q);if(r||!D||D.color!==t||o.turn()!==t){d([]);return}const j=o.moves({square:q,verbose:!0}).map(Q=>Q.to);d(j)},[o,t]),I=()=>{const P=[],q=["a","b","c","d","e","f","g","h"],D=["8","7","6","5","4","3","2","1"],j=t==="w"?D:[...D].reverse(),Q=t==="w"?q:[...q].reverse();for(const F of j)for(const ce of Q){const G=`${ce}${F}`,U=o.get(G),S=(q.indexOf(ce)+D.indexOf(F))%2===0,x=!!U&&U.color===t&&o.turn()===t&&!r,C=u.includes(G),M=G===g;P.push(_.jsx(xO,{id:G,isLight:S,isHighlighted:C,isActive:M,children:U&&_.jsx(AO,{id:G,type:U.type,color:U.color,isDraggable:x})},G))}return P};return _.jsx(w0,{sensors:v,onDragEnd:E,onDragStart:P=>w(P.active.id),children:_.jsx("div",{className:"p-3 lg:p-4 bg-slate-800 rounded-[2rem] lg:rounded-[2.5rem] shadow-[0_0_50px_-12px_rgba(99,102,241,0.25)] border-4 border-slate-700/50 ring-4 ring-slate-900/50",style:{touchAction:"none"},children:_.jsx("div",{className:"grid grid-cols-8 gap-0 rounded-2xl lg:rounded-3xl overflow-hidden border border-slate-700/30 shadow-inner",style:{width:"min(92vw, 720px)",height:"min(92vw, 720px)",gridTemplateColumns:"repeat(8, 1fr)"},children:I()})})})},CO=()=>Math.random().toString(36).substring(2,8).toUpperCase(),eE="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",ix=i=>{const[e,t]=z.useState(null),[r,o]=z.useState(null),[c,u]=z.useState(!0),[d,g]=z.useState(!0);z.useEffect(()=>{const D=eo();Za(D).then(j=>{o(j.user.uid)}).catch(j=>{console.error("Auth failed",j)}).finally(()=>g(!1))},[]);const p=async()=>{if(r)return r;const D=eo(),j=await Za(D);return o(j.user.uid),j.user.uid};return z.useEffect(()=>{if(!jt||!Oe){console.warn("Firebase not configured; room sync disabled."),u(!1);return}if(!i){t(null),u(!1);return}u(!0);const D=Zt(Jt(Oe,"rooms"),i),j=Zf(D,Q=>{Q.exists()?t(Q.data()):t(null),u(!1)},Q=>{console.error("Room subscription error",Q),t(null),u(!1)});return()=>j()},[i]),{room:e,userId:r,loading:c,isAuthLoading:d,createRoom:async()=>{if(!jt||!Oe)throw new Error("Firebase not configured");const D=await p(),j=CO(),Q=Zt(Jt(Oe,"rooms"),j);return await Jf(Q,{fen:eE,whitePlayer:D,blackPlayer:"",turn:"w",status:"active",winner:"",resultReason:""}),j},joinRoom:async D=>{if(!jt||!Oe)throw new Error("Firebase not configured");const j=await p(),Q=Zt(Jt(Oe,"rooms"),D);await ia(Oe,async F=>{const ce=await F.get(Q);if(!ce.exists())throw new Error("Room not found");const U={...ce.data()};U.whitePlayer?!U.blackPlayer&&U.whitePlayer!==j&&(U.blackPlayer=j):U.whitePlayer=j,F.update(Q,U)})},updateMove:async D=>{if(!jt||!Oe||!i)return;const j=Zt(Jt(Oe,"rooms"),i);await ia(Oe,async Q=>{const F=await Q.get(j);if(!F.exists())return;const ce=F.data();if(ce.status&&ce.status!=="active")return;const G=new f0(D),U=G.turn();let S="active",x="",C="";G.isCheckmate()?(S="checkmate",x=U==="w"?"b":"w",C="checkmate"):G.isStalemate&&G.isStalemate()?(S="stalemate",x="",C="stalemate"):G.isDraw()&&(S="draw",x="",C="draw"),Q.update(j,{fen:D,turn:U,status:S,winner:x,resultReason:C})})},resignGame:async D=>{if(!jt||!Oe||!i)return;const j=Zt(Jt(Oe,"rooms"),i);await Wo(j,{status:"resigned",winner:D==="w"?"b":"w",resultReason:"resigned"})},resetGame:async()=>{if(!jt||!Oe||!i)return;const D=Zt(Jt(Oe,"rooms"),i);await Wo(D,{fen:eE,turn:"w",status:"active",winner:"",resultReason:""})},leaveRoom:async()=>{if(!(!jt||!Oe)&&i)try{const D=await p(),j=Zt(Jt(Oe,"rooms"),i);await ia(Oe,async Q=>{const F=await Q.get(j);if(!F.exists())return;const G={...F.data()};G.whitePlayer===D?G.whitePlayer="":G.blackPlayer===D&&(G.blackPlayer=""),Q.update(j,G)})}catch(D){console.error("Error leaving room:",D)}}}},NO={p:10,n:30,b:30,r:50,q:90,k:900},tE=[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,-.5,-1,0,0,-1,-.5,.5],[.5,1,1,-2,-2,1,1,.5],[0,0,0,0,0,0,0,0]],nE=[[-5,-4,-3,-3,-3,-3,-4,-5],[-4,-2,0,0,0,0,-2,-4],[-3,0,1,1.5,1.5,1,0,-3],[-3,.5,1.5,2,2,1.5,.5,-3],[-3,0,1.5,2,2,1.5,0,-3],[-3,.5,1,1.5,1.5,1,.5,-3],[-4,-2,0,.5,.5,0,-2,-4],[-5,-4,-3,-3,-3,-3,-4,-5]],IO=i=>{let e=0;const t=i.board();for(let r=0;r<8;r++)for(let o=0;o<8;o++){const c=t[r][o];if(c){const u=NO[c.type];let d=0;c.type==="p"&&(d=c.color==="w"?tE[r][o]:tE[7-r][o]),c.type==="n"&&(d=c.color==="w"?nE[r][o]:nE[7-r][o]),c.color==="w"?e+=u+d*.1:e-=u+d*.1}}return e},fp=(i,e,t,r,o)=>{if(e===0||i.isGameOver())return-IO(i);const c=i.moves();if(o){let u=-1/0;for(const d of c){i.move(d);const g=fp(i,e-1,t,r,!1);if(i.undo(),u=Math.max(u,g),t=Math.max(t,g),r<=t)break}return u}else{let u=1/0;for(const d of c){i.move(d);const g=fp(i,e-1,t,r,!0);if(i.undo(),u=Math.min(u,g),r=Math.min(r,g),r<=t)break}return u}},DO=(i,e="Normal")=>{const t=i.moves();if(t.length===0)return null;if(e==="Easy"&&Math.random()>.2)return t[Math.floor(Math.random()*t.length)];let r=null,o=1/0;t.sort((u,d)=>{const g=u.includes("x")?1:0;return(d.includes("x")?1:0)-g});const c=e==="Easy"?1:e==="Hard"?3:2;for(const u of t){i.move(u);const d=fp(i,c,-1/0,1/0,!0);i.undo(),d<o&&(o=d,r=u)}return r||t[0]},kO=({roomId:i="",mode:e="online",aiDifficulty:t="Normal",onExit:r})=>{const o=ix(e==="online"?i:null),[c,u]=z.useState(()=>nl()),[d,g]=z.useState(c.fen()),[p,v]=z.useState("active"),[E,w]=z.useState(""),I=e==="local",P=I?{fen:d,turn:c.turn(),whitePlayer:"local-white",blackPlayer:"local-black",status:p,winner:E}:o.room,q=I?!1:o.loading,D=ge=>{const Ee=nl(ge);u(Ee),g(ge),Ee.isCheckmate()?(v("checkmate"),w(Ee.turn()==="w"?"b":"w")):Ee.isDraw()?v("draw"):Ee.isStalemate&&Ee.isStalemate()&&v("stalemate")};z.useEffect(()=>{if(I&&c.turn()==="b"&&p==="active"){const ge=setTimeout(()=>{const Ee=DO(c,t);Ee&&(c.move(Ee),D(c.fen()))},500);return()=>clearTimeout(ge)}},[d,I,p,t]);const j=()=>{const ge=nl();u(ge),g(ge.fen()),v("active"),w(""),S(0),C(0),R(0)},Q=I?D:o.updateMove,F=I?ge=>{v("active"),w(ge==="w"?"b":"w"),alert(`${ge==="w"?"White":"Black"} resigned.`)}:o.resignGame,ce=I?j:o.resetGame,G=I?P?.turn==="w"?"local-white":"local-black":o.userId,[U,S]=rt.useState(0),[x,C]=rt.useState(0),[M,R]=rt.useState(0);if(rt.useEffect(()=>{!I&&i&&o.joinRoom&&o.joinRoom(i)},[i,I]),rt.useEffect(()=>{if(!P||P.status&&P.status!=="active")return;const ge=window.setInterval(()=>{S(Ee=>Ee+1),C(Ee=>Ee+(P.turn==="w"?1:0)),R(Ee=>Ee+(P.turn==="b"?1:0))},1e3);return()=>window.clearInterval(ge)},[P?.turn,P?.status]),q)return _.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-6 animate-pulse",children:[_.jsx("div",{className:"relative shadow-2xl shadow-indigo-500/20 rounded-full p-4",children:_.jsx(lE,{className:"w-16 h-16 text-indigo-500 animate-spin"})}),_.jsxs("div",{className:"text-center space-y-2",children:[_.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest",children:"Entering Arena"}),_.jsx("p",{className:"text-slate-500 font-medium",children:"Synchronizing with the global lattice..."})]})]});if(!P)return _.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[_.jsxs("div",{className:"text-center space-y-4",children:[_.jsx("h2",{className:"text-5xl font-black text-white italic",children:"Room Dissolved"}),_.jsx("p",{className:"text-slate-400 text-lg",children:"The arena you seek no longer exists or the link is expired."})]}),_.jsx("button",{onClick:r,className:"btn-premium px-10 py-4 text-xl",children:"Return to Lobby"})]});const O=P.whitePlayer===G||I,k=P.blackPlayer===G,be=I||G===P.whitePlayer?"w":G===P.blackPlayer?"b":"w",me=P.turn===be,H=new f0(P.fen),Z={isCheck:H.isCheck(),isCheckmate:H.isCheckmate(),isDraw:H.isDraw(),isStalemate:typeof H.isStalemate=="function"?H.isStalemate():!1,turn:H.turn()},se=P.status??"active",pe=P.winner??"",ye=se!=="active",V=ge=>{const Ee=Math.floor(ge/60).toString().padStart(2,"0"),Re=(ge%60).toString().padStart(2,"0");return`${Ee}:${Re}`},$=se==="checkmate"?`Checkmate  ${pe==="w"?"White":"Black"} wins`:se==="stalemate"?"Stalemate  Draw":se==="draw"?"Draw":se==="resigned"?`Resigned  ${pe==="w"?"White":"Black"} wins`:Z.isCheck?`${Z.turn==="w"?"White":"Black"} is in check`:me?"Your Turn":"Waiting...",ue=()=>{navigator.clipboard.writeText(i),alert("Room ID copied to clipboard!")};return _.jsxs("div",{className:"flex flex-col items-center gap-8 lg:gap-12 py-6 lg:py-10 w-full animate-in fade-in duration-700",children:[_.jsxs("header",{className:"w-full max-w-6xl flex items-center justify-between px-4 lg:px-6",children:[_.jsxs("button",{onClick:()=>{!I&&o.leaveRoom&&o.leaveRoom(),r()},className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all font-bold uppercase tracking-widest text-xs",children:[_.jsx("div",{className:"p-2 rounded-xl bg-slate-900 border border-slate-800 group-hover:border-slate-700 group-hover:-translate-x-1 transition-transform",children:_.jsx(Ha,{size:18})}),"Back"]}),!I&&_.jsx("div",{className:"flex items-center gap-4",children:_.jsxs("div",{className:"liquid-glass px-6 py-3 flex items-center gap-6",children:[_.jsxs("div",{className:"flex flex-col gap-0.5",children:[_.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-slate-500 font-black",children:"Arena ID"}),_.jsx("code",{className:"text-indigo-300 font-mono font-bold",children:i})]}),_.jsx("div",{className:"h-8 w-px bg-slate-800"}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("button",{onClick:ue,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:_.jsx(yp,{size:18})}),_.jsx("button",{className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:_.jsx(cE,{size:18})})]})]})}),I&&_.jsx("div",{className:"px-6 py-3 liquid-glass text-indigo-300 font-bold uppercase tracking-widest text-xs",children:"Single Player Mode"})]}),_.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-6 lg:gap-16 w-full max-w-7xl px-4 lg:px-6",children:[_.jsxs("div",{className:"relative group w-full flex justify-center max-w-full overflow-visible",children:[_.jsx("div",{className:"absolute -inset-4 bg-linear-to-r from-indigo-500 to-pink-500 rounded-[2.5rem] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"}),_.jsx(RO,{initialFen:P.fen,onMove:Q,playerColor:be,isGameOver:ye})]}),_.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-6 lg:gap-8 mt-0 lg:mt-0",children:[_.jsxs("div",{className:"liquid-glass p-5 lg:p-8 space-y-6 lg:space-y-8 border-l-4 border-l-indigo-500",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:"Game Status"}),_.jsxs("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-2 ${se==="active"?me?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-slate-800 text-slate-500":"bg-indigo-500/10 text-indigo-300 border border-indigo-500/30"}`,children:[_.jsx("span",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${se==="active"?"bg-green-500":"bg-indigo-400"}`}),I?P.turn==="w"?" White Turn":" Black Turn":$]})]}),se==="active"&&Z.isCheck&&_.jsxs("div",{className:"p-3 rounded-2xl bg-amber-500/10 border border-amber-500/30 text-amber-200 text-[10px] lg:text-xs font-black uppercase tracking-widest",children:["CHECK! ",Z.turn==="w"?"White":"Black"," to move."]}),ye&&_.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/10 border border-indigo-500/30 text-indigo-100 text-sm lg:text-base font-bold",children:$}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 p-4 rounded-2xl bg-slate-900/60 border border-slate-800/80 text-[10px] lg:text-xs font-bold uppercase tracking-widest",children:[_.jsxs("div",{className:"space-y-1",children:[_.jsx("div",{className:"text-slate-500",children:"Time"}),_.jsx("div",{className:"text-white text-base",children:V(U)})]}),_.jsxs("div",{className:"space-y-1",children:[_.jsx("div",{className:"text-slate-500",children:"White"}),_.jsx("div",{className:"text-emerald-300 text-base",children:V(x)})]}),_.jsxs("div",{className:"space-y-1",children:[_.jsx("div",{className:"text-slate-500",children:"Black"}),_.jsx("div",{className:"text-sky-300 text-base",children:V(M)})]})]}),!I&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"flex items-center gap-3 lg:gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[_.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${O?"bg-white text-slate-950":"bg-slate-800 text-slate-400"}`,children:"W"}),_.jsxs("div",{className:"flex-1",children:[_.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"White Player"}),_.jsx("div",{className:"text-xs text-slate-500 font-medium",children:P.whitePlayer===G?"Connected (You)":P.whitePlayer?"Opponent Ready":"Awaiting Entry..."})]})]}),_.jsxs("div",{className:"flex items-center gap-3 lg:gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[_.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${k?"bg-indigo-500 text-white":"bg-slate-800 text-slate-400"}`,children:"B"}),_.jsxs("div",{className:"flex-1",children:[_.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"Black Player"}),_.jsx("div",{className:"text-xs text-slate-500 font-medium",children:P.blackPlayer===G?"Connected (You)":P.blackPlayer?"Opponent Ready":"Awaiting Entry..."})]})]})]})]}),_.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[_.jsxs("button",{disabled:ye,onClick:()=>F(be),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-slate-800 bg-slate-900/60 text-slate-200 font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:border-red-500/50 hover:text-red-200 transition",children:[_.jsx(oE,{size:18}),"Resign"]}),_.jsxs("button",{disabled:!ye&&!I,onClick:()=>ce(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 text-indigo-100 font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:bg-indigo-500/20 transition",children:[_.jsx(vp,{size:18}),"Rematch"]})]})]}),!I&&_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[_.jsx(Vf,{size:20,className:"mx-auto text-slate-600"}),_.jsx("div",{className:"text-xl font-black text-white italic",children:P.whitePlayer&&P.blackPlayer?"2/2":P.whitePlayer||P.blackPlayer?"1/2":"0/2"}),_.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Connected"})]}),_.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[_.jsx(uE,{size:20,className:"mx-auto text-indigo-400"}),_.jsx("div",{className:"text-xl font-black text-white italic",children:"24ms"}),_.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Latency"})]})]})]})]}),_.jsxs("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10 flex flex-col items-center gap-1",children:[_.jsx("span",{children:"Transparent Strategy Arena"}),_.jsx("span",{className:"text-slate-700 text-[8px]",children:"v1.2.0"})]})]})},OO=[2,0,0,0,0,-5,0,-3,0,0,0,5,-5,0,0,0,3,0,5,0,0,0,0,-2],xc=()=>{const i=Math.floor(Math.random()*6)+1,e=Math.floor(Math.random()*6)+1;return i===e?[i,i,i,i]:[i,e]},Pc=()=>{const i=xc();return{board:[...OO],bar:{white:0,black:0},off:{white:0,black:0},turn:"white",dice:i,movesLeft:[...i],validMoves:[],winner:null}},MO=(i,e)=>{const t=i.board;if(e==="white"){if(i.bar.white>0)return!1;for(let r=0;r<18;r++)if(t[r]>0)return!1;return!0}else{if(i.bar.black>0)return!1;for(let r=6;r<24;r++)if(t[r]<0)return!1;return!0}},dp=i=>{if(i.winner)return[];const e=o=>{const c=[],{turn:u,board:d,bar:g,movesLeft:p}=o,v=Array.from(new Set(p));if(p.length===0)return[];const E=u==="white",w=E?1:-1;if((E?g.white:g.black)>0){for(const P of v){const q=E?P-1:24-P,D=d[q];(E?D<-1:D>1)||c.push({from:"bar",to:q,roll:P,isHit:E?D===-1:D===1})}return c}for(let P=0;P<24;P++){const q=d[P];if(!(E&&q<=0)&&!(!E&&q>=0))for(const D of v){const j=P+w*D;if(MO(o,u)){if(E&&j===24){c.push({from:P,to:"off",roll:D});continue}if(!E&&j===-1){c.push({from:P,to:"off",roll:D});continue}if(E&&j>24){let G=!0;for(let U=18;U<P;U++)d[U]>0&&(G=!1);G&&c.push({from:P,to:"off",roll:D})}if(!E&&j<-1){let G=!0;for(let U=5;U>P;U--)d[U]<0&&(G=!1);G&&c.push({from:P,to:"off",roll:D})}}if(j<0||j>23)continue;const F=d[j];(E?F<-1:F>1)||c.push({from:P,to:j,roll:D,isHit:E?F===-1:F===1})}}return c},t=e(i),r=[...t];if(i.movesLeft.length>1)for(const o of t){const c=pu(i,o),u=e(c);if(o.to!=="off"){const d=u.filter(g=>g.from===o.to);for(const g of d)r.push({from:o.from,to:g.to,roll:o.roll+g.roll,isHit:g.isHit,subMoves:[o,g]})}}return r},pu=(i,e)=>{const t={...i,board:[...i.board],bar:{...i.bar},off:{...i.off},movesLeft:[...i.movesLeft]},r=i.turn==="white";if(e.subMoves&&e.subMoves.length>0){let c=i;for(const u of e.subMoves)c=pu(c,u);return c}if(e.from==="bar"?r?t.bar.white--:t.bar.black--:t.board[e.from]-=r?1:-1,e.to==="off")r?t.off.white++:t.off.black++;else{const c=e.to;e.isHit&&(r?t.bar.black++:t.bar.white++,t.board[c]=0),t.board[c]+=r?1:-1}const o=t.movesLeft.indexOf(e.roll);return o>-1&&t.movesLeft.splice(o,1),r&&t.off.white===15&&(t.winner="white"),!r&&t.off.black===15&&(t.winner="black"),t},VO=()=>Math.random().toString(36).substring(2,8).toUpperCase(),sx=i=>{const[e,t]=z.useState(null),[r,o]=z.useState(null),[c,u]=z.useState(!0),[d,g]=z.useState(!0);z.useEffect(()=>{const D=eo();Za(D).then(j=>{o(j.user.uid)}).catch(j=>{console.error("Auth failed",j)}).finally(()=>g(!1))},[]);const p=async()=>{if(r)return r;const D=eo(),j=await Za(D);return o(j.user.uid),j.user.uid};return z.useEffect(()=>{if(!jt||!Oe){u(!1);return}if(!i){t(null),u(!1);return}u(!0);const D=Zt(Jt(Oe,"rooms_bg"),i),j=Zf(D,Q=>{Q.exists()?t(Q.data()):t(null),u(!1)},Q=>{console.error("Room subscription error",Q),t(null),u(!1)});return()=>j()},[i]),{room:e,userId:r,loading:c,isAuthLoading:d,createRoom:async()=>{if(!jt||!Oe)throw new Error("Firebase not configured");const D=await p(),j=VO(),Q=Zt(Jt(Oe,"rooms_bg"),j),F=Pc(),ce={board:F.board,bar:F.bar,off:F.off,turn:F.turn,dice:F.dice,movesLeft:F.movesLeft,whitePlayer:D,blackPlayer:"",winner:"",status:"active"};return await Jf(Q,ce),j},joinRoom:async D=>{if(!jt||!Oe)throw new Error("Firebase not configured");const j=await p(),Q=Zt(Jt(Oe,"rooms_bg"),D);await ia(Oe,async F=>{const ce=await F.get(Q);if(!ce.exists())throw new Error("Room not found");const U={...ce.data()};U.whitePlayer?!U.blackPlayer&&U.whitePlayer!==j&&(U.blackPlayer=j):U.whitePlayer=j,F.update(Q,U)})},updateGameState:async D=>{if(!jt||!Oe||!i)return;const j=Zt(Jt(Oe,"rooms_bg"),i);let Q="active",F="";D.winner&&(Q="finished",F=D.winner),await Wo(j,{board:D.board,bar:D.bar,off:D.off,turn:D.turn,dice:D.dice,movesLeft:D.movesLeft,winner:F,status:Q})},resignGame:async D=>{if(!jt||!Oe||!i)return;const j=Zt(Jt(Oe,"rooms_bg"),i);await Wo(j,{status:"resigned",winner:D==="white"?"black":"white"})},resetGame:async()=>{if(!jt||!Oe||!i)return;const D=Pc(),j=Zt(Jt(Oe,"rooms_bg"),i);await Wo(j,{board:D.board,bar:D.bar,off:D.off,turn:D.turn,dice:D.dice,movesLeft:D.movesLeft,status:"active",winner:""})},leaveRoom:async()=>{if(!(!jt||!Oe)&&i)try{const D=await p(),j=Zt(Jt(Oe,"rooms_bg"),i);await ia(Oe,async Q=>{const F=await Q.get(j);if(!F.exists())return;const G={...F.data()};G.whitePlayer===D?G.whitePlayer="":G.blackPlayer===D&&(G.blackPlayer=""),Q.update(j,G)})}catch(D){console.error("Error leaving room:",D)}}}},Sc=30,PO=(i,e)=>{const t=i.filter(c=>c!==null);if(t.length!==14)return!1;const r=[],o=[];return t.forEach(c=>{!c.isFakeOkey&&e&&c.color===e.color&&c.value===e.value?r.push(c):c.isFakeOkey?o.push({...c,value:e?.value||1,color:e?.color||"red",isFakeOkey:!1}):o.push(c)}),o.sort((c,u)=>c.color!==u.color?c.color.localeCompare(u.color):c.value-u.value),af(o,r.length)},af=(i,e)=>{if(i.length===0)return!0;const t=i[0],r=i.filter(d=>d.color===t.color);for(let d=3;d<=13;d++){const g=[];let p=!0;for(let I=0;I<d;I++){const P=t.value+I;if(P>13){p=!1;break}g.push(P)}if(!p)break;const v=[];let E=0,w=[...r];for(const I of g){const P=w.findIndex(q=>q.value===I);P!==-1?(v.push(w[P]),w.splice(P,1)):E++}if(E<=e){const I=v.map(q=>q.id),P=i.filter(q=>!I.includes(q.id));if(af(P,e-E))return!0}}if(t.value===1)for(let d=3;d<=4;d++){const g=[];for(let w=13-(d-2);w<=13;w++)g.push(w);g.push(1);const p=[];let v=0,E=[...r];for(const w of g){const I=E.findIndex(P=>P.value===w);I!==-1?(p.push(E[I]),E.splice(I,1)):v++}if(v<=e){const w=p.map(P=>P.id),I=i.filter(P=>!w.includes(P.id));if(af(I,e-v))return!0}}const o=i.filter(d=>d.value===t.value),c=[],u=new Set;for(const d of o)u.has(d.color)||(u.add(d.color),c.push(d));for(let d=3;d<=4;d++){const g=c.slice(0,Math.min(d,c.length)),p=d-g.length;if(p>=0&&p<=e){const v=g.map(w=>w.id),E=i.filter(w=>!v.includes(w.id));if(af(E,e-p))return!0}}return!1},jO=["red","black","blue","yellow"],LO=()=>{const i=[];let e=1;return jO.forEach(t=>{for(let r=1;r<=13;r++)i.push({id:`t-${e++}`,value:r,color:t}),i.push({id:`t-${e++}`,value:r,color:t})}),i.push({id:`t-${e++}`,value:0,color:null,isFakeOkey:!0}),i.push({id:`t-${e++}`,value:0,color:null,isFakeOkey:!0}),i},UO=i=>{const e=[...i];for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e},zO=i=>i.isFakeOkey||!i.color?{id:"virtual-okey",value:1,color:"red"}:{id:"virtual-okey",value:i.value===13?1:i.value+1,color:i.color},mp=()=>{let i=UO(LO());const e=i.pop(),t=zO(e),r=Array(4).fill(null).map(()=>({tiles:Array(Sc).fill(null)}));for(let o=0;o<15;o++)r[0].tiles[o]=i.pop();for(let o=1;o<4;o++)for(let c=0;c<14;c++)r[o].tiles[c]=i.pop();return{phase:"playing",players:r,centerStack:i,discardPiles:[[],[],[],[]],indicatorTile:e,okeyTile:t,currentTurn:0,winner:null}},BO=i=>({pile0:i[0]||[],pile1:i[1]||[],pile2:i[2]||[],pile3:i[3]||[]}),qO=()=>Math.random().toString(36).substring(2,8).toUpperCase(),rx=i=>{const[e,t]=z.useState(null),[r,o]=z.useState(null),[c,u]=z.useState(!0),[d,g]=z.useState(!0),[p,v]=z.useState(null);z.useEffect(()=>{const R=eo();Za(R).then(O=>{o(O.user.uid)}).catch(O=>{console.error("Auth failed",O),v("Authentication failed")}).finally(()=>g(!1))},[]);const E=async()=>{if(r)return r;const R=eo(),O=await Za(R);return o(O.user.uid),O.user.uid};z.useEffect(()=>{if(!jt||!Oe){console.warn("Firebase not configured; room sync disabled."),u(!1);return}if(!i){t(null),u(!1);return}u(!0);const R=Zt(Jt(Oe,"okeyRooms"),i),O=Zf(R,k=>{k.exists()?(t(k.data()),v(null)):(t(null),v("Room not found")),u(!1)},k=>{console.error("Room subscription error",k),t(null),v("Failed to connect to room"),u(!1)});return()=>O()},[i]);const w=z.useCallback(()=>!e||!r?-1:e.players.findIndex(R=>R.odaUserId===r),[e,r]),I=z.useCallback(()=>!e||!r?!1:e.hostUserId===r,[e,r]),P=async R=>{if(!jt||!Oe)throw new Error("Firebase not configured");const O=await E(),k=qO(),be=Zt(Jt(Oe,"okeyRooms"),k),me=Array(4).fill(null).map((Z,se)=>({odaSlotu:se,odaUserId:"",adPlayerName:"",adIsAI:!1,tiles:Array(Sc).fill(null)}));me[0]={odaSlotu:0,odaUserId:O,adPlayerName:R,adIsAI:!1,tiles:Array(Sc).fill(null)};const H={roomId:k,phase:"waiting",players:me,centerStack:[],discardPiles:{pile0:[],pile1:[],pile2:[],pile3:[]},indicatorTile:null,okeyTile:null,currentTurn:0,winner:null,hostUserId:O,createdAt:Date.now()};return await Jf(be,H),k},q=async(R,O)=>{if(!jt||!Oe)throw new Error("Firebase not configured");const k=await E(),be=Zt(Jt(Oe,"okeyRooms"),R);try{return await ia(Oe,async me=>{const H=await me.get(be);if(!H.exists())throw new Error("Room not found");const Z=H.data();if(Z.phase!=="waiting")throw new Error("Game already started");const se=Z.players.findIndex(V=>V.odaUserId===k);if(se!==-1){const V=[...Z.players];V[se]={...V[se],adPlayerName:O},me.update(be,{players:V});return}const pe=Z.players.findIndex(V=>!V.odaUserId);if(pe===-1)throw new Error("Room is full");const ye=[...Z.players];ye[pe]={odaSlotu:pe,odaUserId:k,adPlayerName:O,adIsAI:!1,tiles:Array(Sc).fill(null)},me.update(be,{players:ye})}),!0}catch(me){return v(me.message),!1}},D=async()=>{if(!(!jt||!Oe||!i))try{const R=await E(),O=Zt(Jt(Oe,"okeyRooms"),i);await ia(Oe,async k=>{const be=await k.get(O);if(!be.exists())return;const me=be.data(),H=me.players.findIndex(se=>se.odaUserId===R);if(H===-1)return;const Z=[...me.players];Z[H]={odaSlotu:H,odaUserId:"",adPlayerName:"",adIsAI:!1,tiles:Array(Sc).fill(null)},k.update(O,{players:Z})})}catch(R){console.error("Error leaving room:",R)}},j=async()=>{if(!(!jt||!Oe||!i)){if(!I()){v("Only host can start the game");return}try{const R=Zt(Jt(Oe,"okeyRooms"),i);await ia(Oe,async O=>{const k=await O.get(R);if(!k.exists())return;const be=k.data(),me=mp(),Z={phase:"playing",players:be.players.map((se,pe)=>se.odaUserId?{...se,tiles:me.players[pe].tiles}:{odaSlotu:pe,odaUserId:`AI_${pe}`,adPlayerName:`Bot ${pe+1}`,adIsAI:!0,tiles:me.players[pe].tiles}),centerStack:me.centerStack,discardPiles:BO(me.discardPiles),indicatorTile:me.indicatorTile,okeyTile:me.okeyTile,currentTurn:0,winner:null};O.update(R,Z)})}catch(R){console.error("Error starting game:",R),v("Failed to start game")}}},Q=async R=>{if(!(!jt||!Oe||!i))try{const O=Zt(Jt(Oe,"okeyRooms"),i);await Wo(O,R)}catch(O){console.error("Error updating game state:",O),v("Failed to update game")}};return{room:e,userId:r,loading:c,isAuthLoading:d,error:p,getMySlot:w,isHost:I,createRoom:P,joinRoom:q,leaveRoom:D,startGame:j,updateGameState:Q,drawFromCenter:async R=>{if(!e||!i)return;const O=w();if(O===-1||e.currentTurn!==O||e.players[O].tiles.filter(ye=>ye!==null).length>=15)return;const be=[...e.centerStack],me=be.pop();if(!me)return;const H=[...e.players],Z=[...H[O].tiles];let se=-1;if(R!==void 0&&R>=0&&R<Z.length)if(Z[R]===null)se=R;else for(let ye=1;ye<Z.length;ye++){const V=R+ye,$=R-ye;if(V<Z.length&&Z[V]===null){se=V;break}if($>=0&&Z[$]===null){se=$;break}}se===-1&&(se=Z.findIndex(ye=>ye===null)),se!==-1&&(Z[se]=me),H[O]={...H[O],tiles:Z};const pe=be.length===0?"stackEmpty":e.phase;await Q({players:H,centerStack:be,phase:pe})},drawFromDiscard:async R=>{if(!e||!i)return;const O=w();if(O===-1||e.currentTurn!==O||e.players[O].tiles.filter($=>$!==null).length>=15)return;const me=`pile${(O+3)%4}`,H=e.discardPiles[me];if(!H||H.length===0)return;const Z=H[H.length-1],se={...e.discardPiles,[me]:H.slice(0,-1)},pe=[...e.players],ye=[...pe[O].tiles];let V=-1;if(R!==void 0&&R>=0&&R<ye.length)if(ye[R]===null)V=R;else for(let $=1;$<ye.length;$++){const ue=R+$,ge=R-$;if(ue<ye.length&&ye[ue]===null){V=ue;break}if(ge>=0&&ye[ge]===null){V=ge;break}}V===-1&&(V=ye.findIndex($=>$===null)),V!==-1&&(ye[V]=Z),pe[O]={...pe[O],tiles:ye},await Q({players:pe,discardPiles:se})},discardTile:async R=>{if(!e||!i)return;const O=w();if(O===-1||e.currentTurn!==O||e.players[O].tiles.filter(V=>V!==null).length!==15)return;const be=[...e.players],me=[...be[O].tiles],H=me[R];if(!H)return;me[R]=null,be[O]={...be[O],tiles:me};const Z=`pile${O}`,se=e.discardPiles[Z]||[],pe={...e.discardPiles,[Z]:[...se,H]},ye=(e.currentTurn+1)%4;await Q({players:be,discardPiles:pe,currentTurn:ye})},moveTileInRack:async(R,O)=>{if(!e||!i)return;const k=w();if(k===-1)return;const be=[...e.players],me=[...be[k].tiles],H=me[R];me[R]=me[O],me[O]=H,be[k]={...be[k],tiles:me},await Q({players:be})},autoSortTiles:async()=>{if(!e||!i)return;const R=w();if(R===-1)return;const O=[...e.players],be=[...O[R].tiles].filter($=>$!==null),me=be.filter($=>$.isFakeOkey||!$.color),H=be.filter($=>!$.isFakeOkey&&$.color),Z=["red","blue","black","yellow"],se={red:[],blue:[],black:[],yellow:[]};H.forEach($=>{$.color&&se[$.color].push($)}),Z.forEach($=>{se[$].sort((ue,ge)=>ue.value-ge.value)});const pe=new Array(30).fill(null);let ye=0,V=15;se.red.forEach($=>{ye<15&&(pe[ye++]=$)}),se.red.length>0&&ye<15&&ye++,se.blue.forEach($=>{ye<15&&(pe[ye++]=$)}),se.black.forEach($=>{V<30&&(pe[V++]=$)}),se.black.length>0&&V<30&&V++,se.yellow.forEach($=>{V<30&&(pe[V++]=$)}),se.yellow.length>0&&V<30&&V++,me.forEach($=>{V<30&&(pe[V++]=$)}),O[R]={...O[R],tiles:pe},await Q({players:O})},resetGame:async()=>{I()&&await j()},reshuffleDiscards:async()=>{if(!e||!i||!I())return;const R=[...e.discardPiles.pile0||[],...e.discardPiles.pile1||[],...e.discardPiles.pile2||[],...e.discardPiles.pile3||[]];if(R.length===0){await Q({phase:"roundOver",winner:null});return}const O=[...R].sort(()=>Math.random()-.5);await Q({centerStack:O,discardPiles:{pile0:[],pile1:[],pile2:[],pile3:[]},phase:"playing"})},endInTie:async()=>{!e||!i||!I()||await Q({phase:"roundOver",winner:null})}}},ax=({color:i,style:e,className:t=""})=>{const r=i==="white"?"bg-slate-200 shadow-[inset_0_-4px_4px_rgba(0,0,0,0.2),0_4px_6px_rgba(0,0,0,0.3)] border-slate-300":"bg-slate-900 shadow-[inset_0_-4px_4px_rgba(0,0,0,0.5),0_4px_6px_rgba(0,0,0,0.4)] border-slate-700",o=i==="white"?"border-slate-300":"border-slate-700";return _.jsx("div",{style:e,className:`w-full h-full rounded-full border-4 ${r} relative flex items-center justify-center ${t}`,children:_.jsx("div",{className:`w-[70%] h-[70%] rounded-full border-2 ${o} opacity-30`})})},gp=({id:i,color:e,isDraggable:t=!1,style:r})=>{const{attributes:o,listeners:c,setNodeRef:u,isDragging:d}=gu({id:i,disabled:!t}),g={opacity:d?0:1,touchAction:"none",...r};return _.jsx("div",{ref:u,style:g,...c,...o,className:"w-full aspect-square relative cursor-grab active:cursor-grabbing",children:_.jsx(ax,{color:e})})},HO=({index:i,count:e,isTop:t,isHighlighted:r,playerColor:o,canDragFrom:c,isHitTarget:u})=>{const{setNodeRef:d,isOver:g}=wl({id:i.toString()}),p=i%2===1,v=g||r?"bg-indigo-500/20 ring-2 ring-indigo-400/50":"",E=Math.abs(e),w=e>0?"white":"black",I=5,P=Math.min(E,I),q=E>I,D=()=>E<=3?"-my-0.5":E<=5?"-my-1":"-my-1.5",j=[];for(let F=0;F<P;F++){const ce=F===P-1,G=c&&ce&&w===o;j.push(_.jsx("div",{className:`w-[80%] max-w-[40px] ${D()} z-10 relative`,children:_.jsx(gp,{id:`checker-${i}-${F}`,color:w,isDraggable:G})},`${i}-${F}`))}const Q=q?_.jsx("div",{className:`absolute ${t?"bottom-1":"top-1"} left-1/2 -translate-x-1/2 z-20 
                px-1.5 py-0.5 rounded-full text-[10px] font-bold shadow-lg
                ${w==="white"?"bg-slate-100 text-slate-800 border border-slate-300":"bg-slate-800 text-slate-100 border border-slate-600"}`,children:E}):null;return _.jsxs("div",{ref:d,className:`relative flex-1 h-full flex ${t?"flex-col items-center justify-start":"flex-col-reverse items-center justify-start"} ${v} transition-colors rounded-sm`,children:[_.jsx("div",{className:"absolute inset-0 pointer-events-none w-full h-full opacity-60",style:{clipPath:t?"polygon(0 0, 50% 100%, 100% 0)":"polygon(0 100%, 50% 0, 100% 100%)",backgroundColor:p?"#334155":"#818cf8",opacity:p?.4:.15}}),_.jsx("div",{className:`z-10 w-full h-full flex ${t?"flex-col pt-2":"flex-col-reverse pb-2"} items-center overflow-hidden`,children:j}),Q,u&&_.jsxs("div",{className:`absolute ${t?"top-6":"bottom-6"} left-1/2 -translate-x-1/2 z-50 pointer-events-none`,children:[_.jsx("style",{children:`
                        @keyframes shatter-left {
                            0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
                            100% { transform: translate(-20px, -10px) rotate(-15deg); opacity: 0; }
                        }
                        @keyframes shatter-right {
                            0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
                            100% { transform: translate(20px, -10px) rotate(15deg); opacity: 0; }
                        }
                        @keyframes impact-flash {
                            0% { transform: scale(0.5); opacity: 0; }
                            10% { transform: scale(1.2); opacity: 1; }
                            100% { transform: scale(0); opacity: 0; }
                        }
                        `}),_.jsx("div",{className:"relative w-10 h-10 md:w-12 md:h-12",children:(()=>{const F=e>0?"black":"white",ce=F==="white"?"bg-slate-200 border-slate-300 shadow-sm":"bg-slate-900 border-slate-700 shadow-xl",G=F==="white"?"border-slate-300":"border-slate-700";return _.jsxs(_.Fragment,{children:[_.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${ce} overflow-hidden`,style:{clipPath:"polygon(0% 0%, 55% 0%, 45% 100%, 0% 100%)",animation:"shatter-left 0.6s ease-out forwards"},children:_.jsx("div",{className:`absolute inset-2 rounded-full border-2 ${G} opacity-30`})}),_.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${ce} overflow-hidden`,style:{clipPath:"polygon(55% 0%, 100% 0%, 100% 100%, 45% 100%)",animation:"shatter-right 0.6s ease-out forwards"},children:_.jsx("div",{className:`absolute inset-2 rounded-full border-2 ${G} opacity-30`})}),_.jsx("div",{className:"absolute inset-0 bg-white rounded-full mix-blend-overlay",style:{animation:"impact-flash 0.4s ease-out forwards"}})]})})()})]}),_.jsx("span",{className:`absolute ${t?"top-0":"bottom-0"} text-[8px] text-slate-600 font-mono opacity-50`,children:i+1})]})},FO={1:[4],2:[0,8],3:[0,4,8],4:[0,2,6,8],5:[0,2,4,6,8],6:[0,2,3,5,6,8]},GO=({value:i,isRolling:e,color:t})=>{const[r,o]=z.useState(i);z.useEffect(()=>{let d;return e?d=setInterval(()=>{o(Math.floor(Math.random()*6)+1)},100):o(i),()=>clearInterval(d)},[e,i]);const c=t==="white"?"bg-white text-slate-900 border-slate-200 shadow-lg":"bg-slate-900 text-white border-slate-700 shadow-xl",u=t==="white"?"bg-slate-900":"bg-white";return _.jsxs("div",{className:`
                w-10 h-10 md:w-12 md:h-12 rounded-lg flex items-center justify-center border-2 
                transition-all duration-300 relative
                ${c}
                ${e?"animate-bounce scale-110 rotate-12":"hover:scale-105"}
            `,style:{perspective:"1000px",transformStyle:"preserve-3d"},children:[_.jsx("div",{className:"grid grid-cols-3 grid-rows-3 gap-1 w-[70%] h-[70%]",children:Array.from({length:9}).map((d,g)=>_.jsx("div",{className:"flex items-center justify-center",children:FO[r].includes(g)&&_.jsx("div",{className:`w-1.5 h-1.5 md:w-2 md:h-2 rounded-full ${u} shadow-sm`})},g))}),_.jsx("div",{className:"absolute inset-0 bg-linear-to-br from-white/20 to-transparent pointer-events-none rounded-lg"})]})},$O=({gameState:i,playerColor:e,onMove:t,validMoves:r})=>{const{board:o,bar:c,off:u,turn:d}=i,[g,p]=z.useState(null),[v,E]=z.useState([]),[w,I]=z.useState(null),[P,q]=z.useState(!1),D=rt.useRef(i.dice),j=p0(Ka(b0,{activationConstraint:{distance:8}}),Ka(E0,{activationConstraint:{delay:100,tolerance:5}})),Q=U=>{const{active:S}=U,x=S.id;let C=-1;if(x.startsWith("bar"))C="bar";else if(x.startsWith("checker-")){const O=x.split("-");C=parseInt(O[1])}else C=parseInt(x);p(x);const R=r.filter(O=>C==="bar"?O.from==="bar":O.from===C).map(O=>O.to==="off"?99:O.to);E(R)},F=rt.useRef(i.board);rt.useEffect(()=>{const U=F.current,S=i.board;for(let x=0;x<24;x++){const C=U[x],M=S[x];C===-1&&M>=1&&(I(x),setTimeout(()=>I(null),800)),C===1&&M<=-1&&(I(x),setTimeout(()=>I(null),800))}F.current=i.board},[i.board]),rt.useEffect(()=>{if(JSON.stringify(D.current)!==JSON.stringify(i.dice)){q(!0);const U=setTimeout(()=>q(!1),800);return D.current=i.dice,()=>clearTimeout(U)}},[i.dice]);const ce=U=>{const{active:S,over:x}=U;if(p(null),E([]),!x)return;const C=S.id;let M=-1;if(C.startsWith("bar"))M="bar";else if(C.startsWith("checker-")){const k=C.split("-");M=parseInt(k[1])}else M=parseInt(C);let R=-1;x.id==="off"?R="off":R=parseInt(x.id);const O=r.find(k=>k.from===M&&k.to===R);if(O){const k=pu(i,O);t(k)}},G=(U,S,x)=>{const C=[];if(U<S)for(let M=U;M<=S;M++)C.push(M);else for(let M=U;M>=S;M--)C.push(M);return _.jsx("div",{className:`flex-1 flex ${x?"border-b-2":"border-t-2"} border-slate-700/30`,children:C.map(M=>_.jsx(HO,{index:M,count:o[M],isTop:x,isHighlighted:v.includes(M),playerColor:e,canDragFrom:e===d&&(e==="white"&&c.white===0||e==="black"&&c.black===0),isHitTarget:w===M},M))})};return _.jsxs(w0,{sensors:j,onDragStart:Q,onDragEnd:ce,children:[_.jsxs("div",{className:"flex flex-col md:flex-row w-full max-w-full md:max-w-7xl mx-auto gap-2 md:gap-4 items-stretch p-1 md:p-4",children:[_.jsxs("div",{className:"relative flex-1 aspect-square md:aspect-[4/3] bg-slate-800/80 rounded-xl border-4 md:border-[12px] border-slate-900 shadow-2xl flex flex-col overflow-hidden",children:[_.jsxs("div",{className:"flex-1 flex",children:[G(e==="white"?11:12,e==="white"?6:17,!0),_.jsxs("div",{className:"w-12 md:w-20 bg-slate-900/50 border-x-4 border-slate-900 flex flex-col items-center justify-center gap-1 py-2",children:[Array.from({length:c.white}).map((U,S)=>_.jsx("div",{className:"w-10 md:w-12",children:_.jsx(gp,{id:`bar-white-${S}`,color:"white",isDraggable:e==="white"&&d==="white"&&S===c.white-1})},`bar-w-${S}`)),Array.from({length:c.black}).map((U,S)=>_.jsx("div",{className:"w-10 md:w-12",children:_.jsx(gp,{id:`bar-black-${S}`,color:"black",isDraggable:e==="black"&&d==="black"&&S===c.black-1})},`bar-b-${S}`))]}),G(e==="white"?5:18,e==="white"?0:23,!0)]}),_.jsxs("div",{className:"flex-1 flex",children:[G(e==="white"?12:11,e==="white"?17:6,!1),_.jsx("div",{className:"w-12 md:w-20 bg-slate-900/50 border-x-4 border-slate-900 flex flex-col-reverse items-center justify-start gap-1 py-2"}),G(e==="white"?18:5,e==="white"?23:0,!1)]}),_.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center z-50",children:_.jsx("div",{className:"flex gap-4",children:(()=>{const U={};return i.dice.map((S,x)=>{const C=i.movesLeft.filter(R=>R===S).length;U[S]=(U[S]||0)+1;const M=U[S]>C;return _.jsx("div",{className:`transition-opacity duration-300 ${M?"opacity-30 grayscale":"opacity-100"}`,children:_.jsx(GO,{value:S,isRolling:P,color:d==="white"?"white":"black"})},x)})})()})})]}),_.jsxs("div",{className:"w-full h-20 md:w-32 md:h-auto bg-slate-900/40 rounded-xl border-4 border-slate-800 flex flex-row md:flex-col relative overflow-hidden shrink-0",children:[_.jsx("div",{className:"absolute inset-y-0 left-1/2 -translate-x-1/2 w-[2px] bg-slate-800/50 hidden md:block"}),_.jsx("div",{className:"absolute inset-x-0 top-1/2 -translate-y-1/2 h-[2px] bg-slate-800/50 md:hidden"}),_.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 md:-rotate-90 text-slate-700 font-bold text-xs md:text-sm tracking-[0.5em] pointer-events-none whitespace-nowrap opacity-50 z-0",children:"COLLECT"}),_.jsx("div",{className:"flex-1 w-full p-2 flex flex-col gap-1 z-10 border-r md:border-r-0 md:border-b border-slate-800/50",children:_.jsx(iE,{playerColor:e==="white"?"black":"white",count:e==="white"?u.black:u.white,isTop:!0})}),_.jsx("div",{className:"flex-1 w-full p-2 flex flex-col-reverse gap-1 z-10",children:_.jsx(iE,{playerColor:e==="white"?"white":"black",count:e==="white"?u.white:u.black,isTop:!1})}),_.jsx("div",{className:`absolute inset-0 z-20 ${g?"pointer-events-auto":"pointer-events-none"}`,children:_.jsx(KO,{isHighlighted:v.includes(99)})})]})]}),_.jsx(nx,{children:g?_.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 cursor-grabbing",children:_.jsx(ax,{color:(function(){if(g.startsWith("bar-white"))return"white";if(g.startsWith("bar-black"))return"black";if(g.startsWith("checker-")){const U=g.split("-"),S=parseInt(U[1]);return o[S]>0?"white":"black"}return"white"})()})}):null})]})},KO=({isHighlighted:i})=>{const{setNodeRef:e,isOver:t}=wl({id:"off"}),r=t||i;return _.jsx("div",{ref:e,className:`w-full h-full flex items-center justify-center transition-all duration-300 ${r?"bg-indigo-500/30 backdrop-blur-sm border-2 border-dashed border-indigo-400":""}`,children:r&&_.jsx("div",{className:"text-indigo-200 font-bold text-xs rotate-90 whitespace-nowrap animate-pulse",children:"COLLECT"})})},iE=({playerColor:i,count:e,isTop:t})=>_.jsxs("div",{className:`w-full flex ${t?"flex-col":"flex-col-reverse"} gap-[2px] transition-colors rounded-lg p-1`,children:[e>0&&_.jsx("div",{className:`text-[10px] text-center mb-1 font-bold ${i==="white"?"text-slate-400":"text-slate-600"}`,children:e}),Array.from({length:Math.min(e,15)}).map((r,o)=>_.jsx("div",{className:`h-2 w-full rounded-sm opacity-80 ${i==="white"?"bg-slate-200 shadow-sm":"bg-slate-900 border border-slate-700 shadow-sm"}`},o))]}),QO=(i,e="Normal")=>{const t=dp(i);if(t.length===0)return null;if(e==="Easy"){const c=Math.floor(Math.random()*t.length);return t[c]}let r=t[0],o=-1/0;for(const c of t){const u=YO(i,c,e);u>o&&(o=u,r=c)}return r},YO=(i,e,t)=>{let r=0;e.isHit&&(r+=100),e.to==="off"&&(r+=200);const o=pu({...i},e),c=i.turn==="white";if(typeof e.to=="number"){const u=o.board[e.to];c&&u===2&&(r+=50),!c&&u===-2&&(r+=50)}if(typeof e.to=="number"){const u=o.board[e.to];Math.abs(u)===1&&(r-=30)}if(typeof e.from=="number"){const u=o.board[e.from];Math.abs(u)===1&&(r-=40)}return t==="Hard"&&typeof e.to=="number"&&(c?e.to>=18:e.to<=5)&&Math.abs(o.board[e.to])>1&&(r+=30),r+=Math.random()*5,r},XO=({roomId:i="",mode:e="online",aiDifficulty:t="Normal",onExit:r})=>{const o=sx(e==="online"?i:null),[c,u]=z.useState(()=>Pc()),[d,g]=z.useState(null),p=e==="local",v=rt.useMemo(()=>p?c:d||(o.room?{...o.room,validMoves:[]}:null),[p,c,o.room,d]);z.useEffect(()=>{if(!o.room||!d)return;const G=o.room.turn===d.turn,U=JSON.stringify(o.room.board)===JSON.stringify(d.board),S=o.room.movesLeft.length===d.movesLeft.length;G&&U&&S?g(null):G||g(null)},[o.room,d]);const E=rt.useMemo(()=>v?dp(v):[],[v]),w=p?v?.turn==="white"?"local-white":"local-black":o.userId,I=p||o.room?.whitePlayer===w?"white":"black",P=I===v?.turn;z.useEffect(()=>{!p&&i&&o.joinRoom&&o.joinRoom(i)},[i,p]);const q=()=>{navigator.clipboard.writeText(i),alert("Room ID copied to clipboard!")},D=o.room?.whitePlayer===w||p,j=o.room?.blackPlayer===w,Q=!!v?.winner,F=G=>{let U={...G};U.movesLeft.length===0?(U.turn=U.turn==="white"?"black":"white",U.dice=xc(),U.movesLeft=[...U.dice]):dp(U).length===0&&(U.turn=U.turn==="white"?"black":"white",U.dice=xc(),U.movesLeft=[...U.dice]),p?u(U):(g(U),o.updateGameState(U))};if(z.useEffect(()=>{if(v&&v.movesLeft.length>0&&E.length===0&&!v.winner){const G=setTimeout(()=>{let U={...v};U.turn=U.turn==="white"?"black":"white",U.dice=xc(),U.movesLeft=[...U.dice],p?u(U):(g(U),o.updateGameState(U))},1500);return()=>clearTimeout(G)}},[v?.movesLeft,E.length,v?.winner,v?.turn,p,v]),z.useEffect(()=>{if(v&&p&&v.turn==="black"&&!v.winner){const G=setTimeout(()=>{const U=QO(v,t);if(U){const S=pu(v,U);F(S)}else{let S={...v};S.turn="white",S.dice=xc(),S.movesLeft=[...S.dice],u(S)}},1500);return()=>clearTimeout(G)}},[v,p,t]),!p&&o.loading)return _.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-6 animate-pulse",children:[_.jsx("div",{className:"relative shadow-2xl shadow-indigo-500/20 rounded-full p-4",children:_.jsx(lE,{className:"w-16 h-16 text-indigo-500 animate-spin"})}),_.jsxs("div",{className:"text-center space-y-2",children:[_.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest",children:"Entering Arena"}),_.jsx("p",{className:"text-slate-500 font-medium",children:"Synchronizing with the global lattice..."})]})]});if(!v)return _.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[_.jsxs("div",{className:"text-center space-y-4",children:[_.jsx("h2",{className:"text-5xl font-black text-white italic",children:"Room Dissolved"}),_.jsx("p",{className:"text-slate-400 text-lg",children:"The arena you seek no longer exists or the link is expired."})]}),_.jsx("button",{onClick:r,className:"btn-premium px-10 py-4 text-xl",children:"Return to Lobby"})]});const ce=v.winner?`${v.winner==="white"?"White":"Black"} Wins!`:P?"Your Turn":"Waiting...";return _.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center gap-8 lg:gap-12 py-6 lg:py-10 w-full animate-in fade-in duration-700",children:[_.jsxs("header",{className:"w-full max-w-6xl flex items-center justify-between px-4 lg:px-6",children:[_.jsxs("button",{onClick:()=>{!p&&o.leaveRoom&&o.leaveRoom(),r()},className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all font-bold uppercase tracking-widest text-xs",children:[_.jsx("div",{className:"p-2 rounded-xl bg-slate-900 border border-slate-800 group-hover:border-slate-700 group-hover:-translate-x-1 transition-transform",children:_.jsx(Ha,{size:18})}),"Back"]}),!p&&_.jsx("div",{className:"flex items-center gap-4",children:_.jsxs("div",{className:"liquid-glass px-6 py-3 flex items-center gap-6",children:[_.jsxs("div",{className:"flex flex-col gap-0.5",children:[_.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-slate-500 font-black",children:"Arena ID"}),_.jsx("code",{className:"text-indigo-300 font-mono font-bold",children:i})]}),_.jsx("div",{className:"h-8 w-px bg-slate-800"}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("button",{onClick:q,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:_.jsx(yp,{size:18})}),_.jsx("button",{className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:_.jsx(cE,{size:18})})]})]})}),p&&_.jsx("div",{className:"px-6 py-3 liquid-glass text-indigo-300 font-bold uppercase tracking-widest text-xs",children:"Single Player Mode"})]}),_.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-6 lg:gap-16 w-full max-w-7xl px-0 lg:px-6",children:[_.jsxs("div",{className:"relative group w-full flex justify-center max-w-full overflow-visible",children:[_.jsx("div",{className:"absolute -inset-4 bg-linear-to-r from-indigo-500 to-pink-500 rounded-[2.5rem] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"}),_.jsx($O,{gameState:v,playerColor:I,onMove:F,onRollDice:()=>{},validMoves:E}),Q&&_.jsx(JO,{winner:v.winner,playerColor:I,onRematch:()=>{const G=Pc();g(null),p?u(G):o.resetGame()},onExit:()=>{!p&&o.leaveRoom&&o.leaveRoom(),r()}})]}),_.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-3 lg:gap-8 mt-0 lg:mt-0",children:[_.jsxs("div",{className:"liquid-glass p-3 lg:p-8 space-y-3 lg:space-y-8 border-l-4 border-l-indigo-500",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:"Game Status"}),_.jsxs("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-2 ${v.winner?"bg-indigo-500/10 text-indigo-300 border border-indigo-500/30":P?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-slate-800 text-slate-500"}`,children:[_.jsx("span",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${v.winner?"bg-indigo-400":"bg-green-500"}`}),p?v.turn==="white"?" White Turn":" Black Turn":ce]})]}),Q&&_.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/10 border border-indigo-500/30 text-indigo-100 text-sm lg:text-base font-bold",children:ce}),_.jsxs("div",{className:"space-y-2 lg:space-y-4",children:[_.jsx(WO,{gameState:v}),!p&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"flex items-center gap-2 lg:gap-4 p-2 lg:p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[_.jsx("div",{className:`w-8 h-8 lg:w-12 lg:h-12 rounded-xl flex items-center justify-center text-lg lg:text-xl font-bold ${D?"bg-white text-slate-950":"bg-slate-800 text-slate-400"}`,children:"W"}),_.jsxs("div",{className:"flex-1",children:[_.jsx("div",{className:"text-xs lg:text-sm font-bold text-white uppercase tracking-wide",children:"White Player"}),_.jsx("div",{className:"text-[10px] lg:text-xs text-slate-500 font-medium",children:o.room?.whitePlayer===w?"Connected (You)":o.room?.whitePlayer?"Opponent Ready":"Awaiting Entry..."})]})]}),_.jsxs("div",{className:"flex items-center gap-2 lg:gap-4 p-2 lg:p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[_.jsx("div",{className:`w-8 h-8 lg:w-12 lg:h-12 rounded-xl flex items-center justify-center text-lg lg:text-xl font-bold ${j?"bg-indigo-500 text-white":"bg-slate-800 text-slate-400"}`,children:"B"}),_.jsxs("div",{className:"flex-1",children:[_.jsx("div",{className:"text-xs lg:text-sm font-bold text-white uppercase tracking-wide",children:"Black Player"}),_.jsx("div",{className:"text-[10px] lg:text-xs text-slate-500 font-medium",children:o.room?.blackPlayer===w?"Connected (You)":o.room?.blackPlayer?"Opponent Ready":"Awaiting Entry..."})]})]})]})]}),_.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 lg:gap-3",children:[_.jsxs("button",{disabled:Q,onClick:()=>{if(p){const G={...v};G.winner=I==="white"?"black":"white",u(G)}else o.resignGame(I)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 lg:px-4 lg:py-3 rounded-xl border border-slate-800 bg-slate-900/60 text-slate-200 text-sm lg:text-base font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:border-red-500/50 hover:text-red-200 transition",children:[_.jsx(oE,{size:16,className:"lg:w-[18px] lg:h-[18px]"}),"Resign"]}),_.jsxs("button",{disabled:!Q&&!p,onClick:()=>{const G=Pc();g(null),p?u(G):o.resetGame()},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 lg:px-4 lg:py-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 text-indigo-100 text-sm lg:text-base font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:bg-indigo-500/20 transition",children:[_.jsx(vp,{size:16,className:"lg:w-[18px] lg:h-[18px]"}),"Rematch"]})]})]}),!p&&_.jsxs("div",{className:"hidden lg:grid grid-cols-2 gap-4",children:[_.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[_.jsx(Vf,{size:20,className:"mx-auto text-slate-600"}),_.jsx("div",{className:"text-xl font-black text-white italic",children:o.room?.whitePlayer&&o.room?.blackPlayer?"2/2":o.room?.whitePlayer||o.room?.blackPlayer?"1/2":"0/2"}),_.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Connected"})]}),_.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[_.jsx(uE,{size:20,className:"mx-auto text-indigo-400"}),_.jsx("div",{className:"text-xl font-black text-white italic",children:"24ms"}),_.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Latency"})]})]})]})]}),_.jsxs("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10 flex flex-col items-center gap-1",children:[_.jsx("span",{children:"Transparent Strategy Arena"}),_.jsx("span",{className:"text-slate-700 text-[8px]",children:"v1.1.0"})]})]})},WO=({gameState:i})=>{const[e,t]=z.useState(0),[r,o]=z.useState(0),[c,u]=z.useState(0),d=rt.useRef(i?.winner);z.useEffect(()=>{d.current&&!i?.winner&&(t(0),o(0),u(0)),d.current=i?.winner},[i?.winner]),z.useEffect(()=>{if(!i||i.winner)return;const p=window.setInterval(()=>{t(v=>v+1),o(v=>v+(i.turn==="white"?1:0)),u(v=>v+(i.turn==="black"?1:0))},1e3);return()=>window.clearInterval(p)},[i?.turn,i?.winner]);const g=p=>{const v=Math.floor(p/60).toString().padStart(2,"0"),E=(p%60).toString().padStart(2,"0");return`${v}:${E}`};return _.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-3 p-2 md:p-4 rounded-2xl bg-slate-900/60 border border-slate-800/80 text-[10px] lg:text-xs font-bold uppercase tracking-widest",children:[_.jsxs("div",{className:"space-y-1",children:[_.jsx("div",{className:"text-slate-500",children:"Time"}),_.jsx("div",{className:"text-white text-base",children:g(e)})]}),_.jsxs("div",{className:"space-y-1",children:[_.jsx("div",{className:"text-slate-500",children:"White"}),_.jsx("div",{className:"text-emerald-300 text-base",children:g(r)})]}),_.jsxs("div",{className:"space-y-1",children:[_.jsx("div",{className:"text-slate-500",children:"Black"}),_.jsx("div",{className:"text-sky-300 text-base",children:g(c)})]})]})},JO=({winner:i,playerColor:e,onRematch:t,onExit:r})=>{const o=i===e;return _.jsxs("div",{className:"absolute inset-0 z-50 rounded-[2rem] bg-slate-900/80 backdrop-blur-md flex flex-col items-center justify-center p-6 text-center animate-in fade-in zoom-in duration-500",children:[_.jsx("div",{className:`p-6 rounded-full mb-6 ${o?"bg-amber-500/20 text-amber-400 shadow-[0_0_50px_-12px_rgba(245,158,11,0.5)]":"bg-red-500/20 text-red-400 shadow-[0_0_50px_-12px_rgba(239,68,68,0.5)]"}`,children:o?_.jsx(Vg,{size:64,className:"animate-bounce"}):_.jsx(rA,{size:64})}),_.jsx("h2",{className:`text-4xl md:text-5xl font-black uppercase tracking-widest mb-2 ${o?"text-transparent bg-clip-text bg-linear-to-b from-amber-300 to-amber-600":"text-slate-200"}`,children:o?"Victory!":"Defeat"}),_.jsx("p",{className:"text-slate-400 font-bold text-lg mb-8 uppercase tracking-widest",children:o?"You conquered the board.":"Better luck next time."}),_.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[_.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center gap-3 px-6 py-4 rounded-xl bg-indigo-500 hover:bg-indigo-400 text-white font-black uppercase tracking-widest transition-all hover:scale-105 active:scale-95 shadow-lg shadow-indigo-500/30",children:[_.jsx(vp,{size:20}),"Rematch"]}),_.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center gap-3 px-6 py-4 rounded-xl bg-slate-800 hover:bg-slate-700 text-slate-300 font-bold uppercase tracking-widest transition-all hover:scale-105 active:scale-95",children:[_.jsx(hA,{size:20}),"Return to Lobby"]})]})]})},ZO=i=>{const[e,t]=z.useState(null),[r,o]=z.useState(!1);z.useEffect(()=>{if(!i)try{const D=mp();console.log("Okey Game Initialized",D),t(D)}catch(D){console.error("Failed to initialize Okey game",D)}},[i]);const c=z.useCallback(D=>{t(j=>{if(!j)return null;if(j.currentTurn!==0||j.players[0].tiles.filter(x=>x!==null).length>=15)return j;const F=[...j.centerStack],ce=F.pop();if(!ce)return j;const G=[...j.players],U=[...G[0].tiles];let S=-1;if(D!==void 0&&D>=0&&D<U.length)if(U[D]===null)S=D;else for(let x=1;x<U.length;x++){const C=D+x,M=D-x;if(C<U.length&&U[C]===null){S=C;break}if(M>=0&&U[M]===null){S=M;break}}return S===-1&&(S=U.findIndex(x=>x===null)),S!==-1&&(U[S]=ce),G[0]={...G[0],tiles:U},F.length===0?{...j,players:G,centerStack:F,phase:"stackEmpty"}:{...j,players:G,centerStack:F}})},[]),u=z.useCallback(D=>{t(j=>{if(!j||j.currentTurn!==0||j.players[0].tiles.filter(M=>M!==null).length>=15)return j;const F=3;if(j.discardPiles[F].length===0)return j;const G=[...j.discardPiles],U=G[F][G[F].length-1];G[F]=G[F].slice(0,-1);const S=[...j.players],x=[...S[0].tiles];let C=-1;if(D!==void 0&&D>=0&&D<x.length)if(x[D]===null)C=D;else for(let M=1;M<x.length;M++){const R=D+M,O=D-M;if(R<x.length&&x[R]===null){C=R;break}if(O>=0&&x[O]===null){C=O;break}}return C===-1&&(C=x.findIndex(M=>M===null)),C!==-1&&(x[C]=U),S[0]={...S[0],tiles:x},{...j,players:S,discardPiles:G}})},[]),d=z.useCallback(D=>{t(j=>{if(!j||j.currentTurn!==0)return j;const Q=[...j.players[0].tiles];if(!Q[D])return j;const ce=[...Q];return ce[D]=null,PO(ce,j.okeyTile)?{...j,phase:"roundOver",winner:0}:(alert("Eliniz okey deil! Ltfen talar per yapn."),j)})},[]),g=z.useCallback(()=>{t(mp())},[]),p=z.useCallback(()=>{t(D=>{if(!D)return null;const j=[];if(D.discardPiles.forEach(F=>{j.push(...F)}),j.length===0)return{...D,phase:"roundOver",winner:null};const Q=[...j].sort(()=>Math.random()-.5);return{...D,centerStack:Q,discardPiles:[[],[],[],[]],phase:"playing"}})},[]),v=z.useCallback(()=>{t(D=>D?{...D,phase:"roundOver",winner:null}:null)},[]),E=z.useCallback((D,j)=>{t(Q=>{if(!Q)return null;const F=[...Q.players],ce=[...F[0].tiles],G=ce[D];return ce[D]=ce[j],ce[j]=G,F[0]={...F[0],tiles:ce},{...Q,players:F}})},[]),w=z.useCallback(D=>{t(j=>{if(!j||j.currentTurn!==0)return j;if(j.players[0].tiles.filter(x=>x!==null).length!==15)return console.log("Discard blocked: Must have 15 tiles to discard."),j;const F=[...j.players],ce=[...j.players[0].tiles],G=ce[D];if(!G)return j;ce[D]=null,F[0]={...F[0],tiles:ce};const U=[...j.discardPiles];U[0]=[...U[0],G];const S=(j.currentTurn+1)%4;return{...j,players:F,discardPiles:U,currentTurn:S}})},[]);z.useEffect(()=>{if(e&&e.currentTurn!==0&&e.phase==="playing"){const D=setTimeout(()=>{t(j=>{if(!j||j.currentTurn===0)return j;const Q=j.currentTurn,F=[...j.players],ce=(Q+1)%4,G=[...j.centerStack],U=G.pop();if(U){const S=[...F[Q].tiles],x=S.findIndex(k=>k===null);x!==-1&&(S[x]=U);const C=S.findIndex(k=>k!==null),M=S[C];S[C]=null,F[Q]={...F[Q],tiles:S};const R=[...j.discardPiles];R[Q]=[...R[Q],M];const O=G.length===0?"stackEmpty":"playing";return{...j,centerStack:G,players:F,discardPiles:R,currentTurn:ce,phase:O}}return{...j,currentTurn:ce}})},1500);return()=>clearTimeout(D)}},[e?.currentTurn,e?.phase]);const I=async()=>(o(!0),await new Promise(D=>setTimeout(D,1e3)),o(!1),"okey-room-"+Math.random().toString(36).substr(2,6)),P=async D=>{o(!0),await new Promise(j=>setTimeout(j,1e3)),o(!1)},q=z.useCallback(()=>{t(D=>{if(!D)return null;const j=D.players[0],Q=j.tiles.filter(me=>me!==null),F=[...Q.filter(me=>me.isFakeOkey)],ce=Q.filter(me=>!me.isFakeOkey&&D.okeyTile&&me.color===D.okeyTile.color&&me.value===D.okeyTile.value),U=[...Q.filter(me=>!me.isFakeOkey&&!(D.okeyTile&&me.color===D.okeyTile.color&&me.value===D.okeyTile.value)),...ce],S=[],x=[...U],C=["red","blue","black","yellow"],M=(me,H,Z)=>({...me,displayValue:H,displayColor:Z,isJokerPlaceholder:!0});C.forEach(me=>{let H=x.filter(se=>se.color===me).sort((se,pe)=>se.value-pe.value),Z=0;for(;Z<H.length;){let se=[H[Z]],pe=H[Z].value+1,ye=Z+1;for(;ye<H.length;)if(H[ye].value===pe)se.push(H[ye]),pe++,ye++;else if(H[ye].value<pe)ye++;else break;if(se[se.length-1].value===13){const V=H.find($=>$.value===1);V&&!se.find($=>$.id===V.id)&&se.push(V)}se.length>=3?(S.push([...se]),se.forEach(V=>{const $=x.findIndex(ue=>ue.id===V.id);$!==-1&&x.splice($,1)}),H=x.filter(V=>V.color===me).sort((V,$)=>V.value-$.value),Z=0):Z++}});for(let me=1;me<=13;me++){const H=x.filter(se=>se.value===me),Z=Array.from(new Set(H.map(se=>se.color)));if(Z.length>=3){const se=Z.map(pe=>H.find(ye=>ye.color===pe));S.push(se),se.forEach(pe=>{const ye=x.findIndex(V=>V.id===pe.id);ye!==-1&&x.splice(ye,1)})}}C.forEach(me=>{if(F.length===0)return;const H=x.filter(Z=>Z.color===me).sort((Z,se)=>Z.value-se.value);for(let Z=0;Z<H.length-1&&F.length>0;Z++){const se=H[Z],pe=H[Z+1];if(pe.value===se.value+1){const ye=F.shift();if(pe.value<13){const V=M(ye,pe.value+1,me);S.push([se,pe,V])}else if(se.value>1){const V=M(ye,se.value-1,me);S.push([V,se,pe])}else{const V=M(ye,3,me);S.push([se,pe,V])}[se,pe].forEach(V=>{const $=x.findIndex(ue=>ue.id===V.id);$!==-1&&x.splice($,1)}),Z=-1}else if(pe.value===se.value+2&&F.length>0){const ye=F.shift(),V=M(ye,se.value+1,me);S.push([se,V,pe]),[se,pe].forEach($=>{const ue=x.findIndex(ge=>ge.id===$.id);ue!==-1&&x.splice(ue,1)}),Z=-1}}});for(let me=1;me<=13&&F.length>0;me++){const H=x.filter(se=>se.value===me),Z=Array.from(new Set(H.map(se=>se.color)));if(Z.length===2){const se=F.shift(),pe=C.find($=>!Z.includes($)),ye=M(se,me,pe),V=[...Z.map($=>H.find(ue=>ue.color===$)),ye];S.push(V),V.forEach($=>{if(!$.isJokerPlaceholder){const ue=x.findIndex(ge=>ge.id===$.id);ue!==-1&&x.splice(ue,1)}})}}let R=new Array(30).fill(null),O=0;F.forEach(me=>{R[O++]=me}),F.length>0&&O++,S.forEach(me=>{me.forEach(H=>{R[O++]=H}),O++});let k=15;for(;R[k]!==null&&k<30;)k++;x.forEach(me=>{k<30&&(R[k++]=me)});const be=[...D.players];return be[0]={...j,tiles:R},{...D,players:be}})},[e?.okeyTile]);return{gameState:e,moveTileInRack:E,drawFromCenter:c,drawFromDiscard:u,finishGame:d,resetGame:g,discardTile:w,autoSortTiles:q,reshuffleDiscards:p,endInTie:v,createRoom:I,joinRoom:P,isAuthLoading:r}},jc=({tile:i,okeyTile:e,isJoker:t,className:r="",dragging:o=!1,size:c="md"})=>{const u=E=>{switch(E){case"red":return"text-[#d32f2f]";case"black":return"text-[#212121]";case"blue":return"text-[#1976d2]";case"yellow":return"text-[#ffa000]";default:return"text-slate-400"}},d=c==="sm"?"w-10 h-13":c==="lg"?"w-16 h-22":"w-14 h-19",g=c==="sm"?"text-2xl":c==="lg"?"text-5xl":"text-4xl",p=e&&i.color===e.color&&i.value===e.value&&!i.isFakeOkey,v=()=>i.isFakeOkey?_.jsx("div",{className:"flex flex-col items-center justify-center",children:_.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-emerald-500/30 flex items-center justify-center",children:_.jsx("div",{className:"w-4 h-4 rounded-full bg-emerald-500/20"})})}):_.jsxs("div",{className:"flex flex-col items-center justify-center leading-none",children:[_.jsx("span",{className:`${g} font-bold ${u(i.color)} tracking-tighter`,children:i.value}),_.jsx("div",{className:`w-2 h-2 rounded-full mt-1 ${i.color==="red"?"bg-red-500":i.color==="blue"?"bg-blue-500":i.color==="yellow"?"bg-yellow-500":"bg-black"} shadow-sm`}),p&&_.jsx("div",{className:"absolute top-1 right-1",children:_.jsx("div",{className:"text-[10px] drop-shadow-sm",children:""})})]});return _.jsxs("div",{className:`
        relative ${d}
        bg-[#fffdfa]
        rounded-md
        shadow-[0_2px_0_#d1cfca,0_4px_8px_rgba(0,0,0,0.2)]
        flex items-center justify-center
        select-none
        border border-[#e5e3de]
        ${o?"opacity-90 cursor-grabbing scale-110 -rotate-2 z-50":"cursor-grab hover:-translate-y-1"}
        ${t?"ring-4 ring-green-400/80 ring-offset-2":""}
        transition-all duration-200
        ${r}
      `,children:[_.jsx("div",{className:"absolute inset-[2px] rounded-[3px] bg-gradient-to-br from-white to-transparent opacity-50 pointer-events-none"}),_.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center w-full h-full pb-0.5",children:v()})]})},sE=({tile:i,isJoker:e,index:t,okeyTile:r})=>{const o=`slot-${t}`,{setNodeRef:c,isOver:u}=wl({id:o}),{attributes:d,listeners:g,setNodeRef:p,isDragging:v}=gu({id:o,disabled:!i});return _.jsxs("div",{ref:c,className:`
                relative w-13 h-17 rounded-lg shadow-inner flex items-center justify-center transition-all duration-200
                ${u?"bg-green-500/30 ring-4 ring-green-400 scale-110 z-20 shadow-2xl":"bg-black/15 border border-black/10"}
            `,children:[i&&_.jsx("div",{ref:p,...d,...g,className:`relative z-10 ${v?"opacity-20":""}`,children:_.jsx(jc,{tile:i,okeyTile:r,isJoker:e,dragging:v})}),!i&&!u&&_.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-black/5"})]})},eM=({tiles:i,isCurrentPlayer:e,okeyTile:t})=>{if(!e){const r=i.filter(o=>o!==null);return _.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[_.jsx("div",{className:"flex justify-center items-center gap-1 bg-[#2a1b0e] p-2 rounded border border-[#3d2a1a] shadow-2xl",children:Array.from({length:Math.min(r.length,11)}).map((o,c)=>_.jsx("div",{className:"w-6 h-8 bg-[#f5f5f5] rounded-sm transform -skew-x-2 border-b-2 border-slate-400 shadow-sm"},c))}),_.jsx("div",{className:"flex justify-center items-center gap-1 bg-[#2a1b0e] p-2 rounded border border-[#3d2a1a] shadow-2xl -mt-1 scale-95 opacity-80",children:Array.from({length:Math.max(0,r.length-11)}).map((o,c)=>_.jsx("div",{className:"w-6 h-8 bg-[#f5f5f5] rounded-sm transform -skew-x-1 border-b-2 border-slate-400 shadow-sm"},c))})]})}return _.jsxs("div",{className:"relative w-full max-w-none mx-auto flex flex-col items-center select-none",children:[_.jsxs("div",{className:"relative w-[85%] bg-[#8d5b3e] rounded-sm shadow-[0_20px_40px_rgba(0,0,0,0.6)] border-b-8 border-[#3d251e] p-4 flex flex-col gap-1",children:[_.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/wood-pattern.png')] opacity-20 pointer-events-none mix-blend-overlay scale-x-150"}),_.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-black/30 pointer-events-none"}),_.jsx("div",{className:"relative flex justify-center gap-1 pb-2 min-h-[5.5rem] border-b-4 border-black/20 z-10",children:i.slice(0,15).map((r,o)=>{const c=t&&r&&r.color===t.color&&r.value===t.value;return _.jsx(sE,{index:o,tile:r,okeyTile:t,isJoker:c||!1},o)})}),_.jsx("div",{className:"relative flex justify-center gap-1 pt-2 min-h-[5.5rem] z-10",children:i.slice(15,30).map((r,o)=>{const c=o+15,u=t&&r&&r.color===t.color&&r.value===t.value;return _.jsx(sE,{index:c,tile:r,okeyTile:t,isJoker:u||!1},c)})})]}),_.jsx("div",{className:"mt-4 px-6 py-1 bg-amber-500/20 rounded-full border border-amber-500/30 text-[10px] font-black text-amber-500 uppercase tracking-widest animate-pulse",children:"Talar Srkleyerek Dzenleyebilirsiniz"})]})};function Mf(i){if(!i)return!1;const e=i.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const tM=[nt.Down,nt.Right,nt.Up,nt.Left],nM=(i,e)=>{let{context:{active:t,collisionRect:r,droppableRects:o,droppableContainers:c,over:u,scrollableAncestors:d}}=e;if(tM.includes(i.code)){if(i.preventDefault(),!t||!r)return;const g=[];c.getEnabled().forEach(E=>{if(!E||E!=null&&E.disabled)return;const w=o.get(E.id);if(w)switch(i.code){case nt.Down:r.top<w.top&&g.push(E);break;case nt.Up:r.top>w.top&&g.push(E);break;case nt.Left:r.left>w.left&&g.push(E);break;case nt.Right:r.left<w.left&&g.push(E);break}});const p=mk({collisionRect:r,droppableRects:o,droppableContainers:g});let v=zw(p,"id");if(v===u?.id&&p.length>1&&(v=p[1].id),v!=null){const E=c.get(t.id),w=c.get(v),I=w?o.get(w.id):null,P=w?.node.current;if(P&&I&&E&&w){const D=ld(P).some((U,S)=>d[S]!==U),j=ox(E,w),Q=iM(E,w),F=D||!j?{x:0,y:0}:{x:Q?r.width-I.width:0,y:Q?r.height-I.height:0},ce={x:I.left,y:I.top};return F.x&&F.y?ce:Yc(ce,F)}}}};function ox(i,e){return!Mf(i)||!Mf(e)?!1:i.data.current.sortable.containerId===e.data.current.sortable.containerId}function iM(i,e){return!Mf(i)||!Mf(e)||!ox(i,e)?!1:i.data.current.sortable.index<e.data.current.sortable.index}const Mg=[{name:"Siz",isAI:!1,isYou:!0},{name:"Bot 1",isAI:!0,isYou:!1},{name:"Bot 2",isAI:!0,isYou:!1},{name:"Bot 3",isAI:!0,isYou:!1}],Hh=({playerId:i,currentTurn:e,className:t="",isDragging:r=!1,playerInfo:o,tileCount:c=14})=>{const u=e===i;return _.jsx("div",{className:`transition-all duration-300 ${u&&!r?"scale-110":"opacity-90"} ${t}`,children:_.jsxs("div",{className:`
                relative flex items-center min-w-[160px] h-9 px-4 bg-[#ede0d4] rounded-sm border-2 shadow-xl transition-all
                ${u?r?"border-green-500 bg-white shadow-green-500/20":"border-green-500 bg-white ring-8 ring-green-500/20":"border-[#8d5b3e]"}
            `,children:[_.jsx("div",{className:`mr-2 ${u?"text-green-600":"text-[#8d5b3e]"}`,children:o.isAI?_.jsx(of,{size:14}):o.isYou?_.jsx(Fa,{size:14,className:"text-amber-600"}):_.jsx(Fa,{size:14})}),_.jsxs("div",{className:`flex-1 font-bold text-xs text-center uppercase tracking-tight ${u?"text-green-700":"text-[#3d251e]"}`,children:[u&&_.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-green-500 mr-2 animate-ping"}),o.name,o.isYou&&!o.isAI&&_.jsx("span",{className:"ml-1 text-[9px] text-amber-600",children:"(Sen)"})]}),i!==0&&_.jsxs("div",{className:`absolute -bottom-5 left-1/2 -translate-x-1/2 px-2 py-0.5 rounded text-white text-[9px] font-bold shadow-md flex items-center gap-1 ${u?"bg-green-600":"bg-[#3d251e]"}`,children:[o.isAI&&_.jsx(of,{size:10}),"TA: ",c]})]})})},Fh=({playerId:i,position:e,discardPiles:t,currentTurn:r,userTileCount:o,onDrawDiscard:c,isDraggingRackTile:u,mySlot:d=0})=>{const g=i===d&&r===d&&o===15&&u,p=(d+3)%4,v=i===p&&r===d&&o===14,{setNodeRef:E,isOver:w}=wl({id:`discard-${i}`,disabled:!g}),I=t[i][t[i].length-1],{attributes:P,listeners:q,setNodeRef:D,isDragging:j}=gu({id:`pick-discard-${i}`,disabled:!v||!I}),Q={top:"absolute top-[22%] left-1/2 -translate-x-1/2",bottom:"absolute bottom-[35%] right-[10%] -translate-x-1/2",left:"absolute left-[12%] top-[35%]",right:"absolute right-[12%] top-[35%]"};return _.jsxs("div",{ref:E,onClick:()=>v&&c(),className:`
                ${Q[e]} w-20 h-28 rounded-lg transition-all duration-300 flex items-center justify-center
                ${w?"bg-green-400/20 scale-110 ring-4 ring-green-400 shadow-2xl":""}
                ${v?"cursor-grab active:cursor-grabbing hover:ring-4 hover:ring-amber-400 shadow-[0_0_20px_rgba(251,191,36,0.3)] bg-amber-400/10":""}
            `,children:[I?_.jsx("div",{ref:D,...P,...q,className:`rotate-3 shadow-xl transform transition-transform ${v&&!j?"hover:scale-110 -translate-y-2":""} ${j?"opacity-20":""}`,children:_.jsx(jc,{tile:I,size:"sm"})}):_.jsx("div",{className:"w-16 h-24 border-2 border-white/5 border-dashed rounded-lg flex items-center justify-center",children:_.jsx("div",{className:"w-2 h-2 rounded-full bg-white/5"})}),g&&_.jsx("div",{className:"absolute -inset-2 border-2 border-dashed border-green-400 rounded-xl animate-pulse flex items-center justify-center",children:_.jsx("div",{className:"text-[8px] font-black text-green-400 mb-20 uppercase tracking-widest whitespace-nowrap",children:"Buraya At"})}),v&&I&&!j&&_.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-amber-500 text-white text-[8px] font-black px-2 py-1 rounded animate-bounce whitespace-nowrap z-50",children:"SRKLE VEYA TIKLA"})]})},sM=({currentTurn:i,userTileCount:e,centerStackCount:t,onDraw:r,mySlot:o=0})=>{const c=i===o&&e<15,{attributes:u,listeners:d,setNodeRef:g,isDragging:p}=gu({id:"draw-pile",disabled:!c});return _.jsx("div",{className:"relative group",children:_.jsxs("div",{ref:g,...u,...d,onClick:()=>c&&r(),className:`
                    relative w-16 h-20 bg-[#fffdfa] rounded-sm shadow-2xl flex items-center justify-center transition-all
                    ${c?"hover:-translate-y-2 cursor-grab active:cursor-grabbing ring-4 ring-green-500 bg-white":"cursor-wait opacity-60"}
                    ${p?"opacity-20":""}
                `,children:[_.jsx("div",{className:`absolute inset-0 bg-[#e5e3de] border border-[#ccc] rounded-sm transform translate-x-1 translate-y-1 -z-10 shadow-lg ${c?"bg-green-100":""}`}),_.jsx("div",{className:`absolute inset-0 bg-[#d1cfca] border border-[#bbb] rounded-sm transform translate-x-2 translate-y-2 -z-20 shadow-lg ${c?"bg-green-200":""}`}),_.jsx("div",{className:"text-[#3d251e] font-bold text-2xl",children:t}),c&&!p&&_.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-green-500 text-white text-[10px] font-black px-3 py-1 rounded-full animate-bounce shadow-lg whitespace-nowrap flex items-center gap-1 z-50",children:"TA EK"})]})})},rM=({isDraggingRackTile:i,canFinish:e})=>{const{setNodeRef:t,isOver:r}=wl({id:"finish-zone",disabled:!e});return _.jsx("div",{ref:t,className:`
                absolute -inset-4 rounded-2xl transition-all duration-300 pointer-events-none
                ${e&&i?"border-4 border-dashed border-amber-400 animate-[pulse_1.5s_infinite] bg-amber-400/10":""}
                ${r?"bg-amber-400/30 scale-110":""}
            `})},aM=({gameState:i,onDraw:e,onDrawDiscard:t,onMoveTile:r,onDiscard:o,onAutoSort:c,onFinish:u,onReset:d,onReshuffle:g,onEndTie:p,onExit:v,playerInfo:E=Mg,mySlot:w=0,isOnline:I=!1})=>{const[P,q]=z.useState(null),D=p0(Ka(cd,{activationConstraint:{distance:5}}),Ka(v0,{coordinateGetter:nM}));if(!i)return _.jsx("div",{className:"text-white text-center p-10 font-bold",children:"YKLENYOR..."});const j=x=>q(x.active.id),Q=x=>{q(null);const{active:C,over:M}=x;if(!M)return;const R=C.id,O=M.id;O===`discard-${w}`&&R.startsWith("slot-")?o(parseInt(R.split("-")[1])):O==="finish-zone"&&R.startsWith("slot-")?u(parseInt(R.split("-")[1])):R==="draw-pile"&&O.startsWith("slot-")?e(parseInt(O.split("-")[1])):R.startsWith("pick-discard-")&&O.startsWith("slot-")?t(parseInt(O.split("-")[1])):R!==O&&R.startsWith("slot-")&&O.startsWith("slot-")&&r(parseInt(R.split("-")[1]),parseInt(O.split("-")[1]))},F=()=>{if(!P)return null;if(P==="draw-pile")return _.jsx("div",{className:"w-16 h-20 bg-white rounded shadow-2xl opacity-80"});if(P.startsWith("pick-discard-")){const x=(w+3)%4,C=i.discardPiles[x][i.discardPiles[x].length-1];return C?_.jsx(jc,{tile:C,size:"sm",okeyTile:i.okeyTile}):null}if(P.startsWith("slot-")){const x=i.players[w].tiles[parseInt(P.split("-")[1])];return x?_.jsx(jc,{tile:x,okeyTile:i.okeyTile}):null}return null},ce=x=>i.players[x].tiles.filter(C=>C!==null).length,G=x=>(x+w)%4,U=ce(w),S=x=>{const C=G(x);return E[C]||Mg[C]};return _.jsx(w0,{sensors:D,collisionDetection:dk,onDragStart:j,onDragEnd:Q,children:_.jsxs("div",{className:"relative w-full aspect-[16/10] bg-[#357a38] overflow-hidden mx-auto font-sans shadow-2xl rounded-lg border-x-[12px] border-y-[6px] border-[#3d251e]",children:[_.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/dark-matter.png')] opacity-30 pointer-events-none"}),_.jsx(Hh,{playerId:G(2),currentTurn:i.currentTurn,isDragging:!!P,className:"absolute top-4 left-1/2 -translate-x-1/2 z-30",playerInfo:S(2),tileCount:ce(G(2))}),_.jsx(Hh,{playerId:G(3),currentTurn:i.currentTurn,isDragging:!!P,className:"absolute left-4 top-1/2 -translate-y-1/2 -rotate-90 origin-center z-30",playerInfo:S(3),tileCount:ce(G(3))}),_.jsx(Hh,{playerId:G(1),currentTurn:i.currentTurn,isDragging:!!P,className:"absolute right-4 top-1/2 -translate-y-1/2 rotate-90 origin-center z-30",playerInfo:S(1),tileCount:ce(G(1))}),_.jsx(Fh,{playerId:G(2),position:"top",...i,userTileCount:U,onDrawDiscard:t,isDraggingRackTile:P?.startsWith("slot-"),mySlot:w}),_.jsx(Fh,{playerId:G(3),position:"left",...i,userTileCount:U,onDrawDiscard:t,isDraggingRackTile:P?.startsWith("slot-"),mySlot:w}),_.jsx(Fh,{playerId:G(1),position:"right",...i,userTileCount:U,onDrawDiscard:t,isDraggingRackTile:P?.startsWith("slot-"),mySlot:w}),_.jsx(Fh,{playerId:w,position:"bottom",...i,userTileCount:U,onDrawDiscard:t,isDraggingRackTile:P?.startsWith("slot-"),mySlot:w}),_.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center gap-12",children:[_.jsxs("div",{className:"relative",children:[_.jsx(jc,{tile:i.indicatorTile,size:"md",okeyTile:i.okeyTile}),_.jsx(rM,{isDraggingRackTile:P?.startsWith("slot-")||!1,canFinish:i.currentTurn===w&&U===15})]}),_.jsx(sM,{...i,userTileCount:U,centerStackCount:i.centerStack.length,onDraw:e,mySlot:w})]}),_.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-40 p-2 flex flex-col items-center gap-3",children:[_.jsxs("div",{className:"flex items-center gap-6",children:[_.jsx(Hh,{playerId:w,currentTurn:i.currentTurn,isDragging:!!P,playerInfo:E[w]||Mg[0]}),_.jsx("button",{onClick:c,className:"px-8 py-2 bg-[#ede0d4] text-[#3d251e] border-2 border-[#8d5b3e] rounded shadow-lg text-[11px] font-black uppercase tracking-widest transition-all hover:scale-105 active:scale-95",children:"Dzenle"})]}),_.jsx(eM,{tiles:i.players[w].tiles,playerId:w,isCurrentPlayer:!0,okeyTile:i.okeyTile})]}),I&&i.currentTurn!==w&&_.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 pointer-events-none",children:_.jsx("div",{className:"bg-black/60 backdrop-blur-sm px-6 py-3 rounded-xl",children:_.jsxs("p",{className:"text-white text-sm font-bold flex items-center gap-2",children:[_.jsx("span",{className:"w-2 h-2 bg-amber-500 rounded-full animate-pulse"}),E[i.currentTurn]?.name||`Player ${i.currentTurn+1}`,"'in sras..."]})})}),i.phase==="roundOver"&&_.jsx("div",{className:"absolute inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm",children:_.jsxs("div",{className:"bg-[#ede0d4] p-10 rounded-2xl shadow-2xl flex flex-col items-center gap-6 text-[#3d251e]",children:[_.jsx("h2",{className:"text-4xl font-black uppercase",children:i.winner===null?"DOSTLUK KAZANDI":i.winner===w?"TEBRKLER!":"OYUN BTT"}),_.jsx("p",{className:"text-xl font-bold",children:i.winner===null?"Berabere! Talar bitti.":i.winner===w?"Kazandnz!":`${E[i.winner]?.name||`Player ${i.winner+1}`} Kazand!`}),_.jsxs("div",{className:"flex gap-4",children:[_.jsx("button",{onClick:d,className:"px-10 py-4 bg-emerald-600 text-white font-black rounded-xl",children:"Tekrar Oyna"}),_.jsx("button",{onClick:v,className:"px-10 py-4 bg-slate-800 text-white font-black rounded-xl",children:"k"})]})]})}),i.phase==="stackEmpty"&&_.jsx("div",{className:"absolute inset-0 z-[110] flex items-center justify-center bg-black/70 backdrop-blur-md fade-in",children:_.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 p-8 rounded-2xl shadow-2xl border-4 border-amber-500 max-w-md text-center flex flex-col gap-6",children:[_.jsx("div",{className:"text-5xl",children:""}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-2xl font-black text-amber-900 uppercase",children:"ORTADA TA BTT!"}),_.jsx("p",{className:"text-amber-800 font-medium mt-2",children:"Iskartadaki talar kartrp devam m edelim, yoksa oyunu bitirelim mi?"})]}),_.jsxs("div",{className:"flex flex-col gap-3",children:[_.jsx("button",{onClick:g,className:"w-full py-4 bg-amber-600 hover:bg-amber-500 text-white font-black uppercase tracking-widest rounded-xl shadow-lg transition-all hover:scale-105 active:scale-95",children:"Talar Kartr (Devam Et)"}),_.jsx("button",{onClick:p,className:"w-full py-4 bg-slate-700 hover:bg-slate-600 text-white font-black uppercase tracking-widest rounded-xl shadow-lg transition-all hover:scale-105 active:scale-95",children:"Oyunu Bitir (Berabere)"})]})]})}),_.jsx(nx,{dropAnimation:null,children:F()})]})})},oM=i=>[i.pile0||[],i.pile1||[],i.pile2||[],i.pile3||[]],lM=i=>({phase:i.phase==="waiting"?"dealing":i.phase,players:i.players.map(e=>({tiles:e.tiles})),centerStack:i.centerStack,discardPiles:oM(i.discardPiles),indicatorTile:i.indicatorTile,okeyTile:i.okeyTile,currentTurn:i.currentTurn,winner:i.winner}),cM=({roomId:i,mode:e,aiDifficulty:t,onExit:r})=>{const o=ZO(e==="local"?i:null),c=rx(e==="online"?i:null),u=e==="online",d=c.room,g=c.getMySlot(),p=c.isHost(),v=u?d?lM(d):null:o.gameState,E=z.useCallback(async()=>{if(!d||!p||d.phase!=="playing"||!d.players[d.currentTurn]?.adIsAI)return;const S=[...d.centerStack],x=S.pop();if(!x)return;const C=[...d.players],M=[...C[d.currentTurn].tiles],R=M.findIndex(pe=>pe===null);R!==-1&&(M[R]=x);const O=M.findIndex(pe=>pe!==null),k=M[O];M[O]=null,C[d.currentTurn]={...C[d.currentTurn],tiles:M};const be=`pile${d.currentTurn}`,me=d.discardPiles[be]||[],H={...d.discardPiles,[be]:k?[...me,k]:me},Z=(d.currentTurn+1)%4,se=S.length===0?"stackEmpty":"playing";await c.updateGameState({centerStack:S,players:C,discardPiles:H,currentTurn:Z,phase:se})},[d,p,c]);z.useEffect(()=>{if(!u||!d||!p||d.phase!=="playing"||!d.players[d.currentTurn]?.adIsAI)return;const S=setTimeout(()=>{E()},1500);return()=>clearTimeout(S)},[u,d?.currentTurn,d?.phase,p,E]);const w=z.useCallback(U=>{u?c.drawFromCenter(U):o.drawFromCenter(U)},[u,c,o]),I=z.useCallback(U=>{u?c.drawFromDiscard(U):o.drawFromDiscard(U)},[u,c,o]),P=z.useCallback((U,S)=>{u?c.moveTileInRack(U,S):o.moveTileInRack(U,S)},[u,c,o]),q=z.useCallback(U=>{u?c.discardTile(U):o.discardTile(U)},[u,c,o]),D=z.useCallback(U=>{u||o.finishGame(U)},[u,o]),j=z.useCallback(()=>{u?c.resetGame():o.resetGame()},[u,c,o]),Q=z.useCallback(()=>{u?c.reshuffleDiscards():o.reshuffleDiscards()},[u,c,o]),F=z.useCallback(()=>{u?c.endInTie():o.endInTie()},[u,c,o]),ce=z.useCallback(()=>{u?c.autoSortTiles():o.autoSortTiles()},[u,c,o]),G=U=>{if(u&&d){const x=d.players[U];return{name:x.adPlayerName||`Player ${U+1}`,isAI:x.adIsAI,isYou:x.odaUserId===c.userId}}return{name:["Siz","Bot 1","Bot 2","Bot 3"][U],isAI:U!==0,isYou:U===0}};return _.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[85vh] fade-in animate-in duration-700",children:[_.jsxs("div",{className:"w-full max-w-6xl mb-6 flex justify-between items-center text-white px-4",children:[_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("button",{onClick:r,className:"p-3 bg-slate-800/80 hover:bg-red-500/20 text-slate-400 hover:text-red-400 rounded-xl transition-all border border-slate-700 hover:border-red-500/50",title:"Leave Game",children:_.jsx(yA,{size:20})}),_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-black tracking-tight",children:"Okey Arena"}),_.jsxs("div",{className:"text-xs font-medium text-emerald-400 flex items-center gap-2",children:[_.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),e==="online"?`Room: ${i}`:`Local  ${t} AI`]})]})]}),u&&d&&_.jsx("div",{className:"flex items-center gap-2",children:d.players.map((U,S)=>_.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${d.currentTurn===S?"bg-amber-500/20 border border-amber-500/50 text-amber-400":"bg-slate-800/50 border border-slate-700 text-slate-400"}`,children:[U.adIsAI?_.jsx(of,{size:14}):U.odaUserId===c.userId?_.jsx(Fa,{size:14,className:"text-emerald-400"}):_.jsx(Vf,{size:14}),_.jsx("span",{className:"truncate max-w-[60px]",children:U.adPlayerName||(U.adIsAI?`Bot ${S+1}`:"Empty")})]},S))})]}),_.jsx(aM,{gameState:v,onDraw:w,onDrawDiscard:I,onMoveTile:P,onDiscard:q,onAutoSort:ce,onFinish:D,onReset:j,onReshuffle:Q,onEndTie:F,onExit:r,playerInfo:u&&d?d.players.map((U,S)=>G(S)):void 0,mySlot:u?g:0,isOnline:u}),_.jsxs("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10 flex flex-col items-center gap-1",children:[_.jsx("span",{children:"Transparent Strategy Arena"}),_.jsx("span",{className:"text-slate-700 text-[8px]",children:"v0.1.0"})]})]})};function uM(){const[i,e]=z.useState("menu"),[t,r]=z.useState("chess"),[o,c]=z.useState(null),[u,d]=z.useState("Normal"),g=ix(null),p=sx(null),v=rx(o),E=t==="chess"?g.isAuthLoading:t==="backgammon"?p.isAuthLoading:v.isAuthLoading;z.useEffect(()=>{v.room?.phase==="playing"&&i==="okey-lobby"&&e("online")},[v.room?.phase,i]);const w=async()=>{try{if(t==="chess"){const G=await g.createRoom();G&&(c(G),e("online"))}else if(t==="backgammon"){const G=await p.createRoom();G&&(c(G),e("online"))}}catch(G){console.error("Failed to create room:",G)}},I=async G=>{if(G.trim())try{t==="chess"?(await g.joinRoom(G),c(G),e("online")):t==="backgammon"&&(await p.joinRoom(G),c(G),e("online"))}catch(U){console.error("Failed to join room:",U),alert("Room not found or could not join")}},P=async G=>{try{const U=await v.createRoom(G);return c(U),e("okey-lobby"),U}catch(U){return console.error("Failed to create Okey room:",U),null}},q=async(G,U)=>{try{const S=await v.joinRoom(G,U);return S&&(c(G),e("okey-lobby")),S}catch(S){return console.error("Failed to join Okey room:",S),!1}},D=async()=>{try{await v.startGame()}catch(G){console.error("Failed to start Okey game:",G)}},j=G=>{r(G)},Q=G=>{d(G),e("local"),c(null)},F=async()=>{t==="okey"&&o&&await v.leaveRoom(),c(null),e("menu")},ce=i==="menu"||i==="okey-lobby";return _.jsxs("main",{className:"relative min-h-screen w-full flex flex-col items-center overflow-x-hidden",children:[_.jsx(QS,{}),_.jsx("div",{className:"container mx-auto px-4 py-8 max-w-7xl w-full overflow-visible",children:ce?_.jsx(C4,{onCreateRoom:w,onJoinRoom:I,onStartLocal:Q,isAuthLoading:E,onSelectGame:j,selectedGame:t,onCreateOkeyRoom:P,onJoinOkeyRoom:q,onStartOkeyGame:D,okeyRoom:v.room,okeyUserId:v.userId}):t==="chess"?_.jsx(kO,{roomId:o||"",mode:i==="online"?"online":"local",aiDifficulty:u,onExit:F}):t==="backgammon"?_.jsx(XO,{roomId:o||"",mode:i==="online"?"online":"local",aiDifficulty:u,onExit:F}):_.jsx(cM,{roomId:o||"",mode:i==="online"?"online":"local",aiDifficulty:u,onExit:F})}),_.jsx("footer",{className:"mt-auto py-8 text-slate-500 text-sm",children:"DragMate  Premium Multiplayer Board Gaming"})]})}KS.createRoot(document.getElementById("root")).render(_.jsx(z.StrictMode,{children:_.jsx(uM,{})}));
