(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function jA(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Dm={exports:{}},su={};var u0;function BA(){if(u0)return su;u0=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:h,ref:o!==void 0?o:null,props:u}}return su.Fragment=t,su.jsx=n,su.jsxs=n,su}var c0;function qA(){return c0||(c0=1,Dm.exports=BA()),Dm.exports}var Z=qA(),Nm={exports:{}},kt={};var h0;function HA(){if(h0)return kt;h0=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function N(M){return M===null||typeof M!="object"?null:(M=S&&M[S]||M["@@iterator"],typeof M=="function"?M:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,B={};function st(M,tt,ut){this.props=M,this.context=tt,this.refs=B,this.updater=ut||F}st.prototype.isReactComponent={},st.prototype.setState=function(M,tt){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,tt,"setState")},st.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ct(){}ct.prototype=st.prototype;function at(M,tt,ut){this.props=M,this.context=tt,this.refs=B,this.updater=ut||F}var yt=at.prototype=new ct;yt.constructor=at,U(yt,st.prototype),yt.isPureReactComponent=!0;var pt=Array.isArray;function ft(){}var R={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function C(M,tt,ut){var dt=ut.ref;return{$$typeof:r,type:M,key:tt,ref:dt!==void 0?dt:null,props:ut}}function O(M,tt){return C(M.type,tt,M.props)}function x(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function k(M){var tt={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ut){return tt[ut]})}var I=/\/+/g;function qt(M,tt){return typeof M=="object"&&M!==null&&M.key!=null?k(""+M.key):tt.toString(36)}function we(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ft,ft):(M.status="pending",M.then(function(tt){M.status==="pending"&&(M.status="fulfilled",M.value=tt)},function(tt){M.status==="pending"&&(M.status="rejected",M.reason=tt)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function X(M,tt,ut,dt,It){var wt=typeof M;(wt==="undefined"||wt==="boolean")&&(M=null);var Lt=!1;if(M===null)Lt=!0;else switch(wt){case"bigint":case"string":case"number":Lt=!0;break;case"object":switch(M.$$typeof){case r:case t:Lt=!0;break;case E:return Lt=M._init,X(Lt(M._payload),tt,ut,dt,It)}}if(Lt)return It=It(M),Lt=dt===""?"."+qt(M,0):dt,pt(It)?(ut="",Lt!=null&&(ut=Lt.replace(I,"$&/")+"/"),X(It,tt,ut,"",function(Be){return Be})):It!=null&&(x(It)&&(It=O(It,ut+(It.key==null||M&&M.key===It.key?"":(""+It.key).replace(I,"$&/")+"/")+Lt)),tt.push(It)),1;Lt=0;var De=dt===""?".":dt+":";if(pt(M))for(var oe=0;oe<M.length;oe++)dt=M[oe],wt=De+qt(dt,oe),Lt+=X(dt,tt,ut,wt,It);else if(oe=N(M),typeof oe=="function")for(M=oe.call(M),oe=0;!(dt=M.next()).done;)dt=dt.value,wt=De+qt(dt,oe++),Lt+=X(dt,tt,ut,wt,It);else if(wt==="object"){if(typeof M.then=="function")return X(we(M),tt,ut,dt,It);throw tt=String(M),Error("Objects are not valid as a React child (found: "+(tt==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":tt)+"). If you meant to render a collection of children, use an array instead.")}return Lt}function lt(M,tt,ut){if(M==null)return M;var dt=[],It=0;return X(M,dt,"","",function(wt){return tt.call(ut,wt,It++)}),dt}function St(M){if(M._status===-1){var tt=M._result;tt=tt(),tt.then(function(ut){(M._status===0||M._status===-1)&&(M._status=1,M._result=ut)},function(ut){(M._status===0||M._status===-1)&&(M._status=2,M._result=ut)}),M._status===-1&&(M._status=0,M._result=tt)}if(M._status===1)return M._result.default;throw M._result}var Pt=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var tt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(tt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Kt={map:lt,forEach:function(M,tt,ut){lt(M,function(){tt.apply(this,arguments)},ut)},count:function(M){var tt=0;return lt(M,function(){tt++}),tt},toArray:function(M){return lt(M,function(tt){return tt})||[]},only:function(M){if(!x(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return kt.Activity=T,kt.Children=Kt,kt.Component=st,kt.Fragment=n,kt.Profiler=o,kt.PureComponent=at,kt.StrictMode=s,kt.Suspense=g,kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,kt.__COMPILER_RUNTIME={__proto__:null,c:function(M){return R.H.useMemoCache(M)}},kt.cache=function(M){return function(){return M.apply(null,arguments)}},kt.cacheSignal=function(){return null},kt.cloneElement=function(M,tt,ut){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var dt=U({},M.props),It=M.key;if(tt!=null)for(wt in tt.key!==void 0&&(It=""+tt.key),tt)!w.call(tt,wt)||wt==="key"||wt==="__self"||wt==="__source"||wt==="ref"&&tt.ref===void 0||(dt[wt]=tt[wt]);var wt=arguments.length-2;if(wt===1)dt.children=ut;else if(1<wt){for(var Lt=Array(wt),De=0;De<wt;De++)Lt[De]=arguments[De+2];dt.children=Lt}return C(M.type,It,dt)},kt.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},kt.createElement=function(M,tt,ut){var dt,It={},wt=null;if(tt!=null)for(dt in tt.key!==void 0&&(wt=""+tt.key),tt)w.call(tt,dt)&&dt!=="key"&&dt!=="__self"&&dt!=="__source"&&(It[dt]=tt[dt]);var Lt=arguments.length-2;if(Lt===1)It.children=ut;else if(1<Lt){for(var De=Array(Lt),oe=0;oe<Lt;oe++)De[oe]=arguments[oe+2];It.children=De}if(M&&M.defaultProps)for(dt in Lt=M.defaultProps,Lt)It[dt]===void 0&&(It[dt]=Lt[dt]);return C(M,wt,It)},kt.createRef=function(){return{current:null}},kt.forwardRef=function(M){return{$$typeof:m,render:M}},kt.isValidElement=x,kt.lazy=function(M){return{$$typeof:E,_payload:{_status:-1,_result:M},_init:St}},kt.memo=function(M,tt){return{$$typeof:p,type:M,compare:tt===void 0?null:tt}},kt.startTransition=function(M){var tt=R.T,ut={};R.T=ut;try{var dt=M(),It=R.S;It!==null&&It(ut,dt),typeof dt=="object"&&dt!==null&&typeof dt.then=="function"&&dt.then(ft,Pt)}catch(wt){Pt(wt)}finally{tt!==null&&ut.types!==null&&(tt.types=ut.types),R.T=tt}},kt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},kt.use=function(M){return R.H.use(M)},kt.useActionState=function(M,tt,ut){return R.H.useActionState(M,tt,ut)},kt.useCallback=function(M,tt){return R.H.useCallback(M,tt)},kt.useContext=function(M){return R.H.useContext(M)},kt.useDebugValue=function(){},kt.useDeferredValue=function(M,tt){return R.H.useDeferredValue(M,tt)},kt.useEffect=function(M,tt){return R.H.useEffect(M,tt)},kt.useEffectEvent=function(M){return R.H.useEffectEvent(M)},kt.useId=function(){return R.H.useId()},kt.useImperativeHandle=function(M,tt,ut){return R.H.useImperativeHandle(M,tt,ut)},kt.useInsertionEffect=function(M,tt){return R.H.useInsertionEffect(M,tt)},kt.useLayoutEffect=function(M,tt){return R.H.useLayoutEffect(M,tt)},kt.useMemo=function(M,tt){return R.H.useMemo(M,tt)},kt.useOptimistic=function(M,tt){return R.H.useOptimistic(M,tt)},kt.useReducer=function(M,tt,ut){return R.H.useReducer(M,tt,ut)},kt.useRef=function(M){return R.H.useRef(M)},kt.useState=function(M){return R.H.useState(M)},kt.useSyncExternalStore=function(M,tt,ut){return R.H.useSyncExternalStore(M,tt,ut)},kt.useTransition=function(){return R.H.useTransition()},kt.version="19.2.3",kt}var f0;function Bg(){return f0||(f0=1,Nm.exports=HA()),Nm.exports}var J=Bg();const Tn=jA(J);var xm={exports:{}},au={},Om={exports:{}},Mm={};var d0;function FA(){return d0||(d0=1,(function(r){function t(X,lt){var St=X.length;X.push(lt);t:for(;0<St;){var Pt=St-1>>>1,Kt=X[Pt];if(0<o(Kt,lt))X[Pt]=lt,X[St]=Kt,St=Pt;else break t}}function n(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var lt=X[0],St=X.pop();if(St!==lt){X[0]=St;t:for(var Pt=0,Kt=X.length,M=Kt>>>1;Pt<M;){var tt=2*(Pt+1)-1,ut=X[tt],dt=tt+1,It=X[dt];if(0>o(ut,St))dt<Kt&&0>o(It,ut)?(X[Pt]=It,X[dt]=St,Pt=dt):(X[Pt]=ut,X[tt]=St,Pt=tt);else if(dt<Kt&&0>o(It,St))X[Pt]=It,X[dt]=St,Pt=dt;else break t}}return lt}function o(X,lt){var St=X.sortIndex-lt.sortIndex;return St!==0?St:X.id-lt.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var g=[],p=[],E=1,T=null,S=3,N=!1,F=!1,U=!1,B=!1,st=typeof setTimeout=="function"?setTimeout:null,ct=typeof clearTimeout=="function"?clearTimeout:null,at=typeof setImmediate<"u"?setImmediate:null;function yt(X){for(var lt=n(p);lt!==null;){if(lt.callback===null)s(p);else if(lt.startTime<=X)s(p),lt.sortIndex=lt.expirationTime,t(g,lt);else break;lt=n(p)}}function pt(X){if(U=!1,yt(X),!F)if(n(g)!==null)F=!0,ft||(ft=!0,k());else{var lt=n(p);lt!==null&&we(pt,lt.startTime-X)}}var ft=!1,R=-1,w=5,C=-1;function O(){return B?!0:!(r.unstable_now()-C<w)}function x(){if(B=!1,ft){var X=r.unstable_now();C=X;var lt=!0;try{t:{F=!1,U&&(U=!1,ct(R),R=-1),N=!0;var St=S;try{e:{for(yt(X),T=n(g);T!==null&&!(T.expirationTime>X&&O());){var Pt=T.callback;if(typeof Pt=="function"){T.callback=null,S=T.priorityLevel;var Kt=Pt(T.expirationTime<=X);if(X=r.unstable_now(),typeof Kt=="function"){T.callback=Kt,yt(X),lt=!0;break e}T===n(g)&&s(g),yt(X)}else s(g);T=n(g)}if(T!==null)lt=!0;else{var M=n(p);M!==null&&we(pt,M.startTime-X),lt=!1}}break t}finally{T=null,S=St,N=!1}lt=void 0}}finally{lt?k():ft=!1}}}var k;if(typeof at=="function")k=function(){at(x)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,qt=I.port2;I.port1.onmessage=x,k=function(){qt.postMessage(null)}}else k=function(){st(x,0)};function we(X,lt){R=st(function(){X(r.unstable_now())},lt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(X){switch(S){case 1:case 2:case 3:var lt=3;break;default:lt=S}var St=S;S=lt;try{return X()}finally{S=St}},r.unstable_requestPaint=function(){B=!0},r.unstable_runWithPriority=function(X,lt){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var St=S;S=X;try{return lt()}finally{S=St}},r.unstable_scheduleCallback=function(X,lt,St){var Pt=r.unstable_now();switch(typeof St=="object"&&St!==null?(St=St.delay,St=typeof St=="number"&&0<St?Pt+St:Pt):St=Pt,X){case 1:var Kt=-1;break;case 2:Kt=250;break;case 5:Kt=1073741823;break;case 4:Kt=1e4;break;default:Kt=5e3}return Kt=St+Kt,X={id:E++,callback:lt,priorityLevel:X,startTime:St,expirationTime:Kt,sortIndex:-1},St>Pt?(X.sortIndex=St,t(p,X),n(g)===null&&X===n(p)&&(U?(ct(R),R=-1):U=!0,we(pt,St-Pt))):(X.sortIndex=Kt,t(g,X),F||N||(F=!0,ft||(ft=!0,k()))),X},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(X){var lt=S;return function(){var St=S;S=lt;try{return X.apply(this,arguments)}finally{S=St}}}})(Mm)),Mm}var m0;function GA(){return m0||(m0=1,Om.exports=FA()),Om.exports}var Vm={exports:{}},Ln={};var g0;function KA(){if(g0)return Ln;g0=1;var r=Bg();function t(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:g,containerInfo:p,implementation:E}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ln.createPortal=function(g,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return u(g,p,null,E)},Ln.flushSync=function(g){var p=h.T,E=s.p;try{if(h.T=null,s.p=2,g)return g()}finally{h.T=p,s.p=E,s.d.f()}},Ln.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},Ln.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Ln.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var E=p.as,T=m(E,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,N=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;E==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:N}):E==="script"&&s.d.X(g,{crossOrigin:T,integrity:S,fetchPriority:N,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Ln.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var E=m(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},Ln.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var E=p.as,T=m(E,p.crossOrigin);s.d.L(g,E,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Ln.preloadModule=function(g,p){if(typeof g=="string")if(p){var E=m(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},Ln.requestFormReset=function(g){s.d.r(g)},Ln.unstable_batchedUpdates=function(g,p){return g(p)},Ln.useFormState=function(g,p,E){return h.H.useFormState(g,p,E)},Ln.useFormStatus=function(){return h.H.useHostTransitionStatus()},Ln.version="19.2.3",Ln}var p0;function yT(){if(p0)return Vm.exports;p0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Vm.exports=KA(),Vm.exports}var y0;function QA(){if(y0)return au;y0=1;var r=GA(),t=Bg(),n=yT();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function h(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function m(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(s(188))}function p(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),e;if(d===l)return g(f),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,b=f.child;b;){if(b===a){_=!0,a=f,l=d;break}if(b===l){_=!0,l=f,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,l=f;break}if(b===l){_=!0,l=d,a=f;break}b=b.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function E(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=E(e),i!==null)return i;e=e.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),st=Symbol.for("react.profiler"),ct=Symbol.for("react.consumer"),at=Symbol.for("react.context"),yt=Symbol.for("react.forward_ref"),pt=Symbol.for("react.suspense"),ft=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function k(e){return e===null||typeof e!="object"?null:(e=x&&e[x]||e["@@iterator"],typeof e=="function"?e:null)}var I=Symbol.for("react.client.reference");function qt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===I?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case U:return"Fragment";case st:return"Profiler";case B:return"StrictMode";case pt:return"Suspense";case ft:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case F:return"Portal";case at:return e.displayName||"Context";case ct:return(e._context.displayName||"Context")+".Consumer";case yt:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case R:return i=e.displayName||null,i!==null?i:qt(e.type)||"Memo";case w:i=e._payload,e=e._init;try{return qt(e(i))}catch{}}return null}var we=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,St={pending:!1,data:null,method:null,action:null},Pt=[],Kt=-1;function M(e){return{current:e}}function tt(e){0>Kt||(e.current=Pt[Kt],Pt[Kt]=null,Kt--)}function ut(e,i){Kt++,Pt[Kt]=e.current,e.current=i}var dt=M(null),It=M(null),wt=M(null),Lt=M(null);function De(e,i){switch(ut(wt,i),ut(It,e),ut(dt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?Ov(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=Ov(i),e=Mv(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}tt(dt),ut(dt,e)}function oe(){tt(dt),tt(It),tt(wt)}function Be(e){e.memoizedState!==null&&ut(Lt,e);var i=dt.current,a=Mv(i,e.type);i!==a&&(ut(It,e),ut(dt,a))}function Ei(e){It.current===e&&(tt(dt),tt(It)),Lt.current===e&&(tt(Lt),eu._currentValue=St)}var Vn,Ui;function Ye(e){if(Vn===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Vn=i&&i[1]||"",Ui=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vn+e+Ui}var li=!1;function kn(e,i){if(!e||li)return"";li=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var it=function(){throw Error()};if(Object.defineProperty(it.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(it,[])}catch(Y){var G=Y}Reflect.construct(e,[],it)}else{try{it.call()}catch(Y){G=Y}e.call(it.prototype)}}else{try{throw Error()}catch(Y){G=Y}(it=e())&&typeof it.catch=="function"&&it.catch(function(){})}}catch(Y){if(Y&&G&&typeof Y.stack=="string")return[Y.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var D=_.split(`
`),q=b.split(`
`);for(f=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;f<q.length&&!q[f].includes("DetermineComponentFrameRoot");)f++;if(l===D.length||f===q.length)for(l=D.length-1,f=q.length-1;1<=l&&0<=f&&D[l]!==q[f];)f--;for(;1<=l&&0<=f;l--,f--)if(D[l]!==q[f]){if(l!==1||f!==1)do if(l--,f--,0>f||D[l]!==q[f]){var W=`
`+D[l].replace(" at new "," at ");return e.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",e.displayName)),W}while(1<=l&&0<=f);break}}}finally{li=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ye(a):""}function nr(e,i){switch(e.tag){case 26:case 27:case 5:return Ye(e.type);case 16:return Ye("Lazy");case 13:return e.child!==i&&i!==null?Ye("Suspense Fallback"):Ye("Suspense");case 19:return Ye("SuspenseList");case 0:case 15:return kn(e.type,!1);case 11:return kn(e.type.render,!1);case 1:return kn(e.type,!0);case 31:return Ye("Activity");default:return""}}function zi(e){try{var i="",a=null;do i+=nr(e,a),a=e,e=e.return;while(e);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Te=Object.prototype.hasOwnProperty,le=r.unstable_scheduleCallback,qn=r.unstable_cancelCallback,ir=r.unstable_shouldYield,rr=r.unstable_requestPaint,Xe=r.unstable_now,ji=r.unstable_getCurrentPriorityLevel,Ar=r.unstable_ImmediatePriority,Hn=r.unstable_UserBlockingPriority,An=r.unstable_NormalPriority,Bi=r.unstable_LowPriority,wr=r.unstable_IdlePriority,Fn=r.log,Rr=r.unstable_setDisableYieldValue,Gn=null,qe=null;function mn(e){if(typeof Fn=="function"&&Rr(e),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(Gn,e)}catch{}}var be=Math.clz32?Math.clz32:ns,Cr=Math.log,qi=Math.LN2;function ns(e){return e>>>=0,e===0?32:31-(Cr(e)/qi|0)|0}var Zn=256,Hi=262144,Bt=4194304;function Se(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ae(e,i,a){var l=e.pendingLanes;if(l===0)return 0;var f=0,d=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?f=Se(l):(_&=b,_!==0?f=Se(_):a||(a=b&~e,a!==0&&(f=Se(a))))):(b=l&~d,b!==0?f=Se(b):_!==0?f=Se(_):a||(a=l&~e,a!==0&&(f=Se(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function Pe(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function gn(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ze(){var e=Bt;return Bt<<=1,(Bt&62914560)===0&&(Bt=4194304),e}function Me(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function K(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function he(e,i,a,l,f,d){var _=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var b=e.entanglements,D=e.expirationTimes,q=e.hiddenUpdates;for(a=_&~a;0<a;){var W=31-be(a),it=1<<W;b[W]=0,D[W]=-1;var G=q[W];if(G!==null)for(q[W]=null,W=0;W<G.length;W++){var Y=G[W];Y!==null&&(Y.lane&=-536870913)}a&=~it}l!==0&&fe(e,l,0),d!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=d&~(_&~i))}function fe(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var l=31-be(i);e.entangledLanes|=i,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function He(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var l=31-be(a),f=1<<l;f&i|e[l]&i&&(e[l]|=i),a&=~f}}function ot(e,i){var a=i&-i;return a=(a&42)!==0?1:ln(a),(a&(e.suspendedLanes|i))!==0?0:a}function ln(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function te(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ne(){var e=lt.p;return e!==0?e:(e=window.event,e===void 0?32:n0(e.type))}function un(e,i){var a=lt.p;try{return lt.p=e,i()}finally{lt.p=a}}var de=Math.random().toString(36).slice(2),Ve="__reactFiber$"+de,Fe="__reactProps$"+de,vt="__reactContainer$"+de,is="__reactEvents$"+de,Za="__reactListeners$"+de,Ja="__reactHandles$"+de,ha="__reactResources$"+de,Ti="__reactMarker$"+de;function rs(e){delete e[Ve],delete e[Fe],delete e[is],delete e[Za],delete e[Ja]}function bi(e){var i=e[Ve];if(i)return i;for(var a=e.parentNode;a;){if(i=a[vt]||a[Ve]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=jv(e);e!==null;){if(a=e[Ve])return a;e=jv(e)}return i}e=a,a=e.parentNode}return null}function Kn(e){if(e=e[Ve]||e[vt]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function Pn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function Si(e){var i=e[ha];return i||(i=e[ha]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Le(e){e[Ti]=!0}var fa=new Set,ss={};function Jn(e,i){Ai(e,i),Ai(e+"Capture",i)}function Ai(e,i){for(ss[e]=i,e=0;e<i.length;e++)fa.add(i[e])}var da=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),as={},ma={};function Je(e){return Te.call(ma,e)?!0:Te.call(as,e)?!1:da.test(e)?ma[e]=!0:(as[e]=!0,!1)}function L(e,i,a){if(Je(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function Q(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function H(e,i,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+l)}}function gt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bt(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Jt(e,i,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(e,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Ht(e){if(!e._valueTracker){var i=bt(e)?"checked":"value";e._valueTracker=Jt(e,i,""+e[i])}}function wi(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return e&&(l=bt(e)?e.checked?"true":"false":e.value),e=l,e!==a?(i.setValue(e),!0):!1}function sr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ga=/[\n"\\]/g;function Wn(e){return e.replace(ga,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Wa(e,i,a,l,f,d,_,b){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),i!=null?_==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+gt(i)):e.value!==""+gt(i)&&(e.value=""+gt(i)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),i!=null?ml(e,_,gt(i)):a!=null?ml(e,_,gt(a)):l!=null&&e.removeAttribute("value"),f==null&&d!=null&&(e.defaultChecked=!!d),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+gt(b):e.removeAttribute("name")}function Wu(e,i,a,l,f,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Ht(e);return}a=a!=null?""+gt(a):"",i=i!=null?""+gt(i):a,b||i===e.value||(e.value=i),e.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=b?e.checked:!!l,e.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_),Ht(e)}function ml(e,i,a){i==="number"&&sr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function os(e,i,a,l){if(e=e.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=i.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&l&&(e[a].defaultSelected=!0)}else{for(a=""+gt(a),i=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,l&&(e[f].defaultSelected=!0);return}i!==null||e[f].disabled||(i=e[f])}i!==null&&(i.selected=!0)}}function tc(e,i,a){if(i!=null&&(i=""+gt(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+gt(a):""}function ls(e,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(we(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=gt(i),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),Ht(e)}function ti(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var ec=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gl(e,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":l?e.setProperty(i,a):typeof a!="number"||a===0||ec.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function pl(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&gl(e,f,l)}else for(var d in i)i.hasOwnProperty(d)&&gl(e,d,i[d])}function to(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),us=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function eo(e){return us.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Fi(){}var yl=null;function Ri(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cs=null,ar=null;function pa(e){var i=Kn(e);if(i&&(e=i.stateNode)){var a=e[Fe]||null;t:switch(e=i.stateNode,i.type){case"input":if(Wa(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Wn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==e&&l.form===e.form){var f=l[Fe]||null;if(!f)throw Error(s(90));Wa(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===e.form&&wi(l)}break t;case"textarea":tc(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&os(e,!!a.multiple,i,!1)}}}var no=!1;function hs(e,i,a){if(no)return e(i,a);no=!0;try{var l=e(i);return l}finally{if(no=!1,(cs!==null||ar!==null)&&(Yc(),cs&&(i=cs,e=ar,ar=cs=null,pa(i),e)))for(i=0;i<e.length;i++)pa(e[i])}}function Gi(e,i){var a=e.stateNode;if(a===null)return null;var l=a[Fe]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ya=!1;if(Ci)try{var me={};Object.defineProperty(me,"passive",{get:function(){ya=!0}}),window.addEventListener("test",me,me),window.removeEventListener("test",me,me)}catch{ya=!1}var or=null,_l=null,_a=null;function vl(){if(_a)return _a;var e,i=_l,a=i.length,l,f="value"in or?or.value:or.textContent,d=f.length;for(e=0;e<a&&i[e]===f[e];e++);var _=a-e;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return _a=f.slice(e,1<l?1-l:void 0)}function va(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Ir(){return!0}function Ki(){return!1}function wn(e){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(a=e[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ir:Ki,this.isPropagationStopped=Ki,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ir)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ir)},persist:function(){},isPersistent:Ir}),i}var Dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lr=wn(Dr),fs=T({},Dr,{view:0,detail:0}),El=wn(fs),ds,io,ur,ro=T({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ms,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ur&&(ur&&e.type==="mousemove"?(ds=e.screenX-ur.screenX,io=e.screenY-ur.screenY):io=ds=0,ur=e),ds)},movementY:function(e){return"movementY"in e?e.movementY:io}}),Tl=wn(ro),Ea=T({},ro,{dataTransfer:0}),ic=wn(Ea),rc=T({},fs,{relatedTarget:0}),Ta=wn(rc),bl=T({},Dr,{animationName:0,elapsedTime:0,pseudoElement:0}),sc=wn(bl),so=T({},Dr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ac=wn(so),oc=T({},Dr,{data:0}),cr=wn(oc),lc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hc(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=cc[e])?!!i[e]:!1}function ms(){return hc}var Qn=T({},fs,{key:function(e){if(e.key){var i=lc[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=va(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?uc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ms,charCode:function(e){return e.type==="keypress"?va(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?va(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fc=wn(Qn),dc=T({},ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nr=wn(dc),c=T({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ms}),y=wn(c),v=T({},Dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=wn(v),z=T({},ro,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$=wn(z),ht=T({},Dr,{newState:0,oldState:0}),Ut=wn(ht),Ge=[9,13,27,32],se=Ci&&"CompositionEvent"in window,xe=null;Ci&&"documentMode"in document&&(xe=document.documentMode);var Ii=Ci&&"TextEvent"in window&&!xe,hr=Ci&&(!se||xe&&8<xe&&11>=xe),Qi=" ",$i=!1;function ba(e,i){switch(e){case"keyup":return Ge.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ao(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var oo=!1;function cS(e,i){switch(e){case"compositionend":return ao(i);case"keypress":return i.which!==32?null:($i=!0,Qi);case"textInput":return e=i.data,e===Qi&&$i?null:e;default:return null}}function hS(e,i){if(oo)return e==="compositionend"||!se&&ba(e,i)?(e=vl(),_a=_l=or=null,oo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return hr&&i.locale!=="ko"?null:i.data;default:return null}}var fS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hp(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!fS[e.type]:i==="textarea"}function Fp(e,i,a,l){cs?ar?ar.push(l):ar=[l]:cs=l,i=nh(i,"onChange"),0<i.length&&(a=new lr("onChange","change",null,a,l),e.push({event:a,listeners:i}))}var Sl=null,Al=null;function dS(e){Rv(e,0)}function mc(e){var i=Pn(e);if(wi(i))return e}function Gp(e,i){if(e==="change")return i}var Kp=!1;if(Ci){var Pf;if(Ci){var Lf="oninput"in document;if(!Lf){var Qp=document.createElement("div");Qp.setAttribute("oninput","return;"),Lf=typeof Qp.oninput=="function"}Pf=Lf}else Pf=!1;Kp=Pf&&(!document.documentMode||9<document.documentMode)}function $p(){Sl&&(Sl.detachEvent("onpropertychange",Yp),Al=Sl=null)}function Yp(e){if(e.propertyName==="value"&&mc(Al)){var i=[];Fp(i,Al,e,Ri(e)),hs(dS,i)}}function mS(e,i,a){e==="focusin"?($p(),Sl=i,Al=a,Sl.attachEvent("onpropertychange",Yp)):e==="focusout"&&$p()}function gS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mc(Al)}function pS(e,i){if(e==="click")return mc(i)}function yS(e,i){if(e==="input"||e==="change")return mc(i)}function _S(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var ui=typeof Object.is=="function"?Object.is:_S;function wl(e,i){if(ui(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Te.call(i,f)||!ui(e[f],i[f]))return!1}return!0}function Xp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zp(e,i){var a=Xp(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=i&&l>=i)return{node:a,offset:i-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Xp(a)}}function Jp(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Jp(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Wp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=sr(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=sr(e.document)}return i}function Uf(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var vS=Ci&&"documentMode"in document&&11>=document.documentMode,lo=null,zf=null,Rl=null,jf=!1;function ty(e,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;jf||lo==null||lo!==sr(l)||(l=lo,"selectionStart"in l&&Uf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Rl&&wl(Rl,l)||(Rl=l,l=nh(zf,"onSelect"),0<l.length&&(i=new lr("onSelect","select",null,i,a),e.push({event:i,listeners:l}),i.target=lo)))}function Sa(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var uo={animationend:Sa("Animation","AnimationEnd"),animationiteration:Sa("Animation","AnimationIteration"),animationstart:Sa("Animation","AnimationStart"),transitionrun:Sa("Transition","TransitionRun"),transitionstart:Sa("Transition","TransitionStart"),transitioncancel:Sa("Transition","TransitionCancel"),transitionend:Sa("Transition","TransitionEnd")},Bf={},ey={};Ci&&(ey=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function Aa(e){if(Bf[e])return Bf[e];if(!uo[e])return e;var i=uo[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in ey)return Bf[e]=i[a];return e}var ny=Aa("animationend"),iy=Aa("animationiteration"),ry=Aa("animationstart"),ES=Aa("transitionrun"),TS=Aa("transitionstart"),bS=Aa("transitioncancel"),sy=Aa("transitionend"),ay=new Map,qf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qf.push("scrollEnd");function Yi(e,i){ay.set(e,i),Jn(i,[e])}var gc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Di=[],co=0,Hf=0;function pc(){for(var e=co,i=Hf=co=0;i<e;){var a=Di[i];Di[i++]=null;var l=Di[i];Di[i++]=null;var f=Di[i];Di[i++]=null;var d=Di[i];if(Di[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&oy(a,f,d)}}function yc(e,i,a,l){Di[co++]=e,Di[co++]=i,Di[co++]=a,Di[co++]=l,Hf|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Ff(e,i,a,l){return yc(e,i,a,l),_c(e)}function wa(e,i){return yc(e,null,null,i),_c(e)}function oy(e,i,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(f=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,f&&i!==null&&(f=31-be(a),e=d.hiddenUpdates,l=e[f],l===null?e[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function _c(e){if(50<$l)throw $l=0,Wd=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var ho={};function SS(e,i,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ci(e,i,a,l){return new SS(e,i,a,l)}function Gf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xr(e,i){var a=e.alternate;return a===null?(a=ci(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function ly(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function vc(e,i,a,l,f,d){var _=0;if(l=e,typeof e=="function")Gf(e)&&(_=1);else if(typeof e=="string")_=IA(e,a,dt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case C:return e=ci(31,a,i,f),e.elementType=C,e.lanes=d,e;case U:return Ra(a.children,f,d,i);case B:_=8,f|=24;break;case st:return e=ci(12,a,i,f|2),e.elementType=st,e.lanes=d,e;case pt:return e=ci(13,a,i,f),e.elementType=pt,e.lanes=d,e;case ft:return e=ci(19,a,i,f),e.elementType=ft,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case at:_=10;break t;case ct:_=9;break t;case yt:_=11;break t;case R:_=14;break t;case w:_=16,l=null;break t}_=29,a=Error(s(130,e===null?"null":typeof e,"")),l=null}return i=ci(_,a,i,f),i.elementType=e,i.type=l,i.lanes=d,i}function Ra(e,i,a,l){return e=ci(7,e,l,i),e.lanes=a,e}function Kf(e,i,a){return e=ci(6,e,null,i),e.lanes=a,e}function uy(e){var i=ci(18,null,null,0);return i.stateNode=e,i}function Qf(e,i,a){return i=ci(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var cy=new WeakMap;function Ni(e,i){if(typeof e=="object"&&e!==null){var a=cy.get(e);return a!==void 0?a:(i={value:e,source:i,stack:zi(i)},cy.set(e,i),i)}return{value:e,source:i,stack:zi(i)}}var fo=[],mo=0,Ec=null,Cl=0,xi=[],Oi=0,gs=null,fr=1,dr="";function Or(e,i){fo[mo++]=Cl,fo[mo++]=Ec,Ec=e,Cl=i}function hy(e,i,a){xi[Oi++]=fr,xi[Oi++]=dr,xi[Oi++]=gs,gs=e;var l=fr;e=dr;var f=32-be(l)-1;l&=~(1<<f),a+=1;var d=32-be(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,fr=1<<32-be(i)+f|a<<f|l,dr=d+e}else fr=1<<d|a<<f|l,dr=e}function $f(e){e.return!==null&&(Or(e,1),hy(e,1,0))}function Yf(e){for(;e===Ec;)Ec=fo[--mo],fo[mo]=null,Cl=fo[--mo],fo[mo]=null;for(;e===gs;)gs=xi[--Oi],xi[Oi]=null,dr=xi[--Oi],xi[Oi]=null,fr=xi[--Oi],xi[Oi]=null}function fy(e,i){xi[Oi++]=fr,xi[Oi++]=dr,xi[Oi++]=gs,fr=i.id,dr=i.overflow,gs=e}var Rn=null,Re=null,Wt=!1,ps=null,Mi=!1,Xf=Error(s(519));function ys(e){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Il(Ni(i,e)),Xf}function dy(e){var i=e.stateNode,a=e.type,l=e.memoizedProps;switch(i[Ve]=e,i[Fe]=l,a){case"dialog":Gt("cancel",i),Gt("close",i);break;case"iframe":case"object":case"embed":Gt("load",i);break;case"video":case"audio":for(a=0;a<Xl.length;a++)Gt(Xl[a],i);break;case"source":Gt("error",i);break;case"img":case"image":case"link":Gt("error",i),Gt("load",i);break;case"details":Gt("toggle",i);break;case"input":Gt("invalid",i),Wu(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Gt("invalid",i);break;case"textarea":Gt("invalid",i),ls(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Nv(i.textContent,a)?(l.popover!=null&&(Gt("beforetoggle",i),Gt("toggle",i)),l.onScroll!=null&&Gt("scroll",i),l.onScrollEnd!=null&&Gt("scrollend",i),l.onClick!=null&&(i.onclick=Fi),i=!0):i=!1,i||ys(e,!0)}function my(e){for(Rn=e.return;Rn;)switch(Rn.tag){case 5:case 31:case 13:Mi=!1;return;case 27:case 3:Mi=!0;return;default:Rn=Rn.return}}function go(e){if(e!==Rn)return!1;if(!Wt)return my(e),Wt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||mm(e.type,e.memoizedProps)),a=!a),a&&Re&&ys(e),my(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Re=zv(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Re=zv(e)}else i===27?(i=Re,xs(e.type)?(e=vm,vm=null,Re=e):Re=i):Re=Rn?ki(e.stateNode.nextSibling):null;return!0}function Ca(){Re=Rn=null,Wt=!1}function Zf(){var e=ps;return e!==null&&(ri===null?ri=e:ri.push.apply(ri,e),ps=null),e}function Il(e){ps===null?ps=[e]:ps.push(e)}var Jf=M(null),Ia=null,Mr=null;function _s(e,i,a){ut(Jf,i._currentValue),i._currentValue=a}function Vr(e){e._currentValue=Jf.current,tt(Jf)}function Wf(e,i,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),e===a)break;e=e.return}}function td(e,i,a,l){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;t:for(;d!==null;){var b=d;d=f;for(var D=0;D<i.length;D++)if(b.context===i[D]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),Wf(d.return,a,e),l||(_=null);break t}d=b.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(s(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),Wf(_,a,e),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===e){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function po(e,i,a,l){e=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var b=f.type;ui(f.pendingProps.value,_.value)||(e!==null?e.push(b):e=[b])}}else if(f===Lt.current){if(_=f.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(eu):e=[eu])}f=f.return}e!==null&&td(i,e,a,l),i.flags|=262144}function Tc(e){for(e=e.firstContext;e!==null;){if(!ui(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Da(e){Ia=e,Mr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Cn(e){return gy(Ia,e)}function bc(e,i){return Ia===null&&Da(e),gy(e,i)}function gy(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Mr===null){if(e===null)throw Error(s(308));Mr=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Mr=Mr.next=i;return a}var AS=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},wS=r.unstable_scheduleCallback,RS=r.unstable_NormalPriority,We={$$typeof:at,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ed(){return{controller:new AS,data:new Map,refCount:0}}function Dl(e){e.refCount--,e.refCount===0&&wS(RS,function(){e.controller.abort()})}var Nl=null,nd=0,yo=0,_o=null;function CS(e,i){if(Nl===null){var a=Nl=[];nd=0,yo=sm(),_o={status:"pending",value:void 0,then:function(l){a.push(l)}}}return nd++,i.then(py,py),i}function py(){if(--nd===0&&Nl!==null){_o!==null&&(_o.status="fulfilled");var e=Nl;Nl=null,yo=0,_o=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function IS(e,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var yy=X.S;X.S=function(e,i){tv=Xe(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&CS(e,i),yy!==null&&yy(e,i)};var Na=M(null);function id(){var e=Na.current;return e!==null?e:ve.pooledCache}function Sc(e,i){i===null?ut(Na,Na.current):ut(Na,i.pool)}function _y(){var e=id();return e===null?null:{parent:We._currentValue,pool:e}}var vo=Error(s(460)),rd=Error(s(474)),Ac=Error(s(542)),wc={then:function(){}};function vy(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ey(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(Fi,Fi),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,by(e),e;default:if(typeof i.status=="string")i.then(Fi,Fi);else{if(e=ve,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,by(e),e}throw Oa=i,vo}}function xa(e){try{var i=e._init;return i(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Oa=a,vo):a}}var Oa=null;function Ty(){if(Oa===null)throw Error(s(459));var e=Oa;return Oa=null,e}function by(e){if(e===vo||e===Ac)throw Error(s(483))}var Eo=null,xl=0;function Rc(e){var i=xl;return xl+=1,Eo===null&&(Eo=[]),Ey(Eo,e,i)}function Ol(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Cc(e,i){throw i.$$typeof===S?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Sy(e){function i(P,V){if(e){var j=P.deletions;j===null?(P.deletions=[V],P.flags|=16):j.push(V)}}function a(P,V){if(!e)return null;for(;V!==null;)i(P,V),V=V.sibling;return null}function l(P){for(var V=new Map;P!==null;)P.key!==null?V.set(P.key,P):V.set(P.index,P),P=P.sibling;return V}function f(P,V){return P=xr(P,V),P.index=0,P.sibling=null,P}function d(P,V,j){return P.index=j,e?(j=P.alternate,j!==null?(j=j.index,j<V?(P.flags|=67108866,V):j):(P.flags|=67108866,V)):(P.flags|=1048576,V)}function _(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function b(P,V,j,et){return V===null||V.tag!==6?(V=Kf(j,P.mode,et),V.return=P,V):(V=f(V,j),V.return=P,V)}function D(P,V,j,et){var Rt=j.type;return Rt===U?W(P,V,j.props.children,et,j.key):V!==null&&(V.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===w&&xa(Rt)===V.type)?(V=f(V,j.props),Ol(V,j),V.return=P,V):(V=vc(j.type,j.key,j.props,null,P.mode,et),Ol(V,j),V.return=P,V)}function q(P,V,j,et){return V===null||V.tag!==4||V.stateNode.containerInfo!==j.containerInfo||V.stateNode.implementation!==j.implementation?(V=Qf(j,P.mode,et),V.return=P,V):(V=f(V,j.children||[]),V.return=P,V)}function W(P,V,j,et,Rt){return V===null||V.tag!==7?(V=Ra(j,P.mode,et,Rt),V.return=P,V):(V=f(V,j),V.return=P,V)}function it(P,V,j){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Kf(""+V,P.mode,j),V.return=P,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case N:return j=vc(V.type,V.key,V.props,null,P.mode,j),Ol(j,V),j.return=P,j;case F:return V=Qf(V,P.mode,j),V.return=P,V;case w:return V=xa(V),it(P,V,j)}if(we(V)||k(V))return V=Ra(V,P.mode,j,null),V.return=P,V;if(typeof V.then=="function")return it(P,Rc(V),j);if(V.$$typeof===at)return it(P,bc(P,V),j);Cc(P,V)}return null}function G(P,V,j,et){var Rt=V!==null?V.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return Rt!==null?null:b(P,V,""+j,et);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case N:return j.key===Rt?D(P,V,j,et):null;case F:return j.key===Rt?q(P,V,j,et):null;case w:return j=xa(j),G(P,V,j,et)}if(we(j)||k(j))return Rt!==null?null:W(P,V,j,et,null);if(typeof j.then=="function")return G(P,V,Rc(j),et);if(j.$$typeof===at)return G(P,V,bc(P,j),et);Cc(P,j)}return null}function Y(P,V,j,et,Rt){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return P=P.get(j)||null,b(V,P,""+et,Rt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case N:return P=P.get(et.key===null?j:et.key)||null,D(V,P,et,Rt);case F:return P=P.get(et.key===null?j:et.key)||null,q(V,P,et,Rt);case w:return et=xa(et),Y(P,V,j,et,Rt)}if(we(et)||k(et))return P=P.get(j)||null,W(V,P,et,Rt,null);if(typeof et.then=="function")return Y(P,V,j,Rc(et),Rt);if(et.$$typeof===at)return Y(P,V,j,bc(V,et),Rt);Cc(V,et)}return null}function Et(P,V,j,et){for(var Rt=null,ie=null,Tt=V,jt=V=0,$t=null;Tt!==null&&jt<j.length;jt++){Tt.index>jt?($t=Tt,Tt=null):$t=Tt.sibling;var re=G(P,Tt,j[jt],et);if(re===null){Tt===null&&(Tt=$t);break}e&&Tt&&re.alternate===null&&i(P,Tt),V=d(re,V,jt),ie===null?Rt=re:ie.sibling=re,ie=re,Tt=$t}if(jt===j.length)return a(P,Tt),Wt&&Or(P,jt),Rt;if(Tt===null){for(;jt<j.length;jt++)Tt=it(P,j[jt],et),Tt!==null&&(V=d(Tt,V,jt),ie===null?Rt=Tt:ie.sibling=Tt,ie=Tt);return Wt&&Or(P,jt),Rt}for(Tt=l(Tt);jt<j.length;jt++)$t=Y(Tt,P,jt,j[jt],et),$t!==null&&(e&&$t.alternate!==null&&Tt.delete($t.key===null?jt:$t.key),V=d($t,V,jt),ie===null?Rt=$t:ie.sibling=$t,ie=$t);return e&&Tt.forEach(function(Ps){return i(P,Ps)}),Wt&&Or(P,jt),Rt}function Dt(P,V,j,et){if(j==null)throw Error(s(151));for(var Rt=null,ie=null,Tt=V,jt=V=0,$t=null,re=j.next();Tt!==null&&!re.done;jt++,re=j.next()){Tt.index>jt?($t=Tt,Tt=null):$t=Tt.sibling;var Ps=G(P,Tt,re.value,et);if(Ps===null){Tt===null&&(Tt=$t);break}e&&Tt&&Ps.alternate===null&&i(P,Tt),V=d(Ps,V,jt),ie===null?Rt=Ps:ie.sibling=Ps,ie=Ps,Tt=$t}if(re.done)return a(P,Tt),Wt&&Or(P,jt),Rt;if(Tt===null){for(;!re.done;jt++,re=j.next())re=it(P,re.value,et),re!==null&&(V=d(re,V,jt),ie===null?Rt=re:ie.sibling=re,ie=re);return Wt&&Or(P,jt),Rt}for(Tt=l(Tt);!re.done;jt++,re=j.next())re=Y(Tt,P,jt,re.value,et),re!==null&&(e&&re.alternate!==null&&Tt.delete(re.key===null?jt:re.key),V=d(re,V,jt),ie===null?Rt=re:ie.sibling=re,ie=re);return e&&Tt.forEach(function(zA){return i(P,zA)}),Wt&&Or(P,jt),Rt}function ye(P,V,j,et){if(typeof j=="object"&&j!==null&&j.type===U&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case N:t:{for(var Rt=j.key;V!==null;){if(V.key===Rt){if(Rt=j.type,Rt===U){if(V.tag===7){a(P,V.sibling),et=f(V,j.props.children),et.return=P,P=et;break t}}else if(V.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===w&&xa(Rt)===V.type){a(P,V.sibling),et=f(V,j.props),Ol(et,j),et.return=P,P=et;break t}a(P,V);break}else i(P,V);V=V.sibling}j.type===U?(et=Ra(j.props.children,P.mode,et,j.key),et.return=P,P=et):(et=vc(j.type,j.key,j.props,null,P.mode,et),Ol(et,j),et.return=P,P=et)}return _(P);case F:t:{for(Rt=j.key;V!==null;){if(V.key===Rt)if(V.tag===4&&V.stateNode.containerInfo===j.containerInfo&&V.stateNode.implementation===j.implementation){a(P,V.sibling),et=f(V,j.children||[]),et.return=P,P=et;break t}else{a(P,V);break}else i(P,V);V=V.sibling}et=Qf(j,P.mode,et),et.return=P,P=et}return _(P);case w:return j=xa(j),ye(P,V,j,et)}if(we(j))return Et(P,V,j,et);if(k(j)){if(Rt=k(j),typeof Rt!="function")throw Error(s(150));return j=Rt.call(j),Dt(P,V,j,et)}if(typeof j.then=="function")return ye(P,V,Rc(j),et);if(j.$$typeof===at)return ye(P,V,bc(P,j),et);Cc(P,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,V!==null&&V.tag===6?(a(P,V.sibling),et=f(V,j),et.return=P,P=et):(a(P,V),et=Kf(j,P.mode,et),et.return=P,P=et),_(P)):a(P,V)}return function(P,V,j,et){try{xl=0;var Rt=ye(P,V,j,et);return Eo=null,Rt}catch(Tt){if(Tt===vo||Tt===Ac)throw Tt;var ie=ci(29,Tt,null,P.mode);return ie.lanes=et,ie.return=P,ie}}}var Ma=Sy(!0),Ay=Sy(!1),vs=!1;function sd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ad(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Es(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ts(e,i,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(ae&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=_c(e),oy(e,null,a),i}return yc(e,l,i,a),_c(e)}function Ml(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,He(e,a)}}function od(e,i){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var ld=!1;function Vl(){if(ld){var e=_o;if(e!==null)throw e}}function kl(e,i,a,l){ld=!1;var f=e.updateQueue;vs=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var D=b,q=D.next;D.next=null,_===null?d=q:_.next=q,_=D;var W=e.alternate;W!==null&&(W=W.updateQueue,b=W.lastBaseUpdate,b!==_&&(b===null?W.firstBaseUpdate=q:b.next=q,W.lastBaseUpdate=D))}if(d!==null){var it=f.baseState;_=0,W=q=D=null,b=d;do{var G=b.lane&-536870913,Y=G!==b.lane;if(Y?(Qt&G)===G:(l&G)===G){G!==0&&G===yo&&(ld=!0),W!==null&&(W=W.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var Et=e,Dt=b;G=i;var ye=a;switch(Dt.tag){case 1:if(Et=Dt.payload,typeof Et=="function"){it=Et.call(ye,it,G);break t}it=Et;break t;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=Dt.payload,G=typeof Et=="function"?Et.call(ye,it,G):Et,G==null)break t;it=T({},it,G);break t;case 2:vs=!0}}G=b.callback,G!==null&&(e.flags|=64,Y&&(e.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[G]:Y.push(G))}else Y={lane:G,tag:b.tag,payload:b.payload,callback:b.callback,next:null},W===null?(q=W=Y,D=it):W=W.next=Y,_|=G;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;Y=b,b=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);W===null&&(D=it),f.baseState=D,f.firstBaseUpdate=q,f.lastBaseUpdate=W,d===null&&(f.shared.lanes=0),Rs|=_,e.lanes=_,e.memoizedState=it}}function wy(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function Ry(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)wy(a[e],i)}var To=M(null),Ic=M(0);function Cy(e,i){e=Hr,ut(Ic,e),ut(To,i),Hr=e|i.baseLanes}function ud(){ut(Ic,Hr),ut(To,To.current)}function cd(){Hr=Ic.current,tt(To),tt(Ic)}var hi=M(null),Vi=null;function bs(e){var i=e.alternate;ut(Ke,Ke.current&1),ut(hi,e),Vi===null&&(i===null||To.current!==null||i.memoizedState!==null)&&(Vi=e)}function hd(e){ut(Ke,Ke.current),ut(hi,e),Vi===null&&(Vi=e)}function Iy(e){e.tag===22?(ut(Ke,Ke.current),ut(hi,e),Vi===null&&(Vi=e)):Ss()}function Ss(){ut(Ke,Ke.current),ut(hi,hi.current)}function fi(e){tt(hi),Vi===e&&(Vi=null),tt(Ke)}var Ke=M(0);function Dc(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ym(a)||_m(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var kr=0,zt=null,ge=null,tn=null,Nc=!1,bo=!1,Va=!1,xc=0,Pl=0,So=null,DS=0;function Ue(){throw Error(s(321))}function fd(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!ui(e[a],i[a]))return!1;return!0}function dd(e,i,a,l,f,d){return kr=d,zt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,X.H=e===null||e.memoizedState===null?h_:Id,Va=!1,d=a(l,f),Va=!1,bo&&(d=Ny(i,a,l,f)),Dy(e),d}function Dy(e){X.H=zl;var i=ge!==null&&ge.next!==null;if(kr=0,tn=ge=zt=null,Nc=!1,Pl=0,So=null,i)throw Error(s(300));e===null||en||(e=e.dependencies,e!==null&&Tc(e)&&(en=!0))}function Ny(e,i,a,l){zt=e;var f=0;do{if(bo&&(So=null),Pl=0,bo=!1,25<=f)throw Error(s(301));if(f+=1,tn=ge=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}X.H=f_,d=i(a,l)}while(bo);return d}function NS(){var e=X.H,i=e.useState()[0];return i=typeof i.then=="function"?Ll(i):i,e=e.useState()[0],(ge!==null?ge.memoizedState:null)!==e&&(zt.flags|=1024),i}function md(){var e=xc!==0;return xc=0,e}function gd(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function pd(e){if(Nc){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Nc=!1}kr=0,tn=ge=zt=null,bo=!1,Pl=xc=0,So=null}function $n(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?zt.memoizedState=tn=e:tn=tn.next=e,tn}function Qe(){if(ge===null){var e=zt.alternate;e=e!==null?e.memoizedState:null}else e=ge.next;var i=tn===null?zt.memoizedState:tn.next;if(i!==null)tn=i,ge=e;else{if(e===null)throw zt.alternate===null?Error(s(467)):Error(s(310));ge=e,e={memoizedState:ge.memoizedState,baseState:ge.baseState,baseQueue:ge.baseQueue,queue:ge.queue,next:null},tn===null?zt.memoizedState=tn=e:tn=tn.next=e}return tn}function Oc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ll(e){var i=Pl;return Pl+=1,So===null&&(So=[]),e=Ey(So,e,i),i=zt,(tn===null?i.memoizedState:tn.next)===null&&(i=i.alternate,X.H=i===null||i.memoizedState===null?h_:Id),e}function Mc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ll(e);if(e.$$typeof===at)return Cn(e)}throw Error(s(438,String(e)))}function yd(e){var i=null,a=zt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=zt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Oc(),zt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),l=0;l<e;l++)a[l]=O;return i.index++,a}function Pr(e,i){return typeof i=="function"?i(e):i}function Vc(e){var i=Qe();return _d(i,ge,e)}function _d(e,i,a){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=e.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=e.baseState,f===null)e.memoizedState=d;else{i=f.next;var b=_=null,D=null,q=i,W=!1;do{var it=q.lane&-536870913;if(it!==q.lane?(Qt&it)===it:(kr&it)===it){var G=q.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),it===yo&&(W=!0);else if((kr&G)===G){q=q.next,G===yo&&(W=!0);continue}else it={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(b=D=it,_=d):D=D.next=it,zt.lanes|=G,Rs|=G;it=q.action,Va&&a(d,it),d=q.hasEagerState?q.eagerState:a(d,it)}else G={lane:it,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(b=D=G,_=d):D=D.next=G,zt.lanes|=it,Rs|=it;q=q.next}while(q!==null&&q!==i);if(D===null?_=d:D.next=b,!ui(d,e.memoizedState)&&(en=!0,W&&(a=_o,a!==null)))throw a;e.memoizedState=d,e.baseState=_,e.baseQueue=D,l.lastRenderedState=d}return f===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function vd(e){var i=Qe(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=e(d,_.action),_=_.next;while(_!==f);ui(d,i.memoizedState)||(en=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function xy(e,i,a){var l=zt,f=Qe(),d=Wt;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var _=!ui((ge||f).memoizedState,a);if(_&&(f.memoizedState=a,en=!0),f=f.queue,bd(Vy.bind(null,l,f,e),[e]),f.getSnapshot!==i||_||tn!==null&&tn.memoizedState.tag&1){if(l.flags|=2048,Ao(9,{destroy:void 0},My.bind(null,l,f,a,i),null),ve===null)throw Error(s(349));d||(kr&127)!==0||Oy(l,i,a)}return a}function Oy(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=zt.updateQueue,i===null?(i=Oc(),zt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function My(e,i,a,l){i.value=a,i.getSnapshot=l,ky(i)&&Py(e)}function Vy(e,i,a){return a(function(){ky(i)&&Py(e)})}function ky(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!ui(e,a)}catch{return!0}}function Py(e){var i=wa(e,2);i!==null&&si(i,e,2)}function Ed(e){var i=$n();if(typeof e=="function"){var a=e;if(e=a(),Va){mn(!0);try{a()}finally{mn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pr,lastRenderedState:e},i}function Ly(e,i,a,l){return e.baseState=a,_d(e,ge,typeof l=="function"?l:Pr)}function xS(e,i,a,l,f){if(Lc(e))throw Error(s(485));if(e=i.action,e!==null){var d={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};X.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,Uy(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Uy(e,i){var a=i.action,l=i.payload,f=e.state;if(i.isTransition){var d=X.T,_={};X.T=_;try{var b=a(f,l),D=X.S;D!==null&&D(_,b),zy(e,i,b)}catch(q){Td(e,i,q)}finally{d!==null&&_.types!==null&&(d.types=_.types),X.T=d}}else try{d=a(f,l),zy(e,i,d)}catch(q){Td(e,i,q)}}function zy(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){jy(e,i,l)},function(l){return Td(e,i,l)}):jy(e,i,a)}function jy(e,i,a){i.status="fulfilled",i.value=a,By(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,Uy(e,a)))}function Td(e,i,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,By(i),i=i.next;while(i!==l)}e.action=null}function By(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function qy(e,i){return i}function Hy(e,i){if(Wt){var a=ve.formState;if(a!==null){t:{var l=zt;if(Wt){if(Re){e:{for(var f=Re,d=Mi;f.nodeType!==8;){if(!d){f=null;break e}if(f=ki(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){Re=ki(f.nextSibling),l=f.data==="F!";break t}}ys(l)}l=!1}l&&(i=a[0])}}return a=$n(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qy,lastRenderedState:i},a.queue=l,a=l_.bind(null,zt,l),l.dispatch=a,l=Ed(!1),d=Cd.bind(null,zt,!1,l.queue),l=$n(),f={state:i,dispatch:null,action:e,pending:null},l.queue=f,a=xS.bind(null,zt,f,d,a),f.dispatch=a,l.memoizedState=e,[i,a,!1]}function Fy(e){var i=Qe();return Gy(i,ge,e)}function Gy(e,i,a){if(i=_d(e,i,qy)[0],e=Vc(Pr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Ll(i)}catch(_){throw _===vo?Ac:_}else l=i;i=Qe();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(zt.flags|=2048,Ao(9,{destroy:void 0},OS.bind(null,f,a),null)),[l,d,e]}function OS(e,i){e.action=i}function Ky(e){var i=Qe(),a=ge;if(a!==null)return Gy(i,a,e);Qe(),i=i.memoizedState,a=Qe();var l=a.queue.dispatch;return a.memoizedState=e,[i,l,!1]}function Ao(e,i,a,l){return e={tag:e,create:a,deps:l,inst:i,next:null},i=zt.updateQueue,i===null&&(i=Oc(),zt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,i.lastEffect=e),e}function Qy(){return Qe().memoizedState}function kc(e,i,a,l){var f=$n();zt.flags|=e,f.memoizedState=Ao(1|i,{destroy:void 0},a,l===void 0?null:l)}function Pc(e,i,a,l){var f=Qe();l=l===void 0?null:l;var d=f.memoizedState.inst;ge!==null&&l!==null&&fd(l,ge.memoizedState.deps)?f.memoizedState=Ao(i,d,a,l):(zt.flags|=e,f.memoizedState=Ao(1|i,d,a,l))}function $y(e,i){kc(8390656,8,e,i)}function bd(e,i){Pc(2048,8,e,i)}function MS(e){zt.flags|=4;var i=zt.updateQueue;if(i===null)i=Oc(),zt.updateQueue=i,i.events=[e];else{var a=i.events;a===null?i.events=[e]:a.push(e)}}function Yy(e){var i=Qe().memoizedState;return MS({ref:i,nextImpl:e}),function(){if((ae&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Xy(e,i){return Pc(4,2,e,i)}function Zy(e,i){return Pc(4,4,e,i)}function Jy(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Wy(e,i,a){a=a!=null?a.concat([e]):null,Pc(4,4,Jy.bind(null,i,e),a)}function Sd(){}function t_(e,i){var a=Qe();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&fd(i,l[1])?l[0]:(a.memoizedState=[e,i],e)}function e_(e,i){var a=Qe();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&fd(i,l[1]))return l[0];if(l=e(),Va){mn(!0);try{e()}finally{mn(!1)}}return a.memoizedState=[l,i],l}function Ad(e,i,a){return a===void 0||(kr&1073741824)!==0&&(Qt&261930)===0?e.memoizedState=i:(e.memoizedState=a,e=nv(),zt.lanes|=e,Rs|=e,a)}function n_(e,i,a,l){return ui(a,i)?a:To.current!==null?(e=Ad(e,a,l),ui(e,i)||(en=!0),e):(kr&42)===0||(kr&1073741824)!==0&&(Qt&261930)===0?(en=!0,e.memoizedState=a):(e=nv(),zt.lanes|=e,Rs|=e,i)}function i_(e,i,a,l,f){var d=lt.p;lt.p=d!==0&&8>d?d:8;var _=X.T,b={};X.T=b,Cd(e,!1,i,a);try{var D=f(),q=X.S;if(q!==null&&q(b,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var W=IS(D,l);Ul(e,i,W,gi(e))}else Ul(e,i,l,gi(e))}catch(it){Ul(e,i,{then:function(){},status:"rejected",reason:it},gi())}finally{lt.p=d,_!==null&&b.types!==null&&(_.types=b.types),X.T=_}}function VS(){}function wd(e,i,a,l){if(e.tag!==5)throw Error(s(476));var f=r_(e).queue;i_(e,f,i,St,a===null?VS:function(){return s_(e),a(l)})}function r_(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:St,baseState:St,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pr,lastRenderedState:St},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pr,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function s_(e){var i=r_(e);i.next===null&&(i=e.alternate.memoizedState),Ul(e,i.next.queue,{},gi())}function Rd(){return Cn(eu)}function a_(){return Qe().memoizedState}function o_(){return Qe().memoizedState}function kS(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=gi();e=Es(a);var l=Ts(i,e,a);l!==null&&(si(l,i,a),Ml(l,i,a)),i={cache:ed()},e.payload=i;return}i=i.return}}function PS(e,i,a){var l=gi();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Lc(e)?u_(i,a):(a=Ff(e,i,a,l),a!==null&&(si(a,e,l),c_(a,i,l)))}function l_(e,i,a){var l=gi();Ul(e,i,a,l)}function Ul(e,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Lc(e))u_(i,f);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,b=d(_,a);if(f.hasEagerState=!0,f.eagerState=b,ui(b,_))return yc(e,i,f,0),ve===null&&pc(),!1}catch{}if(a=Ff(e,i,f,l),a!==null)return si(a,e,l),c_(a,i,l),!0}return!1}function Cd(e,i,a,l){if(l={lane:2,revertLane:sm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Lc(e)){if(i)throw Error(s(479))}else i=Ff(e,a,l,2),i!==null&&si(i,e,2)}function Lc(e){var i=e.alternate;return e===zt||i!==null&&i===zt}function u_(e,i){bo=Nc=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function c_(e,i,a){if((a&4194048)!==0){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,He(e,a)}}var zl={readContext:Cn,use:Mc,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useLayoutEffect:Ue,useInsertionEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useSyncExternalStore:Ue,useId:Ue,useHostTransitionStatus:Ue,useFormState:Ue,useActionState:Ue,useOptimistic:Ue,useMemoCache:Ue,useCacheRefresh:Ue};zl.useEffectEvent=Ue;var h_={readContext:Cn,use:Mc,useCallback:function(e,i){return $n().memoizedState=[e,i===void 0?null:i],e},useContext:Cn,useEffect:$y,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,kc(4194308,4,Jy.bind(null,i,e),a)},useLayoutEffect:function(e,i){return kc(4194308,4,e,i)},useInsertionEffect:function(e,i){kc(4,2,e,i)},useMemo:function(e,i){var a=$n();i=i===void 0?null:i;var l=e();if(Va){mn(!0);try{e()}finally{mn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(e,i,a){var l=$n();if(a!==void 0){var f=a(i);if(Va){mn(!0);try{a(i)}finally{mn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},l.queue=e,e=e.dispatch=PS.bind(null,zt,e),[l.memoizedState,e]},useRef:function(e){var i=$n();return e={current:e},i.memoizedState=e},useState:function(e){e=Ed(e);var i=e.queue,a=l_.bind(null,zt,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Sd,useDeferredValue:function(e,i){var a=$n();return Ad(a,e,i)},useTransition:function(){var e=Ed(!1);return e=i_.bind(null,zt,e.queue,!0,!1),$n().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var l=zt,f=$n();if(Wt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),ve===null)throw Error(s(349));(Qt&127)!==0||Oy(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,$y(Vy.bind(null,l,d,e),[e]),l.flags|=2048,Ao(9,{destroy:void 0},My.bind(null,l,d,a,i),null),a},useId:function(){var e=$n(),i=ve.identifierPrefix;if(Wt){var a=dr,l=fr;a=(l&~(1<<32-be(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=xc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=DS++,i="_"+i+"r_"+a.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:Rd,useFormState:Hy,useActionState:Hy,useOptimistic:function(e){var i=$n();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Cd.bind(null,zt,!0,a),a.dispatch=i,[e,i]},useMemoCache:yd,useCacheRefresh:function(){return $n().memoizedState=kS.bind(null,zt)},useEffectEvent:function(e){var i=$n(),a={impl:e};return i.memoizedState=a,function(){if((ae&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Id={readContext:Cn,use:Mc,useCallback:t_,useContext:Cn,useEffect:bd,useImperativeHandle:Wy,useInsertionEffect:Xy,useLayoutEffect:Zy,useMemo:e_,useReducer:Vc,useRef:Qy,useState:function(){return Vc(Pr)},useDebugValue:Sd,useDeferredValue:function(e,i){var a=Qe();return n_(a,ge.memoizedState,e,i)},useTransition:function(){var e=Vc(Pr)[0],i=Qe().memoizedState;return[typeof e=="boolean"?e:Ll(e),i]},useSyncExternalStore:xy,useId:a_,useHostTransitionStatus:Rd,useFormState:Fy,useActionState:Fy,useOptimistic:function(e,i){var a=Qe();return Ly(a,ge,e,i)},useMemoCache:yd,useCacheRefresh:o_};Id.useEffectEvent=Yy;var f_={readContext:Cn,use:Mc,useCallback:t_,useContext:Cn,useEffect:bd,useImperativeHandle:Wy,useInsertionEffect:Xy,useLayoutEffect:Zy,useMemo:e_,useReducer:vd,useRef:Qy,useState:function(){return vd(Pr)},useDebugValue:Sd,useDeferredValue:function(e,i){var a=Qe();return ge===null?Ad(a,e,i):n_(a,ge.memoizedState,e,i)},useTransition:function(){var e=vd(Pr)[0],i=Qe().memoizedState;return[typeof e=="boolean"?e:Ll(e),i]},useSyncExternalStore:xy,useId:a_,useHostTransitionStatus:Rd,useFormState:Ky,useActionState:Ky,useOptimistic:function(e,i){var a=Qe();return ge!==null?Ly(a,ge,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:yd,useCacheRefresh:o_};f_.useEffectEvent=Yy;function Dd(e,i,a,l){i=e.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Nd={enqueueSetState:function(e,i,a){e=e._reactInternals;var l=gi(),f=Es(l);f.payload=i,a!=null&&(f.callback=a),i=Ts(e,f,l),i!==null&&(si(i,e,l),Ml(i,e,l))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var l=gi(),f=Es(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Ts(e,f,l),i!==null&&(si(i,e,l),Ml(i,e,l))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=gi(),l=Es(a);l.tag=2,i!=null&&(l.callback=i),i=Ts(e,l,a),i!==null&&(si(i,e,a),Ml(i,e,a))}};function d_(e,i,a,l,f,d,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!wl(a,l)||!wl(f,d):!0}function m_(e,i,a,l){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==e&&Nd.enqueueReplaceState(i,i.state,null)}function ka(e,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(e=e.defaultProps){a===i&&(a=T({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}function g_(e){gc(e)}function p_(e){console.error(e)}function y_(e){gc(e)}function Uc(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function __(e,i,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function xd(e,i,a){return a=Es(a),a.tag=3,a.payload={element:null},a.callback=function(){Uc(e,i)},a}function v_(e){return e=Es(e),e.tag=3,e}function E_(e,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;e.payload=function(){return f(d)},e.callback=function(){__(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){__(i,a,l),typeof f!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function LS(e,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&po(i,a,f,!0),a=hi.current,a!==null){switch(a.tag){case 31:case 13:return Vi===null?Xc():a.alternate===null&&ze===0&&(ze=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===wc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),nm(e,l,f)),!1;case 22:return a.flags|=65536,l===wc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),nm(e,l,f)),!1}throw Error(s(435,a.tag))}return nm(e,l,f),Xc(),!1}if(Wt)return i=hi.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Xf&&(e=Error(s(422),{cause:l}),Il(Ni(e,a)))):(l!==Xf&&(i=Error(s(423),{cause:l}),Il(Ni(i,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,l=Ni(l,a),f=xd(e.stateNode,l,f),od(e,f),ze!==4&&(ze=2)),!1;var d=Error(s(520),{cause:l});if(d=Ni(d,a),Ql===null?Ql=[d]:Ql.push(d),ze!==4&&(ze=2),i===null)return!0;l=Ni(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=xd(a.stateNode,l,e),od(a,e),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Cs===null||!Cs.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=v_(f),E_(f,e,a,l),od(a,f),!1}a=a.return}while(a!==null);return!1}var Od=Error(s(461)),en=!1;function In(e,i,a,l){i.child=e===null?Ay(i,null,a,l):Ma(i,e.child,a,l)}function T_(e,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var b in l)b!=="ref"&&(_[b]=l[b])}else _=l;return Da(i),l=dd(e,i,a,_,d,f),b=md(),e!==null&&!en?(gd(e,i,f),Lr(e,i,f)):(Wt&&b&&$f(i),i.flags|=1,In(e,i,l,f),i.child)}function b_(e,i,a,l,f){if(e===null){var d=a.type;return typeof d=="function"&&!Gf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,S_(e,i,d,l,f)):(e=vc(a.type,null,l,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!jd(e,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:wl,a(_,l)&&e.ref===i.ref)return Lr(e,i,f)}return i.flags|=1,e=xr(d,l),e.ref=i.ref,e.return=i,i.child=e}function S_(e,i,a,l,f){if(e!==null){var d=e.memoizedProps;if(wl(d,l)&&e.ref===i.ref)if(en=!1,i.pendingProps=l=d,jd(e,f))(e.flags&131072)!==0&&(en=!0);else return i.lanes=e.lanes,Lr(e,i,f)}return Md(e,i,a,l,f)}function A_(e,i,a,l){var f=l.children,d=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(l=i.child=e.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return w_(e,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Sc(i,d!==null?d.cachePool:null),d!==null?Cy(i,d):ud(),Iy(i);else return l=i.lanes=536870912,w_(e,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Sc(i,d.cachePool),Cy(i,d),Ss(),i.memoizedState=null):(e!==null&&Sc(i,null),ud(),Ss());return In(e,i,f,a),i.child}function jl(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function w_(e,i,a,l,f){var d=id();return d=d===null?null:{parent:We._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},e!==null&&Sc(i,null),ud(),Iy(i),e!==null&&po(e,i,l,!0),i.childLanes=f,null}function zc(e,i){return i=Bc({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function R_(e,i,a){return Ma(i,e.child,null,a),e=zc(i,i.pendingProps),e.flags|=2,fi(i),i.memoizedState=null,e}function US(e,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Wt){if(l.mode==="hidden")return e=zc(i,l),i.lanes=536870912,jl(null,e);if(hd(i),(e=Re)?(e=Uv(e,Mi),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:gs!==null?{id:fr,overflow:dr}:null,retryLane:536870912,hydrationErrors:null},a=uy(e),a.return=i,i.child=a,Rn=i,Re=null)):e=null,e===null)throw ys(i);return i.lanes=536870912,null}return zc(i,l)}var d=e.memoizedState;if(d!==null){var _=d.dehydrated;if(hd(i),f)if(i.flags&256)i.flags&=-257,i=R_(e,i,a);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(s(558));else if(en||po(e,i,a,!1),f=(a&e.childLanes)!==0,en||f){if(l=ve,l!==null&&(_=ot(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,wa(e,_),si(l,e,_),Od;Xc(),i=R_(e,i,a)}else e=d.treeContext,Re=ki(_.nextSibling),Rn=i,Wt=!0,ps=null,Mi=!1,e!==null&&fy(i,e),i=zc(i,l),i.flags|=4096;return i}return e=xr(e.child,{mode:l.mode,children:l.children}),e.ref=i.ref,i.child=e,e.return=i,e}function jc(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Md(e,i,a,l,f){return Da(i),a=dd(e,i,a,l,void 0,f),l=md(),e!==null&&!en?(gd(e,i,f),Lr(e,i,f)):(Wt&&l&&$f(i),i.flags|=1,In(e,i,a,f),i.child)}function C_(e,i,a,l,f,d){return Da(i),i.updateQueue=null,a=Ny(i,l,a,f),Dy(e),l=md(),e!==null&&!en?(gd(e,i,d),Lr(e,i,d)):(Wt&&l&&$f(i),i.flags|=1,In(e,i,a,d),i.child)}function I_(e,i,a,l,f){if(Da(i),i.stateNode===null){var d=ho,_=a.contextType;typeof _=="object"&&_!==null&&(d=Cn(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Nd,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},sd(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?Cn(_):ho,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Dd(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Nd.enqueueReplaceState(d,d.state,null),kl(i,l,d,f),Vl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(e===null){d=i.stateNode;var b=i.memoizedProps,D=ka(a,b);d.props=D;var q=d.context,W=a.contextType;_=ho,typeof W=="object"&&W!==null&&(_=Cn(W));var it=a.getDerivedStateFromProps;W=typeof it=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,W||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||q!==_)&&m_(i,d,l,_),vs=!1;var G=i.memoizedState;d.state=G,kl(i,l,d,f),Vl(),q=i.memoizedState,b||G!==q||vs?(typeof it=="function"&&(Dd(i,a,it,l),q=i.memoizedState),(D=vs||d_(i,a,D,l,G,q,_))?(W||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=q),d.props=l,d.state=q,d.context=_,l=D):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,ad(e,i),_=i.memoizedProps,W=ka(a,_),d.props=W,it=i.pendingProps,G=d.context,q=a.contextType,D=ho,typeof q=="object"&&q!==null&&(D=Cn(q)),b=a.getDerivedStateFromProps,(q=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==it||G!==D)&&m_(i,d,l,D),vs=!1,G=i.memoizedState,d.state=G,kl(i,l,d,f),Vl();var Y=i.memoizedState;_!==it||G!==Y||vs||e!==null&&e.dependencies!==null&&Tc(e.dependencies)?(typeof b=="function"&&(Dd(i,a,b,l),Y=i.memoizedState),(W=vs||d_(i,a,W,l,G,Y,D)||e!==null&&e.dependencies!==null&&Tc(e.dependencies))?(q||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,Y,D),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,Y,D)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===e.memoizedProps&&G===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&G===e.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=Y),d.props=l,d.state=Y,d.context=D,l=W):(typeof d.componentDidUpdate!="function"||_===e.memoizedProps&&G===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&G===e.memoizedState||(i.flags|=1024),l=!1)}return d=l,jc(e,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&l?(i.child=Ma(i,e.child,null,f),i.child=Ma(i,null,a,f)):In(e,i,a,f),i.memoizedState=d.state,e=i.child):e=Lr(e,i,f),e}function D_(e,i,a,l){return Ca(),i.flags|=256,In(e,i,a,l),i.child}var Vd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kd(e){return{baseLanes:e,cachePool:_y()}}function Pd(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=mi),e}function N_(e,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=e!==null&&e.memoizedState===null?!1:(Ke.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,e===null){if(Wt){if(f?bs(i):Ss(),(e=Re)?(e=Uv(e,Mi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:gs!==null?{id:fr,overflow:dr}:null,retryLane:536870912,hydrationErrors:null},a=uy(e),a.return=i,i.child=a,Rn=i,Re=null)):e=null,e===null)throw ys(i);return _m(e)?i.lanes=32:i.lanes=536870912,null}var b=l.children;return l=l.fallback,f?(Ss(),f=i.mode,b=Bc({mode:"hidden",children:b},f),l=Ra(l,f,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,l=i.child,l.memoizedState=kd(a),l.childLanes=Pd(e,_,a),i.memoizedState=Vd,jl(null,l)):(bs(i),Ld(i,b))}var D=e.memoizedState;if(D!==null&&(b=D.dehydrated,b!==null)){if(d)i.flags&256?(bs(i),i.flags&=-257,i=Ud(e,i,a)):i.memoizedState!==null?(Ss(),i.child=e.child,i.flags|=128,i=null):(Ss(),b=l.fallback,f=i.mode,l=Bc({mode:"visible",children:l.children},f),b=Ra(b,f,a,null),b.flags|=2,l.return=i,b.return=i,l.sibling=b,i.child=l,Ma(i,e.child,null,a),l=i.child,l.memoizedState=kd(a),l.childLanes=Pd(e,_,a),i.memoizedState=Vd,i=jl(null,l));else if(bs(i),_m(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var q=_.dgst;_=q,l=Error(s(419)),l.stack="",l.digest=_,Il({value:l,source:null,stack:null}),i=Ud(e,i,a)}else if(en||po(e,i,a,!1),_=(a&e.childLanes)!==0,en||_){if(_=ve,_!==null&&(l=ot(_,a),l!==0&&l!==D.retryLane))throw D.retryLane=l,wa(e,l),si(_,e,l),Od;ym(b)||Xc(),i=Ud(e,i,a)}else ym(b)?(i.flags|=192,i.child=e.child,i=null):(e=D.treeContext,Re=ki(b.nextSibling),Rn=i,Wt=!0,ps=null,Mi=!1,e!==null&&fy(i,e),i=Ld(i,l.children),i.flags|=4096);return i}return f?(Ss(),b=l.fallback,f=i.mode,D=e.child,q=D.sibling,l=xr(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,q!==null?b=xr(q,b):(b=Ra(b,f,a,null),b.flags|=2),b.return=i,l.return=i,l.sibling=b,i.child=l,jl(null,l),l=i.child,b=e.child.memoizedState,b===null?b=kd(a):(f=b.cachePool,f!==null?(D=We._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=_y(),b={baseLanes:b.baseLanes|a,cachePool:f}),l.memoizedState=b,l.childLanes=Pd(e,_,a),i.memoizedState=Vd,jl(e.child,l)):(bs(i),a=e.child,e=a.sibling,a=xr(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,e!==null&&(_=i.deletions,_===null?(i.deletions=[e],i.flags|=16):_.push(e)),i.child=a,i.memoizedState=null,a)}function Ld(e,i){return i=Bc({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Bc(e,i){return e=ci(22,e,null,i),e.lanes=0,e}function Ud(e,i,a){return Ma(i,e.child,null,a),e=Ld(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function x_(e,i,a){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i),Wf(e.return,i,a)}function zd(e,i,a,l,f,d){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function O_(e,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=Ke.current,b=(_&2)!==0;if(b?(_=_&1|2,i.flags|=128):_&=1,ut(Ke,_),In(e,i,l,a),l=Wt?Cl:0,!b&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&x_(e,a,i);else if(e.tag===19)x_(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)e=a.alternate,e!==null&&Dc(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),zd(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&Dc(e)===null){i.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}zd(i,!0,a,null,d,l);break;case"together":zd(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Lr(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Rs|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(po(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=xr(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=xr(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function jd(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Tc(e)))}function zS(e,i,a){switch(i.tag){case 3:De(i,i.stateNode.containerInfo),_s(i,We,e.memoizedState.cache),Ca();break;case 27:case 5:Be(i);break;case 4:De(i,i.stateNode.containerInfo);break;case 10:_s(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,hd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(bs(i),i.flags|=128,null):(a&i.child.childLanes)!==0?N_(e,i,a):(bs(i),e=Lr(e,i,a),e!==null?e.sibling:null);bs(i);break;case 19:var f=(e.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(po(e,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return O_(e,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ut(Ke,Ke.current),l)break;return null;case 22:return i.lanes=0,A_(e,i,a,i.pendingProps);case 24:_s(i,We,e.memoizedState.cache)}return Lr(e,i,a)}function M_(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)en=!0;else{if(!jd(e,a)&&(i.flags&128)===0)return en=!1,zS(e,i,a);en=(e.flags&131072)!==0}else en=!1,Wt&&(i.flags&1048576)!==0&&hy(i,Cl,i.index);switch(i.lanes=0,i.tag){case 16:t:{var l=i.pendingProps;if(e=xa(i.elementType),i.type=e,typeof e=="function")Gf(e)?(l=ka(e,l),i.tag=1,i=I_(null,i,e,l,a)):(i.tag=0,i=Md(null,i,e,l,a));else{if(e!=null){var f=e.$$typeof;if(f===yt){i.tag=11,i=T_(null,i,e,l,a);break t}else if(f===R){i.tag=14,i=b_(null,i,e,l,a);break t}}throw i=qt(e)||e,Error(s(306,i,""))}}return i;case 0:return Md(e,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=ka(l,i.pendingProps),I_(e,i,l,f,a);case 3:t:{if(De(i,i.stateNode.containerInfo),e===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,ad(e,i),kl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,_s(i,We,l),l!==d.cache&&td(i,[We],a,!0),Vl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=D_(e,i,l,a);break t}else if(l!==f){f=Ni(Error(s(424)),i),Il(f),i=D_(e,i,l,a);break t}else for(e=i.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Re=ki(e.firstChild),Rn=i,Wt=!0,ps=null,Mi=!0,a=Ay(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ca(),l===f){i=Lr(e,i,a);break t}In(e,i,l,a)}i=i.child}return i;case 26:return jc(e,i),e===null?(a=Fv(i.type,null,i.pendingProps,null))?i.memoizedState=a:Wt||(a=i.type,e=i.pendingProps,l=ih(wt.current).createElement(a),l[Ve]=i,l[Fe]=e,Dn(l,a,e),Le(l),i.stateNode=l):i.memoizedState=Fv(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Be(i),e===null&&Wt&&(l=i.stateNode=Bv(i.type,i.pendingProps,wt.current),Rn=i,Mi=!0,f=Re,xs(i.type)?(vm=f,Re=ki(l.firstChild)):Re=f),In(e,i,i.pendingProps.children,a),jc(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Wt&&((f=l=Re)&&(l=gA(l,i.type,i.pendingProps,Mi),l!==null?(i.stateNode=l,Rn=i,Re=ki(l.firstChild),Mi=!1,f=!0):f=!1),f||ys(i)),Be(i),f=i.type,d=i.pendingProps,_=e!==null?e.memoizedProps:null,l=d.children,mm(f,d)?l=null:_!==null&&mm(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=dd(e,i,NS,null,null,a),eu._currentValue=f),jc(e,i),In(e,i,l,a),i.child;case 6:return e===null&&Wt&&((e=a=Re)&&(a=pA(a,i.pendingProps,Mi),a!==null?(i.stateNode=a,Rn=i,Re=null,e=!0):e=!1),e||ys(i)),null;case 13:return N_(e,i,a);case 4:return De(i,i.stateNode.containerInfo),l=i.pendingProps,e===null?i.child=Ma(i,null,l,a):In(e,i,l,a),i.child;case 11:return T_(e,i,i.type,i.pendingProps,a);case 7:return In(e,i,i.pendingProps,a),i.child;case 8:return In(e,i,i.pendingProps.children,a),i.child;case 12:return In(e,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,_s(i,i.type,l.value),In(e,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Da(i),f=Cn(f),l=l(f),i.flags|=1,In(e,i,l,a),i.child;case 14:return b_(e,i,i.type,i.pendingProps,a);case 15:return S_(e,i,i.type,i.pendingProps,a);case 19:return O_(e,i,a);case 31:return US(e,i,a);case 22:return A_(e,i,a,i.pendingProps);case 24:return Da(i),l=Cn(We),e===null?(f=id(),f===null&&(f=ve,d=ed(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},sd(i),_s(i,We,f)):((e.lanes&a)!==0&&(ad(e,i),kl(i,null,null,a),Vl()),f=e.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),_s(i,We,l)):(l=d.cache,_s(i,We,l),l!==f.cache&&td(i,[We],a,!0))),In(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Ur(e){e.flags|=4}function Bd(e,i,a,l,f){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(av())e.flags|=8192;else throw Oa=wc,rd}else e.flags&=-16777217}function V_(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Yv(i))if(av())e.flags|=8192;else throw Oa=wc,rd}function qc(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Ze():536870912,e.lanes|=i,Io|=i)}function Bl(e,i){if(!Wt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ce(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(i)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=l,e.childLanes=a,i}function jS(e,i,a){var l=i.pendingProps;switch(Yf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ce(i),null;case 1:return Ce(i),null;case 3:return a=i.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Vr(We),oe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(go(i)?Ur(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Zf())),Ce(i),null;case 26:var f=i.type,d=i.memoizedState;return e===null?(Ur(i),d!==null?(Ce(i),V_(i,d)):(Ce(i),Bd(i,f,null,l,a))):d?d!==e.memoizedState?(Ur(i),Ce(i),V_(i,d)):(Ce(i),i.flags&=-16777217):(e=e.memoizedProps,e!==l&&Ur(i),Ce(i),Bd(i,f,e,l,a)),null;case 27:if(Ei(i),a=wt.current,f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&Ur(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return Ce(i),null}e=dt.current,go(i)?dy(i):(e=Bv(f,l,a),i.stateNode=e,Ur(i))}return Ce(i),null;case 5:if(Ei(i),f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&Ur(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return Ce(i),null}if(d=dt.current,go(i))dy(i);else{var _=ih(wt.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[Ve]=i,d[Fe]=l;t:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break t;for(;_.sibling===null;){if(_.return===null||_.return===i)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;t:switch(Dn(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&Ur(i)}}return Ce(i),Bd(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,a),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==l&&Ur(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(e=wt.current,go(i)){if(e=i.stateNode,a=i.memoizedProps,l=null,f=Rn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}e[Ve]=i,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Nv(e.nodeValue,a)),e||ys(i,!0)}else e=ih(e).createTextNode(l),e[Ve]=i,i.stateNode=e}return Ce(i),null;case 31:if(a=i.memoizedState,e===null||e.memoizedState!==null){if(l=go(i),a!==null){if(e===null){if(!l)throw Error(s(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Ve]=i}else Ca(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ce(i),e=!1}else a=Zf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return i.flags&256?(fi(i),i):(fi(i),null);if((i.flags&128)!==0)throw Error(s(558))}return Ce(i),null;case 13:if(l=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=go(i),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Ve]=i}else Ca(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ce(i),f=!1}else f=Zf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(fi(i),i):(fi(i),null)}return fi(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==e&&a&&(i.child.flags|=8192),qc(i,i.updateQueue),Ce(i),null);case 4:return oe(),e===null&&um(i.stateNode.containerInfo),Ce(i),null;case 10:return Vr(i.type),Ce(i),null;case 19:if(tt(Ke),l=i.memoizedState,l===null)return Ce(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)Bl(l,!1);else{if(ze!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=Dc(e),d!==null){for(i.flags|=128,Bl(l,!1),e=d.updateQueue,i.updateQueue=e,qc(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)ly(a,e),a=a.sibling;return ut(Ke,Ke.current&1|2),Wt&&Or(i,l.treeForkCount),i.child}e=e.sibling}l.tail!==null&&Xe()>Qc&&(i.flags|=128,f=!0,Bl(l,!1),i.lanes=4194304)}else{if(!f)if(e=Dc(d),e!==null){if(i.flags|=128,f=!0,e=e.updateQueue,i.updateQueue=e,qc(i,e),Bl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Wt)return Ce(i),null}else 2*Xe()-l.renderingStartTime>Qc&&a!==536870912&&(i.flags|=128,f=!0,Bl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(e=l.last,e!==null?e.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Xe(),e.sibling=null,a=Ke.current,ut(Ke,f?a&1|2:a&1),Wt&&Or(i,l.treeForkCount),e):(Ce(i),null);case 22:case 23:return fi(i),cd(),l=i.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(Ce(i),i.subtreeFlags&6&&(i.flags|=8192)):Ce(i),a=i.updateQueue,a!==null&&qc(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),e!==null&&tt(Na),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Vr(We),Ce(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function BS(e,i){switch(Yf(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Vr(We),oe(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Ei(i),null;case 31:if(i.memoizedState!==null){if(fi(i),i.alternate===null)throw Error(s(340));Ca()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(fi(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Ca()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return tt(Ke),null;case 4:return oe(),null;case 10:return Vr(i.type),null;case 22:case 23:return fi(i),cd(),e!==null&&tt(Na),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Vr(We),null;case 25:return null;default:return null}}function k_(e,i){switch(Yf(i),i.tag){case 3:Vr(We),oe();break;case 26:case 27:case 5:Ei(i);break;case 4:oe();break;case 31:i.memoizedState!==null&&fi(i);break;case 13:fi(i);break;case 19:tt(Ke);break;case 10:Vr(i.type);break;case 22:case 23:fi(i),cd(),e!==null&&tt(Na);break;case 24:Vr(We)}}function ql(e,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&e)===e){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(b){ce(i,i.return,b)}}function As(e,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&e)===e){var _=l.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,f=i;var D=a,q=b;try{q()}catch(W){ce(f,D,W)}}}l=l.next}while(l!==d)}}catch(W){ce(i,i.return,W)}}function P_(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{Ry(i,a)}catch(l){ce(e,e.return,l)}}}function L_(e,i,a){a.props=ka(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){ce(e,i,l)}}function Hl(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(f){ce(e,i,f)}}function mr(e,i){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){ce(e,i,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ce(e,i,f)}else a.current=null}function U_(e){var i=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){ce(e,e.return,f)}}function qd(e,i,a){try{var l=e.stateNode;uA(l,e.type,a,i),l[Fe]=i}catch(f){ce(e,e.return,f)}}function z_(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&xs(e.type)||e.tag===4}function Hd(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||z_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&xs(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fd(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Fi));else if(l!==4&&(l===27&&xs(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(Fd(e,i,a),e=e.sibling;e!==null;)Fd(e,i,a),e=e.sibling}function Hc(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(l!==4&&(l===27&&xs(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Hc(e,i,a),e=e.sibling;e!==null;)Hc(e,i,a),e=e.sibling}function j_(e){var i=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Dn(i,l,a),i[Ve]=e,i[Fe]=a}catch(d){ce(e,e.return,d)}}var zr=!1,nn=!1,Gd=!1,B_=typeof WeakSet=="function"?WeakSet:Set,pn=null;function qS(e,i){if(e=e.containerInfo,fm=ch,e=Wp(e),Uf(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var _=0,b=-1,D=-1,q=0,W=0,it=e,G=null;e:for(;;){for(var Y;it!==a||f!==0&&it.nodeType!==3||(b=_+f),it!==d||l!==0&&it.nodeType!==3||(D=_+l),it.nodeType===3&&(_+=it.nodeValue.length),(Y=it.firstChild)!==null;)G=it,it=Y;for(;;){if(it===e)break e;if(G===a&&++q===f&&(b=_),G===d&&++W===l&&(D=_),(Y=it.nextSibling)!==null)break;it=G,G=it.parentNode}it=Y}a=b===-1||D===-1?null:{start:b,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(dm={focusedElem:e,selectionRange:a},ch=!1,pn=i;pn!==null;)if(i=pn,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,pn=e;else for(;pn!==null;){switch(i=pn,d=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)f=e[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Et=ka(a.type,f);e=l.getSnapshotBeforeUpdate(Et,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(Dt){ce(a,a.return,Dt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)pm(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":pm(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,pn=e;break}pn=i.return}}function q_(e,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Br(e,a),l&4&&ql(5,a);break;case 1:if(Br(e,a),l&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(_){ce(a,a.return,_)}else{var f=ka(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(f,i,e.__reactInternalSnapshotBeforeUpdate)}catch(_){ce(a,a.return,_)}}l&64&&P_(a),l&512&&Hl(a,a.return);break;case 3:if(Br(e,a),l&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Ry(e,i)}catch(_){ce(a,a.return,_)}}break;case 27:i===null&&l&4&&j_(a);case 26:case 5:Br(e,a),i===null&&l&4&&U_(a),l&512&&Hl(a,a.return);break;case 12:Br(e,a);break;case 31:Br(e,a),l&4&&G_(e,a);break;case 13:Br(e,a),l&4&&K_(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=ZS.bind(null,a),yA(e,a))));break;case 22:if(l=a.memoizedState!==null||zr,!l){i=i!==null&&i.memoizedState!==null||nn,f=zr;var d=nn;zr=l,(nn=i)&&!d?qr(e,a,(a.subtreeFlags&8772)!==0):Br(e,a),zr=f,nn=d}break;case 30:break;default:Br(e,a)}}function H_(e){var i=e.alternate;i!==null&&(e.alternate=null,H_(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&rs(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Oe=null,ei=!1;function jr(e,i,a){for(a=a.child;a!==null;)F_(e,i,a),a=a.sibling}function F_(e,i,a){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(Gn,a)}catch{}switch(a.tag){case 26:nn||mr(a,i),jr(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:nn||mr(a,i);var l=Oe,f=ei;xs(a.type)&&(Oe=a.stateNode,ei=!1),jr(e,i,a),Jl(a.stateNode),Oe=l,ei=f;break;case 5:nn||mr(a,i);case 6:if(l=Oe,f=ei,Oe=null,jr(e,i,a),Oe=l,ei=f,Oe!==null)if(ei)try{(Oe.nodeType===9?Oe.body:Oe.nodeName==="HTML"?Oe.ownerDocument.body:Oe).removeChild(a.stateNode)}catch(d){ce(a,i,d)}else try{Oe.removeChild(a.stateNode)}catch(d){ce(a,i,d)}break;case 18:Oe!==null&&(ei?(e=Oe,Pv(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Po(e)):Pv(Oe,a.stateNode));break;case 4:l=Oe,f=ei,Oe=a.stateNode.containerInfo,ei=!0,jr(e,i,a),Oe=l,ei=f;break;case 0:case 11:case 14:case 15:As(2,a,i),nn||As(4,a,i),jr(e,i,a);break;case 1:nn||(mr(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&L_(a,i,l)),jr(e,i,a);break;case 21:jr(e,i,a);break;case 22:nn=(l=nn)||a.memoizedState!==null,jr(e,i,a),nn=l;break;default:jr(e,i,a)}}function G_(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Po(e)}catch(a){ce(i,i.return,a)}}}function K_(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Po(e)}catch(a){ce(i,i.return,a)}}function HS(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new B_),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new B_),i;default:throw Error(s(435,e.tag))}}function Fc(e,i){var a=HS(e);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=JS.bind(null,e,l);l.then(f,f)}})}function ni(e,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=e,_=i,b=_;t:for(;b!==null;){switch(b.tag){case 27:if(xs(b.type)){Oe=b.stateNode,ei=!1;break t}break;case 5:Oe=b.stateNode,ei=!1;break t;case 3:case 4:Oe=b.stateNode.containerInfo,ei=!0;break t}b=b.return}if(Oe===null)throw Error(s(160));F_(d,_,f),Oe=null,ei=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Q_(i,e),i=i.sibling}var Xi=null;function Q_(e,i){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ni(i,e),ii(e),l&4&&(As(3,e,e.return),ql(3,e),As(5,e,e.return));break;case 1:ni(i,e),ii(e),l&512&&(nn||a===null||mr(a,a.return)),l&64&&zr&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=Xi;if(ni(i,e),ii(e),l&512&&(nn||a===null||mr(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Ti]||d[Ve]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Dn(d,l,a),d[Ve]=e,Le(d),l=d;break t;case"link":var _=Qv("link","href",f).get(l+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break e}}d=f.createElement(l),Dn(d,l,a),f.head.appendChild(d);break;case"meta":if(_=Qv("meta","content",f).get(l+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break e}}d=f.createElement(l),Dn(d,l,a),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[Ve]=e,Le(d),l=d}e.stateNode=l}else $v(f,e.type,e.stateNode);else e.stateNode=Kv(f,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?$v(f,e.type,e.stateNode):Kv(f,l,e.memoizedProps)):l===null&&e.stateNode!==null&&qd(e,e.memoizedProps,a.memoizedProps)}break;case 27:ni(i,e),ii(e),l&512&&(nn||a===null||mr(a,a.return)),a!==null&&l&4&&qd(e,e.memoizedProps,a.memoizedProps);break;case 5:if(ni(i,e),ii(e),l&512&&(nn||a===null||mr(a,a.return)),e.flags&32){f=e.stateNode;try{ti(f,"")}catch(Et){ce(e,e.return,Et)}}l&4&&e.stateNode!=null&&(f=e.memoizedProps,qd(e,f,a!==null?a.memoizedProps:f)),l&1024&&(Gd=!0);break;case 6:if(ni(i,e),ii(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(Et){ce(e,e.return,Et)}}break;case 3:if(ah=null,f=Xi,Xi=rh(i.containerInfo),ni(i,e),Xi=f,ii(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Po(i.containerInfo)}catch(Et){ce(e,e.return,Et)}Gd&&(Gd=!1,$_(e));break;case 4:l=Xi,Xi=rh(e.stateNode.containerInfo),ni(i,e),ii(e),Xi=l;break;case 12:ni(i,e),ii(e);break;case 31:ni(i,e),ii(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Fc(e,l)));break;case 13:ni(i,e),ii(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Kc=Xe()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Fc(e,l)));break;case 22:f=e.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,q=zr,W=nn;if(zr=q||f,nn=W||D,ni(i,e),nn=W,zr=q,ii(e),l&8192)t:for(i=e.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||D||zr||nn||Pa(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){D=a=i;try{if(d=D.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=D.stateNode;var it=D.memoizedProps.style,G=it!=null&&it.hasOwnProperty("display")?it.display:null;b.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Et){ce(D,D.return,Et)}}}else if(i.tag===6){if(a===null){D=i;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(Et){ce(D,D.return,Et)}}}else if(i.tag===18){if(a===null){D=i;try{var Y=D.stateNode;f?Lv(Y,!0):Lv(D.stateNode,!1)}catch(Et){ce(D,D.return,Et)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Fc(e,a))));break;case 19:ni(i,e),ii(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Fc(e,l)));break;case 30:break;case 21:break;default:ni(i,e),ii(e)}}function ii(e){var i=e.flags;if(i&2){try{for(var a,l=e.return;l!==null;){if(z_(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,d=Hd(e);Hc(e,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(ti(_,""),a.flags&=-33);var b=Hd(e);Hc(e,b,_);break;case 3:case 4:var D=a.stateNode.containerInfo,q=Hd(e);Fd(e,q,D);break;default:throw Error(s(161))}}catch(W){ce(e,e.return,W)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function $_(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;$_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function Br(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)q_(e,i.alternate,i),i=i.sibling}function Pa(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:As(4,i,i.return),Pa(i);break;case 1:mr(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&L_(i,i.return,a),Pa(i);break;case 27:Jl(i.stateNode);case 26:case 5:mr(i,i.return),Pa(i);break;case 22:i.memoizedState===null&&Pa(i);break;case 30:Pa(i);break;default:Pa(i)}e=e.sibling}}function qr(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=e,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:qr(f,d,a),ql(4,d);break;case 1:if(qr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(q){ce(l,l.return,q)}if(l=d,f=l.updateQueue,f!==null){var b=l.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)wy(D[f],b)}catch(q){ce(l,l.return,q)}}a&&_&64&&P_(d),Hl(d,d.return);break;case 27:j_(d);case 26:case 5:qr(f,d,a),a&&l===null&&_&4&&U_(d),Hl(d,d.return);break;case 12:qr(f,d,a);break;case 31:qr(f,d,a),a&&_&4&&G_(f,d);break;case 13:qr(f,d,a),a&&_&4&&K_(f,d);break;case 22:d.memoizedState===null&&qr(f,d,a),Hl(d,d.return);break;case 30:break;default:qr(f,d,a)}i=i.sibling}}function Kd(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Dl(a))}function Qd(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Dl(e))}function Zi(e,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Y_(e,i,a,l),i=i.sibling}function Y_(e,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Zi(e,i,a,l),f&2048&&ql(9,i);break;case 1:Zi(e,i,a,l);break;case 3:Zi(e,i,a,l),f&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Dl(e)));break;case 12:if(f&2048){Zi(e,i,a,l),e=i.stateNode;try{var d=i.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(D){ce(i,i.return,D)}}else Zi(e,i,a,l);break;case 31:Zi(e,i,a,l);break;case 13:Zi(e,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?Zi(e,i,a,l):Fl(e,i):d._visibility&2?Zi(e,i,a,l):(d._visibility|=2,wo(e,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Kd(_,i);break;case 24:Zi(e,i,a,l),f&2048&&Qd(i.alternate,i);break;default:Zi(e,i,a,l)}}function wo(e,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=e,_=i,b=a,D=l,q=_.flags;switch(_.tag){case 0:case 11:case 15:wo(d,_,b,D,f),ql(8,_);break;case 23:break;case 22:var W=_.stateNode;_.memoizedState!==null?W._visibility&2?wo(d,_,b,D,f):Fl(d,_):(W._visibility|=2,wo(d,_,b,D,f)),f&&q&2048&&Kd(_.alternate,_);break;case 24:wo(d,_,b,D,f),f&&q&2048&&Qd(_.alternate,_);break;default:wo(d,_,b,D,f)}i=i.sibling}}function Fl(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,l=i,f=l.flags;switch(l.tag){case 22:Fl(a,l),f&2048&&Kd(l.alternate,l);break;case 24:Fl(a,l),f&2048&&Qd(l.alternate,l);break;default:Fl(a,l)}i=i.sibling}}var Gl=8192;function Ro(e,i,a){if(e.subtreeFlags&Gl)for(e=e.child;e!==null;)X_(e,i,a),e=e.sibling}function X_(e,i,a){switch(e.tag){case 26:Ro(e,i,a),e.flags&Gl&&e.memoizedState!==null&&DA(a,Xi,e.memoizedState,e.memoizedProps);break;case 5:Ro(e,i,a);break;case 3:case 4:var l=Xi;Xi=rh(e.stateNode.containerInfo),Ro(e,i,a),Xi=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Gl,Gl=16777216,Ro(e,i,a),Gl=l):Ro(e,i,a));break;default:Ro(e,i,a)}}function Z_(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Kl(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];pn=l,W_(l,e)}Z_(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)J_(e),e=e.sibling}function J_(e){switch(e.tag){case 0:case 11:case 15:Kl(e),e.flags&2048&&As(9,e,e.return);break;case 3:Kl(e);break;case 12:Kl(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Gc(e)):Kl(e);break;default:Kl(e)}}function Gc(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];pn=l,W_(l,e)}Z_(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:As(8,i,i.return),Gc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Gc(i));break;default:Gc(i)}e=e.sibling}}function W_(e,i){for(;pn!==null;){var a=pn;switch(a.tag){case 0:case 11:case 15:As(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Dl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,pn=l;else t:for(a=e;pn!==null;){l=pn;var f=l.sibling,d=l.return;if(H_(l),l===a){pn=null;break t}if(f!==null){f.return=d,pn=f;break t}pn=d}}}var FS={getCacheForType:function(e){var i=Cn(We),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a},cacheSignal:function(){return Cn(We).controller.signal}},GS=typeof WeakMap=="function"?WeakMap:Map,ae=0,ve=null,Ft=null,Qt=0,ue=0,di=null,ws=!1,Co=!1,$d=!1,Hr=0,ze=0,Rs=0,La=0,Yd=0,mi=0,Io=0,Ql=null,ri=null,Xd=!1,Kc=0,tv=0,Qc=1/0,$c=null,Cs=null,cn=0,Is=null,Do=null,Fr=0,Zd=0,Jd=null,ev=null,$l=0,Wd=null;function gi(){return(ae&2)!==0&&Qt!==0?Qt&-Qt:X.T!==null?sm():Ne()}function nv(){if(mi===0)if((Qt&536870912)===0||Wt){var e=Hi;Hi<<=1,(Hi&3932160)===0&&(Hi=262144),mi=e}else mi=536870912;return e=hi.current,e!==null&&(e.flags|=32),mi}function si(e,i,a){(e===ve&&(ue===2||ue===9)||e.cancelPendingCommit!==null)&&(No(e,0),Ds(e,Qt,mi,!1)),K(e,a),((ae&2)===0||e!==ve)&&(e===ve&&((ae&2)===0&&(La|=a),ze===4&&Ds(e,Qt,mi,!1)),gr(e))}function iv(e,i,a){if((ae&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&e.expiredLanes)===0||Pe(e,i),f=l?$S(e,i):em(e,i,!0),d=l;do{if(f===0){Co&&!l&&Ds(e,i,0,!1);break}else{if(a=e.current.alternate,d&&!KS(a)){f=em(e,i,!1),d=!1;continue}if(f===2){if(d=i,e.errorRecoveryDisabledLanes&d)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;t:{var b=e;f=Ql;var D=b.current.memoizedState.isDehydrated;if(D&&(No(b,_).flags|=256),_=em(b,_,!1),_!==2){if($d&&!D){b.errorRecoveryDisabledLanes|=d,La|=d,f=4;break t}d=ri,ri=f,d!==null&&(ri===null?ri=d:ri.push.apply(ri,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){No(e,0),Ds(e,i,0,!0);break}t:{switch(l=e,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Ds(l,i,mi,!ws);break t;case 2:ri=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=Kc+300-Xe(),10<f)){if(Ds(l,i,mi,!ws),Ae(l,0,!0)!==0)break t;Fr=i,l.timeoutHandle=Vv(rv.bind(null,l,a,ri,$c,Xd,i,mi,La,Io,ws,d,"Throttled",-0,0),f);break t}rv(l,a,ri,$c,Xd,i,mi,La,Io,ws,d,null,-0,0)}}break}while(!0);gr(e)}function rv(e,i,a,l,f,d,_,b,D,q,W,it,G,Y){if(e.timeoutHandle=-1,it=i.subtreeFlags,it&8192||(it&16785408)===16785408){it={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fi},X_(i,d,it);var Et=(d&62914560)===d?Kc-Xe():(d&4194048)===d?tv-Xe():0;if(Et=NA(it,Et),Et!==null){Fr=d,e.cancelPendingCommit=Et(fv.bind(null,e,i,d,a,l,f,_,b,D,W,it,null,G,Y)),Ds(e,d,_,!q);return}}fv(e,i,d,a,l,f,_,b,D)}function KS(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!ui(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ds(e,i,a,l){i&=~Yd,i&=~La,e.suspendedLanes|=i,e.pingedLanes&=~i,l&&(e.warmLanes|=i),l=e.expirationTimes;for(var f=i;0<f;){var d=31-be(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&fe(e,a,i)}function Yc(){return(ae&6)===0?(Yl(0),!1):!0}function tm(){if(Ft!==null){if(ue===0)var e=Ft.return;else e=Ft,Mr=Ia=null,pd(e),Eo=null,xl=0,e=Ft;for(;e!==null;)k_(e.alternate,e),e=e.return;Ft=null}}function No(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,fA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Fr=0,tm(),ve=e,Ft=a=xr(e.current,null),Qt=i,ue=0,di=null,ws=!1,Co=Pe(e,i),$d=!1,Io=mi=Yd=La=Rs=ze=0,ri=Ql=null,Xd=!1,(i&8)!==0&&(i|=i&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=i;0<l;){var f=31-be(l),d=1<<f;i|=e[f],l&=~d}return Hr=i,pc(),a}function sv(e,i){zt=null,X.H=zl,i===vo||i===Ac?(i=Ty(),ue=3):i===rd?(i=Ty(),ue=4):ue=i===Od?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,di=i,Ft===null&&(ze=1,Uc(e,Ni(i,e.current)))}function av(){var e=hi.current;return e===null?!0:(Qt&4194048)===Qt?Vi===null:(Qt&62914560)===Qt||(Qt&536870912)!==0?e===Vi:!1}function ov(){var e=X.H;return X.H=zl,e===null?zl:e}function lv(){var e=X.A;return X.A=FS,e}function Xc(){ze=4,ws||(Qt&4194048)!==Qt&&hi.current!==null||(Co=!0),(Rs&134217727)===0&&(La&134217727)===0||ve===null||Ds(ve,Qt,mi,!1)}function em(e,i,a){var l=ae;ae|=2;var f=ov(),d=lv();(ve!==e||Qt!==i)&&($c=null,No(e,i)),i=!1;var _=ze;t:do try{if(ue!==0&&Ft!==null){var b=Ft,D=di;switch(ue){case 8:tm(),_=6;break t;case 3:case 2:case 9:case 6:hi.current===null&&(i=!0);var q=ue;if(ue=0,di=null,xo(e,b,D,q),a&&Co){_=0;break t}break;default:q=ue,ue=0,di=null,xo(e,b,D,q)}}QS(),_=ze;break}catch(W){sv(e,W)}while(!0);return i&&e.shellSuspendCounter++,Mr=Ia=null,ae=l,X.H=f,X.A=d,Ft===null&&(ve=null,Qt=0,pc()),_}function QS(){for(;Ft!==null;)uv(Ft)}function $S(e,i){var a=ae;ae|=2;var l=ov(),f=lv();ve!==e||Qt!==i?($c=null,Qc=Xe()+500,No(e,i)):Co=Pe(e,i);t:do try{if(ue!==0&&Ft!==null){i=Ft;var d=di;e:switch(ue){case 1:ue=0,di=null,xo(e,i,d,1);break;case 2:case 9:if(vy(d)){ue=0,di=null,cv(i);break}i=function(){ue!==2&&ue!==9||ve!==e||(ue=7),gr(e)},d.then(i,i);break t;case 3:ue=7;break t;case 4:ue=5;break t;case 7:vy(d)?(ue=0,di=null,cv(i)):(ue=0,di=null,xo(e,i,d,7));break;case 5:var _=null;switch(Ft.tag){case 26:_=Ft.memoizedState;case 5:case 27:var b=Ft;if(_?Yv(_):b.stateNode.complete){ue=0,di=null;var D=b.sibling;if(D!==null)Ft=D;else{var q=b.return;q!==null?(Ft=q,Zc(q)):Ft=null}break e}}ue=0,di=null,xo(e,i,d,5);break;case 6:ue=0,di=null,xo(e,i,d,6);break;case 8:tm(),ze=6;break t;default:throw Error(s(462))}}YS();break}catch(W){sv(e,W)}while(!0);return Mr=Ia=null,X.H=l,X.A=f,ae=a,Ft!==null?0:(ve=null,Qt=0,pc(),ze)}function YS(){for(;Ft!==null&&!ir();)uv(Ft)}function uv(e){var i=M_(e.alternate,e,Hr);e.memoizedProps=e.pendingProps,i===null?Zc(e):Ft=i}function cv(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=C_(a,i,i.pendingProps,i.type,void 0,Qt);break;case 11:i=C_(a,i,i.pendingProps,i.type.render,i.ref,Qt);break;case 5:pd(i);default:k_(a,i),i=Ft=ly(i,Hr),i=M_(a,i,Hr)}e.memoizedProps=e.pendingProps,i===null?Zc(e):Ft=i}function xo(e,i,a,l){Mr=Ia=null,pd(i),Eo=null,xl=0;var f=i.return;try{if(LS(e,f,i,a,Qt)){ze=1,Uc(e,Ni(a,e.current)),Ft=null;return}}catch(d){if(f!==null)throw Ft=f,d;ze=1,Uc(e,Ni(a,e.current)),Ft=null;return}i.flags&32768?(Wt||l===1?e=!0:Co||(Qt&536870912)!==0?e=!1:(ws=e=!0,(l===2||l===9||l===3||l===6)&&(l=hi.current,l!==null&&l.tag===13&&(l.flags|=16384))),hv(i,e)):Zc(i)}function Zc(e){var i=e;do{if((i.flags&32768)!==0){hv(i,ws);return}e=i.return;var a=jS(i.alternate,i,Hr);if(a!==null){Ft=a;return}if(i=i.sibling,i!==null){Ft=i;return}Ft=i=e}while(i!==null);ze===0&&(ze=5)}function hv(e,i){do{var a=BS(e.alternate,e);if(a!==null){a.flags&=32767,Ft=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Ft=e;return}Ft=e=a}while(e!==null);ze=6,Ft=null}function fv(e,i,a,l,f,d,_,b,D){e.cancelPendingCommit=null;do Jc();while(cn!==0);if((ae&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Hf,he(e,a,d,_,b,D),e===ve&&(Ft=ve=null,Qt=0),Do=i,Is=e,Fr=a,Zd=d,Jd=f,ev=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,WS(An,function(){return yv(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,f=lt.p,lt.p=2,_=ae,ae|=4;try{qS(e,i,a)}finally{ae=_,lt.p=f,X.T=l}}cn=1,dv(),mv(),gv()}}function dv(){if(cn===1){cn=0;var e=Is,i=Do,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var l=lt.p;lt.p=2;var f=ae;ae|=4;try{Q_(i,e);var d=dm,_=Wp(e.containerInfo),b=d.focusedElem,D=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&Jp(b.ownerDocument.documentElement,b)){if(D!==null&&Uf(b)){var q=D.start,W=D.end;if(W===void 0&&(W=q),"selectionStart"in b)b.selectionStart=q,b.selectionEnd=Math.min(W,b.value.length);else{var it=b.ownerDocument||document,G=it&&it.defaultView||window;if(G.getSelection){var Y=G.getSelection(),Et=b.textContent.length,Dt=Math.min(D.start,Et),ye=D.end===void 0?Dt:Math.min(D.end,Et);!Y.extend&&Dt>ye&&(_=ye,ye=Dt,Dt=_);var P=Zp(b,Dt),V=Zp(b,ye);if(P&&V&&(Y.rangeCount!==1||Y.anchorNode!==P.node||Y.anchorOffset!==P.offset||Y.focusNode!==V.node||Y.focusOffset!==V.offset)){var j=it.createRange();j.setStart(P.node,P.offset),Y.removeAllRanges(),Dt>ye?(Y.addRange(j),Y.extend(V.node,V.offset)):(j.setEnd(V.node,V.offset),Y.addRange(j))}}}}for(it=[],Y=b;Y=Y.parentNode;)Y.nodeType===1&&it.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<it.length;b++){var et=it[b];et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}ch=!!fm,dm=fm=null}finally{ae=f,lt.p=l,X.T=a}}e.current=i,cn=2}}function mv(){if(cn===2){cn=0;var e=Is,i=Do,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var l=lt.p;lt.p=2;var f=ae;ae|=4;try{q_(e,i.alternate,i)}finally{ae=f,lt.p=l,X.T=a}}cn=3}}function gv(){if(cn===4||cn===3){cn=0,rr();var e=Is,i=Do,a=Fr,l=ev;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?cn=5:(cn=0,Do=Is=null,pv(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Cs=null),te(a),i=i.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(Gn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=X.T,f=lt.p,lt.p=2,X.T=null;try{for(var d=e.onRecoverableError,_=0;_<l.length;_++){var b=l[_];d(b.value,{componentStack:b.stack})}}finally{X.T=i,lt.p=f}}(Fr&3)!==0&&Jc(),gr(e),f=e.pendingLanes,(a&261930)!==0&&(f&42)!==0?e===Wd?$l++:($l=0,Wd=e):$l=0,Yl(0)}}function pv(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Dl(i)))}function Jc(){return dv(),mv(),gv(),yv()}function yv(){if(cn!==5)return!1;var e=Is,i=Zd;Zd=0;var a=te(Fr),l=X.T,f=lt.p;try{lt.p=32>a?32:a,X.T=null,a=Jd,Jd=null;var d=Is,_=Fr;if(cn=0,Do=Is=null,Fr=0,(ae&6)!==0)throw Error(s(331));var b=ae;if(ae|=4,J_(d.current),Y_(d,d.current,_,a),ae=b,Yl(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(Gn,d)}catch{}return!0}finally{lt.p=f,X.T=l,pv(e,i)}}function _v(e,i,a){i=Ni(a,i),i=xd(e.stateNode,i,2),e=Ts(e,i,2),e!==null&&(K(e,2),gr(e))}function ce(e,i,a){if(e.tag===3)_v(e,e,a);else for(;i!==null;){if(i.tag===3){_v(i,e,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Cs===null||!Cs.has(l))){e=Ni(a,e),a=v_(2),l=Ts(i,a,2),l!==null&&(E_(a,l,i,e),K(l,2),gr(l));break}}i=i.return}}function nm(e,i,a){var l=e.pingCache;if(l===null){l=e.pingCache=new GS;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||($d=!0,f.add(a),e=XS.bind(null,e,i,a),i.then(e,e))}function XS(e,i,a){var l=e.pingCache;l!==null&&l.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ve===e&&(Qt&a)===a&&(ze===4||ze===3&&(Qt&62914560)===Qt&&300>Xe()-Kc?(ae&2)===0&&No(e,0):Yd|=a,Io===Qt&&(Io=0)),gr(e)}function vv(e,i){i===0&&(i=Ze()),e=wa(e,i),e!==null&&(K(e,i),gr(e))}function ZS(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),vv(e,a)}function JS(e,i){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),vv(e,a)}function WS(e,i){return le(e,i)}var Wc=null,Oo=null,im=!1,th=!1,rm=!1,Ns=0;function gr(e){e!==Oo&&e.next===null&&(Oo===null?Wc=Oo=e:Oo=Oo.next=e),th=!0,im||(im=!0,eA())}function Yl(e,i){if(!rm&&th){rm=!0;do for(var a=!1,l=Wc;l!==null;){if(e!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-be(42|e)+1)-1,d&=f&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Sv(l,d))}else d=Qt,d=Ae(l,l===ve?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Pe(l,d)||(a=!0,Sv(l,d));l=l.next}while(a);rm=!1}}function tA(){Ev()}function Ev(){th=im=!1;var e=0;Ns!==0&&hA()&&(e=Ns);for(var i=Xe(),a=null,l=Wc;l!==null;){var f=l.next,d=Tv(l,i);d===0?(l.next=null,a===null?Wc=f:a.next=f,f===null&&(Oo=a)):(a=l,(e!==0||(d&3)!==0)&&(th=!0)),l=f}cn!==0&&cn!==5||Yl(e),Ns!==0&&(Ns=0)}function Tv(e,i){for(var a=e.suspendedLanes,l=e.pingedLanes,f=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var _=31-be(d),b=1<<_,D=f[_];D===-1?((b&a)===0||(b&l)!==0)&&(f[_]=gn(b,i)):D<=i&&(e.expiredLanes|=b),d&=~b}if(i=ve,a=Qt,a=Ae(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===i&&(ue===2||ue===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&qn(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Pe(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(l!==null&&qn(l),te(a)){case 2:case 8:a=Hn;break;case 32:a=An;break;case 268435456:a=wr;break;default:a=An}return l=bv.bind(null,e),a=le(a,l),e.callbackPriority=i,e.callbackNode=a,i}return l!==null&&l!==null&&qn(l),e.callbackPriority=2,e.callbackNode=null,2}function bv(e,i){if(cn!==0&&cn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Jc()&&e.callbackNode!==a)return null;var l=Qt;return l=Ae(e,e===ve?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(iv(e,l,i),Tv(e,Xe()),e.callbackNode!=null&&e.callbackNode===a?bv.bind(null,e):null)}function Sv(e,i){if(Jc())return null;iv(e,i,!0)}function eA(){dA(function(){(ae&6)!==0?le(Ar,tA):Ev()})}function sm(){if(Ns===0){var e=yo;e===0&&(e=Zn,Zn<<=1,(Zn&261888)===0&&(Zn=256)),Ns=e}return Ns}function Av(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:eo(""+e)}function wv(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function nA(e,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=Av((f[Fe]||null).action),_=l.submitter;_&&(i=(i=_[Fe]||null)?Av(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var b=new lr("action","action",null,l,f);e.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ns!==0){var D=_?wv(f,_):new FormData(f);wd(a,{pending:!0,data:D,method:f.method,action:d},null,D)}}else typeof d=="function"&&(b.preventDefault(),D=_?wv(f,_):new FormData(f),wd(a,{pending:!0,data:D,method:f.method,action:d},d,D))},currentTarget:f}]})}}for(var am=0;am<qf.length;am++){var om=qf[am],iA=om.toLowerCase(),rA=om[0].toUpperCase()+om.slice(1);Yi(iA,"on"+rA)}Yi(ny,"onAnimationEnd"),Yi(iy,"onAnimationIteration"),Yi(ry,"onAnimationStart"),Yi("dblclick","onDoubleClick"),Yi("focusin","onFocus"),Yi("focusout","onBlur"),Yi(ES,"onTransitionRun"),Yi(TS,"onTransitionStart"),Yi(bS,"onTransitionCancel"),Yi(sy,"onTransitionEnd"),Ai("onMouseEnter",["mouseout","mouseover"]),Ai("onMouseLeave",["mouseout","mouseover"]),Ai("onPointerEnter",["pointerout","pointerover"]),Ai("onPointerLeave",["pointerout","pointerover"]),Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xl));function Rv(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],f=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var b=l[_],D=b.instance,q=b.currentTarget;if(b=b.listener,D!==d&&f.isPropagationStopped())break t;d=b,f.currentTarget=q;try{d(f)}catch(W){gc(W)}f.currentTarget=null,d=D}else for(_=0;_<l.length;_++){if(b=l[_],D=b.instance,q=b.currentTarget,b=b.listener,D!==d&&f.isPropagationStopped())break t;d=b,f.currentTarget=q;try{d(f)}catch(W){gc(W)}f.currentTarget=null,d=D}}}}function Gt(e,i){var a=i[is];a===void 0&&(a=i[is]=new Set);var l=e+"__bubble";a.has(l)||(Cv(i,e,2,!1),a.add(l))}function lm(e,i,a){var l=0;i&&(l|=4),Cv(a,e,l,i)}var eh="_reactListening"+Math.random().toString(36).slice(2);function um(e){if(!e[eh]){e[eh]=!0,fa.forEach(function(a){a!=="selectionchange"&&(sA.has(a)||lm(a,!1,e),lm(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[eh]||(i[eh]=!0,lm("selectionchange",!1,i))}}function Cv(e,i,a,l){switch(n0(i)){case 2:var f=MA;break;case 8:f=VA;break;default:f=Am}a=f.bind(null,i,a,e),f=void 0,!ya||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?e.addEventListener(i,a,{capture:!0,passive:f}):e.addEventListener(i,a,!0):f!==void 0?e.addEventListener(i,a,{passive:f}):e.addEventListener(i,a,!1)}function cm(e,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===f)break;if(_===4)for(_=l.return;_!==null;){var D=_.tag;if((D===3||D===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;b!==null;){if(_=bi(b),_===null)return;if(D=_.tag,D===5||D===6||D===26||D===27){l=d=_;continue t}b=b.parentNode}}l=l.return}hs(function(){var q=d,W=Ri(a),it=[];t:{var G=ay.get(e);if(G!==void 0){var Y=lr,Et=e;switch(e){case"keypress":if(va(a)===0)break t;case"keydown":case"keyup":Y=fc;break;case"focusin":Et="focus",Y=Ta;break;case"focusout":Et="blur",Y=Ta;break;case"beforeblur":case"afterblur":Y=Ta;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Tl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=ic;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=y;break;case ny:case iy:case ry:Y=sc;break;case sy:Y=A;break;case"scroll":case"scrollend":Y=El;break;case"wheel":Y=$;break;case"copy":case"cut":case"paste":Y=ac;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Nr;break;case"toggle":case"beforetoggle":Y=Ut}var Dt=(i&4)!==0,ye=!Dt&&(e==="scroll"||e==="scrollend"),P=Dt?G!==null?G+"Capture":null:G;Dt=[];for(var V=q,j;V!==null;){var et=V;if(j=et.stateNode,et=et.tag,et!==5&&et!==26&&et!==27||j===null||P===null||(et=Gi(V,P),et!=null&&Dt.push(Zl(V,et,j))),ye)break;V=V.return}0<Dt.length&&(G=new Y(G,Et,null,a,W),it.push({event:G,listeners:Dt}))}}if((i&7)===0){t:{if(G=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",G&&a!==yl&&(Et=a.relatedTarget||a.fromElement)&&(bi(Et)||Et[vt]))break t;if((Y||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,Y?(Et=a.relatedTarget||a.toElement,Y=q,Et=Et?bi(Et):null,Et!==null&&(ye=u(Et),Dt=Et.tag,Et!==ye||Dt!==5&&Dt!==27&&Dt!==6)&&(Et=null)):(Y=null,Et=q),Y!==Et)){if(Dt=Tl,et="onMouseLeave",P="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(Dt=Nr,et="onPointerLeave",P="onPointerEnter",V="pointer"),ye=Y==null?G:Pn(Y),j=Et==null?G:Pn(Et),G=new Dt(et,V+"leave",Y,a,W),G.target=ye,G.relatedTarget=j,et=null,bi(W)===q&&(Dt=new Dt(P,V+"enter",Et,a,W),Dt.target=j,Dt.relatedTarget=ye,et=Dt),ye=et,Y&&Et)e:{for(Dt=aA,P=Y,V=Et,j=0,et=P;et;et=Dt(et))j++;et=0;for(var Rt=V;Rt;Rt=Dt(Rt))et++;for(;0<j-et;)P=Dt(P),j--;for(;0<et-j;)V=Dt(V),et--;for(;j--;){if(P===V||V!==null&&P===V.alternate){Dt=P;break e}P=Dt(P),V=Dt(V)}Dt=null}else Dt=null;Y!==null&&Iv(it,G,Y,Dt,!1),Et!==null&&ye!==null&&Iv(it,ye,Et,Dt,!0)}}t:{if(G=q?Pn(q):window,Y=G.nodeName&&G.nodeName.toLowerCase(),Y==="select"||Y==="input"&&G.type==="file")var ie=Gp;else if(Hp(G))if(Kp)ie=yS;else{ie=gS;var Tt=mS}else Y=G.nodeName,!Y||Y.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?q&&to(q.elementType)&&(ie=Gp):ie=pS;if(ie&&(ie=ie(e,q))){Fp(it,ie,a,W);break t}Tt&&Tt(e,G,q),e==="focusout"&&q&&G.type==="number"&&q.memoizedProps.value!=null&&ml(G,"number",G.value)}switch(Tt=q?Pn(q):window,e){case"focusin":(Hp(Tt)||Tt.contentEditable==="true")&&(lo=Tt,zf=q,Rl=null);break;case"focusout":Rl=zf=lo=null;break;case"mousedown":jf=!0;break;case"contextmenu":case"mouseup":case"dragend":jf=!1,ty(it,a,W);break;case"selectionchange":if(vS)break;case"keydown":case"keyup":ty(it,a,W)}var jt;if(se)t:{switch(e){case"compositionstart":var $t="onCompositionStart";break t;case"compositionend":$t="onCompositionEnd";break t;case"compositionupdate":$t="onCompositionUpdate";break t}$t=void 0}else oo?ba(e,a)&&($t="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&($t="onCompositionStart");$t&&(hr&&a.locale!=="ko"&&(oo||$t!=="onCompositionStart"?$t==="onCompositionEnd"&&oo&&(jt=vl()):(or=W,_l="value"in or?or.value:or.textContent,oo=!0)),Tt=nh(q,$t),0<Tt.length&&($t=new cr($t,e,null,a,W),it.push({event:$t,listeners:Tt}),jt?$t.data=jt:(jt=ao(a),jt!==null&&($t.data=jt)))),(jt=Ii?cS(e,a):hS(e,a))&&($t=nh(q,"onBeforeInput"),0<$t.length&&(Tt=new cr("onBeforeInput","beforeinput",null,a,W),it.push({event:Tt,listeners:$t}),Tt.data=jt)),nA(it,e,q,a,W)}Rv(it,i)})}function Zl(e,i,a){return{instance:e,listener:i,currentTarget:a}}function nh(e,i){for(var a=i+"Capture",l=[];e!==null;){var f=e,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Gi(e,a),f!=null&&l.unshift(Zl(e,f,d)),f=Gi(e,i),f!=null&&l.push(Zl(e,f,d))),e.tag===3)return l;e=e.return}return[]}function aA(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Iv(e,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var b=a,D=b.alternate,q=b.stateNode;if(b=b.tag,D!==null&&D===l)break;b!==5&&b!==26&&b!==27||q===null||(D=q,f?(q=Gi(a,d),q!=null&&_.unshift(Zl(a,q,D))):f||(q=Gi(a,d),q!=null&&_.push(Zl(a,q,D)))),a=a.return}_.length!==0&&e.push({event:i,listeners:_})}var oA=/\r\n?/g,lA=/\u0000|\uFFFD/g;function Dv(e){return(typeof e=="string"?e:""+e).replace(oA,`
`).replace(lA,"")}function Nv(e,i){return i=Dv(i),Dv(e)===i}function pe(e,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||ti(e,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&ti(e,""+l);break;case"className":Q(e,"class",l);break;case"tabIndex":Q(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Q(e,a,l);break;case"style":pl(e,l,d);break;case"data":if(i!=="object"){Q(e,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=eo(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&pe(e,i,"name",f.name,f,null),pe(e,i,"formEncType",f.formEncType,f,null),pe(e,i,"formMethod",f.formMethod,f,null),pe(e,i,"formTarget",f.formTarget,f,null)):(pe(e,i,"encType",f.encType,f,null),pe(e,i,"method",f.method,f,null),pe(e,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=eo(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Fi);break;case"onScroll":l!=null&&Gt("scroll",e);break;case"onScrollEnd":l!=null&&Gt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=eo(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Gt("beforetoggle",e),Gt("toggle",e),L(e,"popover",l);break;case"xlinkActuate":H(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":H(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":H(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":H(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":H(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":H(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":H(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":H(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":H(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":L(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=nc.get(a)||a,L(e,a,l))}}function hm(e,i,a,l,f,d){switch(a){case"style":pl(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof l=="string"?ti(e,l):(typeof l=="number"||typeof l=="bigint")&&ti(e,""+l);break;case"onScroll":l!=null&&Gt("scroll",e);break;case"onScrollEnd":l!=null&&Gt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Fi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ss.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=e[Fe]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,l,f);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):L(e,a,l)}}}function Dn(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gt("error",e),Gt("load",e);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:pe(e,i,d,_,a,null)}}f&&pe(e,i,"srcSet",a.srcSet,a,null),l&&pe(e,i,"src",a.src,a,null);return;case"input":Gt("invalid",e);var b=d=_=f=null,D=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":f=W;break;case"type":_=W;break;case"checked":D=W;break;case"defaultChecked":q=W;break;case"value":d=W;break;case"defaultValue":b=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,i));break;default:pe(e,i,l,W,a,null)}}Wu(e,d,b,D,q,_,f,!1);return;case"select":Gt("invalid",e),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(b=a[f],b!=null))switch(f){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":l=b;default:pe(e,i,f,b,a,null)}i=d,a=_,e.multiple=!!l,i!=null?os(e,!!l,i,!1):a!=null&&os(e,!!l,a,!0);return;case"textarea":Gt("invalid",e),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":l=b;break;case"defaultValue":f=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:pe(e,i,_,b,a,null)}ls(e,l,f,d);return;case"option":for(D in a)a.hasOwnProperty(D)&&(l=a[D],l!=null)&&(D==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":pe(e,i,D,l,a,null));return;case"dialog":Gt("beforetoggle",e),Gt("toggle",e),Gt("cancel",e),Gt("close",e);break;case"iframe":case"object":Gt("load",e);break;case"video":case"audio":for(l=0;l<Xl.length;l++)Gt(Xl[l],e);break;case"image":Gt("error",e),Gt("load",e);break;case"details":Gt("toggle",e);break;case"embed":case"source":case"link":Gt("error",e),Gt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:pe(e,i,q,l,a,null)}return;default:if(to(i)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&hm(e,i,W,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&pe(e,i,b,l,a,null))}function uA(e,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,b=null,D=null,q=null,W=null;for(Y in a){var it=a[Y];if(a.hasOwnProperty(Y)&&it!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":D=it;default:l.hasOwnProperty(Y)||pe(e,i,Y,null,l,it)}}for(var G in l){var Y=l[G];if(it=a[G],l.hasOwnProperty(G)&&(Y!=null||it!=null))switch(G){case"type":d=Y;break;case"name":f=Y;break;case"checked":q=Y;break;case"defaultChecked":W=Y;break;case"value":_=Y;break;case"defaultValue":b=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:Y!==it&&pe(e,i,G,Y,l,it)}}Wa(e,_,b,D,q,W,d,f);return;case"select":Y=_=b=G=null;for(d in a)if(D=a[d],a.hasOwnProperty(d)&&D!=null)switch(d){case"value":break;case"multiple":Y=D;default:l.hasOwnProperty(d)||pe(e,i,d,null,l,D)}for(f in l)if(d=l[f],D=a[f],l.hasOwnProperty(f)&&(d!=null||D!=null))switch(f){case"value":G=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==D&&pe(e,i,f,d,l,D)}i=b,a=_,l=Y,G!=null?os(e,!!a,G,!1):!!l!=!!a&&(i!=null?os(e,!!a,i,!0):os(e,!!a,a?[]:"",!1));return;case"textarea":Y=G=null;for(b in a)if(f=a[b],a.hasOwnProperty(b)&&f!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:pe(e,i,b,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":G=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&pe(e,i,_,f,l,d)}tc(e,G,Y);return;case"option":for(var Et in a)G=a[Et],a.hasOwnProperty(Et)&&G!=null&&!l.hasOwnProperty(Et)&&(Et==="selected"?e.selected=!1:pe(e,i,Et,null,l,G));for(D in l)G=l[D],Y=a[D],l.hasOwnProperty(D)&&G!==Y&&(G!=null||Y!=null)&&(D==="selected"?e.selected=G&&typeof G!="function"&&typeof G!="symbol":pe(e,i,D,G,l,Y));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Dt in a)G=a[Dt],a.hasOwnProperty(Dt)&&G!=null&&!l.hasOwnProperty(Dt)&&pe(e,i,Dt,null,l,G);for(q in l)if(G=l[q],Y=a[q],l.hasOwnProperty(q)&&G!==Y&&(G!=null||Y!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:pe(e,i,q,G,l,Y)}return;default:if(to(i)){for(var ye in a)G=a[ye],a.hasOwnProperty(ye)&&G!==void 0&&!l.hasOwnProperty(ye)&&hm(e,i,ye,void 0,l,G);for(W in l)G=l[W],Y=a[W],!l.hasOwnProperty(W)||G===Y||G===void 0&&Y===void 0||hm(e,i,W,G,l,Y);return}}for(var P in a)G=a[P],a.hasOwnProperty(P)&&G!=null&&!l.hasOwnProperty(P)&&pe(e,i,P,null,l,G);for(it in l)G=l[it],Y=a[it],!l.hasOwnProperty(it)||G===Y||G==null&&Y==null||pe(e,i,it,G,l,Y)}function xv(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cA(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,b=f.duration;if(d&&b&&xv(_)){for(_=0,b=f.responseEnd,l+=1;l<a.length;l++){var D=a[l],q=D.startTime;if(q>b)break;var W=D.transferSize,it=D.initiatorType;W&&xv(it)&&(D=D.responseEnd,_+=W*(D<b?1:(b-q)/(D-q)))}if(--l,i+=8*(d+_)/(f.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var fm=null,dm=null;function ih(e){return e.nodeType===9?e:e.ownerDocument}function Ov(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Mv(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function mm(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var gm=null;function hA(){var e=window.event;return e&&e.type==="popstate"?e===gm?!1:(gm=e,!0):(gm=null,!1)}var Vv=typeof setTimeout=="function"?setTimeout:void 0,fA=typeof clearTimeout=="function"?clearTimeout:void 0,kv=typeof Promise=="function"?Promise:void 0,dA=typeof queueMicrotask=="function"?queueMicrotask:typeof kv<"u"?function(e){return kv.resolve(null).then(e).catch(mA)}:Vv;function mA(e){setTimeout(function(){throw e})}function xs(e){return e==="head"}function Pv(e,i){var a=i,l=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(f),Po(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Jl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Jl(a);for(var d=a.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[Ti]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&Jl(e.ownerDocument.body);a=f}while(a);Po(i)}function Lv(e,i){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function pm(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":pm(a),rs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function gA(e,i,a,l){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Ti])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=ki(e.nextSibling),e===null)break}return null}function pA(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ki(e.nextSibling),e===null))return null;return e}function Uv(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=ki(e.nextSibling),e===null))return null;return e}function ym(e){return e.data==="$?"||e.data==="$~"}function _m(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function yA(e,i){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function ki(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var vm=null;function zv(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(i===0)return ki(e.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}e=e.nextSibling}return null}function jv(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return e;i--}else a!=="/$"&&a!=="/&"||i++}e=e.previousSibling}return null}function Bv(e,i,a){switch(i=ih(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Jl(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);rs(e)}var Pi=new Map,qv=new Set;function rh(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Gr=lt.d;lt.d={f:_A,r:vA,D:EA,C:TA,L:bA,m:SA,X:wA,S:AA,M:RA};function _A(){var e=Gr.f(),i=Yc();return e||i}function vA(e){var i=Kn(e);i!==null&&i.tag===5&&i.type==="form"?s_(i):Gr.r(e)}var Mo=typeof document>"u"?null:document;function Hv(e,i,a){var l=Mo;if(l&&typeof i=="string"&&i){var f=Wn(i);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),qv.has(f)||(qv.add(f),e={rel:e,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Dn(i,"link",e),Le(i),l.head.appendChild(i)))}}function EA(e){Gr.D(e),Hv("dns-prefetch",e,null)}function TA(e,i){Gr.C(e,i),Hv("preconnect",e,i)}function bA(e,i,a){Gr.L(e,i,a);var l=Mo;if(l&&e&&i){var f='link[rel="preload"][as="'+Wn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Wn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Wn(a.imageSizes)+'"]')):f+='[href="'+Wn(e)+'"]';var d=f;switch(i){case"style":d=Vo(e);break;case"script":d=ko(e)}Pi.has(d)||(e=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Pi.set(d,e),l.querySelector(f)!==null||i==="style"&&l.querySelector(Wl(d))||i==="script"&&l.querySelector(tu(d))||(i=l.createElement("link"),Dn(i,"link",e),Le(i),l.head.appendChild(i)))}}function SA(e,i){Gr.m(e,i);var a=Mo;if(a&&e){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Wn(l)+'"][href="'+Wn(e)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=ko(e)}if(!Pi.has(d)&&(e=T({rel:"modulepreload",href:e},i),Pi.set(d,e),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(tu(d)))return}l=a.createElement("link"),Dn(l,"link",e),Le(l),a.head.appendChild(l)}}}function AA(e,i,a){Gr.S(e,i,a);var l=Mo;if(l&&e){var f=Si(l).hoistableStyles,d=Vo(e);i=i||"default";var _=f.get(d);if(!_){var b={loading:0,preload:null};if(_=l.querySelector(Wl(d)))b.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Pi.get(d))&&Em(e,a);var D=_=l.createElement("link");Le(D),Dn(D,"link",e),D._p=new Promise(function(q,W){D.onload=q,D.onerror=W}),D.addEventListener("load",function(){b.loading|=1}),D.addEventListener("error",function(){b.loading|=2}),b.loading|=4,sh(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:b},f.set(d,_)}}}function wA(e,i){Gr.X(e,i);var a=Mo;if(a&&e){var l=Si(a).hoistableScripts,f=ko(e),d=l.get(f);d||(d=a.querySelector(tu(f)),d||(e=T({src:e,async:!0},i),(i=Pi.get(f))&&Tm(e,i),d=a.createElement("script"),Le(d),Dn(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function RA(e,i){Gr.M(e,i);var a=Mo;if(a&&e){var l=Si(a).hoistableScripts,f=ko(e),d=l.get(f);d||(d=a.querySelector(tu(f)),d||(e=T({src:e,async:!0,type:"module"},i),(i=Pi.get(f))&&Tm(e,i),d=a.createElement("script"),Le(d),Dn(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Fv(e,i,a,l){var f=(f=wt.current)?rh(f):null;if(!f)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Vo(a.href),a=Si(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Vo(a.href);var d=Si(f).hoistableStyles,_=d.get(e);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,_),(d=f.querySelector(Wl(e)))&&!d._p&&(_.instance=d,_.state.loading=5),Pi.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Pi.set(e,a),d||CA(f,e,a,_.state))),i&&l===null)throw Error(s(528,""));return _}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ko(a),a=Si(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Vo(e){return'href="'+Wn(e)+'"'}function Wl(e){return'link[rel="stylesheet"]['+e+"]"}function Gv(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function CA(e,i,a,l){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=e.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Dn(i,"link",a),Le(i),e.head.appendChild(i))}function ko(e){return'[src="'+Wn(e)+'"]'}function tu(e){return"script[async]"+e}function Kv(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=e.querySelector('style[data-href~="'+Wn(a.href)+'"]');if(l)return i.instance=l,Le(l),l;var f=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Le(l),Dn(l,"style",f),sh(l,a.precedence,e),i.instance=l;case"stylesheet":f=Vo(a.href);var d=e.querySelector(Wl(f));if(d)return i.state.loading|=4,i.instance=d,Le(d),d;l=Gv(a),(f=Pi.get(f))&&Em(l,f),d=(e.ownerDocument||e).createElement("link"),Le(d);var _=d;return _._p=new Promise(function(b,D){_.onload=b,_.onerror=D}),Dn(d,"link",l),i.state.loading|=4,sh(d,a.precedence,e),i.instance=d;case"script":return d=ko(a.src),(f=e.querySelector(tu(d)))?(i.instance=f,Le(f),f):(l=a,(f=Pi.get(d))&&(l=T({},a),Tm(l,f)),e=e.ownerDocument||e,f=e.createElement("script"),Le(f),Dn(f,"link",l),e.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,sh(l,a.precedence,e));return i.instance}function sh(e,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var b=l[_];if(b.dataset.precedence===i)d=b;else if(d!==f)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Em(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Tm(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var ah=null;function Qv(e,i,a){if(ah===null){var l=new Map,f=ah=new Map;f.set(a,l)}else f=ah,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var d=a[f];if(!(d[Ti]||d[Ve]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=e+_;var b=l.get(_);b?b.push(d):l.set(_,[d])}}return l}function $v(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function IA(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(e=i.disabled,typeof i.precedence=="string"&&e==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Yv(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function DA(e,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Vo(l.href),d=i.querySelector(Wl(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=oh.bind(e),i.then(e,e)),a.state.loading|=4,a.instance=d,Le(d);return}d=i.ownerDocument||i,l=Gv(l),(f=Pi.get(f))&&Em(l,f),d=d.createElement("link"),Le(d);var _=d;_._p=new Promise(function(b,D){_.onload=b,_.onerror=D}),Dn(d,"link",l),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=oh.bind(e),i.addEventListener("load",a),i.addEventListener("error",a))}}var bm=0;function NA(e,i){return e.stylesheets&&e.count===0&&uh(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&uh(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+i);0<e.imgBytes&&bm===0&&(bm=62500*cA());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&uh(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>bm?50:800)+i);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function oh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var lh=null;function uh(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,lh=new Map,i.forEach(xA,e),lh=null,oh.call(e))}function xA(e,i){if(!(i.state.loading&4)){var a=lh.get(e);if(a)var l=a.get(null);else{a=new Map,lh.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=oh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),i.state.loading|=4}}var eu={$$typeof:at,Provider:null,Consumer:null,_currentValue:St,_currentValue2:St,_threadCount:0};function OA(e,i,a,l,f,d,_,b,D){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Me(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Me(0),this.hiddenUpdates=Me(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Xv(e,i,a,l,f,d,_,b,D,q,W,it){return e=new OA(e,i,a,_,D,q,W,it,b),i=1,d===!0&&(i|=24),d=ci(3,null,null,i),e.current=d,d.stateNode=e,i=ed(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},sd(d),e}function Zv(e){return e?(e=ho,e):ho}function Jv(e,i,a,l,f,d){f=Zv(f),l.context===null?l.context=f:l.pendingContext=f,l=Es(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Ts(e,l,i),a!==null&&(si(a,e,i),Ml(a,e,i))}function Wv(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Sm(e,i){Wv(e,i),(e=e.alternate)&&Wv(e,i)}function t0(e){if(e.tag===13||e.tag===31){var i=wa(e,67108864);i!==null&&si(i,e,67108864),Sm(e,67108864)}}function e0(e){if(e.tag===13||e.tag===31){var i=gi();i=ln(i);var a=wa(e,i);a!==null&&si(a,e,i),Sm(e,i)}}var ch=!0;function MA(e,i,a,l){var f=X.T;X.T=null;var d=lt.p;try{lt.p=2,Am(e,i,a,l)}finally{lt.p=d,X.T=f}}function VA(e,i,a,l){var f=X.T;X.T=null;var d=lt.p;try{lt.p=8,Am(e,i,a,l)}finally{lt.p=d,X.T=f}}function Am(e,i,a,l){if(ch){var f=wm(l);if(f===null)cm(e,i,l,hh,a),i0(e,l);else if(PA(f,e,i,a,l))l.stopPropagation();else if(i0(e,l),i&4&&-1<kA.indexOf(e)){for(;f!==null;){var d=Kn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=Se(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var D=1<<31-be(_);b.entanglements[1]|=D,_&=~D}gr(d),(ae&6)===0&&(Qc=Xe()+500,Yl(0))}}break;case 31:case 13:b=wa(d,2),b!==null&&si(b,d,2),Yc(),Sm(d,2)}if(d=wm(l),d===null&&cm(e,i,l,hh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else cm(e,i,l,null,a)}}function wm(e){return e=Ri(e),Rm(e)}var hh=null;function Rm(e){if(hh=null,e=bi(e),e!==null){var i=u(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=h(i),e!==null)return e;e=null}else if(a===31){if(e=m(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return hh=e,null}function n0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ji()){case Ar:return 2;case Hn:return 8;case An:case Bi:return 32;case wr:return 268435456;default:return 32}default:return 32}}var Cm=!1,Os=null,Ms=null,Vs=null,nu=new Map,iu=new Map,ks=[],kA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function i0(e,i){switch(e){case"focusin":case"focusout":Os=null;break;case"dragenter":case"dragleave":Ms=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":nu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":iu.delete(i.pointerId)}}function ru(e,i,a,l,f,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Kn(i),i!==null&&t0(i)),e):(e.eventSystemFlags|=l,i=e.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),e)}function PA(e,i,a,l,f){switch(i){case"focusin":return Os=ru(Os,e,i,a,l,f),!0;case"dragenter":return Ms=ru(Ms,e,i,a,l,f),!0;case"mouseover":return Vs=ru(Vs,e,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return nu.set(d,ru(nu.get(d)||null,e,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,iu.set(d,ru(iu.get(d)||null,e,i,a,l,f)),!0}return!1}function r0(e){var i=bi(e.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){e.blockedOn=i,un(e.priority,function(){e0(a)});return}}else if(i===31){if(i=m(a),i!==null){e.blockedOn=i,un(e.priority,function(){e0(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fh(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=wm(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);yl=l,a.target.dispatchEvent(l),yl=null}else return i=Kn(a),i!==null&&t0(i),e.blockedOn=a,!1;i.shift()}return!0}function s0(e,i,a){fh(e)&&a.delete(i)}function LA(){Cm=!1,Os!==null&&fh(Os)&&(Os=null),Ms!==null&&fh(Ms)&&(Ms=null),Vs!==null&&fh(Vs)&&(Vs=null),nu.forEach(s0),iu.forEach(s0)}function dh(e,i){e.blockedOn===i&&(e.blockedOn=null,Cm||(Cm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,LA)))}var mh=null;function a0(e){mh!==e&&(mh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){mh===e&&(mh=null);for(var i=0;i<e.length;i+=3){var a=e[i],l=e[i+1],f=e[i+2];if(typeof l!="function"){if(Rm(l||a)===null)continue;break}var d=Kn(a);d!==null&&(e.splice(i,3),i-=3,wd(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Po(e){function i(D){return dh(D,e)}Os!==null&&dh(Os,e),Ms!==null&&dh(Ms,e),Vs!==null&&dh(Vs,e),nu.forEach(i),iu.forEach(i);for(var a=0;a<ks.length;a++){var l=ks[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<ks.length&&(a=ks[0],a.blockedOn===null);)r0(a),a.blockedOn===null&&ks.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[Fe]||null;if(typeof d=="function")_||a0(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[Fe]||null)b=_.formAction;else if(Rm(f)!==null)continue}else b=_.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),a0(a)}}}function o0(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Im(e){this._internalRoot=e}gh.prototype.render=Im.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=gi();Jv(a,l,e,i,null,null)},gh.prototype.unmount=Im.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Jv(e.current,2,null,e,null,null),Yc(),i[vt]=null}};function gh(e){this._internalRoot=e}gh.prototype.unstable_scheduleHydration=function(e){if(e){var i=Ne();e={blockedOn:null,target:e,priority:i};for(var a=0;a<ks.length&&i!==0&&i<ks[a].priority;a++);ks.splice(a,0,e),a===0&&r0(e)}};var l0=t.version;if(l0!=="19.2.3")throw Error(s(527,l0,"19.2.3"));lt.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=p(i),e=e!==null?E(e):null,e=e===null?null:e.stateNode,e};var UA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ph.isDisabled&&ph.supportsFiber)try{Gn=ph.inject(UA),qe=ph}catch{}}return au.createRoot=function(e,i){if(!o(e))throw Error(s(299));var a=!1,l="",f=g_,d=p_,_=y_;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=Xv(e,1,!1,null,null,a,l,null,f,d,_,o0),e[vt]=i.current,um(e),new Im(i)},au.hydrateRoot=function(e,i,a){if(!o(e))throw Error(s(299));var l=!1,f="",d=g_,_=p_,b=y_,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),i=Xv(e,1,!0,i,a??null,l,f,D,d,_,b,o0),i.context=Zv(null),a=i.current,l=gi(),l=ln(l),f=Es(l),f.callback=null,Ts(a,f,l),a=l,i.current.lanes=a,K(i,a),gr(i),e[vt]=i.current,um(e),new gh(i)},au.version="19.2.3",au}var _0;function $A(){if(_0)return xm.exports;_0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),xm.exports=QA(),xm.exports}var YA=$A();const XA=()=>Z.jsxs("div",{className:"fixed inset-0 -z-50 overflow-hidden pointer-events-none bg-[#020617]",children:[Z.jsx("div",{className:"bg-blob opacity-20 w-[800px] h-[800px] -top-96 -left-96 bg-indigo-600 blur-[120px]"}),Z.jsx("div",{className:"bg-blob opacity-30 w-[600px] h-[600px] top-1/2 -right-48 bg-pink-600 blur-[100px]",style:{animationDelay:"-5s",animationDuration:"25s"}}),Z.jsx("div",{className:"bg-blob opacity-10 w-[500px] h-[500px] bottom-0 left-1/4 bg-cyan-400 blur-[80px]",style:{animationDelay:"-12s",animationDuration:"18s"}}),Z.jsx("div",{className:"absolute inset-0 bg-radial-at-t from-transparent via-slate-950/40 to-slate-950"}),Z.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"})]});const ZA=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),JA=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),v0=r=>{const t=JA(r);return t.charAt(0).toUpperCase()+t.slice(1)},_T=(...r)=>r.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim(),WA=r=>{for(const t in r)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var tw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ew=J.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:h,...m},g)=>J.createElement("svg",{ref:g,...tw,width:t,height:t,stroke:r,strokeWidth:s?Number(n)*24/Number(t):n,className:_T("lucide",o),...!u&&!WA(m)&&{"aria-hidden":"true"},...m},[...h.map(([p,E])=>J.createElement(p,E)),...Array.isArray(u)?u:[u]]));const Sr=(r,t)=>{const n=J.forwardRef(({className:s,...o},u)=>J.createElement(ew,{ref:u,iconNode:t,className:_T(`lucide-${ZA(v0(r))}`,`lucide-${r}`,s),...o}));return n.displayName=v0(r),n};const nw=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],iw=Sr("arrow-left",nw);const rw=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],sw=Sr("copy",rw);const aw=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],ow=Sr("flag",aw);const lw=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],uw=Sr("loader-circle",lw);const cw=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],hw=Sr("log-in",cw);const fw=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],dw=Sr("plus",fw);const mw=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],gw=Sr("rotate-ccw",mw);const pw=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],yw=Sr("share-2",pw);const _w=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],vw=Sr("users",_w);const Ew=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Tw=Sr("zap",Ew),bw=()=>{};var E0={};const vT=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},Sw=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)t[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];t[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],h=r[n++],m=r[n++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;t[s++]=String.fromCharCode(55296+(g>>10)),t[s++]=String.fromCharCode(56320+(g&1023))}else{const u=r[n++],h=r[n++];t[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return t.join("")},ET={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],h=o+1<r.length,m=h?r[o+1]:0,g=o+2<r.length,p=g?r[o+2]:0,E=u>>2,T=(u&3)<<4|m>>4;let S=(m&15)<<2|p>>6,N=p&63;g||(N=64,h||(S=64)),s.push(n[E],n[T],n[S],n[N])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(vT(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):Sw(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const p=o<r.length?n[r.charAt(o)]:64;++o;const T=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||p==null||T==null)throw new Aw;const S=u<<2|m>>4;if(s.push(S),p!==64){const N=m<<4&240|p>>2;if(s.push(N),T!==64){const F=p<<6&192|T;s.push(F)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Aw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ww=function(r){const t=vT(r);return ET.encodeByteArray(t,!0)},zh=function(r){return ww(r).replace(/\./g,"")},TT=function(r){try{return ET.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Rw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Cw=()=>Rw().__FIREBASE_DEFAULTS__,Iw=()=>{if(typeof process>"u"||typeof E0>"u")return;const r=E0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Dw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&TT(r[1]);return t&&JSON.parse(t)},hf=()=>{try{return bw()||Cw()||Iw()||Dw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},bT=r=>hf()?.emulatorHosts?.[r],Nw=r=>{const t=bT(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},ST=()=>hf()?.config,AT=r=>hf()?.[`_${r}`];class xw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}function rl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wT(r){return(await fetch(r,{credentials:"include"})).ok}function Ow(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[zh(JSON.stringify(n)),zh(JSON.stringify(h)),""].join(".")}const mu={};function Mw(){const r={prod:[],emulator:[]};for(const t of Object.keys(mu))mu[t]?r.emulator.push(t):r.prod.push(t);return r}function Vw(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let T0=!1;function RT(r,t){if(typeof window>"u"||typeof document>"u"||!rl(window.location.host)||mu[r]===t||mu[r]||T0)return;mu[r]=t;function n(S){return`__firebase__banner__${S}`}const s="__firebase__banner",u=Mw().prod.length>0;function h(){const S=document.getElementById(s);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,N){S.setAttribute("width","24"),S.setAttribute("id",N),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{T0=!0,h()},S}function E(S,N){S.setAttribute("id",N),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=Vw(s),N=n("text"),F=document.getElementById(N)||document.createElement("span"),U=n("learnmore"),B=document.getElementById(U)||document.createElement("a"),st=n("preprendIcon"),ct=document.getElementById(st)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const at=S.element;m(at),E(B,U);const yt=p();g(ct,st),at.append(ct,F,B,yt),document.body.appendChild(at)}u?(F.innerText="Preview backend disconnected.",ct.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ct.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function Bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bn())}function Pw(){const r=hf()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Lw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Uw(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function zw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jw(){const r=Bn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Bw(){return!Pw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qw(){try{return typeof indexedDB=="object"}catch{return!1}}function Hw(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(n){t(n)}})}const Fw="FirebaseError";class es extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=Fw,Object.setPrototypeOf(this,es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pu.prototype.create)}}class Pu{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},o=`${this.service}/${t}`,u=this.errors[t],h=u?Gw(u,s):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new es(o,m,s)}}function Gw(r,t){return r.replace(Kw,(n,s)=>{const o=t[s];return o!=null?String(o):`<${s}?>`})}const Kw=/\{\$([^}]+)}/g;function Qw(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Fa(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const o of n){if(!s.includes(o))return!1;const u=r[o],h=t[o];if(b0(u)&&b0(h)){if(!Fa(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function b0(r){return r!==null&&typeof r=="object"}function Lu(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function $w(r,t){const n=new Yw(r,t);return n.subscribe.bind(n)}class Yw{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let o;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Xw(t,["next","error","complete"])?o=t:o={next:t,error:n,complete:s},o.next===void 0&&(o.next=km),o.error===void 0&&(o.error=km),o.complete===void 0&&(o.complete=km);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Xw(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function km(){}function Sn(r){return r&&r._delegate?r._delegate:r}class Ga{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const za="[DEFAULT]";class Zw{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new xw;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Ww(t))try{this.getOrInitializeService({instanceIdentifier:za})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(t=za){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=za){return this.instances.has(t)}getOptions(t=za){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&h.resolve(o)}return o}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(t),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&t(u,s),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Jw(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=za){return this.component?this.component.multipleInstances?t:za:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Jw(r){return r===za?void 0:r}function Ww(r){return r.instantiationMode==="EAGER"}class tR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Zw(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}var Yt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Yt||(Yt={}));const eR={debug:Yt.DEBUG,verbose:Yt.VERBOSE,info:Yt.INFO,warn:Yt.WARN,error:Yt.ERROR,silent:Yt.SILENT},nR=Yt.INFO,iR={[Yt.DEBUG]:"log",[Yt.VERBOSE]:"log",[Yt.INFO]:"info",[Yt.WARN]:"warn",[Yt.ERROR]:"error"},rR=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),o=iR[t];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class qg{constructor(t){this.name=t,this._logLevel=nR,this._logHandler=rR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Yt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?eR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Yt.DEBUG,...t),this._logHandler(this,Yt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Yt.VERBOSE,...t),this._logHandler(this,Yt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Yt.INFO,...t),this._logHandler(this,Yt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Yt.WARN,...t),this._logHandler(this,Yt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Yt.ERROR,...t),this._logHandler(this,Yt.ERROR,...t)}}const sR=(r,t)=>t.some(n=>r instanceof n);let S0,A0;function aR(){return S0||(S0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oR(){return A0||(A0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CT=new WeakMap,ag=new WeakMap,IT=new WeakMap,Pm=new WeakMap,Hg=new WeakMap;function lR(r){const t=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",h)},u=()=>{n(Qs(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",h)});return t.then(n=>{n instanceof IDBCursor&&CT.set(n,r)}).catch(()=>{}),Hg.set(t,r),t}function uR(r){if(ag.has(r))return;const t=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",h),r.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",h),r.addEventListener("abort",h)});ag.set(r,t)}let og={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return ag.get(r);if(t==="objectStoreNames")return r.objectStoreNames||IT.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qs(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function cR(r){og=r(og)}function hR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(Lm(this),t,...n);return IT.set(s,t.sort?t.sort():[t]),Qs(s)}:oR().includes(r)?function(...t){return r.apply(Lm(this),t),Qs(CT.get(this))}:function(...t){return Qs(r.apply(Lm(this),t))}}function fR(r){return typeof r=="function"?hR(r):(r instanceof IDBTransaction&&uR(r),sR(r,aR())?new Proxy(r,og):r)}function Qs(r){if(r instanceof IDBRequest)return lR(r);if(Pm.has(r))return Pm.get(r);const t=fR(r);return t!==r&&(Pm.set(r,t),Hg.set(t,r)),t}const Lm=r=>Hg.get(r);function dR(r,t,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(r,t),m=Qs(h);return s&&h.addEventListener("upgradeneeded",g=>{s(Qs(h.result),g.oldVersion,g.newVersion,Qs(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const mR=["get","getKey","getAll","getAllKeys","count"],gR=["put","add","delete","clear"],Um=new Map;function w0(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Um.get(t))return Um.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,o=gR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||mR.includes(n)))return;const u=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(m.shift())),(await Promise.all([p[n](...m),o&&g.done]))[0]};return Um.set(t,u),u}cR(r=>({...r,get:(t,n,s)=>w0(t,n)||r.get(t,n,s),has:(t,n)=>!!w0(t,n)||r.has(t,n)}));class pR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function yR(r){return r.getComponent()?.type==="VERSION"}const lg="@firebase/app",R0="0.14.6";const Xr=new qg("@firebase/app"),_R="@firebase/app-compat",vR="@firebase/analytics-compat",ER="@firebase/analytics",TR="@firebase/app-check-compat",bR="@firebase/app-check",SR="@firebase/auth",AR="@firebase/auth-compat",wR="@firebase/database",RR="@firebase/data-connect",CR="@firebase/database-compat",IR="@firebase/functions",DR="@firebase/functions-compat",NR="@firebase/installations",xR="@firebase/installations-compat",OR="@firebase/messaging",MR="@firebase/messaging-compat",VR="@firebase/performance",kR="@firebase/performance-compat",PR="@firebase/remote-config",LR="@firebase/remote-config-compat",UR="@firebase/storage",zR="@firebase/storage-compat",jR="@firebase/firestore",BR="@firebase/ai",qR="@firebase/firestore-compat",HR="firebase",FR="12.6.0";const ug="[DEFAULT]",GR={[lg]:"fire-core",[_R]:"fire-core-compat",[ER]:"fire-analytics",[vR]:"fire-analytics-compat",[bR]:"fire-app-check",[TR]:"fire-app-check-compat",[SR]:"fire-auth",[AR]:"fire-auth-compat",[wR]:"fire-rtdb",[RR]:"fire-data-connect",[CR]:"fire-rtdb-compat",[IR]:"fire-fn",[DR]:"fire-fn-compat",[NR]:"fire-iid",[xR]:"fire-iid-compat",[OR]:"fire-fcm",[MR]:"fire-fcm-compat",[VR]:"fire-perf",[kR]:"fire-perf-compat",[PR]:"fire-rc",[LR]:"fire-rc-compat",[UR]:"fire-gcs",[zR]:"fire-gcs-compat",[jR]:"fire-fst",[qR]:"fire-fst-compat",[BR]:"fire-vertex","fire-js":"fire-js",[HR]:"fire-js-all"};const Au=new Map,KR=new Map,cg=new Map;function C0(r,t){try{r.container.addComponent(t)}catch(n){Xr.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function Yo(r){const t=r.name;if(cg.has(t))return Xr.debug(`There were multiple attempts to register component ${t}.`),!1;cg.set(t,r);for(const n of Au.values())C0(n,r);for(const n of KR.values())C0(n,r);return!0}function Fg(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function Ji(r){return r==null?!1:r.settings!==void 0}const QR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$s=new Pu("app","Firebase",QR);class $R{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ga("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw $s.create("app-deleted",{appName:this._name})}}const sl=FR;function DT(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s={name:ug,automaticDataCollectionEnabled:!0,...t},o=s.name;if(typeof o!="string"||!o)throw $s.create("bad-app-name",{appName:String(o)});if(n||(n=ST()),!n)throw $s.create("no-options");const u=Au.get(o);if(u){if(Fa(n,u.options)&&Fa(s,u.config))return u;throw $s.create("duplicate-app",{appName:o})}const h=new tR(o);for(const g of cg.values())h.addComponent(g);const m=new $R(n,s,h);return Au.set(o,m),m}function NT(r=ug){const t=Au.get(r);if(!t&&r===ug&&ST())return DT();if(!t)throw $s.create("no-app",{appName:r});return t}function I0(){return Array.from(Au.values())}function Ys(r,t,n){let s=GR[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const h=[`Unable to register library "${s}" with version "${t}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Xr.warn(h.join(" "));return}Yo(new Ga(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const YR="firebase-heartbeat-database",XR=1,wu="firebase-heartbeat-store";let zm=null;function xT(){return zm||(zm=dR(YR,XR,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(wu)}catch(n){console.warn(n)}}}}).catch(r=>{throw $s.create("idb-open",{originalErrorMessage:r.message})})),zm}async function ZR(r){try{const n=(await xT()).transaction(wu),s=await n.objectStore(wu).get(OT(r));return await n.done,s}catch(t){if(t instanceof es)Xr.warn(t.message);else{const n=$s.create("idb-get",{originalErrorMessage:t?.message});Xr.warn(n.message)}}}async function D0(r,t){try{const s=(await xT()).transaction(wu,"readwrite");await s.objectStore(wu).put(t,OT(r)),await s.done}catch(n){if(n instanceof es)Xr.warn(n.message);else{const s=$s.create("idb-set",{originalErrorMessage:n?.message});Xr.warn(s.message)}}}function OT(r){return`${r.name}!${r.options.appId}`}const JR=1024,WR=30;class tC{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new nC(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=N0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>WR){const o=iC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Xr.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=N0(),{heartbeatsToSend:n,unsentEntries:s}=eC(this._heartbeatsCache.heartbeats),o=zh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Xr.warn(t),""}}}function N0(){return new Date().toISOString().substring(0,10)}function eC(r,t=JR){const n=[];let s=r.slice();for(const o of r){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),x0(n)>t){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),x0(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class nC{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qw()?Hw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ZR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return D0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return D0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function x0(r){return zh(JSON.stringify({version:2,heartbeats:r})).length}function iC(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}function rC(r){Yo(new Ga("platform-logger",t=>new pR(t),"PRIVATE")),Yo(new Ga("heartbeat",t=>new tC(t),"PRIVATE")),Ys(lg,R0,r),Ys(lg,R0,"esm2020"),Ys("fire-js","")}rC("");var O0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Xs,MT;(function(){var r;function t(R,w){function C(){}C.prototype=w.prototype,R.F=w.prototype,R.prototype=new C,R.prototype.constructor=R,R.D=function(O,x,k){for(var I=Array(arguments.length-2),qt=2;qt<arguments.length;qt++)I[qt-2]=arguments[qt];return w.prototype[x].apply(O,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,w,C){C||(C=0);const O=Array(16);if(typeof w=="string")for(var x=0;x<16;++x)O[x]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(x=0;x<16;++x)O[x]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=R.g[0],C=R.g[1],x=R.g[2];let k=R.g[3],I;I=w+(k^C&(x^k))+O[0]+3614090360&4294967295,w=C+(I<<7&4294967295|I>>>25),I=k+(x^w&(C^x))+O[1]+3905402710&4294967295,k=w+(I<<12&4294967295|I>>>20),I=x+(C^k&(w^C))+O[2]+606105819&4294967295,x=k+(I<<17&4294967295|I>>>15),I=C+(w^x&(k^w))+O[3]+3250441966&4294967295,C=x+(I<<22&4294967295|I>>>10),I=w+(k^C&(x^k))+O[4]+4118548399&4294967295,w=C+(I<<7&4294967295|I>>>25),I=k+(x^w&(C^x))+O[5]+1200080426&4294967295,k=w+(I<<12&4294967295|I>>>20),I=x+(C^k&(w^C))+O[6]+2821735955&4294967295,x=k+(I<<17&4294967295|I>>>15),I=C+(w^x&(k^w))+O[7]+4249261313&4294967295,C=x+(I<<22&4294967295|I>>>10),I=w+(k^C&(x^k))+O[8]+1770035416&4294967295,w=C+(I<<7&4294967295|I>>>25),I=k+(x^w&(C^x))+O[9]+2336552879&4294967295,k=w+(I<<12&4294967295|I>>>20),I=x+(C^k&(w^C))+O[10]+4294925233&4294967295,x=k+(I<<17&4294967295|I>>>15),I=C+(w^x&(k^w))+O[11]+2304563134&4294967295,C=x+(I<<22&4294967295|I>>>10),I=w+(k^C&(x^k))+O[12]+1804603682&4294967295,w=C+(I<<7&4294967295|I>>>25),I=k+(x^w&(C^x))+O[13]+4254626195&4294967295,k=w+(I<<12&4294967295|I>>>20),I=x+(C^k&(w^C))+O[14]+2792965006&4294967295,x=k+(I<<17&4294967295|I>>>15),I=C+(w^x&(k^w))+O[15]+1236535329&4294967295,C=x+(I<<22&4294967295|I>>>10),I=w+(x^k&(C^x))+O[1]+4129170786&4294967295,w=C+(I<<5&4294967295|I>>>27),I=k+(C^x&(w^C))+O[6]+3225465664&4294967295,k=w+(I<<9&4294967295|I>>>23),I=x+(w^C&(k^w))+O[11]+643717713&4294967295,x=k+(I<<14&4294967295|I>>>18),I=C+(k^w&(x^k))+O[0]+3921069994&4294967295,C=x+(I<<20&4294967295|I>>>12),I=w+(x^k&(C^x))+O[5]+3593408605&4294967295,w=C+(I<<5&4294967295|I>>>27),I=k+(C^x&(w^C))+O[10]+38016083&4294967295,k=w+(I<<9&4294967295|I>>>23),I=x+(w^C&(k^w))+O[15]+3634488961&4294967295,x=k+(I<<14&4294967295|I>>>18),I=C+(k^w&(x^k))+O[4]+3889429448&4294967295,C=x+(I<<20&4294967295|I>>>12),I=w+(x^k&(C^x))+O[9]+568446438&4294967295,w=C+(I<<5&4294967295|I>>>27),I=k+(C^x&(w^C))+O[14]+3275163606&4294967295,k=w+(I<<9&4294967295|I>>>23),I=x+(w^C&(k^w))+O[3]+4107603335&4294967295,x=k+(I<<14&4294967295|I>>>18),I=C+(k^w&(x^k))+O[8]+1163531501&4294967295,C=x+(I<<20&4294967295|I>>>12),I=w+(x^k&(C^x))+O[13]+2850285829&4294967295,w=C+(I<<5&4294967295|I>>>27),I=k+(C^x&(w^C))+O[2]+4243563512&4294967295,k=w+(I<<9&4294967295|I>>>23),I=x+(w^C&(k^w))+O[7]+1735328473&4294967295,x=k+(I<<14&4294967295|I>>>18),I=C+(k^w&(x^k))+O[12]+2368359562&4294967295,C=x+(I<<20&4294967295|I>>>12),I=w+(C^x^k)+O[5]+4294588738&4294967295,w=C+(I<<4&4294967295|I>>>28),I=k+(w^C^x)+O[8]+2272392833&4294967295,k=w+(I<<11&4294967295|I>>>21),I=x+(k^w^C)+O[11]+1839030562&4294967295,x=k+(I<<16&4294967295|I>>>16),I=C+(x^k^w)+O[14]+4259657740&4294967295,C=x+(I<<23&4294967295|I>>>9),I=w+(C^x^k)+O[1]+2763975236&4294967295,w=C+(I<<4&4294967295|I>>>28),I=k+(w^C^x)+O[4]+1272893353&4294967295,k=w+(I<<11&4294967295|I>>>21),I=x+(k^w^C)+O[7]+4139469664&4294967295,x=k+(I<<16&4294967295|I>>>16),I=C+(x^k^w)+O[10]+3200236656&4294967295,C=x+(I<<23&4294967295|I>>>9),I=w+(C^x^k)+O[13]+681279174&4294967295,w=C+(I<<4&4294967295|I>>>28),I=k+(w^C^x)+O[0]+3936430074&4294967295,k=w+(I<<11&4294967295|I>>>21),I=x+(k^w^C)+O[3]+3572445317&4294967295,x=k+(I<<16&4294967295|I>>>16),I=C+(x^k^w)+O[6]+76029189&4294967295,C=x+(I<<23&4294967295|I>>>9),I=w+(C^x^k)+O[9]+3654602809&4294967295,w=C+(I<<4&4294967295|I>>>28),I=k+(w^C^x)+O[12]+3873151461&4294967295,k=w+(I<<11&4294967295|I>>>21),I=x+(k^w^C)+O[15]+530742520&4294967295,x=k+(I<<16&4294967295|I>>>16),I=C+(x^k^w)+O[2]+3299628645&4294967295,C=x+(I<<23&4294967295|I>>>9),I=w+(x^(C|~k))+O[0]+4096336452&4294967295,w=C+(I<<6&4294967295|I>>>26),I=k+(C^(w|~x))+O[7]+1126891415&4294967295,k=w+(I<<10&4294967295|I>>>22),I=x+(w^(k|~C))+O[14]+2878612391&4294967295,x=k+(I<<15&4294967295|I>>>17),I=C+(k^(x|~w))+O[5]+4237533241&4294967295,C=x+(I<<21&4294967295|I>>>11),I=w+(x^(C|~k))+O[12]+1700485571&4294967295,w=C+(I<<6&4294967295|I>>>26),I=k+(C^(w|~x))+O[3]+2399980690&4294967295,k=w+(I<<10&4294967295|I>>>22),I=x+(w^(k|~C))+O[10]+4293915773&4294967295,x=k+(I<<15&4294967295|I>>>17),I=C+(k^(x|~w))+O[1]+2240044497&4294967295,C=x+(I<<21&4294967295|I>>>11),I=w+(x^(C|~k))+O[8]+1873313359&4294967295,w=C+(I<<6&4294967295|I>>>26),I=k+(C^(w|~x))+O[15]+4264355552&4294967295,k=w+(I<<10&4294967295|I>>>22),I=x+(w^(k|~C))+O[6]+2734768916&4294967295,x=k+(I<<15&4294967295|I>>>17),I=C+(k^(x|~w))+O[13]+1309151649&4294967295,C=x+(I<<21&4294967295|I>>>11),I=w+(x^(C|~k))+O[4]+4149444226&4294967295,w=C+(I<<6&4294967295|I>>>26),I=k+(C^(w|~x))+O[11]+3174756917&4294967295,k=w+(I<<10&4294967295|I>>>22),I=x+(w^(k|~C))+O[2]+718787259&4294967295,x=k+(I<<15&4294967295|I>>>17),I=C+(k^(x|~w))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+w&4294967295,R.g[1]=R.g[1]+(x+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+x&4294967295,R.g[3]=R.g[3]+k&4294967295}s.prototype.v=function(R,w){w===void 0&&(w=R.length);const C=w-this.blockSize,O=this.C;let x=this.h,k=0;for(;k<w;){if(x==0)for(;k<=C;)o(this,R,k),k+=this.blockSize;if(typeof R=="string"){for(;k<w;)if(O[x++]=R.charCodeAt(k++),x==this.blockSize){o(this,O),x=0;break}}else for(;k<w;)if(O[x++]=R[k++],x==this.blockSize){o(this,O),x=0;break}}this.h=x,this.o+=w},s.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var w=1;w<R.length-8;++w)R[w]=0;w=this.o*8;for(var C=R.length-8;C<R.length;++C)R[C]=w&255,w/=256;for(this.v(R),R=Array(16),w=0,C=0;C<4;++C)for(let O=0;O<32;O+=8)R[w++]=this.g[C]>>>O&255;return R};function u(R,w){var C=m;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=w(R)}function h(R,w){this.h=w;const C=[];let O=!0;for(let x=R.length-1;x>=0;x--){const k=R[x]|0;O&&k==w||(C[x]=k,O=!1)}this.g=C}var m={};function g(R){return-128<=R&&R<128?u(R,function(w){return new h([w|0],w<0?-1:0)}):new h([R|0],R<0?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return T;if(R<0)return B(p(-R));const w=[];let C=1;for(let O=0;R>=C;O++)w[O]=R/C|0,C*=4294967296;return new h(w,0)}function E(R,w){if(R.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R.charAt(0)=="-")return B(E(R.substring(1),w));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=p(Math.pow(w,8));let O=T;for(let k=0;k<R.length;k+=8){var x=Math.min(8,R.length-k);const I=parseInt(R.substring(k,k+x),w);x<8?(x=p(Math.pow(w,x)),O=O.j(x).add(p(I))):(O=O.j(C),O=O.add(p(I)))}return O}var T=g(0),S=g(1),N=g(16777216);r=h.prototype,r.m=function(){if(U(this))return-B(this).m();let R=0,w=1;for(let C=0;C<this.g.length;C++){const O=this.i(C);R+=(O>=0?O:4294967296+O)*w,w*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(F(this))return"0";if(U(this))return"-"+B(this).toString(R);const w=p(Math.pow(R,6));var C=this;let O="";for(;;){const x=yt(C,w).g;C=st(C,x.j(w));let k=((C.g.length>0?C.g[0]:C.h)>>>0).toString(R);if(C=x,F(C))return k+O;for(;k.length<6;)k="0"+k;O=k+O}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function F(R){if(R.h!=0)return!1;for(let w=0;w<R.g.length;w++)if(R.g[w]!=0)return!1;return!0}function U(R){return R.h==-1}r.l=function(R){return R=st(this,R),U(R)?-1:F(R)?0:1};function B(R){const w=R.g.length,C=[];for(let O=0;O<w;O++)C[O]=~R.g[O];return new h(C,~R.h).add(S)}r.abs=function(){return U(this)?B(this):this},r.add=function(R){const w=Math.max(this.g.length,R.g.length),C=[];let O=0;for(let x=0;x<=w;x++){let k=O+(this.i(x)&65535)+(R.i(x)&65535),I=(k>>>16)+(this.i(x)>>>16)+(R.i(x)>>>16);O=I>>>16,k&=65535,I&=65535,C[x]=I<<16|k}return new h(C,C[C.length-1]&-2147483648?-1:0)};function st(R,w){return R.add(B(w))}r.j=function(R){if(F(this)||F(R))return T;if(U(this))return U(R)?B(this).j(B(R)):B(B(this).j(R));if(U(R))return B(this.j(B(R)));if(this.l(N)<0&&R.l(N)<0)return p(this.m()*R.m());const w=this.g.length+R.g.length,C=[];for(var O=0;O<2*w;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(let x=0;x<R.g.length;x++){const k=this.i(O)>>>16,I=this.i(O)&65535,qt=R.i(x)>>>16,we=R.i(x)&65535;C[2*O+2*x]+=I*we,ct(C,2*O+2*x),C[2*O+2*x+1]+=k*we,ct(C,2*O+2*x+1),C[2*O+2*x+1]+=I*qt,ct(C,2*O+2*x+1),C[2*O+2*x+2]+=k*qt,ct(C,2*O+2*x+2)}for(R=0;R<w;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=w;R<2*w;R++)C[R]=0;return new h(C,0)};function ct(R,w){for(;(R[w]&65535)!=R[w];)R[w+1]+=R[w]>>>16,R[w]&=65535,w++}function at(R,w){this.g=R,this.h=w}function yt(R,w){if(F(w))throw Error("division by zero");if(F(R))return new at(T,T);if(U(R))return w=yt(B(R),w),new at(B(w.g),B(w.h));if(U(w))return w=yt(R,B(w)),new at(B(w.g),w.h);if(R.g.length>30){if(U(R)||U(w))throw Error("slowDivide_ only works with positive integers.");for(var C=S,O=w;O.l(R)<=0;)C=pt(C),O=pt(O);var x=ft(C,1),k=ft(O,1);for(O=ft(O,2),C=ft(C,2);!F(O);){var I=k.add(O);I.l(R)<=0&&(x=x.add(C),k=I),O=ft(O,1),C=ft(C,1)}return w=st(R,x.j(w)),new at(x,w)}for(x=T;R.l(w)>=0;){for(C=Math.max(1,Math.floor(R.m()/w.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),k=p(C),I=k.j(w);U(I)||I.l(R)>0;)C-=O,k=p(C),I=k.j(w);F(k)&&(k=S),x=x.add(k),R=st(R,I)}return new at(x,R)}r.B=function(R){return yt(this,R).h},r.and=function(R){const w=Math.max(this.g.length,R.g.length),C=[];for(let O=0;O<w;O++)C[O]=this.i(O)&R.i(O);return new h(C,this.h&R.h)},r.or=function(R){const w=Math.max(this.g.length,R.g.length),C=[];for(let O=0;O<w;O++)C[O]=this.i(O)|R.i(O);return new h(C,this.h|R.h)},r.xor=function(R){const w=Math.max(this.g.length,R.g.length),C=[];for(let O=0;O<w;O++)C[O]=this.i(O)^R.i(O);return new h(C,this.h^R.h)};function pt(R){const w=R.g.length+1,C=[];for(let O=0;O<w;O++)C[O]=R.i(O)<<1|R.i(O-1)>>>31;return new h(C,R.h)}function ft(R,w){const C=w>>5;w%=32;const O=R.g.length-C,x=[];for(let k=0;k<O;k++)x[k]=w>0?R.i(k+C)>>>w|R.i(k+C+1)<<32-w:R.i(k+C);return new h(x,R.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,MT=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=p,h.fromString=E,Xs=h}).apply(typeof O0<"u"?O0:typeof self<"u"?self:typeof window<"u"?window:{});var yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var VT,lu,kT,wh,hg,PT,LT,UT;(function(){var r,t=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof yh=="object"&&yh];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)t:{var v=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var z=c[A];if(!(z in v))break t;v=v[z]}c=c[c.length-1],A=v[c],y=y(A),y!=A&&y!=null&&t(v,c,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(y){var v=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&v.push([A,y[A]]);return v}});var u=u||{},h=this||self;function m(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function g(c,y,v){return c.call.apply(c.bind,arguments)}function p(c,y,v){return p=g,p.apply(null,arguments)}function E(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function T(c,y){function v(){}v.prototype=y.prototype,c.Z=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(A,z,$){for(var ht=Array(arguments.length-2),Ut=2;Ut<arguments.length;Ut++)ht[Ut-2]=arguments[Ut];return y.prototype[z].apply(A,ht)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function N(c){const y=c.length;if(y>0){const v=Array(y);for(let A=0;A<y;A++)v[A]=c[A];return v}return[]}function F(c,y){for(let A=1;A<arguments.length;A++){const z=arguments[A];var v=typeof z;if(v=v!="object"?v:z?Array.isArray(z)?"array":v:"null",v=="array"||v=="object"&&typeof z.length=="number"){v=c.length||0;const $=z.length||0;c.length=v+$;for(let ht=0;ht<$;ht++)c[v+ht]=z[ht]}else c.push(z)}}class U{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function B(c){h.setTimeout(()=>{throw c},0)}function st(){var c=R;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class ct{constructor(){this.h=this.g=null}add(y,v){const A=at.get();A.set(y,v),this.h?this.h.next=A:this.g=A,this.h=A}}var at=new U(()=>new yt,c=>c.reset());class yt{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let pt,ft=!1,R=new ct,w=()=>{const c=Promise.resolve(void 0);pt=()=>{c.then(C)}};function C(){for(var c;c=st();){try{c.h.call(c.g)}catch(v){B(v)}var y=at;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}ft=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};h.addEventListener("test",v,y),h.removeEventListener("test",v,y)}catch{}return c})();function I(c){return/^[\s\xa0]*$/.test(c)}function qt(c,y){x.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}T(qt,x),qt.prototype.init=function(c,y){const v=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&qt.Z.h.call(this)},qt.prototype.h=function(){qt.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var we="closure_listenable_"+(Math.random()*1e6|0),X=0;function lt(c,y,v,A,z){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!A,this.ha=z,this.key=++X,this.da=this.fa=!1}function St(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Pt(c,y,v){for(const A in c)y.call(v,c[A],A,c)}function Kt(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function M(c){const y={};for(const v in c)y[v]=c[v];return y}const tt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ut(c,y){let v,A;for(let z=1;z<arguments.length;z++){A=arguments[z];for(v in A)c[v]=A[v];for(let $=0;$<tt.length;$++)v=tt[$],Object.prototype.hasOwnProperty.call(A,v)&&(c[v]=A[v])}}function dt(c){this.src=c,this.g={},this.h=0}dt.prototype.add=function(c,y,v,A,z){const $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);const ht=wt(c,y,A,z);return ht>-1?(y=c[ht],v||(y.fa=!1)):(y=new lt(y,this.src,$,!!A,z),y.fa=v,c.push(y)),y};function It(c,y){const v=y.type;if(v in c.g){var A=c.g[v],z=Array.prototype.indexOf.call(A,y,void 0),$;($=z>=0)&&Array.prototype.splice.call(A,z,1),$&&(St(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function wt(c,y,v,A){for(let z=0;z<c.length;++z){const $=c[z];if(!$.da&&$.listener==y&&$.capture==!!v&&$.ha==A)return z}return-1}var Lt="closure_lm_"+(Math.random()*1e6|0),De={};function oe(c,y,v,A,z){if(Array.isArray(y)){for(let $=0;$<y.length;$++)oe(c,y[$],v,A,z);return null}return v=zi(v),c&&c[we]?c.J(y,v,m(A)?!!A.capture:!1,z):Be(c,y,v,!1,A,z)}function Be(c,y,v,A,z,$){if(!y)throw Error("Invalid event type");const ht=m(z)?!!z.capture:!!z;let Ut=kn(c);if(Ut||(c[Lt]=Ut=new dt(c)),v=Ut.add(y,v,A,ht,$),v.proxy)return v;if(A=Ei(),v.proxy=A,A.src=c,A.listener=v,c.addEventListener)k||(z=ht),z===void 0&&(z=!1),c.addEventListener(y.toString(),A,z);else if(c.attachEvent)c.attachEvent(Ye(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ei(){function c(v){return y.call(c.src,c.listener,v)}const y=li;return c}function Vn(c,y,v,A,z){if(Array.isArray(y))for(var $=0;$<y.length;$++)Vn(c,y[$],v,A,z);else A=m(A)?!!A.capture:!!A,v=zi(v),c&&c[we]?(c=c.i,$=String(y).toString(),$ in c.g&&(y=c.g[$],v=wt(y,v,A,z),v>-1&&(St(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete c.g[$],c.h--)))):c&&(c=kn(c))&&(y=c.g[y.toString()],c=-1,y&&(c=wt(y,v,A,z)),(v=c>-1?y[c]:null)&&Ui(v))}function Ui(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[we])It(y.i,c);else{var v=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(v,A,c.capture):y.detachEvent?y.detachEvent(Ye(v),A):y.addListener&&y.removeListener&&y.removeListener(A),(v=kn(y))?(It(v,c),v.h==0&&(v.src=null,y[Lt]=null)):St(c)}}}function Ye(c){return c in De?De[c]:De[c]="on"+c}function li(c,y){if(c.da)c=!0;else{y=new qt(y,this);const v=c.listener,A=c.ha||c.src;c.fa&&Ui(c),c=v.call(A,y)}return c}function kn(c){return c=c[Lt],c instanceof dt?c:null}var nr="__closure_events_fn_"+(Math.random()*1e9>>>0);function zi(c){return typeof c=="function"?c:(c[nr]||(c[nr]=function(y){return c.handleEvent(y)}),c[nr])}function Te(){O.call(this),this.i=new dt(this),this.M=this,this.G=null}T(Te,O),Te.prototype[we]=!0,Te.prototype.removeEventListener=function(c,y,v,A){Vn(this,c,y,v,A)};function le(c,y){var v,A=c.G;if(A)for(v=[];A;A=A.G)v.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new x(y,c);else if(y instanceof x)y.target=y.target||c;else{var z=y;y=new x(A,c),ut(y,z)}z=!0;let $,ht;if(v)for(ht=v.length-1;ht>=0;ht--)$=y.g=v[ht],z=qn($,A,!0,y)&&z;if($=y.g=c,z=qn($,A,!0,y)&&z,z=qn($,A,!1,y)&&z,v)for(ht=0;ht<v.length;ht++)$=y.g=v[ht],z=qn($,A,!1,y)&&z}Te.prototype.N=function(){if(Te.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const v=c.g[y];for(let A=0;A<v.length;A++)St(v[A]);delete c.g[y],c.h--}}this.G=null},Te.prototype.J=function(c,y,v,A){return this.i.add(String(c),y,!1,v,A)},Te.prototype.K=function(c,y,v,A){return this.i.add(String(c),y,!0,v,A)};function qn(c,y,v,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let z=!0;for(let $=0;$<y.length;++$){const ht=y[$];if(ht&&!ht.da&&ht.capture==v){const Ut=ht.listener,Ge=ht.ha||ht.src;ht.fa&&It(c.i,ht),z=Ut.call(Ge,A)!==!1&&z}}return z&&!A.defaultPrevented}function ir(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(c,y||0)}function rr(c){c.g=ir(()=>{c.g=null,c.i&&(c.i=!1,rr(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Xe extends O{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:rr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ji(c){O.call(this),this.h=c,this.g={}}T(ji,O);var Ar=[];function Hn(c){Pt(c.g,function(y,v){this.g.hasOwnProperty(v)&&Ui(y)},c),c.g={}}ji.prototype.N=function(){ji.Z.N.call(this),Hn(this)},ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var An=h.JSON.stringify,Bi=h.JSON.parse,wr=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function Fn(){}function Rr(){}var Gn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function qe(){x.call(this,"d")}T(qe,x);function mn(){x.call(this,"c")}T(mn,x);var be={},Cr=null;function qi(){return Cr=Cr||new Te}be.Ia="serverreachability";function ns(c){x.call(this,be.Ia,c)}T(ns,x);function Zn(c){const y=qi();le(y,new ns(y))}be.STAT_EVENT="statevent";function Hi(c,y){x.call(this,be.STAT_EVENT,c),this.stat=y}T(Hi,x);function Bt(c){const y=qi();le(y,new Hi(y,c))}be.Ja="timingevent";function Se(c,y){x.call(this,be.Ja,c),this.size=y}T(Se,x);function Ae(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},y)}function Pe(){this.g=!0}Pe.prototype.ua=function(){this.g=!1};function gn(c,y,v,A,z,$){c.info(function(){if(c.g)if($){var ht="",Ut=$.split("&");for(let se=0;se<Ut.length;se++){var Ge=Ut[se].split("=");if(Ge.length>1){const xe=Ge[0];Ge=Ge[1];const Ii=xe.split("_");ht=Ii.length>=2&&Ii[1]=="type"?ht+(xe+"="+Ge+"&"):ht+(xe+"=redacted&")}}}else ht=null;else ht=$;return"XMLHTTP REQ ("+A+") [attempt "+z+"]: "+y+`
`+v+`
`+ht})}function Ze(c,y,v,A,z,$,ht){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+z+"]: "+y+`
`+v+`
`+$+" "+ht})}function Me(c,y,v,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+he(c,v)+(A?" "+A:"")})}function K(c,y){c.info(function(){return"TIMEOUT: "+y})}Pe.prototype.info=function(){};function he(c,y){if(!c.g)return y;if(!y)return null;try{const $=JSON.parse(y);if($){for(c=0;c<$.length;c++)if(Array.isArray($[c])){var v=$[c];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var z=A[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ht=1;ht<A.length;ht++)A[ht]=""}}}}return An($)}catch{return y}}var fe={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},He={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ot;function ln(){}T(ln,Fn),ln.prototype.g=function(){return new XMLHttpRequest},ot=new ln;function te(c){return encodeURIComponent(String(c))}function Ne(c){var y=1;c=c.split(":");const v=[];for(;y>0&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function un(c,y,v,A){this.j=c,this.i=y,this.l=v,this.S=A||1,this.V=new ji(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new de}function de(){this.i=null,this.g="",this.h=!1}var Ve={},Fe={};function vt(c,y,v){c.M=1,c.A=wi(H(y)),c.u=v,c.R=!0,is(c,null)}function is(c,y){c.F=Date.now(),Ti(c),c.B=H(c.A);var v=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),to(v.i,"t",A),c.C=0,v=c.j.L,c.h=new de,c.g=cc(c.j,v?y:null,!c.u),c.P>0&&(c.O=new Xe(p(c.Y,c,c.g),c.P)),y=c.V,v=c.g,A=c.ba;var z="readystatechange";Array.isArray(z)||(z&&(Ar[0]=z.toString()),z=Ar);for(let $=0;$<z.length;$++){const ht=oe(v,z[$],A||y.handleEvent,!1,y.h||y);if(!ht)break;y.g[ht.key]=ht}y=c.J?M(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),Zn(),gn(c.i,c.v,c.B,c.l,c.S,c.u)}un.prototype.ba=function(c){c=c.target;const y=this.O;y&&Ki(c)==3?y.j():this.Y(c)},un.prototype.Y=function(c){try{if(c==this.g)t:{const Ut=Ki(this.g),Ge=this.g.ya(),se=this.g.ca();if(!(Ut<3)&&(Ut!=3||this.g&&(this.h.h||this.g.la()||wn(this.g)))){this.K||Ut!=4||Ge==7||(Ge==8||se<=0?Zn(3):Zn(2)),bi(this);var y=this.g.ca();this.X=y;var v=Za(this);if(this.o=y==200,Ze(this.i,this.v,this.B,this.l,this.S,Ut,y),this.o){if(this.U&&!this.L){e:{if(this.g){var A,z=this.g;if((A=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(A)){var $=A;break e}}$=null}if(c=$)Me(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Si(this,c);else{this.o=!1,this.m=3,Bt(12),Pn(this),Kn(this);break t}}if(this.R){c=!0;let xe;for(;!this.K&&this.C<v.length;)if(xe=ha(this,v),xe==Fe){Ut==4&&(this.m=4,Bt(14),c=!1),Me(this.i,this.l,null,"[Incomplete Response]");break}else if(xe==Ve){this.m=4,Bt(15),Me(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else Me(this.i,this.l,xe,null),Si(this,xe);if(Ja(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||v.length!=0||this.h.h||(this.m=1,Bt(16),c=!1),this.o=this.o&&c,!c)Me(this.i,this.l,v,"[Invalid Chunked Response]"),Pn(this),Kn(this);else if(v.length>0&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.aa&&!ht.P&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),bl(ht),ht.P=!0,Bt(11))}}else Me(this.i,this.l,v,null),Si(this,v);Ut==4&&Pn(this),this.o&&!this.K&&(Ut==4?ac(this.j,this):(this.o=!1,Ti(this)))}else Dr(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,Bt(12)):(this.m=0,Bt(13)),Pn(this),Kn(this)}}}catch{}};function Za(c){if(!Ja(c))return c.g.la();const y=wn(c.g);if(y==="")return"";let v="";const A=y.length,z=Ki(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Pn(c),Kn(c),"";c.h.i=new h.TextDecoder}for(let $=0;$<A;$++)c.h.h=!0,v+=c.h.i.decode(y[$],{stream:!(z&&$==A-1)});return y.length=0,c.h.g+=v,c.C=0,c.h.g}function Ja(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function ha(c,y){var v=c.C,A=y.indexOf(`
`,v);return A==-1?Fe:(v=Number(y.substring(v,A)),isNaN(v)?Ve:(A+=1,A+v>y.length?Fe:(y=y.slice(A,A+v),c.C=A+v,y)))}un.prototype.cancel=function(){this.K=!0,Pn(this)};function Ti(c){c.T=Date.now()+c.H,rs(c,c.H)}function rs(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Ae(p(c.aa,c),y)}function bi(c){c.D&&(h.clearTimeout(c.D),c.D=null)}un.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(K(this.i,this.B),this.M!=2&&(Zn(),Bt(17)),Pn(this),this.m=2,Kn(this)):rs(this,this.T-c)};function Kn(c){c.j.I==0||c.K||ac(c.j,c)}function Pn(c){bi(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,Hn(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function Si(c,y){try{var v=c.j;if(v.I!=0&&(v.g==c||Ai(v.h,c))){if(!c.L&&Ai(v.h,c)&&v.I==3){try{var A=v.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var z=A;if(z[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)so(v),ds(v);else break t;Ta(v),Bt(18)}}else v.xa=z[1],0<v.xa-v.K&&z[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Ae(p(v.Va,v),6e3));Jn(v.h)<=1&&v.ta&&(v.ta=void 0)}else cr(v,11)}else if((c.L||v.g==c)&&so(v),!I(y))for(z=v.Ba.g.parse(y),y=0;y<z.length;y++){let se=z[y];const xe=se[0];if(!(xe<=v.K))if(v.K=xe,se=se[1],v.I==2)if(se[0]=="c"){v.M=se[1],v.ba=se[2];const Ii=se[3];Ii!=null&&(v.ka=Ii,v.j.info("VER="+v.ka));const hr=se[4];hr!=null&&(v.za=hr,v.j.info("SVER="+v.za));const Qi=se[5];Qi!=null&&typeof Qi=="number"&&Qi>0&&(A=1.5*Qi,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const $i=c.g;if($i){const ba=$i.g?$i.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ba){var $=A.h;$.g||ba.indexOf("spdy")==-1&&ba.indexOf("quic")==-1&&ba.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(da($,$.h),$.h=null))}if(A.G){const ao=$i.g?$i.g.getResponseHeader("X-HTTP-Session-Id"):null;ao&&(A.wa=ao,Ht(A.J,A.G,ao))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var ht=c;if(A.na=uc(A,A.L?A.ba:null,A.W),ht.L){as(A.h,ht);var Ut=ht,Ge=A.O;Ge&&(Ut.H=Ge),Ut.D&&(bi(Ut),Ti(Ut)),A.g=ht}else rc(A);v.i.length>0&&ur(v)}else se[0]!="stop"&&se[0]!="close"||cr(v,7);else v.I==3&&(se[0]=="stop"||se[0]=="close"?se[0]=="stop"?cr(v,7):El(v):se[0]!="noop"&&v.l&&v.l.qa(se),v.A=0)}}Zn(4)}catch{}}var Le=class{constructor(c,y){this.g=c,this.map=y}};function fa(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ss(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Jn(c){return c.h?1:c.g?c.g.size:0}function Ai(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function da(c,y){c.g?c.g.add(y):c.h=y}function as(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}fa.prototype.cancel=function(){if(this.i=ma(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function ma(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.G);return y}return N(c.i)}var Je=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function L(c,y){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const A=c[v].indexOf("=");let z,$=null;A>=0?(z=c[v].substring(0,A),$=c[v].substring(A+1)):z=c[v],y(z,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Q(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof Q?(this.l=c.l,gt(this,c.j),this.o=c.o,this.g=c.g,bt(this,c.u),this.h=c.h,Jt(this,nc(c.i)),this.m=c.m):c&&(y=String(c).match(Je))?(this.l=!1,gt(this,y[1]||"",!0),this.o=sr(y[2]||""),this.g=sr(y[3]||"",!0),bt(this,y[4]),this.h=sr(y[5]||"",!0),Jt(this,y[6]||"",!0),this.m=sr(y[7]||"")):(this.l=!1,this.i=new ls(null,this.l))}Q.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(ga(y,Wa,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(ga(y,Wa,!0),"@"),c.push(te(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(ga(v,v.charAt(0)=="/"?ml:Wu,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",ga(v,tc)),c.join("")},Q.prototype.resolve=function(c){const y=H(this);let v=!!c.j;v?gt(y,c.j):v=!!c.o,v?y.o=c.o:v=!!c.g,v?y.g=c.g:v=c.u!=null;var A=c.h;if(v)bt(y,c.u);else if(v=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var z=y.h.lastIndexOf("/");z!=-1&&(A=y.h.slice(0,z+1)+A)}if(z=A,z==".."||z==".")A="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){A=z.lastIndexOf("/",0)==0,z=z.split("/");const $=[];for(let ht=0;ht<z.length;){const Ut=z[ht++];Ut=="."?A&&ht==z.length&&$.push(""):Ut==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),A&&ht==z.length&&$.push("")):($.push(Ut),A=!0)}A=$.join("/")}else A=z}return v?y.h=A:v=c.i.toString()!=="",v?Jt(y,nc(c.i)):v=!!c.m,v&&(y.m=c.m),y};function H(c){return new Q(c)}function gt(c,y,v){c.j=v?sr(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function bt(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Jt(c,y,v){y instanceof ls?(c.i=y,eo(c.i,c.l)):(v||(y=ga(y,os)),c.i=new ls(y,c.l))}function Ht(c,y,v){c.i.set(y,v)}function wi(c){return Ht(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function sr(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ga(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,Wn),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Wn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Wa=/[#\/\?@]/g,Wu=/[#\?:]/g,ml=/[#\?]/g,os=/[#\?@]/g,tc=/#/g;function ls(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function ti(c){c.g||(c.g=new Map,c.h=0,c.i&&L(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}r=ls.prototype,r.add=function(c,y){ti(this),this.i=null,c=us(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function ec(c,y){ti(c),y=us(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function gl(c,y){return ti(c),y=us(c,y),c.g.has(y)}r.forEach=function(c,y){ti(this),this.g.forEach(function(v,A){v.forEach(function(z){c.call(y,z,A,this)},this)},this)};function pl(c,y){ti(c);let v=[];if(typeof y=="string")gl(c,y)&&(v=v.concat(c.g.get(us(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)v=v.concat(c[y]);return v}r.set=function(c,y){return ti(this),this.i=null,c=us(this,c),gl(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=pl(this,c),c.length>0?String(c[0]):y):y};function to(c,y,v){ec(c,y),v.length>0&&(c.i=null,c.g.set(us(c,y),N(v)),c.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var v=y[A];const z=te(v);v=pl(this,v);for(let $=0;$<v.length;$++){let ht=z;v[$]!==""&&(ht+="="+te(v[$])),c.push(ht)}}return this.i=c.join("&")};function nc(c){const y=new ls;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function us(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function eo(c,y){y&&!c.j&&(ti(c),c.i=null,c.g.forEach(function(v,A){const z=A.toLowerCase();A!=z&&(ec(this,A),to(this,z,v))},c)),c.j=y}function Fi(c,y){const v=new Pe;if(h.Image){const A=new Image;A.onload=E(Ri,v,"TestLoadImage: loaded",!0,y,A),A.onerror=E(Ri,v,"TestLoadImage: error",!1,y,A),A.onabort=E(Ri,v,"TestLoadImage: abort",!1,y,A),A.ontimeout=E(Ri,v,"TestLoadImage: timeout",!1,y,A),h.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function yl(c,y){const v=new Pe,A=new AbortController,z=setTimeout(()=>{A.abort(),Ri(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then($=>{clearTimeout(z),$.ok?Ri(v,"TestPingServer: ok",!0,y):Ri(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),Ri(v,"TestPingServer: error",!1,y)})}function Ri(c,y,v,A,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),A(v)}catch{}}function cs(){this.g=new wr}function ar(c){this.i=c.Sb||null,this.h=c.ab||!1}T(ar,Fn),ar.prototype.g=function(){return new pa(this.i,this.h)};function pa(c,y){Te.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(pa,Te),r=pa.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,Gi(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hs(this)),this.readyState=0},r.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Gi(this)),this.g&&(this.readyState=3,Gi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;no(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function no(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}r.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?hs(this):Gi(this),this.readyState==3&&no(this)}},r.Oa=function(c){this.g&&(this.response=this.responseText=c,hs(this))},r.Na=function(c){this.g&&(this.response=c,hs(this))},r.ga=function(){this.g&&hs(this)};function hs(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Gi(c)}r.setRequestHeader=function(c,y){this.A.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function Gi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(pa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ci(c){let y="";return Pt(c,function(v,A){y+=A,y+=":",y+=v,y+=`\r
`}),y}function ya(c,y,v){t:{for(A in v){var A=!1;break t}A=!0}A||(v=Ci(v),typeof c=="string"?v!=null&&te(v):Ht(c,y,v))}function me(c){Te.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(me,Te);var or=/^https?$/i,_l=["POST","PUT"];r=me.prototype,r.Fa=function(c){this.H=c},r.ea=function(c,y,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ot.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch($){_a(this,$);return}if(c=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var z in A)v.set(z,A[z]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const $ of A.keys())v.set($,A.get($));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find($=>$.toLowerCase()=="content-type"),z=h.FormData&&c instanceof h.FormData,!(Array.prototype.indexOf.call(_l,y,void 0)>=0)||A||z||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ht]of v)this.g.setRequestHeader($,ht);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch($){_a(this,$)}};function _a(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,vl(c),Ir(c)}function vl(c){c.A||(c.A=!0,le(c,"complete"),le(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,le(this,"complete"),le(this,"abort"),Ir(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ir(this,!0)),me.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?va(this):this.Xa())},r.Xa=function(){va(this)};function va(c){if(c.h&&typeof u<"u"){if(c.v&&Ki(c)==4)setTimeout(c.Ca.bind(c),0);else if(le(c,"readystatechange"),Ki(c)==4){c.h=!1;try{const $=c.ca();t:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break t;default:y=!1}var v;if(!(v=y)){var A;if(A=$===0){let ht=String(c.D).match(Je)[1]||null;!ht&&h.self&&h.self.location&&(ht=h.self.location.protocol.slice(0,-1)),A=!or.test(ht?ht.toLowerCase():"")}v=A}if(v)le(c,"complete"),le(c,"success");else{c.o=6;try{var z=Ki(c)>2?c.g.statusText:""}catch{z=""}c.l=z+" ["+c.ca()+"]",vl(c)}}finally{Ir(c)}}}}function Ir(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,y||le(c,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Ki(c){return c.g?c.g.readyState:0}r.ca=function(){try{return Ki(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Bi(y)}};function wn(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Dr(c){const y={};c=(c.g&&Ki(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(I(c[A]))continue;var v=Ne(c[A]);const z=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const $=y[z]||[];y[z]=$,$.push(v)}Kt(y,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function lr(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function fs(c){this.za=0,this.i=[],this.j=new Pe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=lr("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=lr("baseRetryDelayMs",5e3,c),this.Za=lr("retryDelaySeedMs",1e4,c),this.Ta=lr("forwardChannelMaxRetries",2,c),this.va=lr("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new fa(c&&c.concurrentRequestLimit),this.Ba=new cs,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=fs.prototype,r.ka=8,r.I=1,r.connect=function(c,y,v,A){Bt(0),this.W=c,this.H=y||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=uc(this,null,this.W),ur(this)};function El(c){if(io(c),c.I==3){var y=c.V++,v=H(c.J);if(Ht(v,"SID",c.M),Ht(v,"RID",y),Ht(v,"TYPE","terminate"),Ea(c,v),y=new un(c,c.j,y),y.M=2,y.A=wi(H(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&h.Image&&(new Image().src=y.A,v=!0),v||(y.g=cc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ti(y)}lc(c)}function ds(c){c.g&&(bl(c),c.g.cancel(),c.g=null)}function io(c){ds(c),c.v&&(h.clearTimeout(c.v),c.v=null),so(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&h.clearTimeout(c.m),c.m=null)}function ur(c){if(!ss(c.h)&&!c.m){c.m=!0;var y=c.Ea;pt||w(),ft||(pt(),ft=!0),R.add(y,c),c.D=0}}function ro(c,y){return Jn(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Ae(p(c.Ea,c,y),oc(c,c.D)),c.D++,!0)}r.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const z=new un(this,this.j,c);let $=this.o;if(this.U&&($?($=M($),ut($,this.U)):$=this.U),this.u!==null||this.R||(z.J=$,$=null),this.S)t:{for(var y=0,v=0;v<this.i.length;v++){e:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=v;break t}if(y===4096||v===this.i.length-1){y=v+1;break t}}y=1e3}else y=1e3;y=ic(this,z,y),v=H(this.J),Ht(v,"RID",c),Ht(v,"CVER",22),this.G&&Ht(v,"X-HTTP-Session-Id",this.G),Ea(this,v),$&&(this.R?y="headers="+te(Ci($))+"&"+y:this.u&&ya(v,this.u,$)),da(this.h,z),this.Ra&&Ht(v,"TYPE","init"),this.S?(Ht(v,"$req",y),Ht(v,"SID","null"),z.U=!0,vt(z,v,null)):vt(z,v,y),this.I=2}}else this.I==3&&(c?Tl(this,c):this.i.length==0||ss(this.h)||Tl(this))};function Tl(c,y){var v;y?v=y.l:v=c.V++;const A=H(c.J);Ht(A,"SID",c.M),Ht(A,"RID",v),Ht(A,"AID",c.K),Ea(c,A),c.u&&c.o&&ya(A,c.u,c.o),v=new un(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),y&&(c.i=y.G.concat(c.i)),y=ic(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),da(c.h,v),vt(v,A,y)}function Ea(c,y){c.H&&Pt(c.H,function(v,A){Ht(y,A,v)}),c.l&&Pt({},function(v,A){Ht(y,A,v)})}function ic(c,y,v){v=Math.min(c.i.length,v);const A=c.l?p(c.l.Ka,c.l,c):null;t:{var z=c.i;let Ut=-1;for(;;){const Ge=["count="+v];Ut==-1?v>0?(Ut=z[0].g,Ge.push("ofs="+Ut)):Ut=0:Ge.push("ofs="+Ut);let se=!0;for(let xe=0;xe<v;xe++){var $=z[xe].g;const Ii=z[xe].map;if($-=Ut,$<0)Ut=Math.max(0,z[xe].g-100),se=!1;else try{$="req"+$+"_"||"";try{var ht=Ii instanceof Map?Ii:Object.entries(Ii);for(const[hr,Qi]of ht){let $i=Qi;m(Qi)&&($i=An(Qi)),Ge.push($+hr+"="+encodeURIComponent($i))}}catch(hr){throw Ge.push($+"type="+encodeURIComponent("_badmap")),hr}}catch{A&&A(Ii)}}if(se){ht=Ge.join("&");break t}}ht=void 0}return c=c.i.splice(0,v),y.G=c,ht}function rc(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;pt||w(),ft||(pt(),ft=!0),R.add(y,c),c.A=0}}function Ta(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Ae(p(c.Da,c),oc(c,c.A)),c.A++,!0)}r.Da=function(){if(this.v=null,sc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Ae(p(this.Wa,this),c)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Bt(10),ds(this),sc(this))};function bl(c){c.B!=null&&(h.clearTimeout(c.B),c.B=null)}function sc(c){c.g=new un(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=H(c.na);Ht(y,"RID","rpc"),Ht(y,"SID",c.M),Ht(y,"AID",c.K),Ht(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&Ht(y,"TO",c.ia),Ht(y,"TYPE","xmlhttp"),Ea(c,y),c.u&&c.o&&ya(y,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=wi(H(y)),v.u=null,v.R=!0,is(v,c)}r.Va=function(){this.C!=null&&(this.C=null,ds(this),Ta(this),Bt(19))};function so(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function ac(c,y){var v=null;if(c.g==y){so(c),bl(c),c.g=null;var A=2}else if(Ai(c.h,y))v=y.G,as(c.h,y),A=1;else return;if(c.I!=0){if(y.o)if(A==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var z=c.D;A=qi(),le(A,new Se(A,v)),ur(c)}else rc(c);else if(z=y.m,z==3||z==0&&y.X>0||!(A==1&&ro(c,y)||A==2&&Ta(c)))switch(v&&v.length>0&&(y=c.h,y.i=y.i.concat(v)),z){case 1:cr(c,5);break;case 4:cr(c,10);break;case 3:cr(c,6);break;default:cr(c,2)}}}function oc(c,y){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*y}function cr(c,y){if(c.j.info("Error code "+y),y==2){var v=p(c.bb,c),A=c.Ua;const z=!A;A=new Q(A||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||gt(A,"https"),wi(A),z?Fi(A.toString(),v):yl(A.toString(),v)}else Bt(2);c.I=0,c.l&&c.l.pa(y),lc(c),io(c)}r.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function lc(c){if(c.I=0,c.ja=[],c.l){const y=ma(c.h);(y.length!=0||c.i.length!=0)&&(F(c.ja,y),F(c.ja,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.oa()}}function uc(c,y,v){var A=v instanceof Q?H(v):new Q(v);if(A.g!="")y&&(A.g=y+"."+A.g),bt(A,A.u);else{var z=h.location;A=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;const $=new Q(null);A&&gt($,A),y&&($.g=y),z&&bt($,z),v&&($.h=v),A=$}return v=c.G,y=c.wa,v&&y&&Ht(A,v,y),Ht(A,"VER",c.ka),Ea(c,A),A}function cc(c,y,v){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new me(new ar({ab:v})):new me(c.ma),y.Fa(c.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function hc(){}r=hc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function ms(){}ms.prototype.g=function(c,y){return new Qn(c,y)};function Qn(c,y){Te.call(this),this.g=new fs(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!I(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Nr(this)}T(Qn,Te),Qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qn.prototype.close=function(){El(this.g)},Qn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=An(c),c=v);y.i.push(new Le(y.Ya++,c)),y.I==3&&ur(y)},Qn.prototype.N=function(){this.g.l=null,delete this.j,El(this.g),delete this.g,Qn.Z.N.call(this)};function fc(c){qe.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){t:{for(const v in y){c=v;break t}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}T(fc,qe);function dc(){mn.call(this),this.status=1}T(dc,mn);function Nr(c){this.g=c}T(Nr,hc),Nr.prototype.ra=function(){le(this.g,"a")},Nr.prototype.qa=function(c){le(this.g,new fc(c))},Nr.prototype.pa=function(c){le(this.g,new dc)},Nr.prototype.oa=function(){le(this.g,"b")},ms.prototype.createWebChannel=ms.prototype.g,Qn.prototype.send=Qn.prototype.o,Qn.prototype.open=Qn.prototype.m,Qn.prototype.close=Qn.prototype.close,UT=function(){return new ms},LT=function(){return qi()},PT=be,hg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},fe.NO_ERROR=0,fe.TIMEOUT=8,fe.HTTP_ERROR=6,wh=fe,He.COMPLETE="complete",kT=He,Rr.EventType=Gn,Gn.OPEN="a",Gn.CLOSE="b",Gn.ERROR="c",Gn.MESSAGE="d",Te.prototype.listen=Te.prototype.J,lu=Rr,me.prototype.listenOnce=me.prototype.K,me.prototype.getLastError=me.prototype.Ha,me.prototype.getLastErrorCode=me.prototype.ya,me.prototype.getStatus=me.prototype.ca,me.prototype.getResponseJson=me.prototype.La,me.prototype.getResponseText=me.prototype.la,me.prototype.send=me.prototype.ea,me.prototype.setWithCredentials=me.prototype.Fa,VT=me}).apply(typeof yh<"u"?yh:typeof self<"u"?self:typeof window<"u"?window:{});const M0="@firebase/firestore",V0="4.9.3";class jn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}jn.UNAUTHENTICATED=new jn(null),jn.GOOGLE_CREDENTIALS=new jn("google-credentials-uid"),jn.FIRST_PARTY=new jn("first-party-uid"),jn.MOCK_USER=new jn("mock-user");let al="12.7.0";const Ka=new qg("@firebase/firestore");function Lo(){return Ka.logLevel}function _t(r,...t){if(Ka.logLevel<=Yt.DEBUG){const n=t.map(Gg);Ka.debug(`Firestore (${al}): ${r}`,...n)}}function Zr(r,...t){if(Ka.logLevel<=Yt.ERROR){const n=t.map(Gg);Ka.error(`Firestore (${al}): ${r}`,...n)}}function Xo(r,...t){if(Ka.logLevel<=Yt.WARN){const n=t.map(Gg);Ka.warn(`Firestore (${al}): ${r}`,...n)}}function Gg(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function Ct(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,zT(r,s,n)}function zT(r,t,n){let s=`FIRESTORE (${al}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Zr(s),new Error(s)}function ne(r,t,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||zT(t,o,s)}function Vt(r,t){return r}const nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class mt extends es{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Zs{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}class jT{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class sC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(jn.UNAUTHENTICATED)))}shutdown(){}}class aC{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class oC{constructor(t){this.t=t,this.currentUser=jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ne(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let u=new Zs;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Zs,t.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=u;t.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{_t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(_t("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Zs)}}),0),h()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(_t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ne(typeof s.accessToken=="string",31837,{l:s}),new jT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ne(t===null||typeof t=="string",2055,{h:t}),new jn(t)}}class lC{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=jn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class uC{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new lC(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(jn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class k0{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cC{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ji(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ne(this.o===void 0,3512);const s=u=>{u.error!=null&&_t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,_t("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>s(u)))};const o=u=>{_t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):_t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new k0(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(ne(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new k0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function hC(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}class Kg{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=hC(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=t.charAt(o[u]%62))}return s}}function Xt(r,t){return r<t?-1:r>t?1:0}function fg(r,t){const n=Math.min(r.length,t.length);for(let s=0;s<n;s++){const o=r.charAt(s),u=t.charAt(s);if(o!==u)return jm(o)===jm(u)?Xt(o,u):jm(o)?1:-1}return Xt(r.length,t.length)}const fC=55296,dC=57343;function jm(r){const t=r.charCodeAt(0);return t>=fC&&t<=dC}function Zo(r,t,n){return r.length===t.length&&r.every(((s,o)=>n(s,t[o])))}const P0="__name__";class pr{constructor(t,n,s){n===void 0?n=0:n>t.length&&Ct(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&Ct(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return pr.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof pr?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let o=0;o<s;o++){const u=pr.compareSegments(t.get(o),n.get(o));if(u!==0)return u}return Xt(t.length,n.length)}static compareSegments(t,n){const s=pr.isNumericId(t),o=pr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?pr.extractNumericId(t).compare(pr.extractNumericId(n)):fg(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Xs.fromString(t.substring(4,t.length-2))}}class _e extends pr{construct(t,n,s){return new _e(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new mt(nt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new _e(n)}static emptyPath(){return new _e([])}}const mC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class On extends pr{construct(t,n,s){return new On(t,n,s)}static isValidIdentifier(t){return mC.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),On.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===P0}static keyField(){return new On([P0])}static fromServerFormat(t){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new mt(nt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new mt(nt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new mt(nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(s+=m,o++):(u(),o++)}if(u(),h)throw new mt(nt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new On(n)}static emptyPath(){return new On([])}}class At{constructor(t){this.path=t}static fromPath(t){return new At(_e.fromString(t))}static fromName(t){return new At(_e.fromString(t).popFirst(5))}static empty(){return new At(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&_e.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return _e.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new At(new _e(t.slice()))}}function BT(r,t,n){if(!n)throw new mt(nt.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function gC(r,t,n,s){if(t===!0&&s===!0)throw new mt(nt.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function L0(r){if(!At.isDocumentKey(r))throw new mt(nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function U0(r){if(At.isDocumentKey(r))throw new mt(nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function qT(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function ff(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Ct(12329,{type:typeof r})}function Yr(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new mt(nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ff(r);throw new mt(nt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}function on(r,t){const n={typeString:r};return t&&(n.value=t),n}function Uu(r,t){if(!qT(r))throw new mt(nt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const o=t[s].typeString,u="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new mt(nt.INVALID_ARGUMENT,n);return!0}const z0=-62135596800,j0=1e6;class Ie{static now(){return Ie.fromMillis(Date.now())}static fromDate(t){return Ie.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*j0);return new Ie(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new mt(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new mt(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<z0)throw new mt(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new mt(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/j0}_compareTo(t){return this.seconds===t.seconds?Xt(this.nanoseconds,t.nanoseconds):Xt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ie._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Uu(t,Ie._jsonSchema))return new Ie(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-z0;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ie._jsonSchemaVersion="firestore/timestamp/1.0",Ie._jsonSchema={type:on("string",Ie._jsonSchemaVersion),seconds:on("number"),nanoseconds:on("number")};class Nt{static fromTimestamp(t){return new Nt(t)}static min(){return new Nt(new Ie(0,0))}static max(){return new Nt(new Ie(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ru=-1;function pC(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Nt.fromTimestamp(s===1e9?new Ie(n+1,0):new Ie(n,s));return new ea(o,At.empty(),t)}function yC(r){return new ea(r.readTime,r.key,Ru)}class ea{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new ea(Nt.min(),At.empty(),Ru)}static max(){return new ea(Nt.max(),At.empty(),Ru)}}function _C(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=At.comparator(r.documentKey,t.documentKey),n!==0?n:Xt(r.largestBatchId,t.largestBatchId))}const vC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function ol(r){if(r.code!==nt.FAILED_PRECONDITION||r.message!==vC)throw r;_t("LocalStore","Unexpectedly lost primary lease")}class rt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Ct(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new rt(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof rt?n:rt.resolve(n)}catch(n){return rt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):rt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):rt.reject(n)}static resolve(t){return new rt(((n,s)=>{n(t)}))}static reject(t){return new rt(((n,s)=>{s(t)}))}static waitFor(t){return new rt(((n,s)=>{let o=0,u=0,h=!1;t.forEach((m=>{++o,m.next((()=>{++u,h&&u===o&&n()}),(g=>s(g)))})),h=!0,u===o&&n()}))}static or(t){let n=rt.resolve(!1);for(const s of t)n=n.next((o=>o?rt.resolve(o):s()));return n}static forEach(t,n){const s=[];return t.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(t,n){return new rt(((s,o)=>{const u=t.length,h=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;n(t[p]).next((E=>{h[p]=E,++m,m===u&&s(h)}),(E=>o(E)))}}))}static doWhile(t,n){return new rt(((s,o)=>{const u=()=>{t()===!0?n().next((()=>{u()}),o):s()};u()}))}}function TC(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ll(r){return r.name==="IndexedDbTransactionError"}class df{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}df.ce=-1;const Qg=-1;function zu(r){return r==null}function jh(r){return r===0&&1/r==-1/0}function bC(r){return typeof r=="number"&&Number.isInteger(r)&&!jh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const HT="";function SC(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=B0(t)),t=AC(r.get(n),t);return B0(t)}function AC(r,t){let n=t;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case HT:n+="";break;default:n+=u}}return n}function B0(r){return r+HT+""}function q0(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function ua(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function FT(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}class ke{constructor(t,n){this.comparator=t,this.root=n||xn.EMPTY}insert(t,n){return new ke(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,xn.BLACK,null,null))}remove(t){return new ke(this.comparator,this.root.remove(t,this.comparator).copy(null,null,xn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(t,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new _h(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new _h(this.root,t,this.comparator,!1)}getReverseIterator(){return new _h(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new _h(this.root,t,this.comparator,!0)}}class _h{constructor(t,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?s(t.key,n):1,n&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class xn{constructor(t,n,s,o,u){this.key=t,this.value=n,this.color=s??xn.RED,this.left=o??xn.EMPTY,this.right=u??xn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,o,u){return new xn(t??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let o=this;const u=s(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(t,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return xn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(t,o.key)===0){if(o.right.isEmpty())return xn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,xn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,xn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ct(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ct(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ct(27949);return t+(this.isRed()?0:1)}}xn.EMPTY=null,xn.RED=!0,xn.BLACK=!1;xn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ct(57766)}get value(){throw Ct(16141)}get color(){throw Ct(16727)}get left(){throw Ct(29726)}get right(){throw Ct(36894)}copy(t,n,s,o,u){return this}insert(t,n,s){return new xn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dn{constructor(t){this.comparator=t,this.data=new ke(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,t[1])>=0)return;n(o.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new H0(this.data.getIterator())}getIteratorFrom(t){return new H0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof dn)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new dn(this.comparator);return n.data=t,n}}class H0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class _i{constructor(t){this.fields=t,t.sort(On.comparator)}static empty(){return new _i([])}unionWith(t){let n=new dn(On.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new _i(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Zo(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}class GT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Mn{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new GT("Invalid base64 string: "+u):u}})(t);return new Mn(n)}static fromUint8Array(t){const n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(t);return new Mn(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Xt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Mn.EMPTY_BYTE_STRING=new Mn("");const wC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function na(r){if(ne(!!r,39018),typeof r=="string"){let t=0;const n=wC.exec(r);if(ne(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),t=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:$e(r.seconds),nanos:$e(r.nanos)}}function $e(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ia(r){return typeof r=="string"?Mn.fromBase64String(r):Mn.fromUint8Array(r)}const KT="server_timestamp",QT="__type__",$T="__previous_value__",YT="__local_write_time__";function $g(r){return(r?.mapValue?.fields||{})[QT]?.stringValue===KT}function mf(r){const t=r.mapValue.fields[$T];return $g(t)?mf(t):t}function Cu(r){const t=na(r.mapValue.fields[YT].timestampValue);return new Ie(t.seconds,t.nanos)}class RC{constructor(t,n,s,o,u,h,m,g,p,E){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=E}}const Bh="(default)";class Iu{constructor(t,n){this.projectId=t,this.database=n||Bh}static empty(){return new Iu("","")}get isDefaultDatabase(){return this.database===Bh}isEqual(t){return t instanceof Iu&&t.projectId===this.projectId&&t.database===this.database}}const XT="__type__",CC="__max__",vh={mapValue:{}},ZT="__vector__",qh="value";function ra(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?$g(r)?4:DC(r)?9007199254740991:IC(r)?10:11:Ct(28295,{value:r})}function br(r,t){if(r===t)return!0;const n=ra(r);if(n!==ra(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Cu(r).isEqual(Cu(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=na(o.timestampValue),m=na(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(o,u){return ia(o.bytesValue).isEqual(ia(u.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(o,u){return $e(o.geoPointValue.latitude)===$e(u.geoPointValue.latitude)&&$e(o.geoPointValue.longitude)===$e(u.geoPointValue.longitude)})(r,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return $e(o.integerValue)===$e(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=$e(o.doubleValue),m=$e(u.doubleValue);return h===m?jh(h)===jh(m):isNaN(h)&&isNaN(m)}return!1})(r,t);case 9:return Zo(r.arrayValue.values||[],t.arrayValue.values||[],br);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(q0(h)!==q0(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!br(h[g],m[g])))return!1;return!0})(r,t);default:return Ct(52216,{left:r})}}function Du(r,t){return(r.values||[]).find((n=>br(n,t)))!==void 0}function Jo(r,t){if(r===t)return 0;const n=ra(r),s=ra(t);if(n!==s)return Xt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xt(r.booleanValue,t.booleanValue);case 2:return(function(u,h){const m=$e(u.integerValue||u.doubleValue),g=$e(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(r,t);case 3:return F0(r.timestampValue,t.timestampValue);case 4:return F0(Cu(r),Cu(t));case 5:return fg(r.stringValue,t.stringValue);case 6:return(function(u,h){const m=ia(u),g=ia(h);return m.compareTo(g)})(r.bytesValue,t.bytesValue);case 7:return(function(u,h){const m=u.split("/"),g=h.split("/");for(let p=0;p<m.length&&p<g.length;p++){const E=Xt(m[p],g[p]);if(E!==0)return E}return Xt(m.length,g.length)})(r.referenceValue,t.referenceValue);case 8:return(function(u,h){const m=Xt($e(u.latitude),$e(h.latitude));return m!==0?m:Xt($e(u.longitude),$e(h.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return G0(r.arrayValue,t.arrayValue);case 10:return(function(u,h){const m=u.fields||{},g=h.fields||{},p=m[qh]?.arrayValue,E=g[qh]?.arrayValue,T=Xt(p?.values?.length||0,E?.values?.length||0);return T!==0?T:G0(p,E)})(r.mapValue,t.mapValue);case 11:return(function(u,h){if(u===vh.mapValue&&h===vh.mapValue)return 0;if(u===vh.mapValue)return 1;if(h===vh.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=h.fields||{},E=Object.keys(p);g.sort(),E.sort();for(let T=0;T<g.length&&T<E.length;++T){const S=fg(g[T],E[T]);if(S!==0)return S;const N=Jo(m[g[T]],p[E[T]]);if(N!==0)return N}return Xt(g.length,E.length)})(r.mapValue,t.mapValue);default:throw Ct(23264,{he:n})}}function F0(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Xt(r,t);const n=na(r),s=na(t),o=Xt(n.seconds,s.seconds);return o!==0?o:Xt(n.nanos,s.nanos)}function G0(r,t){const n=r.values||[],s=t.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Jo(n[o],s[o]);if(u)return u}return Xt(n.length,s.length)}function Wo(r){return dg(r)}function dg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=na(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return ia(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return At.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=dg(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${dg(n.fields[h])}`;return o+"}"})(r.mapValue):Ct(61005,{value:r})}function Rh(r){switch(ra(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=mf(r);return t?16+Rh(t):16;case 5:return 2*r.stringValue.length;case 6:return ia(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Rh(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return ua(s.fields,((u,h)=>{o+=u.length+Rh(h)})),o})(r.mapValue);default:throw Ct(13486,{value:r})}}function K0(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function mg(r){return!!r&&"integerValue"in r}function Yg(r){return!!r&&"arrayValue"in r}function Q0(r){return!!r&&"nullValue"in r}function $0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Ch(r){return!!r&&"mapValue"in r}function IC(r){return(r?.mapValue?.fields||{})[XT]?.stringValue===ZT}function gu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return ua(r.mapValue.fields,((n,s)=>t.mapValue.fields[n]=gu(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=gu(r.arrayValue.values[n]);return t}return{...r}}function DC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===CC}class Yn{constructor(t){this.value=t}static empty(){return new Yn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Ch(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=gu(n)}setAll(t){let n=On.emptyPath(),s={},o=[];t.forEach(((h,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=m.popLast()}h?s[m.lastSegment()]=gu(h):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(t){const n=this.field(t.popLast());Ch(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return br(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let o=n.mapValue.fields[t.get(s)];Ch(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(t,n,s){ua(n,((o,u)=>t[o]=u));for(const o of s)delete t[o]}clone(){return new Yn(gu(this.value))}}function JT(r){const t=[];return ua(r.fields,((n,s)=>{const o=new On([n]);if(Ch(s)){const u=JT(s.mapValue).fields;if(u.length===0)t.push(o);else for(const h of u)t.push(o.child(h))}else t.push(o)})),new _i(t)}class bn{constructor(t,n,s,o,u,h,m){this.key=t,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(t){return new bn(t,0,Nt.min(),Nt.min(),Nt.min(),Yn.empty(),0)}static newFoundDocument(t,n,s,o){return new bn(t,1,n,Nt.min(),s,o,0)}static newNoDocument(t,n){return new bn(t,2,n,Nt.min(),Nt.min(),Yn.empty(),0)}static newUnknownDocument(t,n){return new bn(t,3,n,Nt.min(),Nt.min(),Yn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Yn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof bn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hh{constructor(t,n){this.position=t,this.inclusive=n}}function Y0(r,t,n){let s=0;for(let o=0;o<r.position.length;o++){const u=t[o],h=r.position[o];if(u.field.isKeyField()?s=At.comparator(At.fromName(h.referenceValue),n.key):s=Jo(h,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function X0(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!br(r.position[n],t.position[n]))return!1;return!0}class Fh{constructor(t,n="asc"){this.field=t,this.dir=n}}function NC(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}class WT{}class an extends WT{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new OC(t,n,s):n==="array-contains"?new kC(t,s):n==="in"?new PC(t,s):n==="not-in"?new LC(t,s):n==="array-contains-any"?new UC(t,s):new an(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new MC(t,s):new VC(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Jo(n,this.value)):n!==null&&ra(this.value)===ra(n)&&this.matchesComparison(Jo(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ct(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tr extends WT{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new tr(t,n)}matches(t){return tb(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function tb(r){return r.op==="and"}function eb(r){return xC(r)&&tb(r)}function xC(r){for(const t of r.filters)if(t instanceof tr)return!1;return!0}function gg(r){if(r instanceof an)return r.field.canonicalString()+r.op.toString()+Wo(r.value);if(eb(r))return r.filters.map((t=>gg(t))).join(",");{const t=r.filters.map((n=>gg(n))).join(",");return`${r.op}(${t})`}}function nb(r,t){return r instanceof an?(function(s,o){return o instanceof an&&s.op===o.op&&s.field.isEqual(o.field)&&br(s.value,o.value)})(r,t):r instanceof tr?(function(s,o){return o instanceof tr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,h,m)=>u&&nb(h,o.filters[m])),!0):!1})(r,t):void Ct(19439)}function ib(r){return r instanceof an?(function(n){return`${n.field.canonicalString()} ${n.op} ${Wo(n.value)}`})(r):r instanceof tr?(function(n){return n.op.toString()+" {"+n.getFilters().map(ib).join(" ,")+"}"})(r):"Filter"}class OC extends an{constructor(t,n,s){super(t,n,s),this.key=At.fromName(s.referenceValue)}matches(t){const n=At.comparator(t.key,this.key);return this.matchesComparison(n)}}class MC extends an{constructor(t,n){super(t,"in",n),this.keys=rb("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class VC extends an{constructor(t,n){super(t,"not-in",n),this.keys=rb("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function rb(r,t){return(t.arrayValue?.values||[]).map((n=>At.fromName(n.referenceValue)))}class kC extends an{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Yg(n)&&Du(n.arrayValue,this.value)}}class PC extends an{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Du(this.value.arrayValue,n)}}class LC extends an{constructor(t,n){super(t,"not-in",n)}matches(t){if(Du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Du(this.value.arrayValue,n)}}class UC extends an{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Yg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Du(this.value.arrayValue,s)))}}class zC{constructor(t,n=null,s=[],o=[],u=null,h=null,m=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.Te=null}}function Z0(r,t=null,n=[],s=[],o=null,u=null,h=null){return new zC(r,t,n,s,o,u,h)}function Xg(r){const t=Vt(r);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>gg(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),zu(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>Wo(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>Wo(s))).join(",")),t.Te=n}return t.Te}function Zg(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!NC(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!nb(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!X0(r.startAt,t.startAt)&&X0(r.endAt,t.endAt)}function pg(r){return At.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class ju{constructor(t,n=null,s=[],o=[],u=null,h="F",m=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function jC(r,t,n,s,o,u,h,m){return new ju(r,t,n,s,o,u,h,m)}function Jg(r){return new ju(r)}function J0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function sb(r){return r.collectionGroup!==null}function pu(r){const t=Vt(r);if(t.Ie===null){t.Ie=[];const n=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),n.add(u.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new dn(On.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(t).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Fh(u,s))})),n.has(On.keyField().canonicalString())||t.Ie.push(new Fh(On.keyField(),s))}return t.Ie}function yr(r){const t=Vt(r);return t.Ee||(t.Ee=BC(t,pu(r))),t.Ee}function BC(r,t){if(r.limitType==="F")return Z0(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Fh(o.field,u)}));const n=r.endAt?new Hh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Hh(r.startAt.position,r.startAt.inclusive):null;return Z0(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function yg(r,t){const n=r.filters.concat([t]);return new ju(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function _g(r,t,n){return new ju(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function gf(r,t){return Zg(yr(r),yr(t))&&r.limitType===t.limitType}function ab(r){return`${Xg(yr(r))}|lt:${r.limitType}`}function Uo(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>ib(o))).join(", ")}]`),zu(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>Wo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>Wo(o))).join(",")),`Target(${s})`})(yr(r))}; limitType=${r.limitType})`}function pf(r,t){return t.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):At.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,t)&&(function(s,o){for(const u of pu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,t)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,t)&&(function(s,o){return!(s.startAt&&!(function(h,m,g){const p=Y0(h,m,g);return h.inclusive?p<=0:p<0})(s.startAt,pu(s),o)||s.endAt&&!(function(h,m,g){const p=Y0(h,m,g);return h.inclusive?p>=0:p>0})(s.endAt,pu(s),o))})(r,t)}function qC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function ob(r){return(t,n)=>{let s=!1;for(const o of pu(r)){const u=HC(o,t,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function HC(r,t,n){const s=r.field.isKeyField()?At.comparator(t.key,n.key):(function(u,h,m){const g=h.data.field(u),p=m.data.field(u);return g!==null&&p!==null?Jo(g,p):Ct(42886)})(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ct(19790,{direction:r.dir})}}class Ya{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),o=this.inner[s];if(o===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,n]);o.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(t){ua(this.inner,((n,s)=>{for(const[o,u]of s)t(o,u)}))}isEmpty(){return FT(this.inner)}size(){return this.innerSize}}const FC=new ke(At.comparator);function Jr(){return FC}const lb=new ke(At.comparator);function uu(...r){let t=lb;for(const n of r)t=t.insert(n.key,n);return t}function ub(r){let t=lb;return r.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function qa(){return yu()}function cb(){return yu()}function yu(){return new Ya((r=>r.toString()),((r,t)=>r.isEqual(t)))}const GC=new ke(At.comparator),KC=new dn(At.comparator);function Zt(...r){let t=KC;for(const n of r)t=t.add(n);return t}const QC=new dn(Xt);function $C(){return QC}function Wg(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jh(t)?"-0":t}}function hb(r){return{integerValue:""+r}}function YC(r,t){return bC(t)?hb(t):Wg(r,t)}class yf{constructor(){this._=void 0}}function XC(r,t,n){return r instanceof Gh?(function(o,u){const h={fields:{[QT]:{stringValue:KT},[YT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&$g(u)&&(u=mf(u)),u&&(h.fields[$T]=u),{mapValue:h}})(n,t):r instanceof Nu?db(r,t):r instanceof xu?mb(r,t):(function(o,u){const h=fb(o,u),m=W0(h)+W0(o.Ae);return mg(h)&&mg(o.Ae)?hb(m):Wg(o.serializer,m)})(r,t)}function ZC(r,t,n){return r instanceof Nu?db(r,t):r instanceof xu?mb(r,t):n}function fb(r,t){return r instanceof Kh?(function(s){return mg(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(t)?t:{integerValue:0}:null}class Gh extends yf{}class Nu extends yf{constructor(t){super(),this.elements=t}}function db(r,t){const n=gb(t);for(const s of r.elements)n.some((o=>br(o,s)))||n.push(s);return{arrayValue:{values:n}}}class xu extends yf{constructor(t){super(),this.elements=t}}function mb(r,t){let n=gb(t);for(const s of r.elements)n=n.filter((o=>!br(o,s)));return{arrayValue:{values:n}}}class Kh extends yf{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function W0(r){return $e(r.integerValue||r.doubleValue)}function gb(r){return Yg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function JC(r,t){return r.field.isEqual(t.field)&&(function(s,o){return s instanceof Nu&&o instanceof Nu||s instanceof xu&&o instanceof xu?Zo(s.elements,o.elements,br):s instanceof Kh&&o instanceof Kh?br(s.Ae,o.Ae):s instanceof Gh&&o instanceof Gh})(r.transform,t.transform)}class WC{constructor(t,n){this.version=t,this.transformResults=n}}class Xn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Xn}static exists(t){return new Xn(void 0,t)}static updateTime(t){return new Xn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ih(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class _f{}function pb(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new tp(r.key,Xn.none()):new Bu(r.key,r.data,Xn.none());{const n=r.data,s=Yn.empty();let o=new dn(On.comparator);for(let u of t.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new ca(r.key,s,new _i(o.toArray()),Xn.none())}}function t2(r,t,n){r instanceof Bu?(function(o,u,h){const m=o.value.clone(),g=eE(o.fieldTransforms,u,h.transformResults);m.setAll(g),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,t,n):r instanceof ca?(function(o,u,h){if(!Ih(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=eE(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(yb(o)),g.setAll(m),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,t,n):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,t,n)}function _u(r,t,n,s){return r instanceof Bu?(function(u,h,m,g){if(!Ih(u.precondition,h))return m;const p=u.value.clone(),E=nE(u.fieldTransforms,g,h);return p.setAll(E),h.convertToFoundDocument(h.version,p).setHasLocalMutations(),null})(r,t,n,s):r instanceof ca?(function(u,h,m,g){if(!Ih(u.precondition,h))return m;const p=nE(u.fieldTransforms,g,h),E=h.data;return E.setAll(yb(u)),E.setAll(p),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(r,t,n,s):(function(u,h,m){return Ih(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(r,t,n)}function e2(r,t){let n=null;for(const s of r.fieldTransforms){const o=t.data.field(s.field),u=fb(s.transform,o||null);u!=null&&(n===null&&(n=Yn.empty()),n.set(s.field,u))}return n||null}function tE(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Zo(s,o,((u,h)=>JC(u,h)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Bu extends _f{constructor(t,n,s,o=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ca extends _f{constructor(t,n,s,o,u=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function yb(r){const t=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}})),t}function eE(r,t,n){const s=new Map;ne(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],h=u.transform,m=t.data.field(u.field);s.set(u.field,ZC(h,m,n[o]))}return s}function nE(r,t,n){const s=new Map;for(const o of r){const u=o.transform,h=n.data.field(o.field);s.set(o.field,XC(u,h,t))}return s}class tp extends _f{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _b extends _f{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class n2{constructor(t,n,s,o){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&t2(u,t,s[o])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=_u(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=_u(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=cb();return this.mutations.forEach((o=>{const u=t.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=n.has(o.key)?null:m;const g=pb(h,m);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Nt.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Zt())}isEqual(t){return this.batchId===t.batchId&&Zo(this.mutations,t.mutations,((n,s)=>tE(n,s)))&&Zo(this.baseMutations,t.baseMutations,((n,s)=>tE(n,s)))}}class ep{constructor(t,n,s,o){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(t,n,s){ne(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let o=(function(){return GC})();const u=t.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new ep(t,n,s,o)}}class i2{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class r2{constructor(t,n){this.count=t,this.unchangedNames=n}}var sn,ee;function vb(r){switch(r){case nt.OK:return Ct(64938);case nt.CANCELLED:case nt.UNKNOWN:case nt.DEADLINE_EXCEEDED:case nt.RESOURCE_EXHAUSTED:case nt.INTERNAL:case nt.UNAVAILABLE:case nt.UNAUTHENTICATED:return!1;case nt.INVALID_ARGUMENT:case nt.NOT_FOUND:case nt.ALREADY_EXISTS:case nt.PERMISSION_DENIED:case nt.FAILED_PRECONDITION:case nt.ABORTED:case nt.OUT_OF_RANGE:case nt.UNIMPLEMENTED:case nt.DATA_LOSS:return!0;default:return Ct(15467,{code:r})}}function Eb(r){if(r===void 0)return Zr("GRPC error has no .code"),nt.UNKNOWN;switch(r){case sn.OK:return nt.OK;case sn.CANCELLED:return nt.CANCELLED;case sn.UNKNOWN:return nt.UNKNOWN;case sn.DEADLINE_EXCEEDED:return nt.DEADLINE_EXCEEDED;case sn.RESOURCE_EXHAUSTED:return nt.RESOURCE_EXHAUSTED;case sn.INTERNAL:return nt.INTERNAL;case sn.UNAVAILABLE:return nt.UNAVAILABLE;case sn.UNAUTHENTICATED:return nt.UNAUTHENTICATED;case sn.INVALID_ARGUMENT:return nt.INVALID_ARGUMENT;case sn.NOT_FOUND:return nt.NOT_FOUND;case sn.ALREADY_EXISTS:return nt.ALREADY_EXISTS;case sn.PERMISSION_DENIED:return nt.PERMISSION_DENIED;case sn.FAILED_PRECONDITION:return nt.FAILED_PRECONDITION;case sn.ABORTED:return nt.ABORTED;case sn.OUT_OF_RANGE:return nt.OUT_OF_RANGE;case sn.UNIMPLEMENTED:return nt.UNIMPLEMENTED;case sn.DATA_LOSS:return nt.DATA_LOSS;default:return Ct(39323,{code:r})}}(ee=sn||(sn={}))[ee.OK=0]="OK",ee[ee.CANCELLED=1]="CANCELLED",ee[ee.UNKNOWN=2]="UNKNOWN",ee[ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ee[ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ee[ee.NOT_FOUND=5]="NOT_FOUND",ee[ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",ee[ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",ee[ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",ee[ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ee[ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ee[ee.ABORTED=10]="ABORTED",ee[ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",ee[ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",ee[ee.INTERNAL=13]="INTERNAL",ee[ee.UNAVAILABLE=14]="UNAVAILABLE",ee[ee.DATA_LOSS=15]="DATA_LOSS";function s2(){return new TextEncoder}const a2=new Xs([4294967295,4294967295],0);function iE(r){const t=s2().encode(r),n=new MT;return n.update(t),new Uint8Array(n.digest())}function rE(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Xs([n,s],0),new Xs([o,u],0)]}class np{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new cu(`Invalid padding: ${n}`);if(s<0)throw new cu(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new cu(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new cu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Xs.fromNumber(this.ge)}ye(t,n,s){let o=t.add(n.multiply(Xs.fromNumber(s)));return o.compare(a2)===1&&(o=new Xs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=iE(t),[s,o]=rE(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);if(!this.we(h))return!1}return!0}static create(t,n,s){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),h=new np(u,o,n);return s.forEach((m=>h.insert(m))),h}insert(t){if(this.ge===0)return;const n=iE(t),[s,o]=rE(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);this.Se(h)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class cu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vf{constructor(t,n,s,o,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const o=new Map;return o.set(t,qu.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new vf(Nt.min(),o,new ke(Xt),Jr(),Zt())}}class qu{constructor(t,n,s,o,u){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new qu(s,n,Zt(),Zt(),Zt())}}class Dh{constructor(t,n,s,o){this.be=t,this.removedTargetIds=n,this.key=s,this.De=o}}class Tb{constructor(t,n){this.targetId=t,this.Ce=n}}class bb{constructor(t,n,s=Mn.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=o}}class sE{constructor(){this.ve=0,this.Fe=aE(),this.Me=Mn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Zt(),n=Zt(),s=Zt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ct(38017,{changeType:u})}})),new qu(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=aE()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ne(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class o2{constructor(t){this.Ge=t,this.ze=new Map,this.je=Jr(),this.Je=Eh(),this.He=Eh(),this.Ye=new ke(Xt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:Ct(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(t){const n=t.targetId,s=t.Ce.count,o=this.ot(n);if(o){const u=o.target;if(pg(u))if(s===0){const h=new At(u.path);this.et(n,h,bn.newNoDocument(h,Nt.min()))}else ne(s===1,20013,{expectedCount:s});else{const h=this._t(n);if(h!==s){const m=this.ut(t),g=m?this.ct(m,t,h):1;if(g!==0){this.it(n);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let h,m;try{h=ia(s).toUint8Array()}catch(g){if(g instanceof GT)return Xo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new np(h,o,u)}catch(g){return Xo(g instanceof cu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(t){const n=new Map;this.ze.forEach(((u,h)=>{const m=this.ot(h);if(m){if(u.current&&pg(m.target)){const g=new At(m.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,bn.newNoDocument(g,t))}u.Be&&(n.set(h,u.ke()),u.qe())}}));let s=Zt();this.He.forEach(((u,h)=>{let m=!0;h.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(t)));const o=new vf(t,n,this.Ye,this.je,s);return this.je=Jr(),this.Je=Eh(),this.He=Eh(),this.Ye=new ke(Xt),o}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new sE,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new dn(Xt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new dn(Xt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||_t("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new sE),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Eh(){return new ke(At.comparator)}function aE(){return new ke(At.comparator)}const l2={asc:"ASCENDING",desc:"DESCENDING"},u2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},c2={and:"AND",or:"OR"};class h2{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function vg(r,t){return r.useProto3Json||zu(t)?t:{value:t}}function Qh(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Sb(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function f2(r,t){return Qh(r,t.toTimestamp())}function vi(r){return ne(!!r,49232),Nt.fromTimestamp((function(n){const s=na(n);return new Ie(s.seconds,s.nanos)})(r))}function ip(r,t){return Eg(r,t).canonicalString()}function Eg(r,t){const n=(function(o){return new _e(["projects",o.projectId,"databases",o.database])})(r).child("documents");return t===void 0?n:n.child(t)}function Ab(r){const t=_e.fromString(r);return ne(Nb(t),10190,{key:t.toString()}),t}function $h(r,t){return ip(r.databaseId,t.path)}function vu(r,t){const n=Ab(t);if(n.get(1)!==r.databaseId.projectId)throw new mt(nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new mt(nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new At(Rb(n))}function wb(r,t){return ip(r.databaseId,t)}function d2(r){const t=Ab(r);return t.length===4?_e.emptyPath():Rb(t)}function Tg(r){return new _e(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Rb(r){return ne(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function oE(r,t,n){return{name:$h(r,t),fields:n.value.mapValue.fields}}function m2(r,t){return"found"in t?(function(s,o){ne(!!o.found,43571),o.found.name,o.found.updateTime;const u=vu(s,o.found.name),h=vi(o.found.updateTime),m=o.found.createTime?vi(o.found.createTime):Nt.min(),g=new Yn({mapValue:{fields:o.found.fields}});return bn.newFoundDocument(u,h,m,g)})(r,t):"missing"in t?(function(s,o){ne(!!o.missing,3894),ne(!!o.readTime,22933);const u=vu(s,o.missing),h=vi(o.readTime);return bn.newNoDocument(u,h)})(r,t):Ct(7234,{result:t})}function g2(r,t){let n;if("targetChange"in t){t.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ct(39313,{state:p})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(p,E){return p.useProto3Json?(ne(E===void 0||typeof E=="string",58123),Mn.fromBase64String(E||"")):(ne(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Mn.fromUint8Array(E||new Uint8Array))})(r,t.targetChange.resumeToken),h=t.targetChange.cause,m=h&&(function(p){const E=p.code===void 0?nt.UNKNOWN:Eb(p.code);return new mt(E,p.message||"")})(h);n=new bb(s,o,u,m||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const o=vu(r,s.document.name),u=vi(s.document.updateTime),h=s.document.createTime?vi(s.document.createTime):Nt.min(),m=new Yn({mapValue:{fields:s.document.fields}}),g=bn.newFoundDocument(o,u,h,m),p=s.targetIds||[],E=s.removedTargetIds||[];n=new Dh(p,E,g.key,g)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const o=vu(r,s.document),u=s.readTime?vi(s.readTime):Nt.min(),h=bn.newNoDocument(o,u),m=s.removedTargetIds||[];n=new Dh([],m,h.key,h)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const o=vu(r,s.document),u=s.removedTargetIds||[];n=new Dh([],u,o,null)}else{if(!("filter"in t))return Ct(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new r2(o,u),m=s.targetId;n=new Tb(m,h)}}return n}function Cb(r,t){let n;if(t instanceof Bu)n={update:oE(r,t.key,t.value)};else if(t instanceof tp)n={delete:$h(r,t.key)};else if(t instanceof ca)n={update:oE(r,t.key,t.data),updateMask:A2(t.fieldMask)};else{if(!(t instanceof _b))return Ct(16599,{Vt:t.type});n={verify:$h(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(u,h){const m=h.transform;if(m instanceof Gh)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Nu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof xu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Kh)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw Ct(20930,{transform:h.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:f2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ct(27497)})(r,t.precondition)),n}function p2(r,t){return r&&r.length>0?(ne(t!==void 0,14353),r.map((n=>(function(o,u){let h=o.updateTime?vi(o.updateTime):vi(u);return h.isEqual(Nt.min())&&(h=vi(u)),new WC(h,o.transformResults||[])})(n,t)))):[]}function y2(r,t){return{documents:[wb(r,t.path)]}}function _2(r,t){const n={structuredQuery:{}},s=t.path;let o;t.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=wb(r,o);const u=(function(p){if(p.length!==0)return Db(tr.create(p,"and"))})(t.filters);u&&(n.structuredQuery.where=u);const h=(function(p){if(p.length!==0)return p.map((E=>(function(S){return{field:zo(S.field),direction:T2(S.dir)}})(E)))})(t.orderBy);h&&(n.structuredQuery.orderBy=h);const m=vg(r,t.limit);return m!==null&&(n.structuredQuery.limit=m),t.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(t.endAt)),{ft:n,parent:o}}function v2(r){let t=d2(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){ne(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:t=t.child(E.collectionId)}let u=[];n.where&&(u=(function(T){const S=Ib(T);return S instanceof tr&&eb(S)?S.getFilters():[S]})(n.where));let h=[];n.orderBy&&(h=(function(T){return T.map((S=>(function(F){return new Fh(jo(F.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(S)))})(n.orderBy));let m=null;n.limit&&(m=(function(T){let S;return S=typeof T=="object"?T.value:T,zu(S)?null:S})(n.limit));let g=null;n.startAt&&(g=(function(T){const S=!!T.before,N=T.values||[];return new Hh(N,S)})(n.startAt));let p=null;return n.endAt&&(p=(function(T){const S=!T.before,N=T.values||[];return new Hh(N,S)})(n.endAt)),jC(t,o,h,u,m,"F",g,p)}function E2(r,t){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ct(28987,{purpose:o})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Ib(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=jo(n.unaryFilter.field);return an.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=jo(n.unaryFilter.field);return an.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=jo(n.unaryFilter.field);return an.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=jo(n.unaryFilter.field);return an.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ct(61313);default:return Ct(60726)}})(r):r.fieldFilter!==void 0?(function(n){return an.create(jo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ct(58110);default:return Ct(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return tr.create(n.compositeFilter.filters.map((s=>Ib(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ct(1026)}})(n.compositeFilter.op))})(r):Ct(30097,{filter:r})}function T2(r){return l2[r]}function b2(r){return u2[r]}function S2(r){return c2[r]}function zo(r){return{fieldPath:r.canonicalString()}}function jo(r){return On.fromServerFormat(r.fieldPath)}function Db(r){return r instanceof an?(function(n){if(n.op==="=="){if($0(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NAN"}};if(Q0(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($0(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NOT_NAN"}};if(Q0(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(n.field),op:b2(n.op),value:n.value}}})(r):r instanceof tr?(function(n){const s=n.getFilters().map((o=>Db(o)));return s.length===1?s[0]:{compositeFilter:{op:S2(n.op),filters:s}}})(r):Ct(54877,{filter:r})}function A2(r){const t=[];return r.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function Nb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Ks{constructor(t,n,s,o,u=Nt.min(),h=Nt.min(),m=Mn.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new Ks(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class w2{constructor(t){this.yt=t}}function R2(r){const t=v2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?_g(t,t.limit,"L"):t}class C2{constructor(){this.Cn=new I2}addToCollectionParentIndex(t,n){return this.Cn.add(n),rt.resolve()}getCollectionParents(t,n){return rt.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return rt.resolve()}deleteFieldIndex(t,n){return rt.resolve()}deleteAllFieldIndexes(t){return rt.resolve()}createTargetIndexes(t,n){return rt.resolve()}getDocumentsMatchingTarget(t,n){return rt.resolve(null)}getIndexType(t,n){return rt.resolve(0)}getFieldIndexes(t,n){return rt.resolve([])}getNextCollectionGroupToUpdate(t){return rt.resolve(null)}getMinOffset(t,n){return rt.resolve(ea.min())}getMinOffsetFromCollectionGroup(t,n){return rt.resolve(ea.min())}updateCollectionGroup(t,n,s){return rt.resolve()}updateIndexEntries(t,n){return rt.resolve()}}class I2{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),o=this.index[n]||new dn(_e.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(t){const n=t.lastSegment(),s=t.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(t){return(this.index[t]||new dn(_e.comparator)).toArray()}}const lE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xb=41943040;class ai{static withCacheSize(t){return new ai(t,ai.DEFAULT_COLLECTION_PERCENTILE,ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}ai.DEFAULT_COLLECTION_PERCENTILE=10,ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ai.DEFAULT=new ai(xb,ai.DEFAULT_COLLECTION_PERCENTILE,ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ai.DISABLED=new ai(-1,0,0);class tl{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new tl(0)}static cr(){return new tl(-1)}}const uE="LruGarbageCollector",D2=1048576;function cE([r,t],[n,s]){const o=Xt(r,n);return o===0?Xt(t,s):o}class N2{constructor(t){this.Ir=t,this.buffer=new dn(cE),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();cE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class x2{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){_t(uE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ll(n)?_t(uE,"Ignoring IndexedDB error during garbage collection: ",n):await ol(n)}await this.Vr(3e5)}))}}class O2{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return rt.resolve(df.ce);const s=new N2(n);return this.mr.forEachTarget(t,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(_t("LruGarbageCollector","Garbage collection skipped; disabled"),rt.resolve(lE)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(_t("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lE):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,o,u,h,m,g,p;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(_t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(t,o)))).next((T=>(s=T,m=Date.now(),this.removeTargets(t,s,n)))).next((T=>(u=T,g=Date.now(),this.removeOrphanedDocuments(t,s)))).next((T=>(p=Date.now(),Lo()<=Yt.DEBUG&&_t("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${T} documents in `+(p-g)+`ms
Total Duration: ${p-E}ms`),rt.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function M2(r,t){return new O2(r,t)}class V2{constructor(){this.changes=new Ya((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,bn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?rt.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class k2{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}class P2{constructor(t,n,s,o){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(t,n)))).next((o=>(s!==null&&_u(s.mutation,o,_i.empty(),Ie.now()),o)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,Zt()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=Zt()){const o=qa();return this.populateOverlays(t,o,n).next((()=>this.computeViews(t,n,o,s).next((u=>{let h=uu();return u.forEach(((m,g)=>{h=h.insert(m,g.overlayedDocument)})),h}))))}getOverlayedDocuments(t,n){const s=qa();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,Zt())))}populateOverlays(t,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((h,m)=>{n.set(h,m)}))}))}computeViews(t,n,s,o){let u=Jr();const h=yu(),m=(function(){return yu()})();return n.forEach(((g,p)=>{const E=s.get(p.key);o.has(p.key)&&(E===void 0||E.mutation instanceof ca)?u=u.insert(p.key,p):E!==void 0?(h.set(p.key,E.mutation.getFieldMask()),_u(E.mutation,p,E.mutation.getFieldMask(),Ie.now())):h.set(p.key,_i.empty())})),this.recalculateAndSaveOverlays(t,u).next((g=>(g.forEach(((p,E)=>h.set(p,E))),n.forEach(((p,E)=>m.set(p,new k2(E,h.get(p)??null)))),m)))}recalculateAndSaveOverlays(t,n){const s=yu();let o=new ke(((h,m)=>h-m)),u=Zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((h=>{for(const m of h)m.keys().forEach((g=>{const p=n.get(g);if(p===null)return;let E=s.get(g)||_i.empty();E=m.applyToLocalView(p,E),s.set(g,E);const T=(o.get(m.batchId)||Zt()).add(g);o=o.insert(m.batchId,T)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,E=g.value,T=cb();E.forEach((S=>{if(!u.has(S)){const N=pb(n.get(S),s.get(S));N!==null&&T.set(S,N),u=u.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(t,p,T))}return rt.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,o){return(function(h){return At.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):sb(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,o):this.getDocumentsMatchingCollectionQuery(t,n,s,o)}getNextDocuments(t,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,o-u.size):rt.resolve(qa());let m=Ru,g=u;return h.next((p=>rt.forEach(p,((E,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(E)?rt.resolve():this.remoteDocumentCache.getEntry(t,E).next((S=>{g=g.insert(E,S)}))))).next((()=>this.populateOverlays(t,p,u))).next((()=>this.computeViews(t,g,p,Zt()))).next((E=>({batchId:m,changes:ub(E)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new At(n)).next((s=>{let o=uu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,o){const u=n.collectionGroup;let h=uu();return this.indexManager.getCollectionParents(t,u).next((m=>rt.forEach(m,(g=>{const p=(function(T,S){return new ju(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,p,s,o).next((E=>{E.forEach(((T,S)=>{h=h.insert(T,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(t,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,u,o)))).next((h=>{u.forEach(((g,p)=>{const E=p.getKey();h.get(E)===null&&(h=h.insert(E,bn.newInvalidDocument(E)))}));let m=uu();return h.forEach(((g,p)=>{const E=u.get(g);E!==void 0&&_u(E.mutation,p,_i.empty(),Ie.now()),pf(n,p)&&(m=m.insert(g,p))})),m}))}}class L2{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return rt.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:vi(o.createTime)}})(n)),rt.resolve()}getNamedQuery(t,n){return rt.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:R2(o.bundledQuery),readTime:vi(o.readTime)}})(n)),rt.resolve()}}class U2{constructor(){this.overlays=new ke(At.comparator),this.qr=new Map}getOverlay(t,n){return rt.resolve(this.overlays.get(n))}getOverlays(t,n){const s=qa();return rt.forEach(n,(o=>this.getOverlay(t,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((o,u)=>{this.St(t,n,u)})),rt.resolve()}removeOverlaysForBatchId(t,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),rt.resolve()}getOverlaysForCollection(t,n,s){const o=qa(),u=n.length+1,h=new At(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return rt.resolve(o)}getOverlaysForCollectionGroup(t,n,s,o){let u=new ke(((p,E)=>p-E));const h=this.overlays.getIterator();for(;h.hasNext();){const p=h.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>s){let E=u.get(p.largestBatchId);E===null&&(E=qa(),u=u.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const m=qa(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,E)=>m.set(p,E))),!(m.size()>=o)););return rt.resolve(m)}St(t,n,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new i2(n,s));let u=this.qr.get(n);u===void 0&&(u=Zt(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}class z2{constructor(){this.sessionToken=Mn.EMPTY_BYTE_STRING}getSessionToken(t){return rt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,rt.resolve()}}class rp{constructor(){this.Qr=new dn(vn.$r),this.Ur=new dn(vn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new vn(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new vn(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new At(new _e([])),s=new vn(n,t),o=new vn(n,t+1),u=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new At(new _e([])),s=new vn(n,t),o=new vn(n,t+1);let u=Zt();return this.Ur.forEachInRange([s,o],(h=>{u=u.add(h.key)})),u}containsKey(t){const n=new vn(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class vn{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return At.comparator(t.key,n.key)||Xt(t.Yr,n.Yr)}static Kr(t,n){return Xt(t.Yr,n.Yr)||At.comparator(t.key,n.key)}}class j2{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new dn(vn.$r)}checkEmpty(t){return rt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new n2(u,n,s,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new vn(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return rt.resolve(h)}lookupMutationBatch(t,n){return rt.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return rt.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return rt.resolve(this.mutationQueue.length===0?Qg:this.tr-1)}getAllMutationBatches(t){return rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new vn(n,0),o=new vn(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(h=>{const m=this.Xr(h.Yr);u.push(m)})),rt.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new dn(Xt);return n.forEach((o=>{const u=new vn(o,0),h=new vn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(m=>{s=s.add(m.Yr)}))})),rt.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,o=s.length+1;let u=s;At.isDocumentKey(u)||(u=u.child(""));const h=new vn(new At(u),0);let m=new dn(Xt);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),h),rt.resolve(this.ti(m))}ti(t){const n=[];return t.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(t,n){ne(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return rt.forEach(n.mutations,(o=>{const u=new vn(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new vn(n,0),o=this.Zr.firstAfterOrEqual(s);return rt.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,rt.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class B2{constructor(t){this.ri=t,this.docs=(function(){return new ke(At.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return rt.resolve(s?s.document.mutableCopy():bn.newInvalidDocument(n))}getEntries(t,n){let s=Jr();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():bn.newInvalidDocument(o))})),rt.resolve(s)}getDocumentsMatchingQuery(t,n,s,o){let u=Jr();const h=n.path,m=new At(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:E}}=g.getNext();if(!h.isPrefixOf(p.path))break;p.path.length>h.length+1||_C(yC(E),s)<=0||(o.has(E.key)||pf(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return rt.resolve(u)}getAllFromCollectionGroup(t,n,s,o){Ct(9500)}ii(t,n){return rt.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new q2(this)}getSize(t){return rt.resolve(this.size)}}class q2 extends V2{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(s)})),rt.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}class H2{constructor(t){this.persistence=t,this.si=new Ya((n=>Xg(n)),Zg),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.oi=0,this._i=new rp,this.targetCount=0,this.ai=tl.ur()}forEachTarget(t,n){return this.si.forEach(((s,o)=>n(o))),rt.resolve()}getLastRemoteSnapshotVersion(t){return rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return rt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),rt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),rt.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new tl(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,rt.resolve()}updateTargetData(t,n){return this.Pr(n),rt.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,rt.resolve()}removeTargets(t,n,s){let o=0;const u=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)})),rt.waitFor(u).next((()=>o))}getTargetCount(t){return rt.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return rt.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),rt.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((h=>{u.push(o.markPotentiallyOrphaned(t,h))})),rt.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),rt.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return rt.resolve(s)}containsKey(t,n){return rt.resolve(this._i.containsKey(n))}}class Ob{constructor(t,n){this.ui={},this.overlays={},this.ci=new df(0),this.li=!1,this.li=!0,this.hi=new z2,this.referenceDelegate=t(this),this.Pi=new H2(this),this.indexManager=new C2,this.remoteDocumentCache=(function(o){return new B2(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new w2(n),this.Ii=new L2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new U2,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new j2(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){_t("MemoryPersistence","Starting transaction:",t);const o=new F2(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,n){return rt.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class F2 extends EC{constructor(t){super(),this.currentSequenceNumber=t}}class sp{constructor(t){this.persistence=t,this.Ri=new rp,this.Vi=null}static mi(t){return new sp(t)}get fi(){if(this.Vi)return this.Vi;throw Ct(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),rt.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),rt.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),rt.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rt.forEach(this.fi,(s=>{const o=At.fromPath(s);return this.gi(t,o).next((u=>{u||n.removeEntry(o,Nt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return rt.or([()=>rt.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Yh{constructor(t,n){this.persistence=t,this.pi=new Ya((s=>SC(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=M2(this,n)}static mi(t,n){return new Yh(t,n)}Ei(){}di(t){return rt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((o=>s+o))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return rt.forEach(this.pi,((s,o)=>this.br(t,s,o).next((u=>u?rt.resolve():n(o)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(h=>this.br(t,h,n).next((m=>{m||(s++,u.removeEntry(h,Nt.min()))})))).next((()=>u.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),rt.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),rt.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),rt.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),rt.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Rh(t.data.value)),n}br(t,n,s){return rt.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const o=this.pi.get(n);return rt.resolve(o!==void 0&&o>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class ap{constructor(t,n,s,o){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=o}static As(t,n){let s=Zt(),o=Zt();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new ap(t,n.fromCache,s,o)}}class G2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class K2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Bw()?8:TC(Bn())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,o){const u={result:null};return this.ys(t,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(t,n,o,s).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new G2;return this.Ss(t,n,h).next((m=>{if(u.result=m,this.Vs)return this.bs(t,n,h,m.size)}))})).next((()=>u.result))}bs(t,n,s,o){return s.documentReadCount<this.fs?(Lo()<=Yt.DEBUG&&_t("QueryEngine","SDK will not create cache indexes for query:",Uo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),rt.resolve()):(Lo()<=Yt.DEBUG&&_t("QueryEngine","Query:",Uo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Lo()<=Yt.DEBUG&&_t("QueryEngine","The SDK decides to create cache indexes for query:",Uo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,yr(n))):rt.resolve())}ys(t,n){if(J0(n))return rt.resolve(null);let s=yr(n);return this.indexManager.getIndexType(t,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=_g(n,null,"F"),s=yr(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((u=>{const h=Zt(...u);return this.ps.getDocuments(t,h).next((m=>this.indexManager.getMinOffset(t,s).next((g=>{const p=this.Ds(n,m);return this.Cs(n,p,h,g.readTime)?this.ys(t,_g(n,null,"F")):this.vs(t,p,n,g)}))))})))))}ws(t,n,s,o){return J0(n)||o.isEqual(Nt.min())?rt.resolve(null):this.ps.getDocuments(t,s).next((u=>{const h=this.Ds(n,u);return this.Cs(n,h,s,o)?rt.resolve(null):(Lo()<=Yt.DEBUG&&_t("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Uo(n)),this.vs(t,h,n,pC(o,Ru)).next((m=>m)))}))}Ds(t,n){let s=new dn(ob(t));return n.forEach(((o,u)=>{pf(t,u)&&(s=s.add(u))})),s}Cs(t,n,s,o){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const u=t.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,n,s){return Lo()<=Yt.DEBUG&&_t("QueryEngine","Using full collection scan to execute query:",Uo(n)),this.ps.getDocumentsMatchingQuery(t,n,ea.min(),s)}vs(t,n,s,o){return this.ps.getDocumentsMatchingQuery(t,s,o).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const op="LocalStore",Q2=3e8;class $2{constructor(t,n,s,o){this.persistence=t,this.Fs=n,this.serializer=o,this.Ms=new ke(Xt),this.xs=new Ya((u=>Xg(u)),Zg),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new P2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function Y2(r,t,n,s){return new $2(r,t,n,s)}async function Mb(r,t){const n=Vt(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const h=[],m=[];let g=Zt();for(const p of o){h.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}for(const p of u){m.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}return n.localDocuments.getDocuments(s,g).next((p=>({Ls:p,removedBatchIds:h,addedBatchIds:m})))}))}))}function X2(r,t){const n=Vt(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=t.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,E){const T=p.batch,S=T.keys();let N=rt.resolve();return S.forEach((F=>{N=N.next((()=>E.getEntry(g,F))).next((U=>{const B=p.docVersions.get(F);ne(B!==null,48541),U.version.compareTo(B)<0&&(T.applyToRemoteDocument(U,p),U.isValidDocument()&&(U.setReadTime(p.commitVersion),E.addEntry(U)))}))})),N.next((()=>m.mutationQueue.removeMutationBatch(g,T)))})(n,s,t,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=Zt();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(t)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function Vb(r){const t=Vt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function Z2(r,t){const n=Vt(r),s=t.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];t.targetChanges.forEach(((E,T)=>{const S=o.get(T);if(!S)return;m.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,E.addedDocuments,T))));let N=S.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(T)!==null?N=N.withResumeToken(Mn.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):E.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(E.resumeToken,s)),o=o.insert(T,N),(function(U,B,st){return U.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=Q2?!0:st.addedDocuments.size+st.modifiedDocuments.size+st.removedDocuments.size>0})(S,N,E)&&m.push(n.Pi.updateTargetData(u,N))}));let g=Jr(),p=Zt();if(t.documentUpdates.forEach((E=>{t.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(J2(u,h,t.documentUpdates).next((E=>{g=E.ks,p=E.qs}))),!s.isEqual(Nt.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(E)}return rt.waitFor(m).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(n.Ms=o,u)))}function J2(r,t,n){let s=Zt(),o=Zt();return n.forEach((u=>s=s.add(u))),t.getEntries(r,s).next((u=>{let h=Jr();return n.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Nt.min())?(t.removeEntry(m,g.readTime),h=h.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(g),h=h.insert(m,g)):_t(op,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function W2(r,t){const n=Vt(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Qg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function tI(r,t){const n=Vt(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,t).next((u=>u?(o=u,rt.resolve(o)):n.Pi.allocateTargetId(s).next((h=>(o=new Ks(t,h,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function bg(r,t,n){const s=Vt(r),o=s.Ms.get(t),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!ll(h))throw h;_t(op,`Failed to update sequence numbers for target ${t}: ${h}`)}s.Ms=s.Ms.remove(t),s.xs.delete(o.target)}function hE(r,t,n){const s=Vt(r);let o=Nt.min(),u=Zt();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,p,E){const T=Vt(g),S=T.xs.get(E);return S!==void 0?rt.resolve(T.Ms.get(S)):T.Pi.getTargetData(p,E)})(s,h,yr(t)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,m.targetId).next((g=>{u=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,t,n?o:Nt.min(),n?u:Zt()))).next((m=>(eI(s,qC(t),m),{documents:m,Qs:u})))))}function eI(r,t,n){let s=r.Os.get(t)||Nt.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Os.set(t,s)}class fE{constructor(){this.activeTargetIds=$C()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class nI{constructor(){this.Mo=new fE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new fE,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class iI{Oo(t){}shutdown(){}}const dE="ConnectivityMonitor";class mE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){_t(dE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){_t(dE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Th=null;function Sg(){return Th===null?Th=(function(){return 268435456+Math.round(2147483648*Math.random())})():Th++,"0x"+Th.toString(16)}const Bm="RestConnection",rI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sI{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Bh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(t,n,s,o,u){const h=Sg(),m=this.zo(t,n.toUriEncodedString());_t(Bm,`Sending RPC '${t}' ${h}:`,m,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(m),E=rl(p);return this.Jo(t,m,g,s,E).then((T=>(_t(Bm,`Received RPC '${t}' ${h}: `,T),T)),(T=>{throw Xo(Bm,`RPC '${t}' ${h} failed with error: `,T,"url: ",m,"request:",s),T}))}Ho(t,n,s,o,u,h){return this.Go(t,n,s,o,u)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+al})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>t[u]=o)),s&&s.headers.forEach(((o,u)=>t[u]=o))}zo(t,n){const s=rI[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class aI{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const Un="WebChannelConnection";class oI extends sI{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,o,u){const h=Sg();return new Promise(((m,g)=>{const p=new VT;p.setWithCredentials(!0),p.listenOnce(kT.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case wh.NO_ERROR:const T=p.getResponseJson();_t(Un,`XHR for RPC '${t}' ${h} received:`,JSON.stringify(T)),m(T);break;case wh.TIMEOUT:_t(Un,`RPC '${t}' ${h} timed out`),g(new mt(nt.DEADLINE_EXCEEDED,"Request time out"));break;case wh.HTTP_ERROR:const S=p.getStatus();if(_t(Un,`RPC '${t}' ${h} failed with status:`,S,"response text:",p.getResponseText()),S>0){let N=p.getResponseJson();Array.isArray(N)&&(N=N[0]);const F=N?.error;if(F&&F.status&&F.message){const U=(function(st){const ct=st.toLowerCase().replace(/_/g,"-");return Object.values(nt).indexOf(ct)>=0?ct:nt.UNKNOWN})(F.status);g(new mt(U,F.message))}else g(new mt(nt.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new mt(nt.UNAVAILABLE,"Connection failed."));break;default:Ct(9055,{l_:t,streamId:h,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{_t(Un,`RPC '${t}' ${h} completed.`)}}));const E=JSON.stringify(o);_t(Un,`RPC '${t}' ${h} sending request:`,o),p.send(n,"POST",E,s,15)}))}T_(t,n,s){const o=Sg(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],h=UT(),m=LT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const E=u.join("");_t(Un,`Creating RPC '${t}' stream ${o}: ${E}`,g);const T=h.createWebChannel(E,g);this.I_(T);let S=!1,N=!1;const F=new aI({Yo:B=>{N?_t(Un,`Not sending because RPC '${t}' stream ${o} is closed:`,B):(S||(_t(Un,`Opening RPC '${t}' stream ${o} transport.`),T.open(),S=!0),_t(Un,`RPC '${t}' stream ${o} sending:`,B),T.send(B))},Zo:()=>T.close()}),U=(B,st,ct)=>{B.listen(st,(at=>{try{ct(at)}catch(yt){setTimeout((()=>{throw yt}),0)}}))};return U(T,lu.EventType.OPEN,(()=>{N||(_t(Un,`RPC '${t}' stream ${o} transport opened.`),F.o_())})),U(T,lu.EventType.CLOSE,(()=>{N||(N=!0,_t(Un,`RPC '${t}' stream ${o} transport closed`),F.a_(),this.E_(T))})),U(T,lu.EventType.ERROR,(B=>{N||(N=!0,Xo(Un,`RPC '${t}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),F.a_(new mt(nt.UNAVAILABLE,"The operation could not be completed")))})),U(T,lu.EventType.MESSAGE,(B=>{if(!N){const st=B.data[0];ne(!!st,16349);const ct=st,at=ct?.error||ct[0]?.error;if(at){_t(Un,`RPC '${t}' stream ${o} received error:`,at);const yt=at.status;let pt=(function(w){const C=sn[w];if(C!==void 0)return Eb(C)})(yt),ft=at.message;pt===void 0&&(pt=nt.INTERNAL,ft="Unknown error status: "+yt+" with message "+at.message),N=!0,F.a_(new mt(pt,ft)),T.close()}else _t(Un,`RPC '${t}' stream ${o} received:`,st),F.u_(st)}})),U(m,PT.STAT_EVENT,(B=>{B.stat===hg.PROXY?_t(Un,`RPC '${t}' stream ${o} detected buffering proxy`):B.stat===hg.NOPROXY&&_t(Un,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{F.__()}),0),F}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function qm(){return typeof document<"u"?document:null}function Ef(r){return new h2(r,!0)}class lp{constructor(t,n,s=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&_t("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const gE="PersistentStream";class kb{constructor(t,n,s,o,u,h,m,g){this.Mi=t,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lp(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===nt.RESOURCE_EXHAUSTED?(Zr(n.toString()),Zr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===nt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{t((()=>{const o=new mt(nt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return _t(gE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(_t(gE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class lI extends kb{constructor(t,n,s,o,u,h){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=g2(this.serializer,t),s=(function(u){if(!("targetChange"in u))return Nt.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Nt.min():h.readTime?vi(h.readTime):Nt.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=Tg(this.serializer),n.addTarget=(function(u,h){let m;const g=h.target;if(m=pg(g)?{documents:y2(u,g)}:{query:_2(u,g).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=Sb(u,h.resumeToken);const p=vg(u,h.expectedCount);p!==null&&(m.expectedCount=p)}else if(h.snapshotVersion.compareTo(Nt.min())>0){m.readTime=Qh(u,h.snapshotVersion.toTimestamp());const p=vg(u,h.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,t);const s=E2(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=Tg(this.serializer),n.removeTarget=t,this.q_(n)}}class uI extends kb{constructor(t,n,s,o,u,h){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return ne(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ne(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ne(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=p2(t.writeResults,t.commitTime),s=vi(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=Tg(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>Cb(this.serializer,s)))};this.q_(n)}}class cI{}class hI extends cI{constructor(t,n,s,o){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new mt(nt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(t,Eg(n,s),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new mt(nt.UNKNOWN,u.toString())}))}Ho(t,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(t,Eg(n,s),o,h,m,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new mt(nt.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class fI{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Zr(n),this.aa=!1):_t("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Qa="RemoteStore";class dI{constructor(t,n,s,o,u){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{Xa(this)&&(_t(Qa,"Restarting streams for network reachability change."),await(async function(g){const p=Vt(g);p.Ea.add(4),await Hu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Tf(p)})(this))}))})),this.Ra=new fI(s,o)}}async function Tf(r){if(Xa(r))for(const t of r.da)await t(!0)}async function Hu(r){for(const t of r.da)await t(!1)}function Pb(r,t){const n=Vt(r);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),fp(n)?hp(n):ul(n).O_()&&cp(n,t))}function up(r,t){const n=Vt(r),s=ul(n);n.Ia.delete(t),s.O_()&&Lb(n,t),n.Ia.size===0&&(s.O_()?s.L_():Xa(n)&&n.Ra.set("Unknown"))}function cp(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Nt.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ul(r).Y_(t)}function Lb(r,t){r.Va.Ue(t),ul(r).Z_(t)}function hp(r){r.Va=new o2({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),ul(r).start(),r.Ra.ua()}function fp(r){return Xa(r)&&!ul(r).x_()&&r.Ia.size>0}function Xa(r){return Vt(r).Ea.size===0}function Ub(r){r.Va=void 0}async function mI(r){r.Ra.set("Online")}async function gI(r){r.Ia.forEach(((t,n)=>{cp(r,t)}))}async function pI(r,t){Ub(r),fp(r)?(r.Ra.ha(t),hp(r)):r.Ra.set("Unknown")}async function yI(r,t,n){if(r.Ra.set("Online"),t instanceof bb&&t.state===2&&t.cause)try{await(async function(o,u){const h=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))})(r,t)}catch(s){_t(Qa,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Xh(r,s)}else if(t instanceof Dh?r.Va.Ze(t):t instanceof Tb?r.Va.st(t):r.Va.tt(t),!n.isEqual(Nt.min()))try{const s=await Vb(r.localStore);n.compareTo(s)>=0&&await(function(u,h){const m=u.Va.Tt(h);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(p);E&&u.Ia.set(p,E.withResumeToken(g.resumeToken,h))}})),m.targetMismatches.forEach(((g,p)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(Mn.EMPTY_BYTE_STRING,E.snapshotVersion)),Lb(u,g);const T=new Ks(E.target,g,p,E.sequenceNumber);cp(u,T)})),u.remoteSyncer.applyRemoteEvent(m)})(r,n)}catch(s){_t(Qa,"Failed to raise snapshot:",s),await Xh(r,s)}}async function Xh(r,t,n){if(!ll(t))throw t;r.Ea.add(1),await Hu(r),r.Ra.set("Offline"),n||(n=()=>Vb(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{_t(Qa,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Tf(r)}))}function zb(r,t){return t().catch((n=>Xh(r,n,t)))}async function bf(r){const t=Vt(r),n=sa(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Qg;for(;_I(t);)try{const o=await W2(t.localStore,s);if(o===null){t.Ta.length===0&&n.L_();break}s=o.batchId,vI(t,o)}catch(o){await Xh(t,o)}jb(t)&&Bb(t)}function _I(r){return Xa(r)&&r.Ta.length<10}function vI(r,t){r.Ta.push(t);const n=sa(r);n.O_()&&n.X_&&n.ea(t.mutations)}function jb(r){return Xa(r)&&!sa(r).x_()&&r.Ta.length>0}function Bb(r){sa(r).start()}async function EI(r){sa(r).ra()}async function TI(r){const t=sa(r);for(const n of r.Ta)t.ea(n.mutations)}async function bI(r,t,n){const s=r.Ta.shift(),o=ep.from(s,t,n);await zb(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await bf(r)}async function SI(r,t){t&&sa(r).X_&&await(async function(s,o){if((function(h){return vb(h)&&h!==nt.ABORTED})(o.code)){const u=s.Ta.shift();sa(s).B_(),await zb(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await bf(s)}})(r,t),jb(r)&&Bb(r)}async function pE(r,t){const n=Vt(r);n.asyncQueue.verifyOperationInProgress(),_t(Qa,"RemoteStore received new credentials");const s=Xa(n);n.Ea.add(3),await Hu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Tf(n)}async function AI(r,t){const n=Vt(r);t?(n.Ea.delete(2),await Tf(n)):t||(n.Ea.add(2),await Hu(n),n.Ra.set("Unknown"))}function ul(r){return r.ma||(r.ma=(function(n,s,o){const u=Vt(n);return u.sa(),new lI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:mI.bind(null,r),t_:gI.bind(null,r),r_:pI.bind(null,r),H_:yI.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),fp(r)?hp(r):r.Ra.set("Unknown")):(await r.ma.stop(),Ub(r))}))),r.ma}function sa(r){return r.fa||(r.fa=(function(n,s,o){const u=Vt(n);return u.sa(),new uI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:EI.bind(null,r),r_:SI.bind(null,r),ta:TI.bind(null,r),na:bI.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await bf(r)):(await r.fa.stop(),r.Ta.length>0&&(_t(Qa,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class dp{constructor(t,n,s,o,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Zs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,o,u){const h=Date.now()+s,m=new dp(t,n,h,o,u);return m.start(s),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new mt(nt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mp(r,t){if(Zr("AsyncQueue",`${t}: ${r}`),ll(r))return new mt(nt.UNAVAILABLE,`${t}: ${r}`);throw r}class Ho{static emptySet(t){return new Ho(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||At.comparator(n.key,s.key):(n,s)=>At.comparator(n.key,s.key),this.keyedMap=uu(),this.sortedSet=new ke(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ho)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new Ho;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}class yE{constructor(){this.ga=new ke(At.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Ct(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class el{constructor(t,n,s,o,u,h,m,g,p){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(t,n,s,o,u){const h=[];return n.forEach((m=>{h.push({type:0,doc:m})})),new el(t,n,Ho.emptySet(n),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&gf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class wI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class RI{constructor(){this.queries=_E(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Vt(n),u=o.queries;o.queries=_E(),u.forEach(((h,m)=>{for(const g of m.Sa)g.onError(s)}))})(this,new mt(nt.ABORTED,"Firestore shutting down"))}}function _E(){return new Ya((r=>ab(r)),gf)}async function CI(r,t){const n=Vt(r);let s=3;const o=t.query;let u=n.queries.get(o);u?!u.ba()&&t.Da()&&(s=2):(u=new wI,s=t.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const m=mp(h,`Initialization of query '${Uo(t.query)}' failed`);return void t.onError(m)}n.queries.set(o,u),u.Sa.push(t),t.va(n.onlineState),u.wa&&t.Fa(u.wa)&&gp(n)}async function II(r,t){const n=Vt(r),s=t.query;let o=3;const u=n.queries.get(s);if(u){const h=u.Sa.indexOf(t);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function DI(r,t){const n=Vt(r);let s=!1;for(const o of t){const u=o.query,h=n.queries.get(u);if(h){for(const m of h.Sa)m.Fa(o)&&(s=!0);h.wa=o}}s&&gp(n)}function NI(r,t,n){const s=Vt(r),o=s.queries.get(t);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(t)}function gp(r){r.Ca.forEach((t=>{t.next()}))}var Ag,vE;(vE=Ag||(Ag={})).Ma="default",vE.Cache="cache";class xI{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const o of t.docChanges)o.type!==3&&s.push(o);t=new el(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=el.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Ag.Cache}}class qb{constructor(t){this.key=t}}class Hb{constructor(t){this.key=t}}class OI{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Zt(),this.mutatedKeys=Zt(),this.eu=ob(t),this.tu=new Ho(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new yE,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((E,T)=>{const S=o.get(E),N=pf(this.query,T)?T:null,F=!!S&&this.mutatedKeys.has(S.key),U=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let B=!1;S&&N?S.data.isEqual(N.data)?F!==U&&(s.track({type:3,doc:N}),B=!0):this.su(S,N)||(s.track({type:2,doc:N}),B=!0,(g&&this.eu(N,g)>0||p&&this.eu(N,p)<0)&&(m=!0)):!S&&N?(s.track({type:0,doc:N}),B=!0):S&&!N&&(s.track({type:1,doc:S}),B=!0,(g||p)&&(m=!0)),B&&(N?(h=h.add(N),u=U?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{tu:h,iu:s,Cs:m,mutatedKeys:u}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const h=t.iu.ya();h.sort(((E,T)=>(function(N,F){const U=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ct(20277,{Rt:B})}};return U(N)-U(F)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,h.length!==0||p?{snapshot:new el(this.query,t.tu,u,h,t.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new yE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Zt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new Hb(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new qb(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=Zt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return el.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const pp="SyncEngine";class MI{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class VI{constructor(t){this.key=t,this.hu=!1}}class kI{constructor(t,n,s,o,u,h){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ya((m=>ab(m)),gf),this.Iu=new Map,this.Eu=new Set,this.du=new ke(At.comparator),this.Au=new Map,this.Ru=new rp,this.Vu={},this.mu=new Map,this.fu=tl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function PI(r,t,n=!0){const s=Yb(r);let o;const u=s.Tu.get(t);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await Fb(s,t,n,!0),o}async function LI(r,t){const n=Yb(r);await Fb(n,t,!0,!1)}async function Fb(r,t,n,s){const o=await tI(r.localStore,yr(t)),u=o.targetId,h=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await UI(r,t,u,h==="current",o.resumeToken)),r.isPrimaryClient&&n&&Pb(r.remoteStore,o),m}async function UI(r,t,n,s,o){r.pu=(T,S,N)=>(async function(U,B,st,ct){let at=B.view.ru(st);at.Cs&&(at=await hE(U.localStore,B.query,!1).then((({documents:R})=>B.view.ru(R,at))));const yt=ct&&ct.targetChanges.get(B.targetId),pt=ct&&ct.targetMismatches.get(B.targetId)!=null,ft=B.view.applyChanges(at,U.isPrimaryClient,yt,pt);return TE(U,B.targetId,ft.au),ft.snapshot})(r,T,S,N);const u=await hE(r.localStore,t,!0),h=new OI(t,u.Qs),m=h.ru(u.documents),g=qu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),p=h.applyChanges(m,r.isPrimaryClient,g);TE(r,n,p.au);const E=new MI(t,n,h);return r.Tu.set(t,E),r.Iu.has(n)?r.Iu.get(n).push(t):r.Iu.set(n,[t]),p.snapshot}async function zI(r,t,n){const s=Vt(r),o=s.Tu.get(t),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((h=>!gf(h,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await bg(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&up(s.remoteStore,o.targetId),wg(s,o.targetId)})).catch(ol)):(wg(s,o.targetId),await bg(s.localStore,o.targetId,!0))}async function jI(r,t){const n=Vt(r),s=n.Tu.get(t),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),up(n.remoteStore,s.targetId))}async function BI(r,t,n){const s=$I(r);try{const o=await(function(h,m){const g=Vt(h),p=Ie.now(),E=m.reduce(((N,F)=>N.add(F.key)),Zt());let T,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let F=Jr(),U=Zt();return g.Ns.getEntries(N,E).next((B=>{F=B,F.forEach(((st,ct)=>{ct.isValidDocument()||(U=U.add(st))}))})).next((()=>g.localDocuments.getOverlayedDocuments(N,F))).next((B=>{T=B;const st=[];for(const ct of m){const at=e2(ct,T.get(ct.key).overlayedDocument);at!=null&&st.push(new ca(ct.key,at,JT(at.value.mapValue),Xn.exists(!0)))}return g.mutationQueue.addMutationBatch(N,p,st,m)})).next((B=>{S=B;const st=B.applyToLocalDocumentSet(T,U);return g.documentOverlayCache.saveOverlays(N,B.batchId,st)}))})).then((()=>({batchId:S.batchId,changes:ub(T)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(o.batchId),(function(h,m,g){let p=h.Vu[h.currentUser.toKey()];p||(p=new ke(Xt)),p=p.insert(m,g),h.Vu[h.currentUser.toKey()]=p})(s,o.batchId,n),await Fu(s,o.changes),await bf(s.remoteStore)}catch(o){const u=mp(o,"Failed to persist write");n.reject(u)}}async function Gb(r,t){const n=Vt(r);try{const s=await Z2(n.localStore,t);t.targetChanges.forEach(((o,u)=>{const h=n.Au.get(u);h&&(ne(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?ne(h.hu,14607):o.removedDocuments.size>0&&(ne(h.hu,42227),h.hu=!1))})),await Fu(n,s,t)}catch(s){await ol(s)}}function EE(r,t,n){const s=Vt(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,h)=>{const m=h.view.va(t);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const g=Vt(h);g.onlineState=m;let p=!1;g.queries.forEach(((E,T)=>{for(const S of T.Sa)S.va(m)&&(p=!0)})),p&&gp(g)})(s.eventManager,t),o.length&&s.Pu.H_(o),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function qI(r,t,n){const s=Vt(r);s.sharedClientState.updateQueryState(t,"rejected",n);const o=s.Au.get(t),u=o&&o.key;if(u){let h=new ke(At.comparator);h=h.insert(u,bn.newNoDocument(u,Nt.min()));const m=Zt().add(u),g=new vf(Nt.min(),new Map,new ke(Xt),h,m);await Gb(s,g),s.du=s.du.remove(u),s.Au.delete(t),yp(s)}else await bg(s.localStore,t,!1).then((()=>wg(s,t,n))).catch(ol)}async function HI(r,t){const n=Vt(r),s=t.batch.batchId;try{const o=await X2(n.localStore,t);Qb(n,s,null),Kb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Fu(n,o)}catch(o){await ol(o)}}async function FI(r,t,n){const s=Vt(r);try{const o=await(function(h,m){const g=Vt(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let E;return g.mutationQueue.lookupMutationBatch(p,m).next((T=>(ne(T!==null,37113),E=T.keys(),g.mutationQueue.removeMutationBatch(p,T)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E))).next((()=>g.localDocuments.getDocuments(p,E)))}))})(s.localStore,t);Qb(s,t,n),Kb(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Fu(s,o)}catch(o){await ol(o)}}function Kb(r,t){(r.mu.get(t)||[]).forEach((n=>{n.resolve()})),r.mu.delete(t)}function Qb(r,t,n){const s=Vt(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(t);u&&(n?u.reject(n):u.resolve(),o=o.remove(t)),s.Vu[s.currentUser.toKey()]=o}}function wg(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((s=>{r.Ru.containsKey(s)||$b(r,s)}))}function $b(r,t){r.Eu.delete(t.path.canonicalString());const n=r.du.get(t);n!==null&&(up(r.remoteStore,n),r.du=r.du.remove(t),r.Au.delete(n),yp(r))}function TE(r,t,n){for(const s of n)s instanceof qb?(r.Ru.addReference(s.key,t),GI(r,s)):s instanceof Hb?(_t(pp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||$b(r,s.key)):Ct(19791,{wu:s})}function GI(r,t){const n=t.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(_t(pp,"New document in limbo: "+n),r.Eu.add(s),yp(r))}function yp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const n=new At(_e.fromString(t)),s=r.fu.next();r.Au.set(s,new VI(n)),r.du=r.du.insert(n,s),Pb(r.remoteStore,new Ks(yr(Jg(n.path)),s,"TargetPurposeLimboResolution",df.ce))}}async function Fu(r,t,n){const s=Vt(r),o=[],u=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,g)=>{h.push(s.pu(g,t,n).then((p=>{if((p||n)&&s.isPrimaryClient){const E=p?!p.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(p){o.push(p);const E=ap.As(g.targetId,p);u.push(E)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(g,p){const E=Vt(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>rt.forEach(p,(S=>rt.forEach(S.Es,(N=>E.persistence.referenceDelegate.addReference(T,S.targetId,N))).next((()=>rt.forEach(S.ds,(N=>E.persistence.referenceDelegate.removeReference(T,S.targetId,N)))))))))}catch(T){if(!ll(T))throw T;_t(op,"Failed to update sequence numbers: "+T)}for(const T of p){const S=T.targetId;if(!T.fromCache){const N=E.Ms.get(S),F=N.snapshotVersion,U=N.withLastLimboFreeSnapshotVersion(F);E.Ms=E.Ms.insert(S,U)}}})(s.localStore,u))}async function KI(r,t){const n=Vt(r);if(!n.currentUser.isEqual(t)){_t(pp,"User change. New user:",t.toKey());const s=await Mb(n.localStore,t);n.currentUser=t,(function(u,h){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new mt(nt.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Fu(n,s.Ls)}}function QI(r,t){const n=Vt(r),s=n.Au.get(t);if(s&&s.hu)return Zt().add(s.key);{let o=Zt();const u=n.Iu.get(t);if(!u)return o;for(const h of u){const m=n.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function Yb(r){const t=Vt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=Gb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=QI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=qI.bind(null,t),t.Pu.H_=DI.bind(null,t.eventManager),t.Pu.yu=NI.bind(null,t.eventManager),t}function $I(r){const t=Vt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=HI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=FI.bind(null,t),t}class Zh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ef(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return Y2(this.persistence,new K2,t.initialUser,this.serializer)}Cu(t){return new Ob(sp.mi,this.serializer)}Du(t){return new nI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zh.provider={build:()=>new Zh};class YI extends Zh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){ne(this.persistence.referenceDelegate instanceof Yh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new x2(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?ai.withCacheSize(this.cacheSizeBytes):ai.DEFAULT;return new Ob((s=>Yh.mi(s,n)),this.serializer)}}class Rg{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>EE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=KI.bind(null,this.syncEngine),await AI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new RI})()}createDatastore(t){const n=Ef(t.databaseInfo.databaseId),s=(function(u){return new oI(u)})(t.databaseInfo);return(function(u,h,m,g){return new hI(u,h,m,g)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,o,u,h,m){return new dI(s,o,u,h,m)})(this.localStore,this.datastore,t.asyncQueue,(n=>EE(this.syncEngine,n,0)),(function(){return mE.v()?new mE:new iI})())}createSyncEngine(t,n){return(function(o,u,h,m,g,p,E){const T=new kI(o,u,h,m,g,p);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Vt(n);_t(Qa,"RemoteStore shutting down."),s.Ea.add(5),await Hu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Rg.provider={build:()=>new Rg};class XI{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Zr("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}class ZI{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new mt(nt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(o,u){const h=Vt(o),m={documents:u.map((T=>$h(h.serializer,T)))},g=await h.Ho("BatchGetDocuments",h.serializer.databaseId,_e.emptyPath(),m,u.length),p=new Map;g.forEach((T=>{const S=m2(h.serializer,T);p.set(S.key.toString(),S)}));const E=[];return u.forEach((T=>{const S=p.get(T.toString());ne(!!S,55234,{key:T}),E.push(S)})),E})(this.datastore,t);return n.forEach((s=>this.recordVersion(s))),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(t.toString())}delete(t){this.write(new tp(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach((n=>{t.delete(n.key.toString())})),t.forEach(((n,s)=>{const o=At.fromPath(s);this.mutations.push(new _b(o,this.precondition(o)))})),await(async function(s,o){const u=Vt(s),h={writes:o.map((m=>Cb(u.serializer,m)))};await u.Go("Commit",u.serializer.databaseId,_e.emptyPath(),h)})(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw Ct(50498,{Gu:t.constructor.name});n=Nt.min()}const s=this.readVersions.get(t.key.toString());if(s){if(!n.isEqual(s))throw new mt(nt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(Nt.min())?Xn.exists(!1):Xn.updateTime(n):Xn.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(Nt.min()))throw new mt(nt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xn.updateTime(n)}return Xn.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class JI{constructor(t,n,s,o,u){this.asyncQueue=t,this.datastore=n,this.options=s,this.updateFunction=o,this.deferred=u,this.zu=s.maxAttempts,this.M_=new lp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const t=new ZI(this.datastore),n=this.Hu(t);n&&n.then((s=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(t){try{const n=this.updateFunction(t);return!zu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(t)}Zu(t){if(t?.name==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!vb(n)}return!1}}const aa="FirestoreClient";class WI{constructor(t,n,s,o,u){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=jn.UNAUTHENTICATED,this.clientId=Kg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async h=>{_t(aa,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(_t(aa,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Zs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=mp(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function Hm(r,t){r.asyncQueue.verifyOperationInProgress(),_t(aa,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Mb(t.localStore,o),s=o)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function bE(r,t){r.asyncQueue.verifyOperationInProgress();const n=await tD(r);_t(aa,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener((s=>pE(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>pE(t.remoteStore,o))),r._onlineComponents=t}async function tD(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){_t(aa,"Using user provided OfflineComponentProvider");try{await Hm(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(o){return o.name==="FirebaseError"?o.code===nt.FAILED_PRECONDITION||o.code===nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Xo("Error using user provided cache. Falling back to memory cache: "+n),await Hm(r,new Zh)}}else _t(aa,"Using default OfflineComponentProvider"),await Hm(r,new YI(void 0));return r._offlineComponents}async function _p(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(_t(aa,"Using user provided OnlineComponentProvider"),await bE(r,r._uninitializedComponentsProvider._online)):(_t(aa,"Using default OnlineComponentProvider"),await bE(r,new Rg))),r._onlineComponents}function eD(r){return _p(r).then((t=>t.syncEngine))}function nD(r){return _p(r).then((t=>t.datastore))}async function SE(r){const t=await _p(r),n=t.eventManager;return n.onListen=PI.bind(null,t.syncEngine),n.onUnlisten=zI.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=LI.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=jI.bind(null,t.syncEngine),n}function Xb(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}const AE=new Map;const Zb="firestore.googleapis.com",wE=!0;class RE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new mt(nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Zb,this.ssl=wE}else this.host=t.host,this.ssl=t.ssl??wE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=xb;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<D2)throw new mt(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}gC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xb(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new mt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new mt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new mt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Sf{constructor(t,n,s,o){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new mt(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new mt(nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new sC;switch(s.type){case"firstParty":return new uC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new mt(nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=AE.get(n);s&&(_t("ComponentProvider","Removing Datastore"),AE.delete(n),s.terminate())})(this),Promise.resolve()}}function iD(r,t,n,s={}){r=Yr(r,Sf);const o=rl(t),u=r._getSettings(),h={...u,emulatorOptions:r._getEmulatorOptions()},m=`${t}:${n}`;o&&(wT(`https://${m}`),RT("Firestore",!0)),u.host!==Zb&&u.host!==m&&Xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:s};if(!Fa(g,h)&&(r._setSettings(g),s.mockUserToken)){let p,E;if(typeof s.mockUserToken=="string")p=s.mockUserToken,E=jn.MOCK_USER;else{p=Ow(s.mockUserToken,r._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new mt(nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new jn(T)}r._authCredentials=new aC(new jT(p,E))}}class cl{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new cl(this.firestore,t,this._query)}}class je{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Js(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new je(this.firestore,t,this._key)}toJSON(){return{type:je._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(Uu(n,je._jsonSchema))return new je(t,s||null,new At(_e.fromString(n.referencePath)))}}je._jsonSchemaVersion="firestore/documentReference/1.0",je._jsonSchema={type:on("string",je._jsonSchemaVersion),referencePath:on("string")};class Js extends cl{constructor(t,n,s){super(t,n,Jg(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new je(this.firestore,null,new At(t))}withConverter(t){return new Js(this.firestore,t,this._path)}}function ja(r,t,...n){if(r=Sn(r),BT("collection","path",t),r instanceof Sf){const s=_e.fromString(t,...n);return U0(s),new Js(r,null,s)}{if(!(r instanceof je||r instanceof Js))throw new mt(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(_e.fromString(t,...n));return U0(s),new Js(r.firestore,null,s)}}function Ba(r,t,...n){if(r=Sn(r),arguments.length===1&&(t=Kg.newId()),BT("doc","path",t),r instanceof Sf){const s=_e.fromString(t,...n);return L0(s),new je(r,null,new At(s))}{if(!(r instanceof je||r instanceof Js))throw new mt(nt.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(_e.fromString(t,...n));return L0(s),new je(r.firestore,r instanceof Js?r.converter:null,new At(s))}}const CE="AsyncQueue";class IE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lp(this,"async_queue_retry"),this._c=()=>{const s=qm();s&&_t(CE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=qm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=qm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Zs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!ll(t))throw t;_t(CE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,Zr("INTERNAL UNHANDLED ERROR: ",DE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const o=dp.createAndSchedule(this,t,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ct(47125,{Pc:DE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function DE(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}function NE(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(r,["next","error","complete"])}class nl extends Sf{constructor(t,n,s,o){super(t,n,s,o),this.type="firestore",this._queue=new IE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new IE(t),this._firestoreClient=void 0,await t}}}function rD(r,t){const n=typeof r=="object"?r:NT(),s=typeof r=="string"?r:Bh,o=Fg(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=Nw("firestore");u&&iD(o,...u)}return o}function vp(r){if(r._terminated)throw new mt(nt.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||sD(r),r._firestoreClient}function sD(r){const t=r._freezeSettings(),n=(function(o,u,h,m){return new RC(o,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Xb(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new WI(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(r._componentsProvider))}class yi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new yi(Mn.fromBase64String(t))}catch(n){throw new mt(nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new yi(Mn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:yi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Uu(t,yi._jsonSchema))return yi.fromBase64String(t.bytes)}}yi._jsonSchemaVersion="firestore/bytes/1.0",yi._jsonSchema={type:on("string",yi._jsonSchemaVersion),bytes:on("string")};class Gu{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new mt(nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new On(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Ep{constructor(t){this._methodName=t}}class _r{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new mt(nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new mt(nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Xt(this._lat,t._lat)||Xt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_r._jsonSchemaVersion}}static fromJSON(t){if(Uu(t,_r._jsonSchema))return new _r(t.latitude,t.longitude)}}_r._jsonSchemaVersion="firestore/geoPoint/1.0",_r._jsonSchema={type:on("string",_r._jsonSchemaVersion),latitude:on("number"),longitude:on("number")};class vr{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:vr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Uu(t,vr._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new vr(t.vectorValues);throw new mt(nt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vr._jsonSchemaVersion="firestore/vectorValue/1.0",vr._jsonSchema={type:on("string",vr._jsonSchemaVersion),vectorValues:on("object")};const aD=/^__.*__$/;class oD{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new ca(t,this.data,this.fieldMask,n,this.fieldTransforms):new Bu(t,this.data,n,this.fieldTransforms)}}class Jb{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new ca(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Wb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ct(40011,{Ac:r})}}class Tp{constructor(t,n,s,o,u,h){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Tp({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Jh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Wb(this.Ac)&&aD.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class lD{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Ef(t)}Cc(t,n,s,o=!1){return new Tp({Ac:t,methodName:n,Dc:s,path:On.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Af(r){const t=r._freezeSettings(),n=Ef(r._databaseId);return new lD(r._databaseId,!!t.ignoreUndefinedProperties,n)}function t1(r,t,n,s,o,u={}){const h=r.Cc(u.merge||u.mergeFields?2:0,t,n,o);bp("Data must be an object, but it was:",h,s);const m=i1(s,h);let g,p;if(u.merge)g=new _i(h.fieldMask),p=h.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const S=Cg(t,T,n);if(!h.contains(S))throw new mt(nt.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);s1(E,S)||E.push(S)}g=new _i(E),p=h.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,p=h.fieldTransforms;return new oD(new Yn(m),g,p)}class wf extends Ep{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof wf}}function e1(r,t,n,s){const o=r.Cc(1,t,n);bp("Data must be an object, but it was:",o,s);const u=[],h=Yn.empty();ua(s,((g,p)=>{const E=Sp(t,g,n);p=Sn(p);const T=o.yc(E);if(p instanceof wf)u.push(E);else{const S=Ku(p,T);S!=null&&(u.push(E),h.set(E,S))}}));const m=new _i(u);return new Jb(h,m,o.fieldTransforms)}function n1(r,t,n,s,o,u){const h=r.Cc(1,t,n),m=[Cg(t,s,n)],g=[o];if(u.length%2!=0)throw new mt(nt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)m.push(Cg(t,u[S])),g.push(u[S+1]);const p=[],E=Yn.empty();for(let S=m.length-1;S>=0;--S)if(!s1(p,m[S])){const N=m[S];let F=g[S];F=Sn(F);const U=h.yc(N);if(F instanceof wf)p.push(N);else{const B=Ku(F,U);B!=null&&(p.push(N),E.set(N,B))}}const T=new _i(p);return new Jb(E,T,h.fieldTransforms)}function uD(r,t,n,s=!1){return Ku(n,r.Cc(s?4:3,t))}function Ku(r,t){if(r1(r=Sn(r)))return bp("Unsupported field value:",t,r),i1(r,t);if(r instanceof Ep)return(function(s,o){if(!Wb(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let h=0;for(const m of s){let g=Ku(m,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(r,t)}return(function(s,o){if((s=Sn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return YC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Ie.fromDate(s);return{timestampValue:Qh(o.serializer,u)}}if(s instanceof Ie){const u=new Ie(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Qh(o.serializer,u)}}if(s instanceof _r)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof yi)return{bytesValue:Sb(o.serializer,s._byteString)};if(s instanceof je){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ip(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof vr)return(function(h,m){return{mapValue:{fields:{[XT]:{stringValue:ZT},[qh]:{arrayValue:{values:h.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return Wg(m.serializer,p)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${ff(s)}`)})(r,t)}function i1(r,t){const n={};return FT(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ua(r,((s,o)=>{const u=Ku(o,t.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function r1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ie||r instanceof _r||r instanceof yi||r instanceof je||r instanceof Ep||r instanceof vr)}function bp(r,t,n){if(!r1(n)||!qT(n)){const s=ff(n);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function Cg(r,t,n){if((t=Sn(t))instanceof Gu)return t._internalPath;if(typeof t=="string")return Sp(r,t);throw Jh("Field path arguments must be of type string or ",r,!1,void 0,n)}const cD=new RegExp("[~\\*/\\[\\]]");function Sp(r,t,n){if(t.search(cD)>=0)throw Jh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Gu(...t.split("."))._internalPath}catch{throw Jh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Jh(r,t,n,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let m=`Function ${t}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new mt(nt.INVALID_ARGUMENT,m+r+g)}function s1(r,t){return r.some((n=>n.isEqual(t)))}class Wh{constructor(t,n,s,o,u){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new hD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Ap("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class hD extends Wh{data(){return super.data()}}function Ap(r,t){return typeof t=="string"?Sp(r,t):t instanceof Gu?t._internalPath:t._delegate._internalPath}function fD(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new mt(nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wp{}class dD extends wp{}function mD(r,t,...n){let s=[];t instanceof wp&&s.push(t),s=s.concat(n),(function(u){const h=u.filter((g=>g instanceof Rp)).length,m=u.filter((g=>g instanceof Rf)).length;if(h>1||h>0&&m>0)throw new mt(nt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class Rf extends dD{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new Rf(t,n,s)}_apply(t){const n=this._parse(t);return a1(t._query,n),new cl(t.firestore,t.converter,yg(t._query,n))}_parse(t){const n=Af(t.firestore);return(function(u,h,m,g,p,E,T){let S;if(p.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new mt(nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){OE(T,E);const F=[];for(const U of T)F.push(xE(g,u,U));S={arrayValue:{values:F}}}else S=xE(g,u,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||OE(T,E),S=uD(m,h,T,E==="in"||E==="not-in");return an.create(p,E,S)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function gD(r,t,n){const s=t,o=Ap("where",r);return Rf._create(o,s,n)}class Rp extends wp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Rp(t,n)}_parse(t){const n=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:tr.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(o,u){let h=o;const m=u.getFlattenedFilters();for(const g of m)a1(h,g),h=yg(h,g)})(t._query,n),new cl(t.firestore,t.converter,yg(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function xE(r,t,n){if(typeof(n=Sn(n))=="string"){if(n==="")throw new mt(nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sb(t)&&n.indexOf("/")!==-1)throw new mt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(_e.fromString(n));if(!At.isDocumentKey(s))throw new mt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return K0(r,new At(s))}if(n instanceof je)return K0(r,n._key);throw new mt(nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ff(n)}.`)}function OE(r,t){if(!Array.isArray(r)||r.length===0)throw new mt(nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function a1(r,t){const n=(function(o,u){for(const h of o)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new mt(nt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new mt(nt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class o1{convertValue(t,n="none"){switch(ra(t)){case 0:return null;case 1:return t.booleanValue;case 2:return $e(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ia(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Ct(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return ua(t,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(t){const n=t.fields?.[qh].arrayValue?.values?.map((s=>$e(s.doubleValue)));return new vr(n)}convertGeoPoint(t){return new _r($e(t.latitude),$e(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=mf(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Cu(t));default:return null}}convertTimestamp(t){const n=na(t);return new Ie(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=_e.fromString(t);ne(Nb(s),9688,{name:t});const o=new Iu(s.get(1),s.get(3)),u=new At(s.popFirst(5));return o.isEqual(n)||Zr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function l1(r,t,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(t,n):r.toFirestore(t):t,s}class pD extends o1{constructor(t){super(),this.firestore=t}convertBytes(t){return new yi(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new je(this.firestore,null,n)}}class Bo{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ws extends Wh{constructor(t,n,s,o,u,h){super(t,n,s,o,h),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Nh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(Ap("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new mt(nt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Ws._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ws._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ws._jsonSchema={type:on("string",Ws._jsonSchemaVersion),bundleSource:on("string","DocumentSnapshot"),bundleName:on("string"),bundle:on("string")};class Nh extends Ws{data(t={}){return super.data(t)}}class Fo{constructor(t,n,s,o){this._firestore=t,this._userDataWriter=n,this._snapshot=o,this.metadata=new Bo(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new Nh(this._firestore,this._userDataWriter,s.key,s,new Bo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new mt(nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const g=new Nh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Bo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new Nh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Bo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,E=-1;return m.type!==0&&(p=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:yD(m.type),doc:g,oldIndex:p,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new mt(nt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Fo._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Kg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function yD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ct(61501,{type:r})}}Fo._jsonSchemaVersion="firestore/querySnapshot/1.0",Fo._jsonSchema={type:on("string",Fo._jsonSchemaVersion),bundleSource:on("string","QuerySnapshot"),bundleName:on("string"),bundle:on("string")};class Cp extends o1{constructor(t){super(),this.firestore=t}convertBytes(t){return new yi(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new je(this.firestore,null,n)}}function u1(r,t,n){r=Yr(r,je);const s=Yr(r.firestore,nl),o=l1(r.converter,t,n);return h1(s,[t1(Af(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,Xn.none())])}function ME(r,t,n,...s){r=Yr(r,je);const o=Yr(r.firestore,nl),u=Af(o);let h;return h=typeof(t=Sn(t))=="string"||t instanceof Gu?n1(u,"updateDoc",r._key,t,n,s):e1(u,"updateDoc",r._key,t),h1(o,[h.toMutation(r._key,Xn.exists(!0))])}function c1(r,...t){r=Sn(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||NE(t[s])||(n=t[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(NE(t[s])){const g=t[s];t[s]=g.next?.bind(g),t[s+1]=g.error?.bind(g),t[s+2]=g.complete?.bind(g)}let u,h,m;if(r instanceof je)h=Yr(r.firestore,nl),m=Jg(r._key.path),u={next:g=>{t[s]&&t[s](_D(h,r,g))},error:t[s+1],complete:t[s+2]};else{const g=Yr(r,cl);h=Yr(g.firestore,nl),m=g._query;const p=new Cp(h);u={next:E=>{t[s]&&t[s](new Fo(h,p,g,E))},error:t[s+1],complete:t[s+2]},fD(r._query)}return(function(p,E,T,S){const N=new XI(S),F=new xI(E,N,T);return p.asyncQueue.enqueueAndForget((async()=>CI(await SE(p),F))),()=>{N.Nu(),p.asyncQueue.enqueueAndForget((async()=>II(await SE(p),F)))}})(vp(h),m,o,u)}function h1(r,t){return(function(s,o){const u=new Zs;return s.asyncQueue.enqueueAndForget((async()=>BI(await eD(s),o,u))),u.promise})(vp(r),t)}function _D(r,t,n){const s=n.docs.get(t._key),o=new Cp(r);return new Ws(r,o,t._key,s,new Bo(n.hasPendingWrites,n.fromCache),t.converter)}const vD={maxAttempts:5};function hu(r,t){if((r=Sn(r)).firestore!==t)throw new mt(nt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class ED{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=Af(t)}get(t){const n=hu(t,this._firestore),s=new pD(this._firestore);return this._transaction.lookup([n._key]).then((o=>{if(!o||o.length!==1)return Ct(24041);const u=o[0];if(u.isFoundDocument())return new Wh(this._firestore,s,u.key,u,n.converter);if(u.isNoDocument())return new Wh(this._firestore,s,n._key,null,n.converter);throw Ct(18433,{doc:u})}))}set(t,n,s){const o=hu(t,this._firestore),u=l1(o.converter,n,s),h=t1(this._dataReader,"Transaction.set",o._key,u,o.converter!==null,s);return this._transaction.set(o._key,h),this}update(t,n,s,...o){const u=hu(t,this._firestore);let h;return h=typeof(n=Sn(n))=="string"||n instanceof Gu?n1(this._dataReader,"Transaction.update",u._key,n,s,o):e1(this._dataReader,"Transaction.update",u._key,n),this._transaction.update(u._key,h),this}delete(t){const n=hu(t,this._firestore);return this._transaction.delete(n._key),this}}class TD extends ED{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=hu(t,this._firestore),s=new Cp(this._firestore);return super.get(t).then((o=>new Ws(this._firestore,s,n._key,o._document,new Bo(!1,!1),n.converter)))}}function VE(r,t,n){r=Yr(r,nl);const s={...vD,...n};return(function(u){if(u.maxAttempts<1)throw new mt(nt.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(u,h,m){const g=new Zs;return u.asyncQueue.enqueueAndForget((async()=>{const p=await nD(u);new JI(u.asyncQueue,p,m,h,g).ju()})),g.promise})(vp(r),(o=>t(new TD(r,o))),s)}(function(t,n=!0){(function(o){al=o})(sl),Yo(new Ga("firestore",((s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),m=new nl(new oC(s.getProvider("auth-internal")),new cC(h,s.getProvider("app-check-internal")),(function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new mt(nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Iu(p.options.projectId,E)})(h,o),h);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Ys(M0,V0,t),Ys(M0,V0,"esm2020")})();function f1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bD=f1,d1=new Pu("auth","Firebase",f1());const tf=new qg("@firebase/auth");function SD(r,...t){tf.logLevel<=Yt.WARN&&tf.warn(`Auth (${sl}): ${r}`,...t)}function xh(r,...t){tf.logLevel<=Yt.ERROR&&tf.error(`Auth (${sl}): ${r}`,...t)}function Wr(r,...t){throw Ip(r,...t)}function Er(r,...t){return Ip(r,...t)}function m1(r,t,n){const s={...bD(),[t]:n};return new Pu("auth","Firebase",s).create(t,{appName:r.name})}function ta(r){return m1(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ip(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return d1.create(r,...t)}function Ot(r,t,...n){if(!r)throw Ip(t,...n)}function Qr(r){const t="INTERNAL ASSERTION FAILED: "+r;throw xh(t),new Error(t)}function ts(r,t){r||Qr(t)}function Ig(){return typeof self<"u"&&self.location?.href||""}function AD(){return kE()==="http:"||kE()==="https:"}function kE(){return typeof self<"u"&&self.location?.protocol||null}function wD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AD()||Uw()||"connection"in navigator)?navigator.onLine:!0}function RD(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Qu{constructor(t,n){this.shortDelay=t,this.longDelay=n,ts(n>t,"Short delay should be less than long delay!"),this.isMobile=kw()||zw()}get(){return wD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Dp(r,t){ts(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class g1{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const CD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const ID=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DD=new Qu(3e4,6e4);function Cf(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function hl(r,t,n,s,o={}){return p1(r,o,async()=>{let u={},h={};s&&(t==="GET"?h=s:u={body:JSON.stringify(s)});const m=Lu({key:r.config.apiKey,...h}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const p={method:t,headers:g,...u};return Lw()||(p.referrerPolicy="no-referrer"),r.emulatorConfig&&rl(r.emulatorConfig.host)&&(p.credentials="include"),g1.fetch()(await _1(r,r.config.apiHost,n,m),p)})}async function p1(r,t,n){r._canInitEmulator=!1;const s={...CD,...t};try{const o=new ND(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw bh(r,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw bh(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw bh(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw bh(r,"user-disabled",h);const E=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw m1(r,E,p);Wr(r,E)}}catch(o){if(o instanceof es)throw o;Wr(r,"network-request-failed",{message:String(o)})}}async function y1(r,t,n,s,o={}){const u=await hl(r,t,n,s,o);return"mfaPendingCredential"in u&&Wr(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function _1(r,t,n,s){const o=`${t}${n}?${s}`,u=r,h=u.config.emulator?Dp(r.config,o):`${r.config.apiScheme}://${o}`;return ID.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}class ND{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Er(this.auth,"network-request-failed")),DD.get())})}}function bh(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Er(r,t,s);return o.customData._tokenResponse=n,o}async function xD(r,t){return hl(r,"POST","/v1/accounts:delete",t)}async function ef(r,t){return hl(r,"POST","/v1/accounts:lookup",t)}function Eu(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function OD(r,t=!1){const n=Sn(r),s=await n.getIdToken(t),o=Np(s);Ot(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:s,authTime:Eu(Fm(o.auth_time)),issuedAtTime:Eu(Fm(o.iat)),expirationTime:Eu(Fm(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Fm(r){return Number(r)*1e3}function Np(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return xh("JWT malformed, contained fewer than 3 sections"),null;try{const o=TT(n);return o?JSON.parse(o):(xh("Failed to decode base64 JWT payload"),null)}catch(o){return xh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function PE(r){const t=Np(r);return Ot(t,"internal-error"),Ot(typeof t.exp<"u","internal-error"),Ot(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function Ou(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof es&&MD(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function MD({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class VD{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Dg{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Eu(this.lastLoginAt),this.creationTime=Eu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function nf(r){const t=r.auth,n=await r.getIdToken(),s=await Ou(r,ef(t,{idToken:n}));Ot(s?.users.length,t,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?v1(o.providerUserInfo):[],h=PD(r.providerData,u),m=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!h?.length,p=m?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Dg(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(r,E)}async function kD(r){const t=Sn(r);await nf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function PD(r,t){return[...r.filter(s=>!t.some(o=>o.providerId===s.providerId)),...t]}function v1(r){return r.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function LD(r,t){const n=await p1(r,{},async()=>{const s=Lu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,h=await _1(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return r.emulatorConfig&&rl(r.emulatorConfig.host)&&(g.credentials="include"),g1.fetch()(h,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function UD(r,t){return hl(r,"POST","/v2/accounts:revokeToken",Cf(r,t))}class Go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Ot(t.idToken,"internal-error"),Ot(typeof t.idToken<"u","internal-error"),Ot(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):PE(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Ot(t.length!==0,"internal-error");const n=PE(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ot(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await LD(t,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,h=new Go;return s&&(Ot(typeof s=="string","internal-error",{appName:t}),h.refreshToken=s),o&&(Ot(typeof o=="string","internal-error",{appName:t}),h.accessToken=o),u&&(Ot(typeof u=="number","internal-error",{appName:t}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Go,this.toJSON())}_performRefresh(){return Qr("not implemented")}}function Ls(r,t){Ot(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Wi{constructor({uid:t,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new VD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Dg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const n=await Ou(this,this.stsTokenManager.getToken(this.auth,t));return Ot(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return OD(this,t)}reload(){return kD(this)}_assign(t){this!==t&&(Ot(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Wi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){Ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await nf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ji(this.auth.app))return Promise.reject(ta(this.auth));const t=await this.getIdToken();return await Ou(this,xD(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,m=n.tenantId??void 0,g=n._redirectEventId??void 0,p=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:N,providerData:F,stsTokenManager:U}=n;Ot(T&&U,t,"internal-error");const B=Go.fromJSON(this.name,U);Ot(typeof T=="string",t,"internal-error"),Ls(s,t.name),Ls(o,t.name),Ot(typeof S=="boolean",t,"internal-error"),Ot(typeof N=="boolean",t,"internal-error"),Ls(u,t.name),Ls(h,t.name),Ls(m,t.name),Ls(g,t.name),Ls(p,t.name),Ls(E,t.name);const st=new Wi({uid:T,auth:t,email:o,emailVerified:S,displayName:s,isAnonymous:N,photoURL:h,phoneNumber:u,tenantId:m,stsTokenManager:B,createdAt:p,lastLoginAt:E});return F&&Array.isArray(F)&&(st.providerData=F.map(ct=>({...ct}))),g&&(st._redirectEventId=g),st}static async _fromIdTokenResponse(t,n,s=!1){const o=new Go;o.updateFromServerResponse(n);const u=new Wi({uid:n.localId,auth:t,stsTokenManager:o,isAnonymous:s});return await nf(u),u}static async _fromGetAccountInfoResponse(t,n,s){const o=n.users[0];Ot(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?v1(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,m=new Go;m.updateFromIdToken(s);const g=new Wi({uid:o.localId,auth:t,stsTokenManager:m,isAnonymous:h}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Dg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,p),g}}const LE=new Map;function $r(r){ts(r instanceof Function,"Expected a class definition");let t=LE.get(r);return t?(ts(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,LE.set(r,t),t)}class E1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}E1.type="NONE";const UE=E1;function Oh(r,t,n){return`firebase:${r}:${t}:${n}`}class Ko{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Oh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Oh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await ef(this.auth,{idToken:t}).catch(()=>{});return n?Wi._fromGetAccountInfoResponse(this.auth,n,t):null}return Wi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Ko($r(UE),t,s);const o=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||$r(UE);const h=Oh(s,t.config.apiKey,t.name);let m=null;for(const p of n)try{const E=await p._get(h);if(E){let T;if(typeof E=="string"){const S=await ef(t,{idToken:E}).catch(()=>{});if(!S)break;T=await Wi._fromGetAccountInfoResponse(t,S,E)}else T=Wi._fromJSON(t,E);p!==u&&(m=T),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Ko(u,t,s):(u=g[0],m&&await u._set(h,m.toJSON()),await Promise.all(n.map(async p=>{if(p!==u)try{await p._remove(h)}catch{}})),new Ko(u,t,s))}}function zE(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(A1(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(T1(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(R1(t))return"Blackberry";if(C1(t))return"Webos";if(b1(t))return"Safari";if((t.includes("chrome/")||S1(t))&&!t.includes("edge/"))return"Chrome";if(w1(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function T1(r=Bn()){return/firefox\//i.test(r)}function b1(r=Bn()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function S1(r=Bn()){return/crios\//i.test(r)}function A1(r=Bn()){return/iemobile/i.test(r)}function w1(r=Bn()){return/android/i.test(r)}function R1(r=Bn()){return/blackberry/i.test(r)}function C1(r=Bn()){return/webos/i.test(r)}function xp(r=Bn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function zD(r=Bn()){return xp(r)&&!!window.navigator?.standalone}function jD(){return jw()&&document.documentMode===10}function I1(r=Bn()){return xp(r)||w1(r)||C1(r)||R1(r)||/windows phone/i.test(r)||A1(r)}function D1(r,t=[]){let n;switch(r){case"Browser":n=zE(Bn());break;case"Worker":n=`${zE(Bn())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${sl}/${s}`}class BD{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=u=>new Promise((h,m)=>{try{const g=t(u);h(g)}catch(g){m(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function qD(r,t={}){return hl(r,"GET","/v2/passwordPolicy",Cf(r,t))}const HD=6;class FD{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??HD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),o&&(n.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<t.length;o++)s=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}class GD{constructor(t,n,s,o){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jE(this),this.idTokenSubscription=new jE(this),this.beforeStateQueue=new BD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=$r(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ko.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await ef(this,{idToken:t}),s=await Wi._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Ji(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=s?._redirectEventId,m=await this.tryRedirectSignIn(t);(!u||u===h)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await nf(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=RD()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ji(this.app))return Promise.reject(ta(this));const n=t?Sn(t):null;return n&&Ot(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Ot(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ji(this.app)?Promise.reject(ta(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ji(this.app)?Promise.reject(ta(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($r(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await qD(this),n=new FD(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Pu("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await UD(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&$r(t)||this._popupRedirectResolver;Ot(n,this,"argument-error"),this.redirectPersistenceManager=await Ko.create(this,[$r(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ot(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const g=t.addObserver(n,s,o);return()=>{h=!0,g()}}else{const g=t.addObserver(n);return()=>{h=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=D1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(Ji(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&SD(`Error while retrieving App Check token: ${t.error}`),t?.token}}function If(r){return Sn(r)}class jE{constructor(t){this.auth=t,this.observer=null,this.addObserver=$w(n=>this.observer=n)}get next(){return Ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Op={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KD(r){Op=r}function QD(r){return Op.loadJS(r)}function $D(){return Op.gapiScript}function YD(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function XD(r,t){const n=Fg(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Fa(u,t??{}))return o;Wr(o,"already-initialized")}return n.initialize({options:t})}function ZD(r,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map($r);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function JD(r,t,n){const s=If(r);Ot(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const o=!1,u=N1(t),{host:h,port:m}=WD(t),g=m===null?"":`:${m}`,p={url:`${u}//${h}${g}/`},E=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ot(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ot(Fa(p,s.config.emulator)&&Fa(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,rl(h)?(wT(`${u}//${h}${g}`),RT("Auth",!0)):tN()}function N1(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function WD(r){const t=N1(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:BE(s.substr(u.length+1))}}else{const[u,h]=s.split(":");return{host:u,port:BE(h)}}}function BE(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function tN(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class x1{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Qr("not implemented")}_getIdTokenResponse(t){return Qr("not implemented")}_linkToIdToken(t,n){return Qr("not implemented")}_getReauthenticationResolver(t){return Qr("not implemented")}}async function Qo(r,t){return y1(r,"POST","/v1/accounts:signInWithIdp",Cf(r,t))}const eN="http://localhost";class $a extends x1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new $a(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Wr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const h=new $a(s,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(t){const n=this.buildRequest();return Qo(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,Qo(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Qo(t,n)}buildRequest(){const t={requestUri:eN,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Lu(n)}return t}}class O1{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class $u extends O1{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class qs extends $u{constructor(){super("facebook.com")}static credential(t){return $a._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qs.credentialFromTaggedObject(t)}static credentialFromError(t){return qs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qs.credential(t.oauthAccessToken)}catch{return null}}}qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";qs.PROVIDER_ID="facebook.com";class Hs extends $u{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return $a._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Hs.credentialFromTaggedObject(t)}static credentialFromError(t){return Hs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return Hs.credential(n,s)}catch{return null}}}Hs.GOOGLE_SIGN_IN_METHOD="google.com";Hs.PROVIDER_ID="google.com";class Fs extends $u{constructor(){super("github.com")}static credential(t){return $a._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Fs.credentialFromTaggedObject(t)}static credentialFromError(t){return Fs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Fs.credential(t.oauthAccessToken)}catch{return null}}}Fs.GITHUB_SIGN_IN_METHOD="github.com";Fs.PROVIDER_ID="github.com";class Gs extends $u{constructor(){super("twitter.com")}static credential(t,n){return $a._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Gs.credentialFromTaggedObject(t)}static credentialFromError(t){return Gs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Gs.credential(n,s)}catch{return null}}}Gs.TWITTER_SIGN_IN_METHOD="twitter.com";Gs.PROVIDER_ID="twitter.com";async function nN(r,t){return y1(r,"POST","/v1/accounts:signUp",Cf(r,t))}class oa{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,o=!1){const u=await Wi._fromIdTokenResponse(t,s,o),h=qE(s);return new oa({user:u,providerId:h,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const o=qE(s);return new oa({user:t,providerId:o,_tokenResponse:s,operationType:n})}}function qE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}async function Ng(r){if(Ji(r.app))return Promise.reject(ta(r));const t=If(r);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new oa({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await nN(t,{returnSecureToken:!0}),s=await oa._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(s.user),s}class rf extends es{constructor(t,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,rf.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,o){return new rf(t,n,s,o)}}function M1(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?rf._fromErrorAndOperation(r,u,t,s):u})}async function iN(r,t,n=!1){const s=await Ou(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return oa._forOperation(r,"link",s)}async function rN(r,t,n=!1){const{auth:s}=r;if(Ji(s.app))return Promise.reject(ta(s));const o="reauthenticate";try{const u=await Ou(r,M1(s,o,t,r),n);Ot(u.idToken,s,"internal-error");const h=Np(u.idToken);Ot(h,s,"internal-error");const{sub:m}=h;return Ot(r.uid===m,s,"user-mismatch"),oa._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Wr(s,"user-mismatch"),u}}async function sN(r,t,n=!1){if(Ji(r.app))return Promise.reject(ta(r));const s="signIn",o=await M1(r,s,t),u=await oa._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}function aN(r,t,n,s){return Sn(r).onIdTokenChanged(t,n,s)}function oN(r,t,n){return Sn(r).beforeAuthStateChanged(t,n)}const sf="__sak";class V1{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sf,"1"),this.storage.removeItem(sf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const lN=1e3,uN=10;class k1 extends V1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=I1(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&t(n,o,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const s=t.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!n&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);jD()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,uN):o()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},lN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}k1.type="LOCAL";const cN=k1;class P1 extends V1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}P1.type="SESSION";const L1=P1;function hN(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}class Df{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(o=>o.isListeningto(t));if(n)return n;const s=new Df(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:o,data:u}=n.data,h=this.handlersMap[o];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(h).map(async p=>p(n.origin,u)),g=await hN(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Df.receivers=[];function Mp(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}class fN{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((m,g)=>{const p=Mp("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(S.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:t,eventId:p,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function Tr(){return window}function dN(r){Tr().location.href=r}function U1(){return typeof Tr().WorkerGlobalScope<"u"&&typeof Tr().importScripts=="function"}async function mN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gN(){return navigator?.serviceWorker?.controller||null}function pN(){return U1()?self:null}const z1="firebaseLocalStorageDb",yN=1,af="firebaseLocalStorage",j1="fbase_key";class Yu{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nf(r,t){return r.transaction([af],t?"readwrite":"readonly").objectStore(af)}function _N(){const r=indexedDB.deleteDatabase(z1);return new Yu(r).toPromise()}function xg(){const r=indexedDB.open(z1,yN);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(af,{keyPath:j1})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(af)?t(s):(s.close(),await _N(),t(await xg()))})})}async function HE(r,t,n){const s=Nf(r,!0).put({[j1]:t,value:n});return new Yu(s).toPromise()}async function vN(r,t){const n=Nf(r,!1).get(t),s=await new Yu(n).toPromise();return s===void 0?null:s.value}function FE(r,t){const n=Nf(r,!0).delete(t);return new Yu(n).toPromise()}const EN=800,TN=3;class B1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xg(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>TN)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return U1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Df._getInstance(pN()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await mN(),!this.activeServiceWorker)return;this.sender=new fN(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||gN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await xg();return await HE(t,sf,"1"),await FE(t,sf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>HE(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>vN(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>FE(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=Nf(o,!1).getAll();return new Yu(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),EN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}B1.type="LOCAL";const bN=B1;new Qu(3e4,6e4);function SN(r,t){return t?$r(t):(Ot(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Vp extends x1{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Qo(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Qo(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Qo(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function AN(r){return sN(r.auth,new Vp(r),r.bypassAuthState)}function wN(r){const{auth:t,user:n}=r;return Ot(n,t,"internal-error"),rN(n,new Vp(r),r.bypassAuthState)}async function RN(r){const{auth:t,user:n}=r;return Ot(n,t,"internal-error"),iN(n,new Vp(r),r.bypassAuthState)}class q1{constructor(t,n,s,o,u=!1){this.auth=t,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:h,type:m}=t;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return AN;case"linkViaPopup":case"linkViaRedirect":return RN;case"reauthViaPopup":case"reauthViaRedirect":return wN;default:Wr(this.auth,"internal-error")}}resolve(t){ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const CN=new Qu(2e3,1e4);class qo extends q1{constructor(t,n,s,o,u){super(t,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,qo.currentPopupAction&&qo.currentPopupAction.cancel(),qo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Ot(t,this.auth,"internal-error"),t}async onExecution(){ts(this.filter.length===1,"Popup operations only handle one event");const t=Mp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qo.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,CN.get())};t()}}qo.currentPopupAction=null;const IN="pendingRedirect",Mh=new Map;class DN extends q1{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Mh.get(this.auth._key());if(!t){try{const s=await NN(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Mh.set(this.auth._key(),t)}return this.bypassAuthState||Mh.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function NN(r,t){const n=MN(t),s=ON(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function xN(r,t){Mh.set(r._key(),t)}function ON(r){return $r(r._redirectPersistence)}function MN(r){return Oh(IN,r.config.apiKey,r.name)}async function VN(r,t,n=!1){if(Ji(r.app))return Promise.reject(ta(r));const s=If(r),o=SN(s,t),h=await new DN(s,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,t)),h}const kN=600*1e3;class PN{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!LN(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!H1(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Er(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=kN&&this.cachedEventUids.clear(),this.cachedEventUids.has(GE(t))}saveEventToCache(t){this.cachedEventUids.add(GE(t)),this.lastProcessedEventTime=Date.now()}}function GE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function H1({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function LN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return H1(r);default:return!1}}async function UN(r,t={}){return hl(r,"GET","/v1/projects",t)}const zN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jN=/^https?/;async function BN(r){if(r.config.emulator)return;const{authorizedDomains:t}=await UN(r);for(const n of t)try{if(qN(n))return}catch{}Wr(r,"unauthorized-domain")}function qN(r){const t=Ig(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===s}if(!jN.test(n))return!1;if(zN.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const HN=new Qu(3e4,6e4);function KE(){const r=Tr().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function FN(r){return new Promise((t,n)=>{function s(){KE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{KE(),n(Er(r,"network-request-failed"))},timeout:HN.get()})}if(Tr().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Tr().gapi?.load)s();else{const o=YD("iframefcb");return Tr()[o]=()=>{gapi.load?s():n(Er(r,"network-request-failed"))},QD(`${$D()}?onload=${o}`).catch(u=>n(u))}}).catch(t=>{throw Vh=null,t})}let Vh=null;function GN(r){return Vh=Vh||FN(r),Vh}const KN=new Qu(5e3,15e3),QN="__/auth/iframe",$N="emulator/auth/iframe",YN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZN(r){const t=r.config;Ot(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?Dp(t,$N):`https://${r.config.authDomain}/${QN}`,s={apiKey:t.apiKey,appName:r.name,v:sl},o=XN.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Lu(s).slice(1)}`}async function JN(r){const t=await GN(r),n=Tr().gapi;return Ot(n,r,"internal-error"),t.open({where:document.body,url:ZN(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YN,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const h=Er(r,"network-request-failed"),m=Tr().setTimeout(()=>{u(h)},KN.get());function g(){Tr().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{u(h)})}))}const WN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tx=500,ex=600,nx="_blank",ix="http://localhost";class QE{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rx(r,t,n,s=tx,o=ex){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...WN,width:s.toString(),height:o.toString(),top:u,left:h},p=Bn().toLowerCase();n&&(m=S1(p)?nx:n),T1(p)&&(t=t||ix,g.scrollbars="yes");const E=Object.entries(g).reduce((S,[N,F])=>`${S}${N}=${F},`,"");if(zD(p)&&m!=="_self")return sx(t||"",m),new QE(null);const T=window.open(t||"",m,E);Ot(T,r,"popup-blocked");try{T.focus()}catch{}return new QE(T)}function sx(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const ax="__/auth/handler",ox="emulator/auth/handler",lx=encodeURIComponent("fac");async function $E(r,t,n,s,o,u){Ot(r.config.authDomain,r,"auth-domain-config-required"),Ot(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:sl,eventId:o};if(t instanceof O1){t.setDefaultLanguage(r.languageCode),h.providerId=t.providerId||"",Qw(t.getCustomParameters())||(h.customParameters=JSON.stringify(t.getCustomParameters()));for(const[E,T]of Object.entries({}))h[E]=T}if(t instanceof $u){const E=t.getScopes().filter(T=>T!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const m=h;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await r._getAppCheckToken(),p=g?`#${lx}=${encodeURIComponent(g)}`:"";return`${ux(r)}?${Lu(m).slice(1)}${p}`}function ux({config:r}){return r.emulator?Dp(r,ox):`https://${r.authDomain}/${ax}`}const Gm="webStorageSupport";class cx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=L1,this._completeRedirectFn=VN,this._overrideRedirectResult=xN}async _openPopup(t,n,s,o){ts(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const u=await $E(t,n,s,Ig(),o);return rx(t,u,Mp())}async _openRedirect(t,n,s,o){await this._originValidation(t);const u=await $E(t,n,s,Ig(),o);return dN(u),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(ts(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await JN(t),s=new PN(t);return n.register("authEvent",o=>(Ot(o?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Gm,{type:Gm},o=>{const u=o?.[0]?.[Gm];u!==void 0&&n(!!u),Wr(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=BN(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return I1()||b1()||xp()}}const hx=cx;var YE="@firebase/auth",XE="1.12.0";class fx{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function dx(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mx(r){Yo(new Ga("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=s.options;Ot(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:D1(r)},p=new GD(s,o,u,g);return ZD(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Yo(new Ga("auth-internal",t=>{const n=If(t.getProvider("auth").getImmediate());return(s=>new fx(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ys(YE,XE,dx(r)),Ys(YE,XE,"esm2020")}const gx=300,px=AT("authIdTokenMaxAge")||gx;let ZE=null;const yx=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>px)return;const o=n?.token;ZE!==o&&(ZE=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Og(r=NT()){const t=Fg(r,"auth");if(t.isInitialized())return t.getImmediate();const n=XD(r,{popupRedirectResolver:hx,persistence:[bN,cN,L1]}),s=AT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const h=yx(u.toString());oN(n,h,()=>h(n.currentUser)),aN(n,m=>h(m))}}const o=bT("auth");return o&&JD(n,`http://${o}`),n}function _x(){return document.getElementsByTagName("head")?.[0]??document}KD({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=o=>{const u=Er("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",_x().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mx("Browser");var vx="firebase",Ex="12.7.0";Ys(vx,Ex,"app");const JE={apiKey:"AIzaSyB3ncjSdbTdaUqac5QvHon-Id5mCo3pByM",authDomain:"dragmate-af04d.firebaseapp.com",projectId:"dragmate-af04d",storageBucket:"dragmate-af04d.firebasestorage.app",messagingSenderId:"370425129874",appId:"1:370425129874:web:4c5c526a593e8fa45a6f4b"};let Km=null,yn=null,kh=null,Kr=!1;try{Object.values(JE).every(Boolean)?(Km=I0().length?I0()[0]:DT(JE),yn=rD(Km),kh=Og(Km),Kr=!0,console.log(" Firebase initialized for DragMate")):console.warn(" DEMO MODE: Firebase env vars missing. Global features will run in local/demo mode only.")}catch(r){console.error(" Firebase initialization failed:",r)}const WE=3e4;async function Tx(r){return r?r.currentUser?r.currentUser:(await Ng(r)).user??null:null}async function tT(r,t){const n=Ba(r,"presence",t.uid);await u1(n,{lastSeen:new Date,status:"online"},{merge:!0})}function bx(){const[r,t]=J.useState({count:null,loading:!0,error:null,isOnline:!1,isSupported:Kr&&!!yn&&!!kh});return J.useEffect(()=>{if(!Kr||!yn||!kh){t(g=>({...g,loading:!1,isSupported:!1}));return}const n=yn,s=kh;let o=!1,u=null,h=null;return(async()=>{try{const g=await Tx(s);if(!g||o)return;await tT(n,g),t(T=>({...T,isOnline:!0,isSupported:!0})),u=window.setInterval(()=>{tT(n,g).catch(T=>{console.error("Failed to update presence",T)})},WE/2);const p=new Date(Date.now()-WE),E=mD(ja(n,"presence"),gD("lastSeen",">=",p));h=c1(E,T=>{o||t(S=>({...S,count:T.size,loading:!1,error:null}))},T=>{console.error("Presence subscription error",T),!o&&t(S=>({...S,loading:!1,error:T.message??"Failed to subscribe to presence"}))})}catch(g){if(console.error("Presence initialization failed",g),o)return;t(p=>({...p,loading:!1,error:g?.message??"Presence initialization failed",isSupported:!1}))}})(),()=>{o=!0,u!==null&&window.clearInterval(u),h&&h()}},[]),r}const Sx=({onCreateRoom:r,onJoinRoom:t,isAuthLoading:n})=>{const[s,o]=J.useState(""),[u,h]=J.useState(!1),{count:m,loading:g,isSupported:p}=bx(),E=async()=>{h(!0);try{await r()}finally{h(!1)}};return Z.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[85vh] gap-12 relative overflow-hidden",children:[Z.jsxs("div",{className:"text-center space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-1000",children:[Z.jsx("div",{className:"inline-flex items-center px-4 py-1.5 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-400 text-sm font-semibold tracking-wide",children:"PREMIUM MULTIPLAYER CHESS"}),Z.jsx("h1",{className:"text-8xl font-black tracking-tight bg-clip-text text-transparent bg-linear-to-b from-white via-indigo-100 to-indigo-400",children:"DragMate"}),Z.jsx("p",{className:"text-xl text-slate-400 max-w-xl mx-auto leading-relaxed font-medium",children:"Master the board with friends in a fluid, minimalist arena. Zero friction. Pure strategy."})]}),Z.jsxs("div",{className:"liquid-glass p-12 w-full max-w-xl space-y-10 animate-in fade-in slide-in-from-bottom-12 duration-1000 delay-200",children:[Z.jsxs("div",{className:"space-y-6",children:[Z.jsxs("button",{onClick:E,disabled:u||n,className:"w-full btn-premium flex items-center justify-center gap-4 text-2xl py-5 group disabled:opacity-50 disabled:cursor-not-allowed",children:[u||n?Z.jsx("div",{className:"w-7 h-7 border-3 border-white/20 border-t-white rounded-full animate-spin"}):Z.jsx(dw,{size:28,className:"transition-transform group-hover:rotate-90"}),Z.jsx("span",{children:n?"Initializing...":u?"Creating Arena...":"New Game"})]}),Z.jsxs("div",{className:"relative flex items-center gap-6",children:[Z.jsx("div",{className:"flex-1 h-px bg-slate-800"}),Z.jsx("span",{className:"text-slate-600 text-xs font-black uppercase tracking-[0.2em]",children:"OR"}),Z.jsx("div",{className:"flex-1 h-px bg-slate-800"})]}),Z.jsxs("div",{className:"flex gap-4",children:[Z.jsx("div",{className:"relative flex-1 group",children:Z.jsx("input",{type:"text",placeholder:"Enter Room ID",value:s,onChange:T=>o(T.target.value),className:"w-full bg-slate-900/40 border border-slate-800/50 rounded-2xl px-8 py-5 text-xl placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all group-hover:border-slate-700"})}),Z.jsx("button",{onClick:()=>t(s),disabled:!s.trim()||n,className:"bg-white text-slate-950 hover:bg-slate-100 disabled:opacity-20 disabled:grayscale px-8 py-5 rounded-2xl transition-all duration-300 font-black active:scale-95 shadow-2xl hover:shadow-white/10",children:Z.jsx(hw,{size:28})})]})]}),Z.jsxs("div",{className:"grid grid-cols-2 gap-6 pt-6 border-t border-slate-800/40",children:[Z.jsxs("div",{className:"space-y-1",children:[Z.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest",children:"Active Players"}),Z.jsx("div",{className:"text-3xl font-bold text-white tracking-tight",children:p?g?"":(m??0).toLocaleString():"Demo"})]}),Z.jsxs("div",{className:"space-y-1 text-right",children:[Z.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest",children:"Global Sync"}),Z.jsxs("div",{className:"text-3xl font-bold text-green-400 tracking-tight flex items-center justify-end gap-2",children:[Z.jsx("span",{className:`w-2 h-2 rounded-full animate-pulse ${p?"bg-green-500":"bg-slate-600"}`}),p?"Live":"Demo"]})]})]})]}),Z.jsxs("div",{className:"flex items-center gap-10 text-slate-600 font-bold uppercase tracking-widest text-[10px] animate-in fade-in duration-1000 delay-500",children:[Z.jsx("a",{href:"#",className:"hover:text-indigo-400 transition-colors",children:"Documentation"}),Z.jsx("a",{href:"#",className:"hover:text-indigo-400 transition-colors",children:"Leaderboard"}),Z.jsx("a",{href:"#",className:"hover:text-indigo-400 transition-colors",children:"Source Code"})]})]})};function Ax(r){return r!==null?{comment:r,variations:[]}:{variations:[]}}function wx(r,t,n,s,o){const u={move:r,variations:o};return t&&(u.suffix=t),n&&(u.nag=n),s!==null&&(u.comment=s),u}function Rx(...r){const[t,...n]=r;let s=t;for(const o of n)o!==null&&(s.variations=[o,...o.variations],o.variations=[],s=o);return t}function Cx(r,t){if(t.marker&&t.marker.comment){let n=t.root;for(;;){const s=n.variations[0];if(!s){n.comment=t.marker.comment;break}n=s}}return{headers:r,root:t.root,result:(t.marker&&t.marker.result)??void 0}}function Ix(r,t){function n(){this.constructor=r}n.prototype=t.prototype,r.prototype=new n}function il(r,t,n,s){var o=Error.call(this,r);return Object.setPrototypeOf&&Object.setPrototypeOf(o,il.prototype),o.expected=t,o.found=n,o.location=s,o.name="SyntaxError",o}Ix(il,Error);function Qm(r,t,n){return n=n||" ",r.length>t?r:(t-=r.length,n+=n.repeat(t),r+n.slice(0,t))}il.prototype.format=function(r){var t="Error: "+this.message;if(this.location){var n=null,s;for(s=0;s<r.length;s++)if(r[s].source===this.location.source){n=r[s].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,u=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(o):o,h=this.location.source+":"+u.line+":"+u.column;if(n){var m=this.location.end,g=Qm("",u.line.toString().length," "),p=n[o.line-1],E=o.line===m.line?m.column:p.length+1,T=E-o.column||1;t+=`
 --> `+h+`
`+g+` |
`+u.line+" | "+p+`
`+g+" | "+Qm("",o.column-1," ")+Qm("",T,"^")}else t+=`
 at `+h}return t};il.buildMessage=function(r,t){var n={literal:function(p){return'"'+o(p.text)+'"'},class:function(p){var E=p.parts.map(function(T){return Array.isArray(T)?u(T[0])+"-"+u(T[1]):u(T)});return"["+(p.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(p){return p.description}};function s(p){return p.charCodeAt(0).toString(16).toUpperCase()}function o(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+s(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+s(E)})}function u(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+s(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+s(E)})}function h(p){return n[p.type](p)}function m(p){var E=p.map(h),T,S;if(E.sort(),E.length>0){for(T=1,S=1;T<E.length;T++)E[T-1]!==E[T]&&(E[S]=E[T],S++);E.length=S}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function g(p){return p?'"'+o(p)+'"':"end of input"}return"Expected "+m(r)+" but "+g(t)+" found."};function Dx(r,t){t=t!==void 0?t:{};var n={},s=t.grammarSource,o={pgn:Za},u=Za,h="[",m='"',g="]",p=".",E="O-O-O",T="O-O",S="0-0-0",N="0-0",F="$",U="{",B="}",st=";",ct="(",at=")",yt="1-0",pt="0-1",ft="1/2-1/2",R="*",w=/^[a-zA-Z]/,C=/^[^"]/,O=/^[0-9]/,x=/^[.]/,k=/^[a-zA-Z1-8\-=]/,I=/^[+#]/,qt=/^[!?]/,we=/^[^}]/,X=/^[^\r\n]/,lt=/^[ \t\r\n]/,St=de("tag pair"),Pt=te("[",!1),Kt=te('"',!1),M=te("]",!1),tt=de("tag name"),ut=Ne([["a","z"],["A","Z"]],!1,!1),dt=de("tag value"),It=Ne(['"'],!0,!1),wt=de("move number"),Lt=Ne([["0","9"]],!1,!1),De=te(".",!1),oe=Ne(["."],!1,!1),Be=de("standard algebraic notation"),Ei=te("O-O-O",!1),Vn=te("O-O",!1),Ui=te("0-0-0",!1),Ye=te("0-0",!1),li=Ne([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),kn=Ne(["+","#"],!1,!1),nr=de("suffix annotation"),zi=Ne(["!","?"],!1,!1),Te=de("NAG"),le=te("$",!1),qn=de("brace comment"),ir=te("{",!1),rr=Ne(["}"],!0,!1),Xe=te("}",!1),ji=de("rest of line comment"),Ar=te(";",!1),Hn=Ne(["\r",`
`],!0,!1),An=de("variation"),Bi=te("(",!1),wr=te(")",!1),Fn=de("game termination marker"),Rr=te("1-0",!1),Gn=te("0-1",!1),qe=te("1/2-1/2",!1),mn=te("*",!1),be=de("whitespace"),Cr=Ne([" ","	","\r",`
`],!1,!1),qi=function(L,Q){return Cx(L,Q)},ns=function(L){return Object.fromEntries(L)},Zn=function(L,Q){return[L,Q]},Hi=function(L,Q){return{root:L,marker:Q}},Bt=function(L,Q){return Rx(Ax(L),...Q.flat())},Se=function(L,Q,H,gt,bt){return wx(L,Q,H,gt,bt)},Ae=function(L){return L},Pe=function(L){return L.replace(/[\r\n]+/g," ")},gn=function(L){return L.trim()},Ze=function(L){return L},Me=function(L,Q){return{result:L,comment:Q}},K=t.peg$currPos|0,he=[{line:1,column:1}],fe=K,He=t.peg$maxFailExpected||[],ot=t.peg$silentFails|0,ln;if(t.startRule){if(!(t.startRule in o))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');u=o[t.startRule]}function te(L,Q){return{type:"literal",text:L,ignoreCase:Q}}function Ne(L,Q,H){return{type:"class",parts:L,inverted:Q,ignoreCase:H}}function un(){return{type:"end"}}function de(L){return{type:"other",description:L}}function Ve(L){var Q=he[L],H;if(Q)return Q;if(L>=he.length)H=he.length-1;else for(H=L;!he[--H];);for(Q=he[H],Q={line:Q.line,column:Q.column};H<L;)r.charCodeAt(H)===10?(Q.line++,Q.column=1):Q.column++,H++;return he[L]=Q,Q}function Fe(L,Q,H){var gt=Ve(L),bt=Ve(Q),Jt={source:s,start:{offset:L,line:gt.line,column:gt.column},end:{offset:Q,line:bt.line,column:bt.column}};return Jt}function vt(L){K<fe||(K>fe&&(fe=K,He=[]),He.push(L))}function is(L,Q,H){return new il(il.buildMessage(L,Q),L,Q,H)}function Za(){var L,Q,H;return L=K,Q=Ja(),H=bi(),L=qi(Q,H),L}function Ja(){var L,Q,H;for(L=K,Q=[],H=ha();H!==n;)Q.push(H),H=ha();return H=Je(),L=ns(Q),L}function ha(){var L,Q,H,gt,bt,Jt,Ht;return ot++,L=K,Je(),r.charCodeAt(K)===91?(Q=h,K++):(Q=n,ot===0&&vt(Pt)),Q!==n?(Je(),H=Ti(),H!==n?(Je(),r.charCodeAt(K)===34?(gt=m,K++):(gt=n,ot===0&&vt(Kt)),gt!==n?(bt=rs(),r.charCodeAt(K)===34?(Jt=m,K++):(Jt=n,ot===0&&vt(Kt)),Jt!==n?(Je(),r.charCodeAt(K)===93?(Ht=g,K++):(Ht=n,ot===0&&vt(M)),Ht!==n?L=Zn(H,bt):(K=L,L=n)):(K=L,L=n)):(K=L,L=n)):(K=L,L=n)):(K=L,L=n),ot--,L===n&&ot===0&&vt(St),L}function Ti(){var L,Q,H;if(ot++,L=K,Q=[],H=r.charAt(K),w.test(H)?K++:(H=n,ot===0&&vt(ut)),H!==n)for(;H!==n;)Q.push(H),H=r.charAt(K),w.test(H)?K++:(H=n,ot===0&&vt(ut));else Q=n;return Q!==n?L=r.substring(L,K):L=Q,ot--,L===n&&(Q=n,ot===0&&vt(tt)),L}function rs(){var L,Q,H;for(ot++,L=K,Q=[],H=r.charAt(K),C.test(H)?K++:(H=n,ot===0&&vt(It));H!==n;)Q.push(H),H=r.charAt(K),C.test(H)?K++:(H=n,ot===0&&vt(It));return L=r.substring(L,K),ot--,Q=n,ot===0&&vt(dt),L}function bi(){var L,Q,H;return L=K,Q=Kn(),Je(),H=ma(),H===n&&(H=null),Je(),L=Hi(Q,H),L}function Kn(){var L,Q,H,gt;for(L=K,Q=Jn(),Q===n&&(Q=null),H=[],gt=Pn();gt!==n;)H.push(gt),gt=Pn();return L=Bt(Q,H),L}function Pn(){var L,Q,H,gt,bt,Jt,Ht,wi;if(L=K,Je(),Si(),Je(),Q=Le(),Q!==n){for(H=fa(),H===n&&(H=null),gt=[],bt=ss();bt!==n;)gt.push(bt),bt=ss();for(bt=Je(),Jt=Jn(),Jt===n&&(Jt=null),Ht=[],wi=as();wi!==n;)Ht.push(wi),wi=as();L=Se(Q,H,gt,Jt,Ht)}else K=L,L=n;return L}function Si(){var L,Q,H,gt,bt,Jt;for(ot++,L=K,Q=[],H=r.charAt(K),O.test(H)?K++:(H=n,ot===0&&vt(Lt));H!==n;)Q.push(H),H=r.charAt(K),O.test(H)?K++:(H=n,ot===0&&vt(Lt));if(r.charCodeAt(K)===46?(H=p,K++):(H=n,ot===0&&vt(De)),H!==n){for(gt=Je(),bt=[],Jt=r.charAt(K),x.test(Jt)?K++:(Jt=n,ot===0&&vt(oe));Jt!==n;)bt.push(Jt),Jt=r.charAt(K),x.test(Jt)?K++:(Jt=n,ot===0&&vt(oe));Q=[Q,H,gt,bt],L=Q}else K=L,L=n;return ot--,L===n&&(Q=n,ot===0&&vt(wt)),L}function Le(){var L,Q,H,gt,bt,Jt;if(ot++,L=K,Q=K,r.substr(K,5)===E?(H=E,K+=5):(H=n,ot===0&&vt(Ei)),H===n&&(r.substr(K,3)===T?(H=T,K+=3):(H=n,ot===0&&vt(Vn)),H===n&&(r.substr(K,5)===S?(H=S,K+=5):(H=n,ot===0&&vt(Ui)),H===n&&(r.substr(K,3)===N?(H=N,K+=3):(H=n,ot===0&&vt(Ye)),H===n))))if(H=K,gt=r.charAt(K),w.test(gt)?K++:(gt=n,ot===0&&vt(ut)),gt!==n){if(bt=[],Jt=r.charAt(K),k.test(Jt)?K++:(Jt=n,ot===0&&vt(li)),Jt!==n)for(;Jt!==n;)bt.push(Jt),Jt=r.charAt(K),k.test(Jt)?K++:(Jt=n,ot===0&&vt(li));else bt=n;bt!==n?(gt=[gt,bt],H=gt):(K=H,H=n)}else K=H,H=n;return H!==n?(gt=r.charAt(K),I.test(gt)?K++:(gt=n,ot===0&&vt(kn)),gt===n&&(gt=null),H=[H,gt],Q=H):(K=Q,Q=n),Q!==n?L=r.substring(L,K):L=Q,ot--,L===n&&(Q=n,ot===0&&vt(Be)),L}function fa(){var L,Q,H;for(ot++,L=K,Q=[],H=r.charAt(K),qt.test(H)?K++:(H=n,ot===0&&vt(zi));H!==n;)Q.push(H),Q.length>=2?H=n:(H=r.charAt(K),qt.test(H)?K++:(H=n,ot===0&&vt(zi)));return Q.length<1?(K=L,L=n):L=Q,ot--,L===n&&(Q=n,ot===0&&vt(nr)),L}function ss(){var L,Q,H,gt,bt;if(ot++,L=K,Je(),r.charCodeAt(K)===36?(Q=F,K++):(Q=n,ot===0&&vt(le)),Q!==n){if(H=K,gt=[],bt=r.charAt(K),O.test(bt)?K++:(bt=n,ot===0&&vt(Lt)),bt!==n)for(;bt!==n;)gt.push(bt),bt=r.charAt(K),O.test(bt)?K++:(bt=n,ot===0&&vt(Lt));else gt=n;gt!==n?H=r.substring(H,K):H=gt,H!==n?L=Ae(H):(K=L,L=n)}else K=L,L=n;return ot--,L===n&&ot===0&&vt(Te),L}function Jn(){var L;return L=Ai(),L===n&&(L=da()),L}function Ai(){var L,Q,H,gt,bt;if(ot++,L=K,r.charCodeAt(K)===123?(Q=U,K++):(Q=n,ot===0&&vt(ir)),Q!==n){for(H=K,gt=[],bt=r.charAt(K),we.test(bt)?K++:(bt=n,ot===0&&vt(rr));bt!==n;)gt.push(bt),bt=r.charAt(K),we.test(bt)?K++:(bt=n,ot===0&&vt(rr));H=r.substring(H,K),r.charCodeAt(K)===125?(gt=B,K++):(gt=n,ot===0&&vt(Xe)),gt!==n?L=Pe(H):(K=L,L=n)}else K=L,L=n;return ot--,L===n&&(Q=n,ot===0&&vt(qn)),L}function da(){var L,Q,H,gt,bt;if(ot++,L=K,r.charCodeAt(K)===59?(Q=st,K++):(Q=n,ot===0&&vt(Ar)),Q!==n){for(H=K,gt=[],bt=r.charAt(K),X.test(bt)?K++:(bt=n,ot===0&&vt(Hn));bt!==n;)gt.push(bt),bt=r.charAt(K),X.test(bt)?K++:(bt=n,ot===0&&vt(Hn));H=r.substring(H,K),L=gn(H)}else K=L,L=n;return ot--,L===n&&(Q=n,ot===0&&vt(ji)),L}function as(){var L,Q,H,gt;return ot++,L=K,Je(),r.charCodeAt(K)===40?(Q=ct,K++):(Q=n,ot===0&&vt(Bi)),Q!==n?(H=Kn(),H!==n?(Je(),r.charCodeAt(K)===41?(gt=at,K++):(gt=n,ot===0&&vt(wr)),gt!==n?L=Ze(H):(K=L,L=n)):(K=L,L=n)):(K=L,L=n),ot--,L===n&&ot===0&&vt(An),L}function ma(){var L,Q,H;return ot++,L=K,r.substr(K,3)===yt?(Q=yt,K+=3):(Q=n,ot===0&&vt(Rr)),Q===n&&(r.substr(K,3)===pt?(Q=pt,K+=3):(Q=n,ot===0&&vt(Gn)),Q===n&&(r.substr(K,7)===ft?(Q=ft,K+=7):(Q=n,ot===0&&vt(qe)),Q===n&&(r.charCodeAt(K)===42?(Q=R,K++):(Q=n,ot===0&&vt(mn))))),Q!==n?(Je(),H=Jn(),H===n&&(H=null),L=Me(Q,H)):(K=L,L=n),ot--,L===n&&(Q=n,ot===0&&vt(Fn)),L}function Je(){var L,Q;for(ot++,L=[],Q=r.charAt(K),lt.test(Q)?K++:(Q=n,ot===0&&vt(Cr));Q!==n;)L.push(Q),Q=r.charAt(K),lt.test(Q)?K++:(Q=n,ot===0&&vt(Cr));return ot--,Q=n,ot===0&&vt(be),L}if(ln=u(),t.peg$library)return{peg$result:ln,peg$currPos:K,peg$FAILED:n,peg$maxFailExpected:He,peg$maxFailPos:fe};if(ln!==n&&K===r.length)return ln;throw ln!==n&&K<r.length&&vt(un()),is(He,fe<r.length?r.charAt(fe):null,fe<r.length?Fe(fe,fe+1):Fe(fe,fe))}const Ph=0xffffffffffffffffn;function $m(r,t){return(r<<t|r>>64n-t)&0xffffffffffffffffn}function eT(r,t){return r*t&Ph}function Nx(r){return function(){let t=BigInt(r&Ph),n=BigInt(r>>64n&Ph);const s=eT($m(eT(t,5n),7n),9n);return n^=t,t=($m(t,24n)^n^n<<16n)&Ph,n=$m(n,37n),r=n<<64n|t,s}}const xf=Nx(0xa187eb39cdcaed8f31c4b365b102e01en),xx=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>xf()))),Ox=Array.from({length:8},()=>xf()),Mx=Array.from({length:16},()=>xf()),Ym=xf(),zn="w",pi="b",rn="p",Mg="n",Lh="b",fu="r",js="q",hn="k",Xm="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Sh{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(t,n){const{color:s,piece:o,from:u,to:h,flags:m,captured:g,promotion:p}=n,E=_n(u),T=_n(h);this.color=s,this.piece=o,this.from=E,this.to=T,this.san=t._moveToSan(n,t._moves({legal:!0})),this.lan=E+T,this.before=t.fen(),t._makeMove(n),this.after=t.fen(),t._undoMove(),this.flags="";for(const S in Mt)Mt[S]&m&&(this.flags+=Ua[S]);g&&(this.captured=g),p&&(this.promotion=p,this.lan+=p)}isCapture(){return this.flags.indexOf(Ua.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(Ua.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(Ua.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(Ua.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(Ua.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(Ua.BIG_PAWN)>-1}}const Nn=-1,Ua={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},Mt={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},Vg={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},Vx={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},kx={...Vg,...Vx},xt={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Zm={b:[16,32,17,15],w:[-16,-32,-17,-15]},nT={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},Px=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],Lx=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],Ux={p:1,n:2,b:4,r:8,q:16,k:32},zx="pnbrqkPNBRQK",iT=[Mg,Lh,fu,js],jx=7,Bx=6,qx=1,Hx=0,Ah={[hn]:Mt.KSIDE_CASTLE,[js]:Mt.QSIDE_CASTLE},Us={w:[{square:xt.a1,flag:Mt.QSIDE_CASTLE},{square:xt.h1,flag:Mt.KSIDE_CASTLE}],b:[{square:xt.a8,flag:Mt.QSIDE_CASTLE},{square:xt.h8,flag:Mt.KSIDE_CASTLE}]},Fx={b:qx,w:Bx},Jm="--";function Ha(r){return r>>4}function Mu(r){return r&15}function F1(r){return"0123456789".indexOf(r)!==-1}function _n(r){const t=Mu(r),n=Ha(r);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function ou(r){return r===zn?pi:zn}function Gx(r){const t=r.split(/\s+/);if(t.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(t[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const s=parseInt(t[4],10);if(isNaN(s)||s<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const o=t[0].split("/");if(o.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let h=0;h<o.length;h++){let m=0,g=!1;for(let p=0;p<o[h].length;p++)if(F1(o[h][p])){if(g)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};m+=parseInt(o[h][p],10),g=!0}else{if(!/^[prnbqkPRNBQK]$/.test(o[h][p]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};m+=1,g=!1}if(m!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(t[3][1]=="3"&&t[1]=="w"||t[3][1]=="6"&&t[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const u=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:h,regex:m}of u){if(!m.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${h} king`};if((t[0].match(m)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${h} kings`}}return Array.from(o[0]+o[7]).some(h=>h.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function Kx(r,t){const n=r.from,s=r.to,o=r.piece;let u=0,h=0,m=0;for(let g=0,p=t.length;g<p;g++){const E=t[g].from,T=t[g].to,S=t[g].piece;o===S&&n!==E&&s===T&&(u++,Ha(n)===Ha(E)&&h++,Mu(n)===Mu(E)&&m++)}return u>0?h>0&&m>0?_n(n):m>0?_n(n).charAt(1):_n(n).charAt(0):""}function zs(r,t,n,s,o,u=void 0,h=Mt.NORMAL){const m=Ha(s);if(o===rn&&(m===jx||m===Hx))for(let g=0;g<iT.length;g++){const p=iT[g];r.push({color:t,from:n,to:s,piece:o,captured:u,promotion:p,flags:h|Mt.PROMOTION})}else r.push({color:t,from:n,to:s,piece:o,captured:u,flags:h})}function rT(r){let t=r.charAt(0);return t>="a"&&t<="h"?r.match(/[a-h]\d.*[a-h]\d/)?void 0:rn:(t=t.toLowerCase(),t==="o"?hn:t)}function Wm(r){return r.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class kp{_board=new Array(128);_turn=zn;_header={};_kings={w:Nn,b:Nn};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_hash=0n;_positionCount=new Map;constructor(t=Xm,{skipValidation:n=!1}={}){this.load(t,{skipValidation:n})}clear({preserveHeaders:t=!1}={}){this._board=new Array(128),this._kings={w:Nn,b:Nn},this._turn=zn,this._castling={w:0,b:0},this._epSquare=Nn,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=t?this._header:{...kx},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(t,{skipValidation:n=!1,preserveHeaders:s=!1}={}){let o=t.split(/\s+/);if(o.length>=2&&o.length<6){const m=["-","-","0","1"];t=o.concat(m.slice(-(6-o.length))).join(" ")}if(o=t.split(/\s+/),!n){const{ok:m,error:g}=Gx(t);if(!m)throw new Error(g)}const u=o[0];let h=0;this.clear({preserveHeaders:s});for(let m=0;m<u.length;m++){const g=u.charAt(m);if(g==="/")h+=8;else if(F1(g))h+=parseInt(g,10);else{const p=g<"a"?zn:pi;this._put({type:g.toLowerCase(),color:p},_n(h)),h++}}this._turn=o[1],o[2].indexOf("K")>-1&&(this._castling.w|=Mt.KSIDE_CASTLE),o[2].indexOf("Q")>-1&&(this._castling.w|=Mt.QSIDE_CASTLE),o[2].indexOf("k")>-1&&(this._castling.b|=Mt.KSIDE_CASTLE),o[2].indexOf("q")>-1&&(this._castling.b|=Mt.QSIDE_CASTLE),this._epSquare=o[3]==="-"?Nn:xt[o[3]],this._halfMoves=parseInt(o[4],10),this._moveNumber=parseInt(o[5],10),this._hash=this._computeHash(),this._updateSetup(t),this._incPositionCount()}fen({forceEnpassantSquare:t=!1}={}){let n=0,s="";for(let h=xt.a8;h<=xt.h1;h++){if(this._board[h]){n>0&&(s+=n,n=0);const{color:m,type:g}=this._board[h];s+=m===zn?g.toUpperCase():g.toLowerCase()}else n++;h+1&136&&(n>0&&(s+=n),h!==xt.h1&&(s+="/"),n=0,h+=8)}let o="";this._castling[zn]&Mt.KSIDE_CASTLE&&(o+="K"),this._castling[zn]&Mt.QSIDE_CASTLE&&(o+="Q"),this._castling[pi]&Mt.KSIDE_CASTLE&&(o+="k"),this._castling[pi]&Mt.QSIDE_CASTLE&&(o+="q"),o=o||"-";let u="-";if(this._epSquare!==Nn)if(t)u=_n(this._epSquare);else{const h=this._epSquare+(this._turn===zn?16:-16),m=[h+1,h-1];for(const g of m){if(g&136)continue;const p=this._turn;if(this._board[g]?.color===p&&this._board[g]?.type===rn){this._makeMove({color:p,from:g,to:this._epSquare,piece:rn,captured:rn,flags:Mt.EP_CAPTURE});const E=!this._isKingAttacked(p);if(this._undoMove(),E){u=_n(this._epSquare);break}}}}return[s,this._turn,o,u,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(t){if(!this._board[t])return 0n;const{color:n,type:s}=this._board[t],o={w:0,b:1}[n],u={p:0,n:1,b:2,r:3,q:4,k:5}[s];return xx[o][u][t]}_epKey(){return this._epSquare===Nn?0n:Ox[this._epSquare&7]}_castlingKey(){const t=this._castling.w>>5|this._castling.b>>3;return Mx[t]}_computeHash(){let t=0n;for(let n=xt.a8;n<=xt.h1;n++){if(n&136){n+=7;continue}this._board[n]&&(t^=this._pieceKey(n))}return t^=this._epKey(),t^=this._castlingKey(),this._turn==="b"&&(t^=Ym),t}_updateSetup(t){this._history.length>0||(t!==Xm?(this._header.SetUp="1",this._header.FEN=t):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(Xm)}get(t){return this._board[xt[t]]}findPiece(t){const n=[];for(let s=xt.a8;s<=xt.h1;s++){if(s&136){s+=7;continue}!this._board[s]||this._board[s]?.color!==t.color||this._board[s].color===t.color&&this._board[s].type===t.type&&n.push(_n(s))}return n}put({type:t,color:n},s){return this._put({type:t,color:n},s)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(t,n){this._hash^=this._pieceKey(t),this._board[t]=n,this._hash^=this._pieceKey(t)}_put({type:t,color:n},s){if(zx.indexOf(t.toLowerCase())===-1||!(s in xt))return!1;const o=xt[s];if(t==hn&&!(this._kings[n]==Nn||this._kings[n]==o))return!1;const u=this._board[o];return u&&u.type===hn&&(this._kings[u.color]=Nn),this._set(o,{type:t,color:n}),t===hn&&(this._kings[n]=o),!0}_clear(t){this._hash^=this._pieceKey(t),delete this._board[t]}remove(t){const n=this.get(t);return this._clear(xt[t]),n&&n.type===hn&&(this._kings[n.color]=Nn),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){this._hash^=this._castlingKey();const t=this._board[xt.e1]?.type===hn&&this._board[xt.e1]?.color===zn,n=this._board[xt.e8]?.type===hn&&this._board[xt.e8]?.color===pi;(!t||this._board[xt.a1]?.type!==fu||this._board[xt.a1]?.color!==zn)&&(this._castling.w&=-65),(!t||this._board[xt.h1]?.type!==fu||this._board[xt.h1]?.color!==zn)&&(this._castling.w&=-33),(!n||this._board[xt.a8]?.type!==fu||this._board[xt.a8]?.color!==pi)&&(this._castling.b&=-65),(!n||this._board[xt.h8]?.type!==fu||this._board[xt.h8]?.color!==pi)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){if(this._epSquare===Nn)return;const t=this._epSquare+(this._turn===zn?-16:16),n=this._epSquare+(this._turn===zn?16:-16),s=[n+1,n-1];if(this._board[t]!==null||this._board[this._epSquare]!==null||this._board[n]?.color!==ou(this._turn)||this._board[n]?.type!==rn){this._hash^=this._epKey(),this._epSquare=Nn;return}const o=u=>!(u&136)&&this._board[u]?.color===this._turn&&this._board[u]?.type===rn;s.some(o)||(this._hash^=this._epKey(),this._epSquare=Nn)}_attacked(t,n,s){const o=[];for(let u=xt.a8;u<=xt.h1;u++){if(u&136){u+=7;continue}if(this._board[u]===void 0||this._board[u].color!==t)continue;const h=this._board[u],m=u-n;if(m===0)continue;const g=m+119;if(Px[g]&Ux[h.type]){if(h.type===rn){if(m>0&&h.color===zn||m<=0&&h.color===pi)if(s)o.push(_n(u));else return!0;continue}if(h.type==="n"||h.type==="k")if(s){o.push(_n(u));continue}else return!0;const p=Lx[g];let E=u+p,T=!1;for(;E!==n;){if(this._board[E]!=null){T=!0;break}E+=p}if(!T)if(s){o.push(_n(u));continue}else return!0}}return s?o:!1}attackers(t,n){return n?this._attacked(n,xt[t],!0):this._attacked(this._turn,xt[t],!0)}_isKingAttacked(t){const n=this._kings[t];return n===-1?!1:this._attacked(ou(t),n)}hash(){return this._hash.toString(16)}isAttacked(t,n){return this._attacked(n,xt[t])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const t={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let s=0,o=0;for(let u=xt.a8;u<=xt.h1;u++){if(o=(o+1)%2,u&136){u+=7;continue}const h=this._board[u];h&&(t[h.type]=h.type in t?t[h.type]+1:1,h.type===Lh&&n.push(o),s++)}if(s===2)return!0;if(s===3&&(t[Lh]===1||t[Mg]===1))return!0;if(s===t[Lh]+2){let u=0;const h=n.length;for(let m=0;m<h;m++)u+=n[m];if(u===0||u===h)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:t=!1,square:n=void 0,piece:s=void 0}={}){const o=this._moves({square:n,piece:s});return t?o.map(u=>new Sh(this,u)):o.map(u=>this._moveToSan(u,o))}_moves({legal:t=!0,piece:n=void 0,square:s=void 0}={}){const o=s?s.toLowerCase():void 0,u=n?.toLowerCase(),h=[],m=this._turn,g=ou(m);let p=xt.a8,E=xt.h1,T=!1;if(o)if(o in xt)p=E=xt[o],T=!0;else return[];for(let N=p;N<=E;N++){if(N&136){N+=7;continue}if(!this._board[N]||this._board[N].color===g)continue;const{type:F}=this._board[N];let U;if(F===rn){if(u&&u!==F)continue;U=N+Zm[m][0],this._board[U]||(zs(h,m,N,U,rn),U=N+Zm[m][1],Fx[m]===Ha(N)&&!this._board[U]&&zs(h,m,N,U,rn,void 0,Mt.BIG_PAWN));for(let B=2;B<4;B++)U=N+Zm[m][B],!(U&136)&&(this._board[U]?.color===g?zs(h,m,N,U,rn,this._board[U].type,Mt.CAPTURE):U===this._epSquare&&zs(h,m,N,U,rn,rn,Mt.EP_CAPTURE))}else{if(u&&u!==F)continue;for(let B=0,st=nT[F].length;B<st;B++){const ct=nT[F][B];for(U=N;U+=ct,!(U&136);){if(!this._board[U])zs(h,m,N,U,F);else{if(this._board[U].color===m)break;zs(h,m,N,U,F,this._board[U].type,Mt.CAPTURE);break}if(F===Mg||F===hn)break}}}}if((u===void 0||u===hn)&&(!T||E===this._kings[m])){if(this._castling[m]&Mt.KSIDE_CASTLE){const N=this._kings[m],F=N+2;!this._board[N+1]&&!this._board[F]&&!this._attacked(g,this._kings[m])&&!this._attacked(g,N+1)&&!this._attacked(g,F)&&zs(h,m,this._kings[m],F,hn,void 0,Mt.KSIDE_CASTLE)}if(this._castling[m]&Mt.QSIDE_CASTLE){const N=this._kings[m],F=N-2;!this._board[N-1]&&!this._board[N-2]&&!this._board[N-3]&&!this._attacked(g,this._kings[m])&&!this._attacked(g,N-1)&&!this._attacked(g,F)&&zs(h,m,this._kings[m],F,hn,void 0,Mt.QSIDE_CASTLE)}}if(!t||this._kings[m]===-1)return h;const S=[];for(let N=0,F=h.length;N<F;N++)this._makeMove(h[N]),this._isKingAttacked(m)||S.push(h[N]),this._undoMove();return S}move(t,{strict:n=!1}={}){let s=null;if(typeof t=="string")s=this._moveFromSan(t,n);else if(t===null)s=this._moveFromSan(Jm,n);else if(typeof t=="object"){const u=this._moves();for(let h=0,m=u.length;h<m;h++)if(t.from===_n(u[h].from)&&t.to===_n(u[h].to)&&(!("promotion"in u[h])||t.promotion===u[h].promotion)){s=u[h];break}}if(!s)throw typeof t=="string"?new Error(`Invalid move: ${t}`):new Error(`Invalid move: ${JSON.stringify(t)}`);if(this.isCheck()&&s.flags&Mt.NULL_MOVE)throw new Error("Null move not allowed when in check");const o=new Sh(this,s);return this._makeMove(s),this._incPositionCount(),o}_push(t){this._history.push({move:t,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(t,n){this._hash^=this._pieceKey(t),this._board[n]=this._board[t],delete this._board[t],this._hash^=this._pieceKey(n)}_makeMove(t){const n=this._turn,s=ou(n);if(this._push(t),t.flags&Mt.NULL_MOVE){n===pi&&this._moveNumber++,this._halfMoves++,this._turn=s,this._epSquare=Nn;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),t.captured&&(this._hash^=this._pieceKey(t.to)),this._movePiece(t.from,t.to),t.flags&Mt.EP_CAPTURE&&(this._turn===pi?this._clear(t.to-16):this._clear(t.to+16)),t.promotion&&(this._clear(t.to),this._set(t.to,{type:t.promotion,color:n})),this._board[t.to].type===hn){if(this._kings[n]=t.to,t.flags&Mt.KSIDE_CASTLE){const o=t.to-1,u=t.to+1;this._movePiece(u,o)}else if(t.flags&Mt.QSIDE_CASTLE){const o=t.to+1,u=t.to-2;this._movePiece(u,o)}this._castling[n]=0}if(this._castling[n]){for(let o=0,u=Us[n].length;o<u;o++)if(t.from===Us[n][o].square&&this._castling[n]&Us[n][o].flag){this._castling[n]^=Us[n][o].flag;break}}if(this._castling[s]){for(let o=0,u=Us[s].length;o<u;o++)if(t.to===Us[s][o].square&&this._castling[s]&Us[s][o].flag){this._castling[s]^=Us[s][o].flag;break}}if(this._hash^=this._castlingKey(),t.flags&Mt.BIG_PAWN){let o;n===pi?o=t.to-16:o=t.to+16,!(t.to-1&136)&&this._board[t.to-1]?.type===rn&&this._board[t.to-1]?.color===s||!(t.to+1&136)&&this._board[t.to+1]?.type===rn&&this._board[t.to+1]?.color===s?(this._epSquare=o,this._hash^=this._epKey()):this._epSquare=Nn}else this._epSquare=Nn;t.piece===rn?this._halfMoves=0:t.flags&(Mt.CAPTURE|Mt.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===pi&&this._moveNumber++,this._turn=s,this._hash^=Ym}undo(){const t=this._hash,n=this._undoMove();if(n){const s=new Sh(this,n);return this._decPositionCount(t),s}return null}_undoMove(){const t=this._history.pop();if(t===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const n=t.move;this._kings=t.kings,this._turn=t.turn,this._castling=t.castling,this._epSquare=t.epSquare,this._halfMoves=t.halfMoves,this._moveNumber=t.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=Ym;const s=this._turn,o=ou(s);if(n.flags&Mt.NULL_MOVE)return n;if(this._movePiece(n.to,n.from),n.piece&&(this._clear(n.from),this._set(n.from,{type:n.piece,color:s})),n.captured)if(n.flags&Mt.EP_CAPTURE){let u;s===pi?u=n.to-16:u=n.to+16,this._set(u,{type:rn,color:o})}else this._set(n.to,{type:n.captured,color:o});if(n.flags&(Mt.KSIDE_CASTLE|Mt.QSIDE_CASTLE)){let u,h;n.flags&Mt.KSIDE_CASTLE?(u=n.to+1,h=n.to-1):(u=n.to-2,h=n.to+1),this._movePiece(h,u)}return n}pgn({newline:t=`
`,maxWidth:n=0}={}){const s=[];let o=!1;for(const S in this._header)this._header[S]&&s.push(`[${S} "${this._header[S]}"]`+t),o=!0;o&&this._history.length&&s.push(t);const u=S=>{const N=this._comments[this.fen()];if(typeof N<"u"){const F=S.length>0?" ":"";S=`${S}${F}{${N}}`}return S},h=[];for(;this._history.length>0;)h.push(this._undoMove());const m=[];let g="";for(h.length===0&&m.push(u(""));h.length>0;){g=u(g);const S=h.pop();if(!S)break;if(!this._history.length&&S.color==="b"){const N=`${this._moveNumber}. ...`;g=g?`${g} ${N}`:N}else S.color==="w"&&(g.length&&m.push(g),g=this._moveNumber+".");g=g+" "+this._moveToSan(S,this._moves({legal:!0})),this._makeMove(S)}if(g.length&&m.push(u(g)),m.push(this._header.Result||"*"),n===0)return s.join("")+m.join(" ");const p=function(){return s.length>0&&s[s.length-1]===" "?(s.pop(),!0):!1},E=function(S,N){for(const F of N.split(" "))if(F){if(S+F.length>n){for(;p();)S--;s.push(t),S=0}s.push(F),S+=F.length,s.push(" "),S++}return p()&&S--,S};let T=0;for(let S=0;S<m.length;S++){if(T+m[S].length>n&&m[S].includes("{")){T=E(T,m[S]);continue}T+m[S].length>n&&S!==0?(s[s.length-1]===" "&&s.pop(),s.push(t),T=0):S!==0&&(s.push(" "),T++),s.push(m[S]),T+=m[S].length}return s.join("")}header(...t){for(let n=0;n<t.length;n+=2)typeof t[n]=="string"&&typeof t[n+1]=="string"&&(this._header[t[n]]=t[n+1]);return this._header}setHeader(t,n){return this._header[t]=n??Vg[t]??null,this.getHeaders()}removeHeader(t){return t in this._header?(this._header[t]=Vg[t]||null,!0):!1}getHeaders(){const t={};for(const[n,s]of Object.entries(this._header))s!==null&&(t[n]=s);return t}loadPgn(t,{strict:n=!1,newlineChar:s=`\r?
`}={}){s!==`\r?
`&&(t=t.replace(new RegExp(s,"g"),`
`));const o=Dx(t);this.reset();const u=o.headers;let h="";for(const p in u)p.toLowerCase()==="fen"&&(h=u[p]),this.header(p,u[p]);if(!n)h&&this.load(h,{preserveHeaders:!0});else if(u.SetUp==="1"){if(!("FEN"in u))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(u.FEN,{preserveHeaders:!0})}let m=o.root;for(;m;){if(m.move){const p=this._moveFromSan(m.move,n);if(p==null)throw new Error(`Invalid move in PGN: ${m.move}`);this._makeMove(p),this._incPositionCount()}m.comment!==void 0&&(this._comments[this.fen()]=m.comment),m=m.variations[0]}const g=o.result;g&&Object.keys(this._header).length&&this._header.Result!==g&&this.setHeader("Result",g)}_moveToSan(t,n){let s="";if(t.flags&Mt.KSIDE_CASTLE)s="O-O";else if(t.flags&Mt.QSIDE_CASTLE)s="O-O-O";else{if(t.flags&Mt.NULL_MOVE)return Jm;if(t.piece!==rn){const o=Kx(t,n);s+=t.piece.toUpperCase()+o}t.flags&(Mt.CAPTURE|Mt.EP_CAPTURE)&&(t.piece===rn&&(s+=_n(t.from)[0]),s+="x"),s+=_n(t.to),t.promotion&&(s+="="+t.promotion.toUpperCase())}return this._makeMove(t),this.isCheck()&&(this.isCheckmate()?s+="#":s+="+"),this._undoMove(),s}_moveFromSan(t,n=!1){let s=Wm(t);if(n||(s==="0-0"?s="O-O":s==="0-0-0"&&(s="O-O-O")),s==Jm)return{color:this._turn,from:0,to:0,piece:"k",flags:Mt.NULL_MOVE};let o=rT(s),u=this._moves({legal:!0,piece:o});for(let S=0,N=u.length;S<N;S++)if(s===Wm(this._moveToSan(u[S],u)))return u[S];if(n)return null;let h,m,g,p,E,T=!1;if(m=s.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),m?(h=m[1],g=m[2],p=m[3],E=m[4],g.length==1&&(T=!0)):(m=s.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),m&&(h=m[1],g=m[2],p=m[3],E=m[4],g.length==1&&(T=!0))),o=rT(s),u=this._moves({legal:!0,piece:h||o}),!p)return null;for(let S=0,N=u.length;S<N;S++)if(g){if((!h||h.toLowerCase()==u[S].piece)&&xt[g]==u[S].from&&xt[p]==u[S].to&&(!E||E.toLowerCase()==u[S].promotion))return u[S];if(T){const F=_n(u[S].from);if((!h||h.toLowerCase()==u[S].piece)&&xt[p]==u[S].to&&(g==F[0]||g==F[1])&&(!E||E.toLowerCase()==u[S].promotion))return u[S]}}else if(s===Wm(this._moveToSan(u[S],u)).replace("x",""))return u[S];return null}ascii(){let t=`   +------------------------+
`;for(let n=xt.a8;n<=xt.h1;n++){if(Mu(n)===0&&(t+=" "+"87654321"[Ha(n)]+" |"),this._board[n]){const s=this._board[n].type,u=this._board[n].color===zn?s.toUpperCase():s.toLowerCase();t+=" "+u+" "}else t+=" . ";n+1&136&&(t+=`|
`,n+=8)}return t+=`   +------------------------+
`,t+="     a  b  c  d  e  f  g  h",t}perft(t){const n=this._moves({legal:!1});let s=0;const o=this._turn;for(let u=0,h=n.length;u<h;u++)this._makeMove(n[u]),this._isKingAttacked(o)||(t-1>0?s+=this.perft(t-1):s++),this._undoMove();return s}setTurn(t){return this._turn==t?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const t=[];let n=[];for(let s=xt.a8;s<=xt.h1;s++)this._board[s]==null?n.push(null):n.push({square:_n(s),type:this._board[s].type,color:this._board[s].color}),s+1&136&&(t.push(n),n=[],s+=8);return t}squareColor(t){if(t in xt){const n=xt[t];return(Ha(n)+Mu(n))%2===0?"light":"dark"}return null}history({verbose:t=!1}={}){const n=[],s=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const o=n.pop();if(!o)break;t?s.push(new Sh(this,o)):s.push(this._moveToSan(o,this._moves())),this._makeMove(o)}return s}_getPositionCount(t){return this._positionCount.get(t)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(t){const n=this._positionCount.get(t)??0;n===1?this._positionCount.delete(t):this._positionCount.set(t,n-1)}_pruneComments(){const t=[],n={},s=o=>{o in this._comments&&(n[o]=this._comments[o])};for(;this._history.length>0;)t.push(this._undoMove());for(s(this.fen());;){const o=t.pop();if(!o)break;this._makeMove(o),s(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(t){this._comments[this.fen()]=t.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const t=this._comments[this.fen()];return delete this._comments[this.fen()],t}getComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>({fen:t,comment:this._comments[t]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>{const n=this._comments[t];return delete this._comments[t],{fen:t,comment:n}})}setCastlingRights(t,n){for(const o of[hn,js])n[o]!==void 0&&(n[o]?this._castling[t]|=Ah[o]:this._castling[t]&=~Ah[o]);this._updateCastlingRights();const s=this.getCastlingRights(t);return(n[hn]===void 0||n[hn]===s[hn])&&(n[js]===void 0||n[js]===s[js])}getCastlingRights(t){return{[hn]:(this._castling[t]&Ah[hn])!==0,[js]:(this._castling[t]&Ah[js])!==0}}moveNumber(){return this._moveNumber}}var du=yT();const Of=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function fl(r){const t=Object.prototype.toString.call(r);return t==="[object Window]"||t==="[object global]"}function Pp(r){return"nodeType"in r}function oi(r){var t,n;return r?fl(r)?r:Pp(r)&&(t=(n=r.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Lp(r){const{Document:t}=oi(r);return r instanceof t}function Xu(r){return fl(r)?!1:r instanceof oi(r).HTMLElement}function G1(r){return r instanceof oi(r).SVGElement}function dl(r){return r?fl(r)?r.document:Pp(r)?Lp(r)?r:Xu(r)||G1(r)?r.ownerDocument:document:document:document}const la=Of?J.useLayoutEffect:J.useEffect;function Up(r){const t=J.useRef(r);return la(()=>{t.current=r}),J.useCallback(function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return t.current==null?void 0:t.current(...s)},[])}function Qx(){const r=J.useRef(null),t=J.useCallback((s,o)=>{r.current=setInterval(s,o)},[]),n=J.useCallback(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[]);return[t,n]}function Vu(r,t){t===void 0&&(t=[r]);const n=J.useRef(r);return la(()=>{n.current!==r&&(n.current=r)},t),n}function Zu(r,t){const n=J.useRef();return J.useMemo(()=>{const s=r(n.current);return n.current=s,s},[...t])}function of(r){const t=Up(r),n=J.useRef(null),s=J.useCallback(o=>{o!==n.current&&t?.(o,n.current),n.current=o},[]);return[n,s]}function kg(r){const t=J.useRef();return J.useEffect(()=>{t.current=r},[r]),t.current}let tg={};function Mf(r,t){return J.useMemo(()=>{if(t)return t;const n=tg[r]==null?0:tg[r]+1;return tg[r]=n,r+"-"+n},[r,t])}function K1(r){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return s.reduce((u,h)=>{const m=Object.entries(h);for(const[g,p]of m){const E=u[g];E!=null&&(u[g]=E+r*p)}return u},{...t})}}const $o=K1(1),lf=K1(-1);function $x(r){return"clientX"in r&&"clientY"in r}function Q1(r){if(!r)return!1;const{KeyboardEvent:t}=oi(r.target);return t&&r instanceof t}function Yx(r){if(!r)return!1;const{TouchEvent:t}=oi(r.target);return t&&r instanceof t}function Pg(r){if(Yx(r)){if(r.touches&&r.touches.length){const{clientX:t,clientY:n}=r.touches[0];return{x:t,y:n}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:t,clientY:n}=r.changedTouches[0];return{x:t,y:n}}}return $x(r)?{x:r.clientX,y:r.clientY}:null}const Lg=Object.freeze({Translate:{toString(r){if(!r)return;const{x:t,y:n}=r;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:t,scaleY:n}=r;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(r){if(r)return[Lg.Translate.toString(r),Lg.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:t,duration:n,easing:s}=r;return t+" "+n+"ms "+s}}}),sT="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Xx(r){return r.matches(sT)?r:r.querySelector(sT)}const Zx={display:"none"};function Jx(r){let{id:t,value:n}=r;return Tn.createElement("div",{id:t,style:Zx},n)}function Wx(r){let{id:t,announcement:n,ariaLiveType:s="assertive"}=r;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Tn.createElement("div",{id:t,style:o,role:"status","aria-live":s,"aria-atomic":!0},n)}function tO(){const[r,t]=J.useState("");return{announce:J.useCallback(s=>{s!=null&&t(s)},[]),announcement:r}}const $1=J.createContext(null);function eO(r){const t=J.useContext($1);J.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(r)},[r,t])}function nO(){const[r]=J.useState(()=>new Set),t=J.useCallback(s=>(r.add(s),()=>r.delete(s)),[r]);return[J.useCallback(s=>{let{type:o,event:u}=s;r.forEach(h=>{var m;return(m=h[o])==null?void 0:m.call(h,u)})},[r]),t]}const iO={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},rO={onDragStart(r){let{active:t}=r;return"Picked up draggable item "+t.id+"."},onDragOver(r){let{active:t,over:n}=r;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(r){let{active:t,over:n}=r;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(r){let{active:t}=r;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function sO(r){let{announcements:t=rO,container:n,hiddenTextDescribedById:s,screenReaderInstructions:o=iO}=r;const{announce:u,announcement:h}=tO(),m=Mf("DndLiveRegion"),[g,p]=J.useState(!1);if(J.useEffect(()=>{p(!0)},[]),eO(J.useMemo(()=>({onDragStart(T){let{active:S}=T;u(t.onDragStart({active:S}))},onDragMove(T){let{active:S,over:N}=T;t.onDragMove&&u(t.onDragMove({active:S,over:N}))},onDragOver(T){let{active:S,over:N}=T;u(t.onDragOver({active:S,over:N}))},onDragEnd(T){let{active:S,over:N}=T;u(t.onDragEnd({active:S,over:N}))},onDragCancel(T){let{active:S,over:N}=T;u(t.onDragCancel({active:S,over:N}))}}),[u,t])),!g)return null;const E=Tn.createElement(Tn.Fragment,null,Tn.createElement(Jx,{id:s,value:o.draggable}),Tn.createElement(Wx,{id:m,announcement:h}));return n?du.createPortal(E,n):E}var fn;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(fn||(fn={}));function uf(){}function eg(r,t){return J.useMemo(()=>({sensor:r,options:{}}),[r,t])}function aO(){for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return J.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const er=Object.freeze({x:0,y:0});function oO(r,t){let{data:{value:n}}=r,{data:{value:s}}=t;return s-n}function lO(r,t){if(!r||r.length===0)return null;const[n]=r;return n[t]}function uO(r,t){const n=Math.max(t.top,r.top),s=Math.max(t.left,r.left),o=Math.min(t.left+t.width,r.left+r.width),u=Math.min(t.top+t.height,r.top+r.height),h=o-s,m=u-n;if(s<o&&n<u){const g=t.width*t.height,p=r.width*r.height,E=h*m,T=E/(g+p-E);return Number(T.toFixed(4))}return 0}const cO=r=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=r;const o=[];for(const u of s){const{id:h}=u,m=n.get(h);if(m){const g=uO(m,t);g>0&&o.push({id:h,data:{droppableContainer:u,value:g}})}}return o.sort(oO)};function hO(r,t,n){return{...r,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Y1(r,t){return r&&t?{x:r.left-t.left,y:r.top-t.top}:er}function fO(r){return function(n){for(var s=arguments.length,o=new Array(s>1?s-1:0),u=1;u<s;u++)o[u-1]=arguments[u];return o.reduce((h,m)=>({...h,top:h.top+r*m.y,bottom:h.bottom+r*m.y,left:h.left+r*m.x,right:h.right+r*m.x}),{...n})}}const dO=fO(1);function mO(r){if(r.startsWith("matrix3d(")){const t=r.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(r.startsWith("matrix(")){const t=r.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function gO(r,t,n){const s=mO(t);if(!s)return r;const{scaleX:o,scaleY:u,x:h,y:m}=s,g=r.left-h-(1-o)*parseFloat(n),p=r.top-m-(1-u)*parseFloat(n.slice(n.indexOf(" ")+1)),E=o?r.width/o:r.width,T=u?r.height/u:r.height;return{width:E,height:T,top:p,right:g+E,bottom:p+T,left:g}}const pO={ignoreTransform:!1};function Ju(r,t){t===void 0&&(t=pO);let n=r.getBoundingClientRect();if(t.ignoreTransform){const{transform:p,transformOrigin:E}=oi(r).getComputedStyle(r);p&&(n=gO(n,p,E))}const{top:s,left:o,width:u,height:h,bottom:m,right:g}=n;return{top:s,left:o,width:u,height:h,bottom:m,right:g}}function aT(r){return Ju(r,{ignoreTransform:!0})}function yO(r){const t=r.innerWidth,n=r.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function _O(r,t){return t===void 0&&(t=oi(r).getComputedStyle(r)),t.position==="fixed"}function vO(r,t){t===void 0&&(t=oi(r).getComputedStyle(r));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const u=t[o];return typeof u=="string"?n.test(u):!1})}function zp(r,t){const n=[];function s(o){if(t!=null&&n.length>=t||!o)return n;if(Lp(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!Xu(o)||G1(o)||n.includes(o))return n;const u=oi(r).getComputedStyle(o);return o!==r&&vO(o,u)&&n.push(o),_O(o,u)?n:s(o.parentNode)}return r?s(r):n}function X1(r){const[t]=zp(r,1);return t??null}function ng(r){return!Of||!r?null:fl(r)?r:Pp(r)?Lp(r)||r===dl(r).scrollingElement?window:Xu(r)?r:null:null}function Z1(r){return fl(r)?r.scrollX:r.scrollLeft}function J1(r){return fl(r)?r.scrollY:r.scrollTop}function Ug(r){return{x:Z1(r),y:J1(r)}}var En;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(En||(En={}));function W1(r){return!Of||!r?!1:r===document.scrollingElement}function tS(r){const t={x:0,y:0},n=W1(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},s={x:r.scrollWidth-n.width,y:r.scrollHeight-n.height},o=r.scrollTop<=t.y,u=r.scrollLeft<=t.x,h=r.scrollTop>=s.y,m=r.scrollLeft>=s.x;return{isTop:o,isLeft:u,isBottom:h,isRight:m,maxScroll:s,minScroll:t}}const EO={x:.2,y:.2};function TO(r,t,n,s,o){let{top:u,left:h,right:m,bottom:g}=n;s===void 0&&(s=10),o===void 0&&(o=EO);const{isTop:p,isBottom:E,isLeft:T,isRight:S}=tS(r),N={x:0,y:0},F={x:0,y:0},U={height:t.height*o.y,width:t.width*o.x};return!p&&u<=t.top+U.height?(N.y=En.Backward,F.y=s*Math.abs((t.top+U.height-u)/U.height)):!E&&g>=t.bottom-U.height&&(N.y=En.Forward,F.y=s*Math.abs((t.bottom-U.height-g)/U.height)),!S&&m>=t.right-U.width?(N.x=En.Forward,F.x=s*Math.abs((t.right-U.width-m)/U.width)):!T&&h<=t.left+U.width&&(N.x=En.Backward,F.x=s*Math.abs((t.left+U.width-h)/U.width)),{direction:N,speed:F}}function bO(r){if(r===document.scrollingElement){const{innerWidth:u,innerHeight:h}=window;return{top:0,left:0,right:u,bottom:h,width:u,height:h}}const{top:t,left:n,right:s,bottom:o}=r.getBoundingClientRect();return{top:t,left:n,right:s,bottom:o,width:r.clientWidth,height:r.clientHeight}}function eS(r){return r.reduce((t,n)=>$o(t,Ug(n)),er)}function SO(r){return r.reduce((t,n)=>t+Z1(n),0)}function AO(r){return r.reduce((t,n)=>t+J1(n),0)}function wO(r,t){if(t===void 0&&(t=Ju),!r)return;const{top:n,left:s,bottom:o,right:u}=t(r);X1(r)&&(o<=0||u<=0||n>=window.innerHeight||s>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const RO=[["x",["left","right"],SO],["y",["top","bottom"],AO]];class jp{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=zp(n),o=eS(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[u,h,m]of RO)for(const g of h)Object.defineProperty(this,g,{get:()=>{const p=m(s),E=o[u]-p;return this.rect[g]+E},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Tu{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=t}add(t,n,s){var o;(o=this.target)==null||o.addEventListener(t,n,s),this.listeners.push([t,n,s])}}function CO(r){const{EventTarget:t}=oi(r);return r instanceof t?r:dl(r)}function ig(r,t){const n=Math.abs(r.x),s=Math.abs(r.y);return typeof t=="number"?Math.sqrt(n**2+s**2)>t:"x"in t&&"y"in t?n>t.x&&s>t.y:"x"in t?n>t.x:"y"in t?s>t.y:!1}var Li;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(Li||(Li={}));function oT(r){r.preventDefault()}function IO(r){r.stopPropagation()}var Ee;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter",r.Tab="Tab"})(Ee||(Ee={}));const nS={start:[Ee.Space,Ee.Enter],cancel:[Ee.Esc],end:[Ee.Space,Ee.Enter,Ee.Tab]},DO=(r,t)=>{let{currentCoordinates:n}=t;switch(r.code){case Ee.Right:return{...n,x:n.x+25};case Ee.Left:return{...n,x:n.x-25};case Ee.Down:return{...n,y:n.y+25};case Ee.Up:return{...n,y:n.y-25}}};class iS{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Tu(dl(n)),this.windowListeners=new Tu(oi(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Li.Resize,this.handleCancel),this.windowListeners.add(Li.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Li.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,s=t.node.current;s&&wO(s),n(er)}handleKeyDown(t){if(Q1(t)){const{active:n,context:s,options:o}=this.props,{keyboardCodes:u=nS,coordinateGetter:h=DO,scrollBehavior:m="smooth"}=o,{code:g}=t;if(u.end.includes(g)){this.handleEnd(t);return}if(u.cancel.includes(g)){this.handleCancel(t);return}const{collisionRect:p}=s.current,E=p?{x:p.left,y:p.top}:er;this.referenceCoordinates||(this.referenceCoordinates=E);const T=h(t,{active:n,context:s.current,currentCoordinates:E});if(T){const S=lf(T,E),N={x:0,y:0},{scrollableAncestors:F}=s.current;for(const U of F){const B=t.code,{isTop:st,isRight:ct,isLeft:at,isBottom:yt,maxScroll:pt,minScroll:ft}=tS(U),R=bO(U),w={x:Math.min(B===Ee.Right?R.right-R.width/2:R.right,Math.max(B===Ee.Right?R.left:R.left+R.width/2,T.x)),y:Math.min(B===Ee.Down?R.bottom-R.height/2:R.bottom,Math.max(B===Ee.Down?R.top:R.top+R.height/2,T.y))},C=B===Ee.Right&&!ct||B===Ee.Left&&!at,O=B===Ee.Down&&!yt||B===Ee.Up&&!st;if(C&&w.x!==T.x){const x=U.scrollLeft+S.x,k=B===Ee.Right&&x<=pt.x||B===Ee.Left&&x>=ft.x;if(k&&!S.y){U.scrollTo({left:x,behavior:m});return}k?N.x=U.scrollLeft-x:N.x=B===Ee.Right?U.scrollLeft-pt.x:U.scrollLeft-ft.x,N.x&&U.scrollBy({left:-N.x,behavior:m});break}else if(O&&w.y!==T.y){const x=U.scrollTop+S.y,k=B===Ee.Down&&x<=pt.y||B===Ee.Up&&x>=ft.y;if(k&&!S.x){U.scrollTo({top:x,behavior:m});return}k?N.y=U.scrollTop-x:N.y=B===Ee.Down?U.scrollTop-pt.y:U.scrollTop-ft.y,N.y&&U.scrollBy({top:-N.y,behavior:m});break}}this.handleMove(t,$o(lf(T,this.referenceCoordinates),N))}}}handleMove(t,n){const{onMove:s}=this.props;t.preventDefault(),s(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}iS.activators=[{eventName:"onKeyDown",handler:(r,t,n)=>{let{keyboardCodes:s=nS,onActivation:o}=t,{active:u}=n;const{code:h}=r.nativeEvent;if(s.start.includes(h)){const m=u.activatorNode.current;return m&&r.target!==m?!1:(r.preventDefault(),o?.({event:r.nativeEvent}),!0)}return!1}}];function lT(r){return!!(r&&"distance"in r)}function uT(r){return!!(r&&"delay"in r)}class Bp{constructor(t,n,s){var o;s===void 0&&(s=CO(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:u}=t,{target:h}=u;this.props=t,this.events=n,this.document=dl(h),this.documentListeners=new Tu(this.document),this.listeners=new Tu(s),this.windowListeners=new Tu(oi(h)),this.initialCoordinates=(o=Pg(u))!=null?o:er,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Li.Resize,this.handleCancel),this.windowListeners.add(Li.DragStart,oT),this.windowListeners.add(Li.VisibilityChange,this.handleCancel),this.windowListeners.add(Li.ContextMenu,oT),this.documentListeners.add(Li.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(uT(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(lT(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:s,onPending:o}=this.props;o(s,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Li.Click,IO,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Li.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:s,initialCoordinates:o,props:u}=this,{onMove:h,options:{activationConstraint:m}}=u;if(!o)return;const g=(n=Pg(t))!=null?n:er,p=lf(o,g);if(!s&&m){if(lT(m)){if(m.tolerance!=null&&ig(p,m.tolerance))return this.handleCancel();if(ig(p,m.distance))return this.handleStart()}if(uT(m)&&ig(p,m.tolerance))return this.handleCancel();this.handlePending(m,p);return}t.cancelable&&t.preventDefault(),h(g)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Ee.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const NO={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class qp extends Bp{constructor(t){const{event:n}=t,s=dl(n.target);super(t,NO,s)}}qp.activators=[{eventName:"onPointerDown",handler:(r,t)=>{let{nativeEvent:n}=r,{onActivation:s}=t;return!n.isPrimary||n.button!==0?!1:(s?.({event:n}),!0)}}];const xO={move:{name:"mousemove"},end:{name:"mouseup"}};var zg;(function(r){r[r.RightClick=2]="RightClick"})(zg||(zg={}));class rS extends Bp{constructor(t){super(t,xO,dl(t.event.target))}}rS.activators=[{eventName:"onMouseDown",handler:(r,t)=>{let{nativeEvent:n}=r,{onActivation:s}=t;return n.button===zg.RightClick?!1:(s?.({event:n}),!0)}}];const rg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class sS extends Bp{constructor(t){super(t,rg)}static setup(){return window.addEventListener(rg.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(rg.move.name,t)};function t(){}}}sS.activators=[{eventName:"onTouchStart",handler:(r,t)=>{let{nativeEvent:n}=r,{onActivation:s}=t;const{touches:o}=n;return o.length>1?!1:(s?.({event:n}),!0)}}];var bu;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(bu||(bu={}));var cf;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(cf||(cf={}));function OO(r){let{acceleration:t,activator:n=bu.Pointer,canScroll:s,draggingRect:o,enabled:u,interval:h=5,order:m=cf.TreeOrder,pointerCoordinates:g,scrollableAncestors:p,scrollableAncestorRects:E,delta:T,threshold:S}=r;const N=VO({delta:T,disabled:!u}),[F,U]=Qx(),B=J.useRef({x:0,y:0}),st=J.useRef({x:0,y:0}),ct=J.useMemo(()=>{switch(n){case bu.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case bu.DraggableRect:return o}},[n,o,g]),at=J.useRef(null),yt=J.useCallback(()=>{const ft=at.current;if(!ft)return;const R=B.current.x*st.current.x,w=B.current.y*st.current.y;ft.scrollBy(R,w)},[]),pt=J.useMemo(()=>m===cf.TreeOrder?[...p].reverse():p,[m,p]);J.useEffect(()=>{if(!u||!p.length||!ct){U();return}for(const ft of pt){if(s?.(ft)===!1)continue;const R=p.indexOf(ft),w=E[R];if(!w)continue;const{direction:C,speed:O}=TO(ft,w,ct,t,S);for(const x of["x","y"])N[x][C[x]]||(O[x]=0,C[x]=0);if(O.x>0||O.y>0){U(),at.current=ft,F(yt,h),B.current=O,st.current=C;return}}B.current={x:0,y:0},st.current={x:0,y:0},U()},[t,yt,s,U,u,h,JSON.stringify(ct),JSON.stringify(N),F,p,pt,E,JSON.stringify(S)])}const MO={x:{[En.Backward]:!1,[En.Forward]:!1},y:{[En.Backward]:!1,[En.Forward]:!1}};function VO(r){let{delta:t,disabled:n}=r;const s=kg(t);return Zu(o=>{if(n||!s||!o)return MO;const u={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[En.Backward]:o.x[En.Backward]||u.x===-1,[En.Forward]:o.x[En.Forward]||u.x===1},y:{[En.Backward]:o.y[En.Backward]||u.y===-1,[En.Forward]:o.y[En.Forward]||u.y===1}}},[n,t,s])}function kO(r,t){const n=t!=null?r.get(t):void 0,s=n?n.node.current:null;return Zu(o=>{var u;return t==null?null:(u=s??o)!=null?u:null},[s,t])}function PO(r,t){return J.useMemo(()=>r.reduce((n,s)=>{const{sensor:o}=s,u=o.activators.map(h=>({eventName:h.eventName,handler:t(h.handler,s)}));return[...n,...u]},[]),[r,t])}var ku;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(ku||(ku={}));var jg;(function(r){r.Optimized="optimized"})(jg||(jg={}));const cT=new Map;function LO(r,t){let{dragging:n,dependencies:s,config:o}=t;const[u,h]=J.useState(null),{frequency:m,measure:g,strategy:p}=o,E=J.useRef(r),T=B(),S=Vu(T),N=J.useCallback(function(st){st===void 0&&(st=[]),!S.current&&h(ct=>ct===null?st:ct.concat(st.filter(at=>!ct.includes(at))))},[S]),F=J.useRef(null),U=Zu(st=>{if(T&&!n)return cT;if(!st||st===cT||E.current!==r||u!=null){const ct=new Map;for(let at of r){if(!at)continue;if(u&&u.length>0&&!u.includes(at.id)&&at.rect.current){ct.set(at.id,at.rect.current);continue}const yt=at.node.current,pt=yt?new jp(g(yt),yt):null;at.rect.current=pt,pt&&ct.set(at.id,pt)}return ct}return st},[r,u,n,T,g]);return J.useEffect(()=>{E.current=r},[r]),J.useEffect(()=>{T||N()},[n,T]),J.useEffect(()=>{u&&u.length>0&&h(null)},[JSON.stringify(u)]),J.useEffect(()=>{T||typeof m!="number"||F.current!==null||(F.current=setTimeout(()=>{N(),F.current=null},m))},[m,T,N,...s]),{droppableRects:U,measureDroppableContainers:N,measuringScheduled:u!=null};function B(){switch(p){case ku.Always:return!1;case ku.BeforeDragging:return n;default:return!n}}}function aS(r,t){return Zu(n=>r?n||(typeof t=="function"?t(r):r):null,[t,r])}function UO(r,t){return aS(r,t)}function zO(r){let{callback:t,disabled:n}=r;const s=Up(t),o=J.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(s)},[s,n]);return J.useEffect(()=>()=>o?.disconnect(),[o]),o}function Vf(r){let{callback:t,disabled:n}=r;const s=Up(t),o=J.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(s)},[n]);return J.useEffect(()=>()=>o?.disconnect(),[o]),o}function jO(r){return new jp(Ju(r),r)}function hT(r,t,n){t===void 0&&(t=jO);const[s,o]=J.useState(null);function u(){o(g=>{if(!r)return null;if(r.isConnected===!1){var p;return(p=g??n)!=null?p:null}const E=t(r);return JSON.stringify(g)===JSON.stringify(E)?g:E})}const h=zO({callback(g){if(r)for(const p of g){const{type:E,target:T}=p;if(E==="childList"&&T instanceof HTMLElement&&T.contains(r)){u();break}}}}),m=Vf({callback:u});return la(()=>{u(),r?(m?.observe(r),h?.observe(document.body,{childList:!0,subtree:!0})):(m?.disconnect(),h?.disconnect())},[r]),s}function BO(r){const t=aS(r);return Y1(r,t)}const fT=[];function qO(r){const t=J.useRef(r),n=Zu(s=>r?s&&s!==fT&&r&&t.current&&r.parentNode===t.current.parentNode?s:zp(r):fT,[r]);return J.useEffect(()=>{t.current=r},[r]),n}function HO(r){const[t,n]=J.useState(null),s=J.useRef(r),o=J.useCallback(u=>{const h=ng(u.target);h&&n(m=>m?(m.set(h,Ug(h)),new Map(m)):null)},[]);return J.useEffect(()=>{const u=s.current;if(r!==u){h(u);const m=r.map(g=>{const p=ng(g);return p?(p.addEventListener("scroll",o,{passive:!0}),[p,Ug(p)]):null}).filter(g=>g!=null);n(m.length?new Map(m):null),s.current=r}return()=>{h(r),h(u)};function h(m){m.forEach(g=>{const p=ng(g);p?.removeEventListener("scroll",o)})}},[o,r]),J.useMemo(()=>r.length?t?Array.from(t.values()).reduce((u,h)=>$o(u,h),er):eS(r):er,[r,t])}function dT(r,t){t===void 0&&(t=[]);const n=J.useRef(null);return J.useEffect(()=>{n.current=null},t),J.useEffect(()=>{const s=r!==er;s&&!n.current&&(n.current=r),!s&&n.current&&(n.current=null)},[r]),n.current?lf(r,n.current):er}function FO(r){J.useEffect(()=>{if(!Of)return;const t=r.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of t)n?.()}},r.map(t=>{let{sensor:n}=t;return n}))}function GO(r,t){return J.useMemo(()=>r.reduce((n,s)=>{let{eventName:o,handler:u}=s;return n[o]=h=>{u(h,t)},n},{}),[r,t])}function oS(r){return J.useMemo(()=>r?yO(r):null,[r])}const mT=[];function KO(r,t){t===void 0&&(t=Ju);const[n]=r,s=oS(n?oi(n):null),[o,u]=J.useState(mT);function h(){u(()=>r.length?r.map(g=>W1(g)?s:new jp(t(g),g)):mT)}const m=Vf({callback:h});return la(()=>{m?.disconnect(),h(),r.forEach(g=>m?.observe(g))},[r]),o}function QO(r){if(!r)return null;if(r.children.length>1)return r;const t=r.children[0];return Xu(t)?t:r}function $O(r){let{measure:t}=r;const[n,s]=J.useState(null),o=J.useCallback(p=>{for(const{target:E}of p)if(Xu(E)){s(T=>{const S=t(E);return T?{...T,width:S.width,height:S.height}:S});break}},[t]),u=Vf({callback:o}),h=J.useCallback(p=>{const E=QO(p);u?.disconnect(),E&&u?.observe(E),s(E?t(E):null)},[t,u]),[m,g]=of(h);return J.useMemo(()=>({nodeRef:m,rect:n,setRef:g}),[n,m,g])}const YO=[{sensor:qp,options:{}},{sensor:iS,options:{}}],XO={current:{}},Uh={draggable:{measure:aT},droppable:{measure:aT,strategy:ku.WhileDragging,frequency:jg.Optimized},dragOverlay:{measure:Ju}};class Su extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,s;return(n=(s=this.get(t))==null?void 0:s.node.current)!=null?n:void 0}}const ZO={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Su,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:uf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Uh,measureDroppableContainers:uf,windowRect:null,measuringScheduled:!1},JO={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:uf,draggableNodes:new Map,over:null,measureDroppableContainers:uf},kf=J.createContext(JO),WO=J.createContext(ZO);function tM(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Su}}}function eM(r,t){switch(t.type){case fn.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case fn.DragMove:return r.draggable.active==null?r:{...r,draggable:{...r.draggable,translate:{x:t.coordinates.x-r.draggable.initialCoordinates.x,y:t.coordinates.y-r.draggable.initialCoordinates.y}}};case fn.DragEnd:case fn.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case fn.RegisterDroppable:{const{element:n}=t,{id:s}=n,o=new Su(r.droppable.containers);return o.set(s,n),{...r,droppable:{...r.droppable,containers:o}}}case fn.SetDroppableDisabled:{const{id:n,key:s,disabled:o}=t,u=r.droppable.containers.get(n);if(!u||s!==u.key)return r;const h=new Su(r.droppable.containers);return h.set(n,{...u,disabled:o}),{...r,droppable:{...r.droppable,containers:h}}}case fn.UnregisterDroppable:{const{id:n,key:s}=t,o=r.droppable.containers.get(n);if(!o||s!==o.key)return r;const u=new Su(r.droppable.containers);return u.delete(n),{...r,droppable:{...r.droppable,containers:u}}}default:return r}}function nM(r){let{disabled:t}=r;const{active:n,activatorEvent:s,draggableNodes:o}=J.useContext(kf),u=kg(s),h=kg(n?.id);return J.useEffect(()=>{if(!t&&!s&&u&&h!=null){if(!Q1(u)||document.activeElement===u.target)return;const m=o.get(h);if(!m)return;const{activatorNode:g,node:p}=m;if(!g.current&&!p.current)return;requestAnimationFrame(()=>{for(const E of[g.current,p.current]){if(!E)continue;const T=Xx(E);if(T){T.focus();break}}})}},[s,t,o,h,u]),null}function iM(r,t){let{transform:n,...s}=t;return r!=null&&r.length?r.reduce((o,u)=>u({transform:o,...s}),n):n}function rM(r){return J.useMemo(()=>({draggable:{...Uh.draggable,...r?.draggable},droppable:{...Uh.droppable,...r?.droppable},dragOverlay:{...Uh.dragOverlay,...r?.dragOverlay}}),[r?.draggable,r?.droppable,r?.dragOverlay])}function sM(r){let{activeNode:t,measure:n,initialRect:s,config:o=!0}=r;const u=J.useRef(!1),{x:h,y:m}=typeof o=="boolean"?{x:o,y:o}:o;la(()=>{if(!h&&!m||!t){u.current=!1;return}if(u.current||!s)return;const p=t?.node.current;if(!p||p.isConnected===!1)return;const E=n(p),T=Y1(E,s);if(h||(T.x=0),m||(T.y=0),u.current=!0,Math.abs(T.x)>0||Math.abs(T.y)>0){const S=X1(p);S&&S.scrollBy({top:T.y,left:T.x})}},[t,h,m,s,n])}const lS=J.createContext({...er,scaleX:1,scaleY:1});var Bs;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(Bs||(Bs={}));const aM=J.memo(function(t){var n,s,o,u;let{id:h,accessibility:m,autoScroll:g=!0,children:p,sensors:E=YO,collisionDetection:T=cO,measuring:S,modifiers:N,...F}=t;const U=J.useReducer(eM,void 0,tM),[B,st]=U,[ct,at]=nO(),[yt,pt]=J.useState(Bs.Uninitialized),ft=yt===Bs.Initialized,{draggable:{active:R,nodes:w,translate:C},droppable:{containers:O}}=B,x=R!=null?w.get(R):null,k=J.useRef({initial:null,translated:null}),I=J.useMemo(()=>{var Bt;return R!=null?{id:R,data:(Bt=x?.data)!=null?Bt:XO,rect:k}:null},[R,x]),qt=J.useRef(null),[we,X]=J.useState(null),[lt,St]=J.useState(null),Pt=Vu(F,Object.values(F)),Kt=Mf("DndDescribedBy",h),M=J.useMemo(()=>O.getEnabled(),[O]),tt=rM(S),{droppableRects:ut,measureDroppableContainers:dt,measuringScheduled:It}=LO(M,{dragging:ft,dependencies:[C.x,C.y],config:tt.droppable}),wt=kO(w,R),Lt=J.useMemo(()=>lt?Pg(lt):null,[lt]),De=Hi(),oe=UO(wt,tt.draggable.measure);sM({activeNode:R!=null?w.get(R):null,config:De.layoutShiftCompensation,initialRect:oe,measure:tt.draggable.measure});const Be=hT(wt,tt.draggable.measure,oe),Ei=hT(wt?wt.parentElement:null),Vn=J.useRef({activatorEvent:null,active:null,activeNode:wt,collisionRect:null,collisions:null,droppableRects:ut,draggableNodes:w,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ui=O.getNodeFor((n=Vn.current.over)==null?void 0:n.id),Ye=$O({measure:tt.dragOverlay.measure}),li=(s=Ye.nodeRef.current)!=null?s:wt,kn=ft?(o=Ye.rect)!=null?o:Be:null,nr=!!(Ye.nodeRef.current&&Ye.rect),zi=BO(nr?null:Be),Te=oS(li?oi(li):null),le=qO(ft?Ui??wt:null),qn=KO(le),ir=iM(N,{transform:{x:C.x-zi.x,y:C.y-zi.y,scaleX:1,scaleY:1},activatorEvent:lt,active:I,activeNodeRect:Be,containerNodeRect:Ei,draggingNodeRect:kn,over:Vn.current.over,overlayNodeRect:Ye.rect,scrollableAncestors:le,scrollableAncestorRects:qn,windowRect:Te}),rr=Lt?$o(Lt,C):null,Xe=HO(le),ji=dT(Xe),Ar=dT(Xe,[Be]),Hn=$o(ir,ji),An=kn?dO(kn,ir):null,Bi=I&&An?T({active:I,collisionRect:An,droppableRects:ut,droppableContainers:M,pointerCoordinates:rr}):null,wr=lO(Bi,"id"),[Fn,Rr]=J.useState(null),Gn=nr?ir:$o(ir,Ar),qe=hO(Gn,(u=Fn?.rect)!=null?u:null,Be),mn=J.useRef(null),be=J.useCallback((Bt,Se)=>{let{sensor:Ae,options:Pe}=Se;if(qt.current==null)return;const gn=w.get(qt.current);if(!gn)return;const Ze=Bt.nativeEvent,Me=new Ae({active:qt.current,activeNode:gn,event:Ze,options:Pe,context:Vn,onAbort(he){if(!w.get(he))return;const{onDragAbort:He}=Pt.current,ot={id:he};He?.(ot),ct({type:"onDragAbort",event:ot})},onPending(he,fe,He,ot){if(!w.get(he))return;const{onDragPending:te}=Pt.current,Ne={id:he,constraint:fe,initialCoordinates:He,offset:ot};te?.(Ne),ct({type:"onDragPending",event:Ne})},onStart(he){const fe=qt.current;if(fe==null)return;const He=w.get(fe);if(!He)return;const{onDragStart:ot}=Pt.current,ln={activatorEvent:Ze,active:{id:fe,data:He.data,rect:k}};du.unstable_batchedUpdates(()=>{ot?.(ln),pt(Bs.Initializing),st({type:fn.DragStart,initialCoordinates:he,active:fe}),ct({type:"onDragStart",event:ln}),X(mn.current),St(Ze)})},onMove(he){st({type:fn.DragMove,coordinates:he})},onEnd:K(fn.DragEnd),onCancel:K(fn.DragCancel)});mn.current=Me;function K(he){return async function(){const{active:He,collisions:ot,over:ln,scrollAdjustedTranslate:te}=Vn.current;let Ne=null;if(He&&te){const{cancelDrop:un}=Pt.current;Ne={activatorEvent:Ze,active:He,collisions:ot,delta:te,over:ln},he===fn.DragEnd&&typeof un=="function"&&await Promise.resolve(un(Ne))&&(he=fn.DragCancel)}qt.current=null,du.unstable_batchedUpdates(()=>{st({type:he}),pt(Bs.Uninitialized),Rr(null),X(null),St(null),mn.current=null;const un=he===fn.DragEnd?"onDragEnd":"onDragCancel";if(Ne){const de=Pt.current[un];de?.(Ne),ct({type:un,event:Ne})}})}}},[w]),Cr=J.useCallback((Bt,Se)=>(Ae,Pe)=>{const gn=Ae.nativeEvent,Ze=w.get(Pe);if(qt.current!==null||!Ze||gn.dndKit||gn.defaultPrevented)return;const Me={active:Ze};Bt(Ae,Se.options,Me)===!0&&(gn.dndKit={capturedBy:Se.sensor},qt.current=Pe,be(Ae,Se))},[w,be]),qi=PO(E,Cr);FO(E),la(()=>{Be&&yt===Bs.Initializing&&pt(Bs.Initialized)},[Be,yt]),J.useEffect(()=>{const{onDragMove:Bt}=Pt.current,{active:Se,activatorEvent:Ae,collisions:Pe,over:gn}=Vn.current;if(!Se||!Ae)return;const Ze={active:Se,activatorEvent:Ae,collisions:Pe,delta:{x:Hn.x,y:Hn.y},over:gn};du.unstable_batchedUpdates(()=>{Bt?.(Ze),ct({type:"onDragMove",event:Ze})})},[Hn.x,Hn.y]),J.useEffect(()=>{const{active:Bt,activatorEvent:Se,collisions:Ae,droppableContainers:Pe,scrollAdjustedTranslate:gn}=Vn.current;if(!Bt||qt.current==null||!Se||!gn)return;const{onDragOver:Ze}=Pt.current,Me=Pe.get(wr),K=Me&&Me.rect.current?{id:Me.id,rect:Me.rect.current,data:Me.data,disabled:Me.disabled}:null,he={active:Bt,activatorEvent:Se,collisions:Ae,delta:{x:gn.x,y:gn.y},over:K};du.unstable_batchedUpdates(()=>{Rr(K),Ze?.(he),ct({type:"onDragOver",event:he})})},[wr]),la(()=>{Vn.current={activatorEvent:lt,active:I,activeNode:wt,collisionRect:An,collisions:Bi,droppableRects:ut,draggableNodes:w,draggingNode:li,draggingNodeRect:kn,droppableContainers:O,over:Fn,scrollableAncestors:le,scrollAdjustedTranslate:Hn},k.current={initial:kn,translated:An}},[I,wt,Bi,An,w,li,kn,ut,O,Fn,le,Hn]),OO({...De,delta:C,draggingRect:An,pointerCoordinates:rr,scrollableAncestors:le,scrollableAncestorRects:qn});const ns=J.useMemo(()=>({active:I,activeNode:wt,activeNodeRect:Be,activatorEvent:lt,collisions:Bi,containerNodeRect:Ei,dragOverlay:Ye,draggableNodes:w,droppableContainers:O,droppableRects:ut,over:Fn,measureDroppableContainers:dt,scrollableAncestors:le,scrollableAncestorRects:qn,measuringConfiguration:tt,measuringScheduled:It,windowRect:Te}),[I,wt,Be,lt,Bi,Ei,Ye,w,O,ut,Fn,dt,le,qn,tt,It,Te]),Zn=J.useMemo(()=>({activatorEvent:lt,activators:qi,active:I,activeNodeRect:Be,ariaDescribedById:{draggable:Kt},dispatch:st,draggableNodes:w,over:Fn,measureDroppableContainers:dt}),[lt,qi,I,Be,st,Kt,w,Fn,dt]);return Tn.createElement($1.Provider,{value:at},Tn.createElement(kf.Provider,{value:Zn},Tn.createElement(WO.Provider,{value:ns},Tn.createElement(lS.Provider,{value:qe},p)),Tn.createElement(nM,{disabled:m?.restoreFocus===!1})),Tn.createElement(sO,{...m,hiddenTextDescribedById:Kt}));function Hi(){const Bt=we?.autoScrollEnabled===!1,Se=typeof g=="object"?g.enabled===!1:g===!1,Ae=ft&&!Bt&&!Se;return typeof g=="object"?{...g,enabled:Ae}:{enabled:Ae}}}),oM=J.createContext(null),gT="button",lM="Draggable";function uM(r){let{id:t,data:n,disabled:s=!1,attributes:o}=r;const u=Mf(lM),{activators:h,activatorEvent:m,active:g,activeNodeRect:p,ariaDescribedById:E,draggableNodes:T,over:S}=J.useContext(kf),{role:N=gT,roleDescription:F="draggable",tabIndex:U=0}=o??{},B=g?.id===t,st=J.useContext(B?lS:oM),[ct,at]=of(),[yt,pt]=of(),ft=GO(h,t),R=Vu(n);la(()=>(T.set(t,{id:t,key:u,node:ct,activatorNode:yt,data:R}),()=>{const C=T.get(t);C&&C.key===u&&T.delete(t)}),[T,t]);const w=J.useMemo(()=>({role:N,tabIndex:U,"aria-disabled":s,"aria-pressed":B&&N===gT?!0:void 0,"aria-roledescription":F,"aria-describedby":E.draggable}),[s,N,U,B,F,E.draggable]);return{active:g,activatorEvent:m,activeNodeRect:p,attributes:w,isDragging:B,listeners:s?void 0:ft,node:ct,over:S,setNodeRef:at,setActivatorNodeRef:pt,transform:st}}const cM="Droppable",hM={timeout:25};function fM(r){let{data:t,disabled:n=!1,id:s,resizeObserverConfig:o}=r;const u=Mf(cM),{active:h,dispatch:m,over:g,measureDroppableContainers:p}=J.useContext(kf),E=J.useRef({disabled:n}),T=J.useRef(!1),S=J.useRef(null),N=J.useRef(null),{disabled:F,updateMeasurementsFor:U,timeout:B}={...hM,...o},st=Vu(U??s),ct=J.useCallback(()=>{if(!T.current){T.current=!0;return}N.current!=null&&clearTimeout(N.current),N.current=setTimeout(()=>{p(Array.isArray(st.current)?st.current:[st.current]),N.current=null},B)},[B]),at=Vf({callback:ct,disabled:F||!h}),yt=J.useCallback((w,C)=>{at&&(C&&(at.unobserve(C),T.current=!1),w&&at.observe(w))},[at]),[pt,ft]=of(yt),R=Vu(t);return J.useEffect(()=>{!at||!pt.current||(at.disconnect(),T.current=!1,at.observe(pt.current))},[pt,at]),J.useEffect(()=>(m({type:fn.RegisterDroppable,element:{id:s,key:u,disabled:n,node:pt,rect:S,data:R}}),()=>m({type:fn.UnregisterDroppable,key:u,id:s})),[s]),J.useEffect(()=>{n!==E.current.disabled&&(m({type:fn.SetDroppableDisabled,id:s,key:u,disabled:n}),E.current.disabled=n)},[s,u,n,m]),{active:h,rect:S,isOver:g?.id===s,node:pt,over:g,setNodeRef:ft}}const sg=r=>new kp(r),dM=(r,t,n,s)=>{try{return r.move({from:t,to:n,promotion:s||"q"})}catch{return null}},mM=({id:r,isLight:t,isHighlighted:n=!1,children:s})=>{const{isOver:o,setNodeRef:u}=fM({id:r});return Z.jsxs("div",{ref:u,className:`chess-square relative transition-all duration-200 ${o?"bg-indigo-500/30 scale-98 z-10 rounded-xl shadow-[0_0_30px_rgba(99,102,241,0.35)]":n?t?"bg-emerald-300/70":"bg-emerald-500/70":t?"bg-slate-200":"bg-slate-400"}`,children:[Z.jsx("div",{className:`absolute top-1 left-1 text-[10px] font-black uppercase tracking-tighter opacity-20 pointer-events-none ${t?"text-slate-900":"text-slate-100"}`,children:r}),s]})},gM={w:{p:"",r:"",n:"",b:"",q:"",k:""},b:{p:"",r:"",n:"",b:"",q:"",k:""}},pM=({id:r,type:t,color:n,isDraggable:s=!0})=>{const{attributes:o,listeners:u,setNodeRef:h,transform:m,isDragging:g}=uM({id:r,disabled:!s,data:{type:t,color:n}}),p={transform:Lg.Translate.toString(m),transition:"transform 120ms ease-out"};return Z.jsx("div",{ref:h,style:p,...u,...o,className:`chess-piece relative z-20 transition-transform duration-150 ease-out ${g?"scale-115 z-50 drop-shadow-2xl":"hover:scale-103"} ${s?"cursor-grab active:cursor-grabbing":"grayscale-[0.2] opacity-90 cursor-default"} text-slate-950 drop-shadow-sm`,children:Z.jsx("div",{className:`
        flex items-center justify-center w-full h-full 
        ${n==="w"?"drop-shadow-[0_2px_0_rgba(255,255,255,0.8)]":"drop-shadow-[0_2px_0_rgba(0,0,0,0.5)]"}
      `,children:gM[n][t]})})},yM=({onMove:r,initialFen:t,playerColor:n="w",isGameOver:s=!1})=>{const[o,u]=J.useState(()=>sg(t)),[h,m]=J.useState([]);Tn.useEffect(()=>{t&&t!==o.fen()&&u(sg(t))},[t]);const g=aO(eg(qp),eg(rS),eg(sS)),p=J.useCallback(S=>{const{active:N,over:F}=S;if(m([]),!F)return;const U=N.id,B=F.id,st=sg(o.fen());dM(st,U,B)&&(u(st),r&&r(st.fen()))},[o,r]),E=J.useCallback(S=>{const N=S,F=o.get(N);if(s||!F||F.color!==n||o.turn()!==n){m([]);return}const U=o.moves({square:N,verbose:!0}).map(B=>B.to);m(U)},[o,n]),T=()=>{const S=[],N=["a","b","c","d","e","f","g","h"],F=["8","7","6","5","4","3","2","1"],U=n==="w"?F:[...F].reverse(),B=n==="w"?N:[...N].reverse();for(const st of U)for(const ct of B){const at=`${ct}${st}`,yt=o.get(at),pt=(N.indexOf(ct)+F.indexOf(st))%2===0,ft=!!yt&&yt.color===n&&o.turn()===n&&!s,R=h.includes(at);S.push(Z.jsx(mM,{id:at,isLight:pt,isHighlighted:R,children:yt&&Z.jsx(pM,{id:at,type:yt.type,color:yt.color,isDraggable:ft})},at))}return S};return Z.jsx(aM,{sensors:g,onDragEnd:p,onDragStart:S=>E(S.active.id),children:Z.jsx("div",{className:"p-3 bg-slate-900 rounded-[2.5rem] shadow-2xl border border-slate-800 ring-1 ring-white/5",children:Z.jsx("div",{className:"grid grid-cols-8 gap-0 rounded-3xl overflow-hidden border border-slate-900/50",style:{width:"min(95vw, 720px)",height:"min(95vw, 720px)",gridTemplateColumns:"repeat(8, 1fr)"},children:T()})})})},_M=()=>Math.random().toString(36).substring(2,8).toUpperCase(),pT="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",uS=r=>{const[t,n]=J.useState(null),[s,o]=J.useState(null),[u,h]=J.useState(!0),[m,g]=J.useState(!0);J.useEffect(()=>{const U=Og();Ng(U).then(B=>{o(B.user.uid)}).catch(B=>{console.error("Auth failed",B)}).finally(()=>g(!1))},[]);const p=async()=>{if(s)return s;const U=Og(),B=await Ng(U);return o(B.user.uid),B.user.uid};return J.useEffect(()=>{if(!Kr||!yn){console.warn("Firebase not configured; room sync disabled."),h(!1);return}if(!r){n(null),h(!1);return}h(!0);const U=Ba(ja(yn,"rooms"),r),B=c1(U,st=>{st.exists()?n(st.data()):n(null),h(!1)},st=>{console.error("Room subscription error",st),n(null),h(!1)});return()=>B()},[r]),{room:t,userId:s,loading:u,isAuthLoading:m,createRoom:async()=>{if(!Kr||!yn)throw new Error("Firebase not configured");const U=await p(),B=_M(),st=Ba(ja(yn,"rooms"),B);return await u1(st,{fen:pT,whitePlayer:U,blackPlayer:"",turn:"w",status:"active",winner:"",resultReason:""}),B},joinRoom:async U=>{if(!Kr||!yn)throw new Error("Firebase not configured");const B=await p(),st=Ba(ja(yn,"rooms"),U);await VE(yn,async ct=>{const at=await ct.get(st);if(!at.exists())throw new Error("Room not found");const pt={...at.data()};pt.whitePlayer?!pt.blackPlayer&&pt.whitePlayer!==B&&(pt.blackPlayer=B):pt.whitePlayer=B,ct.update(st,pt)})},updateMove:async U=>{if(!Kr||!yn||!r)return;const B=Ba(ja(yn,"rooms"),r);await VE(yn,async st=>{const ct=await st.get(B);if(!ct.exists())return;const at=ct.data();if(at.status&&at.status!=="active")return;const yt=new kp(U),pt=yt.turn();let ft="active",R="",w="";yt.isCheckmate()?(ft="checkmate",R=pt==="w"?"b":"w",w="checkmate"):yt.isStalemate&&yt.isStalemate()?(ft="stalemate",R="",w="stalemate"):yt.isDraw()&&(ft="draw",R="",w="draw"),st.update(B,{fen:U,turn:pt,status:ft,winner:R,resultReason:w})})},resignGame:async U=>{if(!Kr||!yn||!r)return;const B=Ba(ja(yn,"rooms"),r);await ME(B,{status:"resigned",winner:U==="w"?"b":"w",resultReason:"resigned"})},resetGame:async()=>{if(!Kr||!yn||!r)return;const U=Ba(ja(yn,"rooms"),r);await ME(U,{fen:pT,turn:"w",status:"active",winner:"",resultReason:""})}}},vM=({roomId:r,onExit:t})=>{const{room:n,userId:s,loading:o,updateMove:u,joinRoom:h,resignGame:m,resetGame:g}=uS(r),[p,E]=Tn.useState(0),[T,S]=Tn.useState(0),[N,F]=Tn.useState(0);if(Tn.useEffect(()=>{r&&h(r)},[r,h]),Tn.useEffect(()=>{if(!n||n.status&&n.status!=="active")return;const k=window.setInterval(()=>{E(I=>I+1),S(I=>I+(n.turn==="w"?1:0)),F(I=>I+(n.turn==="b"?1:0))},1e3);return()=>window.clearInterval(k)},[n?.turn,n?.status]),o)return Z.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-6 animate-pulse",children:[Z.jsx("div",{className:"relative shadow-2xl shadow-indigo-500/20 rounded-full p-4",children:Z.jsx(uw,{className:"w-16 h-16 text-indigo-500 animate-spin"})}),Z.jsxs("div",{className:"text-center space-y-2",children:[Z.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest",children:"Entering Arena"}),Z.jsx("p",{className:"text-slate-500 font-medium",children:"Synchronizing with the global lattice..."})]})]});if(!n)return Z.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[Z.jsxs("div",{className:"text-center space-y-4",children:[Z.jsx("h2",{className:"text-5xl font-black text-white italic",children:"Room Dissolved"}),Z.jsx("p",{className:"text-slate-400 text-lg",children:"The arena you seek no longer exists or the link is expired."})]}),Z.jsx("button",{onClick:t,className:"btn-premium px-10 py-4 text-xl",children:"Return to Lobby"})]});const U=n.whitePlayer===s,B=n.blackPlayer===s,st=U?"w":B?"b":"w",ct=n.turn===st,at=!n.blackPlayer,yt=new kp(n.fen),pt={isCheck:yt.isCheck(),isCheckmate:yt.isCheckmate(),isDraw:yt.isDraw(),isStalemate:typeof yt.isStalemate=="function"?yt.isStalemate():!1,turn:yt.turn()},ft=n.status??"active",R=n.winner??"",w=ft!=="active",C=k=>{const I=Math.floor(k/60).toString().padStart(2,"0"),qt=(k%60).toString().padStart(2,"0");return`${I}:${qt}`},O=ft==="checkmate"?`Checkmate  ${R==="w"?"White":"Black"} wins`:ft==="stalemate"?"Stalemate  Draw":ft==="draw"?"Draw":ft==="resigned"?`Resigned  ${R==="w"?"White":"Black"} wins`:pt.isCheck?`${pt.turn==="w"?"White":"Black"} is in check`:ct?"Your Turn":"Waiting...",x=()=>{navigator.clipboard.writeText(r),alert("Room ID copied to clipboard!")};return Z.jsxs("div",{className:"flex flex-col items-center gap-12 py-10 w-full animate-in fade-in duration-700",children:[Z.jsxs("header",{className:"w-full max-w-6xl flex items-center justify-between px-6",children:[Z.jsxs("button",{onClick:t,className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all font-bold uppercase tracking-widest text-xs",children:[Z.jsx("div",{className:"p-2 rounded-xl bg-slate-900 border border-slate-800 group-hover:border-slate-700 group-hover:-translate-x-1 transition-transform",children:Z.jsx(iw,{size:18})}),"Back"]}),Z.jsx("div",{className:"flex items-center gap-4",children:Z.jsxs("div",{className:"liquid-glass px-6 py-3 flex items-center gap-6",children:[Z.jsxs("div",{className:"flex flex-col gap-0.5",children:[Z.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-slate-500 font-black",children:"Arena ID"}),Z.jsx("code",{className:"text-indigo-300 font-mono font-bold",children:r})]}),Z.jsx("div",{className:"h-8 w-px bg-slate-800"}),Z.jsxs("div",{className:"flex items-center gap-3",children:[Z.jsx("button",{onClick:x,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:Z.jsx(sw,{size:18})}),Z.jsx("button",{className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:Z.jsx(yw,{size:18})})]})]})})]}),Z.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-16 w-full max-w-7xl px-6",children:[Z.jsxs("div",{className:"relative group",children:[Z.jsx("div",{className:"absolute -inset-4 bg-linear-to-r from-indigo-500 to-pink-500 rounded-[2.5rem] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"}),Z.jsx(yM,{initialFen:n.fen,onMove:u,playerColor:st,isGameOver:w})]}),Z.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-8",children:[Z.jsxs("div",{className:"liquid-glass p-8 space-y-8 border-l-4 border-l-indigo-500",children:[Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:at?"Current Turn":"Player Status"}),Z.jsxs("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-2 ${ft==="active"?ct?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-slate-800 text-slate-500":"bg-indigo-500/10 text-indigo-300 border border-indigo-500/30"}`,children:[Z.jsx("span",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${ft==="active"?"bg-green-500":"bg-indigo-400"}`}),at?n.turn==="w"?" White to Move":" Black to Move":O]})]}),ft==="active"&&pt.isCheck&&Z.jsxs("div",{className:"p-3 rounded-2xl bg-amber-500/10 border border-amber-500/30 text-amber-200 text-xs font-black uppercase tracking-widest",children:["AH! ",pt.turn==="w"?"Beyaz":"Siyah"," hamlede."]}),w&&Z.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/10 border border-indigo-500/30 text-indigo-100 text-sm font-bold",children:O}),Z.jsxs("div",{className:"space-y-4",children:[Z.jsxs("div",{className:"grid grid-cols-3 gap-3 p-4 rounded-2xl bg-slate-900/60 border border-slate-800/80 text-xs font-bold uppercase tracking-widest",children:[Z.jsxs("div",{className:"space-y-1",children:[Z.jsx("div",{className:"text-slate-500",children:"Toplam Sre"}),Z.jsx("div",{className:"text-white text-base",children:C(p)})]}),Z.jsxs("div",{className:"space-y-1",children:[Z.jsx("div",{className:"text-slate-500",children:"Beyaz Sre"}),Z.jsx("div",{className:"text-emerald-300 text-base",children:C(T)})]}),Z.jsxs("div",{className:"space-y-1",children:[Z.jsx("div",{className:"text-slate-500",children:"Siyah Sre"}),Z.jsx("div",{className:"text-sky-300 text-base",children:C(N)})]})]}),Z.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[Z.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${U?"bg-white text-slate-950":"bg-slate-800 text-slate-400"}`,children:"W"}),Z.jsxs("div",{className:"flex-1",children:[Z.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"White Player"}),Z.jsx("div",{className:"text-xs text-slate-500 font-medium",children:n.whitePlayer===s?"Connected (You)":n.whitePlayer?"Opponent Ready":"Awaiting Entry..."})]})]}),Z.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[Z.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${B?"bg-indigo-500 text-white":"bg-slate-800 text-slate-400"}`,children:"B"}),Z.jsxs("div",{className:"flex-1",children:[Z.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"Black Player"}),Z.jsx("div",{className:"text-xs text-slate-500 font-medium",children:n.blackPlayer===s?"Connected (You)":n.blackPlayer?"Opponent Ready":"Awaiting Entry..."})]})]})]}),Z.jsxs("div",{className:"flex gap-3",children:[Z.jsxs("button",{disabled:w||!(U||B),onClick:()=>m(st),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-slate-800 bg-slate-900/60 text-slate-200 font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:border-red-500/50 hover:text-red-200 transition",children:[Z.jsx(ow,{size:18}),"Pes Et"]}),Z.jsxs("button",{disabled:!w||!(U||B),onClick:()=>g(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 text-indigo-100 font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:bg-indigo-500/20 transition",children:[Z.jsx(gw,{size:18}),"Tekrar Oyna"]})]})]}),Z.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Z.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[Z.jsx(vw,{size:20,className:"mx-auto text-slate-600"}),Z.jsx("div",{className:"text-xl font-black text-white italic",children:n.whitePlayer&&n.blackPlayer?"2/2":n.whitePlayer||n.blackPlayer?"1/2":"0/2"}),Z.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Connected"})]}),Z.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[Z.jsx(Tw,{size:20,className:"mx-auto text-indigo-400"}),Z.jsx("div",{className:"text-xl font-black text-white italic",children:"24ms"}),Z.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Latency"})]})]})]})]}),Z.jsx("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10",children:"Transparent Strategy Arena"})]})};function EM(){const[r,t]=J.useState(null),{createRoom:n,isAuthLoading:s}=uS(null),o=async()=>{const m=await n();m&&t(m)},u=m=>{m.trim()&&t(m)},h=()=>{t(null)};return Z.jsxs("main",{className:"relative min-h-screen w-full flex flex-col items-center",children:[Z.jsx(XA,{}),Z.jsx("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:r?Z.jsx(vM,{roomId:r,onExit:h}):Z.jsx(Sx,{onCreateRoom:o,onJoinRoom:u,isAuthLoading:s})}),Z.jsx("footer",{className:"mt-auto py-8 text-slate-500 text-sm",children:"DragMate  Premium Multiplayer Board Gaming"})]})}YA.createRoot(document.getElementById("root")).render(Z.jsx(J.StrictMode,{children:Z.jsx(EM,{})}));
