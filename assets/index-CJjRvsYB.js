(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function dA(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var fg={exports:{}},vc={};var nb;function mA(){if(nb)return vc;nb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:s,type:i,key:u,ref:a!==void 0?a:null,props:l}}return vc.Fragment=e,vc.jsx=t,vc.jsxs=t,vc}var sb;function gA(){return sb||(sb=1,fg.exports=mA()),fg.exports}var y=gA(),dg={exports:{}},Qe={};var rb;function pA(){if(rb)return Qe;rb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),w=Symbol.iterator;function R(L){return L===null||typeof L!="object"?null:(L=w&&L[w]||L["@@iterator"],typeof L=="function"?L:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,D={};function M(L,Z,G){this.props=L,this.context=Z,this.refs=D,this.updater=G||j}M.prototype.isReactComponent={},M.prototype.setState=function(L,Z){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Z,"setState")},M.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function $(){}$.prototype=M.prototype;function B(L,Z,G){this.props=L,this.context=Z,this.refs=D,this.updater=G||j}var ce=B.prototype=new $;ce.constructor=B,z(ce,M.prototype),ce.isPureReactComponent=!0;var X=Array.isArray;function F(){}var C={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function N(L,Z,G){var K=G.ref;return{$$typeof:s,type:L,key:Z,ref:K!==void 0?K:null,props:G}}function E(L,Z){return N(L.type,Z,L.props)}function A(L){return typeof L=="object"&&L!==null&&L.$$typeof===s}function P(L){var Z={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(G){return Z[G]})}var O=/\/+/g;function be(L,Z){return typeof L=="object"&&L!==null&&L.key!=null?P(""+L.key):Z.toString(36)}function _e(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(F,F):(L.status="pending",L.then(function(Z){L.status==="pending"&&(L.status="fulfilled",L.value=Z)},function(Z){L.status==="pending"&&(L.status="rejected",L.reason=Z)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function H(L,Z,G,K,ue){var ye=typeof L;(ye==="undefined"||ye==="boolean")&&(L=null);var we=!1;if(L===null)we=!0;else switch(ye){case"bigint":case"string":case"number":we=!0;break;case"object":switch(L.$$typeof){case s:case e:we=!0;break;case v:return we=L._init,H(we(L._payload),Z,G,K,ue)}}if(we)return ue=ue(L),we=K===""?"."+be(L,0):K,X(ue)?(G="",we!=null&&(G=we.replace(O,"$&/")+"/"),H(ue,Z,G,"",function(Ue){return Ue})):ue!=null&&(A(ue)&&(ue=E(ue,G+(ue.key==null||L&&L.key===ue.key?"":(""+ue.key).replace(O,"$&/")+"/")+we)),Z.push(ue)),1;we=0;var Ie=K===""?".":K+":";if(X(L))for(var Se=0;Se<L.length;Se++)K=L[Se],ye=Ie+be(K,Se),we+=H(K,Z,G,ye,ue);else if(Se=R(L),typeof Se=="function")for(L=Se.call(L),Se=0;!(K=L.next()).done;)K=K.value,ye=Ie+be(K,Se++),we+=H(K,Z,G,ye,ue);else if(ye==="object"){if(typeof L.then=="function")return H(_e(L),Z,G,K,ue);throw Z=String(L),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return we}function Y(L,Z,G){if(L==null)return L;var K=[],ue=0;return H(L,K,"","",function(ye){return Z.call(G,ye,ue++)}),K}function J(L){if(L._status===-1){var Z=L._result;Z=Z(),Z.then(function(G){(L._status===0||L._status===-1)&&(L._status=1,L._result=G)},function(G){(L._status===0||L._status===-1)&&(L._status=2,L._result=G)}),L._status===-1&&(L._status=0,L._result=Z)}if(L._status===1)return L._result.default;throw L._result}var pe=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},ve={map:Y,forEach:function(L,Z,G){Y(L,function(){Z.apply(this,arguments)},G)},count:function(L){var Z=0;return Y(L,function(){Z++}),Z},toArray:function(L){return Y(L,function(Z){return Z})||[]},only:function(L){if(!A(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Qe.Activity=b,Qe.Children=ve,Qe.Component=M,Qe.Fragment=t,Qe.Profiler=a,Qe.PureComponent=B,Qe.StrictMode=i,Qe.Suspense=m,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(L){return C.H.useMemoCache(L)}},Qe.cache=function(L){return function(){return L.apply(null,arguments)}},Qe.cacheSignal=function(){return null},Qe.cloneElement=function(L,Z,G){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var K=z({},L.props),ue=L.key;if(Z!=null)for(ye in Z.key!==void 0&&(ue=""+Z.key),Z)!S.call(Z,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&Z.ref===void 0||(K[ye]=Z[ye]);var ye=arguments.length-2;if(ye===1)K.children=G;else if(1<ye){for(var we=Array(ye),Ie=0;Ie<ye;Ie++)we[Ie]=arguments[Ie+2];K.children=we}return N(L.type,ue,K)},Qe.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:l,_context:L},L},Qe.createElement=function(L,Z,G){var K,ue={},ye=null;if(Z!=null)for(K in Z.key!==void 0&&(ye=""+Z.key),Z)S.call(Z,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(ue[K]=Z[K]);var we=arguments.length-2;if(we===1)ue.children=G;else if(1<we){for(var Ie=Array(we),Se=0;Se<we;Se++)Ie[Se]=arguments[Se+2];ue.children=Ie}if(L&&L.defaultProps)for(K in we=L.defaultProps,we)ue[K]===void 0&&(ue[K]=we[K]);return N(L,ye,ue)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(L){return{$$typeof:d,render:L}},Qe.isValidElement=A,Qe.lazy=function(L){return{$$typeof:v,_payload:{_status:-1,_result:L},_init:J}},Qe.memo=function(L,Z){return{$$typeof:p,type:L,compare:Z===void 0?null:Z}},Qe.startTransition=function(L){var Z=C.T,G={};C.T=G;try{var K=L(),ue=C.S;ue!==null&&ue(G,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(F,pe)}catch(ye){pe(ye)}finally{Z!==null&&G.types!==null&&(Z.types=G.types),C.T=Z}},Qe.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Qe.use=function(L){return C.H.use(L)},Qe.useActionState=function(L,Z,G){return C.H.useActionState(L,Z,G)},Qe.useCallback=function(L,Z){return C.H.useCallback(L,Z)},Qe.useContext=function(L){return C.H.useContext(L)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(L,Z){return C.H.useDeferredValue(L,Z)},Qe.useEffect=function(L,Z){return C.H.useEffect(L,Z)},Qe.useEffectEvent=function(L){return C.H.useEffectEvent(L)},Qe.useId=function(){return C.H.useId()},Qe.useImperativeHandle=function(L,Z,G){return C.H.useImperativeHandle(L,Z,G)},Qe.useInsertionEffect=function(L,Z){return C.H.useInsertionEffect(L,Z)},Qe.useLayoutEffect=function(L,Z){return C.H.useLayoutEffect(L,Z)},Qe.useMemo=function(L,Z){return C.H.useMemo(L,Z)},Qe.useOptimistic=function(L,Z){return C.H.useOptimistic(L,Z)},Qe.useReducer=function(L,Z,G){return C.H.useReducer(L,Z,G)},Qe.useRef=function(L){return C.H.useRef(L)},Qe.useState=function(L){return C.H.useState(L)},Qe.useSyncExternalStore=function(L,Z,G){return C.H.useSyncExternalStore(L,Z,G)},Qe.useTransition=function(){return C.H.useTransition()},Qe.version="19.2.3",Qe}var ib;function Ap(){return ib||(ib=1,dg.exports=pA()),dg.exports}var V=Ap();const He=dA(V);var mg={exports:{}},_c={},gg={exports:{}},pg={};var ab;function yA(){return ab||(ab=1,(function(s){function e(H,Y){var J=H.length;H.push(Y);e:for(;0<J;){var pe=J-1>>>1,ve=H[pe];if(0<a(ve,Y))H[pe]=Y,H[J]=ve,J=pe;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var Y=H[0],J=H.pop();if(J!==Y){H[0]=J;e:for(var pe=0,ve=H.length,L=ve>>>1;pe<L;){var Z=2*(pe+1)-1,G=H[Z],K=Z+1,ue=H[K];if(0>a(G,J))K<ve&&0>a(ue,G)?(H[pe]=ue,H[K]=J,pe=K):(H[pe]=G,H[Z]=J,pe=Z);else if(K<ve&&0>a(ue,J))H[pe]=ue,H[K]=J,pe=K;else break e}}return Y}function a(H,Y){var J=H.sortIndex-Y.sortIndex;return J!==0?J:H.id-Y.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();s.unstable_now=function(){return u.now()-d}}var m=[],p=[],v=1,b=null,w=3,R=!1,j=!1,z=!1,D=!1,M=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function ce(H){for(var Y=t(p);Y!==null;){if(Y.callback===null)i(p);else if(Y.startTime<=H)i(p),Y.sortIndex=Y.expirationTime,e(m,Y);else break;Y=t(p)}}function X(H){if(z=!1,ce(H),!j)if(t(m)!==null)j=!0,F||(F=!0,P());else{var Y=t(p);Y!==null&&_e(X,Y.startTime-H)}}var F=!1,C=-1,S=5,N=-1;function E(){return D?!0:!(s.unstable_now()-N<S)}function A(){if(D=!1,F){var H=s.unstable_now();N=H;var Y=!0;try{e:{j=!1,z&&(z=!1,$(C),C=-1),R=!0;var J=w;try{t:{for(ce(H),b=t(m);b!==null&&!(b.expirationTime>H&&E());){var pe=b.callback;if(typeof pe=="function"){b.callback=null,w=b.priorityLevel;var ve=pe(b.expirationTime<=H);if(H=s.unstable_now(),typeof ve=="function"){b.callback=ve,ce(H),Y=!0;break t}b===t(m)&&i(m),ce(H)}else i(m);b=t(m)}if(b!==null)Y=!0;else{var L=t(p);L!==null&&_e(X,L.startTime-H),Y=!1}}break e}finally{b=null,w=J,R=!1}Y=void 0}}finally{Y?P():F=!1}}}var P;if(typeof B=="function")P=function(){B(A)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,be=O.port2;O.port1.onmessage=A,P=function(){be.postMessage(null)}}else P=function(){M(A,0)};function _e(H,Y){C=M(function(){H(s.unstable_now())},Y)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(H){H.callback=null},s.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<H?Math.floor(1e3/H):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(H){switch(w){case 1:case 2:case 3:var Y=3;break;default:Y=w}var J=w;w=Y;try{return H()}finally{w=J}},s.unstable_requestPaint=function(){D=!0},s.unstable_runWithPriority=function(H,Y){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var J=w;w=H;try{return Y()}finally{w=J}},s.unstable_scheduleCallback=function(H,Y,J){var pe=s.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?pe+J:pe):J=pe,H){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=J+ve,H={id:v++,callback:Y,priorityLevel:H,startTime:J,expirationTime:ve,sortIndex:-1},J>pe?(H.sortIndex=J,e(p,H),t(m)===null&&H===t(p)&&(z?($(C),C=-1):z=!0,_e(X,J-pe))):(H.sortIndex=ve,e(m,H),j||R||(j=!0,F||(F=!0,P()))),H},s.unstable_shouldYield=E,s.unstable_wrapCallback=function(H){var Y=w;return function(){var J=w;w=Y;try{return H.apply(this,arguments)}finally{w=J}}}})(pg)),pg}var ob;function vA(){return ob||(ob=1,gg.exports=yA()),gg.exports}var yg={exports:{}},Qn={};var lb;function _A(){if(lb)return Qn;lb=1;var s=Ap();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:m,containerInfo:p,implementation:v}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Qn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Qn.createPortal=function(m,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,v)},Qn.flushSync=function(m){var p=u.T,v=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=p,i.p=v,i.d.f()}},Qn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},Qn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Qn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var v=p.as,b=d(v,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,R=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:w,fetchPriority:R}):v==="script"&&i.d.X(m,{crossOrigin:b,integrity:w,fetchPriority:R,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Qn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=d(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},Qn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,b=d(v,p.crossOrigin);i.d.L(m,v,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Qn.preloadModule=function(m,p){if(typeof m=="string")if(p){var v=d(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},Qn.requestFormReset=function(m){i.d.r(m)},Qn.unstable_batchedUpdates=function(m,p){return m(p)},Qn.useFormState=function(m,p,v){return u.H.useFormState(m,p,v)},Qn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Qn.version="19.2.3",Qn}var cb;function xx(){if(cb)return yg.exports;cb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),yg.exports=_A(),yg.exports}var ub;function bA(){if(ub)return _c;ub=1;var s=vA(),e=Ap(),t=xx();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function u(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function d(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function m(n){if(l(n)!==n)throw Error(i(188))}function p(n){var r=n.alternate;if(!r){if(r=l(n),r===null)throw Error(i(188));return r!==n?null:n}for(var o=n,c=r;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return m(f),n;if(g===c)return m(f),r;g=g.sibling}throw Error(i(188))}if(o.return!==c.return)o=f,c=g;else{for(var x=!1,I=f.child;I;){if(I===o){x=!0,o=f,c=g;break}if(I===c){x=!0,c=f,o=g;break}I=I.sibling}if(!x){for(I=g.child;I;){if(I===o){x=!0,o=g,c=f;break}if(I===c){x=!0,c=g,o=f;break}I=I.sibling}if(!x)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:r}function v(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=v(n),r!==null)return r;n=n.sibling}return null}var b=Object.assign,w=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),B=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),E=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function P(n){return n===null||typeof n!="object"?null:(n=A&&n[A]||n["@@iterator"],typeof n=="function"?n:null)}var O=Symbol.for("react.client.reference");function be(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===O?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case z:return"Fragment";case M:return"Profiler";case D:return"StrictMode";case X:return"Suspense";case F:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case j:return"Portal";case B:return n.displayName||"Context";case $:return(n._context.displayName||"Context")+".Consumer";case ce:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return r=n.displayName||null,r!==null?r:be(n.type)||"Memo";case S:r=n._payload,n=n._init;try{return be(n(r))}catch{}}return null}var _e=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},pe=[],ve=-1;function L(n){return{current:n}}function Z(n){0>ve||(n.current=pe[ve],pe[ve]=null,ve--)}function G(n,r){ve++,pe[ve]=n.current,n.current=r}var K=L(null),ue=L(null),ye=L(null),we=L(null);function Ie(n,r){switch(G(ye,r),G(ue,n),G(K,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?S_(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=S_(r),n=A_(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Z(K),G(K,n)}function Se(){Z(K),Z(ue),Z(ye)}function Ue(n){n.memoizedState!==null&&G(we,n);var r=K.current,o=A_(r,n.type);r!==o&&(G(ue,n),G(K,o))}function pt(n){ue.current===n&&(Z(K),Z(ue)),we.current===n&&(Z(we),mc._currentValue=J)}var nt,Ze;function Ce(n){if(nt===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);nt=r&&r[1]||"",Ze=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nt+n+Ze}var je=!1;function st(n,r){if(!n||je)return"";je=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(le){var re=le}Reflect.construct(n,[],me)}else{try{me.call()}catch(le){re=le}n.call(me.prototype)}}else{try{throw Error()}catch(le){re=le}(me=n())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(le){if(le&&re&&typeof le.stack=="string")return[le.stack,re.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),x=g[0],I=g[1];if(x&&I){var U=x.split(`
`),ne=I.split(`
`);for(f=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;f<ne.length&&!ne[f].includes("DetermineComponentFrameRoot");)f++;if(c===U.length||f===ne.length)for(c=U.length-1,f=ne.length-1;1<=c&&0<=f&&U[c]!==ne[f];)f--;for(;1<=c&&0<=f;c--,f--)if(U[c]!==ne[f]){if(c!==1||f!==1)do if(c--,f--,0>f||U[c]!==ne[f]){var he=`
`+U[c].replace(" at new "," at ");return n.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",n.displayName)),he}while(1<=c&&0<=f);break}}}finally{je=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Ce(o):""}function Fe(n,r){switch(n.tag){case 26:case 27:case 5:return Ce(n.type);case 16:return Ce("Lazy");case 13:return n.child!==r&&r!==null?Ce("Suspense Fallback"):Ce("Suspense");case 19:return Ce("SuspenseList");case 0:case 15:return st(n.type,!1);case 11:return st(n.type.render,!1);case 1:return st(n.type,!0);case 31:return Ce("Activity");default:return""}}function yt(n){try{var r="",o=null;do r+=Fe(n,o),o=n,n=n.return;while(n);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var $e=Object.prototype.hasOwnProperty,ot=s.unstable_scheduleCallback,Kt=s.unstable_cancelCallback,Wt=s.unstable_shouldYield,Nn=s.unstable_requestPaint,fn=s.unstable_now,Ys=s.unstable_getCurrentPriorityLevel,Ir=s.unstable_ImmediatePriority,es=s.unstable_UserBlockingPriority,Ln=s.unstable_NormalPriority,Qs=s.unstable_LowPriority,kr=s.unstable_IdlePriority,ts=s.log,Dr=s.unstable_setDisableYieldValue,ns=null,sn=null;function In(n){if(typeof ts=="function"&&Dr(n),sn&&typeof sn.setStrictMode=="function")try{sn.setStrictMode(ns,n)}catch{}}var Lt=Math.clz32?Math.clz32:fi,Or=Math.log,Xs=Math.LN2;function fi(n){return n>>>=0,n===0?32:31-(Or(n)/Xs|0)|0}var cs=256,Ws=262144,tt=4194304;function Ut(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function zt(n,r,o){var c=n.pendingLanes;if(c===0)return 0;var f=0,g=n.suspendedLanes,x=n.pingedLanes;n=n.warmLanes;var I=c&134217727;return I!==0?(c=I&~g,c!==0?f=Ut(c):(x&=I,x!==0?f=Ut(x):o||(o=I&~n,o!==0&&(f=Ut(o))))):(I=c&~g,I!==0?f=Ut(I):x!==0?f=Ut(x):o||(o=c&~n,o!==0&&(f=Ut(o)))),f===0?0:r!==0&&r!==f&&(r&g)===0&&(g=f&-f,o=r&-r,g>=o||g===32&&(o&4194048)!==0)?r:f}function Jt(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function kn(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dn(){var n=tt;return tt<<=1,(tt&62914560)===0&&(tt=4194304),n}function Yt(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function ie(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Nt(n,r,o,c,f,g){var x=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var I=n.entanglements,U=n.expirationTimes,ne=n.hiddenUpdates;for(o=x&~o;0<o;){var he=31-Lt(o),me=1<<he;I[he]=0,U[he]=-1;var re=ne[he];if(re!==null)for(ne[he]=null,he=0;he<re.length;he++){var le=re[he];le!==null&&(le.lane&=-536870913)}o&=~me}c!==0&&It(n,c,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(x&~r))}function It(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var c=31-Lt(r);n.entangledLanes|=r,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function rn(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var c=31-Lt(o),f=1<<c;f&r|n[c]&r&&(n[c]|=r),o&=~f}}function xe(n,r){var o=r&-r;return o=(o&42)!==0?1:Tn(o),(o&(n.suspendedLanes|r))!==0?0:o}function Tn(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function vt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ft(){var n=Y.p;return n!==0?n:(n=window.event,n===void 0?32:Q_(n.type))}function En(n,r){var o=Y.p;try{return Y.p=n,r()}finally{Y.p=o}}var kt=Math.random().toString(36).slice(2),Qt="__reactFiber$"+kt,an="__reactProps$"+kt,ke="__reactContainer$"+kt,di="__reactEvents$"+kt,lo="__reactListeners$"+kt,co="__reactHandles$"+kt,wa="__reactResources$"+kt,ks="__reactMarker$"+kt;function mi(n){delete n[Qt],delete n[an],delete n[di],delete n[lo],delete n[co]}function Ds(n){var r=n[Qt];if(r)return r;for(var o=n.parentNode;o;){if(r=o[ke]||o[Qt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=O_(n);n!==null;){if(o=n[Qt])return o;n=O_(n)}return r}n=o,o=n.parentNode}return null}function ss(n){if(n=n[Qt]||n[ke]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function Yn(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function Os(n){var r=n[wa];return r||(r=n[wa]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Zt(n){n[ks]=!0}var Ta=new Set,gi={};function us(n,r){Ms(n,r),Ms(n+"Capture",r)}function Ms(n,r){for(gi[n]=r,n=0;n<r.length;n++)Ta.add(r[n])}var Ea=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pi={},Sa={};function mn(n){return $e.call(Sa,n)?!0:$e.call(pi,n)?!1:Ea.test(n)?Sa[n]=!0:(pi[n]=!0,!1)}function W(n,r,o){if(mn(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function ae(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function se(n,r,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+c)}}function Re(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Me(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function dt(n,r,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,g=c.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(x){o=""+x,g.call(this,x)}}),Object.defineProperty(n,r,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(x){o=""+x},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function rt(n){if(!n._valueTracker){var r=Me(n)?"checked":"value";n._valueTracker=dt(n,r,""+n[r])}}function js(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return n&&(c=Me(n)?n.checked?"true":"false":n.value),n=c,n!==o?(r.setValue(n),!0):!1}function fr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Aa=/[\n"\\]/g;function hs(n){return n.replace(Aa,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function uo(n,r,o,c,f,g,x,I){n.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.type=x:n.removeAttribute("type"),r!=null?x==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+Re(r)):n.value!==""+Re(r)&&(n.value=""+Re(r)):x!=="submit"&&x!=="reset"||n.removeAttribute("value"),r!=null?Rl(n,x,Re(r)):o!=null?Rl(n,x,Re(o)):c!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?n.name=""+Re(I):n.removeAttribute("name")}function _u(n,r,o,c,f,g,x,I){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),r!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||r!=null)){rt(n);return}o=o!=null?""+Re(o):"",r=r!=null?""+Re(r):o,I||r===n.value||(n.value=r),n.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=I?n.checked:!!c,n.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(n.name=x),rt(n)}function Rl(n,r,o){r==="number"&&fr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function yi(n,r,o,c){if(n=n.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=r.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&c&&(n[o].defaultSelected=!0)}else{for(o=""+Re(o),r=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function bu(n,r,o){if(r!=null&&(r=""+Re(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+Re(o):""}function vi(n,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(i(92));if(_e(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=Re(r),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),rt(n)}function fs(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var xu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cl(n,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":c?n.setProperty(r,o):typeof o!="number"||o===0||xu.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function Nl(n,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&o[f]!==c&&Cl(n,f,c)}else for(var g in r)r.hasOwnProperty(g)&&Cl(n,g,r[g])}function ho(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_i=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fo(n){return _i.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Js(){}var Il=null;function Vs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var bi=null,dr=null;function Ra(n){var r=ss(n);if(r&&(n=r.stateNode)){var o=n[an]||null;e:switch(n=r.stateNode,r.type){case"input":if(uo(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+hs(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==n&&c.form===n.form){var f=c[an]||null;if(!f)throw Error(i(90));uo(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===n.form&&js(c)}break e;case"textarea":bu(n,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&yi(n,!!o.multiple,r,!1)}}}var mo=!1;function xi(n,r,o){if(mo)return n(r,o);mo=!0;try{var c=n(r);return c}finally{if(mo=!1,(bi!==null||dr!==null)&&(gh(),bi&&(r=bi,n=dr,dr=bi=null,Ra(r),n)))for(r=0;r<n.length;r++)Ra(n[r])}}function Zs(n,r){var o=n.stateNode;if(o===null)return null;var c=o[an]||null;if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var Ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ca=!1;if(Ps)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){Ca=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch{Ca=!1}var mr=null,kl=null,Na=null;function Dl(){if(Na)return Na;var n,r=kl,o=r.length,c,f="value"in mr?mr.value:mr.textContent,g=f.length;for(n=0;n<o&&r[n]===f[n];n++);var x=o-n;for(c=1;c<=x&&r[o-c]===f[g-c];c++);return Na=f.slice(n,1<c?1-c:void 0)}function Ia(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Mr(){return!0}function er(){return!1}function Un(n){function r(o,c,f,g,x){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=x,this.currentTarget=null;for(var I in n)n.hasOwnProperty(I)&&(o=n[I],this[I]=o?o(g):g[I]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Mr:er,this.isPropagationStopped=er,this}return b(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Mr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Mr)},persist:function(){},isPersistent:Mr}),r}var jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gr=Un(jr),wi=b({},jr,{view:0,detail:0}),Ol=Un(wi),Ti,go,pr,po=b({},wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ei,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==pr&&(pr&&n.type==="mousemove"?(Ti=n.screenX-pr.screenX,go=n.screenY-pr.screenY):go=Ti=0,pr=n),Ti)},movementY:function(n){return"movementY"in n?n.movementY:go}}),Ml=Un(po),ka=b({},po,{dataTransfer:0}),Tu=Un(ka),Eu=b({},wi,{relatedTarget:0}),Da=Un(Eu),jl=b({},jr,{animationName:0,elapsedTime:0,pseudoElement:0}),Su=Un(jl),yo=b({},jr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Au=Un(yo),Ru=b({},jr,{data:0}),yr=Un(Ru),Cu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ku(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Iu[n])?!!r[n]:!1}function Ei(){return ku}var rs=b({},wi,{key:function(n){if(n.key){var r=Cu[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Ia(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Nu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ei,charCode:function(n){return n.type==="keypress"?Ia(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ia(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Du=Un(rs),Ou=b({},po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vr=Un(Ou),h=b({},wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ei}),_=Un(h),T=b({},jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),k=Un(T),ee=b({},po,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),oe=Un(ee),Ee=b({},jr,{newState:0,oldState:0}),Xe=Un(Ee),on=[9,13,27,32],Tt=Ps&&"CompositionEvent"in window,Gt=null;Ps&&"documentMode"in document&&(Gt=document.documentMode);var Ls=Ps&&"TextEvent"in window&&!Gt,vr=Ps&&(!Tt||Gt&&8<Gt&&11>=Gt),tr=" ",nr=!1;function Oa(n,r){switch(n){case"keyup":return on.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var _o=!1;function PE(n,r){switch(n){case"compositionend":return vo(r);case"keypress":return r.which!==32?null:(nr=!0,tr);case"textInput":return n=r.data,n===tr&&nr?null:n;default:return null}}function LE(n,r){if(_o)return n==="compositionend"||!Tt&&Oa(n,r)?(n=Dl(),Na=kl=mr=null,_o=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return vr&&r.locale!=="ko"?null:r.data;default:return null}}var UE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function V0(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!UE[n.type]:r==="textarea"}function P0(n,r,o,c){bi?dr?dr.push(c):dr=[c]:bi=c,r=wh(r,"onChange"),0<r.length&&(o=new gr("onChange","change",null,o,c),n.push({event:o,listeners:r}))}var Vl=null,Pl=null;function zE(n){__(n,0)}function Mu(n){var r=Yn(n);if(js(r))return n}function L0(n,r){if(n==="change")return r}var U0=!1;if(Ps){var _d;if(Ps){var bd="oninput"in document;if(!bd){var z0=document.createElement("div");z0.setAttribute("oninput","return;"),bd=typeof z0.oninput=="function"}_d=bd}else _d=!1;U0=_d&&(!document.documentMode||9<document.documentMode)}function B0(){Vl&&(Vl.detachEvent("onpropertychange",q0),Pl=Vl=null)}function q0(n){if(n.propertyName==="value"&&Mu(Pl)){var r=[];P0(r,Pl,n,Vs(n)),xi(zE,r)}}function BE(n,r,o){n==="focusin"?(B0(),Vl=r,Pl=o,Vl.attachEvent("onpropertychange",q0)):n==="focusout"&&B0()}function qE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Mu(Pl)}function HE(n,r){if(n==="click")return Mu(r)}function FE(n,r){if(n==="input"||n==="change")return Mu(r)}function GE(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var _s=typeof Object.is=="function"?Object.is:GE;function Ll(n,r){if(_s(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!$e.call(r,f)||!_s(n[f],r[f]))return!1}return!0}function H0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function F0(n,r){var o=H0(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=r&&c>=r)return{node:o,offset:r-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=H0(o)}}function G0(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?G0(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function $0(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=fr(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=fr(n.document)}return r}function xd(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var $E=Ps&&"documentMode"in document&&11>=document.documentMode,bo=null,wd=null,Ul=null,Td=!1;function K0(n,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Td||bo==null||bo!==fr(c)||(c=bo,"selectionStart"in c&&xd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ul&&Ll(Ul,c)||(Ul=c,c=wh(wd,"onSelect"),0<c.length&&(r=new gr("onSelect","select",null,r,o),n.push({event:r,listeners:c}),r.target=bo)))}function Ma(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var xo={animationend:Ma("Animation","AnimationEnd"),animationiteration:Ma("Animation","AnimationIteration"),animationstart:Ma("Animation","AnimationStart"),transitionrun:Ma("Transition","TransitionRun"),transitionstart:Ma("Transition","TransitionStart"),transitioncancel:Ma("Transition","TransitionCancel"),transitionend:Ma("Transition","TransitionEnd")},Ed={},Y0={};Ps&&(Y0=document.createElement("div").style,"AnimationEvent"in window||(delete xo.animationend.animation,delete xo.animationiteration.animation,delete xo.animationstart.animation),"TransitionEvent"in window||delete xo.transitionend.transition);function ja(n){if(Ed[n])return Ed[n];if(!xo[n])return n;var r=xo[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in Y0)return Ed[n]=r[o];return n}var Q0=ja("animationend"),X0=ja("animationiteration"),W0=ja("animationstart"),KE=ja("transitionrun"),YE=ja("transitionstart"),QE=ja("transitioncancel"),J0=ja("transitionend"),Z0=new Map,Sd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sd.push("scrollEnd");function sr(n,r){Z0.set(n,r),us(r,[n])}var ju=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Us=[],wo=0,Ad=0;function Vu(){for(var n=wo,r=Ad=wo=0;r<n;){var o=Us[r];Us[r++]=null;var c=Us[r];Us[r++]=null;var f=Us[r];Us[r++]=null;var g=Us[r];if(Us[r++]=null,c!==null&&f!==null){var x=c.pending;x===null?f.next=f:(f.next=x.next,x.next=f),c.pending=f}g!==0&&ey(o,f,g)}}function Pu(n,r,o,c){Us[wo++]=n,Us[wo++]=r,Us[wo++]=o,Us[wo++]=c,Ad|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Rd(n,r,o,c){return Pu(n,r,o,c),Lu(n)}function Va(n,r){return Pu(n,null,null,r),Lu(n)}function ey(n,r,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var f=!1,g=n.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,f&&r!==null&&(f=31-Lt(o),n=g.hiddenUpdates,c=n[f],c===null?n[f]=[r]:c.push(r),r.lane=o|536870912),g):null}function Lu(n){if(50<oc)throw oc=0,Vm=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var To={};function XE(n,r,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bs(n,r,o,c){return new XE(n,r,o,c)}function Cd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Pr(n,r){var o=n.alternate;return o===null?(o=bs(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function ty(n,r){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function Uu(n,r,o,c,f,g){var x=0;if(c=n,typeof n=="function")Cd(n)&&(x=1);else if(typeof n=="string")x=tA(n,o,K.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case N:return n=bs(31,o,r,f),n.elementType=N,n.lanes=g,n;case z:return Pa(o.children,f,g,r);case D:x=8,f|=24;break;case M:return n=bs(12,o,r,f|2),n.elementType=M,n.lanes=g,n;case X:return n=bs(13,o,r,f),n.elementType=X,n.lanes=g,n;case F:return n=bs(19,o,r,f),n.elementType=F,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case B:x=10;break e;case $:x=9;break e;case ce:x=11;break e;case C:x=14;break e;case S:x=16,c=null;break e}x=29,o=Error(i(130,n===null?"null":typeof n,"")),c=null}return r=bs(x,o,r,f),r.elementType=n,r.type=c,r.lanes=g,r}function Pa(n,r,o,c){return n=bs(7,n,c,r),n.lanes=o,n}function Nd(n,r,o){return n=bs(6,n,null,r),n.lanes=o,n}function ny(n){var r=bs(18,null,null,0);return r.stateNode=n,r}function Id(n,r,o){return r=bs(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var sy=new WeakMap;function zs(n,r){if(typeof n=="object"&&n!==null){var o=sy.get(n);return o!==void 0?o:(r={value:n,source:r,stack:yt(r)},sy.set(n,r),r)}return{value:n,source:r,stack:yt(r)}}var Eo=[],So=0,zu=null,zl=0,Bs=[],qs=0,Si=null,_r=1,br="";function Lr(n,r){Eo[So++]=zl,Eo[So++]=zu,zu=n,zl=r}function ry(n,r,o){Bs[qs++]=_r,Bs[qs++]=br,Bs[qs++]=Si,Si=n;var c=_r;n=br;var f=32-Lt(c)-1;c&=~(1<<f),o+=1;var g=32-Lt(r)+f;if(30<g){var x=f-f%5;g=(c&(1<<x)-1).toString(32),c>>=x,f-=x,_r=1<<32-Lt(r)+f|o<<f|c,br=g+n}else _r=1<<g|o<<f|c,br=n}function kd(n){n.return!==null&&(Lr(n,1),ry(n,1,0))}function Dd(n){for(;n===zu;)zu=Eo[--So],Eo[So]=null,zl=Eo[--So],Eo[So]=null;for(;n===Si;)Si=Bs[--qs],Bs[qs]=null,br=Bs[--qs],Bs[qs]=null,_r=Bs[--qs],Bs[qs]=null}function iy(n,r){Bs[qs++]=_r,Bs[qs++]=br,Bs[qs++]=Si,_r=r.id,br=r.overflow,Si=n}var zn=null,Bt=null,mt=!1,Ai=null,Hs=!1,Od=Error(i(519));function Ri(n){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Bl(zs(r,n)),Od}function ay(n){var r=n.stateNode,o=n.type,c=n.memoizedProps;switch(r[Qt]=n,r[an]=c,o){case"dialog":at("cancel",r),at("close",r);break;case"iframe":case"object":case"embed":at("load",r);break;case"video":case"audio":for(o=0;o<cc.length;o++)at(cc[o],r);break;case"source":at("error",r);break;case"img":case"image":case"link":at("error",r),at("load",r);break;case"details":at("toggle",r);break;case"input":at("invalid",r),_u(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":at("invalid",r);break;case"textarea":at("invalid",r),vi(r,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||T_(r.textContent,o)?(c.popover!=null&&(at("beforetoggle",r),at("toggle",r)),c.onScroll!=null&&at("scroll",r),c.onScrollEnd!=null&&at("scrollend",r),c.onClick!=null&&(r.onclick=Js),r=!0):r=!1,r||Ri(n,!0)}function oy(n){for(zn=n.return;zn;)switch(zn.tag){case 5:case 31:case 13:Hs=!1;return;case 27:case 3:Hs=!0;return;default:zn=zn.return}}function Ao(n){if(n!==zn)return!1;if(!mt)return oy(n),mt=!0,!1;var r=n.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Wm(n.type,n.memoizedProps)),o=!o),o&&Bt&&Ri(n),oy(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Bt=D_(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Bt=D_(n)}else r===27?(r=Bt,Bi(n.type)?(n=ng,ng=null,Bt=n):Bt=r):Bt=zn?Gs(n.stateNode.nextSibling):null;return!0}function La(){Bt=zn=null,mt=!1}function Md(){var n=Ai;return n!==null&&(ps===null?ps=n:ps.push.apply(ps,n),Ai=null),n}function Bl(n){Ai===null?Ai=[n]:Ai.push(n)}var jd=L(null),Ua=null,Ur=null;function Ci(n,r,o){G(jd,r._currentValue),r._currentValue=o}function zr(n){n._currentValue=jd.current,Z(jd)}function Vd(n,r,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===o)break;n=n.return}}function Pd(n,r,o,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var x=f.child;g=g.firstContext;e:for(;g!==null;){var I=g;g=f;for(var U=0;U<r.length;U++)if(I.context===r[U]){g.lanes|=o,I=g.alternate,I!==null&&(I.lanes|=o),Vd(g.return,o,n),c||(x=null);break e}g=I.next}}else if(f.tag===18){if(x=f.return,x===null)throw Error(i(341));x.lanes|=o,g=x.alternate,g!==null&&(g.lanes|=o),Vd(x,o,n),x=null}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===n){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}}function Ro(n,r,o,c){n=null;for(var f=r,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var x=f.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var I=f.type;_s(f.pendingProps.value,x.value)||(n!==null?n.push(I):n=[I])}}else if(f===we.current){if(x=f.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(mc):n=[mc])}f=f.return}n!==null&&Pd(r,n,o,c),r.flags|=262144}function Bu(n){for(n=n.firstContext;n!==null;){if(!_s(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function za(n){Ua=n,Ur=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Bn(n){return ly(Ua,n)}function qu(n,r){return Ua===null&&za(n),ly(n,r)}function ly(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},Ur===null){if(n===null)throw Error(i(308));Ur=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Ur=Ur.next=r;return o}var WE=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},JE=s.unstable_scheduleCallback,ZE=s.unstable_NormalPriority,gn={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ld(){return{controller:new WE,data:new Map,refCount:0}}function ql(n){n.refCount--,n.refCount===0&&JE(ZE,function(){n.controller.abort()})}var Hl=null,Ud=0,Co=0,No=null;function eS(n,r){if(Hl===null){var o=Hl=[];Ud=0,Co=qm(),No={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Ud++,r.then(cy,cy),r}function cy(){if(--Ud===0&&Hl!==null){No!==null&&(No.status="fulfilled");var n=Hl;Hl=null,Co=0,No=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function tS(n,r){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var uy=H.S;H.S=function(n,r){Kv=fn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&eS(n,r),uy!==null&&uy(n,r)};var Ba=L(null);function zd(){var n=Ba.current;return n!==null?n:Pt.pooledCache}function Hu(n,r){r===null?G(Ba,Ba.current):G(Ba,r.pool)}function hy(){var n=zd();return n===null?null:{parent:gn._currentValue,pool:n}}var Io=Error(i(460)),Bd=Error(i(474)),Fu=Error(i(542)),Gu={then:function(){}};function fy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function dy(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(Js,Js),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,gy(n),n;default:if(typeof r.status=="string")r.then(Js,Js);else{if(n=Pt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,gy(n),n}throw Ha=r,Io}}function qa(n){try{var r=n._init;return r(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ha=o,Io):o}}var Ha=null;function my(){if(Ha===null)throw Error(i(459));var n=Ha;return Ha=null,n}function gy(n){if(n===Io||n===Fu)throw Error(i(483))}var ko=null,Fl=0;function $u(n){var r=Fl;return Fl+=1,ko===null&&(ko=[]),dy(ko,n,r)}function Gl(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Ku(n,r){throw r.$$typeof===w?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function py(n){function r(Q,q){if(n){var te=Q.deletions;te===null?(Q.deletions=[q],Q.flags|=16):te.push(q)}}function o(Q,q){if(!n)return null;for(;q!==null;)r(Q,q),q=q.sibling;return null}function c(Q){for(var q=new Map;Q!==null;)Q.key!==null?q.set(Q.key,Q):q.set(Q.index,Q),Q=Q.sibling;return q}function f(Q,q){return Q=Pr(Q,q),Q.index=0,Q.sibling=null,Q}function g(Q,q,te){return Q.index=te,n?(te=Q.alternate,te!==null?(te=te.index,te<q?(Q.flags|=67108866,q):te):(Q.flags|=67108866,q)):(Q.flags|=1048576,q)}function x(Q){return n&&Q.alternate===null&&(Q.flags|=67108866),Q}function I(Q,q,te,fe){return q===null||q.tag!==6?(q=Nd(te,Q.mode,fe),q.return=Q,q):(q=f(q,te),q.return=Q,q)}function U(Q,q,te,fe){var Pe=te.type;return Pe===z?he(Q,q,te.props.children,fe,te.key):q!==null&&(q.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===S&&qa(Pe)===q.type)?(q=f(q,te.props),Gl(q,te),q.return=Q,q):(q=Uu(te.type,te.key,te.props,null,Q.mode,fe),Gl(q,te),q.return=Q,q)}function ne(Q,q,te,fe){return q===null||q.tag!==4||q.stateNode.containerInfo!==te.containerInfo||q.stateNode.implementation!==te.implementation?(q=Id(te,Q.mode,fe),q.return=Q,q):(q=f(q,te.children||[]),q.return=Q,q)}function he(Q,q,te,fe,Pe){return q===null||q.tag!==7?(q=Pa(te,Q.mode,fe,Pe),q.return=Q,q):(q=f(q,te),q.return=Q,q)}function me(Q,q,te){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Nd(""+q,Q.mode,te),q.return=Q,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case R:return te=Uu(q.type,q.key,q.props,null,Q.mode,te),Gl(te,q),te.return=Q,te;case j:return q=Id(q,Q.mode,te),q.return=Q,q;case S:return q=qa(q),me(Q,q,te)}if(_e(q)||P(q))return q=Pa(q,Q.mode,te,null),q.return=Q,q;if(typeof q.then=="function")return me(Q,$u(q),te);if(q.$$typeof===B)return me(Q,qu(Q,q),te);Ku(Q,q)}return null}function re(Q,q,te,fe){var Pe=q!==null?q.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return Pe!==null?null:I(Q,q,""+te,fe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case R:return te.key===Pe?U(Q,q,te,fe):null;case j:return te.key===Pe?ne(Q,q,te,fe):null;case S:return te=qa(te),re(Q,q,te,fe)}if(_e(te)||P(te))return Pe!==null?null:he(Q,q,te,fe,null);if(typeof te.then=="function")return re(Q,q,$u(te),fe);if(te.$$typeof===B)return re(Q,q,qu(Q,te),fe);Ku(Q,te)}return null}function le(Q,q,te,fe,Pe){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Q=Q.get(te)||null,I(q,Q,""+fe,Pe);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case R:return Q=Q.get(fe.key===null?te:fe.key)||null,U(q,Q,fe,Pe);case j:return Q=Q.get(fe.key===null?te:fe.key)||null,ne(q,Q,fe,Pe);case S:return fe=qa(fe),le(Q,q,te,fe,Pe)}if(_e(fe)||P(fe))return Q=Q.get(te)||null,he(q,Q,fe,Pe,null);if(typeof fe.then=="function")return le(Q,q,te,$u(fe),Pe);if(fe.$$typeof===B)return le(Q,q,te,qu(q,fe),Pe);Ku(q,fe)}return null}function De(Q,q,te,fe){for(var Pe=null,xt=null,Oe=q,et=q=0,ct=null;Oe!==null&&et<te.length;et++){Oe.index>et?(ct=Oe,Oe=null):ct=Oe.sibling;var wt=re(Q,Oe,te[et],fe);if(wt===null){Oe===null&&(Oe=ct);break}n&&Oe&&wt.alternate===null&&r(Q,Oe),q=g(wt,q,et),xt===null?Pe=wt:xt.sibling=wt,xt=wt,Oe=ct}if(et===te.length)return o(Q,Oe),mt&&Lr(Q,et),Pe;if(Oe===null){for(;et<te.length;et++)Oe=me(Q,te[et],fe),Oe!==null&&(q=g(Oe,q,et),xt===null?Pe=Oe:xt.sibling=Oe,xt=Oe);return mt&&Lr(Q,et),Pe}for(Oe=c(Oe);et<te.length;et++)ct=le(Oe,Q,et,te[et],fe),ct!==null&&(n&&ct.alternate!==null&&Oe.delete(ct.key===null?et:ct.key),q=g(ct,q,et),xt===null?Pe=ct:xt.sibling=ct,xt=ct);return n&&Oe.forEach(function($i){return r(Q,$i)}),mt&&Lr(Q,et),Pe}function ze(Q,q,te,fe){if(te==null)throw Error(i(151));for(var Pe=null,xt=null,Oe=q,et=q=0,ct=null,wt=te.next();Oe!==null&&!wt.done;et++,wt=te.next()){Oe.index>et?(ct=Oe,Oe=null):ct=Oe.sibling;var $i=re(Q,Oe,wt.value,fe);if($i===null){Oe===null&&(Oe=ct);break}n&&Oe&&$i.alternate===null&&r(Q,Oe),q=g($i,q,et),xt===null?Pe=$i:xt.sibling=$i,xt=$i,Oe=ct}if(wt.done)return o(Q,Oe),mt&&Lr(Q,et),Pe;if(Oe===null){for(;!wt.done;et++,wt=te.next())wt=me(Q,wt.value,fe),wt!==null&&(q=g(wt,q,et),xt===null?Pe=wt:xt.sibling=wt,xt=wt);return mt&&Lr(Q,et),Pe}for(Oe=c(Oe);!wt.done;et++,wt=te.next())wt=le(Oe,Q,et,wt.value,fe),wt!==null&&(n&&wt.alternate!==null&&Oe.delete(wt.key===null?et:wt.key),q=g(wt,q,et),xt===null?Pe=wt:xt.sibling=wt,xt=wt);return n&&Oe.forEach(function(fA){return r(Q,fA)}),mt&&Lr(Q,et),Pe}function jt(Q,q,te,fe){if(typeof te=="object"&&te!==null&&te.type===z&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case R:e:{for(var Pe=te.key;q!==null;){if(q.key===Pe){if(Pe=te.type,Pe===z){if(q.tag===7){o(Q,q.sibling),fe=f(q,te.props.children),fe.return=Q,Q=fe;break e}}else if(q.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===S&&qa(Pe)===q.type){o(Q,q.sibling),fe=f(q,te.props),Gl(fe,te),fe.return=Q,Q=fe;break e}o(Q,q);break}else r(Q,q);q=q.sibling}te.type===z?(fe=Pa(te.props.children,Q.mode,fe,te.key),fe.return=Q,Q=fe):(fe=Uu(te.type,te.key,te.props,null,Q.mode,fe),Gl(fe,te),fe.return=Q,Q=fe)}return x(Q);case j:e:{for(Pe=te.key;q!==null;){if(q.key===Pe)if(q.tag===4&&q.stateNode.containerInfo===te.containerInfo&&q.stateNode.implementation===te.implementation){o(Q,q.sibling),fe=f(q,te.children||[]),fe.return=Q,Q=fe;break e}else{o(Q,q);break}else r(Q,q);q=q.sibling}fe=Id(te,Q.mode,fe),fe.return=Q,Q=fe}return x(Q);case S:return te=qa(te),jt(Q,q,te,fe)}if(_e(te))return De(Q,q,te,fe);if(P(te)){if(Pe=P(te),typeof Pe!="function")throw Error(i(150));return te=Pe.call(te),ze(Q,q,te,fe)}if(typeof te.then=="function")return jt(Q,q,$u(te),fe);if(te.$$typeof===B)return jt(Q,q,qu(Q,te),fe);Ku(Q,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,q!==null&&q.tag===6?(o(Q,q.sibling),fe=f(q,te),fe.return=Q,Q=fe):(o(Q,q),fe=Nd(te,Q.mode,fe),fe.return=Q,Q=fe),x(Q)):o(Q,q)}return function(Q,q,te,fe){try{Fl=0;var Pe=jt(Q,q,te,fe);return ko=null,Pe}catch(Oe){if(Oe===Io||Oe===Fu)throw Oe;var xt=bs(29,Oe,null,Q.mode);return xt.lanes=fe,xt.return=Q,xt}}}var Fa=py(!0),yy=py(!1),Ni=!1;function qd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hd(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ii(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ki(n,r,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Et&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=Lu(n),ey(n,null,o),r}return Pu(n,c,r,o),Lu(n)}function $l(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=n.pendingLanes,o|=c,r.lanes=o,rn(n,o)}}function Fd(n,r){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var x={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=x:g=g.next=x,o=o.next}while(o!==null);g===null?f=g=r:g=g.next=r}else f=g=r;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var Gd=!1;function Kl(){if(Gd){var n=No;if(n!==null)throw n}}function Yl(n,r,o,c){Gd=!1;var f=n.updateQueue;Ni=!1;var g=f.firstBaseUpdate,x=f.lastBaseUpdate,I=f.shared.pending;if(I!==null){f.shared.pending=null;var U=I,ne=U.next;U.next=null,x===null?g=ne:x.next=ne,x=U;var he=n.alternate;he!==null&&(he=he.updateQueue,I=he.lastBaseUpdate,I!==x&&(I===null?he.firstBaseUpdate=ne:I.next=ne,he.lastBaseUpdate=U))}if(g!==null){var me=f.baseState;x=0,he=ne=U=null,I=g;do{var re=I.lane&-536870913,le=re!==I.lane;if(le?(lt&re)===re:(c&re)===re){re!==0&&re===Co&&(Gd=!0),he!==null&&(he=he.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var De=n,ze=I;re=r;var jt=o;switch(ze.tag){case 1:if(De=ze.payload,typeof De=="function"){me=De.call(jt,me,re);break e}me=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=ze.payload,re=typeof De=="function"?De.call(jt,me,re):De,re==null)break e;me=b({},me,re);break e;case 2:Ni=!0}}re=I.callback,re!==null&&(n.flags|=64,le&&(n.flags|=8192),le=f.callbacks,le===null?f.callbacks=[re]:le.push(re))}else le={lane:re,tag:I.tag,payload:I.payload,callback:I.callback,next:null},he===null?(ne=he=le,U=me):he=he.next=le,x|=re;if(I=I.next,I===null){if(I=f.shared.pending,I===null)break;le=I,I=le.next,le.next=null,f.lastBaseUpdate=le,f.shared.pending=null}}while(!0);he===null&&(U=me),f.baseState=U,f.firstBaseUpdate=ne,f.lastBaseUpdate=he,g===null&&(f.shared.lanes=0),Vi|=x,n.lanes=x,n.memoizedState=me}}function vy(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function _y(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)vy(o[n],r)}var Do=L(null),Yu=L(0);function by(n,r){n=Qr,G(Yu,n),G(Do,r),Qr=n|r.baseLanes}function $d(){G(Yu,Qr),G(Do,Do.current)}function Kd(){Qr=Yu.current,Z(Do),Z(Yu)}var xs=L(null),Fs=null;function Di(n){var r=n.alternate;G(ln,ln.current&1),G(xs,n),Fs===null&&(r===null||Do.current!==null||r.memoizedState!==null)&&(Fs=n)}function Yd(n){G(ln,ln.current),G(xs,n),Fs===null&&(Fs=n)}function xy(n){n.tag===22?(G(ln,ln.current),G(xs,n),Fs===null&&(Fs=n)):Oi()}function Oi(){G(ln,ln.current),G(xs,xs.current)}function ws(n){Z(xs),Fs===n&&(Fs=null),Z(ln)}var ln=L(0);function Qu(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||eg(o)||tg(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Br=0,We=null,Ot=null,pn=null,Xu=!1,Oo=!1,Ga=!1,Wu=0,Ql=0,Mo=null,nS=0;function en(){throw Error(i(321))}function Qd(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!_s(n[o],r[o]))return!1;return!0}function Xd(n,r,o,c,f,g){return Br=g,We=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,H.H=n===null||n.memoizedState===null?rv:hm,Ga=!1,g=o(c,f),Ga=!1,Oo&&(g=Ty(r,o,c,f)),wy(n),g}function wy(n){H.H=Jl;var r=Ot!==null&&Ot.next!==null;if(Br=0,pn=Ot=We=null,Xu=!1,Ql=0,Mo=null,r)throw Error(i(300));n===null||yn||(n=n.dependencies,n!==null&&Bu(n)&&(yn=!0))}function Ty(n,r,o,c){We=n;var f=0;do{if(Oo&&(Mo=null),Ql=0,Oo=!1,25<=f)throw Error(i(301));if(f+=1,pn=Ot=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}H.H=iv,g=r(o,c)}while(Oo);return g}function sS(){var n=H.H,r=n.useState()[0];return r=typeof r.then=="function"?Xl(r):r,n=n.useState()[0],(Ot!==null?Ot.memoizedState:null)!==n&&(We.flags|=1024),r}function Wd(){var n=Wu!==0;return Wu=0,n}function Jd(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function Zd(n){if(Xu){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Xu=!1}Br=0,pn=Ot=We=null,Oo=!1,Ql=Wu=0,Mo=null}function is(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?We.memoizedState=pn=n:pn=pn.next=n,pn}function cn(){if(Ot===null){var n=We.alternate;n=n!==null?n.memoizedState:null}else n=Ot.next;var r=pn===null?We.memoizedState:pn.next;if(r!==null)pn=r,Ot=n;else{if(n===null)throw We.alternate===null?Error(i(467)):Error(i(310));Ot=n,n={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},pn===null?We.memoizedState=pn=n:pn=pn.next=n}return pn}function Ju(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xl(n){var r=Ql;return Ql+=1,Mo===null&&(Mo=[]),n=dy(Mo,n,r),r=We,(pn===null?r.memoizedState:pn.next)===null&&(r=r.alternate,H.H=r===null||r.memoizedState===null?rv:hm),n}function Zu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Xl(n);if(n.$$typeof===B)return Bn(n)}throw Error(i(438,String(n)))}function em(n){var r=null,o=We.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=We.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Ju(),We.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),c=0;c<n;c++)o[c]=E;return r.index++,o}function qr(n,r){return typeof r=="function"?r(n):r}function eh(n){var r=cn();return tm(r,Ot,n)}function tm(n,r,o){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var f=n.baseQueue,g=c.pending;if(g!==null){if(f!==null){var x=f.next;f.next=g.next,g.next=x}r.baseQueue=f=g,c.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{r=f.next;var I=x=null,U=null,ne=r,he=!1;do{var me=ne.lane&-536870913;if(me!==ne.lane?(lt&me)===me:(Br&me)===me){var re=ne.revertLane;if(re===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),me===Co&&(he=!0);else if((Br&re)===re){ne=ne.next,re===Co&&(he=!0);continue}else me={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},U===null?(I=U=me,x=g):U=U.next=me,We.lanes|=re,Vi|=re;me=ne.action,Ga&&o(g,me),g=ne.hasEagerState?ne.eagerState:o(g,me)}else re={lane:me,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},U===null?(I=U=re,x=g):U=U.next=re,We.lanes|=me,Vi|=me;ne=ne.next}while(ne!==null&&ne!==r);if(U===null?x=g:U.next=I,!_s(g,n.memoizedState)&&(yn=!0,he&&(o=No,o!==null)))throw o;n.memoizedState=g,n.baseState=x,n.baseQueue=U,c.lastRenderedState=g}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function nm(n){var r=cn(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var c=o.dispatch,f=o.pending,g=r.memoizedState;if(f!==null){o.pending=null;var x=f=f.next;do g=n(g,x.action),x=x.next;while(x!==f);_s(g,r.memoizedState)||(yn=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),o.lastRenderedState=g}return[g,c]}function Ey(n,r,o){var c=We,f=cn(),g=mt;if(g){if(o===void 0)throw Error(i(407));o=o()}else o=r();var x=!_s((Ot||f).memoizedState,o);if(x&&(f.memoizedState=o,yn=!0),f=f.queue,im(Ry.bind(null,c,f,n),[n]),f.getSnapshot!==r||x||pn!==null&&pn.memoizedState.tag&1){if(c.flags|=2048,jo(9,{destroy:void 0},Ay.bind(null,c,f,o,r),null),Pt===null)throw Error(i(349));g||(Br&127)!==0||Sy(c,r,o)}return o}function Sy(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=We.updateQueue,r===null?(r=Ju(),We.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function Ay(n,r,o,c){r.value=o,r.getSnapshot=c,Cy(r)&&Ny(n)}function Ry(n,r,o){return o(function(){Cy(r)&&Ny(n)})}function Cy(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!_s(n,o)}catch{return!0}}function Ny(n){var r=Va(n,2);r!==null&&ys(r,n,2)}function sm(n){var r=is();if(typeof n=="function"){var o=n;if(n=o(),Ga){In(!0);try{o()}finally{In(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:n},r}function Iy(n,r,o,c){return n.baseState=o,tm(n,Ot,typeof c=="function"?c:qr)}function rS(n,r,o,c,f){if(sh(n))throw Error(i(485));if(n=r.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){g.listeners.push(x)}};H.T!==null?o(!0):g.isTransition=!1,c(g),o=r.pending,o===null?(g.next=r.pending=g,ky(r,g)):(g.next=o.next,r.pending=o.next=g)}}function ky(n,r){var o=r.action,c=r.payload,f=n.state;if(r.isTransition){var g=H.T,x={};H.T=x;try{var I=o(f,c),U=H.S;U!==null&&U(x,I),Dy(n,r,I)}catch(ne){rm(n,r,ne)}finally{g!==null&&x.types!==null&&(g.types=x.types),H.T=g}}else try{g=o(f,c),Dy(n,r,g)}catch(ne){rm(n,r,ne)}}function Dy(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Oy(n,r,c)},function(c){return rm(n,r,c)}):Oy(n,r,o)}function Oy(n,r,o){r.status="fulfilled",r.value=o,My(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,ky(n,o)))}function rm(n,r,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,My(r),r=r.next;while(r!==c)}n.action=null}function My(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function jy(n,r){return r}function Vy(n,r){if(mt){var o=Pt.formState;if(o!==null){e:{var c=We;if(mt){if(Bt){t:{for(var f=Bt,g=Hs;f.nodeType!==8;){if(!g){f=null;break t}if(f=Gs(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){Bt=Gs(f.nextSibling),c=f.data==="F!";break e}}Ri(c)}c=!1}c&&(r=o[0])}}return o=is(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jy,lastRenderedState:r},o.queue=c,o=tv.bind(null,We,c),c.dispatch=o,c=sm(!1),g=um.bind(null,We,!1,c.queue),c=is(),f={state:r,dispatch:null,action:n,pending:null},c.queue=f,o=rS.bind(null,We,f,g,o),f.dispatch=o,c.memoizedState=n,[r,o,!1]}function Py(n){var r=cn();return Ly(r,Ot,n)}function Ly(n,r,o){if(r=tm(n,r,jy)[0],n=eh(qr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Xl(r)}catch(x){throw x===Io?Fu:x}else c=r;r=cn();var f=r.queue,g=f.dispatch;return o!==r.memoizedState&&(We.flags|=2048,jo(9,{destroy:void 0},iS.bind(null,f,o),null)),[c,g,n]}function iS(n,r){n.action=r}function Uy(n){var r=cn(),o=Ot;if(o!==null)return Ly(r,o,n);cn(),r=r.memoizedState,o=cn();var c=o.queue.dispatch;return o.memoizedState=n,[r,c,!1]}function jo(n,r,o,c){return n={tag:n,create:o,deps:c,inst:r,next:null},r=We.updateQueue,r===null&&(r=Ju(),We.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,r.lastEffect=n),n}function zy(){return cn().memoizedState}function th(n,r,o,c){var f=is();We.flags|=n,f.memoizedState=jo(1|r,{destroy:void 0},o,c===void 0?null:c)}function nh(n,r,o,c){var f=cn();c=c===void 0?null:c;var g=f.memoizedState.inst;Ot!==null&&c!==null&&Qd(c,Ot.memoizedState.deps)?f.memoizedState=jo(r,g,o,c):(We.flags|=n,f.memoizedState=jo(1|r,g,o,c))}function By(n,r){th(8390656,8,n,r)}function im(n,r){nh(2048,8,n,r)}function aS(n){We.flags|=4;var r=We.updateQueue;if(r===null)r=Ju(),We.updateQueue=r,r.events=[n];else{var o=r.events;o===null?r.events=[n]:o.push(n)}}function qy(n){var r=cn().memoizedState;return aS({ref:r,nextImpl:n}),function(){if((Et&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Hy(n,r){return nh(4,2,n,r)}function Fy(n,r){return nh(4,4,n,r)}function Gy(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function $y(n,r,o){o=o!=null?o.concat([n]):null,nh(4,4,Gy.bind(null,r,n),o)}function am(){}function Ky(n,r){var o=cn();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&Qd(r,c[1])?c[0]:(o.memoizedState=[n,r],n)}function Yy(n,r){var o=cn();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&Qd(r,c[1]))return c[0];if(c=n(),Ga){In(!0);try{n()}finally{In(!1)}}return o.memoizedState=[c,r],c}function om(n,r,o){return o===void 0||(Br&1073741824)!==0&&(lt&261930)===0?n.memoizedState=r:(n.memoizedState=o,n=Qv(),We.lanes|=n,Vi|=n,o)}function Qy(n,r,o,c){return _s(o,r)?o:Do.current!==null?(n=om(n,o,c),_s(n,r)||(yn=!0),n):(Br&42)===0||(Br&1073741824)!==0&&(lt&261930)===0?(yn=!0,n.memoizedState=o):(n=Qv(),We.lanes|=n,Vi|=n,r)}function Xy(n,r,o,c,f){var g=Y.p;Y.p=g!==0&&8>g?g:8;var x=H.T,I={};H.T=I,um(n,!1,r,o);try{var U=f(),ne=H.S;if(ne!==null&&ne(I,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var he=tS(U,c);Wl(n,r,he,Ss(n))}else Wl(n,r,c,Ss(n))}catch(me){Wl(n,r,{then:function(){},status:"rejected",reason:me},Ss())}finally{Y.p=g,x!==null&&I.types!==null&&(x.types=I.types),H.T=x}}function oS(){}function lm(n,r,o,c){if(n.tag!==5)throw Error(i(476));var f=Wy(n).queue;Xy(n,f,r,J,o===null?oS:function(){return Jy(n),o(c)})}function Wy(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:J},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function Jy(n){var r=Wy(n);r.next===null&&(r=n.alternate.memoizedState),Wl(n,r.next.queue,{},Ss())}function cm(){return Bn(mc)}function Zy(){return cn().memoizedState}function ev(){return cn().memoizedState}function lS(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=Ss();n=Ii(o);var c=ki(r,n,o);c!==null&&(ys(c,r,o),$l(c,r,o)),r={cache:Ld()},n.payload=r;return}r=r.return}}function cS(n,r,o){var c=Ss();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},sh(n)?nv(r,o):(o=Rd(n,r,o,c),o!==null&&(ys(o,n,c),sv(o,r,c)))}function tv(n,r,o){var c=Ss();Wl(n,r,o,c)}function Wl(n,r,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(sh(n))nv(r,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var x=r.lastRenderedState,I=g(x,o);if(f.hasEagerState=!0,f.eagerState=I,_s(I,x))return Pu(n,r,f,0),Pt===null&&Vu(),!1}catch{}if(o=Rd(n,r,f,c),o!==null)return ys(o,n,c),sv(o,r,c),!0}return!1}function um(n,r,o,c){if(c={lane:2,revertLane:qm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},sh(n)){if(r)throw Error(i(479))}else r=Rd(n,o,c,2),r!==null&&ys(r,n,2)}function sh(n){var r=n.alternate;return n===We||r!==null&&r===We}function nv(n,r){Oo=Xu=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function sv(n,r,o){if((o&4194048)!==0){var c=r.lanes;c&=n.pendingLanes,o|=c,r.lanes=o,rn(n,o)}}var Jl={readContext:Bn,use:Zu,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useLayoutEffect:en,useInsertionEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useSyncExternalStore:en,useId:en,useHostTransitionStatus:en,useFormState:en,useActionState:en,useOptimistic:en,useMemoCache:en,useCacheRefresh:en};Jl.useEffectEvent=en;var rv={readContext:Bn,use:Zu,useCallback:function(n,r){return is().memoizedState=[n,r===void 0?null:r],n},useContext:Bn,useEffect:By,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,th(4194308,4,Gy.bind(null,r,n),o)},useLayoutEffect:function(n,r){return th(4194308,4,n,r)},useInsertionEffect:function(n,r){th(4,2,n,r)},useMemo:function(n,r){var o=is();r=r===void 0?null:r;var c=n();if(Ga){In(!0);try{n()}finally{In(!1)}}return o.memoizedState=[c,r],c},useReducer:function(n,r,o){var c=is();if(o!==void 0){var f=o(r);if(Ga){In(!0);try{o(r)}finally{In(!1)}}}else f=r;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=cS.bind(null,We,n),[c.memoizedState,n]},useRef:function(n){var r=is();return n={current:n},r.memoizedState=n},useState:function(n){n=sm(n);var r=n.queue,o=tv.bind(null,We,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:am,useDeferredValue:function(n,r){var o=is();return om(o,n,r)},useTransition:function(){var n=sm(!1);return n=Xy.bind(null,We,n.queue,!0,!1),is().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var c=We,f=is();if(mt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),Pt===null)throw Error(i(349));(lt&127)!==0||Sy(c,r,o)}f.memoizedState=o;var g={value:o,getSnapshot:r};return f.queue=g,By(Ry.bind(null,c,g,n),[n]),c.flags|=2048,jo(9,{destroy:void 0},Ay.bind(null,c,g,o,r),null),o},useId:function(){var n=is(),r=Pt.identifierPrefix;if(mt){var o=br,c=_r;o=(c&~(1<<32-Lt(c)-1)).toString(32)+o,r="_"+r+"R_"+o,o=Wu++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=nS++,r="_"+r+"r_"+o.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:cm,useFormState:Vy,useActionState:Vy,useOptimistic:function(n){var r=is();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=um.bind(null,We,!0,o),o.dispatch=r,[n,r]},useMemoCache:em,useCacheRefresh:function(){return is().memoizedState=lS.bind(null,We)},useEffectEvent:function(n){var r=is(),o={impl:n};return r.memoizedState=o,function(){if((Et&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},hm={readContext:Bn,use:Zu,useCallback:Ky,useContext:Bn,useEffect:im,useImperativeHandle:$y,useInsertionEffect:Hy,useLayoutEffect:Fy,useMemo:Yy,useReducer:eh,useRef:zy,useState:function(){return eh(qr)},useDebugValue:am,useDeferredValue:function(n,r){var o=cn();return Qy(o,Ot.memoizedState,n,r)},useTransition:function(){var n=eh(qr)[0],r=cn().memoizedState;return[typeof n=="boolean"?n:Xl(n),r]},useSyncExternalStore:Ey,useId:Zy,useHostTransitionStatus:cm,useFormState:Py,useActionState:Py,useOptimistic:function(n,r){var o=cn();return Iy(o,Ot,n,r)},useMemoCache:em,useCacheRefresh:ev};hm.useEffectEvent=qy;var iv={readContext:Bn,use:Zu,useCallback:Ky,useContext:Bn,useEffect:im,useImperativeHandle:$y,useInsertionEffect:Hy,useLayoutEffect:Fy,useMemo:Yy,useReducer:nm,useRef:zy,useState:function(){return nm(qr)},useDebugValue:am,useDeferredValue:function(n,r){var o=cn();return Ot===null?om(o,n,r):Qy(o,Ot.memoizedState,n,r)},useTransition:function(){var n=nm(qr)[0],r=cn().memoizedState;return[typeof n=="boolean"?n:Xl(n),r]},useSyncExternalStore:Ey,useId:Zy,useHostTransitionStatus:cm,useFormState:Uy,useActionState:Uy,useOptimistic:function(n,r){var o=cn();return Ot!==null?Iy(o,Ot,n,r):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:em,useCacheRefresh:ev};iv.useEffectEvent=qy;function fm(n,r,o,c){r=n.memoizedState,o=o(c,r),o=o==null?r:b({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var dm={enqueueSetState:function(n,r,o){n=n._reactInternals;var c=Ss(),f=Ii(c);f.payload=r,o!=null&&(f.callback=o),r=ki(n,f,c),r!==null&&(ys(r,n,c),$l(r,n,c))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var c=Ss(),f=Ii(c);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=ki(n,f,c),r!==null&&(ys(r,n,c),$l(r,n,c))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=Ss(),c=Ii(o);c.tag=2,r!=null&&(c.callback=r),r=ki(n,c,o),r!==null&&(ys(r,n,o),$l(r,n,o))}};function av(n,r,o,c,f,g,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,x):r.prototype&&r.prototype.isPureReactComponent?!Ll(o,c)||!Ll(f,g):!0}function ov(n,r,o,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==n&&dm.enqueueReplaceState(r,r.state,null)}function $a(n,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(n=n.defaultProps){o===r&&(o=b({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function lv(n){ju(n)}function cv(n){console.error(n)}function uv(n){ju(n)}function rh(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function hv(n,r,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function mm(n,r,o){return o=Ii(o),o.tag=3,o.payload={element:null},o.callback=function(){rh(n,r)},o}function fv(n){return n=Ii(n),n.tag=3,n}function dv(n,r,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=c.value;n.payload=function(){return f(g)},n.callback=function(){hv(r,o,c)}}var x=o.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(n.callback=function(){hv(r,o,c),typeof f!="function"&&(Pi===null?Pi=new Set([this]):Pi.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function uS(n,r,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&Ro(r,o,f,!0),o=xs.current,o!==null){switch(o.tag){case 31:case 13:return Fs===null?ph():o.alternate===null&&tn===0&&(tn=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===Gu?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),Um(n,c,f)),!1;case 22:return o.flags|=65536,c===Gu?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),Um(n,c,f)),!1}throw Error(i(435,o.tag))}return Um(n,c,f),ph(),!1}if(mt)return r=xs.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==Od&&(n=Error(i(422),{cause:c}),Bl(zs(n,o)))):(c!==Od&&(r=Error(i(423),{cause:c}),Bl(zs(r,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=zs(c,o),f=mm(n.stateNode,c,f),Fd(n,f),tn!==4&&(tn=2)),!1;var g=Error(i(520),{cause:c});if(g=zs(g,o),ac===null?ac=[g]:ac.push(g),tn!==4&&(tn=2),r===null)return!0;c=zs(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=mm(o.stateNode,c,n),Fd(o,n),!1;case 1:if(r=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Pi===null||!Pi.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=fv(f),dv(f,n,o,c),Fd(o,f),!1}o=o.return}while(o!==null);return!1}var gm=Error(i(461)),yn=!1;function qn(n,r,o,c){r.child=n===null?yy(r,null,o,c):Fa(r,n.child,o,c)}function mv(n,r,o,c,f){o=o.render;var g=r.ref;if("ref"in c){var x={};for(var I in c)I!=="ref"&&(x[I]=c[I])}else x=c;return za(r),c=Xd(n,r,o,x,g,f),I=Wd(),n!==null&&!yn?(Jd(n,r,f),Hr(n,r,f)):(mt&&I&&kd(r),r.flags|=1,qn(n,r,c,f),r.child)}function gv(n,r,o,c,f){if(n===null){var g=o.type;return typeof g=="function"&&!Cd(g)&&g.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=g,pv(n,r,g,c,f)):(n=Uu(o.type,null,c,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(g=n.child,!Tm(n,f)){var x=g.memoizedProps;if(o=o.compare,o=o!==null?o:Ll,o(x,c)&&n.ref===r.ref)return Hr(n,r,f)}return r.flags|=1,n=Pr(g,c),n.ref=r.ref,n.return=r,r.child=n}function pv(n,r,o,c,f){if(n!==null){var g=n.memoizedProps;if(Ll(g,c)&&n.ref===r.ref)if(yn=!1,r.pendingProps=c=g,Tm(n,f))(n.flags&131072)!==0&&(yn=!0);else return r.lanes=n.lanes,Hr(n,r,f)}return pm(n,r,o,c,f)}function yv(n,r,o,c){var f=c.children,g=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,n!==null){for(c=r.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~g}else c=0,r.child=null;return vv(n,r,g,o,c)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&Hu(r,g!==null?g.cachePool:null),g!==null?by(r,g):$d(),xy(r);else return c=r.lanes=536870912,vv(n,r,g!==null?g.baseLanes|o:o,o,c)}else g!==null?(Hu(r,g.cachePool),by(r,g),Oi(),r.memoizedState=null):(n!==null&&Hu(r,null),$d(),Oi());return qn(n,r,f,o),r.child}function Zl(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function vv(n,r,o,c,f){var g=zd();return g=g===null?null:{parent:gn._currentValue,pool:g},r.memoizedState={baseLanes:o,cachePool:g},n!==null&&Hu(r,null),$d(),xy(r),n!==null&&Ro(n,r,c,!0),r.childLanes=f,null}function ih(n,r){return r=oh({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function _v(n,r,o){return Fa(r,n.child,null,o),n=ih(r,r.pendingProps),n.flags|=2,ws(r),r.memoizedState=null,n}function hS(n,r,o){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(mt){if(c.mode==="hidden")return n=ih(r,c),r.lanes=536870912,Zl(null,n);if(Yd(r),(n=Bt)?(n=k_(n,Hs),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Si!==null?{id:_r,overflow:br}:null,retryLane:536870912,hydrationErrors:null},o=ny(n),o.return=r,r.child=o,zn=r,Bt=null)):n=null,n===null)throw Ri(r);return r.lanes=536870912,null}return ih(r,c)}var g=n.memoizedState;if(g!==null){var x=g.dehydrated;if(Yd(r),f)if(r.flags&256)r.flags&=-257,r=_v(n,r,o);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(i(558));else if(yn||Ro(n,r,o,!1),f=(o&n.childLanes)!==0,yn||f){if(c=Pt,c!==null&&(x=xe(c,o),x!==0&&x!==g.retryLane))throw g.retryLane=x,Va(n,x),ys(c,n,x),gm;ph(),r=_v(n,r,o)}else n=g.treeContext,Bt=Gs(x.nextSibling),zn=r,mt=!0,Ai=null,Hs=!1,n!==null&&iy(r,n),r=ih(r,c),r.flags|=4096;return r}return n=Pr(n.child,{mode:c.mode,children:c.children}),n.ref=r.ref,r.child=n,n.return=r,n}function ah(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(r.flags|=4194816)}}function pm(n,r,o,c,f){return za(r),o=Xd(n,r,o,c,void 0,f),c=Wd(),n!==null&&!yn?(Jd(n,r,f),Hr(n,r,f)):(mt&&c&&kd(r),r.flags|=1,qn(n,r,o,f),r.child)}function bv(n,r,o,c,f,g){return za(r),r.updateQueue=null,o=Ty(r,c,o,f),wy(n),c=Wd(),n!==null&&!yn?(Jd(n,r,g),Hr(n,r,g)):(mt&&c&&kd(r),r.flags|=1,qn(n,r,o,g),r.child)}function xv(n,r,o,c,f){if(za(r),r.stateNode===null){var g=To,x=o.contextType;typeof x=="object"&&x!==null&&(g=Bn(x)),g=new o(c,g),r.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=dm,r.stateNode=g,g._reactInternals=r,g=r.stateNode,g.props=c,g.state=r.memoizedState,g.refs={},qd(r),x=o.contextType,g.context=typeof x=="object"&&x!==null?Bn(x):To,g.state=r.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(fm(r,o,x,c),g.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(x=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),x!==g.state&&dm.enqueueReplaceState(g,g.state,null),Yl(r,c,g,f),Kl(),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(n===null){g=r.stateNode;var I=r.memoizedProps,U=$a(o,I);g.props=U;var ne=g.context,he=o.contextType;x=To,typeof he=="object"&&he!==null&&(x=Bn(he));var me=o.getDerivedStateFromProps;he=typeof me=="function"||typeof g.getSnapshotBeforeUpdate=="function",I=r.pendingProps!==I,he||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(I||ne!==x)&&ov(r,g,c,x),Ni=!1;var re=r.memoizedState;g.state=re,Yl(r,c,g,f),Kl(),ne=r.memoizedState,I||re!==ne||Ni?(typeof me=="function"&&(fm(r,o,me,c),ne=r.memoizedState),(U=Ni||av(r,o,U,c,re,ne,x))?(he||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(r.flags|=4194308)):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=ne),g.props=c,g.state=ne,g.context=x,c=U):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{g=r.stateNode,Hd(n,r),x=r.memoizedProps,he=$a(o,x),g.props=he,me=r.pendingProps,re=g.context,ne=o.contextType,U=To,typeof ne=="object"&&ne!==null&&(U=Bn(ne)),I=o.getDerivedStateFromProps,(ne=typeof I=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x!==me||re!==U)&&ov(r,g,c,U),Ni=!1,re=r.memoizedState,g.state=re,Yl(r,c,g,f),Kl();var le=r.memoizedState;x!==me||re!==le||Ni||n!==null&&n.dependencies!==null&&Bu(n.dependencies)?(typeof I=="function"&&(fm(r,o,I,c),le=r.memoizedState),(he=Ni||av(r,o,he,c,re,le,U)||n!==null&&n.dependencies!==null&&Bu(n.dependencies))?(ne||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,le,U),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,le,U)),typeof g.componentDidUpdate=="function"&&(r.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof g.componentDidUpdate!="function"||x===n.memoizedProps&&re===n.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&re===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=le),g.props=c,g.state=le,g.context=U,c=he):(typeof g.componentDidUpdate!="function"||x===n.memoizedProps&&re===n.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&re===n.memoizedState||(r.flags|=1024),c=!1)}return g=c,ah(n,r),c=(r.flags&128)!==0,g||c?(g=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),r.flags|=1,n!==null&&c?(r.child=Fa(r,n.child,null,f),r.child=Fa(r,null,o,f)):qn(n,r,o,f),r.memoizedState=g.state,n=r.child):n=Hr(n,r,f),n}function wv(n,r,o,c){return La(),r.flags|=256,qn(n,r,o,c),r.child}var ym={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vm(n){return{baseLanes:n,cachePool:hy()}}function _m(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=Es),n}function Tv(n,r,o){var c=r.pendingProps,f=!1,g=(r.flags&128)!==0,x;if((x=g)||(x=n!==null&&n.memoizedState===null?!1:(ln.current&2)!==0),x&&(f=!0,r.flags&=-129),x=(r.flags&32)!==0,r.flags&=-33,n===null){if(mt){if(f?Di(r):Oi(),(n=Bt)?(n=k_(n,Hs),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Si!==null?{id:_r,overflow:br}:null,retryLane:536870912,hydrationErrors:null},o=ny(n),o.return=r,r.child=o,zn=r,Bt=null)):n=null,n===null)throw Ri(r);return tg(n)?r.lanes=32:r.lanes=536870912,null}var I=c.children;return c=c.fallback,f?(Oi(),f=r.mode,I=oh({mode:"hidden",children:I},f),c=Pa(c,f,o,null),I.return=r,c.return=r,I.sibling=c,r.child=I,c=r.child,c.memoizedState=vm(o),c.childLanes=_m(n,x,o),r.memoizedState=ym,Zl(null,c)):(Di(r),bm(r,I))}var U=n.memoizedState;if(U!==null&&(I=U.dehydrated,I!==null)){if(g)r.flags&256?(Di(r),r.flags&=-257,r=xm(n,r,o)):r.memoizedState!==null?(Oi(),r.child=n.child,r.flags|=128,r=null):(Oi(),I=c.fallback,f=r.mode,c=oh({mode:"visible",children:c.children},f),I=Pa(I,f,o,null),I.flags|=2,c.return=r,I.return=r,c.sibling=I,r.child=c,Fa(r,n.child,null,o),c=r.child,c.memoizedState=vm(o),c.childLanes=_m(n,x,o),r.memoizedState=ym,r=Zl(null,c));else if(Di(r),tg(I)){if(x=I.nextSibling&&I.nextSibling.dataset,x)var ne=x.dgst;x=ne,c=Error(i(419)),c.stack="",c.digest=x,Bl({value:c,source:null,stack:null}),r=xm(n,r,o)}else if(yn||Ro(n,r,o,!1),x=(o&n.childLanes)!==0,yn||x){if(x=Pt,x!==null&&(c=xe(x,o),c!==0&&c!==U.retryLane))throw U.retryLane=c,Va(n,c),ys(x,n,c),gm;eg(I)||ph(),r=xm(n,r,o)}else eg(I)?(r.flags|=192,r.child=n.child,r=null):(n=U.treeContext,Bt=Gs(I.nextSibling),zn=r,mt=!0,Ai=null,Hs=!1,n!==null&&iy(r,n),r=bm(r,c.children),r.flags|=4096);return r}return f?(Oi(),I=c.fallback,f=r.mode,U=n.child,ne=U.sibling,c=Pr(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,ne!==null?I=Pr(ne,I):(I=Pa(I,f,o,null),I.flags|=2),I.return=r,c.return=r,c.sibling=I,r.child=c,Zl(null,c),c=r.child,I=n.child.memoizedState,I===null?I=vm(o):(f=I.cachePool,f!==null?(U=gn._currentValue,f=f.parent!==U?{parent:U,pool:U}:f):f=hy(),I={baseLanes:I.baseLanes|o,cachePool:f}),c.memoizedState=I,c.childLanes=_m(n,x,o),r.memoizedState=ym,Zl(n.child,c)):(Di(r),o=n.child,n=o.sibling,o=Pr(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,n!==null&&(x=r.deletions,x===null?(r.deletions=[n],r.flags|=16):x.push(n)),r.child=o,r.memoizedState=null,o)}function bm(n,r){return r=oh({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function oh(n,r){return n=bs(22,n,null,r),n.lanes=0,n}function xm(n,r,o){return Fa(r,n.child,null,o),n=bm(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function Ev(n,r,o){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),Vd(n.return,r,o)}function wm(n,r,o,c,f,g){var x=n.memoizedState;x===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:g}:(x.isBackwards=r,x.rendering=null,x.renderingStartTime=0,x.last=c,x.tail=o,x.tailMode=f,x.treeForkCount=g)}function Sv(n,r,o){var c=r.pendingProps,f=c.revealOrder,g=c.tail;c=c.children;var x=ln.current,I=(x&2)!==0;if(I?(x=x&1|2,r.flags|=128):x&=1,G(ln,x),qn(n,r,c,o),c=mt?zl:0,!I&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ev(n,o,r);else if(n.tag===19)Ev(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)n=o.alternate,n!==null&&Qu(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),wm(r,!1,f,o,g,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&Qu(n)===null){r.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}wm(r,!0,o,null,g,c);break;case"together":wm(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function Hr(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),Vi|=r.lanes,(o&r.childLanes)===0)if(n!==null){if(Ro(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,o=Pr(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=Pr(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function Tm(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&Bu(n)))}function fS(n,r,o){switch(r.tag){case 3:Ie(r,r.stateNode.containerInfo),Ci(r,gn,n.memoizedState.cache),La();break;case 27:case 5:Ue(r);break;case 4:Ie(r,r.stateNode.containerInfo);break;case 10:Ci(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Yd(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Di(r),r.flags|=128,null):(o&r.child.childLanes)!==0?Tv(n,r,o):(Di(r),n=Hr(n,r,o),n!==null?n.sibling:null);Di(r);break;case 19:var f=(n.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(Ro(n,r,o,!1),c=(o&r.childLanes)!==0),f){if(c)return Sv(n,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),G(ln,ln.current),c)break;return null;case 22:return r.lanes=0,yv(n,r,o,r.pendingProps);case 24:Ci(r,gn,n.memoizedState.cache)}return Hr(n,r,o)}function Av(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)yn=!0;else{if(!Tm(n,o)&&(r.flags&128)===0)return yn=!1,fS(n,r,o);yn=(n.flags&131072)!==0}else yn=!1,mt&&(r.flags&1048576)!==0&&ry(r,zl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(n=qa(r.elementType),r.type=n,typeof n=="function")Cd(n)?(c=$a(n,c),r.tag=1,r=xv(null,r,n,c,o)):(r.tag=0,r=pm(null,r,n,c,o));else{if(n!=null){var f=n.$$typeof;if(f===ce){r.tag=11,r=mv(null,r,n,c,o);break e}else if(f===C){r.tag=14,r=gv(null,r,n,c,o);break e}}throw r=be(n)||n,Error(i(306,r,""))}}return r;case 0:return pm(n,r,r.type,r.pendingProps,o);case 1:return c=r.type,f=$a(c,r.pendingProps),xv(n,r,c,f,o);case 3:e:{if(Ie(r,r.stateNode.containerInfo),n===null)throw Error(i(387));c=r.pendingProps;var g=r.memoizedState;f=g.element,Hd(n,r),Yl(r,c,null,o);var x=r.memoizedState;if(c=x.cache,Ci(r,gn,c),c!==g.cache&&Pd(r,[gn],o,!0),Kl(),c=x.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:x.cache},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){r=wv(n,r,c,o);break e}else if(c!==f){f=zs(Error(i(424)),r),Bl(f),r=wv(n,r,c,o);break e}else for(n=r.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Bt=Gs(n.firstChild),zn=r,mt=!0,Ai=null,Hs=!0,o=yy(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(La(),c===f){r=Hr(n,r,o);break e}qn(n,r,c,o)}r=r.child}return r;case 26:return ah(n,r),n===null?(o=P_(r.type,null,r.pendingProps,null))?r.memoizedState=o:mt||(o=r.type,n=r.pendingProps,c=Th(ye.current).createElement(o),c[Qt]=r,c[an]=n,Hn(c,o,n),Zt(c),r.stateNode=c):r.memoizedState=P_(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return Ue(r),n===null&&mt&&(c=r.stateNode=M_(r.type,r.pendingProps,ye.current),zn=r,Hs=!0,f=Bt,Bi(r.type)?(ng=f,Bt=Gs(c.firstChild)):Bt=f),qn(n,r,r.pendingProps.children,o),ah(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&mt&&((f=c=Bt)&&(c=qS(c,r.type,r.pendingProps,Hs),c!==null?(r.stateNode=c,zn=r,Bt=Gs(c.firstChild),Hs=!1,f=!0):f=!1),f||Ri(r)),Ue(r),f=r.type,g=r.pendingProps,x=n!==null?n.memoizedProps:null,c=g.children,Wm(f,g)?c=null:x!==null&&Wm(f,x)&&(r.flags|=32),r.memoizedState!==null&&(f=Xd(n,r,sS,null,null,o),mc._currentValue=f),ah(n,r),qn(n,r,c,o),r.child;case 6:return n===null&&mt&&((n=o=Bt)&&(o=HS(o,r.pendingProps,Hs),o!==null?(r.stateNode=o,zn=r,Bt=null,n=!0):n=!1),n||Ri(r)),null;case 13:return Tv(n,r,o);case 4:return Ie(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=Fa(r,null,c,o):qn(n,r,c,o),r.child;case 11:return mv(n,r,r.type,r.pendingProps,o);case 7:return qn(n,r,r.pendingProps,o),r.child;case 8:return qn(n,r,r.pendingProps.children,o),r.child;case 12:return qn(n,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,Ci(r,r.type,c.value),qn(n,r,c.children,o),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,za(r),f=Bn(f),c=c(f),r.flags|=1,qn(n,r,c,o),r.child;case 14:return gv(n,r,r.type,r.pendingProps,o);case 15:return pv(n,r,r.type,r.pendingProps,o);case 19:return Sv(n,r,o);case 31:return hS(n,r,o);case 22:return yv(n,r,o,r.pendingProps);case 24:return za(r),c=Bn(gn),n===null?(f=zd(),f===null&&(f=Pt,g=Ld(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),r.memoizedState={parent:c,cache:f},qd(r),Ci(r,gn,f)):((n.lanes&o)!==0&&(Hd(n,r),Yl(r,null,null,o),Kl()),f=n.memoizedState,g=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Ci(r,gn,c)):(c=g.cache,Ci(r,gn,c),c!==f.cache&&Pd(r,[gn],o,!0))),qn(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Fr(n){n.flags|=4}function Em(n,r,o,c,f){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Zv())n.flags|=8192;else throw Ha=Gu,Bd}else n.flags&=-16777217}function Rv(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!q_(r))if(Zv())n.flags|=8192;else throw Ha=Gu,Bd}function lh(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?dn():536870912,n.lanes|=r,Uo|=r)}function ec(n,r){if(!mt)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function qt(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(r)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=o,r}function dS(n,r,o){var c=r.pendingProps;switch(Dd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(r),null;case 1:return qt(r),null;case 3:return o=r.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),zr(gn),Se(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Ao(r)?Fr(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Md())),qt(r),null;case 26:var f=r.type,g=r.memoizedState;return n===null?(Fr(r),g!==null?(qt(r),Rv(r,g)):(qt(r),Em(r,f,null,c,o))):g?g!==n.memoizedState?(Fr(r),qt(r),Rv(r,g)):(qt(r),r.flags&=-16777217):(n=n.memoizedProps,n!==c&&Fr(r),qt(r),Em(r,f,n,c,o)),null;case 27:if(pt(r),o=ye.current,f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&Fr(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return qt(r),null}n=K.current,Ao(r)?ay(r):(n=M_(f,c,o),r.stateNode=n,Fr(r))}return qt(r),null;case 5:if(pt(r),f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&Fr(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return qt(r),null}if(g=K.current,Ao(r))ay(r);else{var x=Th(ye.current);switch(g){case 1:g=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:g=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":g=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":g=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":g=x.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof c.is=="string"?x.createElement("select",{is:c.is}):x.createElement("select"),c.multiple?g.multiple=!0:c.size&&(g.size=c.size);break;default:g=typeof c.is=="string"?x.createElement(f,{is:c.is}):x.createElement(f)}}g[Qt]=r,g[an]=c;e:for(x=r.child;x!==null;){if(x.tag===5||x.tag===6)g.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===r)break e;for(;x.sibling===null;){if(x.return===null||x.return===r)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}r.stateNode=g;e:switch(Hn(g,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Fr(r)}}return qt(r),Em(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,o),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==c&&Fr(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(n=ye.current,Ao(r)){if(n=r.stateNode,o=r.memoizedProps,c=null,f=zn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[Qt]=r,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||T_(n.nodeValue,o)),n||Ri(r,!0)}else n=Th(n).createTextNode(c),n[Qt]=r,r.stateNode=n}return qt(r),null;case 31:if(o=r.memoizedState,n===null||n.memoizedState!==null){if(c=Ao(r),o!==null){if(n===null){if(!c)throw Error(i(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Qt]=r}else La(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;qt(r),n=!1}else o=Md(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return r.flags&256?(ws(r),r):(ws(r),null);if((r.flags&128)!==0)throw Error(i(558))}return qt(r),null;case 13:if(c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Ao(r),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Qt]=r}else La(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;qt(r),f=!1}else f=Md(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(ws(r),r):(ws(r),null)}return ws(r),(r.flags&128)!==0?(r.lanes=o,r):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048)),o!==n&&o&&(r.child.flags|=8192),lh(r,r.updateQueue),qt(r),null);case 4:return Se(),n===null&&$m(r.stateNode.containerInfo),qt(r),null;case 10:return zr(r.type),qt(r),null;case 19:if(Z(ln),c=r.memoizedState,c===null)return qt(r),null;if(f=(r.flags&128)!==0,g=c.rendering,g===null)if(f)ec(c,!1);else{if(tn!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(g=Qu(n),g!==null){for(r.flags|=128,ec(c,!1),n=g.updateQueue,r.updateQueue=n,lh(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)ty(o,n),o=o.sibling;return G(ln,ln.current&1|2),mt&&Lr(r,c.treeForkCount),r.child}n=n.sibling}c.tail!==null&&fn()>dh&&(r.flags|=128,f=!0,ec(c,!1),r.lanes=4194304)}else{if(!f)if(n=Qu(g),n!==null){if(r.flags|=128,f=!0,n=n.updateQueue,r.updateQueue=n,lh(r,n),ec(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!mt)return qt(r),null}else 2*fn()-c.renderingStartTime>dh&&o!==536870912&&(r.flags|=128,f=!0,ec(c,!1),r.lanes=4194304);c.isBackwards?(g.sibling=r.child,r.child=g):(n=c.last,n!==null?n.sibling=g:r.child=g,c.last=g)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=fn(),n.sibling=null,o=ln.current,G(ln,f?o&1|2:o&1),mt&&Lr(r,c.treeForkCount),n):(qt(r),null);case 22:case 23:return ws(r),Kd(),c=r.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(qt(r),r.subtreeFlags&6&&(r.flags|=8192)):qt(r),o=r.updateQueue,o!==null&&lh(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),n!==null&&Z(Ba),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),zr(gn),qt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function mS(n,r){switch(Dd(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return zr(gn),Se(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return pt(r),null;case 31:if(r.memoizedState!==null){if(ws(r),r.alternate===null)throw Error(i(340));La()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(ws(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));La()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Z(ln),null;case 4:return Se(),null;case 10:return zr(r.type),null;case 22:case 23:return ws(r),Kd(),n!==null&&Z(Ba),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return zr(gn),null;case 25:return null;default:return null}}function Cv(n,r){switch(Dd(r),r.tag){case 3:zr(gn),Se();break;case 26:case 27:case 5:pt(r);break;case 4:Se();break;case 31:r.memoizedState!==null&&ws(r);break;case 13:ws(r);break;case 19:Z(ln);break;case 10:zr(r.type);break;case 22:case 23:ws(r),Kd(),n!==null&&Z(Ba);break;case 24:zr(gn)}}function tc(n,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&n)===n){c=void 0;var g=o.create,x=o.inst;c=g(),x.destroy=c}o=o.next}while(o!==f)}}catch(I){Ct(r,r.return,I)}}function Mi(n,r,o){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&n)===n){var x=c.inst,I=x.destroy;if(I!==void 0){x.destroy=void 0,f=r;var U=o,ne=I;try{ne()}catch(he){Ct(f,U,he)}}}c=c.next}while(c!==g)}}catch(he){Ct(r,r.return,he)}}function Nv(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{_y(r,o)}catch(c){Ct(n,n.return,c)}}}function Iv(n,r,o){o.props=$a(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){Ct(n,r,c)}}function nc(n,r){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(f){Ct(n,r,f)}}function xr(n,r){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){Ct(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){Ct(n,r,f)}else o.current=null}function kv(n){var r=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){Ct(n,n.return,f)}}function Sm(n,r,o){try{var c=n.stateNode;VS(c,n.type,o,r),c[an]=r}catch(f){Ct(n,n.return,f)}}function Dv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Bi(n.type)||n.tag===4}function Am(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Dv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Bi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Rm(n,r,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(n),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Js));else if(c!==4&&(c===27&&Bi(n.type)&&(o=n.stateNode,r=null),n=n.child,n!==null))for(Rm(n,r,o),n=n.sibling;n!==null;)Rm(n,r,o),n=n.sibling}function ch(n,r,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(c!==4&&(c===27&&Bi(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(ch(n,r,o),n=n.sibling;n!==null;)ch(n,r,o),n=n.sibling}function Ov(n){var r=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Hn(r,c,o),r[Qt]=n,r[an]=o}catch(g){Ct(n,n.return,g)}}var Gr=!1,vn=!1,Cm=!1,Mv=typeof WeakSet=="function"?WeakSet:Set,Dn=null;function gS(n,r){if(n=n.containerInfo,Qm=Ih,n=$0(n),xd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var x=0,I=-1,U=-1,ne=0,he=0,me=n,re=null;t:for(;;){for(var le;me!==o||f!==0&&me.nodeType!==3||(I=x+f),me!==g||c!==0&&me.nodeType!==3||(U=x+c),me.nodeType===3&&(x+=me.nodeValue.length),(le=me.firstChild)!==null;)re=me,me=le;for(;;){if(me===n)break t;if(re===o&&++ne===f&&(I=x),re===g&&++he===c&&(U=x),(le=me.nextSibling)!==null)break;me=re,re=me.parentNode}me=le}o=I===-1||U===-1?null:{start:I,end:U}}else o=null}o=o||{start:0,end:0}}else o=null;for(Xm={focusedElem:n,selectionRange:o},Ih=!1,Dn=r;Dn!==null;)if(r=Dn,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Dn=n;else for(;Dn!==null;){switch(r=Dn,g=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=r,f=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var De=$a(o.type,f);n=c.getSnapshotBeforeUpdate(De,g),c.__reactInternalSnapshotBeforeUpdate=n}catch(ze){Ct(o,o.return,ze)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)Zm(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Zm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,Dn=n;break}Dn=r.return}}function jv(n,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Kr(n,o),c&4&&tc(5,o);break;case 1:if(Kr(n,o),c&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(x){Ct(o,o.return,x)}else{var f=$a(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(x){Ct(o,o.return,x)}}c&64&&Nv(o),c&512&&nc(o,o.return);break;case 3:if(Kr(n,o),c&64&&(n=o.updateQueue,n!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{_y(n,r)}catch(x){Ct(o,o.return,x)}}break;case 27:r===null&&c&4&&Ov(o);case 26:case 5:Kr(n,o),r===null&&c&4&&kv(o),c&512&&nc(o,o.return);break;case 12:Kr(n,o);break;case 31:Kr(n,o),c&4&&Lv(n,o);break;case 13:Kr(n,o),c&4&&Uv(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=ES.bind(null,o),FS(n,o))));break;case 22:if(c=o.memoizedState!==null||Gr,!c){r=r!==null&&r.memoizedState!==null||vn,f=Gr;var g=vn;Gr=c,(vn=r)&&!g?Yr(n,o,(o.subtreeFlags&8772)!==0):Kr(n,o),Gr=f,vn=g}break;case 30:break;default:Kr(n,o)}}function Vv(n){var r=n.alternate;r!==null&&(n.alternate=null,Vv(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&mi(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var $t=null,ds=!1;function $r(n,r,o){for(o=o.child;o!==null;)Pv(n,r,o),o=o.sibling}function Pv(n,r,o){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(ns,o)}catch{}switch(o.tag){case 26:vn||xr(o,r),$r(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:vn||xr(o,r);var c=$t,f=ds;Bi(o.type)&&($t=o.stateNode,ds=!1),$r(n,r,o),hc(o.stateNode),$t=c,ds=f;break;case 5:vn||xr(o,r);case 6:if(c=$t,f=ds,$t=null,$r(n,r,o),$t=c,ds=f,$t!==null)if(ds)try{($t.nodeType===9?$t.body:$t.nodeName==="HTML"?$t.ownerDocument.body:$t).removeChild(o.stateNode)}catch(g){Ct(o,r,g)}else try{$t.removeChild(o.stateNode)}catch(g){Ct(o,r,g)}break;case 18:$t!==null&&(ds?(n=$t,N_(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Ko(n)):N_($t,o.stateNode));break;case 4:c=$t,f=ds,$t=o.stateNode.containerInfo,ds=!0,$r(n,r,o),$t=c,ds=f;break;case 0:case 11:case 14:case 15:Mi(2,o,r),vn||Mi(4,o,r),$r(n,r,o);break;case 1:vn||(xr(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&Iv(o,r,c)),$r(n,r,o);break;case 21:$r(n,r,o);break;case 22:vn=(c=vn)||o.memoizedState!==null,$r(n,r,o),vn=c;break;default:$r(n,r,o)}}function Lv(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Ko(n)}catch(o){Ct(r,r.return,o)}}}function Uv(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ko(n)}catch(o){Ct(r,r.return,o)}}function pS(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new Mv),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new Mv),r;default:throw Error(i(435,n.tag))}}function uh(n,r){var o=pS(n);r.forEach(function(c){if(!o.has(c)){o.add(c);var f=SS.bind(null,n,c);c.then(f,f)}})}function ms(n,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],g=n,x=r,I=x;e:for(;I!==null;){switch(I.tag){case 27:if(Bi(I.type)){$t=I.stateNode,ds=!1;break e}break;case 5:$t=I.stateNode,ds=!1;break e;case 3:case 4:$t=I.stateNode.containerInfo,ds=!0;break e}I=I.return}if($t===null)throw Error(i(160));Pv(g,x,f),$t=null,ds=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)zv(r,n),r=r.sibling}var rr=null;function zv(n,r){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:ms(r,n),gs(n),c&4&&(Mi(3,n,n.return),tc(3,n),Mi(5,n,n.return));break;case 1:ms(r,n),gs(n),c&512&&(vn||o===null||xr(o,o.return)),c&64&&Gr&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=rr;if(ms(r,n),gs(n),c&512&&(vn||o===null||xr(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":g=f.getElementsByTagName("title")[0],(!g||g[ks]||g[Qt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(c),f.head.insertBefore(g,f.querySelector("head > title"))),Hn(g,c,o),g[Qt]=n,Zt(g),c=g;break e;case"link":var x=z_("link","href",f).get(c+(o.href||""));if(x){for(var I=0;I<x.length;I++)if(g=x[I],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){x.splice(I,1);break t}}g=f.createElement(c),Hn(g,c,o),f.head.appendChild(g);break;case"meta":if(x=z_("meta","content",f).get(c+(o.content||""))){for(I=0;I<x.length;I++)if(g=x[I],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){x.splice(I,1);break t}}g=f.createElement(c),Hn(g,c,o),f.head.appendChild(g);break;default:throw Error(i(468,c))}g[Qt]=n,Zt(g),c=g}n.stateNode=c}else B_(f,n.type,n.stateNode);else n.stateNode=U_(f,c,n.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?B_(f,n.type,n.stateNode):U_(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Sm(n,n.memoizedProps,o.memoizedProps)}break;case 27:ms(r,n),gs(n),c&512&&(vn||o===null||xr(o,o.return)),o!==null&&c&4&&Sm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(ms(r,n),gs(n),c&512&&(vn||o===null||xr(o,o.return)),n.flags&32){f=n.stateNode;try{fs(f,"")}catch(De){Ct(n,n.return,De)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,Sm(n,f,o!==null?o.memoizedProps:f)),c&1024&&(Cm=!0);break;case 6:if(ms(r,n),gs(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(De){Ct(n,n.return,De)}}break;case 3:if(Ah=null,f=rr,rr=Eh(r.containerInfo),ms(r,n),rr=f,gs(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Ko(r.containerInfo)}catch(De){Ct(n,n.return,De)}Cm&&(Cm=!1,Bv(n));break;case 4:c=rr,rr=Eh(n.stateNode.containerInfo),ms(r,n),gs(n),rr=c;break;case 12:ms(r,n),gs(n);break;case 31:ms(r,n),gs(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,uh(n,c)));break;case 13:ms(r,n),gs(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(fh=fn()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,uh(n,c)));break;case 22:f=n.memoizedState!==null;var U=o!==null&&o.memoizedState!==null,ne=Gr,he=vn;if(Gr=ne||f,vn=he||U,ms(r,n),vn=he,Gr=ne,gs(n),c&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||U||Gr||vn||Ka(n)),o=null,r=n;;){if(r.tag===5||r.tag===26){if(o===null){U=o=r;try{if(g=U.stateNode,f)x=g.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{I=U.stateNode;var me=U.memoizedProps.style,re=me!=null&&me.hasOwnProperty("display")?me.display:null;I.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(De){Ct(U,U.return,De)}}}else if(r.tag===6){if(o===null){U=r;try{U.stateNode.nodeValue=f?"":U.memoizedProps}catch(De){Ct(U,U.return,De)}}}else if(r.tag===18){if(o===null){U=r;try{var le=U.stateNode;f?I_(le,!0):I_(U.stateNode,!1)}catch(De){Ct(U,U.return,De)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,uh(n,o))));break;case 19:ms(r,n),gs(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,uh(n,c)));break;case 30:break;case 21:break;default:ms(r,n),gs(n)}}function gs(n){var r=n.flags;if(r&2){try{for(var o,c=n.return;c!==null;){if(Dv(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,g=Am(n);ch(n,g,f);break;case 5:var x=o.stateNode;o.flags&32&&(fs(x,""),o.flags&=-33);var I=Am(n);ch(n,I,x);break;case 3:case 4:var U=o.stateNode.containerInfo,ne=Am(n);Rm(n,ne,U);break;default:throw Error(i(161))}}catch(he){Ct(n,n.return,he)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function Bv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;Bv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Kr(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)jv(n,r.alternate,r),r=r.sibling}function Ka(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Mi(4,r,r.return),Ka(r);break;case 1:xr(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&Iv(r,r.return,o),Ka(r);break;case 27:hc(r.stateNode);case 26:case 5:xr(r,r.return),Ka(r);break;case 22:r.memoizedState===null&&Ka(r);break;case 30:Ka(r);break;default:Ka(r)}n=n.sibling}}function Yr(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=n,g=r,x=g.flags;switch(g.tag){case 0:case 11:case 15:Yr(f,g,o),tc(4,g);break;case 1:if(Yr(f,g,o),c=g,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ne){Ct(c,c.return,ne)}if(c=g,f=c.updateQueue,f!==null){var I=c.stateNode;try{var U=f.shared.hiddenCallbacks;if(U!==null)for(f.shared.hiddenCallbacks=null,f=0;f<U.length;f++)vy(U[f],I)}catch(ne){Ct(c,c.return,ne)}}o&&x&64&&Nv(g),nc(g,g.return);break;case 27:Ov(g);case 26:case 5:Yr(f,g,o),o&&c===null&&x&4&&kv(g),nc(g,g.return);break;case 12:Yr(f,g,o);break;case 31:Yr(f,g,o),o&&x&4&&Lv(f,g);break;case 13:Yr(f,g,o),o&&x&4&&Uv(f,g);break;case 22:g.memoizedState===null&&Yr(f,g,o),nc(g,g.return);break;case 30:break;default:Yr(f,g,o)}r=r.sibling}}function Nm(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&ql(o))}function Im(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&ql(n))}function ir(n,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)qv(n,r,o,c),r=r.sibling}function qv(n,r,o,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:ir(n,r,o,c),f&2048&&tc(9,r);break;case 1:ir(n,r,o,c);break;case 3:ir(n,r,o,c),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&ql(n)));break;case 12:if(f&2048){ir(n,r,o,c),n=r.stateNode;try{var g=r.memoizedProps,x=g.id,I=g.onPostCommit;typeof I=="function"&&I(x,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(U){Ct(r,r.return,U)}}else ir(n,r,o,c);break;case 31:ir(n,r,o,c);break;case 13:ir(n,r,o,c);break;case 23:break;case 22:g=r.stateNode,x=r.alternate,r.memoizedState!==null?g._visibility&2?ir(n,r,o,c):sc(n,r):g._visibility&2?ir(n,r,o,c):(g._visibility|=2,Vo(n,r,o,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&Nm(x,r);break;case 24:ir(n,r,o,c),f&2048&&Im(r.alternate,r);break;default:ir(n,r,o,c)}}function Vo(n,r,o,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var g=n,x=r,I=o,U=c,ne=x.flags;switch(x.tag){case 0:case 11:case 15:Vo(g,x,I,U,f),tc(8,x);break;case 23:break;case 22:var he=x.stateNode;x.memoizedState!==null?he._visibility&2?Vo(g,x,I,U,f):sc(g,x):(he._visibility|=2,Vo(g,x,I,U,f)),f&&ne&2048&&Nm(x.alternate,x);break;case 24:Vo(g,x,I,U,f),f&&ne&2048&&Im(x.alternate,x);break;default:Vo(g,x,I,U,f)}r=r.sibling}}function sc(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,c=r,f=c.flags;switch(c.tag){case 22:sc(o,c),f&2048&&Nm(c.alternate,c);break;case 24:sc(o,c),f&2048&&Im(c.alternate,c);break;default:sc(o,c)}r=r.sibling}}var rc=8192;function Po(n,r,o){if(n.subtreeFlags&rc)for(n=n.child;n!==null;)Hv(n,r,o),n=n.sibling}function Hv(n,r,o){switch(n.tag){case 26:Po(n,r,o),n.flags&rc&&n.memoizedState!==null&&nA(o,rr,n.memoizedState,n.memoizedProps);break;case 5:Po(n,r,o);break;case 3:case 4:var c=rr;rr=Eh(n.stateNode.containerInfo),Po(n,r,o),rr=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=rc,rc=16777216,Po(n,r,o),rc=c):Po(n,r,o));break;default:Po(n,r,o)}}function Fv(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function ic(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];Dn=c,$v(c,n)}Fv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Gv(n),n=n.sibling}function Gv(n){switch(n.tag){case 0:case 11:case 15:ic(n),n.flags&2048&&Mi(9,n,n.return);break;case 3:ic(n);break;case 12:ic(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,hh(n)):ic(n);break;default:ic(n)}}function hh(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];Dn=c,$v(c,n)}Fv(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Mi(8,r,r.return),hh(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,hh(r));break;default:hh(r)}n=n.sibling}}function $v(n,r){for(;Dn!==null;){var o=Dn;switch(o.tag){case 0:case 11:case 15:Mi(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ql(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Dn=c;else e:for(o=n;Dn!==null;){c=Dn;var f=c.sibling,g=c.return;if(Vv(c),c===o){Dn=null;break e}if(f!==null){f.return=g,Dn=f;break e}Dn=g}}}var yS={getCacheForType:function(n){var r=Bn(gn),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o},cacheSignal:function(){return Bn(gn).controller.signal}},vS=typeof WeakMap=="function"?WeakMap:Map,Et=0,Pt=null,it=null,lt=0,Rt=0,Ts=null,ji=!1,Lo=!1,km=!1,Qr=0,tn=0,Vi=0,Ya=0,Dm=0,Es=0,Uo=0,ac=null,ps=null,Om=!1,fh=0,Kv=0,dh=1/0,mh=null,Pi=null,Sn=0,Li=null,zo=null,Xr=0,Mm=0,jm=null,Yv=null,oc=0,Vm=null;function Ss(){return(Et&2)!==0&&lt!==0?lt&-lt:H.T!==null?qm():Ft()}function Qv(){if(Es===0)if((lt&536870912)===0||mt){var n=Ws;Ws<<=1,(Ws&3932160)===0&&(Ws=262144),Es=n}else Es=536870912;return n=xs.current,n!==null&&(n.flags|=32),Es}function ys(n,r,o){(n===Pt&&(Rt===2||Rt===9)||n.cancelPendingCommit!==null)&&(Bo(n,0),Ui(n,lt,Es,!1)),ie(n,o),((Et&2)===0||n!==Pt)&&(n===Pt&&((Et&2)===0&&(Ya|=o),tn===4&&Ui(n,lt,Es,!1)),wr(n))}function Xv(n,r,o){if((Et&6)!==0)throw Error(i(327));var c=!o&&(r&127)===0&&(r&n.expiredLanes)===0||Jt(n,r),f=c?xS(n,r):Lm(n,r,!0),g=c;do{if(f===0){Lo&&!c&&Ui(n,r,0,!1);break}else{if(o=n.current.alternate,g&&!_S(o)){f=Lm(n,r,!1),g=!1;continue}if(f===2){if(g=r,n.errorRecoveryDisabledLanes&g)var x=0;else x=n.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){r=x;e:{var I=n;f=ac;var U=I.current.memoizedState.isDehydrated;if(U&&(Bo(I,x).flags|=256),x=Lm(I,x,!1),x!==2){if(km&&!U){I.errorRecoveryDisabledLanes|=g,Ya|=g,f=4;break e}g=ps,ps=f,g!==null&&(ps===null?ps=g:ps.push.apply(ps,g))}f=x}if(g=!1,f!==2)continue}}if(f===1){Bo(n,0),Ui(n,r,0,!0);break}e:{switch(c=n,g=f,g){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Ui(c,r,Es,!ji);break e;case 2:ps=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=fh+300-fn(),10<f)){if(Ui(c,r,Es,!ji),zt(c,0,!0)!==0)break e;Xr=r,c.timeoutHandle=R_(Wv.bind(null,c,o,ps,mh,Om,r,Es,Ya,Uo,ji,g,"Throttled",-0,0),f);break e}Wv(c,o,ps,mh,Om,r,Es,Ya,Uo,ji,g,null,-0,0)}}break}while(!0);wr(n)}function Wv(n,r,o,c,f,g,x,I,U,ne,he,me,re,le){if(n.timeoutHandle=-1,me=r.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Js},Hv(r,g,me);var De=(g&62914560)===g?fh-fn():(g&4194048)===g?Kv-fn():0;if(De=sA(me,De),De!==null){Xr=g,n.cancelPendingCommit=De(i_.bind(null,n,r,g,o,c,f,x,I,U,he,me,null,re,le)),Ui(n,g,x,!ne);return}}i_(n,r,g,o,c,f,x,I,U)}function _S(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],g=f.getSnapshot;f=f.value;try{if(!_s(g(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ui(n,r,o,c){r&=~Dm,r&=~Ya,n.suspendedLanes|=r,n.pingedLanes&=~r,c&&(n.warmLanes|=r),c=n.expirationTimes;for(var f=r;0<f;){var g=31-Lt(f),x=1<<g;c[g]=-1,f&=~x}o!==0&&It(n,o,r)}function gh(){return(Et&6)===0?(lc(0),!1):!0}function Pm(){if(it!==null){if(Rt===0)var n=it.return;else n=it,Ur=Ua=null,Zd(n),ko=null,Fl=0,n=it;for(;n!==null;)Cv(n.alternate,n),n=n.return;it=null}}function Bo(n,r){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,US(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Xr=0,Pm(),Pt=n,it=o=Pr(n.current,null),lt=r,Rt=0,Ts=null,ji=!1,Lo=Jt(n,r),km=!1,Uo=Es=Dm=Ya=Vi=tn=0,ps=ac=null,Om=!1,(r&8)!==0&&(r|=r&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=r;0<c;){var f=31-Lt(c),g=1<<f;r|=n[f],c&=~g}return Qr=r,Vu(),o}function Jv(n,r){We=null,H.H=Jl,r===Io||r===Fu?(r=my(),Rt=3):r===Bd?(r=my(),Rt=4):Rt=r===gm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ts=r,it===null&&(tn=1,rh(n,zs(r,n.current)))}function Zv(){var n=xs.current;return n===null?!0:(lt&4194048)===lt?Fs===null:(lt&62914560)===lt||(lt&536870912)!==0?n===Fs:!1}function e_(){var n=H.H;return H.H=Jl,n===null?Jl:n}function t_(){var n=H.A;return H.A=yS,n}function ph(){tn=4,ji||(lt&4194048)!==lt&&xs.current!==null||(Lo=!0),(Vi&134217727)===0&&(Ya&134217727)===0||Pt===null||Ui(Pt,lt,Es,!1)}function Lm(n,r,o){var c=Et;Et|=2;var f=e_(),g=t_();(Pt!==n||lt!==r)&&(mh=null,Bo(n,r)),r=!1;var x=tn;e:do try{if(Rt!==0&&it!==null){var I=it,U=Ts;switch(Rt){case 8:Pm(),x=6;break e;case 3:case 2:case 9:case 6:xs.current===null&&(r=!0);var ne=Rt;if(Rt=0,Ts=null,qo(n,I,U,ne),o&&Lo){x=0;break e}break;default:ne=Rt,Rt=0,Ts=null,qo(n,I,U,ne)}}bS(),x=tn;break}catch(he){Jv(n,he)}while(!0);return r&&n.shellSuspendCounter++,Ur=Ua=null,Et=c,H.H=f,H.A=g,it===null&&(Pt=null,lt=0,Vu()),x}function bS(){for(;it!==null;)n_(it)}function xS(n,r){var o=Et;Et|=2;var c=e_(),f=t_();Pt!==n||lt!==r?(mh=null,dh=fn()+500,Bo(n,r)):Lo=Jt(n,r);e:do try{if(Rt!==0&&it!==null){r=it;var g=Ts;t:switch(Rt){case 1:Rt=0,Ts=null,qo(n,r,g,1);break;case 2:case 9:if(fy(g)){Rt=0,Ts=null,s_(r);break}r=function(){Rt!==2&&Rt!==9||Pt!==n||(Rt=7),wr(n)},g.then(r,r);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:fy(g)?(Rt=0,Ts=null,s_(r)):(Rt=0,Ts=null,qo(n,r,g,7));break;case 5:var x=null;switch(it.tag){case 26:x=it.memoizedState;case 5:case 27:var I=it;if(x?q_(x):I.stateNode.complete){Rt=0,Ts=null;var U=I.sibling;if(U!==null)it=U;else{var ne=I.return;ne!==null?(it=ne,yh(ne)):it=null}break t}}Rt=0,Ts=null,qo(n,r,g,5);break;case 6:Rt=0,Ts=null,qo(n,r,g,6);break;case 8:Pm(),tn=6;break e;default:throw Error(i(462))}}wS();break}catch(he){Jv(n,he)}while(!0);return Ur=Ua=null,H.H=c,H.A=f,Et=o,it!==null?0:(Pt=null,lt=0,Vu(),tn)}function wS(){for(;it!==null&&!Wt();)n_(it)}function n_(n){var r=Av(n.alternate,n,Qr);n.memoizedProps=n.pendingProps,r===null?yh(n):it=r}function s_(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=bv(o,r,r.pendingProps,r.type,void 0,lt);break;case 11:r=bv(o,r,r.pendingProps,r.type.render,r.ref,lt);break;case 5:Zd(r);default:Cv(o,r),r=it=ty(r,Qr),r=Av(o,r,Qr)}n.memoizedProps=n.pendingProps,r===null?yh(n):it=r}function qo(n,r,o,c){Ur=Ua=null,Zd(r),ko=null,Fl=0;var f=r.return;try{if(uS(n,f,r,o,lt)){tn=1,rh(n,zs(o,n.current)),it=null;return}}catch(g){if(f!==null)throw it=f,g;tn=1,rh(n,zs(o,n.current)),it=null;return}r.flags&32768?(mt||c===1?n=!0:Lo||(lt&536870912)!==0?n=!1:(ji=n=!0,(c===2||c===9||c===3||c===6)&&(c=xs.current,c!==null&&c.tag===13&&(c.flags|=16384))),r_(r,n)):yh(r)}function yh(n){var r=n;do{if((r.flags&32768)!==0){r_(r,ji);return}n=r.return;var o=dS(r.alternate,r,Qr);if(o!==null){it=o;return}if(r=r.sibling,r!==null){it=r;return}it=r=n}while(r!==null);tn===0&&(tn=5)}function r_(n,r){do{var o=mS(n.alternate,n);if(o!==null){o.flags&=32767,it=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){it=n;return}it=n=o}while(n!==null);tn=6,it=null}function i_(n,r,o,c,f,g,x,I,U){n.cancelPendingCommit=null;do vh();while(Sn!==0);if((Et&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(g=r.lanes|r.childLanes,g|=Ad,Nt(n,o,g,x,I,U),n===Pt&&(it=Pt=null,lt=0),zo=r,Li=n,Xr=o,Mm=g,jm=f,Yv=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,AS(Ln,function(){return u_(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=H.T,H.T=null,f=Y.p,Y.p=2,x=Et,Et|=4;try{gS(n,r,o)}finally{Et=x,Y.p=f,H.T=c}}Sn=1,a_(),o_(),l_()}}function a_(){if(Sn===1){Sn=0;var n=Li,r=zo,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=H.T,H.T=null;var c=Y.p;Y.p=2;var f=Et;Et|=4;try{zv(r,n);var g=Xm,x=$0(n.containerInfo),I=g.focusedElem,U=g.selectionRange;if(x!==I&&I&&I.ownerDocument&&G0(I.ownerDocument.documentElement,I)){if(U!==null&&xd(I)){var ne=U.start,he=U.end;if(he===void 0&&(he=ne),"selectionStart"in I)I.selectionStart=ne,I.selectionEnd=Math.min(he,I.value.length);else{var me=I.ownerDocument||document,re=me&&me.defaultView||window;if(re.getSelection){var le=re.getSelection(),De=I.textContent.length,ze=Math.min(U.start,De),jt=U.end===void 0?ze:Math.min(U.end,De);!le.extend&&ze>jt&&(x=jt,jt=ze,ze=x);var Q=F0(I,ze),q=F0(I,jt);if(Q&&q&&(le.rangeCount!==1||le.anchorNode!==Q.node||le.anchorOffset!==Q.offset||le.focusNode!==q.node||le.focusOffset!==q.offset)){var te=me.createRange();te.setStart(Q.node,Q.offset),le.removeAllRanges(),ze>jt?(le.addRange(te),le.extend(q.node,q.offset)):(te.setEnd(q.node,q.offset),le.addRange(te))}}}}for(me=[],le=I;le=le.parentNode;)le.nodeType===1&&me.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<me.length;I++){var fe=me[I];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}Ih=!!Qm,Xm=Qm=null}finally{Et=f,Y.p=c,H.T=o}}n.current=r,Sn=2}}function o_(){if(Sn===2){Sn=0;var n=Li,r=zo,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=H.T,H.T=null;var c=Y.p;Y.p=2;var f=Et;Et|=4;try{jv(n,r.alternate,r)}finally{Et=f,Y.p=c,H.T=o}}Sn=3}}function l_(){if(Sn===4||Sn===3){Sn=0,Nn();var n=Li,r=zo,o=Xr,c=Yv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Sn=5:(Sn=0,zo=Li=null,c_(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Pi=null),vt(o),r=r.stateNode,sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(ns,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=H.T,f=Y.p,Y.p=2,H.T=null;try{for(var g=n.onRecoverableError,x=0;x<c.length;x++){var I=c[x];g(I.value,{componentStack:I.stack})}}finally{H.T=r,Y.p=f}}(Xr&3)!==0&&vh(),wr(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===Vm?oc++:(oc=0,Vm=n):oc=0,lc(0)}}function c_(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,ql(r)))}function vh(){return a_(),o_(),l_(),u_()}function u_(){if(Sn!==5)return!1;var n=Li,r=Mm;Mm=0;var o=vt(Xr),c=H.T,f=Y.p;try{Y.p=32>o?32:o,H.T=null,o=jm,jm=null;var g=Li,x=Xr;if(Sn=0,zo=Li=null,Xr=0,(Et&6)!==0)throw Error(i(331));var I=Et;if(Et|=4,Gv(g.current),qv(g,g.current,x,o),Et=I,lc(0,!1),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(ns,g)}catch{}return!0}finally{Y.p=f,H.T=c,c_(n,r)}}function h_(n,r,o){r=zs(o,r),r=mm(n.stateNode,r,2),n=ki(n,r,2),n!==null&&(ie(n,2),wr(n))}function Ct(n,r,o){if(n.tag===3)h_(n,n,o);else for(;r!==null;){if(r.tag===3){h_(r,n,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Pi===null||!Pi.has(c))){n=zs(o,n),o=fv(2),c=ki(r,o,2),c!==null&&(dv(o,c,r,n),ie(c,2),wr(c));break}}r=r.return}}function Um(n,r,o){var c=n.pingCache;if(c===null){c=n.pingCache=new vS;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(o)||(km=!0,f.add(o),n=TS.bind(null,n,r,o),r.then(n,n))}function TS(n,r,o){var c=n.pingCache;c!==null&&c.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Pt===n&&(lt&o)===o&&(tn===4||tn===3&&(lt&62914560)===lt&&300>fn()-fh?(Et&2)===0&&Bo(n,0):Dm|=o,Uo===lt&&(Uo=0)),wr(n)}function f_(n,r){r===0&&(r=dn()),n=Va(n,r),n!==null&&(ie(n,r),wr(n))}function ES(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),f_(n,o)}function SS(n,r){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),f_(n,o)}function AS(n,r){return ot(n,r)}var _h=null,Ho=null,zm=!1,bh=!1,Bm=!1,zi=0;function wr(n){n!==Ho&&n.next===null&&(Ho===null?_h=Ho=n:Ho=Ho.next=n),bh=!0,zm||(zm=!0,CS())}function lc(n,r){if(!Bm&&bh){Bm=!0;do for(var o=!1,c=_h;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var g=0;else{var x=c.suspendedLanes,I=c.pingedLanes;g=(1<<31-Lt(42|n)+1)-1,g&=f&~(x&~I),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,p_(c,g))}else g=lt,g=zt(c,c===Pt?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Jt(c,g)||(o=!0,p_(c,g));c=c.next}while(o);Bm=!1}}function RS(){d_()}function d_(){bh=zm=!1;var n=0;zi!==0&&LS()&&(n=zi);for(var r=fn(),o=null,c=_h;c!==null;){var f=c.next,g=m_(c,r);g===0?(c.next=null,o===null?_h=f:o.next=f,f===null&&(Ho=o)):(o=c,(n!==0||(g&3)!==0)&&(bh=!0)),c=f}Sn!==0&&Sn!==5||lc(n),zi!==0&&(zi=0)}function m_(n,r){for(var o=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var x=31-Lt(g),I=1<<x,U=f[x];U===-1?((I&o)===0||(I&c)!==0)&&(f[x]=kn(I,r)):U<=r&&(n.expiredLanes|=I),g&=~I}if(r=Pt,o=lt,o=zt(n,n===r?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===r&&(Rt===2||Rt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Kt(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Jt(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(c!==null&&Kt(c),vt(o)){case 2:case 8:o=es;break;case 32:o=Ln;break;case 268435456:o=kr;break;default:o=Ln}return c=g_.bind(null,n),o=ot(o,c),n.callbackPriority=r,n.callbackNode=o,r}return c!==null&&c!==null&&Kt(c),n.callbackPriority=2,n.callbackNode=null,2}function g_(n,r){if(Sn!==0&&Sn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(vh()&&n.callbackNode!==o)return null;var c=lt;return c=zt(n,n===Pt?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(Xv(n,c,r),m_(n,fn()),n.callbackNode!=null&&n.callbackNode===o?g_.bind(null,n):null)}function p_(n,r){if(vh())return null;Xv(n,r,!0)}function CS(){zS(function(){(Et&6)!==0?ot(Ir,RS):d_()})}function qm(){if(zi===0){var n=Co;n===0&&(n=cs,cs<<=1,(cs&261888)===0&&(cs=256)),zi=n}return zi}function y_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:fo(""+n)}function v_(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function NS(n,r,o,c,f){if(r==="submit"&&o&&o.stateNode===f){var g=y_((f[an]||null).action),x=c.submitter;x&&(r=(r=x[an]||null)?y_(r.formAction):x.getAttribute("formAction"),r!==null&&(g=r,x=null));var I=new gr("action","action",null,c,f);n.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(zi!==0){var U=x?v_(f,x):new FormData(f);lm(o,{pending:!0,data:U,method:f.method,action:g},null,U)}}else typeof g=="function"&&(I.preventDefault(),U=x?v_(f,x):new FormData(f),lm(o,{pending:!0,data:U,method:f.method,action:g},g,U))},currentTarget:f}]})}}for(var Hm=0;Hm<Sd.length;Hm++){var Fm=Sd[Hm],IS=Fm.toLowerCase(),kS=Fm[0].toUpperCase()+Fm.slice(1);sr(IS,"on"+kS)}sr(Q0,"onAnimationEnd"),sr(X0,"onAnimationIteration"),sr(W0,"onAnimationStart"),sr("dblclick","onDoubleClick"),sr("focusin","onFocus"),sr("focusout","onBlur"),sr(KE,"onTransitionRun"),sr(YE,"onTransitionStart"),sr(QE,"onTransitionCancel"),sr(J0,"onTransitionEnd"),Ms("onMouseEnter",["mouseout","mouseover"]),Ms("onMouseLeave",["mouseout","mouseover"]),Ms("onPointerEnter",["pointerout","pointerover"]),Ms("onPointerLeave",["pointerout","pointerover"]),us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),us("onBeforeInput",["compositionend","keypress","textInput","paste"]),us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cc));function __(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],f=c.event;c=c.listeners;e:{var g=void 0;if(r)for(var x=c.length-1;0<=x;x--){var I=c[x],U=I.instance,ne=I.currentTarget;if(I=I.listener,U!==g&&f.isPropagationStopped())break e;g=I,f.currentTarget=ne;try{g(f)}catch(he){ju(he)}f.currentTarget=null,g=U}else for(x=0;x<c.length;x++){if(I=c[x],U=I.instance,ne=I.currentTarget,I=I.listener,U!==g&&f.isPropagationStopped())break e;g=I,f.currentTarget=ne;try{g(f)}catch(he){ju(he)}f.currentTarget=null,g=U}}}}function at(n,r){var o=r[di];o===void 0&&(o=r[di]=new Set);var c=n+"__bubble";o.has(c)||(b_(r,n,2,!1),o.add(c))}function Gm(n,r,o){var c=0;r&&(c|=4),b_(o,n,c,r)}var xh="_reactListening"+Math.random().toString(36).slice(2);function $m(n){if(!n[xh]){n[xh]=!0,Ta.forEach(function(o){o!=="selectionchange"&&(DS.has(o)||Gm(o,!1,n),Gm(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[xh]||(r[xh]=!0,Gm("selectionchange",!1,r))}}function b_(n,r,o,c){switch(Q_(r)){case 2:var f=aA;break;case 8:f=oA;break;default:f=og}o=f.bind(null,r,o,n),f=void 0,!Ca||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(r,o,{capture:!0,passive:f}):n.addEventListener(r,o,!0):f!==void 0?n.addEventListener(r,o,{passive:f}):n.addEventListener(r,o,!1)}function Km(n,r,o,c,f){var g=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var I=c.stateNode.containerInfo;if(I===f)break;if(x===4)for(x=c.return;x!==null;){var U=x.tag;if((U===3||U===4)&&x.stateNode.containerInfo===f)return;x=x.return}for(;I!==null;){if(x=Ds(I),x===null)return;if(U=x.tag,U===5||U===6||U===26||U===27){c=g=x;continue e}I=I.parentNode}}c=c.return}xi(function(){var ne=g,he=Vs(o),me=[];e:{var re=Z0.get(n);if(re!==void 0){var le=gr,De=n;switch(n){case"keypress":if(Ia(o)===0)break e;case"keydown":case"keyup":le=Du;break;case"focusin":De="focus",le=Da;break;case"focusout":De="blur",le=Da;break;case"beforeblur":case"afterblur":le=Da;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Ml;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Tu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=_;break;case Q0:case X0:case W0:le=Su;break;case J0:le=k;break;case"scroll":case"scrollend":le=Ol;break;case"wheel":le=oe;break;case"copy":case"cut":case"paste":le=Au;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=Vr;break;case"toggle":case"beforetoggle":le=Xe}var ze=(r&4)!==0,jt=!ze&&(n==="scroll"||n==="scrollend"),Q=ze?re!==null?re+"Capture":null:re;ze=[];for(var q=ne,te;q!==null;){var fe=q;if(te=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||te===null||Q===null||(fe=Zs(q,Q),fe!=null&&ze.push(uc(q,fe,te))),jt)break;q=q.return}0<ze.length&&(re=new le(re,De,null,o,he),me.push({event:re,listeners:ze}))}}if((r&7)===0){e:{if(re=n==="mouseover"||n==="pointerover",le=n==="mouseout"||n==="pointerout",re&&o!==Il&&(De=o.relatedTarget||o.fromElement)&&(Ds(De)||De[ke]))break e;if((le||re)&&(re=he.window===he?he:(re=he.ownerDocument)?re.defaultView||re.parentWindow:window,le?(De=o.relatedTarget||o.toElement,le=ne,De=De?Ds(De):null,De!==null&&(jt=l(De),ze=De.tag,De!==jt||ze!==5&&ze!==27&&ze!==6)&&(De=null)):(le=null,De=ne),le!==De)){if(ze=Ml,fe="onMouseLeave",Q="onMouseEnter",q="mouse",(n==="pointerout"||n==="pointerover")&&(ze=Vr,fe="onPointerLeave",Q="onPointerEnter",q="pointer"),jt=le==null?re:Yn(le),te=De==null?re:Yn(De),re=new ze(fe,q+"leave",le,o,he),re.target=jt,re.relatedTarget=te,fe=null,Ds(he)===ne&&(ze=new ze(Q,q+"enter",De,o,he),ze.target=te,ze.relatedTarget=jt,fe=ze),jt=fe,le&&De)t:{for(ze=OS,Q=le,q=De,te=0,fe=Q;fe;fe=ze(fe))te++;fe=0;for(var Pe=q;Pe;Pe=ze(Pe))fe++;for(;0<te-fe;)Q=ze(Q),te--;for(;0<fe-te;)q=ze(q),fe--;for(;te--;){if(Q===q||q!==null&&Q===q.alternate){ze=Q;break t}Q=ze(Q),q=ze(q)}ze=null}else ze=null;le!==null&&x_(me,re,le,ze,!1),De!==null&&jt!==null&&x_(me,jt,De,ze,!0)}}e:{if(re=ne?Yn(ne):window,le=re.nodeName&&re.nodeName.toLowerCase(),le==="select"||le==="input"&&re.type==="file")var xt=L0;else if(V0(re))if(U0)xt=FE;else{xt=qE;var Oe=BE}else le=re.nodeName,!le||le.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?ne&&ho(ne.elementType)&&(xt=L0):xt=HE;if(xt&&(xt=xt(n,ne))){P0(me,xt,o,he);break e}Oe&&Oe(n,re,ne),n==="focusout"&&ne&&re.type==="number"&&ne.memoizedProps.value!=null&&Rl(re,"number",re.value)}switch(Oe=ne?Yn(ne):window,n){case"focusin":(V0(Oe)||Oe.contentEditable==="true")&&(bo=Oe,wd=ne,Ul=null);break;case"focusout":Ul=wd=bo=null;break;case"mousedown":Td=!0;break;case"contextmenu":case"mouseup":case"dragend":Td=!1,K0(me,o,he);break;case"selectionchange":if($E)break;case"keydown":case"keyup":K0(me,o,he)}var et;if(Tt)e:{switch(n){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else _o?Oa(n,o)&&(ct="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(ct="onCompositionStart");ct&&(vr&&o.locale!=="ko"&&(_o||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&_o&&(et=Dl()):(mr=he,kl="value"in mr?mr.value:mr.textContent,_o=!0)),Oe=wh(ne,ct),0<Oe.length&&(ct=new yr(ct,n,null,o,he),me.push({event:ct,listeners:Oe}),et?ct.data=et:(et=vo(o),et!==null&&(ct.data=et)))),(et=Ls?PE(n,o):LE(n,o))&&(ct=wh(ne,"onBeforeInput"),0<ct.length&&(Oe=new yr("onBeforeInput","beforeinput",null,o,he),me.push({event:Oe,listeners:ct}),Oe.data=et)),NS(me,n,ne,o,he)}__(me,r)})}function uc(n,r,o){return{instance:n,listener:r,currentTarget:o}}function wh(n,r){for(var o=r+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=Zs(n,o),f!=null&&c.unshift(uc(n,f,g)),f=Zs(n,r),f!=null&&c.push(uc(n,f,g))),n.tag===3)return c;n=n.return}return[]}function OS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function x_(n,r,o,c,f){for(var g=r._reactName,x=[];o!==null&&o!==c;){var I=o,U=I.alternate,ne=I.stateNode;if(I=I.tag,U!==null&&U===c)break;I!==5&&I!==26&&I!==27||ne===null||(U=ne,f?(ne=Zs(o,g),ne!=null&&x.unshift(uc(o,ne,U))):f||(ne=Zs(o,g),ne!=null&&x.push(uc(o,ne,U)))),o=o.return}x.length!==0&&n.push({event:r,listeners:x})}var MS=/\r\n?/g,jS=/\u0000|\uFFFD/g;function w_(n){return(typeof n=="string"?n:""+n).replace(MS,`
`).replace(jS,"")}function T_(n,r){return r=w_(r),w_(n)===r}function Mt(n,r,o,c,f,g){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||fs(n,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&fs(n,""+c);break;case"className":ae(n,"class",c);break;case"tabIndex":ae(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ae(n,o,c);break;case"style":Nl(n,c,g);break;case"data":if(r!=="object"){ae(n,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=fo(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(r!=="input"&&Mt(n,r,"name",f.name,f,null),Mt(n,r,"formEncType",f.formEncType,f,null),Mt(n,r,"formMethod",f.formMethod,f,null),Mt(n,r,"formTarget",f.formTarget,f,null)):(Mt(n,r,"encType",f.encType,f,null),Mt(n,r,"method",f.method,f,null),Mt(n,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=fo(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=Js);break;case"onScroll":c!=null&&at("scroll",n);break;case"onScrollEnd":c!=null&&at("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=fo(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":at("beforetoggle",n),at("toggle",n),W(n,"popover",c);break;case"xlinkActuate":se(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":se(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":se(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":se(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":se(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":se(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":se(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":se(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":se(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":W(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=wu.get(o)||o,W(n,o,c))}}function Ym(n,r,o,c,f,g){switch(o){case"style":Nl(n,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof c=="string"?fs(n,c):(typeof c=="number"||typeof c=="bigint")&&fs(n,""+c);break;case"onScroll":c!=null&&at("scroll",n);break;case"onScrollEnd":c!=null&&at("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Js);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gi.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),g=n[an]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(r,g,f),typeof c=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,c,f);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):W(n,o,c)}}}function Hn(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",n),at("load",n);var c=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var x=o[g];if(x!=null)switch(g){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Mt(n,r,g,x,o,null)}}f&&Mt(n,r,"srcSet",o.srcSet,o,null),c&&Mt(n,r,"src",o.src,o,null);return;case"input":at("invalid",n);var I=g=x=f=null,U=null,ne=null;for(c in o)if(o.hasOwnProperty(c)){var he=o[c];if(he!=null)switch(c){case"name":f=he;break;case"type":x=he;break;case"checked":U=he;break;case"defaultChecked":ne=he;break;case"value":g=he;break;case"defaultValue":I=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(137,r));break;default:Mt(n,r,c,he,o,null)}}_u(n,g,I,U,ne,x,f,!1);return;case"select":at("invalid",n),c=x=g=null;for(f in o)if(o.hasOwnProperty(f)&&(I=o[f],I!=null))switch(f){case"value":g=I;break;case"defaultValue":x=I;break;case"multiple":c=I;default:Mt(n,r,f,I,o,null)}r=g,o=x,n.multiple=!!c,r!=null?yi(n,!!c,r,!1):o!=null&&yi(n,!!c,o,!0);return;case"textarea":at("invalid",n),g=f=c=null;for(x in o)if(o.hasOwnProperty(x)&&(I=o[x],I!=null))switch(x){case"value":c=I;break;case"defaultValue":f=I;break;case"children":g=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:Mt(n,r,x,I,o,null)}vi(n,c,f,g);return;case"option":for(U in o)o.hasOwnProperty(U)&&(c=o[U],c!=null)&&(U==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":Mt(n,r,U,c,o,null));return;case"dialog":at("beforetoggle",n),at("toggle",n),at("cancel",n),at("close",n);break;case"iframe":case"object":at("load",n);break;case"video":case"audio":for(c=0;c<cc.length;c++)at(cc[c],n);break;case"image":at("error",n),at("load",n);break;case"details":at("toggle",n);break;case"embed":case"source":case"link":at("error",n),at("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in o)if(o.hasOwnProperty(ne)&&(c=o[ne],c!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Mt(n,r,ne,c,o,null)}return;default:if(ho(r)){for(he in o)o.hasOwnProperty(he)&&(c=o[he],c!==void 0&&Ym(n,r,he,c,o,void 0));return}}for(I in o)o.hasOwnProperty(I)&&(c=o[I],c!=null&&Mt(n,r,I,c,o,null))}function VS(n,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,x=null,I=null,U=null,ne=null,he=null;for(le in o){var me=o[le];if(o.hasOwnProperty(le)&&me!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":U=me;default:c.hasOwnProperty(le)||Mt(n,r,le,null,c,me)}}for(var re in c){var le=c[re];if(me=o[re],c.hasOwnProperty(re)&&(le!=null||me!=null))switch(re){case"type":g=le;break;case"name":f=le;break;case"checked":ne=le;break;case"defaultChecked":he=le;break;case"value":x=le;break;case"defaultValue":I=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(i(137,r));break;default:le!==me&&Mt(n,r,re,le,c,me)}}uo(n,x,I,U,ne,he,g,f);return;case"select":le=x=I=re=null;for(g in o)if(U=o[g],o.hasOwnProperty(g)&&U!=null)switch(g){case"value":break;case"multiple":le=U;default:c.hasOwnProperty(g)||Mt(n,r,g,null,c,U)}for(f in c)if(g=c[f],U=o[f],c.hasOwnProperty(f)&&(g!=null||U!=null))switch(f){case"value":re=g;break;case"defaultValue":I=g;break;case"multiple":x=g;default:g!==U&&Mt(n,r,f,g,c,U)}r=I,o=x,c=le,re!=null?yi(n,!!o,re,!1):!!c!=!!o&&(r!=null?yi(n,!!o,r,!0):yi(n,!!o,o?[]:"",!1));return;case"textarea":le=re=null;for(I in o)if(f=o[I],o.hasOwnProperty(I)&&f!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Mt(n,r,I,null,c,f)}for(x in c)if(f=c[x],g=o[x],c.hasOwnProperty(x)&&(f!=null||g!=null))switch(x){case"value":re=f;break;case"defaultValue":le=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==g&&Mt(n,r,x,f,c,g)}bu(n,re,le);return;case"option":for(var De in o)re=o[De],o.hasOwnProperty(De)&&re!=null&&!c.hasOwnProperty(De)&&(De==="selected"?n.selected=!1:Mt(n,r,De,null,c,re));for(U in c)re=c[U],le=o[U],c.hasOwnProperty(U)&&re!==le&&(re!=null||le!=null)&&(U==="selected"?n.selected=re&&typeof re!="function"&&typeof re!="symbol":Mt(n,r,U,re,c,le));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in o)re=o[ze],o.hasOwnProperty(ze)&&re!=null&&!c.hasOwnProperty(ze)&&Mt(n,r,ze,null,c,re);for(ne in c)if(re=c[ne],le=o[ne],c.hasOwnProperty(ne)&&re!==le&&(re!=null||le!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,r));break;default:Mt(n,r,ne,re,c,le)}return;default:if(ho(r)){for(var jt in o)re=o[jt],o.hasOwnProperty(jt)&&re!==void 0&&!c.hasOwnProperty(jt)&&Ym(n,r,jt,void 0,c,re);for(he in c)re=c[he],le=o[he],!c.hasOwnProperty(he)||re===le||re===void 0&&le===void 0||Ym(n,r,he,re,c,le);return}}for(var Q in o)re=o[Q],o.hasOwnProperty(Q)&&re!=null&&!c.hasOwnProperty(Q)&&Mt(n,r,Q,null,c,re);for(me in c)re=c[me],le=o[me],!c.hasOwnProperty(me)||re===le||re==null&&le==null||Mt(n,r,me,re,c,le)}function E_(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function PS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],g=f.transferSize,x=f.initiatorType,I=f.duration;if(g&&I&&E_(x)){for(x=0,I=f.responseEnd,c+=1;c<o.length;c++){var U=o[c],ne=U.startTime;if(ne>I)break;var he=U.transferSize,me=U.initiatorType;he&&E_(me)&&(U=U.responseEnd,x+=he*(U<I?1:(I-ne)/(U-ne)))}if(--c,r+=8*(g+x)/(f.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Qm=null,Xm=null;function Th(n){return n.nodeType===9?n:n.ownerDocument}function S_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function A_(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Wm(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Jm=null;function LS(){var n=window.event;return n&&n.type==="popstate"?n===Jm?!1:(Jm=n,!0):(Jm=null,!1)}var R_=typeof setTimeout=="function"?setTimeout:void 0,US=typeof clearTimeout=="function"?clearTimeout:void 0,C_=typeof Promise=="function"?Promise:void 0,zS=typeof queueMicrotask=="function"?queueMicrotask:typeof C_<"u"?function(n){return C_.resolve(null).then(n).catch(BS)}:R_;function BS(n){setTimeout(function(){throw n})}function Bi(n){return n==="head"}function N_(n,r){var o=r,c=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(f),Ko(r);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")hc(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,hc(o);for(var g=o.firstChild;g;){var x=g.nextSibling,I=g.nodeName;g[ks]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=x}}else o==="body"&&hc(n.ownerDocument.body);o=f}while(o);Ko(r)}function I_(n,r){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function Zm(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Zm(o),mi(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function qS(n,r,o,c){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[ks])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=Gs(n.nextSibling),n===null)break}return null}function HS(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Gs(n.nextSibling),n===null))return null;return n}function k_(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Gs(n.nextSibling),n===null))return null;return n}function eg(n){return n.data==="$?"||n.data==="$~"}function tg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function FS(n,r){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||o.readyState!=="loading")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Gs(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var ng=null;function D_(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(r===0)return Gs(n.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}n=n.nextSibling}return null}function O_(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return n;r--}else o!=="/$"&&o!=="/&"||r++}n=n.previousSibling}return null}function M_(n,r,o){switch(r=Th(o),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function hc(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);mi(n)}var $s=new Map,j_=new Set;function Eh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Wr=Y.d;Y.d={f:GS,r:$S,D:KS,C:YS,L:QS,m:XS,X:JS,S:WS,M:ZS};function GS(){var n=Wr.f(),r=gh();return n||r}function $S(n){var r=ss(n);r!==null&&r.tag===5&&r.type==="form"?Jy(r):Wr.r(n)}var Fo=typeof document>"u"?null:document;function V_(n,r,o){var c=Fo;if(c&&typeof r=="string"&&r){var f=hs(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),j_.has(f)||(j_.add(f),n={rel:n,crossOrigin:o,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),Hn(r,"link",n),Zt(r),c.head.appendChild(r)))}}function KS(n){Wr.D(n),V_("dns-prefetch",n,null)}function YS(n,r){Wr.C(n,r),V_("preconnect",n,r)}function QS(n,r,o){Wr.L(n,r,o);var c=Fo;if(c&&n&&r){var f='link[rel="preload"][as="'+hs(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+hs(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+hs(o.imageSizes)+'"]')):f+='[href="'+hs(n)+'"]';var g=f;switch(r){case"style":g=Go(n);break;case"script":g=$o(n)}$s.has(g)||(n=b({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),$s.set(g,n),c.querySelector(f)!==null||r==="style"&&c.querySelector(fc(g))||r==="script"&&c.querySelector(dc(g))||(r=c.createElement("link"),Hn(r,"link",n),Zt(r),c.head.appendChild(r)))}}function XS(n,r){Wr.m(n,r);var o=Fo;if(o&&n){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+hs(c)+'"][href="'+hs(n)+'"]',g=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=$o(n)}if(!$s.has(g)&&(n=b({rel:"modulepreload",href:n},r),$s.set(g,n),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(dc(g)))return}c=o.createElement("link"),Hn(c,"link",n),Zt(c),o.head.appendChild(c)}}}function WS(n,r,o){Wr.S(n,r,o);var c=Fo;if(c&&n){var f=Os(c).hoistableStyles,g=Go(n);r=r||"default";var x=f.get(g);if(!x){var I={loading:0,preload:null};if(x=c.querySelector(fc(g)))I.loading=5;else{n=b({rel:"stylesheet",href:n,"data-precedence":r},o),(o=$s.get(g))&&sg(n,o);var U=x=c.createElement("link");Zt(U),Hn(U,"link",n),U._p=new Promise(function(ne,he){U.onload=ne,U.onerror=he}),U.addEventListener("load",function(){I.loading|=1}),U.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Sh(x,r,c)}x={type:"stylesheet",instance:x,count:1,state:I},f.set(g,x)}}}function JS(n,r){Wr.X(n,r);var o=Fo;if(o&&n){var c=Os(o).hoistableScripts,f=$o(n),g=c.get(f);g||(g=o.querySelector(dc(f)),g||(n=b({src:n,async:!0},r),(r=$s.get(f))&&rg(n,r),g=o.createElement("script"),Zt(g),Hn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function ZS(n,r){Wr.M(n,r);var o=Fo;if(o&&n){var c=Os(o).hoistableScripts,f=$o(n),g=c.get(f);g||(g=o.querySelector(dc(f)),g||(n=b({src:n,async:!0,type:"module"},r),(r=$s.get(f))&&rg(n,r),g=o.createElement("script"),Zt(g),Hn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function P_(n,r,o,c){var f=(f=ye.current)?Eh(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=Go(o.href),o=Os(f).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Go(o.href);var g=Os(f).hoistableStyles,x=g.get(n);if(x||(f=f.ownerDocument||f,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,x),(g=f.querySelector(fc(n)))&&!g._p&&(x.instance=g,x.state.loading=5),$s.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},$s.set(n,o),g||eA(f,n,o,x.state))),r&&c===null)throw Error(i(528,""));return x}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=$o(o),o=Os(f).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Go(n){return'href="'+hs(n)+'"'}function fc(n){return'link[rel="stylesheet"]['+n+"]"}function L_(n){return b({},n,{"data-precedence":n.precedence,precedence:null})}function eA(n,r,o,c){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=n.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Hn(r,"link",o),Zt(r),n.head.appendChild(r))}function $o(n){return'[src="'+hs(n)+'"]'}function dc(n){return"script[async]"+n}function U_(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=n.querySelector('style[data-href~="'+hs(o.href)+'"]');if(c)return r.instance=c,Zt(c),c;var f=b({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Zt(c),Hn(c,"style",f),Sh(c,o.precedence,n),r.instance=c;case"stylesheet":f=Go(o.href);var g=n.querySelector(fc(f));if(g)return r.state.loading|=4,r.instance=g,Zt(g),g;c=L_(o),(f=$s.get(f))&&sg(c,f),g=(n.ownerDocument||n).createElement("link"),Zt(g);var x=g;return x._p=new Promise(function(I,U){x.onload=I,x.onerror=U}),Hn(g,"link",c),r.state.loading|=4,Sh(g,o.precedence,n),r.instance=g;case"script":return g=$o(o.src),(f=n.querySelector(dc(g)))?(r.instance=f,Zt(f),f):(c=o,(f=$s.get(g))&&(c=b({},o),rg(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),Zt(f),Hn(f,"link",c),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Sh(c,o.precedence,n));return r.instance}function Sh(n,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,g=f,x=0;x<c.length;x++){var I=c[x];if(I.dataset.precedence===r)g=I;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function sg(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function rg(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Ah=null;function z_(n,r,o){if(Ah===null){var c=new Map,f=Ah=new Map;f.set(o,c)}else f=Ah,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var g=o[f];if(!(g[ks]||g[Qt]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var x=g.getAttribute(r)||"";x=n+x;var I=c.get(x);I?I.push(g):c.set(x,[g])}}return c}function B_(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function tA(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(n=r.disabled,typeof r.precedence=="string"&&n==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function q_(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function nA(n,r,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Go(c.href),g=r.querySelector(fc(f));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=Rh.bind(n),r.then(n,n)),o.state.loading|=4,o.instance=g,Zt(g);return}g=r.ownerDocument||r,c=L_(c),(f=$s.get(f))&&sg(c,f),g=g.createElement("link"),Zt(g);var x=g;x._p=new Promise(function(I,U){x.onload=I,x.onerror=U}),Hn(g,"link",c),o.instance=g}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Rh.bind(n),r.addEventListener("load",o),r.addEventListener("error",o))}}var ig=0;function sA(n,r){return n.stylesheets&&n.count===0&&Nh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&Nh(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4+r);0<n.imgBytes&&ig===0&&(ig=62500*PS());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Nh(n,n.stylesheets),n.unsuspend)){var g=n.unsuspend;n.unsuspend=null,g()}},(n.imgBytes>ig?50:800)+r);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Rh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Nh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Ch=null;function Nh(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Ch=new Map,r.forEach(rA,n),Ch=null,Rh.call(n))}function rA(n,r){if(!(r.state.loading&4)){var o=Ch.get(n);if(o)var c=o.get(null);else{o=new Map,Ch.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var x=f[g];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(o.set(x.dataset.precedence,x),c=x)}c&&o.set(null,c)}f=r.instance,x=f.getAttribute("data-precedence"),g=o.get(x)||c,g===c&&o.set(null,f),o.set(x,f),this.count++,c=Rh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var mc={$$typeof:B,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function iA(n,r,o,c,f,g,x,I,U){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yt(0),this.hiddenUpdates=Yt(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function H_(n,r,o,c,f,g,x,I,U,ne,he,me){return n=new iA(n,r,o,x,U,ne,he,me,I),r=1,g===!0&&(r|=24),g=bs(3,null,null,r),n.current=g,g.stateNode=n,r=Ld(),r.refCount++,n.pooledCache=r,r.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:r},qd(g),n}function F_(n){return n?(n=To,n):To}function G_(n,r,o,c,f,g){f=F_(f),c.context===null?c.context=f:c.pendingContext=f,c=Ii(r),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=ki(n,c,r),o!==null&&(ys(o,n,r),$l(o,n,r))}function $_(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function ag(n,r){$_(n,r),(n=n.alternate)&&$_(n,r)}function K_(n){if(n.tag===13||n.tag===31){var r=Va(n,67108864);r!==null&&ys(r,n,67108864),ag(n,67108864)}}function Y_(n){if(n.tag===13||n.tag===31){var r=Ss();r=Tn(r);var o=Va(n,r);o!==null&&ys(o,n,r),ag(n,r)}}var Ih=!0;function aA(n,r,o,c){var f=H.T;H.T=null;var g=Y.p;try{Y.p=2,og(n,r,o,c)}finally{Y.p=g,H.T=f}}function oA(n,r,o,c){var f=H.T;H.T=null;var g=Y.p;try{Y.p=8,og(n,r,o,c)}finally{Y.p=g,H.T=f}}function og(n,r,o,c){if(Ih){var f=lg(c);if(f===null)Km(n,r,c,kh,o),X_(n,c);else if(cA(f,n,r,o,c))c.stopPropagation();else if(X_(n,c),r&4&&-1<lA.indexOf(n)){for(;f!==null;){var g=ss(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var x=Ut(g.pendingLanes);if(x!==0){var I=g;for(I.pendingLanes|=2,I.entangledLanes|=2;x;){var U=1<<31-Lt(x);I.entanglements[1]|=U,x&=~U}wr(g),(Et&6)===0&&(dh=fn()+500,lc(0))}}break;case 31:case 13:I=Va(g,2),I!==null&&ys(I,g,2),gh(),ag(g,2)}if(g=lg(c),g===null&&Km(n,r,c,kh,o),g===f)break;f=g}f!==null&&c.stopPropagation()}else Km(n,r,c,null,o)}}function lg(n){return n=Vs(n),cg(n)}var kh=null;function cg(n){if(kh=null,n=Ds(n),n!==null){var r=l(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=u(r),n!==null)return n;n=null}else if(o===31){if(n=d(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return kh=n,null}function Q_(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ys()){case Ir:return 2;case es:return 8;case Ln:case Qs:return 32;case kr:return 268435456;default:return 32}default:return 32}}var ug=!1,qi=null,Hi=null,Fi=null,gc=new Map,pc=new Map,Gi=[],lA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X_(n,r){switch(n){case"focusin":case"focusout":qi=null;break;case"dragenter":case"dragleave":Hi=null;break;case"mouseover":case"mouseout":Fi=null;break;case"pointerover":case"pointerout":gc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":pc.delete(r.pointerId)}}function yc(n,r,o,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},r!==null&&(r=ss(r),r!==null&&K_(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function cA(n,r,o,c,f){switch(r){case"focusin":return qi=yc(qi,n,r,o,c,f),!0;case"dragenter":return Hi=yc(Hi,n,r,o,c,f),!0;case"mouseover":return Fi=yc(Fi,n,r,o,c,f),!0;case"pointerover":var g=f.pointerId;return gc.set(g,yc(gc.get(g)||null,n,r,o,c,f)),!0;case"gotpointercapture":return g=f.pointerId,pc.set(g,yc(pc.get(g)||null,n,r,o,c,f)),!0}return!1}function W_(n){var r=Ds(n.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=u(o),r!==null){n.blockedOn=r,En(n.priority,function(){Y_(o)});return}}else if(r===31){if(r=d(o),r!==null){n.blockedOn=r,En(n.priority,function(){Y_(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Dh(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=lg(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);Il=c,o.target.dispatchEvent(c),Il=null}else return r=ss(o),r!==null&&K_(r),n.blockedOn=o,!1;r.shift()}return!0}function J_(n,r,o){Dh(n)&&o.delete(r)}function uA(){ug=!1,qi!==null&&Dh(qi)&&(qi=null),Hi!==null&&Dh(Hi)&&(Hi=null),Fi!==null&&Dh(Fi)&&(Fi=null),gc.forEach(J_),pc.forEach(J_)}function Oh(n,r){n.blockedOn===r&&(n.blockedOn=null,ug||(ug=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,uA)))}var Mh=null;function Z_(n){Mh!==n&&(Mh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Mh===n&&(Mh=null);for(var r=0;r<n.length;r+=3){var o=n[r],c=n[r+1],f=n[r+2];if(typeof c!="function"){if(cg(c||o)===null)continue;break}var g=ss(o);g!==null&&(n.splice(r,3),r-=3,lm(g,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function Ko(n){function r(U){return Oh(U,n)}qi!==null&&Oh(qi,n),Hi!==null&&Oh(Hi,n),Fi!==null&&Oh(Fi,n),gc.forEach(r),pc.forEach(r);for(var o=0;o<Gi.length;o++){var c=Gi[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Gi.length&&(o=Gi[0],o.blockedOn===null);)W_(o),o.blockedOn===null&&Gi.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],g=o[c+1],x=f[an]||null;if(typeof g=="function")x||Z_(o);else if(x){var I=null;if(g&&g.hasAttribute("formAction")){if(f=g,x=g[an]||null)I=x.formAction;else if(cg(f)!==null)continue}else I=x.action;typeof I=="function"?o[c+1]=I:(o.splice(c,3),c-=3),Z_(o)}}}function eb(){function n(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(x){return f=x})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function hg(n){this._internalRoot=n}jh.prototype.render=hg.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,c=Ss();G_(o,c,n,r,null,null)},jh.prototype.unmount=hg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;G_(n.current,2,null,n,null,null),gh(),r[ke]=null}};function jh(n){this._internalRoot=n}jh.prototype.unstable_scheduleHydration=function(n){if(n){var r=Ft();n={blockedOn:null,target:n,priority:r};for(var o=0;o<Gi.length&&r!==0&&r<Gi[o].priority;o++);Gi.splice(o,0,n),o===0&&W_(n)}};var tb=e.version;if(tb!=="19.2.3")throw Error(i(527,tb,"19.2.3"));Y.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=p(r),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var hA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vh.isDisabled&&Vh.supportsFiber)try{ns=Vh.inject(hA),sn=Vh}catch{}}return _c.createRoot=function(n,r){if(!a(n))throw Error(i(299));var o=!1,c="",f=lv,g=cv,x=uv;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(g=r.onCaughtError),r.onRecoverableError!==void 0&&(x=r.onRecoverableError)),r=H_(n,1,!1,null,null,o,c,null,f,g,x,eb),n[ke]=r.current,$m(n),new hg(r)},_c.hydrateRoot=function(n,r,o){if(!a(n))throw Error(i(299));var c=!1,f="",g=lv,x=cv,I=uv,U=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(I=o.onRecoverableError),o.formState!==void 0&&(U=o.formState)),r=H_(n,1,!0,r,o??null,c,f,U,g,x,I,eb),r.context=F_(null),o=r.current,c=Ss(),c=Tn(c),f=Ii(c),f.callback=null,ki(o,f,c),o=c,r.current.lanes=o,ie(r,o),wr(r),n[ke]=r.current,$m(n),new jh(r)},_c.version="19.2.3",_c}var hb;function xA(){if(hb)return mg.exports;hb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),mg.exports=bA(),mg.exports}var wA=xA();const TA=()=>y.jsxs("div",{className:"fixed inset-0 -z-50 overflow-hidden pointer-events-none bg-[#020617]",children:[y.jsx("div",{className:"bg-blob opacity-20 w-[800px] h-[800px] -top-96 -left-96 bg-indigo-600 blur-[120px]"}),y.jsx("div",{className:"bg-blob opacity-30 w-[600px] h-[600px] top-1/2 -right-48 bg-pink-600 blur-[100px]",style:{animationDelay:"-5s",animationDuration:"25s"}}),y.jsx("div",{className:"bg-blob opacity-10 w-[500px] h-[500px] bottom-0 left-1/4 bg-cyan-400 blur-[80px]",style:{animationDelay:"-12s",animationDuration:"18s"}}),y.jsx("div",{className:"absolute inset-0 bg-radial-at-t from-transparent via-slate-950/40 to-slate-950"}),y.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"})]});const EA=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),SA=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),fb=s=>{const e=SA(s);return e.charAt(0).toUpperCase()+e.slice(1)},wx=(...s)=>s.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),AA=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var RA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const CA=V.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:a="",children:l,iconNode:u,...d},m)=>V.createElement("svg",{ref:m,...RA,width:e,height:e,stroke:s,strokeWidth:i?Number(t)*24/Number(e):t,className:wx("lucide",a),...!l&&!AA(d)&&{"aria-hidden":"true"},...d},[...u.map(([p,v])=>V.createElement(p,v)),...Array.isArray(l)?l:[l]]));const hn=(s,e)=>{const t=V.forwardRef(({className:i,...a},l)=>V.createElement(CA,{ref:l,iconNode:e,className:wx(`lucide-${EA(fb(s))}`,`lucide-${s}`,i),...a}));return t.displayName=fb(s),t};const NA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Jr=hn("arrow-left",NA);const IA=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Uc=hn("bot",IA);const kA=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],db=hn("check",kA);const DA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],OA=hn("circle-x",DA);const MA=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ff=hn("copy",MA);const jA=[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]],VA=hn("dices",jA);const PA=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],Tx=hn("flag",PA);const LA=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],UA=hn("hash",LA);const zA=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],BA=hn("house",zA);const qA=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],HA=hn("layout-grid",qA);const FA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ex=hn("loader-circle",FA);const GA=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],vg=hn("log-in",GA);const $A=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],KA=hn("log-out",$A);const YA=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],mb=hn("play",YA);const QA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],_g=hn("plus",QA);const XA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Rp=hn("rotate-ccw",XA);const WA=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Sx=hn("share-2",WA);const JA=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],$g=hn("trophy",JA);const ZA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ji=hn("user",ZA);const e2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Cp=hn("users",e2);const t2=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ax=hn("zap",t2),n2=()=>{};var gb={};const Rx=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let a=s.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},s2=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const a=s[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[t++],u=s[t++],d=s[t++],m=((a&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=s[t++],u=s[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},Cx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<s.length;a+=3){const l=s[a],u=a+1<s.length,d=u?s[a+1]:0,m=a+2<s.length,p=m?s[a+2]:0,v=l>>2,b=(l&3)<<4|d>>4;let w=(d&15)<<2|p>>6,R=p&63;m||(R=64,u||(w=64)),i.push(t[v],t[b],t[w],t[R])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Rx(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):s2(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<s.length;){const l=t[s.charAt(a++)],d=a<s.length?t[s.charAt(a)]:0;++a;const p=a<s.length?t[s.charAt(a)]:64;++a;const b=a<s.length?t[s.charAt(a)]:64;if(++a,l==null||d==null||p==null||b==null)throw new r2;const w=l<<2|d>>4;if(i.push(w),p!==64){const R=d<<4&240|p>>2;if(i.push(R),b!==64){const j=p<<6&192|b;i.push(j)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class r2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i2=function(s){const e=Rx(s);return Cx.encodeByteArray(e,!0)},df=function(s){return i2(s).replace(/\./g,"")},Nx=function(s){try{return Cx.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function a2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const o2=()=>a2().__FIREBASE_DEFAULTS__,l2=()=>{if(typeof process>"u"||typeof gb>"u")return;const s=gb.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},c2=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Nx(s[1]);return e&&JSON.parse(e)},Bf=()=>{try{return n2()||o2()||l2()||c2()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Ix=s=>Bf()?.emulatorHosts?.[s],u2=s=>{const e=Ix(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},kx=()=>Bf()?.config,Dx=s=>Bf()?.[`_${s}`];class h2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function yl(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ox(s){return(await fetch(s,{credentials:"include"})).ok}function f2(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...s};return[df(JSON.stringify(t)),df(JSON.stringify(u)),""].join(".")}const Cc={};function d2(){const s={prod:[],emulator:[]};for(const e of Object.keys(Cc))Cc[e]?s.emulator.push(e):s.prod.push(e);return s}function m2(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let pb=!1;function Mx(s,e){if(typeof window>"u"||typeof document>"u"||!yl(window.location.host)||Cc[s]===e||Cc[s]||pb)return;Cc[s]=e;function t(w){return`__firebase__banner__${w}`}const i="__firebase__banner",l=d2().prod.length>0;function u(){const w=document.getElementById(i);w&&w.remove()}function d(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function m(w,R){w.setAttribute("width","24"),w.setAttribute("id",R),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{pb=!0,u()},w}function v(w,R){w.setAttribute("id",R),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function b(){const w=m2(i),R=t("text"),j=document.getElementById(R)||document.createElement("span"),z=t("learnmore"),D=document.getElementById(z)||document.createElement("a"),M=t("preprendIcon"),$=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const B=w.element;d(B),v(D,z);const ce=p();m($,M),B.append($,j,D,ce),document.body.appendChild(B)}l?(j.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function Zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function g2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zn())}function p2(){const s=Bf()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function y2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function v2(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function _2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function b2(){const s=Zn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function x2(){return!p2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function w2(){try{return typeof indexedDB=="object"}catch{return!1}}function T2(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const E2="FirebaseError";class ui extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=E2,Object.setPrototypeOf(this,ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zc.prototype.create)}}class Zc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?S2(l,i):"Error",d=`${this.serviceName}: ${u} (${a}).`;return new ui(a,d,i)}}function S2(s,e){return s.replace(A2,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const A2=/\{\$([^}]+)}/g;function R2(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Za(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=s[a],u=e[a];if(yb(l)&&yb(u)){if(!Za(l,u))return!1}else if(l!==u)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function yb(s){return s!==null&&typeof s=="object"}function eu(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function C2(s,e){const t=new N2(s,e);return t.subscribe.bind(t)}class N2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");I2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=bg),a.error===void 0&&(a.error=bg),a.complete===void 0&&(a.complete=bg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function I2(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function bg(){}function Pn(s){return s&&s._delegate?s._delegate:s}class eo{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Xa="[DEFAULT]";class k2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new h2;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(O2(e))try{this.getOrInitializeService({instanceIdentifier:Xa})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=Xa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xa){return this.instances.has(e)}getOptions(e=Xa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&u.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:D2(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Xa){return this.component?this.component.multipleInstances?e:Xa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function D2(s){return s===Xa?void 0:s}function O2(s){return s.instantiationMode==="EAGER"}class M2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new k2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var ut;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ut||(ut={}));const j2={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},V2=ut.INFO,P2={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},L2=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),a=P2[e];if(a)console[a](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Np{constructor(e){this.name=e,this._logLevel=V2,this._logHandler=L2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?j2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...e),this._logHandler(this,ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...e),this._logHandler(this,ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...e),this._logHandler(this,ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...e),this._logHandler(this,ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...e),this._logHandler(this,ut.ERROR,...e)}}const U2=(s,e)=>e.some(t=>s instanceof t);let vb,_b;function z2(){return vb||(vb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function B2(){return _b||(_b=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jx=new WeakMap,Kg=new WeakMap,Vx=new WeakMap,xg=new WeakMap,Ip=new WeakMap;function q2(s){const e=new Promise((t,i)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",u)},l=()=>{t(ra(s.result)),a()},u=()=>{i(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&jx.set(t,s)}).catch(()=>{}),Ip.set(e,s),e}function H2(s){if(Kg.has(s))return;const e=new Promise((t,i)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",u),s.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{i(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",u),s.addEventListener("abort",u)});Kg.set(s,e)}let Yg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Kg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Vx.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ra(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function F2(s){Yg=s(Yg)}function G2(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(wg(this),e,...t);return Vx.set(i,e.sort?e.sort():[e]),ra(i)}:B2().includes(s)?function(...e){return s.apply(wg(this),e),ra(jx.get(this))}:function(...e){return ra(s.apply(wg(this),e))}}function $2(s){return typeof s=="function"?G2(s):(s instanceof IDBTransaction&&H2(s),U2(s,z2())?new Proxy(s,Yg):s)}function ra(s){if(s instanceof IDBRequest)return q2(s);if(xg.has(s))return xg.get(s);const e=$2(s);return e!==s&&(xg.set(s,e),Ip.set(e,s)),e}const wg=s=>Ip.get(s);function K2(s,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const u=indexedDB.open(s,e),d=ra(u);return i&&u.addEventListener("upgradeneeded",m=>{i(ra(u.result),m.oldVersion,m.newVersion,ra(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const Y2=["get","getKey","getAll","getAllKeys","count"],Q2=["put","add","delete","clear"],Tg=new Map;function bb(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Tg.get(e))return Tg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=Q2.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||Y2.includes(t)))return;const l=async function(u,...d){const m=this.transaction(u,a?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),a&&m.done]))[0]};return Tg.set(e,l),l}F2(s=>({...s,get:(e,t,i)=>bb(e,t)||s.get(e,t,i),has:(e,t)=>!!bb(e,t)||s.has(e,t)}));class X2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(W2(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function W2(s){return s.getComponent()?.type==="VERSION"}const Qg="@firebase/app",xb="0.14.6";const ri=new Np("@firebase/app"),J2="@firebase/app-compat",Z2="@firebase/analytics-compat",eR="@firebase/analytics",tR="@firebase/app-check-compat",nR="@firebase/app-check",sR="@firebase/auth",rR="@firebase/auth-compat",iR="@firebase/database",aR="@firebase/data-connect",oR="@firebase/database-compat",lR="@firebase/functions",cR="@firebase/functions-compat",uR="@firebase/installations",hR="@firebase/installations-compat",fR="@firebase/messaging",dR="@firebase/messaging-compat",mR="@firebase/performance",gR="@firebase/performance-compat",pR="@firebase/remote-config",yR="@firebase/remote-config-compat",vR="@firebase/storage",_R="@firebase/storage-compat",bR="@firebase/firestore",xR="@firebase/ai",wR="@firebase/firestore-compat",TR="firebase",ER="12.6.0";const Xg="[DEFAULT]",SR={[Qg]:"fire-core",[J2]:"fire-core-compat",[eR]:"fire-analytics",[Z2]:"fire-analytics-compat",[nR]:"fire-app-check",[tR]:"fire-app-check-compat",[sR]:"fire-auth",[rR]:"fire-auth-compat",[iR]:"fire-rtdb",[aR]:"fire-data-connect",[oR]:"fire-rtdb-compat",[lR]:"fire-fn",[cR]:"fire-fn-compat",[uR]:"fire-iid",[hR]:"fire-iid-compat",[fR]:"fire-fcm",[dR]:"fire-fcm-compat",[mR]:"fire-perf",[gR]:"fire-perf-compat",[pR]:"fire-rc",[yR]:"fire-rc-compat",[vR]:"fire-gcs",[_R]:"fire-gcs-compat",[bR]:"fire-fst",[wR]:"fire-fst-compat",[xR]:"fire-vertex","fire-js":"fire-js",[TR]:"fire-js-all"};const zc=new Map,AR=new Map,Wg=new Map;function wb(s,e){try{s.container.addComponent(e)}catch(t){ri.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function ol(s){const e=s.name;if(Wg.has(e))return ri.debug(`There were multiple attempts to register component ${e}.`),!1;Wg.set(e,s);for(const t of zc.values())wb(t,s);for(const t of AR.values())wb(t,s);return!0}function kp(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function or(s){return s==null?!1:s.settings!==void 0}const RR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ia=new Zc("app","Firebase",RR);class CR{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new eo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ia.create("app-deleted",{appName:this._name})}}const vl=ER;function Px(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i={name:Xg,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw ia.create("bad-app-name",{appName:String(a)});if(t||(t=kx()),!t)throw ia.create("no-options");const l=zc.get(a);if(l){if(Za(t,l.options)&&Za(i,l.config))return l;throw ia.create("duplicate-app",{appName:a})}const u=new M2(a);for(const m of Wg.values())u.addComponent(m);const d=new CR(t,i,u);return zc.set(a,d),d}function Lx(s=Xg){const e=zc.get(s);if(!e&&s===Xg&&kx())return Px();if(!e)throw ia.create("no-app",{appName:s});return e}function Tb(){return Array.from(zc.values())}function aa(s,e,t){let i=SR[s]??s;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${i}" with version "${e}":`];a&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ri.warn(u.join(" "));return}ol(new eo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const NR="firebase-heartbeat-database",IR=1,Bc="firebase-heartbeat-store";let Eg=null;function Ux(){return Eg||(Eg=K2(NR,IR,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Bc)}catch(t){console.warn(t)}}}}).catch(s=>{throw ia.create("idb-open",{originalErrorMessage:s.message})})),Eg}async function kR(s){try{const t=(await Ux()).transaction(Bc),i=await t.objectStore(Bc).get(zx(s));return await t.done,i}catch(e){if(e instanceof ui)ri.warn(e.message);else{const t=ia.create("idb-get",{originalErrorMessage:e?.message});ri.warn(t.message)}}}async function Eb(s,e){try{const i=(await Ux()).transaction(Bc,"readwrite");await i.objectStore(Bc).put(e,zx(s)),await i.done}catch(t){if(t instanceof ui)ri.warn(t.message);else{const i=ia.create("idb-set",{originalErrorMessage:t?.message});ri.warn(i.message)}}}function zx(s){return`${s.name}!${s.options.appId}`}const DR=1024,OR=30;class MR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new VR(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Sb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>OR){const a=PR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ri.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Sb(),{heartbeatsToSend:t,unsentEntries:i}=jR(this._heartbeatsCache.heartbeats),a=df(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return ri.warn(e),""}}}function Sb(){return new Date().toISOString().substring(0,10)}function jR(s,e=DR){const t=[];let i=s.slice();for(const a of s){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),Ab(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Ab(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class VR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return w2()?T2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await kR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Eb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Eb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ab(s){return df(JSON.stringify({version:2,heartbeats:s})).length}function PR(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}function LR(s){ol(new eo("platform-logger",e=>new X2(e),"PRIVATE")),ol(new eo("heartbeat",e=>new MR(e),"PRIVATE")),aa(Qg,xb,s),aa(Qg,xb,"esm2020"),aa("fire-js","")}LR("");var Rb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var oa,Bx;(function(){var s;function e(C,S){function N(){}N.prototype=S.prototype,C.F=S.prototype,C.prototype=new N,C.prototype.constructor=C,C.D=function(E,A,P){for(var O=Array(arguments.length-2),be=2;be<arguments.length;be++)O[be-2]=arguments[be];return S.prototype[A].apply(E,O)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,S,N){N||(N=0);const E=Array(16);if(typeof S=="string")for(var A=0;A<16;++A)E[A]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(A=0;A<16;++A)E[A]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=C.g[0],N=C.g[1],A=C.g[2];let P=C.g[3],O;O=S+(P^N&(A^P))+E[0]+3614090360&4294967295,S=N+(O<<7&4294967295|O>>>25),O=P+(A^S&(N^A))+E[1]+3905402710&4294967295,P=S+(O<<12&4294967295|O>>>20),O=A+(N^P&(S^N))+E[2]+606105819&4294967295,A=P+(O<<17&4294967295|O>>>15),O=N+(S^A&(P^S))+E[3]+3250441966&4294967295,N=A+(O<<22&4294967295|O>>>10),O=S+(P^N&(A^P))+E[4]+4118548399&4294967295,S=N+(O<<7&4294967295|O>>>25),O=P+(A^S&(N^A))+E[5]+1200080426&4294967295,P=S+(O<<12&4294967295|O>>>20),O=A+(N^P&(S^N))+E[6]+2821735955&4294967295,A=P+(O<<17&4294967295|O>>>15),O=N+(S^A&(P^S))+E[7]+4249261313&4294967295,N=A+(O<<22&4294967295|O>>>10),O=S+(P^N&(A^P))+E[8]+1770035416&4294967295,S=N+(O<<7&4294967295|O>>>25),O=P+(A^S&(N^A))+E[9]+2336552879&4294967295,P=S+(O<<12&4294967295|O>>>20),O=A+(N^P&(S^N))+E[10]+4294925233&4294967295,A=P+(O<<17&4294967295|O>>>15),O=N+(S^A&(P^S))+E[11]+2304563134&4294967295,N=A+(O<<22&4294967295|O>>>10),O=S+(P^N&(A^P))+E[12]+1804603682&4294967295,S=N+(O<<7&4294967295|O>>>25),O=P+(A^S&(N^A))+E[13]+4254626195&4294967295,P=S+(O<<12&4294967295|O>>>20),O=A+(N^P&(S^N))+E[14]+2792965006&4294967295,A=P+(O<<17&4294967295|O>>>15),O=N+(S^A&(P^S))+E[15]+1236535329&4294967295,N=A+(O<<22&4294967295|O>>>10),O=S+(A^P&(N^A))+E[1]+4129170786&4294967295,S=N+(O<<5&4294967295|O>>>27),O=P+(N^A&(S^N))+E[6]+3225465664&4294967295,P=S+(O<<9&4294967295|O>>>23),O=A+(S^N&(P^S))+E[11]+643717713&4294967295,A=P+(O<<14&4294967295|O>>>18),O=N+(P^S&(A^P))+E[0]+3921069994&4294967295,N=A+(O<<20&4294967295|O>>>12),O=S+(A^P&(N^A))+E[5]+3593408605&4294967295,S=N+(O<<5&4294967295|O>>>27),O=P+(N^A&(S^N))+E[10]+38016083&4294967295,P=S+(O<<9&4294967295|O>>>23),O=A+(S^N&(P^S))+E[15]+3634488961&4294967295,A=P+(O<<14&4294967295|O>>>18),O=N+(P^S&(A^P))+E[4]+3889429448&4294967295,N=A+(O<<20&4294967295|O>>>12),O=S+(A^P&(N^A))+E[9]+568446438&4294967295,S=N+(O<<5&4294967295|O>>>27),O=P+(N^A&(S^N))+E[14]+3275163606&4294967295,P=S+(O<<9&4294967295|O>>>23),O=A+(S^N&(P^S))+E[3]+4107603335&4294967295,A=P+(O<<14&4294967295|O>>>18),O=N+(P^S&(A^P))+E[8]+1163531501&4294967295,N=A+(O<<20&4294967295|O>>>12),O=S+(A^P&(N^A))+E[13]+2850285829&4294967295,S=N+(O<<5&4294967295|O>>>27),O=P+(N^A&(S^N))+E[2]+4243563512&4294967295,P=S+(O<<9&4294967295|O>>>23),O=A+(S^N&(P^S))+E[7]+1735328473&4294967295,A=P+(O<<14&4294967295|O>>>18),O=N+(P^S&(A^P))+E[12]+2368359562&4294967295,N=A+(O<<20&4294967295|O>>>12),O=S+(N^A^P)+E[5]+4294588738&4294967295,S=N+(O<<4&4294967295|O>>>28),O=P+(S^N^A)+E[8]+2272392833&4294967295,P=S+(O<<11&4294967295|O>>>21),O=A+(P^S^N)+E[11]+1839030562&4294967295,A=P+(O<<16&4294967295|O>>>16),O=N+(A^P^S)+E[14]+4259657740&4294967295,N=A+(O<<23&4294967295|O>>>9),O=S+(N^A^P)+E[1]+2763975236&4294967295,S=N+(O<<4&4294967295|O>>>28),O=P+(S^N^A)+E[4]+1272893353&4294967295,P=S+(O<<11&4294967295|O>>>21),O=A+(P^S^N)+E[7]+4139469664&4294967295,A=P+(O<<16&4294967295|O>>>16),O=N+(A^P^S)+E[10]+3200236656&4294967295,N=A+(O<<23&4294967295|O>>>9),O=S+(N^A^P)+E[13]+681279174&4294967295,S=N+(O<<4&4294967295|O>>>28),O=P+(S^N^A)+E[0]+3936430074&4294967295,P=S+(O<<11&4294967295|O>>>21),O=A+(P^S^N)+E[3]+3572445317&4294967295,A=P+(O<<16&4294967295|O>>>16),O=N+(A^P^S)+E[6]+76029189&4294967295,N=A+(O<<23&4294967295|O>>>9),O=S+(N^A^P)+E[9]+3654602809&4294967295,S=N+(O<<4&4294967295|O>>>28),O=P+(S^N^A)+E[12]+3873151461&4294967295,P=S+(O<<11&4294967295|O>>>21),O=A+(P^S^N)+E[15]+530742520&4294967295,A=P+(O<<16&4294967295|O>>>16),O=N+(A^P^S)+E[2]+3299628645&4294967295,N=A+(O<<23&4294967295|O>>>9),O=S+(A^(N|~P))+E[0]+4096336452&4294967295,S=N+(O<<6&4294967295|O>>>26),O=P+(N^(S|~A))+E[7]+1126891415&4294967295,P=S+(O<<10&4294967295|O>>>22),O=A+(S^(P|~N))+E[14]+2878612391&4294967295,A=P+(O<<15&4294967295|O>>>17),O=N+(P^(A|~S))+E[5]+4237533241&4294967295,N=A+(O<<21&4294967295|O>>>11),O=S+(A^(N|~P))+E[12]+1700485571&4294967295,S=N+(O<<6&4294967295|O>>>26),O=P+(N^(S|~A))+E[3]+2399980690&4294967295,P=S+(O<<10&4294967295|O>>>22),O=A+(S^(P|~N))+E[10]+4293915773&4294967295,A=P+(O<<15&4294967295|O>>>17),O=N+(P^(A|~S))+E[1]+2240044497&4294967295,N=A+(O<<21&4294967295|O>>>11),O=S+(A^(N|~P))+E[8]+1873313359&4294967295,S=N+(O<<6&4294967295|O>>>26),O=P+(N^(S|~A))+E[15]+4264355552&4294967295,P=S+(O<<10&4294967295|O>>>22),O=A+(S^(P|~N))+E[6]+2734768916&4294967295,A=P+(O<<15&4294967295|O>>>17),O=N+(P^(A|~S))+E[13]+1309151649&4294967295,N=A+(O<<21&4294967295|O>>>11),O=S+(A^(N|~P))+E[4]+4149444226&4294967295,S=N+(O<<6&4294967295|O>>>26),O=P+(N^(S|~A))+E[11]+3174756917&4294967295,P=S+(O<<10&4294967295|O>>>22),O=A+(S^(P|~N))+E[2]+718787259&4294967295,A=P+(O<<15&4294967295|O>>>17),O=N+(P^(A|~S))+E[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(A+(O<<21&4294967295|O>>>11))&4294967295,C.g[2]=C.g[2]+A&4294967295,C.g[3]=C.g[3]+P&4294967295}i.prototype.v=function(C,S){S===void 0&&(S=C.length);const N=S-this.blockSize,E=this.C;let A=this.h,P=0;for(;P<S;){if(A==0)for(;P<=N;)a(this,C,P),P+=this.blockSize;if(typeof C=="string"){for(;P<S;)if(E[A++]=C.charCodeAt(P++),A==this.blockSize){a(this,E),A=0;break}}else for(;P<S;)if(E[A++]=C[P++],A==this.blockSize){a(this,E),A=0;break}}this.h=A,this.o+=S},i.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;S=this.o*8;for(var N=C.length-8;N<C.length;++N)C[N]=S&255,S/=256;for(this.v(C),C=Array(16),S=0,N=0;N<4;++N)for(let E=0;E<32;E+=8)C[S++]=this.g[N]>>>E&255;return C};function l(C,S){var N=d;return Object.prototype.hasOwnProperty.call(N,C)?N[C]:N[C]=S(C)}function u(C,S){this.h=S;const N=[];let E=!0;for(let A=C.length-1;A>=0;A--){const P=C[A]|0;E&&P==S||(N[A]=P,E=!1)}this.g=N}var d={};function m(C){return-128<=C&&C<128?l(C,function(S){return new u([S|0],S<0?-1:0)}):new u([C|0],C<0?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return b;if(C<0)return D(p(-C));const S=[];let N=1;for(let E=0;C>=N;E++)S[E]=C/N|0,N*=4294967296;return new u(S,0)}function v(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return D(v(C.substring(1),S));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=p(Math.pow(S,8));let E=b;for(let P=0;P<C.length;P+=8){var A=Math.min(8,C.length-P);const O=parseInt(C.substring(P,P+A),S);A<8?(A=p(Math.pow(S,A)),E=E.j(A).add(p(O))):(E=E.j(N),E=E.add(p(O)))}return E}var b=m(0),w=m(1),R=m(16777216);s=u.prototype,s.m=function(){if(z(this))return-D(this).m();let C=0,S=1;for(let N=0;N<this.g.length;N++){const E=this.i(N);C+=(E>=0?E:4294967296+E)*S,S*=4294967296}return C},s.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(j(this))return"0";if(z(this))return"-"+D(this).toString(C);const S=p(Math.pow(C,6));var N=this;let E="";for(;;){const A=ce(N,S).g;N=M(N,A.j(S));let P=((N.g.length>0?N.g[0]:N.h)>>>0).toString(C);if(N=A,j(N))return P+E;for(;P.length<6;)P="0"+P;E=P+E}},s.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function j(C){if(C.h!=0)return!1;for(let S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function z(C){return C.h==-1}s.l=function(C){return C=M(this,C),z(C)?-1:j(C)?0:1};function D(C){const S=C.g.length,N=[];for(let E=0;E<S;E++)N[E]=~C.g[E];return new u(N,~C.h).add(w)}s.abs=function(){return z(this)?D(this):this},s.add=function(C){const S=Math.max(this.g.length,C.g.length),N=[];let E=0;for(let A=0;A<=S;A++){let P=E+(this.i(A)&65535)+(C.i(A)&65535),O=(P>>>16)+(this.i(A)>>>16)+(C.i(A)>>>16);E=O>>>16,P&=65535,O&=65535,N[A]=O<<16|P}return new u(N,N[N.length-1]&-2147483648?-1:0)};function M(C,S){return C.add(D(S))}s.j=function(C){if(j(this)||j(C))return b;if(z(this))return z(C)?D(this).j(D(C)):D(D(this).j(C));if(z(C))return D(this.j(D(C)));if(this.l(R)<0&&C.l(R)<0)return p(this.m()*C.m());const S=this.g.length+C.g.length,N=[];for(var E=0;E<2*S;E++)N[E]=0;for(E=0;E<this.g.length;E++)for(let A=0;A<C.g.length;A++){const P=this.i(E)>>>16,O=this.i(E)&65535,be=C.i(A)>>>16,_e=C.i(A)&65535;N[2*E+2*A]+=O*_e,$(N,2*E+2*A),N[2*E+2*A+1]+=P*_e,$(N,2*E+2*A+1),N[2*E+2*A+1]+=O*be,$(N,2*E+2*A+1),N[2*E+2*A+2]+=P*be,$(N,2*E+2*A+2)}for(C=0;C<S;C++)N[C]=N[2*C+1]<<16|N[2*C];for(C=S;C<2*S;C++)N[C]=0;return new u(N,0)};function $(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function B(C,S){this.g=C,this.h=S}function ce(C,S){if(j(S))throw Error("division by zero");if(j(C))return new B(b,b);if(z(C))return S=ce(D(C),S),new B(D(S.g),D(S.h));if(z(S))return S=ce(C,D(S)),new B(D(S.g),S.h);if(C.g.length>30){if(z(C)||z(S))throw Error("slowDivide_ only works with positive integers.");for(var N=w,E=S;E.l(C)<=0;)N=X(N),E=X(E);var A=F(N,1),P=F(E,1);for(E=F(E,2),N=F(N,2);!j(E);){var O=P.add(E);O.l(C)<=0&&(A=A.add(N),P=O),E=F(E,1),N=F(N,1)}return S=M(C,A.j(S)),new B(A,S)}for(A=b;C.l(S)>=0;){for(N=Math.max(1,Math.floor(C.m()/S.m())),E=Math.ceil(Math.log(N)/Math.LN2),E=E<=48?1:Math.pow(2,E-48),P=p(N),O=P.j(S);z(O)||O.l(C)>0;)N-=E,P=p(N),O=P.j(S);j(P)&&(P=w),A=A.add(P),C=M(C,O)}return new B(A,C)}s.B=function(C){return ce(this,C).h},s.and=function(C){const S=Math.max(this.g.length,C.g.length),N=[];for(let E=0;E<S;E++)N[E]=this.i(E)&C.i(E);return new u(N,this.h&C.h)},s.or=function(C){const S=Math.max(this.g.length,C.g.length),N=[];for(let E=0;E<S;E++)N[E]=this.i(E)|C.i(E);return new u(N,this.h|C.h)},s.xor=function(C){const S=Math.max(this.g.length,C.g.length),N=[];for(let E=0;E<S;E++)N[E]=this.i(E)^C.i(E);return new u(N,this.h^C.h)};function X(C){const S=C.g.length+1,N=[];for(let E=0;E<S;E++)N[E]=C.i(E)<<1|C.i(E-1)>>>31;return new u(N,C.h)}function F(C,S){const N=S>>5;S%=32;const E=C.g.length-N,A=[];for(let P=0;P<E;P++)A[P]=S>0?C.i(P+N)>>>S|C.i(P+N+1)<<32-S:C.i(P+N);return new u(A,C.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Bx=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=v,oa=u}).apply(typeof Rb<"u"?Rb:typeof self<"u"?self:typeof window<"u"?window:{});var Ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var qx,xc,Hx,Xh,Jg,Fx,Gx,$x;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ph=="object"&&Ph];for(var _=0;_<h.length;++_){var T=h[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=t(this);function a(h,_){if(_)e:{var T=i;h=h.split(".");for(var k=0;k<h.length-1;k++){var ee=h[k];if(!(ee in T))break e;T=T[ee]}h=h[h.length-1],k=T[h],_=_(k),_!=k&&_!=null&&e(T,h,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(_){var T=[],k;for(k in _)Object.prototype.hasOwnProperty.call(_,k)&&T.push([k,_[k]]);return T}});var l=l||{},u=this||self;function d(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function m(h,_,T){return h.call.apply(h.bind,arguments)}function p(h,_,T){return p=m,p.apply(null,arguments)}function v(h,_){var T=Array.prototype.slice.call(arguments,1);return function(){var k=T.slice();return k.push.apply(k,arguments),h.apply(this,k)}}function b(h,_){function T(){}T.prototype=_.prototype,h.Z=_.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(k,ee,oe){for(var Ee=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)Ee[Xe-2]=arguments[Xe];return _.prototype[ee].apply(k,Ee)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function R(h){const _=h.length;if(_>0){const T=Array(_);for(let k=0;k<_;k++)T[k]=h[k];return T}return[]}function j(h,_){for(let k=1;k<arguments.length;k++){const ee=arguments[k];var T=typeof ee;if(T=T!="object"?T:ee?Array.isArray(ee)?"array":T:"null",T=="array"||T=="object"&&typeof ee.length=="number"){T=h.length||0;const oe=ee.length||0;h.length=T+oe;for(let Ee=0;Ee<oe;Ee++)h[T+Ee]=ee[Ee]}else h.push(ee)}}class z{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function D(h){u.setTimeout(()=>{throw h},0)}function M(){var h=C;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class ${constructor(){this.h=this.g=null}add(_,T){const k=B.get();k.set(_,T),this.h?this.h.next=k:this.g=k,this.h=k}}var B=new z(()=>new ce,h=>h.reset());class ce{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let X,F=!1,C=new $,S=()=>{const h=Promise.resolve(void 0);X=()=>{h.then(N)}};function N(){for(var h;h=M();){try{h.h.call(h.g)}catch(T){D(T)}var _=B;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}F=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};u.addEventListener("test",T,_),u.removeEventListener("test",T,_)}catch{}return h})();function O(h){return/^[\s\xa0]*$/.test(h)}function be(h,_){A.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}b(be,A),be.prototype.init=function(h,_){const T=this.type=h.type,k=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(T=="mouseover"?_=h.fromElement:T=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&be.Z.h.call(this)},be.prototype.h=function(){be.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var _e="closure_listenable_"+(Math.random()*1e6|0),H=0;function Y(h,_,T,k,ee){this.listener=h,this.proxy=null,this.src=_,this.type=T,this.capture=!!k,this.ha=ee,this.key=++H,this.da=this.fa=!1}function J(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function pe(h,_,T){for(const k in h)_.call(T,h[k],k,h)}function ve(h,_){for(const T in h)_.call(void 0,h[T],T,h)}function L(h){const _={};for(const T in h)_[T]=h[T];return _}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G(h,_){let T,k;for(let ee=1;ee<arguments.length;ee++){k=arguments[ee];for(T in k)h[T]=k[T];for(let oe=0;oe<Z.length;oe++)T=Z[oe],Object.prototype.hasOwnProperty.call(k,T)&&(h[T]=k[T])}}function K(h){this.src=h,this.g={},this.h=0}K.prototype.add=function(h,_,T,k,ee){const oe=h.toString();h=this.g[oe],h||(h=this.g[oe]=[],this.h++);const Ee=ye(h,_,k,ee);return Ee>-1?(_=h[Ee],T||(_.fa=!1)):(_=new Y(_,this.src,oe,!!k,ee),_.fa=T,h.push(_)),_};function ue(h,_){const T=_.type;if(T in h.g){var k=h.g[T],ee=Array.prototype.indexOf.call(k,_,void 0),oe;(oe=ee>=0)&&Array.prototype.splice.call(k,ee,1),oe&&(J(_),h.g[T].length==0&&(delete h.g[T],h.h--))}}function ye(h,_,T,k){for(let ee=0;ee<h.length;++ee){const oe=h[ee];if(!oe.da&&oe.listener==_&&oe.capture==!!T&&oe.ha==k)return ee}return-1}var we="closure_lm_"+(Math.random()*1e6|0),Ie={};function Se(h,_,T,k,ee){if(Array.isArray(_)){for(let oe=0;oe<_.length;oe++)Se(h,_[oe],T,k,ee);return null}return T=yt(T),h&&h[_e]?h.J(_,T,d(k)?!!k.capture:!1,ee):Ue(h,_,T,!1,k,ee)}function Ue(h,_,T,k,ee,oe){if(!_)throw Error("Invalid event type");const Ee=d(ee)?!!ee.capture:!!ee;let Xe=st(h);if(Xe||(h[we]=Xe=new K(h)),T=Xe.add(_,T,k,Ee,oe),T.proxy)return T;if(k=pt(),T.proxy=k,k.src=h,k.listener=T,h.addEventListener)P||(ee=Ee),ee===void 0&&(ee=!1),h.addEventListener(_.toString(),k,ee);else if(h.attachEvent)h.attachEvent(Ce(_.toString()),k);else if(h.addListener&&h.removeListener)h.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return T}function pt(){function h(T){return _.call(h.src,h.listener,T)}const _=je;return h}function nt(h,_,T,k,ee){if(Array.isArray(_))for(var oe=0;oe<_.length;oe++)nt(h,_[oe],T,k,ee);else k=d(k)?!!k.capture:!!k,T=yt(T),h&&h[_e]?(h=h.i,oe=String(_).toString(),oe in h.g&&(_=h.g[oe],T=ye(_,T,k,ee),T>-1&&(J(_[T]),Array.prototype.splice.call(_,T,1),_.length==0&&(delete h.g[oe],h.h--)))):h&&(h=st(h))&&(_=h.g[_.toString()],h=-1,_&&(h=ye(_,T,k,ee)),(T=h>-1?_[h]:null)&&Ze(T))}function Ze(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[_e])ue(_.i,h);else{var T=h.type,k=h.proxy;_.removeEventListener?_.removeEventListener(T,k,h.capture):_.detachEvent?_.detachEvent(Ce(T),k):_.addListener&&_.removeListener&&_.removeListener(k),(T=st(_))?(ue(T,h),T.h==0&&(T.src=null,_[we]=null)):J(h)}}}function Ce(h){return h in Ie?Ie[h]:Ie[h]="on"+h}function je(h,_){if(h.da)h=!0;else{_=new be(_,this);const T=h.listener,k=h.ha||h.src;h.fa&&Ze(h),h=T.call(k,_)}return h}function st(h){return h=h[we],h instanceof K?h:null}var Fe="__closure_events_fn_"+(Math.random()*1e9>>>0);function yt(h){return typeof h=="function"?h:(h[Fe]||(h[Fe]=function(_){return h.handleEvent(_)}),h[Fe])}function $e(){E.call(this),this.i=new K(this),this.M=this,this.G=null}b($e,E),$e.prototype[_e]=!0,$e.prototype.removeEventListener=function(h,_,T,k){nt(this,h,_,T,k)};function ot(h,_){var T,k=h.G;if(k)for(T=[];k;k=k.G)T.push(k);if(h=h.M,k=_.type||_,typeof _=="string")_=new A(_,h);else if(_ instanceof A)_.target=_.target||h;else{var ee=_;_=new A(k,h),G(_,ee)}ee=!0;let oe,Ee;if(T)for(Ee=T.length-1;Ee>=0;Ee--)oe=_.g=T[Ee],ee=Kt(oe,k,!0,_)&&ee;if(oe=_.g=h,ee=Kt(oe,k,!0,_)&&ee,ee=Kt(oe,k,!1,_)&&ee,T)for(Ee=0;Ee<T.length;Ee++)oe=_.g=T[Ee],ee=Kt(oe,k,!1,_)&&ee}$e.prototype.N=function(){if($e.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const T=h.g[_];for(let k=0;k<T.length;k++)J(T[k]);delete h.g[_],h.h--}}this.G=null},$e.prototype.J=function(h,_,T,k){return this.i.add(String(h),_,!1,T,k)},$e.prototype.K=function(h,_,T,k){return this.i.add(String(h),_,!0,T,k)};function Kt(h,_,T,k){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let ee=!0;for(let oe=0;oe<_.length;++oe){const Ee=_[oe];if(Ee&&!Ee.da&&Ee.capture==T){const Xe=Ee.listener,on=Ee.ha||Ee.src;Ee.fa&&ue(h.i,Ee),ee=Xe.call(on,k)!==!1&&ee}}return ee&&!k.defaultPrevented}function Wt(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:u.setTimeout(h,_||0)}function Nn(h){h.g=Wt(()=>{h.g=null,h.i&&(h.i=!1,Nn(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class fn extends E{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Nn(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ys(h){E.call(this),this.h=h,this.g={}}b(Ys,E);var Ir=[];function es(h){pe(h.g,function(_,T){this.g.hasOwnProperty(T)&&Ze(_)},h),h.g={}}Ys.prototype.N=function(){Ys.Z.N.call(this),es(this)},Ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ln=u.JSON.stringify,Qs=u.JSON.parse,kr=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function ts(){}function Dr(){}var ns={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function sn(){A.call(this,"d")}b(sn,A);function In(){A.call(this,"c")}b(In,A);var Lt={},Or=null;function Xs(){return Or=Or||new $e}Lt.Ia="serverreachability";function fi(h){A.call(this,Lt.Ia,h)}b(fi,A);function cs(h){const _=Xs();ot(_,new fi(_))}Lt.STAT_EVENT="statevent";function Ws(h,_){A.call(this,Lt.STAT_EVENT,h),this.stat=_}b(Ws,A);function tt(h){const _=Xs();ot(_,new Ws(_,h))}Lt.Ja="timingevent";function Ut(h,_){A.call(this,Lt.Ja,h),this.size=_}b(Ut,A);function zt(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},_)}function Jt(){this.g=!0}Jt.prototype.ua=function(){this.g=!1};function kn(h,_,T,k,ee,oe){h.info(function(){if(h.g)if(oe){var Ee="",Xe=oe.split("&");for(let Tt=0;Tt<Xe.length;Tt++){var on=Xe[Tt].split("=");if(on.length>1){const Gt=on[0];on=on[1];const Ls=Gt.split("_");Ee=Ls.length>=2&&Ls[1]=="type"?Ee+(Gt+"="+on+"&"):Ee+(Gt+"=redacted&")}}}else Ee=null;else Ee=oe;return"XMLHTTP REQ ("+k+") [attempt "+ee+"]: "+_+`
`+T+`
`+Ee})}function dn(h,_,T,k,ee,oe,Ee){h.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+ee+"]: "+_+`
`+T+`
`+oe+" "+Ee})}function Yt(h,_,T,k){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Nt(h,T)+(k?" "+k:"")})}function ie(h,_){h.info(function(){return"TIMEOUT: "+_})}Jt.prototype.info=function(){};function Nt(h,_){if(!h.g)return _;if(!_)return null;try{const oe=JSON.parse(_);if(oe){for(h=0;h<oe.length;h++)if(Array.isArray(oe[h])){var T=oe[h];if(!(T.length<2)){var k=T[1];if(Array.isArray(k)&&!(k.length<1)){var ee=k[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(let Ee=1;Ee<k.length;Ee++)k[Ee]=""}}}}return Ln(oe)}catch{return _}}var It={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},rn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xe;function Tn(){}b(Tn,ts),Tn.prototype.g=function(){return new XMLHttpRequest},xe=new Tn;function vt(h){return encodeURIComponent(String(h))}function Ft(h){var _=1;h=h.split(":");const T=[];for(;_>0&&h.length;)T.push(h.shift()),_--;return h.length&&T.push(h.join(":")),T}function En(h,_,T,k){this.j=h,this.i=_,this.l=T,this.S=k||1,this.V=new Ys(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new kt}function kt(){this.i=null,this.g="",this.h=!1}var Qt={},an={};function ke(h,_,T){h.M=1,h.A=js(se(_)),h.u=T,h.R=!0,di(h,null)}function di(h,_){h.F=Date.now(),ks(h),h.B=se(h.A);var T=h.B,k=h.S;Array.isArray(k)||(k=[String(k)]),ho(T.i,"t",k),h.C=0,T=h.j.L,h.h=new kt,h.g=Iu(h.j,T?_:null,!h.u),h.P>0&&(h.O=new fn(p(h.Y,h,h.g),h.P)),_=h.V,T=h.g,k=h.ba;var ee="readystatechange";Array.isArray(ee)||(ee&&(Ir[0]=ee.toString()),ee=Ir);for(let oe=0;oe<ee.length;oe++){const Ee=Se(T,ee[oe],k||_.handleEvent,!1,_.h||_);if(!Ee)break;_.g[Ee.key]=Ee}_=h.J?L(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),cs(),kn(h.i,h.v,h.B,h.l,h.S,h.u)}En.prototype.ba=function(h){h=h.target;const _=this.O;_&&er(h)==3?_.j():this.Y(h)},En.prototype.Y=function(h){try{if(h==this.g)e:{const Xe=er(this.g),on=this.g.ya(),Tt=this.g.ca();if(!(Xe<3)&&(Xe!=3||this.g&&(this.h.h||this.g.la()||Un(this.g)))){this.K||Xe!=4||on==7||(on==8||Tt<=0?cs(3):cs(2)),Ds(this);var _=this.g.ca();this.X=_;var T=lo(this);if(this.o=_==200,dn(this.i,this.v,this.B,this.l,this.S,Xe,_),this.o){if(this.U&&!this.L){t:{if(this.g){var k,ee=this.g;if((k=ee.g?ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(k)){var oe=k;break t}}oe=null}if(h=oe)Yt(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Os(this,h);else{this.o=!1,this.m=3,tt(12),Yn(this),ss(this);break e}}if(this.R){h=!0;let Gt;for(;!this.K&&this.C<T.length;)if(Gt=wa(this,T),Gt==an){Xe==4&&(this.m=4,tt(14),h=!1),Yt(this.i,this.l,null,"[Incomplete Response]");break}else if(Gt==Qt){this.m=4,tt(15),Yt(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else Yt(this.i,this.l,Gt,null),Os(this,Gt);if(co(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||T.length!=0||this.h.h||(this.m=1,tt(16),h=!1),this.o=this.o&&h,!h)Yt(this.i,this.l,T,"[Invalid Chunked Response]"),Yn(this),ss(this);else if(T.length>0&&!this.W){this.W=!0;var Ee=this.j;Ee.g==this&&Ee.aa&&!Ee.P&&(Ee.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),jl(Ee),Ee.P=!0,tt(11))}}else Yt(this.i,this.l,T,null),Os(this,T);Xe==4&&Yn(this),this.o&&!this.K&&(Xe==4?Au(this.j,this):(this.o=!1,ks(this)))}else jr(this.g),_==400&&T.indexOf("Unknown SID")>0?(this.m=3,tt(12)):(this.m=0,tt(13)),Yn(this),ss(this)}}}catch{}};function lo(h){if(!co(h))return h.g.la();const _=Un(h.g);if(_==="")return"";let T="";const k=_.length,ee=er(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Yn(h),ss(h),"";h.h.i=new u.TextDecoder}for(let oe=0;oe<k;oe++)h.h.h=!0,T+=h.h.i.decode(_[oe],{stream:!(ee&&oe==k-1)});return _.length=0,h.h.g+=T,h.C=0,h.h.g}function co(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function wa(h,_){var T=h.C,k=_.indexOf(`
`,T);return k==-1?an:(T=Number(_.substring(T,k)),isNaN(T)?Qt:(k+=1,k+T>_.length?an:(_=_.slice(k,k+T),h.C=k+T,_)))}En.prototype.cancel=function(){this.K=!0,Yn(this)};function ks(h){h.T=Date.now()+h.H,mi(h,h.H)}function mi(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=zt(p(h.aa,h),_)}function Ds(h){h.D&&(u.clearTimeout(h.D),h.D=null)}En.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(ie(this.i,this.B),this.M!=2&&(cs(),tt(17)),Yn(this),this.m=2,ss(this)):mi(this,this.T-h)};function ss(h){h.j.I==0||h.K||Au(h.j,h)}function Yn(h){Ds(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,es(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function Os(h,_){try{var T=h.j;if(T.I!=0&&(T.g==h||Ms(T.h,h))){if(!h.L&&Ms(T.h,h)&&T.I==3){try{var k=T.Ba.g.parse(_)}catch{k=null}if(Array.isArray(k)&&k.length==3){var ee=k;if(ee[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)yo(T),Ti(T);else break e;Da(T),tt(18)}}else T.xa=ee[1],0<T.xa-T.K&&ee[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=zt(p(T.Va,T),6e3));us(T.h)<=1&&T.ta&&(T.ta=void 0)}else yr(T,11)}else if((h.L||T.g==h)&&yo(T),!O(_))for(ee=T.Ba.g.parse(_),_=0;_<ee.length;_++){let Tt=ee[_];const Gt=Tt[0];if(!(Gt<=T.K))if(T.K=Gt,Tt=Tt[1],T.I==2)if(Tt[0]=="c"){T.M=Tt[1],T.ba=Tt[2];const Ls=Tt[3];Ls!=null&&(T.ka=Ls,T.j.info("VER="+T.ka));const vr=Tt[4];vr!=null&&(T.za=vr,T.j.info("SVER="+T.za));const tr=Tt[5];tr!=null&&typeof tr=="number"&&tr>0&&(k=1.5*tr,T.O=k,T.j.info("backChannelRequestTimeoutMs_="+k)),k=T;const nr=h.g;if(nr){const Oa=nr.g?nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oa){var oe=k.h;oe.g||Oa.indexOf("spdy")==-1&&Oa.indexOf("quic")==-1&&Oa.indexOf("h2")==-1||(oe.j=oe.l,oe.g=new Set,oe.h&&(Ea(oe,oe.h),oe.h=null))}if(k.G){const vo=nr.g?nr.g.getResponseHeader("X-HTTP-Session-Id"):null;vo&&(k.wa=vo,rt(k.J,k.G,vo))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),k=T;var Ee=h;if(k.na=Nu(k,k.L?k.ba:null,k.W),Ee.L){pi(k.h,Ee);var Xe=Ee,on=k.O;on&&(Xe.H=on),Xe.D&&(Ds(Xe),ks(Xe)),k.g=Ee}else Eu(k);T.i.length>0&&pr(T)}else Tt[0]!="stop"&&Tt[0]!="close"||yr(T,7);else T.I==3&&(Tt[0]=="stop"||Tt[0]=="close"?Tt[0]=="stop"?yr(T,7):Ol(T):Tt[0]!="noop"&&T.l&&T.l.qa(Tt),T.A=0)}}cs(4)}catch{}}var Zt=class{constructor(h,_){this.g=h,this.map=_}};function Ta(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function gi(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function us(h){return h.h?1:h.g?h.g.size:0}function Ms(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Ea(h,_){h.g?h.g.add(_):h.h=_}function pi(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Ta.prototype.cancel=function(){if(this.i=Sa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Sa(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const T of h.g.values())_=_.concat(T.G);return _}return R(h.i)}var mn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function W(h,_){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const k=h[T].indexOf("=");let ee,oe=null;k>=0?(ee=h[T].substring(0,k),oe=h[T].substring(k+1)):ee=h[T],_(ee,oe?decodeURIComponent(oe.replace(/\+/g," ")):"")}}}function ae(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof ae?(this.l=h.l,Re(this,h.j),this.o=h.o,this.g=h.g,Me(this,h.u),this.h=h.h,dt(this,wu(h.i)),this.m=h.m):h&&(_=String(h).match(mn))?(this.l=!1,Re(this,_[1]||"",!0),this.o=fr(_[2]||""),this.g=fr(_[3]||"",!0),Me(this,_[4]),this.h=fr(_[5]||"",!0),dt(this,_[6]||"",!0),this.m=fr(_[7]||"")):(this.l=!1,this.i=new vi(null,this.l))}ae.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(Aa(_,uo,!0),":");var T=this.g;return(T||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Aa(_,uo,!0),"@"),h.push(vt(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Aa(T,T.charAt(0)=="/"?Rl:_u,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Aa(T,bu)),h.join("")},ae.prototype.resolve=function(h){const _=se(this);let T=!!h.j;T?Re(_,h.j):T=!!h.o,T?_.o=h.o:T=!!h.g,T?_.g=h.g:T=h.u!=null;var k=h.h;if(T)Me(_,h.u);else if(T=!!h.h){if(k.charAt(0)!="/")if(this.g&&!this.h)k="/"+k;else{var ee=_.h.lastIndexOf("/");ee!=-1&&(k=_.h.slice(0,ee+1)+k)}if(ee=k,ee==".."||ee==".")k="";else if(ee.indexOf("./")!=-1||ee.indexOf("/.")!=-1){k=ee.lastIndexOf("/",0)==0,ee=ee.split("/");const oe=[];for(let Ee=0;Ee<ee.length;){const Xe=ee[Ee++];Xe=="."?k&&Ee==ee.length&&oe.push(""):Xe==".."?((oe.length>1||oe.length==1&&oe[0]!="")&&oe.pop(),k&&Ee==ee.length&&oe.push("")):(oe.push(Xe),k=!0)}k=oe.join("/")}else k=ee}return T?_.h=k:T=h.i.toString()!=="",T?dt(_,wu(h.i)):T=!!h.m,T&&(_.m=h.m),_};function se(h){return new ae(h)}function Re(h,_,T){h.j=T?fr(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Me(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function dt(h,_,T){_ instanceof vi?(h.i=_,fo(h.i,h.l)):(T||(_=Aa(_,yi)),h.i=new vi(_,h.l))}function rt(h,_,T){h.i.set(_,T)}function js(h){return rt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function fr(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Aa(h,_,T){return typeof h=="string"?(h=encodeURI(h).replace(_,hs),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function hs(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var uo=/[#\/\?@]/g,_u=/[#\?:]/g,Rl=/[#\?]/g,yi=/[#\?@]/g,bu=/#/g;function vi(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function fs(h){h.g||(h.g=new Map,h.h=0,h.i&&W(h.i,function(_,T){h.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}s=vi.prototype,s.add=function(h,_){fs(this),this.i=null,h=_i(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(_),this.h+=1,this};function xu(h,_){fs(h),_=_i(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Cl(h,_){return fs(h),_=_i(h,_),h.g.has(_)}s.forEach=function(h,_){fs(this),this.g.forEach(function(T,k){T.forEach(function(ee){h.call(_,ee,k,this)},this)},this)};function Nl(h,_){fs(h);let T=[];if(typeof _=="string")Cl(h,_)&&(T=T.concat(h.g.get(_i(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)T=T.concat(h[_]);return T}s.set=function(h,_){return fs(this),this.i=null,h=_i(this,h),Cl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},s.get=function(h,_){return h?(h=Nl(this,h),h.length>0?String(h[0]):_):_};function ho(h,_,T){xu(h,_),T.length>0&&(h.i=null,h.g.set(_i(h,_),R(T)),h.h+=T.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let k=0;k<_.length;k++){var T=_[k];const ee=vt(T);T=Nl(this,T);for(let oe=0;oe<T.length;oe++){let Ee=ee;T[oe]!==""&&(Ee+="="+vt(T[oe])),h.push(Ee)}}return this.i=h.join("&")};function wu(h){const _=new vi;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function _i(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function fo(h,_){_&&!h.j&&(fs(h),h.i=null,h.g.forEach(function(T,k){const ee=k.toLowerCase();k!=ee&&(xu(this,k),ho(this,ee,T))},h)),h.j=_}function Js(h,_){const T=new Jt;if(u.Image){const k=new Image;k.onload=v(Vs,T,"TestLoadImage: loaded",!0,_,k),k.onerror=v(Vs,T,"TestLoadImage: error",!1,_,k),k.onabort=v(Vs,T,"TestLoadImage: abort",!1,_,k),k.ontimeout=v(Vs,T,"TestLoadImage: timeout",!1,_,k),u.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=h}else _(!1)}function Il(h,_){const T=new Jt,k=new AbortController,ee=setTimeout(()=>{k.abort(),Vs(T,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:k.signal}).then(oe=>{clearTimeout(ee),oe.ok?Vs(T,"TestPingServer: ok",!0,_):Vs(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(ee),Vs(T,"TestPingServer: error",!1,_)})}function Vs(h,_,T,k,ee){try{ee&&(ee.onload=null,ee.onerror=null,ee.onabort=null,ee.ontimeout=null),k(T)}catch{}}function bi(){this.g=new kr}function dr(h){this.i=h.Sb||null,this.h=h.ab||!1}b(dr,ts),dr.prototype.g=function(){return new Ra(this.i,this.h)};function Ra(h,_){$e.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Ra,$e),s=Ra.prototype,s.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,Zs(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||u).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,xi(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Zs(this)),this.g&&(this.readyState=3,Zs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;mo(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function mo(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?xi(this):Zs(this),this.readyState==3&&mo(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,xi(this))},s.Na=function(h){this.g&&(this.response=h,xi(this))},s.ga=function(){this.g&&xi(this)};function xi(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Zs(h)}s.setRequestHeader=function(h,_){this.A.append(h,_)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=_.next();return h.join(`\r
`)};function Zs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ra.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ps(h){let _="";return pe(h,function(T,k){_+=k,_+=":",_+=T,_+=`\r
`}),_}function Ca(h,_,T){e:{for(k in T){var k=!1;break e}k=!0}k||(T=Ps(T),typeof h=="string"?T!=null&&vt(T):rt(h,_,T))}function Dt(h){$e.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(Dt,$e);var mr=/^https?$/i,kl=["POST","PUT"];s=Dt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,_,T,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xe.g(),this.g.onreadystatechange=w(p(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(oe){Na(this,oe);return}if(h=T||"",T=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var ee in k)T.set(ee,k[ee]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const oe of k.keys())T.set(oe,k.get(oe));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(T.keys()).find(oe=>oe.toLowerCase()=="content-type"),ee=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(kl,_,void 0)>=0)||k||ee||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,Ee]of T)this.g.setRequestHeader(oe,Ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(oe){Na(this,oe)}};function Na(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,Dl(h),Mr(h)}function Dl(h){h.A||(h.A=!0,ot(h,"complete"),ot(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,ot(this,"complete"),ot(this,"abort"),Mr(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mr(this,!0)),Dt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ia(this):this.Xa())},s.Xa=function(){Ia(this)};function Ia(h){if(h.h&&typeof l<"u"){if(h.v&&er(h)==4)setTimeout(h.Ca.bind(h),0);else if(ot(h,"readystatechange"),er(h)==4){h.h=!1;try{const oe=h.ca();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var T;if(!(T=_)){var k;if(k=oe===0){let Ee=String(h.D).match(mn)[1]||null;!Ee&&u.self&&u.self.location&&(Ee=u.self.location.protocol.slice(0,-1)),k=!mr.test(Ee?Ee.toLowerCase():"")}T=k}if(T)ot(h,"complete"),ot(h,"success");else{h.o=6;try{var ee=er(h)>2?h.g.statusText:""}catch{ee=""}h.l=ee+" ["+h.ca()+"]",Dl(h)}}finally{Mr(h)}}}}function Mr(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,_||ot(h,"ready");try{T.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function er(h){return h.g?h.g.readyState:0}s.ca=function(){try{return er(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Qs(_)}};function Un(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function jr(h){const _={};h=(h.g&&er(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<h.length;k++){if(O(h[k]))continue;var T=Ft(h[k]);const ee=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const oe=_[ee]||[];_[ee]=oe,oe.push(T)}ve(_,function(k){return k.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function gr(h,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||_}function wi(h){this.za=0,this.i=[],this.j=new Jt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=gr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=gr("baseRetryDelayMs",5e3,h),this.Za=gr("retryDelaySeedMs",1e4,h),this.Ta=gr("forwardChannelMaxRetries",2,h),this.va=gr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Ta(h&&h.concurrentRequestLimit),this.Ba=new bi,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=wi.prototype,s.ka=8,s.I=1,s.connect=function(h,_,T,k){tt(0),this.W=h,this.H=_||{},T&&k!==void 0&&(this.H.OSID=T,this.H.OAID=k),this.F=this.X,this.J=Nu(this,null,this.W),pr(this)};function Ol(h){if(go(h),h.I==3){var _=h.V++,T=se(h.J);if(rt(T,"SID",h.M),rt(T,"RID",_),rt(T,"TYPE","terminate"),ka(h,T),_=new En(h,h.j,_),_.M=2,_.A=js(se(T)),T=!1,u.navigator&&u.navigator.sendBeacon)try{T=u.navigator.sendBeacon(_.A.toString(),"")}catch{}!T&&u.Image&&(new Image().src=_.A,T=!0),T||(_.g=Iu(_.j,null),_.g.ea(_.A)),_.F=Date.now(),ks(_)}Cu(h)}function Ti(h){h.g&&(jl(h),h.g.cancel(),h.g=null)}function go(h){Ti(h),h.v&&(u.clearTimeout(h.v),h.v=null),yo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function pr(h){if(!gi(h.h)&&!h.m){h.m=!0;var _=h.Ea;X||S(),F||(X(),F=!0),C.add(_,h),h.D=0}}function po(h,_){return us(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=zt(p(h.Ea,h,_),Ru(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const ee=new En(this,this.j,h);let oe=this.o;if(this.U&&(oe?(oe=L(oe),G(oe,this.U)):oe=this.U),this.u!==null||this.R||(ee.J=oe,oe=null),this.S)e:{for(var _=0,T=0;T<this.i.length;T++){t:{var k=this.i[T];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(_+=k,_>4096){_=T;break e}if(_===4096||T===this.i.length-1){_=T+1;break e}}_=1e3}else _=1e3;_=Tu(this,ee,_),T=se(this.J),rt(T,"RID",h),rt(T,"CVER",22),this.G&&rt(T,"X-HTTP-Session-Id",this.G),ka(this,T),oe&&(this.R?_="headers="+vt(Ps(oe))+"&"+_:this.u&&Ca(T,this.u,oe)),Ea(this.h,ee),this.Ra&&rt(T,"TYPE","init"),this.S?(rt(T,"$req",_),rt(T,"SID","null"),ee.U=!0,ke(ee,T,null)):ke(ee,T,_),this.I=2}}else this.I==3&&(h?Ml(this,h):this.i.length==0||gi(this.h)||Ml(this))};function Ml(h,_){var T;_?T=_.l:T=h.V++;const k=se(h.J);rt(k,"SID",h.M),rt(k,"RID",T),rt(k,"AID",h.K),ka(h,k),h.u&&h.o&&Ca(k,h.u,h.o),T=new En(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),_&&(h.i=_.G.concat(h.i)),_=Tu(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ea(h.h,T),ke(T,k,_)}function ka(h,_){h.H&&pe(h.H,function(T,k){rt(_,k,T)}),h.l&&pe({},function(T,k){rt(_,k,T)})}function Tu(h,_,T){T=Math.min(h.i.length,T);const k=h.l?p(h.l.Ka,h.l,h):null;e:{var ee=h.i;let Xe=-1;for(;;){const on=["count="+T];Xe==-1?T>0?(Xe=ee[0].g,on.push("ofs="+Xe)):Xe=0:on.push("ofs="+Xe);let Tt=!0;for(let Gt=0;Gt<T;Gt++){var oe=ee[Gt].g;const Ls=ee[Gt].map;if(oe-=Xe,oe<0)Xe=Math.max(0,ee[Gt].g-100),Tt=!1;else try{oe="req"+oe+"_"||"";try{var Ee=Ls instanceof Map?Ls:Object.entries(Ls);for(const[vr,tr]of Ee){let nr=tr;d(tr)&&(nr=Ln(tr)),on.push(oe+vr+"="+encodeURIComponent(nr))}}catch(vr){throw on.push(oe+"type="+encodeURIComponent("_badmap")),vr}}catch{k&&k(Ls)}}if(Tt){Ee=on.join("&");break e}}Ee=void 0}return h=h.i.splice(0,T),_.G=h,Ee}function Eu(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;X||S(),F||(X(),F=!0),C.add(_,h),h.A=0}}function Da(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=zt(p(h.Da,h),Ru(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Su(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=zt(p(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,tt(10),Ti(this),Su(this))};function jl(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function Su(h){h.g=new En(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=se(h.na);rt(_,"RID","rpc"),rt(_,"SID",h.M),rt(_,"AID",h.K),rt(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&rt(_,"TO",h.ia),rt(_,"TYPE","xmlhttp"),ka(h,_),h.u&&h.o&&Ca(_,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=js(se(_)),T.u=null,T.R=!0,di(T,h)}s.Va=function(){this.C!=null&&(this.C=null,Ti(this),Da(this),tt(19))};function yo(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function Au(h,_){var T=null;if(h.g==_){yo(h),jl(h),h.g=null;var k=2}else if(Ms(h.h,_))T=_.G,pi(h.h,_),k=1;else return;if(h.I!=0){if(_.o)if(k==1){T=_.u?_.u.length:0,_=Date.now()-_.F;var ee=h.D;k=Xs(),ot(k,new Ut(k,T)),pr(h)}else Eu(h);else if(ee=_.m,ee==3||ee==0&&_.X>0||!(k==1&&po(h,_)||k==2&&Da(h)))switch(T&&T.length>0&&(_=h.h,_.i=_.i.concat(T)),ee){case 1:yr(h,5);break;case 4:yr(h,10);break;case 3:yr(h,6);break;default:yr(h,2)}}}function Ru(h,_){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*_}function yr(h,_){if(h.j.info("Error code "+_),_==2){var T=p(h.bb,h),k=h.Ua;const ee=!k;k=new ae(k||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Re(k,"https"),js(k),ee?Js(k.toString(),T):Il(k.toString(),T)}else tt(2);h.I=0,h.l&&h.l.pa(_),Cu(h),go(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),tt(2)):(this.j.info("Failed to ping google.com"),tt(1))};function Cu(h){if(h.I=0,h.ja=[],h.l){const _=Sa(h.h);(_.length!=0||h.i.length!=0)&&(j(h.ja,_),j(h.ja,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.oa()}}function Nu(h,_,T){var k=T instanceof ae?se(T):new ae(T);if(k.g!="")_&&(k.g=_+"."+k.g),Me(k,k.u);else{var ee=u.location;k=ee.protocol,_=_?_+"."+ee.hostname:ee.hostname,ee=+ee.port;const oe=new ae(null);k&&Re(oe,k),_&&(oe.g=_),ee&&Me(oe,ee),T&&(oe.h=T),k=oe}return T=h.G,_=h.wa,T&&_&&rt(k,T,_),rt(k,"VER",h.ka),ka(h,k),k}function Iu(h,_,T){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new Dt(new dr({ab:T})):new Dt(h.ma),_.Fa(h.L),_}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function ku(){}s=ku.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ei(){}Ei.prototype.g=function(h,_){return new rs(h,_)};function rs(h,_){$e.call(this),this.g=new wi(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!O(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!O(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Vr(this)}b(rs,$e),rs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},rs.prototype.close=function(){Ol(this.g)},rs.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=Ln(h),h=T);_.i.push(new Zt(_.Ya++,h)),_.I==3&&pr(_)},rs.prototype.N=function(){this.g.l=null,delete this.j,Ol(this.g),delete this.g,rs.Z.N.call(this)};function Du(h){sn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const T in _){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}b(Du,sn);function Ou(){In.call(this),this.status=1}b(Ou,In);function Vr(h){this.g=h}b(Vr,ku),Vr.prototype.ra=function(){ot(this.g,"a")},Vr.prototype.qa=function(h){ot(this.g,new Du(h))},Vr.prototype.pa=function(h){ot(this.g,new Ou)},Vr.prototype.oa=function(){ot(this.g,"b")},Ei.prototype.createWebChannel=Ei.prototype.g,rs.prototype.send=rs.prototype.o,rs.prototype.open=rs.prototype.m,rs.prototype.close=rs.prototype.close,$x=function(){return new Ei},Gx=function(){return Xs()},Fx=Lt,Jg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},It.NO_ERROR=0,It.TIMEOUT=8,It.HTTP_ERROR=6,Xh=It,rn.COMPLETE="complete",Hx=rn,Dr.EventType=ns,ns.OPEN="a",ns.CLOSE="b",ns.ERROR="c",ns.MESSAGE="d",$e.prototype.listen=$e.prototype.J,xc=Dr,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,qx=Dt}).apply(typeof Ph<"u"?Ph:typeof self<"u"?self:typeof window<"u"?window:{});const Cb="@firebase/firestore",Nb="4.9.3";class Jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jn.UNAUTHENTICATED=new Jn(null),Jn.GOOGLE_CREDENTIALS=new Jn("google-credentials-uid"),Jn.FIRST_PARTY=new Jn("first-party-uid"),Jn.MOCK_USER=new Jn("mock-user");let _l="12.7.0";const to=new Np("@firebase/firestore");function Yo(){return to.logLevel}function Ne(s,...e){if(to.logLevel<=ut.DEBUG){const t=e.map(Dp);to.debug(`Firestore (${_l}): ${s}`,...t)}}function ii(s,...e){if(to.logLevel<=ut.ERROR){const t=e.map(Dp);to.error(`Firestore (${_l}): ${s}`,...t)}}function ll(s,...e){if(to.logLevel<=ut.WARN){const t=e.map(Dp);to.warn(`Firestore (${_l}): ${s}`,...t)}}function Dp(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function Le(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Kx(s,i,t)}function Kx(s,e,t){let i=`FIRESTORE (${_l}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ii(i),new Error(i)}function bt(s,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,s||Kx(e,a,i)}function Ye(s,e){return s}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends ui{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class la{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Yx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Jn.UNAUTHENTICATED)))}shutdown(){}}class zR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class BR{constructor(e){this.t=e,this.currentUser=Jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){bt(this.o===void 0,42304);let i=this.i;const a=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new la;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new la,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},d=m=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new la)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(bt(typeof i.accessToken=="string",31837,{l:i}),new Yx(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string",2055,{h:e}),new Jn(e)}}class qR{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Jn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class HR{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new qR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Jn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ib{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,or(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){bt(this.o===void 0,3512);const i=l=>{l.error!=null&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,Ne("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ib(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(bt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ib(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function GR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}class Op{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=GR(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function ht(s,e){return s<e?-1:s>e?1:0}function Zg(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++){const a=s.charAt(i),l=e.charAt(i);if(a!==l)return Sg(a)===Sg(l)?ht(a,l):Sg(a)?1:-1}return ht(s.length,e.length)}const $R=55296,KR=57343;function Sg(s){const e=s.charCodeAt(0);return e>=$R&&e<=KR}function cl(s,e,t){return s.length===e.length&&s.every(((i,a)=>t(i,e[a])))}const kb="__name__";class Tr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Le(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Le(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Tr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Tr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Tr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return ht(e.length,t.length)}static compareSegments(e,t){const i=Tr.isNumericId(e),a=Tr.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Tr.extractNumericId(e).compare(Tr.extractNumericId(t)):Zg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return oa.fromString(e.substring(4,e.length-2))}}class Vt extends Tr{construct(e,t,i){return new Vt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ae(de.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new Vt(t)}static emptyPath(){return new Vt([])}}const YR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $n extends Tr{construct(e,t,i){return new $n(e,t,i)}static isValidIdentifier(e){return YR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$n.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kb}static keyField(){return new $n([kb])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new Ae(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new Ae(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Ae(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,a+=2}else d==="`"?(u=!u,a++):d!=="."||u?(i+=d,a++):(l(),a++)}if(l(),u)throw new Ae(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $n(t)}static emptyPath(){return new $n([])}}class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(Vt.fromString(e))}static fromName(e){return new Ve(Vt.fromString(e).popFirst(5))}static empty(){return new Ve(Vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new Vt(e.slice()))}}function Qx(s,e,t){if(!t)throw new Ae(de.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function QR(s,e,t,i){if(e===!0&&i===!0)throw new Ae(de.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function Db(s){if(!Ve.isDocumentKey(s))throw new Ae(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Ob(s){if(Ve.isDocumentKey(s))throw new Ae(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Xx(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function qf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Le(12329,{type:typeof s})}function ti(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ae(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qf(s);throw new Ae(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function wn(s,e){const t={typeString:s};return e&&(t.value=e),t}function tu(s,e){if(!Xx(s))throw new Ae(de.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){t=`JSON missing required field: '${i}'`;break}const u=s[i];if(a&&typeof u!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new Ae(de.INVALID_ARGUMENT,t);return!0}const Mb=-62135596800,jb=1e6;class Ht{static now(){return Ht.fromMillis(Date.now())}static fromDate(e){return Ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*jb);return new Ht(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Mb)throw new Ae(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jb}_compareTo(e){return this.seconds===e.seconds?ht(this.nanoseconds,e.nanoseconds):ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(tu(e,Ht._jsonSchema))return new Ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Mb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ht._jsonSchemaVersion="firestore/timestamp/1.0",Ht._jsonSchema={type:wn("string",Ht._jsonSchemaVersion),seconds:wn("number"),nanoseconds:wn("number")};class Be{static fromTimestamp(e){return new Be(e)}static min(){return new Be(new Ht(0,0))}static max(){return new Be(new Ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const qc=-1;function XR(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,a=Be.fromTimestamp(i===1e9?new Ht(t+1,0):new Ht(t,i));return new fa(a,Ve.empty(),e)}function WR(s){return new fa(s.readTime,s.key,qc)}class fa{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new fa(Be.min(),Ve.empty(),qc)}static max(){return new fa(Be.max(),Ve.empty(),qc)}}function JR(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Ve.comparator(s.documentKey,e.documentKey),t!==0?t:ht(s.largestBatchId,e.largestBatchId))}const ZR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function bl(s){if(s.code!==de.FAILED_PRECONDITION||s.message!==ZR)throw s;Ne("LocalStore","Unexpectedly lost primary lease")}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ge.reject(t)}static resolve(e){return new ge(((t,i)=>{t(e)}))}static reject(e){return new ge(((t,i)=>{i(e)}))}static waitFor(e){return new ge(((t,i)=>{let a=0,l=0,u=!1;e.forEach((d=>{++a,d.next((()=>{++l,u&&l===a&&t()}),(m=>i(m)))})),u=!0,l===a&&t()}))}static or(e){let t=ge.resolve(!1);for(const i of e)t=t.next((a=>a?ge.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new ge(((i,a)=>{const l=e.length,u=new Array(l);let d=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next((v=>{u[p]=v,++d,d===l&&i(u)}),(v=>a(v)))}}))}static doWhile(e,t){return new ge(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}function tC(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function xl(s){return s.name==="IndexedDbTransactionError"}class Hf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Hf.ce=-1;const Mp=-1;function nu(s){return s==null}function mf(s){return s===0&&1/s==-1/0}function nC(s){return typeof s=="number"&&Number.isInteger(s)&&!mf(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Wx="";function sC(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=Vb(e)),e=rC(s.get(t),e);return Vb(e)}function rC(s,e){let t=e;const i=s.length;for(let a=0;a<i;a++){const l=s.charAt(a);switch(l){case"\0":t+="";break;case Wx:t+="";break;default:t+=l}}return t}function Vb(s){return s+Wx+""}function Pb(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function _a(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function Jx(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Xt{constructor(e,t){this.comparator=e,this.root=t||Gn.EMPTY}insert(e,t){return new Xt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gn.BLACK,null,null))}remove(e){return new Xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lh(this.root,e,this.comparator,!0)}}class Lh{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gn{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??Gn.RED,this.left=a??Gn.EMPTY,this.right=l??Gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new Gn(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Gn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Le(27949);return e+(this.isRed()?0:1)}}Gn.EMPTY=null,Gn.RED=!0,Gn.BLACK=!1;Gn.EMPTY=new class{constructor(){this.size=0}get key(){throw Le(57766)}get value(){throw Le(16141)}get color(){throw Le(16727)}get left(){throw Le(29726)}get right(){throw Le(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new Gn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cn{constructor(e){this.comparator=e,this.data=new Xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Lb(this.data.getIterator())}getIteratorFrom(e){return new Lb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Cn(this.comparator);return t.data=e,t}}class Lb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ns{constructor(e){this.fields=e,e.sort($n.comparator)}static empty(){return new Ns([])}unionWith(e){let t=new Cn($n.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Ns(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return cl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class Zx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Kn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Zx("Invalid base64 string: "+l):l}})(e);return new Kn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new Kn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kn.EMPTY_BYTE_STRING=new Kn("");const iC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function da(s){if(bt(!!s,39018),typeof s=="string"){let e=0;const t=iC.exec(s);if(bt(!!t,46558,{timestamp:s}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:un(s.seconds),nanos:un(s.nanos)}}function un(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ma(s){return typeof s=="string"?Kn.fromBase64String(s):Kn.fromUint8Array(s)}const ew="server_timestamp",tw="__type__",nw="__previous_value__",sw="__local_write_time__";function jp(s){return(s?.mapValue?.fields||{})[tw]?.stringValue===ew}function Ff(s){const e=s.mapValue.fields[nw];return jp(e)?Ff(e):e}function Hc(s){const e=da(s.mapValue.fields[sw].timestampValue);return new Ht(e.seconds,e.nanos)}class aC{constructor(e,t,i,a,l,u,d,m,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=v}}const gf="(default)";class Fc{constructor(e,t){this.projectId=e,this.database=t||gf}static empty(){return new Fc("","")}get isDefaultDatabase(){return this.database===gf}isEqual(e){return e instanceof Fc&&e.projectId===this.projectId&&e.database===this.database}}const rw="__type__",oC="__max__",Uh={mapValue:{}},iw="__vector__",pf="value";function ga(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?jp(s)?4:cC(s)?9007199254740991:lC(s)?10:11:Le(28295,{value:s})}function Nr(s,e){if(s===e)return!0;const t=ga(s);if(t!==ga(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Hc(s).isEqual(Hc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=da(a.timestampValue),d=da(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,l){return ma(a.bytesValue).isEqual(ma(l.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,l){return un(a.geoPointValue.latitude)===un(l.geoPointValue.latitude)&&un(a.geoPointValue.longitude)===un(l.geoPointValue.longitude)})(s,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return un(a.integerValue)===un(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=un(a.doubleValue),d=un(l.doubleValue);return u===d?mf(u)===mf(d):isNaN(u)&&isNaN(d)}return!1})(s,e);case 9:return cl(s.arrayValue.values||[],e.arrayValue.values||[],Nr);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},d=l.mapValue.fields||{};if(Pb(u)!==Pb(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(d[m]===void 0||!Nr(u[m],d[m])))return!1;return!0})(s,e);default:return Le(52216,{left:s})}}function Gc(s,e){return(s.values||[]).find((t=>Nr(t,e)))!==void 0}function ul(s,e){if(s===e)return 0;const t=ga(s),i=ga(e);if(t!==i)return ht(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ht(s.booleanValue,e.booleanValue);case 2:return(function(l,u){const d=un(l.integerValue||l.doubleValue),m=un(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(s,e);case 3:return Ub(s.timestampValue,e.timestampValue);case 4:return Ub(Hc(s),Hc(e));case 5:return Zg(s.stringValue,e.stringValue);case 6:return(function(l,u){const d=ma(l),m=ma(u);return d.compareTo(m)})(s.bytesValue,e.bytesValue);case 7:return(function(l,u){const d=l.split("/"),m=u.split("/");for(let p=0;p<d.length&&p<m.length;p++){const v=ht(d[p],m[p]);if(v!==0)return v}return ht(d.length,m.length)})(s.referenceValue,e.referenceValue);case 8:return(function(l,u){const d=ht(un(l.latitude),un(u.latitude));return d!==0?d:ht(un(l.longitude),un(u.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return zb(s.arrayValue,e.arrayValue);case 10:return(function(l,u){const d=l.fields||{},m=u.fields||{},p=d[pf]?.arrayValue,v=m[pf]?.arrayValue,b=ht(p?.values?.length||0,v?.values?.length||0);return b!==0?b:zb(p,v)})(s.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Uh.mapValue&&u===Uh.mapValue)return 0;if(l===Uh.mapValue)return 1;if(u===Uh.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),p=u.fields||{},v=Object.keys(p);m.sort(),v.sort();for(let b=0;b<m.length&&b<v.length;++b){const w=Zg(m[b],v[b]);if(w!==0)return w;const R=ul(d[m[b]],p[v[b]]);if(R!==0)return R}return ht(m.length,v.length)})(s.mapValue,e.mapValue);default:throw Le(23264,{he:t})}}function Ub(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return ht(s,e);const t=da(s),i=da(e),a=ht(t.seconds,i.seconds);return a!==0?a:ht(t.nanos,i.nanos)}function zb(s,e){const t=s.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=ul(t[a],i[a]);if(l)return l}return ht(t.length,i.length)}function hl(s){return ep(s)}function ep(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=da(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return ma(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return Ve.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=ep(l);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of i)l?l=!1:a+=",",a+=`${u}:${ep(t.fields[u])}`;return a+"}"})(s.mapValue):Le(61005,{value:s})}function Wh(s){switch(ga(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ff(s);return e?16+Wh(e):16;case 5:return 2*s.stringValue.length;case 6:return ma(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Wh(l)),0)})(s.arrayValue);case 10:case 11:return(function(i){let a=0;return _a(i.fields,((l,u)=>{a+=l.length+Wh(u)})),a})(s.mapValue);default:throw Le(13486,{value:s})}}function Bb(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function tp(s){return!!s&&"integerValue"in s}function Vp(s){return!!s&&"arrayValue"in s}function qb(s){return!!s&&"nullValue"in s}function Hb(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Jh(s){return!!s&&"mapValue"in s}function lC(s){return(s?.mapValue?.fields||{})[rw]?.stringValue===iw}function Nc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return _a(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Nc(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Nc(s.arrayValue.values[t]);return e}return{...s}}function cC(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===oC}class as{constructor(e){this.value=e}static empty(){return new as({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Jh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nc(t)}setAll(e){let t=$n.emptyPath(),i={},a=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,i,a),i={},a=[],t=d.popLast()}u?i[d.lastSegment()]=Nc(u):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Jh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Nr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Jh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){_a(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new as(Nc(this.value))}}function aw(s){const e=[];return _a(s.fields,((t,i)=>{const a=new $n([t]);if(Jh(i)){const l=aw(i.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new Ns(e)}class Vn{constructor(e,t,i,a,l,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Vn(e,0,Be.min(),Be.min(),Be.min(),as.empty(),0)}static newFoundDocument(e,t,i,a){return new Vn(e,1,t,Be.min(),i,a,0)}static newNoDocument(e,t){return new Vn(e,2,t,Be.min(),Be.min(),as.empty(),0)}static newUnknownDocument(e,t){return new Vn(e,3,t,Be.min(),Be.min(),as.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=as.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=as.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yf{constructor(e,t){this.position=e,this.inclusive=t}}function Fb(s,e,t){let i=0;for(let a=0;a<s.position.length;a++){const l=e[a],u=s.position[a];if(l.field.isKeyField()?i=Ve.comparator(Ve.fromName(u.referenceValue),t.key):i=ul(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Gb(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Nr(s.position[t],e.position[t]))return!1;return!0}class vf{constructor(e,t="asc"){this.field=e,this.dir=t}}function uC(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class ow{}class xn extends ow{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new fC(e,t,i):t==="array-contains"?new gC(e,i):t==="in"?new pC(e,i):t==="not-in"?new yC(e,i):t==="array-contains-any"?new vC(e,i):new xn(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new dC(e,i):new mC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ul(t,this.value)):t!==null&&ga(this.value)===ga(t)&&this.matchesComparison(ul(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ur extends ow{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ur(e,t)}matches(e){return lw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lw(s){return s.op==="and"}function cw(s){return hC(s)&&lw(s)}function hC(s){for(const e of s.filters)if(e instanceof ur)return!1;return!0}function np(s){if(s instanceof xn)return s.field.canonicalString()+s.op.toString()+hl(s.value);if(cw(s))return s.filters.map((e=>np(e))).join(",");{const e=s.filters.map((t=>np(t))).join(",");return`${s.op}(${e})`}}function uw(s,e){return s instanceof xn?(function(i,a){return a instanceof xn&&i.op===a.op&&i.field.isEqual(a.field)&&Nr(i.value,a.value)})(s,e):s instanceof ur?(function(i,a){return a instanceof ur&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,u,d)=>l&&uw(u,a.filters[d])),!0):!1})(s,e):void Le(19439)}function hw(s){return s instanceof xn?(function(t){return`${t.field.canonicalString()} ${t.op} ${hl(t.value)}`})(s):s instanceof ur?(function(t){return t.op.toString()+" {"+t.getFilters().map(hw).join(" ,")+"}"})(s):"Filter"}class fC extends xn{constructor(e,t,i){super(e,t,i),this.key=Ve.fromName(i.referenceValue)}matches(e){const t=Ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class dC extends xn{constructor(e,t){super(e,"in",t),this.keys=fw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class mC extends xn{constructor(e,t){super(e,"not-in",t),this.keys=fw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function fw(s,e){return(e.arrayValue?.values||[]).map((t=>Ve.fromName(t.referenceValue)))}class gC extends xn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vp(t)&&Gc(t.arrayValue,this.value)}}class pC extends xn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Gc(this.value.arrayValue,t)}}class yC extends xn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Gc(this.value.arrayValue,t)}}class vC extends xn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Gc(this.value.arrayValue,i)))}}class _C{constructor(e,t=null,i=[],a=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=u,this.endAt=d,this.Te=null}}function $b(s,e=null,t=[],i=[],a=null,l=null,u=null){return new _C(s,e,t,i,a,l,u)}function Pp(s){const e=Ye(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>np(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),nu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>hl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>hl(i))).join(",")),e.Te=t}return e.Te}function Lp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!uC(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!uw(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Gb(s.startAt,e.startAt)&&Gb(s.endAt,e.endAt)}function sp(s){return Ve.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class su{constructor(e,t=null,i=[],a=[],l=null,u="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function bC(s,e,t,i,a,l,u,d){return new su(s,e,t,i,a,l,u,d)}function Up(s){return new su(s)}function Kb(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function dw(s){return s.collectionGroup!==null}function Ic(s){const e=Ye(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Cn($n.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new vf(l,i))})),t.has($n.keyField().canonicalString())||e.Ie.push(new vf($n.keyField(),i))}return e.Ie}function Er(s){const e=Ye(s);return e.Ee||(e.Ee=xC(e,Ic(s))),e.Ee}function xC(s,e){if(s.limitType==="F")return $b(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new vf(a.field,l)}));const t=s.endAt?new yf(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new yf(s.startAt.position,s.startAt.inclusive):null;return $b(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function rp(s,e){const t=s.filters.concat([e]);return new su(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function ip(s,e,t){return new su(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Gf(s,e){return Lp(Er(s),Er(e))&&s.limitType===e.limitType}function mw(s){return`${Pp(Er(s))}|lt:${s.limitType}`}function Qo(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>hw(a))).join(", ")}]`),nu(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>hl(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>hl(a))).join(",")),`Target(${i})`})(Er(s))}; limitType=${s.limitType})`}function $f(s,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ve.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(s,e)&&(function(i,a){for(const l of Ic(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(s,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(s,e)&&(function(i,a){return!(i.startAt&&!(function(u,d,m){const p=Fb(u,d,m);return u.inclusive?p<=0:p<0})(i.startAt,Ic(i),a)||i.endAt&&!(function(u,d,m){const p=Fb(u,d,m);return u.inclusive?p>=0:p>0})(i.endAt,Ic(i),a))})(s,e)}function wC(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function gw(s){return(e,t)=>{let i=!1;for(const a of Ic(s)){const l=TC(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function TC(s,e,t){const i=s.field.isKeyField()?Ve.comparator(e.key,t.key):(function(l,u,d){const m=u.data.field(l),p=d.data.field(l);return m!==null&&p!==null?ul(m,p):Le(42886)})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Le(19790,{direction:s.dir})}}class ao{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){_a(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return Jx(this.inner)}size(){return this.innerSize}}const EC=new Xt(Ve.comparator);function ai(){return EC}const pw=new Xt(Ve.comparator);function wc(...s){let e=pw;for(const t of s)e=e.insert(t.key,t);return e}function yw(s){let e=pw;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Wa(){return kc()}function vw(){return kc()}function kc(){return new ao((s=>s.toString()),((s,e)=>s.isEqual(e)))}const SC=new Xt(Ve.comparator),AC=new Cn(Ve.comparator);function ft(...s){let e=AC;for(const t of s)e=e.add(t);return e}const RC=new Cn(ht);function CC(){return RC}function zp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mf(e)?"-0":e}}function _w(s){return{integerValue:""+s}}function NC(s,e){return nC(e)?_w(e):zp(s,e)}class Kf{constructor(){this._=void 0}}function IC(s,e,t){return s instanceof _f?(function(a,l){const u={fields:{[tw]:{stringValue:ew},[sw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&jp(l)&&(l=Ff(l)),l&&(u.fields[nw]=l),{mapValue:u}})(t,e):s instanceof $c?xw(s,e):s instanceof Kc?ww(s,e):(function(a,l){const u=bw(a,l),d=Yb(u)+Yb(a.Ae);return tp(u)&&tp(a.Ae)?_w(d):zp(a.serializer,d)})(s,e)}function kC(s,e,t){return s instanceof $c?xw(s,e):s instanceof Kc?ww(s,e):t}function bw(s,e){return s instanceof bf?(function(i){return tp(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class _f extends Kf{}class $c extends Kf{constructor(e){super(),this.elements=e}}function xw(s,e){const t=Tw(e);for(const i of s.elements)t.some((a=>Nr(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Kc extends Kf{constructor(e){super(),this.elements=e}}function ww(s,e){let t=Tw(e);for(const i of s.elements)t=t.filter((a=>!Nr(a,i)));return{arrayValue:{values:t}}}class bf extends Kf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Yb(s){return un(s.integerValue||s.doubleValue)}function Tw(s){return Vp(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function DC(s,e){return s.field.isEqual(e.field)&&(function(i,a){return i instanceof $c&&a instanceof $c||i instanceof Kc&&a instanceof Kc?cl(i.elements,a.elements,Nr):i instanceof bf&&a instanceof bf?Nr(i.Ae,a.Ae):i instanceof _f&&a instanceof _f})(s.transform,e.transform)}class OC{constructor(e,t){this.version=e,this.transformResults=t}}class os{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new os}static exists(e){return new os(void 0,e)}static updateTime(e){return new os(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Yf{}function Ew(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Bp(s.key,os.none()):new ru(s.key,s.data,os.none());{const t=s.data,i=as.empty();let a=new Cn($n.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),a=a.add(l)}return new ba(s.key,i,new Ns(a.toArray()),os.none())}}function MC(s,e,t){s instanceof ru?(function(a,l,u){const d=a.value.clone(),m=Xb(a.fieldTransforms,l,u.transformResults);d.setAll(m),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(s,e,t):s instanceof ba?(function(a,l,u){if(!Zh(a.precondition,l))return void l.convertToUnknownDocument(u.version);const d=Xb(a.fieldTransforms,l,u.transformResults),m=l.data;m.setAll(Sw(a)),m.setAll(d),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(s,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Dc(s,e,t,i){return s instanceof ru?(function(l,u,d,m){if(!Zh(l.precondition,u))return d;const p=l.value.clone(),v=Wb(l.fieldTransforms,m,u);return p.setAll(v),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(s,e,t,i):s instanceof ba?(function(l,u,d,m){if(!Zh(l.precondition,u))return d;const p=Wb(l.fieldTransforms,m,u),v=u.data;return v.setAll(Sw(l)),v.setAll(p),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(s,e,t,i):(function(l,u,d){return Zh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(s,e,t)}function jC(s,e){let t=null;for(const i of s.fieldTransforms){const a=e.data.field(i.field),l=bw(i.transform,a||null);l!=null&&(t===null&&(t=as.empty()),t.set(i.field,l))}return t||null}function Qb(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&cl(i,a,((l,u)=>DC(l,u)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class ru extends Yf{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ba extends Yf{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Sw(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function Xb(s,e,t){const i=new Map;bt(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let a=0;a<t.length;a++){const l=s[a],u=l.transform,d=e.data.field(l.field);i.set(l.field,kC(u,d,t[a]))}return i}function Wb(s,e,t){const i=new Map;for(const a of s){const l=a.transform,u=t.data.field(a.field);i.set(a.field,IC(l,u,e))}return i}class Bp extends Yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Aw extends Yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class VC{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&MC(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Dc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Dc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=vw();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=t.has(a.key)?null:d;const m=Ew(u,d);m!==null&&i.set(a.key,m),u.isValidDocument()||u.convertToNoDocument(Be.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ft())}isEqual(e){return this.batchId===e.batchId&&cl(this.mutations,e.mutations,((t,i)=>Qb(t,i)))&&cl(this.baseMutations,e.baseMutations,((t,i)=>Qb(t,i)))}}class qp{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){bt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return SC})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,i[u].version);return new qp(e,t,i,a)}}class PC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class LC{constructor(e,t){this.count=e,this.unchangedNames=t}}var bn,_t;function Rw(s){switch(s){case de.OK:return Le(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return Le(15467,{code:s})}}function Cw(s){if(s===void 0)return ii("GRPC error has no .code"),de.UNKNOWN;switch(s){case bn.OK:return de.OK;case bn.CANCELLED:return de.CANCELLED;case bn.UNKNOWN:return de.UNKNOWN;case bn.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case bn.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case bn.INTERNAL:return de.INTERNAL;case bn.UNAVAILABLE:return de.UNAVAILABLE;case bn.UNAUTHENTICATED:return de.UNAUTHENTICATED;case bn.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case bn.NOT_FOUND:return de.NOT_FOUND;case bn.ALREADY_EXISTS:return de.ALREADY_EXISTS;case bn.PERMISSION_DENIED:return de.PERMISSION_DENIED;case bn.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case bn.ABORTED:return de.ABORTED;case bn.OUT_OF_RANGE:return de.OUT_OF_RANGE;case bn.UNIMPLEMENTED:return de.UNIMPLEMENTED;case bn.DATA_LOSS:return de.DATA_LOSS;default:return Le(39323,{code:s})}}(_t=bn||(bn={}))[_t.OK=0]="OK",_t[_t.CANCELLED=1]="CANCELLED",_t[_t.UNKNOWN=2]="UNKNOWN",_t[_t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_t[_t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_t[_t.NOT_FOUND=5]="NOT_FOUND",_t[_t.ALREADY_EXISTS=6]="ALREADY_EXISTS",_t[_t.PERMISSION_DENIED=7]="PERMISSION_DENIED",_t[_t.UNAUTHENTICATED=16]="UNAUTHENTICATED",_t[_t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_t[_t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_t[_t.ABORTED=10]="ABORTED",_t[_t.OUT_OF_RANGE=11]="OUT_OF_RANGE",_t[_t.UNIMPLEMENTED=12]="UNIMPLEMENTED",_t[_t.INTERNAL=13]="INTERNAL",_t[_t.UNAVAILABLE=14]="UNAVAILABLE",_t[_t.DATA_LOSS=15]="DATA_LOSS";function UC(){return new TextEncoder}const zC=new oa([4294967295,4294967295],0);function Jb(s){const e=UC().encode(s),t=new Bx;return t.update(e),new Uint8Array(t.digest())}function Zb(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new oa([t,i],0),new oa([a,l],0)]}class Hp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Tc(`Invalid padding: ${t}`);if(i<0)throw new Tc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Tc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Tc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=oa.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(oa.fromNumber(i)));return a.compare(zC)===1&&(a=new oa([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Jb(e),[i,a]=Zb(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,a,l);if(!this.we(u))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Hp(l,a,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=Jb(e),[i,a]=Zb(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,a,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qf{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,iu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Qf(Be.min(),a,new Xt(ht),ai(),ft())}}class iu{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new iu(i,t,ft(),ft(),ft())}}class ef{constructor(e,t,i,a){this.be=e,this.removedTargetIds=t,this.key=i,this.De=a}}class Nw{constructor(e,t){this.targetId=e,this.Ce=t}}class Iw{constructor(e,t,i=Kn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class e1{constructor(){this.ve=0,this.Fe=t1(),this.Me=Kn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ft(),t=ft(),i=ft();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:Le(38017,{changeType:l})}})),new iu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=t1()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,bt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class BC{constructor(e){this.Ge=e,this.ze=new Map,this.je=ai(),this.Je=zh(),this.He=zh(),this.Ye=new Xt(ht)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Le(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(sp(l))if(i===0){const u=new Ve(l.path);this.et(t,u,Vn.newNoDocument(u,Be.min()))}else bt(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const d=this.ut(e),m=d?this.ct(d,e,u):1;if(m!==0){this.it(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let u,d;try{u=ma(i).toUint8Array()}catch(m){if(m instanceof Zx)return ll("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Hp(u,a,l)}catch(m){return ll(m instanceof Tc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const d=this.ot(u);if(d){if(l.current&&sp(d.target)){const m=new Ve(d.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,Vn.newNoDocument(m,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let i=ft();this.He.forEach(((l,u)=>{let d=!0;u.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new Qf(e,t,this.Ye,this.je,i);return this.je=ai(),this.Je=zh(),this.He=zh(),this.Ye=new Xt(ht),a}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new e1,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Cn(ht),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Cn(ht),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new e1),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function zh(){return new Xt(Ve.comparator)}function t1(){return new Xt(Ve.comparator)}const qC={asc:"ASCENDING",desc:"DESCENDING"},HC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FC={and:"AND",or:"OR"};class GC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ap(s,e){return s.useProto3Json||nu(e)?e:{value:e}}function xf(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kw(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function $C(s,e){return xf(s,e.toTimestamp())}function Is(s){return bt(!!s,49232),Be.fromTimestamp((function(t){const i=da(t);return new Ht(i.seconds,i.nanos)})(s))}function Fp(s,e){return op(s,e).canonicalString()}function op(s,e){const t=(function(a){return new Vt(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?t:t.child(e)}function Dw(s){const e=Vt.fromString(s);return bt(Lw(e),10190,{key:e.toString()}),e}function wf(s,e){return Fp(s.databaseId,e.path)}function Oc(s,e){const t=Dw(e);if(t.get(1)!==s.databaseId.projectId)throw new Ae(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Ae(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Ve(Mw(t))}function Ow(s,e){return Fp(s.databaseId,e)}function KC(s){const e=Dw(s);return e.length===4?Vt.emptyPath():Mw(e)}function lp(s){return new Vt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Mw(s){return bt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function n1(s,e,t){return{name:wf(s,e),fields:t.value.mapValue.fields}}function YC(s,e){return"found"in e?(function(i,a){bt(!!a.found,43571),a.found.name,a.found.updateTime;const l=Oc(i,a.found.name),u=Is(a.found.updateTime),d=a.found.createTime?Is(a.found.createTime):Be.min(),m=new as({mapValue:{fields:a.found.fields}});return Vn.newFoundDocument(l,u,d,m)})(s,e):"missing"in e?(function(i,a){bt(!!a.missing,3894),bt(!!a.readTime,22933);const l=Oc(i,a.missing),u=Is(a.readTime);return Vn.newNoDocument(l,u)})(s,e):Le(7234,{result:e})}function QC(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Le(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,v){return p.useProto3Json?(bt(v===void 0||typeof v=="string",58123),Kn.fromBase64String(v||"")):(bt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Kn.fromUint8Array(v||new Uint8Array))})(s,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(p){const v=p.code===void 0?de.UNKNOWN:Cw(p.code);return new Ae(v,p.message||"")})(u);t=new Iw(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Oc(s,i.document.name),l=Is(i.document.updateTime),u=i.document.createTime?Is(i.document.createTime):Be.min(),d=new as({mapValue:{fields:i.document.fields}}),m=Vn.newFoundDocument(a,l,u,d),p=i.targetIds||[],v=i.removedTargetIds||[];t=new ef(p,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Oc(s,i.document),l=i.readTime?Is(i.readTime):Be.min(),u=Vn.newNoDocument(a,l),d=i.removedTargetIds||[];t=new ef([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Oc(s,i.document),l=i.removedTargetIds||[];t=new ef([],l,a,null)}else{if(!("filter"in e))return Le(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,u=new LC(a,l),d=i.targetId;t=new Nw(d,u)}}return t}function jw(s,e){let t;if(e instanceof ru)t={update:n1(s,e.key,e.value)};else if(e instanceof Bp)t={delete:wf(s,e.key)};else if(e instanceof ba)t={update:n1(s,e.key,e.data),updateMask:rN(e.fieldMask)};else{if(!(e instanceof Aw))return Le(16599,{Vt:e.type});t={verify:wf(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,u){const d=u.transform;if(d instanceof _f)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof $c)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Kc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof bf)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Le(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:$C(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Le(27497)})(s,e.precondition)),t}function XC(s,e){return s&&s.length>0?(bt(e!==void 0,14353),s.map((t=>(function(a,l){let u=a.updateTime?Is(a.updateTime):Is(l);return u.isEqual(Be.min())&&(u=Is(l)),new OC(u,a.transformResults||[])})(t,e)))):[]}function WC(s,e){return{documents:[Ow(s,e.path)]}}function JC(s,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Ow(s,a);const l=(function(p){if(p.length!==0)return Pw(ur.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(p){if(p.length!==0)return p.map((v=>(function(w){return{field:Xo(w.field),direction:tN(w.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=ap(s,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:a}}function ZC(s){let e=KC(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){bt(i===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(b){const w=Vw(b);return w instanceof ur&&cw(w)?w.getFilters():[w]})(t.where));let u=[];t.orderBy&&(u=(function(b){return b.map((w=>(function(j){return new vf(Wo(j.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(w)))})(t.orderBy));let d=null;t.limit&&(d=(function(b){let w;return w=typeof b=="object"?b.value:b,nu(w)?null:w})(t.limit));let m=null;t.startAt&&(m=(function(b){const w=!!b.before,R=b.values||[];return new yf(R,w)})(t.startAt));let p=null;return t.endAt&&(p=(function(b){const w=!b.before,R=b.values||[];return new yf(R,w)})(t.endAt)),bC(e,a,u,l,d,"F",m,p)}function eN(s,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Vw(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Wo(t.unaryFilter.field);return xn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Wo(t.unaryFilter.field);return xn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Wo(t.unaryFilter.field);return xn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Wo(t.unaryFilter.field);return xn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Le(61313);default:return Le(60726)}})(s):s.fieldFilter!==void 0?(function(t){return xn.create(Wo(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Le(58110);default:return Le(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return ur.create(t.compositeFilter.filters.map((i=>Vw(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Le(1026)}})(t.compositeFilter.op))})(s):Le(30097,{filter:s})}function tN(s){return qC[s]}function nN(s){return HC[s]}function sN(s){return FC[s]}function Xo(s){return{fieldPath:s.canonicalString()}}function Wo(s){return $n.fromServerFormat(s.fieldPath)}function Pw(s){return s instanceof xn?(function(t){if(t.op==="=="){if(Hb(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NAN"}};if(qb(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Hb(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NOT_NAN"}};if(qb(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xo(t.field),op:nN(t.op),value:t.value}}})(s):s instanceof ur?(function(t){const i=t.getFilters().map((a=>Pw(a)));return i.length===1?i[0]:{compositeFilter:{op:sN(t.op),filters:i}}})(s):Le(54877,{filter:s})}function rN(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Lw(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class sa{constructor(e,t,i,a,l=Be.min(),u=Be.min(),d=Kn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new sa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class iN{constructor(e){this.yt=e}}function aN(s){const e=ZC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?ip(e,e.limit,"L"):e}class oN{constructor(){this.Cn=new lN}addToCollectionParentIndex(e,t){return this.Cn.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t){return ge.resolve(null)}getIndexType(e,t){return ge.resolve(0)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,t){return ge.resolve(fa.min())}getMinOffsetFromCollectionGroup(e,t){return ge.resolve(fa.min())}updateCollectionGroup(e,t,i){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class lN{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new Cn(Vt.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Cn(Vt.comparator)).toArray()}}const s1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Uw=41943040;class vs{static withCacheSize(e){return new vs(e,vs.DEFAULT_COLLECTION_PERCENTILE,vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}vs.DEFAULT_COLLECTION_PERCENTILE=10,vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vs.DEFAULT=new vs(Uw,vs.DEFAULT_COLLECTION_PERCENTILE,vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vs.DISABLED=new vs(-1,0,0);class fl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new fl(0)}static cr(){return new fl(-1)}}const r1="LruGarbageCollector",cN=1048576;function i1([s,e],[t,i]){const a=ht(s,t);return a===0?ht(e,i):a}class uN{constructor(e){this.Ir=e,this.buffer=new Cn(i1),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();i1(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hN{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ne(r1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xl(t)?Ne(r1,"Ignoring IndexedDB error during garbage collection: ",t):await bl(t)}await this.Vr(3e5)}))}}class fN{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ge.resolve(Hf.ce);const i=new uN(t);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(s1)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),s1):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,a,l,u,d,m,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,u=Date.now(),this.nthSequenceNumber(e,a)))).next((b=>(i=b,d=Date.now(),this.removeTargets(e,i,t)))).next((b=>(l=b,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((b=>(p=Date.now(),Yo()<=ut.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${a} in `+(d-u)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${b} documents in `+(p-m)+`ms
Total Duration: ${p-v}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:b}))))}}function dN(s,e){return new fN(s,e)}class mN{constructor(){this.changes=new ao((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ge.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class pN{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&Dc(i.mutation,a,Ns.empty(),Ht.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,ft()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=ft()){const a=Wa();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let u=wc();return l.forEach(((d,m)=>{u=u.insert(d,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=Wa();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,ft())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,a){let l=ai();const u=kc(),d=(function(){return kc()})();return t.forEach(((m,p)=>{const v=i.get(p.key);a.has(p.key)&&(v===void 0||v.mutation instanceof ba)?l=l.insert(p.key,p):v!==void 0?(u.set(p.key,v.mutation.getFieldMask()),Dc(v.mutation,p,v.mutation.getFieldMask(),Ht.now())):u.set(p.key,Ns.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((p,v)=>u.set(p,v))),t.forEach(((p,v)=>d.set(p,new gN(v,u.get(p)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=kc();let a=new Xt(((u,d)=>u-d)),l=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((m=>{const p=t.get(m);if(p===null)return;let v=i.get(m)||Ns.empty();v=d.applyToLocalView(p,v),i.set(m,v);const b=(a.get(d.batchId)||ft()).add(m);a=a.insert(d.batchId,b)}))})).next((()=>{const u=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),p=m.key,v=m.value,b=vw();v.forEach((w=>{if(!l.has(w)){const R=Ew(t.get(w),i.get(w));R!==null&&b.set(w,R),l=l.add(w)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,b))}return ge.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return(function(u){return Ve.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):ge.resolve(Wa());let d=qc,m=l;return u.next((p=>ge.forEach(p,((v,b)=>(d<b.largestBatchId&&(d=b.largestBatchId),l.get(v)?ge.resolve():this.remoteDocumentCache.getEntry(e,v).next((w=>{m=m.insert(v,w)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,m,p,ft()))).next((v=>({batchId:d,changes:yw(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ve(t)).next((i=>{let a=wc();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let u=wc();return this.indexManager.getCollectionParents(e,l).next((d=>ge.forEach(d,(m=>{const p=(function(b,w){return new su(w,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,a).next((v=>{v.forEach(((b,w)=>{u=u.insert(b,w)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((u=>{l.forEach(((m,p)=>{const v=p.getKey();u.get(v)===null&&(u=u.insert(v,Vn.newInvalidDocument(v)))}));let d=wc();return u.forEach(((m,p)=>{const v=l.get(m);v!==void 0&&Dc(v.mutation,p,Ns.empty(),Ht.now()),$f(t,p)&&(d=d.insert(m,p))})),d}))}}class yN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ge.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Is(a.createTime)}})(t)),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:aN(a.bundledQuery),readTime:Is(a.readTime)}})(t)),ge.resolve()}}class vN{constructor(){this.overlays=new Xt(Ve.comparator),this.qr=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Wa();return ge.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.St(e,t,l)})),ge.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),ge.resolve()}getOverlaysForCollection(e,t,i){const a=Wa(),l=t.length+1,u=new Ve(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const m=d.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>i&&a.set(m.getKey(),m)}return ge.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new Xt(((p,v)=>p-v));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let v=l.get(p.largestBatchId);v===null&&(v=Wa(),l=l.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const d=Wa(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,v)=>d.set(p,v))),!(d.size()>=a)););return ge.resolve(d)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new PC(t,i));let l=this.qr.get(t);l===void 0&&(l=ft(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}class _N{constructor(){this.sessionToken=Kn.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ge.resolve()}}class Gp{constructor(){this.Qr=new Cn(Mn.$r),this.Ur=new Cn(Mn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Mn(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Mn(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Ve(new Vt([])),i=new Mn(t,e),a=new Mn(t,e+1),l=[];return this.Ur.forEachInRange([i,a],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ve(new Vt([])),i=new Mn(t,e),a=new Mn(t,e+1);let l=ft();return this.Ur.forEachInRange([i,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new Mn(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Mn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ve.comparator(e.key,t.key)||ht(e.Yr,t.Yr)}static Kr(e,t){return ht(e.Yr,t.Yr)||Ve.comparator(e.key,t.key)}}class bN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Cn(Mn.$r)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new VC(l,t,i,a);this.mutationQueue.push(u);for(const d of a)this.Zr=this.Zr.add(new Mn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ge.resolve(u)}lookupMutationBatch(e,t){return ge.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.ei(i),l=a<0?0:a;return ge.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?Mp:this.tr-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Mn(t,0),a=new Mn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,a],(u=>{const d=this.Xr(u.Yr);l.push(d)})),ge.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Cn(ht);return t.forEach((a=>{const l=new Mn(a,0),u=new Mn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(d=>{i=i.add(d.Yr)}))})),ge.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;Ve.isDocumentKey(l)||(l=l.child(""));const u=new Mn(new Ve(l),0);let d=new Cn(ht);return this.Zr.forEachWhile((m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(d=d.add(m.Yr)),!0)}),u),ge.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){bt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ge.forEach(t.mutations,(a=>{const l=new Mn(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Mn(t,0),a=this.Zr.firstAfterOrEqual(i);return ge.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class xN{constructor(e){this.ri=e,this.docs=(function(){return new Xt(Ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ge.resolve(i?i.document.mutableCopy():Vn.newInvalidDocument(t))}getEntries(e,t){let i=ai();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Vn.newInvalidDocument(a))})),ge.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=ai();const u=t.path,d=new Ve(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:p,value:{document:v}}=m.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||JR(WR(v),i)<=0||(a.has(v.key)||$f(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ge.resolve(l)}getAllFromCollectionGroup(e,t,i,a){Le(9500)}ii(e,t){return ge.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new wN(this)}getSize(e){return ge.resolve(this.size)}}class wN extends mN{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),ge.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class TN{constructor(e){this.persistence=e,this.si=new ao((t=>Pp(t)),Lp),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.oi=0,this._i=new Gp,this.targetCount=0,this.ai=fl.ur()}forEachTarget(e,t){return this.si.forEach(((i,a)=>t(a))),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),ge.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new fl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.Pr(t),ge.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),ge.waitFor(l).next((()=>a))}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return ge.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),ge.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),ge.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return ge.resolve(i)}containsKey(e,t){return ge.resolve(this._i.containsKey(t))}}class zw{constructor(e,t){this.ui={},this.overlays={},this.ci=new Hf(0),this.li=!1,this.li=!0,this.hi=new _N,this.referenceDelegate=e(this),this.Pi=new TN(this),this.indexManager=new oN,this.remoteDocumentCache=(function(a){return new xN(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new iN(t),this.Ii=new yN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new bN(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){Ne("MemoryPersistence","Starting transaction:",e);const a=new EN(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return ge.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class EN extends eC{constructor(e){super(),this.currentSequenceNumber=e}}class $p{constructor(e){this.persistence=e,this.Ri=new Gp,this.Vi=null}static mi(e){return new $p(e)}get fi(){if(this.Vi)return this.Vi;throw Le(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),ge.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.fi,(i=>{const a=Ve.fromPath(i);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Be.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ge.or([()=>ge.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Tf{constructor(e,t){this.persistence=e,this.pi=new ao((i=>sC(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=dN(this,t)}static mi(e,t){return new Tf(e,t)}Ei(){}di(e){return ge.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return ge.forEach(this.pi,((i,a)=>this.br(e,i,a).next((l=>l?ge.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,t).next((d=>{d||(i++,l.removeEntry(u,Be.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ge.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ge.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ge.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ge.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wh(e.data.value)),t}br(e,t,i){return ge.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return ge.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Kp{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=a}static As(e,t){let i=ft(),a=ft();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Kp(e,t.fromCache,i,a)}}class SN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class AN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return x2()?8:tC(Zn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,a,i).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new SN;return this.Ss(e,t,u).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,u,d.size)}))})).next((()=>l.result))}bs(e,t,i,a){return i.documentReadCount<this.fs?(Yo()<=ut.DEBUG&&Ne("QueryEngine","SDK will not create cache indexes for query:",Qo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ge.resolve()):(Yo()<=ut.DEBUG&&Ne("QueryEngine","Query:",Qo(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(Yo()<=ut.DEBUG&&Ne("QueryEngine","The SDK decides to create cache indexes for query:",Qo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Er(t))):ge.resolve())}ys(e,t){if(Kb(t))return ge.resolve(null);let i=Er(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=ip(t,null,"F"),i=Er(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const u=ft(...l);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((m=>{const p=this.Ds(t,d);return this.Cs(t,p,u,m.readTime)?this.ys(e,ip(t,null,"F")):this.vs(e,p,t,m)}))))})))))}ws(e,t,i,a){return Kb(t)||a.isEqual(Be.min())?ge.resolve(null):this.ps.getDocuments(e,i).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,i,a)?ge.resolve(null):(Yo()<=ut.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Qo(t)),this.vs(e,u,t,XR(a,qc)).next((d=>d)))}))}Ds(e,t){let i=new Cn(gw(e));return t.forEach(((a,l)=>{$f(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,i){return Yo()<=ut.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",Qo(t)),this.ps.getDocumentsMatchingQuery(e,t,fa.min(),i)}vs(e,t,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}const Yp="LocalStore",RN=3e8;class CN{constructor(e,t,i,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new Xt(ht),this.xs=new ao((l=>Pp(l)),Lp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function NN(s,e,t,i){return new CN(s,e,t,i)}async function Bw(s,e){const t=Ye(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const u=[],d=[];let m=ft();for(const p of a){u.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}for(const p of l){d.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(i,m).next((p=>({Ls:p,removedBatchIds:u,addedBatchIds:d})))}))}))}function IN(s,e){const t=Ye(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,m,p,v){const b=p.batch,w=b.keys();let R=ge.resolve();return w.forEach((j=>{R=R.next((()=>v.getEntry(m,j))).next((z=>{const D=p.docVersions.get(j);bt(D!==null,48541),z.version.compareTo(D)<0&&(b.applyToRemoteDocument(z,p),z.isValidDocument()&&(z.setReadTime(p.commitVersion),v.addEntry(z)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(m,b)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let m=ft();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(m=m.add(d.batch.mutations[p].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function qw(s){const e=Ye(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function kN(s,e){const t=Ye(s),i=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const d=[];e.targetChanges.forEach(((v,b)=>{const w=a.get(b);if(!w)return;d.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,b))));let R=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?R=R.withResumeToken(Kn.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,i)),a=a.insert(b,R),(function(z,D,M){return z.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=RN?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0})(w,R,v)&&d.push(t.Pi.updateTargetData(l,R))}));let m=ai(),p=ft();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(DN(l,u,e.documentUpdates).next((v=>{m=v.ks,p=v.qs}))),!i.isEqual(Be.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((b=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(v)}return ge.waitFor(d).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,p))).next((()=>m))})).then((l=>(t.Ms=a,l)))}function DN(s,e,t){let i=ft(),a=ft();return t.forEach((l=>i=i.add(l))),e.getEntries(s,i).next((l=>{let u=ai();return t.forEach(((d,m)=>{const p=l.get(d);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(Be.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):Ne(Yp,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",m.version)})),{ks:u,qs:a}}))}function ON(s,e){const t=Ye(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Mp),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function MN(s,e){const t=Ye(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.Pi.getTargetData(i,e).next((l=>l?(a=l,ge.resolve(a)):t.Pi.allocateTargetId(i).next((u=>(a=new sa(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function cp(s,e,t){const i=Ye(s),a=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(u=>i.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!xl(u))throw u;Ne(Yp,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function a1(s,e,t){const i=Ye(s);let a=Be.min(),l=ft();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,p,v){const b=Ye(m),w=b.xs.get(v);return w!==void 0?ge.resolve(b.Ms.get(w)):b.Pi.getTargetData(p,v)})(i,u,Er(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,d.targetId).next((m=>{l=m}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?a:Be.min(),t?l:ft()))).next((d=>(jN(i,wC(e),d),{documents:d,Qs:l})))))}function jN(s,e,t){let i=s.Os.get(e)||Be.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),s.Os.set(e,i)}class o1{constructor(){this.activeTargetIds=CC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VN{constructor(){this.Mo=new o1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new o1,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class PN{Oo(e){}shutdown(){}}const l1="ConnectivityMonitor";class c1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ne(l1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ne(l1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Bh=null;function up(){return Bh===null?Bh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Bh++,"0x"+Bh.toString(16)}const Ag="RestConnection",LN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class UN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===gf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,t,i,a,l){const u=up(),d=this.zo(e,t.toUriEncodedString());Ne(Ag,`Sending RPC '${e}' ${u}:`,d,i);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:p}=new URL(d),v=yl(p);return this.Jo(e,d,m,i,v).then((b=>(Ne(Ag,`Received RPC '${e}' ${u}: `,b),b)),(b=>{throw ll(Ag,`RPC '${e}' ${u} failed with error: `,b,"url: ",d,"request:",i),b}))}Ho(e,t,i,a,l,u){return this.Go(e,t,i,a,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+_l})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const i=LN[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class zN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Xn="WebChannelConnection";class BN extends UN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,a,l){const u=up();return new Promise(((d,m)=>{const p=new qx;p.setWithCredentials(!0),p.listenOnce(Hx.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Xh.NO_ERROR:const b=p.getResponseJson();Ne(Xn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),d(b);break;case Xh.TIMEOUT:Ne(Xn,`RPC '${e}' ${u} timed out`),m(new Ae(de.DEADLINE_EXCEEDED,"Request time out"));break;case Xh.HTTP_ERROR:const w=p.getStatus();if(Ne(Xn,`RPC '${e}' ${u} failed with status:`,w,"response text:",p.getResponseText()),w>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const j=R?.error;if(j&&j.status&&j.message){const z=(function(M){const $=M.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf($)>=0?$:de.UNKNOWN})(j.status);m(new Ae(z,j.message))}else m(new Ae(de.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new Ae(de.UNAVAILABLE,"Connection failed."));break;default:Le(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Ne(Xn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(a);Ne(Xn,`RPC '${e}' ${u} sending request:`,a),p.send(t,"POST",v,i,15)}))}T_(e,t,i){const a=up(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=$x(),d=Gx(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const v=l.join("");Ne(Xn,`Creating RPC '${e}' stream ${a}: ${v}`,m);const b=u.createWebChannel(v,m);this.I_(b);let w=!1,R=!1;const j=new zN({Yo:D=>{R?Ne(Xn,`Not sending because RPC '${e}' stream ${a} is closed:`,D):(w||(Ne(Xn,`Opening RPC '${e}' stream ${a} transport.`),b.open(),w=!0),Ne(Xn,`RPC '${e}' stream ${a} sending:`,D),b.send(D))},Zo:()=>b.close()}),z=(D,M,$)=>{D.listen(M,(B=>{try{$(B)}catch(ce){setTimeout((()=>{throw ce}),0)}}))};return z(b,xc.EventType.OPEN,(()=>{R||(Ne(Xn,`RPC '${e}' stream ${a} transport opened.`),j.o_())})),z(b,xc.EventType.CLOSE,(()=>{R||(R=!0,Ne(Xn,`RPC '${e}' stream ${a} transport closed`),j.a_(),this.E_(b))})),z(b,xc.EventType.ERROR,(D=>{R||(R=!0,ll(Xn,`RPC '${e}' stream ${a} transport errored. Name:`,D.name,"Message:",D.message),j.a_(new Ae(de.UNAVAILABLE,"The operation could not be completed")))})),z(b,xc.EventType.MESSAGE,(D=>{if(!R){const M=D.data[0];bt(!!M,16349);const $=M,B=$?.error||$[0]?.error;if(B){Ne(Xn,`RPC '${e}' stream ${a} received error:`,B);const ce=B.status;let X=(function(S){const N=bn[S];if(N!==void 0)return Cw(N)})(ce),F=B.message;X===void 0&&(X=de.INTERNAL,F="Unknown error status: "+ce+" with message "+B.message),R=!0,j.a_(new Ae(X,F)),b.close()}else Ne(Xn,`RPC '${e}' stream ${a} received:`,M),j.u_(M)}})),z(d,Fx.STAT_EVENT,(D=>{D.stat===Jg.PROXY?Ne(Xn,`RPC '${e}' stream ${a} detected buffering proxy`):D.stat===Jg.NOPROXY&&Ne(Xn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{j.__()}),0),j}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Rg(){return typeof document<"u"?document:null}function Xf(s){return new GC(s,!0)}class Qp{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&Ne("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const u1="PersistentStream";class Hw{constructor(e,t,i,a,l,u,d,m){this.Mi=e,this.S_=i,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Qp(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(ii(t.toString()),ii("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new Ae(de.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ne(u1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ne(u1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qN extends Hw{constructor(e,t,i,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=QC(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Be.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Be.min():u.readTime?Is(u.readTime):Be.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=lp(this.serializer),t.addTarget=(function(l,u){let d;const m=u.target;if(d=sp(m)?{documents:WC(l,m)}:{query:JC(l,m).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=kw(l,u.resumeToken);const p=ap(l,u.expectedCount);p!==null&&(d.expectedCount=p)}else if(u.snapshotVersion.compareTo(Be.min())>0){d.readTime=xf(l,u.snapshotVersion.toTimestamp());const p=ap(l,u.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const i=eN(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=lp(this.serializer),t.removeTarget=e,this.q_(t)}}class HN extends Hw{constructor(e,t,i,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return bt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){bt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=XC(e.writeResults,e.commitTime),i=Is(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=lp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>jw(this.serializer,i)))};this.q_(t)}}class FN{}class GN extends FN{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Ae(de.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,op(t,i),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ae(de.UNKNOWN,l.toString())}))}Ho(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,op(t,i),a,u,d,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ae(de.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class $N{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ii(t),this.aa=!1):Ne("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const no="RemoteStore";class KN{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{oo(this)&&(Ne(no,"Restarting streams for network reachability change."),await(async function(m){const p=Ye(m);p.Ea.add(4),await au(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Wf(p)})(this))}))})),this.Ra=new $N(i,a)}}async function Wf(s){if(oo(s))for(const e of s.da)await e(!0)}async function au(s){for(const e of s.da)await e(!1)}function Fw(s,e){const t=Ye(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Zp(t)?Jp(t):wl(t).O_()&&Wp(t,e))}function Xp(s,e){const t=Ye(s),i=wl(t);t.Ia.delete(e),i.O_()&&Gw(t,e),t.Ia.size===0&&(i.O_()?i.L_():oo(t)&&t.Ra.set("Unknown"))}function Wp(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wl(s).Y_(e)}function Gw(s,e){s.Va.Ue(e),wl(s).Z_(e)}function Jp(s){s.Va=new BC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),wl(s).start(),s.Ra.ua()}function Zp(s){return oo(s)&&!wl(s).x_()&&s.Ia.size>0}function oo(s){return Ye(s).Ea.size===0}function $w(s){s.Va=void 0}async function YN(s){s.Ra.set("Online")}async function QN(s){s.Ia.forEach(((e,t)=>{Wp(s,e)}))}async function XN(s,e){$w(s),Zp(s)?(s.Ra.ha(e),Jp(s)):s.Ra.set("Unknown")}async function WN(s,e,t){if(s.Ra.set("Online"),e instanceof Iw&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,u),a.Ia.delete(d),a.Va.removeTarget(d))})(s,e)}catch(i){Ne(no,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ef(s,i)}else if(e instanceof ef?s.Va.Ze(e):e instanceof Nw?s.Va.st(e):s.Va.tt(e),!t.isEqual(Be.min()))try{const i=await qw(s.localStore);t.compareTo(i)>=0&&await(function(l,u){const d=l.Va.Tt(u);return d.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const v=l.Ia.get(p);v&&l.Ia.set(p,v.withResumeToken(m.resumeToken,u))}})),d.targetMismatches.forEach(((m,p)=>{const v=l.Ia.get(m);if(!v)return;l.Ia.set(m,v.withResumeToken(Kn.EMPTY_BYTE_STRING,v.snapshotVersion)),Gw(l,m);const b=new sa(v.target,m,p,v.sequenceNumber);Wp(l,b)})),l.remoteSyncer.applyRemoteEvent(d)})(s,t)}catch(i){Ne(no,"Failed to raise snapshot:",i),await Ef(s,i)}}async function Ef(s,e,t){if(!xl(e))throw e;s.Ea.add(1),await au(s),s.Ra.set("Offline"),t||(t=()=>qw(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Ne(no,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await Wf(s)}))}function Kw(s,e){return e().catch((t=>Ef(s,t,e)))}async function Jf(s){const e=Ye(s),t=pa(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Mp;for(;JN(e);)try{const a=await ON(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,ZN(e,a)}catch(a){await Ef(e,a)}Yw(e)&&Qw(e)}function JN(s){return oo(s)&&s.Ta.length<10}function ZN(s,e){s.Ta.push(e);const t=pa(s);t.O_()&&t.X_&&t.ea(e.mutations)}function Yw(s){return oo(s)&&!pa(s).x_()&&s.Ta.length>0}function Qw(s){pa(s).start()}async function eI(s){pa(s).ra()}async function tI(s){const e=pa(s);for(const t of s.Ta)e.ea(t.mutations)}async function nI(s,e,t){const i=s.Ta.shift(),a=qp.from(i,e,t);await Kw(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await Jf(s)}async function sI(s,e){e&&pa(s).X_&&await(async function(i,a){if((function(u){return Rw(u)&&u!==de.ABORTED})(a.code)){const l=i.Ta.shift();pa(i).B_(),await Kw(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Jf(i)}})(s,e),Yw(s)&&Qw(s)}async function h1(s,e){const t=Ye(s);t.asyncQueue.verifyOperationInProgress(),Ne(no,"RemoteStore received new credentials");const i=oo(t);t.Ea.add(3),await au(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Wf(t)}async function rI(s,e){const t=Ye(s);e?(t.Ea.delete(2),await Wf(t)):e||(t.Ea.add(2),await au(t),t.Ra.set("Unknown"))}function wl(s){return s.ma||(s.ma=(function(t,i,a){const l=Ye(t);return l.sa(),new qN(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Xo:YN.bind(null,s),t_:QN.bind(null,s),r_:XN.bind(null,s),H_:WN.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Zp(s)?Jp(s):s.Ra.set("Unknown")):(await s.ma.stop(),$w(s))}))),s.ma}function pa(s){return s.fa||(s.fa=(function(t,i,a){const l=Ye(t);return l.sa(),new HN(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:eI.bind(null,s),r_:sI.bind(null,s),ta:tI.bind(null,s),na:nI.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Jf(s)):(await s.fa.stop(),s.Ta.length>0&&(Ne(no,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class e0{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new la,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const u=Date.now()+i,d=new e0(e,t,u,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function t0(s,e){if(ii("AsyncQueue",`${e}: ${s}`),xl(s))return new Ae(de.UNAVAILABLE,`${e}: ${s}`);throw s}class el{static emptySet(e){return new el(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ve.comparator(t.key,i.key):(t,i)=>Ve.comparator(t.key,i.key),this.keyedMap=wc(),this.sortedSet=new Xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof el)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new el;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class f1{constructor(){this.ga=new Xt(Ve.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Le(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class dl{constructor(e,t,i,a,l,u,d,m,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,a,l){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new dl(e,t,el.emptySet(t),u,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class iI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class aI{constructor(){this.queries=d1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Ye(t),l=a.queries;a.queries=d1(),l.forEach(((u,d)=>{for(const m of d.Sa)m.onError(i)}))})(this,new Ae(de.ABORTED,"Firestore shutting down"))}}function d1(){return new ao((s=>mw(s)),Gf)}async function oI(s,e){const t=Ye(s);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(i=2):(l=new iI,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const d=t0(u,`Initialization of query '${Qo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&n0(t)}async function lI(s,e){const t=Ye(s),i=e.query;let a=3;const l=t.queries.get(i);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function cI(s,e){const t=Ye(s);let i=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const d of u.Sa)d.Fa(a)&&(i=!0);u.wa=a}}i&&n0(t)}function uI(s,e,t){const i=Ye(s),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);i.queries.delete(e)}function n0(s){s.Ca.forEach((e=>{e.next()}))}var hp,m1;(m1=hp||(hp={})).Ma="default",m1.Cache="cache";class hI{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new dl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=dl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==hp.Cache}}class Xw{constructor(e){this.key=e}}class Ww{constructor(e){this.key=e}}class fI{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ft(),this.mutatedKeys=ft(),this.eu=gw(e),this.tu=new el(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new f1,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,b)=>{const w=a.get(v),R=$f(this.query,b)?b:null,j=!!w&&this.mutatedKeys.has(w.key),z=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let D=!1;w&&R?w.data.isEqual(R.data)?j!==z&&(i.track({type:3,doc:R}),D=!0):this.su(w,R)||(i.track({type:2,doc:R}),D=!0,(m&&this.eu(R,m)>0||p&&this.eu(R,p)<0)&&(d=!0)):!w&&R?(i.track({type:0,doc:R}),D=!0):w&&!R&&(i.track({type:1,doc:w}),D=!0,(m||p)&&(d=!0)),D&&(R?(u=u.add(R),l=z?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{tu:u,iu:i,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,b)=>(function(R,j){const z=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le(20277,{Rt:D})}};return z(R)-z(j)})(v.type,b.type)||this.eu(v.doc,b.doc))),this.ou(i),a=a??!1;const d=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,p=m!==this.Za;return this.Za=m,u.length!==0||p?{snapshot:new dl(this.query,e.tu,l,u,e.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new f1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ft(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new Ww(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new Xw(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=ft();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return dl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const s0="SyncEngine";class dI{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class mI{constructor(e){this.key=e,this.hu=!1}}class gI{constructor(e,t,i,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new ao((d=>mw(d)),Gf),this.Iu=new Map,this.Eu=new Set,this.du=new Xt(Ve.comparator),this.Au=new Map,this.Ru=new Gp,this.Vu={},this.mu=new Map,this.fu=fl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function pI(s,e,t=!0){const i=sT(s);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await Jw(i,e,t,!0),a}async function yI(s,e){const t=sT(s);await Jw(t,e,!0,!1)}async function Jw(s,e,t,i){const a=await MN(s.localStore,Er(e)),l=a.targetId,u=s.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await vI(s,e,l,u==="current",a.resumeToken)),s.isPrimaryClient&&t&&Fw(s.remoteStore,a),d}async function vI(s,e,t,i,a){s.pu=(b,w,R)=>(async function(z,D,M,$){let B=D.view.ru(M);B.Cs&&(B=await a1(z.localStore,D.query,!1).then((({documents:C})=>D.view.ru(C,B))));const ce=$&&$.targetChanges.get(D.targetId),X=$&&$.targetMismatches.get(D.targetId)!=null,F=D.view.applyChanges(B,z.isPrimaryClient,ce,X);return p1(z,D.targetId,F.au),F.snapshot})(s,b,w,R);const l=await a1(s.localStore,e,!0),u=new fI(e,l.Qs),d=u.ru(l.documents),m=iu.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",a),p=u.applyChanges(d,s.isPrimaryClient,m);p1(s,t,p.au);const v=new dI(e,t,u);return s.Tu.set(e,v),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),p.snapshot}async function _I(s,e,t){const i=Ye(s),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((u=>!Gf(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await cp(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Xp(i.remoteStore,a.targetId),fp(i,a.targetId)})).catch(bl)):(fp(i,a.targetId),await cp(i.localStore,a.targetId,!0))}async function bI(s,e){const t=Ye(s),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Xp(t.remoteStore,i.targetId))}async function xI(s,e,t){const i=CI(s);try{const a=await(function(u,d){const m=Ye(u),p=Ht.now(),v=d.reduce(((R,j)=>R.add(j.key)),ft());let b,w;return m.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let j=ai(),z=ft();return m.Ns.getEntries(R,v).next((D=>{j=D,j.forEach(((M,$)=>{$.isValidDocument()||(z=z.add(M))}))})).next((()=>m.localDocuments.getOverlayedDocuments(R,j))).next((D=>{b=D;const M=[];for(const $ of d){const B=jC($,b.get($.key).overlayedDocument);B!=null&&M.push(new ba($.key,B,aw(B.value.mapValue),os.exists(!0)))}return m.mutationQueue.addMutationBatch(R,p,M,d)})).next((D=>{w=D;const M=D.applyToLocalDocumentSet(b,z);return m.documentOverlayCache.saveOverlays(R,D.batchId,M)}))})).then((()=>({batchId:w.batchId,changes:yw(b)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(u,d,m){let p=u.Vu[u.currentUser.toKey()];p||(p=new Xt(ht)),p=p.insert(d,m),u.Vu[u.currentUser.toKey()]=p})(i,a.batchId,t),await ou(i,a.changes),await Jf(i.remoteStore)}catch(a){const l=t0(a,"Failed to persist write");t.reject(l)}}async function Zw(s,e){const t=Ye(s);try{const i=await kN(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(bt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?bt(u.hu,14607):a.removedDocuments.size>0&&(bt(u.hu,42227),u.hu=!1))})),await ou(t,i,e)}catch(i){await bl(i)}}function g1(s,e,t){const i=Ye(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,u)=>{const d=u.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(u,d){const m=Ye(u);m.onlineState=d;let p=!1;m.queries.forEach(((v,b)=>{for(const w of b.Sa)w.va(d)&&(p=!0)})),p&&n0(m)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function wI(s,e,t){const i=Ye(s);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let u=new Xt(Ve.comparator);u=u.insert(l,Vn.newNoDocument(l,Be.min()));const d=ft().add(l),m=new Qf(Be.min(),new Map,new Xt(ht),u,d);await Zw(i,m),i.du=i.du.remove(l),i.Au.delete(e),r0(i)}else await cp(i.localStore,e,!1).then((()=>fp(i,e,t))).catch(bl)}async function TI(s,e){const t=Ye(s),i=e.batch.batchId;try{const a=await IN(t.localStore,e);tT(t,i,null),eT(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await ou(t,a)}catch(a){await bl(a)}}async function EI(s,e,t){const i=Ye(s);try{const a=await(function(u,d){const m=Ye(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return m.mutationQueue.lookupMutationBatch(p,d).next((b=>(bt(b!==null,37113),v=b.keys(),m.mutationQueue.removeMutationBatch(p,b)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,v,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>m.localDocuments.getDocuments(p,v)))}))})(i.localStore,e);tT(i,e,t),eT(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await ou(i,a)}catch(a){await bl(a)}}function eT(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function tT(s,e,t){const i=Ye(s);let a=i.Vu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function fp(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),t&&s.Pu.yu(i,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((i=>{s.Ru.containsKey(i)||nT(s,i)}))}function nT(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(Xp(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),r0(s))}function p1(s,e,t){for(const i of t)i instanceof Xw?(s.Ru.addReference(i.key,e),SI(s,i)):i instanceof Ww?(Ne(s0,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,e),s.Ru.containsKey(i.key)||nT(s,i.key)):Le(19791,{wu:i})}function SI(s,e){const t=e.key,i=t.path.canonicalString();s.du.get(t)||s.Eu.has(i)||(Ne(s0,"New document in limbo: "+t),s.Eu.add(i),r0(s))}function r0(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new Ve(Vt.fromString(e)),i=s.fu.next();s.Au.set(i,new mI(t)),s.du=s.du.insert(t,i),Fw(s.remoteStore,new sa(Er(Up(t.path)),i,"TargetPurposeLimboResolution",Hf.ce))}}async function ou(s,e,t){const i=Ye(s),a=[],l=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,m)=>{u.push(i.pu(m,e,t).then((p=>{if((p||t)&&i.isPrimaryClient){const v=p?!p.fromCache:t?.targetChanges.get(m.targetId)?.current;i.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(p){a.push(p);const v=Kp.As(m.targetId,p);l.push(v)}})))})),await Promise.all(u),i.Pu.H_(a),await(async function(m,p){const v=Ye(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>ge.forEach(p,(w=>ge.forEach(w.Es,(R=>v.persistence.referenceDelegate.addReference(b,w.targetId,R))).next((()=>ge.forEach(w.ds,(R=>v.persistence.referenceDelegate.removeReference(b,w.targetId,R)))))))))}catch(b){if(!xl(b))throw b;Ne(Yp,"Failed to update sequence numbers: "+b)}for(const b of p){const w=b.targetId;if(!b.fromCache){const R=v.Ms.get(w),j=R.snapshotVersion,z=R.withLastLimboFreeSnapshotVersion(j);v.Ms=v.Ms.insert(w,z)}}})(i.localStore,l))}async function AI(s,e){const t=Ye(s);if(!t.currentUser.isEqual(e)){Ne(s0,"User change. New user:",e.toKey());const i=await Bw(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((d=>{d.forEach((m=>{m.reject(new Ae(de.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ou(t,i.Ls)}}function RI(s,e){const t=Ye(s),i=t.Au.get(e);if(i&&i.hu)return ft().add(i.key);{let a=ft();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const d=t.Tu.get(u);a=a.unionWith(d.view.nu)}return a}}function sT(s){const e=Ye(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wI.bind(null,e),e.Pu.H_=cI.bind(null,e.eventManager),e.Pu.yu=uI.bind(null,e.eventManager),e}function CI(s){const e=Ye(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EI.bind(null,e),e}class Sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return NN(this.persistence,new AN,e.initialUser,this.serializer)}Cu(e){return new zw($p.mi,this.serializer)}Du(e){return new VN}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sf.provider={build:()=>new Sf};class NI extends Sf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){bt(this.persistence.referenceDelegate instanceof Tf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new hN(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?vs.withCacheSize(this.cacheSizeBytes):vs.DEFAULT;return new zw((i=>Tf.mi(i,t)),this.serializer)}}class dp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>g1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=AI.bind(null,this.syncEngine),await rI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new aI})()}createDatastore(e){const t=Xf(e.databaseInfo.databaseId),i=(function(l){return new BN(l)})(e.databaseInfo);return(function(l,u,d,m){return new GN(l,u,d,m)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,u,d){return new KN(i,a,l,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>g1(this.syncEngine,t,0)),(function(){return c1.v()?new c1:new PN})())}createSyncEngine(e,t){return(function(a,l,u,d,m,p,v){const b=new gI(a,l,u,d,m,p);return v&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Ye(t);Ne(no,"RemoteStore shutting down."),i.Ea.add(5),await au(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}dp.provider={build:()=>new dp};class II{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ii("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class kI{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ae(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(a,l){const u=Ye(a),d={documents:l.map((b=>wf(u.serializer,b)))},m=await u.Ho("BatchGetDocuments",u.serializer.databaseId,Vt.emptyPath(),d,l.length),p=new Map;m.forEach((b=>{const w=YC(u.serializer,b);p.set(w.key.toString(),w)}));const v=[];return l.forEach((b=>{const w=p.get(b.toString());bt(!!w,55234,{key:b}),v.push(w)})),v})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Bp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const a=Ve.fromPath(i);this.mutations.push(new Aw(a,this.precondition(a)))})),await(async function(i,a){const l=Ye(i),u={writes:a.map((d=>jw(l.serializer,d)))};await l.Go("Commit",l.serializer.databaseId,Vt.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Le(50498,{Gu:e.constructor.name});t=Be.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Ae(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Be.min())?os.exists(!1):os.updateTime(t):os.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Be.min()))throw new Ae(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return os.updateTime(t)}return os.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class DI{constructor(e,t,i,a,l){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=a,this.deferred=l,this.zu=i.maxAttempts,this.M_=new Qp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new kI(this.datastore),t=this.Hu(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((a=>{this.Yu(a)}))))})).catch((i=>{this.Yu(i)}))}))}Hu(e){try{const t=this.updateFunction(e);return!nu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Rw(t)}return!1}}const ya="FirestoreClient";class OI{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Jn.UNAUTHENTICATED,this.clientId=Op.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async u=>{Ne(ya,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(Ne(ya,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new la;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=t0(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Cg(s,e){s.asyncQueue.verifyOperationInProgress(),Ne(ya,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async a=>{i.isEqual(a)||(await Bw(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function y1(s,e){s.asyncQueue.verifyOperationInProgress();const t=await MI(s);Ne(ya,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>h1(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,a)=>h1(e.remoteStore,a))),s._onlineComponents=e}async function MI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Ne(ya,"Using user provided OfflineComponentProvider");try{await Cg(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===de.FAILED_PRECONDITION||a.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;ll("Error using user provided cache. Falling back to memory cache: "+t),await Cg(s,new Sf)}}else Ne(ya,"Using default OfflineComponentProvider"),await Cg(s,new NI(void 0));return s._offlineComponents}async function i0(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Ne(ya,"Using user provided OnlineComponentProvider"),await y1(s,s._uninitializedComponentsProvider._online)):(Ne(ya,"Using default OnlineComponentProvider"),await y1(s,new dp))),s._onlineComponents}function jI(s){return i0(s).then((e=>e.syncEngine))}function VI(s){return i0(s).then((e=>e.datastore))}async function v1(s){const e=await i0(s),t=e.eventManager;return t.onListen=pI.bind(null,e.syncEngine),t.onUnlisten=_I.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=yI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=bI.bind(null,e.syncEngine),t}function rT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const _1=new Map;const iT="firestore.googleapis.com",b1=!0;class x1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=iT,this.ssl=b1}else this.host=e.host,this.ssl=e.ssl??b1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Uw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cN)throw new Ae(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rT(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ae(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ae(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ae(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zf{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new x1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new x1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new UR;switch(i.type){case"firstParty":return new HR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ae(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=_1.get(t);i&&(Ne("ComponentProvider","Removing Datastore"),_1.delete(t),i.terminate())})(this),Promise.resolve()}}function PI(s,e,t,i={}){s=ti(s,Zf);const a=yl(e),l=s._getSettings(),u={...l,emulatorOptions:s._getEmulatorOptions()},d=`${e}:${t}`;a&&(Ox(`https://${d}`),Mx("Firestore",!0)),l.host!==iT&&l.host!==d&&ll("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:d,ssl:a,emulatorOptions:i};if(!Za(m,u)&&(s._setSettings(m),i.mockUserToken)){let p,v;if(typeof i.mockUserToken=="string")p=i.mockUserToken,v=Jn.MOCK_USER;else{p=f2(i.mockUserToken,s._app?.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new Ae(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Jn(b)}s._authCredentials=new zR(new Yx(p,v))}}class Tl{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Tl(this.firestore,e,this._query)}}class nn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ca(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}toJSON(){return{type:nn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(tu(t,nn._jsonSchema))return new nn(e,i||null,new Ve(Vt.fromString(t.referencePath)))}}nn._jsonSchemaVersion="firestore/documentReference/1.0",nn._jsonSchema={type:wn("string",nn._jsonSchemaVersion),referencePath:wn("string")};class ca extends Tl{constructor(e,t,i){super(e,t,Up(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new Ve(e))}withConverter(e){return new ca(this.firestore,e,this._path)}}function St(s,e,...t){if(s=Pn(s),Qx("collection","path",e),s instanceof Zf){const i=Vt.fromString(e,...t);return Ob(i),new ca(s,null,i)}{if(!(s instanceof nn||s instanceof ca))throw new Ae(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Vt.fromString(e,...t));return Ob(i),new ca(s.firestore,null,i)}}function At(s,e,...t){if(s=Pn(s),arguments.length===1&&(e=Op.newId()),Qx("doc","path",e),s instanceof Zf){const i=Vt.fromString(e,...t);return Db(i),new nn(s,null,new Ve(i))}{if(!(s instanceof nn||s instanceof ca))throw new Ae(de.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Vt.fromString(e,...t));return Db(i),new nn(s.firestore,s instanceof ca?s.converter:null,new Ve(i))}}const w1="AsyncQueue";class T1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Qp(this,"async_queue_retry"),this._c=()=>{const i=Rg();i&&Ne(w1,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Rg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Rg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new la;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!xl(e))throw e;Ne(w1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ii("INTERNAL UNHANDLED ERROR: ",E1(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=e0.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Le(47125,{Pc:E1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function E1(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}function S1(s){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(s,["next","error","complete"])}class ml extends Zf{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new T1,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new T1(e),this._firestoreClient=void 0,await e}}}function LI(s,e){const t=typeof s=="object"?s:Lx(),i=typeof s=="string"?s:gf,a=kp(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=u2("firestore");l&&PI(a,...l)}return a}function a0(s){if(s._terminated)throw new Ae(de.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||UI(s),s._firestoreClient}function UI(s){const e=s._freezeSettings(),t=(function(a,l,u,d){return new aC(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,rT(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new OI(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(s._componentsProvider))}class Cs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cs(Kn.fromBase64String(e))}catch(t){throw new Ae(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Cs(Kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Cs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(tu(e,Cs._jsonSchema))return Cs.fromBase64String(e.bytes)}}Cs._jsonSchemaVersion="firestore/bytes/1.0",Cs._jsonSchema={type:wn("string",Cs._jsonSchemaVersion),bytes:wn("string")};class lu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ae(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class o0{constructor(e){this._methodName=e}}class Sr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ht(this._lat,e._lat)||ht(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Sr._jsonSchemaVersion}}static fromJSON(e){if(tu(e,Sr._jsonSchema))return new Sr(e.latitude,e.longitude)}}Sr._jsonSchemaVersion="firestore/geoPoint/1.0",Sr._jsonSchema={type:wn("string",Sr._jsonSchemaVersion),latitude:wn("number"),longitude:wn("number")};class Ar{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ar._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(tu(e,Ar._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ar(e.vectorValues);throw new Ae(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ar._jsonSchemaVersion="firestore/vectorValue/1.0",Ar._jsonSchema={type:wn("string",Ar._jsonSchemaVersion),vectorValues:wn("object")};const zI=/^__.*__$/;class BI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ba(e,this.data,this.fieldMask,t,this.fieldTransforms):new ru(e,this.data,t,this.fieldTransforms)}}class aT{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ba(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function oT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le(40011,{Ac:s})}}class l0{constructor(e,t,i,a,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new l0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Af(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(oT(this.Ac)&&zI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class qI{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Xf(e)}Cc(e,t,i,a=!1){return new l0({Ac:e,methodName:t,Dc:i,path:$n.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ed(s){const e=s._freezeSettings(),t=Xf(s._databaseId);return new qI(s._databaseId,!!e.ignoreUndefinedProperties,t)}function lT(s,e,t,i,a,l={}){const u=s.Cc(l.merge||l.mergeFields?2:0,e,t,a);c0("Data must be an object, but it was:",u,i);const d=hT(i,u);let m,p;if(l.merge)m=new Ns(u.fieldMask),p=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const b of l.mergeFields){const w=mp(e,b,t);if(!u.contains(w))throw new Ae(de.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);dT(v,w)||v.push(w)}m=new Ns(v),p=u.fieldTransforms.filter((b=>m.covers(b.field)))}else m=null,p=u.fieldTransforms;return new BI(new as(d),m,p)}class td extends o0{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof td}}function cT(s,e,t,i){const a=s.Cc(1,e,t);c0("Data must be an object, but it was:",a,i);const l=[],u=as.empty();_a(i,((m,p)=>{const v=u0(e,m,t);p=Pn(p);const b=a.yc(v);if(p instanceof td)l.push(v);else{const w=cu(p,b);w!=null&&(l.push(v),u.set(v,w))}}));const d=new Ns(l);return new aT(u,d,a.fieldTransforms)}function uT(s,e,t,i,a,l){const u=s.Cc(1,e,t),d=[mp(e,i,t)],m=[a];if(l.length%2!=0)throw new Ae(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)d.push(mp(e,l[w])),m.push(l[w+1]);const p=[],v=as.empty();for(let w=d.length-1;w>=0;--w)if(!dT(p,d[w])){const R=d[w];let j=m[w];j=Pn(j);const z=u.yc(R);if(j instanceof td)p.push(R);else{const D=cu(j,z);D!=null&&(p.push(R),v.set(R,D))}}const b=new Ns(p);return new aT(v,b,u.fieldTransforms)}function HI(s,e,t,i=!1){return cu(t,s.Cc(i?4:3,e))}function cu(s,e){if(fT(s=Pn(s)))return c0("Unsupported field value:",e,s),hT(s,e);if(s instanceof o0)return(function(i,a){if(!oT(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const l=[];let u=0;for(const d of i){let m=cu(d,a.wc(u));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),u++}return{arrayValue:{values:l}}})(s,e)}return(function(i,a){if((i=Pn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return NC(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Ht.fromDate(i);return{timestampValue:xf(a.serializer,l)}}if(i instanceof Ht){const l=new Ht(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:xf(a.serializer,l)}}if(i instanceof Sr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Cs)return{bytesValue:kw(a.serializer,i._byteString)};if(i instanceof nn){const l=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Fp(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Ar)return(function(u,d){return{mapValue:{fields:{[rw]:{stringValue:iw},[pf]:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw d.Sc("VectorValues must only contain numeric values.");return zp(d.serializer,p)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${qf(i)}`)})(s,e)}function hT(s,e){const t={};return Jx(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_a(s,((i,a)=>{const l=cu(a,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function fT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Ht||s instanceof Sr||s instanceof Cs||s instanceof nn||s instanceof o0||s instanceof Ar)}function c0(s,e,t){if(!fT(t)||!Xx(t)){const i=qf(t);throw i==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+i)}}function mp(s,e,t){if((e=Pn(e))instanceof lu)return e._internalPath;if(typeof e=="string")return u0(s,e);throw Af("Field path arguments must be of type string or ",s,!1,void 0,t)}const FI=new RegExp("[~\\*/\\[\\]]");function u0(s,e,t){if(e.search(FI)>=0)throw Af(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new lu(...e.split("."))._internalPath}catch{throw Af(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Af(s,e,t,i,a){const l=i&&!i.isEmpty(),u=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||u)&&(m+=" (found",l&&(m+=` in field ${i}`),u&&(m+=` in document ${a}`),m+=")"),new Ae(de.INVALID_ARGUMENT,d+s+m)}function dT(s,e){return s.some((t=>t.isEqual(e)))}class Rf{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(h0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class GI extends Rf{data(){return super.data()}}function h0(s,e){return typeof e=="string"?u0(s,e):e instanceof lu?e._internalPath:e._delegate._internalPath}function $I(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ae(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class f0{}class KI extends f0{}function YI(s,e,...t){let i=[];e instanceof f0&&i.push(e),i=i.concat(t),(function(l){const u=l.filter((m=>m instanceof d0)).length,d=l.filter((m=>m instanceof nd)).length;if(u>1||u>0&&d>0)throw new Ae(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)s=a._apply(s);return s}class nd extends KI{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new nd(e,t,i)}_apply(e){const t=this._parse(e);return mT(e._query,t),new Tl(e.firestore,e.converter,rp(e._query,t))}_parse(e){const t=ed(e.firestore);return(function(l,u,d,m,p,v,b){let w;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Ae(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){R1(b,v);const j=[];for(const z of b)j.push(A1(m,l,z));w={arrayValue:{values:j}}}else w=A1(m,l,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||R1(b,v),w=HI(d,u,b,v==="in"||v==="not-in");return xn.create(p,v,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function QI(s,e,t){const i=e,a=h0("where",s);return nd._create(a,i,t)}class d0 extends f0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new d0(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:ur.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const d=l.getFlattenedFilters();for(const m of d)mT(u,m),u=rp(u,m)})(e._query,t),new Tl(e.firestore,e.converter,rp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function A1(s,e,t){if(typeof(t=Pn(t))=="string"){if(t==="")throw new Ae(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dw(e)&&t.indexOf("/")!==-1)throw new Ae(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Vt.fromString(t));if(!Ve.isDocumentKey(i))throw new Ae(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Bb(s,new Ve(i))}if(t instanceof nn)return Bb(s,t._key);throw new Ae(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qf(t)}.`)}function R1(s,e){if(!Array.isArray(s)||s.length===0)throw new Ae(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mT(s,e){const t=(function(a,l){for(const u of a)for(const d of u.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(s.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ae(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class gT{convertValue(e,t="none"){switch(ga(e)){case 0:return null;case 1:return e.booleanValue;case 2:return un(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ma(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Le(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return _a(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[pf].arrayValue?.values?.map((i=>un(i.doubleValue)));return new Ar(t)}convertGeoPoint(e){return new Sr(un(e.latitude),un(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Ff(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Hc(e));default:return null}}convertTimestamp(e){const t=da(e);return new Ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Vt.fromString(e);bt(Lw(i),9688,{name:e});const a=new Fc(i.get(1),i.get(3)),l=new Ve(i.popFirst(5));return a.isEqual(t)||ii(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function pT(s,e,t){let i;return i=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,i}class XI extends gT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,t)}}class Jo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ua extends Rf{constructor(e,t,i,a,l,u){super(e,t,i,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new tf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(h0("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ua._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ua._jsonSchemaVersion="firestore/documentSnapshot/1.0",ua._jsonSchema={type:wn("string",ua._jsonSchemaVersion),bundleSource:wn("string","DocumentSnapshot"),bundleName:wn("string"),bundle:wn("string")};class tf extends ua{data(e={}){return super.data(e)}}class tl{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Jo(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new tf(this._firestore,this._userDataWriter,i.key,i,new Jo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((d=>{const m=new tf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Jo(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new tf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Jo(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,v=-1;return d.type!==0&&(p=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:WI(d.type),doc:m,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=tl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Op.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function WI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le(61501,{type:s})}}tl._jsonSchemaVersion="firestore/querySnapshot/1.0",tl._jsonSchema={type:wn("string",tl._jsonSchemaVersion),bundleSource:wn("string","QuerySnapshot"),bundleName:wn("string"),bundle:wn("string")};class m0 extends gT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,t)}}function sd(s,e,t){s=ti(s,nn);const i=ti(s.firestore,ml),a=pT(s.converter,e,t);return yT(i,[lT(ed(i),"setDoc",s._key,a,s.converter!==null,t).toMutation(s._key,os.none())])}function ar(s,e,t,...i){s=ti(s,nn);const a=ti(s.firestore,ml),l=ed(a);let u;return u=typeof(e=Pn(e))=="string"||e instanceof lu?uT(l,"updateDoc",s._key,e,t,i):cT(l,"updateDoc",s._key,e),yT(a,[u.toMutation(s._key,os.exists(!0))])}function rd(s,...e){s=Pn(s);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||S1(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(S1(e[i])){const m=e[i];e[i]=m.next?.bind(m),e[i+1]=m.error?.bind(m),e[i+2]=m.complete?.bind(m)}let l,u,d;if(s instanceof nn)u=ti(s.firestore,ml),d=Up(s._key.path),l={next:m=>{e[i]&&e[i](JI(u,s,m))},error:e[i+1],complete:e[i+2]};else{const m=ti(s,Tl);u=ti(m.firestore,ml),d=m._query;const p=new m0(u);l={next:v=>{e[i]&&e[i](new tl(u,p,m,v))},error:e[i+1],complete:e[i+2]},$I(s._query)}return(function(p,v,b,w){const R=new II(w),j=new hI(v,R,b);return p.asyncQueue.enqueueAndForget((async()=>oI(await v1(p),j))),()=>{R.Nu(),p.asyncQueue.enqueueAndForget((async()=>lI(await v1(p),j)))}})(a0(u),d,a,l)}function yT(s,e){return(function(i,a){const l=new la;return i.asyncQueue.enqueueAndForget((async()=>xI(await jI(i),a,l))),l.promise})(a0(s),e)}function JI(s,e,t){const i=t.docs.get(e._key),a=new m0(s);return new ua(s,a,e._key,i,new Jo(t.hasPendingWrites,t.fromCache),e.converter)}const ZI={maxAttempts:5};function Ec(s,e){if((s=Pn(s)).firestore!==e)throw new Ae(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class ek{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ed(e)}get(e){const t=Ec(e,this._firestore),i=new XI(this._firestore);return this._transaction.lookup([t._key]).then((a=>{if(!a||a.length!==1)return Le(24041);const l=a[0];if(l.isFoundDocument())return new Rf(this._firestore,i,l.key,l,t.converter);if(l.isNoDocument())return new Rf(this._firestore,i,t._key,null,t.converter);throw Le(18433,{doc:l})}))}set(e,t,i){const a=Ec(e,this._firestore),l=pT(a.converter,t,i),u=lT(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,i);return this._transaction.set(a._key,u),this}update(e,t,i,...a){const l=Ec(e,this._firestore);let u;return u=typeof(t=Pn(t))=="string"||t instanceof lu?uT(this._dataReader,"Transaction.update",l._key,t,i,a):cT(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,u),this}delete(e){const t=Ec(e,this._firestore);return this._transaction.delete(t._key),this}}class tk extends ek{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ec(e,this._firestore),i=new m0(this._firestore);return super.get(e).then((a=>new ua(this._firestore,i,t._key,a._document,new Jo(!1,!1),t.converter)))}}function Rs(s,e,t){s=ti(s,ml);const i={...ZI,...t};return(function(l){if(l.maxAttempts<1)throw new Ae(de.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(l,u,d){const m=new la;return l.asyncQueue.enqueueAndForget((async()=>{const p=await VI(l);new DI(l.asyncQueue,p,d,u,m).ju()})),m.promise})(a0(s),(a=>e(new tk(s,a))),i)}(function(e,t=!0){(function(a){_l=a})(vl),ol(new eo("firestore",((i,{instanceIdentifier:a,options:l})=>{const u=i.getProvider("app").getImmediate(),d=new ml(new BR(i.getProvider("auth-internal")),new FR(u,i.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ae(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fc(p.options.projectId,v)})(u,a),u);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),aa(Cb,Nb,e),aa(Cb,Nb,"esm2020")})();function vT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nk=vT,_T=new Zc("auth","Firebase",vT());const Cf=new Np("@firebase/auth");function sk(s,...e){Cf.logLevel<=ut.WARN&&Cf.warn(`Auth (${vl}): ${s}`,...e)}function nf(s,...e){Cf.logLevel<=ut.ERROR&&Cf.error(`Auth (${vl}): ${s}`,...e)}function oi(s,...e){throw g0(s,...e)}function Rr(s,...e){return g0(s,...e)}function bT(s,e,t){const i={...nk(),[e]:t};return new Zc("auth","Firebase",i).create(e,{appName:s.name})}function ha(s){return bT(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function g0(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return _T.create(s,...e)}function Ge(s,e,...t){if(!s)throw g0(e,...t)}function Zr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw nf(e),new Error(e)}function li(s,e){s||Zr(e)}function gp(){return typeof self<"u"&&self.location?.href||""}function rk(){return C1()==="http:"||C1()==="https:"}function C1(){return typeof self<"u"&&self.location?.protocol||null}function ik(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rk()||v2()||"connection"in navigator)?navigator.onLine:!0}function ak(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class uu{constructor(e,t){this.shortDelay=e,this.longDelay=t,li(t>e,"Short delay should be less than long delay!"),this.isMobile=g2()||_2()}get(){return ik()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function p0(s,e){li(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class xT{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ok={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const lk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ck=new uu(3e4,6e4);function id(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function El(s,e,t,i,a={}){return wT(s,a,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const d=eu({key:s.config.apiKey,...u}).slice(1),m=await s._getAdditionalHeaders();m["Content-Type"]="application/json",s.languageCode&&(m["X-Firebase-Locale"]=s.languageCode);const p={method:e,headers:m,...l};return y2()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&yl(s.emulatorConfig.host)&&(p.credentials="include"),xT.fetch()(await ET(s,s.config.apiHost,t,d),p)})}async function wT(s,e,t){s._canInitEmulator=!1;const i={...ok,...e};try{const a=new uk(s),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw qh(s,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const d=l.ok?u.errorMessage:u.error.message,[m,p]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw qh(s,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw qh(s,"email-already-in-use",u);if(m==="USER_DISABLED")throw qh(s,"user-disabled",u);const v=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw bT(s,v,p);oi(s,v)}}catch(a){if(a instanceof ui)throw a;oi(s,"network-request-failed",{message:String(a)})}}async function TT(s,e,t,i,a={}){const l=await El(s,e,t,i,a);return"mfaPendingCredential"in l&&oi(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function ET(s,e,t,i){const a=`${e}${t}?${i}`,l=s,u=l.config.emulator?p0(s.config,a):`${s.config.apiScheme}://${a}`;return lk.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}class uk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Rr(this.auth,"network-request-failed")),ck.get())})}}function qh(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Rr(s,e,i);return a.customData._tokenResponse=t,a}async function hk(s,e){return El(s,"POST","/v1/accounts:delete",e)}async function Nf(s,e){return El(s,"POST","/v1/accounts:lookup",e)}function Mc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fk(s,e=!1){const t=Pn(s),i=await t.getIdToken(e),a=y0(i);Ge(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l?.sign_in_provider;return{claims:a,token:i,authTime:Mc(Ng(a.auth_time)),issuedAtTime:Mc(Ng(a.iat)),expirationTime:Mc(Ng(a.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Ng(s){return Number(s)*1e3}function y0(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return nf("JWT malformed, contained fewer than 3 sections"),null;try{const a=Nx(t);return a?JSON.parse(a):(nf("Failed to decode base64 JWT payload"),null)}catch(a){return nf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function N1(s){const e=y0(s);return Ge(e,"internal-error"),Ge(typeof e.exp<"u","internal-error"),Ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Yc(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ui&&dk(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function dk({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class mk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class pp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mc(this.lastLoginAt),this.creationTime=Mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function If(s){const e=s.auth,t=await s.getIdToken(),i=await Yc(s,Nf(e,{idToken:t}));Ge(i?.users.length,e,"internal-error");const a=i.users[0];s._notifyReloadListener(a);const l=a.providerUserInfo?.length?ST(a.providerUserInfo):[],u=pk(s.providerData,l),d=s.isAnonymous,m=!(s.email&&a.passwordHash)&&!u?.length,p=d?m:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new pp(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(s,v)}async function gk(s){const e=Pn(s);await If(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pk(s,e){return[...s.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function ST(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function yk(s,e){const t=await wT(s,{},async()=>{const i=eu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=s.config,u=await ET(s,a,"/v1/token",`key=${l}`),d=await s._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:i};return s.emulatorConfig&&yl(s.emulatorConfig.host)&&(m.credentials="include"),xT.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function vk(s,e){return El(s,"POST","/v2/accounts:revokeToken",id(s,e))}class nl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ge(e.idToken,"internal-error"),Ge(typeof e.idToken<"u","internal-error"),Ge(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):N1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ge(e.length!==0,"internal-error");const t=N1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await yk(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,u=new nl;return i&&(Ge(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(Ge(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(Ge(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new nl,this.toJSON())}_performRefresh(){return Zr("not implemented")}}function Ki(s,e){Ge(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class lr{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new mk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new pp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Yc(this,this.stsTokenManager.getToken(this.auth,e));return Ge(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return fk(this,e)}reload(){return gk(this)}_assign(e){this!==e&&(Ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new lr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await If(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(or(this.auth.app))return Promise.reject(ha(this.auth));const e=await this.getIdToken();return await Yc(this,hk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:b,emailVerified:w,isAnonymous:R,providerData:j,stsTokenManager:z}=t;Ge(b&&z,e,"internal-error");const D=nl.fromJSON(this.name,z);Ge(typeof b=="string",e,"internal-error"),Ki(i,e.name),Ki(a,e.name),Ge(typeof w=="boolean",e,"internal-error"),Ge(typeof R=="boolean",e,"internal-error"),Ki(l,e.name),Ki(u,e.name),Ki(d,e.name),Ki(m,e.name),Ki(p,e.name),Ki(v,e.name);const M=new lr({uid:b,auth:e,email:a,emailVerified:w,displayName:i,isAnonymous:R,photoURL:u,phoneNumber:l,tenantId:d,stsTokenManager:D,createdAt:p,lastLoginAt:v});return j&&Array.isArray(j)&&(M.providerData=j.map($=>({...$}))),m&&(M._redirectEventId=m),M}static async _fromIdTokenResponse(e,t,i=!1){const a=new nl;a.updateFromServerResponse(t);const l=new lr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await If(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Ge(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?ST(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!l?.length,d=new nl;d.updateFromIdToken(i);const m=new lr({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:u}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new pp(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,p),m}}const I1=new Map;function ei(s){li(s instanceof Function,"Expected a class definition");let e=I1.get(s);return e?(li(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,I1.set(s,e),e)}class AT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}AT.type="NONE";const k1=AT;function sf(s,e,t){return`firebase:${s}:${e}:${t}`}class sl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=sf(this.userKey,a.apiKey,l),this.fullPersistenceKey=sf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Nf(this.auth,{idToken:e}).catch(()=>{});return t?lr._fromGetAccountInfoResponse(this.auth,t,e):null}return lr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new sl(ei(k1),e,i);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||ei(k1);const u=sf(i,e.config.apiKey,e.name);let d=null;for(const p of t)try{const v=await p._get(u);if(v){let b;if(typeof v=="string"){const w=await Nf(e,{idToken:v}).catch(()=>{});if(!w)break;b=await lr._fromGetAccountInfoResponse(e,w,v)}else b=lr._fromJSON(e,v);p!==l&&(d=b),l=p;break}}catch{}const m=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new sl(l,e,i):(l=m[0],d&&await l._set(u,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(u)}catch{}})),new sl(l,e,i))}}function D1(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DT(e))return"Blackberry";if(OT(e))return"Webos";if(CT(e))return"Safari";if((e.includes("chrome/")||NT(e))&&!e.includes("edge/"))return"Chrome";if(kT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if(i?.length===2)return i[1]}return"Other"}function RT(s=Zn()){return/firefox\//i.test(s)}function CT(s=Zn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NT(s=Zn()){return/crios\//i.test(s)}function IT(s=Zn()){return/iemobile/i.test(s)}function kT(s=Zn()){return/android/i.test(s)}function DT(s=Zn()){return/blackberry/i.test(s)}function OT(s=Zn()){return/webos/i.test(s)}function v0(s=Zn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function _k(s=Zn()){return v0(s)&&!!window.navigator?.standalone}function bk(){return b2()&&document.documentMode===10}function MT(s=Zn()){return v0(s)||kT(s)||OT(s)||DT(s)||/windows phone/i.test(s)||IT(s)}function jT(s,e=[]){let t;switch(s){case"Browser":t=D1(Zn());break;case"Worker":t=`${D1(Zn())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${vl}/${i}`}class xk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,d)=>{try{const m=e(l);u(m)}catch(m){d(m)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function wk(s,e={}){return El(s,"GET","/v2/passwordPolicy",id(s,e))}const Tk=6;class Ek{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Tk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class Sk{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new O1(this),this.idTokenSubscription=new O1(this),this.beforeStateQueue=new xk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_T,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ei(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await sl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Nf(this,{idToken:e}),i=await lr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(or(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,u=i?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===u)&&d?.user&&(i=d.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await If(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ak()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(or(this.app))return Promise.reject(ha(this));const t=e?Pn(e):null;return t&&Ge(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return or(this.app)?Promise.reject(ha(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return or(this.app)?Promise.reject(ha(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ei(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wk(this),t=new Ek(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await vk(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ei(e)||this._popupRedirectResolver;Ge(t,this,"argument-error"),this.redirectPersistenceManager=await sl.create(this,[ei(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ge(d,this,"internal-error"),d.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,a);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&sk(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ad(s){return Pn(s)}class O1{constructor(e){this.auth=e,this.observer=null,this.addObserver=C2(t=>this.observer=t)}get next(){return Ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let _0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ak(s){_0=s}function Rk(s){return _0.loadJS(s)}function Ck(){return _0.gapiScript}function Nk(s){return`__${s}${Math.floor(Math.random()*1e6)}`}function Ik(s,e){const t=kp(s,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Za(l,e??{}))return a;oi(a,"already-initialized")}return t.initialize({options:e})}function kk(s,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(ei);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function Dk(s,e,t){const i=ad(s);Ge(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=VT(e),{host:u,port:d}=Ok(e),m=d===null?"":`:${d}`,p={url:`${l}//${u}${m}/`},v=Object.freeze({host:u,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Ge(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ge(Za(p,i.config.emulator)&&Za(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,yl(u)?(Ox(`${l}//${u}${m}`),Mx("Auth",!0)):Mk()}function VT(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function Ok(s){const e=VT(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:M1(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:M1(u)}}}function M1(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function Mk(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class PT{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zr("not implemented")}_getIdTokenResponse(e){return Zr("not implemented")}_linkToIdToken(e,t){return Zr("not implemented")}_getReauthenticationResolver(e){return Zr("not implemented")}}async function rl(s,e){return TT(s,"POST","/v1/accounts:signInWithIdp",id(s,e))}const jk="http://localhost";class so extends PT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new so(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):oi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const u=new so(i,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return rl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,rl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,rl(e,t)}buildRequest(){const e={requestUri:jk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=eu(t)}return e}}class LT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class hu extends LT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Zi extends hu{constructor(){super("facebook.com")}static credential(e){return so._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zi.credential(e.oauthAccessToken)}catch{return null}}}Zi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zi.PROVIDER_ID="facebook.com";class ea extends hu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return so._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ea.credential(t,i)}catch{return null}}}ea.GOOGLE_SIGN_IN_METHOD="google.com";ea.PROVIDER_ID="google.com";class ta extends hu{constructor(){super("github.com")}static credential(e){return so._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ta.credential(e.oauthAccessToken)}catch{return null}}}ta.GITHUB_SIGN_IN_METHOD="github.com";ta.PROVIDER_ID="github.com";class na extends hu{constructor(){super("twitter.com")}static credential(e,t){return so._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return na.credential(t,i)}catch{return null}}}na.TWITTER_SIGN_IN_METHOD="twitter.com";na.PROVIDER_ID="twitter.com";async function Vk(s,e){return TT(s,"POST","/v1/accounts:signUp",id(s,e))}class va{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await lr._fromIdTokenResponse(e,i,a),u=j1(i);return new va({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=j1(i);return new va({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function j1(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}async function ro(s){if(or(s.app))return Promise.reject(ha(s));const e=ad(s);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new va({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await Vk(e,{returnSecureToken:!0}),i=await va._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(i.user),i}class kf extends ui{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,kf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new kf(e,t,i,a)}}function UT(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?kf._fromErrorAndOperation(s,l,e,i):l})}async function Pk(s,e,t=!1){const i=await Yc(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return va._forOperation(s,"link",i)}async function Lk(s,e,t=!1){const{auth:i}=s;if(or(i.app))return Promise.reject(ha(i));const a="reauthenticate";try{const l=await Yc(s,UT(i,a,e,s),t);Ge(l.idToken,i,"internal-error");const u=y0(l.idToken);Ge(u,i,"internal-error");const{sub:d}=u;return Ge(s.uid===d,i,"user-mismatch"),va._forOperation(s,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&oi(i,"user-mismatch"),l}}async function Uk(s,e,t=!1){if(or(s.app))return Promise.reject(ha(s));const i="signIn",a=await UT(s,i,e),l=await va._fromIdTokenResponse(s,i,a);return t||await s._updateCurrentUser(l.user),l}function zk(s,e,t,i){return Pn(s).onIdTokenChanged(e,t,i)}function Bk(s,e,t){return Pn(s).beforeAuthStateChanged(e,t)}const Df="__sak";class zT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Df,"1"),this.storage.removeItem(Df),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const qk=1e3,Hk=10;class BT extends zT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,m)=>{this.notifyListeners(u,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);bk()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Hk):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},qk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}BT.type="LOCAL";const Fk=BT;class qT extends zT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}qT.type="SESSION";const HT=qT;function Gk(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class od{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new od(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(u).map(async p=>p(t.origin,l)),m=await Gk(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}od.receivers=[];function b0(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}class $k{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((d,m)=>{const p=b0("",20);a.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(b){const w=b;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(w.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function Cr(){return window}function Kk(s){Cr().location.href=s}function FT(){return typeof Cr().WorkerGlobalScope<"u"&&typeof Cr().importScripts=="function"}async function Yk(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Qk(){return navigator?.serviceWorker?.controller||null}function Xk(){return FT()?self:null}const GT="firebaseLocalStorageDb",Wk=1,Of="firebaseLocalStorage",$T="fbase_key";class fu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ld(s,e){return s.transaction([Of],e?"readwrite":"readonly").objectStore(Of)}function Jk(){const s=indexedDB.deleteDatabase(GT);return new fu(s).toPromise()}function yp(){const s=indexedDB.open(GT,Wk);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Of,{keyPath:$T})}catch(a){t(a)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Of)?e(i):(i.close(),await Jk(),e(await yp()))})})}async function V1(s,e,t){const i=ld(s,!0).put({[$T]:e,value:t});return new fu(i).toPromise()}async function Zk(s,e){const t=ld(s,!1).get(e),i=await new fu(t).toPromise();return i===void 0?null:i.value}function P1(s,e){const t=ld(s,!0).delete(e);return new fu(t).toPromise()}const eD=800,tD=3;class KT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>tD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=od._getInstance(Xk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Yk(),!this.activeServiceWorker)return;this.sender=new $k(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Qk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yp();return await V1(e,Df,"1"),await P1(e,Df),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>V1(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Zk(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>P1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=ld(a,!1).getAll();return new fu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KT.type="LOCAL";const nD=KT;new uu(3e4,6e4);function sD(s,e){return e?ei(e):(Ge(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class x0 extends PT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return rl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return rl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function rD(s){return Uk(s.auth,new x0(s),s.bypassAuthState)}function iD(s){const{auth:e,user:t}=s;return Ge(t,e,"internal-error"),Lk(t,new x0(s),s.bypassAuthState)}async function aD(s){const{auth:e,user:t}=s;return Ge(t,e,"internal-error"),Pk(t,new x0(s),s.bypassAuthState)}class YT{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:u,type:d}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rD;case"linkViaPopup":case"linkViaRedirect":return aD;case"reauthViaPopup":case"reauthViaRedirect":return iD;default:oi(this.auth,"internal-error")}}resolve(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const oD=new uu(2e3,1e4);class Zo extends YT{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Zo.currentPopupAction&&Zo.currentPopupAction.cancel(),Zo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ge(e,this.auth,"internal-error"),e}async onExecution(){li(this.filter.length===1,"Popup operations only handle one event");const e=b0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,oD.get())};e()}}Zo.currentPopupAction=null;const lD="pendingRedirect",rf=new Map;class cD extends YT{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=rf.get(this.auth._key());if(!e){try{const i=await uD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}rf.set(this.auth._key(),e)}return this.bypassAuthState||rf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uD(s,e){const t=dD(e),i=fD(s);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function hD(s,e){rf.set(s._key(),e)}function fD(s){return ei(s._redirectPersistence)}function dD(s){return sf(lD,s.config.apiKey,s.name)}async function mD(s,e,t=!1){if(or(s.app))return Promise.reject(ha(s));const i=ad(s),a=sD(i,e),u=await new cD(i,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}const gD=600*1e3;class pD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!QT(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Rr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gD&&this.cachedEventUids.clear(),this.cachedEventUids.has(L1(e))}saveEventToCache(e){this.cachedEventUids.add(L1(e)),this.lastProcessedEventTime=Date.now()}}function L1(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function QT({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function yD(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QT(s);default:return!1}}async function vD(s,e={}){return El(s,"GET","/v1/projects",e)}const _D=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bD=/^https?/;async function xD(s){if(s.config.emulator)return;const{authorizedDomains:e}=await vD(s);for(const t of e)try{if(wD(t))return}catch{}oi(s,"unauthorized-domain")}function wD(s){const e=gp(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const u=new URL(s);return u.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!bD.test(t))return!1;if(_D.test(s))return i===s;const a=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}const TD=new uu(3e4,6e4);function U1(){const s=Cr().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function ED(s){return new Promise((e,t)=>{function i(){U1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{U1(),t(Rr(s,"network-request-failed"))},timeout:TD.get()})}if(Cr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Cr().gapi?.load)i();else{const a=Nk("iframefcb");return Cr()[a]=()=>{gapi.load?i():t(Rr(s,"network-request-failed"))},Rk(`${Ck()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw af=null,e})}let af=null;function SD(s){return af=af||ED(s),af}const AD=new uu(5e3,15e3),RD="__/auth/iframe",CD="emulator/auth/iframe",ND={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ID=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kD(s){const e=s.config;Ge(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?p0(e,CD):`https://${s.config.authDomain}/${RD}`,i={apiKey:e.apiKey,appName:s.name,v:vl},a=ID.get(s.config.apiHost);a&&(i.eid=a);const l=s._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${eu(i).slice(1)}`}async function DD(s){const e=await SD(s),t=Cr().gapi;return Ge(t,s,"internal-error"),e.open({where:document.body,url:kD(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ND,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const u=Rr(s,"network-request-failed"),d=Cr().setTimeout(()=>{l(u)},AD.get());function m(){Cr().clearTimeout(d),a(i)}i.ping(m).then(m,()=>{l(u)})}))}const OD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MD=500,jD=600,VD="_blank",PD="http://localhost";class z1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LD(s,e,t,i=MD,a=jD){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const m={...OD,width:i.toString(),height:a.toString(),top:l,left:u},p=Zn().toLowerCase();t&&(d=NT(p)?VD:t),RT(p)&&(e=e||PD,m.scrollbars="yes");const v=Object.entries(m).reduce((w,[R,j])=>`${w}${R}=${j},`,"");if(_k(p)&&d!=="_self")return UD(e||"",d),new z1(null);const b=window.open(e||"",d,v);Ge(b,s,"popup-blocked");try{b.focus()}catch{}return new z1(b)}function UD(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const zD="__/auth/handler",BD="emulator/auth/handler",qD=encodeURIComponent("fac");async function B1(s,e,t,i,a,l){Ge(s.config.authDomain,s,"auth-domain-config-required"),Ge(s.config.apiKey,s,"invalid-api-key");const u={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:vl,eventId:a};if(e instanceof LT){e.setDefaultLanguage(s.languageCode),u.providerId=e.providerId||"",R2(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))u[v]=b}if(e instanceof hu){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(u.scopes=v.join(","))}s.tenantId&&(u.tid=s.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const m=await s._getAppCheckToken(),p=m?`#${qD}=${encodeURIComponent(m)}`:"";return`${HD(s)}?${eu(d).slice(1)}${p}`}function HD({config:s}){return s.emulator?p0(s,BD):`https://${s.authDomain}/${zD}`}const Ig="webStorageSupport";class FD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HT,this._completeRedirectFn=mD,this._overrideRedirectResult=hD}async _openPopup(e,t,i,a){li(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await B1(e,t,i,gp(),a);return LD(e,l,b0())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await B1(e,t,i,gp(),a);return Kk(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(li(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await DD(e),i=new pD(e);return t.register("authEvent",a=>(Ge(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ig,{type:Ig},a=>{const l=a?.[0]?.[Ig];l!==void 0&&t(!!l),oi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return MT()||CT()||v0()}}const GD=FD;var q1="@firebase/auth",H1="1.12.0";class $D{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function KD(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YD(s){ol(new eo("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ge(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:u,authDomain:d,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jT(s)},p=new Sk(i,a,l,m);return kk(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ol(new eo("auth-internal",e=>{const t=ad(e.getProvider("auth").getImmediate());return(i=>new $D(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),aa(q1,H1,KD(s)),aa(q1,H1,"esm2020")}const QD=300,XD=Dx("authIdTokenMaxAge")||QD;let F1=null;const WD=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>XD)return;const a=t?.token;F1!==a&&(F1=a,await fetch(s,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function io(s=Lx()){const e=kp(s,"auth");if(e.isInitialized())return e.getImmediate();const t=Ik(s,{popupRedirectResolver:GD,persistence:[nD,Fk,HT]}),i=Dx("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=WD(l.toString());Bk(t,u,()=>u(t.currentUser)),zk(t,d=>u(d))}}const a=Ix("auth");return a&&Dk(t,`http://${a}`),t}function JD(){return document.getElementsByTagName("head")?.[0]??document}Ak({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=a=>{const l=Rr("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",JD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YD("Browser");var ZD="firebase",e4="12.7.0";aa(ZD,e4,"app");const G1={apiKey:"AIzaSyB3ncjSdbTdaUqac5QvHon-Id5mCo3pByM",authDomain:"dragmate-af04d.firebaseapp.com",projectId:"dragmate-af04d",storageBucket:"dragmate-af04d.firebasestorage.app",messagingSenderId:"370425129874",appId:"1:370425129874:web:4c5c526a593e8fa45a6f4b"};let kg=null,Te=null,of=null,Je=!1;try{Object.values(G1).every(Boolean)?(kg=Tb().length?Tb()[0]:Px(G1),Te=LI(kg),of=io(kg),Je=!0,console.log(" Firebase initialized for DragMate")):console.warn(" DEMO MODE: Firebase env vars missing. Global features will run in local/demo mode only.")}catch(s){console.error(" Firebase initialization failed:",s)}const $1=3e4;async function t4(s){return s?s.currentUser?s.currentUser:(await ro(s)).user??null:null}async function K1(s,e){const t=At(s,"presence",e.uid);await sd(t,{lastSeen:new Date,status:"online"},{merge:!0})}function n4(){const[s,e]=V.useState({count:null,loading:!0,error:null,isOnline:!1,isSupported:Je&&!!Te&&!!of});return V.useEffect(()=>{if(!Je||!Te||!of){e(m=>({...m,loading:!1,isSupported:!1}));return}const t=Te,i=of;let a=!1,l=null,u=null;return(async()=>{try{const m=await t4(i);if(!m||a)return;await K1(t,m),e(b=>({...b,isOnline:!0,isSupported:!0})),l=window.setInterval(()=>{K1(t,m).catch(b=>{console.error("Failed to update presence",b)})},$1/2);const p=new Date(Date.now()-$1),v=YI(St(t,"presence"),QI("lastSeen",">=",p));u=rd(v,b=>{a||e(w=>({...w,count:b.size,loading:!1,error:null}))},b=>{console.error("Presence subscription error",b),!a&&e(w=>({...w,loading:!1,error:b.message??"Failed to subscribe to presence"}))})}catch(m){if(console.error("Presence initialization failed",m),a)return;e(p=>({...p,loading:!1,error:m?.message??"Presence initialization failed",isSupported:!1}))}})(),()=>{a=!0,l!==null&&window.clearInterval(l),u&&u()}},[]),s}const s4=({onCreateRoom:s,onJoinRoom:e,onStartLocal:t,isAuthLoading:i,onSelectGame:a,selectedGame:l,onCreateOkeyRoom:u,onJoinOkeyRoom:d,onStartOkeyGame:m,okeyRoom:p,okeyUserId:v,onCreate101Room:b,onJoin101Room:w,onStart101Game:R,room101:j,user101Id:z})=>{const[D,M]=V.useState("game-select"),[$,B]=V.useState(""),[ce,X]=V.useState(!1),[F,C]=V.useState(""),[S,N]=V.useState(!1),[E,A]=V.useState(""),[P,O]=V.useState(!1),{count:be,loading:_e,isSupported:H}=n4(),Y=async()=>{X(!0);try{await s()}finally{X(!1)}},J=async()=>{if(console.log("handleCreateOkeyRoom called, playerName:",F,"onCreateOkeyRoom:",!!u),!F.trim()||!u){console.log("Early return - playerName empty or onCreateOkeyRoom missing");return}X(!0);try{console.log("Calling onCreateOkeyRoom...");const Ce=await u(F.trim());console.log("Room created, roomId:",Ce),Ce&&M("okey-waiting")}catch(Ce){console.error("Error in handleCreateOkeyRoom:",Ce)}finally{X(!1)}},pe=async()=>{if(!(!F.trim()||!E.trim()||!d)){N(!0);try{await d(E.trim().toUpperCase(),F.trim())&&M("okey-waiting")}finally{N(!1)}}},ve=()=>{p?.roomId&&(navigator.clipboard.writeText(p.roomId),O(!0),setTimeout(()=>O(!1),2e3))},L=p?.hostUserId===v,Z=j?.hostUserId===z,G=async()=>{if(!(!F.trim()||!b)){X(!0);try{await b(F.trim())&&M("101-waiting")}finally{X(!1)}}},K=async()=>{if(!(!F.trim()||!E.trim()||!w)){N(!0);try{await w(E.trim().toUpperCase(),F.trim())&&M("101-waiting")}finally{N(!1)}}},ue=()=>{j?.roomId&&(navigator.clipboard.writeText(j.roomId),O(!0),setTimeout(()=>O(!1),2e3))},ye=()=>y.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-500",children:[y.jsx("h2",{className:"text-2xl font-bold text-white text-center",children:"Choose Your Game"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[y.jsx("button",{onClick:()=>{a("chess"),M("mode-select")},className:"group relative w-full aspect-square sm:aspect-[4/5] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-indigo-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-indigo-500/20 overflow-hidden text-left p-4 sm:p-6 flex flex-col justify-between",children:y.jsxs("div",{children:[y.jsx($g,{className:"w-8 h-8 sm:w-10 sm:h-10 text-indigo-400 mb-2 sm:mb-3 group-hover:scale-110 transition-transform"}),y.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white",children:"CHESS"}),y.jsx("p",{className:"text-slate-400 text-xs sm:text-sm font-medium mt-1",children:"Classic strategy."})]})}),y.jsxs("button",{onClick:()=>{a("backgammon"),M("mode-select")},className:"group relative w-full aspect-square sm:aspect-[4/5] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-emerald-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-emerald-500/20 overflow-hidden text-left p-4 sm:p-6 flex flex-col justify-between",children:[y.jsx("div",{className:"absolute top-0 right-0 p-1.5 sm:p-2 bg-emerald-500/10 text-emerald-300 rounded-bl-2xl text-[8px] sm:text-[10px] font-black uppercase tracking-widest border-b border-l border-emerald-500/20",children:"New"}),y.jsxs("div",{children:[y.jsx(VA,{className:"w-8 h-8 sm:w-10 sm:h-10 text-emerald-400 mb-2 sm:mb-3 group-hover:scale-110 transition-transform"}),y.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white",children:"TAVLA"}),y.jsx("p",{className:"text-slate-400 text-xs sm:text-sm font-medium mt-1",children:"Persian legacy."})]})]}),y.jsxs("button",{onClick:()=>{a("okey"),M("mode-select")},className:"group relative w-full aspect-square sm:aspect-[4/5] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-amber-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-amber-500/20 overflow-hidden text-left p-4 sm:p-6 flex flex-col justify-between",children:[y.jsx("div",{className:"absolute top-0 right-0 p-1.5 sm:p-2 bg-amber-500/10 text-amber-300 rounded-bl-2xl text-[8px] sm:text-[10px] font-black uppercase tracking-widest border-b border-l border-amber-500/20",children:"Top"}),y.jsxs("div",{children:[y.jsx(HA,{className:"w-8 h-8 sm:w-10 sm:h-10 text-amber-400 mb-2 sm:mb-3 group-hover:scale-110 transition-transform"}),y.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white",children:"OKEY"}),y.jsx("p",{className:"text-slate-400 text-xs sm:text-sm font-medium mt-1",children:"Turkish Rummy."})]})]}),y.jsxs("button",{onClick:()=>{a("101"),M("mode-select")},className:"group relative w-full aspect-square sm:aspect-[4/5] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-rose-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-rose-500/20 overflow-hidden text-left p-4 sm:p-6 flex flex-col justify-between",children:[y.jsx("div",{className:"absolute top-0 right-0 p-1.5 sm:p-2 bg-rose-500/10 text-rose-300 rounded-bl-2xl text-[8px] sm:text-[10px] font-black uppercase tracking-widest border-b border-l border-rose-500/20",children:"New"}),y.jsxs("div",{children:[y.jsx(UA,{className:"w-8 h-8 sm:w-10 sm:h-10 text-rose-400 mb-2 sm:mb-3 group-hover:scale-110 transition-transform"}),y.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white",children:"101"}),y.jsx("p",{className:"text-slate-400 text-xs sm:text-sm font-medium mt-1",children:"Card Rummy."})]})]})]})]}),we=()=>y.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-right-8 duration-500",children:[y.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[y.jsx("button",{onClick:()=>M("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:y.jsx(Jr,{size:20})}),y.jsx("h2",{className:"text-2xl font-bold text-white",children:"Select Threat Level"})]}),y.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[y.jsx("button",{onClick:()=>t("Easy"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-green-500/50 hover:bg-slate-800 transition-all",children:y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("div",{className:"p-3 rounded-full bg-green-500/10 text-green-400",children:y.jsx(Ji,{size:20})}),y.jsxs("div",{className:"text-left",children:[y.jsx("div",{className:"text-lg font-bold text-white",children:"Easy"}),y.jsx("div",{className:"text-xs text-slate-500",children:"Casual play"})]})]})}),y.jsx("button",{onClick:()=>t("Normal"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-indigo-500/50 hover:bg-slate-800 transition-all",children:y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("div",{className:"p-3 rounded-full bg-indigo-500/10 text-indigo-400",children:y.jsx(Ji,{size:20})}),y.jsxs("div",{className:"text-left",children:[y.jsx("div",{className:"text-lg font-bold text-white",children:"Normal"}),y.jsx("div",{className:"text-xs text-slate-500",children:"Balanced opponent"})]})]})}),y.jsx("button",{onClick:()=>t("Hard"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-red-500/50 hover:bg-slate-800 transition-all",children:y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("div",{className:"p-3 rounded-full bg-red-500/10 text-red-400",children:y.jsx($g,{size:20})}),y.jsxs("div",{className:"text-left",children:[y.jsx("div",{className:"text-lg font-bold text-white",children:"Hard"}),y.jsx("div",{className:"text-xs text-slate-500",children:"Ruthless tactics"})]})]})})]})]}),Ie=()=>y.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-right-8 duration-500",children:[y.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[y.jsx("button",{onClick:()=>M("game-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:y.jsx(Jr,{size:20})}),y.jsx("h2",{className:"text-2xl font-bold text-white",children:"Select Mode"})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[y.jsxs("button",{onClick:()=>M("difficulty-select"),className:"group flex flex-col items-center justify-center gap-4 p-8 bg-slate-800/50 rounded-2xl border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all",children:[y.jsx("div",{className:"p-4 rounded-full bg-emerald-500/10 text-emerald-400 group-hover:scale-110 transition-transform",children:y.jsx(Ji,{size:32})}),y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"text-xl font-bold text-white",children:"Single Player"}),y.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"Vs Computer"})]})]}),y.jsxs("button",{onClick:()=>{M(l==="okey"?"okey-name":l==="101"?"101-name":"connection")},className:"group flex flex-col items-center justify-center gap-4 p-8 bg-slate-800/50 rounded-2xl border border-slate-700 hover:border-indigo-500/50 hover:bg-slate-800 transition-all",children:[y.jsx("div",{className:"p-4 rounded-full bg-indigo-500/10 text-indigo-400 group-hover:scale-110 transition-transform",children:y.jsx(Cp,{size:32})}),y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"text-xl font-bold text-white",children:"Multiplayer"}),y.jsx("div",{className:"text-sm text-slate-500 mt-1",children:l==="okey"||l==="101"?"1-4 Players":"Online PvP"})]})]})]})]}),Se=()=>y.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500",children:[y.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[y.jsx("button",{onClick:()=>M("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:y.jsx(Jr,{size:20})}),y.jsx("h2",{className:"text-2xl font-bold text-white",children:"Multiplayer"})]}),y.jsxs("div",{className:"space-y-6",children:[y.jsxs("button",{onClick:Y,disabled:ce||i,className:"w-full btn-premium flex items-center justify-center gap-3 sm:gap-4 text-lg py-4 group disabled:opacity-50 disabled:cursor-not-allowed",children:[ce||i?y.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"}):y.jsx(_g,{size:24,className:"transition-transform group-hover:rotate-90"}),y.jsx("span",{children:i?"Initializing...":ce?"Creating Arena...":"Create New Room"})]}),y.jsxs("div",{className:"relative flex items-center gap-6",children:[y.jsx("div",{className:"flex-1 h-px bg-slate-800"}),y.jsx("span",{className:"text-slate-600 text-xs font-black uppercase tracking-[0.2em]",children:"OR JOIN"}),y.jsx("div",{className:"flex-1 h-px bg-slate-800"})]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("input",{type:"text",placeholder:"Enter Room ID",value:$,onChange:Ce=>B(Ce.target.value),className:"flex-1 bg-slate-900/40 border border-slate-800/50 rounded-xl px-4 py-4 text-lg placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all"}),y.jsx("button",{onClick:()=>e($),disabled:!$.trim()||i,className:"bg-slate-800 hover:bg-slate-700 text-white disabled:opacity-50 px-6 rounded-xl transition-all font-bold shadow-lg",children:y.jsx(vg,{size:24})})]})]})]}),Ue=()=>y.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500",children:[y.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[y.jsx("button",{onClick:()=>M("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:y.jsx(Jr,{size:20})}),y.jsx("h2",{className:"text-2xl font-bold text-white",children:"Okey Multiplayer"})]}),y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-sm font-medium text-slate-400",children:"Your Name"}),y.jsx("input",{type:"text",placeholder:"Enter your name...",value:F,onChange:Ce=>C(Ce.target.value),maxLength:20,className:"w-full bg-slate-900/40 border border-slate-800/50 rounded-xl px-4 py-4 text-lg placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-amber-500/30 transition-all"})]}),y.jsxs("button",{onClick:J,disabled:!F.trim()||ce||i,className:"w-full bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-bold flex items-center justify-center gap-3 text-lg py-4 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg shadow-amber-500/20",children:[ce?y.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"}):y.jsx(_g,{size:24}),y.jsx("span",{children:ce?"Creating Room...":"Create New Room"})]}),y.jsxs("div",{className:"relative flex items-center gap-6",children:[y.jsx("div",{className:"flex-1 h-px bg-slate-800"}),y.jsx("span",{className:"text-slate-600 text-xs font-black uppercase tracking-[0.2em]",children:"OR JOIN"}),y.jsx("div",{className:"flex-1 h-px bg-slate-800"})]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("input",{type:"text",placeholder:"Room ID",value:E,onChange:Ce=>A(Ce.target.value.toUpperCase()),maxLength:10,className:"flex-1 bg-slate-900/40 border border-slate-800/50 rounded-xl px-4 py-4 text-lg placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-amber-500/30 transition-all uppercase"}),y.jsx("button",{onClick:pe,disabled:!F.trim()||!E.trim()||S||i,className:"bg-slate-800 hover:bg-slate-700 text-white disabled:opacity-50 px-6 rounded-xl transition-all font-bold shadow-lg",children:S?y.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"}):y.jsx(vg,{size:24})})]}),y.jsx("p",{className:"text-xs text-slate-600 text-center",children:"Create a room and share the ID with friends. Empty slots will be filled with AI."})]})]}),pt=()=>{if(!p)return y.jsx("div",{className:"flex items-center justify-center py-20",children:y.jsx("div",{className:"w-8 h-8 border-2 border-amber-500/20 border-t-amber-500 rounded-full animate-spin"})});const Ce=p.players.filter(je=>je.odaUserId&&!je.adIsAI).length;return y.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500",children:[y.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[y.jsx("button",{onClick:()=>M("okey-name"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:y.jsx(Jr,{size:20})}),y.jsx("h2",{className:"text-2xl font-bold text-white",children:"Waiting Room"})]}),y.jsx("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-bold",children:"Room ID"}),y.jsx("p",{className:"text-2xl font-black text-amber-400 tracking-widest",children:p.roomId})]}),y.jsx("button",{onClick:ve,className:"p-3 bg-slate-700/50 hover:bg-slate-700 rounded-lg transition-colors",children:P?y.jsx(db,{size:20,className:"text-green-400"}):y.jsx(ff,{size:20,className:"text-slate-400"})})]})}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("p",{className:"text-sm font-medium text-slate-400",children:["Players (",Ce,"/4)"]}),y.jsx("div",{className:"grid grid-cols-2 gap-3",children:p.players.map((je,st)=>{const Fe=je.odaUserId===v,yt=!je.odaUserId,$e=je.odaUserId===p.hostUserId;return y.jsx("div",{className:`p-4 rounded-xl border transition-all ${yt?"bg-slate-900/30 border-slate-800 border-dashed":Fe?"bg-amber-500/10 border-amber-500/50":"bg-slate-800/50 border-slate-700"}`,children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:`p-2 rounded-full ${yt?"bg-slate-800":Fe?"bg-amber-500/20":"bg-slate-700"}`,children:yt?y.jsx(Uc,{size:18,className:"text-slate-600"}):y.jsx(Ji,{size:18,className:Fe?"text-amber-400":"text-slate-400"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("p",{className:`font-bold truncate ${yt?"text-slate-600":Fe?"text-amber-400":"text-white"}`,children:yt?"Waiting...":je.adPlayerName}),y.jsx("p",{className:"text-xs text-slate-500",children:$e?" Host":yt?"Will be AI":`Seat ${st+1}`})]})]})},st)})})]}),L&&y.jsxs("button",{onClick:m,className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-bold flex items-center justify-center gap-3 text-lg py-4 rounded-xl transition-all shadow-lg shadow-green-500/20",children:[y.jsx(mb,{size:24}),y.jsx("span",{children:"Start Game"})]}),!L&&y.jsx("div",{className:"text-center py-4",children:y.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[y.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full animate-pulse"}),y.jsx("span",{className:"text-sm",children:"Waiting for host to start..."})]})}),y.jsx("p",{className:"text-xs text-slate-600 text-center",children:"Share the Room ID with friends. Empty seats will be filled with AI players."})]})},nt=()=>y.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500",children:[y.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[y.jsx("button",{onClick:()=>M("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:y.jsx(Jr,{size:20})}),y.jsx("h2",{className:"text-2xl font-bold text-white",children:"101 Multiplayer"})]}),y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-sm font-medium text-slate-400",children:"Your Name"}),y.jsx("input",{type:"text",placeholder:"Enter your name...",value:F,onChange:Ce=>C(Ce.target.value),maxLength:20,className:"w-full bg-slate-900/40 border border-slate-800/50 rounded-xl px-4 py-4 text-lg placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-rose-500/30 transition-all"})]}),y.jsxs("button",{onClick:G,disabled:!F.trim()||ce||i,className:"w-full bg-gradient-to-r from-rose-500 to-pink-500 hover:from-rose-600 hover:to-pink-600 text-white font-bold flex items-center justify-center gap-3 text-lg py-4 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg shadow-rose-500/20",children:[ce?y.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"}):y.jsx(_g,{size:24}),y.jsx("span",{children:ce?"Creating Room...":"Create New Room"})]}),y.jsxs("div",{className:"relative flex items-center gap-6",children:[y.jsx("div",{className:"flex-1 h-px bg-slate-800"}),y.jsx("span",{className:"text-slate-600 text-xs font-black uppercase tracking-[0.2em]",children:"OR JOIN"}),y.jsx("div",{className:"flex-1 h-px bg-slate-800"})]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("input",{type:"text",placeholder:"Room ID",value:E,onChange:Ce=>A(Ce.target.value.toUpperCase()),maxLength:10,className:"flex-1 bg-slate-900/40 border border-slate-800/50 rounded-xl px-4 py-4 text-lg placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-rose-500/30 transition-all uppercase"}),y.jsx("button",{onClick:K,disabled:!F.trim()||!E.trim()||S||i,className:"bg-slate-800 hover:bg-slate-700 text-white disabled:opacity-50 px-6 rounded-xl transition-all font-bold shadow-lg",children:S?y.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"}):y.jsx(vg,{size:24})})]}),y.jsx("p",{className:"text-xs text-slate-600 text-center",children:"Create a room and share the ID with friends. Empty slots will be filled with AI."})]})]}),Ze=()=>{if(!j)return y.jsx("div",{className:"flex items-center justify-center py-20",children:y.jsx("div",{className:"w-8 h-8 border-2 border-rose-500/20 border-t-rose-500 rounded-full animate-spin"})});const Ce=j.players.filter(je=>je.odaUserId&&!je.adIsAI).length;return y.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500",children:[y.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[y.jsx("button",{onClick:()=>M("101-name"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:y.jsx(Jr,{size:20})}),y.jsx("h2",{className:"text-2xl font-bold text-white",children:"101 Waiting Room"})]}),y.jsx("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-bold",children:"Room ID"}),y.jsx("p",{className:"text-2xl font-black text-rose-400 tracking-widest",children:j.roomId})]}),y.jsx("button",{onClick:ue,className:"p-3 bg-slate-700/50 hover:bg-slate-700 rounded-lg transition-colors",children:P?y.jsx(db,{size:20,className:"text-green-400"}):y.jsx(ff,{size:20,className:"text-slate-400"})})]})}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("p",{className:"text-sm font-medium text-slate-400",children:["Players (",Ce,"/4)"]}),y.jsx("div",{className:"grid grid-cols-2 gap-3",children:j.players.map((je,st)=>{const Fe=je.odaUserId===z,yt=!je.odaUserId,$e=je.odaUserId===j.hostUserId;return y.jsx("div",{className:`p-4 rounded-xl border transition-all ${yt?"bg-slate-900/30 border-slate-800 border-dashed":Fe?"bg-rose-500/10 border-rose-500/50":"bg-slate-800/50 border-slate-700"}`,children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:`p-2 rounded-full ${yt?"bg-slate-800":Fe?"bg-rose-500/20":"bg-slate-700"}`,children:yt?y.jsx(Uc,{size:18,className:"text-slate-600"}):y.jsx(Ji,{size:18,className:Fe?"text-rose-400":"text-slate-400"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("p",{className:`font-bold truncate ${yt?"text-slate-600":Fe?"text-rose-400":"text-white"}`,children:yt?"Waiting...":je.adPlayerName}),y.jsx("p",{className:"text-xs text-slate-500",children:$e?" Host":yt?"Will be AI":`Seat ${st+1}`})]})]})},st)})})]}),Z&&y.jsxs("button",{onClick:R,className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-bold flex items-center justify-center gap-3 text-lg py-4 rounded-xl transition-all shadow-lg shadow-green-500/20",children:[y.jsx(mb,{size:24}),y.jsx("span",{children:"Start Game"})]}),!Z&&y.jsx("div",{className:"text-center py-4",children:y.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[y.jsx("div",{className:"w-2 h-2 bg-rose-500 rounded-full animate-pulse"}),y.jsx("span",{className:"text-sm",children:"Waiting for host to start..."})]})}),y.jsx("p",{className:"text-xs text-slate-600 text-center",children:"Share the Room ID with friends. Empty seats will be filled with AI players."})]})};return y.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[85vh] gap-8 lg:gap-12 relative overflow-hidden px-4",children:[y.jsx("div",{className:"text-center space-y-4 lg:space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-1000",children:y.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-8xl font-black tracking-normal pb-4 bg-clip-text text-transparent bg-linear-to-b from-white via-indigo-100 to-indigo-400",children:"DragMate"})}),y.jsxs("div",{className:"liquid-glass p-6 sm:p-8 w-full max-w-xl min-h-[400px] flex flex-col justify-center",children:[D==="game-select"&&ye(),D==="mode-select"&&Ie(),D==="difficulty-select"&&we(),D==="connection"&&Se(),D==="okey-name"&&Ue(),D==="okey-waiting"&&pt(),D==="101-name"&&nt(),D==="101-waiting"&&Ze()]}),y.jsx("div",{className:"flex items-center gap-10 text-slate-600 font-bold uppercase tracking-widest text-[10px] animate-in fade-in duration-1000 delay-500",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${H?"bg-green-500":"bg-slate-600"}`}),H?`${_e?"...":(be??0).toLocaleString()} Online`:"Demo Mode"]})})]})};function r4(s){return s!==null?{comment:s,variations:[]}:{variations:[]}}function i4(s,e,t,i,a){const l={move:s,variations:a};return e&&(l.suffix=e),t&&(l.nag=t),i!==null&&(l.comment=i),l}function a4(...s){const[e,...t]=s;let i=e;for(const a of t)a!==null&&(i.variations=[a,...a.variations],a.variations=[],i=a);return e}function o4(s,e){if(e.marker&&e.marker.comment){let t=e.root;for(;;){const i=t.variations[0];if(!i){t.comment=e.marker.comment;break}t=i}}return{headers:s,root:e.root,result:(e.marker&&e.marker.result)??void 0}}function l4(s,e){function t(){this.constructor=s}t.prototype=e.prototype,s.prototype=new t}function gl(s,e,t,i){var a=Error.call(this,s);return Object.setPrototypeOf&&Object.setPrototypeOf(a,gl.prototype),a.expected=e,a.found=t,a.location=i,a.name="SyntaxError",a}l4(gl,Error);function Dg(s,e,t){return t=t||" ",s.length>e?s:(e-=s.length,t+=t.repeat(e),s+t.slice(0,e))}gl.prototype.format=function(s){var e="Error: "+this.message;if(this.location){var t=null,i;for(i=0;i<s.length;i++)if(s[i].source===this.location.source){t=s[i].text.split(/\r\n|\n|\r/g);break}var a=this.location.start,l=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(a):a,u=this.location.source+":"+l.line+":"+l.column;if(t){var d=this.location.end,m=Dg("",l.line.toString().length," "),p=t[a.line-1],v=a.line===d.line?d.column:p.length+1,b=v-a.column||1;e+=`
 --> `+u+`
`+m+` |
`+l.line+" | "+p+`
`+m+" | "+Dg("",a.column-1," ")+Dg("",b,"^")}else e+=`
 at `+u}return e};gl.buildMessage=function(s,e){var t={literal:function(p){return'"'+a(p.text)+'"'},class:function(p){var v=p.parts.map(function(b){return Array.isArray(b)?l(b[0])+"-"+l(b[1]):l(b)});return"["+(p.inverted?"^":"")+v.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(p){return p.description}};function i(p){return p.charCodeAt(0).toString(16).toUpperCase()}function a(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+i(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+i(v)})}function l(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+i(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+i(v)})}function u(p){return t[p.type](p)}function d(p){var v=p.map(u),b,w;if(v.sort(),v.length>0){for(b=1,w=1;b<v.length;b++)v[b-1]!==v[b]&&(v[w]=v[b],w++);v.length=w}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}function m(p){return p?'"'+a(p)+'"':"end of input"}return"Expected "+d(s)+" but "+m(e)+" found."};function c4(s,e){e=e!==void 0?e:{};var t={},i=e.grammarSource,a={pgn:lo},l=lo,u="[",d='"',m="]",p=".",v="O-O-O",b="O-O",w="0-0-0",R="0-0",j="$",z="{",D="}",M=";",$="(",B=")",ce="1-0",X="0-1",F="1/2-1/2",C="*",S=/^[a-zA-Z]/,N=/^[^"]/,E=/^[0-9]/,A=/^[.]/,P=/^[a-zA-Z1-8\-=]/,O=/^[+#]/,be=/^[!?]/,_e=/^[^}]/,H=/^[^\r\n]/,Y=/^[ \t\r\n]/,J=kt("tag pair"),pe=vt("[",!1),ve=vt('"',!1),L=vt("]",!1),Z=kt("tag name"),G=Ft([["a","z"],["A","Z"]],!1,!1),K=kt("tag value"),ue=Ft(['"'],!0,!1),ye=kt("move number"),we=Ft([["0","9"]],!1,!1),Ie=vt(".",!1),Se=Ft(["."],!1,!1),Ue=kt("standard algebraic notation"),pt=vt("O-O-O",!1),nt=vt("O-O",!1),Ze=vt("0-0-0",!1),Ce=vt("0-0",!1),je=Ft([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),st=Ft(["+","#"],!1,!1),Fe=kt("suffix annotation"),yt=Ft(["!","?"],!1,!1),$e=kt("NAG"),ot=vt("$",!1),Kt=kt("brace comment"),Wt=vt("{",!1),Nn=Ft(["}"],!0,!1),fn=vt("}",!1),Ys=kt("rest of line comment"),Ir=vt(";",!1),es=Ft(["\r",`
`],!0,!1),Ln=kt("variation"),Qs=vt("(",!1),kr=vt(")",!1),ts=kt("game termination marker"),Dr=vt("1-0",!1),ns=vt("0-1",!1),sn=vt("1/2-1/2",!1),In=vt("*",!1),Lt=kt("whitespace"),Or=Ft([" ","	","\r",`
`],!1,!1),Xs=function(W,ae){return o4(W,ae)},fi=function(W){return Object.fromEntries(W)},cs=function(W,ae){return[W,ae]},Ws=function(W,ae){return{root:W,marker:ae}},tt=function(W,ae){return a4(r4(W),...ae.flat())},Ut=function(W,ae,se,Re,Me){return i4(W,ae,se,Re,Me)},zt=function(W){return W},Jt=function(W){return W.replace(/[\r\n]+/g," ")},kn=function(W){return W.trim()},dn=function(W){return W},Yt=function(W,ae){return{result:W,comment:ae}},ie=e.peg$currPos|0,Nt=[{line:1,column:1}],It=ie,rn=e.peg$maxFailExpected||[],xe=e.peg$silentFails|0,Tn;if(e.startRule){if(!(e.startRule in a))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');l=a[e.startRule]}function vt(W,ae){return{type:"literal",text:W,ignoreCase:ae}}function Ft(W,ae,se){return{type:"class",parts:W,inverted:ae,ignoreCase:se}}function En(){return{type:"end"}}function kt(W){return{type:"other",description:W}}function Qt(W){var ae=Nt[W],se;if(ae)return ae;if(W>=Nt.length)se=Nt.length-1;else for(se=W;!Nt[--se];);for(ae=Nt[se],ae={line:ae.line,column:ae.column};se<W;)s.charCodeAt(se)===10?(ae.line++,ae.column=1):ae.column++,se++;return Nt[W]=ae,ae}function an(W,ae,se){var Re=Qt(W),Me=Qt(ae),dt={source:i,start:{offset:W,line:Re.line,column:Re.column},end:{offset:ae,line:Me.line,column:Me.column}};return dt}function ke(W){ie<It||(ie>It&&(It=ie,rn=[]),rn.push(W))}function di(W,ae,se){return new gl(gl.buildMessage(W,ae),W,ae,se)}function lo(){var W,ae,se;return W=ie,ae=co(),se=Ds(),W=Xs(ae,se),W}function co(){var W,ae,se;for(W=ie,ae=[],se=wa();se!==t;)ae.push(se),se=wa();return se=mn(),W=fi(ae),W}function wa(){var W,ae,se,Re,Me,dt,rt;return xe++,W=ie,mn(),s.charCodeAt(ie)===91?(ae=u,ie++):(ae=t,xe===0&&ke(pe)),ae!==t?(mn(),se=ks(),se!==t?(mn(),s.charCodeAt(ie)===34?(Re=d,ie++):(Re=t,xe===0&&ke(ve)),Re!==t?(Me=mi(),s.charCodeAt(ie)===34?(dt=d,ie++):(dt=t,xe===0&&ke(ve)),dt!==t?(mn(),s.charCodeAt(ie)===93?(rt=m,ie++):(rt=t,xe===0&&ke(L)),rt!==t?W=cs(se,Me):(ie=W,W=t)):(ie=W,W=t)):(ie=W,W=t)):(ie=W,W=t)):(ie=W,W=t),xe--,W===t&&xe===0&&ke(J),W}function ks(){var W,ae,se;if(xe++,W=ie,ae=[],se=s.charAt(ie),S.test(se)?ie++:(se=t,xe===0&&ke(G)),se!==t)for(;se!==t;)ae.push(se),se=s.charAt(ie),S.test(se)?ie++:(se=t,xe===0&&ke(G));else ae=t;return ae!==t?W=s.substring(W,ie):W=ae,xe--,W===t&&(ae=t,xe===0&&ke(Z)),W}function mi(){var W,ae,se;for(xe++,W=ie,ae=[],se=s.charAt(ie),N.test(se)?ie++:(se=t,xe===0&&ke(ue));se!==t;)ae.push(se),se=s.charAt(ie),N.test(se)?ie++:(se=t,xe===0&&ke(ue));return W=s.substring(W,ie),xe--,ae=t,xe===0&&ke(K),W}function Ds(){var W,ae,se;return W=ie,ae=ss(),mn(),se=Sa(),se===t&&(se=null),mn(),W=Ws(ae,se),W}function ss(){var W,ae,se,Re;for(W=ie,ae=us(),ae===t&&(ae=null),se=[],Re=Yn();Re!==t;)se.push(Re),Re=Yn();return W=tt(ae,se),W}function Yn(){var W,ae,se,Re,Me,dt,rt,js;if(W=ie,mn(),Os(),mn(),ae=Zt(),ae!==t){for(se=Ta(),se===t&&(se=null),Re=[],Me=gi();Me!==t;)Re.push(Me),Me=gi();for(Me=mn(),dt=us(),dt===t&&(dt=null),rt=[],js=pi();js!==t;)rt.push(js),js=pi();W=Ut(ae,se,Re,dt,rt)}else ie=W,W=t;return W}function Os(){var W,ae,se,Re,Me,dt;for(xe++,W=ie,ae=[],se=s.charAt(ie),E.test(se)?ie++:(se=t,xe===0&&ke(we));se!==t;)ae.push(se),se=s.charAt(ie),E.test(se)?ie++:(se=t,xe===0&&ke(we));if(s.charCodeAt(ie)===46?(se=p,ie++):(se=t,xe===0&&ke(Ie)),se!==t){for(Re=mn(),Me=[],dt=s.charAt(ie),A.test(dt)?ie++:(dt=t,xe===0&&ke(Se));dt!==t;)Me.push(dt),dt=s.charAt(ie),A.test(dt)?ie++:(dt=t,xe===0&&ke(Se));ae=[ae,se,Re,Me],W=ae}else ie=W,W=t;return xe--,W===t&&(ae=t,xe===0&&ke(ye)),W}function Zt(){var W,ae,se,Re,Me,dt;if(xe++,W=ie,ae=ie,s.substr(ie,5)===v?(se=v,ie+=5):(se=t,xe===0&&ke(pt)),se===t&&(s.substr(ie,3)===b?(se=b,ie+=3):(se=t,xe===0&&ke(nt)),se===t&&(s.substr(ie,5)===w?(se=w,ie+=5):(se=t,xe===0&&ke(Ze)),se===t&&(s.substr(ie,3)===R?(se=R,ie+=3):(se=t,xe===0&&ke(Ce)),se===t))))if(se=ie,Re=s.charAt(ie),S.test(Re)?ie++:(Re=t,xe===0&&ke(G)),Re!==t){if(Me=[],dt=s.charAt(ie),P.test(dt)?ie++:(dt=t,xe===0&&ke(je)),dt!==t)for(;dt!==t;)Me.push(dt),dt=s.charAt(ie),P.test(dt)?ie++:(dt=t,xe===0&&ke(je));else Me=t;Me!==t?(Re=[Re,Me],se=Re):(ie=se,se=t)}else ie=se,se=t;return se!==t?(Re=s.charAt(ie),O.test(Re)?ie++:(Re=t,xe===0&&ke(st)),Re===t&&(Re=null),se=[se,Re],ae=se):(ie=ae,ae=t),ae!==t?W=s.substring(W,ie):W=ae,xe--,W===t&&(ae=t,xe===0&&ke(Ue)),W}function Ta(){var W,ae,se;for(xe++,W=ie,ae=[],se=s.charAt(ie),be.test(se)?ie++:(se=t,xe===0&&ke(yt));se!==t;)ae.push(se),ae.length>=2?se=t:(se=s.charAt(ie),be.test(se)?ie++:(se=t,xe===0&&ke(yt)));return ae.length<1?(ie=W,W=t):W=ae,xe--,W===t&&(ae=t,xe===0&&ke(Fe)),W}function gi(){var W,ae,se,Re,Me;if(xe++,W=ie,mn(),s.charCodeAt(ie)===36?(ae=j,ie++):(ae=t,xe===0&&ke(ot)),ae!==t){if(se=ie,Re=[],Me=s.charAt(ie),E.test(Me)?ie++:(Me=t,xe===0&&ke(we)),Me!==t)for(;Me!==t;)Re.push(Me),Me=s.charAt(ie),E.test(Me)?ie++:(Me=t,xe===0&&ke(we));else Re=t;Re!==t?se=s.substring(se,ie):se=Re,se!==t?W=zt(se):(ie=W,W=t)}else ie=W,W=t;return xe--,W===t&&xe===0&&ke($e),W}function us(){var W;return W=Ms(),W===t&&(W=Ea()),W}function Ms(){var W,ae,se,Re,Me;if(xe++,W=ie,s.charCodeAt(ie)===123?(ae=z,ie++):(ae=t,xe===0&&ke(Wt)),ae!==t){for(se=ie,Re=[],Me=s.charAt(ie),_e.test(Me)?ie++:(Me=t,xe===0&&ke(Nn));Me!==t;)Re.push(Me),Me=s.charAt(ie),_e.test(Me)?ie++:(Me=t,xe===0&&ke(Nn));se=s.substring(se,ie),s.charCodeAt(ie)===125?(Re=D,ie++):(Re=t,xe===0&&ke(fn)),Re!==t?W=Jt(se):(ie=W,W=t)}else ie=W,W=t;return xe--,W===t&&(ae=t,xe===0&&ke(Kt)),W}function Ea(){var W,ae,se,Re,Me;if(xe++,W=ie,s.charCodeAt(ie)===59?(ae=M,ie++):(ae=t,xe===0&&ke(Ir)),ae!==t){for(se=ie,Re=[],Me=s.charAt(ie),H.test(Me)?ie++:(Me=t,xe===0&&ke(es));Me!==t;)Re.push(Me),Me=s.charAt(ie),H.test(Me)?ie++:(Me=t,xe===0&&ke(es));se=s.substring(se,ie),W=kn(se)}else ie=W,W=t;return xe--,W===t&&(ae=t,xe===0&&ke(Ys)),W}function pi(){var W,ae,se,Re;return xe++,W=ie,mn(),s.charCodeAt(ie)===40?(ae=$,ie++):(ae=t,xe===0&&ke(Qs)),ae!==t?(se=ss(),se!==t?(mn(),s.charCodeAt(ie)===41?(Re=B,ie++):(Re=t,xe===0&&ke(kr)),Re!==t?W=dn(se):(ie=W,W=t)):(ie=W,W=t)):(ie=W,W=t),xe--,W===t&&xe===0&&ke(Ln),W}function Sa(){var W,ae,se;return xe++,W=ie,s.substr(ie,3)===ce?(ae=ce,ie+=3):(ae=t,xe===0&&ke(Dr)),ae===t&&(s.substr(ie,3)===X?(ae=X,ie+=3):(ae=t,xe===0&&ke(ns)),ae===t&&(s.substr(ie,7)===F?(ae=F,ie+=7):(ae=t,xe===0&&ke(sn)),ae===t&&(s.charCodeAt(ie)===42?(ae=C,ie++):(ae=t,xe===0&&ke(In))))),ae!==t?(mn(),se=us(),se===t&&(se=null),W=Yt(ae,se)):(ie=W,W=t),xe--,W===t&&(ae=t,xe===0&&ke(ts)),W}function mn(){var W,ae;for(xe++,W=[],ae=s.charAt(ie),Y.test(ae)?ie++:(ae=t,xe===0&&ke(Or));ae!==t;)W.push(ae),ae=s.charAt(ie),Y.test(ae)?ie++:(ae=t,xe===0&&ke(Or));return xe--,ae=t,xe===0&&ke(Lt),W}if(Tn=l(),e.peg$library)return{peg$result:Tn,peg$currPos:ie,peg$FAILED:t,peg$maxFailExpected:rn,peg$maxFailPos:It};if(Tn!==t&&ie===s.length)return Tn;throw Tn!==t&&ie<s.length&&ke(En()),di(rn,It<s.length?s.charAt(It):null,It<s.length?an(It,It+1):an(It,It))}const lf=0xffffffffffffffffn;function Og(s,e){return(s<<e|s>>64n-e)&0xffffffffffffffffn}function Y1(s,e){return s*e&lf}function u4(s){return function(){let e=BigInt(s&lf),t=BigInt(s>>64n&lf);const i=Y1(Og(Y1(e,5n),7n),9n);return t^=e,e=(Og(e,24n)^t^t<<16n)&lf,t=Og(t,37n),s=t<<64n|e,i}}const cd=u4(0xa187eb39cdcaed8f31c4b365b102e01en),h4=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>cd()))),f4=Array.from({length:8},()=>cd()),d4=Array.from({length:16},()=>cd()),Mg=cd(),Wn="w",As="b",_n="p",vp="n",cf="b",Sc="r",Xi="q",An="k",jg="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Hh{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(e,t){const{color:i,piece:a,from:l,to:u,flags:d,captured:m,promotion:p}=t,v=On(l),b=On(u);this.color=i,this.piece=a,this.from=v,this.to=b,this.san=e._moveToSan(t,e._moves({legal:!0})),this.lan=v+b,this.before=e.fen(),e._makeMove(t),this.after=e.fen(),e._undoMove(),this.flags="";for(const w in Ke)Ke[w]&d&&(this.flags+=Qa[w]);m&&(this.captured=m),p&&(this.promotion=p,this.lan+=p)}isCapture(){return this.flags.indexOf(Qa.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(Qa.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(Qa.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(Qa.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(Qa.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(Qa.BIG_PAWN)>-1}}const Fn=-1,Qa={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},Ke={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},_p={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},m4={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},g4={..._p,...m4},qe={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Vg={b:[16,32,17,15],w:[-16,-32,-17,-15]},Q1={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},p4=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],y4=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],v4={p:1,n:2,b:4,r:8,q:16,k:32},_4="pnbrqkPNBRQK",X1=[vp,cf,Sc,Xi],b4=7,x4=6,w4=1,T4=0,Fh={[An]:Ke.KSIDE_CASTLE,[Xi]:Ke.QSIDE_CASTLE},Yi={w:[{square:qe.a1,flag:Ke.QSIDE_CASTLE},{square:qe.h1,flag:Ke.KSIDE_CASTLE}],b:[{square:qe.a8,flag:Ke.QSIDE_CASTLE},{square:qe.h8,flag:Ke.KSIDE_CASTLE}]},E4={b:w4,w:x4},Pg="--";function Ja(s){return s>>4}function Qc(s){return s&15}function XT(s){return"0123456789".indexOf(s)!==-1}function On(s){const e=Qc(s),t=Ja(s);return"abcdefgh".substring(e,e+1)+"87654321".substring(t,t+1)}function bc(s){return s===Wn?As:Wn}function S4(s){const e=s.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const t=parseInt(e[5],10);if(isNaN(t)||t<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const i=parseInt(e[4],10);if(isNaN(i)||i<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const a=e[0].split("/");if(a.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let u=0;u<a.length;u++){let d=0,m=!1;for(let p=0;p<a[u].length;p++)if(XT(a[u][p])){if(m)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};d+=parseInt(a[u][p],10),m=!0}else{if(!/^[prnbqkPRNBQK]$/.test(a[u][p]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};d+=1,m=!1}if(d!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const l=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:u,regex:d}of l){if(!d.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${u} king`};if((e[0].match(d)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${u} kings`}}return Array.from(a[0]+a[7]).some(u=>u.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function A4(s,e){const t=s.from,i=s.to,a=s.piece;let l=0,u=0,d=0;for(let m=0,p=e.length;m<p;m++){const v=e[m].from,b=e[m].to,w=e[m].piece;a===w&&t!==v&&i===b&&(l++,Ja(t)===Ja(v)&&u++,Qc(t)===Qc(v)&&d++)}return l>0?u>0&&d>0?On(t):d>0?On(t).charAt(1):On(t).charAt(0):""}function Qi(s,e,t,i,a,l=void 0,u=Ke.NORMAL){const d=Ja(i);if(a===_n&&(d===b4||d===T4))for(let m=0;m<X1.length;m++){const p=X1[m];s.push({color:e,from:t,to:i,piece:a,captured:l,promotion:p,flags:u|Ke.PROMOTION})}else s.push({color:e,from:t,to:i,piece:a,captured:l,flags:u})}function W1(s){let e=s.charAt(0);return e>="a"&&e<="h"?s.match(/[a-h]\d.*[a-h]\d/)?void 0:_n:(e=e.toLowerCase(),e==="o"?An:e)}function Lg(s){return s.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class w0{_board=new Array(128);_turn=Wn;_header={};_kings={w:Fn,b:Fn};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_hash=0n;_positionCount=new Map;constructor(e=jg,{skipValidation:t=!1}={}){this.load(e,{skipValidation:t})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:Fn,b:Fn},this._turn=Wn,this._castling={w:0,b:0},this._epSquare=Fn,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...g4},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:t=!1,preserveHeaders:i=!1}={}){let a=e.split(/\s+/);if(a.length>=2&&a.length<6){const d=["-","-","0","1"];e=a.concat(d.slice(-(6-a.length))).join(" ")}if(a=e.split(/\s+/),!t){const{ok:d,error:m}=S4(e);if(!d)throw new Error(m)}const l=a[0];let u=0;this.clear({preserveHeaders:i});for(let d=0;d<l.length;d++){const m=l.charAt(d);if(m==="/")u+=8;else if(XT(m))u+=parseInt(m,10);else{const p=m<"a"?Wn:As;this._put({type:m.toLowerCase(),color:p},On(u)),u++}}this._turn=a[1],a[2].indexOf("K")>-1&&(this._castling.w|=Ke.KSIDE_CASTLE),a[2].indexOf("Q")>-1&&(this._castling.w|=Ke.QSIDE_CASTLE),a[2].indexOf("k")>-1&&(this._castling.b|=Ke.KSIDE_CASTLE),a[2].indexOf("q")>-1&&(this._castling.b|=Ke.QSIDE_CASTLE),this._epSquare=a[3]==="-"?Fn:qe[a[3]],this._halfMoves=parseInt(a[4],10),this._moveNumber=parseInt(a[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){let t=0,i="";for(let u=qe.a8;u<=qe.h1;u++){if(this._board[u]){t>0&&(i+=t,t=0);const{color:d,type:m}=this._board[u];i+=d===Wn?m.toUpperCase():m.toLowerCase()}else t++;u+1&136&&(t>0&&(i+=t),u!==qe.h1&&(i+="/"),t=0,u+=8)}let a="";this._castling[Wn]&Ke.KSIDE_CASTLE&&(a+="K"),this._castling[Wn]&Ke.QSIDE_CASTLE&&(a+="Q"),this._castling[As]&Ke.KSIDE_CASTLE&&(a+="k"),this._castling[As]&Ke.QSIDE_CASTLE&&(a+="q"),a=a||"-";let l="-";if(this._epSquare!==Fn)if(e)l=On(this._epSquare);else{const u=this._epSquare+(this._turn===Wn?16:-16),d=[u+1,u-1];for(const m of d){if(m&136)continue;const p=this._turn;if(this._board[m]?.color===p&&this._board[m]?.type===_n){this._makeMove({color:p,from:m,to:this._epSquare,piece:_n,captured:_n,flags:Ke.EP_CAPTURE});const v=!this._isKingAttacked(p);if(this._undoMove(),v){l=On(this._epSquare);break}}}}return[i,this._turn,a,l,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;const{color:t,type:i}=this._board[e],a={w:0,b:1}[t],l={p:0,n:1,b:2,r:3,q:4,k:5}[i];return h4[a][l][e]}_epKey(){return this._epSquare===Fn?0n:f4[this._epSquare&7]}_castlingKey(){const e=this._castling.w>>5|this._castling.b>>3;return d4[e]}_computeHash(){let e=0n;for(let t=qe.a8;t<=qe.h1;t++){if(t&136){t+=7;continue}this._board[t]&&(e^=this._pieceKey(t))}return e^=this._epKey(),e^=this._castlingKey(),this._turn==="b"&&(e^=Mg),e}_updateSetup(e){this._history.length>0||(e!==jg?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(jg)}get(e){return this._board[qe[e]]}findPiece(e){const t=[];for(let i=qe.a8;i<=qe.h1;i++){if(i&136){i+=7;continue}!this._board[i]||this._board[i]?.color!==e.color||this._board[i].color===e.color&&this._board[i].type===e.type&&t.push(On(i))}return t}put({type:e,color:t},i){return this._put({type:e,color:t},i)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(e,t){this._hash^=this._pieceKey(e),this._board[e]=t,this._hash^=this._pieceKey(e)}_put({type:e,color:t},i){if(_4.indexOf(e.toLowerCase())===-1||!(i in qe))return!1;const a=qe[i];if(e==An&&!(this._kings[t]==Fn||this._kings[t]==a))return!1;const l=this._board[a];return l&&l.type===An&&(this._kings[l.color]=Fn),this._set(a,{type:e,color:t}),e===An&&(this._kings[t]=a),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){const t=this.get(e);return this._clear(qe[e]),t&&t.type===An&&(this._kings[t.color]=Fn),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){this._hash^=this._castlingKey();const e=this._board[qe.e1]?.type===An&&this._board[qe.e1]?.color===Wn,t=this._board[qe.e8]?.type===An&&this._board[qe.e8]?.color===As;(!e||this._board[qe.a1]?.type!==Sc||this._board[qe.a1]?.color!==Wn)&&(this._castling.w&=-65),(!e||this._board[qe.h1]?.type!==Sc||this._board[qe.h1]?.color!==Wn)&&(this._castling.w&=-33),(!t||this._board[qe.a8]?.type!==Sc||this._board[qe.a8]?.color!==As)&&(this._castling.b&=-65),(!t||this._board[qe.h8]?.type!==Sc||this._board[qe.h8]?.color!==As)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){if(this._epSquare===Fn)return;const e=this._epSquare+(this._turn===Wn?-16:16),t=this._epSquare+(this._turn===Wn?16:-16),i=[t+1,t-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||this._board[t]?.color!==bc(this._turn)||this._board[t]?.type!==_n){this._hash^=this._epKey(),this._epSquare=Fn;return}const a=l=>!(l&136)&&this._board[l]?.color===this._turn&&this._board[l]?.type===_n;i.some(a)||(this._hash^=this._epKey(),this._epSquare=Fn)}_attacked(e,t,i){const a=[];for(let l=qe.a8;l<=qe.h1;l++){if(l&136){l+=7;continue}if(this._board[l]===void 0||this._board[l].color!==e)continue;const u=this._board[l],d=l-t;if(d===0)continue;const m=d+119;if(p4[m]&v4[u.type]){if(u.type===_n){if(d>0&&u.color===Wn||d<=0&&u.color===As)if(i)a.push(On(l));else return!0;continue}if(u.type==="n"||u.type==="k")if(i){a.push(On(l));continue}else return!0;const p=y4[m];let v=l+p,b=!1;for(;v!==t;){if(this._board[v]!=null){b=!0;break}v+=p}if(!b)if(i){a.push(On(l));continue}else return!0}}return i?a:!1}attackers(e,t){return t?this._attacked(t,qe[e],!0):this._attacked(this._turn,qe[e],!0)}_isKingAttacked(e){const t=this._kings[e];return t===-1?!1:this._attacked(bc(e),t)}hash(){return this._hash.toString(16)}isAttacked(e,t){return this._attacked(t,qe[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},t=[];let i=0,a=0;for(let l=qe.a8;l<=qe.h1;l++){if(a=(a+1)%2,l&136){l+=7;continue}const u=this._board[l];u&&(e[u.type]=u.type in e?e[u.type]+1:1,u.type===cf&&t.push(a),i++)}if(i===2)return!0;if(i===3&&(e[cf]===1||e[vp]===1))return!0;if(i===e[cf]+2){let l=0;const u=t.length;for(let d=0;d<u;d++)l+=t[d];if(l===0||l===u)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:t=void 0,piece:i=void 0}={}){const a=this._moves({square:t,piece:i});return e?a.map(l=>new Hh(this,l)):a.map(l=>this._moveToSan(l,a))}_moves({legal:e=!0,piece:t=void 0,square:i=void 0}={}){const a=i?i.toLowerCase():void 0,l=t?.toLowerCase(),u=[],d=this._turn,m=bc(d);let p=qe.a8,v=qe.h1,b=!1;if(a)if(a in qe)p=v=qe[a],b=!0;else return[];for(let R=p;R<=v;R++){if(R&136){R+=7;continue}if(!this._board[R]||this._board[R].color===m)continue;const{type:j}=this._board[R];let z;if(j===_n){if(l&&l!==j)continue;z=R+Vg[d][0],this._board[z]||(Qi(u,d,R,z,_n),z=R+Vg[d][1],E4[d]===Ja(R)&&!this._board[z]&&Qi(u,d,R,z,_n,void 0,Ke.BIG_PAWN));for(let D=2;D<4;D++)z=R+Vg[d][D],!(z&136)&&(this._board[z]?.color===m?Qi(u,d,R,z,_n,this._board[z].type,Ke.CAPTURE):z===this._epSquare&&Qi(u,d,R,z,_n,_n,Ke.EP_CAPTURE))}else{if(l&&l!==j)continue;for(let D=0,M=Q1[j].length;D<M;D++){const $=Q1[j][D];for(z=R;z+=$,!(z&136);){if(!this._board[z])Qi(u,d,R,z,j);else{if(this._board[z].color===d)break;Qi(u,d,R,z,j,this._board[z].type,Ke.CAPTURE);break}if(j===vp||j===An)break}}}}if((l===void 0||l===An)&&(!b||v===this._kings[d])){if(this._castling[d]&Ke.KSIDE_CASTLE){const R=this._kings[d],j=R+2;!this._board[R+1]&&!this._board[j]&&!this._attacked(m,this._kings[d])&&!this._attacked(m,R+1)&&!this._attacked(m,j)&&Qi(u,d,this._kings[d],j,An,void 0,Ke.KSIDE_CASTLE)}if(this._castling[d]&Ke.QSIDE_CASTLE){const R=this._kings[d],j=R-2;!this._board[R-1]&&!this._board[R-2]&&!this._board[R-3]&&!this._attacked(m,this._kings[d])&&!this._attacked(m,R-1)&&!this._attacked(m,j)&&Qi(u,d,this._kings[d],j,An,void 0,Ke.QSIDE_CASTLE)}}if(!e||this._kings[d]===-1)return u;const w=[];for(let R=0,j=u.length;R<j;R++)this._makeMove(u[R]),this._isKingAttacked(d)||w.push(u[R]),this._undoMove();return w}move(e,{strict:t=!1}={}){let i=null;if(typeof e=="string")i=this._moveFromSan(e,t);else if(e===null)i=this._moveFromSan(Pg,t);else if(typeof e=="object"){const l=this._moves();for(let u=0,d=l.length;u<d;u++)if(e.from===On(l[u].from)&&e.to===On(l[u].to)&&(!("promotion"in l[u])||e.promotion===l[u].promotion)){i=l[u];break}}if(!i)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&i.flags&Ke.NULL_MOVE)throw new Error("Null move not allowed when in check");const a=new Hh(this,i);return this._makeMove(i),this._incPositionCount(),a}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,t){this._hash^=this._pieceKey(e),this._board[t]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(t)}_makeMove(e){const t=this._turn,i=bc(t);if(this._push(e),e.flags&Ke.NULL_MOVE){t===As&&this._moveNumber++,this._halfMoves++,this._turn=i,this._epSquare=Fn;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&Ke.EP_CAPTURE&&(this._turn===As?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:t})),this._board[e.to].type===An){if(this._kings[t]=e.to,e.flags&Ke.KSIDE_CASTLE){const a=e.to-1,l=e.to+1;this._movePiece(l,a)}else if(e.flags&Ke.QSIDE_CASTLE){const a=e.to+1,l=e.to-2;this._movePiece(l,a)}this._castling[t]=0}if(this._castling[t]){for(let a=0,l=Yi[t].length;a<l;a++)if(e.from===Yi[t][a].square&&this._castling[t]&Yi[t][a].flag){this._castling[t]^=Yi[t][a].flag;break}}if(this._castling[i]){for(let a=0,l=Yi[i].length;a<l;a++)if(e.to===Yi[i][a].square&&this._castling[i]&Yi[i][a].flag){this._castling[i]^=Yi[i][a].flag;break}}if(this._hash^=this._castlingKey(),e.flags&Ke.BIG_PAWN){let a;t===As?a=e.to-16:a=e.to+16,!(e.to-1&136)&&this._board[e.to-1]?.type===_n&&this._board[e.to-1]?.color===i||!(e.to+1&136)&&this._board[e.to+1]?.type===_n&&this._board[e.to+1]?.color===i?(this._epSquare=a,this._hash^=this._epKey()):this._epSquare=Fn}else this._epSquare=Fn;e.piece===_n?this._halfMoves=0:e.flags&(Ke.CAPTURE|Ke.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===As&&this._moveNumber++,this._turn=i,this._hash^=Mg}undo(){const e=this._hash,t=this._undoMove();if(t){const i=new Hh(this,t);return this._decPositionCount(e),i}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=Mg;const i=this._turn,a=bc(i);if(t.flags&Ke.NULL_MOVE)return t;if(this._movePiece(t.to,t.from),t.piece&&(this._clear(t.from),this._set(t.from,{type:t.piece,color:i})),t.captured)if(t.flags&Ke.EP_CAPTURE){let l;i===As?l=t.to-16:l=t.to+16,this._set(l,{type:_n,color:a})}else this._set(t.to,{type:t.captured,color:a});if(t.flags&(Ke.KSIDE_CASTLE|Ke.QSIDE_CASTLE)){let l,u;t.flags&Ke.KSIDE_CASTLE?(l=t.to+1,u=t.to-1):(l=t.to-2,u=t.to+1),this._movePiece(u,l)}return t}pgn({newline:e=`
`,maxWidth:t=0}={}){const i=[];let a=!1;for(const w in this._header)this._header[w]&&i.push(`[${w} "${this._header[w]}"]`+e),a=!0;a&&this._history.length&&i.push(e);const l=w=>{const R=this._comments[this.fen()];if(typeof R<"u"){const j=w.length>0?" ":"";w=`${w}${j}{${R}}`}return w},u=[];for(;this._history.length>0;)u.push(this._undoMove());const d=[];let m="";for(u.length===0&&d.push(l(""));u.length>0;){m=l(m);const w=u.pop();if(!w)break;if(!this._history.length&&w.color==="b"){const R=`${this._moveNumber}. ...`;m=m?`${m} ${R}`:R}else w.color==="w"&&(m.length&&d.push(m),m=this._moveNumber+".");m=m+" "+this._moveToSan(w,this._moves({legal:!0})),this._makeMove(w)}if(m.length&&d.push(l(m)),d.push(this._header.Result||"*"),t===0)return i.join("")+d.join(" ");const p=function(){return i.length>0&&i[i.length-1]===" "?(i.pop(),!0):!1},v=function(w,R){for(const j of R.split(" "))if(j){if(w+j.length>t){for(;p();)w--;i.push(e),w=0}i.push(j),w+=j.length,i.push(" "),w++}return p()&&w--,w};let b=0;for(let w=0;w<d.length;w++){if(b+d[w].length>t&&d[w].includes("{")){b=v(b,d[w]);continue}b+d[w].length>t&&w!==0?(i[i.length-1]===" "&&i.pop(),i.push(e),b=0):w!==0&&(i.push(" "),b++),i.push(d[w]),b+=d[w].length}return i.join("")}header(...e){for(let t=0;t<e.length;t+=2)typeof e[t]=="string"&&typeof e[t+1]=="string"&&(this._header[e[t]]=e[t+1]);return this._header}setHeader(e,t){return this._header[e]=t??_p[e]??null,this.getHeaders()}removeHeader(e){return e in this._header?(this._header[e]=_p[e]||null,!0):!1}getHeaders(){const e={};for(const[t,i]of Object.entries(this._header))i!==null&&(e[t]=i);return e}loadPgn(e,{strict:t=!1,newlineChar:i=`\r?
`}={}){i!==`\r?
`&&(e=e.replace(new RegExp(i,"g"),`
`));const a=c4(e);this.reset();const l=a.headers;let u="";for(const p in l)p.toLowerCase()==="fen"&&(u=l[p]),this.header(p,l[p]);if(!t)u&&this.load(u,{preserveHeaders:!0});else if(l.SetUp==="1"){if(!("FEN"in l))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(l.FEN,{preserveHeaders:!0})}let d=a.root;for(;d;){if(d.move){const p=this._moveFromSan(d.move,t);if(p==null)throw new Error(`Invalid move in PGN: ${d.move}`);this._makeMove(p),this._incPositionCount()}d.comment!==void 0&&(this._comments[this.fen()]=d.comment),d=d.variations[0]}const m=a.result;m&&Object.keys(this._header).length&&this._header.Result!==m&&this.setHeader("Result",m)}_moveToSan(e,t){let i="";if(e.flags&Ke.KSIDE_CASTLE)i="O-O";else if(e.flags&Ke.QSIDE_CASTLE)i="O-O-O";else{if(e.flags&Ke.NULL_MOVE)return Pg;if(e.piece!==_n){const a=A4(e,t);i+=e.piece.toUpperCase()+a}e.flags&(Ke.CAPTURE|Ke.EP_CAPTURE)&&(e.piece===_n&&(i+=On(e.from)[0]),i+="x"),i+=On(e.to),e.promotion&&(i+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?i+="#":i+="+"),this._undoMove(),i}_moveFromSan(e,t=!1){let i=Lg(e);if(t||(i==="0-0"?i="O-O":i==="0-0-0"&&(i="O-O-O")),i==Pg)return{color:this._turn,from:0,to:0,piece:"k",flags:Ke.NULL_MOVE};let a=W1(i),l=this._moves({legal:!0,piece:a});for(let w=0,R=l.length;w<R;w++)if(i===Lg(this._moveToSan(l[w],l)))return l[w];if(t)return null;let u,d,m,p,v,b=!1;if(d=i.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),d?(u=d[1],m=d[2],p=d[3],v=d[4],m.length==1&&(b=!0)):(d=i.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),d&&(u=d[1],m=d[2],p=d[3],v=d[4],m.length==1&&(b=!0))),a=W1(i),l=this._moves({legal:!0,piece:u||a}),!p)return null;for(let w=0,R=l.length;w<R;w++)if(m){if((!u||u.toLowerCase()==l[w].piece)&&qe[m]==l[w].from&&qe[p]==l[w].to&&(!v||v.toLowerCase()==l[w].promotion))return l[w];if(b){const j=On(l[w].from);if((!u||u.toLowerCase()==l[w].piece)&&qe[p]==l[w].to&&(m==j[0]||m==j[1])&&(!v||v.toLowerCase()==l[w].promotion))return l[w]}}else if(i===Lg(this._moveToSan(l[w],l)).replace("x",""))return l[w];return null}ascii(){let e=`   +------------------------+
`;for(let t=qe.a8;t<=qe.h1;t++){if(Qc(t)===0&&(e+=" "+"87654321"[Ja(t)]+" |"),this._board[t]){const i=this._board[t].type,l=this._board[t].color===Wn?i.toUpperCase():i.toLowerCase();e+=" "+l+" "}else e+=" . ";t+1&136&&(e+=`|
`,t+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const t=this._moves({legal:!1});let i=0;const a=this._turn;for(let l=0,u=t.length;l<u;l++)this._makeMove(t[l]),this._isKingAttacked(a)||(e-1>0?i+=this.perft(e-1):i++),this._undoMove();return i}setTurn(e){return this._turn==e?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const e=[];let t=[];for(let i=qe.a8;i<=qe.h1;i++)this._board[i]==null?t.push(null):t.push({square:On(i),type:this._board[i].type,color:this._board[i].color}),i+1&136&&(e.push(t),t=[],i+=8);return e}squareColor(e){if(e in qe){const t=qe[e];return(Ja(t)+Qc(t))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const t=[],i=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){const a=t.pop();if(!a)break;e?i.push(new Hh(this,a)):i.push(this._moveToSan(a,this._moves())),this._makeMove(a)}return i}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){const t=this._positionCount.get(e)??0;t===1?this._positionCount.delete(e):this._positionCount.set(e,t-1)}_pruneComments(){const e=[],t={},i=a=>{a in this._comments&&(t[a]=this._comments[a])};for(;this._history.length>0;)e.push(this._undoMove());for(i(this.fen());;){const a=e.pop();if(!a)break;this._makeMove(a),i(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(const a of[An,Xi])t[a]!==void 0&&(t[a]?this._castling[e]|=Fh[a]:this._castling[e]&=~Fh[a]);this._updateCastlingRights();const i=this.getCastlingRights(e);return(t[An]===void 0||t[An]===i[An])&&(t[Xi]===void 0||t[Xi]===i[Xi])}getCastlingRights(e){return{[An]:(this._castling[e]&Fh[An])!==0,[Xi]:(this._castling[e]&Fh[Xi])!==0}}moveNumber(){return this._moveNumber}}var Ac=xx();const ud=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Sl(s){const e=Object.prototype.toString.call(s);return e==="[object Window]"||e==="[object global]"}function T0(s){return"nodeType"in s}function ls(s){var e,t;return s?Sl(s)?s:T0(s)&&(e=(t=s.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function E0(s){const{Document:e}=ls(s);return s instanceof e}function du(s){return Sl(s)?!1:s instanceof ls(s).HTMLElement}function WT(s){return s instanceof ls(s).SVGElement}function Al(s){return s?Sl(s)?s.document:T0(s)?E0(s)?s:du(s)||WT(s)?s.ownerDocument:document:document:document}const ci=ud?V.useLayoutEffect:V.useEffect;function hd(s){const e=V.useRef(s);return ci(()=>{e.current=s}),V.useCallback(function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return e.current==null?void 0:e.current(...i)},[])}function R4(){const s=V.useRef(null),e=V.useCallback((i,a)=>{s.current=setInterval(i,a)},[]),t=V.useCallback(()=>{s.current!==null&&(clearInterval(s.current),s.current=null)},[]);return[e,t]}function Xc(s,e){e===void 0&&(e=[s]);const t=V.useRef(s);return ci(()=>{t.current!==s&&(t.current=s)},e),t}function mu(s,e){const t=V.useRef();return V.useMemo(()=>{const i=s(t.current);return t.current=i,i},[...e])}function Mf(s){const e=hd(s),t=V.useRef(null),i=V.useCallback(a=>{a!==t.current&&e?.(a,t.current),t.current=a},[]);return[t,i]}function jf(s){const e=V.useRef();return V.useEffect(()=>{e.current=s},[s]),e.current}let Ug={};function fd(s,e){return V.useMemo(()=>{if(e)return e;const t=Ug[s]==null?0:Ug[s]+1;return Ug[s]=t,s+"-"+t},[s,e])}function JT(s){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];return i.reduce((l,u)=>{const d=Object.entries(u);for(const[m,p]of d){const v=l[m];v!=null&&(l[m]=v+s*p)}return l},{...e})}}const il=JT(1),Wc=JT(-1);function C4(s){return"clientX"in s&&"clientY"in s}function S0(s){if(!s)return!1;const{KeyboardEvent:e}=ls(s.target);return e&&s instanceof e}function N4(s){if(!s)return!1;const{TouchEvent:e}=ls(s.target);return e&&s instanceof e}function Vf(s){if(N4(s)){if(s.touches&&s.touches.length){const{clientX:e,clientY:t}=s.touches[0];return{x:e,y:t}}else if(s.changedTouches&&s.changedTouches.length){const{clientX:e,clientY:t}=s.changedTouches[0];return{x:e,y:t}}}return C4(s)?{x:s.clientX,y:s.clientY}:null}const pl=Object.freeze({Translate:{toString(s){if(!s)return;const{x:e,y:t}=s;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(s){if(!s)return;const{scaleX:e,scaleY:t}=s;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(s){if(s)return[pl.Translate.toString(s),pl.Scale.toString(s)].join(" ")}},Transition:{toString(s){let{property:e,duration:t,easing:i}=s;return e+" "+t+"ms "+i}}}),J1="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function I4(s){return s.matches(J1)?s:s.querySelector(J1)}const k4={display:"none"};function D4(s){let{id:e,value:t}=s;return He.createElement("div",{id:e,style:k4},t)}function O4(s){let{id:e,announcement:t,ariaLiveType:i="assertive"}=s;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return He.createElement("div",{id:e,style:a,role:"status","aria-live":i,"aria-atomic":!0},t)}function M4(){const[s,e]=V.useState("");return{announce:V.useCallback(i=>{i!=null&&e(i)},[]),announcement:s}}const ZT=V.createContext(null);function j4(s){const e=V.useContext(ZT);V.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(s)},[s,e])}function V4(){const[s]=V.useState(()=>new Set),e=V.useCallback(i=>(s.add(i),()=>s.delete(i)),[s]);return[V.useCallback(i=>{let{type:a,event:l}=i;s.forEach(u=>{var d;return(d=u[a])==null?void 0:d.call(u,l)})},[s]),e]}const P4={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},L4={onDragStart(s){let{active:e}=s;return"Picked up draggable item "+e.id+"."},onDragOver(s){let{active:e,over:t}=s;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(s){let{active:e,over:t}=s;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(s){let{active:e}=s;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function U4(s){let{announcements:e=L4,container:t,hiddenTextDescribedById:i,screenReaderInstructions:a=P4}=s;const{announce:l,announcement:u}=M4(),d=fd("DndLiveRegion"),[m,p]=V.useState(!1);if(V.useEffect(()=>{p(!0)},[]),j4(V.useMemo(()=>({onDragStart(b){let{active:w}=b;l(e.onDragStart({active:w}))},onDragMove(b){let{active:w,over:R}=b;e.onDragMove&&l(e.onDragMove({active:w,over:R}))},onDragOver(b){let{active:w,over:R}=b;l(e.onDragOver({active:w,over:R}))},onDragEnd(b){let{active:w,over:R}=b;l(e.onDragEnd({active:w,over:R}))},onDragCancel(b){let{active:w,over:R}=b;l(e.onDragCancel({active:w,over:R}))}}),[l,e])),!m)return null;const v=He.createElement(He.Fragment,null,He.createElement(D4,{id:i,value:a.draggable}),He.createElement(O4,{id:d,announcement:u}));return t?Ac.createPortal(v,t):v}var Rn;(function(s){s.DragStart="dragStart",s.DragMove="dragMove",s.DragEnd="dragEnd",s.DragCancel="dragCancel",s.DragOver="dragOver",s.RegisterDroppable="registerDroppable",s.SetDroppableDisabled="setDroppableDisabled",s.UnregisterDroppable="unregisterDroppable"})(Rn||(Rn={}));function Pf(){}function ni(s,e){return V.useMemo(()=>({sensor:s,options:e??{}}),[s,e])}function dd(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return V.useMemo(()=>[...e].filter(i=>i!=null),[...e])}const hr=Object.freeze({x:0,y:0});function eE(s,e){return Math.sqrt(Math.pow(s.x-e.x,2)+Math.pow(s.y-e.y,2))}function z4(s,e){const t=Vf(s);if(!t)return"0 0";const i={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return i.x+"% "+i.y+"%"}function tE(s,e){let{data:{value:t}}=s,{data:{value:i}}=e;return t-i}function B4(s,e){let{data:{value:t}}=s,{data:{value:i}}=e;return i-t}function Z1(s){let{left:e,top:t,height:i,width:a}=s;return[{x:e,y:t},{x:e+a,y:t},{x:e,y:t+i},{x:e+a,y:t+i}]}function nE(s,e){if(!s||s.length===0)return null;const[t]=s;return t[e]}function ex(s,e,t){return e===void 0&&(e=s.left),t===void 0&&(t=s.top),{x:e+s.width*.5,y:t+s.height*.5}}const sE=s=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=s;const a=ex(e,e.left,e.top),l=[];for(const u of i){const{id:d}=u,m=t.get(d);if(m){const p=eE(ex(m),a);l.push({id:d,data:{droppableContainer:u,value:p}})}}return l.sort(tE)},q4=s=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=s;const a=Z1(e),l=[];for(const u of i){const{id:d}=u,m=t.get(d);if(m){const p=Z1(m),v=a.reduce((w,R,j)=>w+eE(p[j],R),0),b=Number((v/4).toFixed(4));l.push({id:d,data:{droppableContainer:u,value:b}})}}return l.sort(tE)};function H4(s,e){const t=Math.max(e.top,s.top),i=Math.max(e.left,s.left),a=Math.min(e.left+e.width,s.left+s.width),l=Math.min(e.top+e.height,s.top+s.height),u=a-i,d=l-t;if(i<a&&t<l){const m=e.width*e.height,p=s.width*s.height,v=u*d,b=v/(m+p-v);return Number(b.toFixed(4))}return 0}const F4=s=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=s;const a=[];for(const l of i){const{id:u}=l,d=t.get(u);if(d){const m=H4(d,e);m>0&&a.push({id:u,data:{droppableContainer:l,value:m}})}}return a.sort(B4)};function G4(s,e,t){return{...s,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function rE(s,e){return s&&e?{x:s.left-e.left,y:s.top-e.top}:hr}function $4(s){return function(t){for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];return a.reduce((u,d)=>({...u,top:u.top+s*d.y,bottom:u.bottom+s*d.y,left:u.left+s*d.x,right:u.right+s*d.x}),{...t})}}const K4=$4(1);function iE(s){if(s.startsWith("matrix3d(")){const e=s.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(s.startsWith("matrix(")){const e=s.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Y4(s,e,t){const i=iE(e);if(!i)return s;const{scaleX:a,scaleY:l,x:u,y:d}=i,m=s.left-u-(1-a)*parseFloat(t),p=s.top-d-(1-l)*parseFloat(t.slice(t.indexOf(" ")+1)),v=a?s.width/a:s.width,b=l?s.height/l:s.height;return{width:v,height:b,top:p,right:m+v,bottom:p+b,left:m}}const Q4={ignoreTransform:!1};function gu(s,e){e===void 0&&(e=Q4);let t=s.getBoundingClientRect();if(e.ignoreTransform){const{transform:p,transformOrigin:v}=ls(s).getComputedStyle(s);p&&(t=Y4(t,p,v))}const{top:i,left:a,width:l,height:u,bottom:d,right:m}=t;return{top:i,left:a,width:l,height:u,bottom:d,right:m}}function tx(s){return gu(s,{ignoreTransform:!0})}function X4(s){const e=s.innerWidth,t=s.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function W4(s,e){return e===void 0&&(e=ls(s).getComputedStyle(s)),e.position==="fixed"}function J4(s,e){e===void 0&&(e=ls(s).getComputedStyle(s));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const l=e[a];return typeof l=="string"?t.test(l):!1})}function md(s,e){const t=[];function i(a){if(e!=null&&t.length>=e||!a)return t;if(E0(a)&&a.scrollingElement!=null&&!t.includes(a.scrollingElement))return t.push(a.scrollingElement),t;if(!du(a)||WT(a)||t.includes(a))return t;const l=ls(s).getComputedStyle(a);return a!==s&&J4(a,l)&&t.push(a),W4(a,l)?t:i(a.parentNode)}return s?i(s):t}function aE(s){const[e]=md(s,1);return e??null}function zg(s){return!ud||!s?null:Sl(s)?s:T0(s)?E0(s)||s===Al(s).scrollingElement?window:du(s)?s:null:null}function oE(s){return Sl(s)?s.scrollX:s.scrollLeft}function lE(s){return Sl(s)?s.scrollY:s.scrollTop}function bp(s){return{x:oE(s),y:lE(s)}}var jn;(function(s){s[s.Forward=1]="Forward",s[s.Backward=-1]="Backward"})(jn||(jn={}));function cE(s){return!ud||!s?!1:s===document.scrollingElement}function uE(s){const e={x:0,y:0},t=cE(s)?{height:window.innerHeight,width:window.innerWidth}:{height:s.clientHeight,width:s.clientWidth},i={x:s.scrollWidth-t.width,y:s.scrollHeight-t.height},a=s.scrollTop<=e.y,l=s.scrollLeft<=e.x,u=s.scrollTop>=i.y,d=s.scrollLeft>=i.x;return{isTop:a,isLeft:l,isBottom:u,isRight:d,maxScroll:i,minScroll:e}}const Z4={x:.2,y:.2};function e5(s,e,t,i,a){let{top:l,left:u,right:d,bottom:m}=t;i===void 0&&(i=10),a===void 0&&(a=Z4);const{isTop:p,isBottom:v,isLeft:b,isRight:w}=uE(s),R={x:0,y:0},j={x:0,y:0},z={height:e.height*a.y,width:e.width*a.x};return!p&&l<=e.top+z.height?(R.y=jn.Backward,j.y=i*Math.abs((e.top+z.height-l)/z.height)):!v&&m>=e.bottom-z.height&&(R.y=jn.Forward,j.y=i*Math.abs((e.bottom-z.height-m)/z.height)),!w&&d>=e.right-z.width?(R.x=jn.Forward,j.x=i*Math.abs((e.right-z.width-d)/z.width)):!b&&u<=e.left+z.width&&(R.x=jn.Backward,j.x=i*Math.abs((e.left+z.width-u)/z.width)),{direction:R,speed:j}}function t5(s){if(s===document.scrollingElement){const{innerWidth:l,innerHeight:u}=window;return{top:0,left:0,right:l,bottom:u,width:l,height:u}}const{top:e,left:t,right:i,bottom:a}=s.getBoundingClientRect();return{top:e,left:t,right:i,bottom:a,width:s.clientWidth,height:s.clientHeight}}function hE(s){return s.reduce((e,t)=>il(e,bp(t)),hr)}function n5(s){return s.reduce((e,t)=>e+oE(t),0)}function s5(s){return s.reduce((e,t)=>e+lE(t),0)}function fE(s,e){if(e===void 0&&(e=gu),!s)return;const{top:t,left:i,bottom:a,right:l}=e(s);aE(s)&&(a<=0||l<=0||t>=window.innerHeight||i>=window.innerWidth)&&s.scrollIntoView({block:"center",inline:"center"})}const r5=[["x",["left","right"],n5],["y",["top","bottom"],s5]];class A0{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=md(t),a=hE(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[l,u,d]of r5)for(const m of u)Object.defineProperty(this,m,{get:()=>{const p=d(i),v=a[l]-p;return this.rect[m]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class jc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...t)})},this.target=e}add(e,t,i){var a;(a=this.target)==null||a.addEventListener(e,t,i),this.listeners.push([e,t,i])}}function i5(s){const{EventTarget:e}=ls(s);return s instanceof e?s:Al(s)}function Bg(s,e){const t=Math.abs(s.x),i=Math.abs(s.y);return typeof e=="number"?Math.sqrt(t**2+i**2)>e:"x"in e&&"y"in e?t>e.x&&i>e.y:"x"in e?t>e.x:"y"in e?i>e.y:!1}var Ks;(function(s){s.Click="click",s.DragStart="dragstart",s.Keydown="keydown",s.ContextMenu="contextmenu",s.Resize="resize",s.SelectionChange="selectionchange",s.VisibilityChange="visibilitychange"})(Ks||(Ks={}));function nx(s){s.preventDefault()}function a5(s){s.stopPropagation()}var gt;(function(s){s.Space="Space",s.Down="ArrowDown",s.Right="ArrowRight",s.Left="ArrowLeft",s.Up="ArrowUp",s.Esc="Escape",s.Enter="Enter",s.Tab="Tab"})(gt||(gt={}));const dE={start:[gt.Space,gt.Enter],cancel:[gt.Esc],end:[gt.Space,gt.Enter,gt.Tab]},o5=(s,e)=>{let{currentCoordinates:t}=e;switch(s.code){case gt.Right:return{...t,x:t.x+25};case gt.Left:return{...t,x:t.x-25};case gt.Down:return{...t,y:t.y+25};case gt.Up:return{...t,y:t.y-25}}};class gd{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new jc(Al(t)),this.windowListeners=new jc(ls(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ks.Resize,this.handleCancel),this.windowListeners.add(Ks.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ks.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,i=e.node.current;i&&fE(i),t(hr)}handleKeyDown(e){if(S0(e)){const{active:t,context:i,options:a}=this.props,{keyboardCodes:l=dE,coordinateGetter:u=o5,scrollBehavior:d="smooth"}=a,{code:m}=e;if(l.end.includes(m)){this.handleEnd(e);return}if(l.cancel.includes(m)){this.handleCancel(e);return}const{collisionRect:p}=i.current,v=p?{x:p.left,y:p.top}:hr;this.referenceCoordinates||(this.referenceCoordinates=v);const b=u(e,{active:t,context:i.current,currentCoordinates:v});if(b){const w=Wc(b,v),R={x:0,y:0},{scrollableAncestors:j}=i.current;for(const z of j){const D=e.code,{isTop:M,isRight:$,isLeft:B,isBottom:ce,maxScroll:X,minScroll:F}=uE(z),C=t5(z),S={x:Math.min(D===gt.Right?C.right-C.width/2:C.right,Math.max(D===gt.Right?C.left:C.left+C.width/2,b.x)),y:Math.min(D===gt.Down?C.bottom-C.height/2:C.bottom,Math.max(D===gt.Down?C.top:C.top+C.height/2,b.y))},N=D===gt.Right&&!$||D===gt.Left&&!B,E=D===gt.Down&&!ce||D===gt.Up&&!M;if(N&&S.x!==b.x){const A=z.scrollLeft+w.x,P=D===gt.Right&&A<=X.x||D===gt.Left&&A>=F.x;if(P&&!w.y){z.scrollTo({left:A,behavior:d});return}P?R.x=z.scrollLeft-A:R.x=D===gt.Right?z.scrollLeft-X.x:z.scrollLeft-F.x,R.x&&z.scrollBy({left:-R.x,behavior:d});break}else if(E&&S.y!==b.y){const A=z.scrollTop+w.y,P=D===gt.Down&&A<=X.y||D===gt.Up&&A>=F.y;if(P&&!w.x){z.scrollTo({top:A,behavior:d});return}P?R.y=z.scrollTop-A:R.y=D===gt.Down?z.scrollTop-X.y:z.scrollTop-F.y,R.y&&z.scrollBy({top:-R.y,behavior:d});break}}this.handleMove(e,il(Wc(b,this.referenceCoordinates),R))}}}handleMove(e,t){const{onMove:i}=this.props;e.preventDefault(),i(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}gd.activators=[{eventName:"onKeyDown",handler:(s,e,t)=>{let{keyboardCodes:i=dE,onActivation:a}=e,{active:l}=t;const{code:u}=s.nativeEvent;if(i.start.includes(u)){const d=l.activatorNode.current;return d&&s.target!==d?!1:(s.preventDefault(),a?.({event:s.nativeEvent}),!0)}return!1}}];function sx(s){return!!(s&&"distance"in s)}function rx(s){return!!(s&&"delay"in s)}class R0{constructor(e,t,i){var a;i===void 0&&(i=i5(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:l}=e,{target:u}=l;this.props=e,this.events=t,this.document=Al(u),this.documentListeners=new jc(this.document),this.listeners=new jc(i),this.windowListeners=new jc(ls(u)),this.initialCoordinates=(a=Vf(l))!=null?a:hr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ks.Resize,this.handleCancel),this.windowListeners.add(Ks.DragStart,nx),this.windowListeners.add(Ks.VisibilityChange,this.handleCancel),this.windowListeners.add(Ks.ContextMenu,nx),this.documentListeners.add(Ks.Keydown,this.handleKeydown),t){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(rx(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(sx(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:i,onPending:a}=this.props;a(i,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ks.Click,a5,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ks.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:i,initialCoordinates:a,props:l}=this,{onMove:u,options:{activationConstraint:d}}=l;if(!a)return;const m=(t=Vf(e))!=null?t:hr,p=Wc(a,m);if(!i&&d){if(sx(d)){if(d.tolerance!=null&&Bg(p,d.tolerance))return this.handleCancel();if(Bg(p,d.distance))return this.handleStart()}if(rx(d)&&Bg(p,d.tolerance))return this.handleCancel();this.handlePending(d,p);return}e.cancelable&&e.preventDefault(),u(m)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===gt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const l5={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class pu extends R0{constructor(e){const{event:t}=e,i=Al(t.target);super(e,l5,i)}}pu.activators=[{eventName:"onPointerDown",handler:(s,e)=>{let{nativeEvent:t}=s,{onActivation:i}=e;return!t.isPrimary||t.button!==0?!1:(i?.({event:t}),!0)}}];const c5={move:{name:"mousemove"},end:{name:"mouseup"}};var xp;(function(s){s[s.RightClick=2]="RightClick"})(xp||(xp={}));class C0 extends R0{constructor(e){super(e,c5,Al(e.event.target))}}C0.activators=[{eventName:"onMouseDown",handler:(s,e)=>{let{nativeEvent:t}=s,{onActivation:i}=e;return t.button===xp.RightClick?!1:(i?.({event:t}),!0)}}];const qg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class N0 extends R0{constructor(e){super(e,qg)}static setup(){return window.addEventListener(qg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(qg.move.name,e)};function e(){}}}N0.activators=[{eventName:"onTouchStart",handler:(s,e)=>{let{nativeEvent:t}=s,{onActivation:i}=e;const{touches:a}=t;return a.length>1?!1:(i?.({event:t}),!0)}}];var Vc;(function(s){s[s.Pointer=0]="Pointer",s[s.DraggableRect=1]="DraggableRect"})(Vc||(Vc={}));var Lf;(function(s){s[s.TreeOrder=0]="TreeOrder",s[s.ReversedTreeOrder=1]="ReversedTreeOrder"})(Lf||(Lf={}));function u5(s){let{acceleration:e,activator:t=Vc.Pointer,canScroll:i,draggingRect:a,enabled:l,interval:u=5,order:d=Lf.TreeOrder,pointerCoordinates:m,scrollableAncestors:p,scrollableAncestorRects:v,delta:b,threshold:w}=s;const R=f5({delta:b,disabled:!l}),[j,z]=R4(),D=V.useRef({x:0,y:0}),M=V.useRef({x:0,y:0}),$=V.useMemo(()=>{switch(t){case Vc.Pointer:return m?{top:m.y,bottom:m.y,left:m.x,right:m.x}:null;case Vc.DraggableRect:return a}},[t,a,m]),B=V.useRef(null),ce=V.useCallback(()=>{const F=B.current;if(!F)return;const C=D.current.x*M.current.x,S=D.current.y*M.current.y;F.scrollBy(C,S)},[]),X=V.useMemo(()=>d===Lf.TreeOrder?[...p].reverse():p,[d,p]);V.useEffect(()=>{if(!l||!p.length||!$){z();return}for(const F of X){if(i?.(F)===!1)continue;const C=p.indexOf(F),S=v[C];if(!S)continue;const{direction:N,speed:E}=e5(F,S,$,e,w);for(const A of["x","y"])R[A][N[A]]||(E[A]=0,N[A]=0);if(E.x>0||E.y>0){z(),B.current=F,j(ce,u),D.current=E,M.current=N;return}}D.current={x:0,y:0},M.current={x:0,y:0},z()},[e,ce,i,z,l,u,JSON.stringify($),JSON.stringify(R),j,p,X,v,JSON.stringify(w)])}const h5={x:{[jn.Backward]:!1,[jn.Forward]:!1},y:{[jn.Backward]:!1,[jn.Forward]:!1}};function f5(s){let{delta:e,disabled:t}=s;const i=jf(e);return mu(a=>{if(t||!i||!a)return h5;const l={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[jn.Backward]:a.x[jn.Backward]||l.x===-1,[jn.Forward]:a.x[jn.Forward]||l.x===1},y:{[jn.Backward]:a.y[jn.Backward]||l.y===-1,[jn.Forward]:a.y[jn.Forward]||l.y===1}}},[t,e,i])}function d5(s,e){const t=e!=null?s.get(e):void 0,i=t?t.node.current:null;return mu(a=>{var l;return e==null?null:(l=i??a)!=null?l:null},[i,e])}function m5(s,e){return V.useMemo(()=>s.reduce((t,i)=>{const{sensor:a}=i,l=a.activators.map(u=>({eventName:u.eventName,handler:e(u.handler,i)}));return[...t,...l]},[]),[s,e])}var Jc;(function(s){s[s.Always=0]="Always",s[s.BeforeDragging=1]="BeforeDragging",s[s.WhileDragging=2]="WhileDragging"})(Jc||(Jc={}));var wp;(function(s){s.Optimized="optimized"})(wp||(wp={}));const ix=new Map;function g5(s,e){let{dragging:t,dependencies:i,config:a}=e;const[l,u]=V.useState(null),{frequency:d,measure:m,strategy:p}=a,v=V.useRef(s),b=D(),w=Xc(b),R=V.useCallback(function(M){M===void 0&&(M=[]),!w.current&&u($=>$===null?M:$.concat(M.filter(B=>!$.includes(B))))},[w]),j=V.useRef(null),z=mu(M=>{if(b&&!t)return ix;if(!M||M===ix||v.current!==s||l!=null){const $=new Map;for(let B of s){if(!B)continue;if(l&&l.length>0&&!l.includes(B.id)&&B.rect.current){$.set(B.id,B.rect.current);continue}const ce=B.node.current,X=ce?new A0(m(ce),ce):null;B.rect.current=X,X&&$.set(B.id,X)}return $}return M},[s,l,t,b,m]);return V.useEffect(()=>{v.current=s},[s]),V.useEffect(()=>{b||R()},[t,b]),V.useEffect(()=>{l&&l.length>0&&u(null)},[JSON.stringify(l)]),V.useEffect(()=>{b||typeof d!="number"||j.current!==null||(j.current=setTimeout(()=>{R(),j.current=null},d))},[d,b,R,...i]),{droppableRects:z,measureDroppableContainers:R,measuringScheduled:l!=null};function D(){switch(p){case Jc.Always:return!1;case Jc.BeforeDragging:return t;default:return!t}}}function I0(s,e){return mu(t=>s?t||(typeof e=="function"?e(s):s):null,[e,s])}function p5(s,e){return I0(s,e)}function y5(s){let{callback:e,disabled:t}=s;const i=hd(e),a=V.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(i)},[i,t]);return V.useEffect(()=>()=>a?.disconnect(),[a]),a}function pd(s){let{callback:e,disabled:t}=s;const i=hd(e),a=V.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(i)},[t]);return V.useEffect(()=>()=>a?.disconnect(),[a]),a}function v5(s){return new A0(gu(s),s)}function ax(s,e,t){e===void 0&&(e=v5);const[i,a]=V.useState(null);function l(){a(m=>{if(!s)return null;if(s.isConnected===!1){var p;return(p=m??t)!=null?p:null}const v=e(s);return JSON.stringify(m)===JSON.stringify(v)?m:v})}const u=y5({callback(m){if(s)for(const p of m){const{type:v,target:b}=p;if(v==="childList"&&b instanceof HTMLElement&&b.contains(s)){l();break}}}}),d=pd({callback:l});return ci(()=>{l(),s?(d?.observe(s),u?.observe(document.body,{childList:!0,subtree:!0})):(d?.disconnect(),u?.disconnect())},[s]),i}function _5(s){const e=I0(s);return rE(s,e)}const ox=[];function b5(s){const e=V.useRef(s),t=mu(i=>s?i&&i!==ox&&s&&e.current&&s.parentNode===e.current.parentNode?i:md(s):ox,[s]);return V.useEffect(()=>{e.current=s},[s]),t}function x5(s){const[e,t]=V.useState(null),i=V.useRef(s),a=V.useCallback(l=>{const u=zg(l.target);u&&t(d=>d?(d.set(u,bp(u)),new Map(d)):null)},[]);return V.useEffect(()=>{const l=i.current;if(s!==l){u(l);const d=s.map(m=>{const p=zg(m);return p?(p.addEventListener("scroll",a,{passive:!0}),[p,bp(p)]):null}).filter(m=>m!=null);t(d.length?new Map(d):null),i.current=s}return()=>{u(s),u(l)};function u(d){d.forEach(m=>{const p=zg(m);p?.removeEventListener("scroll",a)})}},[a,s]),V.useMemo(()=>s.length?e?Array.from(e.values()).reduce((l,u)=>il(l,u),hr):hE(s):hr,[s,e])}function lx(s,e){e===void 0&&(e=[]);const t=V.useRef(null);return V.useEffect(()=>{t.current=null},e),V.useEffect(()=>{const i=s!==hr;i&&!t.current&&(t.current=s),!i&&t.current&&(t.current=null)},[s]),t.current?Wc(s,t.current):hr}function w5(s){V.useEffect(()=>{if(!ud)return;const e=s.map(t=>{let{sensor:i}=t;return i.setup==null?void 0:i.setup()});return()=>{for(const t of e)t?.()}},s.map(e=>{let{sensor:t}=e;return t}))}function T5(s,e){return V.useMemo(()=>s.reduce((t,i)=>{let{eventName:a,handler:l}=i;return t[a]=u=>{l(u,e)},t},{}),[s,e])}function mE(s){return V.useMemo(()=>s?X4(s):null,[s])}const cx=[];function E5(s,e){e===void 0&&(e=gu);const[t]=s,i=mE(t?ls(t):null),[a,l]=V.useState(cx);function u(){l(()=>s.length?s.map(m=>cE(m)?i:new A0(e(m),m)):cx)}const d=pd({callback:u});return ci(()=>{d?.disconnect(),u(),s.forEach(m=>d?.observe(m))},[s]),a}function gE(s){if(!s)return null;if(s.children.length>1)return s;const e=s.children[0];return du(e)?e:s}function S5(s){let{measure:e}=s;const[t,i]=V.useState(null),a=V.useCallback(p=>{for(const{target:v}of p)if(du(v)){i(b=>{const w=e(v);return b?{...b,width:w.width,height:w.height}:w});break}},[e]),l=pd({callback:a}),u=V.useCallback(p=>{const v=gE(p);l?.disconnect(),v&&l?.observe(v),i(v?e(v):null)},[e,l]),[d,m]=Mf(u);return V.useMemo(()=>({nodeRef:d,rect:t,setRef:m}),[t,d,m])}const A5=[{sensor:pu,options:{}},{sensor:gd,options:{}}],R5={current:{}},uf={draggable:{measure:tx},droppable:{measure:tx,strategy:Jc.WhileDragging,frequency:wp.Optimized},dragOverlay:{measure:gu}};class Pc extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,i;return(t=(i=this.get(e))==null?void 0:i.node.current)!=null?t:void 0}}const C5={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Pc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Pf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:uf,measureDroppableContainers:Pf,windowRect:null,measuringScheduled:!1},pE={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Pf,draggableNodes:new Map,over:null,measureDroppableContainers:Pf},yu=V.createContext(pE),yE=V.createContext(C5);function N5(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Pc}}}function I5(s,e){switch(e.type){case Rn.DragStart:return{...s,draggable:{...s.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Rn.DragMove:return s.draggable.active==null?s:{...s,draggable:{...s.draggable,translate:{x:e.coordinates.x-s.draggable.initialCoordinates.x,y:e.coordinates.y-s.draggable.initialCoordinates.y}}};case Rn.DragEnd:case Rn.DragCancel:return{...s,draggable:{...s.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Rn.RegisterDroppable:{const{element:t}=e,{id:i}=t,a=new Pc(s.droppable.containers);return a.set(i,t),{...s,droppable:{...s.droppable,containers:a}}}case Rn.SetDroppableDisabled:{const{id:t,key:i,disabled:a}=e,l=s.droppable.containers.get(t);if(!l||i!==l.key)return s;const u=new Pc(s.droppable.containers);return u.set(t,{...l,disabled:a}),{...s,droppable:{...s.droppable,containers:u}}}case Rn.UnregisterDroppable:{const{id:t,key:i}=e,a=s.droppable.containers.get(t);if(!a||i!==a.key)return s;const l=new Pc(s.droppable.containers);return l.delete(t),{...s,droppable:{...s.droppable,containers:l}}}default:return s}}function k5(s){let{disabled:e}=s;const{active:t,activatorEvent:i,draggableNodes:a}=V.useContext(yu),l=jf(i),u=jf(t?.id);return V.useEffect(()=>{if(!e&&!i&&l&&u!=null){if(!S0(l)||document.activeElement===l.target)return;const d=a.get(u);if(!d)return;const{activatorNode:m,node:p}=d;if(!m.current&&!p.current)return;requestAnimationFrame(()=>{for(const v of[m.current,p.current]){if(!v)continue;const b=I4(v);if(b){b.focus();break}}})}},[i,e,a,u,l]),null}function vE(s,e){let{transform:t,...i}=e;return s!=null&&s.length?s.reduce((a,l)=>l({transform:a,...i}),t):t}function D5(s){return V.useMemo(()=>({draggable:{...uf.draggable,...s?.draggable},droppable:{...uf.droppable,...s?.droppable},dragOverlay:{...uf.dragOverlay,...s?.dragOverlay}}),[s?.draggable,s?.droppable,s?.dragOverlay])}function O5(s){let{activeNode:e,measure:t,initialRect:i,config:a=!0}=s;const l=V.useRef(!1),{x:u,y:d}=typeof a=="boolean"?{x:a,y:a}:a;ci(()=>{if(!u&&!d||!e){l.current=!1;return}if(l.current||!i)return;const p=e?.node.current;if(!p||p.isConnected===!1)return;const v=t(p),b=rE(v,i);if(u||(b.x=0),d||(b.y=0),l.current=!0,Math.abs(b.x)>0||Math.abs(b.y)>0){const w=aE(p);w&&w.scrollBy({top:b.y,left:b.x})}},[e,u,d,i,t])}const yd=V.createContext({...hr,scaleX:1,scaleY:1});var Wi;(function(s){s[s.Uninitialized=0]="Uninitialized",s[s.Initializing=1]="Initializing",s[s.Initialized=2]="Initialized"})(Wi||(Wi={}));const vd=V.memo(function(e){var t,i,a,l;let{id:u,accessibility:d,autoScroll:m=!0,children:p,sensors:v=A5,collisionDetection:b=F4,measuring:w,modifiers:R,...j}=e;const z=V.useReducer(I5,void 0,N5),[D,M]=z,[$,B]=V4(),[ce,X]=V.useState(Wi.Uninitialized),F=ce===Wi.Initialized,{draggable:{active:C,nodes:S,translate:N},droppable:{containers:E}}=D,A=C!=null?S.get(C):null,P=V.useRef({initial:null,translated:null}),O=V.useMemo(()=>{var tt;return C!=null?{id:C,data:(tt=A?.data)!=null?tt:R5,rect:P}:null},[C,A]),be=V.useRef(null),[_e,H]=V.useState(null),[Y,J]=V.useState(null),pe=Xc(j,Object.values(j)),ve=fd("DndDescribedBy",u),L=V.useMemo(()=>E.getEnabled(),[E]),Z=D5(w),{droppableRects:G,measureDroppableContainers:K,measuringScheduled:ue}=g5(L,{dragging:F,dependencies:[N.x,N.y],config:Z.droppable}),ye=d5(S,C),we=V.useMemo(()=>Y?Vf(Y):null,[Y]),Ie=Ws(),Se=p5(ye,Z.draggable.measure);O5({activeNode:C!=null?S.get(C):null,config:Ie.layoutShiftCompensation,initialRect:Se,measure:Z.draggable.measure});const Ue=ax(ye,Z.draggable.measure,Se),pt=ax(ye?ye.parentElement:null),nt=V.useRef({activatorEvent:null,active:null,activeNode:ye,collisionRect:null,collisions:null,droppableRects:G,draggableNodes:S,draggingNode:null,draggingNodeRect:null,droppableContainers:E,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ze=E.getNodeFor((t=nt.current.over)==null?void 0:t.id),Ce=S5({measure:Z.dragOverlay.measure}),je=(i=Ce.nodeRef.current)!=null?i:ye,st=F?(a=Ce.rect)!=null?a:Ue:null,Fe=!!(Ce.nodeRef.current&&Ce.rect),yt=_5(Fe?null:Ue),$e=mE(je?ls(je):null),ot=b5(F?Ze??ye:null),Kt=E5(ot),Wt=vE(R,{transform:{x:N.x-yt.x,y:N.y-yt.y,scaleX:1,scaleY:1},activatorEvent:Y,active:O,activeNodeRect:Ue,containerNodeRect:pt,draggingNodeRect:st,over:nt.current.over,overlayNodeRect:Ce.rect,scrollableAncestors:ot,scrollableAncestorRects:Kt,windowRect:$e}),Nn=we?il(we,N):null,fn=x5(ot),Ys=lx(fn),Ir=lx(fn,[Ue]),es=il(Wt,Ys),Ln=st?K4(st,Wt):null,Qs=O&&Ln?b({active:O,collisionRect:Ln,droppableRects:G,droppableContainers:L,pointerCoordinates:Nn}):null,kr=nE(Qs,"id"),[ts,Dr]=V.useState(null),ns=Fe?Wt:il(Wt,Ir),sn=G4(ns,(l=ts?.rect)!=null?l:null,Ue),In=V.useRef(null),Lt=V.useCallback((tt,Ut)=>{let{sensor:zt,options:Jt}=Ut;if(be.current==null)return;const kn=S.get(be.current);if(!kn)return;const dn=tt.nativeEvent,Yt=new zt({active:be.current,activeNode:kn,event:dn,options:Jt,context:nt,onAbort(Nt){if(!S.get(Nt))return;const{onDragAbort:rn}=pe.current,xe={id:Nt};rn?.(xe),$({type:"onDragAbort",event:xe})},onPending(Nt,It,rn,xe){if(!S.get(Nt))return;const{onDragPending:vt}=pe.current,Ft={id:Nt,constraint:It,initialCoordinates:rn,offset:xe};vt?.(Ft),$({type:"onDragPending",event:Ft})},onStart(Nt){const It=be.current;if(It==null)return;const rn=S.get(It);if(!rn)return;const{onDragStart:xe}=pe.current,Tn={activatorEvent:dn,active:{id:It,data:rn.data,rect:P}};Ac.unstable_batchedUpdates(()=>{xe?.(Tn),X(Wi.Initializing),M({type:Rn.DragStart,initialCoordinates:Nt,active:It}),$({type:"onDragStart",event:Tn}),H(In.current),J(dn)})},onMove(Nt){M({type:Rn.DragMove,coordinates:Nt})},onEnd:ie(Rn.DragEnd),onCancel:ie(Rn.DragCancel)});In.current=Yt;function ie(Nt){return async function(){const{active:rn,collisions:xe,over:Tn,scrollAdjustedTranslate:vt}=nt.current;let Ft=null;if(rn&&vt){const{cancelDrop:En}=pe.current;Ft={activatorEvent:dn,active:rn,collisions:xe,delta:vt,over:Tn},Nt===Rn.DragEnd&&typeof En=="function"&&await Promise.resolve(En(Ft))&&(Nt=Rn.DragCancel)}be.current=null,Ac.unstable_batchedUpdates(()=>{M({type:Nt}),X(Wi.Uninitialized),Dr(null),H(null),J(null),In.current=null;const En=Nt===Rn.DragEnd?"onDragEnd":"onDragCancel";if(Ft){const kt=pe.current[En];kt?.(Ft),$({type:En,event:Ft})}})}}},[S]),Or=V.useCallback((tt,Ut)=>(zt,Jt)=>{const kn=zt.nativeEvent,dn=S.get(Jt);if(be.current!==null||!dn||kn.dndKit||kn.defaultPrevented)return;const Yt={active:dn};tt(zt,Ut.options,Yt)===!0&&(kn.dndKit={capturedBy:Ut.sensor},be.current=Jt,Lt(zt,Ut))},[S,Lt]),Xs=m5(v,Or);w5(v),ci(()=>{Ue&&ce===Wi.Initializing&&X(Wi.Initialized)},[Ue,ce]),V.useEffect(()=>{const{onDragMove:tt}=pe.current,{active:Ut,activatorEvent:zt,collisions:Jt,over:kn}=nt.current;if(!Ut||!zt)return;const dn={active:Ut,activatorEvent:zt,collisions:Jt,delta:{x:es.x,y:es.y},over:kn};Ac.unstable_batchedUpdates(()=>{tt?.(dn),$({type:"onDragMove",event:dn})})},[es.x,es.y]),V.useEffect(()=>{const{active:tt,activatorEvent:Ut,collisions:zt,droppableContainers:Jt,scrollAdjustedTranslate:kn}=nt.current;if(!tt||be.current==null||!Ut||!kn)return;const{onDragOver:dn}=pe.current,Yt=Jt.get(kr),ie=Yt&&Yt.rect.current?{id:Yt.id,rect:Yt.rect.current,data:Yt.data,disabled:Yt.disabled}:null,Nt={active:tt,activatorEvent:Ut,collisions:zt,delta:{x:kn.x,y:kn.y},over:ie};Ac.unstable_batchedUpdates(()=>{Dr(ie),dn?.(Nt),$({type:"onDragOver",event:Nt})})},[kr]),ci(()=>{nt.current={activatorEvent:Y,active:O,activeNode:ye,collisionRect:Ln,collisions:Qs,droppableRects:G,draggableNodes:S,draggingNode:je,draggingNodeRect:st,droppableContainers:E,over:ts,scrollableAncestors:ot,scrollAdjustedTranslate:es},P.current={initial:st,translated:Ln}},[O,ye,Qs,Ln,S,je,st,G,E,ts,ot,es]),u5({...Ie,delta:N,draggingRect:Ln,pointerCoordinates:Nn,scrollableAncestors:ot,scrollableAncestorRects:Kt});const fi=V.useMemo(()=>({active:O,activeNode:ye,activeNodeRect:Ue,activatorEvent:Y,collisions:Qs,containerNodeRect:pt,dragOverlay:Ce,draggableNodes:S,droppableContainers:E,droppableRects:G,over:ts,measureDroppableContainers:K,scrollableAncestors:ot,scrollableAncestorRects:Kt,measuringConfiguration:Z,measuringScheduled:ue,windowRect:$e}),[O,ye,Ue,Y,Qs,pt,Ce,S,E,G,ts,K,ot,Kt,Z,ue,$e]),cs=V.useMemo(()=>({activatorEvent:Y,activators:Xs,active:O,activeNodeRect:Ue,ariaDescribedById:{draggable:ve},dispatch:M,draggableNodes:S,over:ts,measureDroppableContainers:K}),[Y,Xs,O,Ue,M,ve,S,ts,K]);return He.createElement(ZT.Provider,{value:B},He.createElement(yu.Provider,{value:cs},He.createElement(yE.Provider,{value:fi},He.createElement(yd.Provider,{value:sn},p)),He.createElement(k5,{disabled:d?.restoreFocus===!1})),He.createElement(U4,{...d,hiddenTextDescribedById:ve}));function Ws(){const tt=_e?.autoScrollEnabled===!1,Ut=typeof m=="object"?m.enabled===!1:m===!1,zt=F&&!tt&&!Ut;return typeof m=="object"?{...m,enabled:zt}:{enabled:zt}}}),M5=V.createContext(null),ux="button",j5="Draggable";function xa(s){let{id:e,data:t,disabled:i=!1,attributes:a}=s;const l=fd(j5),{activators:u,activatorEvent:d,active:m,activeNodeRect:p,ariaDescribedById:v,draggableNodes:b,over:w}=V.useContext(yu),{role:R=ux,roleDescription:j="draggable",tabIndex:z=0}=a??{},D=m?.id===e,M=V.useContext(D?yd:M5),[$,B]=Mf(),[ce,X]=Mf(),F=T5(u,e),C=Xc(t);ci(()=>(b.set(e,{id:e,key:l,node:$,activatorNode:ce,data:C}),()=>{const N=b.get(e);N&&N.key===l&&b.delete(e)}),[b,e]);const S=V.useMemo(()=>({role:R,tabIndex:z,"aria-disabled":i,"aria-pressed":D&&R===ux?!0:void 0,"aria-roledescription":j,"aria-describedby":v.draggable}),[i,R,z,D,j,v.draggable]);return{active:m,activatorEvent:d,activeNodeRect:p,attributes:S,isDragging:D,listeners:i?void 0:F,node:$,over:w,setNodeRef:B,setActivatorNodeRef:X,transform:M}}function V5(){return V.useContext(yE)}const P5="Droppable",L5={timeout:25};function hi(s){let{data:e,disabled:t=!1,id:i,resizeObserverConfig:a}=s;const l=fd(P5),{active:u,dispatch:d,over:m,measureDroppableContainers:p}=V.useContext(yu),v=V.useRef({disabled:t}),b=V.useRef(!1),w=V.useRef(null),R=V.useRef(null),{disabled:j,updateMeasurementsFor:z,timeout:D}={...L5,...a},M=Xc(z??i),$=V.useCallback(()=>{if(!b.current){b.current=!0;return}R.current!=null&&clearTimeout(R.current),R.current=setTimeout(()=>{p(Array.isArray(M.current)?M.current:[M.current]),R.current=null},D)},[D]),B=pd({callback:$,disabled:j||!u}),ce=V.useCallback((S,N)=>{B&&(N&&(B.unobserve(N),b.current=!1),S&&B.observe(S))},[B]),[X,F]=Mf(ce),C=Xc(e);return V.useEffect(()=>{!B||!X.current||(B.disconnect(),b.current=!1,B.observe(X.current))},[X,B]),V.useEffect(()=>(d({type:Rn.RegisterDroppable,element:{id:i,key:l,disabled:t,node:X,rect:w,data:C}}),()=>d({type:Rn.UnregisterDroppable,key:l,id:i})),[i]),V.useEffect(()=>{t!==v.current.disabled&&(d({type:Rn.SetDroppableDisabled,id:i,key:l,disabled:t}),v.current.disabled=t)},[i,l,t,d]),{active:u,rect:w,isOver:m?.id===i,node:X,over:m,setNodeRef:F}}function U5(s){let{animation:e,children:t}=s;const[i,a]=V.useState(null),[l,u]=V.useState(null),d=jf(t);return!t&&!i&&d&&a(d),ci(()=>{if(!l)return;const m=i?.key,p=i?.props.id;if(m==null||p==null){a(null);return}Promise.resolve(e(p,l)).then(()=>{a(null)})},[e,i,l]),He.createElement(He.Fragment,null,t,i?V.cloneElement(i,{ref:u}):null)}const z5={x:0,y:0,scaleX:1,scaleY:1};function B5(s){let{children:e}=s;return He.createElement(yu.Provider,{value:pE},He.createElement(yd.Provider,{value:z5},e))}const q5={position:"fixed",touchAction:"none"},H5=s=>S0(s)?"transform 250ms ease":void 0,F5=V.forwardRef((s,e)=>{let{as:t,activatorEvent:i,adjustScale:a,children:l,className:u,rect:d,style:m,transform:p,transition:v=H5}=s;if(!d)return null;const b=a?p:{...p,scaleX:1,scaleY:1},w={...q5,width:d.width,height:d.height,top:d.top,left:d.left,transform:pl.Transform.toString(b),transformOrigin:a&&i?z4(i,d):void 0,transition:typeof v=="function"?v(i):v,...m};return He.createElement(t,{className:u,style:w,ref:e},l)}),G5=s=>e=>{let{active:t,dragOverlay:i}=e;const a={},{styles:l,className:u}=s;if(l!=null&&l.active)for(const[d,m]of Object.entries(l.active))m!==void 0&&(a[d]=t.node.style.getPropertyValue(d),t.node.style.setProperty(d,m));if(l!=null&&l.dragOverlay)for(const[d,m]of Object.entries(l.dragOverlay))m!==void 0&&i.node.style.setProperty(d,m);return u!=null&&u.active&&t.node.classList.add(u.active),u!=null&&u.dragOverlay&&i.node.classList.add(u.dragOverlay),function(){for(const[m,p]of Object.entries(a))t.node.style.setProperty(m,p);u!=null&&u.active&&t.node.classList.remove(u.active)}},$5=s=>{let{transform:{initial:e,final:t}}=s;return[{transform:pl.Transform.toString(e)},{transform:pl.Transform.toString(t)}]},K5={duration:250,easing:"ease",keyframes:$5,sideEffects:G5({styles:{active:{opacity:"0"}}})};function Y5(s){let{config:e,draggableNodes:t,droppableContainers:i,measuringConfiguration:a}=s;return hd((l,u)=>{if(e===null)return;const d=t.get(l);if(!d)return;const m=d.node.current;if(!m)return;const p=gE(u);if(!p)return;const{transform:v}=ls(u).getComputedStyle(u),b=iE(v);if(!b)return;const w=typeof e=="function"?e:Q5(e);return fE(m,a.draggable.measure),w({active:{id:l,data:d.data,node:m,rect:a.draggable.measure(m)},draggableNodes:t,dragOverlay:{node:u,rect:a.dragOverlay.measure(p)},droppableContainers:i,measuringConfiguration:a,transform:b})})}function Q5(s){const{duration:e,easing:t,sideEffects:i,keyframes:a}={...K5,...s};return l=>{let{active:u,dragOverlay:d,transform:m,...p}=l;if(!e)return;const v={x:d.rect.left-u.rect.left,y:d.rect.top-u.rect.top},b={scaleX:m.scaleX!==1?u.rect.width*m.scaleX/d.rect.width:1,scaleY:m.scaleY!==1?u.rect.height*m.scaleY/d.rect.height:1},w={x:m.x-v.x,y:m.y-v.y,...b},R=a({...p,active:u,dragOverlay:d,transform:{initial:m,final:w}}),[j]=R,z=R[R.length-1];if(JSON.stringify(j)===JSON.stringify(z))return;const D=i?.({active:u,dragOverlay:d,...p}),M=d.node.animate(R,{duration:e,easing:t,fill:"forwards"});return new Promise($=>{M.onfinish=()=>{D?.(),$()}})}}let hx=0;function X5(s){return V.useMemo(()=>{if(s!=null)return hx++,hx},[s])}const k0=He.memo(s=>{let{adjustScale:e=!1,children:t,dropAnimation:i,style:a,transition:l,modifiers:u,wrapperElement:d="div",className:m,zIndex:p=999}=s;const{activatorEvent:v,active:b,activeNodeRect:w,containerNodeRect:R,draggableNodes:j,droppableContainers:z,dragOverlay:D,over:M,measuringConfiguration:$,scrollableAncestors:B,scrollableAncestorRects:ce,windowRect:X}=V5(),F=V.useContext(yd),C=X5(b?.id),S=vE(u,{activatorEvent:v,active:b,activeNodeRect:w,containerNodeRect:R,draggingNodeRect:D.rect,over:M,overlayNodeRect:D.rect,scrollableAncestors:B,scrollableAncestorRects:ce,transform:F,windowRect:X}),N=I0(w),E=Y5({config:i,draggableNodes:j,droppableContainers:z,measuringConfiguration:$}),A=N?D.setRef:void 0;return He.createElement(B5,null,He.createElement(U5,{animation:E},b&&C?He.createElement(F5,{key:C,id:b.id,ref:A,as:d,activatorEvent:v,adjustScale:e,className:m,transition:l,rect:N,style:{zIndex:p,...a},transform:S},t):null))}),al=s=>new w0(s),W5=(s,e,t,i)=>{try{return s.move({from:e,to:t,promotion:i||"q"})}catch{return null}},J5=({id:s,isLight:e,isHighlighted:t=!1,isActive:i=!1,children:a})=>{const{isOver:l,setNodeRef:u}=hi({id:s});return y.jsxs("div",{ref:u,className:`chess-square ${i?"z-50 relative":"overflow-hidden"} ${l?"bg-indigo-500/60 shadow-[inset_0_0_20px_rgba(255,255,255,0.2)] z-10":t?e?"bg-indigo-400/50 shadow-inner":"bg-indigo-600/50 shadow-inner":e?"bg-[#cbd5e1] text-slate-700 shadow-[inset_0_1px_4px_rgba(255,255,255,0.3)]":"bg-[#334155] text-slate-400 shadow-[inset_0_2px_4px_rgba(0,0,0,0.3)]"}`,children:[y.jsx("div",{className:`absolute top-1 left-1 text-[10px] font-black uppercase tracking-tighter opacity-20 pointer-events-none ${e?"text-slate-900":"text-slate-100"}`,children:s}),y.jsx("div",{className:"relative w-full h-full overflow-visible z-10",children:a})]})},Z5={w:{p:"",r:"",n:"",b:"",q:"",k:""},b:{p:"",r:"",n:"",b:"",q:"",k:""}},e3=({id:s,type:e,color:t,isDraggable:i=!0})=>{const{attributes:a,listeners:l,setNodeRef:u,transform:d,isDragging:m}=xa({id:s,disabled:!i,data:{type:e,color:t}}),p={transform:pl.Translate.toString(d),transition:m?"none":"transform 120ms ease-out",zIndex:m?9999:20};return y.jsx("div",{ref:u,style:p,...l,...a,className:`chess-piece transition-transform duration-120 ease-out ${m?"scale-112 drop-shadow-2xl z-[9999]":"hover:scale-103 z-20"} ${i?"cursor-grab active:cursor-grabbing":"grayscale-[0.2] opacity-90 cursor-default"} text-slate-950 drop-shadow-sm`,children:y.jsx("div",{className:`
        flex items-center justify-center w-full h-full 
        ${t==="w"?"drop-shadow-[0_2px_0_rgba(255,255,255,0.8)]":"drop-shadow-[0_2px_0_rgba(0,0,0,0.5)]"}
      `,children:Z5[t][e]})})},t3=({onMove:s,initialFen:e,playerColor:t="w",isGameOver:i=!1})=>{const[a,l]=V.useState(()=>al(e)),[u,d]=V.useState([]),[m,p]=V.useState(null);He.useEffect(()=>{e&&e!==a.fen()&&l(al(e))},[e]);const v=dd(ni(N0,{activationConstraint:{delay:80,tolerance:8}}),ni(pu),ni(C0)),b=V.useCallback(j=>{const{active:z,over:D}=j;if(d([]),p(null),!D)return;const M=z.id,$=D.id,B=al(a.fen());W5(B,M,$)&&(l(B),s&&s(B.fen()))},[a,s]),w=V.useCallback(j=>{p(j);const z=j,D=a.get(z);if(i||!D||D.color!==t||a.turn()!==t){d([]);return}const M=a.moves({square:z,verbose:!0}).map($=>$.to);d(M)},[a,t]),R=()=>{const j=[],z=["a","b","c","d","e","f","g","h"],D=["8","7","6","5","4","3","2","1"],M=t==="w"?D:[...D].reverse(),$=t==="w"?z:[...z].reverse();for(const B of M)for(const ce of $){const X=`${ce}${B}`,F=a.get(X),C=(z.indexOf(ce)+D.indexOf(B))%2===0,S=!!F&&F.color===t&&a.turn()===t&&!i,N=u.includes(X),E=X===m;j.push(y.jsx(J5,{id:X,isLight:C,isHighlighted:N,isActive:E,children:F&&y.jsx(e3,{id:X,type:F.type,color:F.color,isDraggable:S})},X))}return j};return y.jsx(vd,{sensors:v,onDragEnd:b,onDragStart:j=>w(j.active.id),children:y.jsx("div",{className:"p-3 lg:p-4 bg-slate-800 rounded-[2rem] lg:rounded-[2.5rem] shadow-[0_0_50px_-12px_rgba(99,102,241,0.25)] border-4 border-slate-700/50 ring-4 ring-slate-900/50",style:{touchAction:"none"},children:y.jsx("div",{className:"grid grid-cols-8 gap-0 rounded-2xl lg:rounded-3xl overflow-hidden border border-slate-700/30 shadow-inner",style:{width:"min(92vw, 720px)",height:"min(92vw, 720px)",gridTemplateColumns:"repeat(8, 1fr)"},children:R()})})})},n3=()=>Math.random().toString(36).substring(2,8).toUpperCase(),fx="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",_E=s=>{const[e,t]=V.useState(null),[i,a]=V.useState(null),[l,u]=V.useState(!0),[d,m]=V.useState(!0);V.useEffect(()=>{const D=io();ro(D).then(M=>{a(M.user.uid)}).catch(M=>{console.error("Auth failed",M)}).finally(()=>m(!1))},[]);const p=async()=>{if(i)return i;const D=io(),M=await ro(D);return a(M.user.uid),M.user.uid};return V.useEffect(()=>{if(!Je||!Te){console.warn("Firebase not configured; room sync disabled."),u(!1);return}if(!s){t(null),u(!1);return}u(!0);const D=At(St(Te,"rooms"),s),M=rd(D,$=>{$.exists()?t($.data()):t(null),u(!1)},$=>{console.error("Room subscription error",$),t(null),u(!1)});return()=>M()},[s]),{room:e,userId:i,loading:l,isAuthLoading:d,createRoom:async()=>{if(!Je||!Te)throw new Error("Firebase not configured");const D=await p(),M=n3(),$=At(St(Te,"rooms"),M);return await sd($,{fen:fx,whitePlayer:D,blackPlayer:"",turn:"w",status:"active",winner:"",resultReason:""}),M},joinRoom:async D=>{if(!Je||!Te)throw new Error("Firebase not configured");const M=await p(),$=At(St(Te,"rooms"),D);await Rs(Te,async B=>{const ce=await B.get($);if(!ce.exists())throw new Error("Room not found");const F={...ce.data()};F.whitePlayer?!F.blackPlayer&&F.whitePlayer!==M&&(F.blackPlayer=M):F.whitePlayer=M,B.update($,F)})},updateMove:async D=>{if(!Je||!Te||!s)return;const M=At(St(Te,"rooms"),s);await Rs(Te,async $=>{const B=await $.get(M);if(!B.exists())return;const ce=B.data();if(ce.status&&ce.status!=="active")return;const X=new w0(D),F=X.turn();let C="active",S="",N="";X.isCheckmate()?(C="checkmate",S=F==="w"?"b":"w",N="checkmate"):X.isStalemate&&X.isStalemate()?(C="stalemate",S="",N="stalemate"):X.isDraw()&&(C="draw",S="",N="draw"),$.update(M,{fen:D,turn:F,status:C,winner:S,resultReason:N})})},resignGame:async D=>{if(!Je||!Te||!s)return;const M=At(St(Te,"rooms"),s);await ar(M,{status:"resigned",winner:D==="w"?"b":"w",resultReason:"resigned"})},resetGame:async()=>{if(!Je||!Te||!s)return;const D=At(St(Te,"rooms"),s);await ar(D,{fen:fx,turn:"w",status:"active",winner:"",resultReason:""})},leaveRoom:async()=>{if(!(!Je||!Te)&&s)try{const D=await p(),M=At(St(Te,"rooms"),s);await Rs(Te,async $=>{const B=await $.get(M);if(!B.exists())return;const X={...B.data()};X.whitePlayer===D?X.whitePlayer="":X.blackPlayer===D&&(X.blackPlayer=""),$.update(M,X)})}catch(D){console.error("Error leaving room:",D)}}}},s3={p:10,n:30,b:30,r:50,q:90,k:900},dx=[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,-.5,-1,0,0,-1,-.5,.5],[.5,1,1,-2,-2,1,1,.5],[0,0,0,0,0,0,0,0]],mx=[[-5,-4,-3,-3,-3,-3,-4,-5],[-4,-2,0,0,0,0,-2,-4],[-3,0,1,1.5,1.5,1,0,-3],[-3,.5,1.5,2,2,1.5,.5,-3],[-3,0,1.5,2,2,1.5,0,-3],[-3,.5,1,1.5,1.5,1,.5,-3],[-4,-2,0,.5,.5,0,-2,-4],[-5,-4,-3,-3,-3,-3,-4,-5]],r3=s=>{let e=0;const t=s.board();for(let i=0;i<8;i++)for(let a=0;a<8;a++){const l=t[i][a];if(l){const u=s3[l.type];let d=0;l.type==="p"&&(d=l.color==="w"?dx[i][a]:dx[7-i][a]),l.type==="n"&&(d=l.color==="w"?mx[i][a]:mx[7-i][a]),l.color==="w"?e+=u+d*.1:e-=u+d*.1}}return e},Tp=(s,e,t,i,a)=>{if(e===0||s.isGameOver())return-r3(s);const l=s.moves();if(a){let u=-1/0;for(const d of l){s.move(d);const m=Tp(s,e-1,t,i,!1);if(s.undo(),u=Math.max(u,m),t=Math.max(t,m),i<=t)break}return u}else{let u=1/0;for(const d of l){s.move(d);const m=Tp(s,e-1,t,i,!0);if(s.undo(),u=Math.min(u,m),i=Math.min(i,m),i<=t)break}return u}},i3=(s,e="Normal")=>{const t=s.moves();if(t.length===0)return null;if(e==="Easy"&&Math.random()>.2)return t[Math.floor(Math.random()*t.length)];let i=null,a=1/0;t.sort((u,d)=>{const m=u.includes("x")?1:0;return(d.includes("x")?1:0)-m});const l=e==="Easy"?1:e==="Hard"?3:2;for(const u of t){s.move(u);const d=Tp(s,l,-1/0,1/0,!0);s.undo(),d<a&&(a=d,i=u)}return i||t[0]},a3=({roomId:s="",mode:e="online",aiDifficulty:t="Normal",onExit:i})=>{const a=_E(e==="online"?s:null),[l,u]=V.useState(()=>al()),[d,m]=V.useState(l.fen()),[p,v]=V.useState("active"),[b,w]=V.useState(""),R=e==="local",j=R?{fen:d,turn:l.turn(),whitePlayer:"local-white",blackPlayer:"local-black",status:p,winner:b}:a.room,z=R?!1:a.loading,D=K=>{const ue=al(K);u(ue),m(K),ue.isCheckmate()?(v("checkmate"),w(ue.turn()==="w"?"b":"w")):ue.isDraw()?v("draw"):ue.isStalemate&&ue.isStalemate()&&v("stalemate")};V.useEffect(()=>{if(R&&l.turn()==="b"&&p==="active"){const K=setTimeout(()=>{const ue=i3(l,t);ue&&(l.move(ue),D(l.fen()))},500);return()=>clearTimeout(K)}},[d,R,p,t]);const M=()=>{const K=al();u(K),m(K.fen()),v("active"),w(""),C(0),N(0),A(0)},$=R?D:a.updateMove,B=R?K=>{v("active"),w(K==="w"?"b":"w"),alert(`${K==="w"?"White":"Black"} resigned.`)}:a.resignGame,ce=R?M:a.resetGame,X=R?j?.turn==="w"?"local-white":"local-black":a.userId,[F,C]=He.useState(0),[S,N]=He.useState(0),[E,A]=He.useState(0);if(He.useEffect(()=>{!R&&s&&a.joinRoom&&a.joinRoom(s)},[s,R]),He.useEffect(()=>{if(!j||j.status&&j.status!=="active")return;const K=window.setInterval(()=>{C(ue=>ue+1),N(ue=>ue+(j.turn==="w"?1:0)),A(ue=>ue+(j.turn==="b"?1:0))},1e3);return()=>window.clearInterval(K)},[j?.turn,j?.status]),z)return y.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-6 animate-pulse",children:[y.jsx("div",{className:"relative shadow-2xl shadow-indigo-500/20 rounded-full p-4",children:y.jsx(Ex,{className:"w-16 h-16 text-indigo-500 animate-spin"})}),y.jsxs("div",{className:"text-center space-y-2",children:[y.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest",children:"Entering Arena"}),y.jsx("p",{className:"text-slate-500 font-medium",children:"Synchronizing with the global lattice..."})]})]});if(!j)return y.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[y.jsxs("div",{className:"text-center space-y-4",children:[y.jsx("h2",{className:"text-5xl font-black text-white italic",children:"Room Dissolved"}),y.jsx("p",{className:"text-slate-400 text-lg",children:"The arena you seek no longer exists or the link is expired."})]}),y.jsx("button",{onClick:i,className:"btn-premium px-10 py-4 text-xl",children:"Return to Lobby"})]});const P=j.whitePlayer===X||R,O=j.blackPlayer===X,be=R||X===j.whitePlayer?"w":X===j.blackPlayer?"b":"w",_e=j.turn===be,H=new w0(j.fen),Y={isCheck:H.isCheck(),isCheckmate:H.isCheckmate(),isDraw:H.isDraw(),isStalemate:typeof H.isStalemate=="function"?H.isStalemate():!1,turn:H.turn()},J=j.status??"active",pe=j.winner??"",ve=J!=="active",L=K=>{const ue=Math.floor(K/60).toString().padStart(2,"0"),ye=(K%60).toString().padStart(2,"0");return`${ue}:${ye}`},Z=J==="checkmate"?`Checkmate  ${pe==="w"?"White":"Black"} wins`:J==="stalemate"?"Stalemate  Draw":J==="draw"?"Draw":J==="resigned"?`Resigned  ${pe==="w"?"White":"Black"} wins`:Y.isCheck?`${Y.turn==="w"?"White":"Black"} is in check`:_e?"Your Turn":"Waiting...",G=()=>{navigator.clipboard.writeText(s),alert("Room ID copied to clipboard!")};return y.jsxs("div",{className:"flex flex-col items-center gap-8 lg:gap-12 py-6 lg:py-10 w-full animate-in fade-in duration-700",children:[y.jsxs("header",{className:"w-full max-w-6xl flex items-center justify-between px-4 lg:px-6",children:[y.jsxs("button",{onClick:()=>{!R&&a.leaveRoom&&a.leaveRoom(),i()},className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all font-bold uppercase tracking-widest text-xs",children:[y.jsx("div",{className:"p-2 rounded-xl bg-slate-900 border border-slate-800 group-hover:border-slate-700 group-hover:-translate-x-1 transition-transform",children:y.jsx(Jr,{size:18})}),"Back"]}),!R&&y.jsx("div",{className:"flex items-center gap-4",children:y.jsxs("div",{className:"liquid-glass px-6 py-3 flex items-center gap-6",children:[y.jsxs("div",{className:"flex flex-col gap-0.5",children:[y.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-slate-500 font-black",children:"Arena ID"}),y.jsx("code",{className:"text-indigo-300 font-mono font-bold",children:s})]}),y.jsx("div",{className:"h-8 w-px bg-slate-800"}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("button",{onClick:G,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:y.jsx(ff,{size:18})}),y.jsx("button",{className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:y.jsx(Sx,{size:18})})]})]})}),R&&y.jsx("div",{className:"px-6 py-3 liquid-glass text-indigo-300 font-bold uppercase tracking-widest text-xs",children:"Single Player Mode"})]}),y.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-6 lg:gap-16 w-full max-w-7xl px-4 lg:px-6",children:[y.jsxs("div",{className:"relative group w-full flex justify-center max-w-full overflow-visible",children:[y.jsx("div",{className:"absolute -inset-4 bg-linear-to-r from-indigo-500 to-pink-500 rounded-[2.5rem] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"}),y.jsx(t3,{initialFen:j.fen,onMove:$,playerColor:be,isGameOver:ve})]}),y.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-6 lg:gap-8 mt-0 lg:mt-0",children:[y.jsxs("div",{className:"liquid-glass p-5 lg:p-8 space-y-6 lg:space-y-8 border-l-4 border-l-indigo-500",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:"Game Status"}),y.jsxs("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-2 ${J==="active"?_e?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-slate-800 text-slate-500":"bg-indigo-500/10 text-indigo-300 border border-indigo-500/30"}`,children:[y.jsx("span",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${J==="active"?"bg-green-500":"bg-indigo-400"}`}),R?j.turn==="w"?" White Turn":" Black Turn":Z]})]}),J==="active"&&Y.isCheck&&y.jsxs("div",{className:"p-3 rounded-2xl bg-amber-500/10 border border-amber-500/30 text-amber-200 text-[10px] lg:text-xs font-black uppercase tracking-widest",children:["CHECK! ",Y.turn==="w"?"White":"Black"," to move."]}),ve&&y.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/10 border border-indigo-500/30 text-indigo-100 text-sm lg:text-base font-bold",children:Z}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 p-4 rounded-2xl bg-slate-900/60 border border-slate-800/80 text-[10px] lg:text-xs font-bold uppercase tracking-widest",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("div",{className:"text-slate-500",children:"Time"}),y.jsx("div",{className:"text-white text-base",children:L(F)})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("div",{className:"text-slate-500",children:"White"}),y.jsx("div",{className:"text-emerald-300 text-base",children:L(S)})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("div",{className:"text-slate-500",children:"Black"}),y.jsx("div",{className:"text-sky-300 text-base",children:L(E)})]})]}),!R&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex items-center gap-3 lg:gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[y.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${P?"bg-white text-slate-950":"bg-slate-800 text-slate-400"}`,children:"W"}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"White Player"}),y.jsx("div",{className:"text-xs text-slate-500 font-medium",children:j.whitePlayer===X?"Connected (You)":j.whitePlayer?"Opponent Ready":"Awaiting Entry..."})]})]}),y.jsxs("div",{className:"flex items-center gap-3 lg:gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[y.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${O?"bg-indigo-500 text-white":"bg-slate-800 text-slate-400"}`,children:"B"}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"Black Player"}),y.jsx("div",{className:"text-xs text-slate-500 font-medium",children:j.blackPlayer===X?"Connected (You)":j.blackPlayer?"Opponent Ready":"Awaiting Entry..."})]})]})]})]}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[y.jsxs("button",{disabled:ve,onClick:()=>B(be),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-slate-800 bg-slate-900/60 text-slate-200 font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:border-red-500/50 hover:text-red-200 transition",children:[y.jsx(Tx,{size:18}),"Resign"]}),y.jsxs("button",{disabled:!ve&&!R,onClick:()=>ce(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 text-indigo-100 font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:bg-indigo-500/20 transition",children:[y.jsx(Rp,{size:18}),"Rematch"]})]})]}),!R&&y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[y.jsx(Cp,{size:20,className:"mx-auto text-slate-600"}),y.jsx("div",{className:"text-xl font-black text-white italic",children:j.whitePlayer&&j.blackPlayer?"2/2":j.whitePlayer||j.blackPlayer?"1/2":"0/2"}),y.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Connected"})]}),y.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[y.jsx(Ax,{size:20,className:"mx-auto text-indigo-400"}),y.jsx("div",{className:"text-xl font-black text-white italic",children:"24ms"}),y.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Latency"})]})]})]})]}),y.jsxs("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10 flex flex-col items-center gap-1",children:[y.jsx("span",{children:"Transparent Strategy Arena"}),y.jsx("span",{className:"text-slate-700 text-[8px]",children:"v1.2.0"})]})]})},o3=[2,0,0,0,0,-5,0,-3,0,0,0,5,-5,0,0,0,3,0,5,0,0,0,0,-2],Rc=()=>{const s=Math.floor(Math.random()*6)+1,e=Math.floor(Math.random()*6)+1;return s===e?[s,s,s,s]:[s,e]},Lc=()=>{const s=Rc();return{board:[...o3],bar:{white:0,black:0},off:{white:0,black:0},turn:"white",dice:s,movesLeft:[...s],validMoves:[],winner:null}},l3=(s,e)=>{const t=s.board;if(e==="white"){if(s.bar.white>0)return!1;for(let i=0;i<18;i++)if(t[i]>0)return!1;return!0}else{if(s.bar.black>0)return!1;for(let i=6;i<24;i++)if(t[i]<0)return!1;return!0}},Ep=s=>{if(s.winner)return[];const e=a=>{const l=[],{turn:u,board:d,bar:m,movesLeft:p}=a,v=Array.from(new Set(p));if(p.length===0)return[];const b=u==="white",w=b?1:-1;if((b?m.white:m.black)>0){for(const j of v){const z=b?j-1:24-j,D=d[z];(b?D<-1:D>1)||l.push({from:"bar",to:z,roll:j,isHit:b?D===-1:D===1})}return l}for(let j=0;j<24;j++){const z=d[j];if(!(b&&z<=0)&&!(!b&&z>=0))for(const D of v){const M=j+w*D;if(l3(a,u)){if(b&&M===24){l.push({from:j,to:"off",roll:D});continue}if(!b&&M===-1){l.push({from:j,to:"off",roll:D});continue}if(b&&M>24){let X=!0;for(let F=18;F<j;F++)d[F]>0&&(X=!1);X&&l.push({from:j,to:"off",roll:D})}if(!b&&M<-1){let X=!0;for(let F=5;F>j;F--)d[F]<0&&(X=!1);X&&l.push({from:j,to:"off",roll:D})}}if(M<0||M>23)continue;const B=d[M];(b?B<-1:B>1)||l.push({from:j,to:M,roll:D,isHit:b?B===-1:B===1})}}return l},t=e(s),i=[...t];if(s.movesLeft.length>1)for(const a of t){const l=vu(s,a),u=e(l);if(a.to!=="off"){const d=u.filter(m=>m.from===a.to);for(const m of d)i.push({from:a.from,to:m.to,roll:a.roll+m.roll,isHit:m.isHit,subMoves:[a,m]})}}return i},vu=(s,e)=>{const t={...s,board:[...s.board],bar:{...s.bar},off:{...s.off},movesLeft:[...s.movesLeft]},i=s.turn==="white";if(e.subMoves&&e.subMoves.length>0){let l=s;for(const u of e.subMoves)l=vu(l,u);return l}if(e.from==="bar"?i?t.bar.white--:t.bar.black--:t.board[e.from]-=i?1:-1,e.to==="off")i?t.off.white++:t.off.black++;else{const l=e.to;e.isHit&&(i?t.bar.black++:t.bar.white++,t.board[l]=0),t.board[l]+=i?1:-1}const a=t.movesLeft.indexOf(e.roll);return a>-1&&t.movesLeft.splice(a,1),i&&t.off.white===15&&(t.winner="white"),!i&&t.off.black===15&&(t.winner="black"),t},c3=()=>Math.random().toString(36).substring(2,8).toUpperCase(),bE=s=>{const[e,t]=V.useState(null),[i,a]=V.useState(null),[l,u]=V.useState(!0),[d,m]=V.useState(!0);V.useEffect(()=>{const D=io();ro(D).then(M=>{a(M.user.uid)}).catch(M=>{console.error("Auth failed",M)}).finally(()=>m(!1))},[]);const p=async()=>{if(i)return i;const D=io(),M=await ro(D);return a(M.user.uid),M.user.uid};return V.useEffect(()=>{if(!Je||!Te){u(!1);return}if(!s){t(null),u(!1);return}u(!0);const D=At(St(Te,"rooms_bg"),s),M=rd(D,$=>{$.exists()?t($.data()):t(null),u(!1)},$=>{console.error("Room subscription error",$),t(null),u(!1)});return()=>M()},[s]),{room:e,userId:i,loading:l,isAuthLoading:d,createRoom:async()=>{if(!Je||!Te)throw new Error("Firebase not configured");const D=await p(),M=c3(),$=At(St(Te,"rooms_bg"),M),B=Lc(),ce={board:B.board,bar:B.bar,off:B.off,turn:B.turn,dice:B.dice,movesLeft:B.movesLeft,whitePlayer:D,blackPlayer:"",winner:"",status:"active"};return await sd($,ce),M},joinRoom:async D=>{if(!Je||!Te)throw new Error("Firebase not configured");const M=await p(),$=At(St(Te,"rooms_bg"),D);await Rs(Te,async B=>{const ce=await B.get($);if(!ce.exists())throw new Error("Room not found");const F={...ce.data()};F.whitePlayer?!F.blackPlayer&&F.whitePlayer!==M&&(F.blackPlayer=M):F.whitePlayer=M,B.update($,F)})},updateGameState:async D=>{if(!Je||!Te||!s)return;const M=At(St(Te,"rooms_bg"),s);let $="active",B="";D.winner&&($="finished",B=D.winner),await ar(M,{board:D.board,bar:D.bar,off:D.off,turn:D.turn,dice:D.dice,movesLeft:D.movesLeft,winner:B,status:$})},resignGame:async D=>{if(!Je||!Te||!s)return;const M=At(St(Te,"rooms_bg"),s);await ar(M,{status:"resigned",winner:D==="white"?"black":"white"})},resetGame:async()=>{if(!Je||!Te||!s)return;const D=Lc(),M=At(St(Te,"rooms_bg"),s);await ar(M,{board:D.board,bar:D.bar,off:D.off,turn:D.turn,dice:D.dice,movesLeft:D.movesLeft,status:"active",winner:""})},leaveRoom:async()=>{if(!(!Je||!Te)&&s)try{const D=await p(),M=At(St(Te,"rooms_bg"),s);await Rs(Te,async $=>{const B=await $.get(M);if(!B.exists())return;const X={...B.data()};X.whitePlayer===D?X.whitePlayer="":X.blackPlayer===D&&(X.blackPlayer=""),$.update(M,X)})}catch(D){console.error("Error leaving room:",D)}}}},u3=30,h3=(s,e)=>{const t=s.filter(l=>l!==null);if(t.length!==14)return!1;const i=[],a=[];return t.forEach(l=>{!l.isFakeOkey&&e&&l.color===e.color&&l.value===e.value?i.push(l):l.isFakeOkey?a.push({...l,value:e?.value||1,color:e?.color||"red",isFakeOkey:!1}):a.push(l)}),a.sort((l,u)=>l.color!==u.color?l.color.localeCompare(u.color):l.value-u.value),hf(a,i.length)},hf=(s,e)=>{if(s.length===0)return!0;const t=s[0],i=s.filter(d=>d.color===t.color);for(let d=3;d<=13;d++){const m=[];let p=!0;for(let R=0;R<d;R++){const j=t.value+R;if(j>13){p=!1;break}m.push(j)}if(!p)break;const v=[];let b=0,w=[...i];for(const R of m){const j=w.findIndex(z=>z.value===R);j!==-1?(v.push(w[j]),w.splice(j,1)):b++}if(b<=e){const R=v.map(z=>z.id),j=s.filter(z=>!R.includes(z.id));if(hf(j,e-b))return!0}}if(t.value===1)for(let d=3;d<=4;d++){const m=[];for(let w=13-(d-2);w<=13;w++)m.push(w);m.push(1);const p=[];let v=0,b=[...i];for(const w of m){const R=b.findIndex(j=>j.value===w);R!==-1?(p.push(b[R]),b.splice(R,1)):v++}if(v<=e){const w=p.map(j=>j.id),R=s.filter(j=>!w.includes(j.id));if(hf(R,e-v))return!0}}const a=s.filter(d=>d.value===t.value),l=[],u=new Set;for(const d of a)u.has(d.color)||(u.add(d.color),l.push(d));for(let d=3;d<=4;d++){const m=l.slice(0,Math.min(d,l.length)),p=d-m.length;if(p>=0&&p<=e){const v=m.map(w=>w.id),b=s.filter(w=>!v.includes(w.id));if(hf(b,e-p))return!0}}return!1},f3=["red","black","blue","yellow"],D0=()=>{const s=[];let e=1;return f3.forEach(t=>{for(let i=1;i<=13;i++)s.push({id:`t-${e++}`,value:i,color:t}),s.push({id:`t-${e++}`,value:i,color:t})}),s.push({id:`t-${e++}`,value:0,color:null,isFakeOkey:!0}),s.push({id:`t-${e++}`,value:0,color:null,isFakeOkey:!0}),s},O0=s=>{const e=[...s];for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e},M0=s=>s.isFakeOkey||!s.color?{id:"virtual-okey",value:1,color:"red"}:{id:"virtual-okey",value:s.value===13?1:s.value+1,color:s.color},gx=()=>{let s=O0(D0());const e=s.pop(),t=M0(e),i=Array(4).fill(null).map(()=>({tiles:Array(u3).fill(null)}));for(let a=0;a<15;a++)i[0].tiles[a]=s.pop();for(let a=1;a<4;a++)for(let l=0;l<14;l++)i[a].tiles[l]=s.pop();return{phase:"playing",players:i,centerStack:s,discardPiles:[[],[],[],[]],indicatorTile:e,okeyTile:t,currentTurn:0,winner:null}},si=30,xE=14,d3=51,m3=101,wE=s=>s.isFakeOkey?25:s.value>=11?10:s.value,g3=s=>s.filter(e=>e!==null).reduce((e,t)=>e+wE(t),0),TE=s=>{if(s.length<3||s.length>4)return!1;const e=s.filter(d=>!d.isFakeOkey),t=s.length-e.length;if(e.length===0)return!1;const i=e[0].value;if(!e.every(d=>d.value===i))return!1;const a=e.map(d=>d.color);if(new Set(a).size!==a.length)return!1;const u=4-new Set(a).size;return t<=u},EE=s=>{if(s.length<3)return!1;const e=s.filter(p=>!p.isFakeOkey),t=s.length-e.length;if(e.length===0)return!1;const i=e[0].color;if(!e.every(p=>p.color===i))return!1;const a=[...e].sort((p,v)=>p.value-v.value),l=a[0].value,u=a[a.length-1].value,d=u-l+1;if(d>s.length)return!1;if(d<s.length){const p=l-(s.length-d)>=1,v=u+(s.length-d)<=13;if(!p&&!v)return!1}let m=0;for(let p=0;p<a.length-1;p++)m+=a[p+1].value-a[p].value-1;return m<=t},j0=s=>TE(s)?{valid:!0,type:"set"}:EE(s)?{valid:!0,type:"run"}:{valid:!1,type:null},SE=(s,e)=>{const t=[...s.tiles,e];if(s.type==="set")return TE(t);{const i=[...s.tiles].filter(d=>!d.isFakeOkey).sort((d,m)=>d.value-m.value);if(i.length===0)return EE(t);const a=i[0].value,l=i[i.length-1].value,u=i[0].color;return e.isFakeOkey?t.length<=13:e.color!==u?!1:e.value===a-1&&e.value>=1||e.value===l+1&&e.value<=13}},AE=s=>{let e=0;for(const t of s){if(!j0(t).valid)return!1;const a=t.filter(l=>!l.isFakeOkey).reduce((l,u)=>l+wE(u),0);e+=a}return e>=d3},Uf=(s=4)=>{let e=O0(D0());const t=e.pop(),i=M0(t),a=Array(s).fill(null).map(()=>({tiles:Array(si).fill(null),score:0,hasLaidDown:!1}));for(let u=0;u<s;u++)for(let d=0;d<xE;d++)a[u].tiles[d]=e.pop();const l=a[0].tiles.findIndex(u=>u===null);return l!==-1&&e.length>0&&(a[0].tiles[l]=e.pop()),{phase:"playing",players:a,centerStack:e,discardPiles:[[],[],[],[]],indicatorTile:t,okeyTile:i,tableMelds:{},currentTurn:0,roundWinner:null,gameWinner:null,roundNumber:1}},p3=s=>{const e=s.players.length;let t=O0(D0());const i=t.pop(),a=M0(i),l=s.players.map(m=>({tiles:Array(si).fill(null),score:m.score,hasLaidDown:!1}));for(let m=0;m<e;m++)for(let p=0;p<xE;p++)l[m].tiles[p]=t.pop();const u=s.roundWinner??0,d=l[u].tiles.findIndex(m=>m===null);return d!==-1&&t.length>0&&(l[u].tiles[d]=t.pop()),{phase:"playing",players:l,centerStack:t,discardPiles:[[],[],[],[]],indicatorTile:i,okeyTile:a,tableMelds:{},currentTurn:u,roundWinner:null,gameWinner:s.gameWinner,roundNumber:s.roundNumber+1}},Hg=(s,e)=>{const t=s.players.map((l,u)=>{if(u===e)return{...l,score:l.score};const d=g3(l.tiles);return{...l,score:l.score+d}}),i=t.findIndex(l=>l.score>=m3);let a=null;if(i!==-1){let l=1/0;t.forEach((u,d)=>{u.score<l&&(l=u.score,a=d)})}return{...s,players:t,phase:i!==-1?"gameOver":"roundOver",roundWinner:e,gameWinner:a}},RE=s=>{const e=s.filter(p=>p!==null),t=e.filter(p=>p.isFakeOkey);let i=e.filter(p=>!p.isFakeOkey);const a=[],l=[],u=["red","blue","black","yellow"];for(const p of u){let v=i.filter(b=>b.color===p);for(v.sort((b,w)=>b.value-w.value);v.length>=3;){let b=[];for(let w=0;w<v.length;w++){const R=[v[w]];let j=v[w].value+1;for(let z=w+1;z<v.length&&j<=13;z++)if(v[z].value===j)R.push(v[z]),j++;else if(v[z].value>j)break;R.length>=3&&R.length>b.length&&(b=R)}if(b.length>=3){a.push(b);const w=new Set(b.map(R=>R.id));i=i.filter(R=>!w.has(R.id)),v=v.filter(R=>!w.has(R.id))}else break}}for(let p=1;p<=13;p++){const v=i.filter(w=>w.value===p),b=new Set(v.map(w=>w.color));if(b.size>=3){const w=[];for(const R of u)if(b.has(R)){const j=v.find(z=>z.color===R&&!w.includes(z));j&&w.push(j)}if(w.length>=3){l.push(w);const R=new Set(w.map(j=>j.id));i=i.filter(j=>!R.has(j.id))}}}const d=new Array(si).fill(null);let m=0;for(const p of a){const v=m<15?0:1,b=v===0?15:30;m+p.length>b&&v===0&&(m=15);for(const w of p)m<30&&(d[m++]=w);m<30&&m!==15&&m++}for(const p of l){const v=m<15?0:1,b=v===0?15:30;m+p.length>b&&v===0&&(m=15);for(const w of p)m<30&&(d[m++]=w);m<30&&m!==15&&m++}for(const p of u){const v=i.filter(R=>R.color===p).sort((R,j)=>R.value-j.value);if(v.length===0)continue;const b=m<15?0:1,w=b===0?15:30;m+v.length>w&&b===0&&(m=15);for(const R of v)m<30&&(d[m++]=R);m<30&&m!==15&&m++}i.length>0&&t.length>0&&m<30&&m++;for(const p of t)m<30&&(d[m++]=p);return d},CE=s=>{const e=s.filter(m=>m!==null),t=e.filter(m=>m.isFakeOkey);let i=e.filter(m=>!m.isFakeOkey);const a=[],l=["red","blue","black","yellow"];for(let m=1;m<=13;m++){const p=i.filter(b=>b.value===m),v=new Set(p.map(b=>b.color));if(v.size>=3){const b=[];for(const w of l)if(v.has(w)){const R=p.find(j=>j.color===w&&!b.includes(j));R&&b.push(R)}if(b.length>=3){a.push(b);const w=new Set(b.map(R=>R.id));i=i.filter(R=>!w.has(R.id))}}}i.sort((m,p)=>{if(m.value!==p.value)return m.value-p.value;const v=b=>b?l.indexOf(b):99;return v(m.color)-v(p.color)});const u=new Array(si).fill(null);let d=0;for(const m of a){const p=d<15?0:1,v=p===0?15:30;d+m.length>v&&p===0&&(d=15);for(const b of m)d<30&&(u[d++]=b);d<30&&d!==15&&d++}for(const m of i)d<30&&(u[d++]=m);i.length>0&&t.length>0&&d<30&&d++;for(const m of t)d<30&&(u[d++]=m);return u},NE=s=>{const e=["red","blue","black","yellow"],t=[],i=new Set;for(const a of e){const l=[];s.forEach((d,m)=>{d&&!d.isFakeOkey&&d.color===a&&!i.has(m)&&l.push({idx:m,value:d.value})}),l.sort((d,m)=>d.value-m.value);let u=0;for(;u<l.length;){const d=[l[u].idx];let m=l[u].value+1,p=u+1;for(;p<l.length&&m<=13;)if(l[p].value===m)d.push(l[p].idx),m++,p++;else{if(l[p].value>m)break;p++}d.length>=3?(t.push(d),d.forEach(v=>i.add(v)),u=p):u++}}return t},IE=s=>{const e=["red","blue","black","yellow"],t=[],i=new Set;for(let a=1;a<=13;a++){const l=[];if(s.forEach((d,m)=>{d&&!d.isFakeOkey&&d.value===a&&!i.has(m)&&l.push({idx:m,color:d.color})}),new Set(l.map(d=>d.color)).size>=3){const d=[];for(const m of e){const p=l.find(v=>v.color===m&&!d.includes(v.idx));p&&d.push(p.idx)}d.length>=3&&(t.push(d),d.forEach(m=>i.add(m)))}}return t},kE=s=>{const e=s.filter(b=>b!==null),t=e.filter(b=>b.isFakeOkey),i=e.filter(b=>!b.isFakeOkey),a=["red","blue","black","yellow"],l=new Map;for(const b of i){const w=`${b.color}-${b.value}`,R=l.get(w)??[];R.push(b),l.set(w,R)}const u=[],d=[];for(const[,b]of l){let w=0;for(;w+1<b.length;)u.push([b[w],b[w+1]]),w+=2;w<b.length&&d.push(b[w])}const m=new Array(si).fill(null);let p=0;for(const b of u){const w=p<15?0:1,R=w===0?15:30;p+b.length>R&&w===0&&(p=15);for(const j of b)p<30&&(m[p++]=j);p<30&&p!==15&&p++}d.sort((b,w)=>{const R=j=>j?a.indexOf(j):99;return R(b.color)!==R(w.color)?R(b.color)-R(w.color):b.value-w.value});let v=null;for(const b of d)v!==null&&b.color!==v&&p<30&&p!==15&&p++,p<30&&(m[p++]=b),v=b.color;d.length>0&&t.length>0&&p<30&&p++;for(const b of t)p<30&&(m[p++]=b);return m},DE=s=>{const e=s.filter(m=>m!==null),t=e.filter(m=>m.isFakeOkey);let i=e.filter(m=>!m.isFakeOkey);const a=[],l=["red","blue","black","yellow"];for(let m=1;m<=13;m++){const p=i.filter(b=>b.value===m),v=new Set(p.map(b=>b.color));if(v.size>=3){const b=[];for(const w of l)if(v.has(w)){const R=p.find(j=>j.color===w&&!b.includes(j));R&&b.push(R)}if(b.length>=3){a.push(b);const w=new Set(b.map(R=>R.id));i=i.filter(R=>!w.has(R.id))}}}for(const m of l){let p=i.filter(v=>v.color===m);for(p.sort((v,b)=>v.value-b.value);p.length>=3;){let v=[];for(let b=0;b<p.length;b++){const w=[p[b]];let R=p[b].value+1;for(let j=b+1;j<p.length&&R<=13;j++)if(p[j].value===R)w.push(p[j]),R++;else if(p[j].value>R)break;w.length>=3&&w.length>v.length&&(v=w)}if(v.length>=3){a.push(v);const b=new Set(v.map(w=>w.id));i=i.filter(w=>!b.has(w.id)),p=p.filter(w=>!b.has(w.id))}else break}}const u=new Array(si).fill(null);let d=0;for(const m of a){const p=d<15?0:1,v=p===0?15:30;d+m.length>v&&p===0&&(d=15);for(const b of m)d<30&&(u[d++]=b);d<30&&d!==15&&d++}i.sort((m,p)=>{const v=b=>b?l.indexOf(b):99;return v(m.color)!==v(p.color)?v(m.color)-v(p.color):m.value-p.value});for(const m of i)d<30&&(u[d++]=m);i.length>0&&t.length>0&&d<30&&d++;for(const m of t)d<30&&(u[d++]=m);return u},y3=()=>Math.random().toString(36).substring(2,8).toUpperCase();let v3=1;const OE=s=>{const[e,t]=V.useState(null),[i,a]=V.useState(null),[l,u]=V.useState(!0),[d,m]=V.useState(!0),[p,v]=V.useState(null),[b,w]=V.useState([]),R=V.useRef(null),j=V.useRef(null);V.useEffect(()=>{const G=io();ro(G).then(K=>a(K.user.uid)).catch(K=>{console.error("Auth failed",K),v("Authentication failed")}).finally(()=>m(!1))},[]);const z=async()=>{if(i)return i;const G=io(),K=await ro(G);return a(K.user.uid),K.user.uid};V.useEffect(()=>{if(!Je||!Te){u(!1);return}if(!s){t(null),u(!1);return}u(!0);const G=At(St(Te,"101Rooms"),s),K=rd(G,ue=>{ue.exists()?(t(ue.data()),v(null)):(t(null),v("Room not found")),u(!1)},ue=>{console.error("Room subscription error",ue),t(null),v("Failed to connect to room"),u(!1)});return()=>{K(),R.current&&clearTimeout(R.current)}},[s]);const D=V.useMemo(()=>!e||!i?-1:e.players.findIndex(G=>G.odaUserId===i),[e?.players,i]),M=V.useCallback(()=>D,[D]),$=V.useMemo(()=>!e||!i?!1:e.hostUserId===i,[e?.hostUserId,i]),B=V.useCallback(()=>$,[$]),ce=V.useCallback(G=>{w(K=>K.includes(G)?K.filter(ue=>ue!==G):[...K,G])},[]),X=V.useCallback(()=>{w([])},[]),F=async G=>{if(!Je||!Te)return null;try{const K=await z(),ue=y3(),ye=At(St(Te,"101Rooms"),ue),we={roomId:ue,phase:"waiting",players:[{odaSlotu:0,odaUserId:K,adPlayerName:G,adIsAI:!1,tiles:Array(si).fill(null),score:0,hasLaidDown:!1}],centerStack:[],discardPiles:{0:[],1:[],2:[],3:[]},indicatorTile:null,okeyTile:null,tableMelds:{},currentTurn:0,roundWinner:null,gameWinner:null,roundNumber:1,hostUserId:K,createdAt:Date.now()};return await sd(ye,we),ue}catch(K){return console.error("Error creating room:",K),v("Failed to create room"),null}},C=async(G,K)=>{if(!Je||!Te)return!1;try{const ue=await z(),ye=At(St(Te,"101Rooms"),G);return await Rs(Te,async we=>{const Ie=await we.get(ye);if(!Ie.exists())throw new Error("Room not found");const Se=Ie.data();if(Se.phase!=="waiting")throw new Error("Game already started");if(Se.players.length>=4)throw new Error("Room is full");if(Se.players.some(pt=>pt.odaUserId===ue))return;const Ue={odaSlotu:Se.players.length,odaUserId:ue,adPlayerName:K,adIsAI:!1,tiles:Array(si).fill(null),score:0,hasLaidDown:!1};we.update(ye,{players:[...Se.players,Ue]})}),!0}catch(ue){return console.error("Error joining room:",ue),v(ue.message||"Failed to join room"),!1}},S=async()=>{if(!(!Je||!Te||!s||!B()))try{const G=At(St(Te,"101Rooms"),s);await Rs(Te,async K=>{const ue=await K.get(G);if(!ue.exists())return;const ye=ue.data(),we=Uf(4),Ie=[...ye.players];for(let Se=Ie.length;Se<4;Se++)Ie.push({odaSlotu:Se,odaUserId:`AI_${Se}`,adPlayerName:`Bot ${Se}`,adIsAI:!0,tiles:Array(si).fill(null),score:0,hasLaidDown:!1});for(let Se=0;Se<4;Se++)Ie[Se]={...Ie[Se],tiles:we.players[Se].tiles};K.update(G,{phase:"playing",players:Ie,centerStack:we.centerStack,discardPiles:{0:[],1:[],2:[],3:[]},indicatorTile:we.indicatorTile,okeyTile:we.okeyTile,tableMelds:{},currentTurn:0})})}catch(G){console.error("Error starting game:",G),v("Failed to start game")}},N=V.useCallback(async G=>{if(!Je||!Te||!s)return;const K=M();if(K!==-1)try{const ue=At(St(Te,"101Rooms"),s);await Rs(Te,async ye=>{const we=await ye.get(ue);if(!we.exists())return;const Ie=we.data();if(Ie.currentTurn!==K||Ie.players[K].tiles.filter(je=>je!==null).length>=15)return;const Ue=[...Ie.centerStack],pt=Ue.pop();if(!pt)return;const nt=[...Ie.players],Ze=[...nt[K].tiles];let Ce=-1;if(G!==void 0&&G>=0&&G<Ze.length)if(Ze[G]===null)Ce=G;else for(let je=1;je<Ze.length;je++){const st=G+je,Fe=G-je;if(st<Ze.length&&Ze[st]===null){Ce=st;break}if(Fe>=0&&Ze[Fe]===null){Ce=Fe;break}}Ce===-1&&(Ce=Ze.findIndex(je=>je===null)),Ce!==-1&&(Ze[Ce]=pt),nt[K]={...nt[K],tiles:Ze},ye.update(ue,{players:nt,centerStack:Ue})})}catch(ue){console.error("Error drawing from center:",ue),v("Failed to draw tile")}},[Je,Te,s,M]),E=V.useCallback(async G=>{if(!Je||!Te||!s)return;const K=M();if(K!==-1)try{const ue=At(St(Te,"101Rooms"),s);await Rs(Te,async ye=>{const we=await ye.get(ue);if(!we.exists())return;const Ie=we.data();if(Ie.currentTurn!==K)return;const Se=(K+3)%4,Ue=Ie.discardPiles[String(Se)]||[];if(Ue.length===0||Ie.players[K].tiles.filter(Fe=>Fe!==null).length>=15)return;const nt=Ue[Ue.length-1],Ze={...Ie.discardPiles,[String(Se)]:Ue.slice(0,-1)},Ce=[...Ie.players],je=[...Ce[K].tiles];let st=-1;G!==void 0&&je[G]===null?st=G:st=je.findIndex(Fe=>Fe===null),st!==-1&&(je[st]=nt),Ce[K]={...Ce[K],tiles:je},ye.update(ue,{players:Ce,discardPiles:Ze})})}catch(ue){console.error("Error drawing from discard:",ue),v("Failed to draw from discard")}},[Je,Te,s,M]),A=V.useCallback(async G=>{if(!Je||!Te||!s)return;const K=M();if(K!==-1){try{const ue=At(St(Te,"101Rooms"),s);await Rs(Te,async ye=>{const we=await ye.get(ue);if(!we.exists())return;const Ie=we.data();if(Ie.currentTurn!==K||Ie.players[K].tiles.filter(st=>st!==null).length!==15)return;const Ue=[...Ie.players],pt=[...Ue[K].tiles],nt=pt[G];if(!nt)return;pt[G]=null,Ue[K]={...Ue[K],tiles:pt};const Ze=Ie.discardPiles[String(K)]||[],Ce={...Ie.discardPiles,[String(K)]:[...Ze,nt]},je=(Ie.currentTurn+1)%4;ye.update(ue,{players:Ue,discardPiles:Ce,currentTurn:je})})}catch(ue){console.error("Error discarding tile:",ue),v("Failed to discard tile")}X()}},[Je,Te,s,M,X]),P=V.useCallback(async()=>{if(!Je||!Te||!s||!e)return;const G=M();if(G!==-1){if(b.length<3){alert("En az 3 ta semelisiniz!");return}try{const K=At(St(Te,"101Rooms"),s);await Rs(Te,async ue=>{const ye=await ue.get(K);if(!ye.exists())return;const we=ye.data();if(we.currentTurn!==G)return;const Ie=we.players[G],Se=b.map(Fe=>Ie.tiles[Fe]).filter(Fe=>Fe!==null);if(Se.length<3)return;const Ue=j0(Se);if(!Ue.valid||!Ue.type)throw new Error("Bu talar geerli bir per oluturmuyor!");if(!Ie.hasLaidDown&&!AE([Se]))throw new Error("lk indiri iin en az 51 puan gerekli!");const pt=`meld-${Date.now()}-${v3++}`,nt={id:pt,tiles:Se,type:Ue.type,ownerPlayer:G},Ze=[...Ie.tiles];b.forEach(Fe=>{Ze[Fe]=null});const Ce=[...we.players];Ce[G]={...Ce[G],tiles:Ze,hasLaidDown:!0};const je={...we.tableMelds,[pt]:nt};if(Ze.filter(Fe=>Fe!==null).length===0){const Fe=Ce.map(($e,ot)=>{if(ot===G)return $e;const Kt=$e.tiles.filter(Wt=>Wt!==null).reduce((Wt,Nn)=>Nn.isFakeOkey?Wt+25:Nn.value>=11?Wt+10:Wt+Nn.value,0);return{...$e,score:$e.score+Kt}}),yt=Fe.findIndex($e=>$e.score>=101);ue.update(K,{players:Fe,tableMelds:je,phase:yt!==-1?"gameOver":"roundOver",roundWinner:G,gameWinner:yt!==-1?G:null})}else ue.update(K,{players:Ce,tableMelds:je})})}catch(K){console.error("Error laying down meld:",K),alert(K.message||"Failed to lay down meld")}X()}},[Je,Te,s,e,M,b,X]),O=V.useCallback(async(G,K)=>{if(!Je||!Te||!s||!e)return;const ue=M();if(ue!==-1)try{const ye=At(St(Te,"101Rooms"),s);await Rs(Te,async we=>{const Ie=await we.get(ye);if(!Ie.exists())return;const Se=Ie.data();if(Se.currentTurn!==ue)return;const Ue=Se.players[ue];if(!Ue.hasLaidDown)throw new Error("nce kendi perinizi indirmelisiniz!");const pt=Ue.tiles[G];if(!pt)return;const nt=Se.tableMelds[K];if(!nt)return;if(!SE(nt,pt))throw new Error("Bu ta bu perlere eklenemez!");const Ze={...Se.tableMelds,[K]:{...nt,tiles:[...nt.tiles,pt]}},Ce=[...Ue.tiles];Ce[G]=null;const je=[...Se.players];if(je[ue]={...je[ue],tiles:Ce},Ce.filter(Fe=>Fe!==null).length===0){const Fe=je.map(($e,ot)=>{if(ot===ue)return $e;const Kt=$e.tiles.filter(Wt=>Wt!==null).reduce((Wt,Nn)=>Nn.isFakeOkey?Wt+25:Nn.value>=11?Wt+10:Wt+Nn.value,0);return{...$e,score:$e.score+Kt}}),yt=Fe.findIndex($e=>$e.score>=101);we.update(ye,{players:Fe,tableMelds:Ze,phase:yt!==-1?"gameOver":"roundOver",roundWinner:ue,gameWinner:yt!==-1?ue:null})}else we.update(ye,{players:je,tableMelds:Ze})})}catch(ye){console.error("Error adding to meld:",ye),alert(ye.message||"Failed to add to meld")}},[Je,Te,s,e,M]),be=V.useCallback(async(G,K)=>{if(!Je||!Te||!s||!e)return;const ue=M();if(ue===-1)return;const ye=[...e.players],we=[...ye[ue].tiles],Ie=we[G];we[G]=we[K],we[K]=Ie,ye[ue]={...ye[ue],tiles:we},j.current={players:ye},R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{if(j.current&&Te){const Se=At(St(Te,"101Rooms"),s);ar(Se,{players:j.current.players}).catch(Ue=>{console.error("Error syncing tile move:",Ue)}),j.current=null}},100)},[Je,Te,s,e,M]),_e=V.useCallback(async()=>{if(!Je||!Te||!s||!e)return;const G=M();if(G===-1)return;const K=[...e.players],ue=DE(K[G].tiles);K[G]={...K[G],tiles:ue};const ye=At(St(Te,"101Rooms"),s);ar(ye,{players:K}).catch(we=>{console.error("Error syncing sorted tiles:",we)})},[Je,Te,s,e,M]),H=V.useCallback(async()=>{if(!Je||!Te||!s||!e)return;const G=M();if(G===-1)return;const K=[...e.players],ue=RE(K[G].tiles);K[G]={...K[G],tiles:ue};const ye=At(St(Te,"101Rooms"),s);ar(ye,{players:K}).catch(we=>{console.error("Error syncing sorted tiles:",we)})},[Je,Te,s,e,M]),Y=V.useCallback(async()=>{if(!Je||!Te||!s||!e)return;const G=M();if(G===-1)return;const K=[...e.players],ue=CE(K[G].tiles);K[G]={...K[G],tiles:ue};const ye=At(St(Te,"101Rooms"),s);ar(ye,{players:K}).catch(we=>{console.error("Error syncing sorted tiles:",we)})},[Je,Te,s,e,M]),J=V.useCallback(async()=>{if(!Je||!Te||!s||!e)return;const G=M();if(G===-1)return;const K=[...e.players],ue=kE(K[G].tiles);K[G]={...K[G],tiles:ue};const ye=At(St(Te,"101Rooms"),s);ar(ye,{players:K}).catch(we=>{console.error("Error syncing sorted tiles:",we)})},[Je,Te,s,e,M]),pe=V.useCallback(()=>{if(!e)return;const G=M();if(G===-1)return;const K=NE(e.players[G].tiles);K.length>0&&w(K[0])},[e,M]),ve=V.useCallback(()=>{if(!e)return;const G=M();if(G===-1)return;const K=IE(e.players[G].tiles);K.length>0&&w(K[0])},[e,M]),L=async()=>{if(!(!Je||!Te||!s||!B()||!e)&&e.phase==="roundOver")try{const G=At(St(Te,"101Rooms"),s),K=Uf(4),ue=e.players.map((ye,we)=>({...ye,tiles:K.players[we].tiles,hasLaidDown:!1}));await ar(G,{phase:"playing",players:ue,centerStack:K.centerStack,discardPiles:{0:[],1:[],2:[],3:[]},indicatorTile:K.indicatorTile,okeyTile:K.okeyTile,tableMelds:{},currentTurn:e.roundWinner??0,roundNumber:e.roundNumber+1})}catch(G){console.error("Error starting new round:",G)}},Z=async()=>{B()&&await S()};return V.useEffect(()=>{if(!e||!B()||e.phase!=="playing")return;const G=e.currentTurn;if(!e.players[G]?.adIsAI)return;const ue=setTimeout(async()=>{if(!(!Te||!s))try{const ye=At(St(Te,"101Rooms"),s);await Rs(Te,async we=>{const Ie=await we.get(ye);if(!Ie.exists())return;const Se=Ie.data();if(Se.currentTurn!==G)return;const Ue=Se.players[G];if(!Ue.adIsAI)return;const pt=[...Se.centerStack],nt=pt.pop();if(nt){const Ze=[...Ue.tiles],Ce=Ze.findIndex(Kt=>Kt===null);Ce!==-1&&(Ze[Ce]=nt);const je=Ze.findIndex(Kt=>Kt!==null),st=Ze[je];Ze[je]=null;const Fe=[...Se.players];Fe[G]={...Ue,tiles:Ze};const yt=Se.discardPiles[String(G)]||[],$e={...Se.discardPiles,[String(G)]:st?[...yt,st]:[...yt]},ot=(G+1)%4;we.update(ye,{centerStack:pt,players:Fe,discardPiles:$e,currentTurn:ot})}})}catch(ye){console.error("AI turn error:",ye)}},1500);return()=>clearTimeout(ue)},[e?.currentTurn,e?.phase,B,Te,s]),{room:e,userId:i,loading:l,isAuthLoading:d,error:p,selectedTileIndices:b,getMySlot:M,isHost:B,toggleTileSelection:ce,clearSelection:X,createRoom:F,joinRoom:C,startGame:S,drawFromCenter:N,drawFromDiscard:E,discardTile:A,layDownMeld:P,addToMeld:O,moveTileInRack:be,autoSortTiles:_e,sortTilesByRuns:H,sortTilesBySets:Y,sortTilesByPairs:J,selectRuns:pe,selectSets:ve,startNewRound:L,resetGame:Z}},ME=({color:s,style:e,className:t=""})=>{const i=s==="white"?"bg-slate-200 shadow-[inset_0_-4px_4px_rgba(0,0,0,0.2),0_4px_6px_rgba(0,0,0,0.3)] border-slate-300":"bg-slate-900 shadow-[inset_0_-4px_4px_rgba(0,0,0,0.5),0_4px_6px_rgba(0,0,0,0.4)] border-slate-700",a=s==="white"?"border-slate-300":"border-slate-700";return y.jsx("div",{style:e,className:`w-full h-full rounded-full border-4 ${i} relative flex items-center justify-center ${t}`,children:y.jsx("div",{className:`w-[70%] h-[70%] rounded-full border-2 ${a} opacity-30`})})},Sp=({id:s,color:e,isDraggable:t=!1,style:i})=>{const{attributes:a,listeners:l,setNodeRef:u,isDragging:d}=xa({id:s,disabled:!t}),m={opacity:d?0:1,touchAction:"none",...i};return y.jsx("div",{ref:u,style:m,...l,...a,className:"w-full aspect-square relative cursor-grab active:cursor-grabbing",children:y.jsx(ME,{color:e})})},_3=({index:s,count:e,isTop:t,isHighlighted:i,playerColor:a,canDragFrom:l,isHitTarget:u})=>{const{setNodeRef:d,isOver:m}=hi({id:s.toString()}),p=s%2===1,v=m||i?"bg-indigo-500/20 ring-2 ring-indigo-400/50":"",b=Math.abs(e),w=e>0?"white":"black",R=5,j=Math.min(b,R),z=b>R,D=()=>b<=3?"-my-0.5":b<=5?"-my-1":"-my-1.5",M=[];for(let B=0;B<j;B++){const ce=B===j-1,X=l&&ce&&w===a;M.push(y.jsx("div",{className:`w-[80%] max-w-[40px] ${D()} z-10 relative`,children:y.jsx(Sp,{id:`checker-${s}-${B}`,color:w,isDraggable:X})},`${s}-${B}`))}const $=z?y.jsx("div",{className:`absolute ${t?"bottom-1":"top-1"} left-1/2 -translate-x-1/2 z-20 
                px-1.5 py-0.5 rounded-full text-[10px] font-bold shadow-lg
                ${w==="white"?"bg-slate-100 text-slate-800 border border-slate-300":"bg-slate-800 text-slate-100 border border-slate-600"}`,children:b}):null;return y.jsxs("div",{ref:d,className:`relative flex-1 h-full flex ${t?"flex-col items-center justify-start":"flex-col-reverse items-center justify-start"} ${v} transition-colors rounded-sm`,children:[y.jsx("div",{className:"absolute inset-0 pointer-events-none w-full h-full opacity-60",style:{clipPath:t?"polygon(0 0, 50% 100%, 100% 0)":"polygon(0 100%, 50% 0, 100% 100%)",backgroundColor:p?"#334155":"#818cf8",opacity:p?.4:.15}}),y.jsx("div",{className:`z-10 w-full h-full flex ${t?"flex-col pt-2":"flex-col-reverse pb-2"} items-center overflow-hidden`,children:M}),$,u&&y.jsxs("div",{className:`absolute ${t?"top-6":"bottom-6"} left-1/2 -translate-x-1/2 z-50 pointer-events-none`,children:[y.jsx("style",{children:`
                        @keyframes shatter-left {
                            0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
                            100% { transform: translate(-20px, -10px) rotate(-15deg); opacity: 0; }
                        }
                        @keyframes shatter-right {
                            0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
                            100% { transform: translate(20px, -10px) rotate(15deg); opacity: 0; }
                        }
                        @keyframes impact-flash {
                            0% { transform: scale(0.5); opacity: 0; }
                            10% { transform: scale(1.2); opacity: 1; }
                            100% { transform: scale(0); opacity: 0; }
                        }
                        `}),y.jsx("div",{className:"relative w-10 h-10 md:w-12 md:h-12",children:(()=>{const B=e>0?"black":"white",ce=B==="white"?"bg-slate-200 border-slate-300 shadow-sm":"bg-slate-900 border-slate-700 shadow-xl",X=B==="white"?"border-slate-300":"border-slate-700";return y.jsxs(y.Fragment,{children:[y.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${ce} overflow-hidden`,style:{clipPath:"polygon(0% 0%, 55% 0%, 45% 100%, 0% 100%)",animation:"shatter-left 0.6s ease-out forwards"},children:y.jsx("div",{className:`absolute inset-2 rounded-full border-2 ${X} opacity-30`})}),y.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${ce} overflow-hidden`,style:{clipPath:"polygon(55% 0%, 100% 0%, 100% 100%, 45% 100%)",animation:"shatter-right 0.6s ease-out forwards"},children:y.jsx("div",{className:`absolute inset-2 rounded-full border-2 ${X} opacity-30`})}),y.jsx("div",{className:"absolute inset-0 bg-white rounded-full mix-blend-overlay",style:{animation:"impact-flash 0.4s ease-out forwards"}})]})})()})]}),y.jsx("span",{className:`absolute ${t?"top-0":"bottom-0"} text-[8px] text-slate-600 font-mono opacity-50`,children:s+1})]})},b3={1:[4],2:[0,8],3:[0,4,8],4:[0,2,6,8],5:[0,2,4,6,8],6:[0,2,3,5,6,8]},x3=({value:s,isRolling:e,color:t})=>{const[i,a]=V.useState(s);V.useEffect(()=>{let d;return e?d=setInterval(()=>{a(Math.floor(Math.random()*6)+1)},100):a(s),()=>clearInterval(d)},[e,s]);const l=t==="white"?"bg-white text-slate-900 border-slate-200 shadow-lg":"bg-slate-900 text-white border-slate-700 shadow-xl",u=t==="white"?"bg-slate-900":"bg-white";return y.jsxs("div",{className:`
                w-10 h-10 md:w-12 md:h-12 rounded-lg flex items-center justify-center border-2 
                transition-all duration-300 relative
                ${l}
                ${e?"animate-bounce scale-110 rotate-12":"hover:scale-105"}
            `,style:{perspective:"1000px",transformStyle:"preserve-3d"},children:[y.jsx("div",{className:"grid grid-cols-3 grid-rows-3 gap-1 w-[70%] h-[70%]",children:Array.from({length:9}).map((d,m)=>y.jsx("div",{className:"flex items-center justify-center",children:b3[i].includes(m)&&y.jsx("div",{className:`w-1.5 h-1.5 md:w-2 md:h-2 rounded-full ${u} shadow-sm`})},m))}),y.jsx("div",{className:"absolute inset-0 bg-linear-to-br from-white/20 to-transparent pointer-events-none rounded-lg"})]})},w3=({gameState:s,playerColor:e,onMove:t,validMoves:i})=>{const{board:a,bar:l,off:u,turn:d}=s,[m,p]=V.useState(null),[v,b]=V.useState([]),[w,R]=V.useState(null),[j,z]=V.useState(!1),D=He.useRef(s.dice),M=dd(ni(C0,{activationConstraint:{distance:8}}),ni(N0,{activationConstraint:{delay:100,tolerance:5}})),$=F=>{const{active:C}=F,S=C.id;let N=-1;if(S.startsWith("bar"))N="bar";else if(S.startsWith("checker-")){const P=S.split("-");N=parseInt(P[1])}else N=parseInt(S);p(S);const A=i.filter(P=>N==="bar"?P.from==="bar":P.from===N).map(P=>P.to==="off"?99:P.to);b(A)},B=He.useRef(s.board);He.useEffect(()=>{const F=B.current,C=s.board;for(let S=0;S<24;S++){const N=F[S],E=C[S];N===-1&&E>=1&&(R(S),setTimeout(()=>R(null),800)),N===1&&E<=-1&&(R(S),setTimeout(()=>R(null),800))}B.current=s.board},[s.board]),He.useEffect(()=>{if(JSON.stringify(D.current)!==JSON.stringify(s.dice)){z(!0);const F=setTimeout(()=>z(!1),800);return D.current=s.dice,()=>clearTimeout(F)}},[s.dice]);const ce=F=>{const{active:C,over:S}=F;if(p(null),b([]),!S)return;const N=C.id;let E=-1;if(N.startsWith("bar"))E="bar";else if(N.startsWith("checker-")){const O=N.split("-");E=parseInt(O[1])}else E=parseInt(N);let A=-1;S.id==="off"?A="off":A=parseInt(S.id);const P=i.find(O=>O.from===E&&O.to===A);if(P){const O=vu(s,P);t(O)}},X=(F,C,S)=>{const N=[];if(F<C)for(let E=F;E<=C;E++)N.push(E);else for(let E=F;E>=C;E--)N.push(E);return y.jsx("div",{className:`flex-1 flex ${S?"border-b-2":"border-t-2"} border-slate-700/30`,children:N.map(E=>y.jsx(_3,{index:E,count:a[E],isTop:S,isHighlighted:v.includes(E),playerColor:e,canDragFrom:e===d&&(e==="white"&&l.white===0||e==="black"&&l.black===0),isHitTarget:w===E},E))})};return y.jsxs(vd,{sensors:M,onDragStart:$,onDragEnd:ce,children:[y.jsxs("div",{className:"flex flex-col md:flex-row w-full max-w-full md:max-w-7xl mx-auto gap-2 md:gap-4 items-stretch p-1 md:p-4",children:[y.jsxs("div",{className:"relative flex-1 aspect-square md:aspect-[4/3] bg-slate-800/80 rounded-xl border-4 md:border-[12px] border-slate-900 shadow-2xl flex flex-col overflow-hidden",children:[y.jsxs("div",{className:"flex-1 flex",children:[X(e==="white"?11:12,e==="white"?6:17,!0),y.jsxs("div",{className:"w-12 md:w-20 bg-slate-900/50 border-x-4 border-slate-900 flex flex-col items-center justify-center gap-1 py-2",children:[Array.from({length:l.white}).map((F,C)=>y.jsx("div",{className:"w-10 md:w-12",children:y.jsx(Sp,{id:`bar-white-${C}`,color:"white",isDraggable:e==="white"&&d==="white"&&C===l.white-1})},`bar-w-${C}`)),Array.from({length:l.black}).map((F,C)=>y.jsx("div",{className:"w-10 md:w-12",children:y.jsx(Sp,{id:`bar-black-${C}`,color:"black",isDraggable:e==="black"&&d==="black"&&C===l.black-1})},`bar-b-${C}`))]}),X(e==="white"?5:18,e==="white"?0:23,!0)]}),y.jsxs("div",{className:"flex-1 flex",children:[X(e==="white"?12:11,e==="white"?17:6,!1),y.jsx("div",{className:"w-12 md:w-20 bg-slate-900/50 border-x-4 border-slate-900 flex flex-col-reverse items-center justify-start gap-1 py-2"}),X(e==="white"?18:5,e==="white"?23:0,!1)]}),y.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center z-50",children:y.jsx("div",{className:"flex gap-4",children:(()=>{const F={};return s.dice.map((C,S)=>{const N=s.movesLeft.filter(A=>A===C).length;F[C]=(F[C]||0)+1;const E=F[C]>N;return y.jsx("div",{className:`transition-opacity duration-300 ${E?"opacity-30 grayscale":"opacity-100"}`,children:y.jsx(x3,{value:C,isRolling:j,color:d==="white"?"white":"black"})},S)})})()})})]}),y.jsxs("div",{className:"w-full h-20 md:w-32 md:h-auto bg-slate-900/40 rounded-xl border-4 border-slate-800 flex flex-row md:flex-col relative overflow-hidden shrink-0",children:[y.jsx("div",{className:"absolute inset-y-0 left-1/2 -translate-x-1/2 w-[2px] bg-slate-800/50 hidden md:block"}),y.jsx("div",{className:"absolute inset-x-0 top-1/2 -translate-y-1/2 h-[2px] bg-slate-800/50 md:hidden"}),y.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 md:-rotate-90 text-slate-700 font-bold text-xs md:text-sm tracking-[0.5em] pointer-events-none whitespace-nowrap opacity-50 z-0",children:"COLLECT"}),y.jsx("div",{className:"flex-1 w-full p-2 flex flex-col gap-1 z-10 border-r md:border-r-0 md:border-b border-slate-800/50",children:y.jsx(px,{playerColor:e==="white"?"black":"white",count:e==="white"?u.black:u.white,isTop:!0})}),y.jsx("div",{className:"flex-1 w-full p-2 flex flex-col-reverse gap-1 z-10",children:y.jsx(px,{playerColor:e==="white"?"white":"black",count:e==="white"?u.white:u.black,isTop:!1})}),y.jsx("div",{className:`absolute inset-0 z-20 ${m?"pointer-events-auto":"pointer-events-none"}`,children:y.jsx(T3,{isHighlighted:v.includes(99)})})]})]}),y.jsx(k0,{children:m?y.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 cursor-grabbing",children:y.jsx(ME,{color:(function(){if(m.startsWith("bar-white"))return"white";if(m.startsWith("bar-black"))return"black";if(m.startsWith("checker-")){const F=m.split("-"),C=parseInt(F[1]);return a[C]>0?"white":"black"}return"white"})()})}):null})]})},T3=({isHighlighted:s})=>{const{setNodeRef:e,isOver:t}=hi({id:"off"}),i=t||s;return y.jsx("div",{ref:e,className:`w-full h-full flex items-center justify-center transition-all duration-300 ${i?"bg-indigo-500/30 backdrop-blur-sm border-2 border-dashed border-indigo-400":""}`,children:i&&y.jsx("div",{className:"text-indigo-200 font-bold text-xs rotate-90 whitespace-nowrap animate-pulse",children:"COLLECT"})})},px=({playerColor:s,count:e,isTop:t})=>y.jsxs("div",{className:`w-full flex ${t?"flex-col":"flex-col-reverse"} gap-[2px] transition-colors rounded-lg p-1`,children:[e>0&&y.jsx("div",{className:`text-[10px] text-center mb-1 font-bold ${s==="white"?"text-slate-400":"text-slate-600"}`,children:e}),Array.from({length:Math.min(e,15)}).map((i,a)=>y.jsx("div",{className:`h-2 w-full rounded-sm opacity-80 ${s==="white"?"bg-slate-200 shadow-sm":"bg-slate-900 border border-slate-700 shadow-sm"}`},a))]}),E3=(s,e="Normal")=>{const t=Ep(s);if(t.length===0)return null;if(e==="Easy"){const l=Math.floor(Math.random()*t.length);return t[l]}let i=t[0],a=-1/0;for(const l of t){const u=S3(s,l,e);u>a&&(a=u,i=l)}return i},S3=(s,e,t)=>{let i=0;e.isHit&&(i+=100),e.to==="off"&&(i+=200);const a=vu({...s},e),l=s.turn==="white";if(typeof e.to=="number"){const u=a.board[e.to];l&&u===2&&(i+=50),!l&&u===-2&&(i+=50)}if(typeof e.to=="number"){const u=a.board[e.to];Math.abs(u)===1&&(i-=30)}if(typeof e.from=="number"){const u=a.board[e.from];Math.abs(u)===1&&(i-=40)}return t==="Hard"&&typeof e.to=="number"&&(l?e.to>=18:e.to<=5)&&Math.abs(a.board[e.to])>1&&(i+=30),i+=Math.random()*5,i},A3=({roomId:s="",mode:e="online",aiDifficulty:t="Normal",onExit:i})=>{const a=bE(e==="online"?s:null),[l,u]=V.useState(()=>Lc()),[d,m]=V.useState(null),p=e==="local",v=He.useMemo(()=>p?l:d||(a.room?{...a.room,validMoves:[]}:null),[p,l,a.room,d]);V.useEffect(()=>{if(!a.room||!d)return;const X=a.room.turn===d.turn,F=JSON.stringify(a.room.board)===JSON.stringify(d.board),C=a.room.movesLeft.length===d.movesLeft.length;X&&F&&C?m(null):X||m(null)},[a.room,d]);const b=He.useMemo(()=>v?Ep(v):[],[v]),w=p?v?.turn==="white"?"local-white":"local-black":a.userId,R=p||a.room?.whitePlayer===w?"white":"black",j=R===v?.turn;V.useEffect(()=>{!p&&s&&a.joinRoom&&a.joinRoom(s)},[s,p]);const z=()=>{navigator.clipboard.writeText(s),alert("Room ID copied to clipboard!")},D=a.room?.whitePlayer===w||p,M=a.room?.blackPlayer===w,$=!!v?.winner,B=X=>{let F={...X};F.movesLeft.length===0?(F.turn=F.turn==="white"?"black":"white",F.dice=Rc(),F.movesLeft=[...F.dice]):Ep(F).length===0&&(F.turn=F.turn==="white"?"black":"white",F.dice=Rc(),F.movesLeft=[...F.dice]),p?u(F):(m(F),a.updateGameState(F))};if(V.useEffect(()=>{if(v&&v.movesLeft.length>0&&b.length===0&&!v.winner){const X=setTimeout(()=>{let F={...v};F.turn=F.turn==="white"?"black":"white",F.dice=Rc(),F.movesLeft=[...F.dice],p?u(F):(m(F),a.updateGameState(F))},1500);return()=>clearTimeout(X)}},[v?.movesLeft,b.length,v?.winner,v?.turn,p,v]),V.useEffect(()=>{if(v&&p&&v.turn==="black"&&!v.winner){const X=setTimeout(()=>{const F=E3(v,t);if(F){const C=vu(v,F);B(C)}else{let C={...v};C.turn="white",C.dice=Rc(),C.movesLeft=[...C.dice],u(C)}},1500);return()=>clearTimeout(X)}},[v,p,t]),!p&&a.loading)return y.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-6 animate-pulse",children:[y.jsx("div",{className:"relative shadow-2xl shadow-indigo-500/20 rounded-full p-4",children:y.jsx(Ex,{className:"w-16 h-16 text-indigo-500 animate-spin"})}),y.jsxs("div",{className:"text-center space-y-2",children:[y.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest",children:"Entering Arena"}),y.jsx("p",{className:"text-slate-500 font-medium",children:"Synchronizing with the global lattice..."})]})]});if(!v)return y.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[y.jsxs("div",{className:"text-center space-y-4",children:[y.jsx("h2",{className:"text-5xl font-black text-white italic",children:"Room Dissolved"}),y.jsx("p",{className:"text-slate-400 text-lg",children:"The arena you seek no longer exists or the link is expired."})]}),y.jsx("button",{onClick:i,className:"btn-premium px-10 py-4 text-xl",children:"Return to Lobby"})]});const ce=v.winner?`${v.winner==="white"?"White":"Black"} Wins!`:j?"Your Turn":"Waiting...";return y.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center gap-8 lg:gap-12 py-6 lg:py-10 w-full animate-in fade-in duration-700",children:[y.jsxs("header",{className:"w-full max-w-6xl flex items-center justify-between px-4 lg:px-6",children:[y.jsxs("button",{onClick:()=>{!p&&a.leaveRoom&&a.leaveRoom(),i()},className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all font-bold uppercase tracking-widest text-xs",children:[y.jsx("div",{className:"p-2 rounded-xl bg-slate-900 border border-slate-800 group-hover:border-slate-700 group-hover:-translate-x-1 transition-transform",children:y.jsx(Jr,{size:18})}),"Back"]}),!p&&y.jsx("div",{className:"flex items-center gap-4",children:y.jsxs("div",{className:"liquid-glass px-6 py-3 flex items-center gap-6",children:[y.jsxs("div",{className:"flex flex-col gap-0.5",children:[y.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-slate-500 font-black",children:"Arena ID"}),y.jsx("code",{className:"text-indigo-300 font-mono font-bold",children:s})]}),y.jsx("div",{className:"h-8 w-px bg-slate-800"}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("button",{onClick:z,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:y.jsx(ff,{size:18})}),y.jsx("button",{className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:y.jsx(Sx,{size:18})})]})]})}),p&&y.jsx("div",{className:"px-6 py-3 liquid-glass text-indigo-300 font-bold uppercase tracking-widest text-xs",children:"Single Player Mode"})]}),y.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-6 lg:gap-16 w-full max-w-7xl px-0 lg:px-6",children:[y.jsxs("div",{className:"relative group w-full flex justify-center max-w-full overflow-visible",children:[y.jsx("div",{className:"absolute -inset-4 bg-linear-to-r from-indigo-500 to-pink-500 rounded-[2.5rem] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"}),y.jsx(w3,{gameState:v,playerColor:R,onMove:B,onRollDice:()=>{},validMoves:b}),$&&y.jsx(C3,{winner:v.winner,playerColor:R,onRematch:()=>{const X=Lc();m(null),p?u(X):a.resetGame()},onExit:()=>{!p&&a.leaveRoom&&a.leaveRoom(),i()}})]}),y.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-3 lg:gap-8 mt-0 lg:mt-0",children:[y.jsxs("div",{className:"liquid-glass p-3 lg:p-8 space-y-3 lg:space-y-8 border-l-4 border-l-indigo-500",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:"Game Status"}),y.jsxs("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-2 ${v.winner?"bg-indigo-500/10 text-indigo-300 border border-indigo-500/30":j?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-slate-800 text-slate-500"}`,children:[y.jsx("span",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${v.winner?"bg-indigo-400":"bg-green-500"}`}),p?v.turn==="white"?" White Turn":" Black Turn":ce]})]}),$&&y.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/10 border border-indigo-500/30 text-indigo-100 text-sm lg:text-base font-bold",children:ce}),y.jsxs("div",{className:"space-y-2 lg:space-y-4",children:[y.jsx(R3,{gameState:v}),!p&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex items-center gap-2 lg:gap-4 p-2 lg:p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[y.jsx("div",{className:`w-8 h-8 lg:w-12 lg:h-12 rounded-xl flex items-center justify-center text-lg lg:text-xl font-bold ${D?"bg-white text-slate-950":"bg-slate-800 text-slate-400"}`,children:"W"}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"text-xs lg:text-sm font-bold text-white uppercase tracking-wide",children:"White Player"}),y.jsx("div",{className:"text-[10px] lg:text-xs text-slate-500 font-medium",children:a.room?.whitePlayer===w?"Connected (You)":a.room?.whitePlayer?"Opponent Ready":"Awaiting Entry..."})]})]}),y.jsxs("div",{className:"flex items-center gap-2 lg:gap-4 p-2 lg:p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[y.jsx("div",{className:`w-8 h-8 lg:w-12 lg:h-12 rounded-xl flex items-center justify-center text-lg lg:text-xl font-bold ${M?"bg-indigo-500 text-white":"bg-slate-800 text-slate-400"}`,children:"B"}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"text-xs lg:text-sm font-bold text-white uppercase tracking-wide",children:"Black Player"}),y.jsx("div",{className:"text-[10px] lg:text-xs text-slate-500 font-medium",children:a.room?.blackPlayer===w?"Connected (You)":a.room?.blackPlayer?"Opponent Ready":"Awaiting Entry..."})]})]})]})]}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 lg:gap-3",children:[y.jsxs("button",{disabled:$,onClick:()=>{if(p){const X={...v};X.winner=R==="white"?"black":"white",u(X)}else a.resignGame(R)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 lg:px-4 lg:py-3 rounded-xl border border-slate-800 bg-slate-900/60 text-slate-200 text-sm lg:text-base font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:border-red-500/50 hover:text-red-200 transition",children:[y.jsx(Tx,{size:16,className:"lg:w-[18px] lg:h-[18px]"}),"Resign"]}),y.jsxs("button",{disabled:!$&&!p,onClick:()=>{const X=Lc();m(null),p?u(X):a.resetGame()},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 lg:px-4 lg:py-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 text-indigo-100 text-sm lg:text-base font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:bg-indigo-500/20 transition",children:[y.jsx(Rp,{size:16,className:"lg:w-[18px] lg:h-[18px]"}),"Rematch"]})]})]}),!p&&y.jsxs("div",{className:"hidden lg:grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[y.jsx(Cp,{size:20,className:"mx-auto text-slate-600"}),y.jsx("div",{className:"text-xl font-black text-white italic",children:a.room?.whitePlayer&&a.room?.blackPlayer?"2/2":a.room?.whitePlayer||a.room?.blackPlayer?"1/2":"0/2"}),y.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Connected"})]}),y.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[y.jsx(Ax,{size:20,className:"mx-auto text-indigo-400"}),y.jsx("div",{className:"text-xl font-black text-white italic",children:"24ms"}),y.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Latency"})]})]})]})]}),y.jsxs("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10 flex flex-col items-center gap-1",children:[y.jsx("span",{children:"Transparent Strategy Arena"}),y.jsx("span",{className:"text-slate-700 text-[8px]",children:"v1.1.0"})]})]})},R3=({gameState:s})=>{const[e,t]=V.useState(0),[i,a]=V.useState(0),[l,u]=V.useState(0),d=He.useRef(s?.winner);V.useEffect(()=>{d.current&&!s?.winner&&(t(0),a(0),u(0)),d.current=s?.winner},[s?.winner]),V.useEffect(()=>{if(!s||s.winner)return;const p=window.setInterval(()=>{t(v=>v+1),a(v=>v+(s.turn==="white"?1:0)),u(v=>v+(s.turn==="black"?1:0))},1e3);return()=>window.clearInterval(p)},[s?.turn,s?.winner]);const m=p=>{const v=Math.floor(p/60).toString().padStart(2,"0"),b=(p%60).toString().padStart(2,"0");return`${v}:${b}`};return y.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-3 p-2 md:p-4 rounded-2xl bg-slate-900/60 border border-slate-800/80 text-[10px] lg:text-xs font-bold uppercase tracking-widest",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("div",{className:"text-slate-500",children:"Time"}),y.jsx("div",{className:"text-white text-base",children:m(e)})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("div",{className:"text-slate-500",children:"White"}),y.jsx("div",{className:"text-emerald-300 text-base",children:m(i)})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("div",{className:"text-slate-500",children:"Black"}),y.jsx("div",{className:"text-sky-300 text-base",children:m(l)})]})]})},C3=({winner:s,playerColor:e,onRematch:t,onExit:i})=>{const a=s===e;return y.jsxs("div",{className:"absolute inset-0 z-50 rounded-[2rem] bg-slate-900/80 backdrop-blur-md flex flex-col items-center justify-center p-6 text-center animate-in fade-in zoom-in duration-500",children:[y.jsx("div",{className:`p-6 rounded-full mb-6 ${a?"bg-amber-500/20 text-amber-400 shadow-[0_0_50px_-12px_rgba(245,158,11,0.5)]":"bg-red-500/20 text-red-400 shadow-[0_0_50px_-12px_rgba(239,68,68,0.5)]"}`,children:a?y.jsx($g,{size:64,className:"animate-bounce"}):y.jsx(OA,{size:64})}),y.jsx("h2",{className:`text-4xl md:text-5xl font-black uppercase tracking-widest mb-2 ${a?"text-transparent bg-clip-text bg-linear-to-b from-amber-300 to-amber-600":"text-slate-200"}`,children:a?"Victory!":"Defeat"}),y.jsx("p",{className:"text-slate-400 font-bold text-lg mb-8 uppercase tracking-widest",children:a?"You conquered the board.":"Better luck next time."}),y.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[y.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center gap-3 px-6 py-4 rounded-xl bg-indigo-500 hover:bg-indigo-400 text-white font-black uppercase tracking-widest transition-all hover:scale-105 active:scale-95 shadow-lg shadow-indigo-500/30",children:[y.jsx(Rp,{size:20}),"Rematch"]}),y.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-3 px-6 py-4 rounded-xl bg-slate-800 hover:bg-slate-700 text-slate-300 font-bold uppercase tracking-widest transition-all hover:scale-105 active:scale-95",children:[y.jsx(BA,{size:20}),"Return to Lobby"]})]})]})},N3=s=>{const[e,t]=V.useState(null),[i,a]=V.useState(!1);V.useEffect(()=>{if(!s)try{const D=gx();console.log("Okey Game Initialized",D),t(D)}catch(D){console.error("Failed to initialize Okey game",D)}},[s]);const l=V.useCallback(D=>{t(M=>{if(!M)return null;if(M.currentTurn!==0||M.players[0].tiles.filter(S=>S!==null).length>=15)return M;const B=[...M.centerStack],ce=B.pop();if(!ce)return M;const X=[...M.players],F=[...X[0].tiles];let C=-1;if(D!==void 0&&D>=0&&D<F.length)if(F[D]===null)C=D;else for(let S=1;S<F.length;S++){const N=D+S,E=D-S;if(N<F.length&&F[N]===null){C=N;break}if(E>=0&&F[E]===null){C=E;break}}return C===-1&&(C=F.findIndex(S=>S===null)),C!==-1&&(F[C]=ce),X[0]={...X[0],tiles:F},B.length===0?{...M,players:X,centerStack:B,phase:"stackEmpty"}:{...M,players:X,centerStack:B}})},[]),u=V.useCallback(D=>{t(M=>{if(!M||M.currentTurn!==0||M.players[0].tiles.filter(E=>E!==null).length>=15)return M;const B=3;if(M.discardPiles[B].length===0)return M;const X=[...M.discardPiles],F=X[B][X[B].length-1];X[B]=X[B].slice(0,-1);const C=[...M.players],S=[...C[0].tiles];let N=-1;if(D!==void 0&&D>=0&&D<S.length)if(S[D]===null)N=D;else for(let E=1;E<S.length;E++){const A=D+E,P=D-E;if(A<S.length&&S[A]===null){N=A;break}if(P>=0&&S[P]===null){N=P;break}}return N===-1&&(N=S.findIndex(E=>E===null)),N!==-1&&(S[N]=F),C[0]={...C[0],tiles:S},{...M,players:C,discardPiles:X}})},[]),d=V.useCallback(D=>{t(M=>{if(!M||M.currentTurn!==0)return M;const $=[...M.players[0].tiles];if(!$[D])return M;const ce=[...$];return ce[D]=null,h3(ce,M.okeyTile)?{...M,phase:"roundOver",winner:0}:(alert("Eliniz okey deil! Ltfen talar per yapn."),M)})},[]),m=V.useCallback(()=>{t(gx())},[]),p=V.useCallback(()=>{t(D=>{if(!D)return null;const M=[];if(D.discardPiles.forEach(B=>{M.push(...B)}),M.length===0)return{...D,phase:"roundOver",winner:null};const $=[...M].sort(()=>Math.random()-.5);return{...D,centerStack:$,discardPiles:[[],[],[],[]],phase:"playing"}})},[]),v=V.useCallback(()=>{t(D=>D?{...D,phase:"roundOver",winner:null}:null)},[]),b=V.useCallback((D,M)=>{t($=>{if(!$)return null;const B=[...$.players],ce=[...B[0].tiles],X=ce[D];return ce[D]=ce[M],ce[M]=X,B[0]={...B[0],tiles:ce},{...$,players:B}})},[]),w=V.useCallback(D=>{t(M=>{if(!M||M.currentTurn!==0)return M;if(M.players[0].tiles.filter(S=>S!==null).length!==15)return console.log("Discard blocked: Must have 15 tiles to discard."),M;const B=[...M.players],ce=[...M.players[0].tiles],X=ce[D];if(!X)return M;ce[D]=null,B[0]={...B[0],tiles:ce};const F=[...M.discardPiles];F[0]=[...F[0],X];const C=(M.currentTurn+1)%4;return{...M,players:B,discardPiles:F,currentTurn:C}})},[]);V.useEffect(()=>{if(e&&e.currentTurn!==0&&e.phase==="playing"){const D=setTimeout(()=>{t(M=>{if(!M||M.currentTurn===0)return M;const $=M.currentTurn,B=[...M.players],ce=($+1)%4,X=[...M.centerStack],F=X.pop();if(F){const C=[...B[$].tiles],S=C.findIndex(O=>O===null);S!==-1&&(C[S]=F);const N=C.findIndex(O=>O!==null),E=C[N];C[N]=null,B[$]={...B[$],tiles:C};const A=[...M.discardPiles];A[$]=[...A[$],E];const P=X.length===0?"stackEmpty":"playing";return{...M,centerStack:X,players:B,discardPiles:A,currentTurn:ce,phase:P}}return{...M,currentTurn:ce}})},1500);return()=>clearTimeout(D)}},[e?.currentTurn,e?.phase]);const R=async()=>(a(!0),await new Promise(D=>setTimeout(D,1e3)),a(!1),"okey-room-"+Math.random().toString(36).substr(2,6)),j=async D=>{a(!0),await new Promise(M=>setTimeout(M,1e3)),a(!1)},z=V.useCallback(()=>{t(D=>{if(!D)return null;const M=D.players[0],$=M.tiles.filter(_e=>_e!==null),B=[...$.filter(_e=>_e.isFakeOkey)],ce=$.filter(_e=>!_e.isFakeOkey&&D.okeyTile&&_e.color===D.okeyTile.color&&_e.value===D.okeyTile.value),F=[...$.filter(_e=>!_e.isFakeOkey&&!(D.okeyTile&&_e.color===D.okeyTile.color&&_e.value===D.okeyTile.value)),...ce],C=[],S=[...F],N=["red","blue","black","yellow"],E=(_e,H,Y)=>({..._e,displayValue:H,displayColor:Y,isJokerPlaceholder:!0});N.forEach(_e=>{let H=S.filter(J=>J.color===_e).sort((J,pe)=>J.value-pe.value),Y=0;for(;Y<H.length;){let J=[H[Y]],pe=H[Y].value+1,ve=Y+1;for(;ve<H.length;)if(H[ve].value===pe)J.push(H[ve]),pe++,ve++;else if(H[ve].value<pe)ve++;else break;if(J[J.length-1].value===13){const L=H.find(Z=>Z.value===1);L&&!J.find(Z=>Z.id===L.id)&&J.push(L)}J.length>=3?(C.push([...J]),J.forEach(L=>{const Z=S.findIndex(G=>G.id===L.id);Z!==-1&&S.splice(Z,1)}),H=S.filter(L=>L.color===_e).sort((L,Z)=>L.value-Z.value),Y=0):Y++}});for(let _e=1;_e<=13;_e++){const H=S.filter(J=>J.value===_e),Y=Array.from(new Set(H.map(J=>J.color)));if(Y.length>=3){const J=Y.map(pe=>H.find(ve=>ve.color===pe));C.push(J),J.forEach(pe=>{const ve=S.findIndex(L=>L.id===pe.id);ve!==-1&&S.splice(ve,1)})}}N.forEach(_e=>{if(B.length===0)return;const H=S.filter(Y=>Y.color===_e).sort((Y,J)=>Y.value-J.value);for(let Y=0;Y<H.length-1&&B.length>0;Y++){const J=H[Y],pe=H[Y+1];if(pe.value===J.value+1){const ve=B.shift();if(pe.value<13){const L=E(ve,pe.value+1,_e);C.push([J,pe,L])}else if(J.value>1){const L=E(ve,J.value-1,_e);C.push([L,J,pe])}else{const L=E(ve,3,_e);C.push([J,pe,L])}[J,pe].forEach(L=>{const Z=S.findIndex(G=>G.id===L.id);Z!==-1&&S.splice(Z,1)}),Y=-1}else if(pe.value===J.value+2&&B.length>0){const ve=B.shift(),L=E(ve,J.value+1,_e);C.push([J,L,pe]),[J,pe].forEach(Z=>{const G=S.findIndex(K=>K.id===Z.id);G!==-1&&S.splice(G,1)}),Y=-1}}});for(let _e=1;_e<=13&&B.length>0;_e++){const H=S.filter(J=>J.value===_e),Y=Array.from(new Set(H.map(J=>J.color)));if(Y.length===2){const J=B.shift(),pe=N.find(Z=>!Y.includes(Z)),ve=E(J,_e,pe),L=[...Y.map(Z=>H.find(G=>G.color===Z)),ve];C.push(L),L.forEach(Z=>{if(!Z.isJokerPlaceholder){const G=S.findIndex(K=>K.id===Z.id);G!==-1&&S.splice(G,1)}})}}let A=new Array(30).fill(null),P=0;B.forEach(_e=>{A[P++]=_e}),B.length>0&&P++,C.forEach(_e=>{_e.forEach(H=>{A[P++]=H}),P++});let O=15;for(;A[O]!==null&&O<30;)O++;S.forEach(_e=>{O<30&&(A[O++]=_e)});const be=[...D.players];return be[0]={...M,tiles:A},{...D,players:be}})},[e?.okeyTile]);return{gameState:e,moveTileInRack:b,drawFromCenter:l,drawFromDiscard:u,finishGame:d,resetGame:m,discardTile:w,autoSortTiles:z,reshuffleDiscards:p,endInTie:v,createRoom:R,joinRoom:j,isAuthLoading:i}},cr=He.memo(({tile:s,okeyTile:e,isJoker:t,className:i="",dragging:a=!1,size:l="md"})=>{const u=R=>{switch(R){case"red":return"text-[#d32f2f]";case"black":return"text-[#212121]";case"blue":return"text-[#1976d2]";case"yellow":return"text-[#ffa000]";default:return"text-slate-400"}},d=l==="xs"?"w-8 h-11":l==="sm"?"w-10 h-13":l==="lg"?"w-16 h-22":"w-14 h-19",m=l==="xs"?"text-lg":l==="sm"?"text-2xl":l==="lg"?"text-5xl":"text-4xl",p=e&&s.color===e.color&&s.value===e.value&&!s.isFakeOkey,v=()=>{if(s.isFakeOkey){const R=l==="xs"?"w-5 h-5":l==="sm"?"w-6 h-6":l==="lg"?"w-10 h-10":"w-8 h-8",j=l==="xs"?"w-2.5 h-2.5":l==="sm"?"w-3 h-3":l==="lg"?"w-5 h-5":"w-4 h-4",z=l==="xs"?"text-[6px]":l==="sm"?"text-[8px]":l==="lg"?"text-sm":"text-[10px]";return y.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[y.jsx("div",{className:`${R} rounded-full border-2 border-emerald-400 flex items-center justify-center bg-gradient-to-br from-emerald-100 to-emerald-200`,children:y.jsx("div",{className:`${j} rounded-full bg-gradient-to-br from-emerald-400 to-emerald-600 shadow-sm animate-pulse`})}),y.jsx("span",{className:`${z} font-black text-emerald-600 tracking-tight uppercase`,children:"JOKER"})]})}return y.jsxs("div",{className:"flex flex-col items-center justify-center leading-none",children:[y.jsx("span",{className:`${m} font-bold ${u(s.color)} tracking-tighter`,children:s.value}),y.jsx("div",{className:`w-2 h-2 rounded-full mt-1 ${s.color==="red"?"bg-red-500":s.color==="blue"?"bg-blue-500":s.color==="yellow"?"bg-yellow-500":"bg-black"} shadow-sm`}),p&&y.jsx("div",{className:"absolute top-1 right-1",children:y.jsx("div",{className:"text-[10px] drop-shadow-sm",children:""})})]})},b=a?{opacity:.95,transform:"scale(1.1) rotate(-2deg)",zIndex:50,willChange:"transform",cursor:"grabbing",boxShadow:"0 8px 20px rgba(0,0,0,0.3)"}:{},w=t||s.isFakeOkey;return y.jsxs("div",{className:`
        relative ${d}
        bg-[#fffdfa]
        rounded-md
        flex items-center justify-center
        select-none
        border border-[#e5e3de]
        ${a?"":"shadow-[0_2px_0_#d1cfca,0_4px_8px_rgba(0,0,0,0.2)] cursor-grab hover:-translate-y-1 transition-transform duration-150"}
        ${w?"ring-2 ring-emerald-400 shadow-[0_0_12px_rgba(16,185,129,0.5)]":""}
        ${i}
      `,style:b,children:[y.jsx("div",{className:"absolute inset-[2px] rounded-[3px] bg-gradient-to-br from-white to-transparent opacity-50 pointer-events-none"}),y.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center w-full h-full pb-0.5",children:v()})]})}),yx=He.memo(({tile:s,isJoker:e,index:t,okeyTile:i})=>{const a=`slot-${t}`,{setNodeRef:l,isOver:u}=hi({id:a}),{attributes:d,listeners:m,setNodeRef:p,isDragging:v}=xa({id:a,disabled:!s});return y.jsxs("div",{ref:l,className:`
                relative w-13 h-17 rounded-lg shadow-inner flex items-center justify-center
                ${u?"bg-green-500/30 ring-4 ring-green-400 scale-110 z-20 shadow-2xl transition-transform duration-150":"bg-black/15 border border-black/10"}
            `,children:[s&&y.jsx("div",{ref:p,...d,...m,className:`relative z-10 touch-none ${v?"opacity-20":""}`,style:{willChange:v?"transform":"auto"},children:y.jsx(cr,{tile:s,okeyTile:i,isJoker:e,dragging:v})}),!s&&!u&&y.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-black/5"})]})}),I3=({tiles:s,isCurrentPlayer:e,okeyTile:t})=>{if(!e){const i=s.filter(a=>a!==null);return y.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[y.jsx("div",{className:"flex justify-center items-center gap-1 bg-[#2a1b0e] p-2 rounded border border-[#3d2a1a] shadow-2xl",children:Array.from({length:Math.min(i.length,11)}).map((a,l)=>y.jsx("div",{className:"w-6 h-8 bg-[#f5f5f5] rounded-sm transform -skew-x-2 border-b-2 border-slate-400 shadow-sm"},l))}),y.jsx("div",{className:"flex justify-center items-center gap-1 bg-[#2a1b0e] p-2 rounded border border-[#3d2a1a] shadow-2xl -mt-1 scale-95 opacity-80",children:Array.from({length:Math.max(0,i.length-11)}).map((a,l)=>y.jsx("div",{className:"w-6 h-8 bg-[#f5f5f5] rounded-sm transform -skew-x-1 border-b-2 border-slate-400 shadow-sm"},l))})]})}return y.jsxs("div",{className:"relative w-full max-w-none mx-auto flex flex-col items-center select-none",children:[y.jsxs("div",{className:"relative w-[85%] bg-[#8d5b3e] rounded-sm shadow-[0_20px_40px_rgba(0,0,0,0.6)] border-b-8 border-[#3d251e] p-4 flex flex-col gap-1",children:[y.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/wood-pattern.png')] opacity-20 pointer-events-none mix-blend-overlay scale-x-150"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-black/30 pointer-events-none"}),y.jsx("div",{className:"relative flex justify-center gap-1 pb-2 min-h-[5.5rem] border-b-4 border-black/20 z-10",children:s.slice(0,15).map((i,a)=>{const l=t&&i&&i.color===t.color&&i.value===t.value;return y.jsx(yx,{index:a,tile:i,okeyTile:t,isJoker:l||!1},a)})}),y.jsx("div",{className:"relative flex justify-center gap-1 pt-2 min-h-[5.5rem] z-10",children:s.slice(15,30).map((i,a)=>{const l=a+15,u=t&&i&&i.color===t.color&&i.value===t.value;return y.jsx(yx,{index:l,tile:i,okeyTile:t,isJoker:u||!1},l)})})]}),y.jsx("div",{className:"mt-4 px-6 py-1 bg-amber-500/20 rounded-full border border-amber-500/30 text-[10px] font-black text-amber-500 uppercase tracking-widest animate-pulse",children:"Talar Srkleyerek Dzenleyebilirsiniz"})]})};function zf(s){if(!s)return!1;const e=s.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const k3=[gt.Down,gt.Right,gt.Up,gt.Left],jE=(s,e)=>{let{context:{active:t,collisionRect:i,droppableRects:a,droppableContainers:l,over:u,scrollableAncestors:d}}=e;if(k3.includes(s.code)){if(s.preventDefault(),!t||!i)return;const m=[];l.getEnabled().forEach(b=>{if(!b||b!=null&&b.disabled)return;const w=a.get(b.id);if(w)switch(s.code){case gt.Down:i.top<w.top&&m.push(b);break;case gt.Up:i.top>w.top&&m.push(b);break;case gt.Left:i.left>w.left&&m.push(b);break;case gt.Right:i.left<w.left&&m.push(b);break}});const p=q4({collisionRect:i,droppableRects:a,droppableContainers:m});let v=nE(p,"id");if(v===u?.id&&p.length>1&&(v=p[1].id),v!=null){const b=l.get(t.id),w=l.get(v),R=w?a.get(w.id):null,j=w?.node.current;if(j&&R&&b&&w){const D=md(j).some((F,C)=>d[C]!==F),M=VE(b,w),$=D3(b,w),B=D||!M?{x:0,y:0}:{x:$?i.width-R.width:0,y:$?i.height-R.height:0},ce={x:R.left,y:R.top};return B.x&&B.y?ce:Wc(ce,B)}}}};function VE(s,e){return!zf(s)||!zf(e)?!1:s.data.current.sortable.containerId===e.data.current.sortable.containerId}function D3(s,e){return!zf(s)||!zf(e)||!VE(s,e)?!1:s.data.current.sortable.index<e.data.current.sortable.index}const Fg=[{name:"Siz",isAI:!1,isYou:!0},{name:"Bot 1",isAI:!0,isYou:!1},{name:"Bot 2",isAI:!0,isYou:!1},{name:"Bot 3",isAI:!0,isYou:!1}],Gh=He.memo(({playerId:s,currentTurn:e,className:t="",isDragging:i=!1,playerInfo:a,tileCount:l=14})=>{const u=e===s;return y.jsx("div",{className:`transition-all duration-300 ${u&&!i?"scale-110":"opacity-90"} ${t}`,children:y.jsxs("div",{className:`
                relative flex items-center min-w-[160px] h-9 px-4 bg-[#ede0d4] rounded-sm border-2 shadow-xl transition-all
                ${u?i?"border-green-500 bg-white shadow-green-500/20":"border-green-500 bg-white ring-8 ring-green-500/20":"border-[#8d5b3e]"}
            `,children:[y.jsx("div",{className:`mr-2 ${u?"text-green-600":"text-[#8d5b3e]"}`,children:a.isAI?y.jsx(Uc,{size:14}):a.isYou?y.jsx(Ji,{size:14,className:"text-amber-600"}):y.jsx(Ji,{size:14})}),y.jsxs("div",{className:`flex-1 font-bold text-xs text-center uppercase tracking-tight ${u?"text-green-700":"text-[#3d251e]"}`,children:[u&&y.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-green-500 mr-2 animate-ping"}),a.name,a.isYou&&!a.isAI&&y.jsx("span",{className:"ml-1 text-[9px] text-amber-600",children:"(Sen)"})]}),!a.isYou&&y.jsxs("div",{className:`absolute -bottom-5 left-1/2 -translate-x-1/2 px-2 py-0.5 rounded text-white text-[9px] font-bold shadow-md flex items-center gap-1 ${u?"bg-green-600":"bg-[#3d251e]"}`,children:[a.isAI&&y.jsx(Uc,{size:10}),"TA: ",l]})]})})}),$h=({playerId:s,position:e,discardPiles:t,currentTurn:i,userTileCount:a,onDrawDiscard:l,isDraggingRackTile:u,mySlot:d=0})=>{const m=s===d&&i===d&&a===15&&u,p=(d+3)%4,v=s===p&&i===d&&a===14,{setNodeRef:b,isOver:w}=hi({id:`discard-${s}`,disabled:!m}),R=t[s][t[s].length-1],{attributes:j,listeners:z,setNodeRef:D,isDragging:M}=xa({id:`pick-discard-${s}`,disabled:!v||!R}),$={top:"absolute top-[22%] left-1/2 -translate-x-1/2",bottom:"absolute bottom-[36%] right-[12%]",left:"absolute left-[12%] top-[35%]",right:"absolute right-[12%] top-[35%]"};return y.jsxs("div",{ref:b,onClick:()=>v&&l(),className:`
                ${$[e]} w-16 h-24 rounded-lg transition-all duration-200 flex items-center justify-center z-20
                ${w?"bg-green-400/30 scale-110 ring-4 ring-green-400 shadow-xl":""}
                ${m&&!w?"bg-green-500/10 ring-2 ring-green-400/50":""}
                ${v?"cursor-grab active:cursor-grabbing hover:ring-2 hover:ring-amber-400 bg-amber-400/10":""}
            `,children:[R?y.jsx("div",{ref:D,...j,...z,className:`rotate-2 shadow-lg transform ${v&&!M?"hover:scale-105":""} ${M?"opacity-20":""}`,children:y.jsx(cr,{tile:R,size:"sm"})}):y.jsx("div",{className:"w-12 h-18 border-2 border-white/10 border-dashed rounded-lg flex items-center justify-center",children:y.jsx("div",{className:"w-2 h-2 rounded-full bg-white/10"})}),m&&y.jsx("div",{className:"absolute -inset-2 border-2 border-dashed border-green-400 rounded-xl animate-pulse pointer-events-none",children:y.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 text-[8px] font-black text-green-400 uppercase tracking-wider whitespace-nowrap bg-black/70 px-2 py-1 rounded",children:"BURAYA AT"})}),v&&R&&!M&&y.jsx("div",{className:"absolute -top-7 left-1/2 -translate-x-1/2 bg-amber-500 text-white text-[8px] font-black px-2 py-1 rounded animate-bounce whitespace-nowrap z-50",children:"EK"})]})},O3=({currentTurn:s,userTileCount:e,centerStackCount:t,onDraw:i,mySlot:a=0})=>{const l=s===a&&e<15,{attributes:u,listeners:d,setNodeRef:m,isDragging:p}=xa({id:"draw-pile",disabled:!l});return y.jsx("div",{className:"relative group",children:y.jsxs("div",{ref:m,...u,...d,onClick:()=>l&&i(),className:`
                    relative w-16 h-20 bg-[#fffdfa] rounded-sm shadow-2xl flex items-center justify-center transition-all
                    ${l?"hover:-translate-y-2 cursor-grab active:cursor-grabbing ring-4 ring-green-500 bg-white":"cursor-wait opacity-60"}
                    ${p?"opacity-20":""}
                `,children:[y.jsx("div",{className:`absolute inset-0 bg-[#e5e3de] border border-[#ccc] rounded-sm transform translate-x-1 translate-y-1 -z-10 shadow-lg ${l?"bg-green-100":""}`}),y.jsx("div",{className:`absolute inset-0 bg-[#d1cfca] border border-[#bbb] rounded-sm transform translate-x-2 translate-y-2 -z-20 shadow-lg ${l?"bg-green-200":""}`}),y.jsx("div",{className:"text-[#3d251e] font-bold text-2xl",children:t}),l&&!p&&y.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-green-500 text-white text-[10px] font-black px-3 py-1 rounded-full animate-bounce shadow-lg whitespace-nowrap flex items-center gap-1 z-50",children:"TA EK"})]})})},M3=He.memo(({isDraggingRackTile:s,canFinish:e})=>{const{setNodeRef:t,isOver:i}=hi({id:"finish-zone",disabled:!e});return y.jsx("div",{ref:t,className:`
                absolute -inset-4 rounded-2xl transition-all duration-300 pointer-events-none
                ${e&&s?"border-4 border-dashed border-amber-400 animate-[pulse_1.5s_infinite] bg-amber-400/10":""}
                ${i?"bg-amber-400/30 scale-110":""}
            `})}),j3=He.memo(({gameState:s,onDraw:e,onDrawDiscard:t,onMoveTile:i,onDiscard:a,onAutoSort:l,onFinish:u,onReset:d,onReshuffle:m,onEndTie:p,onExit:v,playerInfo:b=Fg,mySlot:w=0})=>{const[R,j]=V.useState(null),z=dd(ni(pu,{activationConstraint:{distance:3}}),ni(gd,{coordinateGetter:jE})),D=V.useCallback(C=>j(C.active.id),[]),M=V.useCallback(C=>{j(null);const{active:S,over:N}=C;if(!N)return;const E=S.id,A=N.id;A===`discard-${w}`&&E.startsWith("slot-")?a(parseInt(E.split("-")[1])):A==="finish-zone"&&E.startsWith("slot-")?u(parseInt(E.split("-")[1])):E==="draw-pile"&&A.startsWith("slot-")?e(parseInt(A.split("-")[1])):E.startsWith("pick-discard-")&&A.startsWith("slot-")?t(parseInt(A.split("-")[1])):E!==A&&E.startsWith("slot-")&&A.startsWith("slot-")&&i(parseInt(E.split("-")[1]),parseInt(A.split("-")[1]))},[w,a,u,e,t,i]);if(!s)return y.jsx("div",{className:"text-white text-center p-10 font-bold",children:"YKLENYOR..."});const $=()=>{if(!R)return null;if(R==="draw-pile")return y.jsx("div",{className:"w-16 h-20 bg-white rounded shadow-2xl opacity-80"});if(R.startsWith("pick-discard-")){const C=(w+3)%4,S=s.discardPiles[C][s.discardPiles[C].length-1];return S?y.jsx(cr,{tile:S,size:"sm",okeyTile:s.okeyTile}):null}if(R.startsWith("slot-")){const C=s.players[w].tiles[parseInt(R.split("-")[1])];return C?y.jsx(cr,{tile:C,okeyTile:s.okeyTile}):null}return null},B=C=>s.players[C].tiles.filter(S=>S!==null).length,ce=C=>(C+w)%4,X=B(w),F=C=>{const S=ce(C);return b[S]||Fg[S]};return y.jsx(vd,{sensors:z,collisionDetection:sE,onDragStart:D,onDragEnd:M,children:y.jsxs("div",{className:"relative w-full aspect-[16/10] bg-[#357a38] overflow-hidden mx-auto font-sans shadow-2xl rounded-lg border-x-[12px] border-y-[6px] border-[#3d251e]",children:[y.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/dark-matter.png')] opacity-30 pointer-events-none"}),y.jsx(Gh,{playerId:ce(2),currentTurn:s.currentTurn,isDragging:!!R,className:"absolute top-4 left-1/2 -translate-x-1/2 z-30",playerInfo:F(2),tileCount:B(ce(2))}),y.jsx(Gh,{playerId:ce(3),currentTurn:s.currentTurn,isDragging:!!R,className:"absolute left-4 top-1/2 -translate-y-1/2 -rotate-90 origin-center z-30",playerInfo:F(3),tileCount:B(ce(3))}),y.jsx(Gh,{playerId:ce(1),currentTurn:s.currentTurn,isDragging:!!R,className:"absolute right-4 top-1/2 -translate-y-1/2 rotate-90 origin-center z-30",playerInfo:F(1),tileCount:B(ce(1))}),y.jsx($h,{playerId:ce(2),position:"top",...s,userTileCount:X,onDrawDiscard:t,isDraggingRackTile:R?.startsWith("slot-"),mySlot:w}),y.jsx($h,{playerId:ce(3),position:"left",...s,userTileCount:X,onDrawDiscard:t,isDraggingRackTile:R?.startsWith("slot-"),mySlot:w}),y.jsx($h,{playerId:ce(1),position:"right",...s,userTileCount:X,onDrawDiscard:t,isDraggingRackTile:R?.startsWith("slot-"),mySlot:w}),y.jsx($h,{playerId:w,position:"bottom",...s,userTileCount:X,onDrawDiscard:t,isDraggingRackTile:R?.startsWith("slot-"),mySlot:w}),y.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center gap-12",children:[y.jsxs("div",{className:"relative",children:[y.jsx(cr,{tile:s.indicatorTile,size:"md",okeyTile:s.okeyTile}),y.jsx(M3,{isDraggingRackTile:R?.startsWith("slot-")||!1,canFinish:s.currentTurn===w&&X===15})]}),y.jsx(O3,{...s,userTileCount:X,centerStackCount:s.centerStack.length,onDraw:e,mySlot:w})]}),y.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-40 p-2 flex flex-col items-center gap-3",children:[y.jsxs("div",{className:"flex items-center gap-6",children:[y.jsx(Gh,{playerId:w,currentTurn:s.currentTurn,isDragging:!!R,playerInfo:b[w]||Fg[0]}),y.jsx("button",{onClick:l,className:"px-8 py-2 bg-[#ede0d4] text-[#3d251e] border-2 border-[#8d5b3e] rounded shadow-lg text-[11px] font-black uppercase tracking-widest transition-all hover:scale-105 active:scale-95",children:"Dzenle"})]}),y.jsx(I3,{tiles:s.players[w].tiles,playerId:w,isCurrentPlayer:!0,okeyTile:s.okeyTile})]}),s.phase==="roundOver"&&y.jsxs("div",{className:"absolute inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-500",children:[s.winner===w&&y.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(30)].map((C,S)=>y.jsx("div",{className:"absolute w-3 h-3 rounded-sm animate-bounce",style:{left:`${Math.random()*100}%`,top:`-${Math.random()*20}%`,backgroundColor:["#ffd700","#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#ffeaa7"][S%6],animationDelay:`${Math.random()*2}s`,animationDuration:`${2+Math.random()*2}s`,transform:`rotate(${Math.random()*360}deg)`}},S))}),y.jsxs("div",{className:`
                            relative p-10 rounded-3xl shadow-2xl flex flex-col items-center gap-6 
                            transform transition-all duration-500 animate-in zoom-in-95
                            ${s.winner===null?"bg-gradient-to-br from-slate-100 to-slate-200 border-4 border-slate-400":s.winner===w?"bg-gradient-to-br from-amber-100 via-yellow-100 to-amber-200 border-4 border-amber-400 ring-8 ring-amber-300/50":"bg-gradient-to-br from-slate-100 to-red-100 border-4 border-red-300"}
                        `,children:[y.jsx("div",{className:`text-7xl ${s.winner===w?"animate-bounce":""}`,children:s.winner===null?"":s.winner===w?"":""}),y.jsx("h2",{className:`text-4xl font-black uppercase tracking-tight ${s.winner===null?"text-slate-700":s.winner===w?"text-amber-600":"text-slate-700"}`,children:s.winner===null?"BERABERE!":s.winner===w?"KAZANDINIZ!":"KAYBETTNZ"}),y.jsx("p",{className:"text-lg font-bold text-slate-600 text-center max-w-xs",children:s.winner===null?"Kimse kazanamad. Talar tkendi!":s.winner===w?"Tebrikler! Harika bir oyun oynadnz! ":`${b[s.winner]?.name||`Player ${s.winner+1}`} oyunu kazand.`}),y.jsxs("div",{className:"flex gap-4 mt-4",children:[y.jsx("button",{onClick:d,className:"px-10 py-4 bg-gradient-to-br from-emerald-500 to-emerald-600 hover:from-emerald-400 hover:to-emerald-500 text-white font-black rounded-xl shadow-lg transition-all hover:scale-105 active:scale-95 uppercase tracking-wide",children:" Tekrar Oyna"}),y.jsx("button",{onClick:v,className:"px-10 py-4 bg-gradient-to-br from-slate-600 to-slate-700 hover:from-slate-500 hover:to-slate-600 text-white font-black rounded-xl shadow-lg transition-all hover:scale-105 active:scale-95 uppercase tracking-wide",children:" k"})]})]})]}),s.phase==="stackEmpty"&&y.jsx("div",{className:"absolute inset-0 z-[110] flex items-center justify-center bg-black/70 backdrop-blur-md fade-in",children:y.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 p-8 rounded-2xl shadow-2xl border-4 border-amber-500 max-w-md text-center flex flex-col gap-6",children:[y.jsx("div",{className:"text-5xl",children:""}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-2xl font-black text-amber-900 uppercase",children:"ORTADA TA BTT!"}),y.jsx("p",{className:"text-amber-800 font-medium mt-2",children:"Iskartadaki talar kartrp devam m edelim, yoksa oyunu bitirelim mi?"})]}),y.jsxs("div",{className:"flex flex-col gap-3",children:[y.jsx("button",{onClick:m,className:"w-full py-4 bg-amber-600 hover:bg-amber-500 text-white font-black uppercase tracking-widest rounded-xl shadow-lg transition-all hover:scale-105 active:scale-95",children:"Talar Kartr (Devam Et)"}),y.jsx("button",{onClick:p,className:"w-full py-4 bg-slate-700 hover:bg-slate-600 text-white font-black uppercase tracking-widest rounded-xl shadow-lg transition-all hover:scale-105 active:scale-95",children:"Oyunu Bitir (Berabere)"})]})]})}),y.jsx(k0,{dropAnimation:null,style:{cursor:"grabbing",touchAction:"none"},modifiers:[],children:y.jsx("div",{style:{willChange:"transform",transform:"translateZ(0)",pointerEvents:"none",filter:"drop-shadow(0 8px 16px rgba(0,0,0,0.25))"},children:$()})})]})})}),V3=({roomId:s,mode:e,aiDifficulty:t,onExit:i})=>{const a=N3(s),l=V.useMemo(()=>a.gameState,[a.gameState]),u=V.useCallback(z=>{a.drawFromCenter(z)},[a]),d=V.useCallback(z=>{a.drawFromDiscard(z)},[a]),m=V.useCallback((z,D)=>{a.moveTileInRack(z,D)},[a]),p=V.useCallback(z=>{a.discardTile(z)},[a]),v=V.useCallback(z=>{a.finishGame(z)},[a]),b=V.useCallback(()=>{a.resetGame()},[a]),w=V.useCallback(()=>{a.reshuffleDiscards()},[a]),R=V.useCallback(()=>{a.endInTie()},[a]),j=V.useCallback(()=>{a.autoSortTiles()},[a]);return y.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[85vh] fade-in animate-in duration-700",children:[y.jsx("div",{className:"w-full max-w-6xl mb-6 flex justify-between items-center text-white px-4",children:y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:i,className:"p-3 bg-slate-800/80 hover:bg-red-500/20 text-slate-400 hover:text-red-400 rounded-xl transition-all border border-slate-700 hover:border-red-500/50",title:"Leave Game",children:y.jsx(KA,{size:20})}),y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-black tracking-tight",children:"Okey Arena"}),y.jsxs("div",{className:"text-xs font-medium text-emerald-400 flex items-center gap-2",children:[y.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),e==="online"?`Room: ${s}`:`Local  ${t} AI`]})]})]})}),y.jsx(j3,{gameState:l,onDraw:u,onDrawDiscard:d,onMoveTile:m,onDiscard:p,onAutoSort:j,onFinish:v,onReset:b,onReshuffle:w,onEndTie:R,onExit:i,playerInfo:void 0,mySlot:0}),y.jsxs("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10 flex flex-col items-center gap-1",children:[y.jsx("span",{children:"Transparent Strategy Arena"}),y.jsx("span",{className:"text-slate-700 text-[8px]",children:"v0.1.0"})]})]})},Kh=[{name:"Siz",isAI:!1,isYou:!0},{name:"Bot 1",isAI:!0,isYou:!1},{name:"Bot 2",isAI:!0,isYou:!1},{name:"Bot 3",isAI:!0,isYou:!1}],vx=[{bg:"bg-emerald-500",ring:"ring-emerald-400"},{bg:"bg-amber-500",ring:"ring-amber-400"},{bg:"bg-rose-500",ring:"ring-rose-400"},{bg:"bg-purple-500",ring:"ring-purple-400"}],Gg=He.memo(({playerInfo:s,isCurrentTurn:e,tileCount:t,colorIndex:i,position:a})=>{const l=vx[i%vx.length],u={top:"flex-col",left:"flex-col",right:"flex-col"};return y.jsxs("div",{className:`flex ${u[a]} items-center gap-2`,children:[y.jsxs("div",{className:`
                relative w-14 h-14 rounded-full ${l.bg} 
                flex items-center justify-center shadow-xl
                ${e?`ring-4 ${l.ring} ring-offset-2 ring-offset-[#2d5a3d]`:""}
                transition-all duration-300
            `,children:[s.isAI?y.jsx(Uc,{size:28,className:"text-white"}):y.jsx(Ji,{size:28,className:"text-white"}),y.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 rounded-full bg-[#1a3625] text-white text-[10px] font-bold flex items-center justify-center border-2 border-[#2d5a3d]",children:t})]}),y.jsxs("div",{className:`
                px-3 py-1 rounded-lg shadow-lg
                ${e?"bg-emerald-600 ring-2 ring-emerald-400":"bg-[#1a3625]/90"}
                transition-all duration-300
            `,children:[y.jsx("span",{className:"text-white font-bold text-xs",children:s.name}),e&&y.jsxs("div",{className:"flex justify-center gap-1 mt-0.5",children:[y.jsx("span",{className:"w-1 h-1 rounded-full bg-amber-400 animate-pulse"}),y.jsx("span",{className:"w-1 h-1 rounded-full bg-amber-400 animate-pulse",style:{animationDelay:"0.2s"}}),y.jsx("span",{className:"w-1 h-1 rounded-full bg-amber-400 animate-pulse",style:{animationDelay:"0.4s"}})]})]})]})}),Yh=He.memo(({playerId:s,discardPile:e,currentTurn:t,userTileCount:i,mySlot:a,isDraggingRackTile:l,onDrawDiscard:u,position:d})=>{const m=s===a&&t===a&&i===15&&l,p=(a+3)%4,v=s===p&&t===a&&i===14&&e.length>0,{setNodeRef:b,isOver:w}=hi({id:`discard-${s}`}),{attributes:R,listeners:j,setNodeRef:z,isDragging:D}=xa({id:`pick-discard-${s}`,disabled:!v||e.length===0}),M=e.length>0?e[e.length-1]:null,$={top:"w-16 h-24",bottom:"w-16 h-24",left:"w-16 h-24",right:"w-16 h-24"},B=w&&s===a&&l;return y.jsxs("div",{ref:b,onClick:()=>v&&u(),className:`
                ${$[d]} rounded-lg transition-all duration-200 flex items-center justify-center relative
                ${B?"bg-amber-400/30 scale-110 ring-4 ring-amber-400 shadow-xl":"bg-[#1a3625]/50"}
                ${m&&!B?"bg-amber-500/10 ring-2 ring-amber-400/50":""}
                ${v?"cursor-grab active:cursor-grabbing hover:ring-2 hover:ring-amber-400 bg-amber-400/10":""}
                border-2 ${m||v?"border-amber-400/50":"border-[#4a7c59]/30"}
            `,children:[M?y.jsx("div",{ref:z,...R,...j,className:`rotate-2 shadow-lg transform ${v&&!D?"hover:scale-105":""} ${D?"opacity-20":""}`,children:y.jsx(cr,{tile:M,okeyTile:null,size:"sm"})}):y.jsx("div",{className:"w-12 h-16 border-2 border-white/10 border-dashed rounded-lg flex items-center justify-center",children:y.jsx("div",{className:"w-2 h-2 rounded-full bg-white/10"})}),m&&y.jsx("div",{className:"absolute -inset-1 border-2 border-dashed border-amber-400 rounded-xl animate-pulse pointer-events-none",children:y.jsx("div",{className:"absolute -top-5 left-1/2 -translate-x-1/2 text-[8px] font-black text-amber-400 uppercase tracking-wider whitespace-nowrap bg-[#1a3625] px-2 py-0.5 rounded",children:"BURAYA AT"})}),v&&M&&!D&&y.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 bg-amber-500 text-white text-[8px] font-black px-2 py-1 rounded animate-bounce whitespace-nowrap z-50",children:"EK"}),e.length>1&&y.jsx("div",{className:"absolute -bottom-2 -right-2 w-5 h-5 rounded-full bg-[#2a4a3a] text-white text-[9px] font-bold flex items-center justify-center shadow",children:e.length})]})}),_x=He.memo(({tile:s,index:e,isSelected:t,onTileClick:i})=>{const a=`rack-${e}`,{setNodeRef:l,isOver:u}=hi({id:a}),{attributes:d,listeners:m,setNodeRef:p,isDragging:v}=xa({id:a,disabled:!s}),b=s?.isFakeOkey;return y.jsx("div",{ref:l,onClick:s?i:void 0,className:`
                relative w-[52px] h-[70px] flex items-center justify-center cursor-pointer
                ${u?"scale-110 z-10":""}
                ${t?"ring-2 ring-amber-400 rounded-lg bg-amber-400/20":""}
                ${b&&!t?"ring-2 ring-emerald-400 rounded-lg":""}
                transition-all duration-150
            `,children:s?y.jsx("div",{ref:p,...d,...m,className:`w-full h-full ${v?"opacity-30":""} ${t?"scale-105":""}`,children:y.jsx(cr,{tile:s,okeyTile:null,size:"md",isJoker:b})}):y.jsx("div",{className:"w-full h-full bg-[#5a3825]/20 rounded-lg border border-[#8d5b3e]/10"})})}),P3=He.memo(({tiles:s,selectedIndices:e,onTileClick:t})=>{const i=s.slice(0,15),a=s.slice(15,30);return y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#c9a66b] via-[#b8915a] to-[#8b6914] rounded-lg shadow-2xl"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/10 via-transparent to-black/10 rounded-lg"}),y.jsx("div",{className:"absolute top-0 left-0 right-0 h-3 bg-gradient-to-b from-[#dbb978] to-[#c9a66b] rounded-t-lg border-b border-[#a07830]"}),y.jsxs("div",{className:"relative pt-4 pb-3 px-3",children:[y.jsx("div",{className:"flex gap-0.5 justify-center mb-1",children:i.map((l,u)=>y.jsx(_x,{tile:l,index:u,isSelected:e.includes(u),onTileClick:()=>t(u)},u))}),y.jsx("div",{className:"w-full h-1 bg-gradient-to-r from-transparent via-[#8b6914] to-transparent mb-1"}),y.jsx("div",{className:"flex gap-0.5 justify-center",children:a.map((l,u)=>y.jsx(_x,{tile:l,index:u+15,isSelected:e.includes(u+15),onTileClick:()=>t(u+15)},u+15))})]}),y.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-3 bg-gradient-to-t from-[#6b4c10] to-[#8b6914] rounded-b-lg border-t border-[#a07830]"})]})}),L3=He.memo(({melds:s,playerInfo:e,mySlot:t,isDraggingRackTile:i,playerHasLaidDown:a,getActualSlot:l})=>{const u=m=>s.filter(p=>p.ownerPlayer===m),d=[{pos:"bottom-left",label:e[t]?.name||"Siz"},{pos:"bottom-right",label:e[l(1)]?.name||"Bot 1"},{pos:"top-left",label:e[l(3)]?.name||"Bot 3"},{pos:"top-right",label:e[l(2)]?.name||"Bot 2"}];return y.jsxs("div",{className:"relative w-full h-full border-2 border-[#4a7c59] rounded-lg overflow-hidden",children:[y.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:"linear-gradient(#4a7c59 1px, transparent 1px), linear-gradient(90deg, #4a7c59 1px, transparent 1px)",backgroundSize:"25px 25px"}}),y.jsxs("div",{className:"absolute inset-0 grid grid-cols-2 grid-rows-2",children:[y.jsx("div",{className:"border-r border-b border-[#4a7c59]/50 p-2 relative",children:y.jsx("div",{className:"flex flex-wrap gap-1 content-start",children:u(l(3)).map(m=>y.jsx(Qh,{meld:m,isDraggingRackTile:i,playerHasLaidDown:a},m.id))})}),y.jsx("div",{className:"border-b border-[#4a7c59]/50 p-2 relative",children:y.jsx("div",{className:"flex flex-wrap gap-1 content-start",children:u(l(2)).map(m=>y.jsx(Qh,{meld:m,isDraggingRackTile:i,playerHasLaidDown:a},m.id))})}),y.jsx("div",{className:"border-r border-[#4a7c59]/50 p-2 relative",children:y.jsx("div",{className:"flex flex-wrap gap-1 content-start",children:u(t).map(m=>y.jsx(Qh,{meld:m,isDraggingRackTile:i,playerHasLaidDown:a},m.id))})}),y.jsx("div",{className:"p-2 relative",children:y.jsx("div",{className:"flex flex-wrap gap-1 content-start",children:u(l(1)).map(m=>y.jsx(Qh,{meld:m,isDraggingRackTile:i,playerHasLaidDown:a},m.id))})})]}),y.jsxs("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 flex",children:[y.jsx("div",{className:"px-3 py-1 bg-[#c5d5c5] text-[#2a4a3a] font-bold text-xs border-r border-[#4a7c59]/50",children:d[0].label}),y.jsx("div",{className:"px-3 py-1 bg-[#c5d5c5] text-[#2a4a3a] font-bold text-xs",children:d[1].label})]}),y.jsxs("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 flex",children:[y.jsx("div",{className:"px-3 py-1 bg-[#c5d5c5] text-[#2a4a3a] font-bold text-xs border-r border-[#4a7c59]/50",children:d[2].label}),y.jsx("div",{className:"px-3 py-1 bg-[#c5d5c5] text-[#2a4a3a] font-bold text-xs",children:d[3].label})]})]})}),Qh=He.memo(({meld:s,isDraggingRackTile:e,playerHasLaidDown:t})=>{const{setNodeRef:i,isOver:a}=hi({id:`meld-${s.id}`,data:{type:"meld",meldId:s.id},disabled:!t});return y.jsx("div",{ref:i,className:`
                flex gap-0.5 p-1 rounded transition-all
                ${a&&e?"bg-amber-400/30 scale-105":""}
                ${e&&t?"ring-1 ring-amber-400/30":""}
            `,children:s.tiles.map((l,u)=>y.jsx("div",{className:"w-7 h-10",children:y.jsx(cr,{tile:l,okeyTile:null,size:"xs",isJoker:l.isFakeOkey})},`${s.id}-${u}`))})}),U3=He.memo(({players:s,currentTurn:e})=>{const t=[...s].map((i,a)=>({...i,originalIndex:a})).sort((i,a)=>i.score-a.score);return y.jsxs("div",{className:"bg-[#1a3625] rounded-lg border-2 border-[#4a7c59] overflow-hidden w-[130px]",children:[y.jsx("div",{className:"bg-[#4a7c59] px-2 py-1 text-center",children:y.jsx("span",{className:"text-white font-black text-[10px] tracking-wider",children:"SKOR"})}),y.jsx("div",{className:"bg-red-600/20 px-2 py-0.5 text-center border-b border-[#4a7c59]/50",children:y.jsx("span",{className:"text-red-400 text-[9px] font-bold",children:"101 = Kaybet!"})}),y.jsx("div",{className:"divide-y divide-[#4a7c59]/30",children:t.map((i,a)=>y.jsxs("div",{className:`
                            flex items-center justify-between px-2 py-1 transition-all
                            ${e===i.originalIndex?"bg-amber-500/20":""}
                            ${a===0?"bg-emerald-500/10":""}
                        `,children:[y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{className:`w-4 h-4 rounded-full flex items-center justify-center text-[9px] font-bold ${a===0?"bg-amber-400 text-black":"bg-[#2d5a3d] text-white"}`,children:a+1}),y.jsx("span",{className:`text-[10px] font-bold ${i.isYou?"text-amber-400":"text-white"}`,children:i.name.length>6?i.name.substring(0,6)+"..":i.name})]}),y.jsx("div",{className:`px-1.5 py-0.5 rounded text-[10px] font-black ${i.score>=80?"bg-red-600 text-white animate-pulse":i.score>=50?"bg-amber-500 text-white":"bg-emerald-600 text-white"}`,children:i.score})]},i.originalIndex))})]})}),z3=He.memo(({count:s,currentTurn:e,userTileCount:t,mySlot:i,onDraw:a})=>{const l=e===i&&t<15,{attributes:u,listeners:d,setNodeRef:m,isDragging:p}=xa({id:"draw-pile",disabled:!l});return y.jsxs("div",{ref:m,...u,...d,onClick:()=>l&&a(),className:`
                relative w-16 h-24 bg-white rounded-lg shadow-xl flex items-center justify-center transition-all cursor-pointer
                ${l?"hover:scale-105 ring-4 ring-amber-400":"opacity-70"}
                ${p?"opacity-30":""}
            `,children:[y.jsx("div",{className:"absolute inset-0 bg-gray-100 rounded-lg transform translate-x-1 translate-y-1 -z-10"}),y.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded-lg transform translate-x-2 translate-y-2 -z-20"}),y.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 rounded-full bg-[#2a4a3a] text-white text-[10px] font-bold flex items-center justify-center",children:s}),l&&!p&&y.jsx("div",{className:"absolute -bottom-6 left-1/2 -translate-x-1/2 bg-amber-500 text-white text-[8px] font-black px-2 py-0.5 rounded animate-bounce whitespace-nowrap",children:"TA EK"})]})}),bx=({score:s})=>y.jsx("div",{className:`
        px-4 py-2 rounded-lg font-black text-xl text-white shadow-lg
        ${s>=80?"bg-red-600":s>=50?"bg-amber-500":"bg-emerald-600"}
    `,children:s}),B3=He.memo(({gameState:s,selectedTileIndices:e,onToggleSelection:t,onClearSelection:i,onDraw:a,onDrawDiscard:l,onMoveTile:u,onDiscard:d,onLayDownMeld:m,onAddToMeld:p,onSortByRuns:v,onSortByPairs:b,onSelectRuns:w,onSelectSets:R,onReset:j,onNewRound:z,onExit:D,playerInfo:M=Kh,mySlot:$=0})=>{const[B,ce]=V.useState(null),X=dd(ni(pu,{activationConstraint:{distance:3}}),ni(gd,{coordinateGetter:jE})),F=V.useCallback(Y=>{ce(Y.active.id)},[]),C=V.useCallback(Y=>{const{active:J,over:pe}=Y;if(ce(null),!pe)return;const ve=J.id,L=pe.id;if(L.startsWith("discard-")&&ve.startsWith("rack-")){parseInt(L.replace("discard-",""))===$&&d(parseInt(ve.split("-")[1]));return}if(ve==="draw-pile"&&L.startsWith("rack-")){a(parseInt(L.split("-")[1]));return}if(ve.startsWith("pick-discard-")&&L.startsWith("rack-")){l(parseInt(L.split("-")[1]));return}if(ve.startsWith("rack-")&&L.startsWith("meld-")){p(parseInt(ve.split("-")[1]),L.replace("meld-",""));return}if(ve!==L&&ve.startsWith("rack-")&&L.startsWith("rack-")){u(parseInt(ve.split("-")[1]),parseInt(L.split("-")[1]));return}},[$,d,a,l,p,u]);if(!s)return y.jsx("div",{className:"text-white text-center p-10 font-bold",children:"YKLENYOR..."});const S=s.players[$]?.tiles||[],N=S.filter(Y=>Y!==null).length,E=s.players[$],A=Object.values(s.tableMelds||{}),P=B?.startsWith("rack-")||!1,O=Y=>s.players[Y]?.tiles.filter(J=>J!==null).length||0,be=Y=>(Y+$)%4,_e=()=>{if(!B)return null;if(B==="draw-pile")return y.jsx("div",{className:"w-14 h-18 bg-white rounded shadow-2xl opacity-80"});if(B.startsWith("pick-discard-")){const Y=parseInt(B.replace("pick-discard-","")),J=s.discardPiles[Y],pe=J&&J.length>0?J[J.length-1]:null;return pe?y.jsx(cr,{tile:pe,size:"sm",okeyTile:null}):null}if(B.startsWith("rack-")){const Y=S[parseInt(B.split("-")[1])];return Y?y.jsx(cr,{tile:Y,okeyTile:null,size:"md",isJoker:Y.isFakeOkey}):null}return null};if(s.phase==="roundOver"||s.phase==="gameOver"){const Y=s.roundWinner!==null?M[s.roundWinner]:null,J=s.phase==="gameOver";return y.jsxs("div",{className:"relative w-full min-h-[600px] bg-[#2d5a3d] flex flex-col items-center justify-center gap-6 rounded-xl p-8",children:[s.roundWinner===$&&y.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(30)].map((pe,ve)=>y.jsx("div",{className:"absolute w-3 h-3 rounded-sm animate-bounce",style:{left:`${Math.random()*100}%`,top:`-${Math.random()*20}%`,backgroundColor:["#ffd700","#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#ffeaa7"][ve%6],animationDelay:`${Math.random()*2}s`,animationDuration:`${2+Math.random()*2}s`}},ve))}),y.jsx("div",{className:"text-6xl",children:J?"":""}),y.jsx("h2",{className:"text-3xl font-bold text-white",children:J?"OYUN BTT!":"EL BTT!"}),Y&&y.jsxs("p",{className:"text-xl text-amber-400",children:[J?"Kazanan":"Bu eli kazanan",": ",Y.name]}),y.jsx("div",{className:"flex gap-4",children:s.players.map((pe,ve)=>y.jsxs("div",{className:"flex flex-col items-center gap-2",children:[y.jsx("span",{className:"text-white font-bold",children:M[ve]?.name}),y.jsx(bx,{score:pe.score})]},ve))}),y.jsxs("div",{className:"flex gap-4 mt-4",children:[!J&&y.jsx("button",{onClick:z,className:"px-6 py-3 bg-emerald-600 hover:bg-emerald-700 text-white font-bold rounded-lg transition-all shadow-lg",children:"Yeni El"}),y.jsx("button",{onClick:j,className:"px-6 py-3 bg-amber-600 hover:bg-amber-700 text-white font-bold rounded-lg transition-all shadow-lg",children:"Yeni Oyun"}),y.jsx("button",{onClick:D,className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white font-bold rounded-lg transition-all shadow-lg",children:"k"})]})]})}const H=M.map((Y,J)=>({...Y,score:s.players[J]?.score||0}));return y.jsx(vd,{sensors:X,collisionDetection:sE,onDragStart:F,onDragEnd:C,children:y.jsxs("div",{className:"relative w-full bg-[#2d5a3d] rounded-xl overflow-hidden",children:[y.jsxs("div",{className:"relative flex",children:[y.jsxs("div",{className:"w-28 flex flex-col items-center justify-center gap-3 py-6",children:[y.jsx(Gg,{playerInfo:M[be(3)]||Kh[3],isCurrentTurn:s.currentTurn===be(3),tileCount:O(be(3)),colorIndex:be(3),position:"left"}),y.jsx(Yh,{playerId:be(3),discardPile:s.discardPiles[be(3)]||[],currentTurn:s.currentTurn,userTileCount:N,mySlot:$,isDraggingRackTile:P,onDrawDiscard:l,position:"left"})]}),y.jsxs("div",{className:"flex-1 flex flex-col",children:[y.jsxs("div",{className:"flex justify-center items-center gap-6 py-3",children:[y.jsx(Gg,{playerInfo:M[be(2)]||Kh[2],isCurrentTurn:s.currentTurn===be(2),tileCount:O(be(2)),colorIndex:be(2),position:"top"}),y.jsx(Yh,{playerId:be(2),discardPile:s.discardPiles[be(2)]||[],currentTurn:s.currentTurn,userTileCount:N,mySlot:$,isDraggingRackTile:P,onDrawDiscard:l,position:"top"})]}),y.jsx("div",{className:"flex-1 px-4",children:y.jsx("div",{className:"h-[240px]",children:y.jsx(L3,{melds:A,playerInfo:M,mySlot:$,isDraggingRackTile:P,playerHasLaidDown:E?.hasLaidDown||!1,getActualSlot:be})})})]}),y.jsxs("div",{className:"w-28 flex flex-col items-center justify-center gap-3 py-6",children:[y.jsx(Gg,{playerInfo:M[be(1)]||Kh[1],isCurrentTurn:s.currentTurn===be(1),tileCount:O(be(1)),colorIndex:be(1),position:"right"}),y.jsx(Yh,{playerId:be(1),discardPile:s.discardPiles[be(1)]||[],currentTurn:s.currentTurn,userTileCount:N,mySlot:$,isDraggingRackTile:P,onDrawDiscard:l,position:"right"})]}),y.jsxs("div",{className:"w-[150px] flex flex-col items-center justify-center gap-3 p-3 bg-[#1a3625]/30",children:[y.jsx(z3,{count:s.centerStack.length,currentTurn:s.currentTurn,userTileCount:N,mySlot:$,onDraw:()=>a()}),y.jsx(U3,{players:H,currentTurn:s.currentTurn})]})]}),y.jsxs("div",{className:"p-4 flex flex-col items-center gap-3",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx(Yh,{playerId:$,discardPile:s.discardPiles[$]||[],currentTurn:s.currentTurn,userTileCount:N,mySlot:$,isDraggingRackTile:P,onDrawDiscard:l,position:"bottom"}),y.jsxs("div",{className:"flex items-center gap-1 bg-[#1a3625]/50 rounded-lg p-1 border border-[#4a7c59]/50",children:[y.jsx("button",{onClick:v,className:"px-3 py-1.5 bg-blue-600 text-white rounded-md shadow text-xs font-bold uppercase tracking-wider transition-all hover:bg-blue-700 hover:scale-105 active:scale-95",title:"Serilere gre diz (ayn renk, ardk saylar)",children:"Seri"}),y.jsx("button",{onClick:b,className:"px-3 py-1.5 bg-purple-600 text-white rounded-md shadow text-xs font-bold uppercase tracking-wider transition-all hover:bg-purple-700 hover:scale-105 active:scale-95",title:"iftlere gre diz (ayn renk, ayn say gerek iftler)",children:"ift"})]}),y.jsxs("div",{className:"flex items-center gap-1 bg-[#1a3625]/50 rounded-lg p-1 border border-[#4a7c59]/50",children:[y.jsx("button",{onClick:w,className:"px-3 py-1.5 bg-amber-600 text-white rounded-md shadow text-xs font-bold uppercase tracking-wider transition-all hover:bg-amber-700 hover:scale-105 active:scale-95",title:"Tm serileri se",children:"Seri A"}),y.jsx("button",{onClick:R,className:"px-3 py-1.5 bg-rose-600 text-white rounded-md shadow text-xs font-bold uppercase tracking-wider transition-all hover:bg-rose-700 hover:scale-105 active:scale-95",title:"Tm iftleri se",children:"ift A"})]}),e.length>=3&&y.jsxs("button",{onClick:m,className:"px-5 py-2 bg-emerald-600 text-white border-2 border-emerald-400 rounded-lg shadow-lg text-sm font-bold uppercase tracking-wider transition-all hover:bg-emerald-700 hover:scale-105 active:scale-95 animate-pulse",children:["NDR (",e.length,")"]}),e.length>0&&y.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-600 text-white border-2 border-gray-500 rounded-lg shadow-lg text-sm font-bold uppercase tracking-wider transition-all hover:bg-gray-700 hover:scale-105 active:scale-95",children:"Temizle"}),y.jsx("button",{onClick:D,className:"px-4 py-2 bg-red-600/80 text-white border-2 border-red-500 rounded-lg shadow-lg text-sm font-bold uppercase tracking-wider transition-all hover:bg-red-700 hover:scale-105 active:scale-95",children:"k"}),y.jsx(bx,{score:E?.score||0})]}),y.jsx(P3,{tiles:S,selectedIndices:e,onTileClick:Y=>{s.currentTurn===$&&t(Y)}}),y.jsx("div",{className:"text-amber-400/90 text-sm font-bold",children:s.currentTurn===$?N===14?"Desteden veya soldaki oyuncunun skartasndan ekin":N===15?e.length>=3?"NDR butonuna basn veya ta semeye devam edin":"Per iin ta sein veya kendi skartanza ta atn":"Oyun devam ediyor":`${M[s.currentTurn]?.name||"Rakip"} oynuyor...`})]}),y.jsx("div",{className:"absolute top-2 left-2 bg-[#1a3625]/90 px-3 py-1 rounded border border-[#4a7c59]",children:y.jsxs("span",{className:"text-amber-400 font-bold text-sm",children:["El: ",s.roundNumber]})}),s.okeyTile&&y.jsxs("div",{className:"absolute top-2 right-[160px] bg-emerald-600/90 px-3 py-1 rounded border border-emerald-400 flex items-center gap-2",children:[y.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-400 animate-pulse"}),y.jsx("span",{className:"text-white font-bold text-xs",children:"OKEY"}),y.jsx("div",{className:"w-8 h-11",children:y.jsx(cr,{tile:s.okeyTile,okeyTile:s.okeyTile,size:"xs"})})]}),y.jsx(k0,{dropAnimation:null,children:y.jsx("div",{style:{willChange:"transform",transform:"translateZ(0)",pointerEvents:"none",filter:"drop-shadow(0 8px 16px rgba(0,0,0,0.3))"},children:_e()})})]})})});let q3=1;const H3=s=>{const[e,t]=V.useState(null),[i,a]=V.useState(!1),[l,u]=V.useState([]);V.useEffect(()=>{if(!s)try{const E=Uf(4);console.log("101 Game Initialized",E),t(E)}catch(E){console.error("Failed to initialize 101 game",E)}},[s]);const d=V.useCallback(E=>{u(A=>A.includes(E)?A.filter(P=>P!==E):[...A,E])},[]),m=V.useCallback(()=>{u([])},[]),p=V.useCallback(E=>{t(A=>{if(!A)return null;if(A.currentTurn!==0||A.players[0].tiles.filter(J=>J!==null).length>=15)return A;const O=[...A.centerStack],be=O.pop();if(!be)return A;const _e=[...A.players],H=[..._e[0].tiles];let Y=-1;if(E!==void 0&&E>=0&&E<H.length)if(H[E]===null)Y=E;else for(let J=1;J<H.length;J++){const pe=E+J,ve=E-J;if(pe<H.length&&H[pe]===null){Y=pe;break}if(ve>=0&&H[ve]===null){Y=ve;break}}return Y===-1&&(Y=H.findIndex(J=>J===null)),Y!==-1&&(H[Y]=be),_e[0]={..._e[0],tiles:H},{...A,players:_e,centerStack:O}})},[]),v=V.useCallback(E=>{t(A=>{if(!A||A.currentTurn!==0||A.players[0].tiles.filter(ve=>ve!==null).length>=15)return A;const O=3,be=A.discardPiles[O]||[];if(be.length===0)return A;const _e=A.discardPiles.map((ve,L)=>L===O?ve.slice(0,-1):[...ve]),H=be[be.length-1],Y=[...A.players],J=[...Y[0].tiles];let pe=-1;if(E!==void 0&&E>=0&&E<J.length)if(J[E]===null)pe=E;else for(let ve=1;ve<J.length;ve++){const L=E+ve,Z=E-ve;if(L<J.length&&J[L]===null){pe=L;break}if(Z>=0&&J[Z]===null){pe=Z;break}}return pe===-1&&(pe=J.findIndex(ve=>ve===null)),pe!==-1&&(J[pe]=H),Y[0]={...Y[0],tiles:J},{...A,players:Y,discardPiles:_e}})},[]),b=V.useCallback(E=>{t(A=>{if(!A||A.currentTurn!==0)return A;if(A.players[0].tiles.filter(J=>J!==null).length!==15)return console.log("Must have 15 tiles to discard"),A;const O=[...A.players],be=[...A.players[0].tiles],_e=be[E];if(!_e)return A;be[E]=null,O[0]={...O[0],tiles:be};const H=A.discardPiles.map((J,pe)=>pe===0?[...J,_e]:[...J]),Y=(A.currentTurn+1)%A.players.length;return{...A,players:O,discardPiles:H,currentTurn:Y}}),m()},[m]),w=V.useCallback(()=>{if(l.length<3){alert("En az 3 ta semelisiniz!");return}t(E=>{if(!E||E.currentTurn!==0)return E;const A=E.players[0],P=l.map(pe=>A.tiles[pe]).filter(pe=>pe!==null);if(P.length<3)return alert("Geersiz ta seimi!"),E;const O=j0(P);if(!O.valid||!O.type)return alert("Bu talar geerli bir per oluturmuyor!"),E;if(!A.hasLaidDown&&!AE([P]))return alert("lk indiri iin en az 51 puan gerekli!"),E;const be={id:`meld-${q3++}`,tiles:P,type:O.type,ownerPlayer:0},_e=[...A.tiles];l.forEach(pe=>{_e[pe]=null});const H=[...E.players];H[0]={...H[0],tiles:_e,hasLaidDown:!0};const Y=_e.filter(pe=>pe!==null).length,J={...E.tableMelds,[be.id]:be};return Y===0?Hg({...E,players:H,tableMelds:J},0):{...E,players:H,tableMelds:J}}),m()},[l,m]),R=V.useCallback((E,A)=>{t(P=>{if(!P||P.currentTurn!==0)return P;const O=P.players[0];if(!O.hasLaidDown)return alert("nce kendi perinizi indirmelisiniz!"),P;const be=O.tiles[E];if(!be)return P;const _e=P.tableMelds[A];if(!_e)return P;if(!SE(_e,be))return alert("Bu ta bu perlere eklenemez!"),P;const H={...P.tableMelds,[A]:{..._e,tiles:[..._e.tiles,be]}},Y=[...O.tiles];Y[E]=null;const J=[...P.players];return J[0]={...J[0],tiles:Y},Y.filter(ve=>ve!==null).length===0?Hg({...P,players:J,tableMelds:H},0):{...P,players:J,tableMelds:H}})},[]),j=V.useCallback((E,A)=>{t(P=>{if(!P)return null;const O=[...P.players],be=[...O[0].tiles],_e=be[E];return be[E]=be[A],be[A]=_e,O[0]={...O[0],tiles:be},{...P,players:O}})},[]),z=V.useCallback(()=>{t(E=>{if(!E)return null;const A=[...E.players],P=DE(A[0].tiles);return A[0]={...A[0],tiles:P},{...E,players:A}})},[]),D=V.useCallback(()=>{t(E=>{if(!E)return null;const A=[...E.players],P=RE(A[0].tiles);return A[0]={...A[0],tiles:P},{...E,players:A}})},[]),M=V.useCallback(()=>{t(E=>{if(!E)return null;const A=[...E.players],P=CE(A[0].tiles);return A[0]={...A[0],tiles:P},{...E,players:A}})},[]),$=V.useCallback(()=>{t(E=>{if(!E)return null;const A=[...E.players],P=kE(A[0].tiles);return A[0]={...A[0],tiles:P},{...E,players:A}})},[]),B=V.useCallback(()=>{if(!e)return;const E=NE(e.players[0].tiles);E.length>0&&u(E[0])},[e]),ce=V.useCallback(()=>{if(!e)return;const E=IE(e.players[0].tiles);E.length>0&&u(E[0])},[e]),X=V.useCallback(()=>{t(Uf(4)),m()},[m]),F=V.useCallback(()=>{t(E=>!E||E.phase!=="roundOver"?E:p3(E)),m()},[m]),C=V.useCallback(E=>{t(A=>{if(!A||A.currentTurn!==0)return A;const P=A.players[0],O=P.tiles[E];if(!O)return A;if(P.tiles.filter(J=>J!==null).length!==1)return alert("Son tanz olmal!"),A;const _e=[...P.tiles];_e[E]=null;const H=[...A.players];H[0]={...H[0],tiles:_e};const Y=A.discardPiles.map((J,pe)=>pe===0?[...J,O]:[...J]);return Hg({...A,players:H,discardPiles:Y},0)})},[]);return V.useEffect(()=>{if(e&&e.currentTurn!==0&&e.phase==="playing"){const E=setTimeout(()=>{t(A=>{if(!A||A.currentTurn===0)return A;const P=A.currentTurn,O=[...A.players],be=(P+1)%A.players.length,_e=[...A.centerStack],H=_e.pop();if(H){const Y=[...O[P].tiles],J=Y.findIndex(Z=>Z===null);J!==-1&&(Y[J]=H);const pe=Y.findIndex(Z=>Z!==null),ve=Y[pe];Y[pe]=null,O[P]={...O[P],tiles:Y};const L=A.discardPiles.map((Z,G)=>G===P?ve?[...Z,ve]:[...Z]:[...Z]);return{...A,centerStack:_e,players:O,discardPiles:L,currentTurn:be}}return{...A,currentTurn:be}})},1500);return()=>clearTimeout(E)}},[e?.currentTurn,e?.phase]),{gameState:e,selectedTileIndices:l,toggleTileSelection:d,clearSelection:m,moveTileInRack:j,drawFromCenter:p,drawFromDiscard:v,discardTile:b,layDownMeld:w,addToMeld:R,finishGame:C,resetGame:X,newRound:F,autoSortTiles:z,sortTilesByRuns:D,sortTilesBySets:M,sortTilesByPairs:$,selectRuns:B,selectSets:ce,createRoom:async()=>(a(!0),await new Promise(E=>setTimeout(E,1e3)),a(!1),"101-room-"+Math.random().toString(36).substr(2,6)),joinRoom:async E=>{a(!0),await new Promise(A=>setTimeout(A,1e3)),a(!1)},isAuthLoading:i}},F3=s=>{const e={};s.tableMelds&&Object.entries(s.tableMelds).forEach(([i,a])=>{e[i]=a});const t=[s.discardPiles?.["0"]||[],s.discardPiles?.["1"]||[],s.discardPiles?.["2"]||[],s.discardPiles?.["3"]||[]];return{phase:s.phase==="waiting"?"dealing":s.phase,players:s.players.map(i=>({tiles:i.tiles,score:i.score,hasLaidDown:i.hasLaidDown})),centerStack:s.centerStack,discardPiles:t,indicatorTile:s.indicatorTile??null,okeyTile:s.okeyTile??null,tableMelds:e,currentTurn:s.currentTurn,roundWinner:s.roundWinner,gameWinner:s.gameWinner,roundNumber:s.roundNumber}},G3=({roomId:s,mode:e,onExit:t})=>{const i=H3(e==="local"?s:null),a=OE(e==="online"?s:null),l=e==="online",u=a.room,d=a.getMySlot(),m=a.isHost(),p=V.useMemo(()=>l?u?F3(u):null:i.gameState,[l,u,i.gameState]),v=l?a.selectedTileIndices:i.selectedTileIndices,b=V.useCallback(E=>{l?a.toggleTileSelection(E):i.toggleTileSelection(E)},[l,a,i]),w=V.useCallback(()=>{l?a.clearSelection():i.clearSelection()},[l,a,i]),R=V.useCallback(E=>{l?a.drawFromCenter(E):i.drawFromCenter(E)},[l,a,i]),j=V.useCallback(E=>{l?a.drawFromDiscard(E):i.drawFromDiscard(E)},[l,a,i]),z=V.useCallback((E,A)=>{l?a.moveTileInRack(E,A):i.moveTileInRack(E,A)},[l,a,i]),D=V.useCallback(E=>{l?a.discardTile(E):i.discardTile(E)},[l,a,i]),M=V.useCallback(()=>{l?a.layDownMeld():i.layDownMeld()},[l,a,i]),$=V.useCallback((E,A)=>{l?a.addToMeld(E,A):i.addToMeld(E,A)},[l,a,i]),B=V.useCallback(()=>{l?a.sortTilesByRuns():i.sortTilesByRuns()},[l,a,i]),ce=V.useCallback(()=>{l?a.selectRuns():i.selectRuns()},[l,a,i]),X=V.useCallback(()=>{l?a.selectSets():i.selectSets()},[l,a,i]),F=V.useCallback(()=>{l?a.sortTilesByPairs():i.sortTilesByPairs()},[l,a,i]),C=V.useCallback(()=>{l?a.resetGame():i.resetGame()},[l,a,i]),S=V.useCallback(()=>{l?a.startNewRound():i.newRound()},[l,a,i]),N=V.useCallback(E=>{if(l&&u){const P=u.players[E];return{name:P?.adPlayerName||`Player ${E+1}`,isAI:P?.adIsAI||!1,isYou:P?.odaUserId===a.userId}}return{name:["Siz","Bot 1","Bot 2","Bot 3"][E],isAI:E!==0,isYou:E===0}},[l,u,a.userId]);return l&&(a.loading||a.isAuthLoading)?y.jsx("div",{className:"flex items-center justify-center h-screen",children:y.jsx("div",{className:"text-white text-xl",children:"Balanyor..."})}):l&&a.error?y.jsxs("div",{className:"flex flex-col items-center justify-center h-screen gap-4",children:[y.jsx("div",{className:"text-red-400 text-xl",children:a.error}),y.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg",children:"Geri Dn"})]}):l&&u&&u.phase==="waiting"?y.jsxs("div",{className:"flex flex-col items-center justify-center h-screen gap-6",children:[y.jsxs("h2",{className:"text-2xl font-bold text-white",children:["101 Odas: ",u.roomId]}),y.jsxs("div",{className:"bg-[#1a3625]/80 rounded-lg p-6 min-w-[300px]",children:[y.jsxs("h3",{className:"text-amber-400 font-bold mb-4",children:["Oyuncular (",u.players.length,"/4)"]}),u.players.map((E,A)=>y.jsx("div",{className:"flex items-center gap-2 text-white py-2",children:y.jsxs("span",{className:E.odaUserId===a.userId?"text-amber-400":"",children:[E.adPlayerName,E.odaUserId===a.userId&&" (Sen)",E.odaUserId===u.hostUserId&&" "]})},A)),u.players.length<4&&y.jsx("div",{className:"text-gray-400 text-sm mt-2",children:"Bo slotlar AI ile doldurulacak"})]}),m&&y.jsx("button",{onClick:()=>a.startGame(),className:"px-6 py-3 bg-emerald-600 hover:bg-emerald-700 text-white font-bold rounded-lg",children:"Oyunu Balat"}),!m&&y.jsx("div",{className:"text-gray-400",children:"Host'un oyunu balatmasn bekleyin..."}),y.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg",children:"Odadan Ayrl"})]}):y.jsx("div",{className:"flex flex-col items-center justify-center min-h-[85vh] fade-in animate-in duration-700",children:y.jsx(B3,{gameState:p,selectedTileIndices:v,onToggleSelection:b,onClearSelection:w,onDraw:R,onDrawDiscard:j,onMoveTile:z,onDiscard:D,onLayDownMeld:M,onAddToMeld:$,onSortByRuns:B,onSortByPairs:F,onSelectRuns:ce,onSelectSets:X,onReset:C,onNewRound:S,onExit:t,playerInfo:V.useMemo(()=>l&&u?u.players.map((E,A)=>N(A)):void 0,[l,u,N]),mySlot:l?d:0})})};function $3(){const[s,e]=V.useState("menu"),[t,i]=V.useState("chess"),[a,l]=V.useState(null),[u,d]=V.useState("Normal"),m=_E(null),p=bE(null),v={room:null,isAuthLoading:!1,createRoom:async N=>null,joinRoom:async(N,E)=>!1,startGame:async()=>{},leaveRoom:async()=>{}},b=OE(t==="101"?a:null),w=t==="chess"?m.isAuthLoading:t==="backgammon"?p.isAuthLoading:t==="101"?b.isAuthLoading:v.isAuthLoading;V.useEffect(()=>{},[v.room?.phase,s]),V.useEffect(()=>{b.room?.phase==="playing"&&s==="101-lobby"&&e("online")},[b.room?.phase,s]);const R=async()=>{try{if(t==="chess"){const N=await m.createRoom();N&&(l(N),e("online"))}else if(t==="backgammon"){const N=await p.createRoom();N&&(l(N),e("online"))}}catch(N){console.error("Failed to create room:",N)}},j=async N=>{if(N.trim())try{t==="chess"?(await m.joinRoom(N),l(N),e("online")):t==="backgammon"&&(await p.joinRoom(N),l(N),e("online"))}catch(E){console.error("Failed to join room:",E),alert("Room not found or could not join")}},z=async N=>{try{console.log("Creating Okey room for player:",N);const E=await v.createRoom(N);return console.log("Okey room created with ID:",E),l(E),e("okey-lobby"),E}catch(E){return console.error("Failed to create Okey room:",E),alert("Oda oluturulamad: "+(E instanceof Error?E.message:"Bilinmeyen hata")),null}},D=async(N,E)=>{try{const A=await v.joinRoom(N,E);return A&&(l(N),e("okey-lobby")),A}catch(A){return console.error("Failed to join Okey room:",A),!1}},M=async()=>{try{await v.startGame()}catch(N){console.error("Failed to start Okey game:",N)}},$=async N=>{try{const E=await b.createRoom(N);return l(E),e("101-lobby"),E}catch(E){return console.error("Failed to create 101 room:",E),alert("Oda oluturulamad: "+(E instanceof Error?E.message:"Bilinmeyen hata")),null}},B=async(N,E)=>{try{const A=await b.joinRoom(N,E);return A&&(l(N),e("101-lobby")),A}catch(A){return console.error("Failed to join 101 room:",A),!1}},ce=async()=>{try{await b.startGame()}catch(N){console.error("Failed to start 101 game:",N)}},X=N=>{i(N)},F=N=>{d(N),e("local"),l(null)},C=async()=>{t==="okey"&&a&&await v.leaveRoom(),l(null),e("menu")},S=s==="menu"||s==="okey-lobby"||s==="101-lobby";return y.jsxs("main",{className:"relative min-h-screen w-full flex flex-col items-center overflow-x-hidden",children:[y.jsx(TA,{}),y.jsx("div",{className:"container mx-auto px-4 py-8 max-w-7xl w-full overflow-visible",children:S?y.jsx(s4,{onCreateRoom:R,onJoinRoom:j,onStartLocal:F,isAuthLoading:w,onSelectGame:X,selectedGame:t,onCreateOkeyRoom:z,onJoinOkeyRoom:D,onStartOkeyGame:M,okeyRoom:v.room,okeyUserId:v.userId,onCreate101Room:$,onJoin101Room:B,onStart101Game:ce,room101:b.room,user101Id:b.userId}):t==="chess"?y.jsx(a3,{roomId:a||"",mode:s==="online"?"online":"local",aiDifficulty:u,onExit:C}):t==="backgammon"?y.jsx(A3,{roomId:a||"",mode:s==="online"?"online":"local",aiDifficulty:u,onExit:C}):t==="101"?y.jsx(G3,{roomId:a||"",mode:s==="online"?"online":"local",onExit:C}):y.jsx(V3,{roomId:a||"",mode:s==="online"?"online":"local",aiDifficulty:u,onExit:C})}),y.jsx("footer",{className:"mt-auto py-8 text-slate-500 text-sm",children:"DragMate  Premium Multiplayer Board Gaming"})]})}wA.createRoot(document.getElementById("root")).render(y.jsx(V.StrictMode,{children:y.jsx($3,{})}));
