(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();function PA(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Zm={exports:{}},cc={};var j_;function LA(){if(j_)return cc;j_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:i,type:s,key:u,ref:o!==void 0?o:null,props:c}}return cc.Fragment=e,cc.jsx=t,cc.jsxs=t,cc}var U_;function jA(){return U_||(U_=1,Zm.exports=LA()),Zm.exports}var T=jA(),Wm={exports:{}},Le={};var z_;function UA(){if(z_)return Le;z_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),w=Symbol.iterator;function C(P){return P===null||typeof P!="object"?null:(P=w&&P[w]||P["@@iterator"],typeof P=="function"?P:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,D={};function B(P,re,me){this.props=P,this.context=re,this.refs=D,this.updater=me||M}B.prototype.isReactComponent={},B.prototype.setState=function(P,re){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,re,"setState")},B.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function ee(){}ee.prototype=B.prototype;function Y(P,re,me){this.props=P,this.context=re,this.refs=D,this.updater=me||M}var ce=Y.prototype=new ee;ce.constructor=Y,z(ce,B.prototype),ce.isPureReactComponent=!0;var ie=Array.isArray;function J(){}var x={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function N(P,re,me){var fe=me.ref;return{$$typeof:i,type:P,key:re,ref:fe!==void 0?fe:null,props:me}}function V(P,re){return N(P.type,re,P.props)}function O(P){return typeof P=="object"&&P!==null&&P.$$typeof===i}function j(P){var re={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(me){return re[me]})}var I=/\/+/g;function Ue(P,re){return typeof P=="object"&&P!==null&&P.key!=null?j(""+P.key):re.toString(36)}function ut(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(J,J):(P.status="pending",P.then(function(re){P.status==="pending"&&(P.status="fulfilled",P.value=re)},function(re){P.status==="pending"&&(P.status="rejected",P.reason=re)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function ne(P,re,me,fe,pe){var Ae=typeof P;(Ae==="undefined"||Ae==="boolean")&&(P=null);var Pe=!1;if(P===null)Pe=!0;else switch(Ae){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(P.$$typeof){case i:case e:Pe=!0;break;case v:return Pe=P._init,ne(Pe(P._payload),re,me,fe,pe)}}if(Pe)return pe=pe(P),Pe=fe===""?"."+Ue(P,0):fe,ie(pe)?(me="",Pe!=null&&(me=Pe.replace(I,"$&/")+"/"),ne(pe,re,me,"",function(Fe){return Fe})):pe!=null&&(O(pe)&&(pe=V(pe,me+(pe.key==null||P&&P.key===pe.key?"":(""+pe.key).replace(I,"$&/")+"/")+Pe)),re.push(pe)),1;Pe=0;var dt=fe===""?".":fe+":";if(ie(P))for(var Ge=0;Ge<P.length;Ge++)fe=P[Ge],Ae=dt+Ue(fe,Ge),Pe+=ne(fe,re,me,Ae,pe);else if(Ge=C(P),typeof Ge=="function")for(P=Ge.call(P),Ge=0;!(fe=P.next()).done;)fe=fe.value,Ae=dt+Ue(fe,Ge++),Pe+=ne(fe,re,me,Ae,pe);else if(Ae==="object"){if(typeof P.then=="function")return ne(ut(P),re,me,fe,pe);throw re=String(P),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function he(P,re,me){if(P==null)return P;var fe=[],pe=0;return ne(P,fe,"","",function(Ae){return re.call(me,Ae,pe++)}),fe}function _e(P){if(P._status===-1){var re=P._result;re=re(),re.then(function(me){(P._status===0||P._status===-1)&&(P._status=1,P._result=me)},function(me){(P._status===0||P._status===-1)&&(P._status=2,P._result=me)}),P._status===-1&&(P._status=0,P._result=re)}if(P._status===1)return P._result.default;throw P._result}var De=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},je={map:he,forEach:function(P,re,me){he(P,function(){re.apply(this,arguments)},me)},count:function(P){var re=0;return he(P,function(){re++}),re},toArray:function(P){return he(P,function(re){return re})||[]},only:function(P){if(!O(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Le.Activity=E,Le.Children=je,Le.Component=B,Le.Fragment=t,Le.Profiler=o,Le.PureComponent=Y,Le.StrictMode=s,Le.Suspense=g,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,Le.__COMPILER_RUNTIME={__proto__:null,c:function(P){return x.H.useMemoCache(P)}},Le.cache=function(P){return function(){return P.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(P,re,me){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var fe=z({},P.props),pe=P.key;if(re!=null)for(Ae in re.key!==void 0&&(pe=""+re.key),re)!R.call(re,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&re.ref===void 0||(fe[Ae]=re[Ae]);var Ae=arguments.length-2;if(Ae===1)fe.children=me;else if(1<Ae){for(var Pe=Array(Ae),dt=0;dt<Ae;dt++)Pe[dt]=arguments[dt+2];fe.children=Pe}return N(P.type,pe,fe)},Le.createContext=function(P){return P={$$typeof:u,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:c,_context:P},P},Le.createElement=function(P,re,me){var fe,pe={},Ae=null;if(re!=null)for(fe in re.key!==void 0&&(Ae=""+re.key),re)R.call(re,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(pe[fe]=re[fe]);var Pe=arguments.length-2;if(Pe===1)pe.children=me;else if(1<Pe){for(var dt=Array(Pe),Ge=0;Ge<Pe;Ge++)dt[Ge]=arguments[Ge+2];pe.children=dt}if(P&&P.defaultProps)for(fe in Pe=P.defaultProps,Pe)pe[fe]===void 0&&(pe[fe]=Pe[fe]);return N(P,Ae,pe)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(P){return{$$typeof:m,render:P}},Le.isValidElement=O,Le.lazy=function(P){return{$$typeof:v,_payload:{_status:-1,_result:P},_init:_e}},Le.memo=function(P,re){return{$$typeof:p,type:P,compare:re===void 0?null:re}},Le.startTransition=function(P){var re=x.T,me={};x.T=me;try{var fe=P(),pe=x.S;pe!==null&&pe(me,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(J,De)}catch(Ae){De(Ae)}finally{re!==null&&me.types!==null&&(re.types=me.types),x.T=re}},Le.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},Le.use=function(P){return x.H.use(P)},Le.useActionState=function(P,re,me){return x.H.useActionState(P,re,me)},Le.useCallback=function(P,re){return x.H.useCallback(P,re)},Le.useContext=function(P){return x.H.useContext(P)},Le.useDebugValue=function(){},Le.useDeferredValue=function(P,re){return x.H.useDeferredValue(P,re)},Le.useEffect=function(P,re){return x.H.useEffect(P,re)},Le.useEffectEvent=function(P){return x.H.useEffectEvent(P)},Le.useId=function(){return x.H.useId()},Le.useImperativeHandle=function(P,re,me){return x.H.useImperativeHandle(P,re,me)},Le.useInsertionEffect=function(P,re){return x.H.useInsertionEffect(P,re)},Le.useLayoutEffect=function(P,re){return x.H.useLayoutEffect(P,re)},Le.useMemo=function(P,re){return x.H.useMemo(P,re)},Le.useOptimistic=function(P,re){return x.H.useOptimistic(P,re)},Le.useReducer=function(P,re,me){return x.H.useReducer(P,re,me)},Le.useRef=function(P){return x.H.useRef(P)},Le.useState=function(P){return x.H.useState(P)},Le.useSyncExternalStore=function(P,re,me){return x.H.useSyncExternalStore(P,re,me)},Le.useTransition=function(){return x.H.useTransition()},Le.version="19.2.3",Le}var B_;function lp(){return B_||(B_=1,Wm.exports=UA()),Wm.exports}var U=lp();const at=PA(U);var eg={exports:{}},uc={},tg={exports:{}},ng={};var q_;function zA(){return q_||(q_=1,(function(i){function e(ne,he){var _e=ne.length;ne.push(he);e:for(;0<_e;){var De=_e-1>>>1,je=ne[De];if(0<o(je,he))ne[De]=he,ne[_e]=je,_e=De;else break e}}function t(ne){return ne.length===0?null:ne[0]}function s(ne){if(ne.length===0)return null;var he=ne[0],_e=ne.pop();if(_e!==he){ne[0]=_e;e:for(var De=0,je=ne.length,P=je>>>1;De<P;){var re=2*(De+1)-1,me=ne[re],fe=re+1,pe=ne[fe];if(0>o(me,_e))fe<je&&0>o(pe,me)?(ne[De]=pe,ne[fe]=_e,De=fe):(ne[De]=me,ne[re]=_e,De=re);else if(fe<je&&0>o(pe,_e))ne[De]=pe,ne[fe]=_e,De=fe;else break e}}return he}function o(ne,he){var _e=ne.sortIndex-he.sortIndex;return _e!==0?_e:ne.id-he.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var u=Date,m=u.now();i.unstable_now=function(){return u.now()-m}}var g=[],p=[],v=1,E=null,w=3,C=!1,M=!1,z=!1,D=!1,B=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function ce(ne){for(var he=t(p);he!==null;){if(he.callback===null)s(p);else if(he.startTime<=ne)s(p),he.sortIndex=he.expirationTime,e(g,he);else break;he=t(p)}}function ie(ne){if(z=!1,ce(ne),!M)if(t(g)!==null)M=!0,J||(J=!0,j());else{var he=t(p);he!==null&&ut(ie,he.startTime-ne)}}var J=!1,x=-1,R=5,N=-1;function V(){return D?!0:!(i.unstable_now()-N<R)}function O(){if(D=!1,J){var ne=i.unstable_now();N=ne;var he=!0;try{e:{M=!1,z&&(z=!1,ee(x),x=-1),C=!0;var _e=w;try{t:{for(ce(ne),E=t(g);E!==null&&!(E.expirationTime>ne&&V());){var De=E.callback;if(typeof De=="function"){E.callback=null,w=E.priorityLevel;var je=De(E.expirationTime<=ne);if(ne=i.unstable_now(),typeof je=="function"){E.callback=je,ce(ne),he=!0;break t}E===t(g)&&s(g),ce(ne)}else s(g);E=t(g)}if(E!==null)he=!0;else{var P=t(p);P!==null&&ut(ie,P.startTime-ne),he=!1}}break e}finally{E=null,w=_e,C=!1}he=void 0}}finally{he?j():J=!1}}}var j;if(typeof Y=="function")j=function(){Y(O)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Ue=I.port2;I.port1.onmessage=O,j=function(){Ue.postMessage(null)}}else j=function(){B(O,0)};function ut(ne,he){x=B(function(){ne(i.unstable_now())},he)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ne){ne.callback=null},i.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ne?Math.floor(1e3/ne):5},i.unstable_getCurrentPriorityLevel=function(){return w},i.unstable_next=function(ne){switch(w){case 1:case 2:case 3:var he=3;break;default:he=w}var _e=w;w=he;try{return ne()}finally{w=_e}},i.unstable_requestPaint=function(){D=!0},i.unstable_runWithPriority=function(ne,he){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var _e=w;w=ne;try{return he()}finally{w=_e}},i.unstable_scheduleCallback=function(ne,he,_e){var De=i.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?De+_e:De):_e=De,ne){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=_e+je,ne={id:v++,callback:he,priorityLevel:ne,startTime:_e,expirationTime:je,sortIndex:-1},_e>De?(ne.sortIndex=_e,e(p,ne),t(g)===null&&ne===t(p)&&(z?(ee(x),x=-1):z=!0,ut(ie,_e-De))):(ne.sortIndex=je,e(g,ne),M||C||(M=!0,J||(J=!0,j()))),ne},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(ne){var he=w;return function(){var _e=w;w=he;try{return ne.apply(this,arguments)}finally{w=_e}}}})(ng)),ng}var H_;function BA(){return H_||(H_=1,tg.exports=zA()),tg.exports}var ig={exports:{}},jn={};var F_;function qA(){if(F_)return jn;F_=1;var i=lp();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:p,implementation:v}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,jn.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return c(g,p,null,v)},jn.flushSync=function(g){var p=u.T,v=s.p;try{if(u.T=null,s.p=2,g)return g()}finally{u.T=p,s.p=v,s.d.f()}},jn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},jn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},jn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,E=m(v,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,C=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:w,fetchPriority:C}):v==="script"&&s.d.X(g,{crossOrigin:E,integrity:w,fetchPriority:C,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},jn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=m(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},jn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=m(v,p.crossOrigin);s.d.L(g,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},jn.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=m(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},jn.requestFormReset=function(g){s.d.r(g)},jn.unstable_batchedUpdates=function(g,p){return g(p)},jn.useFormState=function(g,p,v){return u.H.useFormState(g,p,v)},jn.useFormStatus=function(){return u.H.useHostTransitionStatus()},jn.version="19.2.3",jn}var G_;function J1(){if(G_)return ig.exports;G_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ig.exports=qA(),ig.exports}var $_;function HA(){if($_)return uc;$_=1;var i=BA(),e=lp(),t=J1();function s(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function u(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function m(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function g(n){if(c(n)!==n)throw Error(s(188))}function p(n){var r=n.alternate;if(!r){if(r=c(n),r===null)throw Error(s(188));return r!==n?null:n}for(var a=n,l=r;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),n;if(d===l)return g(f),r;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,S=f.child;S;){if(S===a){_=!0,a=f,l=d;break}if(S===l){_=!0,l=f,a=d;break}S=S.sibling}if(!_){for(S=d.child;S;){if(S===a){_=!0,a=d,l=f;break}if(S===l){_=!0,l=d,a=f;break}S=S.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?n:r}function v(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=v(n),r!==null)return r;n=n.sibling}return null}var E=Object.assign,w=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),ee=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function j(n){return n===null||typeof n!="object"?null:(n=O&&n[O]||n["@@iterator"],typeof n=="function"?n:null)}var I=Symbol.for("react.client.reference");function Ue(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===I?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case z:return"Fragment";case B:return"Profiler";case D:return"StrictMode";case ie:return"Suspense";case J:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case M:return"Portal";case Y:return n.displayName||"Context";case ee:return(n._context.displayName||"Context")+".Consumer";case ce:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case x:return r=n.displayName||null,r!==null?r:Ue(n.type)||"Memo";case R:r=n._payload,n=n._init;try{return Ue(n(r))}catch{}}return null}var ut=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},De=[],je=-1;function P(n){return{current:n}}function re(n){0>je||(n.current=De[je],De[je]=null,je--)}function me(n,r){je++,De[je]=n.current,n.current=r}var fe=P(null),pe=P(null),Ae=P(null),Pe=P(null);function dt(n,r){switch(me(Ae,r),me(pe,n),me(fe,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?o_(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=o_(r),n=l_(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}re(fe),me(fe,n)}function Ge(){re(fe),re(pe),re(Ae)}function Fe(n){n.memoizedState!==null&&me(Pe,n);var r=fe.current,a=l_(r,n.type);r!==a&&(me(pe,n),me(fe,a))}function ri(n){pe.current===n&&(re(fe),re(pe)),Pe.current===n&&(re(Pe),sc._currentValue=_e)}var un,Fn;function Ut(n){if(un===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);un=r&&r[1]||"",Fn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+un+n+Fn}var Gn=!1;function Pn(n,r){if(!n||Gn)return"";Gn=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(te){var Q=te}Reflect.construct(n,[],le)}else{try{le.call()}catch(te){Q=te}n.call(le.prototype)}}else{try{throw Error()}catch(te){Q=te}(le=n())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(te){if(te&&Q&&typeof te.stack=="string")return[te.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],S=d[1];if(_&&S){var k=_.split(`
`),$=S.split(`
`);for(f=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;f<$.length&&!$[f].includes("DetermineComponentFrameRoot");)f++;if(l===k.length||f===$.length)for(l=k.length-1,f=$.length-1;1<=l&&0<=f&&k[l]!==$[f];)f--;for(;1<=l&&0<=f;l--,f--)if(k[l]!==$[f]){if(l!==1||f!==1)do if(l--,f--,0>f||k[l]!==$[f]){var se=`
`+k[l].replace(" at new "," at ");return n.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",n.displayName)),se}while(1<=l&&0<=f);break}}}finally{Gn=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Ut(a):""}function or(n,r){switch(n.tag){case 26:case 27:case 5:return Ut(n.type);case 16:return Ut("Lazy");case 13:return n.child!==r&&r!==null?Ut("Suspense Fallback"):Ut("Suspense");case 19:return Ut("SuspenseList");case 0:case 15:return Pn(n.type,!1);case 11:return Pn(n.type.render,!1);case 1:return Pn(n.type,!0);case 31:return Ut("Activity");default:return""}}function Hi(n){try{var r="",a=null;do r+=or(n,a),a=n,n=n.return;while(n);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var xt=Object.prototype.hasOwnProperty,mt=i.unstable_scheduleCallback,$n=i.unstable_cancelCallback,lr=i.unstable_shouldYield,cr=i.unstable_requestPaint,Zt=i.unstable_now,Fi=i.unstable_getCurrentPriorityLevel,Cr=i.unstable_ImmediatePriority,Kn=i.unstable_UserBlockingPriority,An=i.unstable_NormalPriority,Gi=i.unstable_LowPriority,Nr=i.unstable_IdlePriority,Qn=i.log,Ir=i.unstable_setDisableYieldValue,Yn=null,Gt=null;function yn(n){if(typeof Qn=="function"&&Ir(n),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(Yn,n)}catch{}}var Rt=Math.clz32?Math.clz32:as,Dr=Math.log,$i=Math.LN2;function as(n){return n>>>=0,n===0?32:31-(Dr(n)/$i|0)|0}var si=256,Ki=262144,He=4194304;function Ct(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Nt(n,r,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var S=l&134217727;return S!==0?(l=S&~d,l!==0?f=Ct(l):(_&=S,_!==0?f=Ct(_):a||(a=S&~n,a!==0&&(f=Ct(a))))):(S=l&~d,S!==0?f=Ct(S):_!==0?f=Ct(_):a||(a=l&~n,a!==0&&(f=Ct(a)))),f===0?0:r!==0&&r!==f&&(r&d)===0&&(d=f&-f,a=r&-r,d>=a||d===32&&(a&4194048)!==0)?r:f}function zt(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function vn(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wt(){var n=He;return He<<=1,(He&62914560)===0&&(He=4194304),n}function Pt(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function X(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function yt(n,r,a,l,f,d){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var S=n.entanglements,k=n.expirationTimes,$=n.hiddenUpdates;for(a=_&~a;0<a;){var se=31-Rt(a),le=1<<se;S[se]=0,k[se]=-1;var Q=$[se];if(Q!==null)for($[se]=null,se=0;se<Q.length;se++){var te=Q[se];te!==null&&(te.lane&=-536870913)}a&=~le}l!==0&&vt(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(_&~r))}function vt(n,r,a){n.pendingLanes|=r,n.suspendedLanes&=~r;var l=31-Rt(r);n.entangledLanes|=r,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function $t(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var l=31-Rt(a),f=1<<l;f&r|n[l]&r&&(n[l]|=r),a&=~f}}function de(n,r){var a=r&-r;return a=(a&42)!==0?1:hn(a),(a&(n.suspendedLanes|r))!==0?0:a}function hn(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function rt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Mt(){var n=he.p;return n!==0?n:(n=window.event,n===void 0?32:D_(n.type))}function fn(n,r){var a=he.p;try{return he.p=n,r()}finally{he.p=a}}var _t=Math.random().toString(36).slice(2),Lt="__reactFiber$"+_t,Kt="__reactProps$"+_t,Ee="__reactContainer$"+_t,os="__reactEvents$"+_t,Wa="__reactListeners$"+_t,eo="__reactHandles$"+_t,ma="__reactResources$"+_t,xi="__reactMarker$"+_t;function ls(n){delete n[Lt],delete n[Kt],delete n[os],delete n[Wa],delete n[eo]}function Ri(n){var r=n[Lt];if(r)return r;for(var a=n.parentNode;a;){if(r=a[Ee]||a[Lt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=g_(n);n!==null;){if(a=n[Lt])return a;n=g_(n)}return r}n=a,a=n.parentNode}return null}function Xn(n){if(n=n[Lt]||n[Ee]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function Ln(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(s(33))}function Ci(n){var r=n[ma];return r||(r=n[ma]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Bt(n){n[xi]=!0}var ga=new Set,cs={};function ai(n,r){Ni(n,r),Ni(n+"Capture",r)}function Ni(n,r){for(cs[n]=r,n=0;n<r.length;n++)ga.add(r[n])}var pa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),us={},ya={};function en(n){return xt.call(ya,n)?!0:xt.call(us,n)?!1:pa.test(n)?ya[n]=!0:(us[n]=!0,!1)}function H(n,r,a){if(en(r))if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+a)}}function Z(n,r,a){if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+a)}}function K(n,r,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(r,a,""+l)}}function ve(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Se(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function tt(n,r,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(n,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function $e(n){if(!n._valueTracker){var r=Se(n)?"checked":"value";n._valueTracker=tt(n,r,""+n[r])}}function Ii(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return n&&(l=Se(n)?n.checked?"true":"false":n.value),n=l,n!==a?(r.setValue(n),!0):!1}function ur(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var va=/[\n"\\]/g;function oi(n){return n.replace(va,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function to(n,r,a,l,f,d,_,S){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),r!=null?_==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+ve(r)):n.value!==""+ve(r)&&(n.value=""+ve(r)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),r!=null?vl(n,_,ve(r)):a!=null?vl(n,_,ve(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+ve(S):n.removeAttribute("name")}function du(n,r,a,l,f,d,_,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),r!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||r!=null)){$e(n);return}a=a!=null?""+ve(a):"",r=r!=null?""+ve(r):a,S||r===n.value||(n.value=r),n.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=S?n.checked:!!l,n.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),$e(n)}function vl(n,r,a){r==="number"&&ur(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function hs(n,r,a,l){if(n=n.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=r.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+ve(a),r=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function mu(n,r,a){if(r!=null&&(r=""+ve(r),r!==n.value&&(n.value=r),a==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=a!=null?""+ve(a):""}function fs(n,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(ut(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=ve(r),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),$e(n)}function li(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var gu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _l(n,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":l?n.setProperty(r,a):typeof a!="number"||a===0||gu.has(r)?r==="float"?n.cssFloat=a:n[r]=(""+a).trim():n[r]=a+"px"}function bl(n,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&a[f]!==l&&_l(n,f,l)}else for(var d in r)r.hasOwnProperty(d)&&_l(n,d,r[d])}function no(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ds=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function io(n){return ds.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Qi(){}var El=null;function Di(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ms=null,hr=null;function _a(n){var r=Xn(n);if(r&&(n=r.stateNode)){var a=n[Kt]||null;e:switch(n=r.stateNode,r.type){case"input":if(to(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+oi(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==n&&l.form===n.form){var f=l[Kt]||null;if(!f)throw Error(s(90));to(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===n.form&&Ii(l)}break e;case"textarea":mu(n,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&hs(n,!!a.multiple,r,!1)}}}var ro=!1;function gs(n,r,a){if(ro)return n(r,a);ro=!0;try{var l=n(r);return l}finally{if(ro=!1,(ms!==null||hr!==null)&&(ch(),ms&&(r=ms,n=hr,hr=ms=null,_a(r),n)))for(r=0;r<n.length;r++)_a(n[r])}}function Yi(n,r){var a=n.stateNode;if(a===null)return null;var l=a[Kt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ba=!1;if(Oi)try{var bt={};Object.defineProperty(bt,"passive",{get:function(){ba=!0}}),window.addEventListener("test",bt,bt),window.removeEventListener("test",bt,bt)}catch{ba=!1}var fr=null,Tl=null,Ea=null;function wl(){if(Ea)return Ea;var n,r=Tl,a=r.length,l,f="value"in fr?fr.value:fr.textContent,d=f.length;for(n=0;n<a&&r[n]===f[n];n++);var _=a-n;for(l=1;l<=_&&r[a-l]===f[d-l];l++);return Ea=f.slice(n,1<l?1-l:void 0)}function Ta(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Or(){return!0}function Xi(){return!1}function xn(n){function r(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Or:Xi,this.isPropagationStopped=Xi,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Or)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Or)},persist:function(){},isPersistent:Or}),r}var Mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dr=xn(Mr),ps=E({},Mr,{view:0,detail:0}),Sl=xn(ps),ys,so,mr,ao=E({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==mr&&(mr&&n.type==="mousemove"?(ys=n.screenX-mr.screenX,so=n.screenY-mr.screenY):so=ys=0,mr=n),ys)},movementY:function(n){return"movementY"in n?n.movementY:so}}),Al=xn(ao),wa=E({},ao,{dataTransfer:0}),yu=xn(wa),vu=E({},ps,{relatedTarget:0}),Sa=xn(vu),xl=E({},Mr,{animationName:0,elapsedTime:0,pseudoElement:0}),_u=xn(xl),oo=E({},Mr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),bu=xn(oo),Eu=E({},Mr,{data:0}),gr=xn(Eu),Tu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Au(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Su[n])?!!r[n]:!1}function vs(){return Au}var Jn=E({},ps,{key:function(n){if(n.key){var r=Tu[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Ta(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?wu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vs,charCode:function(n){return n.type==="keypress"?Ta(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ta(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),xu=xn(Jn),Ru=E({},ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kr=xn(Ru),h=E({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vs}),y=xn(h),b=E({},Mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=xn(b),F=E({},ao,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),W=xn(F),ge=E({},Mr,{newState:0,oldState:0}),ze=xn(ge),Qt=[9,13,27,32],ht=Oi&&"CompositionEvent"in window,kt=null;Oi&&"documentMode"in document&&(kt=document.documentMode);var Mi=Oi&&"TextEvent"in window&&!kt,pr=Oi&&(!ht||kt&&8<kt&&11>=kt),Ji=" ",Zi=!1;function Aa(n,r){switch(n){case"keyup":return Qt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var co=!1;function aS(n,r){switch(n){case"compositionend":return lo(r);case"keypress":return r.which!==32?null:(Zi=!0,Ji);case"textInput":return n=r.data,n===Ji&&Zi?null:n;default:return null}}function oS(n,r){if(co)return n==="compositionend"||!ht&&Aa(n,r)?(n=wl(),Ea=Tl=fr=null,co=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return pr&&r.locale!=="ko"?null:r.data;default:return null}}var lS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function v0(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!lS[n.type]:r==="textarea"}function _0(n,r,a,l){ms?hr?hr.push(l):hr=[l]:ms=l,r=ph(r,"onChange"),0<r.length&&(a=new dr("onChange","change",null,a,l),n.push({event:a,listeners:r}))}var Rl=null,Cl=null;function cS(n){t_(n,0)}function Cu(n){var r=Ln(n);if(Ii(r))return n}function b0(n,r){if(n==="change")return r}var E0=!1;if(Oi){var sd;if(Oi){var ad="oninput"in document;if(!ad){var T0=document.createElement("div");T0.setAttribute("oninput","return;"),ad=typeof T0.oninput=="function"}sd=ad}else sd=!1;E0=sd&&(!document.documentMode||9<document.documentMode)}function w0(){Rl&&(Rl.detachEvent("onpropertychange",S0),Cl=Rl=null)}function S0(n){if(n.propertyName==="value"&&Cu(Cl)){var r=[];_0(r,Cl,n,Di(n)),gs(cS,r)}}function uS(n,r,a){n==="focusin"?(w0(),Rl=r,Cl=a,Rl.attachEvent("onpropertychange",S0)):n==="focusout"&&w0()}function hS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Cu(Cl)}function fS(n,r){if(n==="click")return Cu(r)}function dS(n,r){if(n==="input"||n==="change")return Cu(r)}function mS(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var gi=typeof Object.is=="function"?Object.is:mS;function Nl(n,r){if(gi(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!xt.call(r,f)||!gi(n[f],r[f]))return!1}return!0}function A0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function x0(n,r){var a=A0(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=r&&l>=r)return{node:a,offset:r-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=A0(a)}}function R0(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?R0(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function C0(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=ur(n.document);r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=ur(n.document)}return r}function od(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var gS=Oi&&"documentMode"in document&&11>=document.documentMode,uo=null,ld=null,Il=null,cd=!1;function N0(n,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;cd||uo==null||uo!==ur(l)||(l=uo,"selectionStart"in l&&od(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Il&&Nl(Il,l)||(Il=l,l=ph(ld,"onSelect"),0<l.length&&(r=new dr("onSelect","select",null,r,a),n.push({event:r,listeners:l}),r.target=uo)))}function xa(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var ho={animationend:xa("Animation","AnimationEnd"),animationiteration:xa("Animation","AnimationIteration"),animationstart:xa("Animation","AnimationStart"),transitionrun:xa("Transition","TransitionRun"),transitionstart:xa("Transition","TransitionStart"),transitioncancel:xa("Transition","TransitionCancel"),transitionend:xa("Transition","TransitionEnd")},ud={},I0={};Oi&&(I0=document.createElement("div").style,"AnimationEvent"in window||(delete ho.animationend.animation,delete ho.animationiteration.animation,delete ho.animationstart.animation),"TransitionEvent"in window||delete ho.transitionend.transition);function Ra(n){if(ud[n])return ud[n];if(!ho[n])return n;var r=ho[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in I0)return ud[n]=r[a];return n}var D0=Ra("animationend"),O0=Ra("animationiteration"),M0=Ra("animationstart"),pS=Ra("transitionrun"),yS=Ra("transitionstart"),vS=Ra("transitioncancel"),k0=Ra("transitionend"),V0=new Map,hd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hd.push("scrollEnd");function Wi(n,r){V0.set(n,r),ai(r,[n])}var Nu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},ki=[],fo=0,fd=0;function Iu(){for(var n=fo,r=fd=fo=0;r<n;){var a=ki[r];ki[r++]=null;var l=ki[r];ki[r++]=null;var f=ki[r];ki[r++]=null;var d=ki[r];if(ki[r++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&P0(a,f,d)}}function Du(n,r,a,l){ki[fo++]=n,ki[fo++]=r,ki[fo++]=a,ki[fo++]=l,fd|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function dd(n,r,a,l){return Du(n,r,a,l),Ou(n)}function Ca(n,r){return Du(n,null,null,r),Ou(n)}function P0(n,r,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&r!==null&&(f=31-Rt(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[r]:l.push(r),r.lane=a|536870912),d):null}function Ou(n){if(50<Zl)throw Zl=0,Tm=null,Error(s(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var mo={};function _S(n,r,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pi(n,r,a,l){return new _S(n,r,a,l)}function md(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Vr(n,r){var a=n.alternate;return a===null?(a=pi(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function L0(n,r){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,r=a.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function Mu(n,r,a,l,f,d){var _=0;if(l=n,typeof n=="function")md(n)&&(_=1);else if(typeof n=="string")_=SA(n,a,fe.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case N:return n=pi(31,a,r,f),n.elementType=N,n.lanes=d,n;case z:return Na(a.children,f,d,r);case D:_=8,f|=24;break;case B:return n=pi(12,a,r,f|2),n.elementType=B,n.lanes=d,n;case ie:return n=pi(13,a,r,f),n.elementType=ie,n.lanes=d,n;case J:return n=pi(19,a,r,f),n.elementType=J,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Y:_=10;break e;case ee:_=9;break e;case ce:_=11;break e;case x:_=14;break e;case R:_=16,l=null;break e}_=29,a=Error(s(130,n===null?"null":typeof n,"")),l=null}return r=pi(_,a,r,f),r.elementType=n,r.type=l,r.lanes=d,r}function Na(n,r,a,l){return n=pi(7,n,l,r),n.lanes=a,n}function gd(n,r,a){return n=pi(6,n,null,r),n.lanes=a,n}function j0(n){var r=pi(18,null,null,0);return r.stateNode=n,r}function pd(n,r,a){return r=pi(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var U0=new WeakMap;function Vi(n,r){if(typeof n=="object"&&n!==null){var a=U0.get(n);return a!==void 0?a:(r={value:n,source:r,stack:Hi(r)},U0.set(n,r),r)}return{value:n,source:r,stack:Hi(r)}}var go=[],po=0,ku=null,Dl=0,Pi=[],Li=0,_s=null,yr=1,vr="";function Pr(n,r){go[po++]=Dl,go[po++]=ku,ku=n,Dl=r}function z0(n,r,a){Pi[Li++]=yr,Pi[Li++]=vr,Pi[Li++]=_s,_s=n;var l=yr;n=vr;var f=32-Rt(l)-1;l&=~(1<<f),a+=1;var d=32-Rt(r)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,yr=1<<32-Rt(r)+f|a<<f|l,vr=d+n}else yr=1<<d|a<<f|l,vr=n}function yd(n){n.return!==null&&(Pr(n,1),z0(n,1,0))}function vd(n){for(;n===ku;)ku=go[--po],go[po]=null,Dl=go[--po],go[po]=null;for(;n===_s;)_s=Pi[--Li],Pi[Li]=null,vr=Pi[--Li],Pi[Li]=null,yr=Pi[--Li],Pi[Li]=null}function B0(n,r){Pi[Li++]=yr,Pi[Li++]=vr,Pi[Li++]=_s,yr=r.id,vr=r.overflow,_s=n}var Rn=null,It=null,nt=!1,bs=null,ji=!1,_d=Error(s(519));function Es(n){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ol(Vi(r,n)),_d}function q0(n){var r=n.stateNode,a=n.type,l=n.memoizedProps;switch(r[Lt]=n,r[Kt]=l,a){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(a=0;a<ec.length;a++)Qe(ec[a],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":Qe("invalid",r),du(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Qe("invalid",r);break;case"textarea":Qe("invalid",r),fs(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||s_(r.textContent,a)?(l.popover!=null&&(Qe("beforetoggle",r),Qe("toggle",r)),l.onScroll!=null&&Qe("scroll",r),l.onScrollEnd!=null&&Qe("scrollend",r),l.onClick!=null&&(r.onclick=Qi),r=!0):r=!1,r||Es(n,!0)}function H0(n){for(Rn=n.return;Rn;)switch(Rn.tag){case 5:case 31:case 13:ji=!1;return;case 27:case 3:ji=!0;return;default:Rn=Rn.return}}function yo(n){if(n!==Rn)return!1;if(!nt)return H0(n),nt=!0,!1;var r=n.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Lm(n.type,n.memoizedProps)),a=!a),a&&It&&Es(n),H0(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));It=m_(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));It=m_(n)}else r===27?(r=It,Vs(n.type)?(n=qm,qm=null,It=n):It=r):It=Rn?zi(n.stateNode.nextSibling):null;return!0}function Ia(){It=Rn=null,nt=!1}function bd(){var n=bs;return n!==null&&(fi===null?fi=n:fi.push.apply(fi,n),bs=null),n}function Ol(n){bs===null?bs=[n]:bs.push(n)}var Ed=P(null),Da=null,Lr=null;function Ts(n,r,a){me(Ed,r._currentValue),r._currentValue=a}function jr(n){n._currentValue=Ed.current,re(Ed)}function Td(n,r,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),n===a)break;n=n.return}}function wd(n,r,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;e:for(;d!==null;){var S=d;d=f;for(var k=0;k<r.length;k++)if(S.context===r[k]){d.lanes|=a,S=d.alternate,S!==null&&(S.lanes|=a),Td(d.return,a,n),l||(_=null);break e}d=S.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(s(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),Td(_,a,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function vo(n,r,a,l){n=null;for(var f=r,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var S=f.type;gi(f.pendingProps.value,_.value)||(n!==null?n.push(S):n=[S])}}else if(f===Pe.current){if(_=f.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(sc):n=[sc])}f=f.return}n!==null&&wd(r,n,a,l),r.flags|=262144}function Vu(n){for(n=n.firstContext;n!==null;){if(!gi(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Oa(n){Da=n,Lr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Cn(n){return F0(Da,n)}function Pu(n,r){return Da===null&&Oa(n),F0(n,r)}function F0(n,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Lr===null){if(n===null)throw Error(s(308));Lr=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Lr=Lr.next=r;return a}var bS=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){r.aborted=!0,n.forEach(function(a){return a()})}},ES=i.unstable_scheduleCallback,TS=i.unstable_NormalPriority,tn={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sd(){return{controller:new bS,data:new Map,refCount:0}}function Ml(n){n.refCount--,n.refCount===0&&ES(TS,function(){n.controller.abort()})}var kl=null,Ad=0,_o=0,bo=null;function wS(n,r){if(kl===null){var a=kl=[];Ad=0,_o=Cm(),bo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ad++,r.then(G0,G0),r}function G0(){if(--Ad===0&&kl!==null){bo!==null&&(bo.status="fulfilled");var n=kl;kl=null,_o=0,bo=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function SS(n,r){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var $0=ne.S;ne.S=function(n,r){Nv=Zt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&wS(n,r),$0!==null&&$0(n,r)};var Ma=P(null);function xd(){var n=Ma.current;return n!==null?n:At.pooledCache}function Lu(n,r){r===null?me(Ma,Ma.current):me(Ma,r.pool)}function K0(){var n=xd();return n===null?null:{parent:tn._currentValue,pool:n}}var Eo=Error(s(460)),Rd=Error(s(474)),ju=Error(s(542)),Uu={then:function(){}};function Q0(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Y0(n,r,a){switch(a=n[a],a===void 0?n.push(r):a!==r&&(r.then(Qi,Qi),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,J0(n),n;default:if(typeof r.status=="string")r.then(Qi,Qi);else{if(n=At,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=r,n.status="pending",n.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,J0(n),n}throw Va=r,Eo}}function ka(n){try{var r=n._init;return r(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Va=a,Eo):a}}var Va=null;function X0(){if(Va===null)throw Error(s(459));var n=Va;return Va=null,n}function J0(n){if(n===Eo||n===ju)throw Error(s(483))}var To=null,Vl=0;function zu(n){var r=Vl;return Vl+=1,To===null&&(To=[]),Y0(To,n,r)}function Pl(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Bu(n,r){throw r.$$typeof===w?Error(s(525)):(n=Object.prototype.toString.call(r),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function Z0(n){function r(q,L){if(n){var G=q.deletions;G===null?(q.deletions=[L],q.flags|=16):G.push(L)}}function a(q,L){if(!n)return null;for(;L!==null;)r(q,L),L=L.sibling;return null}function l(q){for(var L=new Map;q!==null;)q.key!==null?L.set(q.key,q):L.set(q.index,q),q=q.sibling;return L}function f(q,L){return q=Vr(q,L),q.index=0,q.sibling=null,q}function d(q,L,G){return q.index=G,n?(G=q.alternate,G!==null?(G=G.index,G<L?(q.flags|=67108866,L):G):(q.flags|=67108866,L)):(q.flags|=1048576,L)}function _(q){return n&&q.alternate===null&&(q.flags|=67108866),q}function S(q,L,G,ae){return L===null||L.tag!==6?(L=gd(G,q.mode,ae),L.return=q,L):(L=f(L,G),L.return=q,L)}function k(q,L,G,ae){var Re=G.type;return Re===z?se(q,L,G.props.children,ae,G.key):L!==null&&(L.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===R&&ka(Re)===L.type)?(L=f(L,G.props),Pl(L,G),L.return=q,L):(L=Mu(G.type,G.key,G.props,null,q.mode,ae),Pl(L,G),L.return=q,L)}function $(q,L,G,ae){return L===null||L.tag!==4||L.stateNode.containerInfo!==G.containerInfo||L.stateNode.implementation!==G.implementation?(L=pd(G,q.mode,ae),L.return=q,L):(L=f(L,G.children||[]),L.return=q,L)}function se(q,L,G,ae,Re){return L===null||L.tag!==7?(L=Na(G,q.mode,ae,Re),L.return=q,L):(L=f(L,G),L.return=q,L)}function le(q,L,G){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=gd(""+L,q.mode,G),L.return=q,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case C:return G=Mu(L.type,L.key,L.props,null,q.mode,G),Pl(G,L),G.return=q,G;case M:return L=pd(L,q.mode,G),L.return=q,L;case R:return L=ka(L),le(q,L,G)}if(ut(L)||j(L))return L=Na(L,q.mode,G,null),L.return=q,L;if(typeof L.then=="function")return le(q,zu(L),G);if(L.$$typeof===Y)return le(q,Pu(q,L),G);Bu(q,L)}return null}function Q(q,L,G,ae){var Re=L!==null?L.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Re!==null?null:S(q,L,""+G,ae);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case C:return G.key===Re?k(q,L,G,ae):null;case M:return G.key===Re?$(q,L,G,ae):null;case R:return G=ka(G),Q(q,L,G,ae)}if(ut(G)||j(G))return Re!==null?null:se(q,L,G,ae,null);if(typeof G.then=="function")return Q(q,L,zu(G),ae);if(G.$$typeof===Y)return Q(q,L,Pu(q,G),ae);Bu(q,G)}return null}function te(q,L,G,ae,Re){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return q=q.get(G)||null,S(L,q,""+ae,Re);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case C:return q=q.get(ae.key===null?G:ae.key)||null,k(L,q,ae,Re);case M:return q=q.get(ae.key===null?G:ae.key)||null,$(L,q,ae,Re);case R:return ae=ka(ae),te(q,L,G,ae,Re)}if(ut(ae)||j(ae))return q=q.get(G)||null,se(L,q,ae,Re,null);if(typeof ae.then=="function")return te(q,L,G,zu(ae),Re);if(ae.$$typeof===Y)return te(q,L,G,Pu(L,ae),Re);Bu(L,ae)}return null}function Te(q,L,G,ae){for(var Re=null,lt=null,we=L,qe=L=0,Je=null;we!==null&&qe<G.length;qe++){we.index>qe?(Je=we,we=null):Je=we.sibling;var ct=Q(q,we,G[qe],ae);if(ct===null){we===null&&(we=Je);break}n&&we&&ct.alternate===null&&r(q,we),L=d(ct,L,qe),lt===null?Re=ct:lt.sibling=ct,lt=ct,we=Je}if(qe===G.length)return a(q,we),nt&&Pr(q,qe),Re;if(we===null){for(;qe<G.length;qe++)we=le(q,G[qe],ae),we!==null&&(L=d(we,L,qe),lt===null?Re=we:lt.sibling=we,lt=we);return nt&&Pr(q,qe),Re}for(we=l(we);qe<G.length;qe++)Je=te(we,q,qe,G[qe],ae),Je!==null&&(n&&Je.alternate!==null&&we.delete(Je.key===null?qe:Je.key),L=d(Je,L,qe),lt===null?Re=Je:lt.sibling=Je,lt=Je);return n&&we.forEach(function(zs){return r(q,zs)}),nt&&Pr(q,qe),Re}function Ne(q,L,G,ae){if(G==null)throw Error(s(151));for(var Re=null,lt=null,we=L,qe=L=0,Je=null,ct=G.next();we!==null&&!ct.done;qe++,ct=G.next()){we.index>qe?(Je=we,we=null):Je=we.sibling;var zs=Q(q,we,ct.value,ae);if(zs===null){we===null&&(we=Je);break}n&&we&&zs.alternate===null&&r(q,we),L=d(zs,L,qe),lt===null?Re=zs:lt.sibling=zs,lt=zs,we=Je}if(ct.done)return a(q,we),nt&&Pr(q,qe),Re;if(we===null){for(;!ct.done;qe++,ct=G.next())ct=le(q,ct.value,ae),ct!==null&&(L=d(ct,L,qe),lt===null?Re=ct:lt.sibling=ct,lt=ct);return nt&&Pr(q,qe),Re}for(we=l(we);!ct.done;qe++,ct=G.next())ct=te(we,q,qe,ct.value,ae),ct!==null&&(n&&ct.alternate!==null&&we.delete(ct.key===null?qe:ct.key),L=d(ct,L,qe),lt===null?Re=ct:lt.sibling=ct,lt=ct);return n&&we.forEach(function(VA){return r(q,VA)}),nt&&Pr(q,qe),Re}function wt(q,L,G,ae){if(typeof G=="object"&&G!==null&&G.type===z&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case C:e:{for(var Re=G.key;L!==null;){if(L.key===Re){if(Re=G.type,Re===z){if(L.tag===7){a(q,L.sibling),ae=f(L,G.props.children),ae.return=q,q=ae;break e}}else if(L.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===R&&ka(Re)===L.type){a(q,L.sibling),ae=f(L,G.props),Pl(ae,G),ae.return=q,q=ae;break e}a(q,L);break}else r(q,L);L=L.sibling}G.type===z?(ae=Na(G.props.children,q.mode,ae,G.key),ae.return=q,q=ae):(ae=Mu(G.type,G.key,G.props,null,q.mode,ae),Pl(ae,G),ae.return=q,q=ae)}return _(q);case M:e:{for(Re=G.key;L!==null;){if(L.key===Re)if(L.tag===4&&L.stateNode.containerInfo===G.containerInfo&&L.stateNode.implementation===G.implementation){a(q,L.sibling),ae=f(L,G.children||[]),ae.return=q,q=ae;break e}else{a(q,L);break}else r(q,L);L=L.sibling}ae=pd(G,q.mode,ae),ae.return=q,q=ae}return _(q);case R:return G=ka(G),wt(q,L,G,ae)}if(ut(G))return Te(q,L,G,ae);if(j(G)){if(Re=j(G),typeof Re!="function")throw Error(s(150));return G=Re.call(G),Ne(q,L,G,ae)}if(typeof G.then=="function")return wt(q,L,zu(G),ae);if(G.$$typeof===Y)return wt(q,L,Pu(q,G),ae);Bu(q,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,L!==null&&L.tag===6?(a(q,L.sibling),ae=f(L,G),ae.return=q,q=ae):(a(q,L),ae=gd(G,q.mode,ae),ae.return=q,q=ae),_(q)):a(q,L)}return function(q,L,G,ae){try{Vl=0;var Re=wt(q,L,G,ae);return To=null,Re}catch(we){if(we===Eo||we===ju)throw we;var lt=pi(29,we,null,q.mode);return lt.lanes=ae,lt.return=q,lt}}}var Pa=Z0(!0),W0=Z0(!1),ws=!1;function Cd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nd(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ss(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function As(n,r,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(ft&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=Ou(n),P0(n,null,a),r}return Du(n,l,r,a),Ou(n)}function Ll(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,$t(n,a)}}function Id(n,r){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=r:d=d.next=r}else f=d=r;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}var Dd=!1;function jl(){if(Dd){var n=bo;if(n!==null)throw n}}function Ul(n,r,a,l){Dd=!1;var f=n.updateQueue;ws=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var k=S,$=k.next;k.next=null,_===null?d=$:_.next=$,_=k;var se=n.alternate;se!==null&&(se=se.updateQueue,S=se.lastBaseUpdate,S!==_&&(S===null?se.firstBaseUpdate=$:S.next=$,se.lastBaseUpdate=k))}if(d!==null){var le=f.baseState;_=0,se=$=k=null,S=d;do{var Q=S.lane&-536870913,te=Q!==S.lane;if(te?(Xe&Q)===Q:(l&Q)===Q){Q!==0&&Q===_o&&(Dd=!0),se!==null&&(se=se.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Te=n,Ne=S;Q=r;var wt=a;switch(Ne.tag){case 1:if(Te=Ne.payload,typeof Te=="function"){le=Te.call(wt,le,Q);break e}le=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ne.payload,Q=typeof Te=="function"?Te.call(wt,le,Q):Te,Q==null)break e;le=E({},le,Q);break e;case 2:ws=!0}}Q=S.callback,Q!==null&&(n.flags|=64,te&&(n.flags|=8192),te=f.callbacks,te===null?f.callbacks=[Q]:te.push(Q))}else te={lane:Q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},se===null?($=se=te,k=le):se=se.next=te,_|=Q;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;te=S,S=te.next,te.next=null,f.lastBaseUpdate=te,f.shared.pending=null}}while(!0);se===null&&(k=le),f.baseState=k,f.firstBaseUpdate=$,f.lastBaseUpdate=se,d===null&&(f.shared.lanes=0),Is|=_,n.lanes=_,n.memoizedState=le}}function ey(n,r){if(typeof n!="function")throw Error(s(191,n));n.call(r)}function ty(n,r){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)ey(a[n],r)}var wo=P(null),qu=P(0);function ny(n,r){n=Kr,me(qu,n),me(wo,r),Kr=n|r.baseLanes}function Od(){me(qu,Kr),me(wo,wo.current)}function Md(){Kr=qu.current,re(wo),re(qu)}var yi=P(null),Ui=null;function xs(n){var r=n.alternate;me(Yt,Yt.current&1),me(yi,n),Ui===null&&(r===null||wo.current!==null||r.memoizedState!==null)&&(Ui=n)}function kd(n){me(Yt,Yt.current),me(yi,n),Ui===null&&(Ui=n)}function iy(n){n.tag===22?(me(Yt,Yt.current),me(yi,n),Ui===null&&(Ui=n)):Rs()}function Rs(){me(Yt,Yt.current),me(yi,yi.current)}function vi(n){re(yi),Ui===n&&(Ui=null),re(Yt)}var Yt=P(0);function Hu(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||zm(a)||Bm(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ur=0,Be=null,Et=null,nn=null,Fu=!1,So=!1,La=!1,Gu=0,zl=0,Ao=null,AS=0;function qt(){throw Error(s(321))}function Vd(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!gi(n[a],r[a]))return!1;return!0}function Pd(n,r,a,l,f,d){return Ur=d,Be=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ne.H=n===null||n.memoizedState===null?zy:Jd,La=!1,d=a(l,f),La=!1,So&&(d=sy(r,a,l,f)),ry(n),d}function ry(n){ne.H=Hl;var r=Et!==null&&Et.next!==null;if(Ur=0,nn=Et=Be=null,Fu=!1,zl=0,Ao=null,r)throw Error(s(300));n===null||rn||(n=n.dependencies,n!==null&&Vu(n)&&(rn=!0))}function sy(n,r,a,l){Be=n;var f=0;do{if(So&&(Ao=null),zl=0,So=!1,25<=f)throw Error(s(301));if(f+=1,nn=Et=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}ne.H=By,d=r(a,l)}while(So);return d}function xS(){var n=ne.H,r=n.useState()[0];return r=typeof r.then=="function"?Bl(r):r,n=n.useState()[0],(Et!==null?Et.memoizedState:null)!==n&&(Be.flags|=1024),r}function Ld(){var n=Gu!==0;return Gu=0,n}function jd(n,r,a){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~a}function Ud(n){if(Fu){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Fu=!1}Ur=0,nn=Et=Be=null,So=!1,zl=Gu=0,Ao=null}function Zn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?Be.memoizedState=nn=n:nn=nn.next=n,nn}function Xt(){if(Et===null){var n=Be.alternate;n=n!==null?n.memoizedState:null}else n=Et.next;var r=nn===null?Be.memoizedState:nn.next;if(r!==null)nn=r,Et=n;else{if(n===null)throw Be.alternate===null?Error(s(467)):Error(s(310));Et=n,n={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},nn===null?Be.memoizedState=nn=n:nn=nn.next=n}return nn}function $u(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bl(n){var r=zl;return zl+=1,Ao===null&&(Ao=[]),n=Y0(Ao,n,r),r=Be,(nn===null?r.memoizedState:nn.next)===null&&(r=r.alternate,ne.H=r===null||r.memoizedState===null?zy:Jd),n}function Ku(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Bl(n);if(n.$$typeof===Y)return Cn(n)}throw Error(s(438,String(n)))}function zd(n){var r=null,a=Be.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Be.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=$u(),Be.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(n),l=0;l<n;l++)a[l]=V;return r.index++,a}function zr(n,r){return typeof r=="function"?r(n):r}function Qu(n){var r=Xt();return Bd(r,Et,n)}function Bd(n,r,a){var l=n.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}r.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{r=f.next;var S=_=null,k=null,$=r,se=!1;do{var le=$.lane&-536870913;if(le!==$.lane?(Xe&le)===le:(Ur&le)===le){var Q=$.revertLane;if(Q===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),le===_o&&(se=!0);else if((Ur&Q)===Q){$=$.next,Q===_o&&(se=!0);continue}else le={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},k===null?(S=k=le,_=d):k=k.next=le,Be.lanes|=Q,Is|=Q;le=$.action,La&&a(d,le),d=$.hasEagerState?$.eagerState:a(d,le)}else Q={lane:le,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},k===null?(S=k=Q,_=d):k=k.next=Q,Be.lanes|=le,Is|=le;$=$.next}while($!==null&&$!==r);if(k===null?_=d:k.next=S,!gi(d,n.memoizedState)&&(rn=!0,se&&(a=bo,a!==null)))throw a;n.memoizedState=d,n.baseState=_,n.baseQueue=k,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function qd(n){var r=Xt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=r.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);gi(d,r.memoizedState)||(rn=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,l]}function ay(n,r,a){var l=Be,f=Xt(),d=nt;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=r();var _=!gi((Et||f).memoizedState,a);if(_&&(f.memoizedState=a,rn=!0),f=f.queue,Gd(cy.bind(null,l,f,n),[n]),f.getSnapshot!==r||_||nn!==null&&nn.memoizedState.tag&1){if(l.flags|=2048,xo(9,{destroy:void 0},ly.bind(null,l,f,a,r),null),At===null)throw Error(s(349));d||(Ur&127)!==0||oy(l,r,a)}return a}function oy(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=Be.updateQueue,r===null?(r=$u(),Be.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function ly(n,r,a,l){r.value=a,r.getSnapshot=l,uy(r)&&hy(n)}function cy(n,r,a){return a(function(){uy(r)&&hy(n)})}function uy(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!gi(n,a)}catch{return!0}}function hy(n){var r=Ca(n,2);r!==null&&di(r,n,2)}function Hd(n){var r=Zn();if(typeof n=="function"){var a=n;if(n=a(),La){yn(!0);try{a()}finally{yn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zr,lastRenderedState:n},r}function fy(n,r,a,l){return n.baseState=a,Bd(n,Et,typeof l=="function"?l:zr)}function RS(n,r,a,l,f){if(Ju(n))throw Error(s(485));if(n=r.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};ne.T!==null?a(!0):d.isTransition=!1,l(d),a=r.pending,a===null?(d.next=r.pending=d,dy(r,d)):(d.next=a.next,r.pending=a.next=d)}}function dy(n,r){var a=r.action,l=r.payload,f=n.state;if(r.isTransition){var d=ne.T,_={};ne.T=_;try{var S=a(f,l),k=ne.S;k!==null&&k(_,S),my(n,r,S)}catch($){Fd(n,r,$)}finally{d!==null&&_.types!==null&&(d.types=_.types),ne.T=d}}else try{d=a(f,l),my(n,r,d)}catch($){Fd(n,r,$)}}function my(n,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){gy(n,r,l)},function(l){return Fd(n,r,l)}):gy(n,r,a)}function gy(n,r,a){r.status="fulfilled",r.value=a,py(r),n.state=a,r=n.pending,r!==null&&(a=r.next,a===r?n.pending=null:(a=a.next,r.next=a,dy(n,a)))}function Fd(n,r,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,py(r),r=r.next;while(r!==l)}n.action=null}function py(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function yy(n,r){return r}function vy(n,r){if(nt){var a=At.formState;if(a!==null){e:{var l=Be;if(nt){if(It){t:{for(var f=It,d=ji;f.nodeType!==8;){if(!d){f=null;break t}if(f=zi(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){It=zi(f.nextSibling),l=f.data==="F!";break e}}Es(l)}l=!1}l&&(r=a[0])}}return a=Zn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yy,lastRenderedState:r},a.queue=l,a=Ly.bind(null,Be,l),l.dispatch=a,l=Hd(!1),d=Xd.bind(null,Be,!1,l.queue),l=Zn(),f={state:r,dispatch:null,action:n,pending:null},l.queue=f,a=RS.bind(null,Be,f,d,a),f.dispatch=a,l.memoizedState=n,[r,a,!1]}function _y(n){var r=Xt();return by(r,Et,n)}function by(n,r,a){if(r=Bd(n,r,yy)[0],n=Qu(zr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Bl(r)}catch(_){throw _===Eo?ju:_}else l=r;r=Xt();var f=r.queue,d=f.dispatch;return a!==r.memoizedState&&(Be.flags|=2048,xo(9,{destroy:void 0},CS.bind(null,f,a),null)),[l,d,n]}function CS(n,r){n.action=r}function Ey(n){var r=Xt(),a=Et;if(a!==null)return by(r,a,n);Xt(),r=r.memoizedState,a=Xt();var l=a.queue.dispatch;return a.memoizedState=n,[r,l,!1]}function xo(n,r,a,l){return n={tag:n,create:a,deps:l,inst:r,next:null},r=Be.updateQueue,r===null&&(r=$u(),Be.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,r.lastEffect=n),n}function Ty(){return Xt().memoizedState}function Yu(n,r,a,l){var f=Zn();Be.flags|=n,f.memoizedState=xo(1|r,{destroy:void 0},a,l===void 0?null:l)}function Xu(n,r,a,l){var f=Xt();l=l===void 0?null:l;var d=f.memoizedState.inst;Et!==null&&l!==null&&Vd(l,Et.memoizedState.deps)?f.memoizedState=xo(r,d,a,l):(Be.flags|=n,f.memoizedState=xo(1|r,d,a,l))}function wy(n,r){Yu(8390656,8,n,r)}function Gd(n,r){Xu(2048,8,n,r)}function NS(n){Be.flags|=4;var r=Be.updateQueue;if(r===null)r=$u(),Be.updateQueue=r,r.events=[n];else{var a=r.events;a===null?r.events=[n]:a.push(n)}}function Sy(n){var r=Xt().memoizedState;return NS({ref:r,nextImpl:n}),function(){if((ft&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function Ay(n,r){return Xu(4,2,n,r)}function xy(n,r){return Xu(4,4,n,r)}function Ry(n,r){if(typeof r=="function"){n=n();var a=r(n);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Cy(n,r,a){a=a!=null?a.concat([n]):null,Xu(4,4,Ry.bind(null,r,n),a)}function $d(){}function Ny(n,r){var a=Xt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Vd(r,l[1])?l[0]:(a.memoizedState=[n,r],n)}function Iy(n,r){var a=Xt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Vd(r,l[1]))return l[0];if(l=n(),La){yn(!0);try{n()}finally{yn(!1)}}return a.memoizedState=[l,r],l}function Kd(n,r,a){return a===void 0||(Ur&1073741824)!==0&&(Xe&261930)===0?n.memoizedState=r:(n.memoizedState=a,n=Dv(),Be.lanes|=n,Is|=n,a)}function Dy(n,r,a,l){return gi(a,r)?a:wo.current!==null?(n=Kd(n,a,l),gi(n,r)||(rn=!0),n):(Ur&42)===0||(Ur&1073741824)!==0&&(Xe&261930)===0?(rn=!0,n.memoizedState=a):(n=Dv(),Be.lanes|=n,Is|=n,r)}function Oy(n,r,a,l,f){var d=he.p;he.p=d!==0&&8>d?d:8;var _=ne.T,S={};ne.T=S,Xd(n,!1,r,a);try{var k=f(),$=ne.S;if($!==null&&$(S,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var se=SS(k,l);ql(n,r,se,Ei(n))}else ql(n,r,l,Ei(n))}catch(le){ql(n,r,{then:function(){},status:"rejected",reason:le},Ei())}finally{he.p=d,_!==null&&S.types!==null&&(_.types=S.types),ne.T=_}}function IS(){}function Qd(n,r,a,l){if(n.tag!==5)throw Error(s(476));var f=My(n).queue;Oy(n,f,r,_e,a===null?IS:function(){return ky(n),a(l)})}function My(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zr,lastRenderedState:_e},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zr,lastRenderedState:a},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function ky(n){var r=My(n);r.next===null&&(r=n.alternate.memoizedState),ql(n,r.next.queue,{},Ei())}function Yd(){return Cn(sc)}function Vy(){return Xt().memoizedState}function Py(){return Xt().memoizedState}function DS(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var a=Ei();n=Ss(a);var l=As(r,n,a);l!==null&&(di(l,r,a),Ll(l,r,a)),r={cache:Sd()},n.payload=r;return}r=r.return}}function OS(n,r,a){var l=Ei();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ju(n)?jy(r,a):(a=dd(n,r,a,l),a!==null&&(di(a,n,l),Uy(a,r,l)))}function Ly(n,r,a){var l=Ei();ql(n,r,a,l)}function ql(n,r,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ju(n))jy(r,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var _=r.lastRenderedState,S=d(_,a);if(f.hasEagerState=!0,f.eagerState=S,gi(S,_))return Du(n,r,f,0),At===null&&Iu(),!1}catch{}if(a=dd(n,r,f,l),a!==null)return di(a,n,l),Uy(a,r,l),!0}return!1}function Xd(n,r,a,l){if(l={lane:2,revertLane:Cm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ju(n)){if(r)throw Error(s(479))}else r=dd(n,a,l,2),r!==null&&di(r,n,2)}function Ju(n){var r=n.alternate;return n===Be||r!==null&&r===Be}function jy(n,r){So=Fu=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function Uy(n,r,a){if((a&4194048)!==0){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,$t(n,a)}}var Hl={readContext:Cn,use:Ku,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt,useHostTransitionStatus:qt,useFormState:qt,useActionState:qt,useOptimistic:qt,useMemoCache:qt,useCacheRefresh:qt};Hl.useEffectEvent=qt;var zy={readContext:Cn,use:Ku,useCallback:function(n,r){return Zn().memoizedState=[n,r===void 0?null:r],n},useContext:Cn,useEffect:wy,useImperativeHandle:function(n,r,a){a=a!=null?a.concat([n]):null,Yu(4194308,4,Ry.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Yu(4194308,4,n,r)},useInsertionEffect:function(n,r){Yu(4,2,n,r)},useMemo:function(n,r){var a=Zn();r=r===void 0?null:r;var l=n();if(La){yn(!0);try{n()}finally{yn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(n,r,a){var l=Zn();if(a!==void 0){var f=a(r);if(La){yn(!0);try{a(r)}finally{yn(!1)}}}else f=r;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=OS.bind(null,Be,n),[l.memoizedState,n]},useRef:function(n){var r=Zn();return n={current:n},r.memoizedState=n},useState:function(n){n=Hd(n);var r=n.queue,a=Ly.bind(null,Be,r);return r.dispatch=a,[n.memoizedState,a]},useDebugValue:$d,useDeferredValue:function(n,r){var a=Zn();return Kd(a,n,r)},useTransition:function(){var n=Hd(!1);return n=Oy.bind(null,Be,n.queue,!0,!1),Zn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,a){var l=Be,f=Zn();if(nt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),At===null)throw Error(s(349));(Xe&127)!==0||oy(l,r,a)}f.memoizedState=a;var d={value:a,getSnapshot:r};return f.queue=d,wy(cy.bind(null,l,d,n),[n]),l.flags|=2048,xo(9,{destroy:void 0},ly.bind(null,l,d,a,r),null),a},useId:function(){var n=Zn(),r=At.identifierPrefix;if(nt){var a=vr,l=yr;a=(l&~(1<<32-Rt(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Gu++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=AS++,r="_"+r+"r_"+a.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:Yd,useFormState:vy,useActionState:vy,useOptimistic:function(n){var r=Zn();r.memoizedState=r.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Xd.bind(null,Be,!0,a),a.dispatch=r,[n,r]},useMemoCache:zd,useCacheRefresh:function(){return Zn().memoizedState=DS.bind(null,Be)},useEffectEvent:function(n){var r=Zn(),a={impl:n};return r.memoizedState=a,function(){if((ft&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Jd={readContext:Cn,use:Ku,useCallback:Ny,useContext:Cn,useEffect:Gd,useImperativeHandle:Cy,useInsertionEffect:Ay,useLayoutEffect:xy,useMemo:Iy,useReducer:Qu,useRef:Ty,useState:function(){return Qu(zr)},useDebugValue:$d,useDeferredValue:function(n,r){var a=Xt();return Dy(a,Et.memoizedState,n,r)},useTransition:function(){var n=Qu(zr)[0],r=Xt().memoizedState;return[typeof n=="boolean"?n:Bl(n),r]},useSyncExternalStore:ay,useId:Vy,useHostTransitionStatus:Yd,useFormState:_y,useActionState:_y,useOptimistic:function(n,r){var a=Xt();return fy(a,Et,n,r)},useMemoCache:zd,useCacheRefresh:Py};Jd.useEffectEvent=Sy;var By={readContext:Cn,use:Ku,useCallback:Ny,useContext:Cn,useEffect:Gd,useImperativeHandle:Cy,useInsertionEffect:Ay,useLayoutEffect:xy,useMemo:Iy,useReducer:qd,useRef:Ty,useState:function(){return qd(zr)},useDebugValue:$d,useDeferredValue:function(n,r){var a=Xt();return Et===null?Kd(a,n,r):Dy(a,Et.memoizedState,n,r)},useTransition:function(){var n=qd(zr)[0],r=Xt().memoizedState;return[typeof n=="boolean"?n:Bl(n),r]},useSyncExternalStore:ay,useId:Vy,useHostTransitionStatus:Yd,useFormState:Ey,useActionState:Ey,useOptimistic:function(n,r){var a=Xt();return Et!==null?fy(a,Et,n,r):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:zd,useCacheRefresh:Py};By.useEffectEvent=Sy;function Zd(n,r,a,l){r=n.memoizedState,a=a(l,r),a=a==null?r:E({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Wd={enqueueSetState:function(n,r,a){n=n._reactInternals;var l=Ei(),f=Ss(l);f.payload=r,a!=null&&(f.callback=a),r=As(n,f,l),r!==null&&(di(r,n,l),Ll(r,n,l))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var l=Ei(),f=Ss(l);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=As(n,f,l),r!==null&&(di(r,n,l),Ll(r,n,l))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=Ei(),l=Ss(a);l.tag=2,r!=null&&(l.callback=r),r=As(n,l,a),r!==null&&(di(r,n,a),Ll(r,n,a))}};function qy(n,r,a,l,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,_):r.prototype&&r.prototype.isPureReactComponent?!Nl(a,l)||!Nl(f,d):!0}function Hy(n,r,a,l){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==n&&Wd.enqueueReplaceState(r,r.state,null)}function ja(n,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(n=n.defaultProps){a===r&&(a=E({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function Fy(n){Nu(n)}function Gy(n){console.error(n)}function $y(n){Nu(n)}function Zu(n,r){try{var a=n.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Ky(n,r,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function em(n,r,a){return a=Ss(a),a.tag=3,a.payload={element:null},a.callback=function(){Zu(n,r)},a}function Qy(n){return n=Ss(n),n.tag=3,n}function Yy(n,r,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){Ky(r,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){Ky(r,a,l),typeof f!="function"&&(Ds===null?Ds=new Set([this]):Ds.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function MS(n,r,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&vo(r,a,f,!0),a=yi.current,a!==null){switch(a.tag){case 31:case 13:return Ui===null?uh():a.alternate===null&&Ht===0&&(Ht=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Uu?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Am(n,l,f)),!1;case 22:return a.flags|=65536,l===Uu?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Am(n,l,f)),!1}throw Error(s(435,a.tag))}return Am(n,l,f),uh(),!1}if(nt)return r=yi.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==_d&&(n=Error(s(422),{cause:l}),Ol(Vi(n,a)))):(l!==_d&&(r=Error(s(423),{cause:l}),Ol(Vi(r,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Vi(l,a),f=em(n.stateNode,l,f),Id(n,f),Ht!==4&&(Ht=2)),!1;var d=Error(s(520),{cause:l});if(d=Vi(d,a),Jl===null?Jl=[d]:Jl.push(d),Ht!==4&&(Ht=2),r===null)return!0;l=Vi(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=em(a.stateNode,l,n),Id(a,n),!1;case 1:if(r=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ds===null||!Ds.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Qy(f),Yy(f,n,a,l),Id(a,f),!1}a=a.return}while(a!==null);return!1}var tm=Error(s(461)),rn=!1;function Nn(n,r,a,l){r.child=n===null?W0(r,null,a,l):Pa(r,n.child,a,l)}function Xy(n,r,a,l,f){a=a.render;var d=r.ref;if("ref"in l){var _={};for(var S in l)S!=="ref"&&(_[S]=l[S])}else _=l;return Oa(r),l=Pd(n,r,a,_,d,f),S=Ld(),n!==null&&!rn?(jd(n,r,f),Br(n,r,f)):(nt&&S&&yd(r),r.flags|=1,Nn(n,r,l,f),r.child)}function Jy(n,r,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!md(d)&&d.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=d,Zy(n,r,d,l,f)):(n=Mu(a.type,null,l,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(d=n.child,!cm(n,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Nl,a(_,l)&&n.ref===r.ref)return Br(n,r,f)}return r.flags|=1,n=Vr(d,l),n.ref=r.ref,n.return=r,r.child=n}function Zy(n,r,a,l,f){if(n!==null){var d=n.memoizedProps;if(Nl(d,l)&&n.ref===r.ref)if(rn=!1,r.pendingProps=l=d,cm(n,f))(n.flags&131072)!==0&&(rn=!0);else return r.lanes=n.lanes,Br(n,r,f)}return nm(n,r,a,l,f)}function Wy(n,r,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=r.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,r.child=null;return ev(n,r,d,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&Lu(r,d!==null?d.cachePool:null),d!==null?ny(r,d):Od(),iy(r);else return l=r.lanes=536870912,ev(n,r,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Lu(r,d.cachePool),ny(r,d),Rs(),r.memoizedState=null):(n!==null&&Lu(r,null),Od(),Rs());return Nn(n,r,f,a),r.child}function Fl(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function ev(n,r,a,l,f){var d=xd();return d=d===null?null:{parent:tn._currentValue,pool:d},r.memoizedState={baseLanes:a,cachePool:d},n!==null&&Lu(r,null),Od(),iy(r),n!==null&&vo(n,r,l,!0),r.childLanes=f,null}function Wu(n,r){return r=th({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function tv(n,r,a){return Pa(r,n.child,null,a),n=Wu(r,r.pendingProps),n.flags|=2,vi(r),r.memoizedState=null,n}function kS(n,r,a){var l=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(nt){if(l.mode==="hidden")return n=Wu(r,l),r.lanes=536870912,Fl(null,n);if(kd(r),(n=It)?(n=d_(n,ji),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:_s!==null?{id:yr,overflow:vr}:null,retryLane:536870912,hydrationErrors:null},a=j0(n),a.return=r,r.child=a,Rn=r,It=null)):n=null,n===null)throw Es(r);return r.lanes=536870912,null}return Wu(r,l)}var d=n.memoizedState;if(d!==null){var _=d.dehydrated;if(kd(r),f)if(r.flags&256)r.flags&=-257,r=tv(n,r,a);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(s(558));else if(rn||vo(n,r,a,!1),f=(a&n.childLanes)!==0,rn||f){if(l=At,l!==null&&(_=de(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Ca(n,_),di(l,n,_),tm;uh(),r=tv(n,r,a)}else n=d.treeContext,It=zi(_.nextSibling),Rn=r,nt=!0,bs=null,ji=!1,n!==null&&B0(r,n),r=Wu(r,l),r.flags|=4096;return r}return n=Vr(n.child,{mode:l.mode,children:l.children}),n.ref=r.ref,r.child=n,n.return=r,n}function eh(n,r){var a=r.ref;if(a===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(n===null||n.ref!==a)&&(r.flags|=4194816)}}function nm(n,r,a,l,f){return Oa(r),a=Pd(n,r,a,l,void 0,f),l=Ld(),n!==null&&!rn?(jd(n,r,f),Br(n,r,f)):(nt&&l&&yd(r),r.flags|=1,Nn(n,r,a,f),r.child)}function nv(n,r,a,l,f,d){return Oa(r),r.updateQueue=null,a=sy(r,l,a,f),ry(n),l=Ld(),n!==null&&!rn?(jd(n,r,d),Br(n,r,d)):(nt&&l&&yd(r),r.flags|=1,Nn(n,r,a,d),r.child)}function iv(n,r,a,l,f){if(Oa(r),r.stateNode===null){var d=mo,_=a.contextType;typeof _=="object"&&_!==null&&(d=Cn(_)),d=new a(l,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Wd,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=l,d.state=r.memoizedState,d.refs={},Cd(r),_=a.contextType,d.context=typeof _=="object"&&_!==null?Cn(_):mo,d.state=r.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Zd(r,a,_,l),d.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Wd.enqueueReplaceState(d,d.state,null),Ul(r,l,d,f),jl(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(n===null){d=r.stateNode;var S=r.memoizedProps,k=ja(a,S);d.props=k;var $=d.context,se=a.contextType;_=mo,typeof se=="object"&&se!==null&&(_=Cn(se));var le=a.getDerivedStateFromProps;se=typeof le=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=r.pendingProps!==S,se||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||$!==_)&&Hy(r,d,l,_),ws=!1;var Q=r.memoizedState;d.state=Q,Ul(r,l,d,f),jl(),$=r.memoizedState,S||Q!==$||ws?(typeof le=="function"&&(Zd(r,a,le,l),$=r.memoizedState),(k=ws||qy(r,a,k,l,Q,$,_))?(se||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=$),d.props=l,d.state=$,d.context=_,l=k):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{d=r.stateNode,Nd(n,r),_=r.memoizedProps,se=ja(a,_),d.props=se,le=r.pendingProps,Q=d.context,$=a.contextType,k=mo,typeof $=="object"&&$!==null&&(k=Cn($)),S=a.getDerivedStateFromProps,($=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==le||Q!==k)&&Hy(r,d,l,k),ws=!1,Q=r.memoizedState,d.state=Q,Ul(r,l,d,f),jl();var te=r.memoizedState;_!==le||Q!==te||ws||n!==null&&n.dependencies!==null&&Vu(n.dependencies)?(typeof S=="function"&&(Zd(r,a,S,l),te=r.memoizedState),(se=ws||qy(r,a,se,l,Q,te,k)||n!==null&&n.dependencies!==null&&Vu(n.dependencies))?($||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,te,k),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,te,k)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=te),d.props=l,d.state=te,d.context=k,l=se):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(r.flags|=1024),l=!1)}return d=l,eh(n,r),l=(r.flags&128)!==0,d||l?(d=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,n!==null&&l?(r.child=Pa(r,n.child,null,f),r.child=Pa(r,null,a,f)):Nn(n,r,a,f),r.memoizedState=d.state,n=r.child):n=Br(n,r,f),n}function rv(n,r,a,l){return Ia(),r.flags|=256,Nn(n,r,a,l),r.child}var im={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rm(n){return{baseLanes:n,cachePool:K0()}}function sm(n,r,a){return n=n!==null?n.childLanes&~a:0,r&&(n|=bi),n}function sv(n,r,a){var l=r.pendingProps,f=!1,d=(r.flags&128)!==0,_;if((_=d)||(_=n!==null&&n.memoizedState===null?!1:(Yt.current&2)!==0),_&&(f=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,n===null){if(nt){if(f?xs(r):Rs(),(n=It)?(n=d_(n,ji),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:_s!==null?{id:yr,overflow:vr}:null,retryLane:536870912,hydrationErrors:null},a=j0(n),a.return=r,r.child=a,Rn=r,It=null)):n=null,n===null)throw Es(r);return Bm(n)?r.lanes=32:r.lanes=536870912,null}var S=l.children;return l=l.fallback,f?(Rs(),f=r.mode,S=th({mode:"hidden",children:S},f),l=Na(l,f,a,null),S.return=r,l.return=r,S.sibling=l,r.child=S,l=r.child,l.memoizedState=rm(a),l.childLanes=sm(n,_,a),r.memoizedState=im,Fl(null,l)):(xs(r),am(r,S))}var k=n.memoizedState;if(k!==null&&(S=k.dehydrated,S!==null)){if(d)r.flags&256?(xs(r),r.flags&=-257,r=om(n,r,a)):r.memoizedState!==null?(Rs(),r.child=n.child,r.flags|=128,r=null):(Rs(),S=l.fallback,f=r.mode,l=th({mode:"visible",children:l.children},f),S=Na(S,f,a,null),S.flags|=2,l.return=r,S.return=r,l.sibling=S,r.child=l,Pa(r,n.child,null,a),l=r.child,l.memoizedState=rm(a),l.childLanes=sm(n,_,a),r.memoizedState=im,r=Fl(null,l));else if(xs(r),Bm(S)){if(_=S.nextSibling&&S.nextSibling.dataset,_)var $=_.dgst;_=$,l=Error(s(419)),l.stack="",l.digest=_,Ol({value:l,source:null,stack:null}),r=om(n,r,a)}else if(rn||vo(n,r,a,!1),_=(a&n.childLanes)!==0,rn||_){if(_=At,_!==null&&(l=de(_,a),l!==0&&l!==k.retryLane))throw k.retryLane=l,Ca(n,l),di(_,n,l),tm;zm(S)||uh(),r=om(n,r,a)}else zm(S)?(r.flags|=192,r.child=n.child,r=null):(n=k.treeContext,It=zi(S.nextSibling),Rn=r,nt=!0,bs=null,ji=!1,n!==null&&B0(r,n),r=am(r,l.children),r.flags|=4096);return r}return f?(Rs(),S=l.fallback,f=r.mode,k=n.child,$=k.sibling,l=Vr(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,$!==null?S=Vr($,S):(S=Na(S,f,a,null),S.flags|=2),S.return=r,l.return=r,l.sibling=S,r.child=l,Fl(null,l),l=r.child,S=n.child.memoizedState,S===null?S=rm(a):(f=S.cachePool,f!==null?(k=tn._currentValue,f=f.parent!==k?{parent:k,pool:k}:f):f=K0(),S={baseLanes:S.baseLanes|a,cachePool:f}),l.memoizedState=S,l.childLanes=sm(n,_,a),r.memoizedState=im,Fl(n.child,l)):(xs(r),a=n.child,n=a.sibling,a=Vr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,n!==null&&(_=r.deletions,_===null?(r.deletions=[n],r.flags|=16):_.push(n)),r.child=a,r.memoizedState=null,a)}function am(n,r){return r=th({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function th(n,r){return n=pi(22,n,null,r),n.lanes=0,n}function om(n,r,a){return Pa(r,n.child,null,a),n=am(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function av(n,r,a){n.lanes|=r;var l=n.alternate;l!==null&&(l.lanes|=r),Td(n.return,r,a)}function lm(n,r,a,l,f,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function ov(n,r,a){var l=r.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=Yt.current,S=(_&2)!==0;if(S?(_=_&1|2,r.flags|=128):_&=1,me(Yt,_),Nn(n,r,l,a),l=nt?Dl:0,!S&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&av(n,a,r);else if(n.tag===19)av(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=r.child,f=null;a!==null;)n=a.alternate,n!==null&&Hu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),lm(r,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&Hu(n)===null){r.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}lm(r,!0,a,null,d,l);break;case"together":lm(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function Br(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),Is|=r.lanes,(a&r.childLanes)===0)if(n!==null){if(vo(n,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(s(153));if(r.child!==null){for(n=r.child,a=Vr(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=Vr(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function cm(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&Vu(n)))}function VS(n,r,a){switch(r.tag){case 3:dt(r,r.stateNode.containerInfo),Ts(r,tn,n.memoizedState.cache),Ia();break;case 27:case 5:Fe(r);break;case 4:dt(r,r.stateNode.containerInfo);break;case 10:Ts(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,kd(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(xs(r),r.flags|=128,null):(a&r.child.childLanes)!==0?sv(n,r,a):(xs(r),n=Br(n,r,a),n!==null?n.sibling:null);xs(r);break;case 19:var f=(n.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(vo(n,r,a,!1),l=(a&r.childLanes)!==0),f){if(l)return ov(n,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),me(Yt,Yt.current),l)break;return null;case 22:return r.lanes=0,Wy(n,r,a,r.pendingProps);case 24:Ts(r,tn,n.memoizedState.cache)}return Br(n,r,a)}function lv(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps)rn=!0;else{if(!cm(n,a)&&(r.flags&128)===0)return rn=!1,VS(n,r,a);rn=(n.flags&131072)!==0}else rn=!1,nt&&(r.flags&1048576)!==0&&z0(r,Dl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(n=ka(r.elementType),r.type=n,typeof n=="function")md(n)?(l=ja(n,l),r.tag=1,r=iv(null,r,n,l,a)):(r.tag=0,r=nm(null,r,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===ce){r.tag=11,r=Xy(null,r,n,l,a);break e}else if(f===x){r.tag=14,r=Jy(null,r,n,l,a);break e}}throw r=Ue(n)||n,Error(s(306,r,""))}}return r;case 0:return nm(n,r,r.type,r.pendingProps,a);case 1:return l=r.type,f=ja(l,r.pendingProps),iv(n,r,l,f,a);case 3:e:{if(dt(r,r.stateNode.containerInfo),n===null)throw Error(s(387));l=r.pendingProps;var d=r.memoizedState;f=d.element,Nd(n,r),Ul(r,l,null,a);var _=r.memoizedState;if(l=_.cache,Ts(r,tn,l),l!==d.cache&&wd(r,[tn],a,!0),jl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=rv(n,r,l,a);break e}else if(l!==f){f=Vi(Error(s(424)),r),Ol(f),r=rv(n,r,l,a);break e}else for(n=r.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,It=zi(n.firstChild),Rn=r,nt=!0,bs=null,ji=!0,a=W0(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ia(),l===f){r=Br(n,r,a);break e}Nn(n,r,l,a)}r=r.child}return r;case 26:return eh(n,r),n===null?(a=__(r.type,null,r.pendingProps,null))?r.memoizedState=a:nt||(a=r.type,n=r.pendingProps,l=yh(Ae.current).createElement(a),l[Lt]=r,l[Kt]=n,In(l,a,n),Bt(l),r.stateNode=l):r.memoizedState=__(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return Fe(r),n===null&&nt&&(l=r.stateNode=p_(r.type,r.pendingProps,Ae.current),Rn=r,ji=!0,f=It,Vs(r.type)?(qm=f,It=zi(l.firstChild)):It=f),Nn(n,r,r.pendingProps.children,a),eh(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&nt&&((f=l=It)&&(l=hA(l,r.type,r.pendingProps,ji),l!==null?(r.stateNode=l,Rn=r,It=zi(l.firstChild),ji=!1,f=!0):f=!1),f||Es(r)),Fe(r),f=r.type,d=r.pendingProps,_=n!==null?n.memoizedProps:null,l=d.children,Lm(f,d)?l=null:_!==null&&Lm(f,_)&&(r.flags|=32),r.memoizedState!==null&&(f=Pd(n,r,xS,null,null,a),sc._currentValue=f),eh(n,r),Nn(n,r,l,a),r.child;case 6:return n===null&&nt&&((n=a=It)&&(a=fA(a,r.pendingProps,ji),a!==null?(r.stateNode=a,Rn=r,It=null,n=!0):n=!1),n||Es(r)),null;case 13:return sv(n,r,a);case 4:return dt(r,r.stateNode.containerInfo),l=r.pendingProps,n===null?r.child=Pa(r,null,l,a):Nn(n,r,l,a),r.child;case 11:return Xy(n,r,r.type,r.pendingProps,a);case 7:return Nn(n,r,r.pendingProps,a),r.child;case 8:return Nn(n,r,r.pendingProps.children,a),r.child;case 12:return Nn(n,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Ts(r,r.type,l.value),Nn(n,r,l.children,a),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,Oa(r),f=Cn(f),l=l(f),r.flags|=1,Nn(n,r,l,a),r.child;case 14:return Jy(n,r,r.type,r.pendingProps,a);case 15:return Zy(n,r,r.type,r.pendingProps,a);case 19:return ov(n,r,a);case 31:return kS(n,r,a);case 22:return Wy(n,r,a,r.pendingProps);case 24:return Oa(r),l=Cn(tn),n===null?(f=xd(),f===null&&(f=At,d=Sd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),r.memoizedState={parent:l,cache:f},Cd(r),Ts(r,tn,f)):((n.lanes&a)!==0&&(Nd(n,r),Ul(r,null,null,a),jl()),f=n.memoizedState,d=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Ts(r,tn,l)):(l=d.cache,Ts(r,tn,l),l!==f.cache&&wd(r,[tn],a,!0))),Nn(n,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function qr(n){n.flags|=4}function um(n,r,a,l,f){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Vv())n.flags|=8192;else throw Va=Uu,Rd}else n.flags&=-16777217}function cv(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!S_(r))if(Vv())n.flags|=8192;else throw Va=Uu,Rd}function nh(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Wt():536870912,n.lanes|=r,Io|=r)}function Gl(n,r){if(!nt)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function Dt(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(r)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,r}function PS(n,r,a){var l=r.pendingProps;switch(vd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(r),null;case 1:return Dt(r),null;case 3:return a=r.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),jr(tn),Ge(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(yo(r)?qr(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,bd())),Dt(r),null;case 26:var f=r.type,d=r.memoizedState;return n===null?(qr(r),d!==null?(Dt(r),cv(r,d)):(Dt(r),um(r,f,null,l,a))):d?d!==n.memoizedState?(qr(r),Dt(r),cv(r,d)):(Dt(r),r.flags&=-16777217):(n=n.memoizedProps,n!==l&&qr(r),Dt(r),um(r,f,n,l,a)),null;case 27:if(ri(r),a=Ae.current,f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==l&&qr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return Dt(r),null}n=fe.current,yo(r)?q0(r):(n=p_(f,l,a),r.stateNode=n,qr(r))}return Dt(r),null;case 5:if(ri(r),f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==l&&qr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return Dt(r),null}if(d=fe.current,yo(r))q0(r);else{var _=yh(Ae.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[Lt]=r,d[Kt]=l;e:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=d;e:switch(In(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&qr(r)}}return Dt(r),um(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,a),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==l&&qr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(n=Ae.current,yo(r)){if(n=r.stateNode,a=r.memoizedProps,l=null,f=Rn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Lt]=r,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||s_(n.nodeValue,a)),n||Es(r,!0)}else n=yh(n).createTextNode(l),n[Lt]=r,r.stateNode=n}return Dt(r),null;case 31:if(a=r.memoizedState,n===null||n.memoizedState!==null){if(l=yo(r),a!==null){if(n===null){if(!l)throw Error(s(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[Lt]=r}else Ia(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Dt(r),n=!1}else a=bd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return r.flags&256?(vi(r),r):(vi(r),null);if((r.flags&128)!==0)throw Error(s(558))}return Dt(r),null;case 13:if(l=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=yo(r),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Lt]=r}else Ia(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Dt(r),f=!1}else f=bd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(vi(r),r):(vi(r),null)}return vi(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(r.child.flags|=8192),nh(r,r.updateQueue),Dt(r),null);case 4:return Ge(),n===null&&Om(r.stateNode.containerInfo),Dt(r),null;case 10:return jr(r.type),Dt(r),null;case 19:if(re(Yt),l=r.memoizedState,l===null)return Dt(r),null;if(f=(r.flags&128)!==0,d=l.rendering,d===null)if(f)Gl(l,!1);else{if(Ht!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(d=Hu(n),d!==null){for(r.flags|=128,Gl(l,!1),n=d.updateQueue,r.updateQueue=n,nh(r,n),r.subtreeFlags=0,n=a,a=r.child;a!==null;)L0(a,n),a=a.sibling;return me(Yt,Yt.current&1|2),nt&&Pr(r,l.treeForkCount),r.child}n=n.sibling}l.tail!==null&&Zt()>oh&&(r.flags|=128,f=!0,Gl(l,!1),r.lanes=4194304)}else{if(!f)if(n=Hu(d),n!==null){if(r.flags|=128,f=!0,n=n.updateQueue,r.updateQueue=n,nh(r,n),Gl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!nt)return Dt(r),null}else 2*Zt()-l.renderingStartTime>oh&&a!==536870912&&(r.flags|=128,f=!0,Gl(l,!1),r.lanes=4194304);l.isBackwards?(d.sibling=r.child,r.child=d):(n=l.last,n!==null?n.sibling=d:r.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=Zt(),n.sibling=null,a=Yt.current,me(Yt,f?a&1|2:a&1),nt&&Pr(r,l.treeForkCount),n):(Dt(r),null);case 22:case 23:return vi(r),Md(),l=r.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(Dt(r),r.subtreeFlags&6&&(r.flags|=8192)):Dt(r),a=r.updateQueue,a!==null&&nh(r,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),n!==null&&re(Ma),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),jr(tn),Dt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function LS(n,r){switch(vd(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return jr(tn),Ge(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return ri(r),null;case 31:if(r.memoizedState!==null){if(vi(r),r.alternate===null)throw Error(s(340));Ia()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(vi(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Ia()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return re(Yt),null;case 4:return Ge(),null;case 10:return jr(r.type),null;case 22:case 23:return vi(r),Md(),n!==null&&re(Ma),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return jr(tn),null;case 25:return null;default:return null}}function uv(n,r){switch(vd(r),r.tag){case 3:jr(tn),Ge();break;case 26:case 27:case 5:ri(r);break;case 4:Ge();break;case 31:r.memoizedState!==null&&vi(r);break;case 13:vi(r);break;case 19:re(Yt);break;case 10:jr(r.type);break;case 22:case 23:vi(r),Md(),n!==null&&re(Ma);break;case 24:jr(tn)}}function $l(n,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(S){pt(r,r.return,S)}}function Cs(n,r,a){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var _=l.inst,S=_.destroy;if(S!==void 0){_.destroy=void 0,f=r;var k=a,$=S;try{$()}catch(se){pt(f,k,se)}}}l=l.next}while(l!==d)}}catch(se){pt(r,r.return,se)}}function hv(n){var r=n.updateQueue;if(r!==null){var a=n.stateNode;try{ty(r,a)}catch(l){pt(n,n.return,l)}}}function fv(n,r,a){a.props=ja(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){pt(n,r,l)}}function Kl(n,r){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){pt(n,r,f)}}function _r(n,r){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){pt(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){pt(n,r,f)}else a.current=null}function dv(n){var r=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){pt(n,n.return,f)}}function hm(n,r,a){try{var l=n.stateNode;sA(l,n.type,a,r),l[Kt]=r}catch(f){pt(n,n.return,f)}}function mv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Vs(n.type)||n.tag===4}function fm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||mv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Vs(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function dm(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(n),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Qi));else if(l!==4&&(l===27&&Vs(n.type)&&(a=n.stateNode,r=null),n=n.child,n!==null))for(dm(n,r,a),n=n.sibling;n!==null;)dm(n,r,a),n=n.sibling}function ih(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(l!==4&&(l===27&&Vs(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(ih(n,r,a),n=n.sibling;n!==null;)ih(n,r,a),n=n.sibling}function gv(n){var r=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);In(r,l,a),r[Lt]=n,r[Kt]=a}catch(d){pt(n,n.return,d)}}var Hr=!1,sn=!1,mm=!1,pv=typeof WeakSet=="function"?WeakSet:Set,_n=null;function jS(n,r){if(n=n.containerInfo,Vm=Sh,n=C0(n),od(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,S=-1,k=-1,$=0,se=0,le=n,Q=null;t:for(;;){for(var te;le!==a||f!==0&&le.nodeType!==3||(S=_+f),le!==d||l!==0&&le.nodeType!==3||(k=_+l),le.nodeType===3&&(_+=le.nodeValue.length),(te=le.firstChild)!==null;)Q=le,le=te;for(;;){if(le===n)break t;if(Q===a&&++$===f&&(S=_),Q===d&&++se===l&&(k=_),(te=le.nextSibling)!==null)break;le=Q,Q=le.parentNode}le=te}a=S===-1||k===-1?null:{start:S,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(Pm={focusedElem:n,selectionRange:a},Sh=!1,_n=r;_n!==null;)if(r=_n,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,_n=n;else for(;_n!==null;){switch(r=_n,d=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=r,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Te=ja(a.type,f);n=l.getSnapshotBeforeUpdate(Te,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(Ne){pt(a,a.return,Ne)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,a=n.nodeType,a===9)Um(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Um(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=r.sibling,n!==null){n.return=r.return,_n=n;break}_n=r.return}}function yv(n,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Gr(n,a),l&4&&$l(5,a);break;case 1:if(Gr(n,a),l&4)if(n=a.stateNode,r===null)try{n.componentDidMount()}catch(_){pt(a,a.return,_)}else{var f=ja(a.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(_){pt(a,a.return,_)}}l&64&&hv(a),l&512&&Kl(a,a.return);break;case 3:if(Gr(n,a),l&64&&(n=a.updateQueue,n!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{ty(n,r)}catch(_){pt(a,a.return,_)}}break;case 27:r===null&&l&4&&gv(a);case 26:case 5:Gr(n,a),r===null&&l&4&&dv(a),l&512&&Kl(a,a.return);break;case 12:Gr(n,a);break;case 31:Gr(n,a),l&4&&bv(n,a);break;case 13:Gr(n,a),l&4&&Ev(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=KS.bind(null,a),dA(n,a))));break;case 22:if(l=a.memoizedState!==null||Hr,!l){r=r!==null&&r.memoizedState!==null||sn,f=Hr;var d=sn;Hr=l,(sn=r)&&!d?$r(n,a,(a.subtreeFlags&8772)!==0):Gr(n,a),Hr=f,sn=d}break;case 30:break;default:Gr(n,a)}}function vv(n){var r=n.alternate;r!==null&&(n.alternate=null,vv(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&ls(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Vt=null,ci=!1;function Fr(n,r,a){for(a=a.child;a!==null;)_v(n,r,a),a=a.sibling}function _v(n,r,a){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(Yn,a)}catch{}switch(a.tag){case 26:sn||_r(a,r),Fr(n,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:sn||_r(a,r);var l=Vt,f=ci;Vs(a.type)&&(Vt=a.stateNode,ci=!1),Fr(n,r,a),nc(a.stateNode),Vt=l,ci=f;break;case 5:sn||_r(a,r);case 6:if(l=Vt,f=ci,Vt=null,Fr(n,r,a),Vt=l,ci=f,Vt!==null)if(ci)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(a.stateNode)}catch(d){pt(a,r,d)}else try{Vt.removeChild(a.stateNode)}catch(d){pt(a,r,d)}break;case 18:Vt!==null&&(ci?(n=Vt,h_(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),jo(n)):h_(Vt,a.stateNode));break;case 4:l=Vt,f=ci,Vt=a.stateNode.containerInfo,ci=!0,Fr(n,r,a),Vt=l,ci=f;break;case 0:case 11:case 14:case 15:Cs(2,a,r),sn||Cs(4,a,r),Fr(n,r,a);break;case 1:sn||(_r(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&fv(a,r,l)),Fr(n,r,a);break;case 21:Fr(n,r,a);break;case 22:sn=(l=sn)||a.memoizedState!==null,Fr(n,r,a),sn=l;break;default:Fr(n,r,a)}}function bv(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{jo(n)}catch(a){pt(r,r.return,a)}}}function Ev(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{jo(n)}catch(a){pt(r,r.return,a)}}function US(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new pv),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new pv),r;default:throw Error(s(435,n.tag))}}function rh(n,r){var a=US(n);r.forEach(function(l){if(!a.has(l)){a.add(l);var f=QS.bind(null,n,l);l.then(f,f)}})}function ui(n,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,_=r,S=_;e:for(;S!==null;){switch(S.tag){case 27:if(Vs(S.type)){Vt=S.stateNode,ci=!1;break e}break;case 5:Vt=S.stateNode,ci=!1;break e;case 3:case 4:Vt=S.stateNode.containerInfo,ci=!0;break e}S=S.return}if(Vt===null)throw Error(s(160));_v(d,_,f),Vt=null,ci=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Tv(r,n),r=r.sibling}var er=null;function Tv(n,r){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:ui(r,n),hi(n),l&4&&(Cs(3,n,n.return),$l(3,n),Cs(5,n,n.return));break;case 1:ui(r,n),hi(n),l&512&&(sn||a===null||_r(a,a.return)),l&64&&Hr&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=er;if(ui(r,n),hi(n),l&512&&(sn||a===null||_r(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[xi]||d[Lt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),In(d,l,a),d[Lt]=n,Bt(d),l=d;break e;case"link":var _=T_("link","href",f).get(l+(a.href||""));if(_){for(var S=0;S<_.length;S++)if(d=_[S],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(S,1);break t}}d=f.createElement(l),In(d,l,a),f.head.appendChild(d);break;case"meta":if(_=T_("meta","content",f).get(l+(a.content||""))){for(S=0;S<_.length;S++)if(d=_[S],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(S,1);break t}}d=f.createElement(l),In(d,l,a),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[Lt]=n,Bt(d),l=d}n.stateNode=l}else w_(f,n.type,n.stateNode);else n.stateNode=E_(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?w_(f,n.type,n.stateNode):E_(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&hm(n,n.memoizedProps,a.memoizedProps)}break;case 27:ui(r,n),hi(n),l&512&&(sn||a===null||_r(a,a.return)),a!==null&&l&4&&hm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(ui(r,n),hi(n),l&512&&(sn||a===null||_r(a,a.return)),n.flags&32){f=n.stateNode;try{li(f,"")}catch(Te){pt(n,n.return,Te)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,hm(n,f,a!==null?a.memoizedProps:f)),l&1024&&(mm=!0);break;case 6:if(ui(r,n),hi(n),l&4){if(n.stateNode===null)throw Error(s(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(Te){pt(n,n.return,Te)}}break;case 3:if(bh=null,f=er,er=vh(r.containerInfo),ui(r,n),er=f,hi(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{jo(r.containerInfo)}catch(Te){pt(n,n.return,Te)}mm&&(mm=!1,wv(n));break;case 4:l=er,er=vh(n.stateNode.containerInfo),ui(r,n),hi(n),er=l;break;case 12:ui(r,n),hi(n);break;case 31:ui(r,n),hi(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,rh(n,l)));break;case 13:ui(r,n),hi(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ah=Zt()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,rh(n,l)));break;case 22:f=n.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,$=Hr,se=sn;if(Hr=$||f,sn=se||k,ui(r,n),sn=se,Hr=$,hi(n),l&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||k||Hr||sn||Ua(n)),a=null,r=n;;){if(r.tag===5||r.tag===26){if(a===null){k=a=r;try{if(d=k.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{S=k.stateNode;var le=k.memoizedProps.style,Q=le!=null&&le.hasOwnProperty("display")?le.display:null;S.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Te){pt(k,k.return,Te)}}}else if(r.tag===6){if(a===null){k=r;try{k.stateNode.nodeValue=f?"":k.memoizedProps}catch(Te){pt(k,k.return,Te)}}}else if(r.tag===18){if(a===null){k=r;try{var te=k.stateNode;f?f_(te,!0):f_(k.stateNode,!1)}catch(Te){pt(k,k.return,Te)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,rh(n,a))));break;case 19:ui(r,n),hi(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,rh(n,l)));break;case 30:break;case 21:break;default:ui(r,n),hi(n)}}function hi(n){var r=n.flags;if(r&2){try{for(var a,l=n.return;l!==null;){if(mv(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,d=fm(n);ih(n,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(li(_,""),a.flags&=-33);var S=fm(n);ih(n,S,_);break;case 3:case 4:var k=a.stateNode.containerInfo,$=fm(n);dm(n,$,k);break;default:throw Error(s(161))}}catch(se){pt(n,n.return,se)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function wv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;wv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Gr(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)yv(n,r.alternate,r),r=r.sibling}function Ua(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Cs(4,r,r.return),Ua(r);break;case 1:_r(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&fv(r,r.return,a),Ua(r);break;case 27:nc(r.stateNode);case 26:case 5:_r(r,r.return),Ua(r);break;case 22:r.memoizedState===null&&Ua(r);break;case 30:Ua(r);break;default:Ua(r)}n=n.sibling}}function $r(n,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=n,d=r,_=d.flags;switch(d.tag){case 0:case 11:case 15:$r(f,d,a),$l(4,d);break;case 1:if($r(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch($){pt(l,l.return,$)}if(l=d,f=l.updateQueue,f!==null){var S=l.stateNode;try{var k=f.shared.hiddenCallbacks;if(k!==null)for(f.shared.hiddenCallbacks=null,f=0;f<k.length;f++)ey(k[f],S)}catch($){pt(l,l.return,$)}}a&&_&64&&hv(d),Kl(d,d.return);break;case 27:gv(d);case 26:case 5:$r(f,d,a),a&&l===null&&_&4&&dv(d),Kl(d,d.return);break;case 12:$r(f,d,a);break;case 31:$r(f,d,a),a&&_&4&&bv(f,d);break;case 13:$r(f,d,a),a&&_&4&&Ev(f,d);break;case 22:d.memoizedState===null&&$r(f,d,a),Kl(d,d.return);break;case 30:break;default:$r(f,d,a)}r=r.sibling}}function gm(n,r){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Ml(a))}function pm(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Ml(n))}function tr(n,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Sv(n,r,a,l),r=r.sibling}function Sv(n,r,a,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:tr(n,r,a,l),f&2048&&$l(9,r);break;case 1:tr(n,r,a,l);break;case 3:tr(n,r,a,l),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Ml(n)));break;case 12:if(f&2048){tr(n,r,a,l),n=r.stateNode;try{var d=r.memoizedProps,_=d.id,S=d.onPostCommit;typeof S=="function"&&S(_,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(k){pt(r,r.return,k)}}else tr(n,r,a,l);break;case 31:tr(n,r,a,l);break;case 13:tr(n,r,a,l);break;case 23:break;case 22:d=r.stateNode,_=r.alternate,r.memoizedState!==null?d._visibility&2?tr(n,r,a,l):Ql(n,r):d._visibility&2?tr(n,r,a,l):(d._visibility|=2,Ro(n,r,a,l,(r.subtreeFlags&10256)!==0||!1)),f&2048&&gm(_,r);break;case 24:tr(n,r,a,l),f&2048&&pm(r.alternate,r);break;default:tr(n,r,a,l)}}function Ro(n,r,a,l,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var d=n,_=r,S=a,k=l,$=_.flags;switch(_.tag){case 0:case 11:case 15:Ro(d,_,S,k,f),$l(8,_);break;case 23:break;case 22:var se=_.stateNode;_.memoizedState!==null?se._visibility&2?Ro(d,_,S,k,f):Ql(d,_):(se._visibility|=2,Ro(d,_,S,k,f)),f&&$&2048&&gm(_.alternate,_);break;case 24:Ro(d,_,S,k,f),f&&$&2048&&pm(_.alternate,_);break;default:Ro(d,_,S,k,f)}r=r.sibling}}function Ql(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=n,l=r,f=l.flags;switch(l.tag){case 22:Ql(a,l),f&2048&&gm(l.alternate,l);break;case 24:Ql(a,l),f&2048&&pm(l.alternate,l);break;default:Ql(a,l)}r=r.sibling}}var Yl=8192;function Co(n,r,a){if(n.subtreeFlags&Yl)for(n=n.child;n!==null;)Av(n,r,a),n=n.sibling}function Av(n,r,a){switch(n.tag){case 26:Co(n,r,a),n.flags&Yl&&n.memoizedState!==null&&AA(a,er,n.memoizedState,n.memoizedProps);break;case 5:Co(n,r,a);break;case 3:case 4:var l=er;er=vh(n.stateNode.containerInfo),Co(n,r,a),er=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=Yl,Yl=16777216,Co(n,r,a),Yl=l):Co(n,r,a));break;default:Co(n,r,a)}}function xv(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Xl(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];_n=l,Cv(l,n)}xv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Rv(n),n=n.sibling}function Rv(n){switch(n.tag){case 0:case 11:case 15:Xl(n),n.flags&2048&&Cs(9,n,n.return);break;case 3:Xl(n);break;case 12:Xl(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,sh(n)):Xl(n);break;default:Xl(n)}}function sh(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];_n=l,Cv(l,n)}xv(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Cs(8,r,r.return),sh(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,sh(r));break;default:sh(r)}n=n.sibling}}function Cv(n,r){for(;_n!==null;){var a=_n;switch(a.tag){case 0:case 11:case 15:Cs(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ml(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,_n=l;else e:for(a=n;_n!==null;){l=_n;var f=l.sibling,d=l.return;if(vv(l),l===a){_n=null;break e}if(f!==null){f.return=d,_n=f;break e}_n=d}}}var zS={getCacheForType:function(n){var r=Cn(tn),a=r.data.get(n);return a===void 0&&(a=n(),r.data.set(n,a)),a},cacheSignal:function(){return Cn(tn).controller.signal}},BS=typeof WeakMap=="function"?WeakMap:Map,ft=0,At=null,Ke=null,Xe=0,gt=0,_i=null,Ns=!1,No=!1,ym=!1,Kr=0,Ht=0,Is=0,za=0,vm=0,bi=0,Io=0,Jl=null,fi=null,_m=!1,ah=0,Nv=0,oh=1/0,lh=null,Ds=null,dn=0,Os=null,Do=null,Qr=0,bm=0,Em=null,Iv=null,Zl=0,Tm=null;function Ei(){return(ft&2)!==0&&Xe!==0?Xe&-Xe:ne.T!==null?Cm():Mt()}function Dv(){if(bi===0)if((Xe&536870912)===0||nt){var n=Ki;Ki<<=1,(Ki&3932160)===0&&(Ki=262144),bi=n}else bi=536870912;return n=yi.current,n!==null&&(n.flags|=32),bi}function di(n,r,a){(n===At&&(gt===2||gt===9)||n.cancelPendingCommit!==null)&&(Oo(n,0),Ms(n,Xe,bi,!1)),X(n,a),((ft&2)===0||n!==At)&&(n===At&&((ft&2)===0&&(za|=a),Ht===4&&Ms(n,Xe,bi,!1)),br(n))}function Ov(n,r,a){if((ft&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&n.expiredLanes)===0||zt(n,r),f=l?FS(n,r):Sm(n,r,!0),d=l;do{if(f===0){No&&!l&&Ms(n,r,0,!1);break}else{if(a=n.current.alternate,d&&!qS(a)){f=Sm(n,r,!1),d=!1;continue}if(f===2){if(d=r,n.errorRecoveryDisabledLanes&d)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var S=n;f=Jl;var k=S.current.memoizedState.isDehydrated;if(k&&(Oo(S,_).flags|=256),_=Sm(S,_,!1),_!==2){if(ym&&!k){S.errorRecoveryDisabledLanes|=d,za|=d,f=4;break e}d=fi,fi=f,d!==null&&(fi===null?fi=d:fi.push.apply(fi,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){Oo(n,0),Ms(n,r,0,!0);break}e:{switch(l=n,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Ms(l,r,bi,!Ns);break e;case 2:fi=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=ah+300-Zt(),10<f)){if(Ms(l,r,bi,!Ns),Nt(l,0,!0)!==0)break e;Qr=r,l.timeoutHandle=c_(Mv.bind(null,l,a,fi,lh,_m,r,bi,za,Io,Ns,d,"Throttled",-0,0),f);break e}Mv(l,a,fi,lh,_m,r,bi,za,Io,Ns,d,null,-0,0)}}break}while(!0);br(n)}function Mv(n,r,a,l,f,d,_,S,k,$,se,le,Q,te){if(n.timeoutHandle=-1,le=r.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qi},Av(r,d,le);var Te=(d&62914560)===d?ah-Zt():(d&4194048)===d?Nv-Zt():0;if(Te=xA(le,Te),Te!==null){Qr=d,n.cancelPendingCommit=Te(Bv.bind(null,n,r,d,a,l,f,_,S,k,se,le,null,Q,te)),Ms(n,d,_,!$);return}}Bv(n,r,d,a,l,f,_,S,k)}function qS(n){for(var r=n;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!gi(d(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ms(n,r,a,l){r&=~vm,r&=~za,n.suspendedLanes|=r,n.pingedLanes&=~r,l&&(n.warmLanes|=r),l=n.expirationTimes;for(var f=r;0<f;){var d=31-Rt(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&vt(n,a,r)}function ch(){return(ft&6)===0?(Wl(0),!1):!0}function wm(){if(Ke!==null){if(gt===0)var n=Ke.return;else n=Ke,Lr=Da=null,Ud(n),To=null,Vl=0,n=Ke;for(;n!==null;)uv(n.alternate,n),n=n.return;Ke=null}}function Oo(n,r){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,lA(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Qr=0,wm(),At=n,Ke=a=Vr(n.current,null),Xe=r,gt=0,_i=null,Ns=!1,No=zt(n,r),ym=!1,Io=bi=vm=za=Is=Ht=0,fi=Jl=null,_m=!1,(r&8)!==0&&(r|=r&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=r;0<l;){var f=31-Rt(l),d=1<<f;r|=n[f],l&=~d}return Kr=r,Iu(),a}function kv(n,r){Be=null,ne.H=Hl,r===Eo||r===ju?(r=X0(),gt=3):r===Rd?(r=X0(),gt=4):gt=r===tm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,_i=r,Ke===null&&(Ht=1,Zu(n,Vi(r,n.current)))}function Vv(){var n=yi.current;return n===null?!0:(Xe&4194048)===Xe?Ui===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?n===Ui:!1}function Pv(){var n=ne.H;return ne.H=Hl,n===null?Hl:n}function Lv(){var n=ne.A;return ne.A=zS,n}function uh(){Ht=4,Ns||(Xe&4194048)!==Xe&&yi.current!==null||(No=!0),(Is&134217727)===0&&(za&134217727)===0||At===null||Ms(At,Xe,bi,!1)}function Sm(n,r,a){var l=ft;ft|=2;var f=Pv(),d=Lv();(At!==n||Xe!==r)&&(lh=null,Oo(n,r)),r=!1;var _=Ht;e:do try{if(gt!==0&&Ke!==null){var S=Ke,k=_i;switch(gt){case 8:wm(),_=6;break e;case 3:case 2:case 9:case 6:yi.current===null&&(r=!0);var $=gt;if(gt=0,_i=null,Mo(n,S,k,$),a&&No){_=0;break e}break;default:$=gt,gt=0,_i=null,Mo(n,S,k,$)}}HS(),_=Ht;break}catch(se){kv(n,se)}while(!0);return r&&n.shellSuspendCounter++,Lr=Da=null,ft=l,ne.H=f,ne.A=d,Ke===null&&(At=null,Xe=0,Iu()),_}function HS(){for(;Ke!==null;)jv(Ke)}function FS(n,r){var a=ft;ft|=2;var l=Pv(),f=Lv();At!==n||Xe!==r?(lh=null,oh=Zt()+500,Oo(n,r)):No=zt(n,r);e:do try{if(gt!==0&&Ke!==null){r=Ke;var d=_i;t:switch(gt){case 1:gt=0,_i=null,Mo(n,r,d,1);break;case 2:case 9:if(Q0(d)){gt=0,_i=null,Uv(r);break}r=function(){gt!==2&&gt!==9||At!==n||(gt=7),br(n)},d.then(r,r);break e;case 3:gt=7;break e;case 4:gt=5;break e;case 7:Q0(d)?(gt=0,_i=null,Uv(r)):(gt=0,_i=null,Mo(n,r,d,7));break;case 5:var _=null;switch(Ke.tag){case 26:_=Ke.memoizedState;case 5:case 27:var S=Ke;if(_?S_(_):S.stateNode.complete){gt=0,_i=null;var k=S.sibling;if(k!==null)Ke=k;else{var $=S.return;$!==null?(Ke=$,hh($)):Ke=null}break t}}gt=0,_i=null,Mo(n,r,d,5);break;case 6:gt=0,_i=null,Mo(n,r,d,6);break;case 8:wm(),Ht=6;break e;default:throw Error(s(462))}}GS();break}catch(se){kv(n,se)}while(!0);return Lr=Da=null,ne.H=l,ne.A=f,ft=a,Ke!==null?0:(At=null,Xe=0,Iu(),Ht)}function GS(){for(;Ke!==null&&!lr();)jv(Ke)}function jv(n){var r=lv(n.alternate,n,Kr);n.memoizedProps=n.pendingProps,r===null?hh(n):Ke=r}function Uv(n){var r=n,a=r.alternate;switch(r.tag){case 15:case 0:r=nv(a,r,r.pendingProps,r.type,void 0,Xe);break;case 11:r=nv(a,r,r.pendingProps,r.type.render,r.ref,Xe);break;case 5:Ud(r);default:uv(a,r),r=Ke=L0(r,Kr),r=lv(a,r,Kr)}n.memoizedProps=n.pendingProps,r===null?hh(n):Ke=r}function Mo(n,r,a,l){Lr=Da=null,Ud(r),To=null,Vl=0;var f=r.return;try{if(MS(n,f,r,a,Xe)){Ht=1,Zu(n,Vi(a,n.current)),Ke=null;return}}catch(d){if(f!==null)throw Ke=f,d;Ht=1,Zu(n,Vi(a,n.current)),Ke=null;return}r.flags&32768?(nt||l===1?n=!0:No||(Xe&536870912)!==0?n=!1:(Ns=n=!0,(l===2||l===9||l===3||l===6)&&(l=yi.current,l!==null&&l.tag===13&&(l.flags|=16384))),zv(r,n)):hh(r)}function hh(n){var r=n;do{if((r.flags&32768)!==0){zv(r,Ns);return}n=r.return;var a=PS(r.alternate,r,Kr);if(a!==null){Ke=a;return}if(r=r.sibling,r!==null){Ke=r;return}Ke=r=n}while(r!==null);Ht===0&&(Ht=5)}function zv(n,r){do{var a=LS(n.alternate,n);if(a!==null){a.flags&=32767,Ke=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(n=n.sibling,n!==null)){Ke=n;return}Ke=n=a}while(n!==null);Ht=6,Ke=null}function Bv(n,r,a,l,f,d,_,S,k){n.cancelPendingCommit=null;do fh();while(dn!==0);if((ft&6)!==0)throw Error(s(327));if(r!==null){if(r===n.current)throw Error(s(177));if(d=r.lanes|r.childLanes,d|=fd,yt(n,a,d,_,S,k),n===At&&(Ke=At=null,Xe=0),Do=r,Os=n,Qr=a,bm=d,Em=f,Iv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,YS(An,function(){return $v(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=ne.T,ne.T=null,f=he.p,he.p=2,_=ft,ft|=4;try{jS(n,r,a)}finally{ft=_,he.p=f,ne.T=l}}dn=1,qv(),Hv(),Fv()}}function qv(){if(dn===1){dn=0;var n=Os,r=Do,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=ne.T,ne.T=null;var l=he.p;he.p=2;var f=ft;ft|=4;try{Tv(r,n);var d=Pm,_=C0(n.containerInfo),S=d.focusedElem,k=d.selectionRange;if(_!==S&&S&&S.ownerDocument&&R0(S.ownerDocument.documentElement,S)){if(k!==null&&od(S)){var $=k.start,se=k.end;if(se===void 0&&(se=$),"selectionStart"in S)S.selectionStart=$,S.selectionEnd=Math.min(se,S.value.length);else{var le=S.ownerDocument||document,Q=le&&le.defaultView||window;if(Q.getSelection){var te=Q.getSelection(),Te=S.textContent.length,Ne=Math.min(k.start,Te),wt=k.end===void 0?Ne:Math.min(k.end,Te);!te.extend&&Ne>wt&&(_=wt,wt=Ne,Ne=_);var q=x0(S,Ne),L=x0(S,wt);if(q&&L&&(te.rangeCount!==1||te.anchorNode!==q.node||te.anchorOffset!==q.offset||te.focusNode!==L.node||te.focusOffset!==L.offset)){var G=le.createRange();G.setStart(q.node,q.offset),te.removeAllRanges(),Ne>wt?(te.addRange(G),te.extend(L.node,L.offset)):(G.setEnd(L.node,L.offset),te.addRange(G))}}}}for(le=[],te=S;te=te.parentNode;)te.nodeType===1&&le.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<le.length;S++){var ae=le[S];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Sh=!!Vm,Pm=Vm=null}finally{ft=f,he.p=l,ne.T=a}}n.current=r,dn=2}}function Hv(){if(dn===2){dn=0;var n=Os,r=Do,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=ne.T,ne.T=null;var l=he.p;he.p=2;var f=ft;ft|=4;try{yv(n,r.alternate,r)}finally{ft=f,he.p=l,ne.T=a}}dn=3}}function Fv(){if(dn===4||dn===3){dn=0,cr();var n=Os,r=Do,a=Qr,l=Iv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?dn=5:(dn=0,Do=Os=null,Gv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Ds=null),rt(a),r=r.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(Yn,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=ne.T,f=he.p,he.p=2,ne.T=null;try{for(var d=n.onRecoverableError,_=0;_<l.length;_++){var S=l[_];d(S.value,{componentStack:S.stack})}}finally{ne.T=r,he.p=f}}(Qr&3)!==0&&fh(),br(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===Tm?Zl++:(Zl=0,Tm=n):Zl=0,Wl(0)}}function Gv(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,Ml(r)))}function fh(){return qv(),Hv(),Fv(),$v()}function $v(){if(dn!==5)return!1;var n=Os,r=bm;bm=0;var a=rt(Qr),l=ne.T,f=he.p;try{he.p=32>a?32:a,ne.T=null,a=Em,Em=null;var d=Os,_=Qr;if(dn=0,Do=Os=null,Qr=0,(ft&6)!==0)throw Error(s(331));var S=ft;if(ft|=4,Rv(d.current),Sv(d,d.current,_,a),ft=S,Wl(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(Yn,d)}catch{}return!0}finally{he.p=f,ne.T=l,Gv(n,r)}}function Kv(n,r,a){r=Vi(a,r),r=em(n.stateNode,r,2),n=As(n,r,2),n!==null&&(X(n,2),br(n))}function pt(n,r,a){if(n.tag===3)Kv(n,n,a);else for(;r!==null;){if(r.tag===3){Kv(r,n,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ds===null||!Ds.has(l))){n=Vi(a,n),a=Qy(2),l=As(r,a,2),l!==null&&(Yy(a,l,r,n),X(l,2),br(l));break}}r=r.return}}function Am(n,r,a){var l=n.pingCache;if(l===null){l=n.pingCache=new BS;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(a)||(ym=!0,f.add(a),n=$S.bind(null,n,r,a),r.then(n,n))}function $S(n,r,a){var l=n.pingCache;l!==null&&l.delete(r),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,At===n&&(Xe&a)===a&&(Ht===4||Ht===3&&(Xe&62914560)===Xe&&300>Zt()-ah?(ft&2)===0&&Oo(n,0):vm|=a,Io===Xe&&(Io=0)),br(n)}function Qv(n,r){r===0&&(r=Wt()),n=Ca(n,r),n!==null&&(X(n,r),br(n))}function KS(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),Qv(n,a)}function QS(n,r){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),Qv(n,a)}function YS(n,r){return mt(n,r)}var dh=null,ko=null,xm=!1,mh=!1,Rm=!1,ks=0;function br(n){n!==ko&&n.next===null&&(ko===null?dh=ko=n:ko=ko.next=n),mh=!0,xm||(xm=!0,JS())}function Wl(n,r){if(!Rm&&mh){Rm=!0;do for(var a=!1,l=dh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,S=l.pingedLanes;d=(1<<31-Rt(42|n)+1)-1,d&=f&~(_&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Zv(l,d))}else d=Xe,d=Nt(l,l===At?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||zt(l,d)||(a=!0,Zv(l,d));l=l.next}while(a);Rm=!1}}function XS(){Yv()}function Yv(){mh=xm=!1;var n=0;ks!==0&&oA()&&(n=ks);for(var r=Zt(),a=null,l=dh;l!==null;){var f=l.next,d=Xv(l,r);d===0?(l.next=null,a===null?dh=f:a.next=f,f===null&&(ko=a)):(a=l,(n!==0||(d&3)!==0)&&(mh=!0)),l=f}dn!==0&&dn!==5||Wl(n),ks!==0&&(ks=0)}function Xv(n,r){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var _=31-Rt(d),S=1<<_,k=f[_];k===-1?((S&a)===0||(S&l)!==0)&&(f[_]=vn(S,r)):k<=r&&(n.expiredLanes|=S),d&=~S}if(r=At,a=Xe,a=Nt(n,n===r?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===r&&(gt===2||gt===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&$n(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||zt(n,a)){if(r=a&-a,r===n.callbackPriority)return r;switch(l!==null&&$n(l),rt(a)){case 2:case 8:a=Kn;break;case 32:a=An;break;case 268435456:a=Nr;break;default:a=An}return l=Jv.bind(null,n),a=mt(a,l),n.callbackPriority=r,n.callbackNode=a,r}return l!==null&&l!==null&&$n(l),n.callbackPriority=2,n.callbackNode=null,2}function Jv(n,r){if(dn!==0&&dn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(fh()&&n.callbackNode!==a)return null;var l=Xe;return l=Nt(n,n===At?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(Ov(n,l,r),Xv(n,Zt()),n.callbackNode!=null&&n.callbackNode===a?Jv.bind(null,n):null)}function Zv(n,r){if(fh())return null;Ov(n,r,!0)}function JS(){cA(function(){(ft&6)!==0?mt(Cr,XS):Yv()})}function Cm(){if(ks===0){var n=_o;n===0&&(n=si,si<<=1,(si&261888)===0&&(si=256)),ks=n}return ks}function Wv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:io(""+n)}function e_(n,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,n.id&&a.setAttribute("form",n.id),r.parentNode.insertBefore(a,r),n=new FormData(n),a.parentNode.removeChild(a),n}function ZS(n,r,a,l,f){if(r==="submit"&&a&&a.stateNode===f){var d=Wv((f[Kt]||null).action),_=l.submitter;_&&(r=(r=_[Kt]||null)?Wv(r.formAction):_.getAttribute("formAction"),r!==null&&(d=r,_=null));var S=new dr("action","action",null,l,f);n.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ks!==0){var k=_?e_(f,_):new FormData(f);Qd(a,{pending:!0,data:k,method:f.method,action:d},null,k)}}else typeof d=="function"&&(S.preventDefault(),k=_?e_(f,_):new FormData(f),Qd(a,{pending:!0,data:k,method:f.method,action:d},d,k))},currentTarget:f}]})}}for(var Nm=0;Nm<hd.length;Nm++){var Im=hd[Nm],WS=Im.toLowerCase(),eA=Im[0].toUpperCase()+Im.slice(1);Wi(WS,"on"+eA)}Wi(D0,"onAnimationEnd"),Wi(O0,"onAnimationIteration"),Wi(M0,"onAnimationStart"),Wi("dblclick","onDoubleClick"),Wi("focusin","onFocus"),Wi("focusout","onBlur"),Wi(pS,"onTransitionRun"),Wi(yS,"onTransitionStart"),Wi(vS,"onTransitionCancel"),Wi(k0,"onTransitionEnd"),Ni("onMouseEnter",["mouseout","mouseover"]),Ni("onMouseLeave",["mouseout","mouseover"]),Ni("onPointerEnter",["pointerout","pointerover"]),Ni("onPointerLeave",["pointerout","pointerover"]),ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ai("onBeforeInput",["compositionend","keypress","textInput","paste"]),ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ec="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ec));function t_(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var d=void 0;if(r)for(var _=l.length-1;0<=_;_--){var S=l[_],k=S.instance,$=S.currentTarget;if(S=S.listener,k!==d&&f.isPropagationStopped())break e;d=S,f.currentTarget=$;try{d(f)}catch(se){Nu(se)}f.currentTarget=null,d=k}else for(_=0;_<l.length;_++){if(S=l[_],k=S.instance,$=S.currentTarget,S=S.listener,k!==d&&f.isPropagationStopped())break e;d=S,f.currentTarget=$;try{d(f)}catch(se){Nu(se)}f.currentTarget=null,d=k}}}}function Qe(n,r){var a=r[os];a===void 0&&(a=r[os]=new Set);var l=n+"__bubble";a.has(l)||(n_(r,n,2,!1),a.add(l))}function Dm(n,r,a){var l=0;r&&(l|=4),n_(a,n,l,r)}var gh="_reactListening"+Math.random().toString(36).slice(2);function Om(n){if(!n[gh]){n[gh]=!0,ga.forEach(function(a){a!=="selectionchange"&&(tA.has(a)||Dm(a,!1,n),Dm(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[gh]||(r[gh]=!0,Dm("selectionchange",!1,r))}}function n_(n,r,a,l){switch(D_(r)){case 2:var f=NA;break;case 8:f=IA;break;default:f=Km}a=f.bind(null,r,a,n),f=void 0,!ba||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(r,a,{capture:!0,passive:f}):n.addEventListener(r,a,!0):f!==void 0?n.addEventListener(r,a,{passive:f}):n.addEventListener(r,a,!1)}function Mm(n,r,a,l,f){var d=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var S=l.stateNode.containerInfo;if(S===f)break;if(_===4)for(_=l.return;_!==null;){var k=_.tag;if((k===3||k===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;S!==null;){if(_=Ri(S),_===null)return;if(k=_.tag,k===5||k===6||k===26||k===27){l=d=_;continue e}S=S.parentNode}}l=l.return}gs(function(){var $=d,se=Di(a),le=[];e:{var Q=V0.get(n);if(Q!==void 0){var te=dr,Te=n;switch(n){case"keypress":if(Ta(a)===0)break e;case"keydown":case"keyup":te=xu;break;case"focusin":Te="focus",te=Sa;break;case"focusout":Te="blur",te=Sa;break;case"beforeblur":case"afterblur":te=Sa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Al;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=yu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=y;break;case D0:case O0:case M0:te=_u;break;case k0:te=A;break;case"scroll":case"scrollend":te=Sl;break;case"wheel":te=W;break;case"copy":case"cut":case"paste":te=bu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=kr;break;case"toggle":case"beforetoggle":te=ze}var Ne=(r&4)!==0,wt=!Ne&&(n==="scroll"||n==="scrollend"),q=Ne?Q!==null?Q+"Capture":null:Q;Ne=[];for(var L=$,G;L!==null;){var ae=L;if(G=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||G===null||q===null||(ae=Yi(L,q),ae!=null&&Ne.push(tc(L,ae,G))),wt)break;L=L.return}0<Ne.length&&(Q=new te(Q,Te,null,a,se),le.push({event:Q,listeners:Ne}))}}if((r&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",te=n==="mouseout"||n==="pointerout",Q&&a!==El&&(Te=a.relatedTarget||a.fromElement)&&(Ri(Te)||Te[Ee]))break e;if((te||Q)&&(Q=se.window===se?se:(Q=se.ownerDocument)?Q.defaultView||Q.parentWindow:window,te?(Te=a.relatedTarget||a.toElement,te=$,Te=Te?Ri(Te):null,Te!==null&&(wt=c(Te),Ne=Te.tag,Te!==wt||Ne!==5&&Ne!==27&&Ne!==6)&&(Te=null)):(te=null,Te=$),te!==Te)){if(Ne=Al,ae="onMouseLeave",q="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(Ne=kr,ae="onPointerLeave",q="onPointerEnter",L="pointer"),wt=te==null?Q:Ln(te),G=Te==null?Q:Ln(Te),Q=new Ne(ae,L+"leave",te,a,se),Q.target=wt,Q.relatedTarget=G,ae=null,Ri(se)===$&&(Ne=new Ne(q,L+"enter",Te,a,se),Ne.target=G,Ne.relatedTarget=wt,ae=Ne),wt=ae,te&&Te)t:{for(Ne=nA,q=te,L=Te,G=0,ae=q;ae;ae=Ne(ae))G++;ae=0;for(var Re=L;Re;Re=Ne(Re))ae++;for(;0<G-ae;)q=Ne(q),G--;for(;0<ae-G;)L=Ne(L),ae--;for(;G--;){if(q===L||L!==null&&q===L.alternate){Ne=q;break t}q=Ne(q),L=Ne(L)}Ne=null}else Ne=null;te!==null&&i_(le,Q,te,Ne,!1),Te!==null&&wt!==null&&i_(le,wt,Te,Ne,!0)}}e:{if(Q=$?Ln($):window,te=Q.nodeName&&Q.nodeName.toLowerCase(),te==="select"||te==="input"&&Q.type==="file")var lt=b0;else if(v0(Q))if(E0)lt=dS;else{lt=hS;var we=uS}else te=Q.nodeName,!te||te.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?$&&no($.elementType)&&(lt=b0):lt=fS;if(lt&&(lt=lt(n,$))){_0(le,lt,a,se);break e}we&&we(n,Q,$),n==="focusout"&&$&&Q.type==="number"&&$.memoizedProps.value!=null&&vl(Q,"number",Q.value)}switch(we=$?Ln($):window,n){case"focusin":(v0(we)||we.contentEditable==="true")&&(uo=we,ld=$,Il=null);break;case"focusout":Il=ld=uo=null;break;case"mousedown":cd=!0;break;case"contextmenu":case"mouseup":case"dragend":cd=!1,N0(le,a,se);break;case"selectionchange":if(gS)break;case"keydown":case"keyup":N0(le,a,se)}var qe;if(ht)e:{switch(n){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else co?Aa(n,a)&&(Je="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Je="onCompositionStart");Je&&(pr&&a.locale!=="ko"&&(co||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&co&&(qe=wl()):(fr=se,Tl="value"in fr?fr.value:fr.textContent,co=!0)),we=ph($,Je),0<we.length&&(Je=new gr(Je,n,null,a,se),le.push({event:Je,listeners:we}),qe?Je.data=qe:(qe=lo(a),qe!==null&&(Je.data=qe)))),(qe=Mi?aS(n,a):oS(n,a))&&(Je=ph($,"onBeforeInput"),0<Je.length&&(we=new gr("onBeforeInput","beforeinput",null,a,se),le.push({event:we,listeners:Je}),we.data=qe)),ZS(le,n,$,a,se)}t_(le,r)})}function tc(n,r,a){return{instance:n,listener:r,currentTarget:a}}function ph(n,r){for(var a=r+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Yi(n,a),f!=null&&l.unshift(tc(n,f,d)),f=Yi(n,r),f!=null&&l.push(tc(n,f,d))),n.tag===3)return l;n=n.return}return[]}function nA(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function i_(n,r,a,l,f){for(var d=r._reactName,_=[];a!==null&&a!==l;){var S=a,k=S.alternate,$=S.stateNode;if(S=S.tag,k!==null&&k===l)break;S!==5&&S!==26&&S!==27||$===null||(k=$,f?($=Yi(a,d),$!=null&&_.unshift(tc(a,$,k))):f||($=Yi(a,d),$!=null&&_.push(tc(a,$,k)))),a=a.return}_.length!==0&&n.push({event:r,listeners:_})}var iA=/\r\n?/g,rA=/\u0000|\uFFFD/g;function r_(n){return(typeof n=="string"?n:""+n).replace(iA,`
`).replace(rA,"")}function s_(n,r){return r=r_(r),r_(n)===r}function Tt(n,r,a,l,f,d){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||li(n,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&li(n,""+l);break;case"className":Z(n,"class",l);break;case"tabIndex":Z(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Z(n,a,l);break;case"style":bl(n,l,d);break;case"data":if(r!=="object"){Z(n,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=io(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(r!=="input"&&Tt(n,r,"name",f.name,f,null),Tt(n,r,"formEncType",f.formEncType,f,null),Tt(n,r,"formMethod",f.formMethod,f,null),Tt(n,r,"formTarget",f.formTarget,f,null)):(Tt(n,r,"encType",f.encType,f,null),Tt(n,r,"method",f.method,f,null),Tt(n,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=io(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Qi);break;case"onScroll":l!=null&&Qe("scroll",n);break;case"onScrollEnd":l!=null&&Qe("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=io(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Qe("beforetoggle",n),Qe("toggle",n),H(n,"popover",l);break;case"xlinkActuate":K(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":K(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":K(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":K(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":K(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":K(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":K(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":K(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":K(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":H(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=pu.get(a)||a,H(n,a,l))}}function km(n,r,a,l,f,d){switch(a){case"style":bl(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"children":typeof l=="string"?li(n,l):(typeof l=="number"||typeof l=="bigint")&&li(n,""+l);break;case"onScroll":l!=null&&Qe("scroll",n);break;case"onScrollEnd":l!=null&&Qe("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Qi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cs.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),d=n[Kt]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(r,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(r,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):H(n,a,l)}}}function In(n,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",n),Qe("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Tt(n,r,d,_,a,null)}}f&&Tt(n,r,"srcSet",a.srcSet,a,null),l&&Tt(n,r,"src",a.src,a,null);return;case"input":Qe("invalid",n);var S=d=_=f=null,k=null,$=null;for(l in a)if(a.hasOwnProperty(l)){var se=a[l];if(se!=null)switch(l){case"name":f=se;break;case"type":_=se;break;case"checked":k=se;break;case"defaultChecked":$=se;break;case"value":d=se;break;case"defaultValue":S=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(s(137,r));break;default:Tt(n,r,l,se,a,null)}}du(n,d,S,k,$,_,f,!1);return;case"select":Qe("invalid",n),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(S=a[f],S!=null))switch(f){case"value":d=S;break;case"defaultValue":_=S;break;case"multiple":l=S;default:Tt(n,r,f,S,a,null)}r=d,a=_,n.multiple=!!l,r!=null?hs(n,!!l,r,!1):a!=null&&hs(n,!!l,a,!0);return;case"textarea":Qe("invalid",n),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(S=a[_],S!=null))switch(_){case"value":l=S;break;case"defaultValue":f=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:Tt(n,r,_,S,a,null)}fs(n,l,f,d);return;case"option":for(k in a)a.hasOwnProperty(k)&&(l=a[k],l!=null)&&(k==="selected"?n.selected=l&&typeof l!="function"&&typeof l!="symbol":Tt(n,r,k,l,a,null));return;case"dialog":Qe("beforetoggle",n),Qe("toggle",n),Qe("cancel",n),Qe("close",n);break;case"iframe":case"object":Qe("load",n);break;case"video":case"audio":for(l=0;l<ec.length;l++)Qe(ec[l],n);break;case"image":Qe("error",n),Qe("load",n);break;case"details":Qe("toggle",n);break;case"embed":case"source":case"link":Qe("error",n),Qe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(l=a[$],l!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Tt(n,r,$,l,a,null)}return;default:if(no(r)){for(se in a)a.hasOwnProperty(se)&&(l=a[se],l!==void 0&&km(n,r,se,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&Tt(n,r,S,l,a,null))}function sA(n,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,S=null,k=null,$=null,se=null;for(te in a){var le=a[te];if(a.hasOwnProperty(te)&&le!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":k=le;default:l.hasOwnProperty(te)||Tt(n,r,te,null,l,le)}}for(var Q in l){var te=l[Q];if(le=a[Q],l.hasOwnProperty(Q)&&(te!=null||le!=null))switch(Q){case"type":d=te;break;case"name":f=te;break;case"checked":$=te;break;case"defaultChecked":se=te;break;case"value":_=te;break;case"defaultValue":S=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,r));break;default:te!==le&&Tt(n,r,Q,te,l,le)}}to(n,_,S,k,$,se,d,f);return;case"select":te=_=S=Q=null;for(d in a)if(k=a[d],a.hasOwnProperty(d)&&k!=null)switch(d){case"value":break;case"multiple":te=k;default:l.hasOwnProperty(d)||Tt(n,r,d,null,l,k)}for(f in l)if(d=l[f],k=a[f],l.hasOwnProperty(f)&&(d!=null||k!=null))switch(f){case"value":Q=d;break;case"defaultValue":S=d;break;case"multiple":_=d;default:d!==k&&Tt(n,r,f,d,l,k)}r=S,a=_,l=te,Q!=null?hs(n,!!a,Q,!1):!!l!=!!a&&(r!=null?hs(n,!!a,r,!0):hs(n,!!a,a?[]:"",!1));return;case"textarea":te=Q=null;for(S in a)if(f=a[S],a.hasOwnProperty(S)&&f!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Tt(n,r,S,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":Q=f;break;case"defaultValue":te=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&Tt(n,r,_,f,l,d)}mu(n,Q,te);return;case"option":for(var Te in a)Q=a[Te],a.hasOwnProperty(Te)&&Q!=null&&!l.hasOwnProperty(Te)&&(Te==="selected"?n.selected=!1:Tt(n,r,Te,null,l,Q));for(k in l)Q=l[k],te=a[k],l.hasOwnProperty(k)&&Q!==te&&(Q!=null||te!=null)&&(k==="selected"?n.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":Tt(n,r,k,Q,l,te));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in a)Q=a[Ne],a.hasOwnProperty(Ne)&&Q!=null&&!l.hasOwnProperty(Ne)&&Tt(n,r,Ne,null,l,Q);for($ in l)if(Q=l[$],te=a[$],l.hasOwnProperty($)&&Q!==te&&(Q!=null||te!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:Tt(n,r,$,Q,l,te)}return;default:if(no(r)){for(var wt in a)Q=a[wt],a.hasOwnProperty(wt)&&Q!==void 0&&!l.hasOwnProperty(wt)&&km(n,r,wt,void 0,l,Q);for(se in l)Q=l[se],te=a[se],!l.hasOwnProperty(se)||Q===te||Q===void 0&&te===void 0||km(n,r,se,Q,l,te);return}}for(var q in a)Q=a[q],a.hasOwnProperty(q)&&Q!=null&&!l.hasOwnProperty(q)&&Tt(n,r,q,null,l,Q);for(le in l)Q=l[le],te=a[le],!l.hasOwnProperty(le)||Q===te||Q==null&&te==null||Tt(n,r,le,Q,l,te)}function a_(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function aA(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,S=f.duration;if(d&&S&&a_(_)){for(_=0,S=f.responseEnd,l+=1;l<a.length;l++){var k=a[l],$=k.startTime;if($>S)break;var se=k.transferSize,le=k.initiatorType;se&&a_(le)&&(k=k.responseEnd,_+=se*(k<S?1:(S-$)/(k-$)))}if(--l,r+=8*(d+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Vm=null,Pm=null;function yh(n){return n.nodeType===9?n:n.ownerDocument}function o_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function l_(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Lm(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var jm=null;function oA(){var n=window.event;return n&&n.type==="popstate"?n===jm?!1:(jm=n,!0):(jm=null,!1)}var c_=typeof setTimeout=="function"?setTimeout:void 0,lA=typeof clearTimeout=="function"?clearTimeout:void 0,u_=typeof Promise=="function"?Promise:void 0,cA=typeof queueMicrotask=="function"?queueMicrotask:typeof u_<"u"?function(n){return u_.resolve(null).then(n).catch(uA)}:c_;function uA(n){setTimeout(function(){throw n})}function Vs(n){return n==="head"}function h_(n,r){var a=r,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),jo(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")nc(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,nc(a);for(var d=a.firstChild;d;){var _=d.nextSibling,S=d.nodeName;d[xi]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&nc(n.ownerDocument.body);a=f}while(a);jo(r)}function f_(n,r){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function Um(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Um(a),ls(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function hA(n,r,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[xi])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=zi(n.nextSibling),n===null)break}return null}function fA(n,r,a){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=zi(n.nextSibling),n===null))return null;return n}function d_(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=zi(n.nextSibling),n===null))return null;return n}function zm(n){return n.data==="$?"||n.data==="$~"}function Bm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function dA(n,r){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function zi(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var qm=null;function m_(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(r===0)return zi(n.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}n=n.nextSibling}return null}function g_(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return n;r--}else a!=="/$"&&a!=="/&"||r++}n=n.previousSibling}return null}function p_(n,r,a){switch(r=yh(a),n){case"html":if(n=r.documentElement,!n)throw Error(s(452));return n;case"head":if(n=r.head,!n)throw Error(s(453));return n;case"body":if(n=r.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function nc(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);ls(n)}var Bi=new Map,y_=new Set;function vh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Yr=he.d;he.d={f:mA,r:gA,D:pA,C:yA,L:vA,m:_A,X:EA,S:bA,M:TA};function mA(){var n=Yr.f(),r=ch();return n||r}function gA(n){var r=Xn(n);r!==null&&r.tag===5&&r.type==="form"?ky(r):Yr.r(n)}var Vo=typeof document>"u"?null:document;function v_(n,r,a){var l=Vo;if(l&&typeof r=="string"&&r){var f=oi(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),y_.has(f)||(y_.add(f),n={rel:n,crossOrigin:a,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),In(r,"link",n),Bt(r),l.head.appendChild(r)))}}function pA(n){Yr.D(n),v_("dns-prefetch",n,null)}function yA(n,r){Yr.C(n,r),v_("preconnect",n,r)}function vA(n,r,a){Yr.L(n,r,a);var l=Vo;if(l&&n&&r){var f='link[rel="preload"][as="'+oi(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+oi(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+oi(a.imageSizes)+'"]')):f+='[href="'+oi(n)+'"]';var d=f;switch(r){case"style":d=Po(n);break;case"script":d=Lo(n)}Bi.has(d)||(n=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:n,as:r},a),Bi.set(d,n),l.querySelector(f)!==null||r==="style"&&l.querySelector(ic(d))||r==="script"&&l.querySelector(rc(d))||(r=l.createElement("link"),In(r,"link",n),Bt(r),l.head.appendChild(r)))}}function _A(n,r){Yr.m(n,r);var a=Vo;if(a&&n){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+oi(l)+'"][href="'+oi(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Lo(n)}if(!Bi.has(d)&&(n=E({rel:"modulepreload",href:n},r),Bi.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(rc(d)))return}l=a.createElement("link"),In(l,"link",n),Bt(l),a.head.appendChild(l)}}}function bA(n,r,a){Yr.S(n,r,a);var l=Vo;if(l&&n){var f=Ci(l).hoistableStyles,d=Po(n);r=r||"default";var _=f.get(d);if(!_){var S={loading:0,preload:null};if(_=l.querySelector(ic(d)))S.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":r},a),(a=Bi.get(d))&&Hm(n,a);var k=_=l.createElement("link");Bt(k),In(k,"link",n),k._p=new Promise(function($,se){k.onload=$,k.onerror=se}),k.addEventListener("load",function(){S.loading|=1}),k.addEventListener("error",function(){S.loading|=2}),S.loading|=4,_h(_,r,l)}_={type:"stylesheet",instance:_,count:1,state:S},f.set(d,_)}}}function EA(n,r){Yr.X(n,r);var a=Vo;if(a&&n){var l=Ci(a).hoistableScripts,f=Lo(n),d=l.get(f);d||(d=a.querySelector(rc(f)),d||(n=E({src:n,async:!0},r),(r=Bi.get(f))&&Fm(n,r),d=a.createElement("script"),Bt(d),In(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function TA(n,r){Yr.M(n,r);var a=Vo;if(a&&n){var l=Ci(a).hoistableScripts,f=Lo(n),d=l.get(f);d||(d=a.querySelector(rc(f)),d||(n=E({src:n,async:!0,type:"module"},r),(r=Bi.get(f))&&Fm(n,r),d=a.createElement("script"),Bt(d),In(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function __(n,r,a,l){var f=(f=Ae.current)?vh(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Po(a.href),a=Ci(f).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Po(a.href);var d=Ci(f).hoistableStyles,_=d.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,_),(d=f.querySelector(ic(n)))&&!d._p&&(_.instance=d,_.state.loading=5),Bi.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Bi.set(n,a),d||wA(f,n,a,_.state))),r&&l===null)throw Error(s(528,""));return _}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Lo(a),a=Ci(f).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function Po(n){return'href="'+oi(n)+'"'}function ic(n){return'link[rel="stylesheet"]['+n+"]"}function b_(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function wA(n,r,a,l){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=n.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),In(r,"link",a),Bt(r),n.head.appendChild(r))}function Lo(n){return'[src="'+oi(n)+'"]'}function rc(n){return"script[async]"+n}function E_(n,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=n.querySelector('style[data-href~="'+oi(a.href)+'"]');if(l)return r.instance=l,Bt(l),l;var f=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Bt(l),In(l,"style",f),_h(l,a.precedence,n),r.instance=l;case"stylesheet":f=Po(a.href);var d=n.querySelector(ic(f));if(d)return r.state.loading|=4,r.instance=d,Bt(d),d;l=b_(a),(f=Bi.get(f))&&Hm(l,f),d=(n.ownerDocument||n).createElement("link"),Bt(d);var _=d;return _._p=new Promise(function(S,k){_.onload=S,_.onerror=k}),In(d,"link",l),r.state.loading|=4,_h(d,a.precedence,n),r.instance=d;case"script":return d=Lo(a.src),(f=n.querySelector(rc(d)))?(r.instance=f,Bt(f),f):(l=a,(f=Bi.get(d))&&(l=E({},a),Fm(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),Bt(f),In(f,"link",l),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,_h(l,a.precedence,n));return r.instance}function _h(n,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var S=l[_];if(S.dataset.precedence===r)d=S;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(n,r.firstChild))}function Hm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Fm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var bh=null;function T_(n,r,a){if(bh===null){var l=new Map,f=bh=new Map;f.set(a,l)}else f=bh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[xi]||d[Lt]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(r)||"";_=n+_;var S=l.get(_);S?S.push(d):l.set(_,[d])}}return l}function w_(n,r,a){n=n.ownerDocument||n,n.head.insertBefore(a,r==="title"?n.querySelector("head > title"):null)}function SA(n,r,a){if(a===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(n=r.disabled,typeof r.precedence=="string"&&n==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function S_(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function AA(n,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Po(l.href),d=r.querySelector(ic(f));if(d){r=d._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=Eh.bind(n),r.then(n,n)),a.state.loading|=4,a.instance=d,Bt(d);return}d=r.ownerDocument||r,l=b_(l),(f=Bi.get(f))&&Hm(l,f),d=d.createElement("link"),Bt(d);var _=d;_._p=new Promise(function(S,k){_.onload=S,_.onerror=k}),In(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Eh.bind(n),r.addEventListener("load",a),r.addEventListener("error",a))}}var Gm=0;function xA(n,r){return n.stylesheets&&n.count===0&&wh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&wh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+r);0<n.imgBytes&&Gm===0&&(Gm=62500*aA());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&wh(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>Gm?50:800)+r);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Eh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Th=null;function wh(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Th=new Map,r.forEach(RA,n),Th=null,Eh.call(n))}function RA(n,r){if(!(r.state.loading&4)){var a=Th.get(n);if(a)var l=a.get(null);else{a=new Map,Th.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=r.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=Eh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var sc={$$typeof:Y,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function CA(n,r,a,l,f,d,_,S,k){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pt(0),this.hiddenUpdates=Pt(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function A_(n,r,a,l,f,d,_,S,k,$,se,le){return n=new CA(n,r,a,_,k,$,se,le,S),r=1,d===!0&&(r|=24),d=pi(3,null,null,r),n.current=d,d.stateNode=n,r=Sd(),r.refCount++,n.pooledCache=r,r.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:r},Cd(d),n}function x_(n){return n?(n=mo,n):mo}function R_(n,r,a,l,f,d){f=x_(f),l.context===null?l.context=f:l.pendingContext=f,l=Ss(r),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=As(n,l,r),a!==null&&(di(a,n,r),Ll(a,n,r))}function C_(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function $m(n,r){C_(n,r),(n=n.alternate)&&C_(n,r)}function N_(n){if(n.tag===13||n.tag===31){var r=Ca(n,67108864);r!==null&&di(r,n,67108864),$m(n,67108864)}}function I_(n){if(n.tag===13||n.tag===31){var r=Ei();r=hn(r);var a=Ca(n,r);a!==null&&di(a,n,r),$m(n,r)}}var Sh=!0;function NA(n,r,a,l){var f=ne.T;ne.T=null;var d=he.p;try{he.p=2,Km(n,r,a,l)}finally{he.p=d,ne.T=f}}function IA(n,r,a,l){var f=ne.T;ne.T=null;var d=he.p;try{he.p=8,Km(n,r,a,l)}finally{he.p=d,ne.T=f}}function Km(n,r,a,l){if(Sh){var f=Qm(l);if(f===null)Mm(n,r,l,Ah,a),O_(n,l);else if(OA(f,n,r,a,l))l.stopPropagation();else if(O_(n,l),r&4&&-1<DA.indexOf(n)){for(;f!==null;){var d=Xn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=Ct(d.pendingLanes);if(_!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;_;){var k=1<<31-Rt(_);S.entanglements[1]|=k,_&=~k}br(d),(ft&6)===0&&(oh=Zt()+500,Wl(0))}}break;case 31:case 13:S=Ca(d,2),S!==null&&di(S,d,2),ch(),$m(d,2)}if(d=Qm(l),d===null&&Mm(n,r,l,Ah,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Mm(n,r,l,null,a)}}function Qm(n){return n=Di(n),Ym(n)}var Ah=null;function Ym(n){if(Ah=null,n=Ri(n),n!==null){var r=c(n);if(r===null)n=null;else{var a=r.tag;if(a===13){if(n=u(r),n!==null)return n;n=null}else if(a===31){if(n=m(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return Ah=n,null}function D_(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fi()){case Cr:return 2;case Kn:return 8;case An:case Gi:return 32;case Nr:return 268435456;default:return 32}default:return 32}}var Xm=!1,Ps=null,Ls=null,js=null,ac=new Map,oc=new Map,Us=[],DA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function O_(n,r){switch(n){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":js=null;break;case"pointerover":case"pointerout":ac.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":oc.delete(r.pointerId)}}function lc(n,r,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},r!==null&&(r=Xn(r),r!==null&&N_(r)),n):(n.eventSystemFlags|=l,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function OA(n,r,a,l,f){switch(r){case"focusin":return Ps=lc(Ps,n,r,a,l,f),!0;case"dragenter":return Ls=lc(Ls,n,r,a,l,f),!0;case"mouseover":return js=lc(js,n,r,a,l,f),!0;case"pointerover":var d=f.pointerId;return ac.set(d,lc(ac.get(d)||null,n,r,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,oc.set(d,lc(oc.get(d)||null,n,r,a,l,f)),!0}return!1}function M_(n){var r=Ri(n.target);if(r!==null){var a=c(r);if(a!==null){if(r=a.tag,r===13){if(r=u(a),r!==null){n.blockedOn=r,fn(n.priority,function(){I_(a)});return}}else if(r===31){if(r=m(a),r!==null){n.blockedOn=r,fn(n.priority,function(){I_(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function xh(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=Qm(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);El=l,a.target.dispatchEvent(l),El=null}else return r=Xn(a),r!==null&&N_(r),n.blockedOn=a,!1;r.shift()}return!0}function k_(n,r,a){xh(n)&&a.delete(r)}function MA(){Xm=!1,Ps!==null&&xh(Ps)&&(Ps=null),Ls!==null&&xh(Ls)&&(Ls=null),js!==null&&xh(js)&&(js=null),ac.forEach(k_),oc.forEach(k_)}function Rh(n,r){n.blockedOn===r&&(n.blockedOn=null,Xm||(Xm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,MA)))}var Ch=null;function V_(n){Ch!==n&&(Ch=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Ch===n&&(Ch=null);for(var r=0;r<n.length;r+=3){var a=n[r],l=n[r+1],f=n[r+2];if(typeof l!="function"){if(Ym(l||a)===null)continue;break}var d=Xn(a);d!==null&&(n.splice(r,3),r-=3,Qd(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function jo(n){function r(k){return Rh(k,n)}Ps!==null&&Rh(Ps,n),Ls!==null&&Rh(Ls,n),js!==null&&Rh(js,n),ac.forEach(r),oc.forEach(r);for(var a=0;a<Us.length;a++){var l=Us[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Us.length&&(a=Us[0],a.blockedOn===null);)M_(a),a.blockedOn===null&&Us.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[Kt]||null;if(typeof d=="function")_||V_(a);else if(_){var S=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[Kt]||null)S=_.formAction;else if(Ym(f)!==null)continue}else S=_.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),V_(a)}}}function P_(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function Jm(n){this._internalRoot=n}Nh.prototype.render=Jm.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=Ei();R_(a,l,n,r,null,null)},Nh.prototype.unmount=Jm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;R_(n.current,2,null,n,null,null),ch(),r[Ee]=null}};function Nh(n){this._internalRoot=n}Nh.prototype.unstable_scheduleHydration=function(n){if(n){var r=Mt();n={blockedOn:null,target:n,priority:r};for(var a=0;a<Us.length&&r!==0&&r<Us[a].priority;a++);Us.splice(a,0,n),a===0&&M_(n)}};var L_=e.version;if(L_!=="19.2.3")throw Error(s(527,L_,"19.2.3"));he.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(r),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var kA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ih.isDisabled&&Ih.supportsFiber)try{Yn=Ih.inject(kA),Gt=Ih}catch{}}return uc.createRoot=function(n,r){if(!o(n))throw Error(s(299));var a=!1,l="",f=Fy,d=Gy,_=$y;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=A_(n,1,!1,null,null,a,l,null,f,d,_,P_),n[Ee]=r.current,Om(n),new Jm(r)},uc.hydrateRoot=function(n,r,a){if(!o(n))throw Error(s(299));var l=!1,f="",d=Fy,_=Gy,S=$y,k=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),r=A_(n,1,!0,r,a??null,l,f,k,d,_,S,P_),r.context=x_(null),a=r.current,l=Ei(),l=hn(l),f=Ss(l),f.callback=null,As(a,f,l),a=l,r.current.lanes=a,X(r,a),br(r),n[Ee]=r.current,Om(n),new Nh(r)},uc.version="19.2.3",uc}var K_;function FA(){if(K_)return eg.exports;K_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),eg.exports=HA(),eg.exports}var GA=FA();const $A=()=>T.jsxs("div",{className:"fixed inset-0 -z-50 overflow-hidden pointer-events-none bg-[#020617]",children:[T.jsx("div",{className:"bg-blob opacity-20 w-[800px] h-[800px] -top-96 -left-96 bg-indigo-600 blur-[120px]"}),T.jsx("div",{className:"bg-blob opacity-30 w-[600px] h-[600px] top-1/2 -right-48 bg-pink-600 blur-[100px]",style:{animationDelay:"-5s",animationDuration:"25s"}}),T.jsx("div",{className:"bg-blob opacity-10 w-[500px] h-[500px] bottom-0 left-1/4 bg-cyan-400 blur-[80px]",style:{animationDelay:"-12s",animationDuration:"18s"}}),T.jsx("div",{className:"absolute inset-0 bg-radial-at-t from-transparent via-slate-950/40 to-slate-950"}),T.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"})]});const KA=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),QA=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Q_=i=>{const e=QA(i);return e.charAt(0).toUpperCase()+e.slice(1)},Z1=(...i)=>i.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),YA=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var XA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const JA=U.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:c,iconNode:u,...m},g)=>U.createElement("svg",{ref:g,...XA,width:e,height:e,stroke:i,strokeWidth:s?Number(t)*24/Number(e):t,className:Z1("lucide",o),...!c&&!YA(m)&&{"aria-hidden":"true"},...m},[...u.map(([p,v])=>U.createElement(p,v)),...Array.isArray(c)?c:[c]]));const Hn=(i,e)=>{const t=U.forwardRef(({className:s,...o},c)=>U.createElement(JA,{ref:c,iconNode:e,className:Z1(`lucide-${KA(Q_(i))}`,`lucide-${i}`,s),...o}));return t.displayName=Q_(i),t};const ZA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],_c=Hn("arrow-left",ZA);const WA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ex=Hn("circle-x",WA);const tx=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],W1=Hn("copy",tx);const nx=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],eE=Hn("flag",nx);const ix=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],rx=Hn("house",ix);const sx=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],tE=Hn("loader-circle",sx);const ax=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],ox=Hn("log-in",ax);const lx=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],cx=Hn("log-out",lx);const ux=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],hx=Hn("plus",ux);const fx=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Nf=Hn("rotate-ccw",fx);const dx=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mx=Hn("settings",dx);const gx=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],nE=Hn("share-2",gx);const px=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Cg=Hn("trophy",px);const yx=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],rg=Hn("user",yx);const vx=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],cp=Hn("users",vx);const _x=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],iE=Hn("zap",_x),bx=()=>{};var Y_={};const rE=function(i){const e=[];let t=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Ex=function(i){const e=[];let t=0,s=0;for(;t<i.length;){const o=i[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[t++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[t++],u=i[t++],m=i[t++],g=((o&7)<<18|(c&63)<<12|(u&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=i[t++],u=i[t++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|u&63)}}return e.join("")},sE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const c=i[o],u=o+1<i.length,m=u?i[o+1]:0,g=o+2<i.length,p=g?i[o+2]:0,v=c>>2,E=(c&3)<<4|m>>4;let w=(m&15)<<2|p>>6,C=p&63;g||(C=64,u||(w=64)),s.push(t[v],t[E],t[w],t[C])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(rE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):Ex(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const c=t[i.charAt(o++)],m=o<i.length?t[i.charAt(o)]:0;++o;const p=o<i.length?t[i.charAt(o)]:64;++o;const E=o<i.length?t[i.charAt(o)]:64;if(++o,c==null||m==null||p==null||E==null)throw new Tx;const w=c<<2|m>>4;if(s.push(w),p!==64){const C=m<<4&240|p>>2;if(s.push(C),E!==64){const M=p<<6&192|E;s.push(M)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class Tx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wx=function(i){const e=rE(i);return sE.encodeByteArray(e,!0)},tf=function(i){return wx(i).replace(/\./g,"")},aE=function(i){try{return sE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Sx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Ax=()=>Sx().__FIREBASE_DEFAULTS__,xx=()=>{if(typeof process>"u"||typeof Y_>"u")return;const i=Y_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Rx=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&aE(i[1]);return e&&JSON.parse(e)},If=()=>{try{return bx()||Ax()||xx()||Rx()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},oE=i=>If()?.emulatorHosts?.[i],Cx=i=>{const e=oE(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},lE=()=>If()?.config,cE=i=>If()?.[`_${i}`];class Nx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function ol(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function uE(i){return(await fetch(i,{credentials:"include"})).ok}function Ix(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[tf(JSON.stringify(t)),tf(JSON.stringify(u)),""].join(".")}const bc={};function Dx(){const i={prod:[],emulator:[]};for(const e of Object.keys(bc))bc[e]?i.emulator.push(e):i.prod.push(e);return i}function Ox(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let X_=!1;function hE(i,e){if(typeof window>"u"||typeof document>"u"||!ol(window.location.host)||bc[i]===e||bc[i]||X_)return;bc[i]=e;function t(w){return`__firebase__banner__${w}`}const s="__firebase__banner",c=Dx().prod.length>0;function u(){const w=document.getElementById(s);w&&w.remove()}function m(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function g(w,C){w.setAttribute("width","24"),w.setAttribute("id",C),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{X_=!0,u()},w}function v(w,C){w.setAttribute("id",C),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function E(){const w=Ox(s),C=t("text"),M=document.getElementById(C)||document.createElement("span"),z=t("learnmore"),D=document.getElementById(z)||document.createElement("a"),B=t("preprendIcon"),ee=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const Y=w.element;m(Y),v(D,z);const ce=p();g(ee,B),Y.append(ee,M,D,ce),document.body.appendChild(Y)}c?(M.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Mx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qn())}function kx(){const i=If()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Vx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Px(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Lx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jx(){const i=qn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Ux(){return!kx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zx(){try{return typeof indexedDB=="object"}catch{return!1}}function Bx(){return new Promise((i,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const qx="FirebaseError";class ss extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=qx,Object.setPrototypeOf(this,ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qc.prototype.create)}}class Qc{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],u=c?Hx(c,s):"Error",m=`${this.serviceName}: ${u} (${o}).`;return new ss(o,m,s)}}function Hx(i,e){return i.replace(Fx,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Fx=/\{\$([^}]+)}/g;function Gx(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function $a(i,e){if(i===e)return!0;const t=Object.keys(i),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const c=i[o],u=e[o];if(J_(c)&&J_(u)){if(!$a(c,u))return!1}else if(c!==u)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function J_(i){return i!==null&&typeof i=="object"}function Yc(i){const e=[];for(const[t,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function $x(i,e){const t=new Kx(i,e);return t.subscribe.bind(t)}class Kx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");Qx(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=sg),o.error===void 0&&(o.error=sg),o.complete===void 0&&(o.complete=sg);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qx(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function sg(){}function Sn(i){return i&&i._delegate?i._delegate:i}class Ka{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const qa="[DEFAULT]";class Yx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new Nx;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Jx(e))try{this.getOrInitializeService({instanceIdentifier:qa})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=qa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qa){return this.instances.has(e)}getOptions(e=qa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,u]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&u.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Xx(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=qa){return this.component?this.component.multipleInstances?e:qa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Xx(i){return i===qa?void 0:i}function Jx(i){return i.instantiationMode==="EAGER"}class Zx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Yx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ze;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ze||(Ze={}));const Wx={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},e2=Ze.INFO,t2={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},n2=(i,e,...t)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=t2[e];if(o)console[o](`[${s}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class up{constructor(e){this.name=e,this._logLevel=e2,this._logHandler=n2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Wx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const i2=(i,e)=>e.some(t=>i instanceof t);let Z_,W_;function r2(){return Z_||(Z_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function s2(){return W_||(W_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fE=new WeakMap,Ng=new WeakMap,dE=new WeakMap,ag=new WeakMap,hp=new WeakMap;function a2(i){const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",u)},c=()=>{t(Js(i.result)),o()},u=()=>{s(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&fE.set(t,i)}).catch(()=>{}),hp.set(e,i),e}function o2(i){if(Ng.has(i))return;const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",u),i.removeEventListener("abort",u)},c=()=>{t(),o()},u=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",u),i.addEventListener("abort",u)});Ng.set(i,e)}let Ig={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Ng.get(i);if(e==="objectStoreNames")return i.objectStoreNames||dE.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Js(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function l2(i){Ig=i(Ig)}function c2(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=i.call(og(this),e,...t);return dE.set(s,e.sort?e.sort():[e]),Js(s)}:s2().includes(i)?function(...e){return i.apply(og(this),e),Js(fE.get(this))}:function(...e){return Js(i.apply(og(this),e))}}function u2(i){return typeof i=="function"?c2(i):(i instanceof IDBTransaction&&o2(i),i2(i,r2())?new Proxy(i,Ig):i)}function Js(i){if(i instanceof IDBRequest)return a2(i);if(ag.has(i))return ag.get(i);const e=u2(i);return e!==i&&(ag.set(i,e),hp.set(e,i)),e}const og=i=>hp.get(i);function h2(i,e,{blocked:t,upgrade:s,blocking:o,terminated:c}={}){const u=indexedDB.open(i,e),m=Js(u);return s&&u.addEventListener("upgradeneeded",g=>{s(Js(u.result),g.oldVersion,g.newVersion,Js(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const f2=["get","getKey","getAll","getAllKeys","count"],d2=["put","add","delete","clear"],lg=new Map;function eb(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(lg.get(e))return lg.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=d2.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||f2.includes(t)))return;const c=async function(u,...m){const g=this.transaction(u,o?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),o&&g.done]))[0]};return lg.set(e,c),c}l2(i=>({...i,get:(e,t,s)=>eb(e,t)||i.get(e,t,s),has:(e,t)=>!!eb(e,t)||i.has(e,t)}));class m2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(g2(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function g2(i){return i.getComponent()?.type==="VERSION"}const Dg="@firebase/app",tb="0.14.6";const Wr=new up("@firebase/app"),p2="@firebase/app-compat",y2="@firebase/analytics-compat",v2="@firebase/analytics",_2="@firebase/app-check-compat",b2="@firebase/app-check",E2="@firebase/auth",T2="@firebase/auth-compat",w2="@firebase/database",S2="@firebase/data-connect",A2="@firebase/database-compat",x2="@firebase/functions",R2="@firebase/functions-compat",C2="@firebase/installations",N2="@firebase/installations-compat",I2="@firebase/messaging",D2="@firebase/messaging-compat",O2="@firebase/performance",M2="@firebase/performance-compat",k2="@firebase/remote-config",V2="@firebase/remote-config-compat",P2="@firebase/storage",L2="@firebase/storage-compat",j2="@firebase/firestore",U2="@firebase/ai",z2="@firebase/firestore-compat",B2="firebase",q2="12.6.0";const Og="[DEFAULT]",H2={[Dg]:"fire-core",[p2]:"fire-core-compat",[v2]:"fire-analytics",[y2]:"fire-analytics-compat",[b2]:"fire-app-check",[_2]:"fire-app-check-compat",[E2]:"fire-auth",[T2]:"fire-auth-compat",[w2]:"fire-rtdb",[S2]:"fire-data-connect",[A2]:"fire-rtdb-compat",[x2]:"fire-fn",[R2]:"fire-fn-compat",[C2]:"fire-iid",[N2]:"fire-iid-compat",[I2]:"fire-fcm",[D2]:"fire-fcm-compat",[O2]:"fire-perf",[M2]:"fire-perf-compat",[k2]:"fire-rc",[V2]:"fire-rc-compat",[P2]:"fire-gcs",[L2]:"fire-gcs-compat",[j2]:"fire-fst",[z2]:"fire-fst-compat",[U2]:"fire-vertex","fire-js":"fire-js",[B2]:"fire-js-all"};const Mc=new Map,F2=new Map,Mg=new Map;function nb(i,e){try{i.container.addComponent(e)}catch(t){Wr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Zo(i){const e=i.name;if(Mg.has(e))return Wr.debug(`There were multiple attempts to register component ${e}.`),!1;Mg.set(e,i);for(const t of Mc.values())nb(t,i);for(const t of F2.values())nb(t,i);return!0}function fp(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function nr(i){return i==null?!1:i.settings!==void 0}const G2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zs=new Qc("app","Firebase",G2);class $2{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ka("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zs.create("app-deleted",{appName:this._name})}}const ll=q2;function mE(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const s={name:Og,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Zs.create("bad-app-name",{appName:String(o)});if(t||(t=lE()),!t)throw Zs.create("no-options");const c=Mc.get(o);if(c){if($a(t,c.options)&&$a(s,c.config))return c;throw Zs.create("duplicate-app",{appName:o})}const u=new Zx(o);for(const g of Mg.values())u.addComponent(g);const m=new $2(t,s,u);return Mc.set(o,m),m}function gE(i=Og){const e=Mc.get(i);if(!e&&i===Og&&lE())return mE();if(!e)throw Zs.create("no-app",{appName:i});return e}function ib(){return Array.from(Mc.values())}function Ws(i,e,t){let s=H2[i]??i;t&&(s+=`-${t}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${s}" with version "${e}":`];o&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wr.warn(u.join(" "));return}Zo(new Ka(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const K2="firebase-heartbeat-database",Q2=1,kc="firebase-heartbeat-store";let cg=null;function pE(){return cg||(cg=h2(K2,Q2,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(kc)}catch(t){console.warn(t)}}}}).catch(i=>{throw Zs.create("idb-open",{originalErrorMessage:i.message})})),cg}async function Y2(i){try{const t=(await pE()).transaction(kc),s=await t.objectStore(kc).get(yE(i));return await t.done,s}catch(e){if(e instanceof ss)Wr.warn(e.message);else{const t=Zs.create("idb-get",{originalErrorMessage:e?.message});Wr.warn(t.message)}}}async function rb(i,e){try{const s=(await pE()).transaction(kc,"readwrite");await s.objectStore(kc).put(e,yE(i)),await s.done}catch(t){if(t instanceof ss)Wr.warn(t.message);else{const s=Zs.create("idb-set",{originalErrorMessage:t?.message});Wr.warn(s.message)}}}function yE(i){return`${i.name}!${i.options.appId}`}const X2=1024,J2=30;class Z2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new eR(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=sb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>J2){const o=tR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Wr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=sb(),{heartbeatsToSend:t,unsentEntries:s}=W2(this._heartbeatsCache.heartbeats),o=tf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Wr.warn(e),""}}}function sb(){return new Date().toISOString().substring(0,10)}function W2(i,e=X2){const t=[];let s=i.slice();for(const o of i){const c=t.find(u=>u.agent===o.agent);if(c){if(c.dates.push(o.date),ab(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ab(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class eR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zx()?Bx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Y2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return rb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return rb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ab(i){return tf(JSON.stringify({version:2,heartbeats:i})).length}function tR(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let s=1;s<i.length;s++)i[s].date<t&&(t=i[s].date,e=s);return e}function nR(i){Zo(new Ka("platform-logger",e=>new m2(e),"PRIVATE")),Zo(new Ka("heartbeat",e=>new Z2(e),"PRIVATE")),Ws(Dg,tb,i),Ws(Dg,tb,"esm2020"),Ws("fire-js","")}nR("");var ob=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ea,vE;(function(){var i;function e(x,R){function N(){}N.prototype=R.prototype,x.F=R.prototype,x.prototype=new N,x.prototype.constructor=x,x.D=function(V,O,j){for(var I=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)I[Ue-2]=arguments[Ue];return R.prototype[O].apply(V,I)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,R,N){N||(N=0);const V=Array(16);if(typeof R=="string")for(var O=0;O<16;++O)V[O]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(O=0;O<16;++O)V[O]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=x.g[0],N=x.g[1],O=x.g[2];let j=x.g[3],I;I=R+(j^N&(O^j))+V[0]+3614090360&4294967295,R=N+(I<<7&4294967295|I>>>25),I=j+(O^R&(N^O))+V[1]+3905402710&4294967295,j=R+(I<<12&4294967295|I>>>20),I=O+(N^j&(R^N))+V[2]+606105819&4294967295,O=j+(I<<17&4294967295|I>>>15),I=N+(R^O&(j^R))+V[3]+3250441966&4294967295,N=O+(I<<22&4294967295|I>>>10),I=R+(j^N&(O^j))+V[4]+4118548399&4294967295,R=N+(I<<7&4294967295|I>>>25),I=j+(O^R&(N^O))+V[5]+1200080426&4294967295,j=R+(I<<12&4294967295|I>>>20),I=O+(N^j&(R^N))+V[6]+2821735955&4294967295,O=j+(I<<17&4294967295|I>>>15),I=N+(R^O&(j^R))+V[7]+4249261313&4294967295,N=O+(I<<22&4294967295|I>>>10),I=R+(j^N&(O^j))+V[8]+1770035416&4294967295,R=N+(I<<7&4294967295|I>>>25),I=j+(O^R&(N^O))+V[9]+2336552879&4294967295,j=R+(I<<12&4294967295|I>>>20),I=O+(N^j&(R^N))+V[10]+4294925233&4294967295,O=j+(I<<17&4294967295|I>>>15),I=N+(R^O&(j^R))+V[11]+2304563134&4294967295,N=O+(I<<22&4294967295|I>>>10),I=R+(j^N&(O^j))+V[12]+1804603682&4294967295,R=N+(I<<7&4294967295|I>>>25),I=j+(O^R&(N^O))+V[13]+4254626195&4294967295,j=R+(I<<12&4294967295|I>>>20),I=O+(N^j&(R^N))+V[14]+2792965006&4294967295,O=j+(I<<17&4294967295|I>>>15),I=N+(R^O&(j^R))+V[15]+1236535329&4294967295,N=O+(I<<22&4294967295|I>>>10),I=R+(O^j&(N^O))+V[1]+4129170786&4294967295,R=N+(I<<5&4294967295|I>>>27),I=j+(N^O&(R^N))+V[6]+3225465664&4294967295,j=R+(I<<9&4294967295|I>>>23),I=O+(R^N&(j^R))+V[11]+643717713&4294967295,O=j+(I<<14&4294967295|I>>>18),I=N+(j^R&(O^j))+V[0]+3921069994&4294967295,N=O+(I<<20&4294967295|I>>>12),I=R+(O^j&(N^O))+V[5]+3593408605&4294967295,R=N+(I<<5&4294967295|I>>>27),I=j+(N^O&(R^N))+V[10]+38016083&4294967295,j=R+(I<<9&4294967295|I>>>23),I=O+(R^N&(j^R))+V[15]+3634488961&4294967295,O=j+(I<<14&4294967295|I>>>18),I=N+(j^R&(O^j))+V[4]+3889429448&4294967295,N=O+(I<<20&4294967295|I>>>12),I=R+(O^j&(N^O))+V[9]+568446438&4294967295,R=N+(I<<5&4294967295|I>>>27),I=j+(N^O&(R^N))+V[14]+3275163606&4294967295,j=R+(I<<9&4294967295|I>>>23),I=O+(R^N&(j^R))+V[3]+4107603335&4294967295,O=j+(I<<14&4294967295|I>>>18),I=N+(j^R&(O^j))+V[8]+1163531501&4294967295,N=O+(I<<20&4294967295|I>>>12),I=R+(O^j&(N^O))+V[13]+2850285829&4294967295,R=N+(I<<5&4294967295|I>>>27),I=j+(N^O&(R^N))+V[2]+4243563512&4294967295,j=R+(I<<9&4294967295|I>>>23),I=O+(R^N&(j^R))+V[7]+1735328473&4294967295,O=j+(I<<14&4294967295|I>>>18),I=N+(j^R&(O^j))+V[12]+2368359562&4294967295,N=O+(I<<20&4294967295|I>>>12),I=R+(N^O^j)+V[5]+4294588738&4294967295,R=N+(I<<4&4294967295|I>>>28),I=j+(R^N^O)+V[8]+2272392833&4294967295,j=R+(I<<11&4294967295|I>>>21),I=O+(j^R^N)+V[11]+1839030562&4294967295,O=j+(I<<16&4294967295|I>>>16),I=N+(O^j^R)+V[14]+4259657740&4294967295,N=O+(I<<23&4294967295|I>>>9),I=R+(N^O^j)+V[1]+2763975236&4294967295,R=N+(I<<4&4294967295|I>>>28),I=j+(R^N^O)+V[4]+1272893353&4294967295,j=R+(I<<11&4294967295|I>>>21),I=O+(j^R^N)+V[7]+4139469664&4294967295,O=j+(I<<16&4294967295|I>>>16),I=N+(O^j^R)+V[10]+3200236656&4294967295,N=O+(I<<23&4294967295|I>>>9),I=R+(N^O^j)+V[13]+681279174&4294967295,R=N+(I<<4&4294967295|I>>>28),I=j+(R^N^O)+V[0]+3936430074&4294967295,j=R+(I<<11&4294967295|I>>>21),I=O+(j^R^N)+V[3]+3572445317&4294967295,O=j+(I<<16&4294967295|I>>>16),I=N+(O^j^R)+V[6]+76029189&4294967295,N=O+(I<<23&4294967295|I>>>9),I=R+(N^O^j)+V[9]+3654602809&4294967295,R=N+(I<<4&4294967295|I>>>28),I=j+(R^N^O)+V[12]+3873151461&4294967295,j=R+(I<<11&4294967295|I>>>21),I=O+(j^R^N)+V[15]+530742520&4294967295,O=j+(I<<16&4294967295|I>>>16),I=N+(O^j^R)+V[2]+3299628645&4294967295,N=O+(I<<23&4294967295|I>>>9),I=R+(O^(N|~j))+V[0]+4096336452&4294967295,R=N+(I<<6&4294967295|I>>>26),I=j+(N^(R|~O))+V[7]+1126891415&4294967295,j=R+(I<<10&4294967295|I>>>22),I=O+(R^(j|~N))+V[14]+2878612391&4294967295,O=j+(I<<15&4294967295|I>>>17),I=N+(j^(O|~R))+V[5]+4237533241&4294967295,N=O+(I<<21&4294967295|I>>>11),I=R+(O^(N|~j))+V[12]+1700485571&4294967295,R=N+(I<<6&4294967295|I>>>26),I=j+(N^(R|~O))+V[3]+2399980690&4294967295,j=R+(I<<10&4294967295|I>>>22),I=O+(R^(j|~N))+V[10]+4293915773&4294967295,O=j+(I<<15&4294967295|I>>>17),I=N+(j^(O|~R))+V[1]+2240044497&4294967295,N=O+(I<<21&4294967295|I>>>11),I=R+(O^(N|~j))+V[8]+1873313359&4294967295,R=N+(I<<6&4294967295|I>>>26),I=j+(N^(R|~O))+V[15]+4264355552&4294967295,j=R+(I<<10&4294967295|I>>>22),I=O+(R^(j|~N))+V[6]+2734768916&4294967295,O=j+(I<<15&4294967295|I>>>17),I=N+(j^(O|~R))+V[13]+1309151649&4294967295,N=O+(I<<21&4294967295|I>>>11),I=R+(O^(N|~j))+V[4]+4149444226&4294967295,R=N+(I<<6&4294967295|I>>>26),I=j+(N^(R|~O))+V[11]+3174756917&4294967295,j=R+(I<<10&4294967295|I>>>22),I=O+(R^(j|~N))+V[2]+718787259&4294967295,O=j+(I<<15&4294967295|I>>>17),I=N+(j^(O|~R))+V[9]+3951481745&4294967295,x.g[0]=x.g[0]+R&4294967295,x.g[1]=x.g[1]+(O+(I<<21&4294967295|I>>>11))&4294967295,x.g[2]=x.g[2]+O&4294967295,x.g[3]=x.g[3]+j&4294967295}s.prototype.v=function(x,R){R===void 0&&(R=x.length);const N=R-this.blockSize,V=this.C;let O=this.h,j=0;for(;j<R;){if(O==0)for(;j<=N;)o(this,x,j),j+=this.blockSize;if(typeof x=="string"){for(;j<R;)if(V[O++]=x.charCodeAt(j++),O==this.blockSize){o(this,V),O=0;break}}else for(;j<R;)if(V[O++]=x[j++],O==this.blockSize){o(this,V),O=0;break}}this.h=O,this.o+=R},s.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var R=1;R<x.length-8;++R)x[R]=0;R=this.o*8;for(var N=x.length-8;N<x.length;++N)x[N]=R&255,R/=256;for(this.v(x),x=Array(16),R=0,N=0;N<4;++N)for(let V=0;V<32;V+=8)x[R++]=this.g[N]>>>V&255;return x};function c(x,R){var N=m;return Object.prototype.hasOwnProperty.call(N,x)?N[x]:N[x]=R(x)}function u(x,R){this.h=R;const N=[];let V=!0;for(let O=x.length-1;O>=0;O--){const j=x[O]|0;V&&j==R||(N[O]=j,V=!1)}this.g=N}var m={};function g(x){return-128<=x&&x<128?c(x,function(R){return new u([R|0],R<0?-1:0)}):new u([x|0],x<0?-1:0)}function p(x){if(isNaN(x)||!isFinite(x))return E;if(x<0)return D(p(-x));const R=[];let N=1;for(let V=0;x>=N;V++)R[V]=x/N|0,N*=4294967296;return new u(R,0)}function v(x,R){if(x.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(x.charAt(0)=="-")return D(v(x.substring(1),R));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=p(Math.pow(R,8));let V=E;for(let j=0;j<x.length;j+=8){var O=Math.min(8,x.length-j);const I=parseInt(x.substring(j,j+O),R);O<8?(O=p(Math.pow(R,O)),V=V.j(O).add(p(I))):(V=V.j(N),V=V.add(p(I)))}return V}var E=g(0),w=g(1),C=g(16777216);i=u.prototype,i.m=function(){if(z(this))return-D(this).m();let x=0,R=1;for(let N=0;N<this.g.length;N++){const V=this.i(N);x+=(V>=0?V:4294967296+V)*R,R*=4294967296}return x},i.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(M(this))return"0";if(z(this))return"-"+D(this).toString(x);const R=p(Math.pow(x,6));var N=this;let V="";for(;;){const O=ce(N,R).g;N=B(N,O.j(R));let j=((N.g.length>0?N.g[0]:N.h)>>>0).toString(x);if(N=O,M(N))return j+V;for(;j.length<6;)j="0"+j;V=j+V}},i.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function M(x){if(x.h!=0)return!1;for(let R=0;R<x.g.length;R++)if(x.g[R]!=0)return!1;return!0}function z(x){return x.h==-1}i.l=function(x){return x=B(this,x),z(x)?-1:M(x)?0:1};function D(x){const R=x.g.length,N=[];for(let V=0;V<R;V++)N[V]=~x.g[V];return new u(N,~x.h).add(w)}i.abs=function(){return z(this)?D(this):this},i.add=function(x){const R=Math.max(this.g.length,x.g.length),N=[];let V=0;for(let O=0;O<=R;O++){let j=V+(this.i(O)&65535)+(x.i(O)&65535),I=(j>>>16)+(this.i(O)>>>16)+(x.i(O)>>>16);V=I>>>16,j&=65535,I&=65535,N[O]=I<<16|j}return new u(N,N[N.length-1]&-2147483648?-1:0)};function B(x,R){return x.add(D(R))}i.j=function(x){if(M(this)||M(x))return E;if(z(this))return z(x)?D(this).j(D(x)):D(D(this).j(x));if(z(x))return D(this.j(D(x)));if(this.l(C)<0&&x.l(C)<0)return p(this.m()*x.m());const R=this.g.length+x.g.length,N=[];for(var V=0;V<2*R;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(let O=0;O<x.g.length;O++){const j=this.i(V)>>>16,I=this.i(V)&65535,Ue=x.i(O)>>>16,ut=x.i(O)&65535;N[2*V+2*O]+=I*ut,ee(N,2*V+2*O),N[2*V+2*O+1]+=j*ut,ee(N,2*V+2*O+1),N[2*V+2*O+1]+=I*Ue,ee(N,2*V+2*O+1),N[2*V+2*O+2]+=j*Ue,ee(N,2*V+2*O+2)}for(x=0;x<R;x++)N[x]=N[2*x+1]<<16|N[2*x];for(x=R;x<2*R;x++)N[x]=0;return new u(N,0)};function ee(x,R){for(;(x[R]&65535)!=x[R];)x[R+1]+=x[R]>>>16,x[R]&=65535,R++}function Y(x,R){this.g=x,this.h=R}function ce(x,R){if(M(R))throw Error("division by zero");if(M(x))return new Y(E,E);if(z(x))return R=ce(D(x),R),new Y(D(R.g),D(R.h));if(z(R))return R=ce(x,D(R)),new Y(D(R.g),R.h);if(x.g.length>30){if(z(x)||z(R))throw Error("slowDivide_ only works with positive integers.");for(var N=w,V=R;V.l(x)<=0;)N=ie(N),V=ie(V);var O=J(N,1),j=J(V,1);for(V=J(V,2),N=J(N,2);!M(V);){var I=j.add(V);I.l(x)<=0&&(O=O.add(N),j=I),V=J(V,1),N=J(N,1)}return R=B(x,O.j(R)),new Y(O,R)}for(O=E;x.l(R)>=0;){for(N=Math.max(1,Math.floor(x.m()/R.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),j=p(N),I=j.j(R);z(I)||I.l(x)>0;)N-=V,j=p(N),I=j.j(R);M(j)&&(j=w),O=O.add(j),x=B(x,I)}return new Y(O,x)}i.B=function(x){return ce(this,x).h},i.and=function(x){const R=Math.max(this.g.length,x.g.length),N=[];for(let V=0;V<R;V++)N[V]=this.i(V)&x.i(V);return new u(N,this.h&x.h)},i.or=function(x){const R=Math.max(this.g.length,x.g.length),N=[];for(let V=0;V<R;V++)N[V]=this.i(V)|x.i(V);return new u(N,this.h|x.h)},i.xor=function(x){const R=Math.max(this.g.length,x.g.length),N=[];for(let V=0;V<R;V++)N[V]=this.i(V)^x.i(V);return new u(N,this.h^x.h)};function ie(x){const R=x.g.length+1,N=[];for(let V=0;V<R;V++)N[V]=x.i(V)<<1|x.i(V-1)>>>31;return new u(N,x.h)}function J(x,R){const N=R>>5;R%=32;const V=x.g.length-N,O=[];for(let j=0;j<V;j++)O[j]=R>0?x.i(j+N)>>>R|x.i(j+N+1)<<32-R:x.i(j+N);return new u(O,x.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,vE=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=v,ea=u}).apply(typeof ob<"u"?ob:typeof self<"u"?self:typeof window<"u"?window:{});var Dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _E,fc,bE,Bh,kg,EE,TE,wE;(function(){var i,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dh=="object"&&Dh];for(var y=0;y<h.length;++y){var b=h[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var s=t(this);function o(h,y){if(y)e:{var b=s;h=h.split(".");for(var A=0;A<h.length-1;A++){var F=h[A];if(!(F in b))break e;b=b[F]}h=h[h.length-1],A=b[h],y=y(A),y!=A&&y!=null&&e(b,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var b=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&b.push([A,y[A]]);return b}});var c=c||{},u=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,b){return h.call.apply(h.bind,arguments)}function p(h,y,b){return p=g,p.apply(null,arguments)}function v(h,y){var b=Array.prototype.slice.call(arguments,1);return function(){var A=b.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function E(h,y){function b(){}b.prototype=y.prototype,h.Z=y.prototype,h.prototype=new b,h.prototype.constructor=h,h.Ob=function(A,F,W){for(var ge=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ge[ze-2]=arguments[ze];return y.prototype[F].apply(A,ge)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function C(h){const y=h.length;if(y>0){const b=Array(y);for(let A=0;A<y;A++)b[A]=h[A];return b}return[]}function M(h,y){for(let A=1;A<arguments.length;A++){const F=arguments[A];var b=typeof F;if(b=b!="object"?b:F?Array.isArray(F)?"array":b:"null",b=="array"||b=="object"&&typeof F.length=="number"){b=h.length||0;const W=F.length||0;h.length=b+W;for(let ge=0;ge<W;ge++)h[b+ge]=F[ge]}else h.push(F)}}class z{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function D(h){u.setTimeout(()=>{throw h},0)}function B(){var h=x;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ee{constructor(){this.h=this.g=null}add(y,b){const A=Y.get();A.set(y,b),this.h?this.h.next=A:this.g=A,this.h=A}}var Y=new z(()=>new ce,h=>h.reset());class ce{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,J=!1,x=new ee,R=()=>{const h=Promise.resolve(void 0);ie=()=>{h.then(N)}};function N(){for(var h;h=B();){try{h.h.call(h.g)}catch(b){D(b)}var y=Y;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}J=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};u.addEventListener("test",b,y),u.removeEventListener("test",b,y)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function Ue(h,y){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(Ue,O),Ue.prototype.init=function(h,y){const b=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(b=="mouseover"?y=h.fromElement:b=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ue.Z.h.call(this)},Ue.prototype.h=function(){Ue.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ut="closure_listenable_"+(Math.random()*1e6|0),ne=0;function he(h,y,b,A,F){this.listener=h,this.proxy=null,this.src=y,this.type=b,this.capture=!!A,this.ha=F,this.key=++ne,this.da=this.fa=!1}function _e(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function De(h,y,b){for(const A in h)y.call(b,h[A],A,h)}function je(h,y){for(const b in h)y.call(void 0,h[b],b,h)}function P(h){const y={};for(const b in h)y[b]=h[b];return y}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(h,y){let b,A;for(let F=1;F<arguments.length;F++){A=arguments[F];for(b in A)h[b]=A[b];for(let W=0;W<re.length;W++)b=re[W],Object.prototype.hasOwnProperty.call(A,b)&&(h[b]=A[b])}}function fe(h){this.src=h,this.g={},this.h=0}fe.prototype.add=function(h,y,b,A,F){const W=h.toString();h=this.g[W],h||(h=this.g[W]=[],this.h++);const ge=Ae(h,y,A,F);return ge>-1?(y=h[ge],b||(y.fa=!1)):(y=new he(y,this.src,W,!!A,F),y.fa=b,h.push(y)),y};function pe(h,y){const b=y.type;if(b in h.g){var A=h.g[b],F=Array.prototype.indexOf.call(A,y,void 0),W;(W=F>=0)&&Array.prototype.splice.call(A,F,1),W&&(_e(y),h.g[b].length==0&&(delete h.g[b],h.h--))}}function Ae(h,y,b,A){for(let F=0;F<h.length;++F){const W=h[F];if(!W.da&&W.listener==y&&W.capture==!!b&&W.ha==A)return F}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),dt={};function Ge(h,y,b,A,F){if(Array.isArray(y)){for(let W=0;W<y.length;W++)Ge(h,y[W],b,A,F);return null}return b=Hi(b),h&&h[ut]?h.J(y,b,m(A)?!!A.capture:!1,F):Fe(h,y,b,!1,A,F)}function Fe(h,y,b,A,F,W){if(!y)throw Error("Invalid event type");const ge=m(F)?!!F.capture:!!F;let ze=Pn(h);if(ze||(h[Pe]=ze=new fe(h)),b=ze.add(y,b,A,ge,W),b.proxy)return b;if(A=ri(),b.proxy=A,A.src=h,A.listener=b,h.addEventListener)j||(F=ge),F===void 0&&(F=!1),h.addEventListener(y.toString(),A,F);else if(h.attachEvent)h.attachEvent(Ut(y.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return b}function ri(){function h(b){return y.call(h.src,h.listener,b)}const y=Gn;return h}function un(h,y,b,A,F){if(Array.isArray(y))for(var W=0;W<y.length;W++)un(h,y[W],b,A,F);else A=m(A)?!!A.capture:!!A,b=Hi(b),h&&h[ut]?(h=h.i,W=String(y).toString(),W in h.g&&(y=h.g[W],b=Ae(y,b,A,F),b>-1&&(_e(y[b]),Array.prototype.splice.call(y,b,1),y.length==0&&(delete h.g[W],h.h--)))):h&&(h=Pn(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ae(y,b,A,F)),(b=h>-1?y[h]:null)&&Fn(b))}function Fn(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[ut])pe(y.i,h);else{var b=h.type,A=h.proxy;y.removeEventListener?y.removeEventListener(b,A,h.capture):y.detachEvent?y.detachEvent(Ut(b),A):y.addListener&&y.removeListener&&y.removeListener(A),(b=Pn(y))?(pe(b,h),b.h==0&&(b.src=null,y[Pe]=null)):_e(h)}}}function Ut(h){return h in dt?dt[h]:dt[h]="on"+h}function Gn(h,y){if(h.da)h=!0;else{y=new Ue(y,this);const b=h.listener,A=h.ha||h.src;h.fa&&Fn(h),h=b.call(A,y)}return h}function Pn(h){return h=h[Pe],h instanceof fe?h:null}var or="__closure_events_fn_"+(Math.random()*1e9>>>0);function Hi(h){return typeof h=="function"?h:(h[or]||(h[or]=function(y){return h.handleEvent(y)}),h[or])}function xt(){V.call(this),this.i=new fe(this),this.M=this,this.G=null}E(xt,V),xt.prototype[ut]=!0,xt.prototype.removeEventListener=function(h,y,b,A){un(this,h,y,b,A)};function mt(h,y){var b,A=h.G;if(A)for(b=[];A;A=A.G)b.push(A);if(h=h.M,A=y.type||y,typeof y=="string")y=new O(y,h);else if(y instanceof O)y.target=y.target||h;else{var F=y;y=new O(A,h),me(y,F)}F=!0;let W,ge;if(b)for(ge=b.length-1;ge>=0;ge--)W=y.g=b[ge],F=$n(W,A,!0,y)&&F;if(W=y.g=h,F=$n(W,A,!0,y)&&F,F=$n(W,A,!1,y)&&F,b)for(ge=0;ge<b.length;ge++)W=y.g=b[ge],F=$n(W,A,!1,y)&&F}xt.prototype.N=function(){if(xt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const b=h.g[y];for(let A=0;A<b.length;A++)_e(b[A]);delete h.g[y],h.h--}}this.G=null},xt.prototype.J=function(h,y,b,A){return this.i.add(String(h),y,!1,b,A)},xt.prototype.K=function(h,y,b,A){return this.i.add(String(h),y,!0,b,A)};function $n(h,y,b,A){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let F=!0;for(let W=0;W<y.length;++W){const ge=y[W];if(ge&&!ge.da&&ge.capture==b){const ze=ge.listener,Qt=ge.ha||ge.src;ge.fa&&pe(h.i,ge),F=ze.call(Qt,A)!==!1&&F}}return F&&!A.defaultPrevented}function lr(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:u.setTimeout(h,y||0)}function cr(h){h.g=lr(()=>{h.g=null,h.i&&(h.i=!1,cr(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Zt extends V{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:cr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fi(h){V.call(this),this.h=h,this.g={}}E(Fi,V);var Cr=[];function Kn(h){De(h.g,function(y,b){this.g.hasOwnProperty(b)&&Fn(y)},h),h.g={}}Fi.prototype.N=function(){Fi.Z.N.call(this),Kn(this)},Fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var An=u.JSON.stringify,Gi=u.JSON.parse,Nr=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function Qn(){}function Ir(){}var Yn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gt(){O.call(this,"d")}E(Gt,O);function yn(){O.call(this,"c")}E(yn,O);var Rt={},Dr=null;function $i(){return Dr=Dr||new xt}Rt.Ia="serverreachability";function as(h){O.call(this,Rt.Ia,h)}E(as,O);function si(h){const y=$i();mt(y,new as(y))}Rt.STAT_EVENT="statevent";function Ki(h,y){O.call(this,Rt.STAT_EVENT,h),this.stat=y}E(Ki,O);function He(h){const y=$i();mt(y,new Ki(y,h))}Rt.Ja="timingevent";function Ct(h,y){O.call(this,Rt.Ja,h),this.size=y}E(Ct,O);function Nt(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},y)}function zt(){this.g=!0}zt.prototype.ua=function(){this.g=!1};function vn(h,y,b,A,F,W){h.info(function(){if(h.g)if(W){var ge="",ze=W.split("&");for(let ht=0;ht<ze.length;ht++){var Qt=ze[ht].split("=");if(Qt.length>1){const kt=Qt[0];Qt=Qt[1];const Mi=kt.split("_");ge=Mi.length>=2&&Mi[1]=="type"?ge+(kt+"="+Qt+"&"):ge+(kt+"=redacted&")}}}else ge=null;else ge=W;return"XMLHTTP REQ ("+A+") [attempt "+F+"]: "+y+`
`+b+`
`+ge})}function Wt(h,y,b,A,F,W,ge){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+F+"]: "+y+`
`+b+`
`+W+" "+ge})}function Pt(h,y,b,A){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+yt(h,b)+(A?" "+A:"")})}function X(h,y){h.info(function(){return"TIMEOUT: "+y})}zt.prototype.info=function(){};function yt(h,y){if(!h.g)return y;if(!y)return null;try{const W=JSON.parse(y);if(W){for(h=0;h<W.length;h++)if(Array.isArray(W[h])){var b=W[h];if(!(b.length<2)){var A=b[1];if(Array.isArray(A)&&!(A.length<1)){var F=A[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ge=1;ge<A.length;ge++)A[ge]=""}}}}return An(W)}catch{return y}}var vt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$t={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},de;function hn(){}E(hn,Qn),hn.prototype.g=function(){return new XMLHttpRequest},de=new hn;function rt(h){return encodeURIComponent(String(h))}function Mt(h){var y=1;h=h.split(":");const b=[];for(;y>0&&h.length;)b.push(h.shift()),y--;return h.length&&b.push(h.join(":")),b}function fn(h,y,b,A){this.j=h,this.i=y,this.l=b,this.S=A||1,this.V=new Fi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _t}function _t(){this.i=null,this.g="",this.h=!1}var Lt={},Kt={};function Ee(h,y,b){h.M=1,h.A=Ii(K(y)),h.u=b,h.R=!0,os(h,null)}function os(h,y){h.F=Date.now(),xi(h),h.B=K(h.A);var b=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),no(b.i,"t",A),h.C=0,b=h.j.L,h.h=new _t,h.g=Su(h.j,b?y:null,!h.u),h.P>0&&(h.O=new Zt(p(h.Y,h,h.g),h.P)),y=h.V,b=h.g,A=h.ba;var F="readystatechange";Array.isArray(F)||(F&&(Cr[0]=F.toString()),F=Cr);for(let W=0;W<F.length;W++){const ge=Ge(b,F[W],A||y.handleEvent,!1,y.h||y);if(!ge)break;y.g[ge.key]=ge}y=h.J?P(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),si(),vn(h.i,h.v,h.B,h.l,h.S,h.u)}fn.prototype.ba=function(h){h=h.target;const y=this.O;y&&Xi(h)==3?y.j():this.Y(h)},fn.prototype.Y=function(h){try{if(h==this.g)e:{const ze=Xi(this.g),Qt=this.g.ya(),ht=this.g.ca();if(!(ze<3)&&(ze!=3||this.g&&(this.h.h||this.g.la()||xn(this.g)))){this.K||ze!=4||Qt==7||(Qt==8||ht<=0?si(3):si(2)),Ri(this);var y=this.g.ca();this.X=y;var b=Wa(this);if(this.o=y==200,Wt(this.i,this.v,this.B,this.l,this.S,ze,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,F=this.g;if((A=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(A)){var W=A;break t}}W=null}if(h=W)Pt(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ci(this,h);else{this.o=!1,this.m=3,He(12),Ln(this),Xn(this);break e}}if(this.R){h=!0;let kt;for(;!this.K&&this.C<b.length;)if(kt=ma(this,b),kt==Kt){ze==4&&(this.m=4,He(14),h=!1),Pt(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==Lt){this.m=4,He(15),Pt(this.i,this.l,b,"[Invalid Chunk]"),h=!1;break}else Pt(this.i,this.l,kt,null),Ci(this,kt);if(eo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ze!=4||b.length!=0||this.h.h||(this.m=1,He(16),h=!1),this.o=this.o&&h,!h)Pt(this.i,this.l,b,"[Invalid Chunked Response]"),Ln(this),Xn(this);else if(b.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),xl(ge),ge.P=!0,He(11))}}else Pt(this.i,this.l,b,null),Ci(this,b);ze==4&&Ln(this),this.o&&!this.K&&(ze==4?bu(this.j,this):(this.o=!1,xi(this)))}else Mr(this.g),y==400&&b.indexOf("Unknown SID")>0?(this.m=3,He(12)):(this.m=0,He(13)),Ln(this),Xn(this)}}}catch{}};function Wa(h){if(!eo(h))return h.g.la();const y=xn(h.g);if(y==="")return"";let b="";const A=y.length,F=Xi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Ln(h),Xn(h),"";h.h.i=new u.TextDecoder}for(let W=0;W<A;W++)h.h.h=!0,b+=h.h.i.decode(y[W],{stream:!(F&&W==A-1)});return y.length=0,h.h.g+=b,h.C=0,h.h.g}function eo(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function ma(h,y){var b=h.C,A=y.indexOf(`
`,b);return A==-1?Kt:(b=Number(y.substring(b,A)),isNaN(b)?Lt:(A+=1,A+b>y.length?Kt:(y=y.slice(A,A+b),h.C=A+b,y)))}fn.prototype.cancel=function(){this.K=!0,Ln(this)};function xi(h){h.T=Date.now()+h.H,ls(h,h.H)}function ls(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Nt(p(h.aa,h),y)}function Ri(h){h.D&&(u.clearTimeout(h.D),h.D=null)}fn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(X(this.i,this.B),this.M!=2&&(si(),He(17)),Ln(this),this.m=2,Xn(this)):ls(this,this.T-h)};function Xn(h){h.j.I==0||h.K||bu(h.j,h)}function Ln(h){Ri(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Kn(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Ci(h,y){try{var b=h.j;if(b.I!=0&&(b.g==h||Ni(b.h,h))){if(!h.L&&Ni(b.h,h)&&b.I==3){try{var A=b.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var F=A;if(F[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<h.F)oo(b),ys(b);else break e;Sa(b),He(18)}}else b.xa=F[1],0<b.xa-b.K&&F[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Nt(p(b.Va,b),6e3));ai(b.h)<=1&&b.ta&&(b.ta=void 0)}else gr(b,11)}else if((h.L||b.g==h)&&oo(b),!I(y))for(F=b.Ba.g.parse(y),y=0;y<F.length;y++){let ht=F[y];const kt=ht[0];if(!(kt<=b.K))if(b.K=kt,ht=ht[1],b.I==2)if(ht[0]=="c"){b.M=ht[1],b.ba=ht[2];const Mi=ht[3];Mi!=null&&(b.ka=Mi,b.j.info("VER="+b.ka));const pr=ht[4];pr!=null&&(b.za=pr,b.j.info("SVER="+b.za));const Ji=ht[5];Ji!=null&&typeof Ji=="number"&&Ji>0&&(A=1.5*Ji,b.O=A,b.j.info("backChannelRequestTimeoutMs_="+A)),A=b;const Zi=h.g;if(Zi){const Aa=Zi.g?Zi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Aa){var W=A.h;W.g||Aa.indexOf("spdy")==-1&&Aa.indexOf("quic")==-1&&Aa.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(pa(W,W.h),W.h=null))}if(A.G){const lo=Zi.g?Zi.g.getResponseHeader("X-HTTP-Session-Id"):null;lo&&(A.wa=lo,$e(A.J,A.G,lo))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-h.F,b.j.info("Handshake RTT: "+b.T+"ms")),A=b;var ge=h;if(A.na=wu(A,A.L?A.ba:null,A.W),ge.L){us(A.h,ge);var ze=ge,Qt=A.O;Qt&&(ze.H=Qt),ze.D&&(Ri(ze),xi(ze)),A.g=ge}else vu(A);b.i.length>0&&mr(b)}else ht[0]!="stop"&&ht[0]!="close"||gr(b,7);else b.I==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?gr(b,7):Sl(b):ht[0]!="noop"&&b.l&&b.l.qa(ht),b.A=0)}}si(4)}catch{}}var Bt=class{constructor(h,y){this.g=h,this.map=y}};function ga(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function cs(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ai(h){return h.h?1:h.g?h.g.size:0}function Ni(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function pa(h,y){h.g?h.g.add(y):h.h=y}function us(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}ga.prototype.cancel=function(){if(this.i=ya(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ya(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const b of h.g.values())y=y.concat(b.G);return y}return C(h.i)}var en=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function H(h,y){if(h){h=h.split("&");for(let b=0;b<h.length;b++){const A=h[b].indexOf("=");let F,W=null;A>=0?(F=h[b].substring(0,A),W=h[b].substring(A+1)):F=h[b],y(F,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Z(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Z?(this.l=h.l,ve(this,h.j),this.o=h.o,this.g=h.g,Se(this,h.u),this.h=h.h,tt(this,pu(h.i)),this.m=h.m):h&&(y=String(h).match(en))?(this.l=!1,ve(this,y[1]||"",!0),this.o=ur(y[2]||""),this.g=ur(y[3]||"",!0),Se(this,y[4]),this.h=ur(y[5]||"",!0),tt(this,y[6]||"",!0),this.m=ur(y[7]||"")):(this.l=!1,this.i=new fs(null,this.l))}Z.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(va(y,to,!0),":");var b=this.g;return(b||y=="file")&&(h.push("//"),(y=this.o)&&h.push(va(y,to,!0),"@"),h.push(rt(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&h.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(va(b,b.charAt(0)=="/"?vl:du,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",va(b,mu)),h.join("")},Z.prototype.resolve=function(h){const y=K(this);let b=!!h.j;b?ve(y,h.j):b=!!h.o,b?y.o=h.o:b=!!h.g,b?y.g=h.g:b=h.u!=null;var A=h.h;if(b)Se(y,h.u);else if(b=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var F=y.h.lastIndexOf("/");F!=-1&&(A=y.h.slice(0,F+1)+A)}if(F=A,F==".."||F==".")A="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){A=F.lastIndexOf("/",0)==0,F=F.split("/");const W=[];for(let ge=0;ge<F.length;){const ze=F[ge++];ze=="."?A&&ge==F.length&&W.push(""):ze==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),A&&ge==F.length&&W.push("")):(W.push(ze),A=!0)}A=W.join("/")}else A=F}return b?y.h=A:b=h.i.toString()!=="",b?tt(y,pu(h.i)):b=!!h.m,b&&(y.m=h.m),y};function K(h){return new Z(h)}function ve(h,y,b){h.j=b?ur(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Se(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function tt(h,y,b){y instanceof fs?(h.i=y,io(h.i,h.l)):(b||(y=va(y,hs)),h.i=new fs(y,h.l))}function $e(h,y,b){h.i.set(y,b)}function Ii(h){return $e(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function ur(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function va(h,y,b){return typeof h=="string"?(h=encodeURI(h).replace(y,oi),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function oi(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var to=/[#\/\?@]/g,du=/[#\?:]/g,vl=/[#\?]/g,hs=/[#\?@]/g,mu=/#/g;function fs(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function li(h){h.g||(h.g=new Map,h.h=0,h.i&&H(h.i,function(y,b){h.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}i=fs.prototype,i.add=function(h,y){li(this),this.i=null,h=ds(this,h);let b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(y),this.h+=1,this};function gu(h,y){li(h),y=ds(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function _l(h,y){return li(h),y=ds(h,y),h.g.has(y)}i.forEach=function(h,y){li(this),this.g.forEach(function(b,A){b.forEach(function(F){h.call(y,F,A,this)},this)},this)};function bl(h,y){li(h);let b=[];if(typeof y=="string")_l(h,y)&&(b=b.concat(h.g.get(ds(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)b=b.concat(h[y]);return b}i.set=function(h,y){return li(this),this.i=null,h=ds(this,h),_l(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=bl(this,h),h.length>0?String(h[0]):y):y};function no(h,y,b){gu(h,y),b.length>0&&(h.i=null,h.g.set(ds(h,y),C(b)),h.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var b=y[A];const F=rt(b);b=bl(this,b);for(let W=0;W<b.length;W++){let ge=F;b[W]!==""&&(ge+="="+rt(b[W])),h.push(ge)}}return this.i=h.join("&")};function pu(h){const y=new fs;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function ds(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function io(h,y){y&&!h.j&&(li(h),h.i=null,h.g.forEach(function(b,A){const F=A.toLowerCase();A!=F&&(gu(this,A),no(this,F,b))},h)),h.j=y}function Qi(h,y){const b=new zt;if(u.Image){const A=new Image;A.onload=v(Di,b,"TestLoadImage: loaded",!0,y,A),A.onerror=v(Di,b,"TestLoadImage: error",!1,y,A),A.onabort=v(Di,b,"TestLoadImage: abort",!1,y,A),A.ontimeout=v(Di,b,"TestLoadImage: timeout",!1,y,A),u.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else y(!1)}function El(h,y){const b=new zt,A=new AbortController,F=setTimeout(()=>{A.abort(),Di(b,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:A.signal}).then(W=>{clearTimeout(F),W.ok?Di(b,"TestPingServer: ok",!0,y):Di(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(F),Di(b,"TestPingServer: error",!1,y)})}function Di(h,y,b,A,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),A(b)}catch{}}function ms(){this.g=new Nr}function hr(h){this.i=h.Sb||null,this.h=h.ab||!1}E(hr,Qn),hr.prototype.g=function(){return new _a(this.i,this.h)};function _a(h,y){xt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(_a,xt),i=_a.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Yi(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||u).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gs(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Yi(this)),this.g&&(this.readyState=3,Yi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ro(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function ro(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?gs(this):Yi(this),this.readyState==3&&ro(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,gs(this))},i.Na=function(h){this.g&&(this.response=h,gs(this))},i.ga=function(){this.g&&gs(this)};function gs(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Yi(h)}i.setRequestHeader=function(h,y){this.A.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=y.next();return h.join(`\r
`)};function Yi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(_a.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Oi(h){let y="";return De(h,function(b,A){y+=A,y+=":",y+=b,y+=`\r
`}),y}function ba(h,y,b){e:{for(A in b){var A=!1;break e}A=!0}A||(b=Oi(b),typeof h=="string"?b!=null&&rt(b):$e(h,y,b))}function bt(h){xt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(bt,xt);var fr=/^https?$/i,Tl=["POST","PUT"];i=bt.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,y,b,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():de.g(),this.g.onreadystatechange=w(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(W){Ea(this,W);return}if(h=b||"",b=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var F in A)b.set(F,A[F]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const W of A.keys())b.set(W,A.get(W));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(b.keys()).find(W=>W.toLowerCase()=="content-type"),F=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(Tl,y,void 0)>=0)||A||F||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ge]of b)this.g.setRequestHeader(W,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(W){Ea(this,W)}};function Ea(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,wl(h),Or(h)}function wl(h){h.A||(h.A=!0,mt(h,"complete"),mt(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,mt(this,"complete"),mt(this,"abort"),Or(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Or(this,!0)),bt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Ta(this):this.Xa())},i.Xa=function(){Ta(this)};function Ta(h){if(h.h&&typeof c<"u"){if(h.v&&Xi(h)==4)setTimeout(h.Ca.bind(h),0);else if(mt(h,"readystatechange"),Xi(h)==4){h.h=!1;try{const W=h.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var A;if(A=W===0){let ge=String(h.D).match(en)[1]||null;!ge&&u.self&&u.self.location&&(ge=u.self.location.protocol.slice(0,-1)),A=!fr.test(ge?ge.toLowerCase():"")}b=A}if(b)mt(h,"complete"),mt(h,"success");else{h.o=6;try{var F=Xi(h)>2?h.g.statusText:""}catch{F=""}h.l=F+" ["+h.ca()+"]",wl(h)}}finally{Or(h)}}}}function Or(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const b=h.g;h.g=null,y||mt(h,"ready");try{b.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Xi(h){return h.g?h.g.readyState:0}i.ca=function(){try{return Xi(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Gi(y)}};function xn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Mr(h){const y={};h=(h.g&&Xi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(I(h[A]))continue;var b=Mt(h[A]);const F=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const W=y[F]||[];y[F]=W,W.push(b)}je(y,function(A){return A.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function dr(h,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||y}function ps(h){this.za=0,this.i=[],this.j=new zt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=dr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=dr("baseRetryDelayMs",5e3,h),this.Za=dr("retryDelaySeedMs",1e4,h),this.Ta=dr("forwardChannelMaxRetries",2,h),this.va=dr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ga(h&&h.concurrentRequestLimit),this.Ba=new ms,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=ps.prototype,i.ka=8,i.I=1,i.connect=function(h,y,b,A){He(0),this.W=h,this.H=y||{},b&&A!==void 0&&(this.H.OSID=b,this.H.OAID=A),this.F=this.X,this.J=wu(this,null,this.W),mr(this)};function Sl(h){if(so(h),h.I==3){var y=h.V++,b=K(h.J);if($e(b,"SID",h.M),$e(b,"RID",y),$e(b,"TYPE","terminate"),wa(h,b),y=new fn(h,h.j,y),y.M=2,y.A=Ii(K(b)),b=!1,u.navigator&&u.navigator.sendBeacon)try{b=u.navigator.sendBeacon(y.A.toString(),"")}catch{}!b&&u.Image&&(new Image().src=y.A,b=!0),b||(y.g=Su(y.j,null),y.g.ea(y.A)),y.F=Date.now(),xi(y)}Tu(h)}function ys(h){h.g&&(xl(h),h.g.cancel(),h.g=null)}function so(h){ys(h),h.v&&(u.clearTimeout(h.v),h.v=null),oo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function mr(h){if(!cs(h.h)&&!h.m){h.m=!0;var y=h.Ea;ie||R(),J||(ie(),J=!0),x.add(y,h),h.D=0}}function ao(h,y){return ai(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Nt(p(h.Ea,h,y),Eu(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const F=new fn(this,this.j,h);let W=this.o;if(this.U&&(W?(W=P(W),me(W,this.U)):W=this.U),this.u!==null||this.R||(F.J=W,W=null),this.S)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var A=this.i[b];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=yu(this,F,y),b=K(this.J),$e(b,"RID",h),$e(b,"CVER",22),this.G&&$e(b,"X-HTTP-Session-Id",this.G),wa(this,b),W&&(this.R?y="headers="+rt(Oi(W))+"&"+y:this.u&&ba(b,this.u,W)),pa(this.h,F),this.Ra&&$e(b,"TYPE","init"),this.S?($e(b,"$req",y),$e(b,"SID","null"),F.U=!0,Ee(F,b,null)):Ee(F,b,y),this.I=2}}else this.I==3&&(h?Al(this,h):this.i.length==0||cs(this.h)||Al(this))};function Al(h,y){var b;y?b=y.l:b=h.V++;const A=K(h.J);$e(A,"SID",h.M),$e(A,"RID",b),$e(A,"AID",h.K),wa(h,A),h.u&&h.o&&ba(A,h.u,h.o),b=new fn(h,h.j,b,h.D+1),h.u===null&&(b.J=h.o),y&&(h.i=y.G.concat(h.i)),y=yu(h,b,1e3),b.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),pa(h.h,b),Ee(b,A,y)}function wa(h,y){h.H&&De(h.H,function(b,A){$e(y,A,b)}),h.l&&De({},function(b,A){$e(y,A,b)})}function yu(h,y,b){b=Math.min(h.i.length,b);const A=h.l?p(h.l.Ka,h.l,h):null;e:{var F=h.i;let ze=-1;for(;;){const Qt=["count="+b];ze==-1?b>0?(ze=F[0].g,Qt.push("ofs="+ze)):ze=0:Qt.push("ofs="+ze);let ht=!0;for(let kt=0;kt<b;kt++){var W=F[kt].g;const Mi=F[kt].map;if(W-=ze,W<0)ze=Math.max(0,F[kt].g-100),ht=!1;else try{W="req"+W+"_"||"";try{var ge=Mi instanceof Map?Mi:Object.entries(Mi);for(const[pr,Ji]of ge){let Zi=Ji;m(Ji)&&(Zi=An(Ji)),Qt.push(W+pr+"="+encodeURIComponent(Zi))}}catch(pr){throw Qt.push(W+"type="+encodeURIComponent("_badmap")),pr}}catch{A&&A(Mi)}}if(ht){ge=Qt.join("&");break e}}ge=void 0}return h=h.i.splice(0,b),y.G=h,ge}function vu(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ie||R(),J||(ie(),J=!0),x.add(y,h),h.A=0}}function Sa(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Nt(p(h.Da,h),Eu(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,_u(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Nt(p(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,He(10),ys(this),_u(this))};function xl(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function _u(h){h.g=new fn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=K(h.na);$e(y,"RID","rpc"),$e(y,"SID",h.M),$e(y,"AID",h.K),$e(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&$e(y,"TO",h.ia),$e(y,"TYPE","xmlhttp"),wa(h,y),h.u&&h.o&&ba(y,h.u,h.o),h.O&&(h.g.H=h.O);var b=h.g;h=h.ba,b.M=1,b.A=Ii(K(y)),b.u=null,b.R=!0,os(b,h)}i.Va=function(){this.C!=null&&(this.C=null,ys(this),Sa(this),He(19))};function oo(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function bu(h,y){var b=null;if(h.g==y){oo(h),xl(h),h.g=null;var A=2}else if(Ni(h.h,y))b=y.G,us(h.h,y),A=1;else return;if(h.I!=0){if(y.o)if(A==1){b=y.u?y.u.length:0,y=Date.now()-y.F;var F=h.D;A=$i(),mt(A,new Ct(A,b)),mr(h)}else vu(h);else if(F=y.m,F==3||F==0&&y.X>0||!(A==1&&ao(h,y)||A==2&&Sa(h)))switch(b&&b.length>0&&(y=h.h,y.i=y.i.concat(b)),F){case 1:gr(h,5);break;case 4:gr(h,10);break;case 3:gr(h,6);break;default:gr(h,2)}}}function Eu(h,y){let b=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(b*=2),b*y}function gr(h,y){if(h.j.info("Error code "+y),y==2){var b=p(h.bb,h),A=h.Ua;const F=!A;A=new Z(A||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||ve(A,"https"),Ii(A),F?Qi(A.toString(),b):El(A.toString(),b)}else He(2);h.I=0,h.l&&h.l.pa(y),Tu(h),so(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),He(2)):(this.j.info("Failed to ping google.com"),He(1))};function Tu(h){if(h.I=0,h.ja=[],h.l){const y=ya(h.h);(y.length!=0||h.i.length!=0)&&(M(h.ja,y),M(h.ja,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.oa()}}function wu(h,y,b){var A=b instanceof Z?K(b):new Z(b);if(A.g!="")y&&(A.g=y+"."+A.g),Se(A,A.u);else{var F=u.location;A=F.protocol,y=y?y+"."+F.hostname:F.hostname,F=+F.port;const W=new Z(null);A&&ve(W,A),y&&(W.g=y),F&&Se(W,F),b&&(W.h=b),A=W}return b=h.G,y=h.wa,b&&y&&$e(A,b,y),$e(A,"VER",h.ka),wa(h,A),A}function Su(h,y,b){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new bt(new hr({ab:b})):new bt(h.ma),y.Fa(h.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Au(){}i=Au.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function vs(){}vs.prototype.g=function(h,y){return new Jn(h,y)};function Jn(h,y){xt.call(this),this.g=new ps(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!I(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new kr(this)}E(Jn,xt),Jn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Jn.prototype.close=function(){Sl(this.g)},Jn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.v&&(b={},b.__data__=An(h),h=b);y.i.push(new Bt(y.Ya++,h)),y.I==3&&mr(y)},Jn.prototype.N=function(){this.g.l=null,delete this.j,Sl(this.g),delete this.g,Jn.Z.N.call(this)};function xu(h){Gt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const b in y){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(xu,Gt);function Ru(){yn.call(this),this.status=1}E(Ru,yn);function kr(h){this.g=h}E(kr,Au),kr.prototype.ra=function(){mt(this.g,"a")},kr.prototype.qa=function(h){mt(this.g,new xu(h))},kr.prototype.pa=function(h){mt(this.g,new Ru)},kr.prototype.oa=function(){mt(this.g,"b")},vs.prototype.createWebChannel=vs.prototype.g,Jn.prototype.send=Jn.prototype.o,Jn.prototype.open=Jn.prototype.m,Jn.prototype.close=Jn.prototype.close,wE=function(){return new vs},TE=function(){return $i()},EE=Rt,kg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},vt.NO_ERROR=0,vt.TIMEOUT=8,vt.HTTP_ERROR=6,Bh=vt,$t.COMPLETE="complete",bE=$t,Ir.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",xt.prototype.listen=xt.prototype.J,fc=Ir,bt.prototype.listenOnce=bt.prototype.K,bt.prototype.getLastError=bt.prototype.Ha,bt.prototype.getLastErrorCode=bt.prototype.ya,bt.prototype.getStatus=bt.prototype.ca,bt.prototype.getResponseJson=bt.prototype.La,bt.prototype.getResponseText=bt.prototype.la,bt.prototype.send=bt.prototype.ea,bt.prototype.setWithCredentials=bt.prototype.Fa,_E=bt}).apply(typeof Dh<"u"?Dh:typeof self<"u"?self:typeof window<"u"?window:{});const lb="@firebase/firestore",cb="4.9.3";class Bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");let cl="12.7.0";const Qa=new up("@firebase/firestore");function Uo(){return Qa.logLevel}function be(i,...e){if(Qa.logLevel<=Ze.DEBUG){const t=e.map(dp);Qa.debug(`Firestore (${cl}): ${i}`,...t)}}function es(i,...e){if(Qa.logLevel<=Ze.ERROR){const t=e.map(dp);Qa.error(`Firestore (${cl}): ${i}`,...t)}}function Wo(i,...e){if(Qa.logLevel<=Ze.WARN){const t=e.map(dp);Qa.warn(`Firestore (${cl}): ${i}`,...t)}}function dp(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}function Ce(i,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,SE(i,s,t)}function SE(i,e,t){let s=`FIRESTORE (${cl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw es(s),new Error(s)}function ot(i,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,i||SE(e,o,s)}function Ve(i,e){return i}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends ss{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ta{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class AE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Bn.UNAUTHENTICATED)))}shutdown(){}}class rR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class sR{constructor(e){this.t=e,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ot(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let c=new ta;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ta,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ta)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ot(typeof s.accessToken=="string",31837,{l:s}),new AE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string",2055,{h:e}),new Bn(e)}}class aR{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class oR{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new aR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ub{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ot(this.o===void 0,3512);const s=c=>{c.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,be("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const o=c=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ub(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ot(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ub(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function cR(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class mp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=cR(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<t&&(s+=e.charAt(o[c]%62))}return s}}function We(i,e){return i<e?-1:i>e?1:0}function Vg(i,e){const t=Math.min(i.length,e.length);for(let s=0;s<t;s++){const o=i.charAt(s),c=e.charAt(s);if(o!==c)return ug(o)===ug(c)?We(o,c):ug(o)?1:-1}return We(i.length,e.length)}const uR=55296,hR=57343;function ug(i){const e=i.charCodeAt(0);return e>=uR&&e<=hR}function el(i,e,t){return i.length===e.length&&i.every(((s,o)=>t(s,e[o])))}const hb="__name__";class Er{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ce(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Er.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Er?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const c=Er.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return We(e.length,t.length)}static compareSegments(e,t){const s=Er.isNumericId(e),o=Er.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Er.extractNumericId(e).compare(Er.extractNumericId(t)):Vg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ea.fromString(e.substring(4,e.length-2))}}class St extends Er{construct(e,t,s){return new St(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ye(oe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new St(t)}static emptyPath(){return new St([])}}const fR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kn extends Er{construct(e,t,s){return new kn(e,t,s)}static isValidIdentifier(e){return fR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hb}static keyField(){return new kn([hb])}static fromServerFormat(e){const t=[];let s="",o=0;const c=()=>{if(s.length===0)throw new ye(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ye(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ye(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(u=!u,o++):m!=="."||u?(s+=m,o++):(c(),o++)}if(c(),u)throw new ye(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kn(t)}static emptyPath(){return new kn([])}}class xe{constructor(e){this.path=e}static fromPath(e){return new xe(St.fromString(e))}static fromName(e){return new xe(St.fromString(e).popFirst(5))}static empty(){return new xe(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return St.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new St(e.slice()))}}function xE(i,e,t){if(!t)throw new ye(oe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function dR(i,e,t,s){if(e===!0&&s===!0)throw new ye(oe.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function fb(i){if(!xe.isDocumentKey(i))throw new ye(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function db(i){if(xe.isDocumentKey(i))throw new ye(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function RE(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Df(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ce(12329,{type:typeof i})}function Zr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ye(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Df(i);throw new ye(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function cn(i,e){const t={typeString:i};return e&&(t.value=e),t}function Xc(i,e){if(!RE(i))throw new ye(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){t=`JSON missing required field: '${s}'`;break}const u=i[s];if(o&&typeof u!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&u!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new ye(oe.INVALID_ARGUMENT,t);return!0}const mb=-62135596800,gb=1e6;class Ot{static now(){return Ot.fromMillis(Date.now())}static fromDate(e){return Ot.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*gb);return new Ot(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<mb)throw new ye(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gb}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xc(e,Ot._jsonSchema))return new Ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-mb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ot._jsonSchemaVersion="firestore/timestamp/1.0",Ot._jsonSchema={type:cn("string",Ot._jsonSchemaVersion),seconds:cn("number"),nanoseconds:cn("number")};class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new Ot(0,0))}static max(){return new Ie(new Ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Vc=-1;function mR(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(s===1e9?new Ot(t+1,0):new Ot(t,s));return new sa(o,xe.empty(),e)}function gR(i){return new sa(i.readTime,i.key,Vc)}class sa{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new sa(Ie.min(),xe.empty(),Vc)}static max(){return new sa(Ie.max(),xe.empty(),Vc)}}function pR(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(i.documentKey,e.documentKey),t!==0?t:We(i.largestBatchId,e.largestBatchId))}const yR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ul(i){if(i.code!==oe.FAILED_PRECONDITION||i.message!==yR)throw i;be("LocalStore","Unexpectedly lost primary lease")}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.reject(t)}static resolve(e){return new ue(((t,s)=>{t(e)}))}static reject(e){return new ue(((t,s)=>{s(e)}))}static waitFor(e){return new ue(((t,s)=>{let o=0,c=0,u=!1;e.forEach((m=>{++o,m.next((()=>{++c,u&&c===o&&t()}),(g=>s(g)))})),u=!0,c===o&&t()}))}static or(e){let t=ue.resolve(!1);for(const s of e)t=t.next((o=>o?ue.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,c)=>{s.push(t.call(this,o,c))})),this.waitFor(s)}static mapArray(e,t){return new ue(((s,o)=>{const c=e.length,u=new Array(c);let m=0;for(let g=0;g<c;g++){const p=g;t(e[p]).next((v=>{u[p]=v,++m,m===c&&s(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new ue(((s,o)=>{const c=()=>{e()===!0?t().next((()=>{c()}),o):s()};c()}))}}function _R(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function hl(i){return i.name==="IndexedDbTransactionError"}class Of{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Of.ce=-1;const gp=-1;function Jc(i){return i==null}function nf(i){return i===0&&1/i==-1/0}function bR(i){return typeof i=="number"&&Number.isInteger(i)&&!nf(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const CE="";function ER(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=pb(e)),e=TR(i.get(t),e);return pb(e)}function TR(i,e){let t=e;const s=i.length;for(let o=0;o<s;o++){const c=i.charAt(o);switch(c){case"\0":t+="";break;case CE:t+="";break;default:t+=c}}return t}function pb(i){return i+CE+""}function yb(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function fa(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function NE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class jt{constructor(e,t){this.comparator=e,this.root=t||On.EMPTY}insert(e,t){return new jt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,On.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,On.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oh(this.root,e,this.comparator,!0)}}class Oh{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class On{constructor(e,t,s,o,c){this.key=e,this.value=t,this.color=s??On.RED,this.left=o??On.EMPTY,this.right=c??On.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,c){return new On(e??this.key,t??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,s),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return On.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return On.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,On.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,On.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}On.EMPTY=null,On.RED=!0,On.BLACK=!1;On.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,s,o,c){return this}insert(e,t,s){return new On(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pn{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vb(this.data.getIterator())}getIteratorFrom(e){return new vb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new pn(this.comparator);return t.data=e,t}}class vb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Si{constructor(e){this.fields=e,e.sort(kn.comparator)}static empty(){return new Si([])}unionWith(e){let t=new pn(kn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Si(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return el(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class IE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new IE("Invalid base64 string: "+c):c}})(e);return new Vn(t)}static fromUint8Array(e){const t=(function(o){let c="";for(let u=0;u<o.length;++u)c+=String.fromCharCode(o[u]);return c})(e);return new Vn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vn.EMPTY_BYTE_STRING=new Vn("");const wR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function aa(i){if(ot(!!i,39018),typeof i=="string"){let e=0;const t=wR.exec(i);if(ot(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Jt(i.seconds),nanos:Jt(i.nanos)}}function Jt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function oa(i){return typeof i=="string"?Vn.fromBase64String(i):Vn.fromUint8Array(i)}const DE="server_timestamp",OE="__type__",ME="__previous_value__",kE="__local_write_time__";function pp(i){return(i?.mapValue?.fields||{})[OE]?.stringValue===DE}function Mf(i){const e=i.mapValue.fields[ME];return pp(e)?Mf(e):e}function Pc(i){const e=aa(i.mapValue.fields[kE].timestampValue);return new Ot(e.seconds,e.nanos)}class SR{constructor(e,t,s,o,c,u,m,g,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=v}}const rf="(default)";class Lc{constructor(e,t){this.projectId=e,this.database=t||rf}static empty(){return new Lc("","")}get isDefaultDatabase(){return this.database===rf}isEqual(e){return e instanceof Lc&&e.projectId===this.projectId&&e.database===this.database}}const VE="__type__",AR="__max__",Mh={mapValue:{}},PE="__vector__",sf="value";function la(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?pp(i)?4:RR(i)?9007199254740991:xR(i)?10:11:Ce(28295,{value:i})}function Rr(i,e){if(i===e)return!0;const t=la(i);if(t!==la(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Pc(i).isEqual(Pc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const u=aa(o.timestampValue),m=aa(c.timestampValue);return u.seconds===m.seconds&&u.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return oa(o.bytesValue).isEqual(oa(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return Jt(o.geoPointValue.latitude)===Jt(c.geoPointValue.latitude)&&Jt(o.geoPointValue.longitude)===Jt(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Jt(o.integerValue)===Jt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const u=Jt(o.doubleValue),m=Jt(c.doubleValue);return u===m?nf(u)===nf(m):isNaN(u)&&isNaN(m)}return!1})(i,e);case 9:return el(i.arrayValue.values||[],e.arrayValue.values||[],Rr);case 10:case 11:return(function(o,c){const u=o.mapValue.fields||{},m=c.mapValue.fields||{};if(yb(u)!==yb(m))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(m[g]===void 0||!Rr(u[g],m[g])))return!1;return!0})(i,e);default:return Ce(52216,{left:i})}}function jc(i,e){return(i.values||[]).find((t=>Rr(t,e)))!==void 0}function tl(i,e){if(i===e)return 0;const t=la(i),s=la(e);if(t!==s)return We(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return We(i.booleanValue,e.booleanValue);case 2:return(function(c,u){const m=Jt(c.integerValue||c.doubleValue),g=Jt(u.integerValue||u.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(i,e);case 3:return _b(i.timestampValue,e.timestampValue);case 4:return _b(Pc(i),Pc(e));case 5:return Vg(i.stringValue,e.stringValue);case 6:return(function(c,u){const m=oa(c),g=oa(u);return m.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(c,u){const m=c.split("/"),g=u.split("/");for(let p=0;p<m.length&&p<g.length;p++){const v=We(m[p],g[p]);if(v!==0)return v}return We(m.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,u){const m=We(Jt(c.latitude),Jt(u.latitude));return m!==0?m:We(Jt(c.longitude),Jt(u.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return bb(i.arrayValue,e.arrayValue);case 10:return(function(c,u){const m=c.fields||{},g=u.fields||{},p=m[sf]?.arrayValue,v=g[sf]?.arrayValue,E=We(p?.values?.length||0,v?.values?.length||0);return E!==0?E:bb(p,v)})(i.mapValue,e.mapValue);case 11:return(function(c,u){if(c===Mh.mapValue&&u===Mh.mapValue)return 0;if(c===Mh.mapValue)return 1;if(u===Mh.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),p=u.fields||{},v=Object.keys(p);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const w=Vg(g[E],v[E]);if(w!==0)return w;const C=tl(m[g[E]],p[v[E]]);if(C!==0)return C}return We(g.length,v.length)})(i.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function _b(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return We(i,e);const t=aa(i),s=aa(e),o=We(t.seconds,s.seconds);return o!==0?o:We(t.nanos,s.nanos)}function bb(i,e){const t=i.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const c=tl(t[o],s[o]);if(c)return c}return We(t.length,s.length)}function nl(i){return Pg(i)}function Pg(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const s=aa(t);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return oa(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return xe.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let s="[",o=!0;for(const c of t.values||[])o?o=!1:s+=",",s+=Pg(c);return s+"]"})(i.arrayValue):"mapValue"in i?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const u of s)c?c=!1:o+=",",o+=`${u}:${Pg(t.fields[u])}`;return o+"}"})(i.mapValue):Ce(61005,{value:i})}function qh(i){switch(la(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mf(i);return e?16+qh(e):16;case 5:return 2*i.stringValue.length;case 6:return oa(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+qh(c)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return fa(s.fields,((c,u)=>{o+=c.length+qh(u)})),o})(i.mapValue);default:throw Ce(13486,{value:i})}}function Eb(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Lg(i){return!!i&&"integerValue"in i}function yp(i){return!!i&&"arrayValue"in i}function Tb(i){return!!i&&"nullValue"in i}function wb(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Hh(i){return!!i&&"mapValue"in i}function xR(i){return(i?.mapValue?.fields||{})[VE]?.stringValue===PE}function Ec(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return fa(i.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Ec(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ec(i.arrayValue.values[t]);return e}return{...i}}function RR(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===AR}class ti{constructor(e){this.value=e}static empty(){return new ti({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Hh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ec(t)}setAll(e){let t=kn.emptyPath(),s={},o=[];e.forEach(((u,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=m.popLast()}u?s[m.lastSegment()]=Ec(u):o.push(m.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,s,o)}delete(e){const t=this.field(e.popLast());Hh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Rr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Hh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){fa(t,((o,c)=>e[o]=c));for(const o of s)delete e[o]}clone(){return new ti(Ec(this.value))}}function LE(i){const e=[];return fa(i.fields,((t,s)=>{const o=new kn([t]);if(Hh(s)){const c=LE(s.mapValue).fields;if(c.length===0)e.push(o);else for(const u of c)e.push(o.child(u))}else e.push(o)})),new Si(e)}class wn{constructor(e,t,s,o,c,u,m){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=c,this.data=u,this.documentState=m}static newInvalidDocument(e){return new wn(e,0,Ie.min(),Ie.min(),Ie.min(),ti.empty(),0)}static newFoundDocument(e,t,s,o){return new wn(e,1,t,Ie.min(),s,o,0)}static newNoDocument(e,t){return new wn(e,2,t,Ie.min(),Ie.min(),ti.empty(),0)}static newUnknownDocument(e,t){return new wn(e,3,t,Ie.min(),Ie.min(),ti.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ti.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ti.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class af{constructor(e,t){this.position=e,this.inclusive=t}}function Sb(i,e,t){let s=0;for(let o=0;o<i.position.length;o++){const c=e[o],u=i.position[o];if(c.field.isKeyField()?s=xe.comparator(xe.fromName(u.referenceValue),t.key):s=tl(u,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Ab(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Rr(i.position[t],e.position[t]))return!1;return!0}class of{constructor(e,t="asc"){this.field=e,this.dir=t}}function CR(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class jE{}class ln extends jE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new IR(e,t,s):t==="array-contains"?new MR(e,s):t==="in"?new kR(e,s):t==="not-in"?new VR(e,s):t==="array-contains-any"?new PR(e,s):new ln(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new DR(e,s):new OR(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(tl(t,this.value)):t!==null&&la(this.value)===la(t)&&this.matchesComparison(tl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends jE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new rr(e,t)}matches(e){return UE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function UE(i){return i.op==="and"}function zE(i){return NR(i)&&UE(i)}function NR(i){for(const e of i.filters)if(e instanceof rr)return!1;return!0}function jg(i){if(i instanceof ln)return i.field.canonicalString()+i.op.toString()+nl(i.value);if(zE(i))return i.filters.map((e=>jg(e))).join(",");{const e=i.filters.map((t=>jg(t))).join(",");return`${i.op}(${e})`}}function BE(i,e){return i instanceof ln?(function(s,o){return o instanceof ln&&s.op===o.op&&s.field.isEqual(o.field)&&Rr(s.value,o.value)})(i,e):i instanceof rr?(function(s,o){return o instanceof rr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,u,m)=>c&&BE(u,o.filters[m])),!0):!1})(i,e):void Ce(19439)}function qE(i){return i instanceof ln?(function(t){return`${t.field.canonicalString()} ${t.op} ${nl(t.value)}`})(i):i instanceof rr?(function(t){return t.op.toString()+" {"+t.getFilters().map(qE).join(" ,")+"}"})(i):"Filter"}class IR extends ln{constructor(e,t,s){super(e,t,s),this.key=xe.fromName(s.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class DR extends ln{constructor(e,t){super(e,"in",t),this.keys=HE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class OR extends ln{constructor(e,t){super(e,"not-in",t),this.keys=HE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function HE(i,e){return(e.arrayValue?.values||[]).map((t=>xe.fromName(t.referenceValue)))}class MR extends ln{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yp(t)&&jc(t.arrayValue,this.value)}}class kR extends ln{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&jc(this.value.arrayValue,t)}}class VR extends ln{constructor(e,t){super(e,"not-in",t)}matches(e){if(jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!jc(this.value.arrayValue,t)}}class PR extends ln{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>jc(this.value.arrayValue,s)))}}class LR{constructor(e,t=null,s=[],o=[],c=null,u=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=u,this.endAt=m,this.Te=null}}function xb(i,e=null,t=[],s=[],o=null,c=null,u=null){return new LR(i,e,t,s,o,c,u)}function vp(i){const e=Ve(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>jg(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Jc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>nl(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>nl(s))).join(",")),e.Te=t}return e.Te}function _p(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!CR(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!BE(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Ab(i.startAt,e.startAt)&&Ab(i.endAt,e.endAt)}function Ug(i){return xe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class Zc{constructor(e,t=null,s=[],o=[],c=null,u="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=u,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function jR(i,e,t,s,o,c,u,m){return new Zc(i,e,t,s,o,c,u,m)}function bp(i){return new Zc(i)}function Rb(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function FE(i){return i.collectionGroup!==null}function Tc(i){const e=Ve(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let m=new pn(kn.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new of(c,s))})),t.has(kn.keyField().canonicalString())||e.Ie.push(new of(kn.keyField(),s))}return e.Ie}function Tr(i){const e=Ve(i);return e.Ee||(e.Ee=UR(e,Tc(i))),e.Ee}function UR(i,e){if(i.limitType==="F")return xb(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new of(o.field,c)}));const t=i.endAt?new af(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new af(i.startAt.position,i.startAt.inclusive):null;return xb(i.path,i.collectionGroup,e,i.filters,i.limit,t,s)}}function zg(i,e){const t=i.filters.concat([e]);return new Zc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Bg(i,e,t){return new Zc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function kf(i,e){return _p(Tr(i),Tr(e))&&i.limitType===e.limitType}function GE(i){return`${vp(Tr(i))}|lt:${i.limitType}`}function zo(i){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>qE(o))).join(", ")}]`),Jc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>nl(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>nl(o))).join(",")),`Target(${s})`})(Tr(i))}; limitType=${i.limitType})`}function Vf(i,e){return e.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):xe.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(i,e)&&(function(s,o){for(const c of Tc(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(u,m,g){const p=Sb(u,m,g);return u.inclusive?p<=0:p<0})(s.startAt,Tc(s),o)||s.endAt&&!(function(u,m,g){const p=Sb(u,m,g);return u.inclusive?p>=0:p>0})(s.endAt,Tc(s),o))})(i,e)}function zR(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function $E(i){return(e,t)=>{let s=!1;for(const o of Tc(i)){const c=BR(o,e,t);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function BR(i,e,t){const s=i.field.isKeyField()?xe.comparator(e.key,t.key):(function(c,u,m){const g=u.data.field(c),p=m.data.field(c);return g!==null&&p!==null?tl(g,p):Ce(42886)})(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ce(19790,{direction:i.dir})}}class Ja{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){fa(this.inner,((t,s)=>{for(const[o,c]of s)e(o,c)}))}isEmpty(){return NE(this.inner)}size(){return this.innerSize}}const qR=new jt(xe.comparator);function ts(){return qR}const KE=new jt(xe.comparator);function dc(...i){let e=KE;for(const t of i)e=e.insert(t.key,t);return e}function QE(i){let e=KE;return i.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ha(){return wc()}function YE(){return wc()}function wc(){return new Ja((i=>i.toString()),((i,e)=>i.isEqual(e)))}const HR=new jt(xe.comparator),FR=new pn(xe.comparator);function et(...i){let e=FR;for(const t of i)e=e.add(t);return e}const GR=new pn(We);function $R(){return GR}function Ep(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nf(e)?"-0":e}}function XE(i){return{integerValue:""+i}}function KR(i,e){return bR(e)?XE(e):Ep(i,e)}class Pf{constructor(){this._=void 0}}function QR(i,e,t){return i instanceof lf?(function(o,c){const u={fields:{[OE]:{stringValue:DE},[kE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&pp(c)&&(c=Mf(c)),c&&(u.fields[ME]=c),{mapValue:u}})(t,e):i instanceof Uc?ZE(i,e):i instanceof zc?WE(i,e):(function(o,c){const u=JE(o,c),m=Cb(u)+Cb(o.Ae);return Lg(u)&&Lg(o.Ae)?XE(m):Ep(o.serializer,m)})(i,e)}function YR(i,e,t){return i instanceof Uc?ZE(i,e):i instanceof zc?WE(i,e):t}function JE(i,e){return i instanceof cf?(function(s){return Lg(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class lf extends Pf{}class Uc extends Pf{constructor(e){super(),this.elements=e}}function ZE(i,e){const t=eT(e);for(const s of i.elements)t.some((o=>Rr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class zc extends Pf{constructor(e){super(),this.elements=e}}function WE(i,e){let t=eT(e);for(const s of i.elements)t=t.filter((o=>!Rr(o,s)));return{arrayValue:{values:t}}}class cf extends Pf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Cb(i){return Jt(i.integerValue||i.doubleValue)}function eT(i){return yp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function XR(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof Uc&&o instanceof Uc||s instanceof zc&&o instanceof zc?el(s.elements,o.elements,Rr):s instanceof cf&&o instanceof cf?Rr(s.Ae,o.Ae):s instanceof lf&&o instanceof lf})(i.transform,e.transform)}class JR{constructor(e,t){this.version=e,this.transformResults=t}}class ni{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ni}static exists(e){return new ni(void 0,e)}static updateTime(e){return new ni(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Lf{}function tT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Tp(i.key,ni.none()):new Wc(i.key,i.data,ni.none());{const t=i.data,s=ti.empty();let o=new pn(kn.comparator);for(let c of e.fields)if(!o.has(c)){let u=t.field(c);u===null&&c.length>1&&(c=c.popLast(),u=t.field(c)),u===null?s.delete(c):s.set(c,u),o=o.add(c)}return new da(i.key,s,new Si(o.toArray()),ni.none())}}function ZR(i,e,t){i instanceof Wc?(function(o,c,u){const m=o.value.clone(),g=Ib(o.fieldTransforms,c,u.transformResults);m.setAll(g),c.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(i,e,t):i instanceof da?(function(o,c,u){if(!Fh(o.precondition,c))return void c.convertToUnknownDocument(u.version);const m=Ib(o.fieldTransforms,c,u.transformResults),g=c.data;g.setAll(nT(o)),g.setAll(m),c.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(i,e,t):(function(o,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Sc(i,e,t,s){return i instanceof Wc?(function(c,u,m,g){if(!Fh(c.precondition,u))return m;const p=c.value.clone(),v=Db(c.fieldTransforms,g,u);return p.setAll(v),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(i,e,t,s):i instanceof da?(function(c,u,m,g){if(!Fh(c.precondition,u))return m;const p=Db(c.fieldTransforms,g,u),v=u.data;return v.setAll(nT(c)),v.setAll(p),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((E=>E.field)))})(i,e,t,s):(function(c,u,m){return Fh(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):m})(i,e,t)}function WR(i,e){let t=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),c=JE(s.transform,o||null);c!=null&&(t===null&&(t=ti.empty()),t.set(s.field,c))}return t||null}function Nb(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&el(s,o,((c,u)=>XR(c,u)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Wc extends Lf{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class da extends Lf{constructor(e,t,s,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function nT(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}})),e}function Ib(i,e,t){const s=new Map;ot(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let o=0;o<t.length;o++){const c=i[o],u=c.transform,m=e.data.field(c.field);s.set(c.field,YR(u,m,t[o]))}return s}function Db(i,e,t){const s=new Map;for(const o of i){const c=o.transform,u=t.data.field(o.field);s.set(o.field,QR(c,u,e))}return s}class Tp extends Lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iT extends Lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class eC{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&ZR(c,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Sc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Sc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=YE();return this.mutations.forEach((o=>{const c=e.get(o.key),u=c.overlayedDocument;let m=this.applyToLocalView(u,c.mutatedFields);m=t.has(o.key)?null:m;const g=tT(u,m);g!==null&&s.set(o.key,g),u.isValidDocument()||u.convertToNoDocument(Ie.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),et())}isEqual(e){return this.batchId===e.batchId&&el(this.mutations,e.mutations,((t,s)=>Nb(t,s)))&&el(this.baseMutations,e.baseMutations,((t,s)=>Nb(t,s)))}}class wp{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){ot(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return HR})();const c=e.mutations;for(let u=0;u<c.length;u++)o=o.insert(c[u].key,s[u].version);return new wp(e,t,s,o)}}class tC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class nC{constructor(e,t){this.count=e,this.unchangedNames=t}}var on,st;function rT(i){switch(i){case oe.OK:return Ce(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Ce(15467,{code:i})}}function sT(i){if(i===void 0)return es("GRPC error has no .code"),oe.UNKNOWN;switch(i){case on.OK:return oe.OK;case on.CANCELLED:return oe.CANCELLED;case on.UNKNOWN:return oe.UNKNOWN;case on.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case on.INTERNAL:return oe.INTERNAL;case on.UNAVAILABLE:return oe.UNAVAILABLE;case on.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case on.NOT_FOUND:return oe.NOT_FOUND;case on.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case on.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case on.ABORTED:return oe.ABORTED;case on.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case on.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case on.DATA_LOSS:return oe.DATA_LOSS;default:return Ce(39323,{code:i})}}(st=on||(on={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";function iC(){return new TextEncoder}const rC=new ea([4294967295,4294967295],0);function Ob(i){const e=iC().encode(i),t=new vE;return t.update(e),new Uint8Array(t.digest())}function Mb(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ea([t,s],0),new ea([o,c],0)]}class Sp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new mc(`Invalid padding: ${t}`);if(s<0)throw new mc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new mc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new mc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ea.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(ea.fromNumber(s)));return o.compare(rC)===1&&(o=new ea([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Ob(e),[s,o]=Mb(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(s,o,c);if(!this.we(u))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new Sp(c,o,t);return s.forEach((m=>u.insert(m))),u}insert(e){if(this.ge===0)return;const t=Ob(e),[s,o]=Mb(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(s,o,c);this.Se(u)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class mc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class jf{constructor(e,t,s,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new jf(Ie.min(),o,new jt(We),ts(),et())}}class eu{constructor(e,t,s,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new eu(s,t,et(),et(),et())}}class Gh{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class aT{constructor(e,t){this.targetId=e,this.Ce=t}}class oT{constructor(e,t,s=Vn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class kb{constructor(){this.ve=0,this.Fe=Vb(),this.Me=Vn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=et(),t=et(),s=et();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ce(38017,{changeType:c})}})),new eu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=Vb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ot(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class sC{constructor(e){this.Ge=e,this.ze=new Map,this.je=ts(),this.Je=kh(),this.He=kh(),this.Ye=new jt(We)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const c=o.target;if(Ug(c))if(s===0){const u=new xe(c.path);this.et(t,u,wn.newNoDocument(u,Ie.min()))}else ot(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const m=this.ut(e),g=m?this.ct(m,e,u):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=t;let u,m;try{u=oa(s).toUint8Array()}catch(g){if(g instanceof IE)return Wo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Sp(u,o,c)}catch(g){return Wo(g instanceof mc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((c=>{const u=this.Ge.ht(),m=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(t,c,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((c,u)=>{const m=this.ot(u);if(m){if(c.current&&Ug(m.target)){const g=new xe(m.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,wn.newNoDocument(g,e))}c.Be&&(t.set(u,c.ke()),c.qe())}}));let s=et();this.He.forEach(((c,u)=>{let m=!0;u.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const o=new jf(e,t,this.Ye,this.je,s);return this.je=ts(),this.Je=kh(),this.He=kh(),this.Ye=new jt(We),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new kb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new pn(We),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new pn(We),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||be("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new kb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function kh(){return new jt(xe.comparator)}function Vb(){return new jt(xe.comparator)}const aC={asc:"ASCENDING",desc:"DESCENDING"},oC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lC={and:"AND",or:"OR"};class cC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qg(i,e){return i.useProto3Json||Jc(e)?e:{value:e}}function uf(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function uC(i,e){return uf(i,e.toTimestamp())}function Ai(i){return ot(!!i,49232),Ie.fromTimestamp((function(t){const s=aa(t);return new Ot(s.seconds,s.nanos)})(i))}function Ap(i,e){return Hg(i,e).canonicalString()}function Hg(i,e){const t=(function(o){return new St(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?t:t.child(e)}function cT(i){const e=St.fromString(i);return ot(gT(e),10190,{key:e.toString()}),e}function hf(i,e){return Ap(i.databaseId,e.path)}function Ac(i,e){const t=cT(e);if(t.get(1)!==i.databaseId.projectId)throw new ye(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ye(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new xe(hT(t))}function uT(i,e){return Ap(i.databaseId,e)}function hC(i){const e=cT(i);return e.length===4?St.emptyPath():hT(e)}function Fg(i){return new St(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function hT(i){return ot(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Pb(i,e,t){return{name:hf(i,e),fields:t.value.mapValue.fields}}function fC(i,e){return"found"in e?(function(s,o){ot(!!o.found,43571),o.found.name,o.found.updateTime;const c=Ac(s,o.found.name),u=Ai(o.found.updateTime),m=o.found.createTime?Ai(o.found.createTime):Ie.min(),g=new ti({mapValue:{fields:o.found.fields}});return wn.newFoundDocument(c,u,m,g)})(i,e):"missing"in e?(function(s,o){ot(!!o.missing,3894),ot(!!o.readTime,22933);const c=Ac(s,o.missing),u=Ai(o.readTime);return wn.newNoDocument(c,u)})(i,e):Ce(7234,{result:e})}function dC(i,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ce(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(p,v){return p.useProto3Json?(ot(v===void 0||typeof v=="string",58123),Vn.fromBase64String(v||"")):(ot(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Vn.fromUint8Array(v||new Uint8Array))})(i,e.targetChange.resumeToken),u=e.targetChange.cause,m=u&&(function(p){const v=p.code===void 0?oe.UNKNOWN:sT(p.code);return new ye(v,p.message||"")})(u);t=new oT(s,o,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Ac(i,s.document.name),c=Ai(s.document.updateTime),u=s.document.createTime?Ai(s.document.createTime):Ie.min(),m=new ti({mapValue:{fields:s.document.fields}}),g=wn.newFoundDocument(o,c,u,m),p=s.targetIds||[],v=s.removedTargetIds||[];t=new Gh(p,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Ac(i,s.document),c=s.readTime?Ai(s.readTime):Ie.min(),u=wn.newNoDocument(o,c),m=s.removedTargetIds||[];t=new Gh([],m,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Ac(i,s.document),c=s.removedTargetIds||[];t=new Gh([],c,o,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,u=new nC(o,c),m=s.targetId;t=new aT(m,u)}}return t}function fT(i,e){let t;if(e instanceof Wc)t={update:Pb(i,e.key,e.value)};else if(e instanceof Tp)t={delete:hf(i,e.key)};else if(e instanceof da)t={update:Pb(i,e.key,e.data),updateMask:TC(e.fieldMask)};else{if(!(e instanceof iT))return Ce(16599,{Vt:e.type});t={verify:hf(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(c,u){const m=u.transform;if(m instanceof lf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Uc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof zc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof cf)return{fieldPath:u.field.canonicalString(),increment:m.Ae};throw Ce(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:uC(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ce(27497)})(i,e.precondition)),t}function mC(i,e){return i&&i.length>0?(ot(e!==void 0,14353),i.map((t=>(function(o,c){let u=o.updateTime?Ai(o.updateTime):Ai(c);return u.isEqual(Ie.min())&&(u=Ai(c)),new JR(u,o.transformResults||[])})(t,e)))):[]}function gC(i,e){return{documents:[uT(i,e.path)]}}function pC(i,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=uT(i,o);const c=(function(p){if(p.length!==0)return mT(rr.create(p,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const u=(function(p){if(p.length!==0)return p.map((v=>(function(w){return{field:Bo(w.field),direction:_C(w.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const m=qg(i,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function yC(i){let e=hC(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){ot(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let c=[];t.where&&(c=(function(E){const w=dT(E);return w instanceof rr&&zE(w)?w.getFilters():[w]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((w=>(function(M){return new of(qo(M.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(w)))})(t.orderBy));let m=null;t.limit&&(m=(function(E){let w;return w=typeof E=="object"?E.value:E,Jc(w)?null:w})(t.limit));let g=null;t.startAt&&(g=(function(E){const w=!!E.before,C=E.values||[];return new af(C,w)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const w=!E.before,C=E.values||[];return new af(C,w)})(t.endAt)),jR(e,o,u,c,m,"F",g,p)}function vC(i,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function dT(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=qo(t.unaryFilter.field);return ln.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=qo(t.unaryFilter.field);return ln.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=qo(t.unaryFilter.field);return ln.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=qo(t.unaryFilter.field);return ln.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(i):i.fieldFilter!==void 0?(function(t){return ln.create(qo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return rr.create(t.compositeFilter.filters.map((s=>dT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(i):Ce(30097,{filter:i})}function _C(i){return aC[i]}function bC(i){return oC[i]}function EC(i){return lC[i]}function Bo(i){return{fieldPath:i.canonicalString()}}function qo(i){return kn.fromServerFormat(i.fieldPath)}function mT(i){return i instanceof ln?(function(t){if(t.op==="=="){if(wb(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NAN"}};if(Tb(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(wb(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NOT_NAN"}};if(Tb(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bo(t.field),op:bC(t.op),value:t.value}}})(i):i instanceof rr?(function(t){const s=t.getFilters().map((o=>mT(o)));return s.length===1?s[0]:{compositeFilter:{op:EC(t.op),filters:s}}})(i):Ce(54877,{filter:i})}function TC(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function gT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class Xs{constructor(e,t,s,o,c=Ie.min(),u=Ie.min(),m=Vn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Xs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class wC{constructor(e){this.yt=e}}function SC(i){const e=yC({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Bg(e,e.limit,"L"):e}class AC{constructor(){this.Cn=new xC}addToCollectionParentIndex(e,t){return this.Cn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(sa.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(sa.min())}updateCollectionGroup(e,t,s){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class xC{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new pn(St.comparator),c=!o.has(s);return this.index[t]=o.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new pn(St.comparator)).toArray()}}const Lb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pT=41943040;class mi{static withCacheSize(e){return new mi(e,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}mi.DEFAULT_COLLECTION_PERCENTILE=10,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mi.DEFAULT=new mi(pT,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mi.DISABLED=new mi(-1,0,0);class il{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new il(0)}static cr(){return new il(-1)}}const jb="LruGarbageCollector",RC=1048576;function Ub([i,e],[t,s]){const o=We(i,t);return o===0?We(e,s):o}class CC{constructor(e){this.Ir=e,this.buffer=new pn(Ub),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Ub(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class NC{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){be(jb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){hl(t)?be(jb,"Ignoring IndexedDB error during garbage collection: ",t):await ul(t)}await this.Vr(3e5)}))}}class IC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(Of.ce);const s=new CC(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(Lb)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,c,u,m,g,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,u=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,m=Date.now(),this.removeTargets(e,s,t)))).next((E=>(c=E,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(p=Date.now(),Uo()<=Ze.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(m-u)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${E} documents in `+(p-g)+`ms
Total Duration: ${p-v}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:E}))))}}function DC(i,e){return new IC(i,e)}class OC{constructor(){this.changes=new Ja((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ue.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class MC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class kC{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Sc(s.mutation,o,Si.empty(),Ot.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,et()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=et()){const o=Ha();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((c=>{let u=dc();return c.forEach(((m,g)=>{u=u.insert(m,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=Ha();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,et())))}populateOverlays(e,t,s){const o=[];return s.forEach((c=>{t.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((u,m)=>{t.set(u,m)}))}))}computeViews(e,t,s,o){let c=ts();const u=wc(),m=(function(){return wc()})();return t.forEach(((g,p)=>{const v=s.get(p.key);o.has(p.key)&&(v===void 0||v.mutation instanceof da)?c=c.insert(p.key,p):v!==void 0?(u.set(p.key,v.mutation.getFieldMask()),Sc(v.mutation,p,v.mutation.getFieldMask(),Ot.now())):u.set(p.key,Si.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((p,v)=>u.set(p,v))),t.forEach(((p,v)=>m.set(p,new MC(v,u.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,t){const s=wc();let o=new jt(((u,m)=>u-m)),c=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const m of u)m.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let v=s.get(g)||Si.empty();v=m.applyToLocalView(p,v),s.set(g,v);const E=(o.get(m.batchId)||et()).add(g);o=o.insert(m.batchId,E)}))})).next((()=>{const u=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,v=g.value,E=YE();v.forEach((w=>{if(!c.has(w)){const C=tT(t.get(w),s.get(w));C!==null&&E.set(w,C),c=c.add(w)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,E))}return ue.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(u){return xe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):FE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((c=>{const u=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-c.size):ue.resolve(Ha());let m=Vc,g=c;return u.next((p=>ue.forEach(p,((v,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),c.get(v)?ue.resolve():this.remoteDocumentCache.getEntry(e,v).next((w=>{g=g.insert(v,w)}))))).next((()=>this.populateOverlays(e,p,c))).next((()=>this.computeViews(e,g,p,et()))).next((v=>({batchId:m,changes:QE(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next((s=>{let o=dc();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const c=t.collectionGroup;let u=dc();return this.indexManager.getCollectionParents(e,c).next((m=>ue.forEach(m,(g=>{const p=(function(E,w){return new Zc(w,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,p,s,o).next((v=>{v.forEach(((E,w)=>{u=u.insert(E,w)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,o)))).next((u=>{c.forEach(((g,p)=>{const v=p.getKey();u.get(v)===null&&(u=u.insert(v,wn.newInvalidDocument(v)))}));let m=dc();return u.forEach(((g,p)=>{const v=c.get(g);v!==void 0&&Sc(v.mutation,p,Si.empty(),Ot.now()),Vf(t,p)&&(m=m.insert(g,p))})),m}))}}class VC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ue.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Ai(o.createTime)}})(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:SC(o.bundledQuery),readTime:Ai(o.readTime)}})(t)),ue.resolve()}}class PC{constructor(){this.overlays=new jt(xe.comparator),this.qr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ha();return ue.forEach(t,(o=>this.getOverlay(e,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,c)=>{this.St(e,t,c)})),ue.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),ue.resolve()}getOverlaysForCollection(e,t,s){const o=Ha(),c=t.length+1,u=new xe(t.child("")),m=this.overlays.getIteratorFrom(u);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===c&&g.largestBatchId>s&&o.set(g.getKey(),g)}return ue.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let c=new jt(((p,v)=>p-v));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let v=c.get(p.largestBatchId);v===null&&(v=Ha(),c=c.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const m=Ha(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,v)=>m.set(p,v))),!(m.size()>=o)););return ue.resolve(m)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new tC(t,s));let c=this.qr.get(t);c===void 0&&(c=et(),this.qr.set(t,c)),this.qr.set(t,c.add(s.key))}}class LC{constructor(){this.sessionToken=Vn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}class xp{constructor(){this.Qr=new pn(En.$r),this.Ur=new pn(En.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new En(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new En(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new xe(new St([])),s=new En(t,e),o=new En(t,e+1),c=[];return this.Ur.forEachInRange([s,o],(u=>{this.Gr(u),c.push(u.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new xe(new St([])),s=new En(t,e),o=new En(t,e+1);let c=et();return this.Ur.forEachInRange([s,o],(u=>{c=c.add(u.key)})),c}containsKey(e){const t=new En(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class En{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return xe.comparator(e.key,t.key)||We(e.Yr,t.Yr)}static Kr(e,t){return We(e.Yr,t.Yr)||xe.comparator(e.key,t.key)}}class jC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new pn(En.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new eC(c,t,s,o);this.mutationQueue.push(u);for(const m of o)this.Zr=this.Zr.add(new En(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ue.resolve(u)}lookupMutationBatch(e,t){return ue.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),c=o<0?0:o;return ue.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?gp:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new En(t,0),o=new En(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,o],(u=>{const m=this.Xr(u.Yr);c.push(m)})),ue.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new pn(We);return t.forEach((o=>{const c=new En(o,0),u=new En(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,u],(m=>{s=s.add(m.Yr)}))})),ue.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let c=s;xe.isDocumentKey(c)||(c=c.child(""));const u=new En(new xe(c),0);let m=new pn(We);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),u),ue.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ot(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ue.forEach(t.mutations,(o=>{const c=new En(o.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new En(t,0),o=this.Zr.firstAfterOrEqual(s);return ue.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class UC{constructor(e){this.ri=e,this.docs=(function(){return new jt(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),c=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ue.resolve(s?s.document.mutableCopy():wn.newInvalidDocument(t))}getEntries(e,t){let s=ts();return t.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():wn.newInvalidDocument(o))})),ue.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let c=ts();const u=t.path,m=new xe(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:v}}=g.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||pR(gR(v),s)<=0||(o.has(v.key)||Vf(t,v))&&(c=c.insert(v.key,v.mutableCopy()))}return ue.resolve(c)}getAllFromCollectionGroup(e,t,s,o){Ce(9500)}ii(e,t){return ue.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new zC(this)}getSize(e){return ue.resolve(this.size)}}class zC extends OC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ue.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class BC{constructor(e){this.persistence=e,this.si=new Ja((t=>vp(t)),_p),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.oi=0,this._i=new xp,this.targetCount=0,this.ai=il.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ue.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new il(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Pr(t),ue.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,s){let o=0;const c=[];return this.si.forEach(((u,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.si.delete(u),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ue.waitFor(c).next((()=>o))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ue.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ue.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach((u=>{c.push(o.markPotentiallyOrphaned(e,u))})),ue.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ue.resolve(s)}containsKey(e,t){return ue.resolve(this._i.containsKey(t))}}class yT{constructor(e,t){this.ui={},this.overlays={},this.ci=new Of(0),this.li=!1,this.li=!0,this.hi=new LC,this.referenceDelegate=e(this),this.Pi=new BC(this),this.indexManager=new AC,this.remoteDocumentCache=(function(o){return new UC(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new wC(t),this.Ii=new VC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new jC(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){be("MemoryPersistence","Starting transaction:",e);const o=new qC(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,t){return ue.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class qC extends vR{constructor(e){super(),this.currentSequenceNumber=e}}class Rp{constructor(e){this.persistence=e,this.Ri=new xp,this.Vi=null}static mi(e){return new Rp(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ue.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(s=>{const o=xe.fromPath(s);return this.gi(e,o).next((c=>{c||t.removeEntry(o,Ie.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ue.or([()=>ue.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ff{constructor(e,t){this.persistence=e,this.pi=new Ja((s=>ER(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=DC(this,t)}static mi(e,t){return new ff(e,t)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return ue.forEach(this.pi,((s,o)=>this.br(e,s,o).next((c=>c?ue.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((m=>{m||(s++,c.removeEntry(u,Ie.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=qh(e.data.value)),t}br(e,t,s){return ue.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ue.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Cp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=et(),o=et();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Cp(e,t.fromCache,s,o)}}class HC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class FC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Ux()?8:_R(qn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const c={result:null};return this.ys(e,t).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ws(e,t,o,s).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new HC;return this.Ss(e,t,u).next((m=>{if(c.result=m,this.Vs)return this.bs(e,t,u,m.size)}))})).next((()=>c.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(Uo()<=Ze.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",zo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(Uo()<=Ze.DEBUG&&be("QueryEngine","Query:",zo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Uo()<=Ze.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",zo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tr(t))):ue.resolve())}ys(e,t){if(Rb(t))return ue.resolve(null);let s=Tr(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Bg(t,null,"F"),s=Tr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const u=et(...c);return this.ps.getDocuments(e,u).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const p=this.Ds(t,m);return this.Cs(t,p,u,g.readTime)?this.ys(e,Bg(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,s,o){return Rb(t)||o.isEqual(Ie.min())?ue.resolve(null):this.ps.getDocuments(e,s).next((c=>{const u=this.Ds(t,c);return this.Cs(t,u,s,o)?ue.resolve(null):(Uo()<=Ze.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),zo(t)),this.vs(e,u,t,mR(o,Vc)).next((m=>m)))}))}Ds(e,t){let s=new pn($E(e));return t.forEach(((o,c)=>{Vf(e,c)&&(s=s.add(c))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,t,s){return Uo()<=Ze.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",zo(t)),this.ps.getDocumentsMatchingQuery(e,t,sa.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((c=>(t.forEach((u=>{c=c.insert(u.key,u)})),c)))}}const Np="LocalStore",GC=3e8;class $C{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new jt(We),this.xs=new Ja((c=>vp(c)),_p),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function KC(i,e,t,s){return new $C(i,e,t,s)}async function vT(i,e){const t=Ve(i);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((c=>{const u=[],m=[];let g=et();for(const p of o){u.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}for(const p of c){m.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next((p=>({Ls:p,removedBatchIds:u,addedBatchIds:m})))}))}))}function QC(i,e){const t=Ve(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,v){const E=p.batch,w=E.keys();let C=ue.resolve();return w.forEach((M=>{C=C.next((()=>v.getEntry(g,M))).next((z=>{const D=p.docVersions.get(M);ot(D!==null,48541),z.version.compareTo(D)<0&&(E.applyToRemoteDocument(z,p),z.isValidDocument()&&(z.setReadTime(p.commitVersion),v.addEntry(z)))}))})),C.next((()=>m.mutationQueue.removeMutationBatch(g,E)))})(t,s,e,c).next((()=>c.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=et();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function _T(i){const e=Ve(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function YC(i,e){const t=Ve(i),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((v,E)=>{const w=o.get(E);if(!w)return;m.push(t.Pi.removeMatchingKeys(c,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(c,v.addedDocuments,E))));let C=w.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(E)!==null?C=C.withResumeToken(Vn.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,s)),o=o.insert(E,C),(function(z,D,B){return z.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=GC?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(w,C,v)&&m.push(t.Pi.updateTargetData(c,C))}));let g=ts(),p=et();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,v))})),m.push(XC(c,u,e.documentUpdates).next((v=>{g=v.ks,p=v.qs}))),!s.isEqual(Ie.min())){const v=t.Pi.getLastRemoteSnapshotVersion(c).next((E=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));m.push(v)}return ue.waitFor(m).next((()=>u.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,p))).next((()=>g))})).then((c=>(t.Ms=o,c)))}function XC(i,e,t){let s=et(),o=et();return t.forEach((c=>s=s.add(c))),e.getEntries(i,s).next((c=>{let u=ts();return t.forEach(((m,g)=>{const p=c.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ie.min())?(e.removeEntry(m,g.readTime),u=u.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),u=u.insert(m,g)):be(Np,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:u,qs:o}}))}function JC(i,e){const t=Ve(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=gp),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function ZC(i,e){const t=Ve(i);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((c=>c?(o=c,ue.resolve(o)):t.Pi.allocateTargetId(s).next((u=>(o=new Xs(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Gg(i,e,t){const s=Ve(i),o=s.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,(u=>s.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!hl(u))throw u;be(Np,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function zb(i,e,t){const s=Ve(i);let o=Ie.min(),c=et();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,p,v){const E=Ve(g),w=E.xs.get(v);return w!==void 0?ue.resolve(E.Ms.get(w)):E.Pi.getTargetData(p,v)})(s,u,Tr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,m.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,e,t?o:Ie.min(),t?c:et()))).next((m=>(WC(s,zR(e),m),{documents:m,Qs:c})))))}function WC(i,e,t){let s=i.Os.get(e)||Ie.min();t.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),i.Os.set(e,s)}class Bb{constructor(){this.activeTargetIds=$R()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eN{constructor(){this.Mo=new Bb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Bb,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class tN{Oo(e){}shutdown(){}}const qb="ConnectivityMonitor";class Hb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){be(qb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){be(qb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Vh=null;function $g(){return Vh===null?Vh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Vh++,"0x"+Vh.toString(16)}const hg="RestConnection",nN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===rf?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,c){const u=$g(),m=this.zo(e,t.toUriEncodedString());be(hg,`Sending RPC '${e}' ${u}:`,m,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:p}=new URL(m),v=ol(p);return this.Jo(e,m,g,s,v).then((E=>(be(hg,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw Wo(hg,`RPC '${e}' ${u} failed with error: `,E,"url: ",m,"request:",s),E}))}Ho(e,t,s,o,c,u){return this.Go(e,t,s,o,c)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+cl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,c)=>e[c]=o)),s&&s.headers.forEach(((o,c)=>e[c]=o))}zo(e,t){const s=nN[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class rN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Un="WebChannelConnection";class sN extends iN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,c){const u=$g();return new Promise(((m,g)=>{const p=new _E;p.setWithCredentials(!0),p.listenOnce(bE.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Bh.NO_ERROR:const E=p.getResponseJson();be(Un,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),m(E);break;case Bh.TIMEOUT:be(Un,`RPC '${e}' ${u} timed out`),g(new ye(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Bh.HTTP_ERROR:const w=p.getStatus();if(be(Un,`RPC '${e}' ${u} failed with status:`,w,"response text:",p.getResponseText()),w>0){let C=p.getResponseJson();Array.isArray(C)&&(C=C[0]);const M=C?.error;if(M&&M.status&&M.message){const z=(function(B){const ee=B.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(ee)>=0?ee:oe.UNKNOWN})(M.status);g(new ye(z,M.message))}else g(new ye(oe.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new ye(oe.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{be(Un,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);be(Un,`RPC '${e}' ${u} sending request:`,o),p.send(t,"POST",v,s,15)}))}T_(e,t,s){const o=$g(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=wE(),m=TE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=c.join("");be(Un,`Creating RPC '${e}' stream ${o}: ${v}`,g);const E=u.createWebChannel(v,g);this.I_(E);let w=!1,C=!1;const M=new rN({Yo:D=>{C?be(Un,`Not sending because RPC '${e}' stream ${o} is closed:`,D):(w||(be(Un,`Opening RPC '${e}' stream ${o} transport.`),E.open(),w=!0),be(Un,`RPC '${e}' stream ${o} sending:`,D),E.send(D))},Zo:()=>E.close()}),z=(D,B,ee)=>{D.listen(B,(Y=>{try{ee(Y)}catch(ce){setTimeout((()=>{throw ce}),0)}}))};return z(E,fc.EventType.OPEN,(()=>{C||(be(Un,`RPC '${e}' stream ${o} transport opened.`),M.o_())})),z(E,fc.EventType.CLOSE,(()=>{C||(C=!0,be(Un,`RPC '${e}' stream ${o} transport closed`),M.a_(),this.E_(E))})),z(E,fc.EventType.ERROR,(D=>{C||(C=!0,Wo(Un,`RPC '${e}' stream ${o} transport errored. Name:`,D.name,"Message:",D.message),M.a_(new ye(oe.UNAVAILABLE,"The operation could not be completed")))})),z(E,fc.EventType.MESSAGE,(D=>{if(!C){const B=D.data[0];ot(!!B,16349);const ee=B,Y=ee?.error||ee[0]?.error;if(Y){be(Un,`RPC '${e}' stream ${o} received error:`,Y);const ce=Y.status;let ie=(function(R){const N=on[R];if(N!==void 0)return sT(N)})(ce),J=Y.message;ie===void 0&&(ie=oe.INTERNAL,J="Unknown error status: "+ce+" with message "+Y.message),C=!0,M.a_(new ye(ie,J)),E.close()}else be(Un,`RPC '${e}' stream ${o} received:`,B),M.u_(B)}})),z(m,EE.STAT_EVENT,(D=>{D.stat===kg.PROXY?be(Un,`RPC '${e}' stream ${o} detected buffering proxy`):D.stat===kg.NOPROXY&&be(Un,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{M.__()}),0),M}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function fg(){return typeof document<"u"?document:null}function Uf(i){return new cC(i,!0)}class Ip{constructor(e,t,s=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&be("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Fb="PersistentStream";class bT{constructor(e,t,s,o,c,u,m,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ip(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(es(t.toString()),es("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new ye(oe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return be(Fb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(be(Fb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class aN extends bT{constructor(e,t,s,o,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,u),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=dC(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Ie.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?Ie.min():u.readTime?Ai(u.readTime):Ie.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Fg(this.serializer),t.addTarget=(function(c,u){let m;const g=u.target;if(m=Ug(g)?{documents:gC(c,g)}:{query:pC(c,g).ft},m.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){m.resumeToken=lT(c,u.resumeToken);const p=qg(c,u.expectedCount);p!==null&&(m.expectedCount=p)}else if(u.snapshotVersion.compareTo(Ie.min())>0){m.readTime=uf(c,u.snapshotVersion.toTimestamp());const p=qg(c,u.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const s=vC(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Fg(this.serializer),t.removeTarget=e,this.q_(t)}}class oN extends bT{constructor(e,t,s,o,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,u),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=mC(e.writeResults,e.commitTime),s=Ai(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Fg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>fT(this.serializer,s)))};this.q_(t)}}class lN{}class cN extends lN{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ye(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Go(e,Hg(t,s),o,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ye(oe.UNKNOWN,c.toString())}))}Ho(e,t,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,m])=>this.connection.Ho(e,Hg(t,s),o,u,m,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ye(oe.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class uN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(es(t),this.aa=!1):be("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ya="RemoteStore";class hN{constructor(e,t,s,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{Za(this)&&(be(Ya,"Restarting streams for network reachability change."),await(async function(g){const p=Ve(g);p.Ea.add(4),await tu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await zf(p)})(this))}))})),this.Ra=new uN(s,o)}}async function zf(i){if(Za(i))for(const e of i.da)await e(!0)}async function tu(i){for(const e of i.da)await e(!1)}function ET(i,e){const t=Ve(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),kp(t)?Mp(t):fl(t).O_()&&Op(t,e))}function Dp(i,e){const t=Ve(i),s=fl(t);t.Ia.delete(e),s.O_()&&TT(t,e),t.Ia.size===0&&(s.O_()?s.L_():Za(t)&&t.Ra.set("Unknown"))}function Op(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fl(i).Y_(e)}function TT(i,e){i.Va.Ue(e),fl(i).Z_(e)}function Mp(i){i.Va=new sC({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),fl(i).start(),i.Ra.ua()}function kp(i){return Za(i)&&!fl(i).x_()&&i.Ia.size>0}function Za(i){return Ve(i).Ea.size===0}function wT(i){i.Va=void 0}async function fN(i){i.Ra.set("Online")}async function dN(i){i.Ia.forEach(((e,t)=>{Op(i,e)}))}async function mN(i,e){wT(i),kp(i)?(i.Ra.ha(e),Mp(i)):i.Ra.set("Unknown")}async function gN(i,e,t){if(i.Ra.set("Online"),e instanceof oT&&e.state===2&&e.cause)try{await(async function(o,c){const u=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,u),o.Ia.delete(m),o.Va.removeTarget(m))})(i,e)}catch(s){be(Ya,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await df(i,s)}else if(e instanceof Gh?i.Va.Ze(e):e instanceof aT?i.Va.st(e):i.Va.tt(e),!t.isEqual(Ie.min()))try{const s=await _T(i.localStore);t.compareTo(s)>=0&&await(function(c,u){const m=c.Va.Tt(u);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const v=c.Ia.get(p);v&&c.Ia.set(p,v.withResumeToken(g.resumeToken,u))}})),m.targetMismatches.forEach(((g,p)=>{const v=c.Ia.get(g);if(!v)return;c.Ia.set(g,v.withResumeToken(Vn.EMPTY_BYTE_STRING,v.snapshotVersion)),TT(c,g);const E=new Xs(v.target,g,p,v.sequenceNumber);Op(c,E)})),c.remoteSyncer.applyRemoteEvent(m)})(i,t)}catch(s){be(Ya,"Failed to raise snapshot:",s),await df(i,s)}}async function df(i,e,t){if(!hl(e))throw e;i.Ea.add(1),await tu(i),i.Ra.set("Offline"),t||(t=()=>_T(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{be(Ya,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await zf(i)}))}function ST(i,e){return e().catch((t=>df(i,t,e)))}async function Bf(i){const e=Ve(i),t=ca(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:gp;for(;pN(e);)try{const o=await JC(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,yN(e,o)}catch(o){await df(e,o)}AT(e)&&xT(e)}function pN(i){return Za(i)&&i.Ta.length<10}function yN(i,e){i.Ta.push(e);const t=ca(i);t.O_()&&t.X_&&t.ea(e.mutations)}function AT(i){return Za(i)&&!ca(i).x_()&&i.Ta.length>0}function xT(i){ca(i).start()}async function vN(i){ca(i).ra()}async function _N(i){const e=ca(i);for(const t of i.Ta)e.ea(t.mutations)}async function bN(i,e,t){const s=i.Ta.shift(),o=wp.from(s,e,t);await ST(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Bf(i)}async function EN(i,e){e&&ca(i).X_&&await(async function(s,o){if((function(u){return rT(u)&&u!==oe.ABORTED})(o.code)){const c=s.Ta.shift();ca(s).B_(),await ST(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Bf(s)}})(i,e),AT(i)&&xT(i)}async function Gb(i,e){const t=Ve(i);t.asyncQueue.verifyOperationInProgress(),be(Ya,"RemoteStore received new credentials");const s=Za(t);t.Ea.add(3),await tu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await zf(t)}async function TN(i,e){const t=Ve(i);e?(t.Ea.delete(2),await zf(t)):e||(t.Ea.add(2),await tu(t),t.Ra.set("Unknown"))}function fl(i){return i.ma||(i.ma=(function(t,s,o){const c=Ve(t);return c.sa(),new aN(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:fN.bind(null,i),t_:dN.bind(null,i),r_:mN.bind(null,i),H_:gN.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),kp(i)?Mp(i):i.Ra.set("Unknown")):(await i.ma.stop(),wT(i))}))),i.ma}function ca(i){return i.fa||(i.fa=(function(t,s,o){const c=Ve(t);return c.sa(),new oN(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:vN.bind(null,i),r_:EN.bind(null,i),ta:_N.bind(null,i),na:bN.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Bf(i)):(await i.fa.stop(),i.Ta.length>0&&(be(Ya,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class Vp{constructor(e,t,s,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new ta,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,c){const u=Date.now()+s,m=new Vp(e,t,u,o,c);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pp(i,e){if(es("AsyncQueue",`${e}: ${i}`),hl(i))return new ye(oe.UNAVAILABLE,`${e}: ${i}`);throw i}class Go{static emptySet(e){return new Go(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||xe.comparator(t.key,s.key):(t,s)=>xe.comparator(t.key,s.key),this.keyedMap=dc(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Go)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Go;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class $b{constructor(){this.ga=new jt(xe.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class rl{constructor(e,t,s,o,c,u,m,g,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,o,c){const u=[];return t.forEach((m=>{u.push({type:0,doc:m})})),new rl(e,t,Go.emptySet(t),u,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class wN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class SN{constructor(){this.queries=Kb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Ve(t),c=o.queries;o.queries=Kb(),c.forEach(((u,m)=>{for(const g of m.Sa)g.onError(s)}))})(this,new ye(oe.ABORTED,"Firestore shutting down"))}}function Kb(){return new Ja((i=>GE(i)),kf)}async function AN(i,e){const t=Ve(i);let s=3;const o=e.query;let c=t.queries.get(o);c?!c.ba()&&e.Da()&&(s=2):(c=new wN,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await t.onListen(o,!0);break;case 1:c.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const m=Pp(u,`Initialization of query '${zo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Lp(t)}async function xN(i,e){const t=Ve(i),s=e.query;let o=3;const c=t.queries.get(s);if(c){const u=c.Sa.indexOf(e);u>=0&&(c.Sa.splice(u,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function RN(i,e){const t=Ve(i);let s=!1;for(const o of e){const c=o.query,u=t.queries.get(c);if(u){for(const m of u.Sa)m.Fa(o)&&(s=!0);u.wa=o}}s&&Lp(t)}function CN(i,e,t){const s=Ve(i),o=s.queries.get(e);if(o)for(const c of o.Sa)c.onError(t);s.queries.delete(e)}function Lp(i){i.Ca.forEach((e=>{e.next()}))}var Kg,Qb;(Qb=Kg||(Kg={})).Ma="default",Qb.Cache="cache";class NN{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new rl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Kg.Cache}}class RT{constructor(e){this.key=e}}class CT{constructor(e){this.key=e}}class IN{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=et(),this.mutatedKeys=et(),this.eu=$E(e),this.tu=new Go(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new $b,o=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,u=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const w=o.get(v),C=Vf(this.query,E)?E:null,M=!!w&&this.mutatedKeys.has(w.key),z=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let D=!1;w&&C?w.data.isEqual(C.data)?M!==z&&(s.track({type:3,doc:C}),D=!0):this.su(w,C)||(s.track({type:2,doc:C}),D=!0,(g&&this.eu(C,g)>0||p&&this.eu(C,p)<0)&&(m=!0)):!w&&C?(s.track({type:0,doc:C}),D=!0):w&&!C&&(s.track({type:1,doc:w}),D=!0,(g||p)&&(m=!0)),D&&(C?(u=u.add(C),c=z?c.add(v):c.delete(v)):(u=u.delete(v),c=c.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),c=c.delete(v.key),s.track({type:1,doc:v})}return{tu:u,iu:s,Cs:m,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,E)=>(function(C,M){const z=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:D})}};return z(C)-z(M)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(s),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,u.length!==0||p?{snapshot:new rl(this.query,e.tu,c,u,e.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $b,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=et(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new CT(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new RT(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=et();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return rl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const jp="SyncEngine";class DN{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class ON{constructor(e){this.key=e,this.hu=!1}}class MN{constructor(e,t,s,o,c,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Ja((m=>GE(m)),kf),this.Iu=new Map,this.Eu=new Set,this.du=new jt(xe.comparator),this.Au=new Map,this.Ru=new xp,this.Vu={},this.mu=new Map,this.fu=il.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function kN(i,e,t=!0){const s=kT(i);let o;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await NT(s,e,t,!0),o}async function VN(i,e){const t=kT(i);await NT(t,e,!0,!1)}async function NT(i,e,t,s){const o=await ZC(i.localStore,Tr(e)),c=o.targetId,u=i.sharedClientState.addLocalQueryTarget(c,t);let m;return s&&(m=await PN(i,e,c,u==="current",o.resumeToken)),i.isPrimaryClient&&t&&ET(i.remoteStore,o),m}async function PN(i,e,t,s,o){i.pu=(E,w,C)=>(async function(z,D,B,ee){let Y=D.view.ru(B);Y.Cs&&(Y=await zb(z.localStore,D.query,!1).then((({documents:x})=>D.view.ru(x,Y))));const ce=ee&&ee.targetChanges.get(D.targetId),ie=ee&&ee.targetMismatches.get(D.targetId)!=null,J=D.view.applyChanges(Y,z.isPrimaryClient,ce,ie);return Xb(z,D.targetId,J.au),J.snapshot})(i,E,w,C);const c=await zb(i.localStore,e,!0),u=new IN(e,c.Qs),m=u.ru(c.documents),g=eu.createSynthesizedTargetChangeForCurrentChange(t,s&&i.onlineState!=="Offline",o),p=u.applyChanges(m,i.isPrimaryClient,g);Xb(i,t,p.au);const v=new DN(e,t,u);return i.Tu.set(e,v),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),p.snapshot}async function LN(i,e,t){const s=Ve(i),o=s.Tu.get(e),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((u=>!kf(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Gg(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Dp(s.remoteStore,o.targetId),Qg(s,o.targetId)})).catch(ul)):(Qg(s,o.targetId),await Gg(s.localStore,o.targetId,!0))}async function jN(i,e){const t=Ve(i),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Dp(t.remoteStore,s.targetId))}async function UN(i,e,t){const s=$N(i);try{const o=await(function(u,m){const g=Ve(u),p=Ot.now(),v=m.reduce(((C,M)=>C.add(M.key)),et());let E,w;return g.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let M=ts(),z=et();return g.Ns.getEntries(C,v).next((D=>{M=D,M.forEach(((B,ee)=>{ee.isValidDocument()||(z=z.add(B))}))})).next((()=>g.localDocuments.getOverlayedDocuments(C,M))).next((D=>{E=D;const B=[];for(const ee of m){const Y=WR(ee,E.get(ee.key).overlayedDocument);Y!=null&&B.push(new da(ee.key,Y,LE(Y.value.mapValue),ni.exists(!0)))}return g.mutationQueue.addMutationBatch(C,p,B,m)})).next((D=>{w=D;const B=D.applyToLocalDocumentSet(E,z);return g.documentOverlayCache.saveOverlays(C,D.batchId,B)}))})).then((()=>({batchId:w.batchId,changes:QE(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(u,m,g){let p=u.Vu[u.currentUser.toKey()];p||(p=new jt(We)),p=p.insert(m,g),u.Vu[u.currentUser.toKey()]=p})(s,o.batchId,t),await nu(s,o.changes),await Bf(s.remoteStore)}catch(o){const c=Pp(o,"Failed to persist write");t.reject(c)}}async function IT(i,e){const t=Ve(i);try{const s=await YC(t.localStore,e);e.targetChanges.forEach(((o,c)=>{const u=t.Au.get(c);u&&(ot(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?ot(u.hu,14607):o.removedDocuments.size>0&&(ot(u.hu,42227),u.hu=!1))})),await nu(t,s,e)}catch(s){await ul(s)}}function Yb(i,e,t){const s=Ve(i);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((c,u)=>{const m=u.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(u,m){const g=Ve(u);g.onlineState=m;let p=!1;g.queries.forEach(((v,E)=>{for(const w of E.Sa)w.va(m)&&(p=!0)})),p&&Lp(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function zN(i,e,t){const s=Ve(i);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),c=o&&o.key;if(c){let u=new jt(xe.comparator);u=u.insert(c,wn.newNoDocument(c,Ie.min()));const m=et().add(c),g=new jf(Ie.min(),new Map,new jt(We),u,m);await IT(s,g),s.du=s.du.remove(c),s.Au.delete(e),Up(s)}else await Gg(s.localStore,e,!1).then((()=>Qg(s,e,t))).catch(ul)}async function BN(i,e){const t=Ve(i),s=e.batch.batchId;try{const o=await QC(t.localStore,e);OT(t,s,null),DT(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await nu(t,o)}catch(o){await ul(o)}}async function qN(i,e,t){const s=Ve(i);try{const o=await(function(u,m){const g=Ve(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return g.mutationQueue.lookupMutationBatch(p,m).next((E=>(ot(E!==null,37113),v=E.keys(),g.mutationQueue.removeMutationBatch(p,E)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,v,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>g.localDocuments.getDocuments(p,v)))}))})(s.localStore,e);OT(s,e,t),DT(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await nu(s,o)}catch(o){await ul(o)}}function DT(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function OT(i,e,t){const s=Ve(i);let o=s.Vu[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Qg(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),t&&i.Pu.yu(s,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||MT(i,s)}))}function MT(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(Dp(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),Up(i))}function Xb(i,e,t){for(const s of t)s instanceof RT?(i.Ru.addReference(s.key,e),HN(i,s)):s instanceof CT?(be(jp,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||MT(i,s.key)):Ce(19791,{wu:s})}function HN(i,e){const t=e.key,s=t.path.canonicalString();i.du.get(t)||i.Eu.has(s)||(be(jp,"New document in limbo: "+t),i.Eu.add(s),Up(i))}function Up(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new xe(St.fromString(e)),s=i.fu.next();i.Au.set(s,new ON(t)),i.du=i.du.insert(t,s),ET(i.remoteStore,new Xs(Tr(bp(t.path)),s,"TargetPurposeLimboResolution",Of.ce))}}async function nu(i,e,t){const s=Ve(i),o=[],c=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,g)=>{u.push(s.pu(g,e,t).then((p=>{if((p||t)&&s.isPrimaryClient){const v=p?!p.fromCache:t?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(p){o.push(p);const v=Cp.As(g.targetId,p);c.push(v)}})))})),await Promise.all(u),s.Pu.H_(o),await(async function(g,p){const v=Ve(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ue.forEach(p,(w=>ue.forEach(w.Es,(C=>v.persistence.referenceDelegate.addReference(E,w.targetId,C))).next((()=>ue.forEach(w.ds,(C=>v.persistence.referenceDelegate.removeReference(E,w.targetId,C)))))))))}catch(E){if(!hl(E))throw E;be(Np,"Failed to update sequence numbers: "+E)}for(const E of p){const w=E.targetId;if(!E.fromCache){const C=v.Ms.get(w),M=C.snapshotVersion,z=C.withLastLimboFreeSnapshotVersion(M);v.Ms=v.Ms.insert(w,z)}}})(s.localStore,c))}async function FN(i,e){const t=Ve(i);if(!t.currentUser.isEqual(e)){be(jp,"User change. New user:",e.toKey());const s=await vT(t.localStore,e);t.currentUser=e,(function(c,u){c.mu.forEach((m=>{m.forEach((g=>{g.reject(new ye(oe.CANCELLED,u))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await nu(t,s.Ls)}}function GN(i,e){const t=Ve(i),s=t.Au.get(e);if(s&&s.hu)return et().add(s.key);{let o=et();const c=t.Iu.get(e);if(!c)return o;for(const u of c){const m=t.Tu.get(u);o=o.unionWith(m.view.nu)}return o}}function kT(i){const e=Ve(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=IT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zN.bind(null,e),e.Pu.H_=RN.bind(null,e.eventManager),e.Pu.yu=CN.bind(null,e.eventManager),e}function $N(i){const e=Ve(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qN.bind(null,e),e}class mf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return KC(this.persistence,new FC,e.initialUser,this.serializer)}Cu(e){return new yT(Rp.mi,this.serializer)}Du(e){return new eN}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mf.provider={build:()=>new mf};class KN extends mf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ot(this.persistence.referenceDelegate instanceof ff,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new NC(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?mi.withCacheSize(this.cacheSizeBytes):mi.DEFAULT;return new yT((s=>ff.mi(s,t)),this.serializer)}}class Yg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Yb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=FN.bind(null,this.syncEngine),await TN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new SN})()}createDatastore(e){const t=Uf(e.databaseInfo.databaseId),s=(function(c){return new sN(c)})(e.databaseInfo);return(function(c,u,m,g){return new cN(c,u,m,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,c,u,m){return new hN(s,o,c,u,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>Yb(this.syncEngine,t,0)),(function(){return Hb.v()?new Hb:new tN})())}createSyncEngine(e,t){return(function(o,c,u,m,g,p,v){const E=new MN(o,c,u,m,g,p);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Ve(t);be(Ya,"RemoteStore shutting down."),s.Ea.add(5),await tu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Yg.provider={build:()=>new Yg};class QN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):es("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class YN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ye(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,c){const u=Ve(o),m={documents:c.map((E=>hf(u.serializer,E)))},g=await u.Ho("BatchGetDocuments",u.serializer.databaseId,St.emptyPath(),m,c.length),p=new Map;g.forEach((E=>{const w=fC(u.serializer,E);p.set(w.key.toString(),w)}));const v=[];return c.forEach((E=>{const w=p.get(E.toString());ot(!!w,55234,{key:E}),v.push(w)})),v})(this.datastore,e);return t.forEach((s=>this.recordVersion(s))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Tp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,s)=>{const o=xe.fromPath(s);this.mutations.push(new iT(o,this.precondition(o)))})),await(async function(s,o){const c=Ve(s),u={writes:o.map((m=>fT(c.serializer,m)))};await c.Go("Commit",c.serializer.databaseId,St.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ce(50498,{Gu:e.constructor.name});t=Ie.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new ye(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ie.min())?ni.exists(!1):ni.updateTime(t):ni.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ie.min()))throw new ye(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ni.updateTime(t)}return ni.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class XN{constructor(e,t,s,o,c){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=o,this.deferred=c,this.zu=s.maxAttempts,this.M_=new Ip(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new YN(this.datastore),t=this.Hu(e);t&&t.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Jc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!rT(t)}return!1}}const ua="FirestoreClient";class JN{constructor(e,t,s,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Bn.UNAUTHENTICATED,this.clientId=mp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async u=>{be(ua,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(be(ua,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ta;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Pp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function dg(i,e){i.asyncQueue.verifyOperationInProgress(),be(ua,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await vT(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Jb(i,e){i.asyncQueue.verifyOperationInProgress();const t=await ZN(i);be(ua,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((s=>Gb(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>Gb(e.remoteStore,o))),i._onlineComponents=e}async function ZN(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){be(ua,"Using user provided OfflineComponentProvider");try{await dg(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===oe.FAILED_PRECONDITION||o.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Wo("Error using user provided cache. Falling back to memory cache: "+t),await dg(i,new mf)}}else be(ua,"Using default OfflineComponentProvider"),await dg(i,new KN(void 0));return i._offlineComponents}async function zp(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(be(ua,"Using user provided OnlineComponentProvider"),await Jb(i,i._uninitializedComponentsProvider._online)):(be(ua,"Using default OnlineComponentProvider"),await Jb(i,new Yg))),i._onlineComponents}function WN(i){return zp(i).then((e=>e.syncEngine))}function eI(i){return zp(i).then((e=>e.datastore))}async function Zb(i){const e=await zp(i),t=e.eventManager;return t.onListen=kN.bind(null,e.syncEngine),t.onUnlisten=LN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=VN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jN.bind(null,e.syncEngine),t}function VT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const Wb=new Map;const PT="firestore.googleapis.com",e1=!0;class t1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=PT,this.ssl=e1}else this.host=e.host,this.ssl=e.ssl??e1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<RC)throw new ye(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ye(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ye(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ye(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qf{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new t1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new t1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new iR;switch(s.type){case"firstParty":return new oR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ye(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Wb.get(t);s&&(be("ComponentProvider","Removing Datastore"),Wb.delete(t),s.terminate())})(this),Promise.resolve()}}function tI(i,e,t,s={}){i=Zr(i,qf);const o=ol(e),c=i._getSettings(),u={...c,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${t}`;o&&(uE(`https://${m}`),hE("Firestore",!0)),c.host!==PT&&c.host!==m&&Wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:m,ssl:o,emulatorOptions:s};if(!$a(g,u)&&(i._setSettings(g),s.mockUserToken)){let p,v;if(typeof s.mockUserToken=="string")p=s.mockUserToken,v=Bn.MOCK_USER;else{p=Ix(s.mockUserToken,i._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new ye(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Bn(E)}i._authCredentials=new rR(new AE(p,v))}}class dl{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new dl(this.firestore,e,this._query)}}class Ft{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new na(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ft(this.firestore,e,this._key)}toJSON(){return{type:Ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Xc(t,Ft._jsonSchema))return new Ft(e,s||null,new xe(St.fromString(t.referencePath)))}}Ft._jsonSchemaVersion="firestore/documentReference/1.0",Ft._jsonSchema={type:cn("string",Ft._jsonSchemaVersion),referencePath:cn("string")};class na extends dl{constructor(e,t,s){super(e,t,bp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new xe(e))}withConverter(e){return new na(this.firestore,e,this._path)}}function Wn(i,e,...t){if(i=Sn(i),xE("collection","path",e),i instanceof qf){const s=St.fromString(e,...t);return db(s),new na(i,null,s)}{if(!(i instanceof Ft||i instanceof na))throw new ye(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(St.fromString(e,...t));return db(s),new na(i.firestore,null,s)}}function ei(i,e,...t){if(i=Sn(i),arguments.length===1&&(e=mp.newId()),xE("doc","path",e),i instanceof qf){const s=St.fromString(e,...t);return fb(s),new Ft(i,null,new xe(s))}{if(!(i instanceof Ft||i instanceof na))throw new ye(oe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(St.fromString(e,...t));return fb(s),new Ft(i.firestore,i instanceof na?i.converter:null,new xe(s))}}const n1="AsyncQueue";class i1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ip(this,"async_queue_retry"),this._c=()=>{const s=fg();s&&be(n1,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=fg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=fg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ta;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!hl(e))throw e;be(n1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,es("INTERNAL UNHANDLED ERROR: ",r1(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Vp.createAndSchedule(this,e,t,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Ce(47125,{Pc:r1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function r1(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}function s1(i){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const c of s)if(c in o&&typeof o[c]=="function")return!0;return!1})(i,["next","error","complete"])}class sl extends qf{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new i1,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new i1(e),this._firestoreClient=void 0,await e}}}function nI(i,e){const t=typeof i=="object"?i:gE(),s=typeof i=="string"?i:rf,o=fp(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=Cx("firestore");c&&tI(o,...c)}return o}function Bp(i){if(i._terminated)throw new ye(oe.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||iI(i),i._firestoreClient}function iI(i){const e=i._freezeSettings(),t=(function(o,c,u,m){return new SR(o,c,u,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,VT(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new JN(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(i._componentsProvider))}class wi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wi(Vn.fromBase64String(e))}catch(t){throw new ye(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wi(Vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:wi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xc(e,wi._jsonSchema))return wi.fromBase64String(e.bytes)}}wi._jsonSchemaVersion="firestore/bytes/1.0",wi._jsonSchema={type:cn("string",wi._jsonSchemaVersion),bytes:cn("string")};class iu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class qp{constructor(e){this._methodName=e}}class wr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wr._jsonSchemaVersion}}static fromJSON(e){if(Xc(e,wr._jsonSchema))return new wr(e.latitude,e.longitude)}}wr._jsonSchemaVersion="firestore/geoPoint/1.0",wr._jsonSchema={type:cn("string",wr._jsonSchemaVersion),latitude:cn("number"),longitude:cn("number")};class Sr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Sr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xc(e,Sr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Sr(e.vectorValues);throw new ye(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sr._jsonSchemaVersion="firestore/vectorValue/1.0",Sr._jsonSchema={type:cn("string",Sr._jsonSchemaVersion),vectorValues:cn("object")};const rI=/^__.*__$/;class sI{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new da(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wc(e,this.data,t,this.fieldTransforms)}}class LT{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new da(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function jT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:i})}}class Hp{constructor(e,t,s,o,c,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Hp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return gf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(jT(this.Ac)&&rI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class aI{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Uf(e)}Cc(e,t,s,o=!1){return new Hp({Ac:e,methodName:t,Dc:s,path:kn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hf(i){const e=i._freezeSettings(),t=Uf(i._databaseId);return new aI(i._databaseId,!!e.ignoreUndefinedProperties,t)}function UT(i,e,t,s,o,c={}){const u=i.Cc(c.merge||c.mergeFields?2:0,e,t,o);Fp("Data must be an object, but it was:",u,s);const m=qT(s,u);let g,p;if(c.merge)g=new Si(u.fieldMask),p=u.fieldTransforms;else if(c.mergeFields){const v=[];for(const E of c.mergeFields){const w=Xg(e,E,t);if(!u.contains(w))throw new ye(oe.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);FT(v,w)||v.push(w)}g=new Si(v),p=u.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,p=u.fieldTransforms;return new sI(new ti(m),g,p)}class Ff extends qp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ff}}function zT(i,e,t,s){const o=i.Cc(1,e,t);Fp("Data must be an object, but it was:",o,s);const c=[],u=ti.empty();fa(s,((g,p)=>{const v=Gp(e,g,t);p=Sn(p);const E=o.yc(v);if(p instanceof Ff)c.push(v);else{const w=ru(p,E);w!=null&&(c.push(v),u.set(v,w))}}));const m=new Si(c);return new LT(u,m,o.fieldTransforms)}function BT(i,e,t,s,o,c){const u=i.Cc(1,e,t),m=[Xg(e,s,t)],g=[o];if(c.length%2!=0)throw new ye(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<c.length;w+=2)m.push(Xg(e,c[w])),g.push(c[w+1]);const p=[],v=ti.empty();for(let w=m.length-1;w>=0;--w)if(!FT(p,m[w])){const C=m[w];let M=g[w];M=Sn(M);const z=u.yc(C);if(M instanceof Ff)p.push(C);else{const D=ru(M,z);D!=null&&(p.push(C),v.set(C,D))}}const E=new Si(p);return new LT(v,E,u.fieldTransforms)}function oI(i,e,t,s=!1){return ru(t,i.Cc(s?4:3,e))}function ru(i,e){if(HT(i=Sn(i)))return Fp("Unsupported field value:",e,i),qT(i,e);if(i instanceof qp)return(function(s,o){if(!jT(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const c=[];let u=0;for(const m of s){let g=ru(m,o.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),u++}return{arrayValue:{values:c}}})(i,e)}return(function(s,o){if((s=Sn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return KR(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Ot.fromDate(s);return{timestampValue:uf(o.serializer,c)}}if(s instanceof Ot){const c=new Ot(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:uf(o.serializer,c)}}if(s instanceof wr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof wi)return{bytesValue:lT(o.serializer,s._byteString)};if(s instanceof Ft){const c=o.databaseId,u=s.firestore._databaseId;if(!u.isEqual(c))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Ap(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Sr)return(function(u,m){return{mapValue:{fields:{[VE]:{stringValue:PE},[sf]:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return Ep(m.serializer,p)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Df(s)}`)})(i,e)}function qT(i,e){const t={};return NE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fa(i,((s,o)=>{const c=ru(o,e.mc(s));c!=null&&(t[s]=c)})),{mapValue:{fields:t}}}function HT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ot||i instanceof wr||i instanceof wi||i instanceof Ft||i instanceof qp||i instanceof Sr)}function Fp(i,e,t){if(!HT(t)||!RE(t)){const s=Df(t);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function Xg(i,e,t){if((e=Sn(e))instanceof iu)return e._internalPath;if(typeof e=="string")return Gp(i,e);throw gf("Field path arguments must be of type string or ",i,!1,void 0,t)}const lI=new RegExp("[~\\*/\\[\\]]");function Gp(i,e,t){if(e.search(lI)>=0)throw gf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new iu(...e.split("."))._internalPath}catch{throw gf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function gf(i,e,t,s,o){const c=s&&!s.isEmpty(),u=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||u)&&(g+=" (found",c&&(g+=` in field ${s}`),u&&(g+=` in document ${o}`),g+=")"),new ye(oe.INVALID_ARGUMENT,m+i+g)}function FT(i,e){return i.some((t=>t.isEqual(e)))}class pf{constructor(e,t,s,o,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($p("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class cI extends pf{data(){return super.data()}}function $p(i,e){return typeof e=="string"?Gp(i,e):e instanceof iu?e._internalPath:e._delegate._internalPath}function uI(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ye(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kp{}class hI extends Kp{}function fI(i,e,...t){let s=[];e instanceof Kp&&s.push(e),s=s.concat(t),(function(c){const u=c.filter((g=>g instanceof Qp)).length,m=c.filter((g=>g instanceof Gf)).length;if(u>1||u>0&&m>0)throw new ye(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class Gf extends hI{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Gf(e,t,s)}_apply(e){const t=this._parse(e);return GT(e._query,t),new dl(e.firestore,e.converter,zg(e._query,t))}_parse(e){const t=Hf(e.firestore);return(function(c,u,m,g,p,v,E){let w;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ye(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){o1(E,v);const M=[];for(const z of E)M.push(a1(g,c,z));w={arrayValue:{values:M}}}else w=a1(g,c,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||o1(E,v),w=oI(m,u,E,v==="in"||v==="not-in");return ln.create(p,v,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function dI(i,e,t){const s=e,o=$p("where",i);return Gf._create(o,s,t)}class Qp extends Kp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Qp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:rr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,c){let u=o;const m=c.getFlattenedFilters();for(const g of m)GT(u,g),u=zg(u,g)})(e._query,t),new dl(e.firestore,e.converter,zg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function a1(i,e,t){if(typeof(t=Sn(t))=="string"){if(t==="")throw new ye(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FE(e)&&t.indexOf("/")!==-1)throw new ye(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(St.fromString(t));if(!xe.isDocumentKey(s))throw new ye(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Eb(i,new xe(s))}if(t instanceof Ft)return Eb(i,t._key);throw new ye(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Df(t)}.`)}function o1(i,e){if(!Array.isArray(i)||i.length===0)throw new ye(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GT(i,e){const t=(function(o,c){for(const u of o)for(const m of u.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ye(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class $T{convertValue(e,t="none"){switch(la(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return fa(e,((o,c)=>{s[o]=this.convertValue(c,t)})),s}convertVectorValue(e){const t=e.fields?.[sf].arrayValue?.values?.map((s=>Jt(s.doubleValue)));return new Sr(t)}convertGeoPoint(e){return new wr(Jt(e.latitude),Jt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Mf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Pc(e));default:return null}}convertTimestamp(e){const t=aa(e);return new Ot(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=St.fromString(e);ot(gT(s),9688,{name:e});const o=new Lc(s.get(1),s.get(3)),c=new xe(s.popFirst(5));return o.isEqual(t)||es(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function KT(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class mI extends $T{constructor(e){super(),this.firestore=e}convertBytes(e){return new wi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,t)}}class Ho{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ia extends pf{constructor(e,t,s,o,c,u){super(e,t,s,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field($p("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ia._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ia._jsonSchemaVersion="firestore/documentSnapshot/1.0",ia._jsonSchema={type:cn("string",ia._jsonSchemaVersion),bundleSource:cn("string","DocumentSnapshot"),bundleName:cn("string"),bundle:cn("string")};class $h extends ia{data(e={}){return super.data(e)}}class $o{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ho(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new $h(this._firestore,this._userDataWriter,s.key,s,new Ho(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((m=>{const g=new $h(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ho(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const g=new $h(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ho(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,v=-1;return m.type!==0&&(p=u.indexOf(m.doc.key),u=u.delete(m.doc.key)),m.type!==1&&(u=u.add(m.doc),v=u.indexOf(m.doc.key)),{type:gI(m.type),doc:g,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$o._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function gI(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:i})}}$o._jsonSchemaVersion="firestore/querySnapshot/1.0",$o._jsonSchema={type:cn("string",$o._jsonSchemaVersion),bundleSource:cn("string","QuerySnapshot"),bundleName:cn("string"),bundle:cn("string")};class Yp extends $T{constructor(e){super(),this.firestore=e}convertBytes(e){return new wi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,t)}}function Xp(i,e,t){i=Zr(i,Ft);const s=Zr(i.firestore,sl),o=KT(i.converter,e,t);return QT(s,[UT(Hf(s),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,ni.none())])}function xc(i,e,t,...s){i=Zr(i,Ft);const o=Zr(i.firestore,sl),c=Hf(o);let u;return u=typeof(e=Sn(e))=="string"||e instanceof iu?BT(c,"updateDoc",i._key,e,t,s):zT(c,"updateDoc",i._key,e),QT(o,[u.toMutation(i._key,ni.exists(!0))])}function Jp(i,...e){i=Sn(i);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||s1(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(s1(e[s])){const g=e[s];e[s]=g.next?.bind(g),e[s+1]=g.error?.bind(g),e[s+2]=g.complete?.bind(g)}let c,u,m;if(i instanceof Ft)u=Zr(i.firestore,sl),m=bp(i._key.path),c={next:g=>{e[s]&&e[s](pI(u,i,g))},error:e[s+1],complete:e[s+2]};else{const g=Zr(i,dl);u=Zr(g.firestore,sl),m=g._query;const p=new Yp(u);c={next:v=>{e[s]&&e[s](new $o(u,p,g,v))},error:e[s+1],complete:e[s+2]},uI(i._query)}return(function(p,v,E,w){const C=new QN(w),M=new NN(v,C,E);return p.asyncQueue.enqueueAndForget((async()=>AN(await Zb(p),M))),()=>{C.Nu(),p.asyncQueue.enqueueAndForget((async()=>xN(await Zb(p),M)))}})(Bp(u),m,o,c)}function QT(i,e){return(function(s,o){const c=new ta;return s.asyncQueue.enqueueAndForget((async()=>UN(await WN(s),o,c))),c.promise})(Bp(i),e)}function pI(i,e,t){const s=t.docs.get(e._key),o=new Yp(i);return new ia(i,o,e._key,s,new Ho(t.hasPendingWrites,t.fromCache),e.converter)}const yI={maxAttempts:5};function gc(i,e){if((i=Sn(i)).firestore!==e)throw new ye(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class vI{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Hf(e)}get(e){const t=gc(e,this._firestore),s=new mI(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return Ce(24041);const c=o[0];if(c.isFoundDocument())return new pf(this._firestore,s,c.key,c,t.converter);if(c.isNoDocument())return new pf(this._firestore,s,t._key,null,t.converter);throw Ce(18433,{doc:c})}))}set(e,t,s){const o=gc(e,this._firestore),c=KT(o.converter,t,s),u=UT(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,s);return this._transaction.set(o._key,u),this}update(e,t,s,...o){const c=gc(e,this._firestore);let u;return u=typeof(t=Sn(t))=="string"||t instanceof iu?BT(this._dataReader,"Transaction.update",c._key,t,s,o):zT(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,u),this}delete(e){const t=gc(e,this._firestore);return this._transaction.delete(t._key),this}}class _I extends vI{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=gc(e,this._firestore),s=new Yp(this._firestore);return super.get(e).then((o=>new ia(this._firestore,s,t._key,o._document,new Ho(!1,!1),t.converter)))}}function Rc(i,e,t){i=Zr(i,sl);const s={...yI,...t};return(function(c){if(c.maxAttempts<1)throw new ye(oe.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(c,u,m){const g=new ta;return c.asyncQueue.enqueueAndForget((async()=>{const p=await eI(c);new XN(c.asyncQueue,p,m,u,g).ju()})),g.promise})(Bp(i),(o=>e(new _I(i,o))),s)}(function(e,t=!0){(function(o){cl=o})(ll),Zo(new Ka("firestore",((s,{instanceIdentifier:o,options:c})=>{const u=s.getProvider("app").getImmediate(),m=new sl(new sR(s.getProvider("auth-internal")),new lR(u,s.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ye(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lc(p.options.projectId,v)})(u,o),u);return c={useFetchStreams:t,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),Ws(lb,cb,e),Ws(lb,cb,"esm2020")})();function YT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bI=YT,XT=new Qc("auth","Firebase",YT());const yf=new up("@firebase/auth");function EI(i,...e){yf.logLevel<=Ze.WARN&&yf.warn(`Auth (${ll}): ${i}`,...e)}function Kh(i,...e){yf.logLevel<=Ze.ERROR&&yf.error(`Auth (${ll}): ${i}`,...e)}function ns(i,...e){throw Zp(i,...e)}function Ar(i,...e){return Zp(i,...e)}function JT(i,e,t){const s={...bI(),[e]:t};return new Qc("auth","Firebase",s).create(e,{appName:i.name})}function ra(i){return JT(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zp(i,...e){if(typeof i!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(t,...s)}return XT.create(i,...e)}function Me(i,e,...t){if(!i)throw Zp(e,...t)}function Xr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Kh(e),new Error(e)}function is(i,e){i||Xr(e)}function Jg(){return typeof self<"u"&&self.location?.href||""}function TI(){return l1()==="http:"||l1()==="https:"}function l1(){return typeof self<"u"&&self.location?.protocol||null}function wI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TI()||Px()||"connection"in navigator)?navigator.onLine:!0}function SI(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class su{constructor(e,t){this.shortDelay=e,this.longDelay=t,is(t>e,"Short delay should be less than long delay!"),this.isMobile=Mx()||Lx()}get(){return wI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Wp(i,e){is(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class ZT{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const AI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const xI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],RI=new su(3e4,6e4);function $f(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function ml(i,e,t,s,o={}){return WT(i,o,async()=>{let c={},u={};s&&(e==="GET"?u=s:c={body:JSON.stringify(s)});const m=Yc({key:i.config.apiKey,...u}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const p={method:e,headers:g,...c};return Vx()||(p.referrerPolicy="no-referrer"),i.emulatorConfig&&ol(i.emulatorConfig.host)&&(p.credentials="include"),ZT.fetch()(await tw(i,i.config.apiHost,t,m),p)})}async function WT(i,e,t){i._canInitEmulator=!1;const s={...AI,...e};try{const o=new CI(i),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw Ph(i,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const m=c.ok?u.errorMessage:u.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ph(i,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw Ph(i,"email-already-in-use",u);if(g==="USER_DISABLED")throw Ph(i,"user-disabled",u);const v=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw JT(i,v,p);ns(i,v)}}catch(o){if(o instanceof ss)throw o;ns(i,"network-request-failed",{message:String(o)})}}async function ew(i,e,t,s,o={}){const c=await ml(i,e,t,s,o);return"mfaPendingCredential"in c&&ns(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function tw(i,e,t,s){const o=`${e}${t}?${s}`,c=i,u=c.config.emulator?Wp(i.config,o):`${i.config.apiScheme}://${o}`;return xI.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}class CI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Ar(this.auth,"network-request-failed")),RI.get())})}}function Ph(i,e,t){const s={appName:i.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Ar(i,e,s);return o.customData._tokenResponse=t,o}async function NI(i,e){return ml(i,"POST","/v1/accounts:delete",e)}async function vf(i,e){return ml(i,"POST","/v1/accounts:lookup",e)}function Cc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function II(i,e=!1){const t=Sn(i),s=await t.getIdToken(e),o=e0(s);Me(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,u=c?.sign_in_provider;return{claims:o,token:s,authTime:Cc(mg(o.auth_time)),issuedAtTime:Cc(mg(o.iat)),expirationTime:Cc(mg(o.exp)),signInProvider:u||null,signInSecondFactor:c?.sign_in_second_factor||null}}function mg(i){return Number(i)*1e3}function e0(i){const[e,t,s]=i.split(".");if(e===void 0||t===void 0||s===void 0)return Kh("JWT malformed, contained fewer than 3 sections"),null;try{const o=aE(t);return o?JSON.parse(o):(Kh("Failed to decode base64 JWT payload"),null)}catch(o){return Kh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function c1(i){const e=e0(i);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Bc(i,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof ss&&DI(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function DI({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class OI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Zg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cc(this.lastLoginAt),this.creationTime=Cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function _f(i){const e=i.auth,t=await i.getIdToken(),s=await Bc(i,vf(e,{idToken:t}));Me(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const c=o.providerUserInfo?.length?nw(o.providerUserInfo):[],u=kI(i.providerData,c),m=i.isAnonymous,g=!(i.email&&o.passwordHash)&&!u?.length,p=m?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Zg(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(i,v)}async function MI(i){const e=Sn(i);await _f(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kI(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function nw(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function VI(i,e){const t=await WT(i,{},async()=>{const s=Yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,u=await tw(i,o,"/v1/token",`key=${c}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return i.emulatorConfig&&ol(i.emulatorConfig.host)&&(g.credentials="include"),ZT.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function PI(i,e){return ml(i,"POST","/v2/accounts:revokeToken",$f(i,e))}class Ko{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):c1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const t=c1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:c}=await VI(e,t);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:c}=t,u=new Ko;return s&&(Me(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),o&&(Me(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),c&&(Me(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ko,this.toJSON())}_performRefresh(){return Xr("not implemented")}}function Bs(i,e){Me(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ir{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new OI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Zg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Bc(this,this.stsTokenManager.getToken(this.auth,e));return Me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return II(this,e)}reload(){return MI(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ir({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await _f(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nr(this.auth.app))return Promise.reject(ra(this.auth));const e=await this.getIdToken();return await Bc(this,NI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,u=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:w,isAnonymous:C,providerData:M,stsTokenManager:z}=t;Me(E&&z,e,"internal-error");const D=Ko.fromJSON(this.name,z);Me(typeof E=="string",e,"internal-error"),Bs(s,e.name),Bs(o,e.name),Me(typeof w=="boolean",e,"internal-error"),Me(typeof C=="boolean",e,"internal-error"),Bs(c,e.name),Bs(u,e.name),Bs(m,e.name),Bs(g,e.name),Bs(p,e.name),Bs(v,e.name);const B=new ir({uid:E,auth:e,email:o,emailVerified:w,displayName:s,isAnonymous:C,photoURL:u,phoneNumber:c,tenantId:m,stsTokenManager:D,createdAt:p,lastLoginAt:v});return M&&Array.isArray(M)&&(B.providerData=M.map(ee=>({...ee}))),g&&(B._redirectEventId=g),B}static async _fromIdTokenResponse(e,t,s=!1){const o=new Ko;o.updateFromServerResponse(t);const c=new ir({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await _f(c),c}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Me(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?nw(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!c?.length,m=new Ko;m.updateFromIdToken(s);const g=new ir({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:u}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Zg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,p),g}}const u1=new Map;function Jr(i){is(i instanceof Function,"Expected a class definition");let e=u1.get(i);return e?(is(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,u1.set(i,e),e)}class iw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}iw.type="NONE";const h1=iw;function Qh(i,e,t){return`firebase:${i}:${e}:${t}`}class Qo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=Qh(this.userKey,o.apiKey,c),this.fullPersistenceKey=Qh("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await vf(this.auth,{idToken:e}).catch(()=>{});return t?ir._fromGetAccountInfoResponse(this.auth,t,e):null}return ir._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Qo(Jr(h1),e,s);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let c=o[0]||Jr(h1);const u=Qh(s,e.config.apiKey,e.name);let m=null;for(const p of t)try{const v=await p._get(u);if(v){let E;if(typeof v=="string"){const w=await vf(e,{idToken:v}).catch(()=>{});if(!w)break;E=await ir._fromGetAccountInfoResponse(e,w,v)}else E=ir._fromJSON(e,v);p!==c&&(m=E),c=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Qo(c,e,s):(c=g[0],m&&await c._set(u,m.toJSON()),await Promise.all(t.map(async p=>{if(p!==c)try{await p._remove(u)}catch{}})),new Qo(c,e,s))}}function f1(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ow(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cw(e))return"Blackberry";if(uw(e))return"Webos";if(sw(e))return"Safari";if((e.includes("chrome/")||aw(e))&&!e.includes("edge/"))return"Chrome";if(lw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(t);if(s?.length===2)return s[1]}return"Other"}function rw(i=qn()){return/firefox\//i.test(i)}function sw(i=qn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aw(i=qn()){return/crios\//i.test(i)}function ow(i=qn()){return/iemobile/i.test(i)}function lw(i=qn()){return/android/i.test(i)}function cw(i=qn()){return/blackberry/i.test(i)}function uw(i=qn()){return/webos/i.test(i)}function t0(i=qn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function LI(i=qn()){return t0(i)&&!!window.navigator?.standalone}function jI(){return jx()&&document.documentMode===10}function hw(i=qn()){return t0(i)||lw(i)||uw(i)||cw(i)||/windows phone/i.test(i)||ow(i)}function fw(i,e=[]){let t;switch(i){case"Browser":t=f1(qn());break;case"Worker":t=`${f1(qn())}-${i}`;break;default:t=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ll}/${s}`}class UI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((u,m)=>{try{const g=e(c);u(g)}catch(g){m(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function zI(i,e={}){return ml(i,"GET","/v2/passwordPolicy",$f(i,e))}const BI=6;class qI{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??BI,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class HI{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new d1(this),this.idTokenSubscription=new d1(this),this.beforeStateQueue=new UI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Jr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Qo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await vf(this,{idToken:e}),s=await ir._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(nr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,u=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===u)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _f(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nr(this.app))return Promise.reject(ra(this));const t=e?Sn(e):null;return t&&Me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nr(this.app)?Promise.reject(ra(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nr(this.app)?Promise.reject(ra(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zI(this),t=new qI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qc("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await PI(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Jr(e)||this._popupRedirectResolver;Me(t,this,"argument-error"),this.redirectPersistenceManager=await Qo.create(this,[Jr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let u=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(m,this,"internal-error"),m.then(()=>{u||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&EI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Kf(i){return Sn(i)}class d1{constructor(e){this.auth=e,this.observer=null,this.addObserver=$x(t=>this.observer=t)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let n0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FI(i){n0=i}function GI(i){return n0.loadJS(i)}function $I(){return n0.gapiScript}function KI(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function QI(i,e){const t=fp(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if($a(c,e??{}))return o;ns(o,"already-initialized")}return t.initialize({options:e})}function YI(i,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Jr);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function XI(i,e,t){const s=Kf(i);Me(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=dw(e),{host:u,port:m}=JI(e),g=m===null?"":`:${m}`,p={url:`${c}//${u}${g}/`},v=Object.freeze({host:u,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Me(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Me($a(p,s.config.emulator)&&$a(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,ol(u)?(uE(`${c}//${u}${g}`),hE("Auth",!0)):ZI()}function dw(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function JI(i){const e=dw(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:m1(s.substr(c.length+1))}}else{const[c,u]=s.split(":");return{host:c,port:m1(u)}}}function m1(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function ZI(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class mw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xr("not implemented")}_getIdTokenResponse(e){return Xr("not implemented")}_linkToIdToken(e,t){return Xr("not implemented")}_getReauthenticationResolver(e){return Xr("not implemented")}}async function Yo(i,e){return ew(i,"POST","/v1/accounts:signInWithIdp",$f(i,e))}const WI="http://localhost";class Xa extends mw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Xa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ns("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...c}=t;if(!s||!o)return null;const u=new Xa(s,o);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Yo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Yo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Yo(e,t)}buildRequest(){const e={requestUri:WI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yc(t)}return e}}class gw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class au extends gw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class $s extends au{constructor(){super("facebook.com")}static credential(e){return Xa._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $s.credential(e.oauthAccessToken)}catch{return null}}}$s.FACEBOOK_SIGN_IN_METHOD="facebook.com";$s.PROVIDER_ID="facebook.com";class Ks extends au{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Xa._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Ks.credential(t,s)}catch{return null}}}Ks.GOOGLE_SIGN_IN_METHOD="google.com";Ks.PROVIDER_ID="google.com";class Qs extends au{constructor(){super("github.com")}static credential(e){return Xa._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qs.credential(e.oauthAccessToken)}catch{return null}}}Qs.GITHUB_SIGN_IN_METHOD="github.com";Qs.PROVIDER_ID="github.com";class Ys extends au{constructor(){super("twitter.com")}static credential(e,t){return Xa._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ys.credential(t,s)}catch{return null}}}Ys.TWITTER_SIGN_IN_METHOD="twitter.com";Ys.PROVIDER_ID="twitter.com";async function eD(i,e){return ew(i,"POST","/v1/accounts:signUp",$f(i,e))}class ha{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const c=await ir._fromIdTokenResponse(e,s,o),u=g1(s);return new ha({user:c,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=g1(s);return new ha({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function g1(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}async function qc(i){if(nr(i.app))return Promise.reject(ra(i));const e=Kf(i);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new ha({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await eD(e,{returnSecureToken:!0}),s=await ha._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}class bf extends ss{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,bf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new bf(e,t,s,o)}}function pw(i,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?bf._fromErrorAndOperation(i,c,e,s):c})}async function tD(i,e,t=!1){const s=await Bc(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return ha._forOperation(i,"link",s)}async function nD(i,e,t=!1){const{auth:s}=i;if(nr(s.app))return Promise.reject(ra(s));const o="reauthenticate";try{const c=await Bc(i,pw(s,o,e,i),t);Me(c.idToken,s,"internal-error");const u=e0(c.idToken);Me(u,s,"internal-error");const{sub:m}=u;return Me(i.uid===m,s,"user-mismatch"),ha._forOperation(i,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&ns(s,"user-mismatch"),c}}async function iD(i,e,t=!1){if(nr(i.app))return Promise.reject(ra(i));const s="signIn",o=await pw(i,s,e),c=await ha._fromIdTokenResponse(i,s,o);return t||await i._updateCurrentUser(c.user),c}function rD(i,e,t,s){return Sn(i).onIdTokenChanged(e,t,s)}function sD(i,e,t){return Sn(i).beforeAuthStateChanged(e,t)}const Ef="__sak";class yw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ef,"1"),this.storage.removeItem(Ef),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const aD=1e3,oD=10;class vw extends yw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,m,g)=>{this.notifyListeners(u,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},c=this.storage.getItem(s);jI()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,oD):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},aD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}vw.type="LOCAL";const lD=vw;class _w extends yw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}_w.type="SESSION";const bw=_w;function cD(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Qf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Qf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:c}=t.data,u=this.handlersMap[o];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(u).map(async p=>p(t.origin,c)),g=await cD(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qf.receivers=[];function i0(i="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return i+t}class uD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,u;return new Promise((m,g)=>{const p=i0("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},s);u={messageChannel:o,onMessage(E){const w=E;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(v),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(w.data.response);break;default:clearTimeout(v),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function xr(){return window}function hD(i){xr().location.href=i}function Ew(){return typeof xr().WorkerGlobalScope<"u"&&typeof xr().importScripts=="function"}async function fD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dD(){return navigator?.serviceWorker?.controller||null}function mD(){return Ew()?self:null}const Tw="firebaseLocalStorageDb",gD=1,Tf="firebaseLocalStorage",ww="fbase_key";class ou{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Yf(i,e){return i.transaction([Tf],e?"readwrite":"readonly").objectStore(Tf)}function pD(){const i=indexedDB.deleteDatabase(Tw);return new ou(i).toPromise()}function Wg(){const i=indexedDB.open(Tw,gD);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Tf,{keyPath:ww})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Tf)?e(s):(s.close(),await pD(),e(await Wg()))})})}async function p1(i,e,t){const s=Yf(i,!0).put({[ww]:e,value:t});return new ou(s).toPromise()}async function yD(i,e){const t=Yf(i,!1).get(e),s=await new ou(t).toPromise();return s===void 0?null:s.value}function y1(i,e){const t=Yf(i,!0).delete(e);return new ou(t).toPromise()}const vD=800,_D=3;class Sw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>_D)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ew()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qf._getInstance(mD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await fD(),!this.activeServiceWorker)return;this.sender=new uD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wg();return await p1(e,Ef,"1"),await y1(e,Ef),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>p1(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>yD(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>y1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Yf(o,!1).getAll();return new ou(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Sw.type="LOCAL";const bD=Sw;new su(3e4,6e4);function ED(i,e){return e?Jr(e):(Me(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class r0 extends mw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Yo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function TD(i){return iD(i.auth,new r0(i),i.bypassAuthState)}function wD(i){const{auth:e,user:t}=i;return Me(t,e,"internal-error"),nD(t,new r0(i),i.bypassAuthState)}async function SD(i){const{auth:e,user:t}=i;return Me(t,e,"internal-error"),tD(t,new r0(i),i.bypassAuthState)}class Aw{constructor(e,t,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:c,error:u,type:m}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TD;case"linkViaPopup":case"linkViaRedirect":return SD;case"reauthViaPopup":case"reauthViaRedirect":return wD;default:ns(this.auth,"internal-error")}}resolve(e){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const AD=new su(2e3,1e4);class Fo extends Aw{constructor(e,t,s,o,c){super(e,t,o,c),this.provider=s,this.authWindow=null,this.pollId=null,Fo.currentPopupAction&&Fo.currentPopupAction.cancel(),Fo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){is(this.filter.length===1,"Popup operations only handle one event");const e=i0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AD.get())};e()}}Fo.currentPopupAction=null;const xD="pendingRedirect",Yh=new Map;class RD extends Aw{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Yh.get(this.auth._key());if(!e){try{const s=await CD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Yh.set(this.auth._key(),e)}return this.bypassAuthState||Yh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CD(i,e){const t=DD(e),s=ID(i);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function ND(i,e){Yh.set(i._key(),e)}function ID(i){return Jr(i._redirectPersistence)}function DD(i){return Qh(xD,i.config.apiKey,i.name)}async function OD(i,e,t=!1){if(nr(i.app))return Promise.reject(ra(i));const s=Kf(i),o=ED(s,e),u=await new RD(s,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}const MD=600*1e3;class kD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!xw(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ar(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=MD&&this.cachedEventUids.clear(),this.cachedEventUids.has(v1(e))}saveEventToCache(e){this.cachedEventUids.add(v1(e)),this.lastProcessedEventTime=Date.now()}}function v1(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function xw({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function VD(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xw(i);default:return!1}}async function PD(i,e={}){return ml(i,"GET","/v1/projects",e)}const LD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jD=/^https?/;async function UD(i){if(i.config.emulator)return;const{authorizedDomains:e}=await PD(i);for(const t of e)try{if(zD(t))return}catch{}ns(i,"unauthorized-domain")}function zD(i){const e=Jg(),{protocol:t,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const u=new URL(i);return u.hostname===""&&s===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!jD.test(t))return!1;if(LD.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const BD=new su(3e4,6e4);function _1(){const i=xr().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function qD(i){return new Promise((e,t)=>{function s(){_1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_1(),t(Ar(i,"network-request-failed"))},timeout:BD.get()})}if(xr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(xr().gapi?.load)s();else{const o=KI("iframefcb");return xr()[o]=()=>{gapi.load?s():t(Ar(i,"network-request-failed"))},GI(`${$I()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw Xh=null,e})}let Xh=null;function HD(i){return Xh=Xh||qD(i),Xh}const FD=new su(5e3,15e3),GD="__/auth/iframe",$D="emulator/auth/iframe",KD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YD(i){const e=i.config;Me(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?Wp(e,$D):`https://${i.config.authDomain}/${GD}`,s={apiKey:e.apiKey,appName:i.name,v:ll},o=QD.get(i.config.apiHost);o&&(s.eid=o);const c=i._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${Yc(s).slice(1)}`}async function XD(i){const e=await HD(i),t=xr().gapi;return Me(t,i,"internal-error"),e.open({where:document.body,url:YD(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KD,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const u=Ar(i,"network-request-failed"),m=xr().setTimeout(()=>{c(u)},FD.get());function g(){xr().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{c(u)})}))}const JD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZD=500,WD=600,e4="_blank",t4="http://localhost";class b1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function n4(i,e,t,s=ZD,o=WD){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...JD,width:s.toString(),height:o.toString(),top:c,left:u},p=qn().toLowerCase();t&&(m=aw(p)?e4:t),rw(p)&&(e=e||t4,g.scrollbars="yes");const v=Object.entries(g).reduce((w,[C,M])=>`${w}${C}=${M},`,"");if(LI(p)&&m!=="_self")return i4(e||"",m),new b1(null);const E=window.open(e||"",m,v);Me(E,i,"popup-blocked");try{E.focus()}catch{}return new b1(E)}function i4(i,e){const t=document.createElement("a");t.href=i,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const r4="__/auth/handler",s4="emulator/auth/handler",a4=encodeURIComponent("fac");async function E1(i,e,t,s,o,c){Me(i.config.authDomain,i,"auth-domain-config-required"),Me(i.config.apiKey,i,"invalid-api-key");const u={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:s,v:ll,eventId:o};if(e instanceof gw){e.setDefaultLanguage(i.languageCode),u.providerId=e.providerId||"",Gx(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))u[v]=E}if(e instanceof au){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(u.scopes=v.join(","))}i.tenantId&&(u.tid=i.tenantId);const m=u;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const g=await i._getAppCheckToken(),p=g?`#${a4}=${encodeURIComponent(g)}`:"";return`${o4(i)}?${Yc(m).slice(1)}${p}`}function o4({config:i}){return i.emulator?Wp(i,s4):`https://${i.authDomain}/${r4}`}const gg="webStorageSupport";class l4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bw,this._completeRedirectFn=OD,this._overrideRedirectResult=ND}async _openPopup(e,t,s,o){is(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await E1(e,t,s,Jg(),o);return n4(e,c,i0())}async _openRedirect(e,t,s,o){await this._originValidation(e);const c=await E1(e,t,s,Jg(),o);return hD(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(is(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await XD(e),s=new kD(e);return t.register("authEvent",o=>(Me(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(gg,{type:gg},o=>{const c=o?.[0]?.[gg];c!==void 0&&t(!!c),ns(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=UD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hw()||sw()||t0()}}const c4=l4;var T1="@firebase/auth",w1="1.12.0";class u4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function h4(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function f4(i){Zo(new Ka("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:m}=s.options;Me(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:u,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fw(i)},p=new HI(s,o,c,g);return YI(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Zo(new Ka("auth-internal",e=>{const t=Kf(e.getProvider("auth").getImmediate());return(s=>new u4(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ws(T1,w1,h4(i)),Ws(T1,w1,"esm2020")}const d4=300,m4=cE("authIdTokenMaxAge")||d4;let S1=null;const g4=i=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>m4)return;const o=t?.token;S1!==o&&(S1=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Hc(i=gE()){const e=fp(i,"auth");if(e.isInitialized())return e.getImmediate();const t=QI(i,{popupRedirectResolver:c4,persistence:[bD,lD,bw]}),s=cE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const u=g4(c.toString());sD(t,u,()=>u(t.currentUser)),rD(t,m=>u(m))}}const o=oE("auth");return o&&XI(t,`http://${o}`),t}function p4(){return document.getElementsByTagName("head")?.[0]??document}FI({loadJS(i){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const c=Ar("internal-error");c.customData=o,t(c)},s.type="text/javascript",s.charset="UTF-8",p4().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});f4("Browser");var y4="firebase",v4="12.7.0";Ws(y4,v4,"app");const A1={apiKey:"AIzaSyB3ncjSdbTdaUqac5QvHon-Id5mCo3pByM",authDomain:"dragmate-af04d.firebaseapp.com",projectId:"dragmate-af04d",storageBucket:"dragmate-af04d.firebasestorage.app",messagingSenderId:"370425129874",appId:"1:370425129874:web:4c5c526a593e8fa45a6f4b"};let pg=null,Ye=null,Jh=null,Mn=!1;try{Object.values(A1).every(Boolean)?(pg=ib().length?ib()[0]:mE(A1),Ye=nI(pg),Jh=Hc(pg),Mn=!0,console.log(" Firebase initialized for DragMate")):console.warn(" DEMO MODE: Firebase env vars missing. Global features will run in local/demo mode only.")}catch(i){console.error(" Firebase initialization failed:",i)}const x1=3e4;async function _4(i){return i?i.currentUser?i.currentUser:(await qc(i)).user??null:null}async function R1(i,e){const t=ei(i,"presence",e.uid);await Xp(t,{lastSeen:new Date,status:"online"},{merge:!0})}function b4(){const[i,e]=U.useState({count:null,loading:!0,error:null,isOnline:!1,isSupported:Mn&&!!Ye&&!!Jh});return U.useEffect(()=>{if(!Mn||!Ye||!Jh){e(g=>({...g,loading:!1,isSupported:!1}));return}const t=Ye,s=Jh;let o=!1,c=null,u=null;return(async()=>{try{const g=await _4(s);if(!g||o)return;await R1(t,g),e(E=>({...E,isOnline:!0,isSupported:!0})),c=window.setInterval(()=>{R1(t,g).catch(E=>{console.error("Failed to update presence",E)})},x1/2);const p=new Date(Date.now()-x1),v=fI(Wn(t,"presence"),dI("lastSeen",">=",p));u=Jp(v,E=>{o||e(w=>({...w,count:E.size,loading:!1,error:null}))},E=>{console.error("Presence subscription error",E),!o&&e(w=>({...w,loading:!1,error:E.message??"Failed to subscribe to presence"}))})}catch(g){if(console.error("Presence initialization failed",g),o)return;e(p=>({...p,loading:!1,error:g?.message??"Presence initialization failed",isSupported:!1}))}})(),()=>{o=!0,c!==null&&window.clearInterval(c),u&&u()}},[]),i}const E4=({onCreateRoom:i,onJoinRoom:e,onStartLocal:t,isAuthLoading:s,onSelectGame:o})=>{const[c,u]=U.useState("game-select"),[m,g]=U.useState(""),[p,v]=U.useState(!1),{count:E,loading:w,isSupported:C}=b4(),M=async()=>{v(!0);try{await i()}finally{v(!1)}},z=()=>T.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-500",children:[T.jsx("h2",{className:"text-2xl font-bold text-white text-center",children:"Choose Your Game"}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[T.jsx("button",{onClick:()=>{o("chess"),u("mode-select")},className:"group relative w-full aspect-[4/3] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-indigo-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-indigo-500/20 overflow-hidden text-left p-6 flex flex-col justify-between",children:T.jsxs("div",{children:[T.jsx(Cg,{className:"w-10 h-10 text-indigo-400 mb-3 group-hover:scale-110 transition-transform"}),T.jsx("h3",{className:"text-2xl font-black text-white",children:"CHESS"}),T.jsx("p",{className:"text-slate-400 text-sm font-medium mt-1",children:"The classic strategy game."})]})}),T.jsxs("button",{onClick:()=>{o("backgammon"),u("mode-select")},className:"group relative w-full aspect-[4/3] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-emerald-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-emerald-500/20 overflow-hidden text-left p-6 flex flex-col justify-between",children:[T.jsx("div",{className:"absolute top-0 right-0 p-2 bg-emerald-500/10 text-emerald-300 rounded-bl-2xl text-[10px] font-black uppercase tracking-widest border-b border-l border-emerald-500/20",children:"New"}),T.jsxs("div",{children:[T.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 border-2 border-slate-600 mb-3 group-hover:border-emerald-500 transition-colors"}),T.jsx("h3",{className:"text-2xl font-black text-white",children:"TAVLA"}),T.jsx("p",{className:"text-slate-400 text-sm font-medium mt-1",children:"Classic Turkish Backgammon."})]})]}),T.jsxs("button",{onClick:()=>{o("okey"),u("mode-select")},className:"group relative w-full aspect-[4/3] bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-amber-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-amber-500/20 overflow-hidden text-left p-6 flex flex-col justify-between",children:[T.jsx("div",{className:"absolute top-0 right-0 p-2 bg-amber-500/10 text-amber-300 rounded-bl-2xl text-[10px] font-black uppercase tracking-widest border-b border-l border-amber-500/20",children:"Top"}),T.jsxs("div",{children:[T.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 border-2 border-slate-600 mb-3 group-hover:border-amber-500 transition-colors"}),T.jsx("h3",{className:"text-2xl font-black text-white",children:"OKEY"}),T.jsx("p",{className:"text-slate-400 text-sm font-medium mt-1",children:"Turkish Rummy Style."})]})]})]})]}),D=()=>T.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-right-8 duration-500",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[T.jsx("button",{onClick:()=>u("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:T.jsx(_c,{size:20})}),T.jsx("h2",{className:"text-2xl font-bold text-white",children:"Select Threat Level"})]}),T.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[T.jsx("button",{onClick:()=>t("Easy"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-green-500/50 hover:bg-slate-800 transition-all",children:T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"p-3 rounded-full bg-green-500/10 text-green-400",children:T.jsx(rg,{size:20})}),T.jsxs("div",{className:"text-left",children:[T.jsx("div",{className:"text-lg font-bold text-white",children:"Easy"}),T.jsx("div",{className:"text-xs text-slate-500",children:"Casual play"})]})]})}),T.jsx("button",{onClick:()=>t("Normal"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-indigo-500/50 hover:bg-slate-800 transition-all",children:T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"p-3 rounded-full bg-indigo-500/10 text-indigo-400",children:T.jsx(rg,{size:20})}),T.jsxs("div",{className:"text-left",children:[T.jsx("div",{className:"text-lg font-bold text-white",children:"Normal"}),T.jsx("div",{className:"text-xs text-slate-500",children:"Balanced opponent"})]})]})}),T.jsx("button",{onClick:()=>t("Hard"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-red-500/50 hover:bg-slate-800 transition-all",children:T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"p-3 rounded-full bg-red-500/10 text-red-400",children:T.jsx(Cg,{size:20})}),T.jsxs("div",{className:"text-left",children:[T.jsx("div",{className:"text-lg font-bold text-white",children:"Hard"}),T.jsx("div",{className:"text-xs text-slate-500",children:"Ruthless tactics"})]})]})})]})]}),B=()=>T.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-right-8 duration-500",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[T.jsx("button",{onClick:()=>u("game-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:T.jsx(_c,{size:20})}),T.jsx("h2",{className:"text-2xl font-bold text-white",children:"Select Mode"})]}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[T.jsxs("button",{onClick:()=>u("difficulty-select"),className:"group flex flex-col items-center justify-center gap-4 p-8 bg-slate-800/50 rounded-2xl border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all",children:[T.jsx("div",{className:"p-4 rounded-full bg-emerald-500/10 text-emerald-400 group-hover:scale-110 transition-transform",children:T.jsx(rg,{size:32})}),T.jsxs("div",{className:"text-center",children:[T.jsx("div",{className:"text-xl font-bold text-white",children:"Single Player"}),T.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"Vs Computer"})]})]}),T.jsxs("button",{onClick:()=>u("connection"),className:"group flex flex-col items-center justify-center gap-4 p-8 bg-slate-800/50 rounded-2xl border border-slate-700 hover:border-indigo-500/50 hover:bg-slate-800 transition-all",children:[T.jsx("div",{className:"p-4 rounded-full bg-indigo-500/10 text-indigo-400 group-hover:scale-110 transition-transform",children:T.jsx(cp,{size:32})}),T.jsxs("div",{className:"text-center",children:[T.jsx("div",{className:"text-xl font-bold text-white",children:"Multiplayer"}),T.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"Online PvP"})]})]})]})]}),ee=()=>T.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[T.jsx("button",{onClick:()=>u("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:T.jsx(_c,{size:20})}),T.jsx("h2",{className:"text-2xl font-bold text-white",children:"Multiplayer"})]}),T.jsxs("div",{className:"space-y-6",children:[T.jsxs("button",{onClick:M,disabled:p||s,className:"w-full btn-premium flex items-center justify-center gap-3 sm:gap-4 text-lg py-4 group disabled:opacity-50 disabled:cursor-not-allowed",children:[p||s?T.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"}):T.jsx(hx,{size:24,className:"transition-transform group-hover:rotate-90"}),T.jsx("span",{children:s?"Initializing...":p?"Creating Arena...":"Create New Room"})]}),T.jsxs("div",{className:"relative flex items-center gap-6",children:[T.jsx("div",{className:"flex-1 h-px bg-slate-800"}),T.jsx("span",{className:"text-slate-600 text-xs font-black uppercase tracking-[0.2em]",children:"OR JOIN"}),T.jsx("div",{className:"flex-1 h-px bg-slate-800"})]}),T.jsxs("div",{className:"flex gap-3",children:[T.jsx("input",{type:"text",placeholder:"Enter Room ID",value:m,onChange:Y=>g(Y.target.value),className:"flex-1 bg-slate-900/40 border border-slate-800/50 rounded-xl px-4 py-4 text-lg placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all"}),T.jsx("button",{onClick:()=>e(m),disabled:!m.trim()||s,className:"bg-slate-800 hover:bg-slate-700 text-white disabled:opacity-50 px-6 rounded-xl transition-all font-bold shadow-lg",children:T.jsx(ox,{size:24})})]})]})]});return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[85vh] gap-8 lg:gap-12 relative overflow-hidden px-4",children:[T.jsxs("div",{className:"text-center space-y-4 lg:space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-1000",children:[T.jsx("div",{className:"inline-flex items-center px-3 sm:px-4 py-1.5 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-400 text-xs sm:text-sm font-semibold tracking-wide",children:"PREMIUM MULTIPLAYER CHESS"}),T.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-8xl font-black tracking-tight bg-clip-text text-transparent bg-linear-to-b from-white via-indigo-100 to-indigo-400",children:"DragMate"})]}),T.jsxs("div",{className:"liquid-glass p-6 sm:p-8 w-full max-w-xl min-h-[400px] flex flex-col justify-center",children:[c==="game-select"&&z(),c==="mode-select"&&B(),c==="difficulty-select"&&D(),c==="connection"&&ee()]}),T.jsx("div",{className:"flex items-center gap-10 text-slate-600 font-bold uppercase tracking-widest text-[10px] animate-in fade-in duration-1000 delay-500",children:T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${C?"bg-green-500":"bg-slate-600"}`}),C?`${w?"...":(E??0).toLocaleString()} Online`:"Demo Mode"]})})]})};function T4(i){return i!==null?{comment:i,variations:[]}:{variations:[]}}function w4(i,e,t,s,o){const c={move:i,variations:o};return e&&(c.suffix=e),t&&(c.nag=t),s!==null&&(c.comment=s),c}function S4(...i){const[e,...t]=i;let s=e;for(const o of t)o!==null&&(s.variations=[o,...o.variations],o.variations=[],s=o);return e}function A4(i,e){if(e.marker&&e.marker.comment){let t=e.root;for(;;){const s=t.variations[0];if(!s){t.comment=e.marker.comment;break}t=s}}return{headers:i,root:e.root,result:(e.marker&&e.marker.result)??void 0}}function x4(i,e){function t(){this.constructor=i}t.prototype=e.prototype,i.prototype=new t}function al(i,e,t,s){var o=Error.call(this,i);return Object.setPrototypeOf&&Object.setPrototypeOf(o,al.prototype),o.expected=e,o.found=t,o.location=s,o.name="SyntaxError",o}x4(al,Error);function yg(i,e,t){return t=t||" ",i.length>e?i:(e-=i.length,t+=t.repeat(e),i+t.slice(0,e))}al.prototype.format=function(i){var e="Error: "+this.message;if(this.location){var t=null,s;for(s=0;s<i.length;s++)if(i[s].source===this.location.source){t=i[s].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,c=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(o):o,u=this.location.source+":"+c.line+":"+c.column;if(t){var m=this.location.end,g=yg("",c.line.toString().length," "),p=t[o.line-1],v=o.line===m.line?m.column:p.length+1,E=v-o.column||1;e+=`
 --> `+u+`
`+g+` |
`+c.line+" | "+p+`
`+g+" | "+yg("",o.column-1," ")+yg("",E,"^")}else e+=`
 at `+u}return e};al.buildMessage=function(i,e){var t={literal:function(p){return'"'+o(p.text)+'"'},class:function(p){var v=p.parts.map(function(E){return Array.isArray(E)?c(E[0])+"-"+c(E[1]):c(E)});return"["+(p.inverted?"^":"")+v.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(p){return p.description}};function s(p){return p.charCodeAt(0).toString(16).toUpperCase()}function o(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+s(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+s(v)})}function c(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+s(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+s(v)})}function u(p){return t[p.type](p)}function m(p){var v=p.map(u),E,w;if(v.sort(),v.length>0){for(E=1,w=1;E<v.length;E++)v[E-1]!==v[E]&&(v[w]=v[E],w++);v.length=w}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}function g(p){return p?'"'+o(p)+'"':"end of input"}return"Expected "+m(i)+" but "+g(e)+" found."};function R4(i,e){e=e!==void 0?e:{};var t={},s=e.grammarSource,o={pgn:Wa},c=Wa,u="[",m='"',g="]",p=".",v="O-O-O",E="O-O",w="0-0-0",C="0-0",M="$",z="{",D="}",B=";",ee="(",Y=")",ce="1-0",ie="0-1",J="1/2-1/2",x="*",R=/^[a-zA-Z]/,N=/^[^"]/,V=/^[0-9]/,O=/^[.]/,j=/^[a-zA-Z1-8\-=]/,I=/^[+#]/,Ue=/^[!?]/,ut=/^[^}]/,ne=/^[^\r\n]/,he=/^[ \t\r\n]/,_e=_t("tag pair"),De=rt("[",!1),je=rt('"',!1),P=rt("]",!1),re=_t("tag name"),me=Mt([["a","z"],["A","Z"]],!1,!1),fe=_t("tag value"),pe=Mt(['"'],!0,!1),Ae=_t("move number"),Pe=Mt([["0","9"]],!1,!1),dt=rt(".",!1),Ge=Mt(["."],!1,!1),Fe=_t("standard algebraic notation"),ri=rt("O-O-O",!1),un=rt("O-O",!1),Fn=rt("0-0-0",!1),Ut=rt("0-0",!1),Gn=Mt([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),Pn=Mt(["+","#"],!1,!1),or=_t("suffix annotation"),Hi=Mt(["!","?"],!1,!1),xt=_t("NAG"),mt=rt("$",!1),$n=_t("brace comment"),lr=rt("{",!1),cr=Mt(["}"],!0,!1),Zt=rt("}",!1),Fi=_t("rest of line comment"),Cr=rt(";",!1),Kn=Mt(["\r",`
`],!0,!1),An=_t("variation"),Gi=rt("(",!1),Nr=rt(")",!1),Qn=_t("game termination marker"),Ir=rt("1-0",!1),Yn=rt("0-1",!1),Gt=rt("1/2-1/2",!1),yn=rt("*",!1),Rt=_t("whitespace"),Dr=Mt([" ","	","\r",`
`],!1,!1),$i=function(H,Z){return A4(H,Z)},as=function(H){return Object.fromEntries(H)},si=function(H,Z){return[H,Z]},Ki=function(H,Z){return{root:H,marker:Z}},He=function(H,Z){return S4(T4(H),...Z.flat())},Ct=function(H,Z,K,ve,Se){return w4(H,Z,K,ve,Se)},Nt=function(H){return H},zt=function(H){return H.replace(/[\r\n]+/g," ")},vn=function(H){return H.trim()},Wt=function(H){return H},Pt=function(H,Z){return{result:H,comment:Z}},X=e.peg$currPos|0,yt=[{line:1,column:1}],vt=X,$t=e.peg$maxFailExpected||[],de=e.peg$silentFails|0,hn;if(e.startRule){if(!(e.startRule in o))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');c=o[e.startRule]}function rt(H,Z){return{type:"literal",text:H,ignoreCase:Z}}function Mt(H,Z,K){return{type:"class",parts:H,inverted:Z,ignoreCase:K}}function fn(){return{type:"end"}}function _t(H){return{type:"other",description:H}}function Lt(H){var Z=yt[H],K;if(Z)return Z;if(H>=yt.length)K=yt.length-1;else for(K=H;!yt[--K];);for(Z=yt[K],Z={line:Z.line,column:Z.column};K<H;)i.charCodeAt(K)===10?(Z.line++,Z.column=1):Z.column++,K++;return yt[H]=Z,Z}function Kt(H,Z,K){var ve=Lt(H),Se=Lt(Z),tt={source:s,start:{offset:H,line:ve.line,column:ve.column},end:{offset:Z,line:Se.line,column:Se.column}};return tt}function Ee(H){X<vt||(X>vt&&(vt=X,$t=[]),$t.push(H))}function os(H,Z,K){return new al(al.buildMessage(H,Z),H,Z,K)}function Wa(){var H,Z,K;return H=X,Z=eo(),K=Ri(),H=$i(Z,K),H}function eo(){var H,Z,K;for(H=X,Z=[],K=ma();K!==t;)Z.push(K),K=ma();return K=en(),H=as(Z),H}function ma(){var H,Z,K,ve,Se,tt,$e;return de++,H=X,en(),i.charCodeAt(X)===91?(Z=u,X++):(Z=t,de===0&&Ee(De)),Z!==t?(en(),K=xi(),K!==t?(en(),i.charCodeAt(X)===34?(ve=m,X++):(ve=t,de===0&&Ee(je)),ve!==t?(Se=ls(),i.charCodeAt(X)===34?(tt=m,X++):(tt=t,de===0&&Ee(je)),tt!==t?(en(),i.charCodeAt(X)===93?($e=g,X++):($e=t,de===0&&Ee(P)),$e!==t?H=si(K,Se):(X=H,H=t)):(X=H,H=t)):(X=H,H=t)):(X=H,H=t)):(X=H,H=t),de--,H===t&&de===0&&Ee(_e),H}function xi(){var H,Z,K;if(de++,H=X,Z=[],K=i.charAt(X),R.test(K)?X++:(K=t,de===0&&Ee(me)),K!==t)for(;K!==t;)Z.push(K),K=i.charAt(X),R.test(K)?X++:(K=t,de===0&&Ee(me));else Z=t;return Z!==t?H=i.substring(H,X):H=Z,de--,H===t&&(Z=t,de===0&&Ee(re)),H}function ls(){var H,Z,K;for(de++,H=X,Z=[],K=i.charAt(X),N.test(K)?X++:(K=t,de===0&&Ee(pe));K!==t;)Z.push(K),K=i.charAt(X),N.test(K)?X++:(K=t,de===0&&Ee(pe));return H=i.substring(H,X),de--,Z=t,de===0&&Ee(fe),H}function Ri(){var H,Z,K;return H=X,Z=Xn(),en(),K=ya(),K===t&&(K=null),en(),H=Ki(Z,K),H}function Xn(){var H,Z,K,ve;for(H=X,Z=ai(),Z===t&&(Z=null),K=[],ve=Ln();ve!==t;)K.push(ve),ve=Ln();return H=He(Z,K),H}function Ln(){var H,Z,K,ve,Se,tt,$e,Ii;if(H=X,en(),Ci(),en(),Z=Bt(),Z!==t){for(K=ga(),K===t&&(K=null),ve=[],Se=cs();Se!==t;)ve.push(Se),Se=cs();for(Se=en(),tt=ai(),tt===t&&(tt=null),$e=[],Ii=us();Ii!==t;)$e.push(Ii),Ii=us();H=Ct(Z,K,ve,tt,$e)}else X=H,H=t;return H}function Ci(){var H,Z,K,ve,Se,tt;for(de++,H=X,Z=[],K=i.charAt(X),V.test(K)?X++:(K=t,de===0&&Ee(Pe));K!==t;)Z.push(K),K=i.charAt(X),V.test(K)?X++:(K=t,de===0&&Ee(Pe));if(i.charCodeAt(X)===46?(K=p,X++):(K=t,de===0&&Ee(dt)),K!==t){for(ve=en(),Se=[],tt=i.charAt(X),O.test(tt)?X++:(tt=t,de===0&&Ee(Ge));tt!==t;)Se.push(tt),tt=i.charAt(X),O.test(tt)?X++:(tt=t,de===0&&Ee(Ge));Z=[Z,K,ve,Se],H=Z}else X=H,H=t;return de--,H===t&&(Z=t,de===0&&Ee(Ae)),H}function Bt(){var H,Z,K,ve,Se,tt;if(de++,H=X,Z=X,i.substr(X,5)===v?(K=v,X+=5):(K=t,de===0&&Ee(ri)),K===t&&(i.substr(X,3)===E?(K=E,X+=3):(K=t,de===0&&Ee(un)),K===t&&(i.substr(X,5)===w?(K=w,X+=5):(K=t,de===0&&Ee(Fn)),K===t&&(i.substr(X,3)===C?(K=C,X+=3):(K=t,de===0&&Ee(Ut)),K===t))))if(K=X,ve=i.charAt(X),R.test(ve)?X++:(ve=t,de===0&&Ee(me)),ve!==t){if(Se=[],tt=i.charAt(X),j.test(tt)?X++:(tt=t,de===0&&Ee(Gn)),tt!==t)for(;tt!==t;)Se.push(tt),tt=i.charAt(X),j.test(tt)?X++:(tt=t,de===0&&Ee(Gn));else Se=t;Se!==t?(ve=[ve,Se],K=ve):(X=K,K=t)}else X=K,K=t;return K!==t?(ve=i.charAt(X),I.test(ve)?X++:(ve=t,de===0&&Ee(Pn)),ve===t&&(ve=null),K=[K,ve],Z=K):(X=Z,Z=t),Z!==t?H=i.substring(H,X):H=Z,de--,H===t&&(Z=t,de===0&&Ee(Fe)),H}function ga(){var H,Z,K;for(de++,H=X,Z=[],K=i.charAt(X),Ue.test(K)?X++:(K=t,de===0&&Ee(Hi));K!==t;)Z.push(K),Z.length>=2?K=t:(K=i.charAt(X),Ue.test(K)?X++:(K=t,de===0&&Ee(Hi)));return Z.length<1?(X=H,H=t):H=Z,de--,H===t&&(Z=t,de===0&&Ee(or)),H}function cs(){var H,Z,K,ve,Se;if(de++,H=X,en(),i.charCodeAt(X)===36?(Z=M,X++):(Z=t,de===0&&Ee(mt)),Z!==t){if(K=X,ve=[],Se=i.charAt(X),V.test(Se)?X++:(Se=t,de===0&&Ee(Pe)),Se!==t)for(;Se!==t;)ve.push(Se),Se=i.charAt(X),V.test(Se)?X++:(Se=t,de===0&&Ee(Pe));else ve=t;ve!==t?K=i.substring(K,X):K=ve,K!==t?H=Nt(K):(X=H,H=t)}else X=H,H=t;return de--,H===t&&de===0&&Ee(xt),H}function ai(){var H;return H=Ni(),H===t&&(H=pa()),H}function Ni(){var H,Z,K,ve,Se;if(de++,H=X,i.charCodeAt(X)===123?(Z=z,X++):(Z=t,de===0&&Ee(lr)),Z!==t){for(K=X,ve=[],Se=i.charAt(X),ut.test(Se)?X++:(Se=t,de===0&&Ee(cr));Se!==t;)ve.push(Se),Se=i.charAt(X),ut.test(Se)?X++:(Se=t,de===0&&Ee(cr));K=i.substring(K,X),i.charCodeAt(X)===125?(ve=D,X++):(ve=t,de===0&&Ee(Zt)),ve!==t?H=zt(K):(X=H,H=t)}else X=H,H=t;return de--,H===t&&(Z=t,de===0&&Ee($n)),H}function pa(){var H,Z,K,ve,Se;if(de++,H=X,i.charCodeAt(X)===59?(Z=B,X++):(Z=t,de===0&&Ee(Cr)),Z!==t){for(K=X,ve=[],Se=i.charAt(X),ne.test(Se)?X++:(Se=t,de===0&&Ee(Kn));Se!==t;)ve.push(Se),Se=i.charAt(X),ne.test(Se)?X++:(Se=t,de===0&&Ee(Kn));K=i.substring(K,X),H=vn(K)}else X=H,H=t;return de--,H===t&&(Z=t,de===0&&Ee(Fi)),H}function us(){var H,Z,K,ve;return de++,H=X,en(),i.charCodeAt(X)===40?(Z=ee,X++):(Z=t,de===0&&Ee(Gi)),Z!==t?(K=Xn(),K!==t?(en(),i.charCodeAt(X)===41?(ve=Y,X++):(ve=t,de===0&&Ee(Nr)),ve!==t?H=Wt(K):(X=H,H=t)):(X=H,H=t)):(X=H,H=t),de--,H===t&&de===0&&Ee(An),H}function ya(){var H,Z,K;return de++,H=X,i.substr(X,3)===ce?(Z=ce,X+=3):(Z=t,de===0&&Ee(Ir)),Z===t&&(i.substr(X,3)===ie?(Z=ie,X+=3):(Z=t,de===0&&Ee(Yn)),Z===t&&(i.substr(X,7)===J?(Z=J,X+=7):(Z=t,de===0&&Ee(Gt)),Z===t&&(i.charCodeAt(X)===42?(Z=x,X++):(Z=t,de===0&&Ee(yn))))),Z!==t?(en(),K=ai(),K===t&&(K=null),H=Pt(Z,K)):(X=H,H=t),de--,H===t&&(Z=t,de===0&&Ee(Qn)),H}function en(){var H,Z;for(de++,H=[],Z=i.charAt(X),he.test(Z)?X++:(Z=t,de===0&&Ee(Dr));Z!==t;)H.push(Z),Z=i.charAt(X),he.test(Z)?X++:(Z=t,de===0&&Ee(Dr));return de--,Z=t,de===0&&Ee(Rt),H}if(hn=c(),e.peg$library)return{peg$result:hn,peg$currPos:X,peg$FAILED:t,peg$maxFailExpected:$t,peg$maxFailPos:vt};if(hn!==t&&X===i.length)return hn;throw hn!==t&&X<i.length&&Ee(fn()),os($t,vt<i.length?i.charAt(vt):null,vt<i.length?Kt(vt,vt+1):Kt(vt,vt))}const Zh=0xffffffffffffffffn;function vg(i,e){return(i<<e|i>>64n-e)&0xffffffffffffffffn}function C1(i,e){return i*e&Zh}function C4(i){return function(){let e=BigInt(i&Zh),t=BigInt(i>>64n&Zh);const s=C1(vg(C1(e,5n),7n),9n);return t^=e,e=(vg(e,24n)^t^t<<16n)&Zh,t=vg(t,37n),i=t<<64n|e,s}}const Xf=C4(0xa187eb39cdcaed8f31c4b365b102e01en),N4=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>Xf()))),I4=Array.from({length:8},()=>Xf()),D4=Array.from({length:16},()=>Xf()),_g=Xf(),zn="w",Ti="b",an="p",ep="n",Wh="b",pc="r",Fs="q",mn="k",bg="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Lh{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(e,t){const{color:s,piece:o,from:c,to:u,flags:m,captured:g,promotion:p}=t,v=bn(c),E=bn(u);this.color=s,this.piece=o,this.from=v,this.to=E,this.san=e._moveToSan(t,e._moves({legal:!0})),this.lan=v+E,this.before=e.fen(),e._makeMove(t),this.after=e.fen(),e._undoMove(),this.flags="";for(const w in ke)ke[w]&m&&(this.flags+=Ba[w]);g&&(this.captured=g),p&&(this.promotion=p,this.lan+=p)}isCapture(){return this.flags.indexOf(Ba.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(Ba.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(Ba.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(Ba.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(Ba.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(Ba.BIG_PAWN)>-1}}const Dn=-1,Ba={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},ke={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},tp={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},O4={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},M4={...tp,...O4},Oe={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Eg={b:[16,32,17,15],w:[-16,-32,-17,-15]},N1={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},k4=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],V4=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],P4={p:1,n:2,b:4,r:8,q:16,k:32},L4="pnbrqkPNBRQK",I1=[ep,Wh,pc,Fs],j4=7,U4=6,z4=1,B4=0,jh={[mn]:ke.KSIDE_CASTLE,[Fs]:ke.QSIDE_CASTLE},qs={w:[{square:Oe.a1,flag:ke.QSIDE_CASTLE},{square:Oe.h1,flag:ke.KSIDE_CASTLE}],b:[{square:Oe.a8,flag:ke.QSIDE_CASTLE},{square:Oe.h8,flag:ke.KSIDE_CASTLE}]},q4={b:z4,w:U4},Tg="--";function Fa(i){return i>>4}function Fc(i){return i&15}function Rw(i){return"0123456789".indexOf(i)!==-1}function bn(i){const e=Fc(i),t=Fa(i);return"abcdefgh".substring(e,e+1)+"87654321".substring(t,t+1)}function hc(i){return i===zn?Ti:zn}function H4(i){const e=i.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const t=parseInt(e[5],10);if(isNaN(t)||t<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const s=parseInt(e[4],10);if(isNaN(s)||s<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const o=e[0].split("/");if(o.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let u=0;u<o.length;u++){let m=0,g=!1;for(let p=0;p<o[u].length;p++)if(Rw(o[u][p])){if(g)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};m+=parseInt(o[u][p],10),g=!0}else{if(!/^[prnbqkPRNBQK]$/.test(o[u][p]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};m+=1,g=!1}if(m!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const c=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:u,regex:m}of c){if(!m.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${u} king`};if((e[0].match(m)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${u} kings`}}return Array.from(o[0]+o[7]).some(u=>u.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function F4(i,e){const t=i.from,s=i.to,o=i.piece;let c=0,u=0,m=0;for(let g=0,p=e.length;g<p;g++){const v=e[g].from,E=e[g].to,w=e[g].piece;o===w&&t!==v&&s===E&&(c++,Fa(t)===Fa(v)&&u++,Fc(t)===Fc(v)&&m++)}return c>0?u>0&&m>0?bn(t):m>0?bn(t).charAt(1):bn(t).charAt(0):""}function Hs(i,e,t,s,o,c=void 0,u=ke.NORMAL){const m=Fa(s);if(o===an&&(m===j4||m===B4))for(let g=0;g<I1.length;g++){const p=I1[g];i.push({color:e,from:t,to:s,piece:o,captured:c,promotion:p,flags:u|ke.PROMOTION})}else i.push({color:e,from:t,to:s,piece:o,captured:c,flags:u})}function D1(i){let e=i.charAt(0);return e>="a"&&e<="h"?i.match(/[a-h]\d.*[a-h]\d/)?void 0:an:(e=e.toLowerCase(),e==="o"?mn:e)}function wg(i){return i.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class s0{_board=new Array(128);_turn=zn;_header={};_kings={w:Dn,b:Dn};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_hash=0n;_positionCount=new Map;constructor(e=bg,{skipValidation:t=!1}={}){this.load(e,{skipValidation:t})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:Dn,b:Dn},this._turn=zn,this._castling={w:0,b:0},this._epSquare=Dn,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...M4},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:t=!1,preserveHeaders:s=!1}={}){let o=e.split(/\s+/);if(o.length>=2&&o.length<6){const m=["-","-","0","1"];e=o.concat(m.slice(-(6-o.length))).join(" ")}if(o=e.split(/\s+/),!t){const{ok:m,error:g}=H4(e);if(!m)throw new Error(g)}const c=o[0];let u=0;this.clear({preserveHeaders:s});for(let m=0;m<c.length;m++){const g=c.charAt(m);if(g==="/")u+=8;else if(Rw(g))u+=parseInt(g,10);else{const p=g<"a"?zn:Ti;this._put({type:g.toLowerCase(),color:p},bn(u)),u++}}this._turn=o[1],o[2].indexOf("K")>-1&&(this._castling.w|=ke.KSIDE_CASTLE),o[2].indexOf("Q")>-1&&(this._castling.w|=ke.QSIDE_CASTLE),o[2].indexOf("k")>-1&&(this._castling.b|=ke.KSIDE_CASTLE),o[2].indexOf("q")>-1&&(this._castling.b|=ke.QSIDE_CASTLE),this._epSquare=o[3]==="-"?Dn:Oe[o[3]],this._halfMoves=parseInt(o[4],10),this._moveNumber=parseInt(o[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){let t=0,s="";for(let u=Oe.a8;u<=Oe.h1;u++){if(this._board[u]){t>0&&(s+=t,t=0);const{color:m,type:g}=this._board[u];s+=m===zn?g.toUpperCase():g.toLowerCase()}else t++;u+1&136&&(t>0&&(s+=t),u!==Oe.h1&&(s+="/"),t=0,u+=8)}let o="";this._castling[zn]&ke.KSIDE_CASTLE&&(o+="K"),this._castling[zn]&ke.QSIDE_CASTLE&&(o+="Q"),this._castling[Ti]&ke.KSIDE_CASTLE&&(o+="k"),this._castling[Ti]&ke.QSIDE_CASTLE&&(o+="q"),o=o||"-";let c="-";if(this._epSquare!==Dn)if(e)c=bn(this._epSquare);else{const u=this._epSquare+(this._turn===zn?16:-16),m=[u+1,u-1];for(const g of m){if(g&136)continue;const p=this._turn;if(this._board[g]?.color===p&&this._board[g]?.type===an){this._makeMove({color:p,from:g,to:this._epSquare,piece:an,captured:an,flags:ke.EP_CAPTURE});const v=!this._isKingAttacked(p);if(this._undoMove(),v){c=bn(this._epSquare);break}}}}return[s,this._turn,o,c,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;const{color:t,type:s}=this._board[e],o={w:0,b:1}[t],c={p:0,n:1,b:2,r:3,q:4,k:5}[s];return N4[o][c][e]}_epKey(){return this._epSquare===Dn?0n:I4[this._epSquare&7]}_castlingKey(){const e=this._castling.w>>5|this._castling.b>>3;return D4[e]}_computeHash(){let e=0n;for(let t=Oe.a8;t<=Oe.h1;t++){if(t&136){t+=7;continue}this._board[t]&&(e^=this._pieceKey(t))}return e^=this._epKey(),e^=this._castlingKey(),this._turn==="b"&&(e^=_g),e}_updateSetup(e){this._history.length>0||(e!==bg?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(bg)}get(e){return this._board[Oe[e]]}findPiece(e){const t=[];for(let s=Oe.a8;s<=Oe.h1;s++){if(s&136){s+=7;continue}!this._board[s]||this._board[s]?.color!==e.color||this._board[s].color===e.color&&this._board[s].type===e.type&&t.push(bn(s))}return t}put({type:e,color:t},s){return this._put({type:e,color:t},s)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(e,t){this._hash^=this._pieceKey(e),this._board[e]=t,this._hash^=this._pieceKey(e)}_put({type:e,color:t},s){if(L4.indexOf(e.toLowerCase())===-1||!(s in Oe))return!1;const o=Oe[s];if(e==mn&&!(this._kings[t]==Dn||this._kings[t]==o))return!1;const c=this._board[o];return c&&c.type===mn&&(this._kings[c.color]=Dn),this._set(o,{type:e,color:t}),e===mn&&(this._kings[t]=o),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){const t=this.get(e);return this._clear(Oe[e]),t&&t.type===mn&&(this._kings[t.color]=Dn),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){this._hash^=this._castlingKey();const e=this._board[Oe.e1]?.type===mn&&this._board[Oe.e1]?.color===zn,t=this._board[Oe.e8]?.type===mn&&this._board[Oe.e8]?.color===Ti;(!e||this._board[Oe.a1]?.type!==pc||this._board[Oe.a1]?.color!==zn)&&(this._castling.w&=-65),(!e||this._board[Oe.h1]?.type!==pc||this._board[Oe.h1]?.color!==zn)&&(this._castling.w&=-33),(!t||this._board[Oe.a8]?.type!==pc||this._board[Oe.a8]?.color!==Ti)&&(this._castling.b&=-65),(!t||this._board[Oe.h8]?.type!==pc||this._board[Oe.h8]?.color!==Ti)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){if(this._epSquare===Dn)return;const e=this._epSquare+(this._turn===zn?-16:16),t=this._epSquare+(this._turn===zn?16:-16),s=[t+1,t-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||this._board[t]?.color!==hc(this._turn)||this._board[t]?.type!==an){this._hash^=this._epKey(),this._epSquare=Dn;return}const o=c=>!(c&136)&&this._board[c]?.color===this._turn&&this._board[c]?.type===an;s.some(o)||(this._hash^=this._epKey(),this._epSquare=Dn)}_attacked(e,t,s){const o=[];for(let c=Oe.a8;c<=Oe.h1;c++){if(c&136){c+=7;continue}if(this._board[c]===void 0||this._board[c].color!==e)continue;const u=this._board[c],m=c-t;if(m===0)continue;const g=m+119;if(k4[g]&P4[u.type]){if(u.type===an){if(m>0&&u.color===zn||m<=0&&u.color===Ti)if(s)o.push(bn(c));else return!0;continue}if(u.type==="n"||u.type==="k")if(s){o.push(bn(c));continue}else return!0;const p=V4[g];let v=c+p,E=!1;for(;v!==t;){if(this._board[v]!=null){E=!0;break}v+=p}if(!E)if(s){o.push(bn(c));continue}else return!0}}return s?o:!1}attackers(e,t){return t?this._attacked(t,Oe[e],!0):this._attacked(this._turn,Oe[e],!0)}_isKingAttacked(e){const t=this._kings[e];return t===-1?!1:this._attacked(hc(e),t)}hash(){return this._hash.toString(16)}isAttacked(e,t){return this._attacked(t,Oe[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},t=[];let s=0,o=0;for(let c=Oe.a8;c<=Oe.h1;c++){if(o=(o+1)%2,c&136){c+=7;continue}const u=this._board[c];u&&(e[u.type]=u.type in e?e[u.type]+1:1,u.type===Wh&&t.push(o),s++)}if(s===2)return!0;if(s===3&&(e[Wh]===1||e[ep]===1))return!0;if(s===e[Wh]+2){let c=0;const u=t.length;for(let m=0;m<u;m++)c+=t[m];if(c===0||c===u)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:t=void 0,piece:s=void 0}={}){const o=this._moves({square:t,piece:s});return e?o.map(c=>new Lh(this,c)):o.map(c=>this._moveToSan(c,o))}_moves({legal:e=!0,piece:t=void 0,square:s=void 0}={}){const o=s?s.toLowerCase():void 0,c=t?.toLowerCase(),u=[],m=this._turn,g=hc(m);let p=Oe.a8,v=Oe.h1,E=!1;if(o)if(o in Oe)p=v=Oe[o],E=!0;else return[];for(let C=p;C<=v;C++){if(C&136){C+=7;continue}if(!this._board[C]||this._board[C].color===g)continue;const{type:M}=this._board[C];let z;if(M===an){if(c&&c!==M)continue;z=C+Eg[m][0],this._board[z]||(Hs(u,m,C,z,an),z=C+Eg[m][1],q4[m]===Fa(C)&&!this._board[z]&&Hs(u,m,C,z,an,void 0,ke.BIG_PAWN));for(let D=2;D<4;D++)z=C+Eg[m][D],!(z&136)&&(this._board[z]?.color===g?Hs(u,m,C,z,an,this._board[z].type,ke.CAPTURE):z===this._epSquare&&Hs(u,m,C,z,an,an,ke.EP_CAPTURE))}else{if(c&&c!==M)continue;for(let D=0,B=N1[M].length;D<B;D++){const ee=N1[M][D];for(z=C;z+=ee,!(z&136);){if(!this._board[z])Hs(u,m,C,z,M);else{if(this._board[z].color===m)break;Hs(u,m,C,z,M,this._board[z].type,ke.CAPTURE);break}if(M===ep||M===mn)break}}}}if((c===void 0||c===mn)&&(!E||v===this._kings[m])){if(this._castling[m]&ke.KSIDE_CASTLE){const C=this._kings[m],M=C+2;!this._board[C+1]&&!this._board[M]&&!this._attacked(g,this._kings[m])&&!this._attacked(g,C+1)&&!this._attacked(g,M)&&Hs(u,m,this._kings[m],M,mn,void 0,ke.KSIDE_CASTLE)}if(this._castling[m]&ke.QSIDE_CASTLE){const C=this._kings[m],M=C-2;!this._board[C-1]&&!this._board[C-2]&&!this._board[C-3]&&!this._attacked(g,this._kings[m])&&!this._attacked(g,C-1)&&!this._attacked(g,M)&&Hs(u,m,this._kings[m],M,mn,void 0,ke.QSIDE_CASTLE)}}if(!e||this._kings[m]===-1)return u;const w=[];for(let C=0,M=u.length;C<M;C++)this._makeMove(u[C]),this._isKingAttacked(m)||w.push(u[C]),this._undoMove();return w}move(e,{strict:t=!1}={}){let s=null;if(typeof e=="string")s=this._moveFromSan(e,t);else if(e===null)s=this._moveFromSan(Tg,t);else if(typeof e=="object"){const c=this._moves();for(let u=0,m=c.length;u<m;u++)if(e.from===bn(c[u].from)&&e.to===bn(c[u].to)&&(!("promotion"in c[u])||e.promotion===c[u].promotion)){s=c[u];break}}if(!s)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&s.flags&ke.NULL_MOVE)throw new Error("Null move not allowed when in check");const o=new Lh(this,s);return this._makeMove(s),this._incPositionCount(),o}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,t){this._hash^=this._pieceKey(e),this._board[t]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(t)}_makeMove(e){const t=this._turn,s=hc(t);if(this._push(e),e.flags&ke.NULL_MOVE){t===Ti&&this._moveNumber++,this._halfMoves++,this._turn=s,this._epSquare=Dn;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&ke.EP_CAPTURE&&(this._turn===Ti?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:t})),this._board[e.to].type===mn){if(this._kings[t]=e.to,e.flags&ke.KSIDE_CASTLE){const o=e.to-1,c=e.to+1;this._movePiece(c,o)}else if(e.flags&ke.QSIDE_CASTLE){const o=e.to+1,c=e.to-2;this._movePiece(c,o)}this._castling[t]=0}if(this._castling[t]){for(let o=0,c=qs[t].length;o<c;o++)if(e.from===qs[t][o].square&&this._castling[t]&qs[t][o].flag){this._castling[t]^=qs[t][o].flag;break}}if(this._castling[s]){for(let o=0,c=qs[s].length;o<c;o++)if(e.to===qs[s][o].square&&this._castling[s]&qs[s][o].flag){this._castling[s]^=qs[s][o].flag;break}}if(this._hash^=this._castlingKey(),e.flags&ke.BIG_PAWN){let o;t===Ti?o=e.to-16:o=e.to+16,!(e.to-1&136)&&this._board[e.to-1]?.type===an&&this._board[e.to-1]?.color===s||!(e.to+1&136)&&this._board[e.to+1]?.type===an&&this._board[e.to+1]?.color===s?(this._epSquare=o,this._hash^=this._epKey()):this._epSquare=Dn}else this._epSquare=Dn;e.piece===an?this._halfMoves=0:e.flags&(ke.CAPTURE|ke.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===Ti&&this._moveNumber++,this._turn=s,this._hash^=_g}undo(){const e=this._hash,t=this._undoMove();if(t){const s=new Lh(this,t);return this._decPositionCount(e),s}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=_g;const s=this._turn,o=hc(s);if(t.flags&ke.NULL_MOVE)return t;if(this._movePiece(t.to,t.from),t.piece&&(this._clear(t.from),this._set(t.from,{type:t.piece,color:s})),t.captured)if(t.flags&ke.EP_CAPTURE){let c;s===Ti?c=t.to-16:c=t.to+16,this._set(c,{type:an,color:o})}else this._set(t.to,{type:t.captured,color:o});if(t.flags&(ke.KSIDE_CASTLE|ke.QSIDE_CASTLE)){let c,u;t.flags&ke.KSIDE_CASTLE?(c=t.to+1,u=t.to-1):(c=t.to-2,u=t.to+1),this._movePiece(u,c)}return t}pgn({newline:e=`
`,maxWidth:t=0}={}){const s=[];let o=!1;for(const w in this._header)this._header[w]&&s.push(`[${w} "${this._header[w]}"]`+e),o=!0;o&&this._history.length&&s.push(e);const c=w=>{const C=this._comments[this.fen()];if(typeof C<"u"){const M=w.length>0?" ":"";w=`${w}${M}{${C}}`}return w},u=[];for(;this._history.length>0;)u.push(this._undoMove());const m=[];let g="";for(u.length===0&&m.push(c(""));u.length>0;){g=c(g);const w=u.pop();if(!w)break;if(!this._history.length&&w.color==="b"){const C=`${this._moveNumber}. ...`;g=g?`${g} ${C}`:C}else w.color==="w"&&(g.length&&m.push(g),g=this._moveNumber+".");g=g+" "+this._moveToSan(w,this._moves({legal:!0})),this._makeMove(w)}if(g.length&&m.push(c(g)),m.push(this._header.Result||"*"),t===0)return s.join("")+m.join(" ");const p=function(){return s.length>0&&s[s.length-1]===" "?(s.pop(),!0):!1},v=function(w,C){for(const M of C.split(" "))if(M){if(w+M.length>t){for(;p();)w--;s.push(e),w=0}s.push(M),w+=M.length,s.push(" "),w++}return p()&&w--,w};let E=0;for(let w=0;w<m.length;w++){if(E+m[w].length>t&&m[w].includes("{")){E=v(E,m[w]);continue}E+m[w].length>t&&w!==0?(s[s.length-1]===" "&&s.pop(),s.push(e),E=0):w!==0&&(s.push(" "),E++),s.push(m[w]),E+=m[w].length}return s.join("")}header(...e){for(let t=0;t<e.length;t+=2)typeof e[t]=="string"&&typeof e[t+1]=="string"&&(this._header[e[t]]=e[t+1]);return this._header}setHeader(e,t){return this._header[e]=t??tp[e]??null,this.getHeaders()}removeHeader(e){return e in this._header?(this._header[e]=tp[e]||null,!0):!1}getHeaders(){const e={};for(const[t,s]of Object.entries(this._header))s!==null&&(e[t]=s);return e}loadPgn(e,{strict:t=!1,newlineChar:s=`\r?
`}={}){s!==`\r?
`&&(e=e.replace(new RegExp(s,"g"),`
`));const o=R4(e);this.reset();const c=o.headers;let u="";for(const p in c)p.toLowerCase()==="fen"&&(u=c[p]),this.header(p,c[p]);if(!t)u&&this.load(u,{preserveHeaders:!0});else if(c.SetUp==="1"){if(!("FEN"in c))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(c.FEN,{preserveHeaders:!0})}let m=o.root;for(;m;){if(m.move){const p=this._moveFromSan(m.move,t);if(p==null)throw new Error(`Invalid move in PGN: ${m.move}`);this._makeMove(p),this._incPositionCount()}m.comment!==void 0&&(this._comments[this.fen()]=m.comment),m=m.variations[0]}const g=o.result;g&&Object.keys(this._header).length&&this._header.Result!==g&&this.setHeader("Result",g)}_moveToSan(e,t){let s="";if(e.flags&ke.KSIDE_CASTLE)s="O-O";else if(e.flags&ke.QSIDE_CASTLE)s="O-O-O";else{if(e.flags&ke.NULL_MOVE)return Tg;if(e.piece!==an){const o=F4(e,t);s+=e.piece.toUpperCase()+o}e.flags&(ke.CAPTURE|ke.EP_CAPTURE)&&(e.piece===an&&(s+=bn(e.from)[0]),s+="x"),s+=bn(e.to),e.promotion&&(s+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?s+="#":s+="+"),this._undoMove(),s}_moveFromSan(e,t=!1){let s=wg(e);if(t||(s==="0-0"?s="O-O":s==="0-0-0"&&(s="O-O-O")),s==Tg)return{color:this._turn,from:0,to:0,piece:"k",flags:ke.NULL_MOVE};let o=D1(s),c=this._moves({legal:!0,piece:o});for(let w=0,C=c.length;w<C;w++)if(s===wg(this._moveToSan(c[w],c)))return c[w];if(t)return null;let u,m,g,p,v,E=!1;if(m=s.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),m?(u=m[1],g=m[2],p=m[3],v=m[4],g.length==1&&(E=!0)):(m=s.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),m&&(u=m[1],g=m[2],p=m[3],v=m[4],g.length==1&&(E=!0))),o=D1(s),c=this._moves({legal:!0,piece:u||o}),!p)return null;for(let w=0,C=c.length;w<C;w++)if(g){if((!u||u.toLowerCase()==c[w].piece)&&Oe[g]==c[w].from&&Oe[p]==c[w].to&&(!v||v.toLowerCase()==c[w].promotion))return c[w];if(E){const M=bn(c[w].from);if((!u||u.toLowerCase()==c[w].piece)&&Oe[p]==c[w].to&&(g==M[0]||g==M[1])&&(!v||v.toLowerCase()==c[w].promotion))return c[w]}}else if(s===wg(this._moveToSan(c[w],c)).replace("x",""))return c[w];return null}ascii(){let e=`   +------------------------+
`;for(let t=Oe.a8;t<=Oe.h1;t++){if(Fc(t)===0&&(e+=" "+"87654321"[Fa(t)]+" |"),this._board[t]){const s=this._board[t].type,c=this._board[t].color===zn?s.toUpperCase():s.toLowerCase();e+=" "+c+" "}else e+=" . ";t+1&136&&(e+=`|
`,t+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const t=this._moves({legal:!1});let s=0;const o=this._turn;for(let c=0,u=t.length;c<u;c++)this._makeMove(t[c]),this._isKingAttacked(o)||(e-1>0?s+=this.perft(e-1):s++),this._undoMove();return s}setTurn(e){return this._turn==e?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const e=[];let t=[];for(let s=Oe.a8;s<=Oe.h1;s++)this._board[s]==null?t.push(null):t.push({square:bn(s),type:this._board[s].type,color:this._board[s].color}),s+1&136&&(e.push(t),t=[],s+=8);return e}squareColor(e){if(e in Oe){const t=Oe[e];return(Fa(t)+Fc(t))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const t=[],s=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){const o=t.pop();if(!o)break;e?s.push(new Lh(this,o)):s.push(this._moveToSan(o,this._moves())),this._makeMove(o)}return s}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){const t=this._positionCount.get(e)??0;t===1?this._positionCount.delete(e):this._positionCount.set(e,t-1)}_pruneComments(){const e=[],t={},s=o=>{o in this._comments&&(t[o]=this._comments[o])};for(;this._history.length>0;)e.push(this._undoMove());for(s(this.fen());;){const o=e.pop();if(!o)break;this._makeMove(o),s(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(const o of[mn,Fs])t[o]!==void 0&&(t[o]?this._castling[e]|=jh[o]:this._castling[e]&=~jh[o]);this._updateCastlingRights();const s=this.getCastlingRights(e);return(t[mn]===void 0||t[mn]===s[mn])&&(t[Fs]===void 0||t[Fs]===s[Fs])}getCastlingRights(e){return{[mn]:(this._castling[e]&jh[mn])!==0,[Fs]:(this._castling[e]&jh[Fs])!==0}}moveNumber(){return this._moveNumber}}var yc=J1();function G4(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return U.useMemo(()=>s=>{e.forEach(o=>o(s))},e)}const Jf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function gl(i){const e=Object.prototype.toString.call(i);return e==="[object Window]"||e==="[object global]"}function a0(i){return"nodeType"in i}function ii(i){var e,t;return i?gl(i)?i:a0(i)&&(e=(t=i.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function o0(i){const{Document:e}=ii(i);return i instanceof e}function lu(i){return gl(i)?!1:i instanceof ii(i).HTMLElement}function Cw(i){return i instanceof ii(i).SVGElement}function pl(i){return i?gl(i)?i.document:a0(i)?o0(i)?i:lu(i)||Cw(i)?i.ownerDocument:document:document:document}const sr=Jf?U.useLayoutEffect:U.useEffect;function Zf(i){const e=U.useRef(i);return sr(()=>{e.current=i}),U.useCallback(function(){for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e.current==null?void 0:e.current(...s)},[])}function $4(){const i=U.useRef(null),e=U.useCallback((s,o)=>{i.current=setInterval(s,o)},[]),t=U.useCallback(()=>{i.current!==null&&(clearInterval(i.current),i.current=null)},[]);return[e,t]}function Gc(i,e){e===void 0&&(e=[i]);const t=U.useRef(i);return sr(()=>{t.current!==i&&(t.current=i)},e),t}function cu(i,e){const t=U.useRef();return U.useMemo(()=>{const s=i(t.current);return t.current=s,s},[...e])}function wf(i){const e=Zf(i),t=U.useRef(null),s=U.useCallback(o=>{o!==t.current&&e?.(o,t.current),t.current=o},[]);return[t,s]}function Sf(i){const e=U.useRef();return U.useEffect(()=>{e.current=i},[i]),e.current}let Sg={};function uu(i,e){return U.useMemo(()=>{if(e)return e;const t=Sg[i]==null?0:Sg[i]+1;return Sg[i]=t,i+"-"+t},[i,e])}function Nw(i){return function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),o=1;o<t;o++)s[o-1]=arguments[o];return s.reduce((c,u)=>{const m=Object.entries(u);for(const[g,p]of m){const v=c[g];v!=null&&(c[g]=v+i*p)}return c},{...e})}}const Xo=Nw(1),$c=Nw(-1);function K4(i){return"clientX"in i&&"clientY"in i}function Wf(i){if(!i)return!1;const{KeyboardEvent:e}=ii(i.target);return e&&i instanceof e}function Q4(i){if(!i)return!1;const{TouchEvent:e}=ii(i.target);return e&&i instanceof e}function Af(i){if(Q4(i)){if(i.touches&&i.touches.length){const{clientX:e,clientY:t}=i.touches[0];return{x:e,y:t}}else if(i.changedTouches&&i.changedTouches.length){const{clientX:e,clientY:t}=i.changedTouches[0];return{x:e,y:t}}}return K4(i)?{x:i.clientX,y:i.clientY}:null}const rs=Object.freeze({Translate:{toString(i){if(!i)return;const{x:e,y:t}=i;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(i){if(!i)return;const{scaleX:e,scaleY:t}=i;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(i){if(i)return[rs.Translate.toString(i),rs.Scale.toString(i)].join(" ")}},Transition:{toString(i){let{property:e,duration:t,easing:s}=i;return e+" "+t+"ms "+s}}}),O1="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Y4(i){return i.matches(O1)?i:i.querySelector(O1)}const X4={display:"none"};function J4(i){let{id:e,value:t}=i;return at.createElement("div",{id:e,style:X4},t)}function Z4(i){let{id:e,announcement:t,ariaLiveType:s="assertive"}=i;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return at.createElement("div",{id:e,style:o,role:"status","aria-live":s,"aria-atomic":!0},t)}function W4(){const[i,e]=U.useState("");return{announce:U.useCallback(s=>{s!=null&&e(s)},[]),announcement:i}}const Iw=U.createContext(null);function eO(i){const e=U.useContext(Iw);U.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(i)},[i,e])}function tO(){const[i]=U.useState(()=>new Set),e=U.useCallback(s=>(i.add(s),()=>i.delete(s)),[i]);return[U.useCallback(s=>{let{type:o,event:c}=s;i.forEach(u=>{var m;return(m=u[o])==null?void 0:m.call(u,c)})},[i]),e]}const nO={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},iO={onDragStart(i){let{active:e}=i;return"Picked up draggable item "+e.id+"."},onDragOver(i){let{active:e,over:t}=i;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(i){let{active:e,over:t}=i;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(i){let{active:e}=i;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function rO(i){let{announcements:e=iO,container:t,hiddenTextDescribedById:s,screenReaderInstructions:o=nO}=i;const{announce:c,announcement:u}=W4(),m=uu("DndLiveRegion"),[g,p]=U.useState(!1);if(U.useEffect(()=>{p(!0)},[]),eO(U.useMemo(()=>({onDragStart(E){let{active:w}=E;c(e.onDragStart({active:w}))},onDragMove(E){let{active:w,over:C}=E;e.onDragMove&&c(e.onDragMove({active:w,over:C}))},onDragOver(E){let{active:w,over:C}=E;c(e.onDragOver({active:w,over:C}))},onDragEnd(E){let{active:w,over:C}=E;c(e.onDragEnd({active:w,over:C}))},onDragCancel(E){let{active:w,over:C}=E;c(e.onDragCancel({active:w,over:C}))}}),[c,e])),!g)return null;const v=at.createElement(at.Fragment,null,at.createElement(J4,{id:s,value:o.draggable}),at.createElement(Z4,{id:m,announcement:u}));return t?yc.createPortal(v,t):v}var gn;(function(i){i.DragStart="dragStart",i.DragMove="dragMove",i.DragEnd="dragEnd",i.DragCancel="dragCancel",i.DragOver="dragOver",i.RegisterDroppable="registerDroppable",i.SetDroppableDisabled="setDroppableDisabled",i.UnregisterDroppable="unregisterDroppable"})(gn||(gn={}));function xf(){}function Ga(i,e){return U.useMemo(()=>({sensor:i,options:e??{}}),[i,e])}function l0(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return U.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const ar=Object.freeze({x:0,y:0});function Dw(i,e){return Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2))}function sO(i,e){const t=Af(i);if(!t)return"0 0";const s={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return s.x+"% "+s.y+"%"}function Ow(i,e){let{data:{value:t}}=i,{data:{value:s}}=e;return t-s}function aO(i,e){let{data:{value:t}}=i,{data:{value:s}}=e;return s-t}function M1(i){let{left:e,top:t,height:s,width:o}=i;return[{x:e,y:t},{x:e+o,y:t},{x:e,y:t+s},{x:e+o,y:t+s}]}function Mw(i,e){if(!i||i.length===0)return null;const[t]=i;return t[e]}function k1(i,e,t){return e===void 0&&(e=i.left),t===void 0&&(t=i.top),{x:e+i.width*.5,y:t+i.height*.5}}const oO=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=i;const o=k1(e,e.left,e.top),c=[];for(const u of s){const{id:m}=u,g=t.get(m);if(g){const p=Dw(k1(g),o);c.push({id:m,data:{droppableContainer:u,value:p}})}}return c.sort(Ow)},lO=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=i;const o=M1(e),c=[];for(const u of s){const{id:m}=u,g=t.get(m);if(g){const p=M1(g),v=o.reduce((w,C,M)=>w+Dw(p[M],C),0),E=Number((v/4).toFixed(4));c.push({id:m,data:{droppableContainer:u,value:E}})}}return c.sort(Ow)};function cO(i,e){const t=Math.max(e.top,i.top),s=Math.max(e.left,i.left),o=Math.min(e.left+e.width,i.left+i.width),c=Math.min(e.top+e.height,i.top+i.height),u=o-s,m=c-t;if(s<o&&t<c){const g=e.width*e.height,p=i.width*i.height,v=u*m,E=v/(g+p-v);return Number(E.toFixed(4))}return 0}const uO=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=i;const o=[];for(const c of s){const{id:u}=c,m=t.get(u);if(m){const g=cO(m,e);g>0&&o.push({id:u,data:{droppableContainer:c,value:g}})}}return o.sort(aO)};function hO(i,e,t){return{...i,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function kw(i,e){return i&&e?{x:i.left-e.left,y:i.top-e.top}:ar}function fO(i){return function(t){for(var s=arguments.length,o=new Array(s>1?s-1:0),c=1;c<s;c++)o[c-1]=arguments[c];return o.reduce((u,m)=>({...u,top:u.top+i*m.y,bottom:u.bottom+i*m.y,left:u.left+i*m.x,right:u.right+i*m.x}),{...t})}}const dO=fO(1);function Vw(i){if(i.startsWith("matrix3d(")){const e=i.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(i.startsWith("matrix(")){const e=i.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function mO(i,e,t){const s=Vw(e);if(!s)return i;const{scaleX:o,scaleY:c,x:u,y:m}=s,g=i.left-u-(1-o)*parseFloat(t),p=i.top-m-(1-c)*parseFloat(t.slice(t.indexOf(" ")+1)),v=o?i.width/o:i.width,E=c?i.height/c:i.height;return{width:v,height:E,top:p,right:g+v,bottom:p+E,left:g}}const gO={ignoreTransform:!1};function yl(i,e){e===void 0&&(e=gO);let t=i.getBoundingClientRect();if(e.ignoreTransform){const{transform:p,transformOrigin:v}=ii(i).getComputedStyle(i);p&&(t=mO(t,p,v))}const{top:s,left:o,width:c,height:u,bottom:m,right:g}=t;return{top:s,left:o,width:c,height:u,bottom:m,right:g}}function V1(i){return yl(i,{ignoreTransform:!0})}function pO(i){const e=i.innerWidth,t=i.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function yO(i,e){return e===void 0&&(e=ii(i).getComputedStyle(i)),e.position==="fixed"}function vO(i,e){e===void 0&&(e=ii(i).getComputedStyle(i));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const c=e[o];return typeof c=="string"?t.test(c):!1})}function ed(i,e){const t=[];function s(o){if(e!=null&&t.length>=e||!o)return t;if(o0(o)&&o.scrollingElement!=null&&!t.includes(o.scrollingElement))return t.push(o.scrollingElement),t;if(!lu(o)||Cw(o)||t.includes(o))return t;const c=ii(i).getComputedStyle(o);return o!==i&&vO(o,c)&&t.push(o),yO(o,c)?t:s(o.parentNode)}return i?s(i):t}function Pw(i){const[e]=ed(i,1);return e??null}function Ag(i){return!Jf||!i?null:gl(i)?i:a0(i)?o0(i)||i===pl(i).scrollingElement?window:lu(i)?i:null:null}function Lw(i){return gl(i)?i.scrollX:i.scrollLeft}function jw(i){return gl(i)?i.scrollY:i.scrollTop}function np(i){return{x:Lw(i),y:jw(i)}}var Tn;(function(i){i[i.Forward=1]="Forward",i[i.Backward=-1]="Backward"})(Tn||(Tn={}));function Uw(i){return!Jf||!i?!1:i===document.scrollingElement}function zw(i){const e={x:0,y:0},t=Uw(i)?{height:window.innerHeight,width:window.innerWidth}:{height:i.clientHeight,width:i.clientWidth},s={x:i.scrollWidth-t.width,y:i.scrollHeight-t.height},o=i.scrollTop<=e.y,c=i.scrollLeft<=e.x,u=i.scrollTop>=s.y,m=i.scrollLeft>=s.x;return{isTop:o,isLeft:c,isBottom:u,isRight:m,maxScroll:s,minScroll:e}}const _O={x:.2,y:.2};function bO(i,e,t,s,o){let{top:c,left:u,right:m,bottom:g}=t;s===void 0&&(s=10),o===void 0&&(o=_O);const{isTop:p,isBottom:v,isLeft:E,isRight:w}=zw(i),C={x:0,y:0},M={x:0,y:0},z={height:e.height*o.y,width:e.width*o.x};return!p&&c<=e.top+z.height?(C.y=Tn.Backward,M.y=s*Math.abs((e.top+z.height-c)/z.height)):!v&&g>=e.bottom-z.height&&(C.y=Tn.Forward,M.y=s*Math.abs((e.bottom-z.height-g)/z.height)),!w&&m>=e.right-z.width?(C.x=Tn.Forward,M.x=s*Math.abs((e.right-z.width-m)/z.width)):!E&&u<=e.left+z.width&&(C.x=Tn.Backward,M.x=s*Math.abs((e.left+z.width-u)/z.width)),{direction:C,speed:M}}function EO(i){if(i===document.scrollingElement){const{innerWidth:c,innerHeight:u}=window;return{top:0,left:0,right:c,bottom:u,width:c,height:u}}const{top:e,left:t,right:s,bottom:o}=i.getBoundingClientRect();return{top:e,left:t,right:s,bottom:o,width:i.clientWidth,height:i.clientHeight}}function Bw(i){return i.reduce((e,t)=>Xo(e,np(t)),ar)}function TO(i){return i.reduce((e,t)=>e+Lw(t),0)}function wO(i){return i.reduce((e,t)=>e+jw(t),0)}function qw(i,e){if(e===void 0&&(e=yl),!i)return;const{top:t,left:s,bottom:o,right:c}=e(i);Pw(i)&&(o<=0||c<=0||t>=window.innerHeight||s>=window.innerWidth)&&i.scrollIntoView({block:"center",inline:"center"})}const SO=[["x",["left","right"],TO],["y",["top","bottom"],wO]];class c0{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=ed(t),o=Bw(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[c,u,m]of SO)for(const g of u)Object.defineProperty(this,g,{get:()=>{const p=m(s),v=o[c]-p;return this.rect[g]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Nc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...t)})},this.target=e}add(e,t,s){var o;(o=this.target)==null||o.addEventListener(e,t,s),this.listeners.push([e,t,s])}}function AO(i){const{EventTarget:e}=ii(i);return i instanceof e?i:pl(i)}function xg(i,e){const t=Math.abs(i.x),s=Math.abs(i.y);return typeof e=="number"?Math.sqrt(t**2+s**2)>e:"x"in e&&"y"in e?t>e.x&&s>e.y:"x"in e?t>e.x:"y"in e?s>e.y:!1}var qi;(function(i){i.Click="click",i.DragStart="dragstart",i.Keydown="keydown",i.ContextMenu="contextmenu",i.Resize="resize",i.SelectionChange="selectionchange",i.VisibilityChange="visibilitychange"})(qi||(qi={}));function P1(i){i.preventDefault()}function xO(i){i.stopPropagation()}var it;(function(i){i.Space="Space",i.Down="ArrowDown",i.Right="ArrowRight",i.Left="ArrowLeft",i.Up="ArrowUp",i.Esc="Escape",i.Enter="Enter",i.Tab="Tab"})(it||(it={}));const Hw={start:[it.Space,it.Enter],cancel:[it.Esc],end:[it.Space,it.Enter,it.Tab]},RO=(i,e)=>{let{currentCoordinates:t}=e;switch(i.code){case it.Right:return{...t,x:t.x+25};case it.Left:return{...t,x:t.x-25};case it.Down:return{...t,y:t.y+25};case it.Up:return{...t,y:t.y-25}}};class u0{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Nc(pl(t)),this.windowListeners=new Nc(ii(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(qi.Resize,this.handleCancel),this.windowListeners.add(qi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(qi.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,s=e.node.current;s&&qw(s),t(ar)}handleKeyDown(e){if(Wf(e)){const{active:t,context:s,options:o}=this.props,{keyboardCodes:c=Hw,coordinateGetter:u=RO,scrollBehavior:m="smooth"}=o,{code:g}=e;if(c.end.includes(g)){this.handleEnd(e);return}if(c.cancel.includes(g)){this.handleCancel(e);return}const{collisionRect:p}=s.current,v=p?{x:p.left,y:p.top}:ar;this.referenceCoordinates||(this.referenceCoordinates=v);const E=u(e,{active:t,context:s.current,currentCoordinates:v});if(E){const w=$c(E,v),C={x:0,y:0},{scrollableAncestors:M}=s.current;for(const z of M){const D=e.code,{isTop:B,isRight:ee,isLeft:Y,isBottom:ce,maxScroll:ie,minScroll:J}=zw(z),x=EO(z),R={x:Math.min(D===it.Right?x.right-x.width/2:x.right,Math.max(D===it.Right?x.left:x.left+x.width/2,E.x)),y:Math.min(D===it.Down?x.bottom-x.height/2:x.bottom,Math.max(D===it.Down?x.top:x.top+x.height/2,E.y))},N=D===it.Right&&!ee||D===it.Left&&!Y,V=D===it.Down&&!ce||D===it.Up&&!B;if(N&&R.x!==E.x){const O=z.scrollLeft+w.x,j=D===it.Right&&O<=ie.x||D===it.Left&&O>=J.x;if(j&&!w.y){z.scrollTo({left:O,behavior:m});return}j?C.x=z.scrollLeft-O:C.x=D===it.Right?z.scrollLeft-ie.x:z.scrollLeft-J.x,C.x&&z.scrollBy({left:-C.x,behavior:m});break}else if(V&&R.y!==E.y){const O=z.scrollTop+w.y,j=D===it.Down&&O<=ie.y||D===it.Up&&O>=J.y;if(j&&!w.x){z.scrollTo({top:O,behavior:m});return}j?C.y=z.scrollTop-O:C.y=D===it.Down?z.scrollTop-ie.y:z.scrollTop-J.y,C.y&&z.scrollBy({top:-C.y,behavior:m});break}}this.handleMove(e,Xo($c(E,this.referenceCoordinates),C))}}}handleMove(e,t){const{onMove:s}=this.props;e.preventDefault(),s(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}u0.activators=[{eventName:"onKeyDown",handler:(i,e,t)=>{let{keyboardCodes:s=Hw,onActivation:o}=e,{active:c}=t;const{code:u}=i.nativeEvent;if(s.start.includes(u)){const m=c.activatorNode.current;return m&&i.target!==m?!1:(i.preventDefault(),o?.({event:i.nativeEvent}),!0)}return!1}}];function L1(i){return!!(i&&"distance"in i)}function j1(i){return!!(i&&"delay"in i)}class h0{constructor(e,t,s){var o;s===void 0&&(s=AO(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:c}=e,{target:u}=c;this.props=e,this.events=t,this.document=pl(u),this.documentListeners=new Nc(this.document),this.listeners=new Nc(s),this.windowListeners=new Nc(ii(u)),this.initialCoordinates=(o=Af(c))!=null?o:ar,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(qi.Resize,this.handleCancel),this.windowListeners.add(qi.DragStart,P1),this.windowListeners.add(qi.VisibilityChange,this.handleCancel),this.windowListeners.add(qi.ContextMenu,P1),this.documentListeners.add(qi.Keydown,this.handleKeydown),t){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(j1(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(L1(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:s,onPending:o}=this.props;o(s,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(qi.Click,xO,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(qi.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:s,initialCoordinates:o,props:c}=this,{onMove:u,options:{activationConstraint:m}}=c;if(!o)return;const g=(t=Af(e))!=null?t:ar,p=$c(o,g);if(!s&&m){if(L1(m)){if(m.tolerance!=null&&xg(p,m.tolerance))return this.handleCancel();if(xg(p,m.distance))return this.handleStart()}if(j1(m)&&xg(p,m.tolerance))return this.handleCancel();this.handlePending(m,p);return}e.cancelable&&e.preventDefault(),u(g)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===it.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const CO={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class td extends h0{constructor(e){const{event:t}=e,s=pl(t.target);super(e,CO,s)}}td.activators=[{eventName:"onPointerDown",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:s}=e;return!t.isPrimary||t.button!==0?!1:(s?.({event:t}),!0)}}];const NO={move:{name:"mousemove"},end:{name:"mouseup"}};var ip;(function(i){i[i.RightClick=2]="RightClick"})(ip||(ip={}));class f0 extends h0{constructor(e){super(e,NO,pl(e.event.target))}}f0.activators=[{eventName:"onMouseDown",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:s}=e;return t.button===ip.RightClick?!1:(s?.({event:t}),!0)}}];const Rg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class d0 extends h0{constructor(e){super(e,Rg)}static setup(){return window.addEventListener(Rg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Rg.move.name,e)};function e(){}}}d0.activators=[{eventName:"onTouchStart",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:s}=e;const{touches:o}=t;return o.length>1?!1:(s?.({event:t}),!0)}}];var Ic;(function(i){i[i.Pointer=0]="Pointer",i[i.DraggableRect=1]="DraggableRect"})(Ic||(Ic={}));var Rf;(function(i){i[i.TreeOrder=0]="TreeOrder",i[i.ReversedTreeOrder=1]="ReversedTreeOrder"})(Rf||(Rf={}));function IO(i){let{acceleration:e,activator:t=Ic.Pointer,canScroll:s,draggingRect:o,enabled:c,interval:u=5,order:m=Rf.TreeOrder,pointerCoordinates:g,scrollableAncestors:p,scrollableAncestorRects:v,delta:E,threshold:w}=i;const C=OO({delta:E,disabled:!c}),[M,z]=$4(),D=U.useRef({x:0,y:0}),B=U.useRef({x:0,y:0}),ee=U.useMemo(()=>{switch(t){case Ic.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case Ic.DraggableRect:return o}},[t,o,g]),Y=U.useRef(null),ce=U.useCallback(()=>{const J=Y.current;if(!J)return;const x=D.current.x*B.current.x,R=D.current.y*B.current.y;J.scrollBy(x,R)},[]),ie=U.useMemo(()=>m===Rf.TreeOrder?[...p].reverse():p,[m,p]);U.useEffect(()=>{if(!c||!p.length||!ee){z();return}for(const J of ie){if(s?.(J)===!1)continue;const x=p.indexOf(J),R=v[x];if(!R)continue;const{direction:N,speed:V}=bO(J,R,ee,e,w);for(const O of["x","y"])C[O][N[O]]||(V[O]=0,N[O]=0);if(V.x>0||V.y>0){z(),Y.current=J,M(ce,u),D.current=V,B.current=N;return}}D.current={x:0,y:0},B.current={x:0,y:0},z()},[e,ce,s,z,c,u,JSON.stringify(ee),JSON.stringify(C),M,p,ie,v,JSON.stringify(w)])}const DO={x:{[Tn.Backward]:!1,[Tn.Forward]:!1},y:{[Tn.Backward]:!1,[Tn.Forward]:!1}};function OO(i){let{delta:e,disabled:t}=i;const s=Sf(e);return cu(o=>{if(t||!s||!o)return DO;const c={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[Tn.Backward]:o.x[Tn.Backward]||c.x===-1,[Tn.Forward]:o.x[Tn.Forward]||c.x===1},y:{[Tn.Backward]:o.y[Tn.Backward]||c.y===-1,[Tn.Forward]:o.y[Tn.Forward]||c.y===1}}},[t,e,s])}function MO(i,e){const t=e!=null?i.get(e):void 0,s=t?t.node.current:null;return cu(o=>{var c;return e==null?null:(c=s??o)!=null?c:null},[s,e])}function kO(i,e){return U.useMemo(()=>i.reduce((t,s)=>{const{sensor:o}=s,c=o.activators.map(u=>({eventName:u.eventName,handler:e(u.handler,s)}));return[...t,...c]},[]),[i,e])}var Kc;(function(i){i[i.Always=0]="Always",i[i.BeforeDragging=1]="BeforeDragging",i[i.WhileDragging=2]="WhileDragging"})(Kc||(Kc={}));var rp;(function(i){i.Optimized="optimized"})(rp||(rp={}));const U1=new Map;function VO(i,e){let{dragging:t,dependencies:s,config:o}=e;const[c,u]=U.useState(null),{frequency:m,measure:g,strategy:p}=o,v=U.useRef(i),E=D(),w=Gc(E),C=U.useCallback(function(B){B===void 0&&(B=[]),!w.current&&u(ee=>ee===null?B:ee.concat(B.filter(Y=>!ee.includes(Y))))},[w]),M=U.useRef(null),z=cu(B=>{if(E&&!t)return U1;if(!B||B===U1||v.current!==i||c!=null){const ee=new Map;for(let Y of i){if(!Y)continue;if(c&&c.length>0&&!c.includes(Y.id)&&Y.rect.current){ee.set(Y.id,Y.rect.current);continue}const ce=Y.node.current,ie=ce?new c0(g(ce),ce):null;Y.rect.current=ie,ie&&ee.set(Y.id,ie)}return ee}return B},[i,c,t,E,g]);return U.useEffect(()=>{v.current=i},[i]),U.useEffect(()=>{E||C()},[t,E]),U.useEffect(()=>{c&&c.length>0&&u(null)},[JSON.stringify(c)]),U.useEffect(()=>{E||typeof m!="number"||M.current!==null||(M.current=setTimeout(()=>{C(),M.current=null},m))},[m,E,C,...s]),{droppableRects:z,measureDroppableContainers:C,measuringScheduled:c!=null};function D(){switch(p){case Kc.Always:return!1;case Kc.BeforeDragging:return t;default:return!t}}}function m0(i,e){return cu(t=>i?t||(typeof e=="function"?e(i):i):null,[e,i])}function PO(i,e){return m0(i,e)}function LO(i){let{callback:e,disabled:t}=i;const s=Zf(e),o=U.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:c}=window;return new c(s)},[s,t]);return U.useEffect(()=>()=>o?.disconnect(),[o]),o}function nd(i){let{callback:e,disabled:t}=i;const s=Zf(e),o=U.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:c}=window;return new c(s)},[t]);return U.useEffect(()=>()=>o?.disconnect(),[o]),o}function jO(i){return new c0(yl(i),i)}function z1(i,e,t){e===void 0&&(e=jO);const[s,o]=U.useState(null);function c(){o(g=>{if(!i)return null;if(i.isConnected===!1){var p;return(p=g??t)!=null?p:null}const v=e(i);return JSON.stringify(g)===JSON.stringify(v)?g:v})}const u=LO({callback(g){if(i)for(const p of g){const{type:v,target:E}=p;if(v==="childList"&&E instanceof HTMLElement&&E.contains(i)){c();break}}}}),m=nd({callback:c});return sr(()=>{c(),i?(m?.observe(i),u?.observe(document.body,{childList:!0,subtree:!0})):(m?.disconnect(),u?.disconnect())},[i]),s}function UO(i){const e=m0(i);return kw(i,e)}const B1=[];function zO(i){const e=U.useRef(i),t=cu(s=>i?s&&s!==B1&&i&&e.current&&i.parentNode===e.current.parentNode?s:ed(i):B1,[i]);return U.useEffect(()=>{e.current=i},[i]),t}function BO(i){const[e,t]=U.useState(null),s=U.useRef(i),o=U.useCallback(c=>{const u=Ag(c.target);u&&t(m=>m?(m.set(u,np(u)),new Map(m)):null)},[]);return U.useEffect(()=>{const c=s.current;if(i!==c){u(c);const m=i.map(g=>{const p=Ag(g);return p?(p.addEventListener("scroll",o,{passive:!0}),[p,np(p)]):null}).filter(g=>g!=null);t(m.length?new Map(m):null),s.current=i}return()=>{u(i),u(c)};function u(m){m.forEach(g=>{const p=Ag(g);p?.removeEventListener("scroll",o)})}},[o,i]),U.useMemo(()=>i.length?e?Array.from(e.values()).reduce((c,u)=>Xo(c,u),ar):Bw(i):ar,[i,e])}function q1(i,e){e===void 0&&(e=[]);const t=U.useRef(null);return U.useEffect(()=>{t.current=null},e),U.useEffect(()=>{const s=i!==ar;s&&!t.current&&(t.current=i),!s&&t.current&&(t.current=null)},[i]),t.current?$c(i,t.current):ar}function qO(i){U.useEffect(()=>{if(!Jf)return;const e=i.map(t=>{let{sensor:s}=t;return s.setup==null?void 0:s.setup()});return()=>{for(const t of e)t?.()}},i.map(e=>{let{sensor:t}=e;return t}))}function HO(i,e){return U.useMemo(()=>i.reduce((t,s)=>{let{eventName:o,handler:c}=s;return t[o]=u=>{c(u,e)},t},{}),[i,e])}function Fw(i){return U.useMemo(()=>i?pO(i):null,[i])}const H1=[];function FO(i,e){e===void 0&&(e=yl);const[t]=i,s=Fw(t?ii(t):null),[o,c]=U.useState(H1);function u(){c(()=>i.length?i.map(g=>Uw(g)?s:new c0(e(g),g)):H1)}const m=nd({callback:u});return sr(()=>{m?.disconnect(),u(),i.forEach(g=>m?.observe(g))},[i]),o}function Gw(i){if(!i)return null;if(i.children.length>1)return i;const e=i.children[0];return lu(e)?e:i}function GO(i){let{measure:e}=i;const[t,s]=U.useState(null),o=U.useCallback(p=>{for(const{target:v}of p)if(lu(v)){s(E=>{const w=e(v);return E?{...E,width:w.width,height:w.height}:w});break}},[e]),c=nd({callback:o}),u=U.useCallback(p=>{const v=Gw(p);c?.disconnect(),v&&c?.observe(v),s(v?e(v):null)},[e,c]),[m,g]=wf(u);return U.useMemo(()=>({nodeRef:m,rect:t,setRef:g}),[t,m,g])}const $O=[{sensor:td,options:{}},{sensor:u0,options:{}}],KO={current:{}},ef={draggable:{measure:V1},droppable:{measure:V1,strategy:Kc.WhileDragging,frequency:rp.Optimized},dragOverlay:{measure:yl}};class Dc extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,s;return(t=(s=this.get(e))==null?void 0:s.node.current)!=null?t:void 0}}const QO={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Dc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:xf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ef,measureDroppableContainers:xf,windowRect:null,measuringScheduled:!1},$w={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:xf,draggableNodes:new Map,over:null,measureDroppableContainers:xf},hu=U.createContext($w),Kw=U.createContext(QO);function YO(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Dc}}}function XO(i,e){switch(e.type){case gn.DragStart:return{...i,draggable:{...i.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case gn.DragMove:return i.draggable.active==null?i:{...i,draggable:{...i.draggable,translate:{x:e.coordinates.x-i.draggable.initialCoordinates.x,y:e.coordinates.y-i.draggable.initialCoordinates.y}}};case gn.DragEnd:case gn.DragCancel:return{...i,draggable:{...i.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case gn.RegisterDroppable:{const{element:t}=e,{id:s}=t,o=new Dc(i.droppable.containers);return o.set(s,t),{...i,droppable:{...i.droppable,containers:o}}}case gn.SetDroppableDisabled:{const{id:t,key:s,disabled:o}=e,c=i.droppable.containers.get(t);if(!c||s!==c.key)return i;const u=new Dc(i.droppable.containers);return u.set(t,{...c,disabled:o}),{...i,droppable:{...i.droppable,containers:u}}}case gn.UnregisterDroppable:{const{id:t,key:s}=e,o=i.droppable.containers.get(t);if(!o||s!==o.key)return i;const c=new Dc(i.droppable.containers);return c.delete(t),{...i,droppable:{...i.droppable,containers:c}}}default:return i}}function JO(i){let{disabled:e}=i;const{active:t,activatorEvent:s,draggableNodes:o}=U.useContext(hu),c=Sf(s),u=Sf(t?.id);return U.useEffect(()=>{if(!e&&!s&&c&&u!=null){if(!Wf(c)||document.activeElement===c.target)return;const m=o.get(u);if(!m)return;const{activatorNode:g,node:p}=m;if(!g.current&&!p.current)return;requestAnimationFrame(()=>{for(const v of[g.current,p.current]){if(!v)continue;const E=Y4(v);if(E){E.focus();break}}})}},[s,e,o,u,c]),null}function Qw(i,e){let{transform:t,...s}=e;return i!=null&&i.length?i.reduce((o,c)=>c({transform:o,...s}),t):t}function ZO(i){return U.useMemo(()=>({draggable:{...ef.draggable,...i?.draggable},droppable:{...ef.droppable,...i?.droppable},dragOverlay:{...ef.dragOverlay,...i?.dragOverlay}}),[i?.draggable,i?.droppable,i?.dragOverlay])}function WO(i){let{activeNode:e,measure:t,initialRect:s,config:o=!0}=i;const c=U.useRef(!1),{x:u,y:m}=typeof o=="boolean"?{x:o,y:o}:o;sr(()=>{if(!u&&!m||!e){c.current=!1;return}if(c.current||!s)return;const p=e?.node.current;if(!p||p.isConnected===!1)return;const v=t(p),E=kw(v,s);if(u||(E.x=0),m||(E.y=0),c.current=!0,Math.abs(E.x)>0||Math.abs(E.y)>0){const w=Pw(p);w&&w.scrollBy({top:E.y,left:E.x})}},[e,u,m,s,t])}const id=U.createContext({...ar,scaleX:1,scaleY:1});var Gs;(function(i){i[i.Uninitialized=0]="Uninitialized",i[i.Initializing=1]="Initializing",i[i.Initialized=2]="Initialized"})(Gs||(Gs={}));const g0=U.memo(function(e){var t,s,o,c;let{id:u,accessibility:m,autoScroll:g=!0,children:p,sensors:v=$O,collisionDetection:E=uO,measuring:w,modifiers:C,...M}=e;const z=U.useReducer(XO,void 0,YO),[D,B]=z,[ee,Y]=tO(),[ce,ie]=U.useState(Gs.Uninitialized),J=ce===Gs.Initialized,{draggable:{active:x,nodes:R,translate:N},droppable:{containers:V}}=D,O=x!=null?R.get(x):null,j=U.useRef({initial:null,translated:null}),I=U.useMemo(()=>{var He;return x!=null?{id:x,data:(He=O?.data)!=null?He:KO,rect:j}:null},[x,O]),Ue=U.useRef(null),[ut,ne]=U.useState(null),[he,_e]=U.useState(null),De=Gc(M,Object.values(M)),je=uu("DndDescribedBy",u),P=U.useMemo(()=>V.getEnabled(),[V]),re=ZO(w),{droppableRects:me,measureDroppableContainers:fe,measuringScheduled:pe}=VO(P,{dragging:J,dependencies:[N.x,N.y],config:re.droppable}),Ae=MO(R,x),Pe=U.useMemo(()=>he?Af(he):null,[he]),dt=Ki(),Ge=PO(Ae,re.draggable.measure);WO({activeNode:x!=null?R.get(x):null,config:dt.layoutShiftCompensation,initialRect:Ge,measure:re.draggable.measure});const Fe=z1(Ae,re.draggable.measure,Ge),ri=z1(Ae?Ae.parentElement:null),un=U.useRef({activatorEvent:null,active:null,activeNode:Ae,collisionRect:null,collisions:null,droppableRects:me,draggableNodes:R,draggingNode:null,draggingNodeRect:null,droppableContainers:V,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Fn=V.getNodeFor((t=un.current.over)==null?void 0:t.id),Ut=GO({measure:re.dragOverlay.measure}),Gn=(s=Ut.nodeRef.current)!=null?s:Ae,Pn=J?(o=Ut.rect)!=null?o:Fe:null,or=!!(Ut.nodeRef.current&&Ut.rect),Hi=UO(or?null:Fe),xt=Fw(Gn?ii(Gn):null),mt=zO(J?Fn??Ae:null),$n=FO(mt),lr=Qw(C,{transform:{x:N.x-Hi.x,y:N.y-Hi.y,scaleX:1,scaleY:1},activatorEvent:he,active:I,activeNodeRect:Fe,containerNodeRect:ri,draggingNodeRect:Pn,over:un.current.over,overlayNodeRect:Ut.rect,scrollableAncestors:mt,scrollableAncestorRects:$n,windowRect:xt}),cr=Pe?Xo(Pe,N):null,Zt=BO(mt),Fi=q1(Zt),Cr=q1(Zt,[Fe]),Kn=Xo(lr,Fi),An=Pn?dO(Pn,lr):null,Gi=I&&An?E({active:I,collisionRect:An,droppableRects:me,droppableContainers:P,pointerCoordinates:cr}):null,Nr=Mw(Gi,"id"),[Qn,Ir]=U.useState(null),Yn=or?lr:Xo(lr,Cr),Gt=hO(Yn,(c=Qn?.rect)!=null?c:null,Fe),yn=U.useRef(null),Rt=U.useCallback((He,Ct)=>{let{sensor:Nt,options:zt}=Ct;if(Ue.current==null)return;const vn=R.get(Ue.current);if(!vn)return;const Wt=He.nativeEvent,Pt=new Nt({active:Ue.current,activeNode:vn,event:Wt,options:zt,context:un,onAbort(yt){if(!R.get(yt))return;const{onDragAbort:$t}=De.current,de={id:yt};$t?.(de),ee({type:"onDragAbort",event:de})},onPending(yt,vt,$t,de){if(!R.get(yt))return;const{onDragPending:rt}=De.current,Mt={id:yt,constraint:vt,initialCoordinates:$t,offset:de};rt?.(Mt),ee({type:"onDragPending",event:Mt})},onStart(yt){const vt=Ue.current;if(vt==null)return;const $t=R.get(vt);if(!$t)return;const{onDragStart:de}=De.current,hn={activatorEvent:Wt,active:{id:vt,data:$t.data,rect:j}};yc.unstable_batchedUpdates(()=>{de?.(hn),ie(Gs.Initializing),B({type:gn.DragStart,initialCoordinates:yt,active:vt}),ee({type:"onDragStart",event:hn}),ne(yn.current),_e(Wt)})},onMove(yt){B({type:gn.DragMove,coordinates:yt})},onEnd:X(gn.DragEnd),onCancel:X(gn.DragCancel)});yn.current=Pt;function X(yt){return async function(){const{active:$t,collisions:de,over:hn,scrollAdjustedTranslate:rt}=un.current;let Mt=null;if($t&&rt){const{cancelDrop:fn}=De.current;Mt={activatorEvent:Wt,active:$t,collisions:de,delta:rt,over:hn},yt===gn.DragEnd&&typeof fn=="function"&&await Promise.resolve(fn(Mt))&&(yt=gn.DragCancel)}Ue.current=null,yc.unstable_batchedUpdates(()=>{B({type:yt}),ie(Gs.Uninitialized),Ir(null),ne(null),_e(null),yn.current=null;const fn=yt===gn.DragEnd?"onDragEnd":"onDragCancel";if(Mt){const _t=De.current[fn];_t?.(Mt),ee({type:fn,event:Mt})}})}}},[R]),Dr=U.useCallback((He,Ct)=>(Nt,zt)=>{const vn=Nt.nativeEvent,Wt=R.get(zt);if(Ue.current!==null||!Wt||vn.dndKit||vn.defaultPrevented)return;const Pt={active:Wt};He(Nt,Ct.options,Pt)===!0&&(vn.dndKit={capturedBy:Ct.sensor},Ue.current=zt,Rt(Nt,Ct))},[R,Rt]),$i=kO(v,Dr);qO(v),sr(()=>{Fe&&ce===Gs.Initializing&&ie(Gs.Initialized)},[Fe,ce]),U.useEffect(()=>{const{onDragMove:He}=De.current,{active:Ct,activatorEvent:Nt,collisions:zt,over:vn}=un.current;if(!Ct||!Nt)return;const Wt={active:Ct,activatorEvent:Nt,collisions:zt,delta:{x:Kn.x,y:Kn.y},over:vn};yc.unstable_batchedUpdates(()=>{He?.(Wt),ee({type:"onDragMove",event:Wt})})},[Kn.x,Kn.y]),U.useEffect(()=>{const{active:He,activatorEvent:Ct,collisions:Nt,droppableContainers:zt,scrollAdjustedTranslate:vn}=un.current;if(!He||Ue.current==null||!Ct||!vn)return;const{onDragOver:Wt}=De.current,Pt=zt.get(Nr),X=Pt&&Pt.rect.current?{id:Pt.id,rect:Pt.rect.current,data:Pt.data,disabled:Pt.disabled}:null,yt={active:He,activatorEvent:Ct,collisions:Nt,delta:{x:vn.x,y:vn.y},over:X};yc.unstable_batchedUpdates(()=>{Ir(X),Wt?.(yt),ee({type:"onDragOver",event:yt})})},[Nr]),sr(()=>{un.current={activatorEvent:he,active:I,activeNode:Ae,collisionRect:An,collisions:Gi,droppableRects:me,draggableNodes:R,draggingNode:Gn,draggingNodeRect:Pn,droppableContainers:V,over:Qn,scrollableAncestors:mt,scrollAdjustedTranslate:Kn},j.current={initial:Pn,translated:An}},[I,Ae,Gi,An,R,Gn,Pn,me,V,Qn,mt,Kn]),IO({...dt,delta:N,draggingRect:An,pointerCoordinates:cr,scrollableAncestors:mt,scrollableAncestorRects:$n});const as=U.useMemo(()=>({active:I,activeNode:Ae,activeNodeRect:Fe,activatorEvent:he,collisions:Gi,containerNodeRect:ri,dragOverlay:Ut,draggableNodes:R,droppableContainers:V,droppableRects:me,over:Qn,measureDroppableContainers:fe,scrollableAncestors:mt,scrollableAncestorRects:$n,measuringConfiguration:re,measuringScheduled:pe,windowRect:xt}),[I,Ae,Fe,he,Gi,ri,Ut,R,V,me,Qn,fe,mt,$n,re,pe,xt]),si=U.useMemo(()=>({activatorEvent:he,activators:$i,active:I,activeNodeRect:Fe,ariaDescribedById:{draggable:je},dispatch:B,draggableNodes:R,over:Qn,measureDroppableContainers:fe}),[he,$i,I,Fe,B,je,R,Qn,fe]);return at.createElement(Iw.Provider,{value:Y},at.createElement(hu.Provider,{value:si},at.createElement(Kw.Provider,{value:as},at.createElement(id.Provider,{value:Gt},p)),at.createElement(JO,{disabled:m?.restoreFocus===!1})),at.createElement(rO,{...m,hiddenTextDescribedById:je}));function Ki(){const He=ut?.autoScrollEnabled===!1,Ct=typeof g=="object"?g.enabled===!1:g===!1,Nt=J&&!He&&!Ct;return typeof g=="object"?{...g,enabled:Nt}:{enabled:Nt}}}),eM=U.createContext(null),F1="button",tM="Draggable";function p0(i){let{id:e,data:t,disabled:s=!1,attributes:o}=i;const c=uu(tM),{activators:u,activatorEvent:m,active:g,activeNodeRect:p,ariaDescribedById:v,draggableNodes:E,over:w}=U.useContext(hu),{role:C=F1,roleDescription:M="draggable",tabIndex:z=0}=o??{},D=g?.id===e,B=U.useContext(D?id:eM),[ee,Y]=wf(),[ce,ie]=wf(),J=HO(u,e),x=Gc(t);sr(()=>(E.set(e,{id:e,key:c,node:ee,activatorNode:ce,data:x}),()=>{const N=E.get(e);N&&N.key===c&&E.delete(e)}),[E,e]);const R=U.useMemo(()=>({role:C,tabIndex:z,"aria-disabled":s,"aria-pressed":D&&C===F1?!0:void 0,"aria-roledescription":M,"aria-describedby":v.draggable}),[s,C,z,D,M,v.draggable]);return{active:g,activatorEvent:m,activeNodeRect:p,attributes:R,isDragging:D,listeners:s?void 0:J,node:ee,over:w,setNodeRef:Y,setActivatorNodeRef:ie,transform:B}}function Yw(){return U.useContext(Kw)}const nM="Droppable",iM={timeout:25};function rd(i){let{data:e,disabled:t=!1,id:s,resizeObserverConfig:o}=i;const c=uu(nM),{active:u,dispatch:m,over:g,measureDroppableContainers:p}=U.useContext(hu),v=U.useRef({disabled:t}),E=U.useRef(!1),w=U.useRef(null),C=U.useRef(null),{disabled:M,updateMeasurementsFor:z,timeout:D}={...iM,...o},B=Gc(z??s),ee=U.useCallback(()=>{if(!E.current){E.current=!0;return}C.current!=null&&clearTimeout(C.current),C.current=setTimeout(()=>{p(Array.isArray(B.current)?B.current:[B.current]),C.current=null},D)},[D]),Y=nd({callback:ee,disabled:M||!u}),ce=U.useCallback((R,N)=>{Y&&(N&&(Y.unobserve(N),E.current=!1),R&&Y.observe(R))},[Y]),[ie,J]=wf(ce),x=Gc(e);return U.useEffect(()=>{!Y||!ie.current||(Y.disconnect(),E.current=!1,Y.observe(ie.current))},[ie,Y]),U.useEffect(()=>(m({type:gn.RegisterDroppable,element:{id:s,key:c,disabled:t,node:ie,rect:w,data:x}}),()=>m({type:gn.UnregisterDroppable,key:c,id:s})),[s]),U.useEffect(()=>{t!==v.current.disabled&&(m({type:gn.SetDroppableDisabled,id:s,key:c,disabled:t}),v.current.disabled=t)},[s,c,t,m]),{active:u,rect:w,isOver:g?.id===s,node:ie,over:g,setNodeRef:J}}function rM(i){let{animation:e,children:t}=i;const[s,o]=U.useState(null),[c,u]=U.useState(null),m=Sf(t);return!t&&!s&&m&&o(m),sr(()=>{if(!c)return;const g=s?.key,p=s?.props.id;if(g==null||p==null){o(null);return}Promise.resolve(e(p,c)).then(()=>{o(null)})},[e,s,c]),at.createElement(at.Fragment,null,t,s?U.cloneElement(s,{ref:u}):null)}const sM={x:0,y:0,scaleX:1,scaleY:1};function aM(i){let{children:e}=i;return at.createElement(hu.Provider,{value:$w},at.createElement(id.Provider,{value:sM},e))}const oM={position:"fixed",touchAction:"none"},lM=i=>Wf(i)?"transform 250ms ease":void 0,cM=U.forwardRef((i,e)=>{let{as:t,activatorEvent:s,adjustScale:o,children:c,className:u,rect:m,style:g,transform:p,transition:v=lM}=i;if(!m)return null;const E=o?p:{...p,scaleX:1,scaleY:1},w={...oM,width:m.width,height:m.height,top:m.top,left:m.left,transform:rs.Transform.toString(E),transformOrigin:o&&s?sO(s,m):void 0,transition:typeof v=="function"?v(s):v,...g};return at.createElement(t,{className:u,style:w,ref:e},c)}),uM=i=>e=>{let{active:t,dragOverlay:s}=e;const o={},{styles:c,className:u}=i;if(c!=null&&c.active)for(const[m,g]of Object.entries(c.active))g!==void 0&&(o[m]=t.node.style.getPropertyValue(m),t.node.style.setProperty(m,g));if(c!=null&&c.dragOverlay)for(const[m,g]of Object.entries(c.dragOverlay))g!==void 0&&s.node.style.setProperty(m,g);return u!=null&&u.active&&t.node.classList.add(u.active),u!=null&&u.dragOverlay&&s.node.classList.add(u.dragOverlay),function(){for(const[g,p]of Object.entries(o))t.node.style.setProperty(g,p);u!=null&&u.active&&t.node.classList.remove(u.active)}},hM=i=>{let{transform:{initial:e,final:t}}=i;return[{transform:rs.Transform.toString(e)},{transform:rs.Transform.toString(t)}]},fM={duration:250,easing:"ease",keyframes:hM,sideEffects:uM({styles:{active:{opacity:"0"}}})};function dM(i){let{config:e,draggableNodes:t,droppableContainers:s,measuringConfiguration:o}=i;return Zf((c,u)=>{if(e===null)return;const m=t.get(c);if(!m)return;const g=m.node.current;if(!g)return;const p=Gw(u);if(!p)return;const{transform:v}=ii(u).getComputedStyle(u),E=Vw(v);if(!E)return;const w=typeof e=="function"?e:mM(e);return qw(g,o.draggable.measure),w({active:{id:c,data:m.data,node:g,rect:o.draggable.measure(g)},draggableNodes:t,dragOverlay:{node:u,rect:o.dragOverlay.measure(p)},droppableContainers:s,measuringConfiguration:o,transform:E})})}function mM(i){const{duration:e,easing:t,sideEffects:s,keyframes:o}={...fM,...i};return c=>{let{active:u,dragOverlay:m,transform:g,...p}=c;if(!e)return;const v={x:m.rect.left-u.rect.left,y:m.rect.top-u.rect.top},E={scaleX:g.scaleX!==1?u.rect.width*g.scaleX/m.rect.width:1,scaleY:g.scaleY!==1?u.rect.height*g.scaleY/m.rect.height:1},w={x:g.x-v.x,y:g.y-v.y,...E},C=o({...p,active:u,dragOverlay:m,transform:{initial:g,final:w}}),[M]=C,z=C[C.length-1];if(JSON.stringify(M)===JSON.stringify(z))return;const D=s?.({active:u,dragOverlay:m,...p}),B=m.node.animate(C,{duration:e,easing:t,fill:"forwards"});return new Promise(ee=>{B.onfinish=()=>{D?.(),ee()}})}}let G1=0;function gM(i){return U.useMemo(()=>{if(i!=null)return G1++,G1},[i])}const pM=at.memo(i=>{let{adjustScale:e=!1,children:t,dropAnimation:s,style:o,transition:c,modifiers:u,wrapperElement:m="div",className:g,zIndex:p=999}=i;const{activatorEvent:v,active:E,activeNodeRect:w,containerNodeRect:C,draggableNodes:M,droppableContainers:z,dragOverlay:D,over:B,measuringConfiguration:ee,scrollableAncestors:Y,scrollableAncestorRects:ce,windowRect:ie}=Yw(),J=U.useContext(id),x=gM(E?.id),R=Qw(u,{activatorEvent:v,active:E,activeNodeRect:w,containerNodeRect:C,draggingNodeRect:D.rect,over:B,overlayNodeRect:D.rect,scrollableAncestors:Y,scrollableAncestorRects:ce,transform:J,windowRect:ie}),N=m0(w),V=dM({config:s,draggableNodes:M,droppableContainers:z,measuringConfiguration:ee}),O=N?D.setRef:void 0;return at.createElement(aM,null,at.createElement(rM,{animation:V},E&&x?at.createElement(cM,{key:x,id:E.id,ref:O,as:m,activatorEvent:v,adjustScale:e,className:g,transition:c,rect:N,style:{zIndex:p,...o},transform:R},t):null))}),Jo=i=>new s0(i),yM=(i,e,t,s)=>{try{return i.move({from:e,to:t,promotion:s||"q"})}catch{return null}},vM=({id:i,isLight:e,isHighlighted:t=!1,isActive:s=!1,children:o})=>{const{isOver:c,setNodeRef:u}=rd({id:i});return T.jsxs("div",{ref:u,className:`chess-square ${s?"z-50 relative":"overflow-hidden"} ${c?"bg-indigo-500/60 shadow-[inset_0_0_20px_rgba(255,255,255,0.2)] z-10":t?e?"bg-indigo-400/50 shadow-inner":"bg-indigo-600/50 shadow-inner":e?"bg-[#cbd5e1] text-slate-700 shadow-[inset_0_1px_4px_rgba(255,255,255,0.3)]":"bg-[#334155] text-slate-400 shadow-[inset_0_2px_4px_rgba(0,0,0,0.3)]"}`,children:[T.jsx("div",{className:`absolute top-1 left-1 text-[10px] font-black uppercase tracking-tighter opacity-20 pointer-events-none ${e?"text-slate-900":"text-slate-100"}`,children:i}),T.jsx("div",{className:"relative w-full h-full overflow-visible z-10",children:o})]})},_M={w:{p:"",r:"",n:"",b:"",q:"",k:""},b:{p:"",r:"",n:"",b:"",q:"",k:""}},bM=({id:i,type:e,color:t,isDraggable:s=!0})=>{const{attributes:o,listeners:c,setNodeRef:u,transform:m,isDragging:g}=p0({id:i,disabled:!s,data:{type:e,color:t}}),p={transform:rs.Translate.toString(m),transition:g?"none":"transform 120ms ease-out",zIndex:g?9999:20};return T.jsx("div",{ref:u,style:p,...c,...o,className:`chess-piece transition-transform duration-120 ease-out ${g?"scale-112 drop-shadow-2xl z-[9999]":"hover:scale-103 z-20"} ${s?"cursor-grab active:cursor-grabbing":"grayscale-[0.2] opacity-90 cursor-default"} text-slate-950 drop-shadow-sm`,children:T.jsx("div",{className:`
        flex items-center justify-center w-full h-full 
        ${t==="w"?"drop-shadow-[0_2px_0_rgba(255,255,255,0.8)]":"drop-shadow-[0_2px_0_rgba(0,0,0,0.5)]"}
      `,children:_M[t][e]})})},EM=({onMove:i,initialFen:e,playerColor:t="w",isGameOver:s=!1})=>{const[o,c]=U.useState(()=>Jo(e)),[u,m]=U.useState([]),[g,p]=U.useState(null);at.useEffect(()=>{e&&e!==o.fen()&&c(Jo(e))},[e]);const v=l0(Ga(d0,{activationConstraint:{delay:80,tolerance:8}}),Ga(td),Ga(f0)),E=U.useCallback(M=>{const{active:z,over:D}=M;if(m([]),p(null),!D)return;const B=z.id,ee=D.id,Y=Jo(o.fen());yM(Y,B,ee)&&(c(Y),i&&i(Y.fen()))},[o,i]),w=U.useCallback(M=>{p(M);const z=M,D=o.get(z);if(s||!D||D.color!==t||o.turn()!==t){m([]);return}const B=o.moves({square:z,verbose:!0}).map(ee=>ee.to);m(B)},[o,t]),C=()=>{const M=[],z=["a","b","c","d","e","f","g","h"],D=["8","7","6","5","4","3","2","1"],B=t==="w"?D:[...D].reverse(),ee=t==="w"?z:[...z].reverse();for(const Y of B)for(const ce of ee){const ie=`${ce}${Y}`,J=o.get(ie),x=(z.indexOf(ce)+D.indexOf(Y))%2===0,R=!!J&&J.color===t&&o.turn()===t&&!s,N=u.includes(ie),V=ie===g;M.push(T.jsx(vM,{id:ie,isLight:x,isHighlighted:N,isActive:V,children:J&&T.jsx(bM,{id:ie,type:J.type,color:J.color,isDraggable:R})},ie))}return M};return T.jsx(g0,{sensors:v,onDragEnd:E,onDragStart:M=>w(M.active.id),children:T.jsx("div",{className:"p-3 lg:p-4 bg-slate-800 rounded-[2rem] lg:rounded-[2.5rem] shadow-[0_0_50px_-12px_rgba(99,102,241,0.25)] border-4 border-slate-700/50 ring-4 ring-slate-900/50",style:{touchAction:"none"},children:T.jsx("div",{className:"grid grid-cols-8 gap-0 rounded-2xl lg:rounded-3xl overflow-hidden border border-slate-700/30 shadow-inner",style:{width:"min(92vw, 720px)",height:"min(92vw, 720px)",gridTemplateColumns:"repeat(8, 1fr)"},children:C()})})})},TM=()=>Math.random().toString(36).substring(2,8).toUpperCase(),$1="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",Xw=i=>{const[e,t]=U.useState(null),[s,o]=U.useState(null),[c,u]=U.useState(!0),[m,g]=U.useState(!0);U.useEffect(()=>{const D=Hc();qc(D).then(B=>{o(B.user.uid)}).catch(B=>{console.error("Auth failed",B)}).finally(()=>g(!1))},[]);const p=async()=>{if(s)return s;const D=Hc(),B=await qc(D);return o(B.user.uid),B.user.uid};return U.useEffect(()=>{if(!Mn||!Ye){console.warn("Firebase not configured; room sync disabled."),u(!1);return}if(!i){t(null),u(!1);return}u(!0);const D=ei(Wn(Ye,"rooms"),i),B=Jp(D,ee=>{ee.exists()?t(ee.data()):t(null),u(!1)},ee=>{console.error("Room subscription error",ee),t(null),u(!1)});return()=>B()},[i]),{room:e,userId:s,loading:c,isAuthLoading:m,createRoom:async()=>{if(!Mn||!Ye)throw new Error("Firebase not configured");const D=await p(),B=TM(),ee=ei(Wn(Ye,"rooms"),B);return await Xp(ee,{fen:$1,whitePlayer:D,blackPlayer:"",turn:"w",status:"active",winner:"",resultReason:""}),B},joinRoom:async D=>{if(!Mn||!Ye)throw new Error("Firebase not configured");const B=await p(),ee=ei(Wn(Ye,"rooms"),D);await Rc(Ye,async Y=>{const ce=await Y.get(ee);if(!ce.exists())throw new Error("Room not found");const J={...ce.data()};J.whitePlayer?!J.blackPlayer&&J.whitePlayer!==B&&(J.blackPlayer=B):J.whitePlayer=B,Y.update(ee,J)})},updateMove:async D=>{if(!Mn||!Ye||!i)return;const B=ei(Wn(Ye,"rooms"),i);await Rc(Ye,async ee=>{const Y=await ee.get(B);if(!Y.exists())return;const ce=Y.data();if(ce.status&&ce.status!=="active")return;const ie=new s0(D),J=ie.turn();let x="active",R="",N="";ie.isCheckmate()?(x="checkmate",R=J==="w"?"b":"w",N="checkmate"):ie.isStalemate&&ie.isStalemate()?(x="stalemate",R="",N="stalemate"):ie.isDraw()&&(x="draw",R="",N="draw"),ee.update(B,{fen:D,turn:J,status:x,winner:R,resultReason:N})})},resignGame:async D=>{if(!Mn||!Ye||!i)return;const B=ei(Wn(Ye,"rooms"),i);await xc(B,{status:"resigned",winner:D==="w"?"b":"w",resultReason:"resigned"})},resetGame:async()=>{if(!Mn||!Ye||!i)return;const D=ei(Wn(Ye,"rooms"),i);await xc(D,{fen:$1,turn:"w",status:"active",winner:"",resultReason:""})},leaveRoom:async()=>{if(!(!Mn||!Ye)&&i)try{const D=await p(),B=ei(Wn(Ye,"rooms"),i);await Rc(Ye,async ee=>{const Y=await ee.get(B);if(!Y.exists())return;const ie={...Y.data()};ie.whitePlayer===D?ie.whitePlayer="":ie.blackPlayer===D&&(ie.blackPlayer=""),ee.update(B,ie)})}catch(D){console.error("Error leaving room:",D)}}}},wM={p:10,n:30,b:30,r:50,q:90,k:900},K1=[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,-.5,-1,0,0,-1,-.5,.5],[.5,1,1,-2,-2,1,1,.5],[0,0,0,0,0,0,0,0]],Q1=[[-5,-4,-3,-3,-3,-3,-4,-5],[-4,-2,0,0,0,0,-2,-4],[-3,0,1,1.5,1.5,1,0,-3],[-3,.5,1.5,2,2,1.5,.5,-3],[-3,0,1.5,2,2,1.5,0,-3],[-3,.5,1,1.5,1.5,1,.5,-3],[-4,-2,0,.5,.5,0,-2,-4],[-5,-4,-3,-3,-3,-3,-4,-5]],SM=i=>{let e=0;const t=i.board();for(let s=0;s<8;s++)for(let o=0;o<8;o++){const c=t[s][o];if(c){const u=wM[c.type];let m=0;c.type==="p"&&(m=c.color==="w"?K1[s][o]:K1[7-s][o]),c.type==="n"&&(m=c.color==="w"?Q1[s][o]:Q1[7-s][o]),c.color==="w"?e+=u+m*.1:e-=u+m*.1}}return e},sp=(i,e,t,s,o)=>{if(e===0||i.isGameOver())return-SM(i);const c=i.moves();if(o){let u=-1/0;for(const m of c){i.move(m);const g=sp(i,e-1,t,s,!1);if(i.undo(),u=Math.max(u,g),t=Math.max(t,g),s<=t)break}return u}else{let u=1/0;for(const m of c){i.move(m);const g=sp(i,e-1,t,s,!0);if(i.undo(),u=Math.min(u,g),s=Math.min(s,g),s<=t)break}return u}},AM=(i,e="Normal")=>{const t=i.moves();if(t.length===0)return null;if(e==="Easy"&&Math.random()>.2)return t[Math.floor(Math.random()*t.length)];let s=null,o=1/0;t.sort((u,m)=>{const g=u.includes("x")?1:0;return(m.includes("x")?1:0)-g});const c=e==="Easy"?1:e==="Hard"?3:2;for(const u of t){i.move(u);const m=sp(i,c,-1/0,1/0,!0);i.undo(),m<o&&(o=m,s=u)}return s||t[0]},xM=({roomId:i="",mode:e="online",aiDifficulty:t="Normal",onExit:s})=>{const o=Xw(e==="online"?i:null),[c,u]=U.useState(()=>Jo()),[m,g]=U.useState(c.fen()),[p,v]=U.useState("active"),[E,w]=U.useState(""),C=e==="local",M=C?{fen:m,turn:c.turn(),whitePlayer:"local-white",blackPlayer:"local-black",status:p,winner:E}:o.room,z=C?!1:o.loading,D=fe=>{const pe=Jo(fe);u(pe),g(fe),pe.isCheckmate()?(v("checkmate"),w(pe.turn()==="w"?"b":"w")):pe.isDraw()?v("draw"):pe.isStalemate&&pe.isStalemate()&&v("stalemate")};U.useEffect(()=>{if(C&&c.turn()==="b"&&p==="active"){const fe=setTimeout(()=>{const pe=AM(c,t);pe&&(c.move(pe),D(c.fen()))},500);return()=>clearTimeout(fe)}},[m,C,p,t]);const B=()=>{const fe=Jo();u(fe),g(fe.fen()),v("active"),w(""),x(0),N(0),O(0)},ee=C?D:o.updateMove,Y=C?fe=>{v("active"),w(fe==="w"?"b":"w"),alert(`${fe==="w"?"White":"Black"} resigned.`)}:o.resignGame,ce=C?B:o.resetGame,ie=C?M?.turn==="w"?"local-white":"local-black":o.userId,[J,x]=at.useState(0),[R,N]=at.useState(0),[V,O]=at.useState(0);if(at.useEffect(()=>{!C&&i&&o.joinRoom&&o.joinRoom(i)},[i,C]),at.useEffect(()=>{if(!M||M.status&&M.status!=="active")return;const fe=window.setInterval(()=>{x(pe=>pe+1),N(pe=>pe+(M.turn==="w"?1:0)),O(pe=>pe+(M.turn==="b"?1:0))},1e3);return()=>window.clearInterval(fe)},[M?.turn,M?.status]),z)return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-6 animate-pulse",children:[T.jsx("div",{className:"relative shadow-2xl shadow-indigo-500/20 rounded-full p-4",children:T.jsx(tE,{className:"w-16 h-16 text-indigo-500 animate-spin"})}),T.jsxs("div",{className:"text-center space-y-2",children:[T.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest",children:"Entering Arena"}),T.jsx("p",{className:"text-slate-500 font-medium",children:"Synchronizing with the global lattice..."})]})]});if(!M)return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[T.jsxs("div",{className:"text-center space-y-4",children:[T.jsx("h2",{className:"text-5xl font-black text-white italic",children:"Room Dissolved"}),T.jsx("p",{className:"text-slate-400 text-lg",children:"The arena you seek no longer exists or the link is expired."})]}),T.jsx("button",{onClick:s,className:"btn-premium px-10 py-4 text-xl",children:"Return to Lobby"})]});const j=M.whitePlayer===ie||C,I=M.blackPlayer===ie,Ue=C||ie===M.whitePlayer?"w":ie===M.blackPlayer?"b":"w",ut=M.turn===Ue,ne=new s0(M.fen),he={isCheck:ne.isCheck(),isCheckmate:ne.isCheckmate(),isDraw:ne.isDraw(),isStalemate:typeof ne.isStalemate=="function"?ne.isStalemate():!1,turn:ne.turn()},_e=M.status??"active",De=M.winner??"",je=_e!=="active",P=fe=>{const pe=Math.floor(fe/60).toString().padStart(2,"0"),Ae=(fe%60).toString().padStart(2,"0");return`${pe}:${Ae}`},re=_e==="checkmate"?`Checkmate  ${De==="w"?"White":"Black"} wins`:_e==="stalemate"?"Stalemate  Draw":_e==="draw"?"Draw":_e==="resigned"?`Resigned  ${De==="w"?"White":"Black"} wins`:he.isCheck?`${he.turn==="w"?"White":"Black"} is in check`:ut?"Your Turn":"Waiting...",me=()=>{navigator.clipboard.writeText(i),alert("Room ID copied to clipboard!")};return T.jsxs("div",{className:"flex flex-col items-center gap-8 lg:gap-12 py-6 lg:py-10 w-full animate-in fade-in duration-700",children:[T.jsxs("header",{className:"w-full max-w-6xl flex items-center justify-between px-4 lg:px-6",children:[T.jsxs("button",{onClick:()=>{!C&&o.leaveRoom&&o.leaveRoom(),s()},className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all font-bold uppercase tracking-widest text-xs",children:[T.jsx("div",{className:"p-2 rounded-xl bg-slate-900 border border-slate-800 group-hover:border-slate-700 group-hover:-translate-x-1 transition-transform",children:T.jsx(_c,{size:18})}),"Back"]}),!C&&T.jsx("div",{className:"flex items-center gap-4",children:T.jsxs("div",{className:"liquid-glass px-6 py-3 flex items-center gap-6",children:[T.jsxs("div",{className:"flex flex-col gap-0.5",children:[T.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-slate-500 font-black",children:"Arena ID"}),T.jsx("code",{className:"text-indigo-300 font-mono font-bold",children:i})]}),T.jsx("div",{className:"h-8 w-px bg-slate-800"}),T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("button",{onClick:me,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:T.jsx(W1,{size:18})}),T.jsx("button",{className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:T.jsx(nE,{size:18})})]})]})}),C&&T.jsx("div",{className:"px-6 py-3 liquid-glass text-indigo-300 font-bold uppercase tracking-widest text-xs",children:"Single Player Mode"})]}),T.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-6 lg:gap-16 w-full max-w-7xl px-4 lg:px-6",children:[T.jsxs("div",{className:"relative group w-full flex justify-center max-w-full overflow-visible",children:[T.jsx("div",{className:"absolute -inset-4 bg-linear-to-r from-indigo-500 to-pink-500 rounded-[2.5rem] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"}),T.jsx(EM,{initialFen:M.fen,onMove:ee,playerColor:Ue,isGameOver:je})]}),T.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-6 lg:gap-8 mt-0 lg:mt-0",children:[T.jsxs("div",{className:"liquid-glass p-5 lg:p-8 space-y-6 lg:space-y-8 border-l-4 border-l-indigo-500",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:"Game Status"}),T.jsxs("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-2 ${_e==="active"?ut?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-slate-800 text-slate-500":"bg-indigo-500/10 text-indigo-300 border border-indigo-500/30"}`,children:[T.jsx("span",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${_e==="active"?"bg-green-500":"bg-indigo-400"}`}),C?M.turn==="w"?" White Turn":" Black Turn":re]})]}),_e==="active"&&he.isCheck&&T.jsxs("div",{className:"p-3 rounded-2xl bg-amber-500/10 border border-amber-500/30 text-amber-200 text-[10px] lg:text-xs font-black uppercase tracking-widest",children:["CHECK! ",he.turn==="w"?"White":"Black"," to move."]}),je&&T.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/10 border border-indigo-500/30 text-indigo-100 text-sm lg:text-base font-bold",children:re}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 p-4 rounded-2xl bg-slate-900/60 border border-slate-800/80 text-[10px] lg:text-xs font-bold uppercase tracking-widest",children:[T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"Time"}),T.jsx("div",{className:"text-white text-base",children:P(J)})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"White"}),T.jsx("div",{className:"text-emerald-300 text-base",children:P(R)})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"Black"}),T.jsx("div",{className:"text-sky-300 text-base",children:P(V)})]})]}),!C&&T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex items-center gap-3 lg:gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[T.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${j?"bg-white text-slate-950":"bg-slate-800 text-slate-400"}`,children:"W"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"White Player"}),T.jsx("div",{className:"text-xs text-slate-500 font-medium",children:M.whitePlayer===ie?"Connected (You)":M.whitePlayer?"Opponent Ready":"Awaiting Entry..."})]})]}),T.jsxs("div",{className:"flex items-center gap-3 lg:gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[T.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${I?"bg-indigo-500 text-white":"bg-slate-800 text-slate-400"}`,children:"B"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"Black Player"}),T.jsx("div",{className:"text-xs text-slate-500 font-medium",children:M.blackPlayer===ie?"Connected (You)":M.blackPlayer?"Opponent Ready":"Awaiting Entry..."})]})]})]})]}),T.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[T.jsxs("button",{disabled:je,onClick:()=>Y(Ue),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-slate-800 bg-slate-900/60 text-slate-200 font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:border-red-500/50 hover:text-red-200 transition",children:[T.jsx(eE,{size:18}),"Resign"]}),T.jsxs("button",{disabled:!je&&!C,onClick:()=>ce(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 text-indigo-100 font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:bg-indigo-500/20 transition",children:[T.jsx(Nf,{size:18}),"Rematch"]})]})]}),!C&&T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[T.jsx(cp,{size:20,className:"mx-auto text-slate-600"}),T.jsx("div",{className:"text-xl font-black text-white italic",children:M.whitePlayer&&M.blackPlayer?"2/2":M.whitePlayer||M.blackPlayer?"1/2":"0/2"}),T.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Connected"})]}),T.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[T.jsx(iE,{size:20,className:"mx-auto text-indigo-400"}),T.jsx("div",{className:"text-xl font-black text-white italic",children:"24ms"}),T.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Latency"})]})]})]})]}),T.jsx("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10",children:"Transparent Strategy Arena"})]})},RM=[2,0,0,0,0,-5,0,-3,0,0,0,5,-5,0,0,0,3,0,5,0,0,0,0,-2],vc=()=>{const i=Math.floor(Math.random()*6)+1,e=Math.floor(Math.random()*6)+1;return i===e?[i,i,i,i]:[i,e]},Oc=()=>{const i=vc();return{board:[...RM],bar:{white:0,black:0},off:{white:0,black:0},turn:"white",dice:i,movesLeft:[...i],validMoves:[],winner:null}},CM=(i,e)=>{const t=i.board;if(e==="white"){if(i.bar.white>0)return!1;for(let s=0;s<18;s++)if(t[s]>0)return!1;return!0}else{if(i.bar.black>0)return!1;for(let s=6;s<24;s++)if(t[s]<0)return!1;return!0}},ap=i=>{if(i.winner)return[];const e=o=>{const c=[],{turn:u,board:m,bar:g,movesLeft:p}=o,v=Array.from(new Set(p));if(p.length===0)return[];const E=u==="white",w=E?1:-1;if((E?g.white:g.black)>0){for(const M of v){const z=E?M-1:24-M,D=m[z];(E?D<-1:D>1)||c.push({from:"bar",to:z,roll:M,isHit:E?D===-1:D===1})}return c}for(let M=0;M<24;M++){const z=m[M];if(!(E&&z<=0)&&!(!E&&z>=0))for(const D of v){const B=M+w*D;if(CM(o,u)){if(E&&B===24){c.push({from:M,to:"off",roll:D});continue}if(!E&&B===-1){c.push({from:M,to:"off",roll:D});continue}if(E&&B>24){let ie=!0;for(let J=18;J<M;J++)m[J]>0&&(ie=!1);ie&&c.push({from:M,to:"off",roll:D})}if(!E&&B<-1){let ie=!0;for(let J=5;J>M;J--)m[J]<0&&(ie=!1);ie&&c.push({from:M,to:"off",roll:D})}}if(B<0||B>23)continue;const Y=m[B];(E?Y<-1:Y>1)||c.push({from:M,to:B,roll:D,isHit:E?Y===-1:Y===1})}}return c},t=e(i),s=[...t];if(i.movesLeft.length>1)for(const o of t){const c=fu(i,o),u=e(c);if(o.to!=="off"){const m=u.filter(g=>g.from===o.to);for(const g of m)s.push({from:o.from,to:g.to,roll:o.roll+g.roll,isHit:g.isHit,subMoves:[o,g]})}}return s},fu=(i,e)=>{const t={...i,board:[...i.board],bar:{...i.bar},off:{...i.off},movesLeft:[...i.movesLeft]},s=i.turn==="white";if(e.subMoves&&e.subMoves.length>0){let c=i;for(const u of e.subMoves)c=fu(c,u);return c}if(e.from==="bar"?s?t.bar.white--:t.bar.black--:t.board[e.from]-=s?1:-1,e.to==="off")s?t.off.white++:t.off.black++;else{const c=e.to;e.isHit&&(s?t.bar.black++:t.bar.white++,t.board[c]=0),t.board[c]+=s?1:-1}const o=t.movesLeft.indexOf(e.roll);return o>-1&&t.movesLeft.splice(o,1),s&&t.off.white===15&&(t.winner="white"),!s&&t.off.black===15&&(t.winner="black"),t},NM=()=>Math.random().toString(36).substring(2,8).toUpperCase(),Jw=i=>{const[e,t]=U.useState(null),[s,o]=U.useState(null),[c,u]=U.useState(!0),[m,g]=U.useState(!0);U.useEffect(()=>{const D=Hc();qc(D).then(B=>{o(B.user.uid)}).catch(B=>{console.error("Auth failed",B)}).finally(()=>g(!1))},[]);const p=async()=>{if(s)return s;const D=Hc(),B=await qc(D);return o(B.user.uid),B.user.uid};return U.useEffect(()=>{if(!Mn||!Ye){u(!1);return}if(!i){t(null),u(!1);return}u(!0);const D=ei(Wn(Ye,"rooms_bg"),i),B=Jp(D,ee=>{ee.exists()?t(ee.data()):t(null),u(!1)},ee=>{console.error("Room subscription error",ee),t(null),u(!1)});return()=>B()},[i]),{room:e,userId:s,loading:c,isAuthLoading:m,createRoom:async()=>{if(!Mn||!Ye)throw new Error("Firebase not configured");const D=await p(),B=NM(),ee=ei(Wn(Ye,"rooms_bg"),B),Y=Oc(),ce={board:Y.board,bar:Y.bar,off:Y.off,turn:Y.turn,dice:Y.dice,movesLeft:Y.movesLeft,whitePlayer:D,blackPlayer:"",winner:"",status:"active"};return await Xp(ee,ce),B},joinRoom:async D=>{if(!Mn||!Ye)throw new Error("Firebase not configured");const B=await p(),ee=ei(Wn(Ye,"rooms_bg"),D);await Rc(Ye,async Y=>{const ce=await Y.get(ee);if(!ce.exists())throw new Error("Room not found");const J={...ce.data()};J.whitePlayer?!J.blackPlayer&&J.whitePlayer!==B&&(J.blackPlayer=B):J.whitePlayer=B,Y.update(ee,J)})},updateGameState:async D=>{if(!Mn||!Ye||!i)return;const B=ei(Wn(Ye,"rooms_bg"),i);let ee="active",Y="";D.winner&&(ee="finished",Y=D.winner),await xc(B,{board:D.board,bar:D.bar,off:D.off,turn:D.turn,dice:D.dice,movesLeft:D.movesLeft,winner:Y,status:ee})},resignGame:async D=>{if(!Mn||!Ye||!i)return;const B=ei(Wn(Ye,"rooms_bg"),i);await xc(B,{status:"resigned",winner:D==="white"?"black":"white"})},resetGame:async()=>{if(!Mn||!Ye||!i)return;const D=Oc(),B=ei(Wn(Ye,"rooms_bg"),i);await xc(B,{board:D.board,bar:D.bar,off:D.off,turn:D.turn,dice:D.dice,movesLeft:D.movesLeft,status:"active",winner:""})},leaveRoom:async()=>{if(!(!Mn||!Ye)&&i)try{const D=await p(),B=ei(Wn(Ye,"rooms_bg"),i);await Rc(Ye,async ee=>{const Y=await ee.get(B);if(!Y.exists())return;const ie={...Y.data()};ie.whitePlayer===D?ie.whitePlayer="":ie.blackPlayer===D&&(ie.blackPlayer=""),ee.update(B,ie)})}catch(D){console.error("Error leaving room:",D)}}}},Zw=({color:i,style:e,className:t=""})=>{const s=i==="white"?"bg-slate-200 shadow-[inset_0_-4px_4px_rgba(0,0,0,0.2),0_4px_6px_rgba(0,0,0,0.3)] border-slate-300":"bg-slate-900 shadow-[inset_0_-4px_4px_rgba(0,0,0,0.5),0_4px_6px_rgba(0,0,0,0.4)] border-slate-700",o=i==="white"?"border-slate-300":"border-slate-700";return T.jsx("div",{style:e,className:`w-full h-full rounded-full border-4 ${s} relative flex items-center justify-center ${t}`,children:T.jsx("div",{className:`w-[70%] h-[70%] rounded-full border-2 ${o} opacity-30`})})},op=({id:i,color:e,isDraggable:t=!1,style:s})=>{const{attributes:o,listeners:c,setNodeRef:u,isDragging:m}=p0({id:i,disabled:!t}),g={opacity:m?0:1,touchAction:"none",...s};return T.jsx("div",{ref:u,style:g,...c,...o,className:"w-full aspect-square relative cursor-grab active:cursor-grabbing",children:T.jsx(Zw,{color:e})})},IM=({index:i,count:e,isTop:t,isHighlighted:s,playerColor:o,canDragFrom:c,isHitTarget:u})=>{const{setNodeRef:m,isOver:g}=rd({id:i.toString()}),p=i%2===1,v=g||s?"bg-indigo-500/20 ring-2 ring-indigo-400/50":"",E=[],w=Math.abs(e),C=e>0?"white":"black";for(let M=0;M<w;M++){const z=M===w-1,D=c&&z&&C===o;E.push(T.jsx("div",{className:"w-[80%] max-w-[40px] -my-1 z-10 relative",children:T.jsx(op,{id:`checker-${i}-${M}`,color:C,isDraggable:D})},`${i}-${M}`))}return T.jsxs("div",{ref:m,className:`relative flex-1 h-full flex ${t?"flex-col items-center justify-start":"flex-col-reverse items-center justify-start"} ${v} transition-colors rounded-sm`,children:[T.jsx("div",{className:"absolute inset-0 pointer-events-none w-full h-full opacity-60",style:{clipPath:t?"polygon(0 0, 50% 100%, 100% 0)":"polygon(0 100%, 50% 0, 100% 100%)",backgroundColor:p?"#334155":"#818cf8",opacity:p?.4:.15}}),T.jsx("div",{className:`z-10 w-full h-full flex ${t?"flex-col pt-2":"flex-col-reverse pb-2"} items-center`,children:E}),u&&T.jsxs("div",{className:`absolute ${t?"top-6":"bottom-6"} left-1/2 -translate-x-1/2 z-50 pointer-events-none`,children:[T.jsx("style",{children:`
                        @keyframes shatter-left {
                            0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
                            100% { transform: translate(-20px, -10px) rotate(-15deg); opacity: 0; }
                        }
                        @keyframes shatter-right {
                            0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
                            100% { transform: translate(20px, -10px) rotate(15deg); opacity: 0; }
                        }
                        @keyframes impact-flash {
                            0% { transform: scale(0.5); opacity: 0; }
                            10% { transform: scale(1.2); opacity: 1; }
                            100% { transform: scale(0); opacity: 0; }
                        }
                        `}),T.jsx("div",{className:"relative w-10 h-10 md:w-12 md:h-12",children:(()=>{const M=e>0?"black":"white",z=M==="white"?"bg-slate-200 border-slate-300 shadow-sm":"bg-slate-900 border-slate-700 shadow-xl",D=M==="white"?"border-slate-300":"border-slate-700";return T.jsxs(T.Fragment,{children:[T.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${z} overflow-hidden`,style:{clipPath:"polygon(0% 0%, 55% 0%, 45% 100%, 0% 100%)",animation:"shatter-left 0.6s ease-out forwards"},children:T.jsx("div",{className:`absolute inset-2 rounded-full border-2 ${D} opacity-30`})}),T.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${z} overflow-hidden`,style:{clipPath:"polygon(55% 0%, 100% 0%, 100% 100%, 45% 100%)",animation:"shatter-right 0.6s ease-out forwards"},children:T.jsx("div",{className:`absolute inset-2 rounded-full border-2 ${D} opacity-30`})}),T.jsx("div",{className:"absolute inset-0 bg-white rounded-full mix-blend-overlay",style:{animation:"impact-flash 0.4s ease-out forwards"}})]})})()})]}),T.jsx("span",{className:`absolute ${t?"top-0":"bottom-0"} text-[8px] text-slate-600 font-mono opacity-50`,children:i+1})]})},DM=({gameState:i,playerColor:e,onMove:t,validMoves:s})=>{const{board:o,bar:c,off:u,turn:m}=i,[g,p]=U.useState(null),[v,E]=U.useState([]),[w,C]=U.useState(null),M=l0(Ga(f0,{activationConstraint:{distance:8}}),Ga(d0,{activationConstraint:{delay:100,tolerance:5}})),z=Y=>{const{active:ce}=Y,ie=ce.id;let J=-1;if(ie.startsWith("bar"))J="bar";else if(ie.startsWith("checker-")){const N=ie.split("-");J=parseInt(N[1])}else J=parseInt(ie);p(ie);const R=s.filter(N=>J==="bar"?N.from==="bar":N.from===J).map(N=>N.to==="off"?99:N.to);E(R)},D=at.useRef(i.board);at.useEffect(()=>{const Y=D.current,ce=i.board;for(let ie=0;ie<24;ie++){const J=Y[ie],x=ce[ie];J===-1&&x>=1&&(C(ie),setTimeout(()=>C(null),800)),J===1&&x<=-1&&(C(ie),setTimeout(()=>C(null),800))}D.current=i.board},[i.board]);const B=Y=>{const{active:ce,over:ie}=Y;if(p(null),E([]),!ie)return;const J=ce.id;let x=-1;if(J.startsWith("bar"))x="bar";else if(J.startsWith("checker-")){const V=J.split("-");x=parseInt(V[1])}else x=parseInt(J);let R=-1;ie.id==="off"?R="off":R=parseInt(ie.id);const N=s.find(V=>V.from===x&&V.to===R);if(N){const V=fu(i,N);t(V)}},ee=(Y,ce,ie)=>{const J=[];if(Y<ce)for(let x=Y;x<=ce;x++)J.push(x);else for(let x=Y;x>=ce;x--)J.push(x);return T.jsx("div",{className:`flex-1 flex ${ie?"border-b-2":"border-t-2"} border-slate-700/30`,children:J.map(x=>T.jsx(IM,{index:x,count:o[x],isTop:ie,isHighlighted:v.includes(x),playerColor:e,canDragFrom:e===m&&(e==="white"&&c.white===0||e==="black"&&c.black===0),isHitTarget:w===x},x))})};return T.jsxs(g0,{sensors:M,onDragStart:z,onDragEnd:B,children:[T.jsxs("div",{className:"flex flex-col md:flex-row w-full max-w-full md:max-w-7xl mx-auto gap-2 md:gap-4 items-stretch p-1 md:p-4",children:[T.jsxs("div",{className:"relative flex-1 aspect-square md:aspect-[4/3] bg-slate-800/80 rounded-xl border-4 md:border-[12px] border-slate-900 shadow-2xl flex flex-col overflow-hidden",children:[T.jsxs("div",{className:"flex-1 flex",children:[ee(e==="white"?11:12,e==="white"?6:17,!0),T.jsxs("div",{className:"w-12 md:w-20 bg-slate-900/50 border-x-4 border-slate-900 flex flex-col items-center justify-center gap-1 py-2",children:[Array.from({length:c.white}).map((Y,ce)=>T.jsx("div",{className:"w-10 md:w-12",children:T.jsx(op,{id:`bar-white-${ce}`,color:"white",isDraggable:e==="white"&&m==="white"&&ce===c.white-1})},`bar-w-${ce}`)),Array.from({length:c.black}).map((Y,ce)=>T.jsx("div",{className:"w-10 md:w-12",children:T.jsx(op,{id:`bar-black-${ce}`,color:"black",isDraggable:e==="black"&&m==="black"&&ce===c.black-1})},`bar-b-${ce}`))]}),ee(e==="white"?5:18,e==="white"?0:23,!0)]}),T.jsxs("div",{className:"flex-1 flex",children:[ee(e==="white"?12:11,e==="white"?17:6,!1),T.jsx("div",{className:"w-12 md:w-20 bg-slate-900/50 border-x-4 border-slate-900 flex flex-col-reverse items-center justify-start gap-1 py-2"}),ee(e==="white"?18:5,e==="white"?23:0,!1)]}),T.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center z-50",children:T.jsx("div",{className:"flex gap-3",children:i.movesLeft.map((Y,ce)=>T.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 rounded-lg shadow-xl flex items-center justify-center text-lg md:text-xl font-black border-2 animate-in zoom-in spin-in-3 duration-300 ${m==="white"?"bg-white text-slate-900 border-slate-200":"bg-slate-900 text-white border-slate-700"}`,children:Y},`${m}-${ce}-${Y}`))})})]}),T.jsxs("div",{className:"w-full h-20 md:w-32 md:h-auto bg-slate-900/40 rounded-xl border-4 border-slate-800 flex flex-row md:flex-col relative overflow-hidden shrink-0",children:[T.jsx("div",{className:"absolute inset-y-0 left-1/2 -translate-x-1/2 w-[2px] bg-slate-800/50 hidden md:block"}),T.jsx("div",{className:"absolute inset-x-0 top-1/2 -translate-y-1/2 h-[2px] bg-slate-800/50 md:hidden"}),T.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 md:-rotate-90 text-slate-700 font-bold text-xs md:text-sm tracking-[0.5em] pointer-events-none whitespace-nowrap opacity-50 z-0",children:"COLLECT"}),T.jsx("div",{className:"flex-1 w-full p-2 flex flex-col gap-1 z-10 border-r md:border-r-0 md:border-b border-slate-800/50",children:T.jsx(Y1,{playerColor:"white",count:u.white,isTop:!0})}),T.jsx("div",{className:"flex-1 w-full p-2 flex flex-col-reverse gap-1 z-10",children:T.jsx(Y1,{playerColor:"black",count:u.black,isTop:!1})}),T.jsx("div",{className:`absolute inset-0 z-20 ${g?"pointer-events-auto":"pointer-events-none"}`,children:T.jsx(OM,{isHighlighted:v.includes(99)})})]})]}),T.jsx(pM,{children:g?T.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 cursor-grabbing",children:T.jsx(Zw,{color:(function(){if(g.startsWith("bar-white"))return"white";if(g.startsWith("bar-black"))return"black";if(g.startsWith("checker-")){const Y=g.split("-"),ce=parseInt(Y[1]);return o[ce]>0?"white":"black"}return"white"})()})}):null})]})},OM=({isHighlighted:i})=>{const{setNodeRef:e,isOver:t}=rd({id:"off"}),s=t||i;return T.jsx("div",{ref:e,className:`w-full h-full flex items-center justify-center transition-all duration-300 ${s?"bg-indigo-500/30 backdrop-blur-sm border-2 border-dashed border-indigo-400":""}`,children:s&&T.jsx("div",{className:"text-indigo-200 font-bold text-xs rotate-90 whitespace-nowrap animate-pulse",children:"COLLECT"})})},Y1=({playerColor:i,count:e,isTop:t})=>T.jsxs("div",{className:`w-full flex ${t?"flex-col":"flex-col-reverse"} gap-[2px] transition-colors rounded-lg p-1`,children:[e>0&&T.jsx("div",{className:`text-[10px] text-center mb-1 font-bold ${i==="white"?"text-slate-400":"text-slate-600"}`,children:e}),Array.from({length:Math.min(e,15)}).map((s,o)=>T.jsx("div",{className:`h-2 w-full rounded-sm opacity-80 ${i==="white"?"bg-slate-200 shadow-sm":"bg-slate-900 border border-slate-700 shadow-sm"}`},o))]}),MM=(i,e="Normal")=>{const t=ap(i);if(t.length===0)return null;if(e==="Easy"){const c=Math.floor(Math.random()*t.length);return t[c]}let s=t[0],o=-1/0;for(const c of t){const u=kM(i,c,e);u>o&&(o=u,s=c)}return s},kM=(i,e,t)=>{let s=0;e.isHit&&(s+=100),e.to==="off"&&(s+=200);const o=fu({...i},e),c=i.turn==="white";if(typeof e.to=="number"){const u=o.board[e.to];c&&u===2&&(s+=50),!c&&u===-2&&(s+=50)}if(typeof e.to=="number"){const u=o.board[e.to];Math.abs(u)===1&&(s-=30)}if(typeof e.from=="number"){const u=o.board[e.from];Math.abs(u)===1&&(s-=40)}return t==="Hard"&&typeof e.to=="number"&&(c?e.to>=18:e.to<=5)&&Math.abs(o.board[e.to])>1&&(s+=30),s+=Math.random()*5,s},VM=({roomId:i="",mode:e="online",aiDifficulty:t="Normal",onExit:s})=>{const o=Jw(e==="online"?i:null),[c,u]=U.useState(()=>Oc()),[m,g]=U.useState(null),p=e==="local",v=at.useMemo(()=>p?c:m||(o.room?{...o.room,validMoves:[]}:null),[p,c,o.room,m]);U.useEffect(()=>{if(!o.room||!m)return;const ie=o.room.turn===m.turn,J=JSON.stringify(o.room.board)===JSON.stringify(m.board),x=o.room.movesLeft.length===m.movesLeft.length;ie&&J&&x?g(null):ie||g(null)},[o.room,m]);const E=at.useMemo(()=>v?ap(v):[],[v]),w=p?v?.turn==="white"?"local-white":"local-black":o.userId,C=p||o.room?.whitePlayer===w?"white":"black",M=C===v?.turn;U.useEffect(()=>{!p&&i&&o.joinRoom&&o.joinRoom(i)},[i,p]);const z=()=>{navigator.clipboard.writeText(i),alert("Room ID copied to clipboard!")},D=o.room?.whitePlayer===w||p,B=o.room?.blackPlayer===w,ee=!!v?.winner,Y=ie=>{let J={...ie};J.movesLeft.length===0?(J.turn=J.turn==="white"?"black":"white",J.dice=vc(),J.movesLeft=[...J.dice]):ap(J).length===0&&(J.turn=J.turn==="white"?"black":"white",J.dice=vc(),J.movesLeft=[...J.dice]),p?u(J):(g(J),o.updateGameState(J))};if(U.useEffect(()=>{if(v&&v.movesLeft.length>0&&E.length===0&&!v.winner){const ie=setTimeout(()=>{let J={...v};J.turn=J.turn==="white"?"black":"white",J.dice=vc(),J.movesLeft=[...J.dice],p?u(J):(g(J),o.updateGameState(J))},1500);return()=>clearTimeout(ie)}},[v?.movesLeft,E.length,v?.winner,v?.turn,p,v]),U.useEffect(()=>{if(v&&p&&v.turn==="black"&&!v.winner){const ie=setTimeout(()=>{const J=MM(v,t);if(J){const x=fu(v,J);Y(x)}else{let x={...v};x.turn="white",x.dice=vc(),x.movesLeft=[...x.dice],u(x)}},800);return()=>clearTimeout(ie)}},[v,p,t]),!p&&o.loading)return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-6 animate-pulse",children:[T.jsx("div",{className:"relative shadow-2xl shadow-indigo-500/20 rounded-full p-4",children:T.jsx(tE,{className:"w-16 h-16 text-indigo-500 animate-spin"})}),T.jsxs("div",{className:"text-center space-y-2",children:[T.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest",children:"Entering Arena"}),T.jsx("p",{className:"text-slate-500 font-medium",children:"Synchronizing with the global lattice..."})]})]});if(!v)return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[T.jsxs("div",{className:"text-center space-y-4",children:[T.jsx("h2",{className:"text-5xl font-black text-white italic",children:"Room Dissolved"}),T.jsx("p",{className:"text-slate-400 text-lg",children:"The arena you seek no longer exists or the link is expired."})]}),T.jsx("button",{onClick:s,className:"btn-premium px-10 py-4 text-xl",children:"Return to Lobby"})]});const ce=v.winner?`${v.winner==="white"?"White":"Black"} Wins!`:M?"Your Turn":"Waiting...";return T.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center gap-8 lg:gap-12 py-6 lg:py-10 w-full animate-in fade-in duration-700",children:[T.jsxs("header",{className:"w-full max-w-6xl flex items-center justify-between px-4 lg:px-6",children:[T.jsxs("button",{onClick:()=>{!p&&o.leaveRoom&&o.leaveRoom(),s()},className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all font-bold uppercase tracking-widest text-xs",children:[T.jsx("div",{className:"p-2 rounded-xl bg-slate-900 border border-slate-800 group-hover:border-slate-700 group-hover:-translate-x-1 transition-transform",children:T.jsx(_c,{size:18})}),"Back"]}),!p&&T.jsx("div",{className:"flex items-center gap-4",children:T.jsxs("div",{className:"liquid-glass px-6 py-3 flex items-center gap-6",children:[T.jsxs("div",{className:"flex flex-col gap-0.5",children:[T.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-slate-500 font-black",children:"Arena ID"}),T.jsx("code",{className:"text-indigo-300 font-mono font-bold",children:i})]}),T.jsx("div",{className:"h-8 w-px bg-slate-800"}),T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("button",{onClick:z,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:T.jsx(W1,{size:18})}),T.jsx("button",{className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:T.jsx(nE,{size:18})})]})]})}),p&&T.jsx("div",{className:"px-6 py-3 liquid-glass text-indigo-300 font-bold uppercase tracking-widest text-xs",children:"Single Player Mode"})]}),T.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-6 lg:gap-16 w-full max-w-7xl px-0 lg:px-6",children:[T.jsxs("div",{className:"relative group w-full flex justify-center max-w-full overflow-visible",children:[T.jsx("div",{className:"absolute -inset-4 bg-linear-to-r from-indigo-500 to-pink-500 rounded-[2.5rem] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"}),T.jsx(DM,{gameState:v,playerColor:C,onMove:Y,onRollDice:()=>{},validMoves:E}),ee&&T.jsx(LM,{winner:v.winner,playerColor:C,onRematch:()=>{const ie=Oc();g(null),p?u(ie):o.resetGame()},onExit:()=>{!p&&o.leaveRoom&&o.leaveRoom(),s()}})]}),T.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-3 lg:gap-8 mt-0 lg:mt-0",children:[T.jsxs("div",{className:"liquid-glass p-3 lg:p-8 space-y-3 lg:space-y-8 border-l-4 border-l-indigo-500",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:"Game Status"}),T.jsxs("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-2 ${v.winner?"bg-indigo-500/10 text-indigo-300 border border-indigo-500/30":M?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-slate-800 text-slate-500"}`,children:[T.jsx("span",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${v.winner?"bg-indigo-400":"bg-green-500"}`}),p?v.turn==="white"?" White Turn":" Black Turn":ce]})]}),ee&&T.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/10 border border-indigo-500/30 text-indigo-100 text-sm lg:text-base font-bold",children:ce}),T.jsxs("div",{className:"space-y-2 lg:space-y-4",children:[T.jsx(PM,{gameState:v}),!p&&T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex items-center gap-2 lg:gap-4 p-2 lg:p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[T.jsx("div",{className:`w-8 h-8 lg:w-12 lg:h-12 rounded-xl flex items-center justify-center text-lg lg:text-xl font-bold ${D?"bg-white text-slate-950":"bg-slate-800 text-slate-400"}`,children:"W"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("div",{className:"text-xs lg:text-sm font-bold text-white uppercase tracking-wide",children:"White Player"}),T.jsx("div",{className:"text-[10px] lg:text-xs text-slate-500 font-medium",children:o.room?.whitePlayer===w?"Connected (You)":o.room?.whitePlayer?"Opponent Ready":"Awaiting Entry..."})]})]}),T.jsxs("div",{className:"flex items-center gap-2 lg:gap-4 p-2 lg:p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[T.jsx("div",{className:`w-8 h-8 lg:w-12 lg:h-12 rounded-xl flex items-center justify-center text-lg lg:text-xl font-bold ${B?"bg-indigo-500 text-white":"bg-slate-800 text-slate-400"}`,children:"B"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("div",{className:"text-xs lg:text-sm font-bold text-white uppercase tracking-wide",children:"Black Player"}),T.jsx("div",{className:"text-[10px] lg:text-xs text-slate-500 font-medium",children:o.room?.blackPlayer===w?"Connected (You)":o.room?.blackPlayer?"Opponent Ready":"Awaiting Entry..."})]})]})]})]}),T.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 lg:gap-3",children:[T.jsxs("button",{disabled:ee,onClick:()=>{if(p){const ie={...v};ie.winner=C==="white"?"black":"white",u(ie)}else o.resignGame(C)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 lg:px-4 lg:py-3 rounded-xl border border-slate-800 bg-slate-900/60 text-slate-200 text-sm lg:text-base font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:border-red-500/50 hover:text-red-200 transition",children:[T.jsx(eE,{size:16,className:"lg:w-[18px] lg:h-[18px]"}),"Resign"]}),T.jsxs("button",{disabled:!ee&&!p,onClick:()=>{const ie=Oc();g(null),p?u(ie):o.resetGame()},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 lg:px-4 lg:py-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 text-indigo-100 text-sm lg:text-base font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:bg-indigo-500/20 transition",children:[T.jsx(Nf,{size:16,className:"lg:w-[18px] lg:h-[18px]"}),"Rematch"]})]})]}),!p&&T.jsxs("div",{className:"hidden lg:grid grid-cols-2 gap-4",children:[T.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[T.jsx(cp,{size:20,className:"mx-auto text-slate-600"}),T.jsx("div",{className:"text-xl font-black text-white italic",children:o.room?.whitePlayer&&o.room?.blackPlayer?"2/2":o.room?.whitePlayer||o.room?.blackPlayer?"1/2":"0/2"}),T.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Connected"})]}),T.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[T.jsx(iE,{size:20,className:"mx-auto text-indigo-400"}),T.jsx("div",{className:"text-xl font-black text-white italic",children:"24ms"}),T.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Latency"})]})]})]})]}),T.jsx("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10",children:"Transparent Strategy Arena"})]})},PM=({gameState:i})=>{const[e,t]=U.useState(0),[s,o]=U.useState(0),[c,u]=U.useState(0),m=at.useRef(i?.winner);U.useEffect(()=>{m.current&&!i?.winner&&(t(0),o(0),u(0)),m.current=i?.winner},[i?.winner]),U.useEffect(()=>{if(!i||i.winner)return;const p=window.setInterval(()=>{t(v=>v+1),o(v=>v+(i.turn==="white"?1:0)),u(v=>v+(i.turn==="black"?1:0))},1e3);return()=>window.clearInterval(p)},[i?.turn,i?.winner]);const g=p=>{const v=Math.floor(p/60).toString().padStart(2,"0"),E=(p%60).toString().padStart(2,"0");return`${v}:${E}`};return T.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-3 p-2 md:p-4 rounded-2xl bg-slate-900/60 border border-slate-800/80 text-[10px] lg:text-xs font-bold uppercase tracking-widest",children:[T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"Time"}),T.jsx("div",{className:"text-white text-base",children:g(e)})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"White"}),T.jsx("div",{className:"text-emerald-300 text-base",children:g(s)})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("div",{className:"text-slate-500",children:"Black"}),T.jsx("div",{className:"text-sky-300 text-base",children:g(c)})]})]})},LM=({winner:i,playerColor:e,onRematch:t,onExit:s})=>{const o=i===e;return T.jsxs("div",{className:"absolute inset-0 z-50 rounded-[2rem] bg-slate-900/80 backdrop-blur-md flex flex-col items-center justify-center p-6 text-center animate-in fade-in zoom-in duration-500",children:[T.jsx("div",{className:`p-6 rounded-full mb-6 ${o?"bg-amber-500/20 text-amber-400 shadow-[0_0_50px_-12px_rgba(245,158,11,0.5)]":"bg-red-500/20 text-red-400 shadow-[0_0_50px_-12px_rgba(239,68,68,0.5)]"}`,children:o?T.jsx(Cg,{size:64,className:"animate-bounce"}):T.jsx(ex,{size:64})}),T.jsx("h2",{className:`text-4xl md:text-5xl font-black uppercase tracking-widest mb-2 ${o?"text-transparent bg-clip-text bg-linear-to-b from-amber-300 to-amber-600":"text-slate-200"}`,children:o?"Victory!":"Defeat"}),T.jsx("p",{className:"text-slate-400 font-bold text-lg mb-8 uppercase tracking-widest",children:o?"You conquered the board.":"Better luck next time."}),T.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[T.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center gap-3 px-6 py-4 rounded-xl bg-indigo-500 hover:bg-indigo-400 text-white font-black uppercase tracking-widest transition-all hover:scale-105 active:scale-95 shadow-lg shadow-indigo-500/30",children:[T.jsx(Nf,{size:20}),"Rematch"]}),T.jsxs("button",{onClick:s,className:"w-full flex items-center justify-center gap-3 px-6 py-4 rounded-xl bg-slate-800 hover:bg-slate-700 text-slate-300 font-bold uppercase tracking-widest transition-all hover:scale-105 active:scale-95",children:[T.jsx(rx,{size:20}),"Return to Lobby"]})]})]})},jM=["red","black","blue","yellow"],UM=()=>{const i=[];let e=1;return jM.forEach(t=>{for(let s=1;s<=13;s++)i.push({id:`t-${e++}`,value:s,color:t}),i.push({id:`t-${e++}`,value:s,color:t})}),i.push({id:`t-${e++}`,value:0,color:null,isFakeOkey:!0}),i.push({id:`t-${e++}`,value:0,color:null,isFakeOkey:!0}),i},zM=i=>{const e=[...i];for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e},BM=i=>i.isFakeOkey||!i.color?{id:"virtual-okey",value:1,color:"red"}:{id:"virtual-okey",value:i.value===13?1:i.value+1,color:i.color},qM=()=>{let i=zM(UM());const e=i.pop(),t=BM(e),s=Array(4).fill(null).map(()=>({tiles:[]}));for(let o=0;o<15;o++)s[0].tiles.push(i.pop());for(let o=1;o<4;o++)for(let c=0;c<14;c++)s[o].tiles.push(i.pop());return s[0].tiles.sort((o,c)=>o.color===c.color?o.value-c.value:(o.color||"z").localeCompare(c.color||"z")),{phase:"playing",players:s,centerStack:i,discardPiles:[[],[],[],[]],indicatorTile:e,okeyTile:t,currentTurn:0,winner:null}},Ww=i=>{const[e,t]=U.useState(null),[s,o]=U.useState(!1);U.useEffect(()=>{if(!i)try{const p=qM();console.log("Okey Game Initialized",p),t(p)}catch(p){console.error("Failed to initialize Okey game",p)}},[i]);const c=U.useCallback(()=>{t(p=>{if(!p)return null;if(p.currentTurn!==0)return p;if(p.players[0].tiles.length>=15)return console.log("Draw blocked: Player already has 15 tiles. Must discard first."),p;const v=[...p.centerStack],E=v.pop();if(!E)return p;const w=[...p.players],C=[...w[0].tiles,E];return w[0]={...w[0],tiles:C},{...p,players:w,centerStack:v}})},[]),u=U.useCallback((p,v)=>{t(E=>{if(!E)return null;const w=[...E.players],C=[...w[0].tiles],[M]=C.splice(p,1);return C.splice(v,0,M),w[0]={...w[0],tiles:C},{...E,players:w}})},[]);return{gameState:e,moveTileInRack:u,drawFromCenter:c,createRoom:async()=>(o(!0),await new Promise(p=>setTimeout(p,1e3)),o(!1),"okey-room-"+Math.random().toString(36).substr(2,6)),joinRoom:async p=>{o(!0),await new Promise(v=>setTimeout(v,1e3)),o(!1)},isAuthLoading:s}};function eS(i,e,t){const s=i.slice();return s.splice(t<0?s.length+t:t,0,s.splice(e,1)[0]),s}function HM(i,e){return i.reduce((t,s,o)=>{const c=e.get(s);return c&&(t[o]=c),t},Array(i.length))}function Uh(i){return i!==null&&i>=0}function FM(i,e){if(i===e)return!0;if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}function GM(i){return typeof i=="boolean"?{draggable:i,droppable:i}:i}const y0=i=>{let{rects:e,activeIndex:t,overIndex:s,index:o}=i;const c=eS(e,s,t),u=e[o],m=c[o];return!m||!u?null:{x:m.left-u.left,y:m.top-u.top,scaleX:m.width/u.width,scaleY:m.height/u.height}},tS="Sortable",nS=at.createContext({activeIndex:-1,containerId:tS,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:y0,disabled:{draggable:!1,droppable:!1}});function $M(i){let{children:e,id:t,items:s,strategy:o=y0,disabled:c=!1}=i;const{active:u,dragOverlay:m,droppableRects:g,over:p,measureDroppableContainers:v}=Yw(),E=uu(tS,t),w=m.rect!==null,C=U.useMemo(()=>s.map(J=>typeof J=="object"&&"id"in J?J.id:J),[s]),M=u!=null,z=u?C.indexOf(u.id):-1,D=p?C.indexOf(p.id):-1,B=U.useRef(C),ee=!FM(C,B.current),Y=D!==-1&&z===-1||ee,ce=GM(c);sr(()=>{ee&&M&&v(C)},[ee,C,M,v]),U.useEffect(()=>{B.current=C},[C]);const ie=U.useMemo(()=>({activeIndex:z,containerId:E,disabled:ce,disableTransforms:Y,items:C,overIndex:D,useDragOverlay:w,sortedRects:HM(C,g),strategy:o}),[z,E,ce.draggable,ce.droppable,Y,C,D,g,w,o]);return at.createElement(nS.Provider,{value:ie},e)}const KM=i=>{let{id:e,items:t,activeIndex:s,overIndex:o}=i;return eS(t,s,o).indexOf(e)},QM=i=>{let{containerId:e,isSorting:t,wasDragging:s,index:o,items:c,newIndex:u,previousItems:m,previousContainerId:g,transition:p}=i;return!p||!s||m!==c&&o===u?!1:t?!0:u!==o&&e===g},YM={duration:200,easing:"ease"},iS="transform",XM=rs.Transition.toString({property:iS,duration:0,easing:"linear"}),JM={roleDescription:"sortable"};function ZM(i){let{disabled:e,index:t,node:s,rect:o}=i;const[c,u]=U.useState(null),m=U.useRef(t);return sr(()=>{if(!e&&t!==m.current&&s.current){const g=o.current;if(g){const p=yl(s.current,{ignoreTransform:!0}),v={x:g.left-p.left,y:g.top-p.top,scaleX:g.width/p.width,scaleY:g.height/p.height};(v.x||v.y)&&u(v)}}t!==m.current&&(m.current=t)},[e,t,s,o]),U.useEffect(()=>{c&&u(null)},[c]),c}function WM(i){let{animateLayoutChanges:e=QM,attributes:t,disabled:s,data:o,getNewIndex:c=KM,id:u,strategy:m,resizeObserverConfig:g,transition:p=YM}=i;const{items:v,containerId:E,activeIndex:w,disabled:C,disableTransforms:M,sortedRects:z,overIndex:D,useDragOverlay:B,strategy:ee}=U.useContext(nS),Y=e3(s,C),ce=v.indexOf(u),ie=U.useMemo(()=>({sortable:{containerId:E,index:ce,items:v},...o}),[E,o,ce,v]),J=U.useMemo(()=>v.slice(v.indexOf(u)),[v,u]),{rect:x,node:R,isOver:N,setNodeRef:V}=rd({id:u,data:ie,disabled:Y.droppable,resizeObserverConfig:{updateMeasurementsFor:J,...g}}),{active:O,activatorEvent:j,activeNodeRect:I,attributes:Ue,setNodeRef:ut,listeners:ne,isDragging:he,over:_e,setActivatorNodeRef:De,transform:je}=p0({id:u,data:ie,attributes:{...JM,...t},disabled:Y.draggable}),P=G4(V,ut),re=!!O,me=re&&!M&&Uh(w)&&Uh(D),fe=!B&&he,pe=fe&&me?je:null,Pe=me?pe??(m??ee)({rects:z,activeNodeRect:I,activeIndex:w,overIndex:D,index:ce}):null,dt=Uh(w)&&Uh(D)?c({id:u,items:v,activeIndex:w,overIndex:D}):ce,Ge=O?.id,Fe=U.useRef({activeId:Ge,items:v,newIndex:dt,containerId:E}),ri=v!==Fe.current.items,un=e({active:O,containerId:E,isDragging:he,isSorting:re,id:u,index:ce,items:v,newIndex:Fe.current.newIndex,previousItems:Fe.current.items,previousContainerId:Fe.current.containerId,transition:p,wasDragging:Fe.current.activeId!=null}),Fn=ZM({disabled:!un,index:ce,node:R,rect:x});return U.useEffect(()=>{re&&Fe.current.newIndex!==dt&&(Fe.current.newIndex=dt),E!==Fe.current.containerId&&(Fe.current.containerId=E),v!==Fe.current.items&&(Fe.current.items=v)},[re,dt,E,v]),U.useEffect(()=>{if(Ge===Fe.current.activeId)return;if(Ge!=null&&Fe.current.activeId==null){Fe.current.activeId=Ge;return}const Gn=setTimeout(()=>{Fe.current.activeId=Ge},50);return()=>clearTimeout(Gn)},[Ge]),{active:O,activeIndex:w,attributes:Ue,data:ie,rect:x,index:ce,newIndex:dt,items:v,isOver:N,isSorting:re,isDragging:he,listeners:ne,node:R,overIndex:D,over:_e,setNodeRef:P,setActivatorNodeRef:De,setDroppableNodeRef:V,setDraggableNodeRef:ut,transform:Fn??Pe,transition:Ut()};function Ut(){if(Fn||ri&&Fe.current.newIndex===ce)return XM;if(!(fe&&!Wf(j)||!p)&&(re||un))return rs.Transition.toString({...p,property:iS})}}function e3(i,e){var t,s;return typeof i=="boolean"?{draggable:i,droppable:!1}:{draggable:(t=i?.draggable)!=null?t:e.draggable,droppable:(s=i?.droppable)!=null?s:e.droppable}}function Cf(i){if(!i)return!1;const e=i.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const t3=[it.Down,it.Right,it.Up,it.Left],n3=(i,e)=>{let{context:{active:t,collisionRect:s,droppableRects:o,droppableContainers:c,over:u,scrollableAncestors:m}}=e;if(t3.includes(i.code)){if(i.preventDefault(),!t||!s)return;const g=[];c.getEnabled().forEach(E=>{if(!E||E!=null&&E.disabled)return;const w=o.get(E.id);if(w)switch(i.code){case it.Down:s.top<w.top&&g.push(E);break;case it.Up:s.top>w.top&&g.push(E);break;case it.Left:s.left>w.left&&g.push(E);break;case it.Right:s.left<w.left&&g.push(E);break}});const p=lO({collisionRect:s,droppableRects:o,droppableContainers:g});let v=Mw(p,"id");if(v===u?.id&&p.length>1&&(v=p[1].id),v!=null){const E=c.get(t.id),w=c.get(v),C=w?o.get(w.id):null,M=w?.node.current;if(M&&C&&E&&w){const D=ed(M).some((J,x)=>m[x]!==J),B=rS(E,w),ee=i3(E,w),Y=D||!B?{x:0,y:0}:{x:ee?s.width-C.width:0,y:ee?s.height-C.height:0},ce={x:C.left,y:C.top};return Y.x&&Y.y?ce:$c(ce,Y)}}}};function rS(i,e){return!Cf(i)||!Cf(e)?!1:i.data.current.sortable.containerId===e.data.current.sortable.containerId}function i3(i,e){return!Cf(i)||!Cf(e)||!rS(i,e)?!1:i.data.current.sortable.index<e.data.current.sortable.index}const sS=({tile:i,isJoker:e,className:t="",dragging:s=!1,size:o="md"})=>{const c=p=>{switch(p){case"red":return"text-[#d32f2f]";case"black":return"text-[#212121]";case"blue":return"text-[#1976d2]";case"yellow":return"text-[#ffa000]";default:return"text-slate-400"}},u=o==="sm"?"w-8 h-10":o==="lg"?"w-14 h-20":"w-12 h-16",m=o==="sm"?"text-2xl":o==="lg"?"text-5xl":"text-4xl",g=()=>i.isFakeOkey?T.jsx("div",{className:"flex flex-col items-center justify-center",children:T.jsx("span",{className:`${m} text-emerald-600`,children:""})}):T.jsxs("div",{className:"flex flex-col items-center justify-center leading-none mt-1",children:[T.jsx("span",{className:`${m} font-black ${c(i.color)} drop-shadow-[0_1px_1px_rgba(255,255,255,0.8)]`,children:i.value}),T.jsx("div",{className:`w-1.5 h-1.5 rounded-full mt-1 ${i.color==="red"?"bg-red-500":i.color==="blue"?"bg-blue-500":i.color==="yellow"?"bg-yellow-500":"bg-black"} opacity-40`})]});return T.jsxs("div",{className:`
        relative ${u}
        bg-[#f5f5f5]
        rounded-sm
        shadow-[0_1px_0_#fff_inset,0_2px_4px_rgba(0,0,0,0.4),0_1px_0_rgba(0,0,0,0.1)]
        flex items-center justify-center
        select-none
        border border-[#ddd]
        ${s?"opacity-50 cursor-grabbing scale-105":"cursor-grab hover:-translate-y-1"}
        ${e?"ring-2 ring-emerald-400 ring-offset-1":""}
        transition-all duration-200
        ${t}
      `,children:[T.jsx("div",{className:"absolute inset-x-0 bottom-0 h-1 bg-[#ccc] rounded-b-sm"}),T.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center w-full h-full pb-1",children:g()})]})},X1=({tile:i,isJoker:e})=>{const{attributes:t,listeners:s,setNodeRef:o,transform:c,transition:u,isDragging:m}=WM({id:i.id}),g={transform:rs.Translate.toString(c),transition:u,zIndex:m?100:1,touchAction:"none"};return T.jsx("div",{ref:o,style:g,...t,...s,className:"relative cursor-grab active:cursor-grabbing",children:T.jsx(sS,{tile:i,isJoker:e,dragging:m})})},zh=({tiles:i,isCurrentPlayer:e,okeyTile:t,onMoveTile:s})=>{const o=l0(Ga(td),Ga(u0,{coordinateGetter:n3})),c=m=>{const{active:g,over:p}=m;if(p&&g.id!==p.id){const v=i.findIndex(w=>w.id===g.id),E=i.findIndex(w=>w.id===p.id);s&&v!==-1&&E!==-1&&s(v,E)}};if(!e)return T.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[T.jsx("div",{className:"flex justify-center items-center gap-1 bg-[#2a1b0e] p-2 rounded border border-[#3d2a1a] shadow-2xl",children:Array.from({length:Math.min(i.length,11)}).map((m,g)=>T.jsx("div",{className:"w-6 h-8 bg-[#f5f5f5] rounded-sm transform -skew-x-2 border-b-2 border-slate-400 shadow-sm"},g))}),T.jsx("div",{className:"flex justify-center items-center gap-1 bg-[#2a1b0e] p-2 rounded border border-[#3d2a1a] shadow-2xl -mt-1 scale-95 opacity-80",children:Array.from({length:Math.max(0,i.length-11)}).map((m,g)=>T.jsx("div",{className:"w-6 h-8 bg-[#f5f5f5] rounded-sm transform -skew-x-1 border-b-2 border-slate-400 shadow-sm"},g))})]});const u=11;return T.jsxs("div",{className:"relative w-full max-w-none mx-auto flex flex-col items-center select-none",children:[T.jsx(g0,{sensors:o,collisionDetection:oO,onDragEnd:c,children:T.jsxs("div",{className:"relative w-full bg-[#3d251e] rounded-t-lg shadow-[0_20px_40px_rgba(0,0,0,0.8)] border-t-2 border-[#5d4037] overflow-hidden p-6",children:[T.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/wood-pattern.png')] opacity-30 pointer-events-none mix-blend-overlay"}),T.jsxs($M,{items:i.map(m=>m.id),strategy:y0,children:[T.jsxs("div",{className:"relative flex flex-wrap justify-center gap-3 pb-8 min-h-[6.5rem] border-b-8 border-[#1a0f0a] shadow-[inset_0_-4px_8px_rgba(0,0,0,0.5)] z-10",children:[i.slice(0,u).map(m=>{const g=t&&m.color===t.color&&m.value===t.value;return T.jsx(X1,{tile:m,isJoker:g||!1},m.id)}),i.slice(0,u).length<u&&Array.from({length:u-i.slice(0,u).length}).map((m,g)=>T.jsx("div",{className:"w-12 h-16 border border-white/5 rounded-sm bg-black/10 shadow-inner"},`empty-top-${g}`))]}),T.jsx("div",{className:"w-full h-4 bg-[#1a0f0a]"}),T.jsxs("div",{className:"relative flex flex-wrap justify-center gap-3 pt-8 min-h-[6.5rem] z-10",children:[i.slice(u).map(m=>{const g=t&&m.color===t.color&&m.value===t.value;return T.jsx(X1,{tile:m,isJoker:g||!1},m.id)}),i.slice(u).length<u&&Array.from({length:u-i.slice(u).length}).map((m,g)=>T.jsx("div",{className:"w-12 h-16 border border-white/5 rounded-sm bg-black/10 shadow-inner"},`empty-bot-${g}`))]})]})]})}),T.jsx("div",{className:"absolute -left-6 top-4 bottom-0 w-6 bg-[#1a0f0a] rounded-tl-xl shadow-2xl border-l border-white/5"}),T.jsx("div",{className:"absolute -right-6 top-4 bottom-0 w-6 bg-[#1a0f0a] rounded-tr-xl shadow-2xl border-r border-white/5"})]})},r3=[{name:"Siz",color:"from-blue-400 to-indigo-600",avatar:"https://api.dicebear.com/7.x/lorelei/svg?seed=Felix&backgroundColor=b6e3f4"},{name:"Ahmet",color:"from-emerald-400 to-teal-600",avatar:"https://api.dicebear.com/7.x/lorelei/svg?seed=Cuddles&backgroundColor=c0aede"},{name:"Yaar",color:"from-amber-400 to-orange-600",avatar:"https://api.dicebear.com/7.x/lorelei/svg?seed=Shadow&backgroundColor=ffdfbf"},{name:"Asl",color:"from-rose-400 to-pink-600",avatar:"https://api.dicebear.com/7.x/lorelei/svg?seed=Fluffy&backgroundColor=ffd5dc"}],s3=({gameState:i,onDraw:e,onMoveTile:t})=>{if(!i)return T.jsx("div",{className:"w-full aspect-[4/3] flex items-center justify-center text-white text-2xl font-black font-sans",children:"ARENA HAZIRLANIYOR..."});const s=o=>{const c=i.currentTurn===o,u=r3[o];return T.jsxs("div",{className:`flex flex-col items-center gap-2 group transition-all duration-300 ${c?"scale-110":"opacity-80"}`,children:[T.jsx("div",{className:`
                    relative w-20 h-20 rounded-full border-4 shadow-xl overflow-hidden
                    ${c?"border-amber-400 animate-pulse ring-4 ring-amber-400/30":"border-white/20"}
                `,children:T.jsx("img",{src:u.avatar,alt:u.name,className:"w-full h-full object-cover bg-white"})}),T.jsx("div",{className:`px-4 py-1 rounded-full text-[10px] font-black tracking-widest ${c?"bg-amber-500 text-white shadow-lg":"bg-black/80 text-slate-300"} border border-white/10`,children:u.name.toUpperCase()})]})};return T.jsxs("div",{className:"relative w-full max-w-6xl aspect-[4/3] bg-[#0c3d23] rounded-[2rem] border-[12px] border-[#082a18] shadow-2xl flex flex-col justify-between p-8 overflow-hidden mx-auto font-sans",children:[T.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/dark-matter.png')] opacity-30 pointer-events-none"}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"}),T.jsxs("div",{className:"absolute top-4 left-4 flex gap-2",children:[T.jsx("div",{className:"px-3 py-1 bg-white/10 rounded border border-white/10 text-[10px] text-white/50 font-bold uppercase tracking-widest",children:"Single Player"}),T.jsx("div",{className:"px-3 py-1 bg-yellow-500/20 rounded border border-yellow-500/20 text-[10px] text-yellow-500 font-bold uppercase tracking-widest",children:"Beta v1.0.1"})]}),T.jsxs("div",{className:"absolute top-4 right-4 flex gap-3",children:[T.jsx("button",{className:"p-2 bg-emerald-600 hover:bg-emerald-500 rounded-lg text-white shadow-lg transition-colors border border-emerald-400/20",children:T.jsx(Nf,{size:18})}),T.jsx("button",{className:"p-2 bg-[#d32f2f] hover:bg-[#b71c1c] rounded-lg text-white shadow-lg transition-colors border border-white/10",children:T.jsx(mx,{size:18})})]}),T.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s(2),T.jsx("div",{className:"opacity-40 scale-75 -mt-2",children:T.jsx(zh,{tiles:i.players[2].tiles,playerId:2,okeyTile:i.okeyTile})})]}),T.jsxs("div",{className:"flex-1 flex items-center justify-between w-full px-4 relative",children:[T.jsxs("div",{className:"flex flex-col items-center gap-4 -rotate-90 origin-center absolute left-0",children:[s(1),T.jsx("div",{className:"opacity-40 scale-50",children:T.jsx(zh,{tiles:i.players[1].tiles,playerId:1,okeyTile:i.okeyTile})})]}),T.jsx("div",{className:"mx-auto flex flex-col items-center gap-6",children:T.jsxs("div",{className:"flex items-center gap-12 bg-black/10 p-8 rounded-full border border-white/5 backdrop-blur-sm shadow-inner relative",children:[T.jsxs("div",{className:"flex flex-col items-center gap-2",children:[T.jsx("div",{className:"text-[10px] font-black text-emerald-300 uppercase tracking-[0.2em] opacity-60",children:"Gsterge"}),T.jsx(sS,{tile:i.indicatorTile,size:"md",className:"shadow-2xl"})]}),T.jsxs("div",{className:"flex flex-col items-center gap-2",children:[T.jsx("div",{className:"text-[10px] font-black text-emerald-300 uppercase tracking-[0.2em] opacity-60",children:"Merkez Destesi"}),T.jsxs("button",{onClick:e,disabled:i.currentTurn!==0,className:`
                                    relative w-12 h-16 bg-white rounded-sm shadow-2xl flex items-center justify-center transition-all group
                                    ${i.currentTurn===0?"hover:-translate-y-2 cursor-pointer ring-4 ring-emerald-400":"cursor-wait opacity-60"}
                                `,children:[T.jsx("div",{className:"absolute inset-0 bg-[#eee] border border-[#ccc] rounded-sm transform translate-x-1 translate-y-1 -z-10 shadow-lg"}),T.jsx("div",{className:"absolute inset-0 bg-[#ddd] border border-[#bbb] rounded-sm transform translate-x-2 translate-y-2 -z-20 shadow-lg"}),T.jsx("div",{className:"text-slate-900 font-black text-xl",children:i.centerStack.length}),i.currentTurn===0&&T.jsx("div",{className:"absolute -top-3 -right-3 w-6 h-6 bg-emerald-500 rounded-full flex items-center justify-center text-[10px] text-white font-bold animate-bounce shadow-xl border-2 border-white",children:"!"})]})]})]})}),T.jsxs("div",{className:"flex flex-col items-center gap-4 rotate-90 origin-center absolute right-0",children:[s(3),T.jsx("div",{className:"opacity-40 scale-50",children:T.jsx(zh,{tiles:i.players[3].tiles,playerId:3,okeyTile:i.okeyTile})})]})]}),T.jsxs("div",{className:"relative w-full mt-4",children:[T.jsx("div",{className:"absolute -top-24 left-1/2 -translate-x-1/2 z-20",children:s(0)}),T.jsx("div",{className:"z-10 relative",children:T.jsx(zh,{tiles:i.players[0].tiles,playerId:0,isCurrentPlayer:!0,okeyTile:i.okeyTile,onMoveTile:t})})]})]})},a3=({roomId:i,mode:e,aiDifficulty:t,onExit:s})=>{const{gameState:o,drawFromCenter:c,moveTileInRack:u}=Ww(i);return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[85vh] fade-in animate-in duration-700",children:[T.jsx("div",{className:"w-full max-w-6xl mb-6 flex justify-between items-center text-white px-4",children:T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("button",{onClick:s,className:"p-3 bg-slate-800/80 hover:bg-red-500/20 text-slate-400 hover:text-red-400 rounded-xl transition-all border border-slate-700 hover:border-red-500/50",title:"Leave Game",children:T.jsx(cx,{size:20})}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-2xl font-black tracking-tight",children:"Okey Arena"}),T.jsxs("div",{className:"text-xs font-medium text-emerald-400 flex items-center gap-2",children:[T.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),e==="online"?`Room: ${i}`:`Local  ${t} AI`]})]})]})}),T.jsx(s3,{gameState:o,onDraw:c,onMoveTile:u})]})};function o3(){const[i,e]=U.useState("menu"),[t,s]=U.useState("chess"),[o,c]=U.useState(null),[u,m]=U.useState("Normal"),g=Xw(null),p=Jw(null),v=Ww(null),E=t==="chess"?g.isAuthLoading:t==="backgammon"?p.isAuthLoading:v.isAuthLoading,w=async()=>{try{const B=t==="chess"?await g.createRoom():t==="backgammon"?await p.createRoom():await v.createRoom();B&&(c(B),e("online"))}catch(B){console.error("Failed to create room:",B)}},C=async B=>{if(B.trim())try{t==="chess"?await g.joinRoom(B):t==="backgammon"?await p.joinRoom(B):await v.joinRoom(B),c(B),e("online")}catch(ee){console.error("Failed to join room:",ee),alert("Room not found or could not join")}},M=B=>{s(B)},z=B=>{m(B),e("local"),c(null)},D=()=>{c(null),e("menu")};return T.jsxs("main",{className:"relative min-h-screen w-full flex flex-col items-center overflow-x-hidden",children:[T.jsx($A,{}),T.jsx("div",{className:"container mx-auto px-4 py-8 max-w-7xl w-full overflow-visible",children:i!=="menu"?t==="chess"?T.jsx(xM,{roomId:o||"",mode:i==="online"?"online":"local",aiDifficulty:u,onExit:D}):t==="backgammon"?T.jsx(VM,{roomId:o||"",mode:i==="online"?"online":"local",aiDifficulty:u,onExit:D}):T.jsx(a3,{roomId:o||"",mode:i==="online"?"online":"local",aiDifficulty:u,onExit:D}):T.jsx(E4,{onCreateRoom:w,onJoinRoom:C,onStartLocal:z,isAuthLoading:E,onSelectGame:M})}),T.jsx("footer",{className:"mt-auto py-8 text-slate-500 text-sm",children:"DragMate  Premium Multiplayer Board Gaming"})]})}GA.createRoot(document.getElementById("root")).render(T.jsx(U.StrictMode,{children:T.jsx(o3,{})}));
