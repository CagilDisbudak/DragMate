(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function QA(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Dm={exports:{}},au={};var fv;function $A(){if(fv)return au;fv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:h,ref:o!==void 0?o:null,props:u}}return au.Fragment=e,au.jsx=n,au.jsxs=n,au}var dv;function YA(){return dv||(dv=1,Dm.exports=$A()),Dm.exports}var P=YA(),Om={exports:{}},Pe={};var mv;function XA(){if(mv)return Pe;mv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function x(M){return M===null||typeof M!="object"?null:(M=S&&M[S]||M["@@iterator"],typeof M=="function"?M:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,q={};function se(M,W,ce){this.props=M,this.context=W,this.refs=q,this.updater=ce||L}se.prototype.isReactComponent={},se.prototype.setState=function(M,W){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,W,"setState")},se.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function he(){}he.prototype=se.prototype;function oe(M,W,ce){this.props=M,this.context=W,this.refs=q,this.updater=ce||L}var be=oe.prototype=new he;be.constructor=oe,z(be,se.prototype),be.isPureReactComponent=!0;var de=Array.isArray;function pe(){}var R={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function C(M,W,ce){var ue=ce.ref;return{$$typeof:r,type:M,key:W,ref:ue!==void 0?ue:null,props:ce}}function O(M,W){return C(M.type,W,M.props)}function D(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function k(M){var W={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ce){return W[ce]})}var I=/\/+/g;function qe(M,W){return typeof M=="object"&&M!==null&&M.key!=null?k(""+M.key):W.toString(36)}function ht(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(pe,pe):(M.status="pending",M.then(function(W){M.status==="pending"&&(M.status="fulfilled",M.value=W)},function(W){M.status==="pending"&&(M.status="rejected",M.reason=W)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function J(M,W,ce,ue,ye){var we=typeof M;(we==="undefined"||we==="boolean")&&(M=null);var Le=!1;if(M===null)Le=!0;else switch(we){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(M.$$typeof){case r:case e:Le=!0;break;case E:return Le=M._init,J(Le(M._payload),W,ce,ue,ye)}}if(Le)return ye=ye(M),Le=ue===""?"."+qe(M,0):ue,de(ye)?(ce="",Le!=null&&(ce=Le.replace(I,"$&/")+"/"),J(ye,W,ce,"",function(Bt){return Bt})):ye!=null&&(D(ye)&&(ye=O(ye,ce+(ye.key==null||M&&M.key===ye.key?"":(""+ye.key).replace(I,"$&/")+"/")+Le)),W.push(ye)),1;Le=0;var xt=ue===""?".":ue+":";if(de(M))for(var ot=0;ot<M.length;ot++)ue=M[ot],we=xt+qe(ue,ot),Le+=J(ue,W,ce,we,ye);else if(ot=x(M),typeof ot=="function")for(M=ot.call(M),ot=0;!(ue=M.next()).done;)ue=ue.value,we=xt+qe(ue,ot++),Le+=J(ue,W,ce,we,ye);else if(we==="object"){if(typeof M.then=="function")return J(ht(M),W,ce,ue,ye);throw W=String(M),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Le}function ae(M,W,ce){if(M==null)return M;var ue=[],ye=0;return J(M,ue,"","",function(we){return W.call(ce,we,ye++)}),ue}function ve(M){if(M._status===-1){var W=M._result;W=W(),W.then(function(ce){(M._status===0||M._status===-1)&&(M._status=1,M._result=ce)},function(ce){(M._status===0||M._status===-1)&&(M._status=2,M._result=ce)}),M._status===-1&&(M._status=0,M._result=W)}if(M._status===1)return M._result.default;throw M._result}var Me=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},je={map:ae,forEach:function(M,W,ce){ae(M,function(){W.apply(this,arguments)},ce)},count:function(M){var W=0;return ae(M,function(){W++}),W},toArray:function(M){return ae(M,function(W){return W})||[]},only:function(M){if(!D(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Pe.Activity=T,Pe.Children=je,Pe.Component=se,Pe.Fragment=n,Pe.Profiler=o,Pe.PureComponent=oe,Pe.StrictMode=s,Pe.Suspense=g,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(M){return R.H.useMemoCache(M)}},Pe.cache=function(M){return function(){return M.apply(null,arguments)}},Pe.cacheSignal=function(){return null},Pe.cloneElement=function(M,W,ce){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ue=z({},M.props),ye=M.key;if(W!=null)for(we in W.key!==void 0&&(ye=""+W.key),W)!w.call(W,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&W.ref===void 0||(ue[we]=W[we]);var we=arguments.length-2;if(we===1)ue.children=ce;else if(1<we){for(var Le=Array(we),xt=0;xt<we;xt++)Le[xt]=arguments[xt+2];ue.children=Le}return C(M.type,ye,ue)},Pe.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},Pe.createElement=function(M,W,ce){var ue,ye={},we=null;if(W!=null)for(ue in W.key!==void 0&&(we=""+W.key),W)w.call(W,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(ye[ue]=W[ue]);var Le=arguments.length-2;if(Le===1)ye.children=ce;else if(1<Le){for(var xt=Array(Le),ot=0;ot<Le;ot++)xt[ot]=arguments[ot+2];ye.children=xt}if(M&&M.defaultProps)for(ue in Le=M.defaultProps,Le)ye[ue]===void 0&&(ye[ue]=Le[ue]);return C(M,we,ye)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(M){return{$$typeof:m,render:M}},Pe.isValidElement=D,Pe.lazy=function(M){return{$$typeof:E,_payload:{_status:-1,_result:M},_init:ve}},Pe.memo=function(M,W){return{$$typeof:p,type:M,compare:W===void 0?null:W}},Pe.startTransition=function(M){var W=R.T,ce={};R.T=ce;try{var ue=M(),ye=R.S;ye!==null&&ye(ce,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(pe,Me)}catch(we){Me(we)}finally{W!==null&&ce.types!==null&&(W.types=ce.types),R.T=W}},Pe.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Pe.use=function(M){return R.H.use(M)},Pe.useActionState=function(M,W,ce){return R.H.useActionState(M,W,ce)},Pe.useCallback=function(M,W){return R.H.useCallback(M,W)},Pe.useContext=function(M){return R.H.useContext(M)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(M,W){return R.H.useDeferredValue(M,W)},Pe.useEffect=function(M,W){return R.H.useEffect(M,W)},Pe.useEffectEvent=function(M){return R.H.useEffectEvent(M)},Pe.useId=function(){return R.H.useId()},Pe.useImperativeHandle=function(M,W,ce){return R.H.useImperativeHandle(M,W,ce)},Pe.useInsertionEffect=function(M,W){return R.H.useInsertionEffect(M,W)},Pe.useLayoutEffect=function(M,W){return R.H.useLayoutEffect(M,W)},Pe.useMemo=function(M,W){return R.H.useMemo(M,W)},Pe.useOptimistic=function(M,W){return R.H.useOptimistic(M,W)},Pe.useReducer=function(M,W,ce){return R.H.useReducer(M,W,ce)},Pe.useRef=function(M){return R.H.useRef(M)},Pe.useState=function(M){return R.H.useState(M)},Pe.useSyncExternalStore=function(M,W,ce){return R.H.useSyncExternalStore(M,W,ce)},Pe.useTransition=function(){return R.H.useTransition()},Pe.version="19.2.3",Pe}var gv;function Fg(){return gv||(gv=1,Om.exports=XA()),Om.exports}var Z=Fg();const Tn=QA(Z);var Mm={exports:{}},ou={},Vm={exports:{}},km={};var pv;function ZA(){return pv||(pv=1,(function(r){function e(J,ae){var ve=J.length;J.push(ae);e:for(;0<ve;){var Me=ve-1>>>1,je=J[Me];if(0<o(je,ae))J[Me]=ae,J[ve]=je,ve=Me;else break e}}function n(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var ae=J[0],ve=J.pop();if(ve!==ae){J[0]=ve;e:for(var Me=0,je=J.length,M=je>>>1;Me<M;){var W=2*(Me+1)-1,ce=J[W],ue=W+1,ye=J[ue];if(0>o(ce,ve))ue<je&&0>o(ye,ce)?(J[Me]=ye,J[ue]=ve,Me=ue):(J[Me]=ce,J[W]=ve,Me=W);else if(ue<je&&0>o(ye,ve))J[Me]=ye,J[ue]=ve,Me=ue;else break e}}return ae}function o(J,ae){var ve=J.sortIndex-ae.sortIndex;return ve!==0?ve:J.id-ae.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var g=[],p=[],E=1,T=null,S=3,x=!1,L=!1,z=!1,q=!1,se=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;function be(J){for(var ae=n(p);ae!==null;){if(ae.callback===null)s(p);else if(ae.startTime<=J)s(p),ae.sortIndex=ae.expirationTime,e(g,ae);else break;ae=n(p)}}function de(J){if(z=!1,be(J),!L)if(n(g)!==null)L=!0,pe||(pe=!0,k());else{var ae=n(p);ae!==null&&ht(de,ae.startTime-J)}}var pe=!1,R=-1,w=5,C=-1;function O(){return q?!0:!(r.unstable_now()-C<w)}function D(){if(q=!1,pe){var J=r.unstable_now();C=J;var ae=!0;try{e:{L=!1,z&&(z=!1,he(R),R=-1),x=!0;var ve=S;try{t:{for(be(J),T=n(g);T!==null&&!(T.expirationTime>J&&O());){var Me=T.callback;if(typeof Me=="function"){T.callback=null,S=T.priorityLevel;var je=Me(T.expirationTime<=J);if(J=r.unstable_now(),typeof je=="function"){T.callback=je,be(J),ae=!0;break t}T===n(g)&&s(g),be(J)}else s(g);T=n(g)}if(T!==null)ae=!0;else{var M=n(p);M!==null&&ht(de,M.startTime-J),ae=!1}}break e}finally{T=null,S=ve,x=!1}ae=void 0}}finally{ae?k():pe=!1}}}var k;if(typeof oe=="function")k=function(){oe(D)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,qe=I.port2;I.port1.onmessage=D,k=function(){qe.postMessage(null)}}else k=function(){se(D,0)};function ht(J,ae){R=se(function(){J(r.unstable_now())},ae)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(J){J.callback=null},r.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<J?Math.floor(1e3/J):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(J){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var ve=S;S=ae;try{return J()}finally{S=ve}},r.unstable_requestPaint=function(){q=!0},r.unstable_runWithPriority=function(J,ae){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ve=S;S=J;try{return ae()}finally{S=ve}},r.unstable_scheduleCallback=function(J,ae,ve){var Me=r.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Me+ve:Me):ve=Me,J){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=ve+je,J={id:E++,callback:ae,priorityLevel:J,startTime:ve,expirationTime:je,sortIndex:-1},ve>Me?(J.sortIndex=ve,e(p,J),n(g)===null&&J===n(p)&&(z?(he(R),R=-1):z=!0,ht(de,ve-Me))):(J.sortIndex=je,e(g,J),L||x||(L=!0,pe||(pe=!0,k()))),J},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(J){var ae=S;return function(){var ve=S;S=ae;try{return J.apply(this,arguments)}finally{S=ve}}}})(km)),km}var yv;function JA(){return yv||(yv=1,Vm.exports=ZA()),Vm.exports}var Pm={exports:{}},Ln={};var _v;function WA(){if(_v)return Ln;_v=1;var r=Fg();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:g,containerInfo:p,implementation:E}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ln.createPortal=function(g,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(g,p,null,E)},Ln.flushSync=function(g){var p=h.T,E=s.p;try{if(h.T=null,s.p=2,g)return g()}finally{h.T=p,s.p=E,s.d.f()}},Ln.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},Ln.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Ln.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var E=p.as,T=m(E,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;E==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:x}):E==="script"&&s.d.X(g,{crossOrigin:T,integrity:S,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Ln.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var E=m(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},Ln.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var E=p.as,T=m(E,p.crossOrigin);s.d.L(g,E,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Ln.preloadModule=function(g,p){if(typeof g=="string")if(p){var E=m(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},Ln.requestFormReset=function(g){s.d.r(g)},Ln.unstable_batchedUpdates=function(g,p){return g(p)},Ln.useFormState=function(g,p,E){return h.H.useFormState(g,p,E)},Ln.useFormStatus=function(){return h.H.useHostTransitionStatus()},Ln.version="19.2.3",Ln}var vv;function ST(){if(vv)return Pm.exports;vv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Pm.exports=WA(),Pm.exports}var Ev;function ew(){if(Ev)return ou;Ev=1;var r=JA(),e=Fg(),n=ST();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function h(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(s(188))}function p(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),t;if(d===l)return g(f),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,b=f.child;b;){if(b===a){_=!0,a=f,l=d;break}if(b===l){_=!0,l=f,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,l=f;break}if(b===l){_=!0,l=d,a=f;break}b=b.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function E(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=E(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),he=Symbol.for("react.consumer"),oe=Symbol.for("react.context"),be=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function qe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case z:return"Fragment";case se:return"Profiler";case q:return"StrictMode";case de:return"Suspense";case pe:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case L:return"Portal";case oe:return t.displayName||"Context";case he:return(t._context.displayName||"Context")+".Consumer";case be:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return i=t.displayName||null,i!==null?i:qe(t.type)||"Memo";case w:i=t._payload,t=t._init;try{return qe(t(i))}catch{}}return null}var ht=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Me=[],je=-1;function M(t){return{current:t}}function W(t){0>je||(t.current=Me[je],Me[je]=null,je--)}function ce(t,i){je++,Me[je]=t.current,t.current=i}var ue=M(null),ye=M(null),we=M(null),Le=M(null);function xt(t,i){switch(ce(we,i),ce(ye,t),ce(ue,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?k0(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=k0(i),t=P0(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}W(ue),ce(ue,t)}function ot(){W(ue),W(ye),W(we)}function Bt(t){t.memoizedState!==null&&ce(Le,t);var i=ue.current,a=P0(i,t.type);i!==a&&(ce(ye,t),ce(ue,a))}function Ti(t){ye.current===t&&(W(ue),W(ye)),Le.current===t&&(W(Le),nu._currentValue=ve)}var Vn,zi;function Yt(t){if(Vn===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Vn=i&&i[1]||"",zi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vn+t+zi}var li=!1;function kn(t,i){if(!t||li)return"";li=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(X){var K=X}Reflect.construct(t,[],ie)}else{try{ie.call()}catch(X){K=X}t.call(ie.prototype)}}else{try{throw Error()}catch(X){K=X}(ie=t())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(X){if(X&&K&&typeof X.stack=="string")return[X.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var N=_.split(`
`),F=b.split(`
`);for(f=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(l===N.length||f===F.length)for(l=N.length-1,f=F.length-1;1<=l&&0<=f&&N[l]!==F[f];)f--;for(;1<=l&&0<=f;l--,f--)if(N[l]!==F[f]){if(l!==1||f!==1)do if(l--,f--,0>f||N[l]!==F[f]){var ee=`
`+N[l].replace(" at new "," at ");return t.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",t.displayName)),ee}while(1<=l&&0<=f);break}}}finally{li=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Yt(a):""}function ir(t,i){switch(t.tag){case 26:case 27:case 5:return Yt(t.type);case 16:return Yt("Lazy");case 13:return t.child!==i&&i!==null?Yt("Suspense Fallback"):Yt("Suspense");case 19:return Yt("SuspenseList");case 0:case 15:return kn(t.type,!1);case 11:return kn(t.type.render,!1);case 1:return kn(t.type,!0);case 31:return Yt("Activity");default:return""}}function ji(t){try{var i="",a=null;do i+=ir(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var bt=Object.prototype.hasOwnProperty,lt=r.unstable_scheduleCallback,qn=r.unstable_cancelCallback,rr=r.unstable_shouldYield,sr=r.unstable_requestPaint,Xt=r.unstable_now,Bi=r.unstable_getCurrentPriorityLevel,Ar=r.unstable_ImmediatePriority,Hn=r.unstable_UserBlockingPriority,An=r.unstable_NormalPriority,qi=r.unstable_LowPriority,wr=r.unstable_IdlePriority,Fn=r.log,Rr=r.unstable_setDisableYieldValue,Gn=null,qt=null;function mn(t){if(typeof Fn=="function"&&Rr(t),qt&&typeof qt.setStrictMode=="function")try{qt.setStrictMode(Gn,t)}catch{}}var St=Math.clz32?Math.clz32:ns,Cr=Math.log,Hi=Math.LN2;function ns(t){return t>>>=0,t===0?32:31-(Cr(t)/Hi|0)|0}var Zn=256,Fi=262144,He=4194304;function At(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function wt(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?f=At(l):(_&=b,_!==0?f=At(_):a||(a=b&~t,a!==0&&(f=At(a))))):(b=l&~d,b!==0?f=At(b):_!==0?f=At(_):a||(a=l&~t,a!==0&&(f=At(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function Pt(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function gn(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zt(){var t=He;return He<<=1,(He&62914560)===0&&(He=4194304),t}function Mt(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Q(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ft(t,i,a,l,f,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,N=t.expirationTimes,F=t.hiddenUpdates;for(a=_&~a;0<a;){var ee=31-St(a),ie=1<<ee;b[ee]=0,N[ee]=-1;var K=F[ee];if(K!==null)for(F[ee]=null,ee=0;ee<K.length;ee++){var X=K[ee];X!==null&&(X.lane&=-536870913)}a&=~ie}l!==0&&dt(t,l,0),d!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~i))}function dt(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-St(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Ht(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-St(a),f=1<<l;f&i|t[l]&i&&(t[l]|=i),a&=~f}}function le(t,i){var a=i&-i;return a=(a&42)!==0?1:ln(a),(a&(t.suspendedLanes|i))!==0?0:a}function ln(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function et(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Nt(){var t=ae.p;return t!==0?t:(t=window.event,t===void 0?32:sv(t.type))}function un(t,i){var a=ae.p;try{return ae.p=t,i()}finally{ae.p=a}}var mt=Math.random().toString(36).slice(2),Vt="__reactFiber$"+mt,Ft="__reactProps$"+mt,Ee="__reactContainer$"+mt,is="__reactEvents$"+mt,Za="__reactListeners$"+mt,Ja="__reactHandles$"+mt,ha="__reactResources$"+mt,bi="__reactMarker$"+mt;function rs(t){delete t[Vt],delete t[Ft],delete t[is],delete t[Za],delete t[Ja]}function Si(t){var i=t[Vt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Ee]||a[Vt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=H0(t);t!==null;){if(a=t[Vt])return a;t=H0(t)}return i}t=a,a=t.parentNode}return null}function Kn(t){if(t=t[Vt]||t[Ee]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Pn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function Ai(t){var i=t[ha];return i||(i=t[ha]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Lt(t){t[bi]=!0}var fa=new Set,ss={};function Jn(t,i){wi(t,i),wi(t+"Capture",i)}function wi(t,i){for(ss[t]=i,t=0;t<i.length;t++)fa.add(i[t])}var da=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),as={},ma={};function Jt(t){return bt.call(ma,t)?!0:bt.call(as,t)?!1:da.test(t)?ma[t]=!0:(as[t]=!0,!1)}function j(t,i,a){if(Jt(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function $(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function G(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function ge(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ae(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Je(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Fe(t){if(!t._valueTracker){var i=Ae(t)?"checked":"value";t._valueTracker=Je(t,i,""+t[i])}}function Ri(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Ae(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function ar(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ga=/[\n"\\]/g;function Wn(t){return t.replace(ga,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Wa(t,i,a,l,f,d,_,b){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+ge(i)):t.value!==""+ge(i)&&(t.value=""+ge(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?gl(t,_,ge(i)):a!=null?gl(t,_,ge(a)):l!=null&&t.removeAttribute("value"),f==null&&d!=null&&(t.defaultChecked=!!d),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+ge(b):t.removeAttribute("name")}function ec(t,i,a,l,f,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Fe(t);return}a=a!=null?""+ge(a):"",i=i!=null?""+ge(i):a,b||i===t.value||(t.value=i),t.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),Fe(t)}function gl(t,i,a){i==="number"&&ar(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function os(t,i,a,l){if(t=t.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=i.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+ge(a),i=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}i!==null||t[f].disabled||(i=t[f])}i!==null&&(i.selected=!0)}}function tc(t,i,a){if(i!=null&&(i=""+ge(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+ge(a):""}function ls(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(ht(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=ge(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Fe(t)}function ei(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var nc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pl(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||nc.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function yl(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&pl(t,f,l)}else for(var d in i)i.hasOwnProperty(d)&&pl(t,d,i[d])}function eo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ic=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),us=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function to(t){return us.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Gi(){}var _l=null;function Ci(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cs=null,or=null;function pa(t){var i=Kn(t);if(i&&(t=i.stateNode)){var a=t[Ft]||null;e:switch(t=i.stateNode,i.type){case"input":if(Wa(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Wn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var f=l[Ft]||null;if(!f)throw Error(s(90));Wa(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Ri(l)}break e;case"textarea":tc(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&os(t,!!a.multiple,i,!1)}}}var no=!1;function hs(t,i,a){if(no)return t(i,a);no=!0;try{var l=t(i);return l}finally{if(no=!1,(cs!==null||or!==null)&&(Xc(),cs&&(i=cs,t=or,or=cs=null,pa(i),t)))for(i=0;i<t.length;i++)pa(t[i])}}function Ki(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Ft]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ya=!1;if(Ii)try{var gt={};Object.defineProperty(gt,"passive",{get:function(){ya=!0}}),window.addEventListener("test",gt,gt),window.removeEventListener("test",gt,gt)}catch{ya=!1}var lr=null,vl=null,_a=null;function El(){if(_a)return _a;var t,i=vl,a=i.length,l,f="value"in lr?lr.value:lr.textContent,d=f.length;for(t=0;t<a&&i[t]===f[t];t++);var _=a-t;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return _a=f.slice(t,1<l?1-l:void 0)}function va(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Ir(){return!0}function Qi(){return!1}function wn(t){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ir:Qi,this.isPropagationStopped=Qi,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ir)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ir)},persist:function(){},isPersistent:Ir}),i}var xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ur=wn(xr),fs=T({},xr,{view:0,detail:0}),Tl=wn(fs),ds,io,cr,ro=T({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ms,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==cr&&(cr&&t.type==="mousemove"?(ds=t.screenX-cr.screenX,io=t.screenY-cr.screenY):io=ds=0,cr=t),ds)},movementY:function(t){return"movementY"in t?t.movementY:io}}),bl=wn(ro),Ea=T({},ro,{dataTransfer:0}),rc=wn(Ea),sc=T({},fs,{relatedTarget:0}),Ta=wn(sc),Sl=T({},xr,{animationName:0,elapsedTime:0,pseudoElement:0}),ac=wn(Sl),so=T({},xr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),oc=wn(so),lc=T({},xr,{data:0}),hr=wn(lc),uc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fc(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=hc[t])?!!i[t]:!1}function ms(){return fc}var Qn=T({},fs,{key:function(t){if(t.key){var i=uc[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=va(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ms,charCode:function(t){return t.type==="keypress"?va(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?va(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dc=wn(Qn),mc=T({},ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nr=wn(mc),c=T({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ms}),y=wn(c),v=T({},xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=wn(v),B=T({},ro,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=wn(B),fe=T({},xr,{newState:0,oldState:0}),Ue=wn(fe),Gt=[9,13,27,32],st=Ii&&"CompositionEvent"in window,Dt=null;Ii&&"documentMode"in document&&(Dt=document.documentMode);var xi=Ii&&"TextEvent"in window&&!Dt,fr=Ii&&(!st||Dt&&8<Dt&&11>=Dt),$i=" ",Yi=!1;function ba(t,i){switch(t){case"keyup":return Gt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ao(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var oo=!1;function yS(t,i){switch(t){case"compositionend":return ao(i);case"keypress":return i.which!==32?null:(Yi=!0,$i);case"textInput":return t=i.data,t===$i&&Yi?null:t;default:return null}}function _S(t,i){if(oo)return t==="compositionend"||!st&&ba(t,i)?(t=El(),_a=vl=lr=null,oo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return fr&&i.locale!=="ko"?null:i.data;default:return null}}var vS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kp(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!vS[t.type]:i==="textarea"}function Qp(t,i,a,l){cs?or?or.push(l):or=[l]:cs=l,i=ih(i,"onChange"),0<i.length&&(a=new ur("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Al=null,wl=null;function ES(t){x0(t,0)}function gc(t){var i=Pn(t);if(Ri(i))return t}function $p(t,i){if(t==="change")return i}var Yp=!1;if(Ii){var Uf;if(Ii){var zf="oninput"in document;if(!zf){var Xp=document.createElement("div");Xp.setAttribute("oninput","return;"),zf=typeof Xp.oninput=="function"}Uf=zf}else Uf=!1;Yp=Uf&&(!document.documentMode||9<document.documentMode)}function Zp(){Al&&(Al.detachEvent("onpropertychange",Jp),wl=Al=null)}function Jp(t){if(t.propertyName==="value"&&gc(wl)){var i=[];Qp(i,wl,t,Ci(t)),hs(ES,i)}}function TS(t,i,a){t==="focusin"?(Zp(),Al=i,wl=a,Al.attachEvent("onpropertychange",Jp)):t==="focusout"&&Zp()}function bS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gc(wl)}function SS(t,i){if(t==="click")return gc(i)}function AS(t,i){if(t==="input"||t==="change")return gc(i)}function wS(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var ui=typeof Object.is=="function"?Object.is:wS;function Rl(t,i){if(ui(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!bt.call(i,f)||!ui(t[f],i[f]))return!1}return!0}function Wp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ey(t,i){var a=Wp(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Wp(a)}}function ty(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?ty(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function ny(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=ar(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=ar(t.document)}return i}function jf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var RS=Ii&&"documentMode"in document&&11>=document.documentMode,lo=null,Bf=null,Cl=null,qf=!1;function iy(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;qf||lo==null||lo!==ar(l)||(l=lo,"selectionStart"in l&&jf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Cl&&Rl(Cl,l)||(Cl=l,l=ih(Bf,"onSelect"),0<l.length&&(i=new ur("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=lo)))}function Sa(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var uo={animationend:Sa("Animation","AnimationEnd"),animationiteration:Sa("Animation","AnimationIteration"),animationstart:Sa("Animation","AnimationStart"),transitionrun:Sa("Transition","TransitionRun"),transitionstart:Sa("Transition","TransitionStart"),transitioncancel:Sa("Transition","TransitionCancel"),transitionend:Sa("Transition","TransitionEnd")},Hf={},ry={};Ii&&(ry=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function Aa(t){if(Hf[t])return Hf[t];if(!uo[t])return t;var i=uo[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in ry)return Hf[t]=i[a];return t}var sy=Aa("animationend"),ay=Aa("animationiteration"),oy=Aa("animationstart"),CS=Aa("transitionrun"),IS=Aa("transitionstart"),xS=Aa("transitioncancel"),ly=Aa("transitionend"),uy=new Map,Ff="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ff.push("scrollEnd");function Xi(t,i){uy.set(t,i),Jn(i,[t])}var pc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ni=[],co=0,Gf=0;function yc(){for(var t=co,i=Gf=co=0;i<t;){var a=Ni[i];Ni[i++]=null;var l=Ni[i];Ni[i++]=null;var f=Ni[i];Ni[i++]=null;var d=Ni[i];if(Ni[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&cy(a,f,d)}}function _c(t,i,a,l){Ni[co++]=t,Ni[co++]=i,Ni[co++]=a,Ni[co++]=l,Gf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Kf(t,i,a,l){return _c(t,i,a,l),vc(t)}function wa(t,i){return _c(t,null,null,i),vc(t)}function cy(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(f=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,f&&i!==null&&(f=31-St(a),t=d.hiddenUpdates,l=t[f],l===null?t[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function vc(t){if(50<Yl)throw Yl=0,tm=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var ho={};function NS(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ci(t,i,a,l){return new NS(t,i,a,l)}function Qf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Dr(t,i){var a=t.alternate;return a===null?(a=ci(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function hy(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Ec(t,i,a,l,f,d){var _=0;if(l=t,typeof t=="function")Qf(t)&&(_=1);else if(typeof t=="string")_=kA(t,a,ue.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=ci(31,a,i,f),t.elementType=C,t.lanes=d,t;case z:return Ra(a.children,f,d,i);case q:_=8,f|=24;break;case se:return t=ci(12,a,i,f|2),t.elementType=se,t.lanes=d,t;case de:return t=ci(13,a,i,f),t.elementType=de,t.lanes=d,t;case pe:return t=ci(19,a,i,f),t.elementType=pe,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case oe:_=10;break e;case he:_=9;break e;case be:_=11;break e;case R:_=14;break e;case w:_=16,l=null;break e}_=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=ci(_,a,i,f),i.elementType=t,i.type=l,i.lanes=d,i}function Ra(t,i,a,l){return t=ci(7,t,l,i),t.lanes=a,t}function $f(t,i,a){return t=ci(6,t,null,i),t.lanes=a,t}function fy(t){var i=ci(18,null,null,0);return i.stateNode=t,i}function Yf(t,i,a){return i=ci(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var dy=new WeakMap;function Di(t,i){if(typeof t=="object"&&t!==null){var a=dy.get(t);return a!==void 0?a:(i={value:t,source:i,stack:ji(i)},dy.set(t,i),i)}return{value:t,source:i,stack:ji(i)}}var fo=[],mo=0,Tc=null,Il=0,Oi=[],Mi=0,gs=null,dr=1,mr="";function Or(t,i){fo[mo++]=Il,fo[mo++]=Tc,Tc=t,Il=i}function my(t,i,a){Oi[Mi++]=dr,Oi[Mi++]=mr,Oi[Mi++]=gs,gs=t;var l=dr;t=mr;var f=32-St(l)-1;l&=~(1<<f),a+=1;var d=32-St(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,dr=1<<32-St(i)+f|a<<f|l,mr=d+t}else dr=1<<d|a<<f|l,mr=t}function Xf(t){t.return!==null&&(Or(t,1),my(t,1,0))}function Zf(t){for(;t===Tc;)Tc=fo[--mo],fo[mo]=null,Il=fo[--mo],fo[mo]=null;for(;t===gs;)gs=Oi[--Mi],Oi[Mi]=null,mr=Oi[--Mi],Oi[Mi]=null,dr=Oi[--Mi],Oi[Mi]=null}function gy(t,i){Oi[Mi++]=dr,Oi[Mi++]=mr,Oi[Mi++]=gs,dr=i.id,mr=i.overflow,gs=t}var Rn=null,Rt=null,We=!1,ps=null,Vi=!1,Jf=Error(s(519));function ys(t){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw xl(Di(i,t)),Jf}function py(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[Vt]=t,i[Ft]=l,a){case"dialog":Ke("cancel",i),Ke("close",i);break;case"iframe":case"object":case"embed":Ke("load",i);break;case"video":case"audio":for(a=0;a<Zl.length;a++)Ke(Zl[a],i);break;case"source":Ke("error",i);break;case"img":case"image":case"link":Ke("error",i),Ke("load",i);break;case"details":Ke("toggle",i);break;case"input":Ke("invalid",i),ec(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ke("invalid",i);break;case"textarea":Ke("invalid",i),ls(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||M0(i.textContent,a)?(l.popover!=null&&(Ke("beforetoggle",i),Ke("toggle",i)),l.onScroll!=null&&Ke("scroll",i),l.onScrollEnd!=null&&Ke("scrollend",i),l.onClick!=null&&(i.onclick=Gi),i=!0):i=!1,i||ys(t,!0)}function yy(t){for(Rn=t.return;Rn;)switch(Rn.tag){case 5:case 31:case 13:Vi=!1;return;case 27:case 3:Vi=!0;return;default:Rn=Rn.return}}function go(t){if(t!==Rn)return!1;if(!We)return yy(t),We=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||pm(t.type,t.memoizedProps)),a=!a),a&&Rt&&ys(t),yy(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Rt=q0(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Rt=q0(t)}else i===27?(i=Rt,Ds(t.type)?(t=Tm,Tm=null,Rt=t):Rt=i):Rt=Rn?Pi(t.stateNode.nextSibling):null;return!0}function Ca(){Rt=Rn=null,We=!1}function Wf(){var t=ps;return t!==null&&(ri===null?ri=t:ri.push.apply(ri,t),ps=null),t}function xl(t){ps===null?ps=[t]:ps.push(t)}var ed=M(null),Ia=null,Mr=null;function _s(t,i,a){ce(ed,i._currentValue),i._currentValue=a}function Vr(t){t._currentValue=ed.current,W(ed)}function td(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function nd(t,i,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=f;for(var N=0;N<i.length;N++)if(b.context===i[N]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),td(d.return,a,t),l||(_=null);break e}d=b.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(s(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),td(_,a,t),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===t){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function po(t,i,a,l){t=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var b=f.type;ui(f.pendingProps.value,_.value)||(t!==null?t.push(b):t=[b])}}else if(f===Le.current){if(_=f.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(nu):t=[nu])}f=f.return}t!==null&&nd(i,t,a,l),i.flags|=262144}function bc(t){for(t=t.firstContext;t!==null;){if(!ui(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function xa(t){Ia=t,Mr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Cn(t){return _y(Ia,t)}function Sc(t,i){return Ia===null&&xa(t),_y(t,i)}function _y(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Mr===null){if(t===null)throw Error(s(308));Mr=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Mr=Mr.next=i;return a}var DS=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},OS=r.unstable_scheduleCallback,MS=r.unstable_NormalPriority,Wt={$$typeof:oe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function id(){return{controller:new DS,data:new Map,refCount:0}}function Nl(t){t.refCount--,t.refCount===0&&OS(MS,function(){t.controller.abort()})}var Dl=null,rd=0,yo=0,_o=null;function VS(t,i){if(Dl===null){var a=Dl=[];rd=0,yo=om(),_o={status:"pending",value:void 0,then:function(l){a.push(l)}}}return rd++,i.then(vy,vy),i}function vy(){if(--rd===0&&Dl!==null){_o!==null&&(_o.status="fulfilled");var t=Dl;Dl=null,yo=0,_o=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function kS(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Ey=J.S;J.S=function(t,i){i0=Xt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&VS(t,i),Ey!==null&&Ey(t,i)};var Na=M(null);function sd(){var t=Na.current;return t!==null?t:Et.pooledCache}function Ac(t,i){i===null?ce(Na,Na.current):ce(Na,i.pool)}function Ty(){var t=sd();return t===null?null:{parent:Wt._currentValue,pool:t}}var vo=Error(s(460)),ad=Error(s(474)),wc=Error(s(542)),Rc={then:function(){}};function by(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Sy(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Gi,Gi),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,wy(t),t;default:if(typeof i.status=="string")i.then(Gi,Gi);else{if(t=Et,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,wy(t),t}throw Oa=i,vo}}function Da(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Oa=a,vo):a}}var Oa=null;function Ay(){if(Oa===null)throw Error(s(459));var t=Oa;return Oa=null,t}function wy(t){if(t===vo||t===wc)throw Error(s(483))}var Eo=null,Ol=0;function Cc(t){var i=Ol;return Ol+=1,Eo===null&&(Eo=[]),Sy(Eo,t,i)}function Ml(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Ic(t,i){throw i.$$typeof===S?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Ry(t){function i(U,V){if(t){var H=U.deletions;H===null?(U.deletions=[V],U.flags|=16):H.push(V)}}function a(U,V){if(!t)return null;for(;V!==null;)i(U,V),V=V.sibling;return null}function l(U){for(var V=new Map;U!==null;)U.key!==null?V.set(U.key,U):V.set(U.index,U),U=U.sibling;return V}function f(U,V){return U=Dr(U,V),U.index=0,U.sibling=null,U}function d(U,V,H){return U.index=H,t?(H=U.alternate,H!==null?(H=H.index,H<V?(U.flags|=67108866,V):H):(U.flags|=67108866,V)):(U.flags|=1048576,V)}function _(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function b(U,V,H,te){return V===null||V.tag!==6?(V=$f(H,U.mode,te),V.return=U,V):(V=f(V,H),V.return=U,V)}function N(U,V,H,te){var Ce=H.type;return Ce===z?ee(U,V,H.props.children,te,H.key):V!==null&&(V.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===w&&Da(Ce)===V.type)?(V=f(V,H.props),Ml(V,H),V.return=U,V):(V=Ec(H.type,H.key,H.props,null,U.mode,te),Ml(V,H),V.return=U,V)}function F(U,V,H,te){return V===null||V.tag!==4||V.stateNode.containerInfo!==H.containerInfo||V.stateNode.implementation!==H.implementation?(V=Yf(H,U.mode,te),V.return=U,V):(V=f(V,H.children||[]),V.return=U,V)}function ee(U,V,H,te,Ce){return V===null||V.tag!==7?(V=Ra(H,U.mode,te,Ce),V.return=U,V):(V=f(V,H),V.return=U,V)}function ie(U,V,H){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=$f(""+V,U.mode,H),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case x:return H=Ec(V.type,V.key,V.props,null,U.mode,H),Ml(H,V),H.return=U,H;case L:return V=Yf(V,U.mode,H),V.return=U,V;case w:return V=Da(V),ie(U,V,H)}if(ht(V)||k(V))return V=Ra(V,U.mode,H,null),V.return=U,V;if(typeof V.then=="function")return ie(U,Cc(V),H);if(V.$$typeof===oe)return ie(U,Sc(U,V),H);Ic(U,V)}return null}function K(U,V,H,te){var Ce=V!==null?V.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Ce!==null?null:b(U,V,""+H,te);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case x:return H.key===Ce?N(U,V,H,te):null;case L:return H.key===Ce?F(U,V,H,te):null;case w:return H=Da(H),K(U,V,H,te)}if(ht(H)||k(H))return Ce!==null?null:ee(U,V,H,te,null);if(typeof H.then=="function")return K(U,V,Cc(H),te);if(H.$$typeof===oe)return K(U,V,Sc(U,H),te);Ic(U,H)}return null}function X(U,V,H,te,Ce){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return U=U.get(H)||null,b(V,U,""+te,Ce);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case x:return U=U.get(te.key===null?H:te.key)||null,N(V,U,te,Ce);case L:return U=U.get(te.key===null?H:te.key)||null,F(V,U,te,Ce);case w:return te=Da(te),X(U,V,H,te,Ce)}if(ht(te)||k(te))return U=U.get(H)||null,ee(V,U,te,Ce,null);if(typeof te.then=="function")return X(U,V,H,Cc(te),Ce);if(te.$$typeof===oe)return X(U,V,H,Sc(V,te),Ce);Ic(V,te)}return null}function Te(U,V,H,te){for(var Ce=null,it=null,Se=V,Be=V=0,$e=null;Se!==null&&Be<H.length;Be++){Se.index>Be?($e=Se,Se=null):$e=Se.sibling;var rt=K(U,Se,H[Be],te);if(rt===null){Se===null&&(Se=$e);break}t&&Se&&rt.alternate===null&&i(U,Se),V=d(rt,V,Be),it===null?Ce=rt:it.sibling=rt,it=rt,Se=$e}if(Be===H.length)return a(U,Se),We&&Or(U,Be),Ce;if(Se===null){for(;Be<H.length;Be++)Se=ie(U,H[Be],te),Se!==null&&(V=d(Se,V,Be),it===null?Ce=Se:it.sibling=Se,it=Se);return We&&Or(U,Be),Ce}for(Se=l(Se);Be<H.length;Be++)$e=X(Se,U,Be,H[Be],te),$e!==null&&(t&&$e.alternate!==null&&Se.delete($e.key===null?Be:$e.key),V=d($e,V,Be),it===null?Ce=$e:it.sibling=$e,it=$e);return t&&Se.forEach(function(Ps){return i(U,Ps)}),We&&Or(U,Be),Ce}function xe(U,V,H,te){if(H==null)throw Error(s(151));for(var Ce=null,it=null,Se=V,Be=V=0,$e=null,rt=H.next();Se!==null&&!rt.done;Be++,rt=H.next()){Se.index>Be?($e=Se,Se=null):$e=Se.sibling;var Ps=K(U,Se,rt.value,te);if(Ps===null){Se===null&&(Se=$e);break}t&&Se&&Ps.alternate===null&&i(U,Se),V=d(Ps,V,Be),it===null?Ce=Ps:it.sibling=Ps,it=Ps,Se=$e}if(rt.done)return a(U,Se),We&&Or(U,Be),Ce;if(Se===null){for(;!rt.done;Be++,rt=H.next())rt=ie(U,rt.value,te),rt!==null&&(V=d(rt,V,Be),it===null?Ce=rt:it.sibling=rt,it=rt);return We&&Or(U,Be),Ce}for(Se=l(Se);!rt.done;Be++,rt=H.next())rt=X(Se,U,Be,rt.value,te),rt!==null&&(t&&rt.alternate!==null&&Se.delete(rt.key===null?Be:rt.key),V=d(rt,V,Be),it===null?Ce=rt:it.sibling=rt,it=rt);return t&&Se.forEach(function(KA){return i(U,KA)}),We&&Or(U,Be),Ce}function _t(U,V,H,te){if(typeof H=="object"&&H!==null&&H.type===z&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case x:e:{for(var Ce=H.key;V!==null;){if(V.key===Ce){if(Ce=H.type,Ce===z){if(V.tag===7){a(U,V.sibling),te=f(V,H.props.children),te.return=U,U=te;break e}}else if(V.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===w&&Da(Ce)===V.type){a(U,V.sibling),te=f(V,H.props),Ml(te,H),te.return=U,U=te;break e}a(U,V);break}else i(U,V);V=V.sibling}H.type===z?(te=Ra(H.props.children,U.mode,te,H.key),te.return=U,U=te):(te=Ec(H.type,H.key,H.props,null,U.mode,te),Ml(te,H),te.return=U,U=te)}return _(U);case L:e:{for(Ce=H.key;V!==null;){if(V.key===Ce)if(V.tag===4&&V.stateNode.containerInfo===H.containerInfo&&V.stateNode.implementation===H.implementation){a(U,V.sibling),te=f(V,H.children||[]),te.return=U,U=te;break e}else{a(U,V);break}else i(U,V);V=V.sibling}te=Yf(H,U.mode,te),te.return=U,U=te}return _(U);case w:return H=Da(H),_t(U,V,H,te)}if(ht(H))return Te(U,V,H,te);if(k(H)){if(Ce=k(H),typeof Ce!="function")throw Error(s(150));return H=Ce.call(H),xe(U,V,H,te)}if(typeof H.then=="function")return _t(U,V,Cc(H),te);if(H.$$typeof===oe)return _t(U,V,Sc(U,H),te);Ic(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,V!==null&&V.tag===6?(a(U,V.sibling),te=f(V,H),te.return=U,U=te):(a(U,V),te=$f(H,U.mode,te),te.return=U,U=te),_(U)):a(U,V)}return function(U,V,H,te){try{Ol=0;var Ce=_t(U,V,H,te);return Eo=null,Ce}catch(Se){if(Se===vo||Se===wc)throw Se;var it=ci(29,Se,null,U.mode);return it.lanes=te,it.return=U,it}}}var Ma=Ry(!0),Cy=Ry(!1),vs=!1;function od(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ld(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Es(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ts(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(at&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=vc(t),cy(t,null,a),i}return _c(t,l,i,a),vc(t)}function Vl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Ht(t,a)}}function ud(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var cd=!1;function kl(){if(cd){var t=_o;if(t!==null)throw t}}function Pl(t,i,a,l){cd=!1;var f=t.updateQueue;vs=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var N=b,F=N.next;N.next=null,_===null?d=F:_.next=F,_=N;var ee=t.alternate;ee!==null&&(ee=ee.updateQueue,b=ee.lastBaseUpdate,b!==_&&(b===null?ee.firstBaseUpdate=F:b.next=F,ee.lastBaseUpdate=N))}if(d!==null){var ie=f.baseState;_=0,ee=F=N=null,b=d;do{var K=b.lane&-536870913,X=K!==b.lane;if(X?(Qe&K)===K:(l&K)===K){K!==0&&K===yo&&(cd=!0),ee!==null&&(ee=ee.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Te=t,xe=b;K=i;var _t=a;switch(xe.tag){case 1:if(Te=xe.payload,typeof Te=="function"){ie=Te.call(_t,ie,K);break e}ie=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=xe.payload,K=typeof Te=="function"?Te.call(_t,ie,K):Te,K==null)break e;ie=T({},ie,K);break e;case 2:vs=!0}}K=b.callback,K!==null&&(t.flags|=64,X&&(t.flags|=8192),X=f.callbacks,X===null?f.callbacks=[K]:X.push(K))}else X={lane:K,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ee===null?(F=ee=X,N=ie):ee=ee.next=X,_|=K;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;X=b,b=X.next,X.next=null,f.lastBaseUpdate=X,f.shared.pending=null}}while(!0);ee===null&&(N=ie),f.baseState=N,f.firstBaseUpdate=F,f.lastBaseUpdate=ee,d===null&&(f.shared.lanes=0),Rs|=_,t.lanes=_,t.memoizedState=ie}}function Iy(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function xy(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Iy(a[t],i)}var To=M(null),xc=M(0);function Ny(t,i){t=Hr,ce(xc,t),ce(To,i),Hr=t|i.baseLanes}function hd(){ce(xc,Hr),ce(To,To.current)}function fd(){Hr=xc.current,W(To),W(xc)}var hi=M(null),ki=null;function bs(t){var i=t.alternate;ce(Kt,Kt.current&1),ce(hi,t),ki===null&&(i===null||To.current!==null||i.memoizedState!==null)&&(ki=t)}function dd(t){ce(Kt,Kt.current),ce(hi,t),ki===null&&(ki=t)}function Dy(t){t.tag===22?(ce(Kt,Kt.current),ce(hi,t),ki===null&&(ki=t)):Ss()}function Ss(){ce(Kt,Kt.current),ce(hi,hi.current)}function fi(t){W(hi),ki===t&&(ki=null),W(Kt)}var Kt=M(0);function Nc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||vm(a)||Em(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var kr=0,ze=null,pt=null,en=null,Dc=!1,bo=!1,Va=!1,Oc=0,Ll=0,So=null,PS=0;function Ut(){throw Error(s(321))}function md(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!ui(t[a],i[a]))return!1;return!0}function gd(t,i,a,l,f,d){return kr=d,ze=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,J.H=t===null||t.memoizedState===null?m_:Nd,Va=!1,d=a(l,f),Va=!1,bo&&(d=My(i,a,l,f)),Oy(t),d}function Oy(t){J.H=jl;var i=pt!==null&&pt.next!==null;if(kr=0,en=pt=ze=null,Dc=!1,Ll=0,So=null,i)throw Error(s(300));t===null||tn||(t=t.dependencies,t!==null&&bc(t)&&(tn=!0))}function My(t,i,a,l){ze=t;var f=0;do{if(bo&&(So=null),Ll=0,bo=!1,25<=f)throw Error(s(301));if(f+=1,en=pt=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}J.H=g_,d=i(a,l)}while(bo);return d}function LS(){var t=J.H,i=t.useState()[0];return i=typeof i.then=="function"?Ul(i):i,t=t.useState()[0],(pt!==null?pt.memoizedState:null)!==t&&(ze.flags|=1024),i}function pd(){var t=Oc!==0;return Oc=0,t}function yd(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function _d(t){if(Dc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Dc=!1}kr=0,en=pt=ze=null,bo=!1,Ll=Oc=0,So=null}function $n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?ze.memoizedState=en=t:en=en.next=t,en}function Qt(){if(pt===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var i=en===null?ze.memoizedState:en.next;if(i!==null)en=i,pt=t;else{if(t===null)throw ze.alternate===null?Error(s(467)):Error(s(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},en===null?ze.memoizedState=en=t:en=en.next=t}return en}function Mc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(t){var i=Ll;return Ll+=1,So===null&&(So=[]),t=Sy(So,t,i),i=ze,(en===null?i.memoizedState:en.next)===null&&(i=i.alternate,J.H=i===null||i.memoizedState===null?m_:Nd),t}function Vc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ul(t);if(t.$$typeof===oe)return Cn(t)}throw Error(s(438,String(t)))}function vd(t){var i=null,a=ze.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=ze.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Mc(),ze.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=O;return i.index++,a}function Pr(t,i){return typeof i=="function"?i(t):i}function kc(t){var i=Qt();return Ed(i,pt,t)}function Ed(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=t.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=t.baseState,f===null)t.memoizedState=d;else{i=f.next;var b=_=null,N=null,F=i,ee=!1;do{var ie=F.lane&-536870913;if(ie!==F.lane?(Qe&ie)===ie:(kr&ie)===ie){var K=F.revertLane;if(K===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ie===yo&&(ee=!0);else if((kr&K)===K){F=F.next,K===yo&&(ee=!0);continue}else ie={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},N===null?(b=N=ie,_=d):N=N.next=ie,ze.lanes|=K,Rs|=K;ie=F.action,Va&&a(d,ie),d=F.hasEagerState?F.eagerState:a(d,ie)}else K={lane:ie,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},N===null?(b=N=K,_=d):N=N.next=K,ze.lanes|=ie,Rs|=ie;F=F.next}while(F!==null&&F!==i);if(N===null?_=d:N.next=b,!ui(d,t.memoizedState)&&(tn=!0,ee&&(a=_o,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=N,l.lastRenderedState=d}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Td(t){var i=Qt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=t(d,_.action),_=_.next;while(_!==f);ui(d,i.memoizedState)||(tn=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Vy(t,i,a){var l=ze,f=Qt(),d=We;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var _=!ui((pt||f).memoizedState,a);if(_&&(f.memoizedState=a,tn=!0),f=f.queue,Ad(Ly.bind(null,l,f,t),[t]),f.getSnapshot!==i||_||en!==null&&en.memoizedState.tag&1){if(l.flags|=2048,Ao(9,{destroy:void 0},Py.bind(null,l,f,a,i),null),Et===null)throw Error(s(349));d||(kr&127)!==0||ky(l,i,a)}return a}function ky(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=ze.updateQueue,i===null?(i=Mc(),ze.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Py(t,i,a,l){i.value=a,i.getSnapshot=l,Uy(i)&&zy(t)}function Ly(t,i,a){return a(function(){Uy(i)&&zy(t)})}function Uy(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!ui(t,a)}catch{return!0}}function zy(t){var i=wa(t,2);i!==null&&si(i,t,2)}function bd(t){var i=$n();if(typeof t=="function"){var a=t;if(t=a(),Va){mn(!0);try{a()}finally{mn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pr,lastRenderedState:t},i}function jy(t,i,a,l){return t.baseState=a,Ed(t,pt,typeof l=="function"?l:Pr)}function US(t,i,a,l,f){if(Uc(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};J.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,By(i,d)):(d.next=a.next,i.pending=a.next=d)}}function By(t,i){var a=i.action,l=i.payload,f=t.state;if(i.isTransition){var d=J.T,_={};J.T=_;try{var b=a(f,l),N=J.S;N!==null&&N(_,b),qy(t,i,b)}catch(F){Sd(t,i,F)}finally{d!==null&&_.types!==null&&(d.types=_.types),J.T=d}}else try{d=a(f,l),qy(t,i,d)}catch(F){Sd(t,i,F)}}function qy(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Hy(t,i,l)},function(l){return Sd(t,i,l)}):Hy(t,i,a)}function Hy(t,i,a){i.status="fulfilled",i.value=a,Fy(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,By(t,a)))}function Sd(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Fy(i),i=i.next;while(i!==l)}t.action=null}function Fy(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Gy(t,i){return i}function Ky(t,i){if(We){var a=Et.formState;if(a!==null){e:{var l=ze;if(We){if(Rt){t:{for(var f=Rt,d=Vi;f.nodeType!==8;){if(!d){f=null;break t}if(f=Pi(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){Rt=Pi(f.nextSibling),l=f.data==="F!";break e}}ys(l)}l=!1}l&&(i=a[0])}}return a=$n(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gy,lastRenderedState:i},a.queue=l,a=h_.bind(null,ze,l),l.dispatch=a,l=bd(!1),d=xd.bind(null,ze,!1,l.queue),l=$n(),f={state:i,dispatch:null,action:t,pending:null},l.queue=f,a=US.bind(null,ze,f,d,a),f.dispatch=a,l.memoizedState=t,[i,a,!1]}function Qy(t){var i=Qt();return $y(i,pt,t)}function $y(t,i,a){if(i=Ed(t,i,Gy)[0],t=kc(Pr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Ul(i)}catch(_){throw _===vo?wc:_}else l=i;i=Qt();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(ze.flags|=2048,Ao(9,{destroy:void 0},zS.bind(null,f,a),null)),[l,d,t]}function zS(t,i){t.action=i}function Yy(t){var i=Qt(),a=pt;if(a!==null)return $y(i,a,t);Qt(),i=i.memoizedState,a=Qt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Ao(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=ze.updateQueue,i===null&&(i=Mc(),ze.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function Xy(){return Qt().memoizedState}function Pc(t,i,a,l){var f=$n();ze.flags|=t,f.memoizedState=Ao(1|i,{destroy:void 0},a,l===void 0?null:l)}function Lc(t,i,a,l){var f=Qt();l=l===void 0?null:l;var d=f.memoizedState.inst;pt!==null&&l!==null&&md(l,pt.memoizedState.deps)?f.memoizedState=Ao(i,d,a,l):(ze.flags|=t,f.memoizedState=Ao(1|i,d,a,l))}function Zy(t,i){Pc(8390656,8,t,i)}function Ad(t,i){Lc(2048,8,t,i)}function jS(t){ze.flags|=4;var i=ze.updateQueue;if(i===null)i=Mc(),ze.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function Jy(t){var i=Qt().memoizedState;return jS({ref:i,nextImpl:t}),function(){if((at&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Wy(t,i){return Lc(4,2,t,i)}function e_(t,i){return Lc(4,4,t,i)}function t_(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function n_(t,i,a){a=a!=null?a.concat([t]):null,Lc(4,4,t_.bind(null,i,t),a)}function wd(){}function i_(t,i){var a=Qt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&md(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function r_(t,i){var a=Qt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&md(i,l[1]))return l[0];if(l=t(),Va){mn(!0);try{t()}finally{mn(!1)}}return a.memoizedState=[l,i],l}function Rd(t,i,a){return a===void 0||(kr&1073741824)!==0&&(Qe&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=s0(),ze.lanes|=t,Rs|=t,a)}function s_(t,i,a,l){return ui(a,i)?a:To.current!==null?(t=Rd(t,a,l),ui(t,i)||(tn=!0),t):(kr&42)===0||(kr&1073741824)!==0&&(Qe&261930)===0?(tn=!0,t.memoizedState=a):(t=s0(),ze.lanes|=t,Rs|=t,i)}function a_(t,i,a,l,f){var d=ae.p;ae.p=d!==0&&8>d?d:8;var _=J.T,b={};J.T=b,xd(t,!1,i,a);try{var N=f(),F=J.S;if(F!==null&&F(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var ee=kS(N,l);zl(t,i,ee,gi(t))}else zl(t,i,l,gi(t))}catch(ie){zl(t,i,{then:function(){},status:"rejected",reason:ie},gi())}finally{ae.p=d,_!==null&&b.types!==null&&(_.types=b.types),J.T=_}}function BS(){}function Cd(t,i,a,l){if(t.tag!==5)throw Error(s(476));var f=o_(t).queue;a_(t,f,i,ve,a===null?BS:function(){return l_(t),a(l)})}function o_(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pr,lastRenderedState:ve},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pr,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function l_(t){var i=o_(t);i.next===null&&(i=t.alternate.memoizedState),zl(t,i.next.queue,{},gi())}function Id(){return Cn(nu)}function u_(){return Qt().memoizedState}function c_(){return Qt().memoizedState}function qS(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=gi();t=Es(a);var l=Ts(i,t,a);l!==null&&(si(l,i,a),Vl(l,i,a)),i={cache:id()},t.payload=i;return}i=i.return}}function HS(t,i,a){var l=gi();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Uc(t)?f_(i,a):(a=Kf(t,i,a,l),a!==null&&(si(a,t,l),d_(a,i,l)))}function h_(t,i,a){var l=gi();zl(t,i,a,l)}function zl(t,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Uc(t))f_(i,f);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,b=d(_,a);if(f.hasEagerState=!0,f.eagerState=b,ui(b,_))return _c(t,i,f,0),Et===null&&yc(),!1}catch{}if(a=Kf(t,i,f,l),a!==null)return si(a,t,l),d_(a,i,l),!0}return!1}function xd(t,i,a,l){if(l={lane:2,revertLane:om(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Uc(t)){if(i)throw Error(s(479))}else i=Kf(t,a,l,2),i!==null&&si(i,t,2)}function Uc(t){var i=t.alternate;return t===ze||i!==null&&i===ze}function f_(t,i){bo=Dc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function d_(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Ht(t,a)}}var jl={readContext:Cn,use:Vc,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut};jl.useEffectEvent=Ut;var m_={readContext:Cn,use:Vc,useCallback:function(t,i){return $n().memoizedState=[t,i===void 0?null:i],t},useContext:Cn,useEffect:Zy,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Pc(4194308,4,t_.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Pc(4194308,4,t,i)},useInsertionEffect:function(t,i){Pc(4,2,t,i)},useMemo:function(t,i){var a=$n();i=i===void 0?null:i;var l=t();if(Va){mn(!0);try{t()}finally{mn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=$n();if(a!==void 0){var f=a(i);if(Va){mn(!0);try{a(i)}finally{mn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=HS.bind(null,ze,t),[l.memoizedState,t]},useRef:function(t){var i=$n();return t={current:t},i.memoizedState=t},useState:function(t){t=bd(t);var i=t.queue,a=h_.bind(null,ze,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:wd,useDeferredValue:function(t,i){var a=$n();return Rd(a,t,i)},useTransition:function(){var t=bd(!1);return t=a_.bind(null,ze,t.queue,!0,!1),$n().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=ze,f=$n();if(We){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),Et===null)throw Error(s(349));(Qe&127)!==0||ky(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,Zy(Ly.bind(null,l,d,t),[t]),l.flags|=2048,Ao(9,{destroy:void 0},Py.bind(null,l,d,a,i),null),a},useId:function(){var t=$n(),i=Et.identifierPrefix;if(We){var a=mr,l=dr;a=(l&~(1<<32-St(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Oc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=PS++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Id,useFormState:Ky,useActionState:Ky,useOptimistic:function(t){var i=$n();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=xd.bind(null,ze,!0,a),a.dispatch=i,[t,i]},useMemoCache:vd,useCacheRefresh:function(){return $n().memoizedState=qS.bind(null,ze)},useEffectEvent:function(t){var i=$n(),a={impl:t};return i.memoizedState=a,function(){if((at&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Nd={readContext:Cn,use:Vc,useCallback:i_,useContext:Cn,useEffect:Ad,useImperativeHandle:n_,useInsertionEffect:Wy,useLayoutEffect:e_,useMemo:r_,useReducer:kc,useRef:Xy,useState:function(){return kc(Pr)},useDebugValue:wd,useDeferredValue:function(t,i){var a=Qt();return s_(a,pt.memoizedState,t,i)},useTransition:function(){var t=kc(Pr)[0],i=Qt().memoizedState;return[typeof t=="boolean"?t:Ul(t),i]},useSyncExternalStore:Vy,useId:u_,useHostTransitionStatus:Id,useFormState:Qy,useActionState:Qy,useOptimistic:function(t,i){var a=Qt();return jy(a,pt,t,i)},useMemoCache:vd,useCacheRefresh:c_};Nd.useEffectEvent=Jy;var g_={readContext:Cn,use:Vc,useCallback:i_,useContext:Cn,useEffect:Ad,useImperativeHandle:n_,useInsertionEffect:Wy,useLayoutEffect:e_,useMemo:r_,useReducer:Td,useRef:Xy,useState:function(){return Td(Pr)},useDebugValue:wd,useDeferredValue:function(t,i){var a=Qt();return pt===null?Rd(a,t,i):s_(a,pt.memoizedState,t,i)},useTransition:function(){var t=Td(Pr)[0],i=Qt().memoizedState;return[typeof t=="boolean"?t:Ul(t),i]},useSyncExternalStore:Vy,useId:u_,useHostTransitionStatus:Id,useFormState:Yy,useActionState:Yy,useOptimistic:function(t,i){var a=Qt();return pt!==null?jy(a,pt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:vd,useCacheRefresh:c_};g_.useEffectEvent=Jy;function Dd(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Od={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=gi(),f=Es(l);f.payload=i,a!=null&&(f.callback=a),i=Ts(t,f,l),i!==null&&(si(i,t,l),Vl(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=gi(),f=Es(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Ts(t,f,l),i!==null&&(si(i,t,l),Vl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=gi(),l=Es(a);l.tag=2,i!=null&&(l.callback=i),i=Ts(t,l,a),i!==null&&(si(i,t,a),Vl(i,t,a))}};function p_(t,i,a,l,f,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!Rl(a,l)||!Rl(f,d):!0}function y_(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Od.enqueueReplaceState(i,i.state,null)}function ka(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}function __(t){pc(t)}function v_(t){console.error(t)}function E_(t){pc(t)}function zc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function T_(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Md(t,i,a){return a=Es(a),a.tag=3,a.payload={element:null},a.callback=function(){zc(t,i)},a}function b_(t){return t=Es(t),t.tag=3,t}function S_(t,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;t.payload=function(){return f(d)},t.callback=function(){T_(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){T_(i,a,l),typeof f!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function FS(t,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&po(i,a,f,!0),a=hi.current,a!==null){switch(a.tag){case 31:case 13:return ki===null?Zc():a.alternate===null&&zt===0&&(zt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Rc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),rm(t,l,f)),!1;case 22:return a.flags|=65536,l===Rc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),rm(t,l,f)),!1}throw Error(s(435,a.tag))}return rm(t,l,f),Zc(),!1}if(We)return i=hi.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Jf&&(t=Error(s(422),{cause:l}),xl(Di(t,a)))):(l!==Jf&&(i=Error(s(423),{cause:l}),xl(Di(i,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=Di(l,a),f=Md(t.stateNode,l,f),ud(t,f),zt!==4&&(zt=2)),!1;var d=Error(s(520),{cause:l});if(d=Di(d,a),$l===null?$l=[d]:$l.push(d),zt!==4&&(zt=2),i===null)return!0;l=Di(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=Md(a.stateNode,l,t),ud(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Cs===null||!Cs.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=b_(f),S_(f,t,a,l),ud(a,f),!1}a=a.return}while(a!==null);return!1}var Vd=Error(s(461)),tn=!1;function In(t,i,a,l){i.child=t===null?Cy(i,null,a,l):Ma(i,t.child,a,l)}function A_(t,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var b in l)b!=="ref"&&(_[b]=l[b])}else _=l;return xa(i),l=gd(t,i,a,_,d,f),b=pd(),t!==null&&!tn?(yd(t,i,f),Lr(t,i,f)):(We&&b&&Xf(i),i.flags|=1,In(t,i,l,f),i.child)}function w_(t,i,a,l,f){if(t===null){var d=a.type;return typeof d=="function"&&!Qf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,R_(t,i,d,l,f)):(t=Ec(a.type,null,l,i,i.mode,f),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!qd(t,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Rl,a(_,l)&&t.ref===i.ref)return Lr(t,i,f)}return i.flags|=1,t=Dr(d,l),t.ref=i.ref,t.return=i,i.child=t}function R_(t,i,a,l,f){if(t!==null){var d=t.memoizedProps;if(Rl(d,l)&&t.ref===i.ref)if(tn=!1,i.pendingProps=l=d,qd(t,f))(t.flags&131072)!==0&&(tn=!0);else return i.lanes=t.lanes,Lr(t,i,f)}return kd(t,i,a,l,f)}function C_(t,i,a,l){var f=l.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=i.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return I_(t,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ac(i,d!==null?d.cachePool:null),d!==null?Ny(i,d):hd(),Dy(i);else return l=i.lanes=536870912,I_(t,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Ac(i,d.cachePool),Ny(i,d),Ss(),i.memoizedState=null):(t!==null&&Ac(i,null),hd(),Ss());return In(t,i,f,a),i.child}function Bl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function I_(t,i,a,l,f){var d=sd();return d=d===null?null:{parent:Wt._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&Ac(i,null),hd(),Dy(i),t!==null&&po(t,i,l,!0),i.childLanes=f,null}function jc(t,i){return i=qc({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function x_(t,i,a){return Ma(i,t.child,null,a),t=jc(i,i.pendingProps),t.flags|=2,fi(i),i.memoizedState=null,t}function GS(t,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(We){if(l.mode==="hidden")return t=jc(i,l),i.lanes=536870912,Bl(null,t);if(dd(i),(t=Rt)?(t=B0(t,Vi),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:gs!==null?{id:dr,overflow:mr}:null,retryLane:536870912,hydrationErrors:null},a=fy(t),a.return=i,i.child=a,Rn=i,Rt=null)):t=null,t===null)throw ys(i);return i.lanes=536870912,null}return jc(i,l)}var d=t.memoizedState;if(d!==null){var _=d.dehydrated;if(dd(i),f)if(i.flags&256)i.flags&=-257,i=x_(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(s(558));else if(tn||po(t,i,a,!1),f=(a&t.childLanes)!==0,tn||f){if(l=Et,l!==null&&(_=le(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,wa(t,_),si(l,t,_),Vd;Zc(),i=x_(t,i,a)}else t=d.treeContext,Rt=Pi(_.nextSibling),Rn=i,We=!0,ps=null,Vi=!1,t!==null&&gy(i,t),i=jc(i,l),i.flags|=4096;return i}return t=Dr(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function Bc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function kd(t,i,a,l,f){return xa(i),a=gd(t,i,a,l,void 0,f),l=pd(),t!==null&&!tn?(yd(t,i,f),Lr(t,i,f)):(We&&l&&Xf(i),i.flags|=1,In(t,i,a,f),i.child)}function N_(t,i,a,l,f,d){return xa(i),i.updateQueue=null,a=My(i,l,a,f),Oy(t),l=pd(),t!==null&&!tn?(yd(t,i,d),Lr(t,i,d)):(We&&l&&Xf(i),i.flags|=1,In(t,i,a,d),i.child)}function D_(t,i,a,l,f){if(xa(i),i.stateNode===null){var d=ho,_=a.contextType;typeof _=="object"&&_!==null&&(d=Cn(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Od,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},od(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?Cn(_):ho,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Dd(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Od.enqueueReplaceState(d,d.state,null),Pl(i,l,d,f),kl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var b=i.memoizedProps,N=ka(a,b);d.props=N;var F=d.context,ee=a.contextType;_=ho,typeof ee=="object"&&ee!==null&&(_=Cn(ee));var ie=a.getDerivedStateFromProps;ee=typeof ie=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,ee||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||F!==_)&&y_(i,d,l,_),vs=!1;var K=i.memoizedState;d.state=K,Pl(i,l,d,f),kl(),F=i.memoizedState,b||K!==F||vs?(typeof ie=="function"&&(Dd(i,a,ie,l),F=i.memoizedState),(N=vs||p_(i,a,N,l,K,F,_))?(ee||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=F),d.props=l,d.state=F,d.context=_,l=N):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,ld(t,i),_=i.memoizedProps,ee=ka(a,_),d.props=ee,ie=i.pendingProps,K=d.context,F=a.contextType,N=ho,typeof F=="object"&&F!==null&&(N=Cn(F)),b=a.getDerivedStateFromProps,(F=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==ie||K!==N)&&y_(i,d,l,N),vs=!1,K=i.memoizedState,d.state=K,Pl(i,l,d,f),kl();var X=i.memoizedState;_!==ie||K!==X||vs||t!==null&&t.dependencies!==null&&bc(t.dependencies)?(typeof b=="function"&&(Dd(i,a,b,l),X=i.memoizedState),(ee=vs||p_(i,a,ee,l,K,X,N)||t!==null&&t.dependencies!==null&&bc(t.dependencies))?(F||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,X,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,X,N)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=X),d.props=l,d.state=X,d.context=N,l=ee):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,Bc(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=Ma(i,t.child,null,f),i.child=Ma(i,null,a,f)):In(t,i,a,f),i.memoizedState=d.state,t=i.child):t=Lr(t,i,f),t}function O_(t,i,a,l){return Ca(),i.flags|=256,In(t,i,a,l),i.child}var Pd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ld(t){return{baseLanes:t,cachePool:Ty()}}function Ud(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=mi),t}function M_(t,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(Kt.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(We){if(f?bs(i):Ss(),(t=Rt)?(t=B0(t,Vi),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:gs!==null?{id:dr,overflow:mr}:null,retryLane:536870912,hydrationErrors:null},a=fy(t),a.return=i,i.child=a,Rn=i,Rt=null)):t=null,t===null)throw ys(i);return Em(t)?i.lanes=32:i.lanes=536870912,null}var b=l.children;return l=l.fallback,f?(Ss(),f=i.mode,b=qc({mode:"hidden",children:b},f),l=Ra(l,f,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,l=i.child,l.memoizedState=Ld(a),l.childLanes=Ud(t,_,a),i.memoizedState=Pd,Bl(null,l)):(bs(i),zd(i,b))}var N=t.memoizedState;if(N!==null&&(b=N.dehydrated,b!==null)){if(d)i.flags&256?(bs(i),i.flags&=-257,i=jd(t,i,a)):i.memoizedState!==null?(Ss(),i.child=t.child,i.flags|=128,i=null):(Ss(),b=l.fallback,f=i.mode,l=qc({mode:"visible",children:l.children},f),b=Ra(b,f,a,null),b.flags|=2,l.return=i,b.return=i,l.sibling=b,i.child=l,Ma(i,t.child,null,a),l=i.child,l.memoizedState=Ld(a),l.childLanes=Ud(t,_,a),i.memoizedState=Pd,i=Bl(null,l));else if(bs(i),Em(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var F=_.dgst;_=F,l=Error(s(419)),l.stack="",l.digest=_,xl({value:l,source:null,stack:null}),i=jd(t,i,a)}else if(tn||po(t,i,a,!1),_=(a&t.childLanes)!==0,tn||_){if(_=Et,_!==null&&(l=le(_,a),l!==0&&l!==N.retryLane))throw N.retryLane=l,wa(t,l),si(_,t,l),Vd;vm(b)||Zc(),i=jd(t,i,a)}else vm(b)?(i.flags|=192,i.child=t.child,i=null):(t=N.treeContext,Rt=Pi(b.nextSibling),Rn=i,We=!0,ps=null,Vi=!1,t!==null&&gy(i,t),i=zd(i,l.children),i.flags|=4096);return i}return f?(Ss(),b=l.fallback,f=i.mode,N=t.child,F=N.sibling,l=Dr(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,F!==null?b=Dr(F,b):(b=Ra(b,f,a,null),b.flags|=2),b.return=i,l.return=i,l.sibling=b,i.child=l,Bl(null,l),l=i.child,b=t.child.memoizedState,b===null?b=Ld(a):(f=b.cachePool,f!==null?(N=Wt._currentValue,f=f.parent!==N?{parent:N,pool:N}:f):f=Ty(),b={baseLanes:b.baseLanes|a,cachePool:f}),l.memoizedState=b,l.childLanes=Ud(t,_,a),i.memoizedState=Pd,Bl(t.child,l)):(bs(i),a=t.child,t=a.sibling,a=Dr(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function zd(t,i){return i=qc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function qc(t,i){return t=ci(22,t,null,i),t.lanes=0,t}function jd(t,i,a){return Ma(i,t.child,null,a),t=zd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function V_(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),td(t.return,i,a)}function Bd(t,i,a,l,f,d){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function k_(t,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=Kt.current,b=(_&2)!==0;if(b?(_=_&1|2,i.flags|=128):_&=1,ce(Kt,_),In(t,i,l,a),l=We?Il:0,!b&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&V_(t,a,i);else if(t.tag===19)V_(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)t=a.alternate,t!==null&&Nc(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Bd(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(t=f.alternate,t!==null&&Nc(t)===null){i.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}Bd(i,!0,a,null,d,l);break;case"together":Bd(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Lr(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Rs|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(po(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Dr(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Dr(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function qd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&bc(t)))}function KS(t,i,a){switch(i.tag){case 3:xt(i,i.stateNode.containerInfo),_s(i,Wt,t.memoizedState.cache),Ca();break;case 27:case 5:Bt(i);break;case 4:xt(i,i.stateNode.containerInfo);break;case 10:_s(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,dd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(bs(i),i.flags|=128,null):(a&i.child.childLanes)!==0?M_(t,i,a):(bs(i),t=Lr(t,i,a),t!==null?t.sibling:null);bs(i);break;case 19:var f=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(po(t,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return k_(t,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ce(Kt,Kt.current),l)break;return null;case 22:return i.lanes=0,C_(t,i,a,i.pendingProps);case 24:_s(i,Wt,t.memoizedState.cache)}return Lr(t,i,a)}function P_(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)tn=!0;else{if(!qd(t,a)&&(i.flags&128)===0)return tn=!1,KS(t,i,a);tn=(t.flags&131072)!==0}else tn=!1,We&&(i.flags&1048576)!==0&&my(i,Il,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=Da(i.elementType),i.type=t,typeof t=="function")Qf(t)?(l=ka(t,l),i.tag=1,i=D_(null,i,t,l,a)):(i.tag=0,i=kd(null,i,t,l,a));else{if(t!=null){var f=t.$$typeof;if(f===be){i.tag=11,i=A_(null,i,t,l,a);break e}else if(f===R){i.tag=14,i=w_(null,i,t,l,a);break e}}throw i=qe(t)||t,Error(s(306,i,""))}}return i;case 0:return kd(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=ka(l,i.pendingProps),D_(t,i,l,f,a);case 3:e:{if(xt(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,ld(t,i),Pl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,_s(i,Wt,l),l!==d.cache&&nd(i,[Wt],a,!0),kl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=O_(t,i,l,a);break e}else if(l!==f){f=Di(Error(s(424)),i),xl(f),i=O_(t,i,l,a);break e}else for(t=i.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Rt=Pi(t.firstChild),Rn=i,We=!0,ps=null,Vi=!0,a=Cy(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ca(),l===f){i=Lr(t,i,a);break e}In(t,i,l,a)}i=i.child}return i;case 26:return Bc(t,i),t===null?(a=Q0(i.type,null,i.pendingProps,null))?i.memoizedState=a:We||(a=i.type,t=i.pendingProps,l=rh(we.current).createElement(a),l[Vt]=i,l[Ft]=t,xn(l,a,t),Lt(l),i.stateNode=l):i.memoizedState=Q0(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Bt(i),t===null&&We&&(l=i.stateNode=F0(i.type,i.pendingProps,we.current),Rn=i,Vi=!0,f=Rt,Ds(i.type)?(Tm=f,Rt=Pi(l.firstChild)):Rt=f),In(t,i,i.pendingProps.children,a),Bc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&We&&((f=l=Rt)&&(l=bA(l,i.type,i.pendingProps,Vi),l!==null?(i.stateNode=l,Rn=i,Rt=Pi(l.firstChild),Vi=!1,f=!0):f=!1),f||ys(i)),Bt(i),f=i.type,d=i.pendingProps,_=t!==null?t.memoizedProps:null,l=d.children,pm(f,d)?l=null:_!==null&&pm(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=gd(t,i,LS,null,null,a),nu._currentValue=f),Bc(t,i),In(t,i,l,a),i.child;case 6:return t===null&&We&&((t=a=Rt)&&(a=SA(a,i.pendingProps,Vi),a!==null?(i.stateNode=a,Rn=i,Rt=null,t=!0):t=!1),t||ys(i)),null;case 13:return M_(t,i,a);case 4:return xt(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Ma(i,null,l,a):In(t,i,l,a),i.child;case 11:return A_(t,i,i.type,i.pendingProps,a);case 7:return In(t,i,i.pendingProps,a),i.child;case 8:return In(t,i,i.pendingProps.children,a),i.child;case 12:return In(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,_s(i,i.type,l.value),In(t,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,xa(i),f=Cn(f),l=l(f),i.flags|=1,In(t,i,l,a),i.child;case 14:return w_(t,i,i.type,i.pendingProps,a);case 15:return R_(t,i,i.type,i.pendingProps,a);case 19:return k_(t,i,a);case 31:return GS(t,i,a);case 22:return C_(t,i,a,i.pendingProps);case 24:return xa(i),l=Cn(Wt),t===null?(f=sd(),f===null&&(f=Et,d=id(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},od(i),_s(i,Wt,f)):((t.lanes&a)!==0&&(ld(t,i),Pl(i,null,null,a),kl()),f=t.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),_s(i,Wt,l)):(l=d.cache,_s(i,Wt,l),l!==f.cache&&nd(i,[Wt],a,!0))),In(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Ur(t){t.flags|=4}function Hd(t,i,a,l,f){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(u0())t.flags|=8192;else throw Oa=Rc,ad}else t.flags&=-16777217}function L_(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!J0(i))if(u0())t.flags|=8192;else throw Oa=Rc,ad}function Hc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Zt():536870912,t.lanes|=i,Io|=i)}function ql(t,i){if(!We)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Ct(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function QS(t,i,a){var l=i.pendingProps;switch(Zf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(i),null;case 1:return Ct(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Vr(Wt),ot(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(go(i)?Ur(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Wf())),Ct(i),null;case 26:var f=i.type,d=i.memoizedState;return t===null?(Ur(i),d!==null?(Ct(i),L_(i,d)):(Ct(i),Hd(i,f,null,l,a))):d?d!==t.memoizedState?(Ur(i),Ct(i),L_(i,d)):(Ct(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&Ur(i),Ct(i),Hd(i,f,t,l,a)),null;case 27:if(Ti(i),a=we.current,f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Ur(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return Ct(i),null}t=ue.current,go(i)?py(i):(t=F0(f,l,a),i.stateNode=t,Ur(i))}return Ct(i),null;case 5:if(Ti(i),f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Ur(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return Ct(i),null}if(d=ue.current,go(i))py(i);else{var _=rh(we.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[Vt]=i,d[Ft]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;e:switch(xn(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ur(i)}}return Ct(i),Hd(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Ur(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=we.current,go(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,f=Rn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[Vt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||M0(t.nodeValue,a)),t||ys(i,!0)}else t=rh(t).createTextNode(l),t[Vt]=i,i.stateNode=t}return Ct(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=go(i),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Vt]=i}else Ca(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ct(i),t=!1}else a=Wf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(fi(i),i):(fi(i),null);if((i.flags&128)!==0)throw Error(s(558))}return Ct(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=go(i),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Vt]=i}else Ca(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ct(i),f=!1}else f=Wf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(fi(i),i):(fi(i),null)}return fi(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),Hc(i,i.updateQueue),Ct(i),null);case 4:return ot(),t===null&&hm(i.stateNode.containerInfo),Ct(i),null;case 10:return Vr(i.type),Ct(i),null;case 19:if(W(Kt),l=i.memoizedState,l===null)return Ct(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)ql(l,!1);else{if(zt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=Nc(t),d!==null){for(i.flags|=128,ql(l,!1),t=d.updateQueue,i.updateQueue=t,Hc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)hy(a,t),a=a.sibling;return ce(Kt,Kt.current&1|2),We&&Or(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&Xt()>$c&&(i.flags|=128,f=!0,ql(l,!1),i.lanes=4194304)}else{if(!f)if(t=Nc(d),t!==null){if(i.flags|=128,f=!0,t=t.updateQueue,i.updateQueue=t,Hc(i,t),ql(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!We)return Ct(i),null}else 2*Xt()-l.renderingStartTime>$c&&a!==536870912&&(i.flags|=128,f=!0,ql(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(t=l.last,t!==null?t.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Xt(),t.sibling=null,a=Kt.current,ce(Kt,f?a&1|2:a&1),We&&Or(i,l.treeForkCount),t):(Ct(i),null);case 22:case 23:return fi(i),fd(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(Ct(i),i.subtreeFlags&6&&(i.flags|=8192)):Ct(i),a=i.updateQueue,a!==null&&Hc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&W(Na),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Vr(Wt),Ct(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function $S(t,i){switch(Zf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Vr(Wt),ot(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Ti(i),null;case 31:if(i.memoizedState!==null){if(fi(i),i.alternate===null)throw Error(s(340));Ca()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(fi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Ca()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return W(Kt),null;case 4:return ot(),null;case 10:return Vr(i.type),null;case 22:case 23:return fi(i),fd(),t!==null&&W(Na),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Vr(Wt),null;case 25:return null;default:return null}}function U_(t,i){switch(Zf(i),i.tag){case 3:Vr(Wt),ot();break;case 26:case 27:case 5:Ti(i);break;case 4:ot();break;case 31:i.memoizedState!==null&&fi(i);break;case 13:fi(i);break;case 19:W(Kt);break;case 10:Vr(i.type);break;case 22:case 23:fi(i),fd(),t!==null&&W(Na);break;case 24:Vr(Wt)}}function Hl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(b){ct(i,i.return,b)}}function As(t,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&t)===t){var _=l.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,f=i;var N=a,F=b;try{F()}catch(ee){ct(f,N,ee)}}}l=l.next}while(l!==d)}}catch(ee){ct(i,i.return,ee)}}function z_(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{xy(i,a)}catch(l){ct(t,t.return,l)}}}function j_(t,i,a){a.props=ka(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){ct(t,i,l)}}function Fl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){ct(t,i,f)}}function gr(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){ct(t,i,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ct(t,i,f)}else a.current=null}function B_(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){ct(t,t.return,f)}}function Fd(t,i,a){try{var l=t.stateNode;pA(l,t.type,a,i),l[Ft]=i}catch(f){ct(t,t.return,f)}}function q_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ds(t.type)||t.tag===4}function Gd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||q_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ds(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kd(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Gi));else if(l!==4&&(l===27&&Ds(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Kd(t,i,a),t=t.sibling;t!==null;)Kd(t,i,a),t=t.sibling}function Fc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&Ds(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Fc(t,i,a),t=t.sibling;t!==null;)Fc(t,i,a),t=t.sibling}function H_(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);xn(i,l,a),i[Vt]=t,i[Ft]=a}catch(d){ct(t,t.return,d)}}var zr=!1,nn=!1,Qd=!1,F_=typeof WeakSet=="function"?WeakSet:Set,pn=null;function YS(t,i){if(t=t.containerInfo,mm=hh,t=ny(t),jf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,b=-1,N=-1,F=0,ee=0,ie=t,K=null;t:for(;;){for(var X;ie!==a||f!==0&&ie.nodeType!==3||(b=_+f),ie!==d||l!==0&&ie.nodeType!==3||(N=_+l),ie.nodeType===3&&(_+=ie.nodeValue.length),(X=ie.firstChild)!==null;)K=ie,ie=X;for(;;){if(ie===t)break t;if(K===a&&++F===f&&(b=_),K===d&&++ee===l&&(N=_),(X=ie.nextSibling)!==null)break;ie=K,K=ie.parentNode}ie=X}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(gm={focusedElem:t,selectionRange:a},hh=!1,pn=i;pn!==null;)if(i=pn,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,pn=t;else for(;pn!==null;){switch(i=pn,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)f=t[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Te=ka(a.type,f);t=l.getSnapshotBeforeUpdate(Te,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(xe){ct(a,a.return,xe)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)_m(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":_m(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,pn=t;break}pn=i.return}}function G_(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Br(t,a),l&4&&Hl(5,a);break;case 1:if(Br(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){ct(a,a.return,_)}else{var f=ka(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(f,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){ct(a,a.return,_)}}l&64&&z_(a),l&512&&Fl(a,a.return);break;case 3:if(Br(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{xy(t,i)}catch(_){ct(a,a.return,_)}}break;case 27:i===null&&l&4&&H_(a);case 26:case 5:Br(t,a),i===null&&l&4&&B_(a),l&512&&Fl(a,a.return);break;case 12:Br(t,a);break;case 31:Br(t,a),l&4&&$_(t,a);break;case 13:Br(t,a),l&4&&Y_(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=rA.bind(null,a),AA(t,a))));break;case 22:if(l=a.memoizedState!==null||zr,!l){i=i!==null&&i.memoizedState!==null||nn,f=zr;var d=nn;zr=l,(nn=i)&&!d?qr(t,a,(a.subtreeFlags&8772)!==0):Br(t,a),zr=f,nn=d}break;case 30:break;default:Br(t,a)}}function K_(t){var i=t.alternate;i!==null&&(t.alternate=null,K_(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&rs(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ot=null,ti=!1;function jr(t,i,a){for(a=a.child;a!==null;)Q_(t,i,a),a=a.sibling}function Q_(t,i,a){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(Gn,a)}catch{}switch(a.tag){case 26:nn||gr(a,i),jr(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:nn||gr(a,i);var l=Ot,f=ti;Ds(a.type)&&(Ot=a.stateNode,ti=!1),jr(t,i,a),Wl(a.stateNode),Ot=l,ti=f;break;case 5:nn||gr(a,i);case 6:if(l=Ot,f=ti,Ot=null,jr(t,i,a),Ot=l,ti=f,Ot!==null)if(ti)try{(Ot.nodeType===9?Ot.body:Ot.nodeName==="HTML"?Ot.ownerDocument.body:Ot).removeChild(a.stateNode)}catch(d){ct(a,i,d)}else try{Ot.removeChild(a.stateNode)}catch(d){ct(a,i,d)}break;case 18:Ot!==null&&(ti?(t=Ot,z0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Po(t)):z0(Ot,a.stateNode));break;case 4:l=Ot,f=ti,Ot=a.stateNode.containerInfo,ti=!0,jr(t,i,a),Ot=l,ti=f;break;case 0:case 11:case 14:case 15:As(2,a,i),nn||As(4,a,i),jr(t,i,a);break;case 1:nn||(gr(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&j_(a,i,l)),jr(t,i,a);break;case 21:jr(t,i,a);break;case 22:nn=(l=nn)||a.memoizedState!==null,jr(t,i,a),nn=l;break;default:jr(t,i,a)}}function $_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Po(t)}catch(a){ct(i,i.return,a)}}}function Y_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Po(t)}catch(a){ct(i,i.return,a)}}function XS(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new F_),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new F_),i;default:throw Error(s(435,t.tag))}}function Gc(t,i){var a=XS(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=sA.bind(null,t,l);l.then(f,f)}})}function ni(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=t,_=i,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(Ds(b.type)){Ot=b.stateNode,ti=!1;break e}break;case 5:Ot=b.stateNode,ti=!1;break e;case 3:case 4:Ot=b.stateNode.containerInfo,ti=!0;break e}b=b.return}if(Ot===null)throw Error(s(160));Q_(d,_,f),Ot=null,ti=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)X_(i,t),i=i.sibling}var Zi=null;function X_(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ni(i,t),ii(t),l&4&&(As(3,t,t.return),Hl(3,t),As(5,t,t.return));break;case 1:ni(i,t),ii(t),l&512&&(nn||a===null||gr(a,a.return)),l&64&&zr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=Zi;if(ni(i,t),ii(t),l&512&&(nn||a===null||gr(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[bi]||d[Vt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),xn(d,l,a),d[Vt]=t,Lt(d),l=d;break e;case"link":var _=X0("link","href",f).get(l+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break t}}d=f.createElement(l),xn(d,l,a),f.head.appendChild(d);break;case"meta":if(_=X0("meta","content",f).get(l+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break t}}d=f.createElement(l),xn(d,l,a),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[Vt]=t,Lt(d),l=d}t.stateNode=l}else Z0(f,t.type,t.stateNode);else t.stateNode=Y0(f,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?Z0(f,t.type,t.stateNode):Y0(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Fd(t,t.memoizedProps,a.memoizedProps)}break;case 27:ni(i,t),ii(t),l&512&&(nn||a===null||gr(a,a.return)),a!==null&&l&4&&Fd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(ni(i,t),ii(t),l&512&&(nn||a===null||gr(a,a.return)),t.flags&32){f=t.stateNode;try{ei(f,"")}catch(Te){ct(t,t.return,Te)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,Fd(t,f,a!==null?a.memoizedProps:f)),l&1024&&(Qd=!0);break;case 6:if(ni(i,t),ii(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Te){ct(t,t.return,Te)}}break;case 3:if(oh=null,f=Zi,Zi=sh(i.containerInfo),ni(i,t),Zi=f,ii(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Po(i.containerInfo)}catch(Te){ct(t,t.return,Te)}Qd&&(Qd=!1,Z_(t));break;case 4:l=Zi,Zi=sh(t.stateNode.containerInfo),ni(i,t),ii(t),Zi=l;break;case 12:ni(i,t),ii(t);break;case 31:ni(i,t),ii(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Gc(t,l)));break;case 13:ni(i,t),ii(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Qc=Xt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Gc(t,l)));break;case 22:f=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,F=zr,ee=nn;if(zr=F||f,nn=ee||N,ni(i,t),nn=ee,zr=F,ii(t),l&8192)e:for(i=t.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||N||zr||nn||Pa(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){N=a=i;try{if(d=N.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=N.stateNode;var ie=N.memoizedProps.style,K=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;b.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Te){ct(N,N.return,Te)}}}else if(i.tag===6){if(a===null){N=i;try{N.stateNode.nodeValue=f?"":N.memoizedProps}catch(Te){ct(N,N.return,Te)}}}else if(i.tag===18){if(a===null){N=i;try{var X=N.stateNode;f?j0(X,!0):j0(N.stateNode,!1)}catch(Te){ct(N,N.return,Te)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Gc(t,a))));break;case 19:ni(i,t),ii(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Gc(t,l)));break;case 30:break;case 21:break;default:ni(i,t),ii(t)}}function ii(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(q_(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,d=Gd(t);Fc(t,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(ei(_,""),a.flags&=-33);var b=Gd(t);Fc(t,b,_);break;case 3:case 4:var N=a.stateNode.containerInfo,F=Gd(t);Kd(t,F,N);break;default:throw Error(s(161))}}catch(ee){ct(t,t.return,ee)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Z_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Z_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Br(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)G_(t,i.alternate,i),i=i.sibling}function Pa(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:As(4,i,i.return),Pa(i);break;case 1:gr(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&j_(i,i.return,a),Pa(i);break;case 27:Wl(i.stateNode);case 26:case 5:gr(i,i.return),Pa(i);break;case 22:i.memoizedState===null&&Pa(i);break;case 30:Pa(i);break;default:Pa(i)}t=t.sibling}}function qr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=t,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:qr(f,d,a),Hl(4,d);break;case 1:if(qr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){ct(l,l.return,F)}if(l=d,f=l.updateQueue,f!==null){var b=l.stateNode;try{var N=f.shared.hiddenCallbacks;if(N!==null)for(f.shared.hiddenCallbacks=null,f=0;f<N.length;f++)Iy(N[f],b)}catch(F){ct(l,l.return,F)}}a&&_&64&&z_(d),Fl(d,d.return);break;case 27:H_(d);case 26:case 5:qr(f,d,a),a&&l===null&&_&4&&B_(d),Fl(d,d.return);break;case 12:qr(f,d,a);break;case 31:qr(f,d,a),a&&_&4&&$_(f,d);break;case 13:qr(f,d,a),a&&_&4&&Y_(f,d);break;case 22:d.memoizedState===null&&qr(f,d,a),Fl(d,d.return);break;case 30:break;default:qr(f,d,a)}i=i.sibling}}function $d(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Nl(a))}function Yd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Nl(t))}function Ji(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)J_(t,i,a,l),i=i.sibling}function J_(t,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Ji(t,i,a,l),f&2048&&Hl(9,i);break;case 1:Ji(t,i,a,l);break;case 3:Ji(t,i,a,l),f&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Nl(t)));break;case 12:if(f&2048){Ji(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){ct(i,i.return,N)}}else Ji(t,i,a,l);break;case 31:Ji(t,i,a,l);break;case 13:Ji(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?Ji(t,i,a,l):Gl(t,i):d._visibility&2?Ji(t,i,a,l):(d._visibility|=2,wo(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&$d(_,i);break;case 24:Ji(t,i,a,l),f&2048&&Yd(i.alternate,i);break;default:Ji(t,i,a,l)}}function wo(t,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,_=i,b=a,N=l,F=_.flags;switch(_.tag){case 0:case 11:case 15:wo(d,_,b,N,f),Hl(8,_);break;case 23:break;case 22:var ee=_.stateNode;_.memoizedState!==null?ee._visibility&2?wo(d,_,b,N,f):Gl(d,_):(ee._visibility|=2,wo(d,_,b,N,f)),f&&F&2048&&$d(_.alternate,_);break;case 24:wo(d,_,b,N,f),f&&F&2048&&Yd(_.alternate,_);break;default:wo(d,_,b,N,f)}i=i.sibling}}function Gl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,f=l.flags;switch(l.tag){case 22:Gl(a,l),f&2048&&$d(l.alternate,l);break;case 24:Gl(a,l),f&2048&&Yd(l.alternate,l);break;default:Gl(a,l)}i=i.sibling}}var Kl=8192;function Ro(t,i,a){if(t.subtreeFlags&Kl)for(t=t.child;t!==null;)W_(t,i,a),t=t.sibling}function W_(t,i,a){switch(t.tag){case 26:Ro(t,i,a),t.flags&Kl&&t.memoizedState!==null&&PA(a,Zi,t.memoizedState,t.memoizedProps);break;case 5:Ro(t,i,a);break;case 3:case 4:var l=Zi;Zi=sh(t.stateNode.containerInfo),Ro(t,i,a),Zi=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Kl,Kl=16777216,Ro(t,i,a),Kl=l):Ro(t,i,a));break;default:Ro(t,i,a)}}function e0(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Ql(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];pn=l,n0(l,t)}e0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)t0(t),t=t.sibling}function t0(t){switch(t.tag){case 0:case 11:case 15:Ql(t),t.flags&2048&&As(9,t,t.return);break;case 3:Ql(t);break;case 12:Ql(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Kc(t)):Ql(t);break;default:Ql(t)}}function Kc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];pn=l,n0(l,t)}e0(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:As(8,i,i.return),Kc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Kc(i));break;default:Kc(i)}t=t.sibling}}function n0(t,i){for(;pn!==null;){var a=pn;switch(a.tag){case 0:case 11:case 15:As(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Nl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,pn=l;else e:for(a=t;pn!==null;){l=pn;var f=l.sibling,d=l.return;if(K_(l),l===a){pn=null;break e}if(f!==null){f.return=d,pn=f;break e}pn=d}}}var ZS={getCacheForType:function(t){var i=Cn(Wt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Cn(Wt).controller.signal}},JS=typeof WeakMap=="function"?WeakMap:Map,at=0,Et=null,Ge=null,Qe=0,ut=0,di=null,ws=!1,Co=!1,Xd=!1,Hr=0,zt=0,Rs=0,La=0,Zd=0,mi=0,Io=0,$l=null,ri=null,Jd=!1,Qc=0,i0=0,$c=1/0,Yc=null,Cs=null,cn=0,Is=null,xo=null,Fr=0,Wd=0,em=null,r0=null,Yl=0,tm=null;function gi(){return(at&2)!==0&&Qe!==0?Qe&-Qe:J.T!==null?om():Nt()}function s0(){if(mi===0)if((Qe&536870912)===0||We){var t=Fi;Fi<<=1,(Fi&3932160)===0&&(Fi=262144),mi=t}else mi=536870912;return t=hi.current,t!==null&&(t.flags|=32),mi}function si(t,i,a){(t===Et&&(ut===2||ut===9)||t.cancelPendingCommit!==null)&&(No(t,0),xs(t,Qe,mi,!1)),Q(t,a),((at&2)===0||t!==Et)&&(t===Et&&((at&2)===0&&(La|=a),zt===4&&xs(t,Qe,mi,!1)),pr(t))}function a0(t,i,a){if((at&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||Pt(t,i),f=l?tA(t,i):im(t,i,!0),d=l;do{if(f===0){Co&&!l&&xs(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!WS(a)){f=im(t,i,!1),d=!1;continue}if(f===2){if(d=i,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var b=t;f=$l;var N=b.current.memoizedState.isDehydrated;if(N&&(No(b,_).flags|=256),_=im(b,_,!1),_!==2){if(Xd&&!N){b.errorRecoveryDisabledLanes|=d,La|=d,f=4;break e}d=ri,ri=f,d!==null&&(ri===null?ri=d:ri.push.apply(ri,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){No(t,0),xs(t,i,0,!0);break}e:{switch(l=t,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:xs(l,i,mi,!ws);break e;case 2:ri=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=Qc+300-Xt(),10<f)){if(xs(l,i,mi,!ws),wt(l,0,!0)!==0)break e;Fr=i,l.timeoutHandle=L0(o0.bind(null,l,a,ri,Yc,Jd,i,mi,La,Io,ws,d,"Throttled",-0,0),f);break e}o0(l,a,ri,Yc,Jd,i,mi,La,Io,ws,d,null,-0,0)}}break}while(!0);pr(t)}function o0(t,i,a,l,f,d,_,b,N,F,ee,ie,K,X){if(t.timeoutHandle=-1,ie=i.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gi},W_(i,d,ie);var Te=(d&62914560)===d?Qc-Xt():(d&4194048)===d?i0-Xt():0;if(Te=LA(ie,Te),Te!==null){Fr=d,t.cancelPendingCommit=Te(g0.bind(null,t,i,d,a,l,f,_,b,N,ee,ie,null,K,X)),xs(t,d,_,!F);return}}g0(t,i,d,a,l,f,_,b,N)}function WS(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!ui(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function xs(t,i,a,l){i&=~Zd,i&=~La,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var f=i;0<f;){var d=31-St(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&dt(t,a,i)}function Xc(){return(at&6)===0?(Xl(0),!1):!0}function nm(){if(Ge!==null){if(ut===0)var t=Ge.return;else t=Ge,Mr=Ia=null,_d(t),Eo=null,Ol=0,t=Ge;for(;t!==null;)U_(t.alternate,t),t=t.return;Ge=null}}function No(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,vA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Fr=0,nm(),Et=t,Ge=a=Dr(t.current,null),Qe=i,ut=0,di=null,ws=!1,Co=Pt(t,i),Xd=!1,Io=mi=Zd=La=Rs=zt=0,ri=$l=null,Jd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var f=31-St(l),d=1<<f;i|=t[f],l&=~d}return Hr=i,yc(),a}function l0(t,i){ze=null,J.H=jl,i===vo||i===wc?(i=Ay(),ut=3):i===ad?(i=Ay(),ut=4):ut=i===Vd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,di=i,Ge===null&&(zt=1,zc(t,Di(i,t.current)))}function u0(){var t=hi.current;return t===null?!0:(Qe&4194048)===Qe?ki===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?t===ki:!1}function c0(){var t=J.H;return J.H=jl,t===null?jl:t}function h0(){var t=J.A;return J.A=ZS,t}function Zc(){zt=4,ws||(Qe&4194048)!==Qe&&hi.current!==null||(Co=!0),(Rs&134217727)===0&&(La&134217727)===0||Et===null||xs(Et,Qe,mi,!1)}function im(t,i,a){var l=at;at|=2;var f=c0(),d=h0();(Et!==t||Qe!==i)&&(Yc=null,No(t,i)),i=!1;var _=zt;e:do try{if(ut!==0&&Ge!==null){var b=Ge,N=di;switch(ut){case 8:nm(),_=6;break e;case 3:case 2:case 9:case 6:hi.current===null&&(i=!0);var F=ut;if(ut=0,di=null,Do(t,b,N,F),a&&Co){_=0;break e}break;default:F=ut,ut=0,di=null,Do(t,b,N,F)}}eA(),_=zt;break}catch(ee){l0(t,ee)}while(!0);return i&&t.shellSuspendCounter++,Mr=Ia=null,at=l,J.H=f,J.A=d,Ge===null&&(Et=null,Qe=0,yc()),_}function eA(){for(;Ge!==null;)f0(Ge)}function tA(t,i){var a=at;at|=2;var l=c0(),f=h0();Et!==t||Qe!==i?(Yc=null,$c=Xt()+500,No(t,i)):Co=Pt(t,i);e:do try{if(ut!==0&&Ge!==null){i=Ge;var d=di;t:switch(ut){case 1:ut=0,di=null,Do(t,i,d,1);break;case 2:case 9:if(by(d)){ut=0,di=null,d0(i);break}i=function(){ut!==2&&ut!==9||Et!==t||(ut=7),pr(t)},d.then(i,i);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:by(d)?(ut=0,di=null,d0(i)):(ut=0,di=null,Do(t,i,d,7));break;case 5:var _=null;switch(Ge.tag){case 26:_=Ge.memoizedState;case 5:case 27:var b=Ge;if(_?J0(_):b.stateNode.complete){ut=0,di=null;var N=b.sibling;if(N!==null)Ge=N;else{var F=b.return;F!==null?(Ge=F,Jc(F)):Ge=null}break t}}ut=0,di=null,Do(t,i,d,5);break;case 6:ut=0,di=null,Do(t,i,d,6);break;case 8:nm(),zt=6;break e;default:throw Error(s(462))}}nA();break}catch(ee){l0(t,ee)}while(!0);return Mr=Ia=null,J.H=l,J.A=f,at=a,Ge!==null?0:(Et=null,Qe=0,yc(),zt)}function nA(){for(;Ge!==null&&!rr();)f0(Ge)}function f0(t){var i=P_(t.alternate,t,Hr);t.memoizedProps=t.pendingProps,i===null?Jc(t):Ge=i}function d0(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=N_(a,i,i.pendingProps,i.type,void 0,Qe);break;case 11:i=N_(a,i,i.pendingProps,i.type.render,i.ref,Qe);break;case 5:_d(i);default:U_(a,i),i=Ge=hy(i,Hr),i=P_(a,i,Hr)}t.memoizedProps=t.pendingProps,i===null?Jc(t):Ge=i}function Do(t,i,a,l){Mr=Ia=null,_d(i),Eo=null,Ol=0;var f=i.return;try{if(FS(t,f,i,a,Qe)){zt=1,zc(t,Di(a,t.current)),Ge=null;return}}catch(d){if(f!==null)throw Ge=f,d;zt=1,zc(t,Di(a,t.current)),Ge=null;return}i.flags&32768?(We||l===1?t=!0:Co||(Qe&536870912)!==0?t=!1:(ws=t=!0,(l===2||l===9||l===3||l===6)&&(l=hi.current,l!==null&&l.tag===13&&(l.flags|=16384))),m0(i,t)):Jc(i)}function Jc(t){var i=t;do{if((i.flags&32768)!==0){m0(i,ws);return}t=i.return;var a=QS(i.alternate,i,Hr);if(a!==null){Ge=a;return}if(i=i.sibling,i!==null){Ge=i;return}Ge=i=t}while(i!==null);zt===0&&(zt=5)}function m0(t,i){do{var a=$S(t.alternate,t);if(a!==null){a.flags&=32767,Ge=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ge=t;return}Ge=t=a}while(t!==null);zt=6,Ge=null}function g0(t,i,a,l,f,d,_,b,N){t.cancelPendingCommit=null;do Wc();while(cn!==0);if((at&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Gf,ft(t,a,d,_,b,N),t===Et&&(Ge=Et=null,Qe=0),xo=i,Is=t,Fr=a,Wd=d,em=f,r0=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,aA(An,function(){return E0(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=J.T,J.T=null,f=ae.p,ae.p=2,_=at,at|=4;try{YS(t,i,a)}finally{at=_,ae.p=f,J.T=l}}cn=1,p0(),y0(),_0()}}function p0(){if(cn===1){cn=0;var t=Is,i=xo,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=J.T,J.T=null;var l=ae.p;ae.p=2;var f=at;at|=4;try{X_(i,t);var d=gm,_=ny(t.containerInfo),b=d.focusedElem,N=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&ty(b.ownerDocument.documentElement,b)){if(N!==null&&jf(b)){var F=N.start,ee=N.end;if(ee===void 0&&(ee=F),"selectionStart"in b)b.selectionStart=F,b.selectionEnd=Math.min(ee,b.value.length);else{var ie=b.ownerDocument||document,K=ie&&ie.defaultView||window;if(K.getSelection){var X=K.getSelection(),Te=b.textContent.length,xe=Math.min(N.start,Te),_t=N.end===void 0?xe:Math.min(N.end,Te);!X.extend&&xe>_t&&(_=_t,_t=xe,xe=_);var U=ey(b,xe),V=ey(b,_t);if(U&&V&&(X.rangeCount!==1||X.anchorNode!==U.node||X.anchorOffset!==U.offset||X.focusNode!==V.node||X.focusOffset!==V.offset)){var H=ie.createRange();H.setStart(U.node,U.offset),X.removeAllRanges(),xe>_t?(X.addRange(H),X.extend(V.node,V.offset)):(H.setEnd(V.node,V.offset),X.addRange(H))}}}}for(ie=[],X=b;X=X.parentNode;)X.nodeType===1&&ie.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ie.length;b++){var te=ie[b];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}hh=!!mm,gm=mm=null}finally{at=f,ae.p=l,J.T=a}}t.current=i,cn=2}}function y0(){if(cn===2){cn=0;var t=Is,i=xo,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=J.T,J.T=null;var l=ae.p;ae.p=2;var f=at;at|=4;try{G_(t,i.alternate,i)}finally{at=f,ae.p=l,J.T=a}}cn=3}}function _0(){if(cn===4||cn===3){cn=0,sr();var t=Is,i=xo,a=Fr,l=r0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?cn=5:(cn=0,xo=Is=null,v0(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Cs=null),et(a),i=i.stateNode,qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(Gn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=J.T,f=ae.p,ae.p=2,J.T=null;try{for(var d=t.onRecoverableError,_=0;_<l.length;_++){var b=l[_];d(b.value,{componentStack:b.stack})}}finally{J.T=i,ae.p=f}}(Fr&3)!==0&&Wc(),pr(t),f=t.pendingLanes,(a&261930)!==0&&(f&42)!==0?t===tm?Yl++:(Yl=0,tm=t):Yl=0,Xl(0)}}function v0(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Nl(i)))}function Wc(){return p0(),y0(),_0(),E0()}function E0(){if(cn!==5)return!1;var t=Is,i=Wd;Wd=0;var a=et(Fr),l=J.T,f=ae.p;try{ae.p=32>a?32:a,J.T=null,a=em,em=null;var d=Is,_=Fr;if(cn=0,xo=Is=null,Fr=0,(at&6)!==0)throw Error(s(331));var b=at;if(at|=4,t0(d.current),J_(d,d.current,_,a),at=b,Xl(0,!1),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(Gn,d)}catch{}return!0}finally{ae.p=f,J.T=l,v0(t,i)}}function T0(t,i,a){i=Di(a,i),i=Md(t.stateNode,i,2),t=Ts(t,i,2),t!==null&&(Q(t,2),pr(t))}function ct(t,i,a){if(t.tag===3)T0(t,t,a);else for(;i!==null;){if(i.tag===3){T0(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Cs===null||!Cs.has(l))){t=Di(a,t),a=b_(2),l=Ts(i,a,2),l!==null&&(S_(a,l,i,t),Q(l,2),pr(l));break}}i=i.return}}function rm(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new JS;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(Xd=!0,f.add(a),t=iA.bind(null,t,i,a),i.then(t,t))}function iA(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Et===t&&(Qe&a)===a&&(zt===4||zt===3&&(Qe&62914560)===Qe&&300>Xt()-Qc?(at&2)===0&&No(t,0):Zd|=a,Io===Qe&&(Io=0)),pr(t)}function b0(t,i){i===0&&(i=Zt()),t=wa(t,i),t!==null&&(Q(t,i),pr(t))}function rA(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),b0(t,a)}function sA(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),b0(t,a)}function aA(t,i){return lt(t,i)}var eh=null,Oo=null,sm=!1,th=!1,am=!1,Ns=0;function pr(t){t!==Oo&&t.next===null&&(Oo===null?eh=Oo=t:Oo=Oo.next=t),th=!0,sm||(sm=!0,lA())}function Xl(t,i){if(!am&&th){am=!0;do for(var a=!1,l=eh;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-St(42|t)+1)-1,d&=f&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,R0(l,d))}else d=Qe,d=wt(l,l===Et?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Pt(l,d)||(a=!0,R0(l,d));l=l.next}while(a);am=!1}}function oA(){S0()}function S0(){th=sm=!1;var t=0;Ns!==0&&_A()&&(t=Ns);for(var i=Xt(),a=null,l=eh;l!==null;){var f=l.next,d=A0(l,i);d===0?(l.next=null,a===null?eh=f:a.next=f,f===null&&(Oo=a)):(a=l,(t!==0||(d&3)!==0)&&(th=!0)),l=f}cn!==0&&cn!==5||Xl(t),Ns!==0&&(Ns=0)}function A0(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-St(d),b=1<<_,N=f[_];N===-1?((b&a)===0||(b&l)!==0)&&(f[_]=gn(b,i)):N<=i&&(t.expiredLanes|=b),d&=~b}if(i=Et,a=Qe,a=wt(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(ut===2||ut===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&qn(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Pt(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&qn(l),et(a)){case 2:case 8:a=Hn;break;case 32:a=An;break;case 268435456:a=wr;break;default:a=An}return l=w0.bind(null,t),a=lt(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&qn(l),t.callbackPriority=2,t.callbackNode=null,2}function w0(t,i){if(cn!==0&&cn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Wc()&&t.callbackNode!==a)return null;var l=Qe;return l=wt(t,t===Et?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(a0(t,l,i),A0(t,Xt()),t.callbackNode!=null&&t.callbackNode===a?w0.bind(null,t):null)}function R0(t,i){if(Wc())return null;a0(t,i,!0)}function lA(){EA(function(){(at&6)!==0?lt(Ar,oA):S0()})}function om(){if(Ns===0){var t=yo;t===0&&(t=Zn,Zn<<=1,(Zn&261888)===0&&(Zn=256)),Ns=t}return Ns}function C0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:to(""+t)}function I0(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function uA(t,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=C0((f[Ft]||null).action),_=l.submitter;_&&(i=(i=_[Ft]||null)?C0(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var b=new ur("action","action",null,l,f);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ns!==0){var N=_?I0(f,_):new FormData(f);Cd(a,{pending:!0,data:N,method:f.method,action:d},null,N)}}else typeof d=="function"&&(b.preventDefault(),N=_?I0(f,_):new FormData(f),Cd(a,{pending:!0,data:N,method:f.method,action:d},d,N))},currentTarget:f}]})}}for(var lm=0;lm<Ff.length;lm++){var um=Ff[lm],cA=um.toLowerCase(),hA=um[0].toUpperCase()+um.slice(1);Xi(cA,"on"+hA)}Xi(sy,"onAnimationEnd"),Xi(ay,"onAnimationIteration"),Xi(oy,"onAnimationStart"),Xi("dblclick","onDoubleClick"),Xi("focusin","onFocus"),Xi("focusout","onBlur"),Xi(CS,"onTransitionRun"),Xi(IS,"onTransitionStart"),Xi(xS,"onTransitionCancel"),Xi(ly,"onTransitionEnd"),wi("onMouseEnter",["mouseout","mouseover"]),wi("onMouseLeave",["mouseout","mouseover"]),wi("onPointerEnter",["pointerout","pointerover"]),wi("onPointerLeave",["pointerout","pointerover"]),Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zl));function x0(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var b=l[_],N=b.instance,F=b.currentTarget;if(b=b.listener,N!==d&&f.isPropagationStopped())break e;d=b,f.currentTarget=F;try{d(f)}catch(ee){pc(ee)}f.currentTarget=null,d=N}else for(_=0;_<l.length;_++){if(b=l[_],N=b.instance,F=b.currentTarget,b=b.listener,N!==d&&f.isPropagationStopped())break e;d=b,f.currentTarget=F;try{d(f)}catch(ee){pc(ee)}f.currentTarget=null,d=N}}}}function Ke(t,i){var a=i[is];a===void 0&&(a=i[is]=new Set);var l=t+"__bubble";a.has(l)||(N0(i,t,2,!1),a.add(l))}function cm(t,i,a){var l=0;i&&(l|=4),N0(a,t,l,i)}var nh="_reactListening"+Math.random().toString(36).slice(2);function hm(t){if(!t[nh]){t[nh]=!0,fa.forEach(function(a){a!=="selectionchange"&&(fA.has(a)||cm(a,!1,t),cm(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[nh]||(i[nh]=!0,cm("selectionchange",!1,i))}}function N0(t,i,a,l){switch(sv(i)){case 2:var f=jA;break;case 8:f=BA;break;default:f=Rm}a=f.bind(null,i,a,t),f=void 0,!ya||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(i,a,{capture:!0,passive:f}):t.addEventListener(i,a,!0):f!==void 0?t.addEventListener(i,a,{passive:f}):t.addEventListener(i,a,!1)}function fm(t,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===f)break;if(_===4)for(_=l.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;b!==null;){if(_=Si(b),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){l=d=_;continue e}b=b.parentNode}}l=l.return}hs(function(){var F=d,ee=Ci(a),ie=[];e:{var K=uy.get(t);if(K!==void 0){var X=ur,Te=t;switch(t){case"keypress":if(va(a)===0)break e;case"keydown":case"keyup":X=dc;break;case"focusin":Te="focus",X=Ta;break;case"focusout":Te="blur",X=Ta;break;case"beforeblur":case"afterblur":X=Ta;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=bl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=rc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=y;break;case sy:case ay:case oy:X=ac;break;case ly:X=A;break;case"scroll":case"scrollend":X=Tl;break;case"wheel":X=Y;break;case"copy":case"cut":case"paste":X=oc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Nr;break;case"toggle":case"beforetoggle":X=Ue}var xe=(i&4)!==0,_t=!xe&&(t==="scroll"||t==="scrollend"),U=xe?K!==null?K+"Capture":null:K;xe=[];for(var V=F,H;V!==null;){var te=V;if(H=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||H===null||U===null||(te=Ki(V,U),te!=null&&xe.push(Jl(V,te,H))),_t)break;V=V.return}0<xe.length&&(K=new X(K,Te,null,a,ee),ie.push({event:K,listeners:xe}))}}if((i&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",X=t==="mouseout"||t==="pointerout",K&&a!==_l&&(Te=a.relatedTarget||a.fromElement)&&(Si(Te)||Te[Ee]))break e;if((X||K)&&(K=ee.window===ee?ee:(K=ee.ownerDocument)?K.defaultView||K.parentWindow:window,X?(Te=a.relatedTarget||a.toElement,X=F,Te=Te?Si(Te):null,Te!==null&&(_t=u(Te),xe=Te.tag,Te!==_t||xe!==5&&xe!==27&&xe!==6)&&(Te=null)):(X=null,Te=F),X!==Te)){if(xe=bl,te="onMouseLeave",U="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(xe=Nr,te="onPointerLeave",U="onPointerEnter",V="pointer"),_t=X==null?K:Pn(X),H=Te==null?K:Pn(Te),K=new xe(te,V+"leave",X,a,ee),K.target=_t,K.relatedTarget=H,te=null,Si(ee)===F&&(xe=new xe(U,V+"enter",Te,a,ee),xe.target=H,xe.relatedTarget=_t,te=xe),_t=te,X&&Te)t:{for(xe=dA,U=X,V=Te,H=0,te=U;te;te=xe(te))H++;te=0;for(var Ce=V;Ce;Ce=xe(Ce))te++;for(;0<H-te;)U=xe(U),H--;for(;0<te-H;)V=xe(V),te--;for(;H--;){if(U===V||V!==null&&U===V.alternate){xe=U;break t}U=xe(U),V=xe(V)}xe=null}else xe=null;X!==null&&D0(ie,K,X,xe,!1),Te!==null&&_t!==null&&D0(ie,_t,Te,xe,!0)}}e:{if(K=F?Pn(F):window,X=K.nodeName&&K.nodeName.toLowerCase(),X==="select"||X==="input"&&K.type==="file")var it=$p;else if(Kp(K))if(Yp)it=AS;else{it=bS;var Se=TS}else X=K.nodeName,!X||X.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?F&&eo(F.elementType)&&(it=$p):it=SS;if(it&&(it=it(t,F))){Qp(ie,it,a,ee);break e}Se&&Se(t,K,F),t==="focusout"&&F&&K.type==="number"&&F.memoizedProps.value!=null&&gl(K,"number",K.value)}switch(Se=F?Pn(F):window,t){case"focusin":(Kp(Se)||Se.contentEditable==="true")&&(lo=Se,Bf=F,Cl=null);break;case"focusout":Cl=Bf=lo=null;break;case"mousedown":qf=!0;break;case"contextmenu":case"mouseup":case"dragend":qf=!1,iy(ie,a,ee);break;case"selectionchange":if(RS)break;case"keydown":case"keyup":iy(ie,a,ee)}var Be;if(st)e:{switch(t){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else oo?ba(t,a)&&($e="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&($e="onCompositionStart");$e&&(fr&&a.locale!=="ko"&&(oo||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&oo&&(Be=El()):(lr=ee,vl="value"in lr?lr.value:lr.textContent,oo=!0)),Se=ih(F,$e),0<Se.length&&($e=new hr($e,t,null,a,ee),ie.push({event:$e,listeners:Se}),Be?$e.data=Be:(Be=ao(a),Be!==null&&($e.data=Be)))),(Be=xi?yS(t,a):_S(t,a))&&($e=ih(F,"onBeforeInput"),0<$e.length&&(Se=new hr("onBeforeInput","beforeinput",null,a,ee),ie.push({event:Se,listeners:$e}),Se.data=Be)),uA(ie,t,F,a,ee)}x0(ie,i)})}function Jl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function ih(t,i){for(var a=i+"Capture",l=[];t!==null;){var f=t,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Ki(t,a),f!=null&&l.unshift(Jl(t,f,d)),f=Ki(t,i),f!=null&&l.push(Jl(t,f,d))),t.tag===3)return l;t=t.return}return[]}function dA(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function D0(t,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var b=a,N=b.alternate,F=b.stateNode;if(b=b.tag,N!==null&&N===l)break;b!==5&&b!==26&&b!==27||F===null||(N=F,f?(F=Ki(a,d),F!=null&&_.unshift(Jl(a,F,N))):f||(F=Ki(a,d),F!=null&&_.push(Jl(a,F,N)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var mA=/\r\n?/g,gA=/\u0000|\uFFFD/g;function O0(t){return(typeof t=="string"?t:""+t).replace(mA,`
`).replace(gA,"")}function M0(t,i){return i=O0(i),O0(t)===i}function yt(t,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||ei(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&ei(t,""+l);break;case"className":$(t,"class",l);break;case"tabIndex":$(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":$(t,a,l);break;case"style":yl(t,l,d);break;case"data":if(i!=="object"){$(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=to(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&yt(t,i,"name",f.name,f,null),yt(t,i,"formEncType",f.formEncType,f,null),yt(t,i,"formMethod",f.formMethod,f,null),yt(t,i,"formTarget",f.formTarget,f,null)):(yt(t,i,"encType",f.encType,f,null),yt(t,i,"method",f.method,f,null),yt(t,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=to(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Gi);break;case"onScroll":l!=null&&Ke("scroll",t);break;case"onScrollEnd":l!=null&&Ke("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=to(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ke("beforetoggle",t),Ke("toggle",t),j(t,"popover",l);break;case"xlinkActuate":G(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":G(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":G(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":G(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":G(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":G(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":G(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":G(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":G(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":j(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=ic.get(a)||a,j(t,a,l))}}function dm(t,i,a,l,f,d){switch(a){case"style":yl(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?ei(t,l):(typeof l=="number"||typeof l=="bigint")&&ei(t,""+l);break;case"onScroll":l!=null&&Ke("scroll",t);break;case"onScrollEnd":l!=null&&Ke("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Gi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ss.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=t[Ft]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):j(t,a,l)}}}function xn(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",t),Ke("load",t);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:yt(t,i,d,_,a,null)}}f&&yt(t,i,"srcSet",a.srcSet,a,null),l&&yt(t,i,"src",a.src,a,null);return;case"input":Ke("invalid",t);var b=d=_=f=null,N=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var ee=a[l];if(ee!=null)switch(l){case"name":f=ee;break;case"type":_=ee;break;case"checked":N=ee;break;case"defaultChecked":F=ee;break;case"value":d=ee;break;case"defaultValue":b=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,i));break;default:yt(t,i,l,ee,a,null)}}ec(t,d,b,N,F,_,f,!1);return;case"select":Ke("invalid",t),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(b=a[f],b!=null))switch(f){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":l=b;default:yt(t,i,f,b,a,null)}i=d,a=_,t.multiple=!!l,i!=null?os(t,!!l,i,!1):a!=null&&os(t,!!l,a,!0);return;case"textarea":Ke("invalid",t),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":l=b;break;case"defaultValue":f=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:yt(t,i,_,b,a,null)}ls(t,l,f,d);return;case"option":for(N in a)a.hasOwnProperty(N)&&(l=a[N],l!=null)&&(N==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":yt(t,i,N,l,a,null));return;case"dialog":Ke("beforetoggle",t),Ke("toggle",t),Ke("cancel",t),Ke("close",t);break;case"iframe":case"object":Ke("load",t);break;case"video":case"audio":for(l=0;l<Zl.length;l++)Ke(Zl[l],t);break;case"image":Ke("error",t),Ke("load",t);break;case"details":Ke("toggle",t);break;case"embed":case"source":case"link":Ke("error",t),Ke("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:yt(t,i,F,l,a,null)}return;default:if(eo(i)){for(ee in a)a.hasOwnProperty(ee)&&(l=a[ee],l!==void 0&&dm(t,i,ee,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&yt(t,i,b,l,a,null))}function pA(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,b=null,N=null,F=null,ee=null;for(X in a){var ie=a[X];if(a.hasOwnProperty(X)&&ie!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":N=ie;default:l.hasOwnProperty(X)||yt(t,i,X,null,l,ie)}}for(var K in l){var X=l[K];if(ie=a[K],l.hasOwnProperty(K)&&(X!=null||ie!=null))switch(K){case"type":d=X;break;case"name":f=X;break;case"checked":F=X;break;case"defaultChecked":ee=X;break;case"value":_=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:X!==ie&&yt(t,i,K,X,l,ie)}}Wa(t,_,b,N,F,ee,d,f);return;case"select":X=_=b=K=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":X=N;default:l.hasOwnProperty(d)||yt(t,i,d,null,l,N)}for(f in l)if(d=l[f],N=a[f],l.hasOwnProperty(f)&&(d!=null||N!=null))switch(f){case"value":K=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==N&&yt(t,i,f,d,l,N)}i=b,a=_,l=X,K!=null?os(t,!!a,K,!1):!!l!=!!a&&(i!=null?os(t,!!a,i,!0):os(t,!!a,a?[]:"",!1));return;case"textarea":X=K=null;for(b in a)if(f=a[b],a.hasOwnProperty(b)&&f!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:yt(t,i,b,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":K=f;break;case"defaultValue":X=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&yt(t,i,_,f,l,d)}tc(t,K,X);return;case"option":for(var Te in a)K=a[Te],a.hasOwnProperty(Te)&&K!=null&&!l.hasOwnProperty(Te)&&(Te==="selected"?t.selected=!1:yt(t,i,Te,null,l,K));for(N in l)K=l[N],X=a[N],l.hasOwnProperty(N)&&K!==X&&(K!=null||X!=null)&&(N==="selected"?t.selected=K&&typeof K!="function"&&typeof K!="symbol":yt(t,i,N,K,l,X));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in a)K=a[xe],a.hasOwnProperty(xe)&&K!=null&&!l.hasOwnProperty(xe)&&yt(t,i,xe,null,l,K);for(F in l)if(K=l[F],X=a[F],l.hasOwnProperty(F)&&K!==X&&(K!=null||X!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,i));break;default:yt(t,i,F,K,l,X)}return;default:if(eo(i)){for(var _t in a)K=a[_t],a.hasOwnProperty(_t)&&K!==void 0&&!l.hasOwnProperty(_t)&&dm(t,i,_t,void 0,l,K);for(ee in l)K=l[ee],X=a[ee],!l.hasOwnProperty(ee)||K===X||K===void 0&&X===void 0||dm(t,i,ee,K,l,X);return}}for(var U in a)K=a[U],a.hasOwnProperty(U)&&K!=null&&!l.hasOwnProperty(U)&&yt(t,i,U,null,l,K);for(ie in l)K=l[ie],X=a[ie],!l.hasOwnProperty(ie)||K===X||K==null&&X==null||yt(t,i,ie,K,l,X)}function V0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function yA(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,b=f.duration;if(d&&b&&V0(_)){for(_=0,b=f.responseEnd,l+=1;l<a.length;l++){var N=a[l],F=N.startTime;if(F>b)break;var ee=N.transferSize,ie=N.initiatorType;ee&&V0(ie)&&(N=N.responseEnd,_+=ee*(N<b?1:(b-F)/(N-F)))}if(--l,i+=8*(d+_)/(f.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var mm=null,gm=null;function rh(t){return t.nodeType===9?t:t.ownerDocument}function k0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function P0(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function pm(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ym=null;function _A(){var t=window.event;return t&&t.type==="popstate"?t===ym?!1:(ym=t,!0):(ym=null,!1)}var L0=typeof setTimeout=="function"?setTimeout:void 0,vA=typeof clearTimeout=="function"?clearTimeout:void 0,U0=typeof Promise=="function"?Promise:void 0,EA=typeof queueMicrotask=="function"?queueMicrotask:typeof U0<"u"?function(t){return U0.resolve(null).then(t).catch(TA)}:L0;function TA(t){setTimeout(function(){throw t})}function Ds(t){return t==="head"}function z0(t,i){var a=i,l=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(f),Po(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Wl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Wl(a);for(var d=a.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[bi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&Wl(t.ownerDocument.body);a=f}while(a);Po(i)}function j0(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function _m(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":_m(a),rs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function bA(t,i,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[bi])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Pi(t.nextSibling),t===null)break}return null}function SA(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Pi(t.nextSibling),t===null))return null;return t}function B0(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Pi(t.nextSibling),t===null))return null;return t}function vm(t){return t.data==="$?"||t.data==="$~"}function Em(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function AA(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Pi(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Tm=null;function q0(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return Pi(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function H0(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function F0(t,i,a){switch(i=rh(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Wl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);rs(t)}var Li=new Map,G0=new Set;function sh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Gr=ae.d;ae.d={f:wA,r:RA,D:CA,C:IA,L:xA,m:NA,X:OA,S:DA,M:MA};function wA(){var t=Gr.f(),i=Xc();return t||i}function RA(t){var i=Kn(t);i!==null&&i.tag===5&&i.type==="form"?l_(i):Gr.r(t)}var Mo=typeof document>"u"?null:document;function K0(t,i,a){var l=Mo;if(l&&typeof i=="string"&&i){var f=Wn(i);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),G0.has(f)||(G0.add(f),t={rel:t,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),xn(i,"link",t),Lt(i),l.head.appendChild(i)))}}function CA(t){Gr.D(t),K0("dns-prefetch",t,null)}function IA(t,i){Gr.C(t,i),K0("preconnect",t,i)}function xA(t,i,a){Gr.L(t,i,a);var l=Mo;if(l&&t&&i){var f='link[rel="preload"][as="'+Wn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Wn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Wn(a.imageSizes)+'"]')):f+='[href="'+Wn(t)+'"]';var d=f;switch(i){case"style":d=Vo(t);break;case"script":d=ko(t)}Li.has(d)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Li.set(d,t),l.querySelector(f)!==null||i==="style"&&l.querySelector(eu(d))||i==="script"&&l.querySelector(tu(d))||(i=l.createElement("link"),xn(i,"link",t),Lt(i),l.head.appendChild(i)))}}function NA(t,i){Gr.m(t,i);var a=Mo;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Wn(l)+'"][href="'+Wn(t)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=ko(t)}if(!Li.has(d)&&(t=T({rel:"modulepreload",href:t},i),Li.set(d,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(tu(d)))return}l=a.createElement("link"),xn(l,"link",t),Lt(l),a.head.appendChild(l)}}}function DA(t,i,a){Gr.S(t,i,a);var l=Mo;if(l&&t){var f=Ai(l).hoistableStyles,d=Vo(t);i=i||"default";var _=f.get(d);if(!_){var b={loading:0,preload:null};if(_=l.querySelector(eu(d)))b.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Li.get(d))&&bm(t,a);var N=_=l.createElement("link");Lt(N),xn(N,"link",t),N._p=new Promise(function(F,ee){N.onload=F,N.onerror=ee}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,ah(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:b},f.set(d,_)}}}function OA(t,i){Gr.X(t,i);var a=Mo;if(a&&t){var l=Ai(a).hoistableScripts,f=ko(t),d=l.get(f);d||(d=a.querySelector(tu(f)),d||(t=T({src:t,async:!0},i),(i=Li.get(f))&&Sm(t,i),d=a.createElement("script"),Lt(d),xn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function MA(t,i){Gr.M(t,i);var a=Mo;if(a&&t){var l=Ai(a).hoistableScripts,f=ko(t),d=l.get(f);d||(d=a.querySelector(tu(f)),d||(t=T({src:t,async:!0,type:"module"},i),(i=Li.get(f))&&Sm(t,i),d=a.createElement("script"),Lt(d),xn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Q0(t,i,a,l){var f=(f=we.current)?sh(f):null;if(!f)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Vo(a.href),a=Ai(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Vo(a.href);var d=Ai(f).hoistableStyles,_=d.get(t);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=f.querySelector(eu(t)))&&!d._p&&(_.instance=d,_.state.loading=5),Li.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Li.set(t,a),d||VA(f,t,a,_.state))),i&&l===null)throw Error(s(528,""));return _}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ko(a),a=Ai(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Vo(t){return'href="'+Wn(t)+'"'}function eu(t){return'link[rel="stylesheet"]['+t+"]"}function $0(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function VA(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),xn(i,"link",a),Lt(i),t.head.appendChild(i))}function ko(t){return'[src="'+Wn(t)+'"]'}function tu(t){return"script[async]"+t}function Y0(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Wn(a.href)+'"]');if(l)return i.instance=l,Lt(l),l;var f=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Lt(l),xn(l,"style",f),ah(l,a.precedence,t),i.instance=l;case"stylesheet":f=Vo(a.href);var d=t.querySelector(eu(f));if(d)return i.state.loading|=4,i.instance=d,Lt(d),d;l=$0(a),(f=Li.get(f))&&bm(l,f),d=(t.ownerDocument||t).createElement("link"),Lt(d);var _=d;return _._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),xn(d,"link",l),i.state.loading|=4,ah(d,a.precedence,t),i.instance=d;case"script":return d=ko(a.src),(f=t.querySelector(tu(d)))?(i.instance=f,Lt(f),f):(l=a,(f=Li.get(d))&&(l=T({},a),Sm(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),Lt(f),xn(f,"link",l),t.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,ah(l,a.precedence,t));return i.instance}function ah(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var b=l[_];if(b.dataset.precedence===i)d=b;else if(d!==f)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function bm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Sm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var oh=null;function X0(t,i,a){if(oh===null){var l=new Map,f=oh=new Map;f.set(a,l)}else f=oh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var d=a[f];if(!(d[bi]||d[Vt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=t+_;var b=l.get(_);b?b.push(d):l.set(_,[d])}}return l}function Z0(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function kA(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(t=i.disabled,typeof i.precedence=="string"&&t==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function J0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function PA(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Vo(l.href),d=i.querySelector(eu(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=lh.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,Lt(d);return}d=i.ownerDocument||i,l=$0(l),(f=Li.get(f))&&bm(l,f),d=d.createElement("link"),Lt(d);var _=d;_._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),xn(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=lh.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var Am=0;function LA(t,i){return t.stylesheets&&t.count===0&&ch(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&ch(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&Am===0&&(Am=62500*yA());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&ch(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>Am?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function lh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ch(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var uh=null;function ch(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,uh=new Map,i.forEach(UA,t),uh=null,lh.call(t))}function UA(t,i){if(!(i.state.loading&4)){var a=uh.get(t);if(a)var l=a.get(null);else{a=new Map,uh.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=lh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),i.state.loading|=4}}var nu={$$typeof:oe,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function zA(t,i,a,l,f,d,_,b,N){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mt(0),this.hiddenUpdates=Mt(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function W0(t,i,a,l,f,d,_,b,N,F,ee,ie){return t=new zA(t,i,a,_,N,F,ee,ie,b),i=1,d===!0&&(i|=24),d=ci(3,null,null,i),t.current=d,d.stateNode=t,i=id(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},od(d),t}function ev(t){return t?(t=ho,t):ho}function tv(t,i,a,l,f,d){f=ev(f),l.context===null?l.context=f:l.pendingContext=f,l=Es(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Ts(t,l,i),a!==null&&(si(a,t,i),Vl(a,t,i))}function nv(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function wm(t,i){nv(t,i),(t=t.alternate)&&nv(t,i)}function iv(t){if(t.tag===13||t.tag===31){var i=wa(t,67108864);i!==null&&si(i,t,67108864),wm(t,67108864)}}function rv(t){if(t.tag===13||t.tag===31){var i=gi();i=ln(i);var a=wa(t,i);a!==null&&si(a,t,i),wm(t,i)}}var hh=!0;function jA(t,i,a,l){var f=J.T;J.T=null;var d=ae.p;try{ae.p=2,Rm(t,i,a,l)}finally{ae.p=d,J.T=f}}function BA(t,i,a,l){var f=J.T;J.T=null;var d=ae.p;try{ae.p=8,Rm(t,i,a,l)}finally{ae.p=d,J.T=f}}function Rm(t,i,a,l){if(hh){var f=Cm(l);if(f===null)fm(t,i,l,fh,a),av(t,l);else if(HA(f,t,i,a,l))l.stopPropagation();else if(av(t,l),i&4&&-1<qA.indexOf(t)){for(;f!==null;){var d=Kn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=At(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var N=1<<31-St(_);b.entanglements[1]|=N,_&=~N}pr(d),(at&6)===0&&($c=Xt()+500,Xl(0))}}break;case 31:case 13:b=wa(d,2),b!==null&&si(b,d,2),Xc(),wm(d,2)}if(d=Cm(l),d===null&&fm(t,i,l,fh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else fm(t,i,l,null,a)}}function Cm(t){return t=Ci(t),Im(t)}var fh=null;function Im(t){if(fh=null,t=Si(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=h(i),t!==null)return t;t=null}else if(a===31){if(t=m(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return fh=t,null}function sv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bi()){case Ar:return 2;case Hn:return 8;case An:case qi:return 32;case wr:return 268435456;default:return 32}default:return 32}}var xm=!1,Os=null,Ms=null,Vs=null,iu=new Map,ru=new Map,ks=[],qA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function av(t,i){switch(t){case"focusin":case"focusout":Os=null;break;case"dragenter":case"dragleave":Ms=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":iu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ru.delete(i.pointerId)}}function su(t,i,a,l,f,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Kn(i),i!==null&&iv(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),t)}function HA(t,i,a,l,f){switch(i){case"focusin":return Os=su(Os,t,i,a,l,f),!0;case"dragenter":return Ms=su(Ms,t,i,a,l,f),!0;case"mouseover":return Vs=su(Vs,t,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return iu.set(d,su(iu.get(d)||null,t,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,ru.set(d,su(ru.get(d)||null,t,i,a,l,f)),!0}return!1}function ov(t){var i=Si(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){t.blockedOn=i,un(t.priority,function(){rv(a)});return}}else if(i===31){if(i=m(a),i!==null){t.blockedOn=i,un(t.priority,function(){rv(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function dh(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Cm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);_l=l,a.target.dispatchEvent(l),_l=null}else return i=Kn(a),i!==null&&iv(i),t.blockedOn=a,!1;i.shift()}return!0}function lv(t,i,a){dh(t)&&a.delete(i)}function FA(){xm=!1,Os!==null&&dh(Os)&&(Os=null),Ms!==null&&dh(Ms)&&(Ms=null),Vs!==null&&dh(Vs)&&(Vs=null),iu.forEach(lv),ru.forEach(lv)}function mh(t,i){t.blockedOn===i&&(t.blockedOn=null,xm||(xm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,FA)))}var gh=null;function uv(t){gh!==t&&(gh=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){gh===t&&(gh=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],f=t[i+2];if(typeof l!="function"){if(Im(l||a)===null)continue;break}var d=Kn(a);d!==null&&(t.splice(i,3),i-=3,Cd(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Po(t){function i(N){return mh(N,t)}Os!==null&&mh(Os,t),Ms!==null&&mh(Ms,t),Vs!==null&&mh(Vs,t),iu.forEach(i),ru.forEach(i);for(var a=0;a<ks.length;a++){var l=ks[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ks.length&&(a=ks[0],a.blockedOn===null);)ov(a),a.blockedOn===null&&ks.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[Ft]||null;if(typeof d=="function")_||uv(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[Ft]||null)b=_.formAction;else if(Im(f)!==null)continue}else b=_.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),uv(a)}}}function cv(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Nm(t){this._internalRoot=t}ph.prototype.render=Nm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=gi();tv(a,l,t,i,null,null)},ph.prototype.unmount=Nm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;tv(t.current,2,null,t,null,null),Xc(),i[Ee]=null}};function ph(t){this._internalRoot=t}ph.prototype.unstable_scheduleHydration=function(t){if(t){var i=Nt();t={blockedOn:null,target:t,priority:i};for(var a=0;a<ks.length&&i!==0&&i<ks[a].priority;a++);ks.splice(a,0,t),a===0&&ov(t)}};var hv=e.version;if(hv!=="19.2.3")throw Error(s(527,hv,"19.2.3"));ae.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(i),t=t!==null?E(t):null,t=t===null?null:t.stateNode,t};var GA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yh.isDisabled&&yh.supportsFiber)try{Gn=yh.inject(GA),qt=yh}catch{}}return ou.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",f=__,d=v_,_=E_;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=W0(t,1,!1,null,null,a,l,null,f,d,_,cv),t[Ee]=i.current,hm(t),new Nm(i)},ou.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,f="",d=__,_=v_,b=E_,N=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),i=W0(t,1,!0,i,a??null,l,f,N,d,_,b,cv),i.context=ev(null),a=i.current,l=gi(),l=ln(l),f=Es(l),f.callback=null,Ts(a,f,l),a=l,i.current.lanes=a,Q(i,a),pr(i),t[Ee]=i.current,hm(t),new ph(i)},ou.version="19.2.3",ou}var Tv;function tw(){if(Tv)return Mm.exports;Tv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Mm.exports=ew(),Mm.exports}var nw=tw();const iw=()=>P.jsxs("div",{className:"fixed inset-0 -z-50 overflow-hidden pointer-events-none bg-[#020617]",children:[P.jsx("div",{className:"bg-blob opacity-20 w-[800px] h-[800px] -top-96 -left-96 bg-indigo-600 blur-[120px]"}),P.jsx("div",{className:"bg-blob opacity-30 w-[600px] h-[600px] top-1/2 -right-48 bg-pink-600 blur-[100px]",style:{animationDelay:"-5s",animationDuration:"25s"}}),P.jsx("div",{className:"bg-blob opacity-10 w-[500px] h-[500px] bottom-0 left-1/4 bg-cyan-400 blur-[80px]",style:{animationDelay:"-12s",animationDuration:"18s"}}),P.jsx("div",{className:"absolute inset-0 bg-radial-at-t from-transparent via-slate-950/40 to-slate-950"}),P.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"})]});const rw=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sw=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),bv=r=>{const e=sw(r);return e.charAt(0).toUpperCase()+e.slice(1)},AT=(...r)=>r.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),aw=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var ow={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const lw=Z.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:h,...m},g)=>Z.createElement("svg",{ref:g,...ow,width:e,height:e,stroke:r,strokeWidth:s?Number(n)*24/Number(e):n,className:AT("lucide",o),...!u&&!aw(m)&&{"aria-hidden":"true"},...m},[...h.map(([p,E])=>Z.createElement(p,E)),...Array.isArray(u)?u:[u]]));const Ei=(r,e)=>{const n=Z.forwardRef(({className:s,...o},u)=>Z.createElement(lw,{ref:u,iconNode:e,className:AT(`lucide-${rw(bv(r))}`,`lucide-${r}`,s),...o}));return n.displayName=bv(r),n};const uw=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Rh=Ei("arrow-left",uw);const cw=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],hw=Ei("arrow-right",cw);const fw=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],dw=Ei("copy",fw);const mw=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],gw=Ei("flag",mw);const pw=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],yw=Ei("loader-circle",pw);const _w=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],vw=Ei("log-in",_w);const Ew=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Tw=Ei("plus",Ew);const bw=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Sw=Ei("rotate-ccw",bw);const Aw=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],ww=Ei("share-2",Aw);const Rw=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Sv=Ei("trophy",Rw);const Cw=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Lm=Ei("user",Cw);const Iw=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],wT=Ei("users",Iw);const xw=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Nw=Ei("zap",xw),Dw=()=>{};var Av={};const RT=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Ow=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],h=r[n++],m=r[n++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=r[n++],h=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},CT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],h=o+1<r.length,m=h?r[o+1]:0,g=o+2<r.length,p=g?r[o+2]:0,E=u>>2,T=(u&3)<<4|m>>4;let S=(m&15)<<2|p>>6,x=p&63;g||(x=64,h||(S=64)),s.push(n[E],n[T],n[S],n[x])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(RT(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Ow(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const p=o<r.length?n[r.charAt(o)]:64;++o;const T=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||p==null||T==null)throw new Mw;const S=u<<2|m>>4;if(s.push(S),p!==64){const x=m<<4&240|p>>2;if(s.push(x),T!==64){const L=p<<6&192|T;s.push(L)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Mw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vw=function(r){const e=RT(r);return CT.encodeByteArray(e,!0)},Bh=function(r){return Vw(r).replace(/\./g,"")},IT=function(r){try{return CT.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function kw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Pw=()=>kw().__FIREBASE_DEFAULTS__,Lw=()=>{if(typeof process>"u"||typeof Av>"u")return;const r=Av.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Uw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&IT(r[1]);return e&&JSON.parse(e)},df=()=>{try{return Dw()||Pw()||Lw()||Uw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},xT=r=>df()?.emulatorHosts?.[r],zw=r=>{const e=xT(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},NT=()=>df()?.config,DT=r=>df()?.[`_${r}`];class jw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function sl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function OT(r){return(await fetch(r,{credentials:"include"})).ok}function Bw(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Bh(JSON.stringify(n)),Bh(JSON.stringify(h)),""].join(".")}const gu={};function qw(){const r={prod:[],emulator:[]};for(const e of Object.keys(gu))gu[e]?r.emulator.push(e):r.prod.push(e);return r}function Hw(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let wv=!1;function MT(r,e){if(typeof window>"u"||typeof document>"u"||!sl(window.location.host)||gu[r]===e||gu[r]||wv)return;gu[r]=e;function n(S){return`__firebase__banner__${S}`}const s="__firebase__banner",u=qw().prod.length>0;function h(){const S=document.getElementById(s);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,x){S.setAttribute("width","24"),S.setAttribute("id",x),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{wv=!0,h()},S}function E(S,x){S.setAttribute("id",x),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=Hw(s),x=n("text"),L=document.getElementById(x)||document.createElement("span"),z=n("learnmore"),q=document.getElementById(z)||document.createElement("a"),se=n("preprendIcon"),he=document.getElementById(se)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const oe=S.element;m(oe),E(q,z);const be=p();g(he,se),oe.append(he,L,q,be),document.body.appendChild(oe)}u?(L.innerText="Preview backend disconnected.",he.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(he.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function Bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bn())}function Gw(){const r=df()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Kw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Qw(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function $w(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Yw(){const r=Bn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Xw(){return!Gw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Zw(){try{return typeof indexedDB=="object"}catch{return!1}}function Jw(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const Ww="FirebaseError";class ts extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Ww,Object.setPrototypeOf(this,ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lu.prototype.create)}}class Lu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?eR(u,s):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new ts(o,m,s)}}function eR(r,e){return r.replace(tR,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const tR=/\{\$([^}]+)}/g;function nR(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Fa(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],h=e[o];if(Rv(u)&&Rv(h)){if(!Fa(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Rv(r){return r!==null&&typeof r=="object"}function Uu(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function iR(r,e){const n=new rR(r,e);return n.subscribe.bind(n)}class rR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");sR(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Um),o.error===void 0&&(o.error=Um),o.complete===void 0&&(o.complete=Um);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sR(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Um(){}function Sn(r){return r&&r._delegate?r._delegate:r}class Ga{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const za="[DEFAULT]";class aR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new jw;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lR(e))try{this.getOrInitializeService({instanceIdentifier:za})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=za){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=za){return this.instances.has(e)}getOptions(e=za){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&h.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:oR(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=za){return this.component?this.component.multipleInstances?e:za:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oR(r){return r===za?void 0:r}function lR(r){return r.instantiationMode==="EAGER"}class uR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new aR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ye;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ye||(Ye={}));const cR={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},hR=Ye.INFO,fR={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},dR=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=fR[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gg{constructor(e){this.name=e,this._logLevel=hR,this._logHandler=dR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const mR=(r,e)=>e.some(n=>r instanceof n);let Cv,Iv;function gR(){return Cv||(Cv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pR(){return Iv||(Iv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VT=new WeakMap,lg=new WeakMap,kT=new WeakMap,zm=new WeakMap,Kg=new WeakMap;function yR(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",h)},u=()=>{n(Qs(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&VT.set(n,r)}).catch(()=>{}),Kg.set(e,r),e}function _R(r){if(lg.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",h),r.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",h),r.addEventListener("abort",h)});lg.set(r,e)}let ug={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return lg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||kT.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qs(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function vR(r){ug=r(ug)}function ER(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(jm(this),e,...n);return kT.set(s,e.sort?e.sort():[e]),Qs(s)}:pR().includes(r)?function(...e){return r.apply(jm(this),e),Qs(VT.get(this))}:function(...e){return Qs(r.apply(jm(this),e))}}function TR(r){return typeof r=="function"?ER(r):(r instanceof IDBTransaction&&_R(r),mR(r,gR())?new Proxy(r,ug):r)}function Qs(r){if(r instanceof IDBRequest)return yR(r);if(zm.has(r))return zm.get(r);const e=TR(r);return e!==r&&(zm.set(r,e),Kg.set(e,r)),e}const jm=r=>Kg.get(r);function bR(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(r,e),m=Qs(h);return s&&h.addEventListener("upgradeneeded",g=>{s(Qs(h.result),g.oldVersion,g.newVersion,Qs(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const SR=["get","getKey","getAll","getAllKeys","count"],AR=["put","add","delete","clear"],Bm=new Map;function xv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Bm.get(e))return Bm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=AR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||SR.includes(n)))return;const u=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(m.shift())),(await Promise.all([p[n](...m),o&&g.done]))[0]};return Bm.set(e,u),u}vR(r=>({...r,get:(e,n,s)=>xv(e,n)||r.get(e,n,s),has:(e,n)=>!!xv(e,n)||r.has(e,n)}));class wR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(RR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function RR(r){return r.getComponent()?.type==="VERSION"}const cg="@firebase/app",Nv="0.14.6";const Xr=new Gg("@firebase/app"),CR="@firebase/app-compat",IR="@firebase/analytics-compat",xR="@firebase/analytics",NR="@firebase/app-check-compat",DR="@firebase/app-check",OR="@firebase/auth",MR="@firebase/auth-compat",VR="@firebase/database",kR="@firebase/data-connect",PR="@firebase/database-compat",LR="@firebase/functions",UR="@firebase/functions-compat",zR="@firebase/installations",jR="@firebase/installations-compat",BR="@firebase/messaging",qR="@firebase/messaging-compat",HR="@firebase/performance",FR="@firebase/performance-compat",GR="@firebase/remote-config",KR="@firebase/remote-config-compat",QR="@firebase/storage",$R="@firebase/storage-compat",YR="@firebase/firestore",XR="@firebase/ai",ZR="@firebase/firestore-compat",JR="firebase",WR="12.6.0";const hg="[DEFAULT]",eC={[cg]:"fire-core",[CR]:"fire-core-compat",[xR]:"fire-analytics",[IR]:"fire-analytics-compat",[DR]:"fire-app-check",[NR]:"fire-app-check-compat",[OR]:"fire-auth",[MR]:"fire-auth-compat",[VR]:"fire-rtdb",[kR]:"fire-data-connect",[PR]:"fire-rtdb-compat",[LR]:"fire-fn",[UR]:"fire-fn-compat",[zR]:"fire-iid",[jR]:"fire-iid-compat",[BR]:"fire-fcm",[qR]:"fire-fcm-compat",[HR]:"fire-perf",[FR]:"fire-perf-compat",[GR]:"fire-rc",[KR]:"fire-rc-compat",[QR]:"fire-gcs",[$R]:"fire-gcs-compat",[YR]:"fire-fst",[ZR]:"fire-fst-compat",[XR]:"fire-vertex","fire-js":"fire-js",[JR]:"fire-js-all"};const wu=new Map,tC=new Map,fg=new Map;function Dv(r,e){try{r.container.addComponent(e)}catch(n){Xr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Xo(r){const e=r.name;if(fg.has(e))return Xr.debug(`There were multiple attempts to register component ${e}.`),!1;fg.set(e,r);for(const n of wu.values())Dv(n,r);for(const n of tC.values())Dv(n,r);return!0}function Qg(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Wi(r){return r==null?!1:r.settings!==void 0}const nC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$s=new Lu("app","Firebase",nC);class iC{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ga("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $s.create("app-deleted",{appName:this._name})}}const al=WR;function PT(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:hg,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw $s.create("bad-app-name",{appName:String(o)});if(n||(n=NT()),!n)throw $s.create("no-options");const u=wu.get(o);if(u){if(Fa(n,u.options)&&Fa(s,u.config))return u;throw $s.create("duplicate-app",{appName:o})}const h=new uR(o);for(const g of fg.values())h.addComponent(g);const m=new iC(n,s,h);return wu.set(o,m),m}function LT(r=hg){const e=wu.get(r);if(!e&&r===hg&&NT())return PT();if(!e)throw $s.create("no-app",{appName:r});return e}function Ov(){return Array.from(wu.values())}function Ys(r,e,n){let s=eC[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xr.warn(h.join(" "));return}Xo(new Ga(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const rC="firebase-heartbeat-database",sC=1,Ru="firebase-heartbeat-store";let qm=null;function UT(){return qm||(qm=bR(rC,sC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ru)}catch(n){console.warn(n)}}}}).catch(r=>{throw $s.create("idb-open",{originalErrorMessage:r.message})})),qm}async function aC(r){try{const n=(await UT()).transaction(Ru),s=await n.objectStore(Ru).get(zT(r));return await n.done,s}catch(e){if(e instanceof ts)Xr.warn(e.message);else{const n=$s.create("idb-get",{originalErrorMessage:e?.message});Xr.warn(n.message)}}}async function Mv(r,e){try{const s=(await UT()).transaction(Ru,"readwrite");await s.objectStore(Ru).put(e,zT(r)),await s.done}catch(n){if(n instanceof ts)Xr.warn(n.message);else{const s=$s.create("idb-set",{originalErrorMessage:n?.message});Xr.warn(s.message)}}}function zT(r){return`${r.name}!${r.options.appId}`}const oC=1024,lC=30;class uC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hC(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Vv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>lC){const o=fC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Xr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Vv(),{heartbeatsToSend:n,unsentEntries:s}=cC(this._heartbeatsCache.heartbeats),o=Bh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Xr.warn(e),""}}}function Vv(){return new Date().toISOString().substring(0,10)}function cC(r,e=oC){const n=[];let s=r.slice();for(const o of r){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),kv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),kv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class hC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Zw()?Jw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await aC(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Mv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Mv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function kv(r){return Bh(JSON.stringify({version:2,heartbeats:r})).length}function fC(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}function dC(r){Xo(new Ga("platform-logger",e=>new wR(e),"PRIVATE")),Xo(new Ga("heartbeat",e=>new uC(e),"PRIVATE")),Ys(cg,Nv,r),Ys(cg,Nv,"esm2020"),Ys("fire-js","")}dC("");var Pv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Xs,jT;(function(){var r;function e(R,w){function C(){}C.prototype=w.prototype,R.F=w.prototype,R.prototype=new C,R.prototype.constructor=R,R.D=function(O,D,k){for(var I=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)I[qe-2]=arguments[qe];return w.prototype[D].apply(O,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,w,C){C||(C=0);const O=Array(16);if(typeof w=="string")for(var D=0;D<16;++D)O[D]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(D=0;D<16;++D)O[D]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=R.g[0],C=R.g[1],D=R.g[2];let k=R.g[3],I;I=w+(k^C&(D^k))+O[0]+3614090360&4294967295,w=C+(I<<7&4294967295|I>>>25),I=k+(D^w&(C^D))+O[1]+3905402710&4294967295,k=w+(I<<12&4294967295|I>>>20),I=D+(C^k&(w^C))+O[2]+606105819&4294967295,D=k+(I<<17&4294967295|I>>>15),I=C+(w^D&(k^w))+O[3]+3250441966&4294967295,C=D+(I<<22&4294967295|I>>>10),I=w+(k^C&(D^k))+O[4]+4118548399&4294967295,w=C+(I<<7&4294967295|I>>>25),I=k+(D^w&(C^D))+O[5]+1200080426&4294967295,k=w+(I<<12&4294967295|I>>>20),I=D+(C^k&(w^C))+O[6]+2821735955&4294967295,D=k+(I<<17&4294967295|I>>>15),I=C+(w^D&(k^w))+O[7]+4249261313&4294967295,C=D+(I<<22&4294967295|I>>>10),I=w+(k^C&(D^k))+O[8]+1770035416&4294967295,w=C+(I<<7&4294967295|I>>>25),I=k+(D^w&(C^D))+O[9]+2336552879&4294967295,k=w+(I<<12&4294967295|I>>>20),I=D+(C^k&(w^C))+O[10]+4294925233&4294967295,D=k+(I<<17&4294967295|I>>>15),I=C+(w^D&(k^w))+O[11]+2304563134&4294967295,C=D+(I<<22&4294967295|I>>>10),I=w+(k^C&(D^k))+O[12]+1804603682&4294967295,w=C+(I<<7&4294967295|I>>>25),I=k+(D^w&(C^D))+O[13]+4254626195&4294967295,k=w+(I<<12&4294967295|I>>>20),I=D+(C^k&(w^C))+O[14]+2792965006&4294967295,D=k+(I<<17&4294967295|I>>>15),I=C+(w^D&(k^w))+O[15]+1236535329&4294967295,C=D+(I<<22&4294967295|I>>>10),I=w+(D^k&(C^D))+O[1]+4129170786&4294967295,w=C+(I<<5&4294967295|I>>>27),I=k+(C^D&(w^C))+O[6]+3225465664&4294967295,k=w+(I<<9&4294967295|I>>>23),I=D+(w^C&(k^w))+O[11]+643717713&4294967295,D=k+(I<<14&4294967295|I>>>18),I=C+(k^w&(D^k))+O[0]+3921069994&4294967295,C=D+(I<<20&4294967295|I>>>12),I=w+(D^k&(C^D))+O[5]+3593408605&4294967295,w=C+(I<<5&4294967295|I>>>27),I=k+(C^D&(w^C))+O[10]+38016083&4294967295,k=w+(I<<9&4294967295|I>>>23),I=D+(w^C&(k^w))+O[15]+3634488961&4294967295,D=k+(I<<14&4294967295|I>>>18),I=C+(k^w&(D^k))+O[4]+3889429448&4294967295,C=D+(I<<20&4294967295|I>>>12),I=w+(D^k&(C^D))+O[9]+568446438&4294967295,w=C+(I<<5&4294967295|I>>>27),I=k+(C^D&(w^C))+O[14]+3275163606&4294967295,k=w+(I<<9&4294967295|I>>>23),I=D+(w^C&(k^w))+O[3]+4107603335&4294967295,D=k+(I<<14&4294967295|I>>>18),I=C+(k^w&(D^k))+O[8]+1163531501&4294967295,C=D+(I<<20&4294967295|I>>>12),I=w+(D^k&(C^D))+O[13]+2850285829&4294967295,w=C+(I<<5&4294967295|I>>>27),I=k+(C^D&(w^C))+O[2]+4243563512&4294967295,k=w+(I<<9&4294967295|I>>>23),I=D+(w^C&(k^w))+O[7]+1735328473&4294967295,D=k+(I<<14&4294967295|I>>>18),I=C+(k^w&(D^k))+O[12]+2368359562&4294967295,C=D+(I<<20&4294967295|I>>>12),I=w+(C^D^k)+O[5]+4294588738&4294967295,w=C+(I<<4&4294967295|I>>>28),I=k+(w^C^D)+O[8]+2272392833&4294967295,k=w+(I<<11&4294967295|I>>>21),I=D+(k^w^C)+O[11]+1839030562&4294967295,D=k+(I<<16&4294967295|I>>>16),I=C+(D^k^w)+O[14]+4259657740&4294967295,C=D+(I<<23&4294967295|I>>>9),I=w+(C^D^k)+O[1]+2763975236&4294967295,w=C+(I<<4&4294967295|I>>>28),I=k+(w^C^D)+O[4]+1272893353&4294967295,k=w+(I<<11&4294967295|I>>>21),I=D+(k^w^C)+O[7]+4139469664&4294967295,D=k+(I<<16&4294967295|I>>>16),I=C+(D^k^w)+O[10]+3200236656&4294967295,C=D+(I<<23&4294967295|I>>>9),I=w+(C^D^k)+O[13]+681279174&4294967295,w=C+(I<<4&4294967295|I>>>28),I=k+(w^C^D)+O[0]+3936430074&4294967295,k=w+(I<<11&4294967295|I>>>21),I=D+(k^w^C)+O[3]+3572445317&4294967295,D=k+(I<<16&4294967295|I>>>16),I=C+(D^k^w)+O[6]+76029189&4294967295,C=D+(I<<23&4294967295|I>>>9),I=w+(C^D^k)+O[9]+3654602809&4294967295,w=C+(I<<4&4294967295|I>>>28),I=k+(w^C^D)+O[12]+3873151461&4294967295,k=w+(I<<11&4294967295|I>>>21),I=D+(k^w^C)+O[15]+530742520&4294967295,D=k+(I<<16&4294967295|I>>>16),I=C+(D^k^w)+O[2]+3299628645&4294967295,C=D+(I<<23&4294967295|I>>>9),I=w+(D^(C|~k))+O[0]+4096336452&4294967295,w=C+(I<<6&4294967295|I>>>26),I=k+(C^(w|~D))+O[7]+1126891415&4294967295,k=w+(I<<10&4294967295|I>>>22),I=D+(w^(k|~C))+O[14]+2878612391&4294967295,D=k+(I<<15&4294967295|I>>>17),I=C+(k^(D|~w))+O[5]+4237533241&4294967295,C=D+(I<<21&4294967295|I>>>11),I=w+(D^(C|~k))+O[12]+1700485571&4294967295,w=C+(I<<6&4294967295|I>>>26),I=k+(C^(w|~D))+O[3]+2399980690&4294967295,k=w+(I<<10&4294967295|I>>>22),I=D+(w^(k|~C))+O[10]+4293915773&4294967295,D=k+(I<<15&4294967295|I>>>17),I=C+(k^(D|~w))+O[1]+2240044497&4294967295,C=D+(I<<21&4294967295|I>>>11),I=w+(D^(C|~k))+O[8]+1873313359&4294967295,w=C+(I<<6&4294967295|I>>>26),I=k+(C^(w|~D))+O[15]+4264355552&4294967295,k=w+(I<<10&4294967295|I>>>22),I=D+(w^(k|~C))+O[6]+2734768916&4294967295,D=k+(I<<15&4294967295|I>>>17),I=C+(k^(D|~w))+O[13]+1309151649&4294967295,C=D+(I<<21&4294967295|I>>>11),I=w+(D^(C|~k))+O[4]+4149444226&4294967295,w=C+(I<<6&4294967295|I>>>26),I=k+(C^(w|~D))+O[11]+3174756917&4294967295,k=w+(I<<10&4294967295|I>>>22),I=D+(w^(k|~C))+O[2]+718787259&4294967295,D=k+(I<<15&4294967295|I>>>17),I=C+(k^(D|~w))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+w&4294967295,R.g[1]=R.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+D&4294967295,R.g[3]=R.g[3]+k&4294967295}s.prototype.v=function(R,w){w===void 0&&(w=R.length);const C=w-this.blockSize,O=this.C;let D=this.h,k=0;for(;k<w;){if(D==0)for(;k<=C;)o(this,R,k),k+=this.blockSize;if(typeof R=="string"){for(;k<w;)if(O[D++]=R.charCodeAt(k++),D==this.blockSize){o(this,O),D=0;break}}else for(;k<w;)if(O[D++]=R[k++],D==this.blockSize){o(this,O),D=0;break}}this.h=D,this.o+=w},s.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var w=1;w<R.length-8;++w)R[w]=0;w=this.o*8;for(var C=R.length-8;C<R.length;++C)R[C]=w&255,w/=256;for(this.v(R),R=Array(16),w=0,C=0;C<4;++C)for(let O=0;O<32;O+=8)R[w++]=this.g[C]>>>O&255;return R};function u(R,w){var C=m;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=w(R)}function h(R,w){this.h=w;const C=[];let O=!0;for(let D=R.length-1;D>=0;D--){const k=R[D]|0;O&&k==w||(C[D]=k,O=!1)}this.g=C}var m={};function g(R){return-128<=R&&R<128?u(R,function(w){return new h([w|0],w<0?-1:0)}):new h([R|0],R<0?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return T;if(R<0)return q(p(-R));const w=[];let C=1;for(let O=0;R>=C;O++)w[O]=R/C|0,C*=4294967296;return new h(w,0)}function E(R,w){if(R.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R.charAt(0)=="-")return q(E(R.substring(1),w));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=p(Math.pow(w,8));let O=T;for(let k=0;k<R.length;k+=8){var D=Math.min(8,R.length-k);const I=parseInt(R.substring(k,k+D),w);D<8?(D=p(Math.pow(w,D)),O=O.j(D).add(p(I))):(O=O.j(C),O=O.add(p(I)))}return O}var T=g(0),S=g(1),x=g(16777216);r=h.prototype,r.m=function(){if(z(this))return-q(this).m();let R=0,w=1;for(let C=0;C<this.g.length;C++){const O=this.i(C);R+=(O>=0?O:4294967296+O)*w,w*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(L(this))return"0";if(z(this))return"-"+q(this).toString(R);const w=p(Math.pow(R,6));var C=this;let O="";for(;;){const D=be(C,w).g;C=se(C,D.j(w));let k=((C.g.length>0?C.g[0]:C.h)>>>0).toString(R);if(C=D,L(C))return k+O;for(;k.length<6;)k="0"+k;O=k+O}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function L(R){if(R.h!=0)return!1;for(let w=0;w<R.g.length;w++)if(R.g[w]!=0)return!1;return!0}function z(R){return R.h==-1}r.l=function(R){return R=se(this,R),z(R)?-1:L(R)?0:1};function q(R){const w=R.g.length,C=[];for(let O=0;O<w;O++)C[O]=~R.g[O];return new h(C,~R.h).add(S)}r.abs=function(){return z(this)?q(this):this},r.add=function(R){const w=Math.max(this.g.length,R.g.length),C=[];let O=0;for(let D=0;D<=w;D++){let k=O+(this.i(D)&65535)+(R.i(D)&65535),I=(k>>>16)+(this.i(D)>>>16)+(R.i(D)>>>16);O=I>>>16,k&=65535,I&=65535,C[D]=I<<16|k}return new h(C,C[C.length-1]&-2147483648?-1:0)};function se(R,w){return R.add(q(w))}r.j=function(R){if(L(this)||L(R))return T;if(z(this))return z(R)?q(this).j(q(R)):q(q(this).j(R));if(z(R))return q(this.j(q(R)));if(this.l(x)<0&&R.l(x)<0)return p(this.m()*R.m());const w=this.g.length+R.g.length,C=[];for(var O=0;O<2*w;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(let D=0;D<R.g.length;D++){const k=this.i(O)>>>16,I=this.i(O)&65535,qe=R.i(D)>>>16,ht=R.i(D)&65535;C[2*O+2*D]+=I*ht,he(C,2*O+2*D),C[2*O+2*D+1]+=k*ht,he(C,2*O+2*D+1),C[2*O+2*D+1]+=I*qe,he(C,2*O+2*D+1),C[2*O+2*D+2]+=k*qe,he(C,2*O+2*D+2)}for(R=0;R<w;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=w;R<2*w;R++)C[R]=0;return new h(C,0)};function he(R,w){for(;(R[w]&65535)!=R[w];)R[w+1]+=R[w]>>>16,R[w]&=65535,w++}function oe(R,w){this.g=R,this.h=w}function be(R,w){if(L(w))throw Error("division by zero");if(L(R))return new oe(T,T);if(z(R))return w=be(q(R),w),new oe(q(w.g),q(w.h));if(z(w))return w=be(R,q(w)),new oe(q(w.g),w.h);if(R.g.length>30){if(z(R)||z(w))throw Error("slowDivide_ only works with positive integers.");for(var C=S,O=w;O.l(R)<=0;)C=de(C),O=de(O);var D=pe(C,1),k=pe(O,1);for(O=pe(O,2),C=pe(C,2);!L(O);){var I=k.add(O);I.l(R)<=0&&(D=D.add(C),k=I),O=pe(O,1),C=pe(C,1)}return w=se(R,D.j(w)),new oe(D,w)}for(D=T;R.l(w)>=0;){for(C=Math.max(1,Math.floor(R.m()/w.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),k=p(C),I=k.j(w);z(I)||I.l(R)>0;)C-=O,k=p(C),I=k.j(w);L(k)&&(k=S),D=D.add(k),R=se(R,I)}return new oe(D,R)}r.B=function(R){return be(this,R).h},r.and=function(R){const w=Math.max(this.g.length,R.g.length),C=[];for(let O=0;O<w;O++)C[O]=this.i(O)&R.i(O);return new h(C,this.h&R.h)},r.or=function(R){const w=Math.max(this.g.length,R.g.length),C=[];for(let O=0;O<w;O++)C[O]=this.i(O)|R.i(O);return new h(C,this.h|R.h)},r.xor=function(R){const w=Math.max(this.g.length,R.g.length),C=[];for(let O=0;O<w;O++)C[O]=this.i(O)^R.i(O);return new h(C,this.h^R.h)};function de(R){const w=R.g.length+1,C=[];for(let O=0;O<w;O++)C[O]=R.i(O)<<1|R.i(O-1)>>>31;return new h(C,R.h)}function pe(R,w){const C=w>>5;w%=32;const O=R.g.length-C,D=[];for(let k=0;k<O;k++)D[k]=w>0?R.i(k+C)>>>w|R.i(k+C+1)<<32-w:R.i(k+C);return new h(D,R.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,jT=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=p,h.fromString=E,Xs=h}).apply(typeof Pv<"u"?Pv:typeof self<"u"?self:typeof window<"u"?window:{});var _h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var BT,uu,qT,Ch,dg,HT,FT,GT;(function(){var r,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof _h=="object"&&_h];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var v=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var B=c[A];if(!(B in v))break e;v=v[B]}c=c[c.length-1],A=v[c],y=y(A),y!=A&&y!=null&&e(v,c,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(y){var v=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&v.push([A,y[A]]);return v}});var u=u||{},h=this||self;function m(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function g(c,y,v){return c.call.apply(c.bind,arguments)}function p(c,y,v){return p=g,p.apply(null,arguments)}function E(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function T(c,y){function v(){}v.prototype=y.prototype,c.Z=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(A,B,Y){for(var fe=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)fe[Ue-2]=arguments[Ue];return y.prototype[B].apply(A,fe)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function x(c){const y=c.length;if(y>0){const v=Array(y);for(let A=0;A<y;A++)v[A]=c[A];return v}return[]}function L(c,y){for(let A=1;A<arguments.length;A++){const B=arguments[A];var v=typeof B;if(v=v!="object"?v:B?Array.isArray(B)?"array":v:"null",v=="array"||v=="object"&&typeof B.length=="number"){v=c.length||0;const Y=B.length||0;c.length=v+Y;for(let fe=0;fe<Y;fe++)c[v+fe]=B[fe]}else c.push(B)}}class z{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function q(c){h.setTimeout(()=>{throw c},0)}function se(){var c=R;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class he{constructor(){this.h=this.g=null}add(y,v){const A=oe.get();A.set(y,v),this.h?this.h.next=A:this.g=A,this.h=A}}var oe=new z(()=>new be,c=>c.reset());class be{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let de,pe=!1,R=new he,w=()=>{const c=Promise.resolve(void 0);de=()=>{c.then(C)}};function C(){for(var c;c=se();){try{c.h.call(c.g)}catch(v){q(v)}var y=oe;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}pe=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};h.addEventListener("test",v,y),h.removeEventListener("test",v,y)}catch{}return c})();function I(c){return/^[\s\xa0]*$/.test(c)}function qe(c,y){D.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}T(qe,D),qe.prototype.init=function(c,y){const v=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&qe.Z.h.call(this)},qe.prototype.h=function(){qe.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ht="closure_listenable_"+(Math.random()*1e6|0),J=0;function ae(c,y,v,A,B){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!A,this.ha=B,this.key=++J,this.da=this.fa=!1}function ve(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Me(c,y,v){for(const A in c)y.call(v,c[A],A,c)}function je(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function M(c){const y={};for(const v in c)y[v]=c[v];return y}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(c,y){let v,A;for(let B=1;B<arguments.length;B++){A=arguments[B];for(v in A)c[v]=A[v];for(let Y=0;Y<W.length;Y++)v=W[Y],Object.prototype.hasOwnProperty.call(A,v)&&(c[v]=A[v])}}function ue(c){this.src=c,this.g={},this.h=0}ue.prototype.add=function(c,y,v,A,B){const Y=c.toString();c=this.g[Y],c||(c=this.g[Y]=[],this.h++);const fe=we(c,y,A,B);return fe>-1?(y=c[fe],v||(y.fa=!1)):(y=new ae(y,this.src,Y,!!A,B),y.fa=v,c.push(y)),y};function ye(c,y){const v=y.type;if(v in c.g){var A=c.g[v],B=Array.prototype.indexOf.call(A,y,void 0),Y;(Y=B>=0)&&Array.prototype.splice.call(A,B,1),Y&&(ve(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function we(c,y,v,A){for(let B=0;B<c.length;++B){const Y=c[B];if(!Y.da&&Y.listener==y&&Y.capture==!!v&&Y.ha==A)return B}return-1}var Le="closure_lm_"+(Math.random()*1e6|0),xt={};function ot(c,y,v,A,B){if(Array.isArray(y)){for(let Y=0;Y<y.length;Y++)ot(c,y[Y],v,A,B);return null}return v=ji(v),c&&c[ht]?c.J(y,v,m(A)?!!A.capture:!1,B):Bt(c,y,v,!1,A,B)}function Bt(c,y,v,A,B,Y){if(!y)throw Error("Invalid event type");const fe=m(B)?!!B.capture:!!B;let Ue=kn(c);if(Ue||(c[Le]=Ue=new ue(c)),v=Ue.add(y,v,A,fe,Y),v.proxy)return v;if(A=Ti(),v.proxy=A,A.src=c,A.listener=v,c.addEventListener)k||(B=fe),B===void 0&&(B=!1),c.addEventListener(y.toString(),A,B);else if(c.attachEvent)c.attachEvent(Yt(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ti(){function c(v){return y.call(c.src,c.listener,v)}const y=li;return c}function Vn(c,y,v,A,B){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)Vn(c,y[Y],v,A,B);else A=m(A)?!!A.capture:!!A,v=ji(v),c&&c[ht]?(c=c.i,Y=String(y).toString(),Y in c.g&&(y=c.g[Y],v=we(y,v,A,B),v>-1&&(ve(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete c.g[Y],c.h--)))):c&&(c=kn(c))&&(y=c.g[y.toString()],c=-1,y&&(c=we(y,v,A,B)),(v=c>-1?y[c]:null)&&zi(v))}function zi(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[ht])ye(y.i,c);else{var v=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(v,A,c.capture):y.detachEvent?y.detachEvent(Yt(v),A):y.addListener&&y.removeListener&&y.removeListener(A),(v=kn(y))?(ye(v,c),v.h==0&&(v.src=null,y[Le]=null)):ve(c)}}}function Yt(c){return c in xt?xt[c]:xt[c]="on"+c}function li(c,y){if(c.da)c=!0;else{y=new qe(y,this);const v=c.listener,A=c.ha||c.src;c.fa&&zi(c),c=v.call(A,y)}return c}function kn(c){return c=c[Le],c instanceof ue?c:null}var ir="__closure_events_fn_"+(Math.random()*1e9>>>0);function ji(c){return typeof c=="function"?c:(c[ir]||(c[ir]=function(y){return c.handleEvent(y)}),c[ir])}function bt(){O.call(this),this.i=new ue(this),this.M=this,this.G=null}T(bt,O),bt.prototype[ht]=!0,bt.prototype.removeEventListener=function(c,y,v,A){Vn(this,c,y,v,A)};function lt(c,y){var v,A=c.G;if(A)for(v=[];A;A=A.G)v.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new D(y,c);else if(y instanceof D)y.target=y.target||c;else{var B=y;y=new D(A,c),ce(y,B)}B=!0;let Y,fe;if(v)for(fe=v.length-1;fe>=0;fe--)Y=y.g=v[fe],B=qn(Y,A,!0,y)&&B;if(Y=y.g=c,B=qn(Y,A,!0,y)&&B,B=qn(Y,A,!1,y)&&B,v)for(fe=0;fe<v.length;fe++)Y=y.g=v[fe],B=qn(Y,A,!1,y)&&B}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const v=c.g[y];for(let A=0;A<v.length;A++)ve(v[A]);delete c.g[y],c.h--}}this.G=null},bt.prototype.J=function(c,y,v,A){return this.i.add(String(c),y,!1,v,A)},bt.prototype.K=function(c,y,v,A){return this.i.add(String(c),y,!0,v,A)};function qn(c,y,v,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let B=!0;for(let Y=0;Y<y.length;++Y){const fe=y[Y];if(fe&&!fe.da&&fe.capture==v){const Ue=fe.listener,Gt=fe.ha||fe.src;fe.fa&&ye(c.i,fe),B=Ue.call(Gt,A)!==!1&&B}}return B&&!A.defaultPrevented}function rr(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(c,y||0)}function sr(c){c.g=rr(()=>{c.g=null,c.i&&(c.i=!1,sr(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Xt extends O{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:sr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bi(c){O.call(this),this.h=c,this.g={}}T(Bi,O);var Ar=[];function Hn(c){Me(c.g,function(y,v){this.g.hasOwnProperty(v)&&zi(y)},c),c.g={}}Bi.prototype.N=function(){Bi.Z.N.call(this),Hn(this)},Bi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var An=h.JSON.stringify,qi=h.JSON.parse,wr=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function Fn(){}function Rr(){}var Gn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function qt(){D.call(this,"d")}T(qt,D);function mn(){D.call(this,"c")}T(mn,D);var St={},Cr=null;function Hi(){return Cr=Cr||new bt}St.Ia="serverreachability";function ns(c){D.call(this,St.Ia,c)}T(ns,D);function Zn(c){const y=Hi();lt(y,new ns(y))}St.STAT_EVENT="statevent";function Fi(c,y){D.call(this,St.STAT_EVENT,c),this.stat=y}T(Fi,D);function He(c){const y=Hi();lt(y,new Fi(y,c))}St.Ja="timingevent";function At(c,y){D.call(this,St.Ja,c),this.size=y}T(At,D);function wt(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},y)}function Pt(){this.g=!0}Pt.prototype.ua=function(){this.g=!1};function gn(c,y,v,A,B,Y){c.info(function(){if(c.g)if(Y){var fe="",Ue=Y.split("&");for(let st=0;st<Ue.length;st++){var Gt=Ue[st].split("=");if(Gt.length>1){const Dt=Gt[0];Gt=Gt[1];const xi=Dt.split("_");fe=xi.length>=2&&xi[1]=="type"?fe+(Dt+"="+Gt+"&"):fe+(Dt+"=redacted&")}}}else fe=null;else fe=Y;return"XMLHTTP REQ ("+A+") [attempt "+B+"]: "+y+`
`+v+`
`+fe})}function Zt(c,y,v,A,B,Y,fe){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+B+"]: "+y+`
`+v+`
`+Y+" "+fe})}function Mt(c,y,v,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+ft(c,v)+(A?" "+A:"")})}function Q(c,y){c.info(function(){return"TIMEOUT: "+y})}Pt.prototype.info=function(){};function ft(c,y){if(!c.g)return y;if(!y)return null;try{const Y=JSON.parse(y);if(Y){for(c=0;c<Y.length;c++)if(Array.isArray(Y[c])){var v=Y[c];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var B=A[0];if(B!="noop"&&B!="stop"&&B!="close")for(let fe=1;fe<A.length;fe++)A[fe]=""}}}}return An(Y)}catch{return y}}var dt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ht={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},le;function ln(){}T(ln,Fn),ln.prototype.g=function(){return new XMLHttpRequest},le=new ln;function et(c){return encodeURIComponent(String(c))}function Nt(c){var y=1;c=c.split(":");const v=[];for(;y>0&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function un(c,y,v,A){this.j=c,this.i=y,this.l=v,this.S=A||1,this.V=new Bi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new mt}function mt(){this.i=null,this.g="",this.h=!1}var Vt={},Ft={};function Ee(c,y,v){c.M=1,c.A=Ri(G(y)),c.u=v,c.R=!0,is(c,null)}function is(c,y){c.F=Date.now(),bi(c),c.B=G(c.A);var v=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),eo(v.i,"t",A),c.C=0,v=c.j.L,c.h=new mt,c.g=hc(c.j,v?y:null,!c.u),c.P>0&&(c.O=new Xt(p(c.Y,c,c.g),c.P)),y=c.V,v=c.g,A=c.ba;var B="readystatechange";Array.isArray(B)||(B&&(Ar[0]=B.toString()),B=Ar);for(let Y=0;Y<B.length;Y++){const fe=ot(v,B[Y],A||y.handleEvent,!1,y.h||y);if(!fe)break;y.g[fe.key]=fe}y=c.J?M(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),Zn(),gn(c.i,c.v,c.B,c.l,c.S,c.u)}un.prototype.ba=function(c){c=c.target;const y=this.O;y&&Qi(c)==3?y.j():this.Y(c)},un.prototype.Y=function(c){try{if(c==this.g)e:{const Ue=Qi(this.g),Gt=this.g.ya(),st=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||wn(this.g)))){this.K||Ue!=4||Gt==7||(Gt==8||st<=0?Zn(3):Zn(2)),Si(this);var y=this.g.ca();this.X=y;var v=Za(this);if(this.o=y==200,Zt(this.i,this.v,this.B,this.l,this.S,Ue,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,B=this.g;if((A=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(A)){var Y=A;break t}}Y=null}if(c=Y)Mt(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ai(this,c);else{this.o=!1,this.m=3,He(12),Pn(this),Kn(this);break e}}if(this.R){c=!0;let Dt;for(;!this.K&&this.C<v.length;)if(Dt=ha(this,v),Dt==Ft){Ue==4&&(this.m=4,He(14),c=!1),Mt(this.i,this.l,null,"[Incomplete Response]");break}else if(Dt==Vt){this.m=4,He(15),Mt(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else Mt(this.i,this.l,Dt,null),Ai(this,Dt);if(Ja(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||v.length!=0||this.h.h||(this.m=1,He(16),c=!1),this.o=this.o&&c,!c)Mt(this.i,this.l,v,"[Invalid Chunked Response]"),Pn(this),Kn(this);else if(v.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Sl(fe),fe.P=!0,He(11))}}else Mt(this.i,this.l,v,null),Ai(this,v);Ue==4&&Pn(this),this.o&&!this.K&&(Ue==4?oc(this.j,this):(this.o=!1,bi(this)))}else xr(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,He(12)):(this.m=0,He(13)),Pn(this),Kn(this)}}}catch{}};function Za(c){if(!Ja(c))return c.g.la();const y=wn(c.g);if(y==="")return"";let v="";const A=y.length,B=Qi(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Pn(c),Kn(c),"";c.h.i=new h.TextDecoder}for(let Y=0;Y<A;Y++)c.h.h=!0,v+=c.h.i.decode(y[Y],{stream:!(B&&Y==A-1)});return y.length=0,c.h.g+=v,c.C=0,c.h.g}function Ja(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function ha(c,y){var v=c.C,A=y.indexOf(`
`,v);return A==-1?Ft:(v=Number(y.substring(v,A)),isNaN(v)?Vt:(A+=1,A+v>y.length?Ft:(y=y.slice(A,A+v),c.C=A+v,y)))}un.prototype.cancel=function(){this.K=!0,Pn(this)};function bi(c){c.T=Date.now()+c.H,rs(c,c.H)}function rs(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=wt(p(c.aa,c),y)}function Si(c){c.D&&(h.clearTimeout(c.D),c.D=null)}un.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Q(this.i,this.B),this.M!=2&&(Zn(),He(17)),Pn(this),this.m=2,Kn(this)):rs(this,this.T-c)};function Kn(c){c.j.I==0||c.K||oc(c.j,c)}function Pn(c){Si(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,Hn(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function Ai(c,y){try{var v=c.j;if(v.I!=0&&(v.g==c||wi(v.h,c))){if(!c.L&&wi(v.h,c)&&v.I==3){try{var A=v.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var B=A;if(B[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)so(v),ds(v);else break e;Ta(v),He(18)}}else v.xa=B[1],0<v.xa-v.K&&B[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=wt(p(v.Va,v),6e3));Jn(v.h)<=1&&v.ta&&(v.ta=void 0)}else hr(v,11)}else if((c.L||v.g==c)&&so(v),!I(y))for(B=v.Ba.g.parse(y),y=0;y<B.length;y++){let st=B[y];const Dt=st[0];if(!(Dt<=v.K))if(v.K=Dt,st=st[1],v.I==2)if(st[0]=="c"){v.M=st[1],v.ba=st[2];const xi=st[3];xi!=null&&(v.ka=xi,v.j.info("VER="+v.ka));const fr=st[4];fr!=null&&(v.za=fr,v.j.info("SVER="+v.za));const $i=st[5];$i!=null&&typeof $i=="number"&&$i>0&&(A=1.5*$i,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const Yi=c.g;if(Yi){const ba=Yi.g?Yi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ba){var Y=A.h;Y.g||ba.indexOf("spdy")==-1&&ba.indexOf("quic")==-1&&ba.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(da(Y,Y.h),Y.h=null))}if(A.G){const ao=Yi.g?Yi.g.getResponseHeader("X-HTTP-Session-Id"):null;ao&&(A.wa=ao,Fe(A.J,A.G,ao))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var fe=c;if(A.na=cc(A,A.L?A.ba:null,A.W),fe.L){as(A.h,fe);var Ue=fe,Gt=A.O;Gt&&(Ue.H=Gt),Ue.D&&(Si(Ue),bi(Ue)),A.g=fe}else sc(A);v.i.length>0&&cr(v)}else st[0]!="stop"&&st[0]!="close"||hr(v,7);else v.I==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?hr(v,7):Tl(v):st[0]!="noop"&&v.l&&v.l.qa(st),v.A=0)}}Zn(4)}catch{}}var Lt=class{constructor(c,y){this.g=c,this.map=y}};function fa(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ss(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Jn(c){return c.h?1:c.g?c.g.size:0}function wi(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function da(c,y){c.g?c.g.add(y):c.h=y}function as(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}fa.prototype.cancel=function(){if(this.i=ma(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function ma(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.G);return y}return x(c.i)}var Jt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function j(c,y){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const A=c[v].indexOf("=");let B,Y=null;A>=0?(B=c[v].substring(0,A),Y=c[v].substring(A+1)):B=c[v],y(B,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function $(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof $?(this.l=c.l,ge(this,c.j),this.o=c.o,this.g=c.g,Ae(this,c.u),this.h=c.h,Je(this,ic(c.i)),this.m=c.m):c&&(y=String(c).match(Jt))?(this.l=!1,ge(this,y[1]||"",!0),this.o=ar(y[2]||""),this.g=ar(y[3]||"",!0),Ae(this,y[4]),this.h=ar(y[5]||"",!0),Je(this,y[6]||"",!0),this.m=ar(y[7]||"")):(this.l=!1,this.i=new ls(null,this.l))}$.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(ga(y,Wa,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(ga(y,Wa,!0),"@"),c.push(et(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(ga(v,v.charAt(0)=="/"?gl:ec,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",ga(v,tc)),c.join("")},$.prototype.resolve=function(c){const y=G(this);let v=!!c.j;v?ge(y,c.j):v=!!c.o,v?y.o=c.o:v=!!c.g,v?y.g=c.g:v=c.u!=null;var A=c.h;if(v)Ae(y,c.u);else if(v=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var B=y.h.lastIndexOf("/");B!=-1&&(A=y.h.slice(0,B+1)+A)}if(B=A,B==".."||B==".")A="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){A=B.lastIndexOf("/",0)==0,B=B.split("/");const Y=[];for(let fe=0;fe<B.length;){const Ue=B[fe++];Ue=="."?A&&fe==B.length&&Y.push(""):Ue==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),A&&fe==B.length&&Y.push("")):(Y.push(Ue),A=!0)}A=Y.join("/")}else A=B}return v?y.h=A:v=c.i.toString()!=="",v?Je(y,ic(c.i)):v=!!c.m,v&&(y.m=c.m),y};function G(c){return new $(c)}function ge(c,y,v){c.j=v?ar(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Ae(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Je(c,y,v){y instanceof ls?(c.i=y,to(c.i,c.l)):(v||(y=ga(y,os)),c.i=new ls(y,c.l))}function Fe(c,y,v){c.i.set(y,v)}function Ri(c){return Fe(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function ar(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ga(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,Wn),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Wn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Wa=/[#\/\?@]/g,ec=/[#\?:]/g,gl=/[#\?]/g,os=/[#\?@]/g,tc=/#/g;function ls(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function ei(c){c.g||(c.g=new Map,c.h=0,c.i&&j(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}r=ls.prototype,r.add=function(c,y){ei(this),this.i=null,c=us(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function nc(c,y){ei(c),y=us(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function pl(c,y){return ei(c),y=us(c,y),c.g.has(y)}r.forEach=function(c,y){ei(this),this.g.forEach(function(v,A){v.forEach(function(B){c.call(y,B,A,this)},this)},this)};function yl(c,y){ei(c);let v=[];if(typeof y=="string")pl(c,y)&&(v=v.concat(c.g.get(us(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)v=v.concat(c[y]);return v}r.set=function(c,y){return ei(this),this.i=null,c=us(this,c),pl(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=yl(this,c),c.length>0?String(c[0]):y):y};function eo(c,y,v){nc(c,y),v.length>0&&(c.i=null,c.g.set(us(c,y),x(v)),c.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var v=y[A];const B=et(v);v=yl(this,v);for(let Y=0;Y<v.length;Y++){let fe=B;v[Y]!==""&&(fe+="="+et(v[Y])),c.push(fe)}}return this.i=c.join("&")};function ic(c){const y=new ls;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function us(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function to(c,y){y&&!c.j&&(ei(c),c.i=null,c.g.forEach(function(v,A){const B=A.toLowerCase();A!=B&&(nc(this,A),eo(this,B,v))},c)),c.j=y}function Gi(c,y){const v=new Pt;if(h.Image){const A=new Image;A.onload=E(Ci,v,"TestLoadImage: loaded",!0,y,A),A.onerror=E(Ci,v,"TestLoadImage: error",!1,y,A),A.onabort=E(Ci,v,"TestLoadImage: abort",!1,y,A),A.ontimeout=E(Ci,v,"TestLoadImage: timeout",!1,y,A),h.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function _l(c,y){const v=new Pt,A=new AbortController,B=setTimeout(()=>{A.abort(),Ci(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(Y=>{clearTimeout(B),Y.ok?Ci(v,"TestPingServer: ok",!0,y):Ci(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Ci(v,"TestPingServer: error",!1,y)})}function Ci(c,y,v,A,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),A(v)}catch{}}function cs(){this.g=new wr}function or(c){this.i=c.Sb||null,this.h=c.ab||!1}T(or,Fn),or.prototype.g=function(){return new pa(this.i,this.h)};function pa(c,y){bt.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(pa,bt),r=pa.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,Ki(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hs(this)),this.readyState=0},r.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ki(this)),this.g&&(this.readyState=3,Ki(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;no(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function no(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}r.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?hs(this):Ki(this),this.readyState==3&&no(this)}},r.Oa=function(c){this.g&&(this.response=this.responseText=c,hs(this))},r.Na=function(c){this.g&&(this.response=c,hs(this))},r.ga=function(){this.g&&hs(this)};function hs(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Ki(c)}r.setRequestHeader=function(c,y){this.A.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function Ki(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(pa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ii(c){let y="";return Me(c,function(v,A){y+=A,y+=":",y+=v,y+=`\r
`}),y}function ya(c,y,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=Ii(v),typeof c=="string"?v!=null&&et(v):Fe(c,y,v))}function gt(c){bt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(gt,bt);var lr=/^https?$/i,vl=["POST","PUT"];r=gt.prototype,r.Fa=function(c){this.H=c},r.ea=function(c,y,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():le.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Y){_a(this,Y);return}if(c=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var B in A)v.set(B,A[B]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Y of A.keys())v.set(Y,A.get(Y));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(Y=>Y.toLowerCase()=="content-type"),B=h.FormData&&c instanceof h.FormData,!(Array.prototype.indexOf.call(vl,y,void 0)>=0)||A||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,fe]of v)this.g.setRequestHeader(Y,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(Y){_a(this,Y)}};function _a(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,El(c),Ir(c)}function El(c){c.A||(c.A=!0,lt(c,"complete"),lt(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,lt(this,"complete"),lt(this,"abort"),Ir(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ir(this,!0)),gt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?va(this):this.Xa())},r.Xa=function(){va(this)};function va(c){if(c.h&&typeof u<"u"){if(c.v&&Qi(c)==4)setTimeout(c.Ca.bind(c),0);else if(lt(c,"readystatechange"),Qi(c)==4){c.h=!1;try{const Y=c.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var A;if(A=Y===0){let fe=String(c.D).match(Jt)[1]||null;!fe&&h.self&&h.self.location&&(fe=h.self.location.protocol.slice(0,-1)),A=!lr.test(fe?fe.toLowerCase():"")}v=A}if(v)lt(c,"complete"),lt(c,"success");else{c.o=6;try{var B=Qi(c)>2?c.g.statusText:""}catch{B=""}c.l=B+" ["+c.ca()+"]",El(c)}}finally{Ir(c)}}}}function Ir(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,y||lt(c,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Qi(c){return c.g?c.g.readyState:0}r.ca=function(){try{return Qi(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),qi(y)}};function wn(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function xr(c){const y={};c=(c.g&&Qi(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(I(c[A]))continue;var v=Nt(c[A]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Y=y[B]||[];y[B]=Y,Y.push(v)}je(y,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ur(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function fs(c){this.za=0,this.i=[],this.j=new Pt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ur("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ur("baseRetryDelayMs",5e3,c),this.Za=ur("retryDelaySeedMs",1e4,c),this.Ta=ur("forwardChannelMaxRetries",2,c),this.va=ur("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new fa(c&&c.concurrentRequestLimit),this.Ba=new cs,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=fs.prototype,r.ka=8,r.I=1,r.connect=function(c,y,v,A){He(0),this.W=c,this.H=y||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=cc(this,null,this.W),cr(this)};function Tl(c){if(io(c),c.I==3){var y=c.V++,v=G(c.J);if(Fe(v,"SID",c.M),Fe(v,"RID",y),Fe(v,"TYPE","terminate"),Ea(c,v),y=new un(c,c.j,y),y.M=2,y.A=Ri(G(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&h.Image&&(new Image().src=y.A,v=!0),v||(y.g=hc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),bi(y)}uc(c)}function ds(c){c.g&&(Sl(c),c.g.cancel(),c.g=null)}function io(c){ds(c),c.v&&(h.clearTimeout(c.v),c.v=null),so(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&h.clearTimeout(c.m),c.m=null)}function cr(c){if(!ss(c.h)&&!c.m){c.m=!0;var y=c.Ea;de||w(),pe||(de(),pe=!0),R.add(y,c),c.D=0}}function ro(c,y){return Jn(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=wt(p(c.Ea,c,y),lc(c,c.D)),c.D++,!0)}r.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const B=new un(this,this.j,c);let Y=this.o;if(this.U&&(Y?(Y=M(Y),ce(Y,this.U)):Y=this.U),this.u!==null||this.R||(B.J=Y,Y=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=rc(this,B,y),v=G(this.J),Fe(v,"RID",c),Fe(v,"CVER",22),this.G&&Fe(v,"X-HTTP-Session-Id",this.G),Ea(this,v),Y&&(this.R?y="headers="+et(Ii(Y))+"&"+y:this.u&&ya(v,this.u,Y)),da(this.h,B),this.Ra&&Fe(v,"TYPE","init"),this.S?(Fe(v,"$req",y),Fe(v,"SID","null"),B.U=!0,Ee(B,v,null)):Ee(B,v,y),this.I=2}}else this.I==3&&(c?bl(this,c):this.i.length==0||ss(this.h)||bl(this))};function bl(c,y){var v;y?v=y.l:v=c.V++;const A=G(c.J);Fe(A,"SID",c.M),Fe(A,"RID",v),Fe(A,"AID",c.K),Ea(c,A),c.u&&c.o&&ya(A,c.u,c.o),v=new un(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),y&&(c.i=y.G.concat(c.i)),y=rc(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),da(c.h,v),Ee(v,A,y)}function Ea(c,y){c.H&&Me(c.H,function(v,A){Fe(y,A,v)}),c.l&&Me({},function(v,A){Fe(y,A,v)})}function rc(c,y,v){v=Math.min(c.i.length,v);const A=c.l?p(c.l.Ka,c.l,c):null;e:{var B=c.i;let Ue=-1;for(;;){const Gt=["count="+v];Ue==-1?v>0?(Ue=B[0].g,Gt.push("ofs="+Ue)):Ue=0:Gt.push("ofs="+Ue);let st=!0;for(let Dt=0;Dt<v;Dt++){var Y=B[Dt].g;const xi=B[Dt].map;if(Y-=Ue,Y<0)Ue=Math.max(0,B[Dt].g-100),st=!1;else try{Y="req"+Y+"_"||"";try{var fe=xi instanceof Map?xi:Object.entries(xi);for(const[fr,$i]of fe){let Yi=$i;m($i)&&(Yi=An($i)),Gt.push(Y+fr+"="+encodeURIComponent(Yi))}}catch(fr){throw Gt.push(Y+"type="+encodeURIComponent("_badmap")),fr}}catch{A&&A(xi)}}if(st){fe=Gt.join("&");break e}}fe=void 0}return c=c.i.splice(0,v),y.G=c,fe}function sc(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;de||w(),pe||(de(),pe=!0),R.add(y,c),c.A=0}}function Ta(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=wt(p(c.Da,c),lc(c,c.A)),c.A++,!0)}r.Da=function(){if(this.v=null,ac(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=wt(p(this.Wa,this),c)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,He(10),ds(this),ac(this))};function Sl(c){c.B!=null&&(h.clearTimeout(c.B),c.B=null)}function ac(c){c.g=new un(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=G(c.na);Fe(y,"RID","rpc"),Fe(y,"SID",c.M),Fe(y,"AID",c.K),Fe(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&Fe(y,"TO",c.ia),Fe(y,"TYPE","xmlhttp"),Ea(c,y),c.u&&c.o&&ya(y,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=Ri(G(y)),v.u=null,v.R=!0,is(v,c)}r.Va=function(){this.C!=null&&(this.C=null,ds(this),Ta(this),He(19))};function so(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function oc(c,y){var v=null;if(c.g==y){so(c),Sl(c),c.g=null;var A=2}else if(wi(c.h,y))v=y.G,as(c.h,y),A=1;else return;if(c.I!=0){if(y.o)if(A==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var B=c.D;A=Hi(),lt(A,new At(A,v)),cr(c)}else sc(c);else if(B=y.m,B==3||B==0&&y.X>0||!(A==1&&ro(c,y)||A==2&&Ta(c)))switch(v&&v.length>0&&(y=c.h,y.i=y.i.concat(v)),B){case 1:hr(c,5);break;case 4:hr(c,10);break;case 3:hr(c,6);break;default:hr(c,2)}}}function lc(c,y){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*y}function hr(c,y){if(c.j.info("Error code "+y),y==2){var v=p(c.bb,c),A=c.Ua;const B=!A;A=new $(A||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||ge(A,"https"),Ri(A),B?Gi(A.toString(),v):_l(A.toString(),v)}else He(2);c.I=0,c.l&&c.l.pa(y),uc(c),io(c)}r.bb=function(c){c?(this.j.info("Successfully pinged google.com"),He(2)):(this.j.info("Failed to ping google.com"),He(1))};function uc(c){if(c.I=0,c.ja=[],c.l){const y=ma(c.h);(y.length!=0||c.i.length!=0)&&(L(c.ja,y),L(c.ja,c.i),c.h.i.length=0,x(c.i),c.i.length=0),c.l.oa()}}function cc(c,y,v){var A=v instanceof $?G(v):new $(v);if(A.g!="")y&&(A.g=y+"."+A.g),Ae(A,A.u);else{var B=h.location;A=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;const Y=new $(null);A&&ge(Y,A),y&&(Y.g=y),B&&Ae(Y,B),v&&(Y.h=v),A=Y}return v=c.G,y=c.wa,v&&y&&Fe(A,v,y),Fe(A,"VER",c.ka),Ea(c,A),A}function hc(c,y,v){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new gt(new or({ab:v})):new gt(c.ma),y.Fa(c.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function fc(){}r=fc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function ms(){}ms.prototype.g=function(c,y){return new Qn(c,y)};function Qn(c,y){bt.call(this),this.g=new fs(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!I(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Nr(this)}T(Qn,bt),Qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qn.prototype.close=function(){Tl(this.g)},Qn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=An(c),c=v);y.i.push(new Lt(y.Ya++,c)),y.I==3&&cr(y)},Qn.prototype.N=function(){this.g.l=null,delete this.j,Tl(this.g),delete this.g,Qn.Z.N.call(this)};function dc(c){qt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const v in y){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}T(dc,qt);function mc(){mn.call(this),this.status=1}T(mc,mn);function Nr(c){this.g=c}T(Nr,fc),Nr.prototype.ra=function(){lt(this.g,"a")},Nr.prototype.qa=function(c){lt(this.g,new dc(c))},Nr.prototype.pa=function(c){lt(this.g,new mc)},Nr.prototype.oa=function(){lt(this.g,"b")},ms.prototype.createWebChannel=ms.prototype.g,Qn.prototype.send=Qn.prototype.o,Qn.prototype.open=Qn.prototype.m,Qn.prototype.close=Qn.prototype.close,GT=function(){return new ms},FT=function(){return Hi()},HT=St,dg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},dt.NO_ERROR=0,dt.TIMEOUT=8,dt.HTTP_ERROR=6,Ch=dt,Ht.COMPLETE="complete",qT=Ht,Rr.EventType=Gn,Gn.OPEN="a",Gn.CLOSE="b",Gn.ERROR="c",Gn.MESSAGE="d",bt.prototype.listen=bt.prototype.J,uu=Rr,gt.prototype.listenOnce=gt.prototype.K,gt.prototype.getLastError=gt.prototype.Ha,gt.prototype.getLastErrorCode=gt.prototype.ya,gt.prototype.getStatus=gt.prototype.ca,gt.prototype.getResponseJson=gt.prototype.La,gt.prototype.getResponseText=gt.prototype.la,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Fa,BT=gt}).apply(typeof _h<"u"?_h:typeof self<"u"?self:typeof window<"u"?window:{});const Lv="@firebase/firestore",Uv="4.9.3";class jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jn.UNAUTHENTICATED=new jn(null),jn.GOOGLE_CREDENTIALS=new jn("google-credentials-uid"),jn.FIRST_PARTY=new jn("first-party-uid"),jn.MOCK_USER=new jn("mock-user");let ol="12.7.0";const Ka=new Gg("@firebase/firestore");function Lo(){return Ka.logLevel}function _e(r,...e){if(Ka.logLevel<=Ye.DEBUG){const n=e.map($g);Ka.debug(`Firestore (${ol}): ${r}`,...n)}}function Zr(r,...e){if(Ka.logLevel<=Ye.ERROR){const n=e.map($g);Ka.error(`Firestore (${ol}): ${r}`,...n)}}function Zo(r,...e){if(Ka.logLevel<=Ye.WARN){const n=e.map($g);Ka.warn(`Firestore (${ol}): ${r}`,...n)}}function $g(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function Ie(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,KT(r,s,n)}function KT(r,e,n){let s=`FIRESTORE (${ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Zr(s),new Error(s)}function nt(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||KT(e,o,s)}function ke(r,e){return r}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends ts{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Zs{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class QT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(jn.UNAUTHENTICATED)))}shutdown(){}}class gC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class pC{constructor(e){this.t=e,this.currentUser=jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nt(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let u=new Zs;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Zs,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Zs)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(nt(typeof s.accessToken=="string",31837,{l:s}),new QT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new jn(e)}}class yC{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=jn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _C{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new yC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(jn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){nt(this.o===void 0,3512);const s=u=>{u.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,_e("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new zv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(nt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new zv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function EC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}class Yg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=EC(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Xe(r,e){return r<e?-1:r>e?1:0}function mg(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const o=r.charAt(s),u=e.charAt(s);if(o!==u)return Hm(o)===Hm(u)?Xe(o,u):Hm(o)?1:-1}return Xe(r.length,e.length)}const TC=55296,bC=57343;function Hm(r){const e=r.charCodeAt(0);return e>=TC&&e<=bC}function Jo(r,e,n){return r.length===e.length&&r.every(((s,o)=>n(s,e[o])))}const jv="__name__";class yr{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ie(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ie(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return yr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yr?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=yr.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Xe(e.length,n.length)}static compareSegments(e,n){const s=yr.isNumericId(e),o=yr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?yr.extractNumericId(e).compare(yr.extractNumericId(n)):mg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xs.fromString(e.substring(4,e.length-2))}}class vt extends yr{construct(e,n,s){return new vt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new me(ne.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new vt(n)}static emptyPath(){return new vt([])}}const SC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class On extends yr{construct(e,n,s){return new On(e,n,s)}static isValidIdentifier(e){return SC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),On.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jv}static keyField(){return new On([jv])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new me(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new me(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(s+=m,o++):(u(),o++)}if(u(),h)throw new me(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new On(n)}static emptyPath(){return new On([])}}class Re{constructor(e){this.path=e}static fromPath(e){return new Re(vt.fromString(e))}static fromName(e){return new Re(vt.fromString(e).popFirst(5))}static empty(){return new Re(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return vt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new vt(e.slice()))}}function $T(r,e,n){if(!n)throw new me(ne.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function AC(r,e,n,s){if(e===!0&&s===!0)throw new me(ne.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Bv(r){if(!Re.isDocumentKey(r))throw new me(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function qv(r){if(Re.isDocumentKey(r))throw new me(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function YT(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function mf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ie(12329,{type:typeof r})}function Yr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new me(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mf(r);throw new me(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}function on(r,e){const n={typeString:r};return e&&(n.value=e),n}function zu(r,e){if(!YT(r))throw new me(ne.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new me(ne.INVALID_ARGUMENT,n);return!0}const Hv=-62135596800,Fv=1e6;class It{static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Fv);return new It(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Hv)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fv}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:It._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zu(e,It._jsonSchema))return new It(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Hv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}It._jsonSchemaVersion="firestore/timestamp/1.0",It._jsonSchema={type:on("string",It._jsonSchemaVersion),seconds:on("number"),nanoseconds:on("number")};class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new It(0,0))}static max(){return new Ne(new It(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Cu=-1;function wC(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ne.fromTimestamp(s===1e9?new It(n+1,0):new It(n,s));return new ta(o,Re.empty(),e)}function RC(r){return new ta(r.readTime,r.key,Cu)}class ta{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ta(Ne.min(),Re.empty(),Cu)}static max(){return new ta(Ne.max(),Re.empty(),Cu)}}function CC(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Re.comparator(r.documentKey,e.documentKey),n!==0?n:Xe(r.largestBatchId,e.largestBatchId))}const IC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ll(r){if(r.code!==ne.FAILED_PRECONDITION||r.message!==IC)throw r;_e("LocalStore","Unexpectedly lost primary lease")}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):re.reject(n)}static resolve(e){return new re(((n,s)=>{n(e)}))}static reject(e){return new re(((n,s)=>{s(e)}))}static waitFor(e){return new re(((n,s)=>{let o=0,u=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++u,h&&u===o&&n()}),(g=>s(g)))})),h=!0,u===o&&n()}))}static or(e){let n=re.resolve(!1);for(const s of e)n=n.next((o=>o?re.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new re(((s,o)=>{const u=e.length,h=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;n(e[p]).next((E=>{h[p]=E,++m,m===u&&s(h)}),(E=>o(E)))}}))}static doWhile(e,n){return new re(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function NC(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ul(r){return r.name==="IndexedDbTransactionError"}class gf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}gf.ce=-1;const Xg=-1;function ju(r){return r==null}function qh(r){return r===0&&1/r==-1/0}function DC(r){return typeof r=="number"&&Number.isInteger(r)&&!qh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const XT="";function OC(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=Gv(e)),e=MC(r.get(n),e);return Gv(e)}function MC(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case XT:n+="";break;default:n+=u}}return n}function Gv(r){return r+XT+""}function Kv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function ua(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function ZT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class kt{constructor(e,n){this.comparator=e,this.root=n||Dn.EMPTY}insert(e,n){return new kt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(e){return new kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vh(this.root,e,this.comparator,!1)}getReverseIterator(){return new vh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vh(this.root,e,this.comparator,!0)}}class vh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dn{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Dn.RED,this.left=o??Dn.EMPTY,this.right=u??Dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Dn(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Dn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1;Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new Dn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dn{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Qv(this.data.getIterator())}getIteratorFrom(e){return new Qv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof dn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new dn(this.comparator);return n.data=e,n}}class Qv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class _i{constructor(e){this.fields=e,e.sort(On.comparator)}static empty(){return new _i([])}unionWith(e){let n=new dn(On.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new _i(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class JT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Mn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new JT("Invalid base64 string: "+u):u}})(e);return new Mn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new Mn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mn.EMPTY_BYTE_STRING=new Mn("");const VC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function na(r){if(nt(!!r,39018),typeof r=="string"){let e=0;const n=VC.exec(r);if(nt(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:$t(r.seconds),nanos:$t(r.nanos)}}function $t(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ia(r){return typeof r=="string"?Mn.fromBase64String(r):Mn.fromUint8Array(r)}const WT="server_timestamp",eb="__type__",tb="__previous_value__",nb="__local_write_time__";function Zg(r){return(r?.mapValue?.fields||{})[eb]?.stringValue===WT}function pf(r){const e=r.mapValue.fields[tb];return Zg(e)?pf(e):e}function Iu(r){const e=na(r.mapValue.fields[nb].timestampValue);return new It(e.seconds,e.nanos)}class kC{constructor(e,n,s,o,u,h,m,g,p,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=E}}const Hh="(default)";class xu{constructor(e,n){this.projectId=e,this.database=n||Hh}static empty(){return new xu("","")}get isDefaultDatabase(){return this.database===Hh}isEqual(e){return e instanceof xu&&e.projectId===this.projectId&&e.database===this.database}}const ib="__type__",PC="__max__",Eh={mapValue:{}},rb="__vector__",Fh="value";function ra(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Zg(r)?4:UC(r)?9007199254740991:LC(r)?10:11:Ie(28295,{value:r})}function Sr(r,e){if(r===e)return!0;const n=ra(r);if(n!==ra(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Iu(r).isEqual(Iu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=na(o.timestampValue),m=na(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return ia(o.bytesValue).isEqual(ia(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return $t(o.geoPointValue.latitude)===$t(u.geoPointValue.latitude)&&$t(o.geoPointValue.longitude)===$t(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return $t(o.integerValue)===$t(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=$t(o.doubleValue),m=$t(u.doubleValue);return h===m?qh(h)===qh(m):isNaN(h)&&isNaN(m)}return!1})(r,e);case 9:return Jo(r.arrayValue.values||[],e.arrayValue.values||[],Sr);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Kv(h)!==Kv(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!Sr(h[g],m[g])))return!1;return!0})(r,e);default:return Ie(52216,{left:r})}}function Nu(r,e){return(r.values||[]).find((n=>Sr(n,e)))!==void 0}function Wo(r,e){if(r===e)return 0;const n=ra(r),s=ra(e);if(n!==s)return Xe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xe(r.booleanValue,e.booleanValue);case 2:return(function(u,h){const m=$t(u.integerValue||u.doubleValue),g=$t(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(r,e);case 3:return $v(r.timestampValue,e.timestampValue);case 4:return $v(Iu(r),Iu(e));case 5:return mg(r.stringValue,e.stringValue);case 6:return(function(u,h){const m=ia(u),g=ia(h);return m.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(u,h){const m=u.split("/"),g=h.split("/");for(let p=0;p<m.length&&p<g.length;p++){const E=Xe(m[p],g[p]);if(E!==0)return E}return Xe(m.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,h){const m=Xe($t(u.latitude),$t(h.latitude));return m!==0?m:Xe($t(u.longitude),$t(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Yv(r.arrayValue,e.arrayValue);case 10:return(function(u,h){const m=u.fields||{},g=h.fields||{},p=m[Fh]?.arrayValue,E=g[Fh]?.arrayValue,T=Xe(p?.values?.length||0,E?.values?.length||0);return T!==0?T:Yv(p,E)})(r.mapValue,e.mapValue);case 11:return(function(u,h){if(u===Eh.mapValue&&h===Eh.mapValue)return 0;if(u===Eh.mapValue)return 1;if(h===Eh.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=h.fields||{},E=Object.keys(p);g.sort(),E.sort();for(let T=0;T<g.length&&T<E.length;++T){const S=mg(g[T],E[T]);if(S!==0)return S;const x=Wo(m[g[T]],p[E[T]]);if(x!==0)return x}return Xe(g.length,E.length)})(r.mapValue,e.mapValue);default:throw Ie(23264,{he:n})}}function $v(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Xe(r,e);const n=na(r),s=na(e),o=Xe(n.seconds,s.seconds);return o!==0?o:Xe(n.nanos,s.nanos)}function Yv(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Wo(n[o],s[o]);if(u)return u}return Xe(n.length,s.length)}function el(r){return gg(r)}function gg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=na(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return ia(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return Re.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=gg(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${gg(n.fields[h])}`;return o+"}"})(r.mapValue):Ie(61005,{value:r})}function Ih(r){switch(ra(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pf(r);return e?16+Ih(e):16;case 5:return 2*r.stringValue.length;case 6:return ia(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Ih(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return ua(s.fields,((u,h)=>{o+=u.length+Ih(h)})),o})(r.mapValue);default:throw Ie(13486,{value:r})}}function Xv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function pg(r){return!!r&&"integerValue"in r}function Jg(r){return!!r&&"arrayValue"in r}function Zv(r){return!!r&&"nullValue"in r}function Jv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function xh(r){return!!r&&"mapValue"in r}function LC(r){return(r?.mapValue?.fields||{})[ib]?.stringValue===rb}function pu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ua(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=pu(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pu(r.arrayValue.values[n]);return e}return{...r}}function UC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===PC}class Yn{constructor(e){this.value=e}static empty(){return new Yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!xh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pu(n)}setAll(e){let n=On.emptyPath(),s={},o=[];e.forEach(((h,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=m.popLast()}h?s[m.lastSegment()]=pu(h):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());xh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];xh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){ua(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new Yn(pu(this.value))}}function sb(r){const e=[];return ua(r.fields,((n,s)=>{const o=new On([n]);if(xh(s)){const u=sb(s.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new _i(e)}class bn{constructor(e,n,s,o,u,h,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(e){return new bn(e,0,Ne.min(),Ne.min(),Ne.min(),Yn.empty(),0)}static newFoundDocument(e,n,s,o){return new bn(e,1,n,Ne.min(),s,o,0)}static newNoDocument(e,n){return new bn(e,2,n,Ne.min(),Ne.min(),Yn.empty(),0)}static newUnknownDocument(e,n){return new bn(e,3,n,Ne.min(),Ne.min(),Yn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Gh{constructor(e,n){this.position=e,this.inclusive=n}}function Wv(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],h=r.position[o];if(u.field.isKeyField()?s=Re.comparator(Re.fromName(h.referenceValue),n.key):s=Wo(h,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function eE(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Sr(r.position[n],e.position[n]))return!1;return!0}class Kh{constructor(e,n="asc"){this.field=e,this.dir=n}}function zC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class ab{}class an extends ab{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new BC(e,n,s):n==="array-contains"?new FC(e,s):n==="in"?new GC(e,s):n==="not-in"?new KC(e,s):n==="array-contains-any"?new QC(e,s):new an(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new qC(e,s):new HC(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wo(n,this.value)):n!==null&&ra(this.value)===ra(n)&&this.matchesComparison(Wo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tr extends ab{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new tr(e,n)}matches(e){return ob(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ob(r){return r.op==="and"}function lb(r){return jC(r)&&ob(r)}function jC(r){for(const e of r.filters)if(e instanceof tr)return!1;return!0}function yg(r){if(r instanceof an)return r.field.canonicalString()+r.op.toString()+el(r.value);if(lb(r))return r.filters.map((e=>yg(e))).join(",");{const e=r.filters.map((n=>yg(n))).join(",");return`${r.op}(${e})`}}function ub(r,e){return r instanceof an?(function(s,o){return o instanceof an&&s.op===o.op&&s.field.isEqual(o.field)&&Sr(s.value,o.value)})(r,e):r instanceof tr?(function(s,o){return o instanceof tr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,h,m)=>u&&ub(h,o.filters[m])),!0):!1})(r,e):void Ie(19439)}function cb(r){return r instanceof an?(function(n){return`${n.field.canonicalString()} ${n.op} ${el(n.value)}`})(r):r instanceof tr?(function(n){return n.op.toString()+" {"+n.getFilters().map(cb).join(" ,")+"}"})(r):"Filter"}class BC extends an{constructor(e,n,s){super(e,n,s),this.key=Re.fromName(s.referenceValue)}matches(e){const n=Re.comparator(e.key,this.key);return this.matchesComparison(n)}}class qC extends an{constructor(e,n){super(e,"in",n),this.keys=hb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class HC extends an{constructor(e,n){super(e,"not-in",n),this.keys=hb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function hb(r,e){return(e.arrayValue?.values||[]).map((n=>Re.fromName(n.referenceValue)))}class FC extends an{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jg(n)&&Nu(n.arrayValue,this.value)}}class GC extends an{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Nu(this.value.arrayValue,n)}}class KC extends an{constructor(e,n){super(e,"not-in",n)}matches(e){if(Nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Nu(this.value.arrayValue,n)}}class QC extends an{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Nu(this.value.arrayValue,s)))}}class $C{constructor(e,n=null,s=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.Te=null}}function tE(r,e=null,n=[],s=[],o=null,u=null,h=null){return new $C(r,e,n,s,o,u,h)}function Wg(r){const e=ke(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>yg(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),ju(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>el(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>el(s))).join(",")),e.Te=n}return e.Te}function ep(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!zC(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!ub(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!eE(r.startAt,e.startAt)&&eE(r.endAt,e.endAt)}function _g(r){return Re.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Bu{constructor(e,n=null,s=[],o=[],u=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function YC(r,e,n,s,o,u,h,m){return new Bu(r,e,n,s,o,u,h,m)}function tp(r){return new Bu(r)}function nE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function fb(r){return r.collectionGroup!==null}function yu(r){const e=ke(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new dn(On.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Kh(u,s))})),n.has(On.keyField().canonicalString())||e.Ie.push(new Kh(On.keyField(),s))}return e.Ie}function _r(r){const e=ke(r);return e.Ee||(e.Ee=XC(e,yu(r))),e.Ee}function XC(r,e){if(r.limitType==="F")return tE(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Kh(o.field,u)}));const n=r.endAt?new Gh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Gh(r.startAt.position,r.startAt.inclusive):null;return tE(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function vg(r,e){const n=r.filters.concat([e]);return new Bu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function Eg(r,e,n){return new Bu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function yf(r,e){return ep(_r(r),_r(e))&&r.limitType===e.limitType}function db(r){return`${Wg(_r(r))}|lt:${r.limitType}`}function Uo(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>cb(o))).join(", ")}]`),ju(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>el(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>el(o))).join(",")),`Target(${s})`})(_r(r))}; limitType=${r.limitType})`}function _f(r,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Re.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,o){for(const u of yu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(h,m,g){const p=Wv(h,m,g);return h.inclusive?p<=0:p<0})(s.startAt,yu(s),o)||s.endAt&&!(function(h,m,g){const p=Wv(h,m,g);return h.inclusive?p>=0:p>0})(s.endAt,yu(s),o))})(r,e)}function ZC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function mb(r){return(e,n)=>{let s=!1;for(const o of yu(r)){const u=JC(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function JC(r,e,n){const s=r.field.isKeyField()?Re.comparator(e.key,n.key):(function(u,h,m){const g=h.data.field(u),p=m.data.field(u);return g!==null&&p!==null?Wo(g,p):Ie(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ie(19790,{direction:r.dir})}}class Ya{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ua(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return ZT(this.inner)}size(){return this.innerSize}}const WC=new kt(Re.comparator);function Jr(){return WC}const gb=new kt(Re.comparator);function cu(...r){let e=gb;for(const n of r)e=e.insert(n.key,n);return e}function pb(r){let e=gb;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function qa(){return _u()}function yb(){return _u()}function _u(){return new Ya((r=>r.toString()),((r,e)=>r.isEqual(e)))}const e2=new kt(Re.comparator),t2=new dn(Re.comparator);function Ze(...r){let e=t2;for(const n of r)e=e.add(n);return e}const n2=new dn(Xe);function i2(){return n2}function np(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qh(e)?"-0":e}}function _b(r){return{integerValue:""+r}}function r2(r,e){return DC(e)?_b(e):np(r,e)}class vf{constructor(){this._=void 0}}function s2(r,e,n){return r instanceof Qh?(function(o,u){const h={fields:{[eb]:{stringValue:WT},[nb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Zg(u)&&(u=pf(u)),u&&(h.fields[tb]=u),{mapValue:h}})(n,e):r instanceof Du?Eb(r,e):r instanceof Ou?Tb(r,e):(function(o,u){const h=vb(o,u),m=iE(h)+iE(o.Ae);return pg(h)&&pg(o.Ae)?_b(m):np(o.serializer,m)})(r,e)}function a2(r,e,n){return r instanceof Du?Eb(r,e):r instanceof Ou?Tb(r,e):n}function vb(r,e){return r instanceof $h?(function(s){return pg(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class Qh extends vf{}class Du extends vf{constructor(e){super(),this.elements=e}}function Eb(r,e){const n=bb(e);for(const s of r.elements)n.some((o=>Sr(o,s)))||n.push(s);return{arrayValue:{values:n}}}class Ou extends vf{constructor(e){super(),this.elements=e}}function Tb(r,e){let n=bb(e);for(const s of r.elements)n=n.filter((o=>!Sr(o,s)));return{arrayValue:{values:n}}}class $h extends vf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function iE(r){return $t(r.integerValue||r.doubleValue)}function bb(r){return Jg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function o2(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof Du&&o instanceof Du||s instanceof Ou&&o instanceof Ou?Jo(s.elements,o.elements,Sr):s instanceof $h&&o instanceof $h?Sr(s.Ae,o.Ae):s instanceof Qh&&o instanceof Qh})(r.transform,e.transform)}class l2{constructor(e,n){this.version=e,this.transformResults=n}}class Xn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Ef{}function Sb(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new ip(r.key,Xn.none()):new qu(r.key,r.data,Xn.none());{const n=r.data,s=Yn.empty();let o=new dn(On.comparator);for(let u of e.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new ca(r.key,s,new _i(o.toArray()),Xn.none())}}function u2(r,e,n){r instanceof qu?(function(o,u,h){const m=o.value.clone(),g=sE(o.fieldTransforms,u,h.transformResults);m.setAll(g),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,e,n):r instanceof ca?(function(o,u,h){if(!Nh(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=sE(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(Ab(o)),g.setAll(m),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,n):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function vu(r,e,n,s){return r instanceof qu?(function(u,h,m,g){if(!Nh(u.precondition,h))return m;const p=u.value.clone(),E=aE(u.fieldTransforms,g,h);return p.setAll(E),h.convertToFoundDocument(h.version,p).setHasLocalMutations(),null})(r,e,n,s):r instanceof ca?(function(u,h,m,g){if(!Nh(u.precondition,h))return m;const p=aE(u.fieldTransforms,g,h),E=h.data;return E.setAll(Ab(u)),E.setAll(p),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(r,e,n,s):(function(u,h,m){return Nh(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(r,e,n)}function c2(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=vb(s.transform,o||null);u!=null&&(n===null&&(n=Yn.empty()),n.set(s.field,u))}return n||null}function rE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Jo(s,o,((u,h)=>o2(u,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class qu extends Ef{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ca extends Ef{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Ab(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function sE(r,e,n){const s=new Map;nt(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],h=u.transform,m=e.data.field(u.field);s.set(u.field,a2(h,m,n[o]))}return s}function aE(r,e,n){const s=new Map;for(const o of r){const u=o.transform,h=n.data.field(o.field);s.set(o.field,s2(u,h,e))}return s}class ip extends Ef{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wb extends Ef{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class h2{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&u2(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=vu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=vu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=yb();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=n.has(o.key)?null:m;const g=Sb(h,m);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Ne.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&Jo(this.mutations,e.mutations,((n,s)=>rE(n,s)))&&Jo(this.baseMutations,e.baseMutations,((n,s)=>rE(n,s)))}}class rp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){nt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return e2})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new rp(e,n,s,o)}}class f2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class d2{constructor(e,n){this.count=e,this.unchangedNames=n}}var sn,tt;function Rb(r){switch(r){case ne.OK:return Ie(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Ie(15467,{code:r})}}function Cb(r){if(r===void 0)return Zr("GRPC error has no .code"),ne.UNKNOWN;switch(r){case sn.OK:return ne.OK;case sn.CANCELLED:return ne.CANCELLED;case sn.UNKNOWN:return ne.UNKNOWN;case sn.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case sn.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case sn.INTERNAL:return ne.INTERNAL;case sn.UNAVAILABLE:return ne.UNAVAILABLE;case sn.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case sn.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case sn.NOT_FOUND:return ne.NOT_FOUND;case sn.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case sn.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case sn.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case sn.ABORTED:return ne.ABORTED;case sn.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case sn.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case sn.DATA_LOSS:return ne.DATA_LOSS;default:return Ie(39323,{code:r})}}(tt=sn||(sn={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";function m2(){return new TextEncoder}const g2=new Xs([4294967295,4294967295],0);function oE(r){const e=m2().encode(r),n=new jT;return n.update(e),new Uint8Array(n.digest())}function lE(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Xs([n,s],0),new Xs([o,u],0)]}class sp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new hu(`Invalid padding: ${n}`);if(s<0)throw new hu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new hu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new hu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Xs.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(Xs.fromNumber(s)));return o.compare(g2)===1&&(o=new Xs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=oE(e),[s,o]=lE(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);if(!this.we(h))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new sp(u,o,n);return s.forEach((m=>h.insert(m))),h}insert(e){if(this.ge===0)return;const n=oE(e),[s,o]=lE(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);this.Se(h)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class hu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Tf{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Hu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Tf(Ne.min(),o,new kt(Xe),Jr(),Ze())}}class Hu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Hu(s,n,Ze(),Ze(),Ze())}}class Dh{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class Ib{constructor(e,n){this.targetId=e,this.Ce=n}}class xb{constructor(e,n,s=Mn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class uE{constructor(){this.ve=0,this.Fe=cE(),this.Me=Mn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),n=Ze(),s=Ze();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ie(38017,{changeType:u})}})),new Hu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=cE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class p2{constructor(e){this.Ge=e,this.ze=new Map,this.je=Jr(),this.Je=Th(),this.He=Th(),this.Ye=new kt(Xe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(_g(u))if(s===0){const h=new Re(u.path);this.et(n,h,bn.newNoDocument(h,Ne.min()))}else nt(s===1,20013,{expectedCount:s});else{const h=this._t(n);if(h!==s){const m=this.ut(e),g=m?this.ct(m,e,h):1;if(g!==0){this.it(n);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let h,m;try{h=ia(s).toUint8Array()}catch(g){if(g instanceof JT)return Zo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new sp(h,o,u)}catch(g){return Zo(g instanceof hu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const m=this.ot(h);if(m){if(u.current&&_g(m.target)){const g=new Re(m.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,bn.newNoDocument(g,e))}u.Be&&(n.set(h,u.ke()),u.qe())}}));let s=Ze();this.He.forEach(((u,h)=>{let m=!0;h.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new Tf(e,n,this.Ye,this.je,s);return this.je=Jr(),this.Je=Th(),this.He=Th(),this.Ye=new kt(Xe),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new uE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new dn(Xe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new dn(Xe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||_e("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new uE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Th(){return new kt(Re.comparator)}function cE(){return new kt(Re.comparator)}const y2={asc:"ASCENDING",desc:"DESCENDING"},_2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v2={and:"AND",or:"OR"};class E2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Tg(r,e){return r.useProto3Json||ju(e)?e:{value:e}}function Yh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Nb(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function T2(r,e){return Yh(r,e.toTimestamp())}function vi(r){return nt(!!r,49232),Ne.fromTimestamp((function(n){const s=na(n);return new It(s.seconds,s.nanos)})(r))}function ap(r,e){return bg(r,e).canonicalString()}function bg(r,e){const n=(function(o){return new vt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function Db(r){const e=vt.fromString(r);return nt(Lb(e),10190,{key:e.toString()}),e}function Xh(r,e){return ap(r.databaseId,e.path)}function Eu(r,e){const n=Db(e);if(n.get(1)!==r.databaseId.projectId)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Re(Mb(n))}function Ob(r,e){return ap(r.databaseId,e)}function b2(r){const e=Db(r);return e.length===4?vt.emptyPath():Mb(e)}function Sg(r){return new vt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Mb(r){return nt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function hE(r,e,n){return{name:Xh(r,e),fields:n.value.mapValue.fields}}function S2(r,e){return"found"in e?(function(s,o){nt(!!o.found,43571),o.found.name,o.found.updateTime;const u=Eu(s,o.found.name),h=vi(o.found.updateTime),m=o.found.createTime?vi(o.found.createTime):Ne.min(),g=new Yn({mapValue:{fields:o.found.fields}});return bn.newFoundDocument(u,h,m,g)})(r,e):"missing"in e?(function(s,o){nt(!!o.missing,3894),nt(!!o.readTime,22933);const u=Eu(s,o.missing),h=vi(o.readTime);return bn.newNoDocument(u,h)})(r,e):Ie(7234,{result:e})}function A2(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ie(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,E){return p.useProto3Json?(nt(E===void 0||typeof E=="string",58123),Mn.fromBase64String(E||"")):(nt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Mn.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(p){const E=p.code===void 0?ne.UNKNOWN:Cb(p.code);return new me(E,p.message||"")})(h);n=new xb(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Eu(r,s.document.name),u=vi(s.document.updateTime),h=s.document.createTime?vi(s.document.createTime):Ne.min(),m=new Yn({mapValue:{fields:s.document.fields}}),g=bn.newFoundDocument(o,u,h,m),p=s.targetIds||[],E=s.removedTargetIds||[];n=new Dh(p,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Eu(r,s.document),u=s.readTime?vi(s.readTime):Ne.min(),h=bn.newNoDocument(o,u),m=s.removedTargetIds||[];n=new Dh([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Eu(r,s.document),u=s.removedTargetIds||[];n=new Dh([],u,o,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new d2(o,u),m=s.targetId;n=new Ib(m,h)}}return n}function Vb(r,e){let n;if(e instanceof qu)n={update:hE(r,e.key,e.value)};else if(e instanceof ip)n={delete:Xh(r,e.key)};else if(e instanceof ca)n={update:hE(r,e.key,e.data),updateMask:M2(e.fieldMask)};else{if(!(e instanceof wb))return Ie(16599,{Vt:e.type});n={verify:Xh(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,h){const m=h.transform;if(m instanceof Qh)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Du)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ou)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof $h)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw Ie(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:T2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ie(27497)})(r,e.precondition)),n}function w2(r,e){return r&&r.length>0?(nt(e!==void 0,14353),r.map((n=>(function(o,u){let h=o.updateTime?vi(o.updateTime):vi(u);return h.isEqual(Ne.min())&&(h=vi(u)),new l2(h,o.transformResults||[])})(n,e)))):[]}function R2(r,e){return{documents:[Ob(r,e.path)]}}function C2(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Ob(r,o);const u=(function(p){if(p.length!==0)return Pb(tr.create(p,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(p){if(p.length!==0)return p.map((E=>(function(S){return{field:zo(S.field),direction:N2(S.dir)}})(E)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const m=Tg(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:o}}function I2(r){let e=b2(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){nt(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=(function(T){const S=kb(T);return S instanceof tr&&lb(S)?S.getFilters():[S]})(n.where));let h=[];n.orderBy&&(h=(function(T){return T.map((S=>(function(L){return new Kh(jo(L.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(S)))})(n.orderBy));let m=null;n.limit&&(m=(function(T){let S;return S=typeof T=="object"?T.value:T,ju(S)?null:S})(n.limit));let g=null;n.startAt&&(g=(function(T){const S=!!T.before,x=T.values||[];return new Gh(x,S)})(n.startAt));let p=null;return n.endAt&&(p=(function(T){const S=!T.before,x=T.values||[];return new Gh(x,S)})(n.endAt)),YC(e,o,h,u,m,"F",g,p)}function x2(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function kb(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=jo(n.unaryFilter.field);return an.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=jo(n.unaryFilter.field);return an.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=jo(n.unaryFilter.field);return an.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=jo(n.unaryFilter.field);return an.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(r):r.fieldFilter!==void 0?(function(n){return an.create(jo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return tr.create(n.compositeFilter.filters.map((s=>kb(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(n.compositeFilter.op))})(r):Ie(30097,{filter:r})}function N2(r){return y2[r]}function D2(r){return _2[r]}function O2(r){return v2[r]}function zo(r){return{fieldPath:r.canonicalString()}}function jo(r){return On.fromServerFormat(r.fieldPath)}function Pb(r){return r instanceof an?(function(n){if(n.op==="=="){if(Jv(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NAN"}};if(Zv(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Jv(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NOT_NAN"}};if(Zv(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(n.field),op:D2(n.op),value:n.value}}})(r):r instanceof tr?(function(n){const s=n.getFilters().map((o=>Pb(o)));return s.length===1?s[0]:{compositeFilter:{op:O2(n.op),filters:s}}})(r):Ie(54877,{filter:r})}function M2(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Lb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Ks{constructor(e,n,s,o,u=Ne.min(),h=Ne.min(),m=Mn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Ks(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class V2{constructor(e){this.yt=e}}function k2(r){const e=I2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Eg(e,e.limit,"L"):e}class P2{constructor(){this.Cn=new L2}addToCollectionParentIndex(e,n){return this.Cn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(ta.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(ta.min())}updateCollectionGroup(e,n,s){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class L2{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new dn(vt.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new dn(vt.comparator)).toArray()}}const fE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ub=41943040;class ai{static withCacheSize(e){return new ai(e,ai.DEFAULT_COLLECTION_PERCENTILE,ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}ai.DEFAULT_COLLECTION_PERCENTILE=10,ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ai.DEFAULT=new ai(Ub,ai.DEFAULT_COLLECTION_PERCENTILE,ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ai.DISABLED=new ai(-1,0,0);class tl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new tl(0)}static cr(){return new tl(-1)}}const dE="LruGarbageCollector",U2=1048576;function mE([r,e],[n,s]){const o=Xe(r,n);return o===0?Xe(e,s):o}class z2{constructor(e){this.Ir=e,this.buffer=new dn(mE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();mE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class j2{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){_e(dE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ul(n)?_e(dE,"Ignoring IndexedDB error during garbage collection: ",n):await ll(n)}await this.Vr(3e5)}))}}class B2{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return re.resolve(gf.ce);const s=new z2(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(fE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,h,m,g,p;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,m=Date.now(),this.removeTargets(e,s,n)))).next((T=>(u=T,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(p=Date.now(),Lo()<=Ye.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${T} documents in `+(p-g)+`ms
Total Duration: ${p-E}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function q2(r,e){return new B2(r,e)}class H2{constructor(){this.changes=new Ya((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?re.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class F2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class G2{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&vu(s.mutation,o,_i.empty(),It.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Ze()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Ze()){const o=qa();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let h=cu();return u.forEach(((m,g)=>{h=h.insert(m,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const s=qa();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Ze())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,m)=>{n.set(h,m)}))}))}computeViews(e,n,s,o){let u=Jr();const h=_u(),m=(function(){return _u()})();return n.forEach(((g,p)=>{const E=s.get(p.key);o.has(p.key)&&(E===void 0||E.mutation instanceof ca)?u=u.insert(p.key,p):E!==void 0?(h.set(p.key,E.mutation.getFieldMask()),vu(E.mutation,p,E.mutation.getFieldMask(),It.now())):h.set(p.key,_i.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((p,E)=>h.set(p,E))),n.forEach(((p,E)=>m.set(p,new F2(E,h.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=_u();let o=new kt(((h,m)=>h-m)),u=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const m of h)m.keys().forEach((g=>{const p=n.get(g);if(p===null)return;let E=s.get(g)||_i.empty();E=m.applyToLocalView(p,E),s.set(g,E);const T=(o.get(m.batchId)||Ze()).add(g);o=o.insert(m.batchId,T)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,E=g.value,T=yb();E.forEach((S=>{if(!u.has(S)){const x=Sb(n.get(S),s.get(S));x!==null&&T.set(S,x),u=u.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,p,T))}return re.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(h){return Re.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):re.resolve(qa());let m=Cu,g=u;return h.next((p=>re.forEach(p,((E,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(E)?re.resolve():this.remoteDocumentCache.getEntry(e,E).next((S=>{g=g.insert(E,S)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,g,p,Ze()))).next((E=>({batchId:m,changes:pb(E)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Re(n)).next((s=>{let o=cu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let h=cu();return this.indexManager.getCollectionParents(e,u).next((m=>re.forEach(m,(g=>{const p=(function(T,S){return new Bu(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,s,o).next((E=>{E.forEach(((T,S)=>{h=h.insert(T,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((h=>{u.forEach(((g,p)=>{const E=p.getKey();h.get(E)===null&&(h=h.insert(E,bn.newInvalidDocument(E)))}));let m=cu();return h.forEach(((g,p)=>{const E=u.get(g);E!==void 0&&vu(E.mutation,p,_i.empty(),It.now()),_f(n,p)&&(m=m.insert(g,p))})),m}))}}class K2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return re.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:vi(o.createTime)}})(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:k2(o.bundledQuery),readTime:vi(o.readTime)}})(n)),re.resolve()}}class Q2{constructor(){this.overlays=new kt(Re.comparator),this.qr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const s=qa();return re.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),re.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),re.resolve()}getOverlaysForCollection(e,n,s){const o=qa(),u=n.length+1,h=new Re(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return re.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new kt(((p,E)=>p-E));const h=this.overlays.getIterator();for(;h.hasNext();){const p=h.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>s){let E=u.get(p.largestBatchId);E===null&&(E=qa(),u=u.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const m=qa(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,E)=>m.set(p,E))),!(m.size()>=o)););return re.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new f2(n,s));let u=this.qr.get(n);u===void 0&&(u=Ze(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}class $2{constructor(){this.sessionToken=Mn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}class op{constructor(){this.Qr=new dn(vn.$r),this.Ur=new dn(vn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new vn(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new vn(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Re(new vt([])),s=new vn(n,e),o=new vn(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Re(new vt([])),s=new vn(n,e),o=new vn(n,e+1);let u=Ze();return this.Ur.forEachInRange([s,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new vn(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class vn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Re.comparator(e.key,n.key)||Xe(e.Yr,n.Yr)}static Kr(e,n){return Xe(e.Yr,n.Yr)||Re.comparator(e.key,n.key)}}class Y2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new dn(vn.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new h2(u,n,s,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new vn(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(h)}lookupMutationBatch(e,n){return re.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Xg:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new vn(n,0),o=new vn(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(h=>{const m=this.Xr(h.Yr);u.push(m)})),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new dn(Xe);return n.forEach((o=>{const u=new vn(o,0),h=new vn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(m=>{s=s.add(m.Yr)}))})),re.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Re.isDocumentKey(u)||(u=u.child(""));const h=new vn(new Re(u),0);let m=new dn(Xe);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),h),re.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){nt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return re.forEach(n.mutations,(o=>{const u=new vn(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new vn(n,0),o=this.Zr.firstAfterOrEqual(s);return re.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class X2{constructor(e){this.ri=e,this.docs=(function(){return new kt(Re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return re.resolve(s?s.document.mutableCopy():bn.newInvalidDocument(n))}getEntries(e,n){let s=Jr();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():bn.newInvalidDocument(o))})),re.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=Jr();const h=n.path,m=new Re(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:E}}=g.getNext();if(!h.isPrefixOf(p.path))break;p.path.length>h.length+1||CC(RC(E),s)<=0||(o.has(E.key)||_f(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return re.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ie(9500)}ii(e,n){return re.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new Z2(this)}getSize(e){return re.resolve(this.size)}}class Z2 extends H2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),re.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class J2{constructor(e){this.persistence=e,this.si=new Ya((n=>Wg(n)),ep),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new op,this.targetCount=0,this.ai=tl.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),re.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new tl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.Pr(n),re.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),re.waitFor(u).next((()=>o))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return re.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),re.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),re.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return re.resolve(s)}containsKey(e,n){return re.resolve(this._i.containsKey(n))}}class zb{constructor(e,n){this.ui={},this.overlays={},this.ci=new gf(0),this.li=!1,this.li=!0,this.hi=new $2,this.referenceDelegate=e(this),this.Pi=new J2(this),this.indexManager=new P2,this.remoteDocumentCache=(function(o){return new X2(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new V2(n),this.Ii=new K2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Q2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new Y2(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){_e("MemoryPersistence","Starting transaction:",e);const o=new W2(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return re.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class W2 extends xC{constructor(e){super(),this.currentSequenceNumber=e}}class lp{constructor(e){this.persistence=e,this.Ri=new op,this.Vi=null}static mi(e){return new lp(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),re.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),re.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,(s=>{const o=Re.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Ne.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return re.or([()=>re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Zh{constructor(e,n){this.persistence=e,this.pi=new Ya((s=>OC(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=q2(this,n)}static mi(e,n){return new Zh(e,n)}Ei(){}di(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return re.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?re.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,n).next((m=>{m||(s++,u.removeEntry(h,Ne.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ih(e.data.value)),n}br(e,n,s){return re.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return re.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class up{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Ze(),o=Ze();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new up(e,n.fromCache,s,o)}}class eI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class tI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Xw()?8:NC(Bn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new eI;return this.Ss(e,n,h).next((m=>{if(u.result=m,this.Vs)return this.bs(e,n,h,m.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(Lo()<=Ye.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",Uo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(Lo()<=Ye.DEBUG&&_e("QueryEngine","Query:",Uo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Lo()<=Ye.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",Uo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_r(n))):re.resolve())}ys(e,n){if(nE(n))return re.resolve(null);let s=_r(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Eg(n,null,"F"),s=_r(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const h=Ze(...u);return this.ps.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const p=this.Ds(n,m);return this.Cs(n,p,h,g.readTime)?this.ys(e,Eg(n,null,"F")):this.vs(e,p,n,g)}))))})))))}ws(e,n,s,o){return nE(n)||o.isEqual(Ne.min())?re.resolve(null):this.ps.getDocuments(e,s).next((u=>{const h=this.Ds(n,u);return this.Cs(n,h,s,o)?re.resolve(null):(Lo()<=Ye.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Uo(n)),this.vs(e,h,n,wC(o,Cu)).next((m=>m)))}))}Ds(e,n){let s=new dn(mb(e));return n.forEach(((o,u)=>{_f(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return Lo()<=Ye.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",Uo(n)),this.ps.getDocumentsMatchingQuery(e,n,ta.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const cp="LocalStore",nI=3e8;class iI{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new kt(Xe),this.xs=new Ya((u=>Wg(u)),ep),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new G2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function rI(r,e,n,s){return new iI(r,e,n,s)}async function jb(r,e){const n=ke(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const h=[],m=[];let g=Ze();for(const p of o){h.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}for(const p of u){m.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}return n.localDocuments.getDocuments(s,g).next((p=>({Ls:p,removedBatchIds:h,addedBatchIds:m})))}))}))}function sI(r,e){const n=ke(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,E){const T=p.batch,S=T.keys();let x=re.resolve();return S.forEach((L=>{x=x.next((()=>E.getEntry(g,L))).next((z=>{const q=p.docVersions.get(L);nt(q!==null,48541),z.version.compareTo(q)<0&&(T.applyToRemoteDocument(z,p),z.isValidDocument()&&(z.setReadTime(p.commitVersion),E.addEntry(z)))}))})),x.next((()=>m.mutationQueue.removeMutationBatch(g,T)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=Ze();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function Bb(r){const e=ke(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function aI(r,e){const n=ke(r),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((E,T)=>{const S=o.get(T);if(!S)return;m.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,E.addedDocuments,T))));let x=S.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?x=x.withResumeToken(Mn.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):E.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(E.resumeToken,s)),o=o.insert(T,x),(function(z,q,se){return z.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=nI?!0:se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0})(S,x,E)&&m.push(n.Pi.updateTargetData(u,x))}));let g=Jr(),p=Ze();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(oI(u,h,e.documentUpdates).next((E=>{g=E.ks,p=E.qs}))),!s.isEqual(Ne.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(E)}return re.waitFor(m).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(n.Ms=o,u)))}function oI(r,e,n){let s=Ze(),o=Ze();return n.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let h=Jr();return n.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ne.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):_e(cp,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function lI(r,e){const n=ke(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Xg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function uI(r,e){const n=ke(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,re.resolve(o)):n.Pi.allocateTargetId(s).next((h=>(o=new Ks(e,h,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Ag(r,e,n){const s=ke(r),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!ul(h))throw h;_e(cp,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function gE(r,e,n){const s=ke(r);let o=Ne.min(),u=Ze();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,p,E){const T=ke(g),S=T.xs.get(E);return S!==void 0?re.resolve(T.Ms.get(S)):T.Pi.getTargetData(p,E)})(s,h,_r(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,m.targetId).next((g=>{u=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,n?o:Ne.min(),n?u:Ze()))).next((m=>(cI(s,ZC(e),m),{documents:m,Qs:u})))))}function cI(r,e,n){let s=r.Os.get(e)||Ne.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Os.set(e,s)}class pE{constructor(){this.activeTargetIds=i2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hI{constructor(){this.Mo=new pE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new pE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class fI{Oo(e){}shutdown(){}}const yE="ConnectivityMonitor";class _E{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){_e(yE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){_e(yE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let bh=null;function wg(){return bh===null?bh=(function(){return 268435456+Math.round(2147483648*Math.random())})():bh++,"0x"+bh.toString(16)}const Fm="RestConnection",dI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Hh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const h=wg(),m=this.zo(e,n.toUriEncodedString());_e(Fm,`Sending RPC '${e}' ${h}:`,m,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(m),E=sl(p);return this.Jo(e,m,g,s,E).then((T=>(_e(Fm,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw Zo(Fm,`RPC '${e}' ${h} failed with error: `,T,"url: ",m,"request:",s),T}))}Ho(e,n,s,o,u,h){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ol})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=dI[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class gI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Un="WebChannelConnection";class pI extends mI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const h=wg();return new Promise(((m,g)=>{const p=new BT;p.setWithCredentials(!0),p.listenOnce(qT.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Ch.NO_ERROR:const T=p.getResponseJson();_e(Un,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),m(T);break;case Ch.TIMEOUT:_e(Un,`RPC '${e}' ${h} timed out`),g(new me(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Ch.HTTP_ERROR:const S=p.getStatus();if(_e(Un,`RPC '${e}' ${h} failed with status:`,S,"response text:",p.getResponseText()),S>0){let x=p.getResponseJson();Array.isArray(x)&&(x=x[0]);const L=x?.error;if(L&&L.status&&L.message){const z=(function(se){const he=se.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(he)>=0?he:ne.UNKNOWN})(L.status);g(new me(z,L.message))}else g(new me(ne.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new me(ne.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:h,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{_e(Un,`RPC '${e}' ${h} completed.`)}}));const E=JSON.stringify(o);_e(Un,`RPC '${e}' ${h} sending request:`,o),p.send(n,"POST",E,s,15)}))}T_(e,n,s){const o=wg(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=GT(),m=FT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const E=u.join("");_e(Un,`Creating RPC '${e}' stream ${o}: ${E}`,g);const T=h.createWebChannel(E,g);this.I_(T);let S=!1,x=!1;const L=new gI({Yo:q=>{x?_e(Un,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(S||(_e(Un,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),_e(Un,`RPC '${e}' stream ${o} sending:`,q),T.send(q))},Zo:()=>T.close()}),z=(q,se,he)=>{q.listen(se,(oe=>{try{he(oe)}catch(be){setTimeout((()=>{throw be}),0)}}))};return z(T,uu.EventType.OPEN,(()=>{x||(_e(Un,`RPC '${e}' stream ${o} transport opened.`),L.o_())})),z(T,uu.EventType.CLOSE,(()=>{x||(x=!0,_e(Un,`RPC '${e}' stream ${o} transport closed`),L.a_(),this.E_(T))})),z(T,uu.EventType.ERROR,(q=>{x||(x=!0,Zo(Un,`RPC '${e}' stream ${o} transport errored. Name:`,q.name,"Message:",q.message),L.a_(new me(ne.UNAVAILABLE,"The operation could not be completed")))})),z(T,uu.EventType.MESSAGE,(q=>{if(!x){const se=q.data[0];nt(!!se,16349);const he=se,oe=he?.error||he[0]?.error;if(oe){_e(Un,`RPC '${e}' stream ${o} received error:`,oe);const be=oe.status;let de=(function(w){const C=sn[w];if(C!==void 0)return Cb(C)})(be),pe=oe.message;de===void 0&&(de=ne.INTERNAL,pe="Unknown error status: "+be+" with message "+oe.message),x=!0,L.a_(new me(de,pe)),T.close()}else _e(Un,`RPC '${e}' stream ${o} received:`,se),L.u_(se)}})),z(m,HT.STAT_EVENT,(q=>{q.stat===dg.PROXY?_e(Un,`RPC '${e}' stream ${o} detected buffering proxy`):q.stat===dg.NOPROXY&&_e(Un,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Gm(){return typeof document<"u"?document:null}function bf(r){return new E2(r,!0)}class hp{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&_e("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const vE="PersistentStream";class qb{constructor(e,n,s,o,u,h,m,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new hp(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(Zr(n.toString()),Zr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new me(ne.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return _e(vE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(_e(vE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yI extends qb{constructor(e,n,s,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=A2(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Ne.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Ne.min():h.readTime?vi(h.readTime):Ne.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Sg(this.serializer),n.addTarget=(function(u,h){let m;const g=h.target;if(m=_g(g)?{documents:R2(u,g)}:{query:C2(u,g).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=Nb(u,h.resumeToken);const p=Tg(u,h.expectedCount);p!==null&&(m.expectedCount=p)}else if(h.snapshotVersion.compareTo(Ne.min())>0){m.readTime=Yh(u,h.snapshotVersion.toTimestamp());const p=Tg(u,h.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const s=x2(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Sg(this.serializer),n.removeTarget=e,this.q_(n)}}class _I extends qb{constructor(e,n,s,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=w2(e.writeResults,e.commitTime),s=vi(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Sg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>Vb(this.serializer,s)))};this.q_(n)}}class vI{}class EI extends vI{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(e,bg(n,s),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new me(ne.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(e,bg(n,s),o,h,m,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new me(ne.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class TI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Zr(n),this.aa=!1):_e("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Qa="RemoteStore";class bI{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{Xa(this)&&(_e(Qa,"Restarting streams for network reachability change."),await(async function(g){const p=ke(g);p.Ea.add(4),await Fu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Sf(p)})(this))}))})),this.Ra=new TI(s,o)}}async function Sf(r){if(Xa(r))for(const e of r.da)await e(!0)}async function Fu(r){for(const e of r.da)await e(!1)}function Hb(r,e){const n=ke(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),gp(n)?mp(n):cl(n).O_()&&dp(n,e))}function fp(r,e){const n=ke(r),s=cl(n);n.Ia.delete(e),s.O_()&&Fb(n,e),n.Ia.size===0&&(s.O_()?s.L_():Xa(n)&&n.Ra.set("Unknown"))}function dp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}cl(r).Y_(e)}function Fb(r,e){r.Va.Ue(e),cl(r).Z_(e)}function mp(r){r.Va=new p2({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),cl(r).start(),r.Ra.ua()}function gp(r){return Xa(r)&&!cl(r).x_()&&r.Ia.size>0}function Xa(r){return ke(r).Ea.size===0}function Gb(r){r.Va=void 0}async function SI(r){r.Ra.set("Online")}async function AI(r){r.Ia.forEach(((e,n)=>{dp(r,e)}))}async function wI(r,e){Gb(r),gp(r)?(r.Ra.ha(e),mp(r)):r.Ra.set("Unknown")}async function RI(r,e,n){if(r.Ra.set("Online"),e instanceof xb&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(s){_e(Qa,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Jh(r,s)}else if(e instanceof Dh?r.Va.Ze(e):e instanceof Ib?r.Va.st(e):r.Va.tt(e),!n.isEqual(Ne.min()))try{const s=await Bb(r.localStore);n.compareTo(s)>=0&&await(function(u,h){const m=u.Va.Tt(h);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(p);E&&u.Ia.set(p,E.withResumeToken(g.resumeToken,h))}})),m.targetMismatches.forEach(((g,p)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(Mn.EMPTY_BYTE_STRING,E.snapshotVersion)),Fb(u,g);const T=new Ks(E.target,g,p,E.sequenceNumber);dp(u,T)})),u.remoteSyncer.applyRemoteEvent(m)})(r,n)}catch(s){_e(Qa,"Failed to raise snapshot:",s),await Jh(r,s)}}async function Jh(r,e,n){if(!ul(e))throw e;r.Ea.add(1),await Fu(r),r.Ra.set("Offline"),n||(n=()=>Bb(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{_e(Qa,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Sf(r)}))}function Kb(r,e){return e().catch((n=>Jh(r,n,e)))}async function Af(r){const e=ke(r),n=sa(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Xg;for(;CI(e);)try{const o=await lI(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,II(e,o)}catch(o){await Jh(e,o)}Qb(e)&&$b(e)}function CI(r){return Xa(r)&&r.Ta.length<10}function II(r,e){r.Ta.push(e);const n=sa(r);n.O_()&&n.X_&&n.ea(e.mutations)}function Qb(r){return Xa(r)&&!sa(r).x_()&&r.Ta.length>0}function $b(r){sa(r).start()}async function xI(r){sa(r).ra()}async function NI(r){const e=sa(r);for(const n of r.Ta)e.ea(n.mutations)}async function DI(r,e,n){const s=r.Ta.shift(),o=rp.from(s,e,n);await Kb(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Af(r)}async function OI(r,e){e&&sa(r).X_&&await(async function(s,o){if((function(h){return Rb(h)&&h!==ne.ABORTED})(o.code)){const u=s.Ta.shift();sa(s).B_(),await Kb(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Af(s)}})(r,e),Qb(r)&&$b(r)}async function EE(r,e){const n=ke(r);n.asyncQueue.verifyOperationInProgress(),_e(Qa,"RemoteStore received new credentials");const s=Xa(n);n.Ea.add(3),await Fu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Sf(n)}async function MI(r,e){const n=ke(r);e?(n.Ea.delete(2),await Sf(n)):e||(n.Ea.add(2),await Fu(n),n.Ra.set("Unknown"))}function cl(r){return r.ma||(r.ma=(function(n,s,o){const u=ke(n);return u.sa(),new yI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:SI.bind(null,r),t_:AI.bind(null,r),r_:wI.bind(null,r),H_:RI.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),gp(r)?mp(r):r.Ra.set("Unknown")):(await r.ma.stop(),Gb(r))}))),r.ma}function sa(r){return r.fa||(r.fa=(function(n,s,o){const u=ke(n);return u.sa(),new _I(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:xI.bind(null,r),r_:OI.bind(null,r),ta:NI.bind(null,r),na:DI.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Af(r)):(await r.fa.stop(),r.Ta.length>0&&(_e(Qa,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class pp{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Zs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const h=Date.now()+s,m=new pp(e,n,h,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yp(r,e){if(Zr("AsyncQueue",`${e}: ${r}`),ul(r))return new me(ne.UNAVAILABLE,`${e}: ${r}`);throw r}class Ho{static emptySet(e){return new Ho(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Re.comparator(n.key,s.key):(n,s)=>Re.comparator(n.key,s.key),this.keyedMap=cu(),this.sortedSet=new kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ho)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ho;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class TE{constructor(){this.ga=new kt(Re.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class nl{constructor(e,n,s,o,u,h,m,g,p){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,n,s,o,u){const h=[];return n.forEach((m=>{h.push({type:0,doc:m})})),new nl(e,n,Ho.emptySet(n),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class VI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class kI{constructor(){this.queries=bE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=ke(n),u=o.queries;o.queries=bE(),u.forEach(((h,m)=>{for(const g of m.Sa)g.onError(s)}))})(this,new me(ne.ABORTED,"Firestore shutting down"))}}function bE(){return new Ya((r=>db(r)),yf)}async function PI(r,e){const n=ke(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new VI,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const m=yp(h,`Initialization of query '${Uo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&_p(n)}async function LI(r,e){const n=ke(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const h=u.Sa.indexOf(e);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function UI(r,e){const n=ke(r);let s=!1;for(const o of e){const u=o.query,h=n.queries.get(u);if(h){for(const m of h.Sa)m.Fa(o)&&(s=!0);h.wa=o}}s&&_p(n)}function zI(r,e,n){const s=ke(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function _p(r){r.Ca.forEach((e=>{e.next()}))}var Rg,SE;(SE=Rg||(Rg={})).Ma="default",SE.Cache="cache";class jI{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new nl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Rg.Cache}}class Yb{constructor(e){this.key=e}}class Xb{constructor(e){this.key=e}}class BI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ze(),this.mutatedKeys=Ze(),this.eu=mb(e),this.tu=new Ho(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new TE,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,T)=>{const S=o.get(E),x=_f(this.query,T)?T:null,L=!!S&&this.mutatedKeys.has(S.key),z=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let q=!1;S&&x?S.data.isEqual(x.data)?L!==z&&(s.track({type:3,doc:x}),q=!0):this.su(S,x)||(s.track({type:2,doc:x}),q=!0,(g&&this.eu(x,g)>0||p&&this.eu(x,p)<0)&&(m=!0)):!S&&x?(s.track({type:0,doc:x}),q=!0):S&&!x&&(s.track({type:1,doc:S}),q=!0,(g||p)&&(m=!0)),q&&(x?(h=h.add(x),u=z?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{tu:h,iu:s,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((E,T)=>(function(x,L){const z=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:q})}};return z(x)-z(L)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,h.length!==0||p?{snapshot:new nl(this.query,e.tu,u,h,e.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new TE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ze(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new Xb(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new Yb(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ze();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const vp="SyncEngine";class qI{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class HI{constructor(e){this.key=e,this.hu=!1}}class FI{constructor(e,n,s,o,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ya((m=>db(m)),yf),this.Iu=new Map,this.Eu=new Set,this.du=new kt(Re.comparator),this.Au=new Map,this.Ru=new op,this.Vu={},this.mu=new Map,this.fu=tl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function GI(r,e,n=!0){const s=n1(r);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await Zb(s,e,n,!0),o}async function KI(r,e){const n=n1(r);await Zb(n,e,!0,!1)}async function Zb(r,e,n,s){const o=await uI(r.localStore,_r(e)),u=o.targetId,h=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await QI(r,e,u,h==="current",o.resumeToken)),r.isPrimaryClient&&n&&Hb(r.remoteStore,o),m}async function QI(r,e,n,s,o){r.pu=(T,S,x)=>(async function(z,q,se,he){let oe=q.view.ru(se);oe.Cs&&(oe=await gE(z.localStore,q.query,!1).then((({documents:R})=>q.view.ru(R,oe))));const be=he&&he.targetChanges.get(q.targetId),de=he&&he.targetMismatches.get(q.targetId)!=null,pe=q.view.applyChanges(oe,z.isPrimaryClient,be,de);return wE(z,q.targetId,pe.au),pe.snapshot})(r,T,S,x);const u=await gE(r.localStore,e,!0),h=new BI(e,u.Qs),m=h.ru(u.documents),g=Hu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),p=h.applyChanges(m,r.isPrimaryClient,g);wE(r,n,p.au);const E=new qI(e,n,h);return r.Tu.set(e,E),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),p.snapshot}async function $I(r,e,n){const s=ke(r),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((h=>!yf(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Ag(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&fp(s.remoteStore,o.targetId),Cg(s,o.targetId)})).catch(ll)):(Cg(s,o.targetId),await Ag(s.localStore,o.targetId,!0))}async function YI(r,e){const n=ke(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),fp(n.remoteStore,s.targetId))}async function XI(r,e,n){const s=ix(r);try{const o=await(function(h,m){const g=ke(h),p=It.now(),E=m.reduce(((x,L)=>x.add(L.key)),Ze());let T,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let L=Jr(),z=Ze();return g.Ns.getEntries(x,E).next((q=>{L=q,L.forEach(((se,he)=>{he.isValidDocument()||(z=z.add(se))}))})).next((()=>g.localDocuments.getOverlayedDocuments(x,L))).next((q=>{T=q;const se=[];for(const he of m){const oe=c2(he,T.get(he.key).overlayedDocument);oe!=null&&se.push(new ca(he.key,oe,sb(oe.value.mapValue),Xn.exists(!0)))}return g.mutationQueue.addMutationBatch(x,p,se,m)})).next((q=>{S=q;const se=q.applyToLocalDocumentSet(T,z);return g.documentOverlayCache.saveOverlays(x,q.batchId,se)}))})).then((()=>({batchId:S.batchId,changes:pb(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,m,g){let p=h.Vu[h.currentUser.toKey()];p||(p=new kt(Xe)),p=p.insert(m,g),h.Vu[h.currentUser.toKey()]=p})(s,o.batchId,n),await Gu(s,o.changes),await Af(s.remoteStore)}catch(o){const u=yp(o,"Failed to persist write");n.reject(u)}}async function Jb(r,e){const n=ke(r);try{const s=await aI(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=n.Au.get(u);h&&(nt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?nt(h.hu,14607):o.removedDocuments.size>0&&(nt(h.hu,42227),h.hu=!1))})),await Gu(n,s,e)}catch(s){await ll(s)}}function AE(r,e,n){const s=ke(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const g=ke(h);g.onlineState=m;let p=!1;g.queries.forEach(((E,T)=>{for(const S of T.Sa)S.va(m)&&(p=!0)})),p&&_p(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function ZI(r,e,n){const s=ke(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let h=new kt(Re.comparator);h=h.insert(u,bn.newNoDocument(u,Ne.min()));const m=Ze().add(u),g=new Tf(Ne.min(),new Map,new kt(Xe),h,m);await Jb(s,g),s.du=s.du.remove(u),s.Au.delete(e),Ep(s)}else await Ag(s.localStore,e,!1).then((()=>Cg(s,e,n))).catch(ll)}async function JI(r,e){const n=ke(r),s=e.batch.batchId;try{const o=await sI(n.localStore,e);e1(n,s,null),Wb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Gu(n,o)}catch(o){await ll(o)}}async function WI(r,e,n){const s=ke(r);try{const o=await(function(h,m){const g=ke(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let E;return g.mutationQueue.lookupMutationBatch(p,m).next((T=>(nt(T!==null,37113),E=T.keys(),g.mutationQueue.removeMutationBatch(p,T)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E))).next((()=>g.localDocuments.getDocuments(p,E)))}))})(s.localStore,e);e1(s,e,n),Wb(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Gu(s,o)}catch(o){await ll(o)}}function Wb(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function e1(r,e,n){const s=ke(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Cg(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||t1(r,s)}))}function t1(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(fp(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),Ep(r))}function wE(r,e,n){for(const s of n)s instanceof Yb?(r.Ru.addReference(s.key,e),ex(r,s)):s instanceof Xb?(_e(vp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||t1(r,s.key)):Ie(19791,{wu:s})}function ex(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(_e(vp,"New document in limbo: "+n),r.Eu.add(s),Ep(r))}function Ep(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new Re(vt.fromString(e)),s=r.fu.next();r.Au.set(s,new HI(n)),r.du=r.du.insert(n,s),Hb(r.remoteStore,new Ks(_r(tp(n.path)),s,"TargetPurposeLimboResolution",gf.ce))}}async function Gu(r,e,n){const s=ke(r),o=[],u=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,g)=>{h.push(s.pu(g,e,n).then((p=>{if((p||n)&&s.isPrimaryClient){const E=p?!p.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(p){o.push(p);const E=up.As(g.targetId,p);u.push(E)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(g,p){const E=ke(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>re.forEach(p,(S=>re.forEach(S.Es,(x=>E.persistence.referenceDelegate.addReference(T,S.targetId,x))).next((()=>re.forEach(S.ds,(x=>E.persistence.referenceDelegate.removeReference(T,S.targetId,x)))))))))}catch(T){if(!ul(T))throw T;_e(cp,"Failed to update sequence numbers: "+T)}for(const T of p){const S=T.targetId;if(!T.fromCache){const x=E.Ms.get(S),L=x.snapshotVersion,z=x.withLastLimboFreeSnapshotVersion(L);E.Ms=E.Ms.insert(S,z)}}})(s.localStore,u))}async function tx(r,e){const n=ke(r);if(!n.currentUser.isEqual(e)){_e(vp,"User change. New user:",e.toKey());const s=await jb(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new me(ne.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Gu(n,s.Ls)}}function nx(r,e){const n=ke(r),s=n.Au.get(e);if(s&&s.hu)return Ze().add(s.key);{let o=Ze();const u=n.Iu.get(e);if(!u)return o;for(const h of u){const m=n.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function n1(r){const e=ke(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZI.bind(null,e),e.Pu.H_=UI.bind(null,e.eventManager),e.Pu.yu=zI.bind(null,e.eventManager),e}function ix(r){const e=ke(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WI.bind(null,e),e}class Wh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return rI(this.persistence,new tI,e.initialUser,this.serializer)}Cu(e){return new zb(lp.mi,this.serializer)}Du(e){return new hI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wh.provider={build:()=>new Wh};class rx extends Wh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){nt(this.persistence.referenceDelegate instanceof Zh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new j2(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ai.withCacheSize(this.cacheSizeBytes):ai.DEFAULT;return new zb((s=>Zh.mi(s,n)),this.serializer)}}class Ig{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>AE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=tx.bind(null,this.syncEngine),await MI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new kI})()}createDatastore(e){const n=bf(e.databaseInfo.databaseId),s=(function(u){return new pI(u)})(e.databaseInfo);return(function(u,h,m,g){return new EI(u,h,m,g)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,h,m){return new bI(s,o,u,h,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>AE(this.syncEngine,n,0)),(function(){return _E.v()?new _E:new fI})())}createSyncEngine(e,n){return(function(o,u,h,m,g,p,E){const T=new FI(o,u,h,m,g,p);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=ke(n);_e(Qa,"RemoteStore shutting down."),s.Ea.add(5),await Fu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ig.provider={build:()=>new Ig};class sx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Zr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}class ax{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new me(ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(o,u){const h=ke(o),m={documents:u.map((T=>Xh(h.serializer,T)))},g=await h.Ho("BatchGetDocuments",h.serializer.databaseId,vt.emptyPath(),m,u.length),p=new Map;g.forEach((T=>{const S=S2(h.serializer,T);p.set(S.key.toString(),S)}));const E=[];return u.forEach((T=>{const S=p.get(T.toString());nt(!!S,55234,{key:T}),E.push(S)})),E})(this.datastore,e);return n.forEach((s=>this.recordVersion(s))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new ip(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,s)=>{const o=Re.fromPath(s);this.mutations.push(new wb(o,this.precondition(o)))})),await(async function(s,o){const u=ke(s),h={writes:o.map((m=>Vb(u.serializer,m)))};await u.Go("Commit",u.serializer.databaseId,vt.emptyPath(),h)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ie(50498,{Gu:e.constructor.name});n=Ne.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!n.isEqual(s))throw new me(ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ne.min())?Xn.exists(!1):Xn.updateTime(n):Xn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ne.min()))throw new me(ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xn.updateTime(n)}return Xn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ox{constructor(e,n,s,o,u){this.asyncQueue=e,this.datastore=n,this.options=s,this.updateFunction=o,this.deferred=u,this.zu=s.maxAttempts,this.M_=new hp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new ax(this.datastore),n=this.Hu(e);n&&n.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const n=this.updateFunction(e);return!ju(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Rb(n)}return!1}}const aa="FirestoreClient";class lx{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=jn.UNAUTHENTICATED,this.clientId=Yg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async h=>{_e(aa,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(_e(aa,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=yp(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Km(r,e){r.asyncQueue.verifyOperationInProgress(),_e(aa,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await jb(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function RE(r,e){r.asyncQueue.verifyOperationInProgress();const n=await ux(r);_e(aa,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>EE(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>EE(e.remoteStore,o))),r._onlineComponents=e}async function ux(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){_e(aa,"Using user provided OfflineComponentProvider");try{await Km(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ne.FAILED_PRECONDITION||o.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Zo("Error using user provided cache. Falling back to memory cache: "+n),await Km(r,new Wh)}}else _e(aa,"Using default OfflineComponentProvider"),await Km(r,new rx(void 0));return r._offlineComponents}async function Tp(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(_e(aa,"Using user provided OnlineComponentProvider"),await RE(r,r._uninitializedComponentsProvider._online)):(_e(aa,"Using default OnlineComponentProvider"),await RE(r,new Ig))),r._onlineComponents}function cx(r){return Tp(r).then((e=>e.syncEngine))}function hx(r){return Tp(r).then((e=>e.datastore))}async function CE(r){const e=await Tp(r),n=e.eventManager;return n.onListen=GI.bind(null,e.syncEngine),n.onUnlisten=$I.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=KI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=YI.bind(null,e.syncEngine),n}function i1(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const IE=new Map;const r1="firestore.googleapis.com",xE=!0;class NE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new me(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=r1,this.ssl=xE}else this.host=e.host,this.ssl=e.ssl??xE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ub;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<U2)throw new me(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=i1(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wf{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new mC;switch(s.type){case"firstParty":return new _C(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new me(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=IE.get(n);s&&(_e("ComponentProvider","Removing Datastore"),IE.delete(n),s.terminate())})(this),Promise.resolve()}}function fx(r,e,n,s={}){r=Yr(r,wf);const o=sl(e),u=r._getSettings(),h={...u,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${n}`;o&&(OT(`https://${m}`),MT("Firestore",!0)),u.host!==r1&&u.host!==m&&Zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:s};if(!Fa(g,h)&&(r._setSettings(g),s.mockUserToken)){let p,E;if(typeof s.mockUserToken=="string")p=s.mockUserToken,E=jn.MOCK_USER;else{p=Bw(s.mockUserToken,r._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new me(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new jn(T)}r._authCredentials=new gC(new QT(p,E))}}class hl{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new hl(this.firestore,e,this._query)}}class jt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Js(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}toJSON(){return{type:jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(zu(n,jt._jsonSchema))return new jt(e,s||null,new Re(vt.fromString(n.referencePath)))}}jt._jsonSchemaVersion="firestore/documentReference/1.0",jt._jsonSchema={type:on("string",jt._jsonSchemaVersion),referencePath:on("string")};class Js extends hl{constructor(e,n,s){super(e,n,tp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new Re(e))}withConverter(e){return new Js(this.firestore,e,this._path)}}function ja(r,e,...n){if(r=Sn(r),$T("collection","path",e),r instanceof wf){const s=vt.fromString(e,...n);return qv(s),new Js(r,null,s)}{if(!(r instanceof jt||r instanceof Js))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(vt.fromString(e,...n));return qv(s),new Js(r.firestore,null,s)}}function Ba(r,e,...n){if(r=Sn(r),arguments.length===1&&(e=Yg.newId()),$T("doc","path",e),r instanceof wf){const s=vt.fromString(e,...n);return Bv(s),new jt(r,null,new Re(s))}{if(!(r instanceof jt||r instanceof Js))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(vt.fromString(e,...n));return Bv(s),new jt(r.firestore,r instanceof Js?r.converter:null,new Re(s))}}const DE="AsyncQueue";class OE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hp(this,"async_queue_retry"),this._c=()=>{const s=Gm();s&&_e(DE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Gm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Gm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Zs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ul(e))throw e;_e(DE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Zr("INTERNAL UNHANDLED ERROR: ",ME(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=pp.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ie(47125,{Pc:ME(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ME(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function VE(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(r,["next","error","complete"])}class il extends wf{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new OE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new OE(e),this._firestoreClient=void 0,await e}}}function dx(r,e){const n=typeof r=="object"?r:LT(),s=typeof r=="string"?r:Hh,o=Qg(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=zw("firestore");u&&fx(o,...u)}return o}function bp(r){if(r._terminated)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||mx(r),r._firestoreClient}function mx(r){const e=r._freezeSettings(),n=(function(o,u,h,m){return new kC(o,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,i1(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new lx(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(r._componentsProvider))}class yi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yi(Mn.fromBase64String(e))}catch(n){throw new me(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new yi(Mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:yi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zu(e,yi._jsonSchema))return yi.fromBase64String(e.bytes)}}yi._jsonSchemaVersion="firestore/bytes/1.0",yi._jsonSchema={type:on("string",yi._jsonSchemaVersion),bytes:on("string")};class Ku{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new me(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new On(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sp{constructor(e){this._methodName=e}}class vr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new me(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new me(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vr._jsonSchemaVersion}}static fromJSON(e){if(zu(e,vr._jsonSchema))return new vr(e.latitude,e.longitude)}}vr._jsonSchemaVersion="firestore/geoPoint/1.0",vr._jsonSchema={type:on("string",vr._jsonSchemaVersion),latitude:on("number"),longitude:on("number")};class Er{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Er._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zu(e,Er._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Er(e.vectorValues);throw new me(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Er._jsonSchemaVersion="firestore/vectorValue/1.0",Er._jsonSchema={type:on("string",Er._jsonSchemaVersion),vectorValues:on("object")};const gx=/^__.*__$/;class px{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ca(e,this.data,this.fieldMask,n,this.fieldTransforms):new qu(e,this.data,n,this.fieldTransforms)}}class s1{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ca(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function a1(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:r})}}class Ap{constructor(e,n,s,o,u,h){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ap({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ef(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(a1(this.Ac)&&gx.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class yx{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||bf(e)}Cc(e,n,s,o=!1){return new Ap({Ac:e,methodName:n,Dc:s,path:On.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rf(r){const e=r._freezeSettings(),n=bf(r._databaseId);return new yx(r._databaseId,!!e.ignoreUndefinedProperties,n)}function o1(r,e,n,s,o,u={}){const h=r.Cc(u.merge||u.mergeFields?2:0,e,n,o);wp("Data must be an object, but it was:",h,s);const m=c1(s,h);let g,p;if(u.merge)g=new _i(h.fieldMask),p=h.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const S=xg(e,T,n);if(!h.contains(S))throw new me(ne.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);f1(E,S)||E.push(S)}g=new _i(E),p=h.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,p=h.fieldTransforms;return new px(new Yn(m),g,p)}class Cf extends Sp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cf}}function l1(r,e,n,s){const o=r.Cc(1,e,n);wp("Data must be an object, but it was:",o,s);const u=[],h=Yn.empty();ua(s,((g,p)=>{const E=Rp(e,g,n);p=Sn(p);const T=o.yc(E);if(p instanceof Cf)u.push(E);else{const S=Qu(p,T);S!=null&&(u.push(E),h.set(E,S))}}));const m=new _i(u);return new s1(h,m,o.fieldTransforms)}function u1(r,e,n,s,o,u){const h=r.Cc(1,e,n),m=[xg(e,s,n)],g=[o];if(u.length%2!=0)throw new me(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)m.push(xg(e,u[S])),g.push(u[S+1]);const p=[],E=Yn.empty();for(let S=m.length-1;S>=0;--S)if(!f1(p,m[S])){const x=m[S];let L=g[S];L=Sn(L);const z=h.yc(x);if(L instanceof Cf)p.push(x);else{const q=Qu(L,z);q!=null&&(p.push(x),E.set(x,q))}}const T=new _i(p);return new s1(E,T,h.fieldTransforms)}function _x(r,e,n,s=!1){return Qu(n,r.Cc(s?4:3,e))}function Qu(r,e){if(h1(r=Sn(r)))return wp("Unsupported field value:",e,r),c1(r,e);if(r instanceof Sp)return(function(s,o){if(!a1(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let h=0;for(const m of s){let g=Qu(m,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(r,e)}return(function(s,o){if((s=Sn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return r2(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=It.fromDate(s);return{timestampValue:Yh(o.serializer,u)}}if(s instanceof It){const u=new It(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Yh(o.serializer,u)}}if(s instanceof vr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof yi)return{bytesValue:Nb(o.serializer,s._byteString)};if(s instanceof jt){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ap(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Er)return(function(h,m){return{mapValue:{fields:{[ib]:{stringValue:rb},[Fh]:{arrayValue:{values:h.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return np(m.serializer,p)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${mf(s)}`)})(r,e)}function c1(r,e){const n={};return ZT(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ua(r,((s,o)=>{const u=Qu(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function h1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof It||r instanceof vr||r instanceof yi||r instanceof jt||r instanceof Sp||r instanceof Er)}function wp(r,e,n){if(!h1(n)||!YT(n)){const s=mf(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function xg(r,e,n){if((e=Sn(e))instanceof Ku)return e._internalPath;if(typeof e=="string")return Rp(r,e);throw ef("Field path arguments must be of type string or ",r,!1,void 0,n)}const vx=new RegExp("[~\\*/\\[\\]]");function Rp(r,e,n){if(e.search(vx)>=0)throw ef(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Ku(...e.split("."))._internalPath}catch{throw ef(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function ef(r,e,n,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new me(ne.INVALID_ARGUMENT,m+r+g)}function f1(r,e){return r.some((n=>n.isEqual(e)))}class tf{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Ex(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Cp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Ex extends tf{data(){return super.data()}}function Cp(r,e){return typeof e=="string"?Rp(r,e):e instanceof Ku?e._internalPath:e._delegate._internalPath}function Tx(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new me(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ip{}class bx extends Ip{}function Sx(r,e,...n){let s=[];e instanceof Ip&&s.push(e),s=s.concat(n),(function(u){const h=u.filter((g=>g instanceof xp)).length,m=u.filter((g=>g instanceof If)).length;if(h>1||h>0&&m>0)throw new me(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class If extends bx{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new If(e,n,s)}_apply(e){const n=this._parse(e);return d1(e._query,n),new hl(e.firestore,e.converter,vg(e._query,n))}_parse(e){const n=Rf(e.firestore);return(function(u,h,m,g,p,E,T){let S;if(p.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new me(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){PE(T,E);const L=[];for(const z of T)L.push(kE(g,u,z));S={arrayValue:{values:L}}}else S=kE(g,u,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||PE(T,E),S=_x(m,h,T,E==="in"||E==="not-in");return an.create(p,E,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ax(r,e,n){const s=e,o=Cp("where",r);return If._create(o,s,n)}class xp extends Ip{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xp(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:tr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let h=o;const m=u.getFlattenedFilters();for(const g of m)d1(h,g),h=vg(h,g)})(e._query,n),new hl(e.firestore,e.converter,vg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function kE(r,e,n){if(typeof(n=Sn(n))=="string"){if(n==="")throw new me(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fb(e)&&n.indexOf("/")!==-1)throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(vt.fromString(n));if(!Re.isDocumentKey(s))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Xv(r,new Re(s))}if(n instanceof jt)return Xv(r,n._key);throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mf(n)}.`)}function PE(r,e){if(!Array.isArray(r)||r.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function d1(r,e){const n=(function(o,u){for(const h of o)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class m1{convertValue(e,n="none"){switch(ra(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ia(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ua(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[Fh].arrayValue?.values?.map((s=>$t(s.doubleValue)));return new Er(n)}convertGeoPoint(e){return new vr($t(e.latitude),$t(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=pf(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Iu(e));default:return null}}convertTimestamp(e){const n=na(e);return new It(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=vt.fromString(e);nt(Lb(s),9688,{name:e});const o=new xu(s.get(1),s.get(3)),u=new Re(s.popFirst(5));return o.isEqual(n)||Zr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function g1(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class wx extends m1{constructor(e){super(),this.firestore=e}convertBytes(e){return new yi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}class Bo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ws extends tf{constructor(e,n,s,o,u,h){super(e,n,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Oh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Cp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ws._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ws._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ws._jsonSchema={type:on("string",Ws._jsonSchemaVersion),bundleSource:on("string","DocumentSnapshot"),bundleName:on("string"),bundle:on("string")};class Oh extends Ws{data(e={}){return super.data(e)}}class Fo{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Bo(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Oh(this._firestore,this._userDataWriter,s.key,s,new Bo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new me(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const g=new Oh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Bo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new Oh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Bo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,E=-1;return m.type!==0&&(p=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:Rx(m.type),doc:g,oldIndex:p,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Rx(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:r})}}Fo._jsonSchemaVersion="firestore/querySnapshot/1.0",Fo._jsonSchema={type:on("string",Fo._jsonSchemaVersion),bundleSource:on("string","QuerySnapshot"),bundleName:on("string"),bundle:on("string")};class Np extends m1{constructor(e){super(),this.firestore=e}convertBytes(e){return new yi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function p1(r,e,n){r=Yr(r,jt);const s=Yr(r.firestore,il),o=g1(r.converter,e,n);return _1(s,[o1(Rf(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,Xn.none())])}function LE(r,e,n,...s){r=Yr(r,jt);const o=Yr(r.firestore,il),u=Rf(o);let h;return h=typeof(e=Sn(e))=="string"||e instanceof Ku?u1(u,"updateDoc",r._key,e,n,s):l1(u,"updateDoc",r._key,e),_1(o,[h.toMutation(r._key,Xn.exists(!0))])}function y1(r,...e){r=Sn(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||VE(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(VE(e[s])){const g=e[s];e[s]=g.next?.bind(g),e[s+1]=g.error?.bind(g),e[s+2]=g.complete?.bind(g)}let u,h,m;if(r instanceof jt)h=Yr(r.firestore,il),m=tp(r._key.path),u={next:g=>{e[s]&&e[s](Cx(h,r,g))},error:e[s+1],complete:e[s+2]};else{const g=Yr(r,hl);h=Yr(g.firestore,il),m=g._query;const p=new Np(h);u={next:E=>{e[s]&&e[s](new Fo(h,p,g,E))},error:e[s+1],complete:e[s+2]},Tx(r._query)}return(function(p,E,T,S){const x=new sx(S),L=new jI(E,x,T);return p.asyncQueue.enqueueAndForget((async()=>PI(await CE(p),L))),()=>{x.Nu(),p.asyncQueue.enqueueAndForget((async()=>LI(await CE(p),L)))}})(bp(h),m,o,u)}function _1(r,e){return(function(s,o){const u=new Zs;return s.asyncQueue.enqueueAndForget((async()=>XI(await cx(s),o,u))),u.promise})(bp(r),e)}function Cx(r,e,n){const s=n.docs.get(e._key),o=new Np(r);return new Ws(r,o,e._key,s,new Bo(n.hasPendingWrites,n.fromCache),e.converter)}const Ix={maxAttempts:5};function fu(r,e){if((r=Sn(r)).firestore!==e)throw new me(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class xx{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Rf(e)}get(e){const n=fu(e,this._firestore),s=new wx(this._firestore);return this._transaction.lookup([n._key]).then((o=>{if(!o||o.length!==1)return Ie(24041);const u=o[0];if(u.isFoundDocument())return new tf(this._firestore,s,u.key,u,n.converter);if(u.isNoDocument())return new tf(this._firestore,s,n._key,null,n.converter);throw Ie(18433,{doc:u})}))}set(e,n,s){const o=fu(e,this._firestore),u=g1(o.converter,n,s),h=o1(this._dataReader,"Transaction.set",o._key,u,o.converter!==null,s);return this._transaction.set(o._key,h),this}update(e,n,s,...o){const u=fu(e,this._firestore);let h;return h=typeof(n=Sn(n))=="string"||n instanceof Ku?u1(this._dataReader,"Transaction.update",u._key,n,s,o):l1(this._dataReader,"Transaction.update",u._key,n),this._transaction.update(u._key,h),this}delete(e){const n=fu(e,this._firestore);return this._transaction.delete(n._key),this}}class Nx extends xx{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=fu(e,this._firestore),s=new Np(this._firestore);return super.get(e).then((o=>new Ws(this._firestore,s,n._key,o._document,new Bo(!1,!1),n.converter)))}}function UE(r,e,n){r=Yr(r,il);const s={...Ix,...n};return(function(u){if(u.maxAttempts<1)throw new me(ne.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(u,h,m){const g=new Zs;return u.asyncQueue.enqueueAndForget((async()=>{const p=await hx(u);new ox(u.asyncQueue,p,m,h,g).ju()})),g.promise})(bp(r),(o=>e(new Nx(r,o))),s)}(function(e,n=!0){(function(o){ol=o})(al),Xo(new Ga("firestore",((s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),m=new il(new pC(s.getProvider("auth-internal")),new vC(h,s.getProvider("app-check-internal")),(function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new me(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xu(p.options.projectId,E)})(h,o),h);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Ys(Lv,Uv,e),Ys(Lv,Uv,"esm2020")})();function v1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Dx=v1,E1=new Lu("auth","Firebase",v1());const nf=new Gg("@firebase/auth");function Ox(r,...e){nf.logLevel<=Ye.WARN&&nf.warn(`Auth (${al}): ${r}`,...e)}function Mh(r,...e){nf.logLevel<=Ye.ERROR&&nf.error(`Auth (${al}): ${r}`,...e)}function Wr(r,...e){throw Dp(r,...e)}function Tr(r,...e){return Dp(r,...e)}function T1(r,e,n){const s={...Dx(),[e]:n};return new Lu("auth","Firebase",s).create(e,{appName:r.name})}function ea(r){return T1(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dp(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return E1.create(r,...e)}function Oe(r,e,...n){if(!r)throw Dp(e,...n)}function Qr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Mh(e),new Error(e)}function es(r,e){r||Qr(e)}function Ng(){return typeof self<"u"&&self.location?.href||""}function Mx(){return zE()==="http:"||zE()==="https:"}function zE(){return typeof self<"u"&&self.location?.protocol||null}function Vx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Mx()||Qw()||"connection"in navigator)?navigator.onLine:!0}function kx(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class $u{constructor(e,n){this.shortDelay=e,this.longDelay=n,es(n>e,"Short delay should be less than long delay!"),this.isMobile=Fw()||$w()}get(){return Vx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Op(r,e){es(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class b1{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Px={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Lx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ux=new $u(3e4,6e4);function xf(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function fl(r,e,n,s,o={}){return S1(r,o,async()=>{let u={},h={};s&&(e==="GET"?h=s:u={body:JSON.stringify(s)});const m=Uu({key:r.config.apiKey,...h}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const p={method:e,headers:g,...u};return Kw()||(p.referrerPolicy="no-referrer"),r.emulatorConfig&&sl(r.emulatorConfig.host)&&(p.credentials="include"),b1.fetch()(await w1(r,r.config.apiHost,n,m),p)})}async function S1(r,e,n){r._canInitEmulator=!1;const s={...Px,...e};try{const o=new zx(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw Sh(r,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sh(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Sh(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw Sh(r,"user-disabled",h);const E=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw T1(r,E,p);Wr(r,E)}}catch(o){if(o instanceof ts)throw o;Wr(r,"network-request-failed",{message:String(o)})}}async function A1(r,e,n,s,o={}){const u=await fl(r,e,n,s,o);return"mfaPendingCredential"in u&&Wr(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function w1(r,e,n,s){const o=`${e}${n}?${s}`,u=r,h=u.config.emulator?Op(r.config,o):`${r.config.apiScheme}://${o}`;return Lx.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}class zx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Tr(this.auth,"network-request-failed")),Ux.get())})}}function Sh(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Tr(r,e,s);return o.customData._tokenResponse=n,o}async function jx(r,e){return fl(r,"POST","/v1/accounts:delete",e)}async function rf(r,e){return fl(r,"POST","/v1/accounts:lookup",e)}function Tu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Bx(r,e=!1){const n=Sn(r),s=await n.getIdToken(e),o=Mp(s);Oe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:s,authTime:Tu(Qm(o.auth_time)),issuedAtTime:Tu(Qm(o.iat)),expirationTime:Tu(Qm(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Qm(r){return Number(r)*1e3}function Mp(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Mh("JWT malformed, contained fewer than 3 sections"),null;try{const o=IT(n);return o?JSON.parse(o):(Mh("Failed to decode base64 JWT payload"),null)}catch(o){return Mh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function jE(r){const e=Mp(r);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Mu(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ts&&qx(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function qx({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class Hx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Dg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tu(this.lastLoginAt),this.creationTime=Tu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function sf(r){const e=r.auth,n=await r.getIdToken(),s=await Mu(r,rf(e,{idToken:n}));Oe(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?R1(o.providerUserInfo):[],h=Gx(r.providerData,u),m=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!h?.length,p=m?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Dg(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(r,E)}async function Fx(r){const e=Sn(r);await sf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Gx(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function R1(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function Kx(r,e){const n=await S1(r,{},async()=>{const s=Uu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,h=await w1(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return r.emulatorConfig&&sl(r.emulatorConfig.host)&&(g.credentials="include"),b1.fetch()(h,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Qx(r,e){return fl(r,"POST","/v2/accounts:revokeToken",xf(r,e))}class Go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const n=jE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await Kx(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,h=new Go;return s&&(Oe(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Oe(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(Oe(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Go,this.toJSON())}_performRefresh(){return Qr("not implemented")}}function Ls(r,e){Oe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class er{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new Hx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Dg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Mu(this,this.stsTokenManager.getToken(this.auth,e));return Oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Bx(this,e)}reload(){return Fx(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new er({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await sf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wi(this.auth.app))return Promise.reject(ea(this.auth));const e=await this.getIdToken();return await Mu(this,jx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,m=n.tenantId??void 0,g=n._redirectEventId??void 0,p=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:x,providerData:L,stsTokenManager:z}=n;Oe(T&&z,e,"internal-error");const q=Go.fromJSON(this.name,z);Oe(typeof T=="string",e,"internal-error"),Ls(s,e.name),Ls(o,e.name),Oe(typeof S=="boolean",e,"internal-error"),Oe(typeof x=="boolean",e,"internal-error"),Ls(u,e.name),Ls(h,e.name),Ls(m,e.name),Ls(g,e.name),Ls(p,e.name),Ls(E,e.name);const se=new er({uid:T,auth:e,email:o,emailVerified:S,displayName:s,isAnonymous:x,photoURL:h,phoneNumber:u,tenantId:m,stsTokenManager:q,createdAt:p,lastLoginAt:E});return L&&Array.isArray(L)&&(se.providerData=L.map(he=>({...he}))),g&&(se._redirectEventId=g),se}static async _fromIdTokenResponse(e,n,s=!1){const o=new Go;o.updateFromServerResponse(n);const u=new er({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await sf(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Oe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?R1(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,m=new Go;m.updateFromIdToken(s);const g=new er({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Dg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,p),g}}const BE=new Map;function $r(r){es(r instanceof Function,"Expected a class definition");let e=BE.get(r);return e?(es(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,BE.set(r,e),e)}class C1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}C1.type="NONE";const qE=C1;function Vh(r,e,n){return`firebase:${r}:${e}:${n}`}class Ko{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Vh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Vh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await rf(this.auth,{idToken:e}).catch(()=>{});return n?er._fromGetAccountInfoResponse(this.auth,n,e):null}return er._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ko($r(qE),e,s);const o=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||$r(qE);const h=Vh(s,e.config.apiKey,e.name);let m=null;for(const p of n)try{const E=await p._get(h);if(E){let T;if(typeof E=="string"){const S=await rf(e,{idToken:E}).catch(()=>{});if(!S)break;T=await er._fromGetAccountInfoResponse(e,S,E)}else T=er._fromJSON(e,E);p!==u&&(m=T),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Ko(u,e,s):(u=g[0],m&&await u._set(h,m.toJSON()),await Promise.all(n.map(async p=>{if(p!==u)try{await p._remove(h)}catch{}})),new Ko(u,e,s))}}function HE(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(D1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(I1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(M1(e))return"Blackberry";if(V1(e))return"Webos";if(x1(e))return"Safari";if((e.includes("chrome/")||N1(e))&&!e.includes("edge/"))return"Chrome";if(O1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function I1(r=Bn()){return/firefox\//i.test(r)}function x1(r=Bn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function N1(r=Bn()){return/crios\//i.test(r)}function D1(r=Bn()){return/iemobile/i.test(r)}function O1(r=Bn()){return/android/i.test(r)}function M1(r=Bn()){return/blackberry/i.test(r)}function V1(r=Bn()){return/webos/i.test(r)}function Vp(r=Bn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function $x(r=Bn()){return Vp(r)&&!!window.navigator?.standalone}function Yx(){return Yw()&&document.documentMode===10}function k1(r=Bn()){return Vp(r)||O1(r)||V1(r)||M1(r)||/windows phone/i.test(r)||D1(r)}function P1(r,e=[]){let n;switch(r){case"Browser":n=HE(Bn());break;case"Worker":n=`${HE(Bn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${al}/${s}`}class Xx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((h,m)=>{try{const g=e(u);h(g)}catch(g){m(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function Zx(r,e={}){return fl(r,"GET","/v2/passwordPolicy",xf(r,e))}const Jx=6;class Wx{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Jx,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class eN{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new FE(this),this.idTokenSubscription=new FE(this),this.beforeStateQueue=new Xx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=E1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$r(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ko.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await rf(this,{idToken:e}),s=await er._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Wi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===h)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wi(this.app))return Promise.reject(ea(this));const n=e?Sn(e):null;return n&&Oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wi(this.app)?Promise.reject(ea(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wi(this.app)?Promise.reject(ea(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Zx(this),n=new Wx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Lu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Qx(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$r(e)||this._popupRedirectResolver;Oe(n,this,"argument-error"),this.redirectPersistenceManager=await Ko.create(this,[$r(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,o);return()=>{h=!0,g()}}else{const g=e.addObserver(n);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=P1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Wi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Ox(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Nf(r){return Sn(r)}class FE{constructor(e){this.auth=e,this.observer=null,this.addObserver=iR(n=>this.observer=n)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let kp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tN(r){kp=r}function nN(r){return kp.loadJS(r)}function iN(){return kp.gapiScript}function rN(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function sN(r,e){const n=Qg(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Fa(u,e??{}))return o;Wr(o,"already-initialized")}return n.initialize({options:e})}function aN(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map($r);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function oN(r,e,n){const s=Nf(r);Oe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=L1(e),{host:h,port:m}=lN(e),g=m===null?"":`:${m}`,p={url:`${u}//${h}${g}/`},E=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Oe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Oe(Fa(p,s.config.emulator)&&Fa(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,sl(h)?(OT(`${u}//${h}${g}`),MT("Auth",!0)):uN()}function L1(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function lN(r){const e=L1(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:GE(s.substr(u.length+1))}}else{const[u,h]=s.split(":");return{host:u,port:GE(h)}}}function GE(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function uN(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class U1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qr("not implemented")}_getIdTokenResponse(e){return Qr("not implemented")}_linkToIdToken(e,n){return Qr("not implemented")}_getReauthenticationResolver(e){return Qr("not implemented")}}async function Qo(r,e){return A1(r,"POST","/v1/accounts:signInWithIdp",xf(r,e))}const cN="http://localhost";class $a extends U1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $a(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Wr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const h=new $a(s,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return Qo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Qo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Qo(e,n)}buildRequest(){const e={requestUri:cN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Uu(n)}return e}}class z1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Yu extends z1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class qs extends Yu{constructor(){super("facebook.com")}static credential(e){return $a._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qs.credential(e.oauthAccessToken)}catch{return null}}}qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";qs.PROVIDER_ID="facebook.com";class Hs extends Yu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $a._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Hs.credential(n,s)}catch{return null}}}Hs.GOOGLE_SIGN_IN_METHOD="google.com";Hs.PROVIDER_ID="google.com";class Fs extends Yu{constructor(){super("github.com")}static credential(e){return $a._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fs.credential(e.oauthAccessToken)}catch{return null}}}Fs.GITHUB_SIGN_IN_METHOD="github.com";Fs.PROVIDER_ID="github.com";class Gs extends Yu{constructor(){super("twitter.com")}static credential(e,n){return $a._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Gs.credential(n,s)}catch{return null}}}Gs.TWITTER_SIGN_IN_METHOD="twitter.com";Gs.PROVIDER_ID="twitter.com";async function hN(r,e){return A1(r,"POST","/v1/accounts:signUp",xf(r,e))}class oa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await er._fromIdTokenResponse(e,s,o),h=KE(s);return new oa({user:u,providerId:h,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=KE(s);return new oa({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function KE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}async function Og(r){if(Wi(r.app))return Promise.reject(ea(r));const e=Nf(r);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new oa({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await hN(e,{returnSecureToken:!0}),s=await oa._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(s.user),s}class af extends ts{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,af.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new af(e,n,s,o)}}function j1(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?af._fromErrorAndOperation(r,u,e,s):u})}async function fN(r,e,n=!1){const s=await Mu(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return oa._forOperation(r,"link",s)}async function dN(r,e,n=!1){const{auth:s}=r;if(Wi(s.app))return Promise.reject(ea(s));const o="reauthenticate";try{const u=await Mu(r,j1(s,o,e,r),n);Oe(u.idToken,s,"internal-error");const h=Mp(u.idToken);Oe(h,s,"internal-error");const{sub:m}=h;return Oe(r.uid===m,s,"user-mismatch"),oa._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Wr(s,"user-mismatch"),u}}async function mN(r,e,n=!1){if(Wi(r.app))return Promise.reject(ea(r));const s="signIn",o=await j1(r,s,e),u=await oa._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}function gN(r,e,n,s){return Sn(r).onIdTokenChanged(e,n,s)}function pN(r,e,n){return Sn(r).beforeAuthStateChanged(e,n)}const of="__sak";class B1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(of,"1"),this.storage.removeItem(of),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const yN=1e3,_N=10;class q1 extends B1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=k1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!n&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);Yx()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,_N):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},yN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}q1.type="LOCAL";const vN=q1;class H1 extends B1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}H1.type="SESSION";const F1=H1;function EN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Df{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Df(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,h=this.handlersMap[o];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(h).map(async p=>p(n.origin,u)),g=await EN(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Df.receivers=[];function Pp(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}class TN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((m,g)=>{const p=Pp("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(S.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function br(){return window}function bN(r){br().location.href=r}function G1(){return typeof br().WorkerGlobalScope<"u"&&typeof br().importScripts=="function"}async function SN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AN(){return navigator?.serviceWorker?.controller||null}function wN(){return G1()?self:null}const K1="firebaseLocalStorageDb",RN=1,lf="firebaseLocalStorage",Q1="fbase_key";class Xu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Of(r,e){return r.transaction([lf],e?"readwrite":"readonly").objectStore(lf)}function CN(){const r=indexedDB.deleteDatabase(K1);return new Xu(r).toPromise()}function Mg(){const r=indexedDB.open(K1,RN);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(lf,{keyPath:Q1})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(lf)?e(s):(s.close(),await CN(),e(await Mg()))})})}async function QE(r,e,n){const s=Of(r,!0).put({[Q1]:e,value:n});return new Xu(s).toPromise()}async function IN(r,e){const n=Of(r,!1).get(e),s=await new Xu(n).toPromise();return s===void 0?null:s.value}function $E(r,e){const n=Of(r,!0).delete(e);return new Xu(n).toPromise()}const xN=800,NN=3;class $1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>NN)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return G1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Df._getInstance(wN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await SN(),!this.activeServiceWorker)return;this.sender=new TN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mg();return await QE(e,of,"1"),await $E(e,of),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>QE(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>IN(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$E(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Of(o,!1).getAll();return new Xu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$1.type="LOCAL";const DN=$1;new $u(3e4,6e4);function ON(r,e){return e?$r(e):(Oe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Lp extends U1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Qo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Qo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function MN(r){return mN(r.auth,new Lp(r),r.bypassAuthState)}function VN(r){const{auth:e,user:n}=r;return Oe(n,e,"internal-error"),dN(n,new Lp(r),r.bypassAuthState)}async function kN(r){const{auth:e,user:n}=r;return Oe(n,e,"internal-error"),fN(n,new Lp(r),r.bypassAuthState)}class Y1{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:h,type:m}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MN;case"linkViaPopup":case"linkViaRedirect":return kN;case"reauthViaPopup":case"reauthViaRedirect":return VN;default:Wr(this.auth,"internal-error")}}resolve(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const PN=new $u(2e3,1e4);class qo extends Y1{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,qo.currentPopupAction&&qo.currentPopupAction.cancel(),qo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){es(this.filter.length===1,"Popup operations only handle one event");const e=Pp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Tr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Tr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,PN.get())};e()}}qo.currentPopupAction=null;const LN="pendingRedirect",kh=new Map;class UN extends Y1{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=kh.get(this.auth._key());if(!e){try{const s=await zN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}kh.set(this.auth._key(),e)}return this.bypassAuthState||kh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zN(r,e){const n=qN(e),s=BN(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function jN(r,e){kh.set(r._key(),e)}function BN(r){return $r(r._redirectPersistence)}function qN(r){return Vh(LN,r.config.apiKey,r.name)}async function HN(r,e,n=!1){if(Wi(r.app))return Promise.reject(ea(r));const s=Nf(r),o=ON(s,e),h=await new UN(s,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}const FN=600*1e3;class GN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!X1(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Tr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FN&&this.cachedEventUids.clear(),this.cachedEventUids.has(YE(e))}saveEventToCache(e){this.cachedEventUids.add(YE(e)),this.lastProcessedEventTime=Date.now()}}function YE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function X1({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function KN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return X1(r);default:return!1}}async function QN(r,e={}){return fl(r,"GET","/v1/projects",e)}const $N=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YN=/^https?/;async function XN(r){if(r.config.emulator)return;const{authorizedDomains:e}=await QN(r);for(const n of e)try{if(ZN(n))return}catch{}Wr(r,"unauthorized-domain")}function ZN(r){const e=Ng(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===s}if(!YN.test(n))return!1;if($N.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const JN=new $u(3e4,6e4);function XE(){const r=br().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function WN(r){return new Promise((e,n)=>{function s(){XE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{XE(),n(Tr(r,"network-request-failed"))},timeout:JN.get()})}if(br().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(br().gapi?.load)s();else{const o=rN("iframefcb");return br()[o]=()=>{gapi.load?s():n(Tr(r,"network-request-failed"))},nN(`${iN()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw Ph=null,e})}let Ph=null;function eD(r){return Ph=Ph||WN(r),Ph}const tD=new $u(5e3,15e3),nD="__/auth/iframe",iD="emulator/auth/iframe",rD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aD(r){const e=r.config;Oe(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Op(e,iD):`https://${r.config.authDomain}/${nD}`,s={apiKey:e.apiKey,appName:r.name,v:al},o=sD.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Uu(s).slice(1)}`}async function oD(r){const e=await eD(r),n=br().gapi;return Oe(n,r,"internal-error"),e.open({where:document.body,url:aD(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rD,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const h=Tr(r,"network-request-failed"),m=br().setTimeout(()=>{u(h)},tD.get());function g(){br().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{u(h)})}))}const lD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uD=500,cD=600,hD="_blank",fD="http://localhost";class ZE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dD(r,e,n,s=uD,o=cD){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...lD,width:s.toString(),height:o.toString(),top:u,left:h},p=Bn().toLowerCase();n&&(m=N1(p)?hD:n),I1(p)&&(e=e||fD,g.scrollbars="yes");const E=Object.entries(g).reduce((S,[x,L])=>`${S}${x}=${L},`,"");if($x(p)&&m!=="_self")return mD(e||"",m),new ZE(null);const T=window.open(e||"",m,E);Oe(T,r,"popup-blocked");try{T.focus()}catch{}return new ZE(T)}function mD(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const gD="__/auth/handler",pD="emulator/auth/handler",yD=encodeURIComponent("fac");async function JE(r,e,n,s,o,u){Oe(r.config.authDomain,r,"auth-domain-config-required"),Oe(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:al,eventId:o};if(e instanceof z1){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",nR(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))h[E]=T}if(e instanceof Yu){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const m=h;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await r._getAppCheckToken(),p=g?`#${yD}=${encodeURIComponent(g)}`:"";return`${_D(r)}?${Uu(m).slice(1)}${p}`}function _D({config:r}){return r.emulator?Op(r,pD):`https://${r.authDomain}/${gD}`}const $m="webStorageSupport";class vD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=F1,this._completeRedirectFn=HN,this._overrideRedirectResult=jN}async _openPopup(e,n,s,o){es(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await JE(e,n,s,Ng(),o);return dD(e,u,Pp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await JE(e,n,s,Ng(),o);return bN(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(es(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await oD(e),s=new GN(e);return n.register("authEvent",o=>(Oe(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($m,{type:$m},o=>{const u=o?.[0]?.[$m];u!==void 0&&n(!!u),Wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=XN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return k1()||x1()||Vp()}}const ED=vD;var WE="@firebase/auth",eT="1.12.0";class TD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function bD(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SD(r){Xo(new Ga("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=s.options;Oe(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:P1(r)},p=new eN(s,o,u,g);return aN(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Xo(new Ga("auth-internal",e=>{const n=Nf(e.getProvider("auth").getImmediate());return(s=>new TD(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ys(WE,eT,bD(r)),Ys(WE,eT,"esm2020")}const AD=300,wD=DT("authIdTokenMaxAge")||AD;let tT=null;const RD=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>wD)return;const o=n?.token;tT!==o&&(tT=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Vg(r=LT()){const e=Qg(r,"auth");if(e.isInitialized())return e.getImmediate();const n=sN(r,{popupRedirectResolver:ED,persistence:[DN,vN,F1]}),s=DT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const h=RD(u.toString());pN(n,h,()=>h(n.currentUser)),gN(n,m=>h(m))}}const o=xT("auth");return o&&oN(n,`http://${o}`),n}function CD(){return document.getElementsByTagName("head")?.[0]??document}tN({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=Tr("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",CD().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SD("Browser");var ID="firebase",xD="12.7.0";Ys(ID,xD,"app");const nT={apiKey:"AIzaSyB3ncjSdbTdaUqac5QvHon-Id5mCo3pByM",authDomain:"dragmate-af04d.firebaseapp.com",projectId:"dragmate-af04d",storageBucket:"dragmate-af04d.firebasestorage.app",messagingSenderId:"370425129874",appId:"1:370425129874:web:4c5c526a593e8fa45a6f4b"};let Ym=null,yn=null,Lh=null,Kr=!1;try{Object.values(nT).every(Boolean)?(Ym=Ov().length?Ov()[0]:PT(nT),yn=dx(Ym),Lh=Vg(Ym),Kr=!0,console.log(" Firebase initialized for DragMate")):console.warn(" DEMO MODE: Firebase env vars missing. Global features will run in local/demo mode only.")}catch(r){console.error(" Firebase initialization failed:",r)}const iT=3e4;async function ND(r){return r?r.currentUser?r.currentUser:(await Og(r)).user??null:null}async function rT(r,e){const n=Ba(r,"presence",e.uid);await p1(n,{lastSeen:new Date,status:"online"},{merge:!0})}function DD(){const[r,e]=Z.useState({count:null,loading:!0,error:null,isOnline:!1,isSupported:Kr&&!!yn&&!!Lh});return Z.useEffect(()=>{if(!Kr||!yn||!Lh){e(g=>({...g,loading:!1,isSupported:!1}));return}const n=yn,s=Lh;let o=!1,u=null,h=null;return(async()=>{try{const g=await ND(s);if(!g||o)return;await rT(n,g),e(T=>({...T,isOnline:!0,isSupported:!0})),u=window.setInterval(()=>{rT(n,g).catch(T=>{console.error("Failed to update presence",T)})},iT/2);const p=new Date(Date.now()-iT),E=Sx(ja(n,"presence"),Ax("lastSeen",">=",p));h=y1(E,T=>{o||e(S=>({...S,count:T.size,loading:!1,error:null}))},T=>{console.error("Presence subscription error",T),!o&&e(S=>({...S,loading:!1,error:T.message??"Failed to subscribe to presence"}))})}catch(g){if(console.error("Presence initialization failed",g),o)return;e(p=>({...p,loading:!1,error:g?.message??"Presence initialization failed",isSupported:!1}))}})(),()=>{o=!0,u!==null&&window.clearInterval(u),h&&h()}},[]),r}const OD=({onCreateRoom:r,onJoinRoom:e,onStartLocal:n,isAuthLoading:s})=>{const[o,u]=Z.useState("game-select"),[h,m]=Z.useState(""),[g,p]=Z.useState(!1),{count:E,loading:T,isSupported:S}=DD(),x=async()=>{p(!0);try{await r()}finally{p(!1)}},L=()=>P.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-500",children:[P.jsx("h2",{className:"text-2xl font-bold text-white text-center",children:"Choose Your Game"}),P.jsxs("button",{onClick:()=>u("mode-select"),className:"group relative w-full aspect-video bg-linear-to-br from-slate-800 to-slate-900 rounded-3xl border border-slate-700/50 hover:border-indigo-500/50 transition-all hover:-translate-y-1 hover:shadow-2xl hover:shadow-indigo-500/20 overflow-hidden text-left p-8",children:[P.jsx("div",{className:"absolute top-0 right-0 p-3 bg-indigo-500/10 text-indigo-300 rounded-bl-2xl text-xs font-black uppercase tracking-widest border-b border-l border-indigo-500/20",children:"Featured"}),P.jsx(Sv,{className:"w-12 h-12 text-indigo-400 mb-4 group-hover:scale-110 transition-transform"}),P.jsx("h3",{className:"text-3xl font-black text-white mb-2",children:"CHESS"}),P.jsx("p",{className:"text-slate-400 font-medium max-w-[200px]",children:"The classic game of strategy. Multiplayer & Local."}),P.jsx("div",{className:"absolute bottom-6 right-6 p-3 rounded-full bg-indigo-500 text-white opacity-0 group-hover:opacity-100 transition-all translate-x-4 group-hover:translate-x-0",children:P.jsx(hw,{size:20})})]})]}),z=()=>P.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500",children:[P.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[P.jsx("button",{onClick:()=>u("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:P.jsx(Rh,{size:20})}),P.jsx("h2",{className:"text-2xl font-bold text-white",children:"Select Threat Level"})]}),P.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[P.jsx("button",{onClick:()=>n("Easy"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-green-500/50 hover:bg-slate-800 transition-all",children:P.jsxs("div",{className:"flex items-center gap-4",children:[P.jsx("div",{className:"p-3 rounded-full bg-green-500/10 text-green-400",children:P.jsx(Lm,{size:20})}),P.jsxs("div",{className:"text-left",children:[P.jsx("div",{className:"text-lg font-bold text-white",children:"Easy"}),P.jsx("div",{className:"text-xs text-slate-500",children:"Casual play"})]})]})}),P.jsx("button",{onClick:()=>n("Normal"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-indigo-500/50 hover:bg-slate-800 transition-all",children:P.jsxs("div",{className:"flex items-center gap-4",children:[P.jsx("div",{className:"p-3 rounded-full bg-indigo-500/10 text-indigo-400",children:P.jsx(Lm,{size:20})}),P.jsxs("div",{className:"text-left",children:[P.jsx("div",{className:"text-lg font-bold text-white",children:"Normal"}),P.jsx("div",{className:"text-xs text-slate-500",children:"Balanced opponent"})]})]})}),P.jsx("button",{onClick:()=>n("Hard"),className:"group flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-red-500/50 hover:bg-slate-800 transition-all",children:P.jsxs("div",{className:"flex items-center gap-4",children:[P.jsx("div",{className:"p-3 rounded-full bg-red-500/10 text-red-400",children:P.jsx(Sv,{size:20})}),P.jsxs("div",{className:"text-left",children:[P.jsx("div",{className:"text-lg font-bold text-white",children:"Hard"}),P.jsx("div",{className:"text-xs text-slate-500",children:"Ruthless tactics"})]})]})})]})]}),q=()=>P.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500",children:[P.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[P.jsx("button",{onClick:()=>u("game-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:P.jsx(Rh,{size:20})}),P.jsx("h2",{className:"text-2xl font-bold text-white",children:"Select Mode"})]}),P.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[P.jsxs("button",{onClick:()=>u("difficulty-select"),className:"group flex flex-col items-center justify-center gap-4 p-8 bg-slate-800/50 rounded-2xl border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all",children:[P.jsx("div",{className:"p-4 rounded-full bg-emerald-500/10 text-emerald-400 group-hover:scale-110 transition-transform",children:P.jsx(Lm,{size:32})}),P.jsxs("div",{className:"text-center",children:[P.jsx("div",{className:"text-xl font-bold text-white",children:"Single Player"}),P.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"Vs Computer"})]})]}),P.jsxs("button",{onClick:()=>u("connection"),className:"group flex flex-col items-center justify-center gap-4 p-8 bg-slate-800/50 rounded-2xl border border-slate-700 hover:border-indigo-500/50 hover:bg-slate-800 transition-all",children:[P.jsx("div",{className:"p-4 rounded-full bg-indigo-500/10 text-indigo-400 group-hover:scale-110 transition-transform",children:P.jsx(wT,{size:32})}),P.jsxs("div",{className:"text-center",children:[P.jsx("div",{className:"text-xl font-bold text-white",children:"Multiplayer"}),P.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"Online PvP"})]})]})]})]}),se=()=>P.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500",children:[P.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[P.jsx("button",{onClick:()=>u("mode-select"),className:"p-2 -ml-2 text-slate-500 hover:text-white transition-colors",children:P.jsx(Rh,{size:20})}),P.jsx("h2",{className:"text-2xl font-bold text-white",children:"Multiplayer"})]}),P.jsxs("div",{className:"space-y-6",children:[P.jsxs("button",{onClick:x,disabled:g||s,className:"w-full btn-premium flex items-center justify-center gap-3 sm:gap-4 text-lg py-4 group disabled:opacity-50 disabled:cursor-not-allowed",children:[g||s?P.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"}):P.jsx(Tw,{size:24,className:"transition-transform group-hover:rotate-90"}),P.jsx("span",{children:s?"Initializing...":g?"Creating Arena...":"Create New Room"})]}),P.jsxs("div",{className:"relative flex items-center gap-6",children:[P.jsx("div",{className:"flex-1 h-px bg-slate-800"}),P.jsx("span",{className:"text-slate-600 text-xs font-black uppercase tracking-[0.2em]",children:"OR JOIN"}),P.jsx("div",{className:"flex-1 h-px bg-slate-800"})]}),P.jsxs("div",{className:"flex gap-3",children:[P.jsx("input",{type:"text",placeholder:"Enter Room ID",value:h,onChange:he=>m(he.target.value),className:"flex-1 bg-slate-900/40 border border-slate-800/50 rounded-xl px-4 py-4 text-lg placeholder:text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all"}),P.jsx("button",{onClick:()=>e(h),disabled:!h.trim()||s,className:"bg-slate-800 hover:bg-slate-700 text-white disabled:opacity-50 px-6 rounded-xl transition-all font-bold shadow-lg",children:P.jsx(vw,{size:24})})]})]})]});return P.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[85vh] gap-8 lg:gap-12 relative overflow-hidden px-4",children:[P.jsxs("div",{className:"text-center space-y-4 lg:space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-1000",children:[P.jsx("div",{className:"inline-flex items-center px-3 sm:px-4 py-1.5 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-400 text-xs sm:text-sm font-semibold tracking-wide",children:"PREMIUM MULTIPLAYER CHESS"}),P.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-8xl font-black tracking-tight bg-clip-text text-transparent bg-linear-to-b from-white via-indigo-100 to-indigo-400",children:"DragMate"})]}),P.jsxs("div",{className:"liquid-glass p-6 sm:p-8 w-full max-w-xl min-h-[400px]",children:[o==="game-select"&&L(),o==="mode-select"&&q(),o==="difficulty-select"&&z(),o==="connection"&&se()]}),P.jsx("div",{className:"flex items-center gap-10 text-slate-600 font-bold uppercase tracking-widest text-[10px] animate-in fade-in duration-1000 delay-500",children:P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${S?"bg-green-500":"bg-slate-600"}`}),S?`${T?"...":(E??0).toLocaleString()} Online`:"Demo Mode"]})})]})};function MD(r){return r!==null?{comment:r,variations:[]}:{variations:[]}}function VD(r,e,n,s,o){const u={move:r,variations:o};return e&&(u.suffix=e),n&&(u.nag=n),s!==null&&(u.comment=s),u}function kD(...r){const[e,...n]=r;let s=e;for(const o of n)o!==null&&(s.variations=[o,...o.variations],o.variations=[],s=o);return e}function PD(r,e){if(e.marker&&e.marker.comment){let n=e.root;for(;;){const s=n.variations[0];if(!s){n.comment=e.marker.comment;break}n=s}}return{headers:r,root:e.root,result:(e.marker&&e.marker.result)??void 0}}function LD(r,e){function n(){this.constructor=r}n.prototype=e.prototype,r.prototype=new n}function rl(r,e,n,s){var o=Error.call(this,r);return Object.setPrototypeOf&&Object.setPrototypeOf(o,rl.prototype),o.expected=e,o.found=n,o.location=s,o.name="SyntaxError",o}LD(rl,Error);function Xm(r,e,n){return n=n||" ",r.length>e?r:(e-=r.length,n+=n.repeat(e),r+n.slice(0,e))}rl.prototype.format=function(r){var e="Error: "+this.message;if(this.location){var n=null,s;for(s=0;s<r.length;s++)if(r[s].source===this.location.source){n=r[s].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,u=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(o):o,h=this.location.source+":"+u.line+":"+u.column;if(n){var m=this.location.end,g=Xm("",u.line.toString().length," "),p=n[o.line-1],E=o.line===m.line?m.column:p.length+1,T=E-o.column||1;e+=`
 --> `+h+`
`+g+` |
`+u.line+" | "+p+`
`+g+" | "+Xm("",o.column-1," ")+Xm("",T,"^")}else e+=`
 at `+h}return e};rl.buildMessage=function(r,e){var n={literal:function(p){return'"'+o(p.text)+'"'},class:function(p){var E=p.parts.map(function(T){return Array.isArray(T)?u(T[0])+"-"+u(T[1]):u(T)});return"["+(p.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(p){return p.description}};function s(p){return p.charCodeAt(0).toString(16).toUpperCase()}function o(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+s(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+s(E)})}function u(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+s(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+s(E)})}function h(p){return n[p.type](p)}function m(p){var E=p.map(h),T,S;if(E.sort(),E.length>0){for(T=1,S=1;T<E.length;T++)E[T-1]!==E[T]&&(E[S]=E[T],S++);E.length=S}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function g(p){return p?'"'+o(p)+'"':"end of input"}return"Expected "+m(r)+" but "+g(e)+" found."};function UD(r,e){e=e!==void 0?e:{};var n={},s=e.grammarSource,o={pgn:Za},u=Za,h="[",m='"',g="]",p=".",E="O-O-O",T="O-O",S="0-0-0",x="0-0",L="$",z="{",q="}",se=";",he="(",oe=")",be="1-0",de="0-1",pe="1/2-1/2",R="*",w=/^[a-zA-Z]/,C=/^[^"]/,O=/^[0-9]/,D=/^[.]/,k=/^[a-zA-Z1-8\-=]/,I=/^[+#]/,qe=/^[!?]/,ht=/^[^}]/,J=/^[^\r\n]/,ae=/^[ \t\r\n]/,ve=mt("tag pair"),Me=et("[",!1),je=et('"',!1),M=et("]",!1),W=mt("tag name"),ce=Nt([["a","z"],["A","Z"]],!1,!1),ue=mt("tag value"),ye=Nt(['"'],!0,!1),we=mt("move number"),Le=Nt([["0","9"]],!1,!1),xt=et(".",!1),ot=Nt(["."],!1,!1),Bt=mt("standard algebraic notation"),Ti=et("O-O-O",!1),Vn=et("O-O",!1),zi=et("0-0-0",!1),Yt=et("0-0",!1),li=Nt([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),kn=Nt(["+","#"],!1,!1),ir=mt("suffix annotation"),ji=Nt(["!","?"],!1,!1),bt=mt("NAG"),lt=et("$",!1),qn=mt("brace comment"),rr=et("{",!1),sr=Nt(["}"],!0,!1),Xt=et("}",!1),Bi=mt("rest of line comment"),Ar=et(";",!1),Hn=Nt(["\r",`
`],!0,!1),An=mt("variation"),qi=et("(",!1),wr=et(")",!1),Fn=mt("game termination marker"),Rr=et("1-0",!1),Gn=et("0-1",!1),qt=et("1/2-1/2",!1),mn=et("*",!1),St=mt("whitespace"),Cr=Nt([" ","	","\r",`
`],!1,!1),Hi=function(j,$){return PD(j,$)},ns=function(j){return Object.fromEntries(j)},Zn=function(j,$){return[j,$]},Fi=function(j,$){return{root:j,marker:$}},He=function(j,$){return kD(MD(j),...$.flat())},At=function(j,$,G,ge,Ae){return VD(j,$,G,ge,Ae)},wt=function(j){return j},Pt=function(j){return j.replace(/[\r\n]+/g," ")},gn=function(j){return j.trim()},Zt=function(j){return j},Mt=function(j,$){return{result:j,comment:$}},Q=e.peg$currPos|0,ft=[{line:1,column:1}],dt=Q,Ht=e.peg$maxFailExpected||[],le=e.peg$silentFails|0,ln;if(e.startRule){if(!(e.startRule in o))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');u=o[e.startRule]}function et(j,$){return{type:"literal",text:j,ignoreCase:$}}function Nt(j,$,G){return{type:"class",parts:j,inverted:$,ignoreCase:G}}function un(){return{type:"end"}}function mt(j){return{type:"other",description:j}}function Vt(j){var $=ft[j],G;if($)return $;if(j>=ft.length)G=ft.length-1;else for(G=j;!ft[--G];);for($=ft[G],$={line:$.line,column:$.column};G<j;)r.charCodeAt(G)===10?($.line++,$.column=1):$.column++,G++;return ft[j]=$,$}function Ft(j,$,G){var ge=Vt(j),Ae=Vt($),Je={source:s,start:{offset:j,line:ge.line,column:ge.column},end:{offset:$,line:Ae.line,column:Ae.column}};return Je}function Ee(j){Q<dt||(Q>dt&&(dt=Q,Ht=[]),Ht.push(j))}function is(j,$,G){return new rl(rl.buildMessage(j,$),j,$,G)}function Za(){var j,$,G;return j=Q,$=Ja(),G=Si(),j=Hi($,G),j}function Ja(){var j,$,G;for(j=Q,$=[],G=ha();G!==n;)$.push(G),G=ha();return G=Jt(),j=ns($),j}function ha(){var j,$,G,ge,Ae,Je,Fe;return le++,j=Q,Jt(),r.charCodeAt(Q)===91?($=h,Q++):($=n,le===0&&Ee(Me)),$!==n?(Jt(),G=bi(),G!==n?(Jt(),r.charCodeAt(Q)===34?(ge=m,Q++):(ge=n,le===0&&Ee(je)),ge!==n?(Ae=rs(),r.charCodeAt(Q)===34?(Je=m,Q++):(Je=n,le===0&&Ee(je)),Je!==n?(Jt(),r.charCodeAt(Q)===93?(Fe=g,Q++):(Fe=n,le===0&&Ee(M)),Fe!==n?j=Zn(G,Ae):(Q=j,j=n)):(Q=j,j=n)):(Q=j,j=n)):(Q=j,j=n)):(Q=j,j=n),le--,j===n&&le===0&&Ee(ve),j}function bi(){var j,$,G;if(le++,j=Q,$=[],G=r.charAt(Q),w.test(G)?Q++:(G=n,le===0&&Ee(ce)),G!==n)for(;G!==n;)$.push(G),G=r.charAt(Q),w.test(G)?Q++:(G=n,le===0&&Ee(ce));else $=n;return $!==n?j=r.substring(j,Q):j=$,le--,j===n&&($=n,le===0&&Ee(W)),j}function rs(){var j,$,G;for(le++,j=Q,$=[],G=r.charAt(Q),C.test(G)?Q++:(G=n,le===0&&Ee(ye));G!==n;)$.push(G),G=r.charAt(Q),C.test(G)?Q++:(G=n,le===0&&Ee(ye));return j=r.substring(j,Q),le--,$=n,le===0&&Ee(ue),j}function Si(){var j,$,G;return j=Q,$=Kn(),Jt(),G=ma(),G===n&&(G=null),Jt(),j=Fi($,G),j}function Kn(){var j,$,G,ge;for(j=Q,$=Jn(),$===n&&($=null),G=[],ge=Pn();ge!==n;)G.push(ge),ge=Pn();return j=He($,G),j}function Pn(){var j,$,G,ge,Ae,Je,Fe,Ri;if(j=Q,Jt(),Ai(),Jt(),$=Lt(),$!==n){for(G=fa(),G===n&&(G=null),ge=[],Ae=ss();Ae!==n;)ge.push(Ae),Ae=ss();for(Ae=Jt(),Je=Jn(),Je===n&&(Je=null),Fe=[],Ri=as();Ri!==n;)Fe.push(Ri),Ri=as();j=At($,G,ge,Je,Fe)}else Q=j,j=n;return j}function Ai(){var j,$,G,ge,Ae,Je;for(le++,j=Q,$=[],G=r.charAt(Q),O.test(G)?Q++:(G=n,le===0&&Ee(Le));G!==n;)$.push(G),G=r.charAt(Q),O.test(G)?Q++:(G=n,le===0&&Ee(Le));if(r.charCodeAt(Q)===46?(G=p,Q++):(G=n,le===0&&Ee(xt)),G!==n){for(ge=Jt(),Ae=[],Je=r.charAt(Q),D.test(Je)?Q++:(Je=n,le===0&&Ee(ot));Je!==n;)Ae.push(Je),Je=r.charAt(Q),D.test(Je)?Q++:(Je=n,le===0&&Ee(ot));$=[$,G,ge,Ae],j=$}else Q=j,j=n;return le--,j===n&&($=n,le===0&&Ee(we)),j}function Lt(){var j,$,G,ge,Ae,Je;if(le++,j=Q,$=Q,r.substr(Q,5)===E?(G=E,Q+=5):(G=n,le===0&&Ee(Ti)),G===n&&(r.substr(Q,3)===T?(G=T,Q+=3):(G=n,le===0&&Ee(Vn)),G===n&&(r.substr(Q,5)===S?(G=S,Q+=5):(G=n,le===0&&Ee(zi)),G===n&&(r.substr(Q,3)===x?(G=x,Q+=3):(G=n,le===0&&Ee(Yt)),G===n))))if(G=Q,ge=r.charAt(Q),w.test(ge)?Q++:(ge=n,le===0&&Ee(ce)),ge!==n){if(Ae=[],Je=r.charAt(Q),k.test(Je)?Q++:(Je=n,le===0&&Ee(li)),Je!==n)for(;Je!==n;)Ae.push(Je),Je=r.charAt(Q),k.test(Je)?Q++:(Je=n,le===0&&Ee(li));else Ae=n;Ae!==n?(ge=[ge,Ae],G=ge):(Q=G,G=n)}else Q=G,G=n;return G!==n?(ge=r.charAt(Q),I.test(ge)?Q++:(ge=n,le===0&&Ee(kn)),ge===n&&(ge=null),G=[G,ge],$=G):(Q=$,$=n),$!==n?j=r.substring(j,Q):j=$,le--,j===n&&($=n,le===0&&Ee(Bt)),j}function fa(){var j,$,G;for(le++,j=Q,$=[],G=r.charAt(Q),qe.test(G)?Q++:(G=n,le===0&&Ee(ji));G!==n;)$.push(G),$.length>=2?G=n:(G=r.charAt(Q),qe.test(G)?Q++:(G=n,le===0&&Ee(ji)));return $.length<1?(Q=j,j=n):j=$,le--,j===n&&($=n,le===0&&Ee(ir)),j}function ss(){var j,$,G,ge,Ae;if(le++,j=Q,Jt(),r.charCodeAt(Q)===36?($=L,Q++):($=n,le===0&&Ee(lt)),$!==n){if(G=Q,ge=[],Ae=r.charAt(Q),O.test(Ae)?Q++:(Ae=n,le===0&&Ee(Le)),Ae!==n)for(;Ae!==n;)ge.push(Ae),Ae=r.charAt(Q),O.test(Ae)?Q++:(Ae=n,le===0&&Ee(Le));else ge=n;ge!==n?G=r.substring(G,Q):G=ge,G!==n?j=wt(G):(Q=j,j=n)}else Q=j,j=n;return le--,j===n&&le===0&&Ee(bt),j}function Jn(){var j;return j=wi(),j===n&&(j=da()),j}function wi(){var j,$,G,ge,Ae;if(le++,j=Q,r.charCodeAt(Q)===123?($=z,Q++):($=n,le===0&&Ee(rr)),$!==n){for(G=Q,ge=[],Ae=r.charAt(Q),ht.test(Ae)?Q++:(Ae=n,le===0&&Ee(sr));Ae!==n;)ge.push(Ae),Ae=r.charAt(Q),ht.test(Ae)?Q++:(Ae=n,le===0&&Ee(sr));G=r.substring(G,Q),r.charCodeAt(Q)===125?(ge=q,Q++):(ge=n,le===0&&Ee(Xt)),ge!==n?j=Pt(G):(Q=j,j=n)}else Q=j,j=n;return le--,j===n&&($=n,le===0&&Ee(qn)),j}function da(){var j,$,G,ge,Ae;if(le++,j=Q,r.charCodeAt(Q)===59?($=se,Q++):($=n,le===0&&Ee(Ar)),$!==n){for(G=Q,ge=[],Ae=r.charAt(Q),J.test(Ae)?Q++:(Ae=n,le===0&&Ee(Hn));Ae!==n;)ge.push(Ae),Ae=r.charAt(Q),J.test(Ae)?Q++:(Ae=n,le===0&&Ee(Hn));G=r.substring(G,Q),j=gn(G)}else Q=j,j=n;return le--,j===n&&($=n,le===0&&Ee(Bi)),j}function as(){var j,$,G,ge;return le++,j=Q,Jt(),r.charCodeAt(Q)===40?($=he,Q++):($=n,le===0&&Ee(qi)),$!==n?(G=Kn(),G!==n?(Jt(),r.charCodeAt(Q)===41?(ge=oe,Q++):(ge=n,le===0&&Ee(wr)),ge!==n?j=Zt(G):(Q=j,j=n)):(Q=j,j=n)):(Q=j,j=n),le--,j===n&&le===0&&Ee(An),j}function ma(){var j,$,G;return le++,j=Q,r.substr(Q,3)===be?($=be,Q+=3):($=n,le===0&&Ee(Rr)),$===n&&(r.substr(Q,3)===de?($=de,Q+=3):($=n,le===0&&Ee(Gn)),$===n&&(r.substr(Q,7)===pe?($=pe,Q+=7):($=n,le===0&&Ee(qt)),$===n&&(r.charCodeAt(Q)===42?($=R,Q++):($=n,le===0&&Ee(mn))))),$!==n?(Jt(),G=Jn(),G===n&&(G=null),j=Mt($,G)):(Q=j,j=n),le--,j===n&&($=n,le===0&&Ee(Fn)),j}function Jt(){var j,$;for(le++,j=[],$=r.charAt(Q),ae.test($)?Q++:($=n,le===0&&Ee(Cr));$!==n;)j.push($),$=r.charAt(Q),ae.test($)?Q++:($=n,le===0&&Ee(Cr));return le--,$=n,le===0&&Ee(St),j}if(ln=u(),e.peg$library)return{peg$result:ln,peg$currPos:Q,peg$FAILED:n,peg$maxFailExpected:Ht,peg$maxFailPos:dt};if(ln!==n&&Q===r.length)return ln;throw ln!==n&&Q<r.length&&Ee(un()),is(Ht,dt<r.length?r.charAt(dt):null,dt<r.length?Ft(dt,dt+1):Ft(dt,dt))}const Uh=0xffffffffffffffffn;function Zm(r,e){return(r<<e|r>>64n-e)&0xffffffffffffffffn}function sT(r,e){return r*e&Uh}function zD(r){return function(){let e=BigInt(r&Uh),n=BigInt(r>>64n&Uh);const s=sT(Zm(sT(e,5n),7n),9n);return n^=e,e=(Zm(e,24n)^n^n<<16n)&Uh,n=Zm(n,37n),r=n<<64n|e,s}}const Mf=zD(0xa187eb39cdcaed8f31c4b365b102e01en),jD=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>Mf()))),BD=Array.from({length:8},()=>Mf()),qD=Array.from({length:16},()=>Mf()),Jm=Mf(),zn="w",pi="b",rn="p",kg="n",zh="b",du="r",js="q",hn="k",Wm="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Ah{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(e,n){const{color:s,piece:o,from:u,to:h,flags:m,captured:g,promotion:p}=n,E=_n(u),T=_n(h);this.color=s,this.piece=o,this.from=E,this.to=T,this.san=e._moveToSan(n,e._moves({legal:!0})),this.lan=E+T,this.before=e.fen(),e._makeMove(n),this.after=e.fen(),e._undoMove(),this.flags="";for(const S in Ve)Ve[S]&m&&(this.flags+=Ua[S]);g&&(this.captured=g),p&&(this.promotion=p,this.lan+=p)}isCapture(){return this.flags.indexOf(Ua.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(Ua.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(Ua.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(Ua.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(Ua.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(Ua.BIG_PAWN)>-1}}const Nn=-1,Ua={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},Ve={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},Pg={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},HD={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},FD={...Pg,...HD},De={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},eg={b:[16,32,17,15],w:[-16,-32,-17,-15]},aT={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},GD=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],KD=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],QD={p:1,n:2,b:4,r:8,q:16,k:32},$D="pnbrqkPNBRQK",oT=[kg,zh,du,js],YD=7,XD=6,ZD=1,JD=0,wh={[hn]:Ve.KSIDE_CASTLE,[js]:Ve.QSIDE_CASTLE},Us={w:[{square:De.a1,flag:Ve.QSIDE_CASTLE},{square:De.h1,flag:Ve.KSIDE_CASTLE}],b:[{square:De.a8,flag:Ve.QSIDE_CASTLE},{square:De.h8,flag:Ve.KSIDE_CASTLE}]},WD={b:ZD,w:XD},tg="--";function Ha(r){return r>>4}function Vu(r){return r&15}function Z1(r){return"0123456789".indexOf(r)!==-1}function _n(r){const e=Vu(r),n=Ha(r);return"abcdefgh".substring(e,e+1)+"87654321".substring(n,n+1)}function lu(r){return r===zn?pi:zn}function eO(r){const e=r.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(e[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const s=parseInt(e[4],10);if(isNaN(s)||s<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const o=e[0].split("/");if(o.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let h=0;h<o.length;h++){let m=0,g=!1;for(let p=0;p<o[h].length;p++)if(Z1(o[h][p])){if(g)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};m+=parseInt(o[h][p],10),g=!0}else{if(!/^[prnbqkPRNBQK]$/.test(o[h][p]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};m+=1,g=!1}if(m!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const u=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:h,regex:m}of u){if(!m.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${h} king`};if((e[0].match(m)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${h} kings`}}return Array.from(o[0]+o[7]).some(h=>h.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function tO(r,e){const n=r.from,s=r.to,o=r.piece;let u=0,h=0,m=0;for(let g=0,p=e.length;g<p;g++){const E=e[g].from,T=e[g].to,S=e[g].piece;o===S&&n!==E&&s===T&&(u++,Ha(n)===Ha(E)&&h++,Vu(n)===Vu(E)&&m++)}return u>0?h>0&&m>0?_n(n):m>0?_n(n).charAt(1):_n(n).charAt(0):""}function zs(r,e,n,s,o,u=void 0,h=Ve.NORMAL){const m=Ha(s);if(o===rn&&(m===YD||m===JD))for(let g=0;g<oT.length;g++){const p=oT[g];r.push({color:e,from:n,to:s,piece:o,captured:u,promotion:p,flags:h|Ve.PROMOTION})}else r.push({color:e,from:n,to:s,piece:o,captured:u,flags:h})}function lT(r){let e=r.charAt(0);return e>="a"&&e<="h"?r.match(/[a-h]\d.*[a-h]\d/)?void 0:rn:(e=e.toLowerCase(),e==="o"?hn:e)}function ng(r){return r.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class Up{_board=new Array(128);_turn=zn;_header={};_kings={w:Nn,b:Nn};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_hash=0n;_positionCount=new Map;constructor(e=Wm,{skipValidation:n=!1}={}){this.load(e,{skipValidation:n})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:Nn,b:Nn},this._turn=zn,this._castling={w:0,b:0},this._epSquare=Nn,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...FD},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:n=!1,preserveHeaders:s=!1}={}){let o=e.split(/\s+/);if(o.length>=2&&o.length<6){const m=["-","-","0","1"];e=o.concat(m.slice(-(6-o.length))).join(" ")}if(o=e.split(/\s+/),!n){const{ok:m,error:g}=eO(e);if(!m)throw new Error(g)}const u=o[0];let h=0;this.clear({preserveHeaders:s});for(let m=0;m<u.length;m++){const g=u.charAt(m);if(g==="/")h+=8;else if(Z1(g))h+=parseInt(g,10);else{const p=g<"a"?zn:pi;this._put({type:g.toLowerCase(),color:p},_n(h)),h++}}this._turn=o[1],o[2].indexOf("K")>-1&&(this._castling.w|=Ve.KSIDE_CASTLE),o[2].indexOf("Q")>-1&&(this._castling.w|=Ve.QSIDE_CASTLE),o[2].indexOf("k")>-1&&(this._castling.b|=Ve.KSIDE_CASTLE),o[2].indexOf("q")>-1&&(this._castling.b|=Ve.QSIDE_CASTLE),this._epSquare=o[3]==="-"?Nn:De[o[3]],this._halfMoves=parseInt(o[4],10),this._moveNumber=parseInt(o[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){let n=0,s="";for(let h=De.a8;h<=De.h1;h++){if(this._board[h]){n>0&&(s+=n,n=0);const{color:m,type:g}=this._board[h];s+=m===zn?g.toUpperCase():g.toLowerCase()}else n++;h+1&136&&(n>0&&(s+=n),h!==De.h1&&(s+="/"),n=0,h+=8)}let o="";this._castling[zn]&Ve.KSIDE_CASTLE&&(o+="K"),this._castling[zn]&Ve.QSIDE_CASTLE&&(o+="Q"),this._castling[pi]&Ve.KSIDE_CASTLE&&(o+="k"),this._castling[pi]&Ve.QSIDE_CASTLE&&(o+="q"),o=o||"-";let u="-";if(this._epSquare!==Nn)if(e)u=_n(this._epSquare);else{const h=this._epSquare+(this._turn===zn?16:-16),m=[h+1,h-1];for(const g of m){if(g&136)continue;const p=this._turn;if(this._board[g]?.color===p&&this._board[g]?.type===rn){this._makeMove({color:p,from:g,to:this._epSquare,piece:rn,captured:rn,flags:Ve.EP_CAPTURE});const E=!this._isKingAttacked(p);if(this._undoMove(),E){u=_n(this._epSquare);break}}}}return[s,this._turn,o,u,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;const{color:n,type:s}=this._board[e],o={w:0,b:1}[n],u={p:0,n:1,b:2,r:3,q:4,k:5}[s];return jD[o][u][e]}_epKey(){return this._epSquare===Nn?0n:BD[this._epSquare&7]}_castlingKey(){const e=this._castling.w>>5|this._castling.b>>3;return qD[e]}_computeHash(){let e=0n;for(let n=De.a8;n<=De.h1;n++){if(n&136){n+=7;continue}this._board[n]&&(e^=this._pieceKey(n))}return e^=this._epKey(),e^=this._castlingKey(),this._turn==="b"&&(e^=Jm),e}_updateSetup(e){this._history.length>0||(e!==Wm?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(Wm)}get(e){return this._board[De[e]]}findPiece(e){const n=[];for(let s=De.a8;s<=De.h1;s++){if(s&136){s+=7;continue}!this._board[s]||this._board[s]?.color!==e.color||this._board[s].color===e.color&&this._board[s].type===e.type&&n.push(_n(s))}return n}put({type:e,color:n},s){return this._put({type:e,color:n},s)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(e,n){this._hash^=this._pieceKey(e),this._board[e]=n,this._hash^=this._pieceKey(e)}_put({type:e,color:n},s){if($D.indexOf(e.toLowerCase())===-1||!(s in De))return!1;const o=De[s];if(e==hn&&!(this._kings[n]==Nn||this._kings[n]==o))return!1;const u=this._board[o];return u&&u.type===hn&&(this._kings[u.color]=Nn),this._set(o,{type:e,color:n}),e===hn&&(this._kings[n]=o),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){const n=this.get(e);return this._clear(De[e]),n&&n.type===hn&&(this._kings[n.color]=Nn),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){this._hash^=this._castlingKey();const e=this._board[De.e1]?.type===hn&&this._board[De.e1]?.color===zn,n=this._board[De.e8]?.type===hn&&this._board[De.e8]?.color===pi;(!e||this._board[De.a1]?.type!==du||this._board[De.a1]?.color!==zn)&&(this._castling.w&=-65),(!e||this._board[De.h1]?.type!==du||this._board[De.h1]?.color!==zn)&&(this._castling.w&=-33),(!n||this._board[De.a8]?.type!==du||this._board[De.a8]?.color!==pi)&&(this._castling.b&=-65),(!n||this._board[De.h8]?.type!==du||this._board[De.h8]?.color!==pi)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){if(this._epSquare===Nn)return;const e=this._epSquare+(this._turn===zn?-16:16),n=this._epSquare+(this._turn===zn?16:-16),s=[n+1,n-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||this._board[n]?.color!==lu(this._turn)||this._board[n]?.type!==rn){this._hash^=this._epKey(),this._epSquare=Nn;return}const o=u=>!(u&136)&&this._board[u]?.color===this._turn&&this._board[u]?.type===rn;s.some(o)||(this._hash^=this._epKey(),this._epSquare=Nn)}_attacked(e,n,s){const o=[];for(let u=De.a8;u<=De.h1;u++){if(u&136){u+=7;continue}if(this._board[u]===void 0||this._board[u].color!==e)continue;const h=this._board[u],m=u-n;if(m===0)continue;const g=m+119;if(GD[g]&QD[h.type]){if(h.type===rn){if(m>0&&h.color===zn||m<=0&&h.color===pi)if(s)o.push(_n(u));else return!0;continue}if(h.type==="n"||h.type==="k")if(s){o.push(_n(u));continue}else return!0;const p=KD[g];let E=u+p,T=!1;for(;E!==n;){if(this._board[E]!=null){T=!0;break}E+=p}if(!T)if(s){o.push(_n(u));continue}else return!0}}return s?o:!1}attackers(e,n){return n?this._attacked(n,De[e],!0):this._attacked(this._turn,De[e],!0)}_isKingAttacked(e){const n=this._kings[e];return n===-1?!1:this._attacked(lu(e),n)}hash(){return this._hash.toString(16)}isAttacked(e,n){return this._attacked(n,De[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let s=0,o=0;for(let u=De.a8;u<=De.h1;u++){if(o=(o+1)%2,u&136){u+=7;continue}const h=this._board[u];h&&(e[h.type]=h.type in e?e[h.type]+1:1,h.type===zh&&n.push(o),s++)}if(s===2)return!0;if(s===3&&(e[zh]===1||e[kg]===1))return!0;if(s===e[zh]+2){let u=0;const h=n.length;for(let m=0;m<h;m++)u+=n[m];if(u===0||u===h)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:n=void 0,piece:s=void 0}={}){const o=this._moves({square:n,piece:s});return e?o.map(u=>new Ah(this,u)):o.map(u=>this._moveToSan(u,o))}_moves({legal:e=!0,piece:n=void 0,square:s=void 0}={}){const o=s?s.toLowerCase():void 0,u=n?.toLowerCase(),h=[],m=this._turn,g=lu(m);let p=De.a8,E=De.h1,T=!1;if(o)if(o in De)p=E=De[o],T=!0;else return[];for(let x=p;x<=E;x++){if(x&136){x+=7;continue}if(!this._board[x]||this._board[x].color===g)continue;const{type:L}=this._board[x];let z;if(L===rn){if(u&&u!==L)continue;z=x+eg[m][0],this._board[z]||(zs(h,m,x,z,rn),z=x+eg[m][1],WD[m]===Ha(x)&&!this._board[z]&&zs(h,m,x,z,rn,void 0,Ve.BIG_PAWN));for(let q=2;q<4;q++)z=x+eg[m][q],!(z&136)&&(this._board[z]?.color===g?zs(h,m,x,z,rn,this._board[z].type,Ve.CAPTURE):z===this._epSquare&&zs(h,m,x,z,rn,rn,Ve.EP_CAPTURE))}else{if(u&&u!==L)continue;for(let q=0,se=aT[L].length;q<se;q++){const he=aT[L][q];for(z=x;z+=he,!(z&136);){if(!this._board[z])zs(h,m,x,z,L);else{if(this._board[z].color===m)break;zs(h,m,x,z,L,this._board[z].type,Ve.CAPTURE);break}if(L===kg||L===hn)break}}}}if((u===void 0||u===hn)&&(!T||E===this._kings[m])){if(this._castling[m]&Ve.KSIDE_CASTLE){const x=this._kings[m],L=x+2;!this._board[x+1]&&!this._board[L]&&!this._attacked(g,this._kings[m])&&!this._attacked(g,x+1)&&!this._attacked(g,L)&&zs(h,m,this._kings[m],L,hn,void 0,Ve.KSIDE_CASTLE)}if(this._castling[m]&Ve.QSIDE_CASTLE){const x=this._kings[m],L=x-2;!this._board[x-1]&&!this._board[x-2]&&!this._board[x-3]&&!this._attacked(g,this._kings[m])&&!this._attacked(g,x-1)&&!this._attacked(g,L)&&zs(h,m,this._kings[m],L,hn,void 0,Ve.QSIDE_CASTLE)}}if(!e||this._kings[m]===-1)return h;const S=[];for(let x=0,L=h.length;x<L;x++)this._makeMove(h[x]),this._isKingAttacked(m)||S.push(h[x]),this._undoMove();return S}move(e,{strict:n=!1}={}){let s=null;if(typeof e=="string")s=this._moveFromSan(e,n);else if(e===null)s=this._moveFromSan(tg,n);else if(typeof e=="object"){const u=this._moves();for(let h=0,m=u.length;h<m;h++)if(e.from===_n(u[h].from)&&e.to===_n(u[h].to)&&(!("promotion"in u[h])||e.promotion===u[h].promotion)){s=u[h];break}}if(!s)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&s.flags&Ve.NULL_MOVE)throw new Error("Null move not allowed when in check");const o=new Ah(this,s);return this._makeMove(s),this._incPositionCount(),o}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,n){this._hash^=this._pieceKey(e),this._board[n]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(n)}_makeMove(e){const n=this._turn,s=lu(n);if(this._push(e),e.flags&Ve.NULL_MOVE){n===pi&&this._moveNumber++,this._halfMoves++,this._turn=s,this._epSquare=Nn;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&Ve.EP_CAPTURE&&(this._turn===pi?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:n})),this._board[e.to].type===hn){if(this._kings[n]=e.to,e.flags&Ve.KSIDE_CASTLE){const o=e.to-1,u=e.to+1;this._movePiece(u,o)}else if(e.flags&Ve.QSIDE_CASTLE){const o=e.to+1,u=e.to-2;this._movePiece(u,o)}this._castling[n]=0}if(this._castling[n]){for(let o=0,u=Us[n].length;o<u;o++)if(e.from===Us[n][o].square&&this._castling[n]&Us[n][o].flag){this._castling[n]^=Us[n][o].flag;break}}if(this._castling[s]){for(let o=0,u=Us[s].length;o<u;o++)if(e.to===Us[s][o].square&&this._castling[s]&Us[s][o].flag){this._castling[s]^=Us[s][o].flag;break}}if(this._hash^=this._castlingKey(),e.flags&Ve.BIG_PAWN){let o;n===pi?o=e.to-16:o=e.to+16,!(e.to-1&136)&&this._board[e.to-1]?.type===rn&&this._board[e.to-1]?.color===s||!(e.to+1&136)&&this._board[e.to+1]?.type===rn&&this._board[e.to+1]?.color===s?(this._epSquare=o,this._hash^=this._epKey()):this._epSquare=Nn}else this._epSquare=Nn;e.piece===rn?this._halfMoves=0:e.flags&(Ve.CAPTURE|Ve.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===pi&&this._moveNumber++,this._turn=s,this._hash^=Jm}undo(){const e=this._hash,n=this._undoMove();if(n){const s=new Ah(this,n);return this._decPositionCount(e),s}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const n=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=Jm;const s=this._turn,o=lu(s);if(n.flags&Ve.NULL_MOVE)return n;if(this._movePiece(n.to,n.from),n.piece&&(this._clear(n.from),this._set(n.from,{type:n.piece,color:s})),n.captured)if(n.flags&Ve.EP_CAPTURE){let u;s===pi?u=n.to-16:u=n.to+16,this._set(u,{type:rn,color:o})}else this._set(n.to,{type:n.captured,color:o});if(n.flags&(Ve.KSIDE_CASTLE|Ve.QSIDE_CASTLE)){let u,h;n.flags&Ve.KSIDE_CASTLE?(u=n.to+1,h=n.to-1):(u=n.to-2,h=n.to+1),this._movePiece(h,u)}return n}pgn({newline:e=`
`,maxWidth:n=0}={}){const s=[];let o=!1;for(const S in this._header)this._header[S]&&s.push(`[${S} "${this._header[S]}"]`+e),o=!0;o&&this._history.length&&s.push(e);const u=S=>{const x=this._comments[this.fen()];if(typeof x<"u"){const L=S.length>0?" ":"";S=`${S}${L}{${x}}`}return S},h=[];for(;this._history.length>0;)h.push(this._undoMove());const m=[];let g="";for(h.length===0&&m.push(u(""));h.length>0;){g=u(g);const S=h.pop();if(!S)break;if(!this._history.length&&S.color==="b"){const x=`${this._moveNumber}. ...`;g=g?`${g} ${x}`:x}else S.color==="w"&&(g.length&&m.push(g),g=this._moveNumber+".");g=g+" "+this._moveToSan(S,this._moves({legal:!0})),this._makeMove(S)}if(g.length&&m.push(u(g)),m.push(this._header.Result||"*"),n===0)return s.join("")+m.join(" ");const p=function(){return s.length>0&&s[s.length-1]===" "?(s.pop(),!0):!1},E=function(S,x){for(const L of x.split(" "))if(L){if(S+L.length>n){for(;p();)S--;s.push(e),S=0}s.push(L),S+=L.length,s.push(" "),S++}return p()&&S--,S};let T=0;for(let S=0;S<m.length;S++){if(T+m[S].length>n&&m[S].includes("{")){T=E(T,m[S]);continue}T+m[S].length>n&&S!==0?(s[s.length-1]===" "&&s.pop(),s.push(e),T=0):S!==0&&(s.push(" "),T++),s.push(m[S]),T+=m[S].length}return s.join("")}header(...e){for(let n=0;n<e.length;n+=2)typeof e[n]=="string"&&typeof e[n+1]=="string"&&(this._header[e[n]]=e[n+1]);return this._header}setHeader(e,n){return this._header[e]=n??Pg[e]??null,this.getHeaders()}removeHeader(e){return e in this._header?(this._header[e]=Pg[e]||null,!0):!1}getHeaders(){const e={};for(const[n,s]of Object.entries(this._header))s!==null&&(e[n]=s);return e}loadPgn(e,{strict:n=!1,newlineChar:s=`\r?
`}={}){s!==`\r?
`&&(e=e.replace(new RegExp(s,"g"),`
`));const o=UD(e);this.reset();const u=o.headers;let h="";for(const p in u)p.toLowerCase()==="fen"&&(h=u[p]),this.header(p,u[p]);if(!n)h&&this.load(h,{preserveHeaders:!0});else if(u.SetUp==="1"){if(!("FEN"in u))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(u.FEN,{preserveHeaders:!0})}let m=o.root;for(;m;){if(m.move){const p=this._moveFromSan(m.move,n);if(p==null)throw new Error(`Invalid move in PGN: ${m.move}`);this._makeMove(p),this._incPositionCount()}m.comment!==void 0&&(this._comments[this.fen()]=m.comment),m=m.variations[0]}const g=o.result;g&&Object.keys(this._header).length&&this._header.Result!==g&&this.setHeader("Result",g)}_moveToSan(e,n){let s="";if(e.flags&Ve.KSIDE_CASTLE)s="O-O";else if(e.flags&Ve.QSIDE_CASTLE)s="O-O-O";else{if(e.flags&Ve.NULL_MOVE)return tg;if(e.piece!==rn){const o=tO(e,n);s+=e.piece.toUpperCase()+o}e.flags&(Ve.CAPTURE|Ve.EP_CAPTURE)&&(e.piece===rn&&(s+=_n(e.from)[0]),s+="x"),s+=_n(e.to),e.promotion&&(s+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?s+="#":s+="+"),this._undoMove(),s}_moveFromSan(e,n=!1){let s=ng(e);if(n||(s==="0-0"?s="O-O":s==="0-0-0"&&(s="O-O-O")),s==tg)return{color:this._turn,from:0,to:0,piece:"k",flags:Ve.NULL_MOVE};let o=lT(s),u=this._moves({legal:!0,piece:o});for(let S=0,x=u.length;S<x;S++)if(s===ng(this._moveToSan(u[S],u)))return u[S];if(n)return null;let h,m,g,p,E,T=!1;if(m=s.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),m?(h=m[1],g=m[2],p=m[3],E=m[4],g.length==1&&(T=!0)):(m=s.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),m&&(h=m[1],g=m[2],p=m[3],E=m[4],g.length==1&&(T=!0))),o=lT(s),u=this._moves({legal:!0,piece:h||o}),!p)return null;for(let S=0,x=u.length;S<x;S++)if(g){if((!h||h.toLowerCase()==u[S].piece)&&De[g]==u[S].from&&De[p]==u[S].to&&(!E||E.toLowerCase()==u[S].promotion))return u[S];if(T){const L=_n(u[S].from);if((!h||h.toLowerCase()==u[S].piece)&&De[p]==u[S].to&&(g==L[0]||g==L[1])&&(!E||E.toLowerCase()==u[S].promotion))return u[S]}}else if(s===ng(this._moveToSan(u[S],u)).replace("x",""))return u[S];return null}ascii(){let e=`   +------------------------+
`;for(let n=De.a8;n<=De.h1;n++){if(Vu(n)===0&&(e+=" "+"87654321"[Ha(n)]+" |"),this._board[n]){const s=this._board[n].type,u=this._board[n].color===zn?s.toUpperCase():s.toLowerCase();e+=" "+u+" "}else e+=" . ";n+1&136&&(e+=`|
`,n+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const n=this._moves({legal:!1});let s=0;const o=this._turn;for(let u=0,h=n.length;u<h;u++)this._makeMove(n[u]),this._isKingAttacked(o)||(e-1>0?s+=this.perft(e-1):s++),this._undoMove();return s}setTurn(e){return this._turn==e?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const e=[];let n=[];for(let s=De.a8;s<=De.h1;s++)this._board[s]==null?n.push(null):n.push({square:_n(s),type:this._board[s].type,color:this._board[s].color}),s+1&136&&(e.push(n),n=[],s+=8);return e}squareColor(e){if(e in De){const n=De[e];return(Ha(n)+Vu(n))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const n=[],s=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const o=n.pop();if(!o)break;e?s.push(new Ah(this,o)):s.push(this._moveToSan(o,this._moves())),this._makeMove(o)}return s}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){const n=this._positionCount.get(e)??0;n===1?this._positionCount.delete(e):this._positionCount.set(e,n-1)}_pruneComments(){const e=[],n={},s=o=>{o in this._comments&&(n[o]=this._comments[o])};for(;this._history.length>0;)e.push(this._undoMove());for(s(this.fen());;){const o=e.pop();if(!o)break;this._makeMove(o),s(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const n=this._comments[e];return delete this._comments[e],{fen:e,comment:n}})}setCastlingRights(e,n){for(const o of[hn,js])n[o]!==void 0&&(n[o]?this._castling[e]|=wh[o]:this._castling[e]&=~wh[o]);this._updateCastlingRights();const s=this.getCastlingRights(e);return(n[hn]===void 0||n[hn]===s[hn])&&(n[js]===void 0||n[js]===s[js])}getCastlingRights(e){return{[hn]:(this._castling[e]&wh[hn])!==0,[js]:(this._castling[e]&wh[js])!==0}}moveNumber(){return this._moveNumber}}var mu=ST();const Vf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function dl(r){const e=Object.prototype.toString.call(r);return e==="[object Window]"||e==="[object global]"}function zp(r){return"nodeType"in r}function oi(r){var e,n;return r?dl(r)?r:zp(r)&&(e=(n=r.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function jp(r){const{Document:e}=oi(r);return r instanceof e}function Zu(r){return dl(r)?!1:r instanceof oi(r).HTMLElement}function J1(r){return r instanceof oi(r).SVGElement}function ml(r){return r?dl(r)?r.document:zp(r)?jp(r)?r:Zu(r)||J1(r)?r.ownerDocument:document:document:document}const la=Vf?Z.useLayoutEffect:Z.useEffect;function Bp(r){const e=Z.useRef(r);return la(()=>{e.current=r}),Z.useCallback(function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return e.current==null?void 0:e.current(...s)},[])}function nO(){const r=Z.useRef(null),e=Z.useCallback((s,o)=>{r.current=setInterval(s,o)},[]),n=Z.useCallback(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[]);return[e,n]}function ku(r,e){e===void 0&&(e=[r]);const n=Z.useRef(r);return la(()=>{n.current!==r&&(n.current=r)},e),n}function Ju(r,e){const n=Z.useRef();return Z.useMemo(()=>{const s=r(n.current);return n.current=s,s},[...e])}function uf(r){const e=Bp(r),n=Z.useRef(null),s=Z.useCallback(o=>{o!==n.current&&e?.(o,n.current),n.current=o},[]);return[n,s]}function Lg(r){const e=Z.useRef();return Z.useEffect(()=>{e.current=r},[r]),e.current}let ig={};function kf(r,e){return Z.useMemo(()=>{if(e)return e;const n=ig[r]==null?0:ig[r]+1;return ig[r]=n,r+"-"+n},[r,e])}function W1(r){return function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return s.reduce((u,h)=>{const m=Object.entries(h);for(const[g,p]of m){const E=u[g];E!=null&&(u[g]=E+r*p)}return u},{...e})}}const $o=W1(1),cf=W1(-1);function iO(r){return"clientX"in r&&"clientY"in r}function eS(r){if(!r)return!1;const{KeyboardEvent:e}=oi(r.target);return e&&r instanceof e}function rO(r){if(!r)return!1;const{TouchEvent:e}=oi(r.target);return e&&r instanceof e}function Ug(r){if(rO(r)){if(r.touches&&r.touches.length){const{clientX:e,clientY:n}=r.touches[0];return{x:e,y:n}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:e,clientY:n}=r.changedTouches[0];return{x:e,y:n}}}return iO(r)?{x:r.clientX,y:r.clientY}:null}const zg=Object.freeze({Translate:{toString(r){if(!r)return;const{x:e,y:n}=r;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:e,scaleY:n}=r;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(r){if(r)return[zg.Translate.toString(r),zg.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:e,duration:n,easing:s}=r;return e+" "+n+"ms "+s}}}),uT="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function sO(r){return r.matches(uT)?r:r.querySelector(uT)}const aO={display:"none"};function oO(r){let{id:e,value:n}=r;return Tn.createElement("div",{id:e,style:aO},n)}function lO(r){let{id:e,announcement:n,ariaLiveType:s="assertive"}=r;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Tn.createElement("div",{id:e,style:o,role:"status","aria-live":s,"aria-atomic":!0},n)}function uO(){const[r,e]=Z.useState("");return{announce:Z.useCallback(s=>{s!=null&&e(s)},[]),announcement:r}}const tS=Z.createContext(null);function cO(r){const e=Z.useContext(tS);Z.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(r)},[r,e])}function hO(){const[r]=Z.useState(()=>new Set),e=Z.useCallback(s=>(r.add(s),()=>r.delete(s)),[r]);return[Z.useCallback(s=>{let{type:o,event:u}=s;r.forEach(h=>{var m;return(m=h[o])==null?void 0:m.call(h,u)})},[r]),e]}const fO={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},dO={onDragStart(r){let{active:e}=r;return"Picked up draggable item "+e.id+"."},onDragOver(r){let{active:e,over:n}=r;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(r){let{active:e,over:n}=r;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(r){let{active:e}=r;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function mO(r){let{announcements:e=dO,container:n,hiddenTextDescribedById:s,screenReaderInstructions:o=fO}=r;const{announce:u,announcement:h}=uO(),m=kf("DndLiveRegion"),[g,p]=Z.useState(!1);if(Z.useEffect(()=>{p(!0)},[]),cO(Z.useMemo(()=>({onDragStart(T){let{active:S}=T;u(e.onDragStart({active:S}))},onDragMove(T){let{active:S,over:x}=T;e.onDragMove&&u(e.onDragMove({active:S,over:x}))},onDragOver(T){let{active:S,over:x}=T;u(e.onDragOver({active:S,over:x}))},onDragEnd(T){let{active:S,over:x}=T;u(e.onDragEnd({active:S,over:x}))},onDragCancel(T){let{active:S,over:x}=T;u(e.onDragCancel({active:S,over:x}))}}),[u,e])),!g)return null;const E=Tn.createElement(Tn.Fragment,null,Tn.createElement(oO,{id:s,value:o.draggable}),Tn.createElement(lO,{id:m,announcement:h}));return n?mu.createPortal(E,n):E}var fn;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(fn||(fn={}));function hf(){}function rg(r,e){return Z.useMemo(()=>({sensor:r,options:e??{}}),[r,e])}function gO(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return Z.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const nr=Object.freeze({x:0,y:0});function pO(r,e){let{data:{value:n}}=r,{data:{value:s}}=e;return s-n}function yO(r,e){if(!r||r.length===0)return null;const[n]=r;return n[e]}function _O(r,e){const n=Math.max(e.top,r.top),s=Math.max(e.left,r.left),o=Math.min(e.left+e.width,r.left+r.width),u=Math.min(e.top+e.height,r.top+r.height),h=o-s,m=u-n;if(s<o&&n<u){const g=e.width*e.height,p=r.width*r.height,E=h*m,T=E/(g+p-E);return Number(T.toFixed(4))}return 0}const vO=r=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=r;const o=[];for(const u of s){const{id:h}=u,m=n.get(h);if(m){const g=_O(m,e);g>0&&o.push({id:h,data:{droppableContainer:u,value:g}})}}return o.sort(pO)};function EO(r,e,n){return{...r,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function nS(r,e){return r&&e?{x:r.left-e.left,y:r.top-e.top}:nr}function TO(r){return function(n){for(var s=arguments.length,o=new Array(s>1?s-1:0),u=1;u<s;u++)o[u-1]=arguments[u];return o.reduce((h,m)=>({...h,top:h.top+r*m.y,bottom:h.bottom+r*m.y,left:h.left+r*m.x,right:h.right+r*m.x}),{...n})}}const bO=TO(1);function SO(r){if(r.startsWith("matrix3d(")){const e=r.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(r.startsWith("matrix(")){const e=r.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function AO(r,e,n){const s=SO(e);if(!s)return r;const{scaleX:o,scaleY:u,x:h,y:m}=s,g=r.left-h-(1-o)*parseFloat(n),p=r.top-m-(1-u)*parseFloat(n.slice(n.indexOf(" ")+1)),E=o?r.width/o:r.width,T=u?r.height/u:r.height;return{width:E,height:T,top:p,right:g+E,bottom:p+T,left:g}}const wO={ignoreTransform:!1};function Wu(r,e){e===void 0&&(e=wO);let n=r.getBoundingClientRect();if(e.ignoreTransform){const{transform:p,transformOrigin:E}=oi(r).getComputedStyle(r);p&&(n=AO(n,p,E))}const{top:s,left:o,width:u,height:h,bottom:m,right:g}=n;return{top:s,left:o,width:u,height:h,bottom:m,right:g}}function cT(r){return Wu(r,{ignoreTransform:!0})}function RO(r){const e=r.innerWidth,n=r.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function CO(r,e){return e===void 0&&(e=oi(r).getComputedStyle(r)),e.position==="fixed"}function IO(r,e){e===void 0&&(e=oi(r).getComputedStyle(r));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const u=e[o];return typeof u=="string"?n.test(u):!1})}function qp(r,e){const n=[];function s(o){if(e!=null&&n.length>=e||!o)return n;if(jp(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!Zu(o)||J1(o)||n.includes(o))return n;const u=oi(r).getComputedStyle(o);return o!==r&&IO(o,u)&&n.push(o),CO(o,u)?n:s(o.parentNode)}return r?s(r):n}function iS(r){const[e]=qp(r,1);return e??null}function sg(r){return!Vf||!r?null:dl(r)?r:zp(r)?jp(r)||r===ml(r).scrollingElement?window:Zu(r)?r:null:null}function rS(r){return dl(r)?r.scrollX:r.scrollLeft}function sS(r){return dl(r)?r.scrollY:r.scrollTop}function jg(r){return{x:rS(r),y:sS(r)}}var En;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(En||(En={}));function aS(r){return!Vf||!r?!1:r===document.scrollingElement}function oS(r){const e={x:0,y:0},n=aS(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},s={x:r.scrollWidth-n.width,y:r.scrollHeight-n.height},o=r.scrollTop<=e.y,u=r.scrollLeft<=e.x,h=r.scrollTop>=s.y,m=r.scrollLeft>=s.x;return{isTop:o,isLeft:u,isBottom:h,isRight:m,maxScroll:s,minScroll:e}}const xO={x:.2,y:.2};function NO(r,e,n,s,o){let{top:u,left:h,right:m,bottom:g}=n;s===void 0&&(s=10),o===void 0&&(o=xO);const{isTop:p,isBottom:E,isLeft:T,isRight:S}=oS(r),x={x:0,y:0},L={x:0,y:0},z={height:e.height*o.y,width:e.width*o.x};return!p&&u<=e.top+z.height?(x.y=En.Backward,L.y=s*Math.abs((e.top+z.height-u)/z.height)):!E&&g>=e.bottom-z.height&&(x.y=En.Forward,L.y=s*Math.abs((e.bottom-z.height-g)/z.height)),!S&&m>=e.right-z.width?(x.x=En.Forward,L.x=s*Math.abs((e.right-z.width-m)/z.width)):!T&&h<=e.left+z.width&&(x.x=En.Backward,L.x=s*Math.abs((e.left+z.width-h)/z.width)),{direction:x,speed:L}}function DO(r){if(r===document.scrollingElement){const{innerWidth:u,innerHeight:h}=window;return{top:0,left:0,right:u,bottom:h,width:u,height:h}}const{top:e,left:n,right:s,bottom:o}=r.getBoundingClientRect();return{top:e,left:n,right:s,bottom:o,width:r.clientWidth,height:r.clientHeight}}function lS(r){return r.reduce((e,n)=>$o(e,jg(n)),nr)}function OO(r){return r.reduce((e,n)=>e+rS(n),0)}function MO(r){return r.reduce((e,n)=>e+sS(n),0)}function VO(r,e){if(e===void 0&&(e=Wu),!r)return;const{top:n,left:s,bottom:o,right:u}=e(r);iS(r)&&(o<=0||u<=0||n>=window.innerHeight||s>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const kO=[["x",["left","right"],OO],["y",["top","bottom"],MO]];class Hp{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=qp(n),o=lS(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[u,h,m]of kO)for(const g of h)Object.defineProperty(this,g,{get:()=>{const p=m(s),E=o[u]-p;return this.rect[g]+E},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class bu{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=e}add(e,n,s){var o;(o=this.target)==null||o.addEventListener(e,n,s),this.listeners.push([e,n,s])}}function PO(r){const{EventTarget:e}=oi(r);return r instanceof e?r:ml(r)}function ag(r,e){const n=Math.abs(r.x),s=Math.abs(r.y);return typeof e=="number"?Math.sqrt(n**2+s**2)>e:"x"in e&&"y"in e?n>e.x&&s>e.y:"x"in e?n>e.x:"y"in e?s>e.y:!1}var Ui;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(Ui||(Ui={}));function hT(r){r.preventDefault()}function LO(r){r.stopPropagation()}var Tt;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter",r.Tab="Tab"})(Tt||(Tt={}));const uS={start:[Tt.Space,Tt.Enter],cancel:[Tt.Esc],end:[Tt.Space,Tt.Enter,Tt.Tab]},UO=(r,e)=>{let{currentCoordinates:n}=e;switch(r.code){case Tt.Right:return{...n,x:n.x+25};case Tt.Left:return{...n,x:n.x-25};case Tt.Down:return{...n,y:n.y+25};case Tt.Up:return{...n,y:n.y-25}}};class cS{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new bu(ml(n)),this.windowListeners=new bu(oi(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ui.Resize,this.handleCancel),this.windowListeners.add(Ui.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ui.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,s=e.node.current;s&&VO(s),n(nr)}handleKeyDown(e){if(eS(e)){const{active:n,context:s,options:o}=this.props,{keyboardCodes:u=uS,coordinateGetter:h=UO,scrollBehavior:m="smooth"}=o,{code:g}=e;if(u.end.includes(g)){this.handleEnd(e);return}if(u.cancel.includes(g)){this.handleCancel(e);return}const{collisionRect:p}=s.current,E=p?{x:p.left,y:p.top}:nr;this.referenceCoordinates||(this.referenceCoordinates=E);const T=h(e,{active:n,context:s.current,currentCoordinates:E});if(T){const S=cf(T,E),x={x:0,y:0},{scrollableAncestors:L}=s.current;for(const z of L){const q=e.code,{isTop:se,isRight:he,isLeft:oe,isBottom:be,maxScroll:de,minScroll:pe}=oS(z),R=DO(z),w={x:Math.min(q===Tt.Right?R.right-R.width/2:R.right,Math.max(q===Tt.Right?R.left:R.left+R.width/2,T.x)),y:Math.min(q===Tt.Down?R.bottom-R.height/2:R.bottom,Math.max(q===Tt.Down?R.top:R.top+R.height/2,T.y))},C=q===Tt.Right&&!he||q===Tt.Left&&!oe,O=q===Tt.Down&&!be||q===Tt.Up&&!se;if(C&&w.x!==T.x){const D=z.scrollLeft+S.x,k=q===Tt.Right&&D<=de.x||q===Tt.Left&&D>=pe.x;if(k&&!S.y){z.scrollTo({left:D,behavior:m});return}k?x.x=z.scrollLeft-D:x.x=q===Tt.Right?z.scrollLeft-de.x:z.scrollLeft-pe.x,x.x&&z.scrollBy({left:-x.x,behavior:m});break}else if(O&&w.y!==T.y){const D=z.scrollTop+S.y,k=q===Tt.Down&&D<=de.y||q===Tt.Up&&D>=pe.y;if(k&&!S.x){z.scrollTo({top:D,behavior:m});return}k?x.y=z.scrollTop-D:x.y=q===Tt.Down?z.scrollTop-de.y:z.scrollTop-pe.y,x.y&&z.scrollBy({top:-x.y,behavior:m});break}}this.handleMove(e,$o(cf(T,this.referenceCoordinates),x))}}}handleMove(e,n){const{onMove:s}=this.props;e.preventDefault(),s(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}cS.activators=[{eventName:"onKeyDown",handler:(r,e,n)=>{let{keyboardCodes:s=uS,onActivation:o}=e,{active:u}=n;const{code:h}=r.nativeEvent;if(s.start.includes(h)){const m=u.activatorNode.current;return m&&r.target!==m?!1:(r.preventDefault(),o?.({event:r.nativeEvent}),!0)}return!1}}];function fT(r){return!!(r&&"distance"in r)}function dT(r){return!!(r&&"delay"in r)}class Fp{constructor(e,n,s){var o;s===void 0&&(s=PO(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:u}=e,{target:h}=u;this.props=e,this.events=n,this.document=ml(h),this.documentListeners=new bu(this.document),this.listeners=new bu(s),this.windowListeners=new bu(oi(h)),this.initialCoordinates=(o=Ug(u))!=null?o:nr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ui.Resize,this.handleCancel),this.windowListeners.add(Ui.DragStart,hT),this.windowListeners.add(Ui.VisibilityChange,this.handleCancel),this.windowListeners.add(Ui.ContextMenu,hT),this.documentListeners.add(Ui.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(dT(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(fT(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:s,onPending:o}=this.props;o(s,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ui.Click,LO,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ui.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:s,initialCoordinates:o,props:u}=this,{onMove:h,options:{activationConstraint:m}}=u;if(!o)return;const g=(n=Ug(e))!=null?n:nr,p=cf(o,g);if(!s&&m){if(fT(m)){if(m.tolerance!=null&&ag(p,m.tolerance))return this.handleCancel();if(ag(p,m.distance))return this.handleStart()}if(dT(m)&&ag(p,m.tolerance))return this.handleCancel();this.handlePending(m,p);return}e.cancelable&&e.preventDefault(),h(g)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Tt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const zO={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Gp extends Fp{constructor(e){const{event:n}=e,s=ml(n.target);super(e,zO,s)}}Gp.activators=[{eventName:"onPointerDown",handler:(r,e)=>{let{nativeEvent:n}=r,{onActivation:s}=e;return!n.isPrimary||n.button!==0?!1:(s?.({event:n}),!0)}}];const jO={move:{name:"mousemove"},end:{name:"mouseup"}};var Bg;(function(r){r[r.RightClick=2]="RightClick"})(Bg||(Bg={}));class hS extends Fp{constructor(e){super(e,jO,ml(e.event.target))}}hS.activators=[{eventName:"onMouseDown",handler:(r,e)=>{let{nativeEvent:n}=r,{onActivation:s}=e;return n.button===Bg.RightClick?!1:(s?.({event:n}),!0)}}];const og={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class fS extends Fp{constructor(e){super(e,og)}static setup(){return window.addEventListener(og.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(og.move.name,e)};function e(){}}}fS.activators=[{eventName:"onTouchStart",handler:(r,e)=>{let{nativeEvent:n}=r,{onActivation:s}=e;const{touches:o}=n;return o.length>1?!1:(s?.({event:n}),!0)}}];var Su;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(Su||(Su={}));var ff;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(ff||(ff={}));function BO(r){let{acceleration:e,activator:n=Su.Pointer,canScroll:s,draggingRect:o,enabled:u,interval:h=5,order:m=ff.TreeOrder,pointerCoordinates:g,scrollableAncestors:p,scrollableAncestorRects:E,delta:T,threshold:S}=r;const x=HO({delta:T,disabled:!u}),[L,z]=nO(),q=Z.useRef({x:0,y:0}),se=Z.useRef({x:0,y:0}),he=Z.useMemo(()=>{switch(n){case Su.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case Su.DraggableRect:return o}},[n,o,g]),oe=Z.useRef(null),be=Z.useCallback(()=>{const pe=oe.current;if(!pe)return;const R=q.current.x*se.current.x,w=q.current.y*se.current.y;pe.scrollBy(R,w)},[]),de=Z.useMemo(()=>m===ff.TreeOrder?[...p].reverse():p,[m,p]);Z.useEffect(()=>{if(!u||!p.length||!he){z();return}for(const pe of de){if(s?.(pe)===!1)continue;const R=p.indexOf(pe),w=E[R];if(!w)continue;const{direction:C,speed:O}=NO(pe,w,he,e,S);for(const D of["x","y"])x[D][C[D]]||(O[D]=0,C[D]=0);if(O.x>0||O.y>0){z(),oe.current=pe,L(be,h),q.current=O,se.current=C;return}}q.current={x:0,y:0},se.current={x:0,y:0},z()},[e,be,s,z,u,h,JSON.stringify(he),JSON.stringify(x),L,p,de,E,JSON.stringify(S)])}const qO={x:{[En.Backward]:!1,[En.Forward]:!1},y:{[En.Backward]:!1,[En.Forward]:!1}};function HO(r){let{delta:e,disabled:n}=r;const s=Lg(e);return Ju(o=>{if(n||!s||!o)return qO;const u={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[En.Backward]:o.x[En.Backward]||u.x===-1,[En.Forward]:o.x[En.Forward]||u.x===1},y:{[En.Backward]:o.y[En.Backward]||u.y===-1,[En.Forward]:o.y[En.Forward]||u.y===1}}},[n,e,s])}function FO(r,e){const n=e!=null?r.get(e):void 0,s=n?n.node.current:null;return Ju(o=>{var u;return e==null?null:(u=s??o)!=null?u:null},[s,e])}function GO(r,e){return Z.useMemo(()=>r.reduce((n,s)=>{const{sensor:o}=s,u=o.activators.map(h=>({eventName:h.eventName,handler:e(h.handler,s)}));return[...n,...u]},[]),[r,e])}var Pu;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(Pu||(Pu={}));var qg;(function(r){r.Optimized="optimized"})(qg||(qg={}));const mT=new Map;function KO(r,e){let{dragging:n,dependencies:s,config:o}=e;const[u,h]=Z.useState(null),{frequency:m,measure:g,strategy:p}=o,E=Z.useRef(r),T=q(),S=ku(T),x=Z.useCallback(function(se){se===void 0&&(se=[]),!S.current&&h(he=>he===null?se:he.concat(se.filter(oe=>!he.includes(oe))))},[S]),L=Z.useRef(null),z=Ju(se=>{if(T&&!n)return mT;if(!se||se===mT||E.current!==r||u!=null){const he=new Map;for(let oe of r){if(!oe)continue;if(u&&u.length>0&&!u.includes(oe.id)&&oe.rect.current){he.set(oe.id,oe.rect.current);continue}const be=oe.node.current,de=be?new Hp(g(be),be):null;oe.rect.current=de,de&&he.set(oe.id,de)}return he}return se},[r,u,n,T,g]);return Z.useEffect(()=>{E.current=r},[r]),Z.useEffect(()=>{T||x()},[n,T]),Z.useEffect(()=>{u&&u.length>0&&h(null)},[JSON.stringify(u)]),Z.useEffect(()=>{T||typeof m!="number"||L.current!==null||(L.current=setTimeout(()=>{x(),L.current=null},m))},[m,T,x,...s]),{droppableRects:z,measureDroppableContainers:x,measuringScheduled:u!=null};function q(){switch(p){case Pu.Always:return!1;case Pu.BeforeDragging:return n;default:return!n}}}function dS(r,e){return Ju(n=>r?n||(typeof e=="function"?e(r):r):null,[e,r])}function QO(r,e){return dS(r,e)}function $O(r){let{callback:e,disabled:n}=r;const s=Bp(e),o=Z.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(s)},[s,n]);return Z.useEffect(()=>()=>o?.disconnect(),[o]),o}function Pf(r){let{callback:e,disabled:n}=r;const s=Bp(e),o=Z.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(s)},[n]);return Z.useEffect(()=>()=>o?.disconnect(),[o]),o}function YO(r){return new Hp(Wu(r),r)}function gT(r,e,n){e===void 0&&(e=YO);const[s,o]=Z.useState(null);function u(){o(g=>{if(!r)return null;if(r.isConnected===!1){var p;return(p=g??n)!=null?p:null}const E=e(r);return JSON.stringify(g)===JSON.stringify(E)?g:E})}const h=$O({callback(g){if(r)for(const p of g){const{type:E,target:T}=p;if(E==="childList"&&T instanceof HTMLElement&&T.contains(r)){u();break}}}}),m=Pf({callback:u});return la(()=>{u(),r?(m?.observe(r),h?.observe(document.body,{childList:!0,subtree:!0})):(m?.disconnect(),h?.disconnect())},[r]),s}function XO(r){const e=dS(r);return nS(r,e)}const pT=[];function ZO(r){const e=Z.useRef(r),n=Ju(s=>r?s&&s!==pT&&r&&e.current&&r.parentNode===e.current.parentNode?s:qp(r):pT,[r]);return Z.useEffect(()=>{e.current=r},[r]),n}function JO(r){const[e,n]=Z.useState(null),s=Z.useRef(r),o=Z.useCallback(u=>{const h=sg(u.target);h&&n(m=>m?(m.set(h,jg(h)),new Map(m)):null)},[]);return Z.useEffect(()=>{const u=s.current;if(r!==u){h(u);const m=r.map(g=>{const p=sg(g);return p?(p.addEventListener("scroll",o,{passive:!0}),[p,jg(p)]):null}).filter(g=>g!=null);n(m.length?new Map(m):null),s.current=r}return()=>{h(r),h(u)};function h(m){m.forEach(g=>{const p=sg(g);p?.removeEventListener("scroll",o)})}},[o,r]),Z.useMemo(()=>r.length?e?Array.from(e.values()).reduce((u,h)=>$o(u,h),nr):lS(r):nr,[r,e])}function yT(r,e){e===void 0&&(e=[]);const n=Z.useRef(null);return Z.useEffect(()=>{n.current=null},e),Z.useEffect(()=>{const s=r!==nr;s&&!n.current&&(n.current=r),!s&&n.current&&(n.current=null)},[r]),n.current?cf(r,n.current):nr}function WO(r){Z.useEffect(()=>{if(!Vf)return;const e=r.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of e)n?.()}},r.map(e=>{let{sensor:n}=e;return n}))}function e4(r,e){return Z.useMemo(()=>r.reduce((n,s)=>{let{eventName:o,handler:u}=s;return n[o]=h=>{u(h,e)},n},{}),[r,e])}function mS(r){return Z.useMemo(()=>r?RO(r):null,[r])}const _T=[];function t4(r,e){e===void 0&&(e=Wu);const[n]=r,s=mS(n?oi(n):null),[o,u]=Z.useState(_T);function h(){u(()=>r.length?r.map(g=>aS(g)?s:new Hp(e(g),g)):_T)}const m=Pf({callback:h});return la(()=>{m?.disconnect(),h(),r.forEach(g=>m?.observe(g))},[r]),o}function n4(r){if(!r)return null;if(r.children.length>1)return r;const e=r.children[0];return Zu(e)?e:r}function i4(r){let{measure:e}=r;const[n,s]=Z.useState(null),o=Z.useCallback(p=>{for(const{target:E}of p)if(Zu(E)){s(T=>{const S=e(E);return T?{...T,width:S.width,height:S.height}:S});break}},[e]),u=Pf({callback:o}),h=Z.useCallback(p=>{const E=n4(p);u?.disconnect(),E&&u?.observe(E),s(E?e(E):null)},[e,u]),[m,g]=uf(h);return Z.useMemo(()=>({nodeRef:m,rect:n,setRef:g}),[n,m,g])}const r4=[{sensor:Gp,options:{}},{sensor:cS,options:{}}],s4={current:{}},jh={draggable:{measure:cT},droppable:{measure:cT,strategy:Pu.WhileDragging,frequency:qg.Optimized},dragOverlay:{measure:Wu}};class Au extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,s;return(n=(s=this.get(e))==null?void 0:s.node.current)!=null?n:void 0}}const a4={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Au,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:hf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:jh,measureDroppableContainers:hf,windowRect:null,measuringScheduled:!1},o4={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:hf,draggableNodes:new Map,over:null,measureDroppableContainers:hf},Lf=Z.createContext(o4),l4=Z.createContext(a4);function u4(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Au}}}function c4(r,e){switch(e.type){case fn.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case fn.DragMove:return r.draggable.active==null?r:{...r,draggable:{...r.draggable,translate:{x:e.coordinates.x-r.draggable.initialCoordinates.x,y:e.coordinates.y-r.draggable.initialCoordinates.y}}};case fn.DragEnd:case fn.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case fn.RegisterDroppable:{const{element:n}=e,{id:s}=n,o=new Au(r.droppable.containers);return o.set(s,n),{...r,droppable:{...r.droppable,containers:o}}}case fn.SetDroppableDisabled:{const{id:n,key:s,disabled:o}=e,u=r.droppable.containers.get(n);if(!u||s!==u.key)return r;const h=new Au(r.droppable.containers);return h.set(n,{...u,disabled:o}),{...r,droppable:{...r.droppable,containers:h}}}case fn.UnregisterDroppable:{const{id:n,key:s}=e,o=r.droppable.containers.get(n);if(!o||s!==o.key)return r;const u=new Au(r.droppable.containers);return u.delete(n),{...r,droppable:{...r.droppable,containers:u}}}default:return r}}function h4(r){let{disabled:e}=r;const{active:n,activatorEvent:s,draggableNodes:o}=Z.useContext(Lf),u=Lg(s),h=Lg(n?.id);return Z.useEffect(()=>{if(!e&&!s&&u&&h!=null){if(!eS(u)||document.activeElement===u.target)return;const m=o.get(h);if(!m)return;const{activatorNode:g,node:p}=m;if(!g.current&&!p.current)return;requestAnimationFrame(()=>{for(const E of[g.current,p.current]){if(!E)continue;const T=sO(E);if(T){T.focus();break}}})}},[s,e,o,h,u]),null}function f4(r,e){let{transform:n,...s}=e;return r!=null&&r.length?r.reduce((o,u)=>u({transform:o,...s}),n):n}function d4(r){return Z.useMemo(()=>({draggable:{...jh.draggable,...r?.draggable},droppable:{...jh.droppable,...r?.droppable},dragOverlay:{...jh.dragOverlay,...r?.dragOverlay}}),[r?.draggable,r?.droppable,r?.dragOverlay])}function m4(r){let{activeNode:e,measure:n,initialRect:s,config:o=!0}=r;const u=Z.useRef(!1),{x:h,y:m}=typeof o=="boolean"?{x:o,y:o}:o;la(()=>{if(!h&&!m||!e){u.current=!1;return}if(u.current||!s)return;const p=e?.node.current;if(!p||p.isConnected===!1)return;const E=n(p),T=nS(E,s);if(h||(T.x=0),m||(T.y=0),u.current=!0,Math.abs(T.x)>0||Math.abs(T.y)>0){const S=iS(p);S&&S.scrollBy({top:T.y,left:T.x})}},[e,h,m,s,n])}const gS=Z.createContext({...nr,scaleX:1,scaleY:1});var Bs;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(Bs||(Bs={}));const g4=Z.memo(function(e){var n,s,o,u;let{id:h,accessibility:m,autoScroll:g=!0,children:p,sensors:E=r4,collisionDetection:T=vO,measuring:S,modifiers:x,...L}=e;const z=Z.useReducer(c4,void 0,u4),[q,se]=z,[he,oe]=hO(),[be,de]=Z.useState(Bs.Uninitialized),pe=be===Bs.Initialized,{draggable:{active:R,nodes:w,translate:C},droppable:{containers:O}}=q,D=R!=null?w.get(R):null,k=Z.useRef({initial:null,translated:null}),I=Z.useMemo(()=>{var He;return R!=null?{id:R,data:(He=D?.data)!=null?He:s4,rect:k}:null},[R,D]),qe=Z.useRef(null),[ht,J]=Z.useState(null),[ae,ve]=Z.useState(null),Me=ku(L,Object.values(L)),je=kf("DndDescribedBy",h),M=Z.useMemo(()=>O.getEnabled(),[O]),W=d4(S),{droppableRects:ce,measureDroppableContainers:ue,measuringScheduled:ye}=KO(M,{dragging:pe,dependencies:[C.x,C.y],config:W.droppable}),we=FO(w,R),Le=Z.useMemo(()=>ae?Ug(ae):null,[ae]),xt=Fi(),ot=QO(we,W.draggable.measure);m4({activeNode:R!=null?w.get(R):null,config:xt.layoutShiftCompensation,initialRect:ot,measure:W.draggable.measure});const Bt=gT(we,W.draggable.measure,ot),Ti=gT(we?we.parentElement:null),Vn=Z.useRef({activatorEvent:null,active:null,activeNode:we,collisionRect:null,collisions:null,droppableRects:ce,draggableNodes:w,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),zi=O.getNodeFor((n=Vn.current.over)==null?void 0:n.id),Yt=i4({measure:W.dragOverlay.measure}),li=(s=Yt.nodeRef.current)!=null?s:we,kn=pe?(o=Yt.rect)!=null?o:Bt:null,ir=!!(Yt.nodeRef.current&&Yt.rect),ji=XO(ir?null:Bt),bt=mS(li?oi(li):null),lt=ZO(pe?zi??we:null),qn=t4(lt),rr=f4(x,{transform:{x:C.x-ji.x,y:C.y-ji.y,scaleX:1,scaleY:1},activatorEvent:ae,active:I,activeNodeRect:Bt,containerNodeRect:Ti,draggingNodeRect:kn,over:Vn.current.over,overlayNodeRect:Yt.rect,scrollableAncestors:lt,scrollableAncestorRects:qn,windowRect:bt}),sr=Le?$o(Le,C):null,Xt=JO(lt),Bi=yT(Xt),Ar=yT(Xt,[Bt]),Hn=$o(rr,Bi),An=kn?bO(kn,rr):null,qi=I&&An?T({active:I,collisionRect:An,droppableRects:ce,droppableContainers:M,pointerCoordinates:sr}):null,wr=yO(qi,"id"),[Fn,Rr]=Z.useState(null),Gn=ir?rr:$o(rr,Ar),qt=EO(Gn,(u=Fn?.rect)!=null?u:null,Bt),mn=Z.useRef(null),St=Z.useCallback((He,At)=>{let{sensor:wt,options:Pt}=At;if(qe.current==null)return;const gn=w.get(qe.current);if(!gn)return;const Zt=He.nativeEvent,Mt=new wt({active:qe.current,activeNode:gn,event:Zt,options:Pt,context:Vn,onAbort(ft){if(!w.get(ft))return;const{onDragAbort:Ht}=Me.current,le={id:ft};Ht?.(le),he({type:"onDragAbort",event:le})},onPending(ft,dt,Ht,le){if(!w.get(ft))return;const{onDragPending:et}=Me.current,Nt={id:ft,constraint:dt,initialCoordinates:Ht,offset:le};et?.(Nt),he({type:"onDragPending",event:Nt})},onStart(ft){const dt=qe.current;if(dt==null)return;const Ht=w.get(dt);if(!Ht)return;const{onDragStart:le}=Me.current,ln={activatorEvent:Zt,active:{id:dt,data:Ht.data,rect:k}};mu.unstable_batchedUpdates(()=>{le?.(ln),de(Bs.Initializing),se({type:fn.DragStart,initialCoordinates:ft,active:dt}),he({type:"onDragStart",event:ln}),J(mn.current),ve(Zt)})},onMove(ft){se({type:fn.DragMove,coordinates:ft})},onEnd:Q(fn.DragEnd),onCancel:Q(fn.DragCancel)});mn.current=Mt;function Q(ft){return async function(){const{active:Ht,collisions:le,over:ln,scrollAdjustedTranslate:et}=Vn.current;let Nt=null;if(Ht&&et){const{cancelDrop:un}=Me.current;Nt={activatorEvent:Zt,active:Ht,collisions:le,delta:et,over:ln},ft===fn.DragEnd&&typeof un=="function"&&await Promise.resolve(un(Nt))&&(ft=fn.DragCancel)}qe.current=null,mu.unstable_batchedUpdates(()=>{se({type:ft}),de(Bs.Uninitialized),Rr(null),J(null),ve(null),mn.current=null;const un=ft===fn.DragEnd?"onDragEnd":"onDragCancel";if(Nt){const mt=Me.current[un];mt?.(Nt),he({type:un,event:Nt})}})}}},[w]),Cr=Z.useCallback((He,At)=>(wt,Pt)=>{const gn=wt.nativeEvent,Zt=w.get(Pt);if(qe.current!==null||!Zt||gn.dndKit||gn.defaultPrevented)return;const Mt={active:Zt};He(wt,At.options,Mt)===!0&&(gn.dndKit={capturedBy:At.sensor},qe.current=Pt,St(wt,At))},[w,St]),Hi=GO(E,Cr);WO(E),la(()=>{Bt&&be===Bs.Initializing&&de(Bs.Initialized)},[Bt,be]),Z.useEffect(()=>{const{onDragMove:He}=Me.current,{active:At,activatorEvent:wt,collisions:Pt,over:gn}=Vn.current;if(!At||!wt)return;const Zt={active:At,activatorEvent:wt,collisions:Pt,delta:{x:Hn.x,y:Hn.y},over:gn};mu.unstable_batchedUpdates(()=>{He?.(Zt),he({type:"onDragMove",event:Zt})})},[Hn.x,Hn.y]),Z.useEffect(()=>{const{active:He,activatorEvent:At,collisions:wt,droppableContainers:Pt,scrollAdjustedTranslate:gn}=Vn.current;if(!He||qe.current==null||!At||!gn)return;const{onDragOver:Zt}=Me.current,Mt=Pt.get(wr),Q=Mt&&Mt.rect.current?{id:Mt.id,rect:Mt.rect.current,data:Mt.data,disabled:Mt.disabled}:null,ft={active:He,activatorEvent:At,collisions:wt,delta:{x:gn.x,y:gn.y},over:Q};mu.unstable_batchedUpdates(()=>{Rr(Q),Zt?.(ft),he({type:"onDragOver",event:ft})})},[wr]),la(()=>{Vn.current={activatorEvent:ae,active:I,activeNode:we,collisionRect:An,collisions:qi,droppableRects:ce,draggableNodes:w,draggingNode:li,draggingNodeRect:kn,droppableContainers:O,over:Fn,scrollableAncestors:lt,scrollAdjustedTranslate:Hn},k.current={initial:kn,translated:An}},[I,we,qi,An,w,li,kn,ce,O,Fn,lt,Hn]),BO({...xt,delta:C,draggingRect:An,pointerCoordinates:sr,scrollableAncestors:lt,scrollableAncestorRects:qn});const ns=Z.useMemo(()=>({active:I,activeNode:we,activeNodeRect:Bt,activatorEvent:ae,collisions:qi,containerNodeRect:Ti,dragOverlay:Yt,draggableNodes:w,droppableContainers:O,droppableRects:ce,over:Fn,measureDroppableContainers:ue,scrollableAncestors:lt,scrollableAncestorRects:qn,measuringConfiguration:W,measuringScheduled:ye,windowRect:bt}),[I,we,Bt,ae,qi,Ti,Yt,w,O,ce,Fn,ue,lt,qn,W,ye,bt]),Zn=Z.useMemo(()=>({activatorEvent:ae,activators:Hi,active:I,activeNodeRect:Bt,ariaDescribedById:{draggable:je},dispatch:se,draggableNodes:w,over:Fn,measureDroppableContainers:ue}),[ae,Hi,I,Bt,se,je,w,Fn,ue]);return Tn.createElement(tS.Provider,{value:oe},Tn.createElement(Lf.Provider,{value:Zn},Tn.createElement(l4.Provider,{value:ns},Tn.createElement(gS.Provider,{value:qt},p)),Tn.createElement(h4,{disabled:m?.restoreFocus===!1})),Tn.createElement(mO,{...m,hiddenTextDescribedById:je}));function Fi(){const He=ht?.autoScrollEnabled===!1,At=typeof g=="object"?g.enabled===!1:g===!1,wt=pe&&!He&&!At;return typeof g=="object"?{...g,enabled:wt}:{enabled:wt}}}),p4=Z.createContext(null),vT="button",y4="Draggable";function _4(r){let{id:e,data:n,disabled:s=!1,attributes:o}=r;const u=kf(y4),{activators:h,activatorEvent:m,active:g,activeNodeRect:p,ariaDescribedById:E,draggableNodes:T,over:S}=Z.useContext(Lf),{role:x=vT,roleDescription:L="draggable",tabIndex:z=0}=o??{},q=g?.id===e,se=Z.useContext(q?gS:p4),[he,oe]=uf(),[be,de]=uf(),pe=e4(h,e),R=ku(n);la(()=>(T.set(e,{id:e,key:u,node:he,activatorNode:be,data:R}),()=>{const C=T.get(e);C&&C.key===u&&T.delete(e)}),[T,e]);const w=Z.useMemo(()=>({role:x,tabIndex:z,"aria-disabled":s,"aria-pressed":q&&x===vT?!0:void 0,"aria-roledescription":L,"aria-describedby":E.draggable}),[s,x,z,q,L,E.draggable]);return{active:g,activatorEvent:m,activeNodeRect:p,attributes:w,isDragging:q,listeners:s?void 0:pe,node:he,over:S,setNodeRef:oe,setActivatorNodeRef:de,transform:se}}const v4="Droppable",E4={timeout:25};function T4(r){let{data:e,disabled:n=!1,id:s,resizeObserverConfig:o}=r;const u=kf(v4),{active:h,dispatch:m,over:g,measureDroppableContainers:p}=Z.useContext(Lf),E=Z.useRef({disabled:n}),T=Z.useRef(!1),S=Z.useRef(null),x=Z.useRef(null),{disabled:L,updateMeasurementsFor:z,timeout:q}={...E4,...o},se=ku(z??s),he=Z.useCallback(()=>{if(!T.current){T.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{p(Array.isArray(se.current)?se.current:[se.current]),x.current=null},q)},[q]),oe=Pf({callback:he,disabled:L||!h}),be=Z.useCallback((w,C)=>{oe&&(C&&(oe.unobserve(C),T.current=!1),w&&oe.observe(w))},[oe]),[de,pe]=uf(be),R=ku(e);return Z.useEffect(()=>{!oe||!de.current||(oe.disconnect(),T.current=!1,oe.observe(de.current))},[de,oe]),Z.useEffect(()=>(m({type:fn.RegisterDroppable,element:{id:s,key:u,disabled:n,node:de,rect:S,data:R}}),()=>m({type:fn.UnregisterDroppable,key:u,id:s})),[s]),Z.useEffect(()=>{n!==E.current.disabled&&(m({type:fn.SetDroppableDisabled,id:s,key:u,disabled:n}),E.current.disabled=n)},[s,u,n,m]),{active:h,rect:S,isOver:g?.id===s,node:de,over:g,setNodeRef:pe}}const Yo=r=>new Up(r),b4=(r,e,n,s)=>{try{return r.move({from:e,to:n,promotion:s||"q"})}catch{return null}},S4=({id:r,isLight:e,isHighlighted:n=!1,isActive:s=!1,children:o})=>{const{isOver:u,setNodeRef:h}=T4({id:r});return P.jsxs("div",{ref:h,className:`chess-square ${s?"z-50 relative":"overflow-hidden"} ${u?"bg-indigo-500/60 shadow-[inset_0_0_20px_rgba(255,255,255,0.2)] z-10":n?e?"bg-indigo-400/50 shadow-inner":"bg-indigo-600/50 shadow-inner":e?"bg-[#cbd5e1] text-slate-700 shadow-[inset_0_1px_4px_rgba(255,255,255,0.3)]":"bg-[#334155] text-slate-400 shadow-[inset_0_2px_4px_rgba(0,0,0,0.3)]"}`,children:[P.jsx("div",{className:`absolute top-1 left-1 text-[10px] font-black uppercase tracking-tighter opacity-20 pointer-events-none ${e?"text-slate-900":"text-slate-100"}`,children:r}),P.jsx("div",{className:"relative w-full h-full overflow-visible z-10",children:o})]})},A4={w:{p:"",r:"",n:"",b:"",q:"",k:""},b:{p:"",r:"",n:"",b:"",q:"",k:""}},w4=({id:r,type:e,color:n,isDraggable:s=!0})=>{const{attributes:o,listeners:u,setNodeRef:h,transform:m,isDragging:g}=_4({id:r,disabled:!s,data:{type:e,color:n}}),p={transform:zg.Translate.toString(m),transition:g?"none":"transform 120ms ease-out",zIndex:g?9999:20};return P.jsx("div",{ref:h,style:p,...u,...o,className:`chess-piece transition-transform duration-120 ease-out ${g?"scale-112 drop-shadow-2xl z-[9999]":"hover:scale-103 z-20"} ${s?"cursor-grab active:cursor-grabbing":"grayscale-[0.2] opacity-90 cursor-default"} text-slate-950 drop-shadow-sm`,children:P.jsx("div",{className:`
        flex items-center justify-center w-full h-full 
        ${n==="w"?"drop-shadow-[0_2px_0_rgba(255,255,255,0.8)]":"drop-shadow-[0_2px_0_rgba(0,0,0,0.5)]"}
      `,children:A4[n][e]})})},R4=({onMove:r,initialFen:e,playerColor:n="w",isGameOver:s=!1})=>{const[o,u]=Z.useState(()=>Yo(e)),[h,m]=Z.useState([]),[g,p]=Z.useState(null);Tn.useEffect(()=>{e&&e!==o.fen()&&u(Yo(e))},[e]);const E=gO(rg(fS,{activationConstraint:{delay:80,tolerance:8}}),rg(Gp),rg(hS)),T=Z.useCallback(L=>{const{active:z,over:q}=L;if(m([]),p(null),!q)return;const se=z.id,he=q.id,oe=Yo(o.fen());b4(oe,se,he)&&(u(oe),r&&r(oe.fen()))},[o,r]),S=Z.useCallback(L=>{p(L);const z=L,q=o.get(z);if(s||!q||q.color!==n||o.turn()!==n){m([]);return}const se=o.moves({square:z,verbose:!0}).map(he=>he.to);m(se)},[o,n]),x=()=>{const L=[],z=["a","b","c","d","e","f","g","h"],q=["8","7","6","5","4","3","2","1"],se=n==="w"?q:[...q].reverse(),he=n==="w"?z:[...z].reverse();for(const oe of se)for(const be of he){const de=`${be}${oe}`,pe=o.get(de),R=(z.indexOf(be)+q.indexOf(oe))%2===0,w=!!pe&&pe.color===n&&o.turn()===n&&!s,C=h.includes(de),O=de===g;L.push(P.jsx(S4,{id:de,isLight:R,isHighlighted:C,isActive:O,children:pe&&P.jsx(w4,{id:de,type:pe.type,color:pe.color,isDraggable:w})},de))}return L};return P.jsx(g4,{sensors:E,onDragEnd:T,onDragStart:L=>S(L.active.id),children:P.jsx("div",{className:"p-3 lg:p-4 bg-slate-800 rounded-[2rem] lg:rounded-[2.5rem] shadow-[0_0_50px_-12px_rgba(99,102,241,0.25)] border-4 border-slate-700/50 ring-4 ring-slate-900/50",style:{touchAction:"none"},children:P.jsx("div",{className:"grid grid-cols-8 gap-0 rounded-2xl lg:rounded-3xl overflow-hidden border border-slate-700/30 shadow-inner",style:{width:"min(92vw, 720px)",height:"min(92vw, 720px)",gridTemplateColumns:"repeat(8, 1fr)"},children:x()})})})},C4=()=>Math.random().toString(36).substring(2,8).toUpperCase(),ET="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",pS=r=>{const[e,n]=Z.useState(null),[s,o]=Z.useState(null),[u,h]=Z.useState(!0),[m,g]=Z.useState(!0);Z.useEffect(()=>{const z=Vg();Og(z).then(q=>{o(q.user.uid)}).catch(q=>{console.error("Auth failed",q)}).finally(()=>g(!1))},[]);const p=async()=>{if(s)return s;const z=Vg(),q=await Og(z);return o(q.user.uid),q.user.uid};return Z.useEffect(()=>{if(!Kr||!yn){console.warn("Firebase not configured; room sync disabled."),h(!1);return}if(!r){n(null),h(!1);return}h(!0);const z=Ba(ja(yn,"rooms"),r),q=y1(z,se=>{se.exists()?n(se.data()):n(null),h(!1)},se=>{console.error("Room subscription error",se),n(null),h(!1)});return()=>q()},[r]),{room:e,userId:s,loading:u,isAuthLoading:m,createRoom:async()=>{if(!Kr||!yn)throw new Error("Firebase not configured");const z=await p(),q=C4(),se=Ba(ja(yn,"rooms"),q);return await p1(se,{fen:ET,whitePlayer:z,blackPlayer:"",turn:"w",status:"active",winner:"",resultReason:""}),q},joinRoom:async z=>{if(!Kr||!yn)throw new Error("Firebase not configured");const q=await p(),se=Ba(ja(yn,"rooms"),z);await UE(yn,async he=>{const oe=await he.get(se);if(!oe.exists())throw new Error("Room not found");const de={...oe.data()};de.whitePlayer?!de.blackPlayer&&de.whitePlayer!==q&&(de.blackPlayer=q):de.whitePlayer=q,he.update(se,de)})},updateMove:async z=>{if(!Kr||!yn||!r)return;const q=Ba(ja(yn,"rooms"),r);await UE(yn,async se=>{const he=await se.get(q);if(!he.exists())return;const oe=he.data();if(oe.status&&oe.status!=="active")return;const be=new Up(z),de=be.turn();let pe="active",R="",w="";be.isCheckmate()?(pe="checkmate",R=de==="w"?"b":"w",w="checkmate"):be.isStalemate&&be.isStalemate()?(pe="stalemate",R="",w="stalemate"):be.isDraw()&&(pe="draw",R="",w="draw"),se.update(q,{fen:z,turn:de,status:pe,winner:R,resultReason:w})})},resignGame:async z=>{if(!Kr||!yn||!r)return;const q=Ba(ja(yn,"rooms"),r);await LE(q,{status:"resigned",winner:z==="w"?"b":"w",resultReason:"resigned"})},resetGame:async()=>{if(!Kr||!yn||!r)return;const z=Ba(ja(yn,"rooms"),r);await LE(z,{fen:ET,turn:"w",status:"active",winner:"",resultReason:""})}}},I4={p:10,n:30,b:30,r:50,q:90,k:900},TT=[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,-.5,-1,0,0,-1,-.5,.5],[.5,1,1,-2,-2,1,1,.5],[0,0,0,0,0,0,0,0]],bT=[[-5,-4,-3,-3,-3,-3,-4,-5],[-4,-2,0,0,0,0,-2,-4],[-3,0,1,1.5,1.5,1,0,-3],[-3,.5,1.5,2,2,1.5,.5,-3],[-3,0,1.5,2,2,1.5,0,-3],[-3,.5,1,1.5,1.5,1,.5,-3],[-4,-2,0,.5,.5,0,-2,-4],[-5,-4,-3,-3,-3,-3,-4,-5]],x4=r=>{let e=0;const n=r.board();for(let s=0;s<8;s++)for(let o=0;o<8;o++){const u=n[s][o];if(u){const h=I4[u.type];let m=0;u.type==="p"&&(m=u.color==="w"?TT[s][o]:TT[7-s][o]),u.type==="n"&&(m=u.color==="w"?bT[s][o]:bT[7-s][o]),u.color==="w"?e+=h+m*.1:e-=h+m*.1}}return e},Hg=(r,e,n,s,o)=>{if(e===0||r.isGameOver())return-x4(r);const u=r.moves();if(o){let h=-1/0;for(const m of u){r.move(m);const g=Hg(r,e-1,n,s,!1);if(r.undo(),h=Math.max(h,g),n=Math.max(n,g),s<=n)break}return h}else{let h=1/0;for(const m of u){r.move(m);const g=Hg(r,e-1,n,s,!0);if(r.undo(),h=Math.min(h,g),s=Math.min(s,g),s<=n)break}return h}},N4=(r,e="Normal")=>{const n=r.moves();if(n.length===0)return null;if(e==="Easy"&&Math.random()>.2)return n[Math.floor(Math.random()*n.length)];let s=null,o=1/0;n.sort((h,m)=>{const g=h.includes("x")?1:0;return(m.includes("x")?1:0)-g});const u=e==="Easy"?1:e==="Hard"?3:2;for(const h of n){r.move(h);const m=Hg(r,u,-1/0,1/0,!0);r.undo(),m<o&&(o=m,s=h)}return s||n[0]},D4=({roomId:r="",mode:e="online",aiDifficulty:n="Normal",onExit:s})=>{const o=pS(e==="online"?r:null),[u,h]=Z.useState(()=>Yo()),[m,g]=Z.useState(u.fen()),[p,E]=Z.useState("active"),[T,S]=Z.useState(""),x=e==="local",L=x?{fen:m,turn:u.turn(),whitePlayer:"local-white",blackPlayer:"local-black",status:p,winner:T}:o.room,z=x?!1:o.loading,q=ue=>{const ye=Yo(ue);h(ye),g(ue),ye.isCheckmate()?(E("checkmate"),S(ye.turn()==="w"?"b":"w")):ye.isDraw()?E("draw"):ye.isStalemate&&ye.isStalemate()&&E("stalemate")};Z.useEffect(()=>{if(x&&u.turn()==="b"&&p==="active"){const ue=setTimeout(()=>{const ye=N4(u,n);ye&&(u.move(ye),q(u.fen()))},500);return()=>clearTimeout(ue)}},[m,x,p,n]);const se=()=>{const ue=Yo();h(ue),g(ue.fen()),E("active"),S(""),R(0),C(0),D(0)},he=x?q:o.updateMove,oe=x?ue=>{E("active"),S(ue==="w"?"b":"w"),alert(`${ue==="w"?"White":"Black"} resigned.`)}:o.resignGame,be=x?se:o.resetGame,de=x?L?.turn==="w"?"local-white":"local-black":o.userId,[pe,R]=Tn.useState(0),[w,C]=Tn.useState(0),[O,D]=Tn.useState(0);if(Tn.useEffect(()=>{!x&&r&&o.joinRoom&&o.joinRoom(r)},[r,x]),Tn.useEffect(()=>{if(!L||L.status&&L.status!=="active")return;const ue=window.setInterval(()=>{R(ye=>ye+1),C(ye=>ye+(L.turn==="w"?1:0)),D(ye=>ye+(L.turn==="b"?1:0))},1e3);return()=>window.clearInterval(ue)},[L?.turn,L?.status]),z)return P.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-6 animate-pulse",children:[P.jsx("div",{className:"relative shadow-2xl shadow-indigo-500/20 rounded-full p-4",children:P.jsx(yw,{className:"w-16 h-16 text-indigo-500 animate-spin"})}),P.jsxs("div",{className:"text-center space-y-2",children:[P.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest",children:"Entering Arena"}),P.jsx("p",{className:"text-slate-500 font-medium",children:"Synchronizing with the global lattice..."})]})]});if(!L)return P.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[P.jsxs("div",{className:"text-center space-y-4",children:[P.jsx("h2",{className:"text-5xl font-black text-white italic",children:"Room Dissolved"}),P.jsx("p",{className:"text-slate-400 text-lg",children:"The arena you seek no longer exists or the link is expired."})]}),P.jsx("button",{onClick:s,className:"btn-premium px-10 py-4 text-xl",children:"Return to Lobby"})]});const k=L.whitePlayer===de||x,I=L.blackPlayer===de,qe=x||de===L.whitePlayer?"w":de===L.blackPlayer?"b":"w",ht=L.turn===qe,J=new Up(L.fen),ae={isCheck:J.isCheck(),isCheckmate:J.isCheckmate(),isDraw:J.isDraw(),isStalemate:typeof J.isStalemate=="function"?J.isStalemate():!1,turn:J.turn()},ve=L.status??"active",Me=L.winner??"",je=ve!=="active",M=ue=>{const ye=Math.floor(ue/60).toString().padStart(2,"0"),we=(ue%60).toString().padStart(2,"0");return`${ye}:${we}`},W=ve==="checkmate"?`Checkmate  ${Me==="w"?"White":"Black"} wins`:ve==="stalemate"?"Stalemate  Draw":ve==="draw"?"Draw":ve==="resigned"?`Resigned  ${Me==="w"?"White":"Black"} wins`:ae.isCheck?`${ae.turn==="w"?"White":"Black"} is in check`:ht?"Your Turn":"Waiting...",ce=()=>{navigator.clipboard.writeText(r),alert("Room ID copied to clipboard!")};return P.jsxs("div",{className:"flex flex-col items-center gap-8 lg:gap-12 py-6 lg:py-10 w-full animate-in fade-in duration-700",children:[P.jsxs("header",{className:"w-full max-w-6xl flex items-center justify-between px-4 lg:px-6",children:[P.jsxs("button",{onClick:s,className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all font-bold uppercase tracking-widest text-xs",children:[P.jsx("div",{className:"p-2 rounded-xl bg-slate-900 border border-slate-800 group-hover:border-slate-700 group-hover:-translate-x-1 transition-transform",children:P.jsx(Rh,{size:18})}),"Back"]}),!x&&P.jsx("div",{className:"flex items-center gap-4",children:P.jsxs("div",{className:"liquid-glass px-6 py-3 flex items-center gap-6",children:[P.jsxs("div",{className:"flex flex-col gap-0.5",children:[P.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-slate-500 font-black",children:"Arena ID"}),P.jsx("code",{className:"text-indigo-300 font-mono font-bold",children:r})]}),P.jsx("div",{className:"h-8 w-px bg-slate-800"}),P.jsxs("div",{className:"flex items-center gap-3",children:[P.jsx("button",{onClick:ce,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:P.jsx(dw,{size:18})}),P.jsx("button",{className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:P.jsx(ww,{size:18})})]})]})}),x&&P.jsx("div",{className:"px-6 py-3 liquid-glass text-indigo-300 font-bold uppercase tracking-widest text-xs",children:"Single Player Mode"})]}),P.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-6 lg:gap-16 w-full max-w-7xl px-4 lg:px-6",children:[P.jsxs("div",{className:"relative group w-full flex justify-center max-w-full overflow-visible",children:[P.jsx("div",{className:"absolute -inset-4 bg-linear-to-r from-indigo-500 to-pink-500 rounded-[2.5rem] blur-2xl opacity-10 group-hover:opacity-20 transition-opacity"}),P.jsx(R4,{initialFen:L.fen,onMove:he,playerColor:qe,isGameOver:je})]}),P.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-6 lg:gap-8 mt-0 lg:mt-0",children:[P.jsxs("div",{className:"liquid-glass p-5 lg:p-8 space-y-6 lg:space-y-8 border-l-4 border-l-indigo-500",children:[P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:"Game Status"}),P.jsxs("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-2 ${ve==="active"?ht?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-slate-800 text-slate-500":"bg-indigo-500/10 text-indigo-300 border border-indigo-500/30"}`,children:[P.jsx("span",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${ve==="active"?"bg-green-500":"bg-indigo-400"}`}),x?L.turn==="w"?" White Turn":" Black Turn":W]})]}),ve==="active"&&ae.isCheck&&P.jsxs("div",{className:"p-3 rounded-2xl bg-amber-500/10 border border-amber-500/30 text-amber-200 text-[10px] lg:text-xs font-black uppercase tracking-widest",children:["CHECK! ",ae.turn==="w"?"White":"Black"," to move."]}),je&&P.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/10 border border-indigo-500/30 text-indigo-100 text-sm lg:text-base font-bold",children:W}),P.jsxs("div",{className:"space-y-4",children:[P.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 p-4 rounded-2xl bg-slate-900/60 border border-slate-800/80 text-[10px] lg:text-xs font-bold uppercase tracking-widest",children:[P.jsxs("div",{className:"space-y-1",children:[P.jsx("div",{className:"text-slate-500",children:"Time"}),P.jsx("div",{className:"text-white text-base",children:M(pe)})]}),P.jsxs("div",{className:"space-y-1",children:[P.jsx("div",{className:"text-slate-500",children:"White"}),P.jsx("div",{className:"text-emerald-300 text-base",children:M(w)})]}),P.jsxs("div",{className:"space-y-1",children:[P.jsx("div",{className:"text-slate-500",children:"Black"}),P.jsx("div",{className:"text-sky-300 text-base",children:M(O)})]})]}),!x&&P.jsxs(P.Fragment,{children:[P.jsxs("div",{className:"flex items-center gap-3 lg:gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[P.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${k?"bg-white text-slate-950":"bg-slate-800 text-slate-400"}`,children:"W"}),P.jsxs("div",{className:"flex-1",children:[P.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"White Player"}),P.jsx("div",{className:"text-xs text-slate-500 font-medium",children:L.whitePlayer===de?"Connected (You)":L.whitePlayer?"Opponent Ready":"Awaiting Entry..."})]})]}),P.jsxs("div",{className:"flex items-center gap-3 lg:gap-4 p-4 rounded-2xl bg-slate-900/50 border border-slate-800/80",children:[P.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-bold ${I?"bg-indigo-500 text-white":"bg-slate-800 text-slate-400"}`,children:"B"}),P.jsxs("div",{className:"flex-1",children:[P.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"Black Player"}),P.jsx("div",{className:"text-xs text-slate-500 font-medium",children:L.blackPlayer===de?"Connected (You)":L.blackPlayer?"Opponent Ready":"Awaiting Entry..."})]})]})]})]}),P.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[P.jsxs("button",{disabled:je,onClick:()=>oe(qe),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-slate-800 bg-slate-900/60 text-slate-200 font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:border-red-500/50 hover:text-red-200 transition",children:[P.jsx(gw,{size:18}),"Resign"]}),P.jsxs("button",{disabled:!je&&!x,onClick:()=>be(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 text-indigo-100 font-bold uppercase tracking-wide disabled:opacity-40 disabled:cursor-not-allowed hover:bg-indigo-500/20 transition",children:[P.jsx(Sw,{size:18}),"Rematch"]})]})]}),!x&&P.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[P.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[P.jsx(wT,{size:20,className:"mx-auto text-slate-600"}),P.jsx("div",{className:"text-xl font-black text-white italic",children:L.whitePlayer&&L.blackPlayer?"2/2":L.whitePlayer||L.blackPlayer?"1/2":"0/2"}),P.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Connected"})]}),P.jsxs("div",{className:"liquid-glass p-6 text-center space-y-2",children:[P.jsx(Nw,{size:20,className:"mx-auto text-indigo-400"}),P.jsx("div",{className:"text-xl font-black text-white italic",children:"24ms"}),P.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Latency"})]})]})]})]}),P.jsx("footer",{className:"text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px] pt-10",children:"Transparent Strategy Arena"})]})};function O4(){const[r,e]=Z.useState("menu"),[n,s]=Z.useState(null),[o,u]=Z.useState("Normal"),{createRoom:h,isAuthLoading:m}=pS(null),g=async()=>{const S=await h();S&&(s(S),e("online"))},p=S=>{S.trim()&&(s(S),e("online"))},E=S=>{u(S),e("local"),s(null)},T=()=>{s(null),e("menu")};return P.jsxs("main",{className:"relative min-h-screen w-full flex flex-col items-center overflow-x-hidden",children:[P.jsx(iw,{}),P.jsx("div",{className:"container mx-auto px-4 py-8 max-w-7xl w-full overflow-visible",children:r!=="menu"?P.jsx(D4,{roomId:n||"",mode:r==="online"?"online":"local",aiDifficulty:o,onExit:T}):P.jsx(OD,{onCreateRoom:g,onJoinRoom:p,onStartLocal:E,isAuthLoading:m})}),P.jsx("footer",{className:"mt-auto py-8 text-slate-500 text-sm",children:"DragMate  Premium Multiplayer Board Gaming"})]})}nw.createRoot(document.getElementById("root")).render(P.jsx(Z.StrictMode,{children:P.jsx(O4,{})}));
